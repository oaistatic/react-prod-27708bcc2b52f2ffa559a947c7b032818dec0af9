var G=Object.defineProperty,K=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var w=(t,s,n)=>s in t?G(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,d=(t,s)=>{for(var n in s||(s={}))W.call(s,n)&&w(t,n,s[n]);if(v)for(var n of v(s))X.call(s,n)&&w(t,n,s[n]);return t},_=(t,s)=>K(t,O(s));import{E as A,e as z,b as Q,r as c,f as V,j as e,M as h}from"./fg33krlcm0qyi6yw.js";import{H as J,m as Y,_ as Z,C as $,M as L,b4 as ee,bg as te,a9 as B,l as se,b as ne,R as ae}from"./mtk1qztvnb31pw5r.js";import{e6 as oe,db as re,dc as ce,e7 as ie,e8 as le,cf as ue,cM as de,e9 as F,cP as me,ao as pe}from"./k65njl5wlgspihfr.js";const ge="https://help.openai.com/en/articles/11481834",be=({onClose:t})=>{var N;const[C,k]=A.useState(2500),[i,l]=A.useState(!1),{prepareCheckoutSession:p,navigateToCheckout:f}=oe(),b=ne(),o=J(),{country:x}=re(),g=ce({country:x,currentAccount:o,location:"CreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),a=(N=o==null?void 0:o.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?N:"USD",{data:u,isLoading:M,error:R}=ie({ctx:b,currency:a});let y=null;!M&&!R&&u&&(y=u.currencyConfig.amount_per_credit);const T=Y(),I=z(),{data:j}=Q({queryKey:["creditPurchaseRateCard"],queryFn:()=>ae.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),U=c.useCallback(async()=>{if(!i){l(!0);try{const r=o==null?void 0:o.id;if(!r)throw new Error("No account_id found");const S={credit_purchase_data:{quantity:C,unit:"credit",account_id:r},billing_details:g!=null?g:null},q=await p(S);await f(q,{checkoutPayload:S})}catch(r){Z.addError(r),T.warning(I.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}finally{l(!1)}}},[g,I,i,f,C,p,T,o]),H=le(C,300),P=r=>!j||!j[r].price?"N/A":Math.round(H/parseFloat(j[r].price)).toLocaleString();if(g)return e.jsxs($,{isOpen:!0,onClose:t,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(L.Header,{title:e.jsx(h,d({},m.title))}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(h,_(d({},m.description),{values:{link:r=>e.jsx(ee,{href:ge,target:"_blank",children:r})}}))}),y&&e.jsx("div",{className:"mt-6",children:e.jsx(he,{minCredits:500,maxCredits:1e5,increment:250,amountPerCredit:y,currency:a,numCredits:C,setNumCredits:k})}),j&&e.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(ue,{}),e.jsx(h,_(d({},m.amountToAddDescription),{values:{deepResearchCount:P("deep_research_completion"),gpt5proChatCount:P("chat_completion_5_pro"),imagegenCount:P("chat_tool_imagegen")}}))]})]}),e.jsx(L.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(B,{disabled:i,onClick:t,color:"secondary",children:e.jsx(h,d({},m.cancel))}),primaryButton:e.jsx(B,{loading:i,onClick:()=>U(),color:"primary",children:e.jsx(h,d({},m.next))})})]})};function he({numCredits:t,minCredits:s,maxCredits:n,increment:D,amountPerCredit:E,currency:C,setNumCredits:k}){const i=c.useRef(null);c.useEffect(()=>{var a;(a=i.current)==null||a.focus()},[i]);const l=c.useRef(null),p=c.useRef(0),f=c.useCallback(a=>{k(u=>de(u+a,s,n))},[n,s,k]),b=c.useCallback(a=>{const y=300-a*50;return y>25?y:25},[]),o=c.useCallback(a=>{f(a),p.current=0;const u=()=>{p.current+=1,f(a);const M=b(p.current);l.current=setTimeout(u,M)};l.current=setTimeout(u,b(p.current))},[f,b]),x=c.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),g=Math.round(t*E*100)/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(h,d({},m.amountToAdd))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(h,_(d({},m.numCredits),{values:{numCredits:t}}))}),e.jsx("input",{ref:i,name:"Credits",value:g.toLocaleString("en-US",{style:"currency",currency:C,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{disabled:t<=s,onMouseDown:()=>o(-D),onMouseUp:x,onMouseLeave:x,children:e.jsx(me,{className:se("icon",t<=s&&"text-token-text-tertiary")})}),e.jsx(F,{disabled:t>=n,onMouseDown:()=>o(D),onMouseUp:x,onMouseLeave:x,children:e.jsx(pe,{className:"icon"})})]})]})]})}const m=V({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{be as CreditPurchaseModal,he as CreditSelectorButtons};
//# sourceMappingURL=dydcwm1dqf2artli.js.map
