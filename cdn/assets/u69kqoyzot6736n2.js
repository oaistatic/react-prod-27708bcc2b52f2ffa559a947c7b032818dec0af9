const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/j1jsb5rfz3wt3sb5.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css"])))=>i.map(i=>d[i]);
var ye=Object.freeze,ve=Object.defineProperty,We=Object.defineProperties;var Qe=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var Se=(o,e,n)=>e in o?ve(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,j=(o,e)=>{for(var n in e||(e={}))Ce.call(e,n)&&Se(o,n,e[n]);if(ue)for(var n of ue(e))Me.call(e,n)&&Se(o,n,e[n]);return o},oe=(o,e)=>We(o,Qe(e));var me=(o,e)=>{var n={};for(var s in o)Ce.call(o,s)&&e.indexOf(s)<0&&(n[s]=o[s]);if(o!=null&&ue)for(var s of ue(o))e.indexOf(s)<0&&Me.call(o,s)&&(n[s]=o[s]);return n};var Pe=(o,e)=>ye(ve(o,"raw",{value:ye(e||o.slice())}));import{c as ie,e as de,j as t,r as N,M as b,L as $e,a as Oe,f as Fe,v as Je,u as Xe,i as Ze,_ as Ye}from"./fg33krlcm0qyi6yw.js";import{a9 as ae,d as ne,gC as re,h as W,M as ke,g2 as R,vT as X,d9 as ze,g8 as et,b as he,l as be,i6 as tt,b7 as xe,P as _e,r_ as pe,ix as Ae,iy as st,hG as nt,o as ot,gE as rt,sk as at,aY as lt,r$ as ct,gK as it,br as dt,jQ as ut,vU as mt,e as Te,ck as Re,vV as Be,mN as ft,c0 as pt,me as Ue,bm as gt,bn as xt,un as jt,um as Ne,ga as je,I as ht,rZ as bt,iz as yt,ib as St,en as ce,C as vt,T as Ct,i7 as Mt,cU as Pt,hd as kt,bh as Nt,F as Lt,vW as wt,vX as Dt,vY as Le}from"./mtk1qztvnb31pw5r.js";import{C as It}from"./kg06gqasi13as2pn.js";import{bV as Et,qb as $t,qc as Ot,pP as Ft,ik as _t,cK as At,cw as Tt,aw as Rt,d5 as Bt,fT as Ut}from"./k65njl5wlgspihfr.js";import{P as Ge,a as He}from"./ds5jluypo8l1qbwc.js";import{S as Gt}from"./jd69ff7by1jon8od.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";import"./ck1u9icgxosmytry.js";import"./m89x2zftpo6hrypr.js";function Ht(o){"use forget";const e=ie.c(15),n=de(),{preset:s,onSelectPreset:a}=o;let u;e[0]!==a||e[1]!==s?(u=()=>a(s),e[0]=a,e[1]=s,e[2]=u):u=e[2];let i;e[3]!==s.color||e[4]!==s.emoji?(i=t.jsx(Et,{color:s.color,emoji:s.emoji}),e[3]=s.color,e[4]=s.emoji,e[5]=i):i=e[5];let r;e[6]!==n||e[7]!==s.label?(r=n.formatMessage(s.label),e[6]=n,e[7]=s.label,e[8]=r):r=e[8];let l;e[9]!==i||e[10]!==r?(l=t.jsxs("div",{className:"flex gap-1.5",children:[i,r]}),e[9]=i,e[10]=r,e[11]=l):l=e[11];let m;return e[12]!==u||e[13]!==l?(m=t.jsx(ae,{color:"secondary",className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press flex items-center justify-center py-2 ps-2.5 pe-3 font-normal select-none",onFocus:qt,onClick:u,type:"button",children:l}),e[12]=u,e[13]=l,e[14]=m):m=e[14],m}function qt(o){o.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function Vt(o){"use forget";const e=ie.c(65),{isNewProject:n,isPending:s,onSubmit:a,submitTitle:u,planType:i}=o,r=de();let l;e[0]!==o.emoji$||e[1]!==o.theme$||e[2]!==o.title$||e[3]!==o.validationErrors$?(l=()=>{var $,H,z,te;return{title$:($=o.title$)!=null?$:W(""),validationErrors$:(H=o.validationErrors$)!=null?H:W([]),theme$:(z=o.theme$)!=null?z:W(null),emoji$:(te=o.emoji$)!=null?te:W(null),stylePickerOpen$:W(!1),autofilledFromPreset$:W(!1)}},e[0]=o.emoji$,e[1]=o.theme$,e[2]=o.title$,e[3]=o.validationErrors$,e[4]=l):l=e[4];const[m]=N.useState(l),{title$:f,validationErrors$:L,theme$:x,emoji$:h,autofilledFromPreset$:O}=m,v=ne(f),D=ne(L),I=N.useRef(null),B=ne(O);let _;e[5]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[5]=_):_=e[5],N.useEffect(Wt,_);let C;e[6]!==O||e[7]!==h||e[8]!==x||e[9]!==f?(C=$=>{const{color:H,emoji:z,title:te}=$;x.set(H),h.set(z),f.set(te),O.set(!0)},e[6]=O,e[7]=h,e[8]=x,e[9]=f,e[10]=C):C=e[10];const y=C;let S;e[11]!==r?(S=r.formatMessage({id:"A4Fd7M",defaultMessage:"Copenhagen Trip"}),e[11]=r,e[12]=S):S=e[12];let M;e[13]!==f?(M=$=>f.set($.target.value),e[13]=f,e[14]=M):M=e[14];let P;e[15]!==S||e[16]!==M||e[17]!==v?(P=t.jsx("input",{autoFocus:!0,ref:I,className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary col-span-full row-1 w-full resize-none overflow-y-auto rounded-lg border px-2 py-2 ps-9 pe-9 text-sm focus:ring-0",type:"text",name:"projectName",autoComplete:"off",placeholder:S,value:v,onChange:M}),e[15]=S,e[16]=M,e[17]=v,e[18]=P):P=e[18];const E=n?"var(--text-tertiary)":void 0;let w;e[19]!==h||e[20]!==E||e[21]!==x?(w=t.jsx(Ge,{emoji$:h,theme$:x,defaultColor:E}),e[19]=h,e[20]=E,e[21]=x,e[22]=w):w=e[22];let Q;e[23]!==h||e[24]!==w||e[25]!==x?(Q=t.jsx(He,{theme$:x,emoji$:h,children:w}),e[23]=h,e[24]=w,e[25]=x,e[26]=Q):Q=e[26];let U;e[27]!==B||e[28]!==O||e[29]!==h||e[30]!==r||e[31]!==n||e[32]!==x||e[33]!==v||e[34]!==f?(U=n&&B&&v.trim().length>0&&t.jsx("button",{type:"button","aria-label":r.formatMessage({id:"z/7Lq7",defaultMessage:"Clear project name"}),className:"col-span-full row-1 me-2 self-center justify-self-end rounded-full p-1 hover:opacity-80 focus:outline-hidden",onClick:()=>{var $;f.set(""),h.set(null),x.set(null),O.set(!1),($=I.current)==null||$.focus()},children:t.jsx(It,{className:"icon text-token-text-tertiary"})}),e[27]=B,e[28]=O,e[29]=h,e[30]=r,e[31]=n,e[32]=x,e[33]=v,e[34]=f,e[35]=U):U=e[35];let Z;e[36]!==U||e[37]!==P||e[38]!==Q?(Z=t.jsxs("div",{className:"content-sheet-root:contents mb-2 grid grid-cols-[auto_minmax(0,1fr)]",children:[P,Q,U]}),e[36]=U,e[37]=P,e[38]=Q,e[39]=Z):Z=e[39];let V;e[40]!==r||e[41]!==n||e[42]!==y||e[43]!==i?(V=n&&t.jsx("ul",{className:"focus-outline-margin-default -ms-4 flex w-[calc(100%+32px)] gap-2 overflow-x-auto ps-4 pe-4 [scrollbar-width:none]","aria-label":r.formatMessage({id:"mStfWq",defaultMessage:"Project presets"}),children:$t(i).map($=>t.jsx("li",{children:t.jsx(Ht,{preset:$,onSelectPreset:H=>{y(oe(j({},H),{title:r.formatMessage(H.label)}))}})},$.emoji))}),e[40]=r,e[41]=n,e[42]=y,e[43]=i,e[44]=V):V=e[44];let A;e[45]!==n?(A=n&&t.jsxs("aside",{className:"bg-token-bg-tertiary mt-4 flex items-center rounded-xl p-3",children:[t.jsx("div",{className:"me-2 h-6 w-6",children:t.jsx("div",{className:"text-token-text-secondary relative flex h-full items-center justify-center",children:t.jsx(Ot,{className:"icon"})})}),t.jsx("p",{className:"text-token-text-secondary text-xs text-pretty",children:t.jsx(b,j({},re.projectHelperBoxDescription))})]}),e[45]=n,e[46]=A):A=e[46];let J;e[47]!==D?(J=D.map(Kt),e[47]=D,e[48]=J):J=e[48];let F;e[49]!==Z||e[50]!==V||e[51]!==A||e[52]!==J?(F=t.jsxs("div",{className:"flex-1 px-4 pt-1",children:[Z,V,A,J]}),e[49]=Z,e[50]=V,e[51]=A,e[52]=J,e[53]=F):F=e[53];let K;e[54]!==v||e[55]!==D.length?(K=!v.trim()||D.length>0,e[54]=v,e[55]=D.length,e[56]=K):K=e[56];let G;e[57]!==s||e[58]!==u||e[59]!==K?(G=t.jsx("div",{className:"flex items-center justify-end px-3 pb-3",children:t.jsx(ke.Actions,{primaryButton:t.jsx(ke.Button,{title:u,type:"submit",form:"project-modal-form",color:"primary",loading:s,disabled:K})})}),e[57]=s,e[58]=u,e[59]=K,e[60]=G):G=e[60];let Y;return e[61]!==a||e[62]!==F||e[63]!==G?(Y=t.jsxs("form",{id:"project-modal-form",onSubmit:a,children:[F,G]}),e[61]=a,e[62]=F,e[63]=G,e[64]=Y):Y=e[64],Y}function Kt(o,e){return t.jsx("div",{className:"mb-4 text-sm text-red-500",children:o},e)}function Wt(){Ft()}function Qt(s){var a=s,{children:o,onCloseAutoFocus:e}=a,n=me(a,["children","onCloseAutoFocus"]);const u=N.useRef(!1),i=N.useRef(!1),r=N.useRef(!1);return t.jsx(R.Content,oe(j({},n),{onCloseAutoFocus:l=>{const m=u.current,f=i.current,L=r.current;if(u.current=!1,i.current=!1,r.current=!1,L)l.preventDefault();else{if(m||f)return;e&&e(l)}},onEscapeKeyDown:()=>{u.current=!0},onPointerDownOutside:()=>{i.current=!0},onFocusOutside:()=>{r.current=!0},children:o}))}const Jt=et(()=>{const o=W(!1),e=W(!1);return{isSheetVisible$:xe(()=>o()||e()),isSheetOpen$:o,keepSheetOpen$:e}}),qe=o=>{"use forget";const e=ie.c(25),{onCloseAutoFocus:n,children:s,isNewProject:a,mode:u,displayedMemoryScope$:i,memoryScope$:r,isSunshineEnabled:l}=o,m=u===void 0?"dropdown":u;let f;e[0]!==i?(f=i===void 0?W(X.GLOBAL):i,e[0]=i,e[1]=f):f=e[1];const L=f;let x;e[2]!==r?(x=r===void 0?W(X.GLOBAL):r,e[2]=r,e[3]=x):x=e[3];const h=x,O=l===void 0?!0:l,v=!ze();let D;e[4]!==L?(D=()=>L(),e[4]=L,e[5]=D):D=e[5];const I=ne(D),B=he();let _;e[6]!==B?(_=Jt(B),e[6]=B,e[7]=_):_=e[7];const C=_,y=ne(C.isSheetOpen$),S=m==="auto"?v?"sheet":"dropdown":m;let M;e[8]!==m||e[9]!==C.isSheetOpen$?(M=w=>{C.isSheetOpen$.set(w),w&&_e.logEventWithStatsig("Project Customization: Open","chatgpt_web_project_customization_menu_open",{mode:m})},e[8]=m,e[9]=C.isSheetOpen$,e[10]=M):M=e[10];let P;e[11]!==I||e[12]!==a||e[13]!==O||e[14]!==h||e[15]!==n?(P=t.jsx(R.Portal,{children:t.jsx(Xt,{displayedMemoryScope:I,memoryScope$:h,isNewProject:a,onCloseAutoFocus:n,isSunshineEnabled:O})}),e[11]=I,e[12]=a,e[13]=O,e[14]=h,e[15]=n,e[16]=P):P=e[16];let E;return e[17]!==s||e[18]!==v||e[19]!==y||e[20]!==C||e[21]!==M||e[22]!==P||e[23]!==S?(E=t.jsxs(R.Root,{mode:S,open:y,store:C,modal:v,onOpenChange:M,children:[s,P]}),e[17]=s,e[18]=v,e[19]=y,e[20]=C,e[21]=M,e[22]=P,e[23]=S,e[24]=E):E=e[24],E},Xt=u=>{var i=u,{displayedMemoryScope:o=X.GLOBAL,memoryScope$:e=W(X.GLOBAL),isNewProject:n,isSunshineEnabled:s}=i,a=me(i,["displayedMemoryScope","memoryScope$","isNewProject","isSunshineEnabled"]);const r=!n||!s,l=!!n&&!s;return t.jsxs(Qt,oe(j({size:"auto",align:"end",alignOffset:-7,loop:!0},a),{children:[t.jsxs(R.Group,{children:[t.jsx(R.Label,{className:"overflow-visible text-clip whitespace-normal",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{children:t.jsx(b,{id:"w7+gZm",defaultMessage:"Memory"})}),l?t.jsx("span",{className:"text-token-text-secondary mt-1 text-xs",children:t.jsx(b,{id:"VqLy8n",defaultMessage:"Memory is off. Enable it in <link>Settings</link> to use memory within projects.",values:{link:m=>t.jsx($e,{to:"#settings/Personalization",className:"text-token-text-primary underline",children:m})}})}):null]})}),l?null:t.jsxs(R.RadioGroup,{value:o,className:"flex flex-col",onValueChange:m=>{r||e.set(m)},children:[t.jsx(we,{value:X.GLOBAL,disabled:r,label:t.jsx(b,{id:"AA7d3d",defaultMessage:"Default"}),secondary:t.jsx(b,{id:"XHfasG",defaultMessage:"Project can access memories from outside chats, and vice versa."})}),t.jsx(we,{value:X.PROJECT_V2,disabled:r,label:t.jsx(b,{id:"XToOAe",defaultMessage:"Project-only"}),secondary:t.jsx(b,{id:"W99WlO",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats."})})]})]}),l?null:t.jsx(R.Group,{children:t.jsx(R.Label,{children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:"text-token-text-secondary flex items-center text-xs text-pretty",children:t.jsx(b,{id:"FrohSq",defaultMessage:"Note that this setting can't be changed later."})})})})})]}))},Zt=o=>t.jsx(R.BasicTrigger,oe(j({className:be("dropdown-btn"),"data-testid":"composer-plus-btn"},o),{children:t.jsx(tt,{className:"icon"})}));function we(o){return t.jsx(R.RadioItem,j({trailing:t.jsx(R.RadioItemCheck,{})},o))}const Yt=[{type:"google_drive",icon:dt},{type:"slack",icon:ut}],zt=()=>{const o=Te(),e=ne(()=>mt(o));return N.useCallback(n=>{if(!e)return"unknown";const s=Be(n);return e.sanitizedAccessConnectorsNoSyncDeduplication.some(u=>u.id===s)?"connected":"disconnected"},[e])},fe=o=>{"use forget";var h;const e=ie.c(22);let n,s,a,u,i,r;e[0]!==o?(h=o,{className:s,label:a,children:n,sublabel:i,trailing:r}=h,u=me(h,["className","label","children","sublabel","trailing"]),e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=u,e[5]=i,e[6]=r):(n=e[1],s=e[2],a=e[3],u=e[4],i=e[5],r=e[6]);let l;e[7]!==s?(l=be("flex w-full flex-col gap-2",s),e[7]=s,e[8]=l):l=e[8];let m;e[9]!==a||e[10]!==u?(m=t.jsx("label",oe(j({className:"text-token-text-primary text-sm"},u),{children:a})),e[9]=a,e[10]=u,e[11]=m):m=e[11];let f;e[12]!==i||e[13]!==m?(f=t.jsxs("div",{className:"flex flex-col gap-0.5",children:[m,i]}),e[12]=i,e[13]=m,e[14]=f):f=e[14];let L;e[15]!==f||e[16]!==r?(L=t.jsxs("div",{className:"flex items-center justify-between",children:[f,r]}),e[15]=f,e[16]=r,e[17]=L):L=e[17];let x;return e[18]!==n||e[19]!==l||e[20]!==L?(x=t.jsxs("section",{className:l,children:[L,n]}),e[18]=n,e[19]=l,e[20]=L,e[21]=x):x=e[21],x},es=({projectName$:o,instructions$:e,gizmo:n,onSave:s,onClose:a,onDelete:u,isSaveDisabled:i,theme$:r,emoji$:l,filesCount$:m,displayedMemoryScope$:f,memoryScope$:L,isSunshineEnabled:x=!0,isNewProject:h=!1,accountPlanType:O,onPendingFilesChange:v,onAddFiles:D,fileControlRef:I,formRef:B,shouldAutoFocusProjectName:_=!1,showFooterPadding:C=!1})=>{"use no forget";const y=de(),S=Oe(),M=he(),P=ne(o),E=ne(e),w=ne(()=>{var p;return(p=f==null?void 0:f())!=null?p:X.GLOBAL}),Q=!h||!x,U=h&&!x,Z=ne(()=>{var p;return(p=m())!=null?p:0}),V=w===X.PROJECT_V2?y.formatMessage(k.memorySelectedProjectOnly):y.formatMessage(k.memorySelectedDefault),A=E.length>pe,J=p=>{p.preventDefault(),!i&&s()},{canEdit:F}=Ae(n),{canDelete:K}=st(n),{data:G}=nt(n.gizmo.id),Y=G!=null?G:n,[$,H]=N.useState([]),z=zt(),te=N.useCallback((p,ee)=>{const se=Je(),le=ee.trim(),Ve=le;return H(Ke=>[...Ke,{scope_id:se,connector_type:p,display_name:Ve,original_url:le,is_pending:!0}]),se},[]),c=N.useCallback(p=>{H(ee=>ee.filter(se=>se.scope_id!==p))},[]),g=ot(M,"3681570957"),d=g&&!0;_t(()=>{const{queryKey:p}=rt(S,n.gizmo.id);S.invalidateQueries({queryKey:p})});const T=!F||Z>=at(M,O),q=g?k.sourcesLabel:k.filesLabel;return t.jsxs("form",{ref:B,className:"relative flex w-full flex-col","aria-label":y.formatMessage(k.projectSettingsTitle),onKeyDownCapture:p=>{p.key==="Enter"&&p.target instanceof HTMLInputElement&&p.preventDefault()},onSubmit:J,children:[t.jsxs("header",{className:"bg-token-bg-primary sticky top-0 z-10 flex items-center justify-between px-4 py-3",children:[t.jsx("h2",{className:"text-token-text-primary text-lg font-normal",children:t.jsx(b,j({},k.projectSettingsTitle))}),t.jsx(lt,{onClick:a})]}),t.jsxs("div",{className:be("flex flex-col gap-5 px-4 py-2",C&&"pb-24"),children:[t.jsx(fe,{htmlFor:"project-name",label:t.jsx(b,j({},k.projectNameLabel)),children:t.jsxs("div",{className:"grid gap-1",children:[t.jsx(He,{theme$:r,emoji$:l,children:t.jsx(Ge,{theme$:r,emoji$:l,disabled:!F,className:"after:border-token-interactive-border-tertiary-default col-1 row-1 justify-self-start! after:absolute after:end-0 after:top-0 after:bottom-0 after:border-e after:content-['']"})}),t.jsx("input",{className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary col-span-full row-1 w-full resize-none rounded-lg border px-2 py-2 ps-11 pe-9 text-sm focus:ring-0",autoComplete:"off",placeholder:y.formatMessage(k.projectNamePlaceholder),type:"text",readOnly:!F,value:P,onChange:p=>o.set(p.target.value),autoFocus:_,"aria-label":y.formatMessage(k.projectNameInputAriaLabel),id:"project-name"})]})}),t.jsxs(fe,{htmlFor:"instructions",label:t.jsx(b,j({},k.instructionsLabel)),sublabel:t.jsx("span",{className:"text-token-text-tertiary text-xs",children:t.jsx(b,j({},k.instructionsDescription))}),children:[t.jsx("textarea",{id:"instructions",readOnly:!F,placeholder:y.formatMessage(re.projectInstructionsPlaceholder),className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary min-h-[60px] w-full rounded-lg border text-sm focus:ring-0",value:E,onChange:p=>e.set(p.target.value),"aria-label":y.formatMessage(k.instructionsInputAriaLabel)}),F&&A&&t.jsx(ct,{className:"mt-1",children:y.formatMessage(re.instructionsTooLong,{length:pe})})]}),t.jsx(fe,{label:t.jsx(b,j({},q)),trailing:d?t.jsxs(it,{side:"bottom",sideOffset:4,contentAlign:"end",triggerButton:t.jsx(ae,{color:"secondary",size:"small",type:"button",disabled:T,children:t.jsx(b,j({},re.addButtonLabel))}),children:[t.jsx(R.Item,{icon:At,disabled:T,onClick:D,children:t.jsx(b,j({},re.addFilesAndPhotos))}),Yt.map(p=>t.jsx(ts,{connector:p,projectId:Y.gizmo.id,addPendingConnectorScope:te,removePendingConnectorScope:c,connectionStatus:z(p.type)},p.type))]}):t.jsx(ae,{color:"secondary",size:"small",onClick:D,disabled:T,children:t.jsx(b,j({},re.addButtonLabel))}),children:t.jsx(Gt,{ref:I,gizmo:Y,accountPlanType:O,onPendingFilesChange:v,pendingConnectorScopes:$,className:"px-0!"})}),t.jsx(fe,{className:"-mt-4",label:t.jsx(b,j({},k.memoryLabel)),sublabel:U&&t.jsx("span",{className:"text-token-text-secondary mt-1 text-xs",children:t.jsx(b,oe(j({},k.memoryStatusDisabled),{values:{link:p=>t.jsx($e,{to:"#settings/Personalization",className:"text-token-text-primary underline",children:p})}}))}),children:!U&&t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(qe,{isNewProject:h,displayedMemoryScope$:f,memoryScope$:L,isSunshineEnabled:x,children:t.jsx(R.BasicTrigger,{disabled:Q,className:"border-token-interactive-border-tertiary-default bg-token-bg-primary relative w-full rounded-lg border px-3 py-2 text-start text-sm focus:outline-none disabled:opacity-60",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:V}),t.jsx(Tt,{className:"icon-sm xs:ms-1.5 ms-1"})]})})}),t.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:t.jsx(b,j({},w===X.PROJECT_V2?k.memoryHelperProjectOnly:k.memoryHelperDefault))})]})}),K&&t.jsx("div",{className:"mt-2",children:t.jsx(ae,{color:"danger-outline",onClick:u,type:"button",disabled:!F,children:t.jsx(b,j({},re.deleteProjectDropdownButton))})})]})]})},ts=o=>{"use forget";const e=ie.c(63),{connector:n,projectId:s,addPendingConnectorScope:a,removePendingConnectorScope:u,connectionStatus:i}=o,r=Te(),l=de(),m=Re(r),f=Oe(),[L,x]=N.useState("");let h;e[0]!==n.type?(h=Be(n.type),e[0]=n.type,e[1]=h):h=e[1];const O=h;let v;e[2]!==s?(v=jt(s),e[2]=s,e[3]=v):v=e[3];const D=v;let I;e[4]!==l||e[5]!==s||e[6]!==m?(I=async d=>{var T;if(d!=null&&d.is_connector_syncable)try{await Ne.syncConnectorScope(s,d.scope_id)}catch(q){const p=q,ee=l.formatMessage(k.connectorScopeSyncErrorFallback),se=(T=je(p))!=null?T:ee;m.danger(se,{toastId:"connector-scope-".concat(d.scope_id,"-sync-error")})}},e[4]=l,e[5]=s,e[6]=m,e[7]=I):I=e[7];const B=I;let _;e[8]!==n.type||e[9]!==s?(_=d=>{const{originalUrl:T}=d;return Ne.createConnectorScope(s,T,n.type)},e[8]=n.type,e[9]=s,e[10]=_):_=e[10];let C;e[11]!==a||e[12]!==n.type?(C=d=>{const{originalUrl:T}=d;return{pendingScopeId:a(n.type,T)}},e[11]=a,e[12]=n.type,e[13]=C):C=e[13];let y;e[14]!==D||e[15]!==f||e[16]!==u||e[17]!==B?(y=async(d,T,q)=>{x(""),await B(d),await f.invalidateQueries({queryKey:D}),q!=null&&q.pendingScopeId&&u(q.pendingScopeId)},e[14]=D,e[15]=f,e[16]=u,e[17]=B,e[18]=y):y=e[18];let S;e[19]!==n.type||e[20]!==l||e[21]!==u||e[22]!==m?(S=(d,T,q)=>{var se;const p=l.formatMessage(k.connectorScopeCreateErrorFallback),ee=(se=je(d))!=null?se:p;m.danger(ee,{toastId:"connector-scope-".concat(n.type,"-error")}),q!=null&&q.pendingScopeId&&u(q.pendingScopeId)},e[19]=n.type,e[20]=l,e[21]=u,e[22]=m,e[23]=S):S=e[23];let M;e[24]!==_||e[25]!==C||e[26]!==y||e[27]!==S?(M={mutationFn:_,onMutate:C,onSuccess:y,onError:S},e[24]=_,e[25]=C,e[26]=y,e[27]=S,e[28]=M):M=e[28];const P=Xe(M);let E;e[29]!==L?(E=L.trim(),e[29]=L,e[30]=E):E=e[30];const w=E;let Q;e[31]!==P||e[32]!==w?(Q=d=>{d.preventDefault(),!(!w||P.isPending)&&P.mutate({originalUrl:w})},e[31]=P,e[32]=w,e[33]=Q):Q=e[33];const U=Q,Z=ft();let V,A,J;if(e[34]!==n.type||e[35]!==l){A=ns(n.type);let d;e[39]!==n.type?(d=os(n.type),e[39]=n.type,e[40]=d):d=e[40],V=d;const T=l.formatMessage(A);J=l.formatMessage(k.connectorUrlInputLabel,{connectorName:T}),e[34]=n.type,e[35]=l,e[36]=V,e[37]=A,e[38]=J}else V=e[36],A=e[37],J=e[38];const F=J,K="".concat(n.type,"-connector-url"),G="".concat(n.type,"-connector-url-description");let Y;e[41]!==n.icon?(Y={icon:n.icon},e[41]=n.icon,e[42]=Y):Y=e[42];const $=Y;let H;e[43]!==U?(H=d=>{d.preventDefault(),U(d)},e[43]=U,e[44]=H):H=e[44];const z=H,[te,c]=N.useState(!0);let g;return e[45]!==$||e[46]!==i||e[47]!==n.icon||e[48]!==G||e[49]!==O||e[50]!==K||e[51]!==L||e[52]!==F||e[53]!==P||e[54]!==V||e[55]!==U||e[56]!==z||e[57]!==te||e[58]!==l||e[59]!==A||e[60]!==Z||e[61]!==w?(g=t.jsx(R.Sub,{children:i==="unknown"?t.jsx(R.Item,{icon:n.icon,trailing:pt,disabled:!0,children:t.jsx(b,j({},A))}):i==="connected"?t.jsxs(t.Fragment,{children:[t.jsx(R.SubMenuTrigger,oe(j({},$),{onPointerLeave:()=>c(!1),children:t.jsx(b,j({},A))})),t.jsx(R.Portal,{children:t.jsxs(R.SubContent,{children:[t.jsx("form",{className:"mx-1.5 flex flex-col gap-2",onSubmit:U,children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative shrink-1 grow",children:[t.jsx("label",{className:"sr-only",htmlFor:K,children:F}),t.jsx(Rt,{className:"text-token-text-tertiary icon-sm pointer-events-none absolute start-1.5 top-1/2 z-10 h-5 w-5 -translate-y-1/2","aria-hidden":"true"}),t.jsx(R.InputItem,{id:K,name:K,className:"mx-0! w-full ps-7.5",autoFocus:!0,onFocus:()=>c(!0),holdFocus:te,"aria-label":F,"aria-describedby":G,placeholder:l.formatMessage(k.connectorUrlPlaceholder),value:L,onChange:d=>{x(d.target.value)},onSubmit:U,disabled:P.isPending})]}),t.jsx(ae,{type:"submit",size:"medium",color:"primary",disabled:P.isPending||w==="",onClick:z,children:t.jsx(b,j({},k.connectorScopeSubmitButtonLabel))})]})}),t.jsx("div",{className:"text-token-text-tertiary mx-1.5 mt-1 px-1 py-2 text-xs leading-4",id:G,children:t.jsx(b,j({},V))})]})})]}):t.jsx(ss,oe(j({},$),{labelMessage:A,connectorId:O,navigateToAddConnectorLink:Z}))}),e[45]=$,e[46]=i,e[47]=n.icon,e[48]=G,e[49]=O,e[50]=K,e[51]=L,e[52]=F,e[53]=P,e[54]=V,e[55]=U,e[56]=z,e[57]=te,e[58]=l,e[59]=A,e[60]=Z,e[61]=w,e[62]=g):g=e[62],g},ss=({icon:o,labelMessage:e,connectorId:n,navigateToAddConnectorLink:s})=>(N.useEffect(()=>{gt.logEntryPointShown({referrer:xt.ProjectSettings})},[n]),t.jsx(R.Item,{icon:o,onClick:()=>s({connectorId:n,showSettingsBehindConnectorLink:!0}),trailing:t.jsx(b,j({},k.connectButtonLabel)),children:t.jsx(b,j({},e))})),ns=o=>{switch(o){case"google_drive":return k.googleDriveConnectorLabel;case"slack":return k.slackConnectorLabel;default:return Ue(o)}},os=o=>{switch(o){case"google_drive":return k.googleDriveConnectorUrlDescription;case"slack":return k.slackConnectorUrlDescription;default:return Ue(o)}},k=Fe({connectButtonLabel:{id:"project-settings-content.connectButtonLabel",defaultMessage:"Connect"},projectSettingsTitle:{id:"project-settings-content.projectSettingsTitle",defaultMessage:"Project settings"},projectNameLabel:{id:"project-settings-content.projectNameLabel",defaultMessage:"Project name"},projectNamePlaceholder:{id:"project-settings-content.projectNamePlaceholder",defaultMessage:"Copenhagen Trip"},projectNameInputAriaLabel:{id:"project-settings-content.projectNameInputAriaLabel",defaultMessage:"Project name"},instructionsLabel:{id:"project-settings-content.instructionsLabel",defaultMessage:"Instructions"},instructionsDescription:{id:"project-settings-content.instructionsDescription",defaultMessage:"Set context and customize how ChatGPT responds in this project."},instructionsInputAriaLabel:{id:"project-settings-content.instructionsInputAriaLabel",defaultMessage:"Instructions"},filesLabel:{id:"project-settings-content.filesLabel",defaultMessage:"Files"},sourcesLabel:{id:"project-settings-content.sourcesLabel",defaultMessage:"Sources"},googleDriveConnectorLabel:{id:"project-settings-content.googleDriveConnectorLabel",defaultMessage:"Google Drive"},slackConnectorLabel:{id:"project-settings-content.slackConnectorLabel",defaultMessage:"Slack"},connectorUrlInputLabel:{id:"project-settings-content.connectorUrlInputLabel",defaultMessage:"{connectorName} URL"},connectorUrlPlaceholder:{id:"project-settings-content.connectorUrlPlaceholder",defaultMessage:"Paste URL"},connectorScopeCreateErrorFallback:{id:"project-settings-content.connectorScopeCreateErrorFallback",defaultMessage:"We couldn't add that link. Check the URL and try again."},connectorScopeSubmitButtonLabel:{id:"project-settings-content.connectorScopeSubmitButtonLabel",defaultMessage:"Add"},connectorScopeSyncErrorFallback:{id:"project-settings-content.connectorScopeSyncErrorFallback",defaultMessage:"We couldn't start syncing that link. Try again."},googleDriveConnectorUrlDescription:{id:"project-settings-content.googleDriveConnectorUrlDescription",defaultMessage:"Link docs, spreadsheets, slides, and folders."},slackConnectorUrlDescription:{id:"project-settings-content.slackConnectorUrlDescription",defaultMessage:"Link a Slack channel."},memoryLabel:{id:"project-settings-content.memoryLabel",defaultMessage:"Memory"},memoryStatusDisabled:{id:"project-settings-content.memoryStatusDisabled",defaultMessage:"Memory is off. Enable it in <link>Settings</link> to use memory within projects."},memorySelectedProjectOnly:{id:"project-settings-content.memorySelectedProjectOnly",defaultMessage:"Project-only"},memorySelectedDefault:{id:"project-settings-content.memorySelectedDefault",defaultMessage:"Default"},memoryHelperProjectOnly:{id:"project-settings-content.memoryHelperProjectOnly",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats. This cannot be changed."},memoryHelperDefault:{id:"project-settings-content.memoryHelperDefault",defaultMessage:"Project can access memories from outside chats, and vice versa. This cannot be changed."},deleteProjectButton:{id:"project-settings-content.deleteProjectButton",defaultMessage:"Delete project"}}),De=Nt(()=>Ye(()=>import("./j1jsb5rfz3wt3sb5.js"),__vite__mapDeps([0,1,2,3])).then(o=>o.SnorlaxDeletionModal));var Ee;const Ie=Lt.footer(Ee||(Ee=Pe(["border-token-interactive-border-tertiary-default bg-token-bg-primary absolute bottom-0 z-10 flex w-full items-center justify-end gap-2 border-t px-4 py-4"])));function xs({submitButtonTitle:o,onClose:e,onSuccess:n,gizmo:s,project:a,autoFocusProjectName:u=!1}){"use no forget";const i=he(),r=de(),l=Re(i),m=ht(i),f=m==null?void 0:m.planType,L=Ze(),x=Bt(),h=Ut(),O=bt(),[v,D]=N.useState(()=>O.isPending),I=!s,B=!I&&yt(i),_=!B&&(x||h&&I);!I&&!a&&(a=St(i,s.gizmo.id));const[C]=N.useState(()=>W(ce(()=>{var c,g;return(g=(c=a==null?void 0:a.emoji$())!=null?c:s==null?void 0:s.gizmo.display.emoji)!=null?g:null}))),[y]=N.useState(()=>W(ce(()=>{var c,g;return(g=(c=a==null?void 0:a.theme$())!=null?c:s==null?void 0:s.gizmo.display.theme)!=null?g:null}))),[S]=N.useState(()=>W(ce(()=>{var c,g;return(g=(c=a==null?void 0:a.title$())!=null?c:s==null?void 0:s.gizmo.display.name)!=null?g:""}))),[M]=N.useState(()=>W(ce(()=>{var c;return(c=s==null?void 0:s.gizmo.instructions)!=null?c:""}))),[P]=N.useState(()=>W(ce(()=>{var c;return(c=a==null?void 0:a.filesCount$)!=null?c:0}))),[E]=N.useState(()=>{const c=s==null?void 0:s.gizmo.memory_scope;let g=c;switch(c){case X.PROJECT_V2:g=X.PROJECT_V2;break;case X.GLOBAL:case X.PROJECT:g=X.GLOBAL;break;default:g=X.UNSET;break}return W(g)}),[w]=N.useState(()=>xe(()=>Dt(E()))),[Q]=N.useState(()=>xe(()=>{const c=[];return S().length>Le&&c.push(r.formatMessage({id:"feWA6K",defaultMessage:"Project names cannot be longer than {length} characters."},{length:Le})),M().length>pe&&c.push(r.formatMessage(re.instructionsTooLong,{length:pe})),c})),U=async()=>{var c;try{D(!0);const g=a?await a.queueUpdate$({emoji:C(),theme:y(),name:S(),options:{memoryScope:E(),instructions:M()}}):await O.mutateAsync({update:q=>{var p,ee;return oe(j({},q),{emoji:(p=C())!=null?p:void 0,theme:(ee=y())!=null?ee:void 0,name:S(),memoryScope:E(),instructions:M()})},id:(c=s==null?void 0:s.gizmo.id)!=null?c:wt}),{id:d,resource:T}=g;D(!1),n&&n(d!=null?d:T==null?void 0:T.gizmo.id),e()}catch(g){const d=je(g);l.warning(d!=null?d:r.formatMessage({id:"project-modal.error.create-or-update",defaultMessage:"Error creating or updating project"}),{duration:5,hasCloseButton:!0}),D(!1)}},Z=()=>{s&&Pt(i,De,{gizmoId:s.gizmo.id,handleDelete:()=>{kt(i,De),e(),L("/",{replace:!0})}})},V=I?r.formatMessage({id:"PoqmRT",defaultMessage:"Create project"}):r.formatMessage({id:"RT8KNi",defaultMessage:"Save"}),[A,J]=N.useState(!1),F=ne(()=>{const c=S();return v||A||c.trim().length===0||Q().length>0},"ProjectModal:isSaveDisabled"),K=c=>{c==null||c.preventDefault(),_e.logEventWithStatsig("Projects: Create Submit Enhanced","chatgpt_web_projects_create_submit"),U()},G=N.useRef(null),Y=N.useCallback(c=>{var g;c.preventDefault(),(g=G.current)==null||g.openFileDialog()},[G]),$=N.useRef(null),{canEdit:H}=Ae(s),z=ne(()=>{var ee,se,le;const c=S(),g=C(),d=M(),T=(ee=s==null?void 0:s.gizmo.display.name)!=null?ee:"",q=(se=s==null?void 0:s.gizmo.display.emoji)!=null?se:null,p=(le=s==null?void 0:s.gizmo.instructions)!=null?le:"";return(c!=null?c:"")!==T||(g!=null?g:null)!==q||(d!=null?d:"")!==p},"ProjectModal:hasFormChanges"),te=B&&(H?z:!0);return t.jsx(vt,{testId:"modal-new-project-enhanced",isOpen:!0,hideSeparator:!0,noPadding:!0,headerAccessory:_?t.jsx(qe,{isNewProject:I,displayedMemoryScope$:w,memoryScope$:E,isSunshineEnabled:x,children:t.jsx(Zt,{})}):null,showCloseButton:!v,type:"success",size:"large",footerContent:B&&(H?z&&t.jsxs(Ie,{children:[t.jsx(ae,{color:"secondary",className:"px-4",onClick:e,disabled:v,type:"button",children:t.jsx(b,j({},ge.cancelButton))}),t.jsx(ae,{color:"primary",className:"px-4",visuallyDisabled:F,onClick:c=>{var g;c.preventDefault(),(g=$.current)==null||g.requestSubmit()},type:"button",children:t.jsx(b,j({},ge.saveButton))})]}):t.jsxs(Ie,{children:[t.jsx(Ct,{label:r.formatMessage(re.viewOnlyCustomInstructionsModalHeaderTooltip),side:"bottom",align:"center",className:"ms-3",children:t.jsxs("div",{className:"text-token-text-tertiary flex cursor-pointer flex-row items-center gap-1.5 text-sm",children:[t.jsx(Mt,{className:"icon"}),t.jsx(b,j({},re.viewOnlyCustomInstructionsModalHeaderLabel))]})}),t.jsx(ae,{color:"secondary",className:"ms-auto px-4",onClick:e,type:"button",children:t.jsx(b,j({},ge.closeButton))})]})),title:!B&&(I?r.formatMessage({defaultMessage:"Create project",id:"project-modal.title.new-project"}):r.formatMessage({defaultMessage:"Edit project",id:"project-modal.title.edit-project"})),onClose:()=>{v||e()},children:B&&f?t.jsx(es,{projectName$:S,instructions$:M,gizmo:s,onSave:K,onDelete:Z,isSaveDisabled:F,theme$:y,emoji$:C,displayedMemoryScope$:w,memoryScope$:E,isSunshineEnabled:x,isNewProject:I,accountPlanType:f,onPendingFilesChange:c=>J(c),onAddFiles:Y,fileControlRef:G,filesCount$:P,onClose:e,formRef:$,shouldAutoFocusProjectName:u,showFooterPadding:te}):t.jsx(Vt,{emoji$:C,isNewProject:I,isPending:v,onClose:e,onSubmit:K,submitTitle:o!=null?o:V,title$:S,theme$:y,validationErrors$:Q,planType:f})})}const ge=Fe({cancelButton:{id:"project-settings-content.cancelButton",defaultMessage:"Cancel"},closeButton:{id:"project-settings-content.closeButton",defaultMessage:"Close"},saveButton:{id:"project-settings-content.saveButton",defaultMessage:"Save"}});export{xs as CreateOrEditProjectModal};
//# sourceMappingURL=u69kqoyzot6736n2.js.map
