import{r,a0 as j,af as O,i as _,a9 as R,a as T,j as a}from"./fg33krlcm0qyi6yw.js";import{o as y,dD as z,rv as M,hG as b,t7 as h,ib as G,b as I,p as k,ko as E,kp as v,ga as N,lp as A,eh as F,qv as H,qw as L,qx as Q,ot as q,hc as w}from"./mtk1qztvnb31pw5r.js";import{C as D}from"./ix2fhlx43kf51eht.js";import{r as U,a as Y}from"./k65njl5wlgspihfr.js";import"./onvzxgfezo210ugv.js";import"./o0e5tlgxm1k8ubzl.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";import"./dg5jraediw4l39ow.js";import"./hb1mva1gmw4bcs8w.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./c2cj1dlcffke3f7m.js";import"./ohquqctluwabmb5i.js";import"./iupestt9odrsfzg9.js";import"./ei2dcm731f3fuz8o.js";import"./tkv1g3prhmmeuid6.js";import"./mivow98b53y1taf8.js";import"./krwszi9u3lj63i9v.js";import"./i5jw6wfkpao2rx5t.js";import"./mce0eiesimdmeqmr.js";import"./ifrwee0bgh9e2but.js";import"./gqx9i5tb3deqoo5z.js";import"./kgrrqncjl71482vi.js";import"./btb1r2uxm2m1lsr5.js";import"./bhm7utdivrybcfbl.js";import"./j413w2y09mrdcb4m.js";function $(n,o){const e=r.useRef(0);return()=>{e.current<o&&(n(),e.current+=1)}}const Et=()=>{U();const n=z();if(!y(n,"491279851"))return O("/")},vt=j(function(){const o=_(),{gizmoSlug:e}=R(),t=M(e!=null?e:""),{data:c,isError:g,error:s}=b(t,!1),m=T(),p=m.getQueryData([h]),d=m.getQueryState([h]),C=(d==null?void 0:d.fetchStatus)==="fetching",u=r.useMemo(()=>p==null?void 0:p.pages.flatMap(l=>l.items),[p]),f=I(),S=G(f,t);r.useEffect(()=>{S.conversations$().preload$()},[S]),r.useEffect(()=>{if(g&&!c)if(s instanceof k&&(s.status===403||s.status===404))o(E(v.PROJECT_NOT_FOUND));else{const l=N(s);o(E(v.CUSTOM_ERROR,void 0,l))}},[g,c,o,s]);const i=r.useMemo(()=>A(f,{urlGizmoId:t}),[f,t]);Y(i.id,{kind:F.GizmoInteraction,gizmo_id:t});const x=$(()=>{w(m)},5);return r.useEffect(()=>{if(!t||!c||C)return;(u==null?void 0:u.some(P=>P.gizmo.gizmo.id===t))||x()},[c,t,u,C,m,x]),a.jsx(H.Provider,{value:i,children:a.jsx(L,{children:a.jsx(Q,{conversation:i,children:a.jsx(q,{conversation:i,children:a.jsx(D,{conversation:i})})})})})});export{Et as clientLoader,vt as default};
//# sourceMappingURL=illexrgpv231m1im.js.map
