const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c5og9r81gzk0nhum.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css"])))=>i.map(i=>d[i]);
import{c as J,e as Q,r as Y,j as X,_ as Z}from"./fg33krlcm0qyi6yw.js";import{m as ee,I as te,b as se,pU as ae,dI as oe,P as le,es as ne,R as ie,A as re,cU as de,bh as ce}from"./mtk1qztvnb31pw5r.js";import{fD as fe,fE as ge}from"./k65njl5wlgspihfr.js";import{I as ue}from"./m3nchqrpfl8vs80b.js";const be=ce(()=>Z(()=>import("./c5og9r81gzk0nhum.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>r.ThreadReportMessageModal)),H="safety-or-legal-concern",me={id:"conversationTurnMessageFeedbackModal.toastMessage",defaultMessage:"Thank you for submitting feedback!",description:"Toast message after a user submits message feedback."};function xe(r){"use forget";var N,z;const e=J.c(59),{clientThreadId:d,conversationMessage:l,currentModelId:c}=r,a=se(),t=Q(),P=ee();let x;if(e[0]!==a){const s=te(a);x=(N=s==null?void 0:s.isWorkspacePlan())!=null?N:!1,e[0]=a,e[1]=x}else x=e[1];const I=x;let T;e[2]!==a?(T=ae(a),e[2]=a,e[3]=T):T=e[3];const L=T,n=(z=l.clientMetadata)==null?void 0:z.rating;let E;e[4]!==d?(E=oe(d),e[4]=d,e[5]=E):E=e[5];const o=E,w=Y.useRef(!1),[V,q]=Y.useState(!1);let R;e[6]!==t?(R=t.formatMessage(me),e[6]=t,e[7]=R):R=e[7];const D=R;let f;e[8]!==t?(f=t.formatMessage({id:"VMFqxa",defaultMessage:"Incorrect or incomplete"}),e[8]=t,e[9]=f):f=e[9];let g;e[10]!==f?(g={value:"incorrect-or-incomplete",label:f},e[10]=f,e[11]=g):g=e[11];let u;e[12]!==t?(u=t.formatMessage({id:"CsVMe3",defaultMessage:"Not what I asked for"}),e[12]=t,e[13]=u):u=e[13];let b;e[14]!==u?(b={value:"not-what-i-asked-for",label:u},e[14]=u,e[15]=b):b=e[15];let m;e[16]!==t?(m=t.formatMessage({id:"YzcNRz",defaultMessage:"Slow or buggy"}),e[16]=t,e[17]=m):m=e[17];let M;e[18]!==m?(M={value:"slow-or-buggy",label:m},e[18]=m,e[19]=M):M=e[19];let h;e[20]!==t?(h=t.formatMessage({id:"PRbnNm",defaultMessage:"Style or tone"}),e[20]=t,e[21]=h):h=e[21];let k;e[22]!==h?(k={value:"style-or-tone",label:h},e[22]=h,e[23]=k):k=e[23];let p;e[24]!==t?(p=t.formatMessage({id:"ArO8Kb",defaultMessage:"Safety or legal concern"}),e[24]=t,e[25]=p):p=e[25];let _;e[26]!==p?(_={value:H,label:p},e[26]=p,e[27]=_):_=e[27];let v;e[28]!==t?(v=t.formatMessage({id:"goAmKc",defaultMessage:"Other"}),e[28]=t,e[29]=v):v=e[29];let F;e[30]!==v?(F={value:"other",label:v},e[30]=v,e[31]=F):F=e[31];let S;e[32]!==M||e[33]!==k||e[34]!==_||e[35]!==F||e[36]!==g||e[37]!==b?(S=[g,b,M,k,_,F],e[32]=M,e[33]=k,e[34]=_,e[35]=F,e[36]=g,e[37]=b,e[38]=S):S=e[38];const U=S;let y;e[39]!==l.id||e[40]!==a||e[41]!==c||e[42]!==D||e[43]!==I||e[44]!==L||e[45]!==n||e[46]!==o||e[47]!==P?(y=s=>{var B,G,K;if(!o||s.tags.length===0&&!s.textFeedback)return;const i=s.tags.map(he);le.logEvent("Message Feedback Dialog Submitted",{id:l.id,threadId:o,tags:i,content:s.textFeedback,model:c,rating:n}),ne(a,"chatgpt_feedback_dialog_submitted",(B=i==null?void 0:i[0])!=null?B:null,{id:l.id,threadId:o,tag:(G=i==null?void 0:i[0])!=null?G:"",content:(K=s.textFeedback)!=null?K:"",model:c!=null?c:"",rating:n!=null?n:""}),n&&(I&&L?fe({rating:ge(n),text:s.textFeedback,tags:i,tag_choices:s.tagChoices},o,l.id):I||ie.safePost("/conversation/message_feedback",{requestBody:{message_id:l.id,conversation_id:o,rating:n,text:s.textFeedback,tags:i,tag_choices:s.tagChoices},authOption:re.SendIfAvailable})),P.success(D)},e[39]=l.id,e[40]=a,e[41]=c,e[42]=D,e[43]=I,e[44]=L,e[45]=n,e[46]=o,e[47]=P,e[48]=y):y=e[48];const W=y;let A;e[49]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{w.current=!1,q(!1)},e[49]=A):A=e[49];const $=A;let O;e[50]!==d||e[51]!==l.id||e[52]!==a||e[53]!==o?(O=s=>{w.current||!s.some(Me)||!o||(w.current=!0,q(!0),de(a,be,{clientThreadId:d,serverThreadId:o,messageId:l.id,onFeedbackModalReopen:$}))},e[50]=d,e[51]=l.id,e[52]=a,e[53]=o,e[54]=O):O=e[54];const j=O;if(n==="thumbsUp"||V)return null;let C;return e[55]!==j||e[56]!==W||e[57]!==U?(C=X.jsx(ue,{tagOptions:U,onSubmit:W,onTagsChange:j,thumbsDownModalExperimentEnabled:!0,modalOnly:!0}),e[55]=j,e[56]=W,e[57]=U,e[58]=C):C=e[58],C}function Me(r){return r.value===H}function he(r){return r.value}export{xe as default};
//# sourceMappingURL=k9ksyvbl0xm4dv1o.js.map
