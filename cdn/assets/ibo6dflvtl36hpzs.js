import{e as j,j as e,f as P,r as u,u as X}from"./fg33krlcm0qyi6yw.js";import{C as q}from"./xix5le8wcon7ef24.js";import{P as K}from"./kl35ww3o5audytcy.js";import{i as V,b as Q,T as Z,a as $}from"./kimw6epkq1t36pow.js";import{g as z}from"./exqqo21frem4no6f.js";import{S as J,C as ee,a as te}from"./jz17uc4ytadugnwg.js";import{c_ as se,l as G,T as ae,bc as v,bd as S,P as M,a9 as b,cQ as D,B as ie,b as le,C as ne,lX as oe,hg as re,R as ce}from"./mtk1qztvnb31pw5r.js";import{fO as de,fM as ue,hj as k,pq as me,hk as pe}from"./k65njl5wlgspihfr.js";import{u as fe}from"./bkm8et9bp0kf1c7y.js";import{L as Ee}from"./fjgzmzg0f3112atg.js";import{c as F}from"./n6upldbhvll48b0q.js";const he="https://openai.com/form/report-content/";function Ce(t){return"/?model=gpt-4o&sharedCanvas=".concat(t.sharedTextdocId)}const U=({areButtonsFullWidth:t,sharedTextdoc:a,onClickCodePreview:_,isCodeRunning:d,showRunCodeButton:h,setIsReportModalOpen:r})=>{const m=le(),c=!se(),o=V(a.type,a.content),I=h&&(o||Q(a.type)),i=j(),p=Ce(a),f=()=>{v.count(S.CANVAS,"shared.click_edit_button",[{key:"type",value:a.type},{key:"authed",value:c?"false":"true"}]),M.logEvent("Canvas Shared Edit Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type})};return e.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-6",children:e.jsxs("div",{className:G("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:a.title}),e.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[e.jsx("div",{className:"cursor-default",children:e.jsx(ae,{align:"start",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",label:i.formatMessage({id:"RkWIbL",defaultMessage:"The content you’re seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesn’t reflect the views of OpenAI."}),children:i.formatMessage(x.madeWithCanvas)})}),e.jsx("div",{children:c?e.jsx("a",{className:"underline",href:he,target:"_blank",rel:"noreferrer",onClick:()=>{v.count(S.CANVAS,"shared.click_report_button",[{key:"type",value:a.type},{key:"authed",value:"false"}]),M.logEvent("Canvas Shared Unauthed Report Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type})},children:i.formatMessage(x.report)}):e.jsx("button",{className:"underline",onClick:()=>{v.count(S.CANVAS,"shared.click_report_button",[{key:"type",value:a.type},{key:"authed",value:"true"}]),M.logEvent("Canvas Shared Authed Report Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type}),r(!0)},children:i.formatMessage(x.report)})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[I&&e.jsx(Z,{isCodePreviewable:o,onClick:()=>{v.count(S.CANVAS,"shared.click_run_button",[{key:"type",value:a.type},{key:"authed",value:c?"false":"true"}]),M.logEvent("Canvas Shared Run Button Clicked",{textdocId:a.sharedTextdocId,textdocType:a.type}),_()},isCodeRunning:d}),c?e.jsxs(b,{onClick:()=>{ie(m,{fallbackScreenHint:"login",callbackUrl:p}),f()},icon:D,children:[e.jsx("span",{className:"hidden sm:inline",children:i.formatMessage(x.editWithChatGPT)}),e.jsx("span",{className:"inline sm:hidden",children:i.formatMessage(x.edit)})]}):e.jsxs(b,{as:"link",to:p,openNewTab:!0,icon:D,onClick:f,children:[e.jsx("span",{className:"hidden sm:inline",children:i.formatMessage(x.editWithChatGPT)}),e.jsx("span",{className:"inline sm:hidden",children:i.formatMessage(x.edit)})]})]})]})})},x=P({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"You’re viewing user-generated content that may be unverified or unsafe."}});var s=(t=>(t.NUDITY_SEXUAL_ADULT="nudity_sexual/adult",t.NUDITY_SEXUAL_ABUSE="nudity_sexual/abuse",t.NUDITY_SEXUAL_NCII="nudity_sexual/ncii",t.CHILD_EXPLOITATION="child_exploitation",t.VIOLENCE_SELF_HARM="violence/self_harm",t.VIOLENCE_EATING="violence/eating_disorder",t.VIOLENCE_TERRORISM="violence/terrorism",t.VIOLENCE_THREATS="violence/threats",t.VIOLENCE_GENDER="violence/gender",t.VIOLENCE_WEAPONS="violence/weapons",t.DECEPTIVE_IMPERSONATION="deceptive/impersonation",t.DECEPTIVE_SCAM="deceptive/scam",t.DECEPTIVE_MISINFO="deceptive/misinfo",t.HATE_SPEECH="hate/speech",t.HATE_BULLYING="hate/bullying",t.HATE_UNWANTED="hate/unwanted",t.HATE_PRIVACY="hate/privacy",t.HATE_SPAM="hate/spam",t.OTHER_ILLEGAL="other/illegal",t.OTHER_UNSAFE="other/unsafe",t.OTHER_ANIMAL="other/animal",t.OTHER_HEALTH="other/health",t.OTHER_POLITICAL="other/political",t.OTHER_DONT_LIKE="other/dont_like",t.IP_COPYRIGHT="ip/copyright",t.IP_TRADEMARK="ip/trademark",t.MODERATION_INCORRECT="moderation/incorrect",t))(s||{});const xe=F("Circle12Filled","12",["M6 1a5 5 0 1 0 0 10A5 5 0 0 0 6 1Z"]),ge=F("Circle12Regular","12",["M6 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8ZM1 6a5 5 0 1 1 10 0A5 5 0 0 1 1 6Z"]),Ie=[{id:"NUDITY_SEXUAL",label:"Nudity & Sexual Content"},{id:"CHILD_EXPLOITATION",label:"Child Exploitation"},{id:"VIOLENCE_SELF_HARM",label:"Violence & Self-Harm"},{id:"DECEPTIVE_SCAM",label:"Deceptive Behavior & Scams"},{id:"HATE_SPAM",label:"Hate, Harrassment & Spam"},{id:"OTHER_ILLEGAL",label:"Other inappropriate or illegal content"},{id:"IP",label:"Intellectual Property"}],_e={NUDITY_SEXUAL:[{id:s.NUDITY_SEXUAL_ADULT,label:"Adult nudity & sexual content"},{id:s.NUDITY_SEXUAL_ABUSE,label:"Sexual exploitation & abuse"},{id:s.NUDITY_SEXUAL_NCII,label:"Non-consensual or deepfake intimate imagery"}],CHILD_EXPLOITATION:[{id:s.CHILD_EXPLOITATION,label:"Child exploitation"}],VIOLENCE_SELF_HARM:[{id:s.VIOLENCE_SELF_HARM,label:"Suicide & self-harm"},{id:s.VIOLENCE_EATING,label:"Eating disorders"},{id:s.VIOLENCE_TERRORISM,label:"Terrorism"},{id:s.VIOLENCE_THREATS,label:"Threats or incitement to violence"},{id:s.VIOLENCE_GENDER,label:"Gender-based violence"},{id:s.VIOLENCE_WEAPONS,label:"Weapons creation & procurement"}],DECEPTIVE_SCAM:[{id:s.DECEPTIVE_IMPERSONATION,label:"Impersonation"},{id:s.DECEPTIVE_SCAM,label:"Fraud or scam"},{id:s.DECEPTIVE_MISINFO,label:"Misleading information"}],HATE_SPAM:[{id:s.HATE_SPEECH,label:"Hate speech or symbols"},{id:s.HATE_BULLYING,label:"Bullying & harassment"},{id:s.HATE_UNWANTED,label:"Unwanted depiction of real person"},{id:s.HATE_PRIVACY,label:"Privacy violating activities"},{id:s.HATE_SPAM,label:"Spam"}],OTHER_ILLEGAL:[{id:s.OTHER_UNSAFE,label:"Unsafe or prohibited products or activities"},{id:s.OTHER_ANIMAL,label:"Animal harm or welfare issues"},{id:s.OTHER_HEALTH,label:"Risks to public health and safety"},{id:s.OTHER_POLITICAL,label:"Deceptive content of political candidate or election equipment"},{id:s.OTHER_ILLEGAL,label:"Other inappropriate or illegal content"},{id:s.OTHER_DONT_LIKE,label:"I just don’t like it"}],IP:[{id:s.IP_COPYRIGHT,label:"Copyright",url:"https://openai.com/form/copyright-disputes"},{id:s.IP_TRADEMARK,label:"Trademark",url:"https://openai.com/form/trademark-disputes"}]},y={[s.IP_COPYRIGHT]:"https://openai.com/form/copyright-disputes",[s.IP_TRADEMARK]:"https://openai.com/form/trademark-disputes"},g=P({dialogTitle:{id:"reportModal.dialogTitle",defaultMessage:"Why are you reporting this content?"},cancelButton:{id:"reportModal.cancelButton",defaultMessage:"Cancel"},reportButton:{id:"reportModal.reportButton",defaultMessage:"Report"},submittingButton:{id:"reportModal.submittingButton",defaultMessage:"Submitting..."},submitSuccessMessage:{id:"reportModal.submitSuccessMessage",defaultMessage:"Your report has been submitted."},errorMessage:{id:"reportModal.errorMessage",defaultMessage:"An error occurred while submitting your report."},formRedirectMessage:{id:"reportModal.formRedirectMessage",defaultMessage:"Please use this form to report unlawful use of your work:"}}),w=({reportFunction:t,isOpen:a,dismissModal:_})=>{const d=j(),[h,r]=u.useState(null),[m,c]=u.useState(null),[o,I]=u.useState(null),[i,p]=u.useState("toplevel"),f=()=>{c(null),I(null),p("toplevel"),r(null),_()},{mutate:C,isPending:N}=X({mutationFn:async()=>{if(o)return t(o)},onSuccess:()=>{p("success")},onError:()=>{r(d.formatMessage(g.errorMessage))}}),E=o&&y[o];return e.jsxs(ne,{testId:"modal-report",isOpen:a,showCloseButton:!0,onClose:f,title:d.formatMessage(g.dialogTitle),type:"success",primaryButton:i==="takedown"&&!E&&e.jsx(b,{onClick:()=>C(),disabled:!o,loading:N,children:N?d.formatMessage(g.submittingButton):d.formatMessage(g.reportButton)}),secondaryButton:i==="takedown"&&!E&&e.jsx(b,{onClick:f,color:"secondary",children:d.formatMessage(g.cancelButton)}),children:[i==="success"&&e.jsx("div",{children:d.formatMessage(g.submitSuccessMessage)}),i==="toplevel"&&e.jsx("div",{className:"flex flex-col gap-4",children:Ie.map(l=>e.jsx("div",{className:"flex items-start gap-2",children:e.jsx(b,{className:"text-sm",color:"secondary",onClick:()=>{c(l.id),p("takedown")},children:l.label})},l.id))}),i==="takedown"&&m&&e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"flex grow flex-col gap-4",children:_e[m].map(l=>{const A=l.id===o;return e.jsx(ue,{className:"flex grow items-center justify-start gap-2",value:l.id,children:e.jsx(Ee,{htmlFor:l.id,className:"items-center text-start text-sm",onClick:()=>{I(l.id)},children:e.jsxs("div",{className:"text-token-text-primary flex items-center gap-2",children:[A&&e.jsx(xe,{className:"icon"}),!A&&e.jsx(ge,{className:"icon text-token-text-tertiary"}),l.label]})},l.id)},l.id)})}),E&&e.jsxs("div",{className:"justify-between p-4 text-sm",children:[e.jsx("p",{children:d.formatMessage(g.formRedirectMessage)}),e.jsx("a",{href:y[o],target:"_blank",rel:"noreferrer",className:"text-primary underline",children:y[o]})]}),h&&e.jsx("div",{className:"p-4",children:e.jsx("p",{className:"text-xs text-red-500",children:h})})]})]})};function B(t,a){ce.safePost("/textdoc/shared/{shared_textdoc_id}/report",{parameters:{path:{shared_textdoc_id:t.sharedTextdocId}},requestBody:{takedown_type:a}})}function Te({sharedTextdoc:t,disableNetworkRequests:a,disablePermissions:_,unsafeAllowAllNetworkRequests:d,showHeader:h=!0}){const r=k(t.type)&&V(t.type,t.content),[m,c]=u.useState(r),[o,I]=u.useState(!1),i=j(),p=u.useRef(null),f=u.useRef(null),C=u.useRef(null),[N,E]=u.useState(!1),l=r&&m,A=()=>{var n,R;m?((R=C.current)==null||R.stopCode(),c(!1)):(c(!0),(n=C.current)==null||n.runCode(t.type,t.content).finally(()=>c(!1)))},{type:O,content:L}=t,H=oe(),Y=me()?a:!0;u.useEffect(()=>{var n;H&&r&&(c(!0),(n=C.current)==null||n.runCode(O,L))},[r,H,L,O]);const{isOpen:T,currentTime:W}=fe();return t.type===pe.DOCUMENT?e.jsxs("div",{className:"flex h-full w-full flex-col items-center overflow-hidden",children:[e.jsxs("div",{className:G("flex h-full w-full max-w-[1000px]",T&&"max-w-[1200px]"),style:{boxShadow:"0px 4px 32px 0px rgba(0, 0, 0, 0.08)"},children:[e.jsx("div",{className:"flex w-full grow justify-center",children:e.jsxs("div",{className:"bg-token-bg-primary w-full overflow-y-auto",children:[h&&e.jsx(U,{areButtonsFullWidth:!1,sharedTextdoc:t,onClickCodePreview:()=>{},isCodeRunning:m,showRunCodeButton:!1,setIsReportModalOpen:E}),e.jsx("div",{className:"px-12 pt-12",children:e.jsx(K,{value:t.content,onChange:()=>{},isDisabled:!0,showChanges:!1,comments:[],diff:null,safeUrls:[],contentReferences:[],wrapperClassName:"pb-12"})})]})}),!!W&&T&&e.jsx(J,{sharedTextDocId:t.sharedTextdocId})]}),e.jsx(w,{reportFunction:n=>{B(t,n)},isOpen:N,dismissModal:()=>E(!1)})]}):k(t.type)?e.jsxs("div",{className:"justify-top flex h-full w-full flex-col justify-between overflow-auto",children:[e.jsxs("div",{className:"flex grow flex-col justify-start overflow-auto",children:[h&&e.jsx(U,{areButtonsFullWidth:!0,sharedTextdoc:t,onClickCodePreview:A,isCodeRunning:m,showRunCodeButton:!r,setIsReportModalOpen:E}),e.jsx("div",{className:l?"grow":void 0,children:e.jsx(re,{children:e.jsx(ee,{id:t.sharedTextdocId,isShare:!0,ref:f,enableTransition:r,visuallyHidden:!l,title:t.title,disableNetworkRequests:Y,disablePermissions:_,unsafeAllowAllNetworkRequests:d,onRetryCodeRun:()=>{var n;(n=C.current)==null||n.runCode(O,L)}})})}),!l&&e.jsx("div",{children:e.jsx(q,{id:"published-codemirror",value:t.content,hoveredCommentId:null,focusedCommentId:null,language:z(t.type),readonlyReason:$({isReadonly:!0,isRequestActive:!1,isTextdocStreaming:!1,isHistoricalVersion:!1,isShowingChanges:!1,isReadonlyFromQueryParam:!1}),editorRef:p,isPreview:!0})})]}),e.jsx("div",{className:!m&&r?"hidden":"",children:e.jsx(te,{ref:C,isOpen:o,onOpenChange:I,sandboxRef:f,textdocId:"publishedCanvasTextdoc",textdocContent:t.content,textdocTitle:t.title,isTextdocAttachedPending:!1,highlightLine:n=>{var R;return(R=p.current)==null?void 0:R.highlightLine(n)},isRequestActive:!1,createTextdocTurn:async()=>{}})}),e.jsx(w,{isOpen:N,dismissModal:()=>E(!1),reportFunction:n=>{B(t,n)}})]}):e.jsx("p",{children:i.formatMessage(Ne.unsupportedTextdocType)})}const Ne=P({unsupportedTextdocType:{id:"4hdXQX",defaultMessage:"Content type is not supported"}});export{Te as T};
//# sourceMappingURL=ibo6dflvtl36hpzs.js.map
