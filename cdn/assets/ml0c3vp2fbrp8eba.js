const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jaukcz96ive6l3u7.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/nwdwrv5b1h68xdm5.js","assets/ce3hgmw4iyyhicud.js","assets/b2l059fz4znz94nm.js","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css","assets/hvo2u3a2x0n5gdxn.js","assets/ibjz9c01f0uy7k53.js","assets/fwtla2bbxlv5yr7j.js","assets/bio6zqk7sn9h2l92.js","assets/he7oe7s4xa3cph5y.js","assets/gy1lpvuoewmzh42c.js","assets/jed1ux7qibe55pmj.js","assets/h1em0bjkpkjv8ykw.js","assets/nfccle6oyncifphl.js","assets/hu1bt0oauegdhua6.js","assets/ojve869uwykk95at.js","assets/ly75bs3d14n5v622.js"])))=>i.map(i=>d[i]);
var Se=Object.defineProperty,Pe=Object.defineProperties;var _e=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ie=(a,t,i)=>t in a?Se(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i,o=(a,t)=>{for(var i in t||(t={}))Ce.call(t,i)&&ie(a,i,t[i]);if(le)for(var i of le(t))Ne.call(t,i)&&ie(a,i,t[i]);return a},oe=(a,t)=>Pe(a,_e(t));import{e as ce,a as ue,i as pe,r as d,u as me,f as ge,j as e,M as r,_ as Te,b as De,a0 as Fe,c as Ae}from"./fg33krlcm0qyi6yw.js";import{kv as Ee,ez as re,kw as Ie,kx as Le,bM as Re,ky as Ue,gA as ze,gC as He,kz as Be,Y as Oe,cx as qe,fu as Qe,fH as Ye,kA as Ke,cL as Ge,gu as We}from"./k65njl5wlgspihfr.js";import{m as xe,R as Y,P as ne,ug as $e,C as Ze,a9 as j,bh as Ve,I as fe,b as he,l as Je,T as Xe,g2 as M}from"./mtk1qztvnb31pw5r.js";import{S as es}from"./jmkoub13urc7hve4.js";import{T as ss}from"./pfks1t2fx5uviwac.js";import as from"./bio6zqk7sn9h2l92.js";import{u as ts}from"./k43gn7pl526u53kc.js";import{u as ls}from"./ctbtetl25rmz78uu.js";import"./exm3n162m2u9ltpu.js";import"./og8jhmm6v1nbwzo4.js";import"./kfdkis1zwf4ccfgg.js";import"./ol9d5wxhynx9q2is.js";import"./mbmcx8v24u1ao1ke.js";import"./jdzosouyvpzu0tpb.js";const m=ge({modalUploadSectionTitle:{defaultMessage:"Upload a skill",id:"hazelnutsSettings.modalUploadSectionTitle"},uploadDescription:{defaultMessage:"Drop a zipped skill to make it available in ChatGPT. Tip: you can pack multiple skills in one .zip file.",id:"hazelnutsSettings.uploadDescription"},dropPrompt:{defaultMessage:"Drag and drop a .zip skill here, or click to select",id:"hazelnutsSettings.dropPrompt"},dropActive:{defaultMessage:"Drop the .zip file here…",id:"hazelnutsSettings.dropActive"},clearSelection:{defaultMessage:"Clear",id:"hazelnutsSettings.clearSelection"},save:{defaultMessage:"Save",id:"hazelnutsSettings.save"},saving:{defaultMessage:"Saving…",id:"hazelnutsSettings.saving"},invalidFile:{defaultMessage:"Only .zip files are accepted.",id:"hazelnutsSettings.invalidFile"},uploadFailed:{defaultMessage:"Failed to upload skill. Please try again.",id:"hazelnutsSettings.uploadFailed"},uploadSuccess:{defaultMessage:"Skill uploaded",id:"hazelnutsSettings.uploadSuccess"},createFromScratch:{defaultMessage:"Create a skill from scratch",id:"hazelnutsSettings.createFromScratch"}});function is({isOpen:a,onClose:t}){const i=ce(),p=xe(),C=ue(),g=pe(),[x,k]=d.useState(null),[I,F]=d.useState(!1),N=d.useCallback(u=>{u.length>0&&k(u[0])},[]),{getRootProps:L,getInputProps:B,isDragActive:P,fileRejections:O}=ts({multiple:!1,noKeyboard:!0,accept:{"application/zip":[".zip"]},onDropAccepted:N}),{mutateAsync:R}=me({mutationFn:async u=>await Y.safePost("/hazelnuts",{requestBody:{archive_file_id:u}}),onSuccess:async()=>{await C.invalidateQueries({queryKey:["hazelnuts"]})}}),_=d.useCallback(async()=>{if(x)try{F(!0);const u=x.type||"application/zip",y=await Y.safePost("/hazelnuts/uploads",{requestBody:{filename:x.name,content_type:u}}),S=y.upload_url,q=y.file_id;await as.put(S,x,{headers:{"Content-Type":u,"x-ms-blob-type":"BlockBlob","x-ms-version":"2020-04-08"}});const T=await R(q),f=T.hazelnuts[0]?T.hazelnuts[0].id:null;k(null),p.success(i.formatMessage(m.uploadSuccess)),ne.logStructuredEvent($e,{hazelnutId:f!=null?f:""}),ne.logEventWithStatsig("chatgpt_web_skill_creation_method_selected","chatgpt_web_skill_creation_method_selected",{method:"zip",hazelnut_id:f!=null?f:""}),t(),f&&g("/skills/editor/".concat(f))}catch(u){p.danger(i.formatMessage(m.uploadFailed))}finally{F(!1)}},[R,i,t,x,p,g]),v=["border-token-border-light bg-token-main-surface-primary","border border-dashed rounded-2xl px-4 py-8 text-center transition cursor-pointer","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-token-border-strong",P?"border-token-border-strong bg-token-main-surface-secondary":"hover:bg-token-main-surface-secondary"].join(" ");return e.jsx(Ze,{isOpen:a,onClose:()=>t(),title:e.jsx(r,o({},m.modalUploadSectionTitle)),description:e.jsx(r,o({},m.uploadDescription)),testId:"modal-hazelnut-upload-modal",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",oe(o({},L({className:v})),{children:[e.jsx("input",o({},B())),e.jsx("div",{className:"text-sm",children:P?e.jsx(r,o({},m.dropActive)):e.jsx(r,o({},m.dropPrompt))})]})),x&&e.jsxs("div",{className:"border-token-border-light bg-tertiary flex flex-wrap items-center gap-2 rounded-xl border px-3 py-2 text-sm",children:[e.jsx("div",{className:"min-w-0 flex-1 truncate font-medium",children:x.name}),e.jsx(j,{size:"small",color:"secondary",onClick:()=>k(null),children:e.jsx(r,o({},m.clearSelection))})]}),O.length>0&&e.jsx("div",{className:"text-token-interactive-label-warning-secondary text-sm",children:e.jsx(r,o({},m.invalidFile))}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(j,{color:"secondary",onClick:()=>{t(),g("/skills/editor")},children:e.jsx(r,o({},m.createFromScratch))}),e.jsx(j,{onClick:_,disabled:!x||I,children:I?e.jsx(r,o({},m.saving)):e.jsx(r,o({},m.save))})]})]})})}const os=Ve(()=>Te(()=>import("./jaukcz96ive6l3u7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(a=>a.SkillSharingModal)),H=["hazelnuts-dashboard"],de=["#A26EF6","#5DC399","#F97066","#FDB022","#8D8DFF","#4FA8FF","#FF8DC7"];function rs(){"use no forget";var W,$,Z;const a=ce(),t=pe(),i=xe(),p=ue(),[C,g]=d.useState(null),x=he(),k=(W=fe(x))==null?void 0:W.normalizedAccountUserId,[I,F]=d.useState(!1),[N,L]=d.useState(null),{skillData:B}=Ee({hazelnutId:N!=null?N:""}),{data:P,isLoading:O,isError:R,refetch:_}=De({queryKey:H,queryFn:async()=>await Y.safeGet("/hazelnuts/dashboard",{}),staleTime:300*1e3}),v=d.useMemo(()=>{var s;return(s=P==null?void 0:P.hazelnuts)!=null?s:[]},[P]),[u,y]=d.useState(null),[S,q]=d.useState("active"),[T,f]=d.useState(""),[A,K]=d.useState(null),{mutateAsync:U}=me({mutationFn:async s=>await re(s,!0),onSuccess:async()=>{await p.invalidateQueries({queryKey:H}),await _()},onError:()=>i.danger(a.formatMessage(l.addFailed))}),z=d.useCallback((s,n)=>(u==null?void 0:u.hazelnutId)===s&&(!n||u.action===n),[u]),ke=d.useCallback(s=>Ie(s),[]),ye=d.useCallback(async s=>{y({hazelnutId:s,action:"add"});try{await U(s)}finally{y(null)}},[U]),be=d.useCallback(async s=>{y({hazelnutId:s,action:"disable"});try{await re(s,!1),await p.invalidateQueries({queryKey:H}),await _()}finally{y(null)}},[p,_]),G=d.useCallback(async s=>{var n,c;y({hazelnutId:s,action:"try"});try{const h=(c=(n=v.find(w=>w.id===s))==null?void 0:n.name)!=null?c:"this";v.some(w=>w.id===s&&w.in_my_list)||await U(s);const b=new URLSearchParams;b.set(Le,s),b.set("prompt","I just added the “".concat(h,"” skill. Let's explore what it does with an example. Make up a realistic user prompt and then use the full Skill end to end.")),b.set("model","gpt-5-2-thinking"),Re(t,{params:b})}finally{y(null)}},[U,v,t]),Q=d.useMemo(()=>{const s=T.trim().toLowerCase(),n=v.filter(c=>{var E,b,w;const h=!!(k&&c.creator_id===k);return S==="active"?c.enabled:S==="mine"?h:S==="shared"?!h&&!((b=(E=c.share_summary)==null?void 0:E.shared_with_workspace)!=null&&b):S==="explore"?!h&&((w=c.share_summary)==null?void 0:w.shared_with_workspace):!0});return s?n.filter(c=>c.name.toLowerCase().includes(s)):n},[S,v,T,k]),we=[{key:"active",label:a.formatMessage(l.activeTab)},{key:"mine",label:a.formatMessage(l.mineTab)},{key:"shared",label:a.formatMessage(l.sharedTab)},{key:"explore",label:a.formatMessage(l.exploreTab)}],Me=(s,n)=>{const c=de[Math.abs(ns(s))%de.length];return e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full text-sm font-semibold text-white",style:{backgroundColor:c},children:n.slice(0,2).toUpperCase()})},je=d.useCallback(s=>{var c,h;const n=s.share_summary;return n?n.shared_with_workspace?a.formatMessage(l.shareWorkspace):((c=n.group_count)!=null?c:0)>0?a.formatMessage(l.shareGroups,{count:n.group_count}):((h=n.user_count)!=null?h:0)>0?a.formatMessage(l.sharePeople,{count:n.user_count}):a.formatMessage(l.shareNone):a.formatMessage(l.shareNone)},[a]),ve=A&&(Z=($=v.find(s=>s.id===A))==null?void 0:$.creator_id)!=null?Z:"";return e.jsxs("div",{className:"flex h-full w-full flex-1 flex-col items-center justify-self-center",children:[e.jsxs("div",{className:"mx-auto w-full max-w-6xl space-y-6 px-6 py-8",children:[e.jsx("header",{children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-3",children:[e.jsx("h1",{className:"text-token-text-primary text-xl font-semibold md:text-2xl",children:e.jsx(r,o({},l.title))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(j,{onClick:()=>F(!0),children:e.jsx(r,o({},l.create))})})]})}),e.jsxs("div",{className:"bg-primary rounded-2xl",children:[e.jsxs("div",{className:"border-token-border-light flex items-center justify-between gap-4 border-b px-4 pt-2",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-1",children:we.map(s=>e.jsx(ss,{isActive:S===s.key,onClick:()=>q(s.key),className:"whitespace-nowrap",children:s.label},s.key))}),e.jsx(Ue,{value:T,onChange:s=>f(s.target.value),placeholder:a.formatMessage(l.searchPlaceholder),className:"min-w-[200px]",inputClassName:"w-full py-1.5 pe-3 text-sm"})]}),O?e.jsx("div",{className:"text-token-text-tertiary p-4 text-sm",children:e.jsx(r,o({},l.loading))}):R?e.jsxs("div",{className:"space-y-3 p-4 text-sm",children:[e.jsx("div",{className:"text-token-interactive-label-warning-secondary",children:e.jsx(r,o({},l.loadError))}),e.jsx(j,{size:"small",color:"secondary",onClick:()=>_(),children:e.jsx(r,o({},l.retry))})]}):Q.length===0?e.jsxs("div",{className:"flex flex-col items-center gap-2 px-4 py-12 text-center",children:[e.jsx("div",{className:"text-token-text-primary font-semibold",children:e.jsx(r,o({},l.emptyTitle))}),e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(r,o({},l.emptySubtitle))}),e.jsx(j,{as:"link",to:"/skills/editor",size:"small",className:"mt-2",children:e.jsx(r,o({},l.create))})]}):e.jsx("div",{className:"overflow-x-auto",children:Q.map((s,n)=>{var J,X,ee,se,ae;const c=!!(k&&s.creator_id===k),h=c?a.formatMessage(l.creatorYou):(X=(J=s.creator_name)!=null?J:s.creator_id)!=null?X:a.formatMessage(l.creatorUnknown),E=n===Q.length-1,b=!s.enabled,w=!!((ee=s.permissions)!=null&&ee.can_write),V=c||w;return e.jsxs("div",{className:Je("group flex flex-wrap items-center gap-4 px-4 py-3 md:flex-nowrap",!E&&"border-token-border-light border-b"),children:[Me(s.id,s.name),e.jsxs("div",{className:"w-[320px] max-w-[320px] min-w-[320px]",children:[e.jsx("button",{type:"button",className:"text-token-text-primary truncate text-start font-semibold hover:underline",onClick:()=>L(s.id),children:s.name}),e.jsx(Xe,{label:(se=s.description)!=null?se:a.formatMessage(l.noDescription),side:"top",align:"start",wide:!0,children:e.jsx("div",{className:"text-token-text-tertiary truncate text-sm",children:(ae=s.description)!=null?ae:e.jsx(r,o({},l.noDescription))})})]}),e.jsxs("div",{className:"text-token-text-secondary flex w-[180px] max-w-[180px] min-w-[180px] items-center gap-1.5 truncate text-sm",children:[e.jsx(ze,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"truncate",children:h})]}),e.jsxs("div",{className:"text-token-text-secondary flex w-[200px] max-w-[200px] min-w-[200px] items-center gap-1.5 truncate text-sm",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:je(s)})]}),e.jsxs("div",{className:"flex w-33 flex-none items-center justify-between gap-2",children:[b?e.jsx(j,{size:"small",color:"secondary",onClick:()=>ye(s.id),loading:z(s.id,"add"),disabled:z(s.id),children:e.jsx(r,o({},l.enable))}):e.jsx(j,{size:"small",color:"secondary",onClick:()=>G(s.id),loading:z(s.id,"try"),disabled:z(s.id),children:e.jsx(r,o({},l.trySkill))}),e.jsxs(M.Root,{open:C===s.id,onOpenChange:D=>g(D?s.id:null),children:[e.jsx(M.Trigger,{asChild:!0,children:e.jsx(j,{icon:Be,color:"ghost",size:"small",onClick:D=>D.stopPropagation()})}),e.jsx(M.Portal,{children:e.jsxs(M.Content,{size:"auto",children:[V&&e.jsxs(e.Fragment,{children:[e.jsx(M.Item,{icon:Oe,label:a.formatMessage(l.share),onClick:()=>K(s.id)}),e.jsx(M.Item,{icon:qe,label:a.formatMessage(l.menuEdit),onClick:()=>t("/skills/editor/".concat(s.id))})]}),e.jsx(M.Item,{icon:Qe,label:a.formatMessage(l.exportButton),onClick:async()=>{if(!(!s.id||!s.sediment_id))try{const D=s.base_sediment_id,te=(await Ye(s.id,D)).download_url;if(te)window.open(te,"_blank"),i.success(a.formatMessage(l.exportSuccess));else throw new Error("Missing download URL")}catch(D){i.danger(a.formatMessage(l.exportFailed))}},disabled:!s.sediment_id}),s.enabled&&e.jsx(M.Item,{icon:Ke,label:a.formatMessage(l.menuDisable),onClick:()=>be(s.id)}),V&&e.jsx(M.Item,{icon:Ge,color:"danger",label:a.formatMessage(l.menuDelete),onClick:async()=>{await ke(s.id),await p.invalidateQueries({queryKey:H}),await _(),i.success(a.formatMessage(l.deleteSuccess,{name:s.name}))}})]})})]})]})]},s.id)})})]})]}),e.jsx(is,{isOpen:I,onClose:()=>F(!1)}),A&&e.jsx(es,{hazelnutId:A,creatorId:ve,isOpen:!!A,onClose:()=>K(null)}),N&&e.jsx(os,{skill:B,onClose:()=>L(null),onTryIt:s=>G(s.id)})]})}function ns(a){let t=0;for(let i=0;i<a.length;i+=1)t=(t<<5)-t+a.charCodeAt(i),t|=0;return t}const l=ge({title:{defaultMessage:"Skills",id:"skillsPage.title"},description:{defaultMessage:"Manage and inspect workspace skills.",id:"skillsPage.description"},loading:{defaultMessage:"Loading…",id:"skillsPage.loading"},loadError:{defaultMessage:"Failed to load skills",id:"skillsPage.loadError"},retry:{defaultMessage:"Retry",id:"skillsPage.retry"},empty:{defaultMessage:"No skills yet",id:"skillsPage.empty"},emptyTitle:{defaultMessage:"No active skills",id:"skillsPage.emptyTitle"},emptySubtitle:{defaultMessage:"Skills are a way to teach ChatGPT how you want it to work.",id:"skillsPage.emptySubtitle"},nameLabel:{defaultMessage:"Name",id:"skillsPage.nameLabel"},descLabel:{defaultMessage:"Description",id:"skillsPage.descLabel"},actionsLabel:{defaultMessage:"Actions",id:"skillsPage.actionsLabel"},noDescription:{defaultMessage:"No description provided.",id:"skillsPage.noDescription"},addToMyList:{defaultMessage:"Add to my list",id:"skillsPage.addToMyList"},addFailed:{defaultMessage:"Failed to add skill to your list. Please try again.",id:"skillsPage.addFailed"},added:{defaultMessage:"Added",id:"skillsPage.added"},enable:{defaultMessage:"Enable",id:"skillsPage.enable"},trySkill:{defaultMessage:"Try in chat",id:"skillsPage.trySkill"},share:{defaultMessage:"Share",id:"skillsPage.share"},create:{defaultMessage:"+ New Skill",id:"skillsPage.create"},activeTab:{defaultMessage:"Active",id:"skillsPage.activeTab"},mineTab:{defaultMessage:"Created by you",id:"skillsPage.mineTab"},sharedTab:{defaultMessage:"Shared with you",id:"skillsPage.sharedTab"},exploreTab:{defaultMessage:"Explore",id:"skillsPage.exploreTab"},searchPlaceholder:{defaultMessage:"Search skills",id:"skillsPage.searchPlaceholder"},creatorUnknown:{defaultMessage:"Unknown creator",id:"skillsPage.creatorUnknown"},menuEdit:{defaultMessage:"Edit",id:"skillsPage.menuEdit"},menuDelete:{defaultMessage:"Delete skill",id:"skillsPage.menuDelete"},menuDisable:{defaultMessage:"Disable in chat",id:"skillsPage.menuDisable"},shareWorkspace:{defaultMessage:"Workspace",id:"skillsPage.shareWorkspace"},shareGroups:{defaultMessage:"{count} groups",id:"skillsPage.shareGroups"},sharePeople:{defaultMessage:"{count, plural, one {# person} other {# people}}",id:"skillsPage.sharePeople"},shareNone:{defaultMessage:"Not shared",id:"skillsPage.shareNone"},exportButton:{defaultMessage:"Download Zip",id:"skillsPage.exportButton"},exportSuccess:{defaultMessage:"Export started",id:"skillsPage.exportSuccess"},exportFailed:{defaultMessage:"Export failed. Please try again.",id:"skillsPage.exportFailed"},deleteSuccess:{defaultMessage:"Deleted {name}",id:"skillsPage.deleteSuccess"},creatorYou:{defaultMessage:"You",id:"skillsPage.creatorYou"}}),Ss={hasRouteMeta:!1,useScrollRestoration:!0},Ps=()=>({isOutletBasedRoute:!0,pageType:"library"}),_s=Fe(function(){"use forget";const t=Ae.c(3),i=he();let p;t[0]!==i?(p=!!fe(i)&&We(i),t[0]=i,t[1]=p):p=t[1];const C=p;if(ls(C),!C)return null;let g;return t[2]===Symbol.for("react.memo_cache_sentinel")?(g=e.jsx(rs,{}),t[2]=g):g=t[2],g});export{Ps as clientLoader,_s as default,Ss as handle};
//# sourceMappingURL=ml0c3vp2fbrp8eba.js.map
