var fe=Object.freeze,he=Object.defineProperty,Ce=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ge=(t,e,r)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C=(t,e)=>{for(var r in e||(e={}))Te.call(e,r)&&ge(t,r,e[r]);if(pe)for(var r of pe(e))je.call(e,r)&&ge(t,r,e[r]);return t},ae=(t,e)=>Ce(t,ve(e));var ne=(t,e)=>fe(he(t,"raw",{value:fe(e||t.slice())}));import{f as Ae,c as J,r as I,u as Ne,e as re,j as o,M as X,i as Ee,m as Le,a0 as Me}from"./fg33krlcm0qyi6yw.js";import{T as Pe,l as oe,a as Re,u as Ie,K as We}from"./c2q6rcdkhv2k4twp.js";import{R as Be,c_ as ye,b as Se,F as ce,a9 as le,l as De,qD as Ke,H as Fe,ag as qe,P as $e,L as Ue,r1 as Ve}from"./mtk1qztvnb31pw5r.js";import{y as Ge}from"./k65njl5wlgspihfr.js";import{C as He}from"./pa41jscn0rs1kzfk.js";const v=Ae({optionalField:{id:"IJLQx/",defaultMessage:"(optional)"},teachersCreateWorkspacePageTitle:{id:"5ogaPW",defaultMessage:"Set up your ChatGPT for Teachers workspace"},workspaceNameLabel:{id:"BiwR3m",defaultMessage:"Workspace name"},workspaceNamePlaceholder:{id:"06SA34",defaultMessage:"Enter your workspace name"},purchaseStepTitle:{id:"ISfo48",defaultMessage:"Set up your ChatGPT for Teachers workspace"},purchaseStepSubtitle:{id:"/VsLeB",defaultMessage:"You can get started on your own or add your teaching team"},continueButton:{id:"fsy6oV",defaultMessage:"Continue"},agreeAndContinueButton:{id:"OnbV/Q",defaultMessage:"Agree and Continue"},dpaSummaryIntro:{id:"CpCFBV",defaultMessage:"Here's a short summary of the Teacher Access Terms -- please read the linked terms for full details."},dpaSummaryEducationPurpose:{id:"yPGn52",defaultMessage:"I'm using this account for school-related teaching work, and I understand it may later be managed by my School."},dpaSummaryNoTraining:{id:"Ed7W+Y",defaultMessage:"OpenAI won't train on content I submit here, including Student Data."},teacherAccessTermsLinkText:{id:"CEzYQ9",defaultMessage:"Teacher Access Terms"},studentDataPrivacyAgreementLinkText:{id:"5nS6GS",defaultMessage:"Student Data Privacy Agreement"},teacherAccessAgreementLabel:{id:"qoGgzA",defaultMessage:"I agree to our {teacherAccessTermsLink} and {studentDataPrivacyAgreementLink}."}}),Ye=t=>Be.safePost("/accounts/create_workspace_without_subscription",{requestBody:t}),ze=3;function Qe(){"use forget";var W,L,Y,M;const t=J.c(22),e=Se();let r;t[0]!==e?(r=ye(),t[0]=e,t[1]=r):r=t[1];const c=!r,[n,a]=I.useState(null),[l,m]=I.useState(!1),[i,u]=I.useState(!1),T=I.useRef(!0);let k;t[2]===Symbol.for("react.memo_cache_sentinel")?(k={mutationFn:Oe,onSuccess:b=>{var x,j;if(u(!1),b.metadata){const f=b.metadata.claimed_workspace,d=ae(C({},b.metadata),{claimed_workspace:f&&ae(C({},f),{auto_accept_requests:(x=f.auto_accept_requests)!=null?x:!1,workspace_discoverable:(j=f.workspace_discoverable)!=null?j:!1})});a(d)}m(!0)},onError:()=>{a(null),u(!0),m(!0)}},t[2]=k):k=t[2];const K=Ne(k);let _,g;t[3]!==c||t[4]!==K?(_=()=>{!c&&T.current&&(T.current=!1,K.mutate())},g=[c,K],t[3]=c,t[4]=K,t[5]=_,t[6]=g):(_=t[5],g=t[6]),I.useEffect(_,g);let h;e:{if(c){let s;t[7]===Symbol.for("react.memo_cache_sentinel")?(s={name:"logged-out"},t[7]=s):s=t[7],h=s;break e}if(!l){let s;t[8]===Symbol.for("react.memo_cache_sentinel")?(s={name:"loading"},t[8]=s):s=t[8],h=s;break e}if(i){let s;t[9]===Symbol.for("react.memo_cache_sentinel")?(s={name:"coming-soon"},t[9]=s):s=t[9],h=s;break e}if(!n){let s;t[10]===Symbol.for("react.memo_cache_sentinel")?(s={name:"needs-verification"},t[10]=s):s=t[10],h=s;break e}const b=n.claimed_workspace;if(b){const s=(W=n.verification_id)!=null?W:null;let p;t[11]!==b||t[12]!==s?(p={name:"domain-claimed",workspace:b,verificationId:s},t[11]=b,t[12]=s,t[13]=p):p=t[13],h=p;break e}const x=n.verification_status,j=(L=n.retry_count)!=null?L:0,f=(Y=n.max_retry_attempts)!=null?Y:ze,d=(M=n.retry_limit_reached)!=null?M:j>=f;if(x==="verified"){let s;t[14]===Symbol.for("react.memo_cache_sentinel")?(s={name:"verified"},t[14]=s):s=t[14],h=s;break e}if(x==="error"){const s=!d;let p;t[15]!==f||t[16]!==j||t[17]!==s?(p={name:"error",canRetry:s,retryCount:j,maxRetryAttempts:f},t[15]=f,t[16]=j,t[17]=s,t[18]=p):p=t[18],h=p;break e}if(x==="linked"){let s;t[19]===Symbol.for("react.memo_cache_sentinel")?(s={name:"linked"},t[19]=s):s=t[19],h=s;break e}const w=n==null?void 0:n.verification_id;let y;t[20]!==w?(y={name:"needs-verification",verificationId:w},t[20]=w,t[21]=y):y=t[21],h=y}return h}function Oe(){return Pe.refreshEnrollmentStatus()}const Xe=t=>{"use forget";const e=J.c(10),{content:r,onPrevious:c,headerPaddingClassName:n}=t,a=n!=null?n:"pt-16 [@media(min-width:450px)]:pt-[12vh]";let l;e[0]!==a?(l=De("relative flex min-h-[100dvh] w-screen justify-center overflow-y-auto",a),e[0]=a,e[1]=l):l=e[1];let m;e[2]!==c?(m=c&&o.jsx("div",{className:"absolute start-4 top-4",children:o.jsx(le,{onClick:c,icon:He,color:"ghost"})}),e[2]=c,e[3]=m):m=e[3];let i;e[4]!==r?(i=o.jsx("div",{className:"flex max-w-full flex-none items-center justify-center [@media(min-width:450px)]:w-[520px]",children:r}),e[4]=r,e[5]=i):i=e[5];let u;return e[6]!==l||e[7]!==m||e[8]!==i?(u=o.jsxs("div",{className:l,children:[m,i]}),e[6]=l,e[7]=m,e[8]=i,e[9]=u):u=e[9],u},Je=t=>{"use forget";const e=J.c(10),{title:r,subTitle:c,children:n}=t;let a;e[0]!==r?(a=o.jsx("div",{className:"text-3xl font-normal",children:r}),e[0]=r,e[1]=a):a=e[1];let l;e[2]!==c?(l=c&&o.jsx("div",{className:"text-token-text-secondary",children:c}),e[2]=c,e[3]=l):l=e[3];let m;e[4]!==a||e[5]!==l?(m=o.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[a,l]}),e[4]=a,e[5]=l,e[6]=m):m=e[6];let i;return e[7]!==n||e[8]!==m?(i=o.jsxs("div",{className:"box-content flex w-full flex-col gap-6 px-4",children:[m,n]}),e[7]=n,e[8]=m,e[9]=i):i=e[9],i},Ze=t=>{"use forget";const e=J.c(10),{onClick:r,disabled:c,labelMessage:n}=t,[a,l]=I.useState(!1),m=re();let i;e[0]!==r?(i=async()=>{l(!0),await r(),l(!1)},e[0]=r,e[1]=i):i=e[1];let u;e[2]!==m||e[3]!==n?(u=m.formatMessage(n!=null?n:v.continueButton),e[2]=m,e[3]=n,e[4]=u):u=e[4];let T;return e[5]!==c||e[6]!==a||e[7]!==i||e[8]!==u?(T=o.jsx(le,{size:"large",loading:a,disabled:c,onClick:i,children:u}),e[5]=c,e[6]=a,e[7]=i,e[8]=u,e[9]=T):T=e[9],T};var ke;const et=ce.label(ke||(ke=ne(["font-medium"])));var _e;ce.div(_e||(_e=ne(["text-red-500 text-sm mb-2"])));var xe;const tt=ce.input(xe||(xe=ne(["rounded-full border border-token-border-default bg-token-bg-primary placeholder:text-token-text-tertiary px-5 py-3 focus:border-token-icon-accent focus:ring-token-icon-accent focus:ring-0"]))),st=t=>{"use forget";const e=J.c(5),{children:r,required:c}=t;let n;e[0]!==c?(n=!c&&o.jsxs("span",{className:"text-token-text-secondary text-xs",children:["Â ",o.jsx(X,C({},v.optionalField))]}),e[0]=c,e[1]=n):n=e[1];let a;return e[2]!==r||e[3]!==n?(a=o.jsxs(et,{children:[r,n]}),e[2]=r,e[3]=n,e[4]=a):a=e[4],a},at=t=>{"use forget";const e=J.c(52),{disableContinueButton:r,onNext:c,onCancel:n}=t,a=re(),l=Ee(),m=v.purchaseStepTitle,i=v.purchaseStepSubtitle,[u,T]=I.useState(""),[k,K]=I.useState(!1);let _;e[0]!==u?(_=u.trim(),e[0]=u,e[1]=_):_=e[1];const g=_,h=k&&g.length>0&&!r;let S;e[2]!==k||e[3]!==g?(S={workspaceName:g,agreedToDPA:k},e[2]=k,e[3]=g,e[4]=S):S=e[4];const W=S;let L;e[5]===Symbol.for("react.memo_cache_sentinel")?(L=o.jsx("a",{href:"https://openai.com/policies/education-terms",className:"underline",target:"_blank",rel:"noreferrer",children:o.jsx(X,C({},v.teacherAccessTermsLinkText))}),e[5]=L):L=e[5];const Y=L;let M;e[6]===Symbol.for("react.memo_cache_sentinel")?(M=o.jsx("a",{href:"https://openai.com/policies/student-data-privacy",className:"underline",target:"_blank",rel:"noreferrer",children:o.jsx(X,C({},v.studentDataPrivacyAgreementLinkText))}),e[6]=M):M=e[6];const b=M;let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=[{id:"education-purpose",message:v.dpaSummaryEducationPurpose},{id:"no-training",message:v.dpaSummaryNoTraining}],e[7]=x):x=e[7];const j=x;let f;e[8]!==a?(f=a.formatMessage(m),e[8]=a,e[9]=f):f=e[9];let d;e[10]!==a?(d=i&&a.formatMessage(i),e[10]=a,e[11]=d):d=e[11];let w;e[12]!==a?(w=a.formatMessage(v.workspaceNameLabel),e[12]=a,e[13]=w):w=e[13];let y;e[14]!==w?(y=o.jsx(st,{required:!0,children:w}),e[14]=w,e[15]=y):y=e[15];let s;e[16]===Symbol.for("react.memo_cache_sentinel")?(s=Z=>T(Z.target.value),e[16]=s):s=e[16];let p;e[17]!==a?(p=a.formatMessage(v.workspaceNamePlaceholder),e[17]=a,e[18]=p):p=e[18];let F;e[19]!==p||e[20]!==u?(F=o.jsx(tt,{id:"workspace-name",name:"workspace-name",value:u,onChange:s,placeholder:p}),e[19]=p,e[20]=u,e[21]=F):F=e[21];let P;e[22]!==F||e[23]!==y?(P=o.jsxs("div",{className:"flex flex-col gap-1.5",children:[y,F]}),e[22]=F,e[23]=y,e[24]=P):P=e[24];let q;e[25]===Symbol.for("react.memo_cache_sentinel")?(q=o.jsx("p",{className:"text-token-text-secondary",children:o.jsx(X,C({},v.dpaSummaryIntro))}),e[25]=q):q=e[25];let $;e[26]===Symbol.for("react.memo_cache_sentinel")?($=o.jsxs("div",{className:"border-token-border-strong bg-token-main-surface-secondary rounded-2xl border px-4 py-4 text-sm",children:[q,o.jsx("ul",{className:"text-token-text-primary mt-3 list-disc space-y-2 ps-4",children:j.map(nt)})]}),e[26]=$):$=e[26];let U;e[27]===Symbol.for("react.memo_cache_sentinel")?(U=Z=>K(Z.target.checked),e[27]=U):U=e[27];let V;e[28]===Symbol.for("react.memo_cache_sentinel")?(V=o.jsx(X,ae(C({},v.teacherAccessAgreementLabel),{values:{teacherAccessTermsLink:Y,studentDataPrivacyAgreementLink:b}})),e[28]=V):V=e[28];let B;e[29]!==k?(B=o.jsx("div",{className:"flex flex-col gap-1.5",children:o.jsx(Ge,{id:"dpa-agree",checked:k,onChange:U,containerClassName:"flex items-center gap-2",label:V})}),e[29]=k,e[30]=B):B=e[30];let R;e[31]!==P||e[32]!==B?(R=o.jsxs("div",{className:"flex flex-col gap-5",children:[P,$,B]}),e[31]=P,e[32]=B,e[33]=R):R=e[33];const Q=!h;let A;e[34]!==c||e[35]!==W?(A=()=>c(C({},W)),e[34]=c,e[35]=W,e[36]=A):A=e[36];let N;e[37]!==Q||e[38]!==A?(N=o.jsx(Ze,{disabled:Q,labelMessage:v.agreeAndContinueButton,onClick:A}),e[37]=Q,e[38]=A,e[39]=N):N=e[39];let E;e[40]!==l||e[41]!==n?(E=()=>{n==null||n(),l("/")},e[40]=l,e[41]=n,e[42]=E):E=e[42];let G;e[43]===Symbol.for("react.memo_cache_sentinel")?(G=o.jsx(X,{id:"TjfExQ",defaultMessage:"Cancel"}),e[43]=G):G=e[43];let H;e[44]!==E?(H=o.jsx(le,{color:"ghost",onClick:E,children:G}),e[44]=E,e[45]=H):H=e[45];let O;return e[46]!==R||e[47]!==N||e[48]!==H||e[49]!==f||e[50]!==d?(O=o.jsx(Xe,{content:o.jsxs(Je,{title:f,subTitle:d,children:[R,N,H]})}),e[46]=R,e[47]=N,e[48]=H,e[49]=f,e[50]=d,e[51]=O):O=e[51],O};function nt(t){return o.jsx("li",{children:o.jsx(X,C({},t.message))},t.id)}const D={impression:{segment:"K12 Create Workspace: Shown",statsig:"chatgpt_k12_create_workspace_shown"},continue:{segment:"K12 Create Workspace: Continue Clicked",statsig:"chatgpt_k12_create_workspace_continue_clicked"},cancel:{segment:"K12 Create Workspace: Cancel Clicked",statsig:"chatgpt_k12_create_workspace_cancel_clicked"},result:{segment:"K12 Create Workspace: Result",statsig:"chatgpt_k12_create_workspace_result"}},ot=()=>{"use forget";var H,O,Z,ie,me;const t=J.c(45),e=re(),r=Se(),c=Qe();let n;t[0]!==r?(n=ye(),t[0]=r,t[1]=n):n=t[1];const a=n;let l;t[2]!==r?(l=Ke(r),t[2]=r,t[3]=l):l=t[3];const m=l,i=Fe(),u=qe(),T=Le(),[k,K]=I.useState(!1),_=(Z=(O=i==null?void 0:i.planType)!=null?O:(H=m==null?void 0:m.account)==null?void 0:H.planType)!=null?Z:null,g=(ie=u==null?void 0:u.email_domain_type)!=null?ie:null;let h;t[4]!==T.search?(h=new URLSearchParams(T.search).get("referer"),t[4]=T.search,t[5]=h):h=t[5];const S=h,W="verificationId"in c&&(me=c.verificationId)!=null?me:null;let L;t[6]!==c.name||t[7]!==W?(L={enrollmentState:c.name,enrollmentVerificationId:W},t[6]=c.name,t[7]=W,t[8]=L):L=t[8];const Y=L,M=a?"logged_in":"logged_out",b=a?_!=null?_:"unknown":null;let x;t[9]!==g||t[10]!==Y||t[11]!==a||t[12]!==M||t[13]!==b?(x=C({isLoggedIn:a,loggedInStatus:M,accountPlanType:b,emailDomainType:g},Y),t[9]=g,t[10]=Y,t[11]=a,t[12]=M,t[13]=b,t[14]=x):x=t[14];const j=x;let f;t[15]!==j||t[16]!==S?(f=(se,z,ee)=>{$e.logEventWithStatsig(se,z,C(ae(C({},j),{referer:S!=null?S:null}),ee))},t[15]=j,t[16]=S,t[17]=f):f=t[17];const d=f,w=a?"logged_in":"logged_out",y=S!=null?S:null;let s;t[18]!==g||t[19]!==_||t[20]!==y||t[21]!==w?(s={loggedInStatus:w,accountPlanType:_,emailDomainType:g,referer:y},t[18]=g,t[19]=_,t[20]=y,t[21]=w,t[22]=s):s=t[22];const p=s,F=I.useRef(!1),P=g!=null,q=c.name!=="loading";let $,U;t[23]!==p||t[24]!==P||t[25]!==q||t[26]!==a||t[27]!==d?($=()=>{!a||!P||!q||F.current||(d(D.impression.segment,D.impression.statsig),oe("create_workspace","page_view",p),F.current=!0)},U=[p,P,q,a,d],t[23]=p,t[24]=P,t[25]=q,t[26]=a,t[27]=d,t[28]=$,t[29]=U):($=t[28],U=t[29]),I.useEffect($,U);let V;t[30]!==d?(V=async se=>{var ue,de;K(!0);const z=(ue=se.workspaceName)!=null?ue:"",ee=(de=se.agreedToDPA)!=null?de:!1;d(D.continue.segment,D.continue.statsig,{workspaceNameLength:z.length,agreedToDpa:ee}),oe("create_workspace","continue_click",{workspaceNameLength:z.length,agreedToDpa:ee});try{await Ye({workspace_name:z,agreed_to_dpa:ee,plan_type:Ue.K12}),d(D.result.segment,D.result.statsig,{status:"success",workspaceNameLength:z.length}),oe("create_workspace","continue_success",{workspaceNameLength:z.length}),await new Promise(rt),Ve()}catch(be){const te=be,we=te instanceof Error?{errorName:te.name,errorMessage:te.message}:{errorName:typeof te,errorMessage:String(te)};d(D.result.segment,D.result.statsig,C({status:"error"},we)),K(!1),Re("create_workspace","continue_error",te,{workspaceNameLength:z.length,agreedToDpa:ee})}},t[30]=d,t[31]=V):V=t[31];const B=V;let R;t[32]!==d?(R=()=>{d(D.cancel.segment,D.cancel.statsig),oe("create_workspace","cancel_click")},t[32]=d,t[33]=R):R=t[33];const Q=R;let A;t[34]!==e?(A=e.formatMessage(v.teachersCreateWorkspacePageTitle),t[34]=e,t[35]=A):A=t[35];let N;t[36]!==A?(N=o.jsx("title",{children:A}),t[36]=A,t[37]=N):N=t[37];let E;t[38]!==k||t[39]!==Q||t[40]!==B?(E=o.jsx(at,{disableContinueButton:k,onNext:B,onCancel:Q}),t[38]=k,t[39]=Q,t[40]=B,t[41]=E):E=t[41];let G;return t[42]!==N||t[43]!==E?(G=o.jsxs(o.Fragment,{children:[N,E]}),t[42]=N,t[43]=E,t[44]=G):G=t[44],G};function rt(t){return setTimeout(t,3e3)}const ft="/k12-create-workspace",pt=Me(function(){return Ie("create_workspace")?o.jsx(We,{}):o.jsx(ot,{})});export{ft as T,pt as k,Qe as u};
//# sourceMappingURL=jru75v0gx061ypif.js.map
