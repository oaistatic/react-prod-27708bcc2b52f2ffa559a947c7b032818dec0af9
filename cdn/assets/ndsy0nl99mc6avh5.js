const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/o7qo6wd4jpqdyj9p.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css"])))=>i.map(i=>d[i]);
var Ie=Object.defineProperty,De=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var fe=(a,s,t)=>s in a?Ie(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,n=(a,s)=>{for(var t in s||(s={}))Le.call(s,t)&&fe(a,t,s[t]);if(he)for(var t of he(s))Fe.call(s,t)&&fe(a,t,s[t]);return a},Y=(a,s)=>De(a,Ee(s));import{r as m,e as F,j as e,M as i,f as $,_ as We,a as V,w as Ue,i as ze,u as le,a0 as Be}from"./fg33krlcm0qyi6yw.js";import{a9 as O,l as oe,bX as He,C as ye,x as ke,R as q,bh as qe,v as R,wk as f,G as M,ch as Te,i9 as je,g2 as b,hA as Ke,bv as Ye,bg as Ve,c0 as Se,nu as Qe,b4 as Je,hf as $e,b as Pe,gJ as Ze,uq as Xe,ue as es,tU as we,H as Me,du as ss,m as ce,hj as ts,wl as as,wm as J,wg as se,wh as is,T as ve}from"./mtk1qztvnb31pw5r.js";import{cL as ie,z as Ne,ao as ne,V as ns,y as re,dC as rs,fy as ls,dH as os,dB as cs,da as ds,ay as us,az as ps,cI as ms,q1 as gs,q2 as xs,dy as hs,dz as fs,dA as Ts,an as S,q3 as js}from"./k65njl5wlgspihfr.js";import{a as ws,c as ys}from"./jex6ulz50fkc86ct.js";import{T as p}from"./hcn3kohxpjzaoxwc.js";import{F as ks}from"./dq7bkj1xz32e6d79.js";import{U as Ss}from"./e4epv5uv3mte9vwk.js";import{a as Ps}from"./hzwjbf9hohqarzkm.js";import{T as te}from"./pfks1t2fx5uviwac.js";import{A as Ms}from"./cvmd0fbqha5g7w2u.js";import{F as vs}from"./j6lb21vbnpzhe1mm.js";import{u as Ns,a as bs}from"./qomjt47lfw1l209u.js";import"./c2cj1dlcffke3f7m.js";import"./ohquqctluwabmb5i.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./hb1mva1gmw4bcs8w.js";import"./i1tex5l6gt3gdz3c.js";import"./mcmrxiy9039fw9r6.js";import"./llove4bcy7api840.js";import"./bhm7utdivrybcfbl.js";import"./mivow98b53y1taf8.js";import"./krwszi9u3lj63i9v.js";import"./j41djqzgv0g1dtwh.js";import"./bmppzp3y84hr7irx.js";import"./brnvemwtsabf6tf2.js";import"./k5ymvhnpmrn2doa6.js";import"./moee19t0icnodtc2.js";import"./7v5348ti11nhyc2o.js";function Cs({value:a,title:s,valueClassName:t,onChange:r,emptyMessage:u}){const[o,d]=m.useState(!1),[h,w]=m.useState(""),T=F(),x=m.useRef(null),j=()=>{if(h!==""){const g=h.trim();r([...a,g]),d(!1),w("")}};return e.jsxs(p.Root,{className:"w-auto",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{children:s}),e.jsx(p.HeaderCell,{})]}),e.jsxs(p.Body,{children:[a.map((g,y)=>e.jsxs(p.Row,{children:[e.jsx(p.Cell,{className:t,children:g}),e.jsx(p.Cell,{textAlign:"right",children:e.jsx(O,{type:"button",onClick:()=>{r(a.filter((P,C)=>C!==y))},children:e.jsx(ie,{className:"icon-sm"})})})]},y)),u&&a.length===0?e.jsx(p.Row,{children:e.jsx(p.Cell,{colSpan:2,className:"text-center text-sm italic",children:u})}):null,e.jsxs(p.Row,{children:[e.jsxs("div",{className:oe("mt-2 flex flex-row gap-2 p-1",!o&&"hidden"),children:[e.jsx(Ne,{ariaLabel:T.formatMessage({id:"CgP6Du",defaultMessage:"Add new domain"}),className:"w-80",name:"newDomain",value:h,onChange:g=>{w(g.target.value)},ref:x,onPressEnter:j,placeholder:"example.com"}),e.jsx(O,{className:"grow-0",onClick:j,children:e.jsx(i,{id:"svRVol",defaultMessage:"Add"})})]}),!o&&e.jsxs(O,{type:"button",onClick:()=>{d(!0),setTimeout(()=>{var g;(g=x.current)==null||g.focus()},0)},className:"mt-2",children:[e.jsx(ne,{className:"icon-sm inline-block"}),e.jsx(i,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}function _s(){return e.jsx(He,{className:"icon-sm text-token-text-tertiary ms-1"})}function Os({isOpen:a,onClose:s,account:t,gpt:r}){const u=F(),[o,d]=m.useState(!1),[h,w]=m.useState(""),[T,x]=m.useState(!0),j=r.gizmo.is_unassigned;return e.jsxs(ye,{testId:"modal-change-owner",size:"custom",className:"max-w-lg text-sm",isOpen:a,onClose:ke,type:"success",title:u.formatMessage(j?L.assignModalTitle:L.changeModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(i,Y(n({},L.changeModalPrompt),{values:{gptName:r.gizmo.display.name}}))}),!T&&e.jsx("p",{className:"text-red-500",children:e.jsx(i,n({},L.invalidEmail))}),e.jsx(Ne,{ariaLabel:u.formatMessage({id:"x4A5l2",defaultMessage:"Email"}),className:oe("px-3 py-2",T?"":"border-red-500"),name:"email",type:"email",value:h,placeholder:"Email",onChange:g=>{w(g.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(O,{color:"secondary",onClick:()=>{s(!1),d(!1),x(!0)},loading:o,children:e.jsx(i,n({},L.cancelButtonText))}),e.jsx(O,{color:"primary",loading:o,onClick:()=>{d(!0),x(!0),h==""||!ns.test(h)?(x(!1),d(!1)):q.safePost("/accounts/{account_id}/gpts/{gizmo_id}/owner",{parameters:{path:{account_id:t.id,gizmo_id:r.gizmo.id}},requestBody:{email:h}}).then(()=>{s(!0),d(!1),x(!0)},()=>{x(!1),d(!1)})},children:e.jsx(i,n({},j?L.assignButtonText:L.changeOwnerButtonText))})]})]})}const L=$({changeModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},assignModalTitle:{id:"changeOwnerModal.assignModalTitle",defaultMessage:"Assign Owner"},changeModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},changeOwnerButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},assignButtonText:{id:"changeOwnerModal.assignButtonText",defaultMessage:"Assign"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function As({isOpen:a,onClose:s,account:t,gpt:r}){const u=F(),[o,d]=m.useState(!1);return e.jsxs(ye,{testId:"modal-delete-gpt",size:"custom",className:"max-w-lg text-sm",isOpen:a,onClose:ke,type:"success",title:u.formatMessage(Q.deleteModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(i,Y(n({},Q.deleteModalPrompt),{values:{gptName:r.gizmo.display.name}}))}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(O,{color:"secondary",onClick:()=>{s(!1)},loading:o,children:e.jsx(i,n({},Q.cancelButtonText))}),e.jsx(O,{color:"danger",loading:o,onClick:()=>{d(!0),q.safeDelete("/accounts/{account_id}/gpts/{gizmo_id}",{parameters:{path:{account_id:t.id,gizmo_id:r.gizmo.id}}}).finally(()=>{s(!0),d(!1)})},children:e.jsx(i,n({},Q.deleteButtonText))})]})]})}const Q=$({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),Gs=qe(()=>We(()=>import("./o7qo6wd4jpqdyj9p.js"),__vite__mapDeps([0,1,2,3]))),Rs=10;function Is({account:a,gpt:s,thirdParty:t}){var _,W,U,K,z;const r=V(),u=Pe(),[o,d]=m.useState(!1),[h,w]=m.useState(!1),[T,x]=m.useState(!1),[j,g]=m.useState(!1),y=ze(),P=new Date(t?(_=s.gizmo.workspace_approval_date)!=null?_:"":s.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),C=new Date(s.gizmo.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),A=m.useMemo(()=>{const v=s.tools.filter(D=>D.type===R.JIT_PLUGIN).map(D=>D.type===R.JIT_PLUGIN?D.metadata.domain:"");return v.length===1?v[0]:v.length>1?"".concat(v.length," domains"):""},[s.tools]),I=s.gizmo.is_unassigned;return e.jsxs(e.Fragment,{children:[e.jsxs(p.Row,{className:"relative",children:[e.jsx(p.Cell,{className:"max-w-[320px] min-w-[240px] py-2 pe-2 align-middle! whitespace-break-spaces",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 shrink-0",children:e.jsx(ds,{src:s.gizmo.display.profile_picture_url,isFirstParty:(U=(W=s.gizmo.tags)==null?void 0:W.includes(Qe.FirstParty))!=null?U:!1,alt:s.gizmo.display.name,className:"h-10 w-10"})}),e.jsx(Je,{className:"ms-4",onClick:()=>y($e(u,s)),children:e.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:s.gizmo.display.name})})]})}),e.jsx(p.Cell,{className:"text-token-text-secondary w-full max-w-[160px] min-w-[100px] p-2 align-middle! text-sm",children:I?e.jsx("div",{className:"bg-token-bg-tertiary rounded-lg px-2 py-1",children:e.jsx(i,n({},c.unassigned))}):e.jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:s.gizmo.author.display_name})}),e.jsx(p.Cell,{wrap:!0,className:"text-token-text-secondary max-w-[240px] min-w-[160px] p-2 align-middle! text-sm",children:A===""?"â€”":A}),!t&&e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:e.jsx(Fs,{gizmo:s,account:a})}),!t&&e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:(z=(K=s.gizmo.vanity_metrics)==null?void 0:K.num_conversations_str)!=null?z:0}),e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:P}),e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:C}),e.jsx(p.Cell,{className:"border-token-border-heavy bg-token-bg-primary sticky end-0 border-s-[0.5px] p-1 align-middle!",textAlign:"center",children:e.jsxs(b.Root,{children:[e.jsx(b.Trigger,{children:e.jsx(Ze,{className:"icon-sm"})}),e.jsx(b.Portal,{children:t?e.jsx(b.Content,{children:e.jsx(b.Item,{onClick:()=>{g(!0)},color:"danger",icon:ie,children:e.jsx(i,n({},c.removeFromWorkspace))})}):e.jsxs(b.Content,{children:[e.jsx(b.Item,{onClick:()=>{d(s)},icon:us,children:e.jsx(i,n({},c.changeAccess))}),e.jsx(b.Item,{onClick:()=>{x(!0)},icon:I?Ss:ps,children:e.jsx(i,n({},I?c.assignOwner:c.changeOwner))}),e.jsx(b.Item,{onClick:()=>{w(!0)},icon:ie,color:"danger",children:e.jsx(i,n({},c.deleteGPT))})]})})]})})]}),o&&e.jsx(Ps,{publishedGizmo:o,gizmo:Xe(o),onClose:()=>d(!1),appealGizmo:()=>y(es(o.gizmo.id)),shareOnly:!0,workspaceOwner:!0}),e.jsx(Os,{isOpen:T,gpt:s,account:a,onClose:v=>{x(!1),v&&r.invalidateQueries({queryKey:["workspace",a.id,f.WORKSPACE]})}}),e.jsx(As,{isOpen:h,gpt:s,account:a,onClose:v=>{w(!1),v&&r.invalidateQueries({queryKey:["workspace",a.id,f.WORKSPACE]})}}),e.jsx(Gs,{isOpen:j,gpt:s,account:a,onClose:v=>{g(!1),v&&r.invalidateQueries({queryKey:["workspace",a.id,f.THIRD_PARTY]})}})]})}const Ds=[R.BROWSER,R.PYTHON,R.JIT_PLUGIN,R.RETRIEVAL,R.DALLE,R.IMAGE_GEN,R.CANVAS,R.CONNECTOR],Es=({account:a,showThirdParty:s})=>{var xe;const[t,r]=m.useState(f.WORKSPACE),u=F(),[o,d]=m.useState(!1),h=m.useRef(null),[w,T]=m.useState(""),[x,j]=m.useState(!1),[g,y]=m.useState(w),P=m.useRef(null),C=m.useCallback(l=>{if(T(l),P.current&&(clearTimeout(P.current),P.current=null),l===""){y(""),G(1);return}P.current=window.setTimeout(()=>{y(l),G(1),P.current=null},500)},[]),[A,I]=m.useState("updated_at"),[_,W]=m.useState("desc"),U=_==="asc"?ls:os,K=[{value:"private",label:u.formatMessage(c.shareRecipientTitlePrivate),share_recipients:[M.Private,M.User,M.Group]},{value:"link",label:u.formatMessage(c.shareRecipientTitleLink),share_recipients:[M.Link]},{value:"workspace",label:(xe=a.data.name)!=null?xe:"",share_recipients:[M.Workspace,M.WorkspaceLink]},{value:"marketplace",label:u.formatMessage(c.shareRecipientTitlePublic),share_recipients:[M.Marketplace]}],[z,v]=m.useState([]),[D,de]=m.useState([]),[B,G]=m.useState(1),be=V();m.useEffect(()=>{x&&h.current&&h.current.focus()},[x]);const Z=l=>{r(l),G(1)},Ce=(l,N)=>{v(E=>N?[...E,l]:E.filter(ee=>ee!==l)),G(1)},_e=(l,N)=>{de(E=>N?[...E,l]:E.filter(ee=>ee!==l)),G(1)},Oe=()=>{v([]),de([]),G(1)},{data:H,fetchNextPage:Ae,hasNextPage:ue,isFetchingNextPage:pe,isLoading:Ge}=Ls(a.id,t,{search:g,toolTypes:z,shareRecipients:K.flatMap(l=>D.includes(l.value)?l.share_recipients:[]),orderBy:A,orderDir:_}),Re=Ge,me=z.length+D.length;function X(l){I(N=>N===l?(W(E=>E==="asc"?"desc":"asc"),l):(W("asc"),l)),G(1)}const ge=m.useMemo(()=>{if(!H)return[];const l=H.pages[B-1];return l?l.items:[]},[H,B]);return e.jsxs("div",{children:[e.jsxs("div",{className:"border-token-border-default flex justify-between border-b",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx(te,{isActive:t===f.WORKSPACE,onClick:()=>Z(f.WORKSPACE),children:e.jsx(i,n({},c.workspaceTab))}),s&&e.jsx(te,{isActive:t===f.THIRD_PARTY,onClick:()=>Z(f.THIRD_PARTY),children:e.jsx(i,n({},c.thirdPartyTab))}),e.jsx(te,{isActive:t===f.UNASSIGNED,onClick:()=>Z(f.UNASSIGNED),children:e.jsx(i,n({},c.unassigned))})]}),e.jsxs("div",{className:"flex items-center pb-2",children:[me>0&&e.jsxs(Te,{className:"flex items-center space-x-1",onClick:Oe,children:[e.jsx("span",{className:"font-medium",children:e.jsx(i,{id:"2HkRen",defaultMessage:"{filterCount, plural, one {# filter} other {# filters}} applied",values:{filterCount:me}})}),e.jsx(je,{className:"icon"})]}),e.jsxs(b.Root,{children:[e.jsx(b.Trigger,{children:e.jsx(ks,{className:"icon"})}),e.jsx(b.Portal,{children:e.jsx(b.Content,{className:"rounded-lg px-2 text-sm",children:e.jsxs("div",{className:"text-token-text-primary w-64 space-y-2 p-2 font-normal",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,n({},c.capabilitiesTitle))}),Ds.map(l=>e.jsx(re,{id:l,checked:z.includes(l),label:rs(a,l),onChange:N=>Ce(l,N.target.checked)},l))]}),e.jsxs("div",{className:"mt-4 flex-col space-y-2 border-t pt-4",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,n({},c.whoHasAccessTitle))}),K.map(l=>e.jsx(re,{id:l.value,checked:D.includes(l.value),label:l.label,onChange:N=>_e(l.value,N.target.checked)},l.value))]})]})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{onClick:()=>j(!0),children:e.jsx(Ke,{className:"icon"})}),e.jsx(Ye,{children:x&&e.jsx(Ve.input,{type:"text",ref:h,placeholder:u.formatMessage(c.filterByNameOrDescriptionPlaceholder),className:"bg-token-bg-primary border-none px-0 focus:ring-0",initial:{width:0,opacity:0},animate:{width:"192px",opacity:1},exit:{width:0,opacity:0,visibility:"hidden"},value:w,onChange:l=>C(l.target.value)})}),x&&e.jsx("div",{className:"cursor-pointer",onClick:()=>{j(!1),C("")},children:e.jsx(je,{className:"icon-sm"})})]}),s&&e.jsx(O,{color:"secondary",onClick:()=>d(!0),icon:ne,children:e.jsx(i,n({},c.approveAGPTButton))})]})]}),Re?e.jsx("div",{className:"mt-8 flex min-h-[320px] items-center justify-center",children:e.jsx(Se,{})}):e.jsxs("div",{className:"mb-8 min-h-[320px]",children:[ge.length>0?e.jsxs(p.Root,{size:"normal",className:"bg-token-bg-primary w-full min-w-full overflow-hidden overflow-x-auto sm:rounded-lg",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{className:"text-token-text-secondary py-2 pe-4 text-start text-xs",children:e.jsx(i,n({},c.nameCellTitle))}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},c.builderCellTitle))}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},c.customActionsCellTitle))}),(t===f.WORKSPACE||t===f.UNASSIGNED)&&e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},c.whoHasAccessTitle))}),(t===f.WORKSPACE||t===f.UNASSIGNED)&&e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>X("accurate_num_paid_conversations"),children:[e.jsx("span",{children:e.jsx(i,n({},c.chatsCellTitle))}),A==="accurate_num_paid_conversations"&&e.jsx(U,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>X("created_at"),children:[e.jsx("span",{children:t===f.WORKSPACE||t===f.UNASSIGNED?e.jsx(i,n({},c.createdCellTitle)):e.jsx(i,n({},c.approvedCellTitle))}),A==="created_at"&&e.jsx(U,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>X("updated_at"),children:[e.jsx("span",{children:e.jsx(i,n({},c.updatedCellTitle))}),A==="updated_at"&&e.jsx(U,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"border-token-border-heavy absolute end-0 w-16 border-s-[0.5px]"})]}),e.jsx(p.Body,{children:ge.map(l=>e.jsx(Is,{account:a,gpt:l,thirdParty:t===f.THIRD_PARTY},l.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx("div",{children:e.jsx(cs,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-token-text-secondary",children:t===f.THIRD_PARTY?e.jsx(i,n({},c.noWorkspaceApprovedGPTs)):t===f.UNASSIGNED?e.jsx(i,n({},c.noUnassignedGPTs)):e.jsx(i,n({},c.noWorkspaceGPTs))}),t===f.THIRD_PARTY&&e.jsx(O,{color:"secondary",onClick:()=>d(!0),icon:ne,children:e.jsx(i,n({},c.approveAGPTButton))})]}),H&&e.jsxs("div",{className:"text-token-text-tertiary my-4 flex w-full items-center justify-center gap-6",children:[e.jsx(O,{color:"secondary",disabled:B===1,onClick:()=>G(l=>Math.max(1,l-1)),children:e.jsx(i,{id:"KFhxP7",defaultMessage:"Prev"})}),e.jsx("span",{className:"text-sm",children:e.jsx(i,{id:"WEQoNb",defaultMessage:"Page {page}",values:{page:B}})}),e.jsx(O,{color:"secondary",loading:pe,disabled:!ue&&B===H.pages.length,onClick:async()=>{if(B<H.pages.length){G(N=>N+1);return}ue&&!pe&&(await Ae(),G(N=>N+1))},children:e.jsx(i,{id:"wDyvFZ",defaultMessage:"Next"})})]})]}),e.jsx(Ms,{isOpen:o,onClose:()=>{d(!1),be.invalidateQueries({queryKey:["workspace",a.id,f.THIRD_PARTY]})},account:a})]})};function Ls(a,s,t){var r,u,o;return Ue({queryKey:["workspace",a,"admin-gizmos",s,(r=t.search)!=null?r:"",((u=t.toolTypes)!=null?u:[]).join(","),((o=t.shareRecipients)!=null?o:[]).join(","),t.orderBy,t.orderDir],queryFn:async({pageParam:d})=>{var x,j,g,y,P,C;const{query_continuation:h}=d!=null?d:{},w=n(n({search:(x=t.search)!=null?x:"",limit:Rs,order_by:(j=t.orderBy)!=null?j:"updated_at",order_dir:(g=t.orderDir)!=null?g:"desc",share_recipients:(y=t.shareRecipients)!=null?y:[],is_approved:s===f.THIRD_PARTY,is_unassigned:s===f.UNASSIGNED},t.toolTypes&&t.toolTypes.length>0?{tool_types:t.toolTypes}:{}),h?{query_continuation:h}:{}),T=await q.safeGet("/workspace-resources/{account_id}/admin/gizmos",{parameters:{path:{account_id:a},query:w}});return{total:(P=T.total_count)!=null?P:0,items:T.items,query_continuation:(C=T.query_continuation)!=null?C:null}},initialPageParam:{query_continuation:""},getNextPageParam:d=>d.query_continuation?{query_continuation:d.query_continuation}:void 0})}function Fs({gizmo:a,account:s}){const t=F(),r={[M.Private]:t.formatMessage(c.shareRecipientTitlePrivate),[M.User]:t.formatMessage(c.shareRecipientTitlePrivate),[M.Group]:t.formatMessage(c.shareRecipientTitlePrivate),[M.Link]:t.formatMessage(c.shareRecipientTitleLink),[M.Marketplace]:t.formatMessage(c.shareRecipientTitlePublic),[M.Workspace]:s.data.name,[M.WorkspaceLink]:s.data.name};if(["private","user","group"].includes(a.gizmo.sharing.recipient)){const{users:u,groups:o}=Ws(a);return u===0&&o===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(i,n({},c.shareRecipientTitlePrivate))}):u>0&&o>0?e.jsxs("span",{className:"text-token-text-secondary",children:[r[a.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:t.formatMessage(c.userCount,{numUsers:u}),groups:t.formatMessage(c.groupCount,{numGroups:o})}})]}):u>0?e.jsxs("span",{className:"text-token-text-secondary",children:[r[a.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,Y(n({},c.userCount),{values:{numUsers:u}}))]}):e.jsxs("span",{className:"text-token-text-secondary",children:[r[a.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,Y(n({},c.groupCount),{values:{numGroups:o}}))]})}return e.jsx("span",{children:r[a.gizmo.share_recipient]})}function Ws(a){if(a.gizmo.sharing.subjects){const s=a.gizmo.sharing.subjects.filter(r=>r.type===we.USER).length,t=a.gizmo.sharing.subjects.filter(r=>r.type===we.GROUP).length;return{users:s,groups:t}}return{users:0,groups:0}}const c=$({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noUnassignedGPTs:{id:"workspaceSettings.noUnassignedGPTs",defaultMessage:"No unassigned GPTs"},noUnassignedGPTsFound:{id:"workspaceSettings.noUnassignedGPTsFound",defaultMessage:"No unassigned GPTs found"},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You haven't approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrDescriptionPlaceholder:{id:"workspaceSettings.filterByNameOrDescriptionPlaceholder",defaultMessage:"Filter by name or description..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},updatedCellTitle:{id:"workspaceSettings.updatedCellTitle",defaultMessage:"Updated"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},assignOwner:{id:"workspaceSettings.assignOwner",defaultMessage:"Assign Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},unassigned:{id:"workspaceSettings.unassignedGPTs",defaultMessage:"Unassigned"}});function ae({title:a,description:s,children:t,upsellEnterprise:r=!1,isQuorum:u=!1,className:o=""}){return e.jsx(ve,{label:e.jsx(i,n({},k.enterpriseRequiredMessage)),side:"top",disabled:!r,className:"max-w-5xl",triggerAs:null,children:e.jsxs(hs,{className:oe(r&&"text-token-text-tertiary","max-w-4xl",o),children:[e.jsxs(fs,{className:"flex items-center gap-3",children:[e.jsx(i,n({},a)),r&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:e.jsx(i,n({},k.enterpriseUpsellPill))}),!r&&u&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:e.jsx(i,n({},k.thisFeatureDisabledForOrg))})]}),s&&e.jsx(Ts,{className:"text-token-text-secondary py-2",children:e.jsx(i,n({},s))}),t]})})}function Us({workspaceId:a,label:s,setting:t,defaultValue:r,values:u,disabled:o=!1}){var x;const d=ce(),h=V(),{variables:w,mutate:T}=le({mutationFn:({setting:j,value:g})=>q.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:a}},requestBody:{setting:j,value:g}}),onSettled:()=>{h.invalidateQueries({queryKey:["workspace-settings"]}),h.invalidateQueries({queryKey:["workspace"]})},onError:()=>{d.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_gpt_settings_page"})}});return e.jsxs(js,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(i,n({},s))}),e.jsxs(S.Root,{defaultValue:(x=w==null?void 0:w.value)!=null?x:r,onValueChange:j=>{T({setting:t,value:j})},disabled:o,children:[e.jsxs(S.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(S.Value,{}),e.jsx(S.Icon,{})]}),e.jsx(S.Portal,{children:e.jsx(S.Content,{children:u.map((j,g)=>e.jsx(S.Item,{className:"text-md",value:j.value,children:e.jsx(i,n({},j.display))},g))})})]})]})}function zs({workspaceId:a,value:s,upsellEnterprise:t=!1,isQuorum:r=!1}){var w;const u=ce(),o=V(),{variables:d,mutate:h}=le({mutationFn:({value:T})=>q.safePost("/accounts/{account_id}/settings/third_party_gpts",{parameters:{path:{account_id:a}},requestBody:{value:T}}),onSettled:()=>{o.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{u.danger(k.featureSettingsUpdateFailed,{toastId:"third_party_gpt_setting_dropdown"})}});return e.jsxs(S.Root,{defaultValue:(w=d==null?void 0:d.value)!=null?w:s,onValueChange:T=>{h({value:T})},children:[e.jsxs(S.Trigger,{className:"border-token-border-default focus-visible:border-token-border-default border text-base",children:[e.jsx(S.Value,{}),e.jsx(S.Icon,{})]}),e.jsx(S.Portal,{children:e.jsxs(S.Content,{children:[!r&&e.jsx(S.Item,{className:"text-base",value:J.ALLOW_ALL,children:e.jsx(i,n({},k.allowAllOption))}),!t&&!r&&e.jsx(S.Item,{className:"text-base",value:J.ALLOW_SPECIFIC,children:e.jsx(i,n({},k.ownerApprovedOnlyOption))}),e.jsx(S.Item,{className:"text-base",value:J.ALLOW_NONE,children:e.jsx(i,n({},k.dontAllowOption))})]})})]})}function Bs({workspaceId:a,data:s}){var I;const t=Pe(),r=F(),u=ce(),o=Me(),d=ts(),h=d,w=V(),T=as(t),[x,j]=m.useState([]),g=le({mutationFn:({value:_})=>q.safePost("/accounts/{account_id}/settings/allowed_custom_actions_domains",{parameters:{path:{account_id:a}},requestBody:{domains:_}}),onSettled:()=>{w.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{u.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_settings"})}});if(o==null)return null;const y=o.isSelfServeBusiness(),P=e.jsx(ae,{title:k.thirdPartyGPTsTitle,description:k.thirdPartyGPTsDescription,className:"border-token-border-default border-b pb-4",isQuorum:d,children:e.jsx("div",{children:e.jsx(zs,{workspaceId:a,value:s.allow_third_party_gpts,upsellEnterprise:y,isQuorum:d})})}),C=e.jsx(ae,{title:k.sidebarTitle,children:e.jsx(Es,{account:o,showThirdParty:!y&&!d&&s.allow_third_party_gpts===J.ALLOW_SPECIFIC})}),A=s.allowed_custom_actions_domains!=null||s.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(gs,{className:"max-w-5xl",children:[y&&!T&&P,y&&o.isOwnerOfAccount()&&C,e.jsx(ae,{title:k.sharingSettingsTitle,upsellEnterprise:y,children:e.jsxs(xs,{children:[!T&&e.jsx(Us,{workspaceId:a,label:k.gptSharingTitle,disabled:y,setting:is.GPT_SHARE_SETTINGS,defaultValue:s.share_settings.gpt_share_setting,values:[...h?[]:[{display:k.anyOneSelect,value:se.ANYONE}],{display:k.workspaceMembersOnlySelect,value:se.WORKSPACE_ONLY},{display:k.inviteOnlySelect,value:se.NO_ONE}]}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(i,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"text-token-text-secondary py-2 text-sm",children:h?e.jsx(i,{id:"ZIYUEj",defaultMessage:"GPT actions allow GPT builders to create GPTs that call third-party APIs for tasks such as retrieving or modifying data, which could include protected health information. Admins can limit the domains that can be used by GPTs created by builders in your workspace. You should ensure your use of GPT actions complies with your obligations under HIPAA."}):e.jsx(i,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(re,{checked:!A,id:"allow-all-domains",onChange:_=>{_.currentTarget.checked?(j(s.allowed_custom_actions_domains),g.mutate({value:null})):g.mutate({value:x!=null?x:[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(i,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(ve,{interactive:!0,label:e.jsx(i,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(_s,{})})]})}),g.isPending&&e.jsx(Se,{})]}),A&&e.jsx(Cs,{value:(I=s.allowed_custom_actions_domains)!=null?I:[],title:r.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:_=>{g.mutate({value:_})},emptyMessage:r.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]})})]})}),!y&&!T&&P,!y&&o.isOwnerOfAccount()&&C]})}function Hs({currentWorkspaceId:a}){const s=Me(),t=!!(s!=null&&s.isFreeWorkspace()),{data:r,isLoading:u}=ss(a),o=F();return e.jsxs(e.Fragment,{children:[e.jsx(ms,{children:e.jsx("title",{children:o.formatMessage(k.sidebarTitle)})}),e.jsx(ws,{title:o.formatMessage(k.sidebarTitle)}),e.jsx(ys,{showSpinner:!t&&u,children:t?e.jsx(vs,{}):r===void 0?null:e.jsx(Bs,{workspaceId:a,data:r})})]})}const k=$({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},searchTooltip:{id:"workspaceSettingsOld.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts."},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"},thisFeatureDisabledForOrg:{id:"workspaceSettings.thisFeatureDisabledForOrgGPT",defaultMessage:"This feature is disabled in this workspace"}}),yt=Be(function(){const s=Ns();return bs(),e.jsx(Hs,n({},s))});export{yt as default};
//# sourceMappingURL=ndsy0nl99mc6avh5.js.map
