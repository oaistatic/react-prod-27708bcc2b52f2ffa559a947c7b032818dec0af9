import{e as g,r as p,j as e,M as x}from"./fg33krlcm0qyi6yw.js";import{l as b,aS as w,bv as j,bg as v,T as N}from"./mtk1qztvnb31pw5r.js";import{cw as L,eE as h}from"./k65njl5wlgspihfr.js";import{p as T,g as y}from"./jcfo2542d2wvunuv.js";import{F as M}from"./d0444mle8cdypjta.js";import{W as I}from"./bes67zhi4fr5gq8i.js";import{g as R}from"./sy1xvqwioh9ks4z8.js";import"./j37p94g6trtb4j3z.js";import"./lad8yx56mqsdspc9.js";import"./klzrztgvm2c9gs50.js";import"./zqbip2ya77i1mx4s.js";import"./kg0cp341m64rddpv.js";import"./lbbnz7rb7sd2lk50.js";import"./ck1u9icgxosmytry.js";import"./dq5a57hcb44a83mi.js";import"./cmaobpdpreyiep8p.js";import"./lptwpbjabrvjmhsj.js";import"./n0ab5m1z76n8mazm.js";import"./ose6175gtasqnfv0.js";import"./o51gjyxad96i2yey.js";import"./cv3wsu6uenrjij6h.js";import"./lbq5605sor1ah5hb.js";import"./n0qmvbt3dffalvvl.js";import"./fznnr8l9owxbou6l.js";import"./haneze5lyzwaewf8.js";import"./j4u691tk1tplayl2.js";import"./j0vhwkpwiqu2ejer.js";import"./kzbknm4lxuyoq9wi.js";import"./jed1ux7qibe55pmj.js";import"./h1em0bjkpkjv8ykw.js";import"./f5ep9o7usovyn4vf.js";import"./ly75bs3d14n5v622.js";import"./hu1bt0oauegdhua6.js";const S="_UzIoW_glow",f={glow:S};function _({diffFiles:s,onClickFile:r,startOpen:m=!1,isActive:o=!1}){const n=g(),[a,c]=p.useState(m);return s.length?e.jsxs("div",{className:b("bg-token-bg-primary flex flex-col rounded-2xl border",o?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{s.length&&(r==null||r(s[0])),(o||!a)&&c(!a)},"aria-label":n.formatMessage({id:"wham.diff.changedFileList.titleAriaLabel",defaultMessage:"Toggle file list diffs"}),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(x,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:s.length}})})}),a?e.jsx(L,{className:"icon"}):e.jsx(w,{className:"icon"})]})}),e.jsx(j,{initial:!m,children:a&&e.jsx(v.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:s.map((i,l)=>{var u;const d="".concat((u=i._oldFileName)!=null?u:l,"-").concat(i._newFileName);return e.jsx(k,{diffFile:i,onClick:()=>r==null?void 0:r(i)},d)})})})]}):null}function k({diffFile:s,onClick:r}){var u;const m=g(),o=p.useRef(null),n=p.useRef(null),a=p.useRef(null),[c,i]=p.useState(!1),l=y(s),d="".concat((u=s._oldFileName)!=null?u:"","-").concat(s._newFileName);return e.jsx("li",{className:"group w-full",children:e.jsx(N,{label:l,labelTextAlign:"left",open:c?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{r==null||r(),requestAnimationFrame(()=>{o.current!=null&&window.clearTimeout(o.current);const t=document.querySelector('[data-diff-header="'.concat(l,'"]'));t==null||t.classList.remove(f.glow),t==null||t.scrollIntoView({behavior:"instant",block:"start"}),t==null||t.classList.add(f.glow),o.current=window.setTimeout(()=>{t==null||t.classList.remove(f.glow)},5e3)})},"aria-label":m.formatMessage({id:"wham.diff.changedFileList.fileAriaLabel",defaultMessage:"View file {file}"},{file:l}),children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:h({axis:"width",onChange:({width:t})=>{n.current=t,a.current!=null&&i(a.current<t)}}),children:l}),e.jsx("span",{ref:h({axis:"width",onChange:({width:t})=>{a.current=t,n.current!=null&&i(t<n.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:l})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(M,{diffFile:s,fallback:e.jsx(I,{linesAdded:s.additionLength,linesRemoved:s.deletionLength})})})]})})},d)}function ue({assistantTurn:s,onClickFile:r,startOpen:m=!1,isActive:o=!1,showFullDiff:n=!1}){const a=R(s,!0).length>0,c=T({assistantTurn:s,followUp:a&&!n}).map(i=>i.diffFile);return e.jsx(_,{diffFiles:c,onClickFile:r,startOpen:m,isActive:o})}export{_ as ChangedFileList,ue as ChangedFileListFromTaskTurn};
//# sourceMappingURL=bhej3rsa4rgdh46m.js.map
