var S=Object.freeze,P=Object.defineProperty,H=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var C=(n,t,s)=>t in n?P(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s,o=(n,t)=>{for(var s in t||(t={}))Y.call(t,s)&&C(n,s,t[s]);if(I)for(var s of I(t))K.call(t,s)&&C(n,s,t[s]);return n},f=(n,t)=>H(n,G(t));var w=(n,t)=>S(P(n,"raw",{value:S(t||n.slice())}));import{e as U,f as z,r as c,j as e,M as l}from"./fg33krlcm0qyi6yw.js";import{m as V,b2 as q,b as Q,ag as J,P as X,R as Z,z as W,sx as $,C as ee,a9 as v,nW as te,F as ae}from"./mtk1qztvnb31pw5r.js";import{fU as b,z as E,az as ne}from"./k65njl5wlgspihfr.js";const a=z({deleteAccountSessionTooOld:{id:"settingsModal.deleteAccountSessionTooOld",defaultMessage:"Your login session is too old. Please log in again before deleting your account."},deleteAccountFailed:{id:"settingsModal.deleteAccountFailed",defaultMessage:"Failed to delete account. Please try again later."},deleteAccountTitle:{id:"settingsModal.deleteAccountTitle",defaultMessage:"Delete account - are you sure?"},deleteAccountWarning:{id:"settingsModal.deleteAccountWarning",defaultMessage:"Deleting your account is permanent and cannot be undone."},reuseEmailPhoneWarning:{id:"settingsModal.reuseEmailPhoneWarning-2",defaultMessage:"You cannot create a new account using the same email address."},dataRemovalWarning:{id:"settingsModal.dataRemovalWarning-2",defaultMessage:"Your data will be deleted within 30 days, except we may retain a limited set of data for longer where required or permitted by law."},apiAccessDeletionWarning:{id:"settingsModal.apiAccessDeletionWarning-2",defaultMessage:"Deletion will prevent you from accessing OpenAI services, including ChatGPT, API, and DALLÂ·E."},deleteHelpCenter:{id:"settingsModal.deleteHelpCenter",defaultMessage:"Read our <article>help center article</article> for more information."},iapSubscriptionWarning:{id:"settingsModal.iapSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Apple App Store. We cannot cancel your subscription for you."},playStoreSubscriptionWarning:{id:"settingsModal.playStoreSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Google Play Store. We cannot cancel your subscription for you."},typeEmailLabel:{id:"settingsModal.typeEmailLabel",defaultMessage:"Please type your account email."},typePhoneNumberLabel:{id:"settingsModal.typePhoneNumberLabel",defaultMessage:"Please type your account phone number."},typeDeleteInputLabel:{id:"settingsModal.typeDeleteInputLabel",defaultMessage:'To proceed, type "{keyword}" in the input field below.'},deleteAccountKeyword:{id:"settingsModal.deleteAccountKeyword",defaultMessage:"DELETE"},lockedButtonLabel:{id:"settingsModal.lockedButtonLabel",defaultMessage:"Locked"},deleteAccountButtonLabel:{id:"settingsModal.deleteAccountButtonLabel",defaultMessage:"Permanently delete my account"},recentLoginMessage:{id:"settingsModal.recentLoginMessage",defaultMessage:"You may only delete your account if you have logged in within the last 10 minutes. Please log in again, then return here to continue."},refreshLoginButtonLabel:{id:"settingsModal.refreshLoginButtonLabel",defaultMessage:"Refresh login"}});function re({onClose:n}){const t=U(),s=V(),O=Q(),{session:u}=q(O),r=J(),m=r==null?void 0:r.email,M=r==null?void 0:r.phone_number,g=m||M||void 0,N=m?a.typeEmailLabel:a.typePhoneNumberLabel,[x,D]=c.useState(""),[y,T]=c.useState(""),L=t.formatMessage(a.deleteAccountKeyword),h=c.useCallback(()=>{var A;const j=(A=u==null?void 0:u.user)==null?void 0:A.iat;return j===void 0||Date.now()/1e3-j<600},[u]),k=c.useCallback(()=>{try{h()?(X.logEventWithStatsig("Account Deactivated","chatgpt_account_deactivated"),Z.safePost("/accounts/deactivate").then(()=>{W()})):s.warning(t.formatMessage(a.deleteAccountSessionTooOld),{hasCloseButton:!0})}catch(i){s.warning(t.formatMessage(a.deleteAccountFailed),{hasCloseButton:!0})}},[t,s,h]),B=c.useCallback(()=>{W()},[]),p=y.trim()===L&&(g===void 0||x.toLowerCase()===g.toLowerCase()),[F]=c.useState(()=>h()),d=$();return e.jsx(ee,{testId:"modal-confirm-delete-account",isOpen:!0,onClose:n,type:"success",title:t.formatMessage(a.deleteAccountTitle),showCloseButton:!0,children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"mt-4 mb-6 flex list-disc flex-col gap-1 ps-3",children:[e.jsx("li",{children:e.jsx(l,o({},a.deleteAccountWarning))}),e.jsx("li",{children:e.jsx(l,o({},a.apiAccessDeletionWarning))}),e.jsx("li",{children:e.jsx(l,o({},a.reuseEmailPhoneWarning))}),e.jsx("li",{children:e.jsx(l,o({},a.dataRemovalWarning))}),d&&[b.CHATGPT_IOS,b.SORA_IOS].includes(d.purchase_origin_platform)&&e.jsx("li",{children:e.jsx(l,o({},a.iapSubscriptionWarning))}),(d==null?void 0:d.purchase_origin_platform)===b.MOBILE_ANDROID&&e.jsx("li",{children:e.jsx(l,o({},a.playStoreSubscriptionWarning))}),e.jsx("li",{children:e.jsx(l,f(o({},a.deleteHelpCenter),{values:{article:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/6378407-how-to-delete-your-account",target:"_blank",className:"underline",rel:"noopener noreferrer",children:i})}}))})]}),F?e.jsxs(e.Fragment,{children:[g!=="undefined"?e.jsxs("div",{className:"mb-4",children:[e.jsx(_,{htmlFor:"email",children:e.jsx(l,o({},N))}),e.jsx(E,{ariaLabel:!1,value:x,placeholder:g,name:"email",onChange:i=>{D(i.target.value)}})]}):null,e.jsxs("div",{className:"mb-4",children:[e.jsx(_,{htmlFor:"delete",children:e.jsx(l,f(o({},a.typeDeleteInputLabel),{values:{keyword:L}}))}),e.jsx(E,{ariaLabel:!1,value:y,onChange:i=>{T(i.target.value)},name:"delete",className:"mb-4"})]}),e.jsx(v,{color:p?"danger":void 0,onClick:k,disabled:!p,fullWidth:!0,icon:p?te:ne,children:p?e.jsx(l,o({},a.deleteAccountButtonLabel)):e.jsx(l,o({},a.lockedButtonLabel))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-tertiary pb-4 text-xs",children:e.jsx(l,o({},a.recentLoginMessage))}),e.jsx(v,{color:"primary",onClick:B,fullWidth:!0,children:e.jsx(l,o({},a.refreshLoginButtonLabel))})]})]})})}var R;const _=ae.label(R||(R=w(["block text-sm font-semibold mb-1"])));export{re as ConfirmDeleteAccountModal};
//# sourceMappingURL=dry2d0qr2bitk9ws.js.map
