var U=Object.freeze,ne=Object.defineProperty;var z=(n,o)=>U(ne(n,"raw",{value:U(o||n.slice())}));import{e as ae,r as m,i as oe,j as e,M as r}from"./fg33krlcm0qyi6yw.js";import{I as ie,b as re,L as g,fe as le,bv as ce,bg as $,b3 as de,$ as ue,P as me,i9 as xe,C as fe,a9 as pe,F as be}from"./mtk1qztvnb31pw5r.js";import{dr as he,bq as R,bp as ke,z as ge}from"./k65njl5wlgspihfr.js";const ve=5,ye="Default";function je(n){const o={};return n.forEach(l=>{var c;const a=(c=l.group)!=null?c:ye;o[a]||(o[a]=[]),o[a].push(l)}),o}function Se({tagOptions:n,onSubmit:o,onMoreClicked:l,onCancel:a,onTagsChange:c,maxInlineTags:q=ve,modalOnly:p=!1,modalTitle:v,multiple:J,children:K,allowEmptySubmit:V=!1,hideDefaultTextInput:W=!1,modalLeadContent:Y,modalSecondaryButton:Z,isSubmitDisabled:y,thumbsDownModalExperimentEnabled:C=!1}){var B;const F=ae(),j=re(),T=ie(j),b=T==null?void 0:T.planType,H=b===g.FREE||b===g.GO||b===g.PLUS||b===g.PRO,[h,x]=m.useState(p?"modal":"inline"),[d,P]=m.useState([]),[u,O]=m.useState(void 0),f=s=>d.some(t=>t.value===s),{eligible:k}=he(R.hasSeenInlineFeedbackCustomInstrMessage),w=k?4e3:1500,[I,Q]=m.useState(!1),X=oe(),M=m.useCallback(s=>{o(s),x("submitted");const t=["Too chatty or casual","Don't like the style"];Q(s.tags.some(i=>t.includes(i.value))),setTimeout(()=>{x("closed"),k&&I&&ke(j,R.hasSeenInlineFeedbackCustomInstrMessage)},w)},[o,w,k,I,j]),N=m.useMemo(()=>le(M,500),[M]),_=s=>{let t=[];return J?t=f(s.value)?d.filter(i=>i!==s):[...d,s]:t=[s],P(t),c==null||c(t),t},A=n.map(s=>s.value),E=je(n),L=Object.keys(E),G=s=>{M({event:s,tags:d,textFeedback:u,tagChoices:A,source:"modal"})},ee=d.length===0&&!u&&!V,se=(B=y==null?void 0:y(d,u))!=null?B:ee;return e.jsxs(e.Fragment,{children:[!p&&e.jsx(ce,{children:h!=="closed"&&e.jsxs($.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[h==="submitted"&&e.jsx($.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:e.jsx("div",{className:"border-token-border-default inline-flex rounded-lg border p-4",children:e.jsx("div",{className:"text-sm",children:k&&I?e.jsx(e.Fragment,{children:e.jsx(r,{id:"ConversationTurnInlineMessageFeedback.customInstructions",defaultMessage:"Thanks! If ChatGPT's style isn't quite right, you can also <link>customize its responses</link>.",values:{link:s=>e.jsx("span",{onClick:()=>{X("#settings/".concat(de.Personalization)),ue.logEvent("chatgpt_user_context_inline_feedback_message_clicked"),me.logEvent("User Context Inline Feedback Message Clicked")},className:"text-token-text-primary cursor-pointer font-semibold",children:s})}})}):e.jsx(r,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(h)&&e.jsxs("div",{className:"border-token-border-default relative mt-2 flex w-full flex-col gap-3 rounded-lg border p-4",children:[e.jsx("button",{className:"absolute end-4 top-4 text-sm font-bold",onClick:()=>{x("closed"),N.cancel(),a==null||a()},children:e.jsx(xe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})}),e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(r,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.slice(0,q).map(s=>{const t=s.icon;return e.jsxs(S,{"aria-pressed":f(s.value),"aria-selected":f(s.value),$selected:f(s.value),onClick:i=>{const te=_(s);N({event:i,tags:te,tagChoices:A,source:"inline"})},children:[t&&e.jsx(t,{className:"icon-sm"}),e.jsx("span",{children:s.label})]},s.value)}),e.jsx(S,{onClick:()=>{l==null||l(),N.cancel(),x("modal")},children:e.jsx(r,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),h==="modal"&&e.jsxs(fe,{type:"success",testId:"modal-inline-feedback",isOpen:!0,className:"max-w-xl",size:"custom",title:v!=null?v:e.jsx(r,{id:"ConversationTurnInlineMessageFeedback.additionFeedbackModalTitle",defaultMessage:"Share feedback"}),onClose:()=>{P([]),x(p?"closed":"inline"),p&&(a==null||a())},showCloseButton:!0,primaryButton:e.jsx(pe,{color:"primary",disabled:se,onClick:G,children:e.jsx(r,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",secondaryButton:Z,children:[Y,e.jsx("div",{className:"flex flex-col gap-6",children:L.map(s=>e.jsxs("div",{children:[L.length>1&&e.jsx("div",{className:"mb-3 text-sm font-semibold",children:s}),e.jsx("div",{className:"flex flex-wrap gap-3",children:E[s].map(t=>{const i=t.icon;return e.jsxs(S,{thumbsDownModalExperimentEnabled:C,$selected:f(t.value),onClick:()=>_(t),children:[i&&e.jsx(i,{className:"icon-sm"}),e.jsx("span",{children:t.label})]},t.value)})},s)]},s))}),!W&&e.jsx(ge,{ariaLabel:F.formatMessage({id:"Z3Ja/T",defaultMessage:"Additional feedback"}),name:"feedback",type:"text",autoComplete:"off",className:"mt-6",placeholder:F.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.2",defaultMessage:"Share details (optional)"}),value:u!=null?u:"",onChange:s=>O(s.target.value),onPressEnter:(s,t)=>G(t)}),H&&(C?e.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-secondary mt-4 rounded-lg p-3 text-xs",children:e.jsx(r,{id:"RTUNJf",defaultMessage:"Your conversation will be included with your feedback to help improve ChatGPT. <link>Learn more</link>",values:{link:s=>e.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",rel:"noopener noreferrer",className:"text-token-text-secondary underline",children:s})}})}):e.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-secondary mt-4 rounded-lg p-3 text-xs",children:e.jsx(r,{id:"n8n3KW",defaultMessage:"Submitting feedback will include this full conversation to help improve ChatGPT, even if 'Improve the model for everyone' is turned off. <link>Learn more</link>",values:{link:s=>e.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",rel:"noopener noreferrer",className:"text-token-text-secondary underline",children:s})}})})),K]})]})}var D;const S=be.button(D||(D=z(["\n  inline-flex items-center justify-center gap-2 border border-token-border-default px-3 py-1 text-sm\n  text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary rounded-lg\n\n  ","\n\n  ","\n"])),({thumbsDownModalExperimentEnabled:n})=>n&&"py-2 rounded-full text-token-text-primary",({$selected:n})=>n&&"bg-token-text-primary! text-token-main-surface-primary!");export{Se as I,S as T};
//# sourceMappingURL=m3nchqrpfl8vs80b.js.map
