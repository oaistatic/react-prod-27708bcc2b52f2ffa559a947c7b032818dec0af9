var O=Object.freeze,H=Object.defineProperty,ue=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var G=(s,a,t)=>a in s?H(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,c=(s,a)=>{for(var t in a||(a={}))U.call(a,t)&&G(s,t,a[t]);if(j)for(var t of j(a))z.call(a,t)&&G(s,t,a[t]);return s},b=(s,a)=>ue(s,xe(a));var K=(s,a)=>{var t={};for(var n in s)U.call(s,n)&&a.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&j)for(var n of j(s))a.indexOf(n)<0&&z.call(s,n)&&(t[n]=s[n]);return t};var p=(s,a)=>O(H(s,"raw",{value:O(a||s.slice())}));import{r as h,b as ge,e as Z,j as e,M as x,f as ee,i as C,d as Q,m as se}from"./fg33krlcm0qyi6yw.js";import{v2 as fe,v3 as pe,qi as he,v4 as je,v5 as be,v6 as ve,v7 as ye,H as B,o as _,b as y,R as Se,m as Me,dy as we,a9 as Ne,F as S,n as L,c_ as ke,W as Pe,aP as _e,du as Ae,aK as Ie,io as A,l as M,aa as Ce,i6 as Be,b4 as ae,aS as Le,I as te,c0 as Ee,T as Te,L as Fe,P as We,nW as Re}from"./mtk1qztvnb31pw5r.js";import{a as De,b as Oe,S as Ge}from"./c2cj1dlcffke3f7m.js";import{d$ as ne,iq as He,dw as Ue,dv as ze,by as k,my as Ke,Z as Qe,i_ as qe,jR as Ve,ay as Ye,jE as $e,kn as Je,cX as Xe,ch as Ze,mx as es,az as q}from"./k65njl5wlgspihfr.js";import{A as ss,S as as}from"./i1tex5l6gt3gdz3c.js";import{C as ts}from"./mcmrxiy9039fw9r6.js";import{G as V}from"./llove4bcy7api840.js";import{L as ie}from"./bhm7utdivrybcfbl.js";import{j as ns}from"./efooahjtdr85x1lo.js";function is({cycleReferenceDate:s,cycleIndex:a,targetDate:t=new Date,period:n}){const i=n==="yearly"?fe:pe,o=i(t,a),r=P(s,o,n);return he(r,o)?{start:P(s,i(o,-1),n),end:r}:{start:r,end:P(s,i(o,1),n)}}function P(s,a,t){return je(s,c({year:ve(a)},t==="monthly"&&{month:be(a)}))}function Ps(s=0){const a=ne();return h.useMemo(()=>{var o,r,l;if(a.status==="pending")return"pending";const t=a.data;if(!t)return;const n=(r=(o=t.next_credit_grant_update)!=null?o:t.active_start)!=null?r:t.active_until;if(!n)return;let i=(l=t.billing_period)!=null?l:"monthly";if(t.last_credit_grant_update&&t.next_credit_grant_update){const u=new Date(t.last_credit_grant_update),g=new Date(t.next_credit_grant_update);if(i=ye(g,u)>1?"yearly":"monthly",s===0)return{start:u,end:g,period:i}}return b(c({},is({cycleReferenceDate:new Date(n),cycleIndex:s,period:i})),{period:i})},[a,s])}function rs(){var o;const s=B(),a=y(),n=_(a,"2861925050")&&s!=null&&s.isEnterprisey()&&(s.isAdminOfAccount()||s.isOwnerOfAccount())&&s.organizationId!=null,i=ge({queryKey:os(s==null?void 0:s.organizationId),queryFn:()=>Se.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:s==null?void 0:s.organizationId}}}),enabled:n});return n&&((o=i.data)==null?void 0:o.organization_at_overage_limit)===!0}function os(s){return["is-at-overage-limit",s]}function ls({accountId:s,subscription:a}){const t=Z(),n=Me(),i=He(s),[o,r]=h.useState(!1),l=ns(s),u=async()=>{r(!0);try{await i.mutateAsync(s)}catch(g){n.warning(t.formatMessage(v.errorRenewingSubscription),{hasCloseButton:!0})}finally{r(!1)}};return e.jsx("div",{className:"bg-token-main-surface-secondary",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[e.jsxs("div",{className:"mx-2 grow md:mx-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"me-4 hidden text-orange-500 md:block"}),e.jsx("p",{className:"text-lg font-semibold",children:e.jsx(x,c({},v.workspaceWillBeDeactivated))})]}),a.active_until!=null&&e.jsx("p",{className:"md:ms-8",children:e.jsx(x,b(c({},v.retainAccessUntil),{values:{expiryDate:new Date(a.active_until)}}))})]}),l&&e.jsx(Ne,{color:"primary",onClick:u,loading:o,children:e.jsx(x,c({},v.reactivateBtn))})]})})}const v=ee({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),I="/admin/billing";function d(o){var r=o,{route:s,icon:a,upsellEnterprise:t=!1,locked:n=!1}=r,i=K(r,["route","icon","upsellEnterprise","locked"]);const l=se().pathname.replace(/\/$/,"")||"/",u=C();if(t)return e.jsx(Te,{label:e.jsx(x,c({},m.availableForEnterprise)),side:"right",contentClassName:"cant-hover:hidden",children:e.jsx(A,{as:"div",role:"button",fillContainer:!0,icon:q,label:"name"in i?e.jsx(x,c({},i.name)):i.children})});{const g=n?e.jsx(q,{}):void 0;return e.jsx(A,{as:"div",role:"button",fillContainer:!0,active:l===s,onClick:w=>{u(s),w.stopPropagation()},icon:a,trailing:g,className:M(n&&"text-token-text-tertiary"),label:"name"in i?e.jsx(x,c({},i.name)):i.children})}}function cs({workspace:s,hasAdminPrivileges:a,hasOwnerPrivileges:t}){var W,R,D;const n=C(),i=B(),o=(R=(W=i==null?void 0:i.isK12)==null?void 0:W.call(i))!=null?R:!1,r=!!(i!=null&&i.isFreeWorkspace()),l=L(Pe.isEnterpriseyPlan),u=h.useCallback(()=>{n("/")},[n]),g=y(),w=_(g,"4105779609"),oe=_e(),le=(i==null?void 0:i.isSelfServeBusiness())&&w,{data:N}=Ae(s==null?void 0:s.id);let f=!1;o||t||a||!l?f=!0:f=!!((D=N==null?void 0:N.permissions)!=null&&D.includes("chatgpt.workspace.member.role.view"));const ce=Ke(as,es,!1,!0),de=Z().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"}),me=_(g,"2688889402"),E={route:"/admin/permissions",icon:$e,locked:r,name:m.permissions},T={route:"/admin/gpts",icon:Je,locked:r,name:m.gpts},F={route:"/admin/ca",icon:Xe,locked:r,name:me?m.connectionsV2:m.connections};return e.jsxs("nav",{className:"pb-1.5",children:[!oe&&e.jsx("div",{className:"h-header-height flex items-center px-2",children:e.jsx(Qe,{className:"no-draggable","aria-label":de,onClick:()=>{Ie.setSidebarOpen(!1)},icon:ce,mobileIcon:qe,"data-testid":"close-sidebar-button"})}),e.jsx("div",{className:"h-header-height flex flex-col justify-center",children:e.jsx(A,{as:"button",onClick:u,icon:e.jsx(Ve,{className:"icon-sm"}),label:e.jsx(x,c({},m.backToChat))})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:M("flex flex-col gap-2 rounded p-4"),children:[e.jsx(Ce,{size:"large",src:s==null?void 0:s.profilePictureUrl}),e.jsx("div",{className:"align-center flex min-w-0 flex-row",children:e.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:s==null?void 0:s.name})})]}),a&&e.jsx(d,{route:"/admin",icon:Be,name:m.generalSettingsPageTitle}),f&&e.jsx(d,{route:"/admin/members",icon:Ye,name:m.membersPageTitle}),l&&f&&e.jsx(d,{route:"/admin/groups",icon:V,upsellEnterprise:!l,locked:r,name:Q({id:"aecR1i",defaultMessage:"Groups"})}),t&&!r&&e.jsx(d,c({},E)),a&&!o&&e.jsx(d,{route:I,icon:ts,name:m.billing}),t&&!r&&e.jsx(d,c({},T)),a&&!r&&e.jsx(d,c({},F)),!l&&e.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),t&&r&&e.jsx(d,c({},E)),t&&r&&e.jsx(d,c({},T)),a&&r&&e.jsx(d,c({},F)),!l&&e.jsx(d,{route:"/admin/groups",icon:V,upsellEnterprise:!l&&!r,locked:r,name:Q({id:"aecR1i",defaultMessage:"Groups"})}),a&&e.jsx(d,{route:"/admin/usage",icon:ss,upsellEnterprise:!l&&!r,locked:r,children:e.jsx("div",{className:"flex flex-row items-center gap-2",children:e.jsx(x,c({},m.userAnalytics))})}),t&&e.jsx(d,{route:"/admin/identity",upsellEnterprise:!l&&!le&&!r,locked:r,icon:Ze,name:m.identity}),!1]})]})}function _s({mobilePageTitle:s,requireAdminPrivileges:a=!1,requireOwnerPrivileges:t=!1,children:n}){const i=L(u=>u.currentWorkspace),o=C(),r=i!=null?Ue(i.role):void 0,l=i!=null?ze(i.role):void 0;return h.useEffect(()=>{a&&r===!1&&o("/admin/members"),t&&l===!1&&o("/admin/members")},[a,r,o,t,l]),ke()?e.jsxs(k,{children:[e.jsx(k.Navbar,{children:e.jsx(De,{nonCollapsable:!0,children:e.jsx(cs,{workspace:i!=null?i:void 0,hasAdminPrivileges:r,hasOwnerPrivileges:l})})}),e.jsx(k.Header,{children:e.jsxs(Oe,{rightContent:e.jsx(ie,{}),children:[e.jsx(Ge,{}),e.jsx("div",{className:"ms-2",children:s})]})}),n]}):null}function ds(){return e.jsxs(e.Fragment,{children:[e.jsx(ms,{}),e.jsx(us,{})]})}function ms(){const{data:s}=ne(),a=y(),t=te(a),n=t&&s&&s.plan_type===Fe.SELF_SERVE_BUSINESS&&!s.will_renew;return e.jsx(e.Fragment,{children:n&&e.jsx(ls,{accountId:t.id,subscription:s})})}function us(){const s=B(),a=rs(),t=se().pathname!==I;return h.useEffect(()=>{a&&We.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:s==null?void 0:s.id,workspaceName:s==null?void 0:s.name})},[a,s]),e.jsx(e.Fragment,{children:a&&e.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[e.jsx(Re,{className:"me-2 shrink-0"}),e.jsx(x,b(c({},m.atOverageLimitBannerText),{values:{link:n=>t?e.jsx(ae,{className:"mx-1",href:I,children:n}):n}}))]})})})}var Y;const re=S.div(Y||(Y=p(["w-full flex-row items-center gap-2"])));var $;const xs=S(re)($||($=p(["text-sm text-token-text-tertiary"])));var J;const gs=S.div(J||(J=p(["mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10"])));function As({title:s,subtitle:a,actions:t,tabsHeader:n,badge:i,navigation:o,showBottomBorder:r=!0}){return e.jsxs(e.Fragment,{children:[e.jsx(ds,{}),e.jsxs("div",{className:M("border-token-bg-tertiary flex flex-col gap-6 md:mt-12",r&&"border-b",!n&&"pb-6"),children:[o&&e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:o}),e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(re,{className:"hidden md:flex",children:[e.jsx("h2",{children:s}),i]}),a&&e.jsx(xs,{className:"mt-1",children:a})]}),e.jsx("div",{className:"flex",children:t})]})}),n&&e.jsx(gs,{children:n})]}),e.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:e.jsx(ie,{})})]})}function Is({items:s}){return e.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:s.map((a,t)=>{const n=M(t===s.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return e.jsxs(e.Fragment,{children:[a.href?e.jsx(ae,{href:a.href,style:{textDecoration:"none"},className:n,children:a.label},t):e.jsx("div",{className:n,children:a.label},t),t<s.length-1&&e.jsx(Le,{className:"icon-sm"})]})})})}var X;const fs=S.div(X||(X=p(["max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10"])));function Cs({children:s,showSpinner:a,skipLegacyWorkspaceCheck:t}){const n=y(),i=te(n),o=L(u=>u.currentWorkspace),r=!t&&!o,l=!i||a;return e.jsxs(fs,{children:[l&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(Ee,{})}),!l&&r&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(x,c({},m.workspaceNotFound))}),!l&&!r&&s]})}const m=ee({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},generalSettingsPageTitle:{id:"6Gjoj5",defaultMessage:"General"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Apps & Connectors"},connectionsV2:{id:"oPJHbS",defaultMessage:"Apps"},permissions:{id:"/HwRtL",defaultMessage:"Permissions & roles"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & access"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."},agreements:{id:"workspaceAgreements.agreementsTitle",defaultMessage:"Agreements"}});export{_s as A,As as a,Is as b,Cs as c,Ps as d,ds as e,os as g,rs as u};
//# sourceMappingURL=jex6ulz50fkc86ct.js.map
