var V=Object.defineProperty,$=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var w=(r,e,t)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,y=(r,e)=>{for(var t in e||(e={}))K.call(e,t)&&w(r,t,e[t]);if(q)for(var t of q(e))D.call(e,t)&&w(r,t,e[t]);return r},T=(r,e)=>$(r,A(e));import{a0 as F,c as G,a1 as I,i as S,r as O,b as U,j as o,M as E,f as z}from"./fg33krlcm0qyi6yw.js";import{a9 as Q,c0 as W,L}from"./mtk1qztvnb31pw5r.js";import{u as X}from"./c0yxya1tj5roedd5.js";import{dj as H,dk as J}from"./k65njl5wlgspihfr.js";const Y=500,Z=2;function ee(r){switch(r){case L.GO:return"chatgpt-subscribe-plan-go";case L.PLUS:return"chatgpt-subscribe-plan-plus";case L.PRO:return"chatgpt-subscribe-plan-pro";default:return""}}const oe=F(function(){"use forget";const e=G.c(42),{processorEntity:t,checkoutSessionId:a,planType:i}=I(),l=S();let u;e[0]!==i?(u=ee(i.toLowerCase()),e[0]=i,e[1]=u):u=e[1];let g;e[2]!==u?(g={key:u},e[2]=u,e[3]=g):g=e[3];const{trackSelectedPixels:f}=X(g);let P;e[4]===Symbol.for("react.memo_cache_sentinel")?(P={firstRequestAt:Date.now(),pollCount:0,finished:!1,redirected:!1},e[4]=P):P=e[4];const[n,v]=O.useState(P);let p;e[5]!==a||e[6]!==t?(p=["checkoutSession",t,a],e[5]=a,e[6]=t,e[7]=p):p=e[7];let d;e[8]!==a||e[9]!==t||e[10]!==n.pollCount?(d=async()=>{const M=await H.fetchExistingCheckoutSession(t,a),B=M.status==="complete"||M.status==="expired"||n.pollCount>=Z;return v(N=>T(y({},N),{pollCount:N.pollCount+1,finished:B})),M},e[8]=a,e[9]=t,e[10]=n.pollCount,e[11]=d):d=e[11];const b=!n.finished;let C;e[12]!==p||e[13]!==d||e[14]!==b?(C={queryKey:p,queryFn:d,refetchInterval:Y,enabled:b},e[12]=p,e[13]=d,e[14]=b,e[15]=C):C=e[15];const{data:s}=U(C);let j;e[16]!==(s==null?void 0:s.status)||e[17]!==a||e[18]!==l||e[19]!==i||e[20]!==t||e[21]!==n.finished||e[22]!==n.redirected||e[23]!==f?(j=()=>{!n.finished||n.redirected||(v(te),(s==null?void 0:s.status)==="complete"?(f(),l({pathname:"/payments/success",search:"?stripe_session_id=".concat(a,"&plan_type=").concat(i,"&processor_entity=").concat(t)})):(s==null?void 0:s.status)==="open"&&l({pathname:J(t,a),search:"",hash:""}))},e[16]=s==null?void 0:s.status,e[17]=a,e[18]=l,e[19]=i,e[20]=t,e[21]=n.finished,e[22]=n.redirected,e[23]=f,e[24]=j):j=e[24];let R;e[25]!==s||e[26]!==a||e[27]!==l||e[28]!==i||e[29]!==t||e[30]!==n||e[31]!==f?(R=[n,s,a,t,i,l,f],e[25]=s,e[26]=a,e[27]=l,e[28]=i,e[29]=t,e[30]=n,e[31]=f,e[32]=R):R=e[32],O.useEffect(j,R);const c=(s==null?void 0:s.status)==="expired";let m;e[33]!==c?(m=!c&&o.jsx(W,{className:"icon-xl"}),e[33]=c,e[34]=m):m=e[34];let x,h;e[35]!==c?(x=o.jsx("span",{className:"text-muted-foreground text-center text-sm",children:c?o.jsx(E,y({},k.errorProcessingPayment)):o.jsx(E,y({},k.processingPayment))}),h=c&&o.jsx(Q,{color:"primary",as:"link",to:"/#pricing",children:o.jsx(E,y({},k.returnButtonText))}),e[35]=c,e[36]=x,e[37]=h):(x=e[36],h=e[37]);let _;return e[38]!==x||e[39]!==h||e[40]!==m?(_=o.jsx("div",{className:"flex h-screen flex-col p-4",children:o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[m,x,h]})})}),e[38]=x,e[39]=h,e[40]=m,e[41]=_):_=e[41],_});function te(r){return T(y({},r),{redirected:!0})}const k=z({processingPayment:{id:"CheckoutVerifyRoute.processingPayment",defaultMessage:"Processing Payment"},errorProcessingPayment:{id:"CheckoutVerifyRoute.errorProcessingPayment",defaultMessage:"There was an error processing your payment"},returnButtonText:{id:"CheckoutVerifyRoute.returnButtonText",defaultMessage:"Return to ChatGPT"}});export{oe as default};
//# sourceMappingURL=h5fsl94gumpmel42.js.map
