const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dn7b8ltlto4h6mzn.js","assets/fg33krlcm0qyi6yw.js","assets/k65njl5wlgspihfr.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/conversation-small-332fs9rk.css","assets/l4kv10v2alh465ct.js","assets/kbwdpwjg4pumi9yy.js","assets/b5tn8l4mx5bcutkn.js","assets/i5jw6wfkpao2rx5t.js","assets/krwszi9u3lj63i9v.js","assets/hf681fo61q7gh2kv.js","assets/cnrdqaihcmlb57i1.js","assets/lbbnz7rb7sd2lk50.js","assets/eoe4b0mmb8r0rg3f.js","assets/je866d95n4n31rpb.js","assets/l9v3ntkj34comb67.js","assets/ctgqahsfx1txd4g6.js","assets/oxou6hzxyw0w4jtf.js","assets/engbryqfkwtfab1c.js","assets/m3nchqrpfl8vs80b.js","assets/ir7nzwbolrsm3ds2.js","assets/jskmg2zu1nebndza.js","assets/d30pfo25z1qctykl.js","assets/h0pbwkfesoibvhzi.js","assets/bb433it64s5m64pf.js","assets/n1e16fbkhjeche79.js","assets/g2rmbcgwpgns7833.js","assets/crwi6jdel6v7mlsn.js","assets/fbnn8bh19p4wun84.js","assets/grhyrnbc9eq7z08k.js","assets/gk1ydinzmvc3mi3f.js","assets/hakyprpr5m8dolws.js","assets/hwvghg24zujdhy4q.js","assets/fnhhsiipu8vwj3on.js","assets/ktlrbeajo849nxci.js","assets/kl7c6054usfnqmd4.js","assets/ns51nblw8ziscsgd.js","assets/acd1cl9alifs5fnh.js","assets/ce3hgmw4iyyhicud.js","assets/bx8ibdo7ycfk88np.js","assets/gbv91qxkowltau8e.js","assets/isy4o0udnww0c9cq.js","assets/hy5xt98rivxg8tb4.js","assets/cao64vjbtd73v4mi.js","assets/bj1xayv0ee02amky.js","assets/ikh0apjsuisoywnq.js","assets/i1g2kxfbotvbgq93.js","assets/qcr0k45a8ay8c0b9.js","assets/eu6wvuly09f1n3pt.js","assets/ju642fjyg5h2qo49.js","assets/fjbpw3a0vshjd395.js","assets/pbl95wx6493wq92j.js","assets/li70yj6yb4gouarj.js","assets/dcp7peq4y6a4kabz.js","assets/cot-message-g4jkzz65.css","assets/mlipn08v0whyrmd1.js","assets/ibn786ppk19q5x4e.js","assets/lwurb2j1h4mmtrea.js","assets/c891oozutn53q1hi.js"])))=>i.map(i=>d[i]);
import{_ as x,r as L,j as t,M as pe}from"./fg33krlcm0qyi6yw.js";import{bh as _,kM as We,fN as Te,d as K,eW as He,ej as Ke,b as Ue,eo as Xe,kH as e,bc as Ye,bd as Ze,gd as X,kz as qe,gG as Y,kF as P,P as Ge,km as st,er as ye,l as be,dQ as Ie,e2 as et,pT as je,r6 as tt,eh as U,ed as at,da as nt,gF as it,e4 as ot}from"./mtk1qztvnb31pw5r.js";import{aA as lt,aB as rt,aC as ct,aD as mt,aE as Ee,aF as dt,aG as gt,aH as ht,aI as ut,aJ as _t,aK as ft,aL as xt,aM as Tt,aN as yt,aO as bt,aP as It,aQ as jt,aR as Et,aS as St,aT as pt,aU as wt,aV as At,aW as Se,aX as Ct,aY as Lt,aZ as Pt,a_ as Dt,a$ as kt,b0 as Rt,b1 as vt}from"./k65njl5wlgspihfr.js";import{T as Ot}from"./i5jw6wfkpao2rx5t.js";import{g as Vt}from"./krwszi9u3lj63i9v.js";const zt=_(()=>x(()=>import("./dn7b8ltlto4h6mzn.js"),__vite__mapDeps([0,1,2,3,4,5]))),Bt=_(()=>x(()=>import("./l4kv10v2alh465ct.js"),__vite__mapDeps([6,1,3,4,7]))),Nt=_(()=>x(()=>import("./b5tn8l4mx5bcutkn.js"),__vite__mapDeps([8,1,3,4,9,2,5,10]))),Qt=_(()=>x(()=>import("./hf681fo61q7gh2kv.js"),__vite__mapDeps([11,1,3,4,12,13,2,5,14,15,16]))),Ft=_(async()=>()=>null),Mt=_(async()=>(await x(()=>import("./ctgqahsfx1txd4g6.js"),__vite__mapDeps([17,1,3,4,2,5]))).GlauxMessage),$t=_(async()=>(await x(()=>import("./oxou6hzxyw0w4jtf.js"),__vite__mapDeps([18,1,3,4,2,5,14,19,20,21,15,16,22,23,24]))).ImageGenMessage),Jt=_(()=>x(()=>import("./bb433it64s5m64pf.js"),__vite__mapDeps([25,1,3,4,2,5]))),Wt=_(()=>x(()=>import("./k65njl5wlgspihfr.js").then(a=>a.Fc),__vite__mapDeps([2,1,3,4,5])).then(a=>a.BrowsingMessage)),Ht=_(()=>x(()=>import("./n1e16fbkhjeche79.js"),__vite__mapDeps([26,1,3,4,2,5,10])).then(a=>a.BrowserToolMessage)),Kt=_(()=>x(()=>import("./g2rmbcgwpgns7833.js"),__vite__mapDeps([27,1,3,4,2,5])).then(a=>a.SearchResultMessage)),Ut=_(()=>x(()=>import("./crwi6jdel6v7mlsn.js"),__vite__mapDeps([28,1,3,4,2,5,29,30,31,32,33,34,35,36,37,12,13,38,39])).then(a=>a.JITPluginMessage)),Xt=_(()=>x(()=>import("./bx8ibdo7ycfk88np.js"),__vite__mapDeps([40,1,3,4,2,5,32])).then(a=>a.APIToolElicitationMessage)),Yt=_(()=>x(()=>import("./gbv91qxkowltau8e.js"),__vite__mapDeps([41,1,3,4,42,43,2,5])).then(a=>a.DataAnalysisMessage)),Zt=_(()=>x(()=>import("./cao64vjbtd73v4mi.js"),__vite__mapDeps([44,1,3,4,2,5,45,22,23,16,24,46,17,43,47,10,48,49,50,51,52,21,15,53,54,55]))),qt=_(()=>x(()=>import("./mlipn08v0whyrmd1.js"),__vite__mapDeps([56,1,3,4,45,2,5,22,23,16,24,46,17,43,47,10,48,49,50,51,52,21,15,53,54,55])).then(a=>a.LegacyCoTMessage)),Gt=_(()=>x(()=>import("./bj1xayv0ee02amky.js"),__vite__mapDeps([45,1,3,4,2,5,22,23,16,24,46,17,43,47,10,48,49,50,51,52,21,15,53,54,55])).then(a=>a.CoT)),sa=_(()=>x(()=>import("./ibn786ppk19q5x4e.js"),__vite__mapDeps([57,1,3,4,2,5,58])).then(a=>a.JawboneMessage)),ea=_(async()=>()=>null),ta=_(()=>x(()=>import("./c891oozutn53q1hi.js"),__vite__mapDeps([59,1,3,4,2,5])).then(a=>a.HazelnutEnablePrompt));function aa(a){if(a.some(c=>c.type===e.SearchGPTQuery)){const u=a.filter(d=>d.type===P).flatMap(d=>d.groups),o=u.flatMap(d=>d.messages.map(m=>{var f;return(f=m.metadata)==null?void 0:f.search_turns_count})).findLast(d=>d!=null);return o!=null?o>1:(function(){const m=u.filter(I=>I.type===e.StructuredThoughts),f=u.filter(I=>I.type===e.CoTSearchTool),g=(()=>{function I(E){return E.type===e.StructuredThoughts&&E.messages.flatMap(h=>h.content).some(h=>h.content_type===ot.StructuredThoughts&&h.thoughts.length>0)}let j=!1;for(const E of u)if(E.type===e.CoTSearchTool)j=!0;else if(I(E)&&j)return!0;return!1})();return m.length>1||f.length>1||g})()}return!0}function na(a,c){var u;if(a.type===P){const o=X(a.groups);return((u=o==null?void 0:o.messages[0].metadata)==null?void 0:u.is_visually_hidden_reasoning_group)&&c===0}return!1}function ia(a){return a.type===P?!1:a.messages.some(c=>kt(c))}function ua({groupedMessagesToRender:a,allMessages:c,allGroupedMessages:u,conversation:o,isUserTurn:d,isCompletionRequestInProgress:m,isFeedbackEnabled:f,isFinalTurn:g,isFinalUserTurn:I,isFinalAssistantTurn:j,isGlauxTurn:E=!1,hasActiveRequest:h,onRequestCompletion:D,turnIndex:S,shouldGrowContainer:V=!0,isParagen:Z=!1,renderingView:we="chat",isAgentTurn:z=!1,isKAUR1BR5:Ae=!1,query:q=null,wasInterrupted:Ce=!1,superWidgetContent:Le=null,lastAgentMetadataNode:G,isWithinFirstAssistantTurns:Pe=!1,hasSearchSystemHint:De=!1}){var ds,gs;const F=Ue(),{showDebugConversationTurns:M}=We(),[k]=Te(o.id,s=>[s==null?void 0:s.mode]),ss=K(()=>He(o)),es=K(()=>Ke(o)),ke=lt(F),Re=K(()=>Xe(F));let ts=u.some(s=>s.type===e.Browsing||s.type===e.RetrievalBrowsing||s.type===e.SearchGPTQuery||s.type===e.n7jupd||s.type===e.q7dr546);const ve=u.some(s=>s.type===e.SearchGPTQuery),as=!d&&De&&m&&h&&!ve&&Re,ns=L.useRef(!1);as&&(ns.current=!0,ts=!0);const Oe=Te(o.id,s=>{var n;for(let b=c.length-1;b>=0;b--){const r=c[b],w=(n=s==null?void 0:s.tree.getNodeIfExists(r.id))==null?void 0:n.message,Q=w?vt(w):void 0;if(Q)return Object.assign({conversation:o,messageId:c[b].id},Q)}}),Ve=rt(()=>Ye.count(Ze.DEFAULT,"conversation_turn_grouped_messages.attempted_render_missing_type_f959b8c")),$=X(c),is=qe({clientThreadId:o.id,conversationMode:k}),ze=L.useCallback(({sourceEvent:s,requestedModelId:n,appendMessages:b,extraStreamParams:r,isReasoningSkipped:w})=>{$&&is({sourceEvent:s,nodeId:$.id,requestedModelId:n,appendMessages:b,extraStreamParams:r,isReasoningSkipped:w})},[$,is]),{closeThreadSidebar:Be}=ct(),os=Y(a,s=>s.type!==e.Debug),Ne=M?u.length-1:os,J=a.map((s,n)=>{var _s,fs,xs,Ts,ys,bs,Is,js,Es,Ss,ps,ws,As,Cs,Ls,Ps,Ds,ks,Rs,vs,Os,Vs,zs,Bs,Ns,Qs,Fs,Ms,$s,Js,Ws,Hs,Ks,Us,Xs,Ys,Zs,qs,Gs,se,ee,te,ae,ne,ie,oe,le,re,ce,me,de,ge,he,ue,_e,fe;const b=h||ia(s),r=z?n===os:n===Ne,w=aa(a),Q=na(s,n),T=n===u.length-1?void 0:u[n+1],Fe=(T==null?void 0:T.type)===P?T.groups.at(-1):T,v=n===0?void 0:a[n-1],A=(v==null?void 0:v.type)!==P?v:void 0,hs=A==null?void 0:A.type,us=A==null?void 0:A.messages,Me=c==null?void 0:c.filter(i=>{var l,y;return((l=i.metadata)==null?void 0:l.python_citation)||((y=i.metadata)==null?void 0:y.container_citation)});if(s.type===P){const i=s.groups[0].messages[0];return!w||Q?null:t.jsx(Gt,{isStreaming:g&&r&&m,latestError:Oe,isFinalAssistantTurn:j,messageGroups:s.groups,nextMessageGroup:Fe,prevMessageGroup:A,isAutoswitchOptOutEnabled:!!((_s=i.metadata)!=null&&_s.classifier_response),handleSkipClick:l=>{Be(),Ge.logEventWithStatsig("chatgpt_web_autoswitch_reasoning_skip_clicked","chatgpt_web_autoswitch_reasoning_skip_clicked",{conversationId:o.id,messageId:s.groups[0].messages[0].id}),ss&&ze({sourceEvent:l,requestedModelId:ss.id,isReasoningSkipped:!0,isAgentTurn:z})},isAgentTurn:z,isGlauxTurn:E,isKAUR1BR5:Ae,wasInterrupted:Ce,lastAgentMetadataNode:G,conversation:o,turnIndex:S,currentGroupedMessageIndex:n},"cot-"+i.id)}const $e=s&&!st(s.messages[0]),Je=ts&&$e,C=[];if(Je||C.push(t.jsx(Ot,{className:"min-h-8",message:s.messages[0],isFeedbackEnabled:f,isFinalUserTurn:I,isWithinFirstAssistantTurns:Pe,isCompletionInProgress:r&&m,hasActiveRequest:h,turnIndex:S,conversation:o,isUserTurn:d,prevGroupedMessageType:hs,prevGroupedMessages:us,citableMessages:Me,superWidgetContent:Le},"text-message-"+s.messages[0].id)),M&&C.push(t.jsx(ea,{clientThreadId:o.id,message:s.messages[0]},"message-debug-"+s.messages[0].id)),s.type===e.Text&&((fs=s.messages[0].metadata)!=null&&fs[ye])){const i=s.messages[0].metadata[ye];return t.jsxs(L.Fragment,{children:[t.jsx(mt,{browserContextMetadata:i,className:be(Vt(!0),"mb-1","block","[.text-message+&]:mt-5")}),C]},"group-"+s.messages[0].id)}if(as&&r)return t.jsx(Ee,{clientThreadId:o.id,turnIndex:S,isRequestActive:h,isLastMessage:r,isLastTurnInConversation:g,query:q,searchModelQueries:[],searchResultGroups:[],showFastNav:!1,isForcedMessage:!0,shouldShowAnimatedBlackDot:!1},"searchquery-forced-".concat(o.id,"-").concat(S));switch(s.type){case e.Text:case e.MultiText:if(s.type===e.Text){const i=(xs=s.messages[0])==null?void 0:xs.metadata,l=typeof(i==null?void 0:i.source)=="string"&&(i==null?void 0:i.source)==="dream_followup";return t.jsxs(L.Fragment,{children:[l&&v&&t.jsxs("div",{className:"mx-auto mt-8 mb-6 flex w-full items-center justify-center",children:[t.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),t.jsx("p",{className:"mx-3 shrink text-[14px] whitespace-nowrap text-gray-500",children:t.jsx(pe,{id:"threadLayout.proactiveAssistantFollowupDivider",defaultMessage:"Follow-up question"})}),t.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]},"proactive-divider-"+s.messages[0].id),C,z&&t.jsx(St,{conversation:o,currentGroupedMessage:s,isLastMessage:r,isLastTurnInConversation:g,turnIndex:S,lastAgentMetadataNode:G}),t.jsx(pt,{isUserTurn:d,message:s.messages[0]}),t.jsx(wt,{isUserTurn:d,message:s.messages[0],clientThreadId:o.id})]},"group-"+s.messages[0].id)}else return s.type===e.MultiText?t.jsx(Nt,{conversation:o,messages:s.messages,isCompletionInProgress:r&&m,isFeedbackEnabled:f,hasActiveRequest:h,prevGroupedMessageType:hs,prevGroupedMessages:us},"multitext-"+((ys=(Ts=s.messages[0])==null?void 0:Ts.id)!=null?ys:n)):s.type;case e.PIMBlock:{const i=X(c);return k&&i?t.jsx(Et,{isFinalTurn:g,hasActiveRequest:h,conversationMode:k,clientThreadId:o.id,justification:(bs=i.metadata)==null?void 0:bs.pim_justification,flaggedMessageId:(Is=i.metadata)==null?void 0:Is.pim_message_id,children:C}):null}case e.HazelnutEnablePrompt:{const i=s.messages[0],l=i==null?void 0:i.content;return(l==null?void 0:l.type)!=="hazelnut_enable_prompt"?null:t.jsx(ta,{conversationId:o.id,hazelnutId:l.hazelnut_id,hazelnutName:l.name},"hazelnut-enable-".concat(i.id))}case e.n7jupd_n:return t.jsx(jt,{});case e.Browsing:case e.RetrievalBrowsing:{const i=k!=null&&[U.GizmoInteraction,U.GizmoMagicCreate,U.GizmoTest].includes(k.kind),l=es?at(es):!1;return t.jsx(Wt,{messages:s.messages,isRequestActive:h,isLastMessageInTurn:r,isUsingGizmo:i,isUsingProject:l,isRetrieval:s.type===e.RetrievalBrowsing},"browsing-"+((Es=(js=s.messages[0])==null?void 0:js.id)!=null?Es:n))}case e.kaur1br5:return t.jsx(Ht,{messages:s.messages,isRequestActive:h,isLastMessageInTurn:r,clientThreadId:o.id},"kaur1br5-tool-"+((ps=(Ss=s.messages[0])==null?void 0:Ss.id)!=null?ps:n));case e.SearchGPTQuery:{if(a.some(p=>p.type===P)&&w)return null;const l=a.slice(n+1).findLast(p=>p.type===e.Text||p.type===e.CoTSearchTool),y=c.findLast(p=>je(p).length>0),O=new Set,xe=[];for(const p of c){const W=tt(p);if(W&&W.length>0)for(const H of W)O.has(H)||(O.add(H),xe.push(H))}return t.jsx(Ee,{clientThreadId:o.id,turnIndex:S,isRequestActive:h,isLastMessage:r,isLastTurnInConversation:g,nextMessage:l==null?void 0:l.messages[0],query:q,searchResultGroups:je(y),searchModelQueries:xe,shouldShowAnimatedBlackDot:!ns.current},"searchquery-"+((As=(ws=s.messages[0])==null?void 0:ws.id)!=null?As:n))}case e.StructuredThoughts:return null;case e.ReasoningRecap:return null;case e.n7jupd:return null;case e.n7jupd_native_api_tool:case e.n7jupd_a:case e.n7jupd_x:return null;case e.a8km123:{if(!s.messages.every(l=>{var y;return!((y=l.metadata)!=null&&y.reasoning_status)})){const l=Y(c,y=>y.author.role===et.Assistant&&y.recipient==="all");return t.jsx(qt,{conversation:o,turnIndex:S,isStreaming:(r||l<n)&&m,isFinalAssistantTurn:j,messages:s.messages},"sum-"+((Ls=(Cs=s.messages[0])==null?void 0:Cs.id)!=null?Ls:n))}return t.jsx(Zt,{messages:s.messages,isStreaming:r&&m,isCompletionRequestInProgress:m,hasActiveRequest:h,isLastMessage:r,isFinalTurn:g,isFeedbackEnabled:f,conversation:o,currentGroupedMessageIndex:n,turnIndex:S},"sum-"+((Ds=(Ps=s.messages[0])==null?void 0:Ps.id)!=null?Ds:n))}case e.f959b8c:return Ve(),null;case e.is_loading_message:if(r&&m){const i=s.messages[0],l=Ie(i);return t.jsx(It,{text:l},"loading-message-"+n)}else return null;case e.b47u8ra0_t:{const i=s.messages[0],l="Reference Browser Memories?",y=Ie(i);return t.jsx(bt,{title:l,description:y,settingsTab:(Rs=(ks=i.metadata)==null?void 0:ks.b47u8ra0_t)!=null?Rs:"general",clientThreadId:o.id,parentMessageId:i.id},"b47u8ra0_t-"+n)}case e.l1p9k3u:return null;case e.b1de6e2_c:return t.jsx(yt,{messages:s.messages,clientThreadId:o.id,isLastMessage:r},"b1de6e2-"+((Os=(vs=s.messages[0])==null?void 0:vs.id)!=null?Os:n));case e.b1de6e2_s:return t.jsx(Tt,{messages:s.messages,clientThreadId:o.id},"b1de6e2_s-"+((zs=(Vs=s.messages[0])==null?void 0:Vs.id)!=null?zs:n));case e.b1de6e2_d:return null;case e.b1de6e2_rm:return t.jsx(xt,{messages:s.messages,clientThreadId:o.id,renderingView:we,children:C},"b1de6e2_rm-"+((Ns=(Bs=s.messages[0])==null?void 0:Bs.id)!=null?Ns:n));case e.async_task_result_message:return t.jsx(ft,{clientThreadId:o.id,messages:s.messages,children:C},"async_task_result_message-"+((Fs=(Qs=s.messages[0])==null?void 0:Qs.id)!=null?Fs:n));case e.de1d73e:if(ke){const i=n+1<u.length?u[n+1]:void 0;return t.jsx(sa,{clientThreadId:o.id,currentGroupedMessage:s,nextMessage:i&&i.type===e.Text?i.messages[0]:void 0,isLastMessage:r,isRequestActive:h},"jawbone-"+(($s=(Ms=s.messages[0])==null?void 0:Ms.id)!=null?$s:n))}else return null;case e.ParallelBrowsing:return t.jsx(Jt,{messages:s.messages},"parallel-"+((Ws=(Js=s.messages[0])==null?void 0:Js.id)!=null?Ws:n));case e.CodeInterpreter:return t.jsx(Yt,{messages:s.messages,isRequestActive:h||m,clientThreadId:o.id},"ada-"+((Ks=(Hs=s.messages[0])==null?void 0:Hs.id)!=null?Ks:n));case e.UserSettings:{const i=n+1<u.length?u[n+1]:void 0;return(i==null?void 0:i.type)===e.UserSettings?null:t.jsx(_t,{messages:s.messages,isRequestActive:h},"user-settings-"+((Xs=(Us=s.messages[0])==null?void 0:Us.id)!=null?Xs:n))}case e.q7dr546:return t.jsx(ut,{messages:s.messages,isLastMessage:r,nextMessage:T},"q7dr546-"+((Zs=(Ys=s.messages[0])==null?void 0:Ys.id)!=null?Zs:n));case e.DILWidget:{const i=s.messages[0],l=(qs=i==null?void 0:i.metadata)==null?void 0:qs.chatgpt_sdk,y=l==null?void 0:l.dil,O=(Gs=l==null?void 0:l.tool_response_metadata)==null?void 0:Gs.kakao_widget;return O?t.jsx("div",{children:t.jsx(ht,{rootWidget:O,dil:y})},"dil-".concat((se=i==null?void 0:i.id)!=null?se:n)):null}case e.JITPlugin:return t.jsx(Ut,{messages:s.messages,nextMessage:(T==null?void 0:T.type)===e.JITPlugin?T.messages[0]:void 0,clientThreadId:o.id,isLastTurnInConversation:g,isLastMessageInTurn:r,onRequestCompletion:D},"jit-"+((te=(ee=s.messages[0])==null?void 0:ee.id)!=null?te:n));case e.Mercury:return null;case e.APIToolElicitation:return t.jsx(Xt,{messages:s.messages,nextMessage:(T==null?void 0:T.type)===e.APIToolElicitation?T.messages[0]:void 0,clientThreadId:o.id,isLastTurnInConversation:g,isLastMessageInTurn:r,onRequestCompletion:D},"api-tool-elicitation-"+((ne=(ae=s.messages[0])==null?void 0:ae.id)!=null?ne:n));case e.t2uay3k:return t.jsx($t,{messages:s.messages,clientThreadId:o.id,isParagen:Z,isLastTurnInConversation:g},"t2uay3k-"+((oe=(ie=s.messages[0])==null?void 0:ie.id)!=null?oe:n));case e.Dalle:return t.jsx(Qt,{messages:s.messages,clientThreadId:o.id,disableClickThru:Z},"dalle-"+((re=(le=s.messages[0])==null?void 0:le.id)!=null?re:n));case e.GizmoEditor:return t.jsx(zt,{messages:s.messages},"gizmo-editor-"+((me=(ce=s.messages[0])==null?void 0:ce.id)!=null?me:n));case e.oiw209h:return t.jsx(Ft,{messages:s.messages,clientThreadId:o.id},"oiw209h-"+((ge=(de=s.messages[0])==null?void 0:de.id)!=null?ge:n));case e.n7jupd_p:return t.jsx(gt,{});case e.Canmore:return t.jsx(dt,{messages:s.messages,allTurnMessages:c,isFinalTurn:g,isRequestActive:b,clientThreadId:o.id,isUserTurn:d},"canmore-"+((ue=(he=s.messages[0])==null?void 0:he.id)!=null?ue:n));case e.Container:case e.Oboe:return null;case e.Croquette:return null;case e.Debug:return M?t.jsx(Bt,{message:s.messages[0]},"debug-"+s.messages[0].id):null;case e.SearchResult:return t.jsx(Kt,{messages:s.messages},"search-result-"+((fe=(_e=s.messages[0])==null?void 0:_e.id)!=null?fe:n));case e.Mochi:return null;case e.CoTSearchTool:return null;case e.SuperWidget:return null;case e.n7jupd_image_gen:return null;case e.e1ld0dvz:return null;case e.Glaux:return t.jsx(Mt,{messages:s.messages,isLastMessage:r},"glaux-"+s.messages[0].id);case e.Strix:return null;case e.xdeo6rao:return null}}),Qe=Dt(),{wordFadeType:R,animationDurationMs:ls}=At(),B=L.useRef([]),rs=L.useRef(void 0),cs=L.useRef(null),N=!d&&g&&m,ms=(ds=c[0])==null?void 0:ds.id;return nt(()=>{if(R!=="indexed"||!N)return;const s=cs.current;if(!s)return;rs.current!==ms&&(rs.current=ms,B.current=[]);const n=s.getAnimations({subtree:!0}).filter(b=>b.animationName===Se["fade-in"]);if(n.length!==0){const b=ra({now:performance.now(),previousStartTimes:B.current,groupCount:n.length});B.current=b;for(let r=0;r<n.length;r++)n[r].startTime=b[r]}else B.current=[]},[J,R,N]),t.jsx("div",{className:be("flex max-w-full flex-col",{[Se.root]:R==="indexed"&&N,grow:V}),style:R==="indexed"?{"--duration":"".concat(ls,"ms")}:void 0,ref:cs,children:t.jsx(it,{name:"GroupedMessages",fallback:oa,children:d?J:t.jsxs(Ct,{isDisabled:!N||R!=="delay",defaultAnimationDurationPerSegmentMs:ls,children:[Lt(F)&&g&&t.jsx(Pt,{isStreaming:m,debug:Qe}),J]},(gs=c[0])==null?void 0:gs.id)})})}function oa({error:a}){return t.jsxs(Rt,{type:"danger",children:[t.jsx(pe,{id:"5eGo3w",defaultMessage:"Unable to display this message due to an error."}),!1]})}function la(a,c,u){if(a.length<2||c<=0)return 0;const o=c/Math.log(2);a=[...a].sort((f,g)=>f-g);let d=0,m=0;for(let f=a.length-1;f>0;--f){const g=Math.exp(-(u-a[f])/o);if(d>0&&g/d<.01)break;const I=a[f]-a[f-1];d+=g,m+=g*I}return d===0?0:d/m}function ra({now:a,previousStartTimes:c,groupCount:u,initialRate:o=50,halfLife:d=1}){var E;const m=c.slice(0,Y(c,h=>h<=a)+1),f=m.length<2?o/1e3:Math.max(.01,la(m,d*1e3,a)),g=u-m.length;let I=(E=m[m.length-1])!=null?E:0,j=1;for(let h=0;h<g;h++){const D=f*1e3*j;g<D?j*=.8:g>D&&(j*=1.5);const S=1/(f*j),V=Math.max(a,I+S);m.push(V),I=V}return m}export{ua as C};
//# sourceMappingURL=kgrrqncjl71482vi.js.map
