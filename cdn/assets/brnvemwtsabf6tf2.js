var je=Object.freeze,we=Object.defineProperty,Ke=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var ke=(t,e,i)=>e in t?we(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,S=(t,e)=>{for(var i in e||(e={}))Ye.call(e,i)&&ke(t,i,e[i]);if(be)for(var i of be(e))Je.call(e,i)&&ke(t,i,e[i]);return t},Q=(t,e)=>Ke(t,Ve(e));var ne=(t,e)=>je(we(t,"raw",{value:je(e||t.slice())}));import{j as s,r as v,M as j,f as ie,L as ue,c as q,w as Ce,i as ae,a as Xe,e as Z,v as Ne}from"./fg33krlcm0qyi6yw.js";import{a9 as $,P as A,ia as Ze,o as fe,b as H,B as Te,l as I,cQ as es,I as re,bJ as ss,R as Ee,F as _e,bg as ts,T as oe,w3 as is,h$ as as,w4 as rs,sn as os,nu as V,w5 as ns,ue as ce,hf as J,gK as Re,g2 as te,i8 as ls,gJ as cs,G as Y,w6 as ds,i7 as ms,hA as us,w7 as fs,w8 as gs,p3 as Le,c0 as Ae,d9 as xs,w9 as ps,t as B,wa as hs,Z as ys,S as vs,H as Ie,wb as js,i0 as bs,du as ks,ik as ws,jW as Ns,qc as Se,t$ as Ss,oF as zs,qt as Ps}from"./mtk1qztvnb31pw5r.js";import{b as De}from"./efooahjtdr85x1lo.js";import{ig as Gs,G as Ms,ao as We,cx as Cs,ie as ge,da as xe,cL as Ts,c7 as pe,eN as Es,az as _s,kB as Rs,a4 as Ls,b0 as se,l as As,qi as Is,cV as Ue,fd as Ds,an as K}from"./k65njl5wlgspihfr.js";import{U as Oe}from"./e4epv5uv3mte9vwk.js";import{N as Ws}from"./bhm7utdivrybcfbl.js";import{P as Us}from"./ohquqctluwabmb5i.js";import{G as Os}from"./k5ymvhnpmrn2doa6.js";import{G as Fe,a as Be,b as Fs}from"./moee19t0icnodtc2.js";import{P as Bs}from"./7v5348ti11nhyc2o.js";import{G as $s,C as Hs}from"./j41djqzgv0g1dtwh.js";function qs({href:t,children:e,onClickTrackingEventName:i,onClick:a}){function r(){i&&A.logEvent(i),a==null||a()}return t?s.jsx($,{as:"link",to:t,onClick:r,size:"large",children:e}):s.jsx($,{onClick:r,size:"large",children:e})}function Ft({gizmo:t}){const e=Ze(t),[i,a]=v.useState(!1),r=H(),o=fe(r,"1855896025");return s.jsxs("div",{className:"flex h-full flex-col",children:[s.jsx(de,{redirectUrl:e}),s.jsxs("div",{className:"flex grow flex-col items-center justify-center p-2",children:[s.jsx(Gs,{gizmo:t,isAnon:!0,children:s.jsxs("div",{className:"mt-7 flex flex-col items-center gap-4",children:[s.jsx(qs,{onClick:()=>Te(r,{callbackUrl:e,skipLoginModal:!1}),children:s.jsx(j,{id:"gizmo.anonLandingPage.login",defaultMessage:"Sign up to chat"})}),s.jsx("div",{className:"text-token-text-tertiary flex gap-2 text-sm whitespace-nowrap",children:o&&s.jsx(s.Fragment,{children:s.jsx("div",{onClick:()=>a(!0),className:"cursor-pointer",children:s.jsx(j,{id:"gizmo.anonLandingPage.report",defaultMessage:"Report illegal content"})})})})]})}),i&&s.jsx(Os,{onClose:()=>a(!1),gizmoId:t.gizmo.id})]})]})}function de({redirectUrl:t,className:e}){const i=H(),a=Ms(i,Ks.signUpCta);return s.jsxs("div",{className:I("flex items-center justify-between px-7 py-4",e),children:[s.jsx(Qs,{}),s.jsx($,{color:"primary",onClick:()=>Te(i,{callbackUrl:t,skipLoginModal:!1}),children:s.jsx(j,S({},a))})]})}function Qs(){return s.jsx(ue,{to:"/",children:s.jsx(es,{className:"h-8 w-8"})})}const Ks=ie({signUpCta:{id:"gizmo.anonLandingPage.signup",defaultMessage:"Sign up"}}),Vs=t=>{var a;const e=re(t),i=ss(t,"690090010");return((a=e==null?void 0:e.isWorkspaceAccount)==null?void 0:a.call(e))&&i.get("enabled",!1)};function Bt(t){"use forget";var T,_,L,N,R,P,E,C,D;const e=q.c(30),{workspaceId:i,limit:a,search:r,categories:o,userIds:l,enabled:n}=t,d=a===void 0?20:a,p=n===void 0?!0:n;let u;e[0]!==o||e[1]!==d||e[2]!==r||e[3]!==l||e[4]!==i?(u=["workspace_gizmos",{workspaceId:i,limit:d,search:r,categories:o,user_ids:l}],e[0]=o,e[1]=d,e[2]=r,e[3]=l,e[4]=i,e[5]=u):u=e[5];const f=p&&i!=null;let x;e[6]!==o||e[7]!==d||e[8]!==r||e[9]!==l||e[10]!==i?(x=async O=>{const{pageParam:G}=O;if(!i)return{gizmos:[],query_continuation:void 0};const F={limit:d};return G!=null&&(F.query_continuation=G.query_continuation),r&&(F.search=r),o&&o.length>0&&(F.categories=o),l&&l.length>0&&(F.user_ids=l),await Ee.safeGet("/workspace-resources/{account_id}/gizmos",{parameters:{path:{account_id:i},query:F}})},e[6]=o,e[7]=d,e[8]=r,e[9]=l,e[10]=i,e[11]=x):x=e[11];let c;e[12]===Symbol.for("react.memo_cache_sentinel")?(c={},e[12]=c):c=e[12];let g;e[13]!==u||e[14]!==f||e[15]!==x?(g={queryKey:u,enabled:f,getNextPageParam:Js,queryFn:x,initialPageParam:c},e[13]=u,e[14]=f,e[15]=x,e[16]=g):g=e[16];const m=Ce(g);let k;e[17]!==((T=m.data)==null?void 0:T.pages)?(k=(L=(_=m.data)==null?void 0:_.pages.flatMap(Ys))!=null?L:[],e[17]=(N=m.data)==null?void 0:N.pages,e[18]=k):k=e[18];const b=k;let w;e[19]!==((R=m.data)==null?void 0:R.pages)?(w=(C=(E=(P=m.data)==null?void 0:P.pages.at(-1))==null?void 0:E.query_continuation)!=null?C:void 0,e[19]=(D=m.data)==null?void 0:D.pages,e[20]=w):w=e[20];const h=w,y=!!h;let z;e[21]!==m||e[22]!==h?(z=()=>h?m.fetchNextPage():Promise.resolve(),e[21]=m,e[22]=h,e[23]=z):z=e[23];let M;return e[24]!==b||e[25]!==m||e[26]!==h||e[27]!==y||e[28]!==z?(M=Q(S({},m),{gizmos:b,queryContinuation:h,hasMore:y,loadMore:z}),e[24]=b,e[25]=m,e[26]=h,e[27]=y,e[28]=z,e[29]=M):M=e[29],M}function Ys(t){return t.gizmos}function Js(t){var e;return{query_continuation:(e=t.query_continuation)!=null?e:void 0}}function $t(t){"use forget";var z,M,T,_,L,N,R;const e=q.c(25),{workspaceId:i,search:a,limit:r,enabled:o}=t,l=r===void 0?50:r,n=o===void 0?!0:o;let d;e[0]!==l||e[1]!==a||e[2]!==i?(d=["workspace_users_infinite",{workspaceId:i,search:a,limit:l}],e[0]=l,e[1]=a,e[2]=i,e[3]=d):d=e[3];const p=n&&!!i;let u;e[4]!==l||e[5]!==a||e[6]!==i?(u=async P=>{var G;const{pageParam:E}=P;if(!i)return{items:[],total:0,limit:l,offset:0};const C=(G=E==null?void 0:E.offset)!=null?G:0,D=await Ee.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:i},query:{offset:C,limit:l,query:a}}});return{items:D.items.map(Zs),total:D.total,limit:l,offset:C}},e[4]=l,e[5]=a,e[6]=i,e[7]=u):u=e[7];let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f={},e[8]=f):f=e[8];let x;e[9]!==d||e[10]!==p||e[11]!==u?(x={queryKey:d,enabled:p,getNextPageParam:et,queryFn:u,initialPageParam:f},e[9]=d,e[10]=p,e[11]=u,e[12]=x):x=e[12];const c=Ce(x);let g;e[13]!==((z=c.data)==null?void 0:z.pages)?(g=(T=(M=c.data)==null?void 0:M.pages.flatMap(Xs))!=null?T:[],e[13]=(_=c.data)==null?void 0:_.pages,e[14]=g):g=e[14];const m=g;let k;e[15]!==((L=c.data)==null?void 0:L.pages)?(k=(N=c.data)==null?void 0:N.pages.at(-1),e[15]=(R=c.data)==null?void 0:R.pages,e[16]=k):k=e[16];const b=k,w=!!b&&b.offset+b.limit<b.total;let h;e[17]!==w||e[18]!==c?(h=()=>w?c.fetchNextPage():Promise.resolve(),e[17]=w,e[18]=c,e[19]=h):h=e[19];let y;return e[20]!==m||e[21]!==w||e[22]!==c||e[23]!==h?(y=Q(S({},c),{users:m,hasMore:w,loadMore:h}),e[20]=m,e[21]=w,e[22]=c,e[23]=h,e[24]=y):y=e[24],y}function Xs(t){return t.items}function Zs(t){var e,i;return{id:t.id,accountUserId:t.account_user_id,name:(e=t.name)!=null?e:void 0,email:(i=t.email)!=null?i:void 0}}function et(t){const e=t.offset+t.limit;if(!(e>=t.total))return{offset:e}}function X({delay:t,animateTap:e=!0,children:i}){return s.jsx(ts.div,{whileTap:{scale:e?.98:void 0},initial:{opacity:0,translateY:5},animate:{opacity:1,translateY:0,transition:{duration:.3,ease:"easeIn",delay:t!=null?t:0}},children:i})}var st=(t=>(t.Enabled="enabled",t.ComingSoon="coming-soon",t))(st||{});function tt({gizmoResource:t}){var r,o;const e=(r=t.gizmo.vanity_metrics)==null?void 0:r.num_conversations_str,i=(o=t.gizmo.share_recipient)!=null?o:Y.Private,a=ds(i);return s.jsxs("div",{children:[t.gizmo.share_recipient!==Y.Private&&e!=null?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pe,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(j,Q(S({},rt.conversationCountStrLabel),{values:{numConvos:e}}))})]}):void 0,s.jsxs("div",{className:"flex items-center gap-1",children:[i===Y.Link||i===Y.Marketplace?s.jsx(ms,{className:"icon-sm shrink-0"}):i===Y.Workspace?s.jsx(Es,{className:"icon-sm shrink-0"}):s.jsx(_s,{className:"icon-sm shrink-0"}),s.jsx("span",{className:"line-clamp-1",children:a})]})]})}function Ht({gizmoResource:t,canRemoveRecent:e}){var d,p,u;const i=H(),a=ae(),{canEdit:r}=as(t),{canDelete:o}=rs(t),l=os(t),n=!!((d=t.gizmo.tags)!=null&&d.includes(V.FirstParty));return s.jsx($e,{href:l?ce(t.gizmo.id):J(i,t),icon:s.jsx(xe,{isFirstParty:n,src:(p=t==null?void 0:t.gizmo.display.profile_picture_url)!=null?p:void 0,className:"h-[42px] w-[42px] shrink-0"}),title:t.gizmo.display.name||ns,isDraft:l,description:(u=t.gizmo.display.description)!=null?u:"",byline:r?s.jsx(tt,{gizmoResource:t}):s.jsx(ge,{gizmo:t}),buttons:s.jsxs(s.Fragment,{children:[r&&s.jsx(oe,{label:s.jsx(j,{id:"gizmo.gpt.grid.EditGPT",defaultMessage:"Edit GPT"}),className:"flex justify-center",side:"top",children:s.jsx("button",{className:"text-token-text-primary rounded-lg px-3 py-2 transition-transform duration-100 ease-in hover:bg-white active:scale-[0.9] dark:bg-transparent dark:hover:bg-gray-700",onClick:()=>{a(ce(t.gizmo.id))},children:s.jsx(Cs,{className:"icon-sm"})})}),s.jsx(at,{gizmoResource:t,canDelete:o,canRemoveRecent:e})]})})}var Ge;const it=_e.div(Ge||(Ge=ne(["flex h-[42px] w-[42px] shrink-0 items-center justify-center rounded-full border border-dashed\n",""])),({$disabled:t})=>t?"":"border-token-border-default bg-token-main-surface-secondary");function qt({type:t}){const e=is(),i=t==="coming-soon";return s.jsxs(oe,{disabled:!i,label:s.jsx(j,{id:"gizmo.gpt.grid.CreateGPTComingSoon",defaultMessage:"GPT creation will be available in the coming weeks"}),triggerAs:null,children:[s.jsx($e,{href:e,disabled:i,icon:s.jsx(it,{$disabled:i,children:s.jsx(We,{className:I("icon-sm",i&&"opacity-30")})}),title:s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(j,{id:"gizmo.gpt.grid.CreateGPT",defaultMessage:"Create a GPT"})}),description:"Customize a version of ChatGPT for a specific purpose",byline:i?s.jsx("div",{className:"flex items-center justify-end",children:s.jsx("div",{className:"flex items-center",children:s.jsx(j,{id:"gizmo.gpt.grid.ComingSoon",defaultMessage:"Coming soon"})})}):void 0}),s.jsx("div",{className:"h-px bg-gray-100 dark:bg-gray-700"})]})}function $e({href:t,icon:e,title:i,isDraft:a=!1,description:r,byline:o,buttons:l,disabled:n,className:d}){const p=I("flex items-center px-2 py-4 rounded-xl",n?"":"hover:bg-token-main-surface-secondary",d),u=s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex grow items-center overflow-hidden md:w-3/5 md:grow-0",children:[e,s.jsxs("div",{className:I("grow overflow-hidden ps-4 pe-9 leading-tight",n?"opacity-50":"hover:cursor-pointer"),children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-semibold",children:i}),a&&s.jsx(oe,{label:s.jsx(j,{id:"gizmo.gpt.grid.Draft",defaultMessage:"Draft"}),className:"flex justify-center",side:"top",children:s.jsx("div",{className:"m-1.5 inline-block h-1.5 w-1.5 rounded-full bg-gray-200 dark:bg-gray-600"})})]}),s.jsx("div",{className:"line-clamp-2 overflow-hidden text-sm break-words text-ellipsis",children:r}),o!=null&&s.jsx("div",{className:"text-token-text-tertiary text-sm text-ellipsis md:hidden",children:o})]})]}),o!=null&&s.jsx("div",{className:"text-token-text-tertiary hidden flex-1 text-sm text-ellipsis md:block",children:o}),l!=null&&s.jsx("div",{onClick:f=>{f.preventDefault()},onPointerDownCapture:f=>{f.stopPropagation()},className:"flex h-9 shrink-0 justify-end gap-2 font-semibold md:w-[100px]",children:l})]});return n?s.jsx(X,{children:s.jsx("span",{className:p,children:u})}):s.jsx(X,{children:s.jsx(ue,{className:p,to:t,children:u})})}function at({gizmoResource:t,canDelete:e,canRemoveRecent:i}){const[a,r]=v.useState(!1),[o,l]=v.useState(!1),n=Xe();return!e&&!i?null:s.jsxs(s.Fragment,{children:[s.jsxs(Re,{side:"top",contentAlign:"end",sideOffset:8,open:o,onOpenChange:d=>l(d),triggerButton:s.jsx("button",{color:"secondary",className:"text-token-text-primary rounded-lg bg-transparent px-3 py-2 duration-100 ease-in hover:bg-white active:scale-[0.9] dark:bg-transparent dark:hover:bg-gray-700",onClick:()=>{l(d=>!d)},children:s.jsx(cs,{className:"icon"})}),children:[e&&s.jsx(te.Item,{color:"danger",onClick:()=>{r(!0)},icon:Ts,children:s.jsx(j,{id:"gizmo.gpt.grid.DeleteGPT",defaultMessage:"Delete GPT"})}),i&&s.jsx(te.Item,{onClick:()=>{ls.removeFromRecent(n,t.gizmo.id)},children:s.jsx(j,{id:"gizmo.gpt.grid.RemoveFromRecent",defaultMessage:"Remove from Recent"})})]}),a&&s.jsx(Bs,{children:s.jsx($s,{gizmoId:t.gizmo.id,onSuccess:()=>{r(!1)},onClose:()=>{r(!1)}})})]})}const rt=ie({conversationCountStrLabel:{id:"gizmo.gpt.grid.conversationCountStrLabel",defaultMessage:"{numConvos} Chats"}});function He({gizmo:t,children:e,onClick:i,onModalOpen:a,onModalClose:r,selectOnly:o,className:l}){const n=H(),d=fe(n,"1825130190"),[p,u]=v.useState(!1);return o?s.jsx("a",{className:I("gizmo-link cursor-pointer",l),href:"#",onClick:f=>{f.preventDefault(),i==null||i(f)},children:e}):d?s.jsxs(s.Fragment,{children:[p&&s.jsx(Fe,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id,onClose:()=>{u(!1),r==null||r()},children:s.jsx(Be,{as:"link",to:J(n,t)})}),s.jsx("a",{className:I("gizmo-link cursor-pointer",l),href:"#",onClick:f=>{f.preventDefault(),i==null||i(f),u(!0),a==null||a()},children:e})]}):s.jsx(ue,{to:J(n,t),className:I("gizmo-link",l),target:"_blank",onClick:i,children:e})}function ot(t){"use forget";const e=q.c(28),{placeholder:i,effectiveRole:a,onSelect:r,popoverClassName:o}=t,l=Z(),[n,d]=v.useState("ALL"),[p,u]=v.useState(""),[f,x]=v.useState(""),[c,g]=v.useState(null),m=H();let k;if(e[0]!==m){const C=re(m);k=C==null?void 0:C.isWorkspaceAccount(),e[0]=m,e[1]=k}else k=e[1];const b=k,w=b!==void 0&&b;let h,y;e[2]!==p?(h=()=>{const C=setTimeout(()=>{x(p)},250);return()=>{clearTimeout(C)}},y=[p],e[2]=p,e[3]=h,e[4]=y):(h=e[3],y=e[4]),v.useEffect(h,y);const z=H(),M=ae();let T;e[5]!==r||e[6]!==M||e[7]!==z?(T=C=>{if(r){r(C);return}if(!fe(z,"1825130190")){const O=J(z,C);M(O);return}g(C)},e[5]=r,e[6]=M,e[7]=z,e[8]=T):T=e[8];const _=T;let L;e[9]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(us,{className:"text-token-text-tertiary icon absolute start-5 top-1/2 z-30 -translate-y-1/2"}),e[9]=L):L=e[9];let N;e[10]!==l||e[11]!==i||e[12]!==o||e[13]!==p?(N=(C,D)=>s.jsxs(Hs,{label:i!=null?i:l.formatMessage(U.discoverySearch),inputClassName:"bg-token-main-surface-primary! py-4 px-3 rounded-xl font-normal text-base! ps-12",popoverClassName:I("-top-3! border-token-border-default! rounded-xl",o!=null?o:"bg-token-main-surface-primary!"),className:"border-token-border-default! rounded-xl! p-0! ring-0!",name:"search",inputValue:p,onInputChange:u,onTabChange:O=>d(O==="WORKSPACE"?"WORKSPACE":"ALL"),suggestions:C,RenderTab:lt,children:[D,D==null&&s.jsx("div",{className:"w-full py-4",children:s.jsx(ct,{})})]}),e[10]=l,e[11]=i,e[12]=o,e[13]=p,e[14]=N):N=e[14];let R;e[15]!==n||e[16]!==f||e[17]!==a||e[18]!==_||e[19]!==w||e[20]!==N?(R=s.jsx(dt,{activeTab:n,query:f,effectiveRole:a,setPopoverForceOpen:nt,onSelect:_,showWorkspaceResults:w,renderCombobox:N}),e[15]=n,e[16]=f,e[17]=a,e[18]=_,e[19]=w,e[20]=N,e[21]=R):R=e[21];let P;e[22]!==c||e[23]!==z?(P=c&&s.jsx(Fe,{gizmoId:c.gizmo.id,creatorId:c.gizmo.author.user_id,onClose:()=>{g(null)},children:s.jsx(Be,{as:"link",to:J(z,c)})}),e[22]=c,e[23]=z,e[24]=P):P=e[24];let E;return e[25]!==R||e[26]!==P?(E=s.jsxs("div",{className:"relative z-0",children:[L,R,P]}),e[25]=R,e[26]=P,e[27]=E):E=e[27],E}function nt(){}function lt(t){"use forget";const e=q.c(4),{tab:i}=t,a=De();if(i==="ALL"){let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(j,S({},U.discoveryAllResultsHeader)),e[0]=r):r=e[0],r}if(i==="WORKSPACE"){let r;return e[1]!==a?(r=s.jsx(j,Q(S({},U.discoveryWorkspaceResultsHeader),{values:{workspaceName:a}})),e[1]=a,e[2]=r):r=e[2],r}if(i==="discoverySearchRecentlyUsed"){let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(j,S({},U.discoverySearchRecentlyUsed)),e[3]=r):r=e[3],r}return i}function ct(){"use forget";const t=q.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("div",{className:"flex items-center justify-center py-1",children:s.jsx(Ae,{})}),t[0]=e):e=t[0],e}function dt(t){"use forget";var T;const e=q.c(20),{activeTab:i,query:a,effectiveRole:r,setPopoverForceOpen:o,showWorkspaceResults:l,onSelect:n,renderCombobox:d}=t;let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[0]=p):p=e[0],v.useEffect(ft,p);const{data:u,isLoading:f}=fs(a),{data:x,isLoading:c}=gs(a,l);let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g={cutId:"recent",limit:3},e[1]=g):g=e[1];const{data:m,isLoading:k}=Le(g),b=u==null?void 0:u.items,w=u==null?void 0:u.cursor,h=x==null?void 0:x.items,y=x==null?void 0:x.cursor;let z;e[2]!==(m==null?void 0:m.pages)?(z=(T=m==null?void 0:m.pages.flatMap(mt))!=null?T:[],e[2]=m==null?void 0:m.pages,e[3]=z):z=e[3];let M;return e[4]!==i||e[5]!==r||e[6]!==k||e[7]!==f||e[8]!==c||e[9]!==n||e[10]!==a||e[11]!==d||e[12]!==o||e[13]!==l||e[14]!==b||e[15]!==w||e[16]!==h||e[17]!==y||e[18]!==z?(M=s.jsx(gt,{debouncedQuery:a,searchResults:b,isLoadingSearch:f,searchResultsCursor:w,showWorkspaceResults:l,workspaceSearchResults:h,workspaceSearchResultsCursor:y,isLoadingWorkspaceSearch:c,isLoadingRecent:k,recent:z,effectiveRole:r,setPopoverForceOpen:o,onSelect:n,activeTab:i,renderCombobox:d}),e[4]=i,e[5]=r,e[6]=k,e[7]=f,e[8]=c,e[9]=n,e[10]=a,e[11]=d,e[12]=o,e[13]=l,e[14]=b,e[15]=w,e[16]=h,e[17]=y,e[18]=z,e[19]=M):M=e[19],M}function mt(t){return t.list.items.map(ut)}function ut(t){return t.resource}function ft(){A.logEvent("Search Start")}function gt(t){"use forget";const e=q.c(25),{activeTab:i,debouncedQuery:a,searchResults:r,isLoadingSearch:o,searchResultsCursor:l,showWorkspaceResults:n,workspaceSearchResults:d,workspaceSearchResultsCursor:p,isLoadingWorkspaceSearch:u,recent:f,isLoadingRecent:x,effectiveRole:c,setPopoverForceOpen:g,onSelect:m,renderCombobox:k}=t;let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=Ne(),e[0]=b):b=e[0];const w=v.useRef(b);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[1]=h):h=e[1],v.useEffect(xt,h);let y,z;e[2]!==a||e[3]!==o||e[4]!==r?(y=()=>{!o&&r&&(w.current=Ne(),r.length>0?Promise.all(r.map((_,L)=>{A.logEvent("Search Display Result",{search_id:w.current,gizmo_id:_.gizmo.id,position:L,query:a})})):A.logEvent("Search No Results",{query:a}))},z=[r,o,a],e[2]=a,e[3]=o,e[4]=r,e[5]=y,e[6]=z):(y=e[5],z=e[6]),v.useEffect(y,z);let M;e[7]!==f?(M=f!=null?f:[],e[7]=f,e[8]=M):M=e[8];let T;return e[9]!==i||e[10]!==a||e[11]!==c||e[12]!==x||e[13]!==o||e[14]!==u||e[15]!==m||e[16]!==k||e[17]!==r||e[18]!==l||e[19]!==g||e[20]!==n||e[21]!==M||e[22]!==d||e[23]!==p?(T=s.jsx(pt,{query:a,activeTab:i,searchIdRef:w,searchResults:r,searchResultsCursor:l,isLoadingSearch:o,showWorkspaceResults:n,workspaceSearchResults:d,workspaceSearchResultsCursor:p,isLoadingWorkspaceSearch:u,isLoadingRecent:x,recentSearchResults:M,setPopoverForceOpen:g,effectiveRole:c,onSelect:m,renderCombobox:k}),e[9]=i,e[10]=a,e[11]=c,e[12]=x,e[13]=o,e[14]=u,e[15]=m,e[16]=k,e[17]=r,e[18]=l,e[19]=g,e[20]=n,e[21]=M,e[22]=d,e[23]=p,e[24]=T):T=e[24],T}function xt(){A.logEvent("Search Start")}function le(t){"use forget";const e=q.c(6),{children:i,onClick:a,isSelected:r,isClickable:o}=t,l="text-token-text-tertiary px-3 pb-2 text-xs ".concat(r?"border-b-2 font-bold":"font-semibold"," ").concat(o?"cursor-pointer":"");let n;e[0]!==a?(n=()=>{a==null||a()},e[0]=a,e[1]=n):n=e[1];let d;return e[2]!==i||e[3]!==l||e[4]!==n?(d=s.jsx("div",{className:l,onClick:n,children:i}),e[2]=i,e[3]=l,e[4]=n,e[5]=d):d=e[5],d}function pt({query:t,searchIdRef:e,isLoadingRecent:i,searchResults:a=[],searchResultsCursor:r,isLoadingSearch:o,showWorkspaceResults:l,workspaceSearchResults:n=[],workspaceSearchResultsCursor:d,isLoadingWorkspaceSearch:p,recentSearchResults:u,setPopoverForceOpen:f,activeTab:x,effectiveRole:c,onSelect:g,renderCombobox:m}){"use no forget";var D,O;const k=xs(),[b,w]=v.useState(!1),h=ps(t,b,x==="WORKSPACE",x==="WORKSPACE"?d:r),{data:y,hasNextPage:z,fetchNextPage:M,isFetchingNextPage:T,isError:_}=Q(S({},h),{data:(O=(D=h.data)==null?void 0:D.pages.flatMap(G=>G.items.map(F=>F)))!=null?O:[]}),[L,N]=v.useState(y.length),R=v.useRef(null);v.useEffect(()=>{var G;y.length>L&&(N(y.length),(G=R.current)==null||G.scrollIntoView({behavior:"smooth",block:"nearest"}))},[y.length,L]);const P=(G,F)=>{var ye,ve;const he=(ye=G.gizmo.vanity_metrics)==null?void 0:ye.num_conversations_str,ee=((ve=G.gizmo.tags)==null?void 0:ve.includes(V.WorkspaceDisabled))&&c!==B.OWNER;return{id:G.gizmo.id,className:I("group flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",ee&&"opacity-50 hover:opacity-100"),focusedClassName:"bg-gray-50 dark:bg-white/10",onClick:()=>{g?g(G):A.logEvent("Store Click Gizmo",{search_id:e.current,gizmo_id:G.gizmo.id,position:F,query:t,section:"search"})},children:s.jsx(ht,{resource:G,grayedOut:ee!=null?ee:!1,isScreenSm:k,numConvos:he})}};if(t===""&&u&&u.length>0)return m({discoverySearchRecentlyUsed:u.map(P)},null);if(t===""&&i)return m([],null);if(t==="")return m([],s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(j,S({},U.discoverySearchRecentlyUsedEmpty))}));if(t!==""&&!o&&x==="ALL"&&(a==null||a.length===0))return m([],s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(j,S({},U.discoveryNoResultsSearch))}));if(t!==""&&!p&&x==="WORKSPACE"&&(n==null||n.length===0))return m([],s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(j,S({},U.discoveryNoResultsSearch))}));if(l){if(t!==""&&!o&&!p&&(!a||a.length===0)&&(!n||n.length===0))return m([],s.jsx("div",{className:"mx-2",children:s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(j,S({},U.discoveryNoResultsSearch))})}))}else{if(o)return m([],null);if(t!==""&&!o&&(!a||a.length===0))return m([],s.jsx("div",{className:"mx-2",children:s.jsx(le,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(j,S({},U.discoveryNoResultsSearch))})}))}let E=[];if(a){const G=a.map(P);E=[...E,...G]}if(a&&y){const G=y.map(P);E=[...E,...G]}if((!b&&y.length===0||z||T||_)&&r!=null){const G={id:"all-load-more-button",className:"",onClick:()=>{w(!0),M(),f==null||f(!0)},children:s.jsx($,{color:_?"danger-outline":"secondary",onClick:()=>{},loading:T,fullWidth:!0,className:"mt-2 md:mt-3",children:_?s.jsx(j,S({},U.discoveryLoadMoreError)):s.jsx(j,S({},U.discoveryLoadMore))})};E=[...E,G]}const C={ALL:E};if(n){const G=n.map(P);C.WORKSPACE=G}if(n&&y){const G=y.map(P);C.WORKSPACE=[...C.WORKSPACE,...G]}if((!b&&y.length===0||z||T||_)&&d!=null){const G={id:"workspace-load-more-button",className:"",onClick:()=>{w(!0),M(),f==null||f(!0)},children:s.jsx($,{color:_?"danger-outline":"secondary",onClick:()=>{},fullWidth:!0,className:"mt-2 md:mt-3",loading:T,children:_?s.jsx(j,S({},U.discoveryLoadMoreError)):s.jsx(j,S({},U.discoveryLoadMore))})};C.WORKSPACE=[...C.WORKSPACE,G]}return m(C,null)}function ht(t){"use forget";var h,y;const e=q.c(27),{resource:i,grayedOut:a,isScreenSm:r,numConvos:o}=t;let l;e[0]!==i.gizmo.tags?(l=(h=i.gizmo.tags)==null?void 0:h.includes(V.FirstParty),e[0]=i.gizmo.tags,e[1]=l):l=e[1];const n=!!l,d=(y=i.gizmo.display.profile_picture_url)!=null?y:void 0,p=a&&"grayscale group-hover:grayscale-0";let u;e[2]!==p?(u=I("h-8 w-8 shrink-0",p),e[2]=p,e[3]=u):u=e[3];let f;e[4]!==n||e[5]!==d||e[6]!==u?(f=s.jsx(xe,{isFirstParty:n,src:d,className:u}),e[4]=n,e[5]=d,e[6]=u,e[7]=f):f=e[7];let x;e[8]!==i.gizmo.display.name?(x=s.jsx("div",{className:"flex flex-row items-end space-x-2",children:s.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:i.gizmo.display.name})}),e[8]=i.gizmo.display.name,e[9]=x):x=e[9];let c;e[10]!==r||e[11]!==i.gizmo.display.description?(c=r&&s.jsx("span",{className:"text-token-text-tertiary max-w-md truncate text-xs",children:i.gizmo.display.description}),e[10]=r,e[11]=i.gizmo.display.description,e[12]=c):c=e[12];let g;e[13]!==i?(g=s.jsx("div",{className:"-mt-1",children:s.jsx(ge,{gizmo:i,className:"text-token-text-tertiary truncate text-xs",hideLink:!0})}),e[13]=i,e[14]=g):g=e[14];let m;e[15]!==o?(m=o&&s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 font-semibold",style:{marginTop:"-2px"},children:[s.jsx(pe,{className:"icon-xs"}),s.jsx("span",{className:"line-clamp-1 text-xs",children:o})]}),e[15]=o,e[16]=m):m=e[16];let k;e[17]!==m||e[18]!==g?(k=s.jsxs("div",{className:"flex items-center gap-2",children:[g,m]}),e[17]=m,e[18]=g,e[19]=k):k=e[19];let b;e[20]!==k||e[21]!==x||e[22]!==c?(b=s.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[x,c,k]}),e[20]=k,e[21]=x,e[22]=c,e[23]=b):b=e[23];let w;return e[24]!==b||e[25]!==f?(w=s.jsxs(s.Fragment,{children:[f,b]}),e[24]=b,e[25]=f,e[26]=w):w=e[26],w}const U=ie({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}});var Me;const qe=_e.div(Me||(Me=ne(["grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5"]))),me="gpt_store";function yt(t,e){e.scrollLeft>t.offsetLeft?e.scrollBy({left:t.offsetLeft-e.scrollLeft-20,behavior:"smooth"}):e.scrollLeft+e.clientWidth<t.offsetLeft+t.clientWidth&&e.scrollBy({left:t.offsetLeft+t.clientWidth-e.clientWidth-e.scrollLeft+20,behavior:"smooth"})}function Qt({anon:t}){const[e]=v.useState(()=>ys.getItem(vs.GizmoDiscoveryLocale)),i=Ie(),[a,r]=v.useState(!1),o=i!=null&&i.isOwnerOfAccount()&&!a?B.OWNER:B.STANDARD;return s.jsx(vt,{anon:t,currAccount:i,requestedLocale:e,effectiveRole:o,setPretendStandardUser:r})}function vt({anon:t,currAccount:e,requestedLocale:i,effectiveRole:a,setPretendStandardUser:r}){const[o,l]=v.useState(void 0),n=!!t||(e==null?void 0:e.isPersonalAccount())&&!0,{data:d,isLoading:p,isError:u}=js(i,n);v.useEffect(()=>{d&&l({locale:d.locale,workspace_filtered:d.workspace_filtered,cuts:d.cuts.map(x=>({info:x.info,list:{items:x.list.items.map(c=>c.resource),cursor:x.list.cursor}}))})},[d]);const f=(...x)=>{var g,m;const c=Le(...x);return Q(S({},c),{data:(m=(g=c.data)==null?void 0:g.pages.flatMap(k=>k.list.items.map(b=>b.resource)))!=null?m:[]})};return s.jsx(bt,{anon:t,discoveryLanding:o,isLoading:p,isError:u,effectiveRole:a,setPretendStandardUser:r,useFetchMoreQuery:f})}function jt(t,e){if(t)return s.jsx(se,{type:"info",children:s.jsx(j,S({},W.discoveryResidencyRestriction))});switch(e){case"allow_none":return s.jsx(se,{type:"info",children:s.jsx(j,S({},W.discoveryThirdPartyDisabled))});case"allow_specific":return s.jsx(se,{type:"info",children:s.jsx(j,S({},W.discoveryThirdPartySpecific))});default:return null}}function bt({anon:t,discoveryLanding:e,isLoading:i,isError:a,effectiveRole:r,setPretendStandardUser:o,useFetchMoreQuery:l}){var T,_,L;const n=Ie(),d=ks(n==null?void 0:n.getWorkspaceId()),p=v.useRef({}),[u,f]=v.useState({}),x=H(),c=Vs(x),g=v.useMemo(()=>ws(Ns(e==null?void 0:e.cuts.map(N=>({id:N.info.id,name:N.info.display_group}))),"name"),[e]),m=v.useRef(null),k=(T=g.find(N=>u[N.id]))!=null?T:g[0];v.useEffect(()=>{const N=p.current,R=new IntersectionObserver(P=>{P.forEach(E=>{for(const C of g){const D=N[C.id];D!=null&&E.target===D&&f(O=>Q(S({},O),{[C.id]:E.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(N).forEach(P=>{P!=null&&R.observe(P)}),()=>{Object.values(N).forEach(P=>{P!=null&&R.unobserve(P)})}},[p,g]);const b=v.useRef(null),w=s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:a?s.jsx(se,{type:"danger",children:s.jsx(j,S({},W.discoveryError))}):s.jsx(Ae,{})}),h=(n==null?void 0:n.data.residencyRegion)!=null&&n.data.residencyRegion!=="no_constraint"&&n.data.residencyRegion!=="us",y=(_=d.data)==null?void 0:_.allow_third_party_gpts,z=jt(h,y),M=s.jsxs("div",{className:"screen-arch:w-full mx-auto max-w-3xl overflow-x-clip px-4",children:[s.jsx(kt,{}),s.jsxs("div",{className:"bg-token-bg-primary sticky top-14 z-30 -mt-2 mb-12 flex flex-col gap-6 pt-2 [@media(min-width:1560px)]:top-0",children:[!t&&s.jsx(ot,{}),s.jsx("div",{ref:m,className:"scroll-mt-28"}),z,g.length>0&&s.jsx(wt,{displayGroups:g,currentDisplayGroup:k,scrollToDisplayGroup:N=>{var P;((P=p.current[N.id])!=null?P:m.current).scrollIntoView({behavior:"smooth",block:"start"})}})]}),(L=e==null?void 0:e.cuts.map(N=>{var R;return N.info.display_type==="featured"?s.jsx(Pt,{info:N.info,items:N.list.items,ref:P=>{P!=null&&(p.current[N.info.id]=P)},effectiveRole:r},N.info.id):s.jsx(Mt,{info:N.info,items:N.list.items,cursor:(R=N.list.cursor)!=null?R:void 0,ref:P=>{P!=null&&(p.current[N.info.id]=P)},anon:t,effectiveRole:r,useFetchMoreQuery:l},N.info.id)}))!=null?L:[]]});return i||a?s.jsxs(s.Fragment,{children:[t?s.jsx(de,{redirectUrl:Se(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):c?null:s.jsx(ze,{}),w]}):s.jsxs("div",{ref:b,className:"h-full overflow-y-auto",children:[t?s.jsx(de,{redirectUrl:Se(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsxs(s.Fragment,{children:[(n==null?void 0:n.isWorkspaceAccount())&&s.jsx(St,{role:r,onPretendStandardUser:N=>{o(N)}}),!c&&s.jsx(ze,{})]}),M,(e==null?void 0:e.workspace_filtered)&&!(n!=null&&n.isOwnerOfAccount())&&s.jsx(Nt,{})]})}function kt(){return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:s.jsx(j,S({},W.discoverySplashHeader))}),s.jsx("div",{className:"text-token-text-secondary mx-auto w-full text-center text-sm md:text-lg md:leading-tight",children:s.jsx(j,S({},W.discoverySplashDescription))})]})}function wt({displayGroups:t,currentDisplayGroup:e,scrollToDisplayGroup:i}){const a=v.useRef(null),r=Z(),o=(...c)=>r.formatMessage(...c),l=v.useRef({}),[n,d]=v.useState(!1);v.useEffect(()=>{if(n||e==null)return;const g=l.current[e.id];if(g==null)return;const m=a.current;m!=null&&yt(g,m)},[e,n]);const[p,u]=v.useState(!1),[f,x]=v.useState(!1);return v.useEffect(()=>{const c=a.current,g=()=>{c!=null&&(u(c.scrollLeft>0),x(c.scrollLeft+c.clientWidth<c.scrollWidth))};return c==null||c.addEventListener("scroll",g),window.addEventListener("resize",g),g(),()=>{c==null||c.removeEventListener("scroll",g),window.removeEventListener("resize",g)}},[a]),s.jsxs("div",{className:"bg-token-main-surface-primary sticky top-14 z-10 -ms-4 w-screen py-2 text-sm md:ms-0 md:w-full md:pb-0",children:[p&&s.jsx("div",{className:"absolute start-0 top-2 hidden h-full items-end bg-linear-to-r from-white from-50% to-transparent pe-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{a.current!=null&&a.current.scrollBy({left:-400,behavior:"smooth"})},children:s.jsx(Ss,{className:"icon-sm"})})}),s.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:a,children:t.map(c=>s.jsx("div",{className:I("md:text-token-text-primary cursor-pointer scroll-mx-5 rounded-3xl px-3 py-2 whitespace-nowrap select-none first:ms-4 last:me-4 md:bg-transparent md:px-2 md:first:ms-0 md:last:me-0",c.id===(e==null?void 0:e.id)?"border-token-text-primary text-token-main-surface-primary bg-black md:rounded-none md:border-b-2 dark:bg-gray-100 dark:md:bg-transparent":"bg-token-main-surface-secondary hover:text-token-text-primary md:text-token-text-tertiary hover:bg-gray-100 md:rounded-lg md:hover:bg-gray-50 dark:hover:bg-white/20 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{d(!0),i(c),setTimeout(()=>{d(!1)},1e3),A.logEvent("Store Click Category",{category:c.id})},ref:g=>{g!=null&&(l.current[c.id]=g)},children:o({id:"gizmo.categoryName.".concat(c.name),defaultMessage:c.name,description:"store category"})},c.id))}),f&&s.jsx("div",{className:"absolute end-0 top-2 hidden h-full bg-linear-to-l from-white from-50% to-transparent ps-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{a.current!=null&&a.current.scrollBy({left:400,behavior:"smooth"})},children:s.jsx(zs,{className:"icon-sm"})})})]})}function Nt(){const t=Z(),e=De(),i=Ps();return s.jsxs("div",{className:I("bg-token-main-surface-secondary text-token-text-secondary screen-arch:static fixed bottom-0 flex w-full items-center justify-center gap-2 p-3 text-sm",i&&"md:w-[calc(100%-16rem)]"),children:[s.jsx(Oe,{className:"icon-sm"}),t.formatMessage(W.discoveryThirdPartyGPTsDisabled,{workspaceName:e})]})}function St({role:t,onPretendStandardUser:e}){const i=Z();return Ds()?s.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[s.jsx(Oe,{className:"icon-sm"}),s.jsx(j,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:r=>s.jsxs(K.Root,{defaultValue:t,onValueChange:o=>{e(o===B.STANDARD)},children:[s.jsxs(K.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[s.jsx(oe,{disabled:t!==B.OWNER,label:i.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",triggerAs:null,children:s.jsx(K.Value,{})}),s.jsx(K.Icon,{})]}),s.jsx(K.Portal,{children:s.jsxs(K.Content,{children:[s.jsx(K.Item,{value:B.OWNER,children:s.jsx(j,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),s.jsx(K.Item,{value:B.STANDARD,children:s.jsx(j,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function ze({isMobile:t=!1,tabButtons:e,hideTitle:i=!1}){var x;const a=ce(),r=ae(),o=Z(),{canCreate:l,isLoading:n}=bs(),d=H(),p=re(d),u=(x=p==null?void 0:p.planType)!=null?x:"unknown",f=()=>{l?(A.logEvent("Store Create Gizmo"),r(a)):(A.logUpsellGetPlusButtonClicked({location:me,type:"create_gpt",plan_type:u}),Ue(r,"Gizmo Discovery page upsell"))};return s.jsx(s.Fragment,{children:s.jsxs(Rs,{className:I("z-30 flex w-full items-center justify-between whitespace-nowrap",t&&"ps-2 pe-0",!t&&"max-md:hidden",e&&"border-token-border-soft border-b"),children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"hidden md:flex",children:s.jsx(Ws,{})}),e?s.jsx("div",{className:"flex items-center gap-2 px-2",children:e}):!i&&s.jsx("h1",{className:"px-2 text-lg font-normal select-none [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)]",children:s.jsx(j,{id:"h8AzQb",defaultMessage:"Explore GPTs"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[l&&s.jsx($,{color:"ghost",onClick:()=>{r("/gpts/mine"),A.logEvent("Store My Gizmos")},children:s.jsx(j,S({},W.discoveryMyGPTs))}),s.jsx(zt,{canCreateGPTs:l,loadingPermissions:n,createUrl:a})]}),s.jsx("div",{className:"md:hidden",children:s.jsxs(Re,{contentAlign:"end",triggerButton:s.jsx(Ls,{"aria-label":o.formatMessage({id:"pdxBIm",defaultMessage:"Open actions menu"})}),children:[l&&s.jsx(te.Item,{onClick:()=>{r("/gpts/mine"),A.logEvent("Store My Gizmos")},children:s.jsx(j,S({},W.discoveryMyGPTs))}),s.jsx(te.Item,{onClick:f,children:s.jsx(j,S({},W.discoveryCreateGPT))})]})}),s.jsx("div",{className:"hidden md:block",children:s.jsx(Us,{})})]})]})})}const zt=({canCreateGPTs:t,loadingPermissions:e,createUrl:i})=>{var w;const[a,r]=v.useState(!1),o=v.useRef(void 0),l=As(),n=H(),d=re(n),p=d==null?void 0:d.isFree(),u=d==null?void 0:d.isWorkspaceAccount(),f=(w=d==null?void 0:d.planType)!=null?w:"unknown",x="create_gpt",c=()=>{t||(A.logPopoverHover({location:me,type:x,plan_type:f}),clearTimeout(o.current),r(!0))},g=()=>{t||(o.current=l(function(){r(!1)},300))},m=ae(),k=()=>{A.logUpsellGetPlusButtonClicked({location:me,type:x,plan_type:f}),Ue(m,"Gizmo Discovery page upsell")},b=t?(()=>A.logEvent("Store Create Gizmo")):h=>h.preventDefault();return s.jsxs("div",{onMouseEnter:c,onMouseLeave:g,className:"screen-arch:flex screen-arch:items-center relative",children:[s.jsx($,{color:"primary",disabled:!t,visuallyDisabled:!t,onClick:b,as:"link",to:i,icon:We,"data-testid":"create-gpt-discovery-button",loading:e,children:s.jsx(j,S({},W.discoveryCreateGPT))}),!t&&a&&s.jsx("div",{className:"border-token-border-default bg-token-main-surface-primary screen-arch:top-12 absolute end-0 z-10 mt-2 w-64 rounded-lg border p-3 text-sm shadow-lg",children:p?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(j,S({},W.createGPTUpsell))}),s.jsx($,{color:"secondary",onClick:k,size:"small",children:s.jsx(j,S({},Is(n)))})]}):u?s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(j,S({},W.createGPTDisabledByAdmin))}):null})]})},Pt=v.forwardRef(function({info:e,items:i,effectiveRole:a},r){return s.jsx(Qe,{title:e.title,description:e.description,ref:r,children:s.jsx(qe,{children:i.map((o,l)=>s.jsx(Gt,{resource:o,effectiveRole:a},"".concat(l,"-").concat(o.gizmo.id)))})})});function Gt({resource:t,effectiveRole:e}){var r,o,l,n;const i=(r=t.gizmo.vanity_metrics)==null?void 0:r.num_conversations_str,a=((o=t.gizmo.tags)==null?void 0:o.includes(V.WorkspaceDisabled))&&e!==B.OWNER;return s.jsx(X,{children:s.jsxs(He,{gizmo:t,className:I("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 md:h-32 lg:h-36 dark:bg-gray-700 dark:hover:bg-white/10",a&&"opacity-50 hover:opacity-100"),onClick:()=>{A.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,section:"featured"})},children:[s.jsx(xe,{isFirstParty:!!((l=t.gizmo.tags)!=null&&l.includes(V.FirstParty)),src:(n=t.gizmo.display.profile_picture_url)!=null?n:void 0,className:I("h-16 w-16 shrink-0 md:h-24 md:w-24",a&&"grayscale group-hover:grayscale-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:t.gizmo.display.name}),s.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:t.gizmo.display.description}),s.jsxs("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 flex justify-start gap-1 text-xs",children:[s.jsx(ge,{gizmo:t,className:"text-xs",hideLink:!0}),i&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"•"}),s.jsx(pe,{className:"mt-0.5 h-3 w-3"}),i]})]})]})]})})}const Mt=v.forwardRef(function({info:e,items:i,cursor:a,anon:r,effectiveRole:o,useFetchMoreQuery:l},n){const[d,p]=v.useState(i.length===0),{data:u,hasNextPage:f,fetchNextPage:x,isFetchingNextPage:c,isError:g}=l({cutId:e.id,locale:e.locale,limit:6,cursor:a,enabled:d});v.useEffect(()=>{i.length===0&&x()},[x,i.length]);const[m,k]=v.useState(u.length),b=v.useRef(null),w=hs(.1);return v.useEffect(()=>{var h;u.length>m&&(k(u.length),(h=b.current)==null||h.scrollIntoView({behavior:"smooth",block:"nearest"}))},[u.length,m]),s.jsxs(Qe,{title:e.title,description:e.description,ref:n,children:[s.jsxs(qe,{children:[i.map((h,y)=>s.jsx(Pe,{resource:h,rank:y+1,cutId:e.id,effectiveRole:o},y)),u.map((h,y)=>s.jsx(Pe,{resource:h,rank:i.length+y+1,cutId:e.id,delay:w(y-m,u.length-m),effectiveRole:o},y))]}),(!d||f||c||g)&&!r&&a!=null&&s.jsx($,{color:g?"danger-outline":"secondary",onClick:()=>{p(!0),A.logEvent("Store Load More",{section:e.id}),x()},fullWidth:!0,className:"mt-2 md:mt-3",loading:c,children:g?s.jsx(j,S({},W.discoveryLoadMoreError)):s.jsx(j,S({},W.discoveryLoadMore))}),s.jsx("div",{ref:b})]})});function Pe({resource:t,rank:e,cutId:i,delay:a,effectiveRole:r}){var n,d;const o=((n=t.gizmo.tags)==null?void 0:n.includes(V.WorkspaceDisabled))&&r!==B.OWNER,l=(d=t.gizmo.tags)==null?void 0:d.includes(V.FirstParty);return s.jsx(X,{delay:a,children:s.jsxs(He,{gizmo:t,className:I("group hover:bg-token-main-surface-secondary flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",o&&"opacity-50 hover:opacity-100"),onClick:()=>{A.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,position:e,section:l?"first_party":i})},children:[s.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:e}),s.jsx(Fs,{resource:t,grayedOut:o})]},t.gizmo.id)})}const Qe=v.forwardRef(function({title:e,description:i,className:a,children:r},o){return s.jsxs("div",{ref:o,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[s.jsxs(X,{animateTap:!1,children:[s.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:e}),i&&s.jsx("div",{className:"text-token-text-tertiary text-sm md:text-base",children:i})]}),s.jsx("div",{className:I("mt-4 mb-10",a),children:r})]})}),W=ie({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTDisabledByAdmin:{id:"bOPXXW",defaultMessage:"Your admin has disabled the ability to create GPTs."},discoveryResidencyRestriction:{id:"gizmo.discovery.residencyRestriction",defaultMessage:"To comply with data residency requirements, only GPTs created within your workspace are accessible. All third-party GPTs are not available."},discoveryThirdPartyDisabled:{id:"gizmo.discovery.thirdPartyDisabled",defaultMessage:"Your admin has disabled all third-party GPTs. Only workspace GPTs are available."},discoveryThirdPartySpecific:{id:"gizmo.discovery.thirdPartySpecific",defaultMessage:"Your admin has disabled most third-party GPTs, except for specific ones that have been explicitly approved. Workspace GPTs are available."}});export{qt as C,ze as G,ot as a,st as b,Ht as c,Bt as d,He as e,Qt as f,Ft as g,qs as h,Vs as i,$t as u};
//# sourceMappingURL=brnvemwtsabf6tf2.js.map
