import{c as ee,e as te,r as q,j as i}from"./fg33krlcm0qyi6yw.js";import{i as oe,P as se}from"./gu5ca6zbhbrzb20i.js";import{d as re,mR as ie,sy as ne,M as le,C as ae}from"./mtk1qztvnb31pw5r.js";import{b as me,P as A}from"./hie92tcr1tc04u0h.js";import{fX as X}from"./k65njl5wlgspihfr.js";import{g as pe}from"./n0j63kuyzhwawzvp.js";import"./jwm2780gzkkhdmn4.js";import"./ia54sddtrl9qa2wj.js";import"./cdscbhv4xu1gie74.js";import"./j6c7t6fq2e2dzq0l.js";import"./uwm5r01je8eaqgfc.js";import"./ir9gt1ho5jxrc5j1.js";import"./jaya7jppqn559p04.js";import"./mh627gt08lvdeswk.js";import"./k43gn7pl526u53kc.js";import"./jdzosouyvpzu0tpb.js";import"./o4kivb8wp4536409.js";import"./nq1hpdu2db6kh8n1.js";import"./mr025ud04jb4rh0r.js";import"./dcp7peq4y6a4kabz.js";import"./l6gg4oal15ycpbhj.js";import"./27egyxvdbhiyko0z.js";import"./he7oe7s4xa3cph5y.js";import"./gy1lpvuoewmzh42c.js";import"./jed1ux7qibe55pmj.js";import"./h1em0bjkpkjv8ykw.js";import"./nfccle6oyncifphl.js";import"./hu1bt0oauegdhua6.js";import"./ojve869uwykk95at.js";import"./ly75bs3d14n5v622.js";import"./e4epv5uv3mte9vwk.js";import"./h7j5jaik108ahib8.js";import"./cu8wmvebhh39ned9.js";import"./mwvbcixk8j7xayed.js";import"./dy5lfx8pblnkst90.js";import"./fwtgnu9jfrrdfrmw.js";import"./jamwnn6d0jz74foj.js";import"./oa3pp0k35b2ppxx3.js";import"./ciyotrhew4275t06.js";import"./ojlr534s5rpslkxs.js";import"./i343cenm2z0sru19.js";import"./khjleze1r7lyk9e0.js";import"./l79tw55p1ybii0aj.js";import"./jawullnjvz8da20g.js";import"./c2pd1td4qqo2eofo.js";import"./b9zbambfgbao1jch.js";import"./bgx9m29b5moow7ak.js";import"./exbyaee45o0onuld.js";import"./ifr23omr9d78ntp2.js";import"./hcn3kohxpjzaoxwc.js";import"./iwjq7ihlx67l3ajk.js";import"./ft3sidzsg2kspvj9.js";import"./h0pbwkfesoibvhzi.js";const ce=l=>{if(typeof l!="object"||l===null||typeof l.session_id!="string")return!1;const e=l.factor;return!(typeof e!="object"||e===null||typeof e.id!="string")};function ct(l){"use forget";const e=ee.c(63),{onClose:a,onOtpRequested:W,renderAsSheet:Y}=l,t=te(),[s,$]=q.useState(""),[J,Q]=q.useState(null),[m,_]=q.useState(null),p=me(),Z=re(ie),K=!!Y;let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w=ne(),e[0]=w):w=e[0];const U=w,n=K&&!U,R=K&&U;let I;e:{if(J){const o=X[J];if(o!=null&&o.channels.has(A.WHATSAPP)){I=A.WHATSAPP;break e}}I=A.SMS}const r=I;let j;e[1]!==p||e[2]!==t||e[3]!==a||e[4]!==W||e[5]!==s||e[6]!==r?(j=async()=>{_(null),p.mutateAsync({factor:"sms",channel:r,phoneNumber:s}).then(o=>{if(!ce(o))throw new Error("Unsupported enrollment response shape");a(),W({phoneNumber:s.trim(),enrollmentSessionId:o.session_id,factorId:o.factor.id})}).catch(o=>{_(t.formatMessage(pe(o,!0)))})},e[1]=p,e[2]=t,e[3]=a,e[4]=W,e[5]=s,e[6]=r,e[7]=j):j=e[7];const c=j,B=!R,H=R?"bg-token-bg-primary":void 0,V=R?"top":void 0,D=n?Z?"fit":"fill":void 0,L=n?"large":void 0,z=n?"h-[max(100svh,100dvh,100%)]":void 0,F=n?"sm:border-token-border-light! max-sm:h-full max-sm:w-screen max-sm:max-w-none max-sm:rounded-none sm:w-[calc(100vw-2rem)] sm:max-w-[900px] sm:border":void 0;let d;e[8]!==t?(d=t.formatMessage({id:"qU7XHp",defaultMessage:"Enter your phone number"}),e[8]=t,e[9]=d):d=e[9];let f;e[10]!==d?(f=i.jsx("span",{className:"text-heading-3",children:d}),e[10]=d,e[11]=f):f=e[11];let u;e[12]!==p.isPending||e[13]!==s?(u=s.trim().length===0||p.isPending||!oe(s),e[12]=p.isPending,e[13]=s,e[14]=u):u=e[14];let h;e[15]!==t||e[16]!==r?(h=r===A.WHATSAPP?t.formatMessage({id:"6afAWV",defaultMessage:"Send code via WhatsApp"}):t.formatMessage({id:"G3KaG7",defaultMessage:"Send code"}),e[15]=t,e[16]=r,e[17]=h):h=e[17];let g;e[18]!==c||e[19]!==u||e[20]!==h?(g=i.jsx(le.Button,{color:"primary",disabled:u,onClick:c,children:h}),e[18]=c,e[19]=u,e[20]=h,e[21]=g):g=e[21];let x;e[22]!==c?(x=o=>{o.preventDefault(),c()},e[22]=c,e[23]=x):x=e[23];let y;e[24]!==t?(y=t.formatMessage({id:"J1MnYd",defaultMessage:"We’ll send you a code to confirm it’s really you"}),e[24]=t,e[25]=y):y=e[25];let b;e[26]!==y?(b=i.jsx("p",{children:y}),e[26]=y,e[27]=b):b=e[27];let S;e[28]!==t?(S=t.formatMessage({id:"gn7CkF",defaultMessage:"Phone number"}),e[28]=t,e[29]=S):S=e[29];let P;e[30]!==m?(P=o=>{$(o),m&&_(null)},e[30]=m,e[31]=P):P=e[31];let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=Object.keys(X),e[32]=E):E=e[32];let O,k;e[33]===Symbol.for("react.memo_cache_sentinel")?(O=o=>Q(o),k={layout:"inline",showDialCodePrefix:!1,rounded:"lg",densePadding:!0,triggerShowOnlyDialCode:!0,fullWidthJustifyDialCode:!1,placeholderTextSize:"sm",dropdownPanelWidthPx:320},e[33]=O,e[34]=k):(O=e[33],k=e[34]);const G=m!=null?m:void 0;let M;e[35]!==s||e[36]!==S||e[37]!==P||e[38]!==G?(M=i.jsx(se,{label:S,value:s,setValue:P,countries:E,onCountryChange:O,appearance:k,error:G}),e[35]=s,e[36]=S,e[37]=P,e[38]=G,e[39]=M):M=e[39];let C;e[40]!==t||e[41]!==r?(C=r===A.WHATSAPP&&i.jsx("p",{className:"text-token-text-tertiary text-xs",children:t.formatMessage({id:"rynzKn",defaultMessage:"Based on your country code, only WhatsApp is available."})}),e[40]=t,e[41]=r,e[42]=C):C=e[42];let N;e[43]!==b||e[44]!==M||e[45]!==C?(N=i.jsxs("div",{className:"flex flex-col items-start gap-[12px] self-stretch",children:[b,M,C]}),e[43]=b,e[44]=M,e[45]=C,e[46]=N):N=e[46];let v;e[47]!==x||e[48]!==N?(v=i.jsx("form",{onSubmit:x,className:"text-token-text-primary self-stretch text-sm",children:N}),e[47]=x,e[48]=N,e[49]=v):v=e[49];let T;return e[50]!==a||e[51]!==F||e[52]!==f||e[53]!==g||e[54]!==v||e[55]!==B||e[56]!==H||e[57]!==V||e[58]!==D||e[59]!==L||e[60]!==z||e[61]!==n?(T=i.jsx(ae,{testId:"modal-enter-phone-number",isOpen:!0,onClose:a,showOverlayBackground:B,overlayClassName:H,position:V,isBottomSheet:n,contentSize:D,topMargin:L,contentSheetViewClassName:z,className:F,type:"success",contentClassName:"!px-6 !pt-6 !pb-[24px]",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",modalActionsClassName:"!mt-[24px]",showCloseButton:!0,hasSeparator:!0,title:f,primaryButton:g,children:v}),e[50]=a,e[51]=F,e[52]=f,e[53]=g,e[54]=v,e[55]=B,e[56]=H,e[57]=V,e[58]=D,e[59]=L,e[60]=z,e[61]=n,e[62]=T):T=e[62],T}export{ct as EnterPhoneNumberModal};
//# sourceMappingURL=nfvqicargp08jsy4.js.map
