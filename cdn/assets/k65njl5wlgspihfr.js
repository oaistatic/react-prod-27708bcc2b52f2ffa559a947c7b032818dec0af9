const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bjmd4gy8qw6cip0t.js","assets/fg33krlcm0qyi6yw.js","assets/bgx9m29b5moow7ak.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/gaj6e78ii9fgijkk.js","assets/mstl8wgfzorpgdoe.js","assets/c0ls495fz2t1hbyy.js","assets/cdscbhv4xu1gie74.js","assets/lim1lqburrpeu20v.js","assets/fw6x669g9hrx2l8g.js","assets/dxjfdnf0n7opciai.js","assets/k5o2uyubrehejlmi.js","assets/dpdobqk4g9a7rtiz.js","assets/ervoffyksiw5mef9.js","assets/eryy8x9pwfrh26dy.js","assets/zqh8zckrbn05i9g8.js","assets/btdpwmi6j9nv6qc2.js","assets/hgk4djqrlco056z6.js","assets/l6gg4oal15ycpbhj.js","assets/27egyxvdbhiyko0z.js","assets/he7oe7s4xa3cph5y.js","assets/gy1lpvuoewmzh42c.js","assets/jed1ux7qibe55pmj.js","assets/h1em0bjkpkjv8ykw.js","assets/nfccle6oyncifphl.js","assets/hu1bt0oauegdhua6.js","assets/ojve869uwykk95at.js","assets/ly75bs3d14n5v622.js","assets/b7abh8aw9icifmym.js","assets/odbvdbv7o06jw7ls.js","assets/l8g4nijn9ow7argx.js","assets/njh1hro7jxhbut4d.js","assets/l09h2qppleubii6l.js","assets/cu0ig3jox4ha1bc5.js","assets/i1g2kxfbotvbgq93.js","assets/qcr0k45a8ay8c0b9.js","assets/product-variants-pcfu1bfm.css","assets/li70yj6yb4gouarj.js","assets/krwszi9u3lj63i9v.js","assets/c5f83hvrbqsij840.js","assets/h5lbwoaovb563r4k.js","assets/f96c6fguu1kcw0go.js","assets/nb22pb07i8ebbv0i.js","assets/iiok29s29bpdre61.js","assets/gi9hyxr9tw3nqr5l.js","assets/d3oudxt8f92bezmy.js","assets/coc2775l3yj92qmf.js","assets/i1mqwoffqueglpnh.js","assets/kzbknm4lxuyoq9wi.js","assets/f5ep9o7usovyn4vf.js","assets/h733mrhdc6qfebgd.js","assets/zqbip2ya77i1mx4s.js","assets/dm7q440f2oraxz29.js","assets/eqi3xjytwhmszqqa.js","assets/n0ab5m1z76n8mazm.js","assets/sy1xvqwioh9ks4z8.js","assets/cmaobpdpreyiep8p.js","assets/j3x02iqqi345yx57.js","assets/lbq5605sor1ah5hb.js","assets/mmn9462oogkapcg8.js","assets/blmsijdyv0yxybpw.js","assets/bbzlu7xqes2h12wz.js","assets/npp0xpas090zc0qr.js","assets/0hruh9i7xt25bbur.js","assets/j4u691tk1tplayl2.js","assets/kg0cp341m64rddpv.js","assets/ansi-1f6vhsjh.css","assets/u9jpwxvw30u3h6nc.js","assets/gns80bg8nlx0ty1m.js","assets/kx34yg3blv92o8xp.js","assets/map-with-entities-ejapwmw2.css","assets/i3rty9twuhjkv8ax.js","assets/kgjs6438c34s9yzr.js","assets/lep2wptoy14cfe2w.js","assets/hy5xt98rivxg8tb4.js","assets/du4xh8plp0f7ydun.js","assets/idu73b1fegzzc3f8.js","assets/hcn3kohxpjzaoxwc.js","assets/n6upldbhvll48b0q.js","assets/ol9d5wxhynx9q2is.js","assets/l9but48wvxtwnlrx.js","assets/esz2kgkc587ofop0.js","assets/oxont9zeuaiwb679.js","assets/table-components-gjyj5koo.css","assets/jdzosouyvpzu0tpb.js","assets/fqo7byo7t7jfvb49.js","assets/5mkn81r14jsz61px.js","assets/j509ay9g77d9nkrt.js","assets/n1g1ac9g2671vjzk.js","assets/f76gy0b8ieo4s693.js","assets/g3lybt7hj0s143gw.js","assets/bkm8et9bp0kf1c7y.js","assets/e4usrdpxs4x6g5aq.js","assets/c7uslvzbaqks7omp.js","assets/acd1cl9alifs5fnh.js","assets/ce3hgmw4iyyhicud.js","assets/j1qri9ykgswuwttk.js","assets/ir7nzwbolrsm3ds2.js","assets/kl7c6054usfnqmd4.js","assets/k97n0y6ba9c9h39c.js","assets/kee8jqsrbjdoukr1.js","assets/n7q15cptibmmhebw.js","assets/FormattedText-fam2v8ob.css","assets/jftncm63mknqil4t.js","assets/maum0adk5rsfsldc.js","assets/jwm2780gzkkhdmn4.js","assets/josbm46cli4lgccy.js","assets/ojkqq3te81elkpjg.js","assets/cwq0gi4f13ay6h52.js","assets/ou3j8wj06trp8hbr.js","assets/pazedx7do1c0xn6x.js","assets/hzc7rrqdw0neuxr5.js","assets/lk20vhnihsv557ob.js","assets/k33ydwk4jqdakpjy.js","assets/nujyfdxvqflp0wta.js","assets/duoq7ejw2jqizqxh.js","assets/nlmt707suek57scb.js","assets/d4kxeixumk26u3v3.js","assets/ikwkp3ockmohedj0.js","assets/rl7826g0utb81vs9.js","assets/khmkg5huin8s2wyf.js","assets/d37ov03m33dewesc.js","assets/c85o71peocbdlyqu.js","assets/gaf2c83btl9kw1dk.js","assets/mfujv3piojpkt0st.js","assets/f7wnq403lct52o9c.js","assets/nnfqr8jkm9161q4d.js","assets/tkv1g3prhmmeuid6.js","assets/mbql81gwv5du9dtu.js","assets/k43gn7pl526u53kc.js","assets/dg5jraediw4l39ow.js","assets/hb1mva1gmw4bcs8w.js","assets/efooahjtdr85x1lo.js","assets/km71i01x6ma5r62b.js","assets/mivow98b53y1taf8.js","assets/i5jw6wfkpao2rx5t.js","assets/mce0eiesimdmeqmr.js","assets/ifrwee0bgh9e2but.js","assets/gqx9i5tb3deqoo5z.js","assets/kgrrqncjl71482vi.js","assets/ohquqctluwabmb5i.js","assets/c2cj1dlcffke3f7m.js","assets/j413w2y09mrdcb4m.js","assets/ei2dcm731f3fuz8o.js","assets/mfxq5h29sjdj6875.js","assets/jzxs0bgx7ce7scj5.js","assets/nvdi5lzwa8dbv05v.js","assets/c5w9jn2muqrh3ojm.js","assets/m1n2uc2tzay1c1y2.js","assets/dw8txin0q2l0tkpd.js","assets/hu7cdk8arxck4dwq.js","assets/dg0rfsh5mqkm9hm4.js","assets/b18itl2ir4ckyrtk.js","assets/nszcnwx7ev33l5cf.js","assets/mjip4fua52db3tz9.js","assets/j927c56p6ea5l726.js","assets/fjmhseqydb9toe6x.js","assets/h2y70v3i8sai30ul.js","assets/kkwj04vdxs6m2ftx.js","assets/grqm82wc8aer8abm.js","assets/go93lwsl5xpollna.js","assets/iay21uvdtolet9qf.js","assets/kr7a91ljdepbwd63.js","assets/gbx9lblxsjstng4m.js","assets/mq7uqtztbvim4zqv.js","assets/lcdvojbjninqw880.js","assets/d25rp1v2ymoyzgv9.js","assets/fl4ha52uwxfs3yp2.js","assets/dydcwm1dqf2artli.js","assets/o7qo6wd4jpqdyj9p.js","assets/88cccwvek02yf61d.js","assets/moee19t0icnodtc2.js","assets/kfz799kdnokj9job.js","assets/dot4yzsm2q0eyrg0.js","assets/c5og9r81gzk0nhum.js","assets/c7d3fpgj9nqway0g.js","assets/mbkrlljiwhbkwjre.js","assets/u69kqoyzot6736n2.js","assets/kg06gqasi13as2pn.js","assets/ds5jluypo8l1qbwc.js","assets/jd69ff7by1jon8od.js","assets/ck1u9icgxosmytry.js","assets/m89x2zftpo6hrypr.js","assets/bg41hz7jg49p6v5w.js","assets/hod0x7g0nytg7mip.js","assets/l7qr5j8e9lh3l959.js","assets/og8jhmm6v1nbwzo4.js","assets/kfdkis1zwf4ccfgg.js","assets/mbmcx8v24u1ao1ke.js","assets/exm3n162m2u9ltpu.js","assets/kcu773p5ymk2g8p7.js","assets/j1jsb5rfz3wt3sb5.js","assets/gpk0t7ye9ay70lna.js","assets/ghgxmj8t0vml5d42.js","assets/osmdmxcl4s1h4x86.js","assets/dtmrhhn0qnqwrc6e.js","assets/pa41jscn0rs1kzfk.js","assets/b85im3an1hkdbtlf.js","assets/hja130ef185hin7j.js","assets/ih9kmj09tggp8llw.js","assets/eyfrni5t2e7z7udl.js","assets/exqqo21frem4no6f.js","assets/kimw6epkq1t36pow.js","assets/ns51nblw8ziscsgd.js","assets/nk8claqige01rjll.js","assets/m5btqmw2ud0umdwr.js","assets/f2sn8zvpzei2915e.js","assets/ieglwgr2zyuektzv.js","assets/deakbbf27g8e7ba0.js","assets/cca0236s2s07nwln.js","assets/nwdwrv5b1h68xdm5.js","assets/b2l059fz4znz94nm.js","assets/bj1ejin6tzi0v3v8.js","assets/kcgt5jmhu7rxo8su.js","assets/ufggbgnzngd8vlsq.js","assets/nv4rm7lkosu65gch.js","assets/y3wyy6h0cnryp5gw.js","assets/msonzcs4uubp6vdq.js","assets/ia54sddtrl9qa2wj.js","assets/isy4o0udnww0c9cq.js","assets/ADAVisualizationComponent-qpbxeibv.css","assets/f30i8nw1t33buoyn.js","assets/hkb83i2st775hw30.js","assets/k36uf504rvhwee31.js","assets/j37p94g6trtb4j3z.js","assets/lad8yx56mqsdspc9.js","assets/msku76juvh0p7yqn.js","assets/n63vva46gvw4d35i.js","assets/c6ddmvq3k626ndki.js","assets/c1cxx6ihf6t1t9cb.js","assets/fnvr7bu6ngy60ar9.js","assets/jd4eqvrqcumq5jwz.js","assets/io60ao17mxhhxril.js","assets/efyjwwqgjkm4ifla.js","assets/photo-booth-modal-l7lnvqpv.css","assets/jaukcz96ive6l3u7.js","assets/hvo2u3a2x0n5gdxn.js","assets/ibjz9c01f0uy7k53.js","assets/fwtla2bbxlv5yr7j.js","assets/bio6zqk7sn9h2l92.js","assets/i2qk80cf0ci72s9b.js","assets/uhs7hvx53wnv2crm.js","assets/nqz1hrry86ykmk4a.js","assets/f44hagouqeulblbg.js","assets/m3g61ngxm1em2m1b.js","assets/ftef8970ba1zoykr.js","assets/czwlkhzq2wjwrbr9.js","assets/lh519j0jeagew6wf.js","assets/lyweiq6fkrxywnz5.js","assets/oza6nyibf7qjndb1.js","assets/f0tmpq9eclcs1wjb.js","assets/bfmw6b312y8enuep.js","assets/ckgqrmei9hf3rgqq.js","assets/f1r2462z2bv3eqo8.js","assets/fq92frbbgarrlrqs.js","assets/oko59kzbozx3pb3i.js","assets/pbfouyxndczy7od4.js","assets/m3nchqrpfl8vs80b.js","assets/d8we44sbia10np3x.js","assets/b5soar84lt1zpceb.js","assets/lr21obht9kc0zkh3.js","assets/ne3xqzlpqw6avp2c.js","assets/g6zoy6d6yr7gl0wr.js","assets/9scxvhhxenoark9a.js","assets/joa8jajuiu4xqpzn.js","assets/lxmmbf3g329d7x3l.js","assets/ibo6dflvtl36hpzs.js","assets/xix5le8wcon7ef24.js","assets/fjbpw3a0vshjd395.js","assets/nkg72cggx811q5rc.js","assets/kkpvfco69f4rm4dl.js","assets/eoxo2x2yyluwv164.js","assets/ju642fjyg5h2qo49.js","assets/ck40inivrzkot78b.js","assets/comments-plugin-ivzj8m6u.css","assets/codemirror-kfd8ygeu.css","assets/kl35ww3o5audytcy.js","assets/prosemirror-kdtc7ib2.css","assets/jz17uc4ytadugnwg.js","assets/gk1ydinzmvc3mi3f.js","assets/ktlrbeajo849nxci.js","assets/fjgzmzg0f3112atg.js","assets/8pjkblaxyj23u8dw.js","assets/d89jwbh4dprxdpk0.js","assets/o0e5tlgxm1k8ubzl.js","assets/evsh0yx8km5o6z99.js","assets/govwawj4ba48uv20.js","assets/i5unukvhln08phr2.js","assets/ikh0apjsuisoywnq.js","assets/ctgqahsfx1txd4g6.js","assets/d30pfo25z1qctykl.js","assets/l9v3ntkj34comb67.js","assets/h0pbwkfesoibvhzi.js","assets/bedanvzowato9b5m.js","assets/jvbyfg5l2vswda1p.js","assets/i6f1br1q8njdcvuc.js","assets/j2jsiaaopkm7zc3g.js","assets/e9enqs750h1b62v1.js","assets/gcscycku1316uc33.js","assets/bdcrsocnxeywlfte.js","assets/i4b1eltdmw1o5g9r.js","assets/je4pof9bv0m34g7e.js","assets/md4lzvizimaxbtm6.js","assets/bxp4m8ondc0vf9p9.js","assets/c0yxya1tj5roedd5.js","assets/c6kgwkdrq7e0cnwx.js","assets/ovqs2jkurpkxbqoh.js","assets/daytrgtfcpim7uvd.js","assets/ljdohdh31ragpxfx.js","assets/mycxacfsvwrlubxo.js","assets/ftuikkddjsgurupr.js","assets/ei4t1lsj7m7pqaok.js","assets/o096ka50hcktyghb.js","assets/cktyynovp70rynd3.js","assets/h279c0bz5piacjvd.js","assets/drsnsnrqd2p7vost.js","assets/ezskgg8lvon5962m.js","assets/kpmvfos0alw47r7o.js","assets/hiuxskq4ab6g9g54.js","assets/lcoqhbg3b2xkj1h1.js","assets/gjcywb7kh0c92ojn.js","assets/7n59nfdxk4fqm193.js","assets/bbrwlv36uza6ac6m.js","assets/o1go7egndvclirym.js","assets/hadkllqta6lfms2e.js","assets/ojlr534s5rpslkxs.js","assets/i343cenm2z0sru19.js","assets/khjleze1r7lyk9e0.js","assets/i1tex5l6gt3gdz3c.js","assets/o8fp7tdrxp9axj9w.js","assets/hdzr6yc0tkc12ulo.js","assets/mr025ud04jb4rh0r.js","assets/cnrdqaihcmlb57i1.js","assets/lbbnz7rb7sd2lk50.js","assets/dcp7peq4y6a4kabz.js","assets/jkdx73dfg7n0gxrn.js","assets/j6c7t6fq2e2dzq0l.js","assets/c8z528kkh87wsmtm.js","assets/e4voltqau0q1ydh1.js","assets/kbwdpwjg4pumi9yy.js","assets/dxf0nhie0kb80o3m.js","assets/blg6blmyt2kk8gl7.js","assets/d13unqbcq58nb3bi.js","assets/m8rmbyp78an6g3nm.js","assets/hjvnpytvkws4e5rs.js","assets/mcmrxiy9039fw9r6.js","assets/fhh09o9vbtdk6bjh.js","assets/jaya7jppqn559p04.js","assets/h7j5jaik108ahib8.js","assets/m2li92t79w0k884q.js","assets/bm9dehzwm3r2l9jr.js","assets/dq7bkj1xz32e6d79.js","assets/mkqcfeb39cnnaaud.js","assets/obeuuqvvz3ptpbah.js","assets/llove4bcy7api840.js","assets/cfhn0kk0x40cm0ng.js","assets/fbnn8bh19p4wun84.js","assets/fdmssuqzpk9905my.js","assets/j559fgwy6wrk3b1f.js","assets/nstpv5pwzyae0b4r.js","assets/h0jzzn6r330ltx5p.js","assets/dfah9jvhx6cqw2yi.js","assets/f1xfp952knkxhcnw.js","assets/b0wqcir84sehbt05.js","assets/b8edwljjzslk6t4c.js","assets/g0hkbvyuhhpw9e1h.js","assets/o3it70lkiqa69mlg.js","assets/cvkeviyu3ufw6i7c.js","assets/l79tw55p1ybii0aj.js","assets/ns7plxqxfok4w8o8.js","assets/e509ngenyrgcehf5.js","assets/ifr23omr9d78ntp2.js","assets/eukgnjb3l94r8f9i.js","assets/bfdvajbdpswmwyn5.js","assets/klzrztgvm2c9gs50.js","assets/gozpyw5s1npo9cdt.js","assets/e4epv5uv3mte9vwk.js","assets/fw2drixyrmmdzq3v.js","assets/db4wqqv1ngf0nc4k.js","assets/bujir4b03usbykce.js","assets/k0rf2l3x2nyibgei.js","assets/78mbq5lnj7jdstgp.js","assets/hcnbq3awt2aw4lv0.js","assets/cujccmvnwkfsplwg.js","assets/e5an8viec9j8j3xk.js","assets/jg7ess7vq49kid4v.js","assets/elqss4q6rfsugi45.js","assets/hlkyi1r61jnqir35.js","assets/e2xddkt6719ftni9.js","assets/ht7pa4q84q7i97x2.js","assets/oajumef5sxivtsws.js","assets/ck1iw59zboo0n7z1.js","assets/ci2dfqh2kkkqcc0f.js","assets/jxvniuj747nhdelu.js","assets/bqf9bep9y90rou2l.js","assets/ktg1askpfkhatzxx.js","assets/hkbze8ecmkfe1ds1.js","assets/j8gqb3mp6tl90wej.js","assets/xhjlzyzko764o5h6.js","assets/ktjmjpe332xc49mf.js","assets/opzer02f59vzr1sc.js","assets/g3yzuoprqu64tnnt.js","assets/csrck1dms8gwmy8t.js","assets/cc9h4wkwy2uzsgw4.js","assets/id752fqq0krrv1ua.js","assets/ha7dcp4svp0haryn.js","assets/nh6ldt5g2n6qq4b1.js","assets/dcbcxz0ax8be7w9z.js","assets/n88l1mn5huzloeoj.js","assets/ntw25y1kpfslm1ef.js","assets/e0jldceyrhax1vey.js","assets/hphbo1ofuspeudsz.js","assets/iulkd34cs1g1otm2.js","assets/b78p73h19cl1b8j2.js","assets/b97th5bsx7hon5av.js","assets/hypc8zje6pjy0wkk.js","assets/jynldw3xi6z5x165.js","assets/ij9tdrl4wnslfw8v.js","assets/bskpu01nj98v4rn0.js","assets/j7yn4e44sbxfsz2u.js","assets/h7pepcf81oh74vqo.js","assets/mftxtwm418nurv0b.js","assets/7dm499xgn0r9rz6v.js","assets/njiajg2n9ig24agb.js","assets/lm2fngo6qkh6l0ci.js","assets/ek2o44h7u21ea4tp.js","assets/kwbusk11a4k5oqj9.js","assets/jqmv39tyqoumt55b.js","assets/nehkolpks6e9k3o9.js","assets/jma9zspxcel79hob.js","assets/k9ksyvbl0xm4dv1o.js","assets/dvm6s4g4zrws5ita.js","assets/g8u2zmf8tyzd98px.js","assets/gywqobhbbetkdxnd.js","assets/nxe574t4em7jpfaw.js","assets/haneze5lyzwaewf8.js","assets/ImageLightbox-hvr0hynv.css","assets/bxuojq83y4bx9433.js","assets/dstp4z8tdudnmxxr.js","assets/f9pzryur9tap9c73.js","assets/fu8o6lmdsehlrsuz.js","assets/0lpzrfkojplamwyb.js","assets/fwtgnu9jfrrdfrmw.js","assets/ciyotrhew4275t06.js","assets/jawullnjvz8da20g.js","assets/fms8qmym5rar4wm3.js","assets/iej0cupg2dqkmejt.js","assets/jamwnn6d0jz74foj.js","assets/m0dqbfmysj2gn9xk.js","assets/c7su88sgygllvn5u.js","assets/ikhecou4geu140tb.js","assets/c3n1o8jzfcramdfc.js","assets/j9m6tk8ksckrygfu.js","assets/ljzdp59n77a99uo8.js","assets/o9og9fba0xn8j0xb.js","assets/v3j6i5k80tkozper.js","assets/13pv5753xo4ov7v2.js","assets/fcbjc746ye74nyx9.js","assets/ew4cv767jtkwgim6.js","assets/lapgtggsr1dhf7lh.js","assets/k5tpue93by1z42la.js","assets/odzcgakek6i0wbjp.js","assets/e8riaedm8hyd8ib0.js","assets/d1iu8sbvybkq8a6n.js","assets/lmxrqj0hsuhj3cho.js"])))=>i.map(i=>d[i]);
var T3=Object.freeze,E3=Object.defineProperty,Kq=Object.defineProperties;var Yq=Object.getOwnPropertyDescriptors;var Mg=Object.getOwnPropertySymbols;var M3=Object.prototype.hasOwnProperty,N3=Object.prototype.propertyIsEnumerable;var vu=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),D0=t=>{throw TypeError(t)};var L0=(t,e,s)=>e in t?E3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,T=(t,e)=>{for(var s in e||(e={}))M3.call(e,s)&&L0(t,s,e[s]);if(Mg)for(var s of Mg(e))N3.call(e,s)&&L0(t,s,e[s]);return t},U=(t,e)=>Kq(t,Yq(e));var A3=t=>typeof t=="symbol"?t:t+"",De=(t,e)=>{var s={};for(var n in t)M3.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&Mg)for(var n of Mg(t))e.indexOf(n)<0&&N3.call(t,n)&&(s[n]=t[n]);return s};var X=(t,e,s)=>L0(t,typeof e!="symbol"?e+"":e,s),F0=(t,e,s)=>e.has(t)||D0("Cannot "+s);var Us=(t,e,s)=>(F0(t,e,"read from private field"),s?s.call(t):e.get(t)),Oo=(t,e,s)=>e.has(t)?D0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),wi=(t,e,s,n)=>(F0(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),ms=(t,e,s)=>(F0(t,e,"access private method"),s);var St=(t,e)=>T3(E3(t,"raw",{value:T3(e||t.slice())}));var nn=function(t,e){this[0]=t,this[1]=e},Mr=(t,e,s)=>{var n=(i,l,c,u)=>{try{var d=s[i](l),f=(l=d.value)instanceof nn,m=d.done;Promise.resolve(f?l[0]:l).then(p=>f?n(i==="return"?i:"next",l[1]?{done:p.done,value:p.value}:p,c,u):c({value:p,done:m})).catch(p=>n("throw",p,c,u))}catch(p){u(p)}},o=i=>a[i]=l=>new Promise((c,u)=>n(i,l,c,u)),a={};return s=s.apply(t,e),a[vu("asyncIterator")]=()=>a,o("next"),o("throw"),o("return"),a},B0=t=>{var e=t[vu("asyncIterator")],s=!1,n,o={};return e==null?(e=t[vu("iterator")](),n=a=>o[a]=i=>e[a](i)):(e=e.call(t),n=a=>o[a]=i=>{if(s){if(s=!1,a==="throw")throw i;return i}return s=!0,{done:!1,value:new nn(new Promise(l=>{var c=e[a](i);c instanceof Object||D0("Object expected"),l(c)}),1)}}),o[vu("iterator")]=()=>o,n("next"),"throw"in e?n("throw"):o.throw=a=>{throw a},"return"in e&&n("return"),o},ua=(t,e,s)=>(e=t[vu("asyncIterator")])?e.call(t):(t=t[vu("iterator")](),e={},s=(n,o)=>(o=t[n])&&(e[n]=a=>new Promise((i,l,c)=>(a=o.call(t,a),c=a.done,Promise.resolve(a.value).then(u=>i({value:u,done:c}),l)))),s("next"),s("return"),e);import{r as x,c as F,u as ds,g as Qq,j as r,a as Gt,d as Je,b as dt,e as ne,f as Ne,M as j,h as en,i as yt,E as gn,k as dr,q as Ps,l as ZS,m as Hs,_ as me,n as Yn,s as XS,L as Ia,o as Jq,v as Ds,p as _c,t as Zq,w as ip,x as Xq,y as eK,z as Ng,A as tK,$ as sK,B as nK,F as oK}from"./fg33krlcm0qyi6yw.js";import{c as ue,s as Ce,g as ln,a as rr,R as de,u as Jd,b as G,d as oe,i as xn,e as jt,f as Bt,h as Le,j as aK,k as Ss,l as z,F as Mt,T as It,m as Kt,D as U0,n as Sa,W as mr,o as Ee,p as Zs,q as eC,r as UP,A as is,t as Uv,v as Ka,G as ec,w as Ic,C as Ft,x as Tn,M as mn,P as B,y as rK,z as iK,B as os,E as $P,H as fs,I as ct,J as lp,K as jc,L as tt,N as tC,O as lK,Q as yi,S as Be,U as ta,V as Xe,X as Wo,Y as E_,Z as ft,_ as Ge,$ as pt,a0 as cK,a1 as ii,a2 as vs,a3 as zt,a4 as uK,a5 as M_,a6 as HP,a7 as N_,a8 as GP,a9 as ke,aa as VP,ab as sC,ac as Gs,ad as $t,ae as dK,af as xr,ag as xs,ah as zP,ai as Pc,aj as Rc,ak as cp,al as Ks,am as fK,an as Oc,ao as Zd,ap as mK,aq as nC,ar as oC,as as Xd,at as aC,au as rC,av as A_,aw as Om,ax as pK,ay as gK,az as iC,aA as lC,aB as hK,aC as li,aD as ef,aE as WP,aF as En,aG as Mn,aH as _K,aI as qP,aJ as ja,aK as tn,aL as Lm,aM as Lc,aN as xK,aO as il,aP as bl,aQ as KP,aR as _a,aS as Zr,aT as Xi,aU as to,aV as cC,aW as Pa,aX as wn,aY as Es,aZ as $0,a_ as yK,a$ as bK,b0 as vK,b1 as tf,b2 as vl,b3 as hn,b4 as pr,b5 as qo,b6 as Qt,b7 as vt,b8 as uC,b9 as kn,ba as sn,bb as sa,bc as $e,bd as He,be as ks,bf as Ts,bg as gt,bh as Pe,bi as SK,bj as YP,bk as up,bl as dC,bm as Di,bn as eo,bo as QP,bp as $s,bq as us,br as $n,bs as fC,bt as je,bu as xc,bv as Ms,bw as JP,bx as Ca,by as CK,bz as $v,bA as wK,bB as ZP,bC as mC,bD as XP,bE as sf,bF as I_,bG as Hv,bH as On,bI as Ye,bJ as _o,bK as kK,bL as j_,bM as TK,bN as Xr,bO as eR,bP as tR,bQ as sR,bR as nR,bS as oR,bT as Ta,bU as vm,bV as pC,bW as gC,bX as ci,bY as hC,bZ as Gv,b_ as EK,b$ as Ls,c0 as Wn,c1 as MK,c2 as js,c3 as In,c4 as Dm,c5 as P_,c6 as aR,c7 as R_,c8 as _C,c9 as rR,ca as iR,cb as lR,cc as cR,cd as uR,ce as dR,cf as fR,cg as mR,ch as NK,ci as pR,cj as AK,ck as dp,cl as gR,cm as hR,cn as tr,co as _R,cp as IK,cq as jK,cr as PK,cs as RK,ct as OK,cu as LK,cv as DK,cw as FK,cx as Xu,cy as O_,cz as L_,cA as xR,cB as BK,cC as UK,cD as $K,cE as HK,cF as GK,cG as Rs,cH as xC,cI as VK,cJ as zK,cK as WK,cL as qK,cM as KK,cN as YK,cO as QK,cP as JK,cQ as Vv,cR as ZK,cS as yR,cT as XK,cU as mt,cV as eY,cW as tY,cX as bR,cY as Gr,cZ as vR,c_ as ut,c$ as fp,d0 as sY,d1 as SR,d2 as CR,d3 as Dc,d4 as wR,d5 as yC,d6 as bC,d7 as kR,d8 as Lt,d9 as nf,da as zn,db as Ag,dc as TR,dd as ir,de as Zt,df as Vs,dg as D_,dh as nY,di as oY,dj as aY,dk as rY,dl as zr,dm as iY,dn as ER,dp as MR,dq as na,dr as NR,ds as lY,dt as cY,du as F_,dv as vC,dw as AR,dx as uY,dy as IR,dz as bs,dA as Fc,dB as Et,dC as Sl,dD as Io,dE as jR,dF as Se,dG as dY,dH as Tt,dI as Rt,dJ as Xt,dK as fY,dL as nt,dM as Ph,dN as Bc,dO as B_,dP as SC,dQ as xo,dR as as,dS as mY,dT as pY,dU as gY,dV as hY,dW as _Y,dX as of,dY as PR,dZ as lc,d_ as xY,d$ as zv,e0 as yY,e1 as ya,e2 as ot,e3 as ed,e4 as bt,e5 as bY,e6 as Fm,e7 as Qs,e8 as Lr,e9 as vY,ea as RR,eb as a1,ec as OR,ed as jn,ee as To,ef as Cn,eg as oa,eh as Pt,ei as SY,ej as yc,ek as CY,el as wY,em as LR,en as xt,eo as yr,ep as Cl,eq as kY,er as DR,es as wa,et as r1,eu as td,ev as TY,ew as EY,ex as MY,ey as NY,ez as H0,eA as ll,eB as FR,eC as AY,eD as i1,eE as BR,eF as jo,eG as Ko,eH as af,eI as CC,eJ as U_,eK as Fi,eL as ui,eM as Sm,eN as Ya,eO as IY,eP as UR,eQ as $R,eR as jY,eS as wC,eT as l1,eU as PY,eV as I3,eW as Cs,eX as wl,eY as RY,eZ as OY,e_ as Ea,e$ as bc,f0 as LY,f1 as DY,f2 as FY,f3 as Pn,f4 as Cm,f5 as Ai,f6 as $_,f7 as BY,f8 as mp,f9 as HR,fa as GR,fb as Bm,fc as G0,fd as j3,fe as di,ff as c1,fg as UY,fh as Yo,fi as cm,fj as VR,fk as $Y,fl as HY,fm as GY,fn as VY,fo as zY,fp as P3,fq as Ig,fr as WY,fs as qY,ft as KY,fu as R3,fv as Bf,fw as kC,fx as YY,fy as TC,fz as fi,fA as vc,fB as O3,fC as EC,fD as cn,fE as zR,fF as H_,fG as pp,fH as WR,fI as u1,fJ as QY,fK as JY,fL as ZY,fM as L3,fN as Qe,fO as qR,fP as Sc,fQ as KR,fR as XY,fS as MC,fT as ka,fU as eQ,fV as Cd,fW as no,fX as Ht,fY as YR,fZ as rf,f_ as tQ,f$ as NC,g0 as D3,g1 as V0,g2 as J,g3 as Cc,g4 as QR,g5 as sQ,g6 as nQ,g7 as JR,g8 as ys,g9 as cl,ga as AC,gb as G_,gc as ZR,gd as Qo,ge as oQ,gf as aQ,gg as rQ,gh as ba,gi as iQ,gj as XR,gk as Eo,gl as IC,gm as on,gn as Is,go as Ma,gp as V_,gq as z_,gr,gs as bi,gt as aa,gu as d1,gv as Bn,gw as Um,gx as lQ,gy as oo,gz as gp,gA as cQ,gB as uQ,gC as cs,gD as um,gE as F3,gF as W_,gG as e6,gH as hp,gI as t6,gJ as ra,gK as ia,gL as dQ,gM as s6,gN as n6,gO as o6,gP as q_,gQ as fQ,gR as a6,gS as jC,gT as r6,gU as PC,gV as mQ,gW as RC,gX as pQ,gY as i6,gZ as OC,g_ as wc,g$ as _p,h0 as tc,h1 as Wl,h2 as l6,h3 as gQ,h4 as hQ,h5 as _Q,h6 as LC,h7 as Uc,h8 as xQ,h9 as yQ,ha as DC,hb as c6,hc as bQ,hd as Un,he as wd,hf as $m,hg as lf,hh as Bs,hi as u6,hj as xp,hk as vQ,hl as dm,hm as SQ,hn as CQ,ho as wQ,hp as kQ,hq as TQ,hr as EQ,hs as MQ,ht as NQ,hu as K_,hv as Jo,hw as AQ,hx as IQ,hy as jQ,hz as PQ,hA as d6,hB as Y_,hC as f6,hD as RQ,hE as pa,hF as Q_,hG as vi,hH as br,hI as J_,hJ as jg,hK as An,hL as FC,hM as OQ,hN as kd,hO as BC,hP as m6,hQ as LQ,hR as $c,hS as B3,hT as p6,hU as UC,hV as g6,hW as h6,hX as Hc,hY as DQ,hZ as FQ,h_ as $C,h$ as BQ,i0 as UQ,i1 as $Q,i2 as HQ,i3 as GQ,i4 as _6,i5 as x6,i6 as yp,i7 as HC,i8 as GC,i9 as Rn,ia as VQ,ib as VC,ic as zQ,id as Z_,ie as Wv,ig as Pg,ih as zC,ii as WQ,ij as qQ,ik as y6,il as KQ,im as cf,io as WC,ip as b6,iq as bp,ir as YQ,is as vp,it as QQ,iu as JQ,iv as v6,iw as f1,ix as qC,iy as ZQ,iz as XQ,iA as eJ,iB as tJ,iC as sJ,iD as nJ,iE as oJ,iF as S6,iG as aJ,iH as rJ,iI as mo,iJ,iK as qn,iL as po,iM as lJ,iN as cJ,iO as uJ,iP as uf,iQ as Qn,iR as X_,iS as dJ,iT as C6,iU as Fs,iV as qv,iW as Zo,iX as fJ,iY as Rg,iZ as ex,i_ as Gc,i$ as df,j0 as w6,j1 as k6,j2 as T6,j3 as tx,j4 as KC,j5 as mJ,j6 as pJ,j7 as m1,j8 as gJ,j9 as hJ,ja as _J,jb as xJ,jc as yJ,jd as E6,je as bJ,jf as vJ,jg as M6,jh as SJ,ji as CJ,jj as YC,jk as wJ,jl as kJ,jm as N6,jn as TJ,jo as EJ,jp as MJ,jq as NJ,jr as QC,js as sx,jt as U3,ju as $3,jv as AJ,jw as p1,jx as vr,jy as A6,jz as IJ,jA as I6,jB as j6,jC as P6,jD as R6,jE as O6,jF as L6,jG as D6,jH as F6,jI as sd,jJ as Rh,jK as jJ,jL as cc,jM as B6,jN as Kv,jO as uc,jP as Yv,jQ as nx,jR as ff,jS as g1,jT as JC,jU as U6,jV as z0,jW as ox,jX as PJ,jY as Hm,jZ as RJ,j_ as OJ,j$ as Vc,k0 as LJ,k1 as h1,k2 as ZC,k3 as DJ,k4 as $6,k5 as ax,k6 as FJ,k7 as BJ,k8 as UJ,k9 as $J,ka as XC,kb as ew,kc as dc,kd as H6,ke as G6,kf as Sp,kg as HJ,kh as Sr,ki as GJ,kj as Jn,kk as tw,kl as rx,km as sw,kn as VJ,ko as zJ,kp as WJ,kq as V6,kr as el,ks as z6,kt as Ii,ku as W6,kv as nw,kw as ow,kx as aw,ky as qJ,kz as rw,kA as iw,kB as q6,kC as K6,kD as Y6,kE as KJ,kF as Q6,kG as YJ,kH as ei,kI as Cp,kJ as J6,kK as Z6,kL as QJ,kM as _1,kN as JJ,kO as ZJ,kP as XJ,kQ as eZ,kR as tZ,kS as sZ,kT as W0,kU as nZ,kV as fm,kW as X6,kX as oZ,kY as lw,kZ as cw,k_ as Jt,k$ as Qv,l0 as e9,l1 as uw,l2 as t9,l3 as lt,l4 as aZ,l5 as s9,l6 as Ra,l7 as Oa,l8 as n9,l9 as rZ,la as ix,lb as iZ,lc as lZ,ld as cZ,le as uZ,lf as tl,lg as dZ,lh as o9,li as a9,lj as ko,lk as Jv,ll as fZ,lm as mZ,ln as r9,lo as fr,lp as dw,lq as fw,lr as pZ,ls as lx,lt as Oh,lu as Og,lv as Ll,lw as kl,lx as Bi,ly as gZ,lz as mw,lA as hZ,lB as _Z,lC as Zv,lD as wp,lE as H3,lF as i9,lG as pw,lH as l9,lI as xZ,lJ as gw,lK as yZ,lL as Td,lM as Ed,lN as hw,lO as bZ,lP as vZ,lQ as c9,lR as q0,lS as K0,lT as SZ,lU as Si,lV as u9,lW as CZ,lX as _w,lY as cx,lZ as wZ,l_ as kZ,l$ as TZ,m0 as EZ,m1 as d9,m2 as Co,m3 as es,m4 as sr,m5 as Md,m6 as MZ,m7 as NZ,m8 as AZ,m9 as IZ,ma as x1,mb as f9,mc as m9,md as p9,me as g9,mf as jZ,mg as xw,mh as PZ,mi as RZ,mj as OZ,mk as LZ,ml as DZ,mm as FZ,mn as yw,mo as h9,mp as bw,mq as y1,mr as b1,ms as _9,mt as BZ,mu as UZ,mv as mf,mw as kp,mx as vw,my as $Z,mz as HZ,mA as Ui,mB as GZ,mC as Ns,mD as G3,mE as VZ,mF as ux,mG as v1,mH as Sw,mI as pf,mJ as V3,mK as zZ,mL as Yt,mM as WZ,mN as x9,mO as y9,mP as Cw,mQ as b9,mR as fc,mS as v9,mT as qZ,mU as dx,mV as S9,mW as KZ,mX as YZ,mY as QZ,mZ as JZ,m_ as C9,m$ as $u,n0 as S1,n1 as ZZ,n2 as XZ,n3 as eX,n4 as tX,n5 as fx,n6 as sX,n7 as nX,n8 as gf,n9 as oX,na as aX,nb as rX,nc as iX,nd as lX,ne as cX,nf as uX,ng as dX,nh as fX,ni as mX,nj as mx,nk as pX,nl as gX,nm as zc,nn as w9,no as $i,np as nd,nq as z3,nr as hX,ns as Wc,nt as _X,nu as C1,nv as xX,nw as ww,nx as k9,ny as yX,nz as bX,nA as Qa,nB as Lg,nC as vX,nD as T9,nE as Tp,nF as Ep,nG as SX,nH as CX,nI as E9,nJ as wX,nK as kX,nL as M9,nM as TX,nN as EX,nO as Y0,nP as Gm,nQ as N9,nR as kw,nS as MX,nT as NX,nU as AX,nV as IX,nW as A9,nX as jX,nY as I9,nZ as j9,n_ as P9,n$ as W3,o0 as PX,o1 as Mp,o2 as RX,o3 as R9,o4 as O9,o5 as OX,o6 as LX,o7 as DX,o8 as FX,o9 as Tw,oa as L9,ob as q3,oc as BX,od as Nd,oe as D9,of as F9,og as UX,oh as $X,oi as HX,oj as GX,ok as VX,ol as B9,om as zX,on as WX,oo as qX,op as Ew,oq as U9,or as KX,os as K3,ot as YX,ou as $9,ov as Y3,ow as QX,ox as Xv,oy as JX,oz as ZX,oA as XX,oB as eee,oC as tee,oD as see,oE as nee,oF as oee,oG as aee,oH as ree,oI as Dg,oJ as iee,oK as lee,oL as So,oM as Mw,oN as H9,oO as Np,oP as cee,oQ as uee,oR as dee,oS as fee,oT as mee,oU as pee,oV as G9,oW as gee,oX as hee,oY as _ee,oZ as xee,o_ as Yl,o$ as Dl,p0 as Q0,p1 as V9,p2 as z9,p3 as yee,p4 as bee,p5 as vee,p6 as Fg,p7 as See,p8 as Cee,p9 as wee,pa as kee,pb as Tee,pc as W9,pd as Vm,pe as Eee,pf as Mee,pg as w1,ph as Q3,pi as Nee,pj as Aee,pk as Iee,pl as jee,pm as Pee,pn as Ree,po as Oee,pp as ns,pq as q9,pr as Lee,ps as Dee,pt as Fee,pu as Bee,pv as Uee,pw as $ee,px as Hee,py as od,pz as Gee,pA as Vee,pB as zee,pC as Wee,pD as qee,pE as e2,pF as Kee,pG as K9,pH as Yee,pI as Y9,pJ as Qee,pK as Jee,pL as Q9,pM as Zee,pN as Ad,pO as mi,pP as Id,pQ as Tl,pR as El,pS as Xee,pT as J3,pU as ete,pV as tte,pW as ste,pX as Bg,pY as nte,pZ as ote,p_ as ate,p$ as Z3,q0 as X3,q1 as J9,q2 as rte,q3 as Uf,q4 as eM,q5 as ite,q6 as lte,q7 as cte,q8 as J0,q9 as tM,qa as sM,qb as ute,qc as dte,qd as fte,qe as mte,qf as pte,qg as gte,qh as hte,qi as _te,qj as Ap,qk as xte,ql as Z9,qm as yte,qn as Ug,qo as Fl,qp as Vo,qq as Nw,qr as bte,qs as vte,qt as Ste,qu as Cte,qv as wte,qw as kte,qx as Tte,qy as Ete,qz as Mte,qA as X9,qB as t2,qC as Nte,qD as Ate,qE as Ite,qF as Aw,qG as jte,qH as nM,qI as $g,qJ as Pte,qK as Rte,qL as Ote,qM as eO,qN as oM,qO as Bl,qP as Su,qQ as Lte}from"./mtk1qztvnb31pw5r.js";const Ip=ue(Ce,"3a5c87",20,20);function Dte(){const t=x.useRef([]),e=x.useRef((s,n)=>{const o=setTimeout(s,n);return t.current.push(o),o});return x.useEffect(()=>{const s=t.current;return()=>{s.forEach(n=>{clearTimeout(n)})}},[]),e.current}var We=(t=>(t.Onboarding="oai/apps/hasSeenOnboarding",t.hasSeenExistingUserPersonalityOnboarding="oai/apps/hasSeenExistingUserPersonalityOnboarding",t.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",t.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",t.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",t.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",t.NewOnboardingConvo="oai/apps/hasSeenNewUserOnboardingConvo",t.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",t.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",t.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",t.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",t.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",t.UseSidekick="oai/apps/hasDismissedUseSidekick",t.UseSidetron="oai/apps/hasDismissedUseSidetron",t.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",t.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",t.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",t.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",t.hasSeenComposerContextualAnswerTooltip="oai/apps/hasSeenComposerContextualAnswerTooltip",t.hasSeenConnectorsNuxModal="oai/apps/hasSeenConnectorsNuxModal",t.hasSeenGoogleConnectorsNuxModal="oai/apps/hasSeenGoogleConnectorsNuxModal",t.hasSeenContextualAnswerGoogleSyncFinished="oai/apps/hasSeenContextualAnswerGoogleSyncFinished",t.hasSeenConnectorsSourcesPillTooltip="oai/apps/hasSeenConnectorsSourcesPillTooltip",t.hasSeenConnectorsUpgradeFileAccessModal="oai/apps/hasSeenConnectorsUpgradeFileAccessModal",t.hasSeenConnectorsReconnectModal="oai/apps/hasSeenConnectorsReconnectModal",t.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",t.hasSeenPioneer="oai/apps/hasSeenPioneer",t.hasSeenMaverick="oai/apps/hasSeenMaverick",t.hasSeenMaverickCapi="oai/apps/hasSeenMaverickCapi",t.hasSeenTrailBlazer="oai/apps/hasSeenTrailBlazer",t.hasSeenStratos="oai/apps/hasSeenStratos",t.hasSeenSeeker="oai/apps/hasSeenSeeker",t.hasSeenWayfinder="oai/apps/hasSeenWayfinder",t.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",t.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",t.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",t.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",t.DesktopOperatorAnnouncement="oai/apps/hasSeenDesktopOperatorAnnouncement",t.DesktopClassmatesPromotionAnnouncement="oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement",t.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",t.NewStaticOnboardingFlow="oai/apps/hasSeenStaticOnboarding",t.NewPromptOnboardingFlow="oai/apps/hasSeenPromptOnboarding",t.CreateExampleChatsOnboarding="oai/apps/hasCreatedExampleChats",t.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",t.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",t.hasSeenPotionOnboarding="oai/apps/hasSeenPotionOnboarding",t.hasDismissedPotionOnboardingCards="oai/apps/hasDismissedP072515OnboardingCards",t.hasSeenProjectsUpdateNuxTooltip="oai/apps/hasSeenProjectsUpdateNuxTooltip",t.hasSeenProjectsToFree="oai/apps/hasSeenProjectsToFree",t.hasSeenMemoryInSearch="oai/apps/hasSeenMemoryInSearch",t.hasSeenMoonshineNux="oai/apps/hasSeenMoonshineNux",t.hasSeenMoonshineNuxV2="oai/apps/hasSeenMoonshineNuxV2",t.hasSeenGoldenHourNux="oai/apps/hasSeenGoldenHourNux",t.hasSeenGoldenHourNuxV2="oai/apps/hasSeenGoldenHourNuxV2",t.hasSeenGoldenHourAnnouncement="oai/apps/hasSeenGoldenHourAnnouncement",t.hasSeenInlineFeedbackCustomInstrMessage="oai/apps/hasSeenInlineFeedbackCustomInstrMessage",t.hasSeenCaSystemHint="oai/apps/hasSeenCaSystemHint",t.hasDismissedPromoRedemption="oai/apps/hasDismissedPromoRedemption",t.hasSeenFilePickerNuxTooltip="oai/apps/hasSeenFilePicker",t.hasSeenMultipleGPTEditorsTooltip="oai/apps/hasSeenMultipleGPTEditorsTooltip",t.hasSeenSharedProjectsTooltip="oai/apps/hasSeenSharedProjectsTooltip",t.hasSeenGroupChatOnboardingTooltip="oai/apps/hasSeenGroupChatOnboardingTooltip",t.hasSeenPhoenixNux="oai/apps/hasSeenPhoenixNux",t.hasSeenPhoenixFreeNux="oai/apps/hasSeenPhoenixFreeNux",t.hasDismissedReferrerRedemption="oai/apps/hasDismissedReferrerRedemption",t.hasDismissedRefereeRedemption="oai/apps/hasDismissedRefereeRedemption",t.hasSeenReferralUpsellAnnouncement="oai/apps/hasSeenReferralProgramUpsell",t.hasSeenTatertotIntakeForm="oai/apps/hasSeenTatertotIntakeForm",t.hasSeenComposerBigBoxEnterHint="oai/apps/hasSeenComposerBigBoxEnterHint",t.d2dee219="oai/apps/d2dee219",t.hasSeenStudentsUpsellAnnouncement="oai/apps/hasSeenStudentsUpsellAnnouncement",t.hasSeenMemoryUpdatedTooltip="oai/apps/hasSeenMemoryUpdatedTooltip",t.hasSeenTeamSeatsPromoAnnouncement="oai/apps/hasSeenTeamSeatsPromoAnnouncement",t.hasSeenTeamsContextualAnswersUpsell="oai/apps/hasSeenTeamsContextualAnswersUpsell",t.hasSeenO3O4MiniAutomations="oai/apps/hasSeenO3O4MiniAutomations",t.hasSeenPulseTasksNux="oai/apps/hasSeenPulseTasksNux",t.hasSeenn7jupdNux="oai/apps/hasSeenn7jupdNux",t.hasSeenTatertotNux="oai/apps/hasSeenTatertotNux",t.hasSeenTatertotQuizNux="oai/apps/hasSeenTatertotQuizNux",t.hasSeenAudioParagenPrompt="oai/apps/hasSeenAudioParagenPrompt",t.hasSeenOdysseyConnectorsModal="oai/apps/hasSeenOdysseyConnectorsModal",t.hasSeenOdysseyTakeoverModal="oai/apps/hasSeenOdysseyTakeoverModal",t.hasSeenAgentModeAnnouncementBanner="oai/apps/hasSeenAgentModeAnnouncementBanner",t.hasSeenWorkspaceDiscoveryFirstLogin="oai/apps/hasSeenWorkspaceDiscoveryFirstLogin",t.hasSeenFreeTrialUpsellModal="oai/apps/hasSeenPlusOrBusinessFreeTrial",t.hasSeenGoFreeTrialUpsellModal="oai/apps/hasSeenGoTwelveMonthFreeTrial",t.hasSeenPlusFreeTrialHomepageAnnouncementBanner="oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner",t.hasSeenWorkSpacePolicy="oai/apps/hasSeenWorkSpacePolicy",t.hasSeenJoinWorkspaceBanner="oai/apps/hasSeenJoinWorkspaceBanner",t.hasSeenl1239dk1AlphaBanner="oai/apps/hasSeenl1239dk1AlphaBanner",t.hasSeenl1239dk1Onboarding="oai/apps/hasSeenl1239dk1Onboarding",t.hasSeenl1239dk1Bon="oai/apps/hasSeenl1239dk1Bon",t.hasSeenl1239dk1CreateFirstEnvModal="oai/apps/hasSeenl1239dk1CreateFirstEnvModal",t.hasSeenl1239dk1NewFeatures="oai/apps/hasSeenl1239dk1NewFeatures",t.hasSeenl1239dk1NewFeaturesSlack="oai/apps/hasSeenl1239dk1NewFeaturesSlack",t.hasSeenl1239dk1CodeReviewTab="oai/apps/hasSeenl1239dk1CodeReviewTab",t.hasCompletedWhamCodeReviewOnboardingFlow="oai/apps/hasCompletedWhamCodeReviewOnboardingFlow",t.hasSeenWhamCodex51ArticFox="oai/apps/wham_codex_51_articFox",t.hasSeenl1239dk1Codex51ArticFox="oai/apps/hasSeenl1239dk1Codex51ArticFox",t.hasSeenWhamCombinedSubmitButtonNux="oai/apps/hasSeenWhamCombinedSubmitButtonNux",t.hasSeenAardvarkOnboarding="oai/apps/hasSeenAardvarkOnboarding",t.hasSeenFollowupsFirstTurnOnce="oai/apps/hasSeenFollowupsFirstTurnOnce",t.hasSeenWritingInlineEditNux="oai/apps/hasSeenWritingInlineEditNux",t.hasSeenWritingInlineEditCaretNux="oai/apps/hasSeenWritingInlineEditCaretNux",t.hasSeenWritingInlineEditSelectNux="oai/apps/hasSeenWritingInlineEditSelectNux",t.hasSeenl1239dk1LaunchNux="oai/apps/hasSeenl1239dk1LaunchNux",t.hasSeenPurpleRainNux="oai/apps/hasSeenPurpleRainNux",t))(We||{});const tO=Bt(()=>Le(!1));function Fte({key:t,isAuraNewTabPageOverlay:e,isAuraSideChat:s}){const n=jt();return s?!0:e?t!=="oai/apps/hasSeenPotionOnboarding":xn(n)&&!$te(t)}function Ct(t){"use forget";var v;const e=F.c(22),{data:s,isLoading:n}=Jd();let o;e[0]!==(s==null?void 0:s.eligible_announcements)?(o=(v=s==null?void 0:s.eligible_announcements)!=null?v:[],e[0]=s==null?void 0:s.eligible_announcements,e[1]=o):o=e[1];const a=o,i=G();let l;e[2]!==i?(l=()=>[aK(i),Ss(i)],e[2]=i,e[3]=l):l=e[3];const[c,u]=oe(l);let d;e[4]!==c||e[5]!==u||e[6]!==t?(d=Fte({key:t,isAuraNewTabPageOverlay:c,isAuraSideChat:u}),e[4]=c,e[5]=u,e[6]=t,e[7]=d):d=e[7];const f=d,{mutate:m}=Bte();let p;e[8]!==t||e[9]!==m?(p=()=>m({key:t}),e[8]=t,e[9]=m,e[10]=p):p=e[10];const g=p;let h;e[11]!==i?(h=()=>tO(i),e[11]=i,e[12]=h):h=e[12];const _=oe(h);let b;e[13]!==_||e[14]!==a||e[15]!==f||e[16]!==t?(b=!_&&a.includes(t)&&!f,e[13]=_,e[14]=a,e[15]=f,e[16]=t,e[17]=b):b=e[17];let y;return e[18]!==n||e[19]!==g||e[20]!==b?(y={eligible:b,markAsViewedDontInvalidateCache:g,isLoading:n},e[18]=n,e[19]=g,e[20]=b,e[21]=y):y=e[21],y}async function _t(t,e){var o;const s=ln(t),n=s.getQueryData(rr().queryKey);(o=n==null?void 0:n.persistent_announcements)!=null&&o.includes(e)||(s.setQueryData(rr().queryKey,a=>a&&U(T({},a),{eligible_announcements:a.eligible_announcements.filter(i=>i!==e)})),await de.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}}),s.invalidateQueries(rr()))}function Bte(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:Ute},t[0]=e):e=t[0],ds(e)}function Ute(t){const{key:e}=t;return de.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}})}function $te(t){switch(t){case"oai/apps/hasSeenOnboarding":case"oai/apps/hasSeenTeamOwnerOnboarding":case"oai/apps/hasSeenMemoryOnboarding":case"oai/apps/hasSeenTemporaryChatOnboarding":case"oai/apps/hasSeenArchiveConversationOnboarding":case"oai/apps/hasSeenNewUserOnboardingConvo":case"oai/apps/hasSeenDalleEditingOnboarding":case"oai/apps/hasSeenModelSwitcherAutoDowngrade":case"oai/apps/hasDismissedCanvasOnboarding":case"oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26":case"oai/apps/hasSeenAdvancedVoice/2024-09-24":case"oai/apps/hasSeenSidekickLauncherOnboarding":case"oai/apps/hasDismissedUseSidekick":case"oai/apps/hasDismissedUseSidetron":case"oai/apps/hasSeenSncUsageNux":case"oai/apps/hasSeenSncWelcomeNux":case"oai/apps/hasSeenSncSourcesTooltip":case"oai/apps/hasSeenComposerSearchButtonTooltip":case"oai/apps/hasSeenComposerContextualAnswerTooltip":case"oai/apps/hasSeenConnectorsNuxModal":case"oai/apps/hasSeenGoogleConnectorsNuxModal":case"oai/apps/hasSeenContextualAnswerGoogleSyncFinished":case"oai/apps/hasSeenConnectorsSourcesPillTooltip":case"oai/apps/hasSeenConnectorsUpgradeFileAccessModal":case"oai/apps/hasSeenComposerSystemHintButtonTooltip":case"oai/apps/hasSeenPioneer":case"oai/apps/hasSeenExistingUserPersonalityOnboarding":case"oai/apps/hasSeenMaverick":case"oai/apps/hasSeenMaverickCapi":case"oai/apps/hasSeenTrailBlazer":case"oai/apps/hasSeenStratos":case"oai/apps/hasSeenSeeker":case"oai/apps/hasSeenWayfinder":case"oai/apps/hasSeenWindowsAppOnboarding":case"oai/apps/hasSeenDesktopBrowserExtensionAnnouncement":case"oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement":case"oai/apps/hasSeenDesktopOperatorAnnouncement":case"oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement":case"oai/apps/hasSeenOnboardingFlow":case"oai/apps/hasSeenStaticOnboarding":case"oai/apps/hasSeenPromptOnboarding":case"oai/apps/hasCreatedExampleChats":case"oai/apps/hasUsedNewUserStarterPrompt":case"oai/apps/hasSeenProjectsWebNuxTooltip":case"oai/apps/hasSeenProjectsUpdateNuxTooltip":case"oai/apps/hasSeenProjectsToFree":case"oai/apps/hasSeenMemoryInSearch":case"oai/apps/hasSeenMemoryUpdatedTooltip":case"oai/apps/hasSeenMoonshineNux":case"oai/apps/hasSeenMoonshineNuxV2":case"oai/apps/hasSeenGoldenHourNux":case"oai/apps/hasSeenGoldenHourNuxV2":case"oai/apps/hasSeenGoldenHourAnnouncement":case"oai/apps/hasSeenInlineFeedbackCustomInstrMessage":case"oai/apps/hasSeenCaSystemHint":case"oai/apps/hasSeenFilePicker":case"oai/apps/hasSeenMultipleGPTEditorsTooltip":case"oai/apps/hasSeenSharedProjectsTooltip":case"oai/apps/hasSeenComposerBigBoxEnterHint":case"oai/apps/hasSeenPhoenixNux":case"oai/apps/hasSeenPhoenixFreeNux":case"oai/apps/hasSeenAudioParagenPrompt":case"oai/apps/hasDismissedPromoRedemption":case"oai/apps/hasDismissedReferrerRedemption":case"oai/apps/hasDismissedRefereeRedemption":case"oai/apps/hasSeenReferralProgramUpsell":case"oai/apps/hasSeenStudentsUpsellAnnouncement":case"oai/apps/hasSeenTeamSeatsPromoAnnouncement":case"oai/apps/hasSeenTeamsContextualAnswersUpsell":case"oai/apps/hasSeenWorkspaceDiscoveryFirstLogin":case"oai/apps/hasSeenWorkSpacePolicy":case"oai/apps/hasSeenJoinWorkspaceBanner":case"oai/apps/hasSeenl1239dk1AlphaBanner":case"oai/apps/hasSeenl1239dk1Onboarding":case"oai/apps/hasSeenl1239dk1Bon":case"oai/apps/hasSeenl1239dk1CreateFirstEnvModal":case"oai/apps/hasSeenl1239dk1NewFeatures":case"oai/apps/hasSeenl1239dk1NewFeaturesSlack":case"oai/apps/hasSeenl1239dk1CodeReviewTab":case"oai/apps/hasCompletedWhamCodeReviewOnboardingFlow":case"oai/apps/wham_codex_51_articFox":case"oai/apps/hasSeenl1239dk1Codex51ArticFox":case"oai/apps/hasSeenWhamCombinedSubmitButtonNux":case"oai/apps/hasSeenAardvarkOnboarding":case"oai/apps/hasSeenTatertotIntakeForm":case"oai/apps/hasSeenO3O4MiniAutomations":case"oai/apps/hasSeenPulseTasksNux":case"oai/apps/hasSeenOdysseyConnectorsModal":case"oai/apps/hasSeenOdysseyTakeoverModal":case"oai/apps/hasSeenAgentModeAnnouncementBanner":case"oai/apps/hasSeenPlusOrBusinessFreeTrial":case"oai/apps/hasSeenGoTwelveMonthFreeTrial":case"oai/apps/hasSeenFollowupsFirstTurnOnce":case"oai/apps/hasSeenWritingInlineEditNux":case"oai/apps/hasSeenWritingInlineEditCaretNux":case"oai/apps/hasSeenWritingInlineEditSelectNux":case"oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner":case"oai/apps/d2dee219":case"oai/apps/hasSeenPotionOnboarding":case"oai/apps/hasSeenl1239dk1LaunchNux":case"oai/apps/hasSeenPurpleRainNux":case"oai/apps/hasSeenConnectorsReconnectModal":case"oai/apps/hasDismissedP072515OnboardingCards":return!0;case"oai/apps/hasSeenTatertotNux":case"oai/apps/hasSeenTatertotQuizNux":case"oai/apps/hasSeenn7jupdNux":case"oai/apps/hasSeenGroupChatOnboardingTooltip":return!1;default:return!1}}const px=We.hasSeenl1239dk1LaunchNux,sO=We.hasSeenl1239dk1Onboarding,Hte=We.hasSeenl1239dk1Bon,Gte=We.hasSeenl1239dk1CreateFirstEnvModal,Vte=We.hasSeenl1239dk1NewFeatures,zte=We.hasSeenl1239dk1NewFeaturesSlack,Wte=We.hasSeenl1239dk1AlphaBanner,qte=We.hasSeenl1239dk1CodeReviewTab,Kte=We.hasCompletedWhamCodeReviewOnboardingFlow,Iw=We.hasSeenl1239dk1Codex51ArticFox;function Yte(){return Ct(px)}function nO(){return Ct(sO)}function kJe(){return Ct(Hte)}function TJe(){return Ct(Gte)}function EJe(){return Ct(Vte)}function MJe(){return Ct(zte)}function NJe(){return Ct(qte)}function AJe(){return Ct(Wte)}function IJe(){return Ct(Kte)}function jw(){return Ct(Iw)}var oO=(t=>(t.Personal="chat",t.Workspace="workspace",t.Team="team",t))(oO||{});const jJe=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,PJe=/^(?!\.)(?!.*\.\.)([a-z0-9_'+\-\.]*)[a-z0-9_+-]@([a-z0-9][a-z0-9\-]*\.)+[a-z]{2,}$/i;var RJe={};const ad=2147483647,lr=36,Pw=1,zm=26,Qte=38,Jte=700,aO=72,rO=128,iO="-",Zte=/^xn--/,Xte=/[^\0-\x7F]/,ese=/[\x2E\u3002\uFF0E\uFF61]/g,tse={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Z0=lr-Pw,cr=Math.floor,X0=String.fromCharCode;function ji(t){throw new RangeError(tse[t])}function sse(t,e){const s=[];let n=t.length;for(;n--;)s[n]=e(t[n]);return s}function lO(t,e){const s=t.split("@");let n="";s.length>1&&(n=s[0]+"@",t=s[1]),t=t.replace(ese,".");const o=t.split("."),a=sse(o,e).join(".");return n+a}function Rw(t){const e=[];let s=0;const n=t.length;for(;s<n;){const o=t.charCodeAt(s++);if(o>=55296&&o<=56319&&s<n){const a=t.charCodeAt(s++);(a&64512)==56320?e.push(((o&1023)<<10)+(a&1023)+65536):(e.push(o),s--)}else e.push(o)}return e}const cO=t=>String.fromCodePoint(...t),nse=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:lr},aM=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},uO=function(t,e,s){let n=0;for(t=s?cr(t/Jte):t>>1,t+=cr(t/e);t>Z0*zm>>1;n+=lr)t=cr(t/Z0);return cr(n+(Z0+1)*t/(t+Qte))},Ow=function(t){const e=[],s=t.length;let n=0,o=rO,a=aO,i=t.lastIndexOf(iO);i<0&&(i=0);for(let l=0;l<i;++l)t.charCodeAt(l)>=128&&ji("not-basic"),e.push(t.charCodeAt(l));for(let l=i>0?i+1:0;l<s;){const c=n;for(let d=1,f=lr;;f+=lr){l>=s&&ji("invalid-input");const m=nse(t.charCodeAt(l++));m>=lr&&ji("invalid-input"),m>cr((ad-n)/d)&&ji("overflow"),n+=m*d;const p=f<=a?Pw:f>=a+zm?zm:f-a;if(m<p)break;const g=lr-p;d>cr(ad/g)&&ji("overflow"),d*=g}const u=e.length+1;a=uO(n-c,u,c==0),cr(n/u)>ad-o&&ji("overflow"),o+=cr(n/u),n%=u,e.splice(n++,0,o)}return String.fromCodePoint(...e)},Lw=function(t){const e=[];t=Rw(t);const s=t.length;let n=rO,o=0,a=aO;for(const c of t)c<128&&e.push(X0(c));const i=e.length;let l=i;for(i&&e.push(iO);l<s;){let c=ad;for(const d of t)d>=n&&d<c&&(c=d);const u=l+1;c-n>cr((ad-o)/u)&&ji("overflow"),o+=(c-n)*u,n=c;for(const d of t)if(d<n&&++o>ad&&ji("overflow"),d===n){let f=o;for(let m=lr;;m+=lr){const p=m<=a?Pw:m>=a+zm?zm:m-a;if(f<p)break;const g=f-p,h=lr-p;e.push(X0(aM(p+g%h,0))),f=cr(g/h)}e.push(X0(aM(f,0))),a=uO(o,u,l===i),o=0,++l}++o,++n}return e.join("")},dO=function(t){return lO(t,function(e){return Zte.test(e)?Ow(e.slice(4).toLowerCase()):e})},fO=function(t){return lO(t,function(e){return Xte.test(e)?"xn--"+Lw(e):e})},ose={version:"2.3.1",ucs2:{decode:Rw,encode:cO},decode:Ow,encode:Lw,toASCII:fO,toUnicode:dO},ase=Object.freeze(Object.defineProperty({__proto__:null,decode:Ow,default:ose,encode:Lw,toASCII:fO,toUnicode:dO,ucs2decode:Rw,ucs2encode:cO},Symbol.toStringTag,{value:"Module"})),OJe=Qq(ase);function Lh({id:t,label:e,checked:s,onChange:n,disabled:o,className:a,labelClassName:i,readOnly:l,containerClassName:c,labelSide:u="right",style:d,indeterminate:f}){const m=e&&r.jsx("label",{className:z("form-check-label text-token-text-primary",i),htmlFor:t,children:e}),p=x.useRef(null);x.useEffect(()=>{p.current&&(p.current.indeterminate=!!f)},[f]);const g=h=>{n==null||n(h)};return r.jsxs("div",{className:z("form-check flex items-center gap-2",c),children:[u==="left"&&m,r.jsx("input",{className:z("bg-token-bg-primary float-start h-4 w-4 appearance-none rounded-xs border border-gray-300 bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-500 checked:bg-blue-500 indeterminate:border-blue-500 indeterminate:bg-blue-500 dark:border-gray-700 dark:checked:border-blue-400 dark:checked:bg-blue-400 dark:indeterminate:border-blue-400 dark:indeterminate:bg-blue-400",o?"cursor-not-allowed":"cursor-pointer",a),type:"checkbox",disabled:o,onChange:g,checked:s,readOnly:l,id:t,"data-testid":t,style:d,ref:p}),u==="right"&&m]})}const mO=ue(Ce,"30127c",16,16);function Wm(t){"use forget";var Wt;const e=F.c(128);let s,n,o,a,i,l,c,u,d,f,m,p,g,h,_,b,y,v,S,C,w,k,E,M,N,A,I,P,R,O,L,D,H,V,q,W,$,Z;e[0]!==t?(Wt=t,{name:b,placeholder:I,type:$,role:O,list:h,ariaLabel:n,displayName:d,onChange:v,onFocus:w,onBlur:y,value:Z,saveOnBlur:L,onClear:S,icon:s,iconPosition:V,onInputIconClick:k,className:l,inputClassName:p,containerInputClassName:c,iconClassName:m,autoComplete:a,autoCapitalize:o,spellCheck:D,autoFocus:i,onPressEnter:N,onPaste:M,disabled:u,maxLength:_,color:q,onKeyDown:E,suppressFocus:W,ref:R,insideContainerChildren:g,style:H,displayNameLabelClassName:f,readOnly:P,onClick:C}=Wt,A=De(Wt,["name","placeholder","type","role","list","ariaLabel","displayName","onChange","onFocus","onBlur","value","saveOnBlur","onClear","icon","iconPosition","onInputIconClick","className","inputClassName","containerInputClassName","iconClassName","autoComplete","autoCapitalize","spellCheck","autoFocus","onPressEnter","onPaste","disabled","maxLength","color","onKeyDown","suppressFocus","ref","insideContainerChildren","style","displayNameLabelClassName","readOnly","onClick"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f,e[11]=m,e[12]=p,e[13]=g,e[14]=h,e[15]=_,e[16]=b,e[17]=y,e[18]=v,e[19]=S,e[20]=C,e[21]=w,e[22]=k,e[23]=E,e[24]=M,e[25]=N,e[26]=A,e[27]=I,e[28]=P,e[29]=R,e[30]=O,e[31]=L,e[32]=D,e[33]=H,e[34]=V,e[35]=q,e[36]=W,e[37]=$,e[38]=Z):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],p=e[12],g=e[13],h=e[14],_=e[15],b=e[16],y=e[17],v=e[18],S=e[19],C=e[20],w=e[21],k=e[22],E=e[23],M=e[24],N=e[25],A=e[26],I=e[27],P=e[28],R=e[29],O=e[30],L=e[31],D=e[32],H=e[33],V=e[34],q=e[35],W=e[36],$=e[37],Z=e[38]);const K=V===void 0?"right":V,Y=q===void 0?"tertiary":q,ae=W===void 0?!1:W,[se,ee]=x.useState(Z);let re;e[39]!==y||e[40]!==L?(re=hs=>{y==null||y(hs),L&&ee(hs.target.value)},e[39]=y,e[40]=L,e[41]=re):re=e[41];const he=re;let fe;e[42]!==v||e[43]!==L?(fe=hs=>{v==null||v(hs),L&&ee(hs.target.value)},e[42]=v,e[43]=L,e[44]=fe):fe=e[44];const pe=fe;let le;e[45]!==se||e[46]!==E||e[47]!==N?(le=hs=>{E==null||E(hs),!hs.nativeEvent.isComposing&&hs.key==="Enter"&&N&&(hs.preventDefault(),N(se,hs))},e[45]=se,e[46]=E,e[47]=N,e[48]=le):le=e[48];const ve=le;let Te,xe;e[49]!==Z?(Te=()=>{ee(Z)},xe=[Z],e[49]=Z,e[50]=Te,e[51]=xe):(Te=e[50],xe=e[51]),x.useEffect(Te,xe);let ce;e[52]!==L||e[53]!==Z?(ce=L?{}:{value:Z},e[52]=L,e[53]=Z,e[54]=ce):ce=e[54];let we;e[55]!==se||e[56]!==L?(we=L?{value:se}:{},e[55]=se,e[56]=L,e[57]=we):we=e[57];let ge;e[58]!==we||e[59]!==ce?(ge=T(T({},ce),we),e[58]=we,e[59]=ce,e[60]=ge):ge=e[60];const Ae=ge,Ue=K==="right",Ie=K==="left";let Me;e[61]!==m||e[62]!==Ue||e[63]!==Ie?(Me=z("absolute top-1/2 -translate-y-1/2",{"end-0":Ue,"start-0":Ie},m),e[61]=m,e[62]=Ue,e[63]=Ie,e[64]=Me):Me=e[64];const te=Me,Q=Y==="neutral"&&(ae?"-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2":"focus-within:bg-token-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-transparent"),ie=Y==="tertiary"&&(ae?"border-token-border-medium px-3 py-2":"border-token-border-medium focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1"),_e=Y==="search"&&(ae?"border-token-border-medium bg-token-main-surface-primary dark:border-token-border-medium rounded-xl p-4":"border-token-border-medium bg-token-main-surface-primary focus-within:border-token-border-xheavy dark:border-token-border-medium dark:focus-within:border-token-border-xheavy rounded-xl p-4 focus-within:ring-0 dark:focus-within:ring-0"),ye=Y==="quaternary"&&(ae?"border-token-main-surface-quaternary text-token-text-quaternary px-3 py-2":"border-token-main-surface-quaternary text-token-text-quaternary focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1");let Re;e[65]!==l||e[66]!==Q||e[67]!==ie||e[68]!==_e||e[69]!==ye?(Re=z("rounded-md border shadow-none",Q,ie,_e,ye,l),e[65]=l,e[66]=Q,e[67]=ie,e[68]=_e,e[69]=ye,e[70]=Re):Re=e[70];let Ve;e[71]!==f?(Ve=z("text-token-text-primary block text-xs font-semibold",f),e[71]=f,e[72]=Ve):Ve=e[72];let ze;e[73]!==d||e[74]!==b||e[75]!==Ve?(ze=r.jsx("label",{htmlFor:b,className:Ve,children:d}),e[73]=d,e[74]=b,e[75]=Ve,e[76]=ze):ze=e[76];const Fe=d&&"mt-1";let be;e[77]!==c||e[78]!==Fe?(be=z(Fe,"relative",c),e[77]=c,e[78]=Fe,e[79]=be):be=e[79];const Oe=n||void 0,qe=s!=null&&K==="right"&&"pe-6",Ze=s!=null&&K==="left"&&"ps-6",st=Y==="neutral"||Y==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",rt=Y==="quaternary"?"placeholder:text-token-text-quaternary":"placeholder-gray-500";let wt;e[80]!==p||e[81]!==qe||e[82]!==Ze||e[83]!==st||e[84]!==rt?(wt=z("block w-full border-0 p-0 shadow-none outline-hidden focus-within:shadow-none focus-within:ring-0 focus-within:outline-hidden focus:border-none focus:ring-0 sm:text-sm",qe,Ze,st,rt,p),e[80]=p,e[81]=qe,e[82]=Ze,e[83]=st,e[84]=rt,e[85]=wt):wt=e[85];let at;e[86]!==Ae||e[87]!==o||e[88]!==a||e[89]!==i||e[90]!==u||e[91]!==he||e[92]!==pe||e[93]!==ve||e[94]!==h||e[95]!==_||e[96]!==b||e[97]!==C||e[98]!==w||e[99]!==M||e[100]!==A||e[101]!==I||e[102]!==P||e[103]!==R||e[104]!==O||e[105]!==D||e[106]!==H||e[107]!==Oe||e[108]!==wt||e[109]!==$?(at=r.jsx("input",T(U(T({},A),{style:H,ref:R,type:$,name:b,id:b,list:h,role:O,"aria-label":Oe,onPaste:M,className:wt,placeholder:I,onBlur:he,onFocus:w,onChange:pe,onKeyDown:ve,autoComplete:a,spellCheck:D,autoCapitalize:o,autoFocus:i,disabled:u,maxLength:_,readOnly:P,onClick:C}),Ae)),e[86]=Ae,e[87]=o,e[88]=a,e[89]=i,e[90]=u,e[91]=he,e[92]=pe,e[93]=ve,e[94]=h,e[95]=_,e[96]=b,e[97]=C,e[98]=w,e[99]=M,e[100]=A,e[101]=I,e[102]=P,e[103]=R,e[104]=O,e[105]=D,e[106]=H,e[107]=Oe,e[108]=wt,e[109]=$,e[110]=at):at=e[110];let kt;e[111]!==s||e[112]!==te||e[113]!==k?(kt=s!=null&&(k?r.jsx("button",{className:te,onClick:k,children:r.jsx(s,{className:"icon-sm"})}):r.jsx("div",{className:te,children:r.jsx(s,{className:"icon-sm"})})),e[111]=s,e[112]=te,e[113]=k,e[114]=kt):kt=e[114];let Nt;e[115]!==se||e[116]!==S?(Nt=S&&se&&r.jsx("button",{type:"button",className:"text-token-text-tertiary absolute end-0 top-1/2 -translate-y-1/2",onClick:S,children:r.jsx(mO,{className:"icon-sm"})}),e[115]=se,e[116]=S,e[117]=Nt):Nt=e[117];let Ot;e[118]!==g||e[119]!==be||e[120]!==at||e[121]!==kt||e[122]!==Nt?(Ot=r.jsxs("div",{className:be,children:[at,kt,Nt,g]}),e[118]=g,e[119]=be,e[120]=at,e[121]=kt,e[122]=Nt,e[123]=Ot):Ot=e[123];let At;return e[124]!==Re||e[125]!==ze||e[126]!==Ot?(At=r.jsxs("div",{className:Re,children:[ze,Ot]}),e[124]=Re,e[125]=ze,e[126]=Ot,e[127]=At):At=e[127],At}var j5;const LJe=Mt.div(j5||(j5=St(["text-base text-token-text-primary flex flex-col gap-9 my-6"])));var P5;const rse=Mt.div(P5||(P5=St(["text-base font-semibold"])));var R5;const DJe=Mt.div(R5||(R5=St(["text-base font-semibold"])));var O5;const FJe=Mt.div(O5||(O5=St(["flex flex-col divide-y divide-token-border-default border-y border-token-border-default"])));var L5;const ise=Mt.div(L5||(L5=St(["flex flex-col w-full m-auto md:m-0"])));var D5;const lse=Mt.div(D5||(D5=St(["text-sm"])));var F5;const BJe=Mt.div(F5||(F5=St(["flex justify-between py-3 gap-4"])));var B5;const UJe=Mt.hr(B5||(B5=St(["max-w-xl border-token-border-default"])));var U5;const $Je=Mt.div(U5||(U5=St(["text-token-text-secondary text-sm mt-6"]))),HJe=({icon:t,title:e,body:s,toggle:n,disabled:o=!1,disabledPill:a,disabledMessage:i,children:l,showDivider:c=!0})=>r.jsx(It,{label:i,side:"top",disabled:!o||!i,className:"max-w-xl",triggerAs:null,children:r.jsxs("div",{children:[r.jsxs(ise,{className:z("border-token-border-default mb-3 p-6",o&&"text-token-text-tertiary"),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t&&r.jsx(t,{className:"icon-sm"}),r.jsxs(rse,{className:"flex items-center gap-3",children:[e,o&&a&&r.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:a})]})]}),r.jsx("div",{children:n})]}),r.jsx(lse,{children:s}),l&&r.jsx("div",{className:"mt-4",children:l})]}),c&&r.jsx("div",{className:"border-token-border-default mt-6 border border-t"})]})});function pO(t,e){return dt({queryKey:["workspace/identity",t],queryFn:async()=>{if(t!==void 0)return await de.safeGet("/accounts/{account_id}/identity",{parameters:{path:{account_id:t}}})},enabled:e})}function GJe(t){const e=eC(t),s=e?UP(e):null,n=s==null?void 0:s.pwd_auth_time;return n==null?!1:Date.now()-n<1800*1e3}function cse(t){return dt({queryKey:["sso/workos/connections",t],queryFn:()=>{if(t!==void 0)return de.safeGet("/accounts/{account_id}/sso/workos/connections/list",{authOption:is.SendIfAvailable,parameters:{path:{account_id:t}}})},enabled:t!=null,retry:(e,s)=>s instanceof Zs&&(s.status===401||s.code==="reauth_required")?!1:e<3})}function VJe(){const t=Sa(mr.businessWorkspaceId),e=G(),s=Ee(e,"4105779609"),o=Sa(mr.isTeamPlan)?s:!0,{data:a,isFetching:i,isPending:l}=cse(o&&t!=null?t:void 0),c=a instanceof Zs?a:void 0;return{connection:c||a==null?void 0:a[0],error:c,enabled:o,isLoading:i||l}}function zJe(t){const e=Gt();return ds({mutationFn:()=>de.safePost("/accounts/{account_id}/sso/connections/workos",{requestBody:{enabled_client_names:["chat"]},authOption:is.SendIfAvailable,parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function WJe(){const t=Sa(mr.businessWorkspaceId),{data:e}=pO(t!=null?t:void 0,t!=null);return e==null?void 0:e.allow_external_domain_invites}function qJe(){const t=Sa(mr.businessWorkspaceId),{data:e}=pO(t!=null?t:void 0,t!=null);return x.useMemo(()=>(e==null?void 0:e.domains)&&(e==null?void 0:e.domains.filter(s=>s.status==="verified")),[e==null?void 0:e.domains])}function KJe(t){const e=ne(),s=Kt(),n=Gt();return ds({mutationFn:({shouldAutoProvision:o})=>de.safePost("/accounts/{account_id}/settings/auto_provision",{parameters:{path:{account_id:t}},requestBody:{value:o}}).then(a=>{const i=o?ti.autoProvisionEnabledToast:ti.autoProvisionDisabledToast;return s.success(e.formatMessage(i),{duration:3}),a}).catch(a=>{throw s.danger(a.message,{toastId:"useShouldAutoProvisionMutation",loggingTitle:a.message,loggingDescription:"Auto provisioning toggle failed"}),a}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace/identity",t]})}})}function YJe(t){const e=ne(),s=Kt(),n=Gt();return ds({mutationFn:async({shouldAllowExternalDomainInvites:o})=>{try{const a=await de.safePost("/accounts/{account_id}/settings/allow_external_domain_invites",{parameters:{path:{account_id:t}},requestBody:{value:o}}),i=o?ti.allowExternalDomainInvitesToast:ti.disableExternalDomainInvitesToast;return s.success(e.formatMessage(i),{duration:3}),a}catch(a){throw s.danger(a.message,{toastId:"useShouldDisableExternalDomainInvitesMutation",loggingTitle:a.message,loggingDescription:"External domain invites toggle failed"}),a}},onSuccess:()=>{n.invalidateQueries({queryKey:["workspace/identity",t]})}})}function QJe(t){const e=Gt(),s=Kt();return ds({mutationFn:({hostname:n})=>de.safePost("/accounts/{account_id}/domains",{parameters:{path:{account_id:t}},requestBody:{hostname:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace/identity",t]}),e.invalidateQueries({queryKey:["builderProfile"]})},onError:n=>{s.danger(n.message,{toastId:"useAddDomainMutation",loggingTitle:n.message,loggingDescription:"Domain add failed"})}})}function use(t){const e=Gt();return ds({mutationFn:({domainId:s})=>de.safeDelete("/accounts/{account_id}/domains/{domain_id}",{parameters:{path:{account_id:t,domain_id:s}}}),onSuccess:()=>{e.refetchQueries({queryKey:["workspace/identity",t]}),e.refetchQueries({queryKey:["builderProfile"]})}})}function JJe(t,e){var i;const s=Gt(),n=Kt(),o=ne(),a=(i=e==null?void 0:e.suppressSuccessToast)!=null?i:!1;return ds({mutationFn:({value:l,public_display_name:c,use_workspace_name_for_discovery:u})=>de.safePost("/accounts/{account_id}/settings/workspace_discoverable",{parameters:{path:{account_id:t}},requestBody:{value:l,public_display_name:c,use_workspace_name_for_discovery:u}}),onSuccess:(l,c)=>{if(s.invalidateQueries({queryKey:["workspace-settings",t]}),s.invalidateQueries({queryKey:["discoverable-workspaces"]}),!a){let u;c.action==="name"?u=ti.discoveryDisplayNameUpdatedToast:u=c.value?ti.discoveryEnabledToast:ti.discoveryDisabledToast,n.success(o.formatMessage(u),{duration:3})}},onError:l=>{var c;n.danger((c=l.message)!=null?c:"Failed to update discovery settings",{toastId:"workspace_discoverability",loggingTitle:l.message,loggingDescription:"Workspace discoverability update failed"})}})}function ZJe(t){const e=Gt(),s=Kt(),n=ne();return ds({mutationFn:({autoAcceptRequests:o})=>de.safePost("/accounts/{account_id}/settings/auto_accept_requests",{parameters:{path:{account_id:t}},requestBody:{value:o}}),onSuccess:(o,a)=>{e.invalidateQueries({queryKey:["workspace-settings",t]});const i=a.autoAcceptRequests?ti.manualApprovalDisabledToast:ti.manualApprovalEnabledToast;s.success(n.formatMessage(i),{duration:3})},onError:o=>{var a;s.danger((a=o.message)!=null?a:"Failed to update approval setting",{toastId:"workspace_manual_approval",loggingTitle:o.message,loggingDescription:"Workspace manual approval update failed"})}})}function XJe(t){const e=Gt();return ds({mutationFn:({enforcementStatus:s})=>de.safePost("/accounts/{account_id}/sso/workos/connections/workos_enforcement",{parameters:{path:{account_id:t}},requestBody:{enforcement_status:s}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function eZe(t){const e=Gt();return ds({mutationFn:()=>de.safePost("/accounts/{account_id}/sso/workos/connections/toggle_enabled",{parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}var $5;Mt.div($5||($5=St(["text-md mb-4 text-token-text-secondary"])));const tZe={[U0.VERIFIED]:Je({id:"i7FkyS",defaultMessage:"Verified"}),[U0.PENDING]:Je({id:"THBv/l",defaultMessage:"Pending"}),[U0.EXPIRED]:Je({id:"+sjWGK",defaultMessage:"Expired"})},ti=Ne({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"},allowExternalDomainInvitesToast:{id:"j0jI/4",defaultMessage:"External domain invites are allowed for this workspace"},disableExternalDomainInvitesToast:{id:"67yB97",defaultMessage:"External domain invites are disabled for this workspace"},discoveryEnabledToast:{id:"workspaceIdentity.discoveryEnabledToast",defaultMessage:"Workspace is now discoverable"},discoveryDisabledToast:{id:"workspaceIdentity.discoveryDisabledToast",defaultMessage:"Workspace is no longer discoverable"},discoveryDisplayNameUpdatedToast:{id:"workspaceIdentity.discoveryDisplayNameUpdatedToast",defaultMessage:"Workspace display name updated"},manualApprovalEnabledToast:{id:"workspaceIdentity.manualApprovalEnabledToast",defaultMessage:"Join requests now require manual approval"},manualApprovalDisabledToast:{id:"workspaceIdentity.manualApprovalDisabledToast",defaultMessage:"Join requests will be auto-accepted"}});function dse(t,e){"use forget";const s=F.c(8),n=e===void 0?!0:e;let o;s[0]!==t?(o=["account-metadata",t],s[0]=t,s[1]=o):o=s[1];const a=n&&t!=null;let i;s[2]!==t?(i=async()=>{if(t)try{return await de.safeGet("/accounts/{account_id}/metadata",{parameters:{path:{account_id:t}}})}catch(c){return}},s[2]=t,s[3]=i):i=s[3];let l;return s[4]!==o||s[5]!==a||s[6]!==i?(l={queryKey:o,enabled:a,queryFn:i},s[4]=o,s[5]=a,s[6]=i,s[7]=l):l=s[7],dt(l)}function sZe(t,e=!0){var n;const{data:s}=dse(t,e);return(n=s==null?void 0:s.k12_creator_email_domain)!=null?n:null}function nZe(t){return t===Uv.ADMIN||t===Uv.OWNER}function oZe(t){return t===Uv.OWNER}function aZe(t,e){switch(e){case Ka.BROWSER:return"Web browsing";case Ka.PYTHON:return"Code interpreter & Data Analysis";case Ka.JIT_PLUGIN:return"Custom actions";case Ka.RETRIEVAL:return"File retrieval";case Ka.DALLE:return"DALLE image generation";case Ka.IMAGE_GEN:return"4o image generation";case Ka.CANVAS:return"Canvas";case ec.Private:return"Builder only";case ec.Workspace:return t.data.name;case ec.Link:return"Anyone with link";case ec.Marketplace:return"Public";case Ka.CONNECTOR:return"Apps";default:return null}}const gx=ue(Ce,"99561c",20,20);function rZe(){const{data:t}=Ic(),e=G(),s=t==null?void 0:t.accountItems.find(l=>l.ssoConnectionName),n=t==null?void 0:t.accountItems.find(l=>!l.ssoConnectionName),o=!!s,a=!o&&!!n,i=()=>{const l=s!=null&&s.ssoConnectionName&&o?{connection:s.ssoConnectionName}:void 0;os(e,{fallbackScreenHint:"login",additionalAuthParams:l})};return r.jsx(Ft,{testId:"modal-invalid-accounts",isOpen:!0,onClose:Tn,type:"warning",size:"custom",className:"max-w-3xl",title:r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"text-lg",children:r.jsx(j,T({},Ul.title))})}),icon:gx,primaryButton:r.jsx(mn.Button,{onClick:()=>{B.logLogOutButtonClicked({location:"invalid_account_modal"},rK.ACCESS_LOGOUT_ACTION_LOCATION_INVALID_ACCOUNT_MODAL),iK()},color:"primary",children:r.jsx(j,T({},Ul.logOut))}),secondaryButton:o||a?r.jsx(mn.Button,{onClick:i,color:"primary",children:r.jsx(j,T({},o?Ul.ssoButton:Ul.noSSOButton))}):null,children:r.jsx("div",{className:"flex flex-col space-y-4",children:r.jsxs("div",{children:[r.jsx("p",{children:r.jsx(j,T({},Ul.description))}),r.jsx("br",{}),o&&r.jsx("p",{children:r.jsx(j,T({},Ul.ssoSuggestion))}),a&&r.jsx("p",{children:r.jsx(j,T({},Ul.noSSOSuggestion))})]})})})}const Ul=Ne({title:{id:"sMC0Cy",defaultMessage:"No Accessible Workspaces"},description:{id:"ADpJJ4",defaultMessage:"It looks like you're currently unable to access any of your accounts. Try waiting a minute and logging in again."},logOut:{id:"KlMYRb",defaultMessage:"Log out"},ssoSuggestion:{id:"KCNTGv",defaultMessage:"Logging in with SSO may fix these issues."},noSSOSuggestion:{id:"mp/4+s",defaultMessage:"Logging in without SSO may fix these issues."},ssoButton:{id:"Nsa12I",defaultMessage:"Log in with SSO"},noSSOButton:{id:"60pUg9",defaultMessage:"Log in"}});function fse(t){const e=ne(),s=Kt();return dt({queryKey:["organization-subscription",t],queryFn:async()=>await de.safeGet("/subscriptions",{parameters:{query:t}}).catch(n=>(s.danger(e.formatMessage(rM.subscriptionLoadError,{error:n.message}),{toastId:"subscription_data",loggingTitle:rM.subscriptionLoadError.defaultMessage,loggingDescription:"Failed to load subscription"}),null)),enabled:t.account_id!=null||t.organization_id!=null})}function Dw(){var i,l;const t=fs(),e=t==null?void 0:t.id,s=(i=t==null?void 0:t.data.organizationId)!=null?i:void 0,n=t==null?void 0:t.isEnterprisey(),a=!((l=ct(jt()))!=null&&l.hasPaidSubscription())||!!(t!=null&&t.isFreeWorkspace())?{}:n?{organization_id:s}:{account_id:e};return fse(a)}function iZe(t,e,s,n,o=!1){return dt({queryKey:["get-subscription-update-preview",e,n,s],queryFn:async()=>await de.safeGet("/subscriptions/update/preview",{parameters:{query:{account_id:t,updated_plan:s,updated_seats:e,updated_promo_id:n}}}),enabled:!o})}function lZe(t){const e=Gt();return ds({mutationFn:async s=>de.safePost("/subscriptions/cancel",{requestBody:{account_id:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]}),e.invalidateQueries($P())}})}function cZe(t){const e=Gt();return ds({mutationFn:async s=>de.safePost("/subscriptions/renew",{requestBody:{account_id:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}function uZe(t){const e=Gt();return ds({mutationFn:({accountId:s,updatedPlan:n,updatedSeats:o,updatedPriceInterval:a,updatedPromoId:i,updatedPromoCode:l,updatedPromoCampaign:c})=>de.safePost("/subscriptions/update",{requestBody:{account_id:s,updated_plan:n,updated_seats:o,updated_price_interval:a,updated_promo_id:i,updated_promo_code:l,updated_promo_campaign:c}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}const rM=Ne({subscriptionLoadError:{id:"useSubscriptionData.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists."}});function gO(t,e){return new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"short",day:"numeric"}).format(e)}function mse(t,e){return new Intl.DateTimeFormat(t.locale,{month:"short",day:"numeric"}).format(e)}var ey,iM;function hO(){if(iM)return ey;iM=1;function t(e,s,n){var o=-1,a=e.length;s<0&&(s=-s>a?0:a+s),n=n>a?a:n,n<0&&(n+=a),a=s>n?0:n-s>>>0,s>>>=0;for(var i=Array(a);++o<a;)i[o]=e[o+s];return i}return ey=t,ey}var ty,lM;function pse(){if(lM)return ty;lM=1;var t=hO();function e(s,n,o){var a=s.length;return o=o===void 0?a:o,!n&&o>=a?s:t(s,n,o)}return ty=e,ty}var sy,cM;function _O(){if(cM)return sy;cM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",o=e+s+n,a="\\ufe0e\\ufe0f",i="\\u200d",l=RegExp("["+i+t+o+a+"]");function c(u){return l.test(u)}return sy=c,sy}var ny,uM;function gse(){if(uM)return ny;uM=1;function t(e){return e.split("")}return ny=t,ny}var oy,dM;function hse(){if(dM)return oy;dM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",o=e+s+n,a="\\ufe0e\\ufe0f",i="["+t+"]",l="["+o+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",h="["+a+"]?",_="(?:"+p+"(?:"+[d,f,m].join("|")+")"+h+g+")*",b=h+g+_,y="(?:"+[d+l+"?",l,f,m,i].join("|")+")",v=RegExp(c+"(?="+c+")|"+y+b,"g");function S(C){return C.match(v)||[]}return oy=S,oy}var ay,fM;function _se(){if(fM)return ay;fM=1;var t=gse(),e=_O(),s=hse();function n(o){return e(o)?s(o):t(o)}return ay=n,ay}var ry,mM;function xse(){if(mM)return ry;mM=1;var t=pse(),e=_O(),s=_se(),n=lp();function o(a){return function(i){i=n(i);var l=e(i)?s(i):void 0,c=l?l[0]:i.charAt(0),u=l?t(l,1).join(""):i.slice(1);return c[a]()+u}}return ry=o,ry}var iy,pM;function xO(){if(pM)return iy;pM=1;var t=xse(),e=t("toUpperCase");return iy=e,iy}var ly,gM;function yse(){if(gM)return ly;gM=1;var t=lp(),e=xO();function s(n){return e(t(n).toLowerCase())}return ly=s,ly}var bse=yse();const vse=en(bse),Sse=7,Cse=1;function yO(){"use forget";const t=F.c(7),[e,s]=yi(Be.SubscriptionFailedBanner,null,wse);let n;if(t[0]!==e){const c=e!=null?ta(e):null;n=c==null?!0:new Date>tC(c,Cse),t[0]=e,t[1]=n}else n=t[1];const o=n;let a;t[2]!==s?(a=()=>{s(Wo(new Date))},t[2]=s,t[3]=a):a=t[3];const i=a;let l;return t[4]!==o||t[5]!==i?(l={canBeSeen:o,markSeen:i},t[4]=o,t[5]=i,t[6]=l):l=t[6],l}function wse(t){return typeof t=="number"}function dZe(){"use forget";var y;const t=G(),e=fs(),{data:s,isPending:n}=Dw(),{canBeSeen:o}=yO(),a=jc();if(!((y=ct(t))!=null&&y.hasPaidSubscription())||a)return"hide";if(n||!e)return"loading";if(!s)return"hide";const i=e==null?void 0:e.isStandardUserOfAccount(),l=s.plan_type===tt.SELF_SERVE_BUSINESS,c=bO(s.plan_type),u=s.became_delinquent_timestamp!=null?new Date(s.became_delinquent_timestamp):null,d=l&&i?3:2,f=u!=null&&new Date>tC(u,d),m=s.grace_period_end_timestamp!=null&&new Date(s.grace_period_end_timestamp)>new Date,p=!!s.is_delinquent&&m&&s.will_renew&&f,g=p&&l,h=!!(p&&!l&&o&&(c!=null&&c.get("include_banner_notifications",!1))),_=Ee(jt(),"2293185713");return g||h||_?"show":"hide"}function fZe(t){"use forget";const e=F.c(53),{onClose:s}=t,n=ne(),o=yt(),{data:a}=Dw(),{markSeen:i}=yO(),[l,c]=x.useState(!1),u=fs();let d;e[0]!==u?(d=u==null?void 0:u.getWorkspaceId(),e[0]=u,e[1]=d):d=e[1];const f=d;let m;e[2]!==u||e[3]!==a?(m=a&&u?kse(a,u):null,e[2]=u,e[3]=a,e[4]=m):m=e[4];const p=m;let g,h;if(e[5]!==p?(g=()=>{p==="teamMember"?B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to User","chatgpt_web_subscription_renewal_failed_banner_shown_to_user"):p==="teamOwner"?B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Owner","chatgpt_web_subscription_renewal_failed_banner_shown_to_owner"):p==="personal"&&B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Personal User","chatgpt_web_subscription_renewal_failed_banner_shown_to_personal_user")},h=[p],e[5]=p,e[6]=g,e[7]=h):(g=e[6],h=e[7]),x.useEffect(g,h),!a)return null;let _,b,y;if(e[8]!==a.grace_period_end_timestamp||e[9]!==a.plan_type||e[10]!==p){const q=bO(a.plan_type);let W;e[14]!==a.grace_period_end_timestamp?(W=a.grace_period_end_timestamp!=null&&lK(new Date(a.grace_period_end_timestamp),Sse)<new Date,e[14]=a.grace_period_end_timestamp,e[15]=W):W=e[15],_=W,b=Boolean,y=p==="personal"&&(q==null?void 0:q.get("is_banner_notification_dismissible",!1)),e[8]=a.grace_period_end_timestamp,e[9]=a.plan_type,e[10]=p,e[11]=_,e[12]=b,e[13]=y}else _=e[11],b=e[12],y=e[13];const v=b(y);let S,C;if(e[16]!==n||e[17]!==a.grace_period_end_timestamp||e[18]!==a.plan_type){const q=a.grace_period_end_timestamp!=null?new Date(a.grace_period_end_timestamp):null;let W;e[21]!==a.plan_type?(W=vse(a.plan_type),e[21]=a.plan_type,e[22]=W):W=e[22],S=W,C=q!=null?gO(n,q):null,e[16]=n,e[17]=a.grace_period_end_timestamp,e[18]=a.plan_type,e[19]=S,e[20]=C}else S=e[19],C=e[20];const w=C;let k;e[23]!==v||e[24]!==i||e[25]!==s?(k=()=>{v&&(B.logEventWithStatsig("Subscription Renewal Failed Banner Personal Dismissed","chatgpt_web_subscription_renewal_failed_banner_personal_dismissed"),i()),s()},e[23]=v,e[24]=i,e[25]=s,e[26]=k):k=e[26];const E=k;let M;e[27]!==E||e[28]!==f?(M=async()=>{B.logEventWithStatsig("Subscription Renewal Failed Banner Owner Clicked","chatgpt_web_subscription_renewal_failed_banner_owner_clicked"),c(!0);const q=await Tse(f);c(!1),E(),location.href=q},e[27]=E,e[28]=f,e[29]=M):M=e[29];const N=M;let A;e[30]!==E||e[31]!==o?(A=()=>{B.logEventWithStatsig("Subscription Renewal Failed Banner Personal Manage Subscription CTA Clicked","chatgpt_web_subscription_renewal_failed_banner_personal_cta_clicked"),E(),o("/account/manage")},e[30]=E,e[31]=o,e[32]=A):A=e[32];const I=A,P=!v;let R;e[33]!==S?(R=r.jsx("span",{className:"text-black",children:r.jsx(j,{id:"SubscriptionRenewalFailedBanner.title",defaultMessage:"{planName} plan failed to renew",values:{planName:S}})}),e[33]=S,e[34]=R):R=e[34];const O=p==="teamMember"?E:p==="teamOwner"?N:I;let L;e[35]!==n||e[36]!==p?(L=n.formatMessage(p==="teamMember"?Je({id:"SubscriptionRenewalFailedBanner.continue",defaultMessage:"Continue"}):Je({id:"SubscriptionRenewalFailedBanner.updatePayment",defaultMessage:"Update payment"})),e[35]=n,e[36]=p,e[37]=L):L=e[37];let D;e[38]!==l||e[39]!==O||e[40]!==L?(D=r.jsx(E_,{color:"primary",onClick:O,loading:l,title:L}),e[38]=l,e[39]=O,e[40]=L,e[41]=D):D=e[41];let H;e[42]!==w||e[43]!==S||e[44]!==_||e[45]!==p?(H=p==="teamMember"?r.jsx(j,{id:"SubscriptionRenewalFailedBanner.userMessage",defaultMessage:"Your workspace will be deactivated on {date}. Please contact your workspace admin.",values:{date:w}}):p==="teamOwner"?r.jsx(j,{id:"SubscriptionRenewalFailedBanner.ownerMessage",defaultMessage:"Update your payment details before {date} to continue accessing your workspace.",values:{date:w}}):_?r.jsx(j,{id:"SubscriptionRenewalFailedBanner.personalDescriptionWithDate",defaultMessage:"Update your payment details before {date} to continue using ChatGPT {planName}.",values:{date:w,planName:S}}):r.jsx(j,{id:"SubscriptionRenewalFailedBanner.personalDescription",defaultMessage:"Update your payment details soon to continue using ChatGPT {planName}.",values:{planName:S}}),e[42]=w,e[43]=S,e[44]=_,e[45]=p,e[46]=H):H=e[46];let V;return e[47]!==E||e[48]!==P||e[49]!==R||e[50]!==D||e[51]!==H?(V=r.jsx(Ft,{testId:"modal-subscription-failure",isOpen:!0,onClose:E,showCloseButton:!0,shouldIgnoreClickOutside:P,headerClassName:"bg-yellow-300 dark:bg-yellow-500 text-black",contentClassName:"mt-2",title:R,primaryButton:D,children:H}),e[47]=E,e[48]=P,e[49]=R,e[50]=D,e[51]=H,e[52]=V):V=e[52],V}function kse(t,e){const s=t.plan_type===tt.SELF_SERVE_BUSINESS,n=e.isStandardUserOfAccount();return s?n?"teamMember":"teamOwner":"personal"}async function Tse(t){try{return(await de.safeGet("/payments/customer_portal",{parameters:{query:{account_id:t}}})).url}catch(e){returnwindow.location.origin+"/admin/billing"}}function bO(t){switch(t){case tt.PLUS:return Xe(jt(),"3850010910");case tt.GO:return Xe(jt(),"1445695849");case tt.PRO:return Xe(jt(),"2420067952");default:return null}}const mZe=(t,e=10080*60*1e3)=>{if(!t)return{isFresh:!1,hasWorkspacesToJoin:null};try{const s=JSON.parse(t),n=Number(s.set_at);if(Number.isNaN(n))return{isFresh:!1,hasWorkspacesToJoin:null};const o=Date.now()-n<e,a=s.hasWorkspacesToJoin===!0||s.hasWorkspacesToJoin==="true";return{isFresh:o,hasWorkspacesToJoin:o?a:null}}catch(s){return{isFresh:!1,hasWorkspacesToJoin:null}}};function pZe(t,e,s){"use forget";var h;const n=F.c(14),o=t===void 0?!0:t,a=e===void 0?!1:e,i=s===void 0?!1:s;let l;n[0]!==i||n[1]!==a?(l=["discoverable-workspaces",{useK12Lookup:a,includeFreeWorkspaces:i}],n[0]=i,n[1]=a,n[2]=l):l=n[2];const c=o;let u;n[3]!==i||n[4]!==a?(u=async()=>await de.safeGet("/accounts/discoverable-workspaces",{parameters:{query:{use_k12_lookup:a,include_free_workspaces:i}}}),n[3]=i,n[4]=a,n[5]=u):u=n[5];let d;n[6]!==l||n[7]!==c||n[8]!==u?(d={queryKey:l,enabled:c,refetchOnMount:"always",queryFn:u},n[6]=l,n[7]=c,n[8]=u,n[9]=d):d=n[9];const f=dt(d);let m;n[10]!==f.data?(m=()=>{var _;if((_=f.data)!=null&&_.workspaces){const b=f.data.workspaces.some(Ese),y=JSON.stringify({set_at:Date.now(),hasWorkspacesToJoin:b});ft.setItem(Be.WorkspaceDiscoveryInfo,y)}},n[10]=f.data,n[11]=m):m=n[11];const p=(h=f.data)==null?void 0:h.workspaces;let g;return n[12]!==p?(g=[p],n[12]=p,n[13]=g):g=n[13],x.useEffect(m,g),f}function Ese(t){return!t.requested}const Mse=We.hasSeenWorkspaceDiscoveryFirstLogin,gZe=()=>{const{eligible:t,markAsViewedDontInvalidateCache:e,isLoading:s}=Ct(Mse);return{setHasSeenWorkspaceDiscoveryFirstLoginDontInvalidateCache:e,hasSeenWorkspaceDiscoveryFirstLoginDate:s?null:!t}},jp="default",mc=new Map,hx=new Set([jp]),Nse="sidebar",Ase="composer";let s2=0,n2=0,k1=0,wm=null;typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(wm=new PerformanceObserver(t=>{t.getEntries().forEach(e=>{if(e.entryType==="longtask"&&(s2+=e.duration),e.entryType==="layout-shift"){if(e.hadRecentInput)return;n2+=1,performance.timeOrigin&&(k1=Math.max(performance.timeOrigin+e.startTime,k1))}})}),wm.observe({entryTypes:["longtask","layout-shift"]}));const Ise=(t,e=jp)=>{if(jd)return;mc.has(e)||mc.set(e,new Map);const s=mc.get(e);s.has(t)||(_x(),s.set(t,{start:Date.now()}))},jse=(t,e=jp,s)=>{var o;if(jd)return;const n=(o=mc.get(e))==null?void 0:o.get(t);if(n&&n.end===void 0){n.end=Date.now();const a=hx.has(e)?"visible":"hidden";Ge.addTiming("render.".concat(t,".").concat(a),{time:n.end,serialTimingGroup:s}),_x()}},Pse=(t,e=jp)=>{if(jd)return;const s=mc.get(e);!s||!s.get(t)||(s.delete(t),_x())};let jd=!1;const hM=()=>{if(!jd){jd=!0;for(const[t,e]of mc.entries()){const s=hx.has(t)?"visible":"hidden";for(const[n,o]of e.entries())o.end||Ge.addFirstTiming("render.".concat(n,".").concat(s,".timeout"))}}},Rse=3e4;let cy;const _x=()=>{cy&&clearTimeout(cy),cy=setTimeout(Ose,1e3)},Ose=()=>{if(jd)return;let t=0,e;for(const[o,a]of mc.entries())if(hx.has(o)){if(![...a.values()].every(i=>i.end)){if(performance.now()<Rse){_x();return}Ge.addFirstTiming("render.StablePage.timeout"),hM();return}for(const[i,l]of a.entries())l.end!==void 0&&l.end>t&&(t=l.end,e=i)}Ge.addFirstTiming("render.StablePage.complete",{time:t});const s=t-performance.timeOrigin,n=cK(s);pt.logEvent("chatgpt_web_stable_page_complete_time",void 0,{raw_duration_ms:String(s),trimmed_duration_ms:String(n)}),e!==void 0&&Ge.addAction("render.stablePage.lastComponent",{componentName:e}),s2>0&&Ge.addFirstDurationVital("render.StablePage.longTaskDuration",Date.now(),s2),n2>0&&Ge.addFirstDurationVital("render.StablePage.layoutShifts",Date.now(),n2),k1>0&&Ge.addFirstTiming("render.StablePage.lastLayoutShift",{time:k1}),wm==null||wm.disconnect(),hM(),typeof window<"u"&&window.dispatchEvent(new Event("allComponentsRendered"))},Lse=t=>{hx.add(t)},ur={markStart:Ise,markRendered:jse,cancelRender:Pse,trackNamespace:Lse,NS_DEFAULT:jp,NS_COMPOSER:Ase,NS_SIDEBAR:Nse};var Dse="Toggle",vO=x.forwardRef((t,e)=>{const c=t,{pressed:s,defaultPressed:n=!1,onPressedChange:o}=c,a=De(c,["pressed","defaultPressed","onPressedChange"]),[i=!1,l]=ii({prop:s,onChange:o,defaultProp:n});return r.jsx(vs.button,U(T({type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0},a),{ref:e,onClick:zt(t.onClick,()=>{t.disabled||l(!i)})}))});vO.displayName=Dse;var hf="ToggleGroup",[SO,hZe]=uK(hf,[M_]),CO=M_(),Fw=gn.forwardRef((t,e)=>{const o=t,{type:s}=o,n=De(o,["type"]);if(s==="single"){const a=n;return r.jsx(Fse,U(T({},a),{ref:e}))}if(s==="multiple"){const a=n;return r.jsx(Bse,U(T({},a),{ref:e}))}throw new Error("Missing prop `type` expected on `".concat(hf,"`"))});Fw.displayName=hf;var[wO,kO]=SO(hf),Fse=gn.forwardRef((t,e)=>{const c=t,{value:s,defaultValue:n,onValueChange:o=()=>{}}=c,a=De(c,["value","defaultValue","onValueChange"]),[i,l]=ii({prop:s,defaultProp:n,onChange:o});return r.jsx(wO,{scope:t.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:gn.useCallback(()=>l(""),[l]),children:r.jsx(TO,U(T({},a),{ref:e}))})}),Bse=gn.forwardRef((t,e)=>{const d=t,{value:s,defaultValue:n,onValueChange:o=()=>{}}=d,a=De(d,["value","defaultValue","onValueChange"]),[i=[],l]=ii({prop:s,defaultProp:n,onChange:o}),c=gn.useCallback(f=>l((m=[])=>[...m,f]),[l]),u=gn.useCallback(f=>l((m=[])=>m.filter(p=>p!==f)),[l]);return r.jsx(wO,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:r.jsx(TO,U(T({},a),{ref:e}))})});Fw.displayName=hf;var[Use,$se]=SO(hf),TO=gn.forwardRef((t,e)=>{const m=t,{__scopeToggleGroup:s,disabled:n=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:l=!0}=m,c=De(m,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),u=CO(s),d=N_(i),f=T({role:"group",dir:d},c);return r.jsx(Use,{scope:s,rovingFocus:o,disabled:n,children:o?r.jsx(GP,U(T({asChild:!0},u),{orientation:a,dir:d,loop:l,children:r.jsx(vs.div,U(T({},f),{ref:e}))})):r.jsx(vs.div,U(T({},f),{ref:e}))})}),T1="ToggleGroupItem",EO=gn.forwardRef((t,e)=>{const s=kO(T1,t.__scopeToggleGroup),n=$se(T1,t.__scopeToggleGroup),o=CO(t.__scopeToggleGroup),a=s.value.includes(t.value),i=n.disabled||t.disabled,l=U(T({},t),{pressed:a,disabled:i}),c=gn.useRef(null);return n.rovingFocus?r.jsx(HP,U(T({asChild:!0},o),{focusable:!i,active:a,ref:c,children:r.jsx(_M,U(T({},l),{ref:e}))})):r.jsx(_M,U(T({},l),{ref:e}))});EO.displayName=T1;var _M=gn.forwardRef((t,e)=>{const c=t,{__scopeToggleGroup:s,value:n}=c,o=De(c,["__scopeToggleGroup","value"]),a=kO(T1,s),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return r.jsx(vO,U(T(T({},l),o),{ref:e,onPressedChange:u=>{u?a.onItemActivate(n):a.onItemDeactivate(n)}}))}),_Ze=Fw,xZe=EO;const Sn=Ne({joinAndLaunchTitle:{id:"workspaceSwitcherFullscreen.joinAndLaunchTitle",defaultMessage:"Join and launch your workspaces"},launchWorkspaceTitle:{id:"workspaceSwitcherFullscreen.launchWorkspaceTitle",defaultMessage:"Launch a workspace"},joinWorkspacesTitle:{id:"workspaceSwitcherFullscreen.joinWorkspacesTitle",defaultMessage:"Join workspaces"},collaborationSubtitle:{id:"workspaceSwitcherFullscreen.collaborationSubtitle",defaultMessage:"Securely collaborate with coworkers using{lineBreak}tools like projects and custom GPTs"},title:{id:"workspaceSwitcherFullscreen.title",defaultMessage:"Select a workspace"},noTopSectionTitle:{id:"workspaceSwitcherFullscreen.noTopSectionTitle",defaultMessage:"Join your teams workspace"},close:{id:"workspaceSwitcherFullscreen.close",defaultMessage:"Close"},emailCanJoinWorkspaces:{id:"workspaceSwitcherFullscreen.emailCanJoinWorkspaces",defaultMessage:"{email} can join {count, plural, one {# workspace} other {# workspaces}}."},accessAndRequestLine:{id:"workspaceSwitcherFullscreen.accessAndRequestLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}} and can join {requestCount, plural, one {# workspace} other {# workspaces}}."},memberCount:{id:"workspaceSwitcherFullscreen.memberCount",defaultMessage:"{count, plural, one {# member} other {# members}}"},accessOnlyLine:{id:"workspaceSwitcherFullscreen.accessOnlyLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}}."},request:{id:"workspaceSwitcherFullscreen.request",defaultMessage:"Request"},join:{id:"workspaceSwitcherFullscreen.join",defaultMessage:"Join"},requested:{id:"workspaceSwitcherFullscreen.requested",defaultMessage:"Requested"},open:{id:"workspaceSwitcherFullscreen.open",defaultMessage:"Open"},personalWorkspace:{id:"workspaceSwitcherFullscreen.personalWorkspace",defaultMessage:"Personal workspace"},createNewWorkspacePrefix:{id:"workspaceSwitcherFullscreen.createNewWorkspacePrefix",defaultMessage:"Want something new?"},createNewWorkspaceLink:{id:"workspaceSwitcherFullscreen.createNewWorkspaceLink",defaultMessage:"Create a new workspace"},hiddenWorkspacesFooter:{id:"workspaceSwitcherFullscreen.hiddenWorkspacesFooter",defaultMessage:"Some workspaces are hidden, contact your admin for more info."},noWorkspacesToJoin:{id:"workspaceSwitcherFullscreen.noWorkspacesToJoin",defaultMessage:"No workspaces to join"},done:{id:"workspaceSwitcherFullscreen.done",defaultMessage:"Done"},requestAccessError:{id:"workspaceSwitcherFullscreen.requestAccessError",defaultMessage:"Something went wrong requesting access. Please try again."}});function MO({children:t}){return r.jsx("div",{className:"border-token-main-surface-tertiary text-token-text-secondary mb-2 flex max-w-[500px] flex-col gap-4 rounded-2xl border border-solid p-[22px] pt-[18px] shadow-sm",children:t})}function qr({className:t}){return r.jsx("div",{className:z("loading-results-shimmer rounded-md",t),children:""})}function uy({className:t}){return r.jsxs("div",{className:z("flex w-full flex-col gap-1",t),children:[r.jsx(qr,{className:"h-[26px] w-[105px]"}),r.jsx(qr,{className:"h-[42px] w-full"})]})}function Hse(){return r.jsxs(MO,{children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[r.jsx(uy,{className:"col-span-1"}),r.jsx(uy,{className:"col-span-1"}),r.jsx(uy,{className:"col-span-1 sm:col-span-2"})]}),r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx(ke,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ke,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(ke,{disabled:!0,children:r.jsx(j,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function yZe({existingCount:t,discoverableCount:e,accountEmail:s,showCollaborationSubtitle:n}){const o=t>0,a=e>0,i=x.useMemo(()=>o&&a?Sn.joinAndLaunchTitle:o?Sn.launchWorkspaceTitle:a?Sn.joinWorkspacesTitle:Sn.noTopSectionTitle,[o,a]),l=o||a,c=n?"mt-2":"mt-3";return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(j,T({},i))}),n&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(j,U(T({},Sn.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),l&&r.jsx("div",{className:"text-token-text-secondary ".concat(c," text-sm"),children:o?a?r.jsx(j,U(T({},Sn.accessAndRequestLine),{values:{email:s,accessCount:t,requestCount:e}})):r.jsx(j,U(T({},Sn.accessOnlyLine),{values:{email:s,accessCount:t}})):r.jsx(j,U(T({},Sn.emailCanJoinWorkspaces),{values:{email:s,count:e}}))})]})}function bZe({showCollaborationSubtitle:t}){return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(j,T({},Sn.noTopSectionTitle))}),t&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(j,U(T({},Sn.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),r.jsx("div",{className:"text-token-text-secondary ".concat(t?"mt-2":"mt-3"," text-sm"),children:r.jsx(qr,{className:"mx-auto h-4 w-64"})})]})}function vZe({workspace:t,isLoading:e,dynamicJoinLabel:s=!1,onRequestAccess:n,onHoverRequest:o}){var c,u;const a=ne(),i=x.useRef(!1),l=()=>{i.current||(i.current=!0,o(t))};return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","data-testid":"discoverable-workspace-row","data-row-type":"discoverable","data-workspace-id":t.id,children:[r.jsx(VP,{src:(c=t.profile_picture_url)!=null?c:void 0,size:"large"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-token-text-primary truncate font-medium",title:(u=t.name)!=null?u:void 0,children:t.name}),r.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:r.jsx(j,U(T({},Sn.memberCount),{values:{count:t.member_count}}))})]}),r.jsx("div",{className:"shrink-0",children:t.requested?r.jsx(ke,{color:"primary",icon:sC,label:a.formatMessage(Sn.requested),onClick:d=>{d.preventDefault(),d.stopPropagation()},children:a.formatMessage(Sn.requested)}):r.jsx(ke,{color:"secondary",onClick:d=>{d.preventDefault(),d.stopPropagation(),n(t)},onMouseEnter:l,onFocus:l,visuallyDisabled:e,disabled:e,children:r.jsx(j,T({},s&&t.auto_accept_requests?Sn.join:Sn.request))})})]})}const Gse=25;function Vse(t,e=0,s="",n=Gse,o=void 0,a=void 0){const i=x.useMemo(()=>a?[...a].sort().join(","):void 0,[a]);return dt({queryKey:["workspace",t,e,s,n,i],queryFn:async()=>{const l=typeof window<"u"?window.location.href:void 0;return await de.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:t},query:{offset:e,limit:n,query:s,role:i}},referrer:l,referrerPolicy:l?"unsafe-url":void 0})},placeholderData:o,enabled:!!t})}function SZe(t,e,s=20,n=0){"use no forget";return dt({queryKey:["workspace",t,"groups",e,n,s],queryFn:async()=>await de.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:t!=null?t:""},query:{query:e,offset:n,orderby:"@score",limit:s}}}),enabled:!!t&&e.trim()!==""})}function CZe(){return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","aria-busy":"true",children:[r.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-full",children:r.jsx(qr,{className:"h-full w-full rounded-none"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"mb-1",children:r.jsx(qr,{className:"h-5 w-48"})}),r.jsx(qr,{className:"h-4 w-28"})]}),r.jsx("div",{className:"shrink-0",children:r.jsx(qr,{className:"h-8 w-24 rounded-md"})})]})}const NO=["AD","AE","AF","AG","AL","AM","AO","AR","AT","AU","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BR","BS","BT","BW","BZ","CA","CD","CF","CG","CH","CI","CL","CM","CO","CR","CV","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FM","FO","FR","GA","GB","GD","GE","GF","GH","GL","GM","GN","GP","GQ","GR","GT","GW","GY","HN","HR","HT","HU","ID","IE","IL","IN","IQ","IS","IT","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MQ","MR","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NG","NI","NL","NO","NP","NR","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PR","PS","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SZ","TD","TF","TG","TH","TJ","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW"],zse=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GF","GP","GR","HU","IS","IE","IT","LV","LI","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","ES","SE","YT"]),wZe=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IE","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","GB","CH"]),Wse=new Set(["GF","GP","MF","MQ","RE","YT"]),o2="US",qse="IN",Kse={AL:"Albania",DZ:"Algeria",AF:"Afghanistan",AD:"Andorra",AO:"Angola",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",AX:"land Islands",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",BL:"Saint Barthlemy",CV:"Cape Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CR:"Costa Rica",CI:"Cte dIvoire",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FJ:"Fiji",FI:"Finland",FO:"Faroe Islands",FR:"France",GF:"French Guiana",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GL:"Greenland",GR:"Greece",GD:"Grenada",GP:"Guadeloupe",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican City",HN:"Honduras",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",NC:"New Caledonia",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",MK:"North Macedonia",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PF:"French Polynesia",PH:"Philippines",PL:"Poland",PM:"St. Pierre & Miquelon",PR:"Puerto Rico",PT:"Portugal",QA:"Qatar",RE:"Runion",RO:"Romania",RW:"Rwanda",KN:"St. Kitts & Nevis",LC:"St. Lucia",VC:"St. Vincent & Grenadines",SH:"Saint Helena",MF:"Saint Martin",WS:"Samoa",SM:"San Marino",ST:"So Tom & Prncipe",SJ:"Svalbard & Jan Mayen",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SE:"Sweden",CH:"Switzerland",SD:"Sudan",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Trkiye",TM:"Turkmenistan",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VN:"Vietnam",WF:"Wallis & Futuna",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function Bw(t){return NO.includes(t)}function Yse({country:t,shouldUseDefaultCountryCode:e}){return t==null||!Bw(t)?(Ge.addError("User country is null or unrecognized - will use ".concat(o2),{user_country:t}),o2):t}function kZe(t){if(t.includes("-")){const e=t.split("-")[1].toUpperCase();if(Bw(e))return e}return null}function Qse(t){try{const e=new Intl.DisplayNames([t],{type:"region"});return s=>{var n;return(n=e.of(s))!=null?n:""}}catch(e){return Ge.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:e}),s=>{var n;return(n=Kse[s])!=null?n:""}}}function Jse(){const t=Gs();return x.useMemo(()=>Qse(t.locale),[t.locale])}function TZe(){const t=Jse();return x.useMemo(()=>[...NO].sort((s,n)=>{const o=t(s),a=t(n);return o.localeCompare(a)}),[t])}function Zse(t){return zse.has(t)}function EZe(t){return t==null?(Ge.addError(new Error("nullish_country_for_vat_collection_exclusion_check"),{country:t}),!1):Wse.has(t)}const MZe="https://help.openai.com/en/collections/3943089-billing",Xse="https://openai.com/chatgpt/enterprise",NZe="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",AZe="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",IZe="https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",jZe="https://help.openai.com/en/articles/11989085-chatgpt-go",Uw="pricing",Pp="team-pricing",PZe="plus-pricing",xx="account-payment-modal-open-from-location",dy="account-payment-modal-view",AO="plus_free_trial",IO="promo_campaign",ene="gift_modal_plan",fy={CHATGPT_IOS:"chatgpt_mobile_ios",SORA_IOS:"sora_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android"};function RZe(t){return t.hash.split("#")[1]===Uw}function tne(t){return t.hash.split("#")[1]===Pp}function an(t,e,s=Uw,n,o,a){const i=new URL(window.location.href);n&&i.searchParams.set(IO,n),o?i.searchParams.set(dy,o):i.searchParams.delete(dy),i.searchParams.delete(ene),t({hash:s,search:i.search},{state:{[xx]:e,[dy]:o}})}function OZe(t){t({hash:""})}function Rp(t){switch(Xe(t,"2788179050").get("plus_upsell_cta_copy","get_plus")){case"upgrade_to_plan":return $t.upgradeToPlus;case"upgrade_your_plan":return $t.upgradeYourPlan;case"upgrade":return $t.upgrade;case"get_plus":default:return $t.getPlus}}function sne(t){switch(Xe(t,"2788179050").get("pro_upsell_cta_copy","get_pro")){case"upgrade_to_plan":return $t.upgradeToPro;case"upgrade_your_plan":return $t.upgradeYourPlan;case"upgrade":return $t.upgrade;case"get_pro":default:return $t.getPro}}function E1(t){return Ee(t,"3600660324")}const nne=(t,e)=>{"use forget";const s=F.c(11),n=yt();let o,a;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=jt(),a=ct(o),s[0]=o,s[1]=a):(o=s[0],a=s[1]);const i=a,{data:l}=Ic(),c=i==null?void 0:i.planType;let u;s[2]!==l?(u=l&&!dK(l),s[2]=l,s[3]=u):u=s[3];const d=u;let f;s[4]!==n||s[5]!==e||s[6]!==t?(f=g=>{xr(o).logEvent(t,void 0,{current_plan_type:c!=null?c:"unknown"}),B.logEvent(e,{planType:c!=null?c:"unknown"}),an(n,g)},s[4]=n,s[5]=e,s[6]=t,s[7]=f):f=s[7];const m=f;let p;return s[8]!==m||s[9]!==d?(p={showUpgradePlan:d,onUpgradeClick:m},s[8]=m,s[9]=d,s[10]=p):p=s[10],p};function LZe({showHiddenWorkspacesNote:t=!1}){const{showUpgradePlan:e,onUpgradeClick:s}=nne("chatgpt_upgrade_in_workspace_switcher_clicked","Upgrade In Workspace Switcher Clicked"),n=fs(),o=!!(e&&n);return!(o||t)?null:r.jsxs("div",{className:"text-token-text-secondary mt-6 text-center text-sm",children:[t&&r.jsx("span",{className:"me-1",children:r.jsx(j,T({},Sn.hiddenWorkspacesFooter))}),o&&r.jsxs(r.Fragment,{children:[r.jsx(j,T({},Sn.createNewWorkspacePrefix)),"",r.jsx("button",{onClick:()=>s("fullscreen-workspace-switcher"),className:"underline",children:r.jsx(j,T({},Sn.createNewWorkspaceLink))})]})]})}function DZe({source:t,existingCount:e,discoverableCount:s}){const n=xs(),o=n==null?void 0:n.email_domain_type,a=x.useMemo(()=>({source:t,join_flow:"discovery",platform:"web",email_domain_type:o}),[o,t]),i=x.useMemo(()=>({existing_workspace_count:e,joinable_workspace_count:s,has_joinable_workspaces:s>0}),[s,e]),l=x.useCallback((p,g,h={})=>{B.logEventWithStatsig(p,g,U(T(T(T({},a),i),h),{ts:new Date().toISOString()}))},[a,i]),c=x.useCallback((p,g={})=>{l("Account: Workspace Discovery Fullscreen Exit","chatgpt_workspace_discovery_fullscreen_exit",T({exit_action:p},g))},[l]),u=x.useRef(!1),d=x.useCallback(p=>{l("Account: Workspace Discovery Request Hovered","chatgpt_workspace_discovery_request_hovered",{workspace_id:p.id})},[l]),f=x.useCallback(p=>{l("Account: Workspace Discovery Request Clicked","chatgpt_workspace_discovery_request_clicked",{workspace_id:p.id})},[l]),m=x.useCallback(()=>{u.current||(u.current=!0,l("Account: Workspace Discovery Fullscreen Viewed","chatgpt_workspace_discovery_fullscreen_viewed"))},[l]);return{hasLoggedFullscreenView:u.current,logFullscreenViewedOnce:m,logExitEvent:c,logRequestButtonHovered:d,logRequestButtonClicked:f}}var jO="AlertDialog",[one]=Oc(jO,[zP]),Ci=zP(),PO=t=>{const o=t,{__scopeAlertDialog:e}=o,s=De(o,["__scopeAlertDialog"]),n=Ci(e);return r.jsx(Pc,U(T(T({},n),s),{modal:!0}))};PO.displayName=jO;var ane="AlertDialogTrigger",rne=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:s}=a,n=De(a,["__scopeAlertDialog"]),o=Ci(s);return r.jsx(aC,U(T(T({},o),n),{ref:e}))});rne.displayName=ane;var ine="AlertDialogPortal",RO=t=>{const o=t,{__scopeAlertDialog:e}=o,s=De(o,["__scopeAlertDialog"]),n=Ci(e);return r.jsx(Rc,T(T({},n),s))};RO.displayName=ine;var lne="AlertDialogOverlay",OO=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:s}=a,n=De(a,["__scopeAlertDialog"]),o=Ci(s);return r.jsx(cp,U(T(T({},o),n),{ref:e}))});OO.displayName=lne;var rd="AlertDialogContent",[cne,une]=one(rd),LO=x.forwardRef((t,e)=>{const u=t,{__scopeAlertDialog:s,children:n}=u,o=De(u,["__scopeAlertDialog","children"]),a=Ci(s),i=x.useRef(null),l=Ks(e,i),c=x.useRef(null);return r.jsx(fK,{contentName:rd,titleName:DO,docsSlug:"alert-dialog",children:r.jsx(cne,{scope:s,cancelRef:c,children:r.jsxs(Zd,U(T(T({role:"alertdialog"},a),o),{ref:l,onOpenAutoFocus:zt(o.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(mK,{children:n}),r.jsx(fne,{contentRef:i})]}))})})});LO.displayName=rd;var DO="AlertDialogTitle",FO=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:s}=a,n=De(a,["__scopeAlertDialog"]),o=Ci(s);return r.jsx(nC,U(T(T({},o),n),{ref:e}))});FO.displayName=DO;var BO="AlertDialogDescription",UO=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:s}=a,n=De(a,["__scopeAlertDialog"]),o=Ci(s);return r.jsx(oC,U(T(T({},o),n),{ref:e}))});UO.displayName=BO;var dne="AlertDialogAction",$O=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:s}=a,n=De(a,["__scopeAlertDialog"]),o=Ci(s);return r.jsx(Xd,U(T(T({},o),n),{ref:e}))});$O.displayName=dne;var HO="AlertDialogCancel",GO=x.forwardRef((t,e)=>{const l=t,{__scopeAlertDialog:s}=l,n=De(l,["__scopeAlertDialog"]),{cancelRef:o}=une(HO,s),a=Ci(s),i=Ks(e,o);return r.jsx(Xd,U(T(T({},a),n),{ref:i}))});GO.displayName=HO;var fne=({contentRef:t})=>{const e="`".concat(rd,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(rd,"` by passing a `").concat(BO,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(rd,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return x.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},mne=PO,pne=RO,gne=OO,hne=LO,_ne=$O,xne=GO,yne=FO,xM=UO;function VO({title:t,description:e,contentClassName:s,onClose:n,actionButton:o,cancelButton:a,moreInfoLink:i}){return r.jsx(mne,{open:!0,onOpenChange:l=>{l||n()},children:r.jsxs(pne,{children:[r.jsx(gne,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0"}),r.jsxs(hne,{className:z("bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",s),onEscapeKeyDown:l=>l.preventDefault(),children:[r.jsx(yne,{className:"border-token-border-default border-b p-4 text-lg font-semibold md:p-6",children:t}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:[r.jsx(xM,{className:"text-base",children:e}),r.jsxs("div",{className:"flex justify-end gap-2",children:[i&&r.jsx(xM,{className:"grow",children:i}),a&&r.jsx(xne,{asChild:!0,children:a}),r.jsx(_ne,{asChild:!0,children:o})]})]})]})]})})}var $w="ToastProvider",[Hw,bne,vne]=rC("Toast"),[zO]=Oc("Toast",[vne]),[Sne,yx]=zO($w),WO=t=>{const{__scopeToast:e,label:s="Notification",duration:n=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:i}=t,[l,c]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),m=x.useRef(!1);return s.trim()||console.error("Invalid prop `label` supplied to `".concat($w,"`. Expected non-empty `string`.")),r.jsx(Hw.Provider,{scope:e,children:r.jsx(Sne,{scope:e,label:s,duration:n,swipeDirection:o,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:i})})};WO.displayName=$w;var qO="ToastViewport",Cne=["F8"],a2="toast.viewportPause",r2="toast.viewportResume",KO=x.forwardRef((t,e)=>{const _=t,{__scopeToast:s,hotkey:n=Cne,label:o="Notifications ({hotkey})"}=_,a=De(_,["__scopeToast","hotkey","label"]),i=yx(qO,s),l=bne(s),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),m=Ks(e,f,i.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;x.useEffect(()=>{const b=y=>{var S;n.length!==0&&n.every(C=>y[C]||y.code===C)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),x.useEffect(()=>{const b=c.current,y=f.current;if(g&&b&&y){const v=()=>{if(!i.isClosePausedRef.current){const k=new CustomEvent(a2);y.dispatchEvent(k),i.isClosePausedRef.current=!0}},S=()=>{if(i.isClosePausedRef.current){const k=new CustomEvent(r2);y.dispatchEvent(k),i.isClosePausedRef.current=!1}},C=k=>{!b.contains(k.relatedTarget)&&S()},w=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",v),b.addEventListener("focusout",C),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",C),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",S)}}},[g,i.isClosePausedRef]);const h=x.useCallback(({tabbingDirection:b})=>{const v=l().map(S=>{const C=S.ref.current,w=[C,...Dne(C)];return b==="forwards"?w:w.reverse()});return(b==="forwards"?v.reverse():v).flat()},[l]);return x.useEffect(()=>{const b=f.current;if(b){const y=v=>{var w,k,E;const S=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!S){const M=document.activeElement,N=v.shiftKey;if(v.target===b&&N){(w=u.current)==null||w.focus();return}const P=h({tabbingDirection:N?"backwards":"forwards"}),R=P.findIndex(O=>O===M);my(P.slice(R+1))?v.preventDefault():N?(k=u.current)==null||k.focus():(E=d.current)==null||E.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[l,h]),r.jsxs(pK,{ref:c,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&r.jsx(i2,{ref:u,onFocusFromOutsideViewport:()=>{const b=h({tabbingDirection:"forwards"});my(b)}}),r.jsx(Hw.Slot,{scope:s,children:r.jsx(vs.ol,U(T({tabIndex:-1},a),{ref:m}))}),g&&r.jsx(i2,{ref:d,onFocusFromOutsideViewport:()=>{const b=h({tabbingDirection:"backwards"});my(b)}})]})});KO.displayName=qO;var YO="ToastFocusProxy",i2=x.forwardRef((t,e)=>{const i=t,{__scopeToast:s,onFocusFromOutsideViewport:n}=i,o=De(i,["__scopeToast","onFocusFromOutsideViewport"]),a=yx(YO,s);return r.jsx(iC,U(T({"aria-hidden":!0,tabIndex:0},o),{ref:e,style:{position:"fixed"},onFocus:l=>{var d;const c=l.relatedTarget;!((d=a.viewport)!=null&&d.contains(c))&&n()}}))});i2.displayName=YO;var bx="Toast",wne="toast.swipeStart",kne="toast.swipeMove",Tne="toast.swipeCancel",Ene="toast.swipeEnd",QO=x.forwardRef((t,e)=>{const u=t,{forceMount:s,open:n,defaultOpen:o,onOpenChange:a}=u,i=De(u,["forceMount","open","defaultOpen","onOpenChange"]),[l=!0,c]=ii({prop:n,defaultProp:o,onChange:a});return r.jsx(A_,{present:s||l,children:r.jsx(Ane,U(T({open:l},i),{ref:e,onClose:()=>c(!1),onPause:Om(t.onPause),onResume:Om(t.onResume),onSwipeStart:zt(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:zt(t.onSwipeMove,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(f,"px")),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(m,"px"))}),onSwipeCancel:zt(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:zt(t.onSwipeEnd,d=>{const{x:f,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(f,"px")),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(m,"px")),c(!1)})}))})});QO.displayName=bx;var[Mne,Nne]=zO(bx,{onClose(){}}),Ane=x.forwardRef((t,e)=>{const R=t,{__scopeToast:s,type:n="foreground",duration:o,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p}=R,g=De(R,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),h=yx(bx,s),[_,b]=x.useState(null),y=Ks(e,O=>b(O)),v=x.useRef(null),S=x.useRef(null),C=o||h.duration,w=x.useRef(0),k=x.useRef(C),E=x.useRef(0),{onToastAdd:M,onToastRemove:N}=h,A=Om(()=>{var L;(_==null?void 0:_.contains(document.activeElement))&&((L=h.viewport)==null||L.focus()),i()}),I=x.useCallback(O=>{!O||O===1/0||(window.clearTimeout(E.current),w.current=new Date().getTime(),E.current=window.setTimeout(A,O))},[A]);x.useEffect(()=>{const O=h.viewport;if(O){const L=()=>{I(k.current),u==null||u()},D=()=>{const H=new Date().getTime()-w.current;k.current=k.current-H,window.clearTimeout(E.current),c==null||c()};return O.addEventListener(a2,D),O.addEventListener(r2,L),()=>{O.removeEventListener(a2,D),O.removeEventListener(r2,L)}}},[h.viewport,C,c,u,I]),x.useEffect(()=>{a&&!h.isClosePausedRef.current&&I(C)},[a,C,h.isClosePausedRef,I]),x.useEffect(()=>(M(),()=>N()),[M,N]);const P=x.useMemo(()=>_?s7(_):null,[_]);return h.viewport?r.jsxs(r.Fragment,{children:[P&&r.jsx(Ine,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),r.jsx(Mne,{scope:s,onClose:A,children:dr.createPortal(r.jsx(Hw.ItemSlot,{scope:s,children:r.jsx(gK,{asChild:!0,onEscapeKeyDown:zt(l,()=>{h.isFocusedToastEscapeKeyDownRef.current||A(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(vs.li,U(T({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":h.swipeDirection},g),{ref:y,style:T({userSelect:"none",touchAction:"none"},t.style),onKeyDown:zt(t.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:zt(t.onPointerDown,O=>{O.button===0&&(v.current={x:O.clientX,y:O.clientY})}),onPointerMove:zt(t.onPointerMove,O=>{if(!v.current)return;const L=O.clientX-v.current.x,D=O.clientY-v.current.y,H=!!S.current,V=["left","right"].includes(h.swipeDirection),q=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,W=V?q(0,L):0,$=V?0:q(0,D),Z=O.pointerType==="touch"?10:2,K={x:W,y:$},Y={originalEvent:O,delta:K};H?(S.current=K,Hg(kne,f,Y,{discrete:!1})):yM(K,h.swipeDirection,Z)?(S.current=K,Hg(wne,d,Y,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(L)>Z||Math.abs(D)>Z)&&(v.current=null)}),onPointerUp:zt(t.onPointerUp,O=>{const L=S.current,D=O.target;if(D.hasPointerCapture(O.pointerId)&&D.releasePointerCapture(O.pointerId),S.current=null,v.current=null,L){const H=O.currentTarget,V={originalEvent:O,delta:L};yM(L,h.swipeDirection,h.swipeThreshold)?Hg(Ene,p,V,{discrete:!0}):Hg(Tne,m,V,{discrete:!0}),H.addEventListener("click",q=>q.preventDefault(),{once:!0})}})}))})}),h.viewport)})]}):null}),Ine=t=>{const u=t,{__scopeToast:e,children:s}=u,n=De(u,["__scopeToast","children"]),o=yx(bx,e),[a,i]=x.useState(!1),[l,c]=x.useState(!1);return One(()=>i(!0)),x.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(lC,{asChild:!0,children:r.jsx(iC,U(T({},n),{children:a&&r.jsxs(r.Fragment,{children:[o.label," ",s]})}))})},jne="ToastTitle",JO=x.forwardRef((t,e)=>{const o=t,{__scopeToast:s}=o,n=De(o,["__scopeToast"]);return r.jsx(vs.div,U(T({},n),{ref:e}))});JO.displayName=jne;var Pne="ToastDescription",Rne=x.forwardRef((t,e)=>{const o=t,{__scopeToast:s}=o,n=De(o,["__scopeToast"]);return r.jsx(vs.div,U(T({},n),{ref:e}))});Rne.displayName=Pne;var ZO="ToastAction",XO=x.forwardRef((t,e)=>{const o=t,{altText:s}=o,n=De(o,["altText"]);return s.trim()?r.jsx(t7,{altText:s,asChild:!0,children:r.jsx(Gw,U(T({},n),{ref:e}))}):(console.error("Invalid prop `altText` supplied to `".concat(ZO,"`. Expected non-empty `string`.")),null)});XO.displayName=ZO;var e7="ToastClose",Gw=x.forwardRef((t,e)=>{const a=t,{__scopeToast:s}=a,n=De(a,["__scopeToast"]),o=Nne(e7,s);return r.jsx(t7,{asChild:!0,children:r.jsx(vs.button,U(T({type:"button"},n),{ref:e,onClick:zt(t.onClick,o.onClose)}))})});Gw.displayName=e7;var t7=x.forwardRef((t,e)=>{const a=t,{__scopeToast:s,altText:n}=a,o=De(a,["__scopeToast","altText"]);return r.jsx(vs.div,U(T({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},o),{ref:e}))});function s7(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),Lne(n)){const o=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const i=n.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...s7(n))}}),e}function Hg(t,e,s,{discrete:n}){const o=s.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&o.addEventListener(t,e,{once:!0}),n?hK(o,a):o.dispatchEvent(a)}var yM=(t,e,s=0)=>{const n=Math.abs(t.x),o=Math.abs(t.y),a=n>o;return e==="left"||e==="right"?a&&n>s:!a&&o>s};function One(t=()=>{}){const e=Om(t);li(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[e])}function Lne(t){return t.nodeType===t.ELEMENT_NODE}function Dne(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function my(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var Fne=WO,Bne=KO,Une=QO,n7=JO,$ne=XO,o7=Gw;function a7({children:t}){return r.jsxs(Fne,{children:[r.jsx(Une,{className:"radix-state-closed:animate-hide radix-state-open:animate-slideIn popover bg-token-main-surface-primary grid grid-cols-[auto_max-content] items-center gap-x-4 rounded-lg p-4 shadow-xs [grid-template-areas:_'title_action'_'description_action'] sm:max-w-2xl",open:!0,children:t}),r.jsx(Bne,{className:"fixed end-0 bottom-0 z-50 m-0 flex max-w-[100vw] list-none flex-col gap-4 p-6 outline-hidden"})]})}const Du="compliance",Hne=3600*24*30*6,Gne={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},Vne={IT:"countdown",KR:"passive"};function zne(t,e){var i,l,c,u,d,f,m,p;const s=qP(e),n=(i=t.registration_country)!=null?i:"",o=n in WP&&((l=t.age_verification)==null?void 0:l.is_required);if(!s&&!o)return Gne;const a=s&&!!t.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:a?(u=(c=t.cookie_consent)==null?void 0:c.analytics_cookies_accepted)!=null?u:!1:!0,showCookieConsentBanner:a&&!!((d=t.cookie_consent)!=null&&d.is_required),isStorageComplianceEnabled:a,ageVerificationDeadline:o&&(m=(f=t.age_verification)==null?void 0:f.remaining_seconds)!=null?m:null,ageVerificationType:o&&(p=Vne[n])!=null?p:"none"}}const r7=Ps({queryKey:[Du],queryFn:async()=>{var e;let t;try{t=await de.safeGet("/compliance")}catch(s){t={registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1}}}if((e=t.cookie_consent)!=null&&e.is_required){const s=En.getBooleanCookie(Mn.AllowNonessential),n=t.cookie_consent.analytics_cookies_accepted;if(s===void 0&&n!=null)En.setBooleanCookie(Mn.AllowNonessential,n,{maxAge:Hne,domain:_K});else if(s!==n&&s!=null){const o={analytics_cookies_accepted:s};return de.safePost("/compliance/cookie_consent",{authOption:is.SendIfAvailable,requestBody:o}),U(T({},t),{cookie_consent:T(T({},t.cookie_consent),o)})}}return t}});function i7({enabled:t,select:e}){return dt(U(T({},r7),{enabled:t,select:e}))}function l7(){const{country:t}=ef(),e=t!=null&&t in WP,s=dt(U(T({},r7),{enabled:e,select:n=>zne(n,t)}));return U(T({},s),{isEnabled:e})}function Wne(){const t=Gt();return ds({mutationFn:e=>de.safePost("/compliance/cookie_consent",{requestBody:e}),onSuccess:()=>{t.refetchQueries({queryKey:[Du]})},onMutate:async e=>{await t.cancelQueries({queryKey:[Du]});const s=t.getQueryData([Du]);return t.setQueryData([Du],n=>{var a;if(n===void 0)return;const o=!!((a=n.cookie_consent)!=null&&a.is_required);return U(T({},n),{cookie_consent:T({is_required:o},e)})}),{previousValue:s}},onError:(e,s,n)=>{n!==void 0&&t.setQueryData([Du],n.previousValue)}})}function FZe({serverPrimedAllowBrowserStorageValue:t,enabled:e}){const{data:s,isLoading:n}=i7({enabled:e,select:o=>{var a;return((a=o.cookie_consent)==null?void 0:a.analytics_cookies_accepted)===!0}});return n||!e?t:s!=null?s:!1}const qne=3600*24;function BZe(t,e=!1){return ja()==null||e?"loading":!t||En.getCookie(Mn.AgeVerification)||t.ageVerificationDeadline==null||t.ageVerificationType==="none"?"hide":"show"}function UZe({onClose:t}){const{data:{ageVerificationType:e,ageVerificationDeadline:s}={}}=l7();return e==="passive"?r.jsx(Kne,{onClose:t}):e==="countdown"&&s!=null?r.jsx(Yne,{onClose:t,ageVerificationDeadline:s}):null}const Kne=({onClose:t})=>{const{country:e}=ef();return x.useEffect(()=>{Ge.addAction("privacy_policy.show_age_verification_modal",{country:e})},[e]),r.jsx(VO,{onClose:t,title:"OpenAI      ",description:r.jsx("div",{className:"whitespace-pre-wrap",children:r.jsxs("p",{children:["ChatGPT  .     , OpenAI  OpenAI       . ChatGPT  ,  18 , 14        .",r.jsx("br",{}),r.jsx("br",{}),"OpenAI  "," ",r.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"    ."})]})}),actionButton:r.jsx(ke,{color:"primary",onClick:async()=>{await de.safePost("/compliance/age_verification"),t()},children:" OpenAI  "}),cancelButton:r.jsx(ke,{as:"link",color:"secondary",to:"/auth/logout",children:""})})},Yne=({onClose:t,ageVerificationDeadline:e})=>{const s=e!=null?Math.floor(e/60/60/24):0;x.useEffect(()=>{pt.logEvent("chatgpt_compliance_age_verification_seen"),B.logEvent("Compliance Age Verification Seen")},[]);const{country:n}=ef();return x.useEffect(()=>{Ge.addAction("privacy_policy.show_age_verification_countdown",{country:n})},[n]),r.jsxs(a7,{children:[r.jsx(n7,{className:"text-sm font-semibold [grid-area:_title]",children:r.jsx(j,U(T({},bM.ageVerificationTitle),{values:{deadline:s,learnMoreLink:o=>r.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:o})}}))}),r.jsx($ne,{altText:"Dismiss notification",asChild:!0,children:r.jsx(ke,{color:"primary",size:"small",onClick:()=>{pt.logEvent("chatgpt_compliance_age_verification_clicked"),B.logEvent("Compliance Age Verification Clicked"),En.setCookie(Mn.AgeVerification,"true",{maxAge:qne,path:"/"}),t(),tn.openModal(Lm.AgeVerificationInterstitial)},children:r.jsx(j,T({},bM.startVerification))})}),r.jsx(o7,{})]})},bM=Ne({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that youre old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardians permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}}),zo=ue(Ce,"ba3792",16,16),c7="https://openai.com/policies/cookie-policy/",$l=Ne({essentialCookies:{id:"settingsModal.privacy.cookieConsent.essentialCookiesLabel",defaultMessage:"Strictly Necessary Cookies (always active)"},marketingCookies:{id:"settingsModal.privacy.cookieConsent.marketingCookiesLabel",defaultMessage:"Marketing Performance Cookies"},analyticsCookies:{id:"settingsModal.privacy.cookieConsent.analyticsCookiesLabel",defaultMessage:"Analytics Cookies"},cookieConsent:{id:"settingsModal.privacy.cookieConsent.header",defaultMessage:"Cookie Preference Center"}});function Vw(t,e){const{isUserInPioneerHR:s,userCountry:n}=Gs();return(!(e!=null&&e.structure)||e.structure!==xK.WORKSPACE)&&qP(n)&&(s!=null?s:!1)}const k_=class k_ extends Lc()(()=>({isOpen:!1})){constructor(){super(...arguments);X(this,"openModal",()=>this.setState(s=>U(T({},s),{isOpen:!0})));X(this,"closeModal",()=>this.setState(s=>U(T({},s),{isOpen:!1})))}};X(k_,"useIsOpen",()=>k_.useState(s=>s.isOpen));let pi=k_;function $Ze(){const t=ne(),e=Gt(),s=G(),n=ct(s),{data:o,isLoading:a}=dt(il),i=pi.useStore(),l=pi.useIsOpen(),c=bl(),[u,d]=x.useState(!1),[f,m]=x.useState(!1),[p,g]=x.useState(!1),{mutate:h}=KP({onMutate:b=>{e.setQueryData(il.queryKey,y=>y?U(T({},y),{consent_analytics:b.consent_analytics,consent_marketing:b.consent_marketing}):{consent_analytics:b.consent_analytics,consent_marketing:b.consent_marketing,is_consent_required:!0})},onSuccess:(b,y)=>{Ge.addAction("cookie-consent.consent-modal.updated-cookie-consent-backend",{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing}),B.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend",{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing})},onError:(b,y)=>{B.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend Error","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend_error",{error:b.message,consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing})}}),_=Vw(s,n)&&l;return x.useEffect(()=>{_&&B.logEventWithStatsig("Cookie Preferences Modal Shown","chatgpt_cookie_prefs_modal_shown")},[_]),r.jsx(Ft,{isOpen:_,testId:"modal-cookie-preferences",onClose:()=>{i.closeModal(),B.logEventWithStatsig("Cookie Preferences Modal Closed","chatgpt_cookie_prefs_modal_closed")},size:"custom",className:"h-[100%] md:max-h-[600px] md:min-h-[600px] md:max-w-[680px]",type:"success",showCloseButton:!0,title:t.formatMessage($l.cookieConsent),children:r.jsxs("div",{className:"flex max-h-[calc(100vh-150px)] w-full flex-col gap-3 overflow-y-auto md:min-h-[380px]",children:[r.jsx("p",{className:"text-token-text-secondary text-sm",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.description.v2",defaultMessage:"Using websites and apps involves storing and retrieving information from your device, including cookies and other identifiers, which can be shared with third parties, for various activities. We provide a simple tool below allowing you to tailor your choices as you deem fit. You can change your consent at any time. <learnMore>Learn more.</learnMore>",values:{learnMore:b=>r.jsx("a",{href:c7,target:"_blank",rel:"noreferrer",className:"underline",children:b})}})}),r.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[r.jsx(_a,{children:c?r.jsx(Xi,{label:t.formatMessage($l.essentialCookies),disabled:!0,enabled:!0,onChange:()=>{},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lh,{id:"essential-cb",checked:!0,disabled:!0}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage($l.essentialCookies)}),r.jsx("button",{onClick:()=>d(!u),children:u?r.jsx(Zr,{className:"icon-sm"}):r.jsx(zo,{className:"icon-sm"})})]}),u&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})]})]})}),r.jsx(_a,{children:c?r.jsx(Xi,{label:t.formatMessage($l.analyticsCookies),enabled:!!(o!=null&&o.consent_analytics),disabled:a,onChange:b=>{var y;B.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:b}),h({consent_analytics:b,consent_marketing:(y=o==null?void 0:o.consent_marketing)!=null?y:!1})},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lh,{id:"analytics-cb",checked:!!(o!=null&&o.consent_analytics),disabled:a,onChange:b=>{var v;const y=b.target.checked;B.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:y}),h({consent_analytics:y,consent_marketing:(v=o==null?void 0:o.consent_marketing)!=null?v:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage($l.analyticsCookies)}),r.jsx("button",{onClick:()=>m(!f),children:f?r.jsx(Zr,{className:"icon-sm"}):r.jsx(zo,{className:"icon-sm"})})]}),f&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})]})]})}),r.jsx(_a,{children:c?r.jsx(Xi,{label:t.formatMessage($l.marketingCookies),enabled:!!(o!=null&&o.consent_marketing),disabled:a,onChange:b=>{var y;B.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:b}),h({consent_marketing:b,consent_analytics:(y=o==null?void 0:o.consent_analytics)!=null?y:!1})},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Lh,{id:"marketing-cb",checked:!!(o!=null&&o.consent_marketing),disabled:a,onChange:b=>{var v;const y=b.target.checked;B.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:y}),h({consent_marketing:y,consent_analytics:(v=o==null?void 0:o.consent_analytics)!=null?v:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage($l.marketingCookies)}),r.jsx("button",{onClick:()=>g(!p),children:p?r.jsx(Zr,{className:"icon-sm"}):r.jsx(zo,{className:"icon-sm"})})]}),p&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})]})]})})]})]})})}function Qne(){const t=x.createContext(null);function e({children:o}){const a=x.use(t),i=x.useState(null);return r.jsx(t.Provider,{value:a!=null?a:i,children:o})}function s({children:o}){const[,a]=to(x.use(t),"Outlet must appear within Root");return o?x.cloneElement(o,{ref:a}):r.jsx("div",{ref:a})}function n({children:o}){const[a]=to(x.use(t),"Content must appear within Root");return a?dr.createPortal(o,a):null}return{Root:e,Outlet:s,Content:n}}function Jne(t){return Object.fromEntries(t.map(s=>{const n=({children:o})=>o;return n.displayName=s,n.slotName=s,[s,n]}))}function Zne(t,e){const s={};return x.Children.forEach(e,n=>{const o=Xne(n)&&Object.prototype.hasOwnProperty.call(t,n.type.slotName)?n.type.slotName:"rest";Array.isArray(s[o])?s[o].push(n):s[o]=[n]}),s}function Xne(t){return x.isValidElement(t)&&typeof t.type=="function"&&typeof t.type.slotName=="string"}function qc(t){"use forget";const e=F.c(24),{className:s,children:n}=t;let o;e[0]!==n?(o=Zne(Op,n),e[0]=n,e[1]=o):o=e[1];const{Navbar:a,ContentSidebar:i,Header:l,Heading:c,rest:u}=o;let d;e[2]!==s?(d=z("flex h-svh w-screen flex-col",s),e[2]=s,e[3]=d):d=e[3];let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=z("@container/main relative flex min-w-0 flex-1 flex-col","-translate-y-[calc(env(safe-area-inset-bottom,0px)/2)] pt-[calc(env(safe-area-inset-bottom,0px)/2)]"),e[4]=f):f=e[4];let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=cC()&&r.jsx("div",{className:"sticky top-0 h-px"}),e[5]=m):m=e[5];let p;e[6]!==u?(p=r.jsx("main",{className:"min-h-0 flex-1",id:"main","z-index":"-1",children:u}),e[6]=u,e[7]=p):p=e[7];let g;e[8]!==l||e[9]!==p?(g=r.jsxs("div",{"data-scroll-root":!0,className:"@w-sm/main:[scrollbar-gutter:stable_both-edges] touch:[scrollbar-width:none] relative flex min-h-0 min-w-0 flex-1 flex-col [scrollbar-gutter:stable] not-print:overflow-x-clip not-print:overflow-y-auto",children:[l,p]}),e[8]=l,e[9]=p,e[10]=g):g=e[10];let h;e[11]!==c||e[12]!==g?(h=r.jsxs("div",{className:f,children:[c,m,g]}),e[11]=c,e[12]=g,e[13]=h):h=e[13];let _;e[14]!==a||e[15]!==h?(_=r.jsxs("div",{className:"relative flex min-h-0 w-full flex-1",children:[a,h]}),e[14]=a,e[15]=h,e[16]=_):_=e[16];let b;e[17]!==i||e[18]!==_?(b=r.jsxs("div",{className:"relative z-0 flex min-h-0 w-full flex-1",children:[_,i]}),e[17]=i,e[18]=_,e[19]=b):b=e[19];let y;e[20]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(zw.Outlet,{}),e[20]=y):y=e[20];let v;return e[21]!==d||e[22]!==b?(v=r.jsx(u7,{children:r.jsxs("div",{className:d,suppressHydrationWarning:!0,"data-sr-block":void 0,children:[b,y]})}),e[21]=d,e[22]=b,e[23]=v):v=e[23],v}function u7(t){"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx(zw.Root,{children:s}),e[0]=s,e[1]=n):n=e[1],n}qc.Context=u7;const Op=Jne(["ContentSidebar","Navbar","Header","Heading"]);qc.ContentSidebar=Op.ContentSidebar;qc.Navbar=Op.Navbar;qc.Header=Op.Header;qc.Heading=Op.Heading;const zw=Qne();qc.FooterBanner=zw.Content;function Ww(t,e){return t.map(s=>s.loaderData&&typeof s.loaderData=="object"&&"pageType"in s.loaderData&&typeof s.loaderData.pageType=="string"?s.loaderData.pageType:null).some(s=>s===e)}function py(t){"use forget";const e=F.c(7),{onClick:s,children:n}=t,o=G(),a=Xe(o,"2118136551"),i=Pa(),l=a.get("show_cookie_banner_improvements",!1),c=l?"secondary":void 0,u=l?"text-sm":"bg-gray-950/5 text-sm text-black hover:bg-gray-800/10 dark:bg-gray-50/5 hover:dark:bg-gray-100/10",d=i?"medium":void 0,f=i?"secondary":c,m=i?"mb-2 sm:mb-3":u;let p;return e[0]!==n||e[1]!==i||e[2]!==s||e[3]!==d||e[4]!==f||e[5]!==m?(p=r.jsx(ke,{as:"button",size:d,color:f,fullWidth:i,className:m,onClick:s,children:n}),e[0]=n,e[1]=i,e[2]=s,e[3]=d,e[4]=f,e[5]=m,e[6]=p):p=e[6],p}function HZe(t){"use forget";const e=F.c(5),{onClose:s}=t,n=ZS();let o;e[0]!==n?(o=Ww(n,"images-app"),e[0]=n,e[1]=o):o=e[1];const a=o;let i;return e[2]!==a||e[3]!==s?(i=r.jsx(qc.FooterBanner,{children:r.jsx(d7,{onClose:s,fixed:a})}),e[2]=a,e[3]=s,e[4]=i):i=e[4],i}function GZe(t){"use forget";const e=F.c(5),{fixed:s}=t,n=s===void 0?!1:s,o=G();let a;e[0]!==o?(a=()=>yK(o),e[0]=o,e[1]=a):a=e[1];const i=oe(a);let l;return e[2]!==n||e[3]!==i?(l=i&&r.jsx(d7,{fixed:n}),e[2]=n,e[3]=i,e[4]=l):l=e[4],l}function d7(t){"use forget";const e=F.c(13),{onClose:s,fixed:n}=t,{mutate:o}=KP();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0],x.useEffect(eoe,a);const l=Pa()?ooe:soe;let c,u;e[1]!==s||e[2]!==o?(c=()=>{o({consent_analytics:!0,consent_marketing:!0}),$0(),s==null||s(),B.logEventWithStatsig("Cookie Consent Banner Accepted","chatgpt_cookie_consent_banner_accepted")},u=()=>{o({consent_analytics:!1,consent_marketing:!1}),$0(),s==null||s(),B.logEventWithStatsig("Cookie Consent Banner Rejected","chatgpt_cookie_consent_banner_rejected")},e[1]=s,e[2]=o,e[3]=c,e[4]=u):(c=e[3],u=e[4]);let d;e[5]!==s?(d=()=>{$0(!0),s==null||s(),B.logEventWithStatsig("Cookie Consent Banner Ignored","chatgpt_cookie_consent_banner_ignored")},e[5]=s,e[6]=d):d=e[6];let f;return e[7]!==l||e[8]!==n||e[9]!==c||e[10]!==u||e[11]!==d?(f=r.jsx(l,{fixed:n,onAccept:c,onReject:u,onIgnore:d}),e[7]=l,e[8]=n,e[9]=c,e[10]=u,e[11]=d,e[12]=f):f=e[12],f}function eoe(){B.logEventWithStatsig("Cookie Consent Banner Shown","chatgpt_cookie_consent_banner_shown")}function f7(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.title",defaultMessage:"We use cookies"}),t[0]=e):e=t[0],e}function m7(){"use forget";const t=F.c(2),e=pi.useStore();let s;return t[0]!==e?(s=r.jsx(j,{id:"cookie-consent-banner.description.v2",defaultMessage:"We use cookies to help this site function, understand service usage, and support marketing efforts. Visit <manageCookiesLink>Manage Cookies</manageCookiesLink> to change preferences anytime. View our <cookiePolicyLink>Cookie Policy</cookiePolicyLink> for more info.",values:{cookiePolicyLink:toe,manageCookiesLink:n=>r.jsx("a",{onClick:o=>{o.preventDefault(),e.openModal()},className:"cursor-pointer underline underline-offset-2",children:n},1)}}),t[0]=e,t[1]=s):s=t[1],s}function toe(t){return r.jsx("a",{className:"underline underline-offset-2",href:c7,target:"_blank",rel:"noreferrer",children:t},0)}function p7(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.reject",defaultMessage:"Reject non-essential"}),t[0]=e):e=t[0],e}function g7(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.accept",defaultMessage:"Accept all"}),t[0]=e):e=t[0],e}function h7(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.manage-cookies",defaultMessage:"Manage Cookies"}),t[0]=e):e=t[0],e}function soe(t){"use forget";const e=F.c(26),s=pi.useStore(),n=wn(noe),o=t.fixed&&"fixed inset-x-0 bottom-0";let a;e[0]!==o?(a=z(o,"z-[100] w-full max-w-full overflow-hidden","bg-token-bg-tertiary border-token-border-heavy flex flex-col gap-2 border-t p-4 pb-6"),e[0]=o,e[1]=a):a=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("h1",{className:"text-base",children:r.jsx(f7,{})}),e[2]=i):i=e[2];let l;e[3]!==t.onIgnore?(l=r.jsxs("div",{className:"flex items-center justify-between",children:[i,r.jsx(Es,{onClick:t.onIgnore,className:"text-token-text-tertiary -m-2"})]}),e[3]=t.onIgnore,e[4]=l):l=e[4];let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("p",{className:"text-token-text-secondary max-w-2xl flex-1 text-sm text-balance md:min-w-md",children:r.jsx(m7,{})}),e[5]=c):c=e[5];let u;e[6]!==s?(u=()=>s.openModal(),e[6]=s,e[7]=u):u=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(h7,{}),e[8]=d):d=e[8];let f;e[9]!==u?(f=r.jsx(ke,{as:"button",color:"secondary",onClick:u,children:d}),e[9]=u,e[10]=f):f=e[10];let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(p7,{}),e[11]=m):m=e[11];let p;e[12]!==t.onReject?(p=r.jsx(ke,{as:"button",color:"secondary",onClick:t.onReject,children:m}),e[12]=t.onReject,e[13]=p):p=e[13];let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(g7,{}),e[14]=g):g=e[14];let h;e[15]!==n||e[16]!==t.onAccept?(h=r.jsx(ke,{as:"button",onClick:t.onAccept,ref:n,children:g}),e[15]=n,e[16]=t.onAccept,e[17]=h):h=e[17];let _;e[18]!==h||e[19]!==f||e[20]!==p?(_=r.jsxs("div",{className:"flex flex-col flex-wrap items-start justify-between gap-4 md:flex-row md:items-center",children:[c,r.jsxs("div",{className:"flex flex-row flex-wrap justify-end gap-2",children:[f,p,h]})]}),e[18]=h,e[19]=f,e[20]=p,e[21]=_):_=e[21];let b;return e[22]!==a||e[23]!==_||e[24]!==l?(b=r.jsxs("div",{role:"dialog","aria-modal":"true","aria-live":"polite",className:a,children:[l,_]}),e[22]=a,e[23]=_,e[24]=l,e[25]=b):b=e[25],b}function noe(t){return t==null?void 0:t.focus()}function ooe(t){"use forget";var C;const e=F.c(24),s=G(),n=Xe(s,"2118136551"),o=pi.useStore(),a=n.get("show_cookie_banner_improvements",!1),i=aoe,l=a&&(C=t.onIgnore)!=null?C:i,c=!a;let u;e[0]!==t?(u=r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(Es,{onClick:()=>{var w;return(w=t.onIgnore)==null?void 0:w.call(t)}})}),e[0]=t,e[1]=u):u=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("p",{className:"mb-2 text-center text-xl font-semibold",children:r.jsx(f7,{})}),e[2]=d):d=e[2];let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-sm",children:r.jsx(m7,{})}),e[3]=f):f=e[3];let m;e[4]!==o?(m=()=>o.openModal(),e[4]=o,e[5]=m):m=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(h7,{}),e[6]=p):p=e[6];let g;e[7]!==m?(g=r.jsx(py,{onClick:m,children:p}),e[7]=m,e[8]=g):g=e[8];let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(g7,{}),e[9]=h):h=e[9];let _;e[10]!==t.onAccept?(_=r.jsx(py,{onClick:t.onAccept,children:h}),e[10]=t.onAccept,e[11]=_):_=e[11];let b;e[12]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(p7,{}),e[12]=b):b=e[12];let y;e[13]!==t.onReject?(y=r.jsx(py,{onClick:t.onReject,children:b}),e[13]=t.onReject,e[14]=y):y=e[14];let v;e[15]!==u||e[16]!==y||e[17]!==g||e[18]!==_?(v=r.jsxs("div",{className:"flex flex-col items-center justify-center px-5 pt-4 pb-8 sm:p-10",children:[u,d,f,g,_,y]}),e[15]=u,e[16]=y,e[17]=g,e[18]=_,e[19]=v):v=e[19];let S;return e[20]!==l||e[21]!==c||e[22]!==v?(S=r.jsx(Ft,{testId:"modal-cookie-consent-banner-mobile",isOpen:!0,onClose:l,noPadding:!0,type:"success",size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"bottom",shouldIgnoreClickOutside:c,children:v}),e[20]=l,e[21]=c,e[22]=v,e[23]=S):S=e[23],S}function aoe(){}function Lp(){const{hash:t}=Hs(),e=yt();return{openSettings:(s,n)=>{e(tf(s,n))},closeSettings:()=>{e({hash:""})},isOpen:vK(t),currentTab:bK(t)}}const VZe=Ps({queryKey:["clientApplications"],queryFn:()=>de.safeGet("/client_applications")});function zZe(){const t=Kt();return ds({mutationFn:e=>de.safeDelete("/client_applications/{client_id}",{parameters:{path:{client_id:e}}}),onSuccess:()=>{window.location.reload()},onError:e=>{Ge.addError("Failed to revoke client application",{error:e}),t.danger("Failed to disconnect. Please try again later.",{toastId:"revoke_client_application"})}})}function WZe({onClose:t}){const e=G(),s=ne(),n=Kt(),{openSettings:o}=Lp(),a=Wne(),{session:i}=vl(e),{data:{isStorageComplianceEnabled:l}={}}=l7(),{data:c,isLoading:u}=i7({enabled:!!(l&&i),select:d=>{var f;return!((f=d.cookie_consent)!=null&&f.is_required)}});return x.useEffect(()=>{c===!0&&t()},[c,t]),u?null:r.jsx(roe,{onReject:()=>{a.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){n.success(s.formatMessage(Hu.updateSuccess))},onError(){n.danger(Hu.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},onAccept:()=>{a.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){n.success(s.formatMessage(Hu.updateSuccess))},onError(){n.danger(Hu.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},children:r.jsx(j,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:d=>r.jsx(pr,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:d}),manageLink:d=>r.jsx(ioe,{onClick:()=>{o(hn.DataControls)},children:d})}})})}function roe({children:t,onAccept:e,onReject:s}){return x.useEffect(()=>{Ge.addAction("privacy_policy.show_cookie_consent_banner")},[]),r.jsxs(a7,{children:[r.jsxs(n7,{className:"text-sm font-semibold [grid-area:_title]",children:[t,r.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[r.jsx(ke,{color:"secondary",size:"small",onClick:s,children:r.jsx(j,T({},Hu.reject))}),r.jsx(ke,{color:"secondary",size:"small",onClick:e,children:r.jsx(j,T({},Hu.accept))})]})]}),r.jsx(o7,{})]})}var H5;const ioe=Mt.button(H5||(H5=St(["underline font-normal text-green-600"]))),Hu=Ne({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),loe=Bt(t=>vt(()=>{var e,s;return(s=(e=uC(t))==null?void 0:e.includes(kn.Sunshine))!=null?s:!1}));function Dp(){"use forget";const t=F.c(2),e=G();let s;return t[0]!==e?(s=()=>loe(e),t[0]=e,t[1]=s):s=t[1],oe(s)}function Ml(){"use forget";const{data:t}=qo(Qt.Sunshine),e=Dp();return!!t&&e}function _7(t){return Ee(t,"507055138")}function x7(t){const e=_7(t),s=Ee(t,"1946731762");return e&&s}function coe(){"use forget";const t=F.c(2),e=G();let s;t[0]!==e?(s=x7(e),t[0]=e,t[1]=s):s=t[1];const n=s,{data:o}=qo(Qt.GoldenHour);return!!o&&n}const uoe=Bt(t=>vt(()=>{var e,s;return(s=(e=uC(t))==null?void 0:e.includes(kn.Moonshine))!=null?s:!1}));function vx(){"use forget";const t=F.c(2),e=G();let s;return t[0]!==e?(s=()=>uoe(e),t[0]=e,t[1]=s):s=t[1],oe(s)}function qZe(){"use forget";const t=vx(),{data:e}=qo(Qt.Moonshine);return t&&!!e}const doe=Bt(t=>vt(()=>{var e,s;return(s=(e=uC(t))==null?void 0:e.includes(kn.MemoryInSearch))!=null?s:!1}));function foe(){"use forget";const t=F.c(2),e=G();let s;return t[0]!==e?(s=()=>doe(e),t[0]=e,t[1]=s):s=t[1],oe(s)}function KZe(){"use forget";const t=Ml(),{data:e}=qo(Qt.MemoryInSearch),s=foe();return t&&!!e&&s}function YZe(){"use forget";var a;const t=F.c(2),e=G();let s;t[0]!==e?(s=(a=Ee(e,"645560164"))!=null?a:!1,t[0]=e,t[1]=s):s=t[1];const n=s;return Ml()&&n}const QZe=t=>Ee(t,"667937038");function moe(t){var e;return(e=Ee(t,"1611573287"))!=null?e:!1}function JZe(t){return Ee(t,"529475650")}function Sx(){"use forget";const t=F.c(2),e=G(),s=Ml();let n;return t[0]!==e?(n=moe(e),t[0]=e,t[1]=n):n=t[1],s&&n}const poe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg",goe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg";function ZZe(){const t=G(),e=x7(t),{eligible:s,isLoading:n}=Ct(We.hasSeenGoldenHourNuxV2);return sn(Ss)||!e?"hide":n?"loading":s?"show":"hide"}function hoe(){const[t,e]=x.useState(!1);return x.useEffect(()=>{const s=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(s)},[]),r.jsx("div",{"aria-hidden":!0,className:"relative box-content h-6 w-10 shrink-0 rounded-full p-[2px] ".concat(t?"bg-blue-400":"bg-gray-200 dark:bg-gray-600"),children:r.jsx(gt.div,{className:"absolute top-1/2 h-[21px] w-[21px] -translate-y-1/2 rounded-full bg-white shadow",animate:{x:t?17:1.5},transition:{type:"spring",stiffness:350,damping:25}})})}function XZe({onClose:t}){const e=G(),n=sa()?goe:poe,[o,a]=x.useState(!1);x.useEffect(()=>{const f=new Image;f.src=n,f.onload=()=>a(!0)},[n]);const[i,l]=x.useState(!1);x.useEffect(()=>{o&&(i||(_t(e,We.hasSeenGoldenHourNuxV2),l(!0),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Shown","chatgpt_golden_hour_nux_modal_shown"),$e.count(He.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_shown"),B.logUpsellOrModalEvent(ks,{eventId:"golden_hour_nux_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})))},[e,i,o]);const c=Ne({optm:{id:"GoldenHourNux.optm",defaultMessage:"Automatically manage"},title:{id:"GoldenHourNux.title",defaultMessage:'Say goodbye to "Memory full"'},subtitle:{id:"GoldenHourNux.subtitle",defaultMessage:"ChatGPT now manages saved memories automatically  so it wont fill up and stays focused on what matters."},learnMoreButton:{id:"GoldenHourNux.learnMoreButton",defaultMessage:"Learn more"},gotItButton:{id:"GoldenHourNux.gotItButton",defaultMessage:"Got it"}}),u="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47",d=()=>{window.open(u,"_blank","noopener noreferrer"),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Learn More Clicked","chatgpt_golden_hour_nux_modal_learn_more_clicked"),$e.count(He.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_learn_more_clicked")};return o?r.jsxs(Ft,{testId:"modal-golden-hour-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Closed","chatgpt_golden_hour_nux_modal_closed"),$e.count(He.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(Es,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative flex flex-1 overflow-x-clip",children:[r.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx("div",{className:"inline-flex w-full rounded-[40px] bg-white/40 p-1 shadow-[0_0_84px_0_rgba(0,105,209,0.5)] backdrop-blur-[2px] dark:bg-black/60",children:r.jsx("div",{className:"bg-token-bg-secondary flex max-w-full items-center justify-end gap-[10px] overflow-hidden rounded-[38px] bg-white py-2.5 ps-4.5 pe-3 dark:bg-[#101010]",children:r.jsxs("div",{className:"flex w-full items-center gap-3",children:[r.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-1 items-center gap-[9px] truncate text-[21px] leading-[30px] tracking-[-0.27px]",children:r.jsx(j,T({},c.optm))}),r.jsx("div",{className:"text-token-text-primary flex shrink-0 items-center gap-[18px]",children:r.jsx(hoe,{})})]})})})})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(j,T({},c.title))}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,T({},c.subtitle))}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-end gap-3",children:[r.jsx(ke,{color:"secondary",onClick:d,children:r.jsx(j,T({},c.learnMoreButton))}),r.jsx(ke,{color:"primary",onClick:t,children:r.jsx(j,T({},c.gotItButton))})]})]})]}):null}Pe(()=>me(()=>import("./bjmd4gy8qw6cip0t.js"),__vite__mapDeps([0,1,2,3,4])).then(t=>t.ConfirmEnableMfaForGithubModal));function eXe(){return dt({queryKey:["mfa-is-enabled"],queryFn:async()=>(await de.safeGet("/accounts/mfa_info")).mfa_enabled})}function _oe(t){var a;const{data:e,isLoading:s,isError:n,refetch:o}=dt({queryKey:["mfa-requirement-level-".concat(t)],queryFn:async()=>await de.safeGet("/aip/connectors/{connector_id}/mfa_requirement",{parameters:{path:{connector_id:t}}})});return s?{status:"loading",retry:()=>{}}:n?{status:"error",retry:o}:{status:(a=e==null?void 0:e.requirement)!=null?a:"not_required",retry:o}}function xoe({enabled:t=!0}={}){const e=ja(),s=e==null?void 0:e.includes(SK);return dt({queryKey:["mfaInfo"],queryFn:()=>de.safeGet("/accounts/mfa_info"),enabled:s&&t})}function yoe({enabled:t=!0}={}){var n,o,a,i,l,c,u;const e=xoe({enabled:t});let s;return e.isLoading?s="loading":e.isError?s="error":(n=e.data)!=null&&n.mfa_enabled?s="enabled":s="disabled",{status:s,native_default_factor_id:(o=e.data)==null?void 0:o.native_default_factor_id,factors:(a=e.data)==null?void 0:a.factors,show_push_auth:(l=(i=e.data)==null?void 0:i.show_push_auth)!=null?l:!1,show_sms:(u=(c=e.data)==null?void 0:c.show_sms)!=null?u:!1,retry:e.refetch}}const boe="https://persistent.oaistatic.com/chatgpt/connector-promo-light.png",voe="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-1.png",Soe="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-2.png",tXe=()=>{const t=G(),{isLoading:e,eligible:s}=Ct(We.hasSeenConnectorsNuxModal),n=sn(Ss),o=fs(),a=!!(o!=null&&o.isAdminOfAccount()||o!=null&&o.isOwnerOfAccount()),{isLoading:i}=YP(),l=up(),c=oe(()=>dC(t));if(n)return"hide";const u=e||i,d=s&&(l==null?void 0:l.enabled)&&(l==null?void 0:l.can_see_system_hint_announcement)&&(a||c&&c.length>0);return u?"loading":d?"show":"hide"},sXe=({onClose:t})=>{const{canUpgradeGDrive:e,canUpgradeSharepoint:s}=YP();return e||s?r.jsx(Coe,{canUpgradeGDrive:e,canUpgradeSharepoint:s,onClose:t}):r.jsx(koe,{onClose:t})},Coe=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:s})=>r.jsx(woe,{canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:s}),woe=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:s})=>{const n=G();oe(()=>QP(n,{productSku:$s.CONNECTOR_SETTING}));const o=ne(),a=fs(),i=!!(a!=null&&a.isAdminOfAccount()||a!=null&&a.isOwnerOfAccount()),l=!!(a!=null&&a.isPersonalAccount()),[c,u]=x.useState(!1),[d,f]=x.useState(!1),m=t?voe:Soe;x.useEffect(()=>{Di.logEntryPointShown({referrer:eo.ConnectorNuxModal})},[]);const p=()=>{_t(n,We.hasSeenConnectorsNuxModal),s()},g=t?us[je.GDRIVE_ACTION_CONNECTOR]:us[je.SHAREPOINT_CONNECTOR],h=x.useMemo(()=>Di.createIdMetadataFromId(n,g,eo.ConnectorNuxModal,{productSku:$s.CONNECTOR_SETTING}),[n,g]),{status:_}=_oe(g),{status:b}=yoe({enabled:_==="required"||_==="suggested"}),y=x.useRef(!1),v=x.useMemo(()=>{if(_==="required")return"required";if(_==="suggested")return b==="enabled"?"not_required":b==="disabled"?"suggested":void 0;if(_==="not_required"||_==="error")return"not_required"},[_,b]),{CitationIcon:S,description:C,LoadingIcon:w,loadingText:k,onContinue:E,primaryButtonLabel:M,title:N}=x.useMemo(()=>t?{CitationIcon:fC,description:o.formatMessage({id:"T7ohyZ",defaultMessage:"Ask ChatGPT anything about your Google Docs, Sheets, Slides, and files."}),LoadingIcon:$n,loadingText:o.formatMessage({id:"Z5098P",defaultMessage:"Reading Google Drive..."}),primaryButtonLabel:o.formatMessage({id:"GmC5aI",defaultMessage:"Connect Google"}),title:o.formatMessage({id:"3HJBih",defaultMessage:"ChatGPT + Google Drive"}),onContinue:()=>{i&&!l?window.location.href="/admin/ca":window.location.hash="#settings/".concat(hn.Connectors,"?connector=").concat(us[je.GDRIVE_ACTION_CONNECTOR],"&add-connector-link=true&referrer=").concat(eo.ConnectorNuxModal)}}:{CitationIcon:xc,description:o.formatMessage({id:"Bq7hPi",defaultMessage:"Ask ChatGPT anything about your shared sites and OneDrive files."}),LoadingIcon:xc,loadingText:o.formatMessage({id:"CTgrFA",defaultMessage:"Reading Sharepoint..."}),primaryButtonLabel:o.formatMessage({id:"d89pUX",defaultMessage:"Connect Sharepoint"}),title:o.formatMessage({id:"mliVAI",defaultMessage:"ChatGPT + Sharepoint"}),onContinue:()=>{i&&!l?window.location.href="/admin/ca":window.location.hash="#settings/".concat(hn.Connectors,"?connector=").concat(us[je.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(eo.ConnectorNuxModal)}},[t,o,i,l]),A=()=>{Di.logModalActionTaken({connector_id_metadata:h,referrer:eo.ConnectorNuxModal,action:"connection",authType:"NONE"}),B.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{targetted_connector:t?"gdrive":"sharepoint"}),_t(n,We.hasSeenConnectorsNuxModal),s(),E()};return x.useEffect(()=>{const I=new Image;I.src=m,I.onload=()=>u(!0)},[m]),x.useEffect(()=>{y.current||v&&(Di.logModalShown({connector_id_metadata:h,referrer:eo.ConnectorNuxModal,mfaState:v,authType:"NONE"}),y.current=!0)},[v,h]),x.useEffect(()=>{B.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{targetted_connector:t?"gdrive":"sharepoint"}),B.logUpsellOrModalEvent(ks,{eventId:"connectors_nux_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[t,e,h]),x.useEffect(()=>{if(!c)return;const I=setTimeout(()=>{f(!0)},3e3);return()=>clearTimeout(I)},[c]),r.jsxs(Ft,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:p,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(Es,{onClick:p,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:m,alt:o.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"h-[213px] w-full object-cover object-bottom"}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center",children:r.jsxs("div",{className:"flex w-full flex-col gap-4 px-8",children:[r.jsx(gt.div,{className:"relative flex w-auto self-end rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)]",initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.2},layout:"position",children:r.jsx(j,{id:"2VNiPu",defaultMessage:"Where's the next company conference?"})}),r.jsx(gt.div,{className:"relative flex w-auto self-start rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)] ".concat(d?"pe-3":""),initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.5},layout:"position",children:r.jsx(Ms,{mode:"wait",initial:!1,children:d?r.jsxs(gt.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(j,{id:"hBFvRz",defaultMessage:"The next conference is in New York City."}),r.jsx("span",{className:"text-token-text-secondary dark:bg-token-tertiary relative flex items-center rounded-xl bg-[#f4f4f4] px-1.5 py-0.5",children:r.jsx(S,{className:"h-5 w-5 object-contain"})})]},"answer"):r.jsxs(gt.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(w,{className:"h-5 w-5 object-contain"}),r.jsx("span",{className:"loading-shimmer",children:k})]},"loading")})})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:N}),r.jsx("div",{className:"text-token-text-secondary",children:C}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(ke,{color:"secondary",onClick:p,children:r.jsx(j,{id:"ZeZf5A",defaultMessage:"Try later"})}),r.jsx(ke,{color:"primary",onClick:A,children:M})]})]})]})},koe=({onClose:t})=>{const e=G(),s=ne(),n=fs(),o=!!(n!=null&&n.isAdminOfAccount()||n!=null&&n.isOwnerOfAccount()),a=!!(n!=null&&n.isPersonalAccount()),{openSettings:i}=Lp();x.useEffect(()=>{Di.logEntryPointShown({referrer:eo.ConnectorNuxModal}),B.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{isAdmin:o&&!a?"true":"false"}),B.logUpsellOrModalEvent(ks,{eventId:"connectors_nux_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[o,a]);const l=()=>{B.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{isAdmin:o&&!a?"true":"false"}),_t(e,We.hasSeenConnectorsNuxModal),o&&!a?window.location.href="/admin/ca":(t(),i(hn.Connectors))},c=()=>{_t(e,We.hasSeenConnectorsNuxModal),t()},u=s.formatMessage({id:"l6VLn3",defaultMessage:"Your apps, smarter chats"}),d=s.formatMessage({id:"QTZ7a/",defaultMessage:"Find answers, summarize info, or get things done with tools you use every day."});return r.jsxs(Ft,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:c,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(Es,{onClick:c,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("img",{src:boe,alt:s.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:u}),r.jsx("div",{className:"text-token-text-secondary",children:d}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(ke,{color:"secondary",onClick:c,children:r.jsx(j,{id:"S6nkY/",defaultMessage:"Not now"})}),r.jsx(ke,{color:"primary",onClick:()=>l(),children:r.jsx(j,{id:"1pAV1c",defaultMessage:"Connect apps"})})]})]})]})};class Toe{constructor(e,s){X(this,"store",[]);this.compare=e,this.maxSize=s}push(e){const s=this.store;s.length<this.maxSize?(s.push(e),Eoe(this.store,this.compare)):this.compare(e,s[0])>0&&(s[0]=e,vM(this.store,this.compare))}pop(){const e=this.store,s=e[0],n=e.pop();return e.length>0&&(e[0]=n,vM(this.store,this.compare)),s}toArray(e){const s=this.store.length,n=new Array(s);for(let o=s-1;o>=0;o--){const a=this.pop();n[o]=e?e(a):a}return n}}function Eoe(t,e){let s=t.length-1;for(;s>0;){const n=Math.floor((s-1)/2);if(e(t[n],t[s])<=0)break;[t[n],t[s]]=[t[s],t[n]],s=n}}function vM(t,e){let s=0;for(let n=1;n<t.length;n=s*2+1){const o=n+1,a=o<t.length&&e(t[o],t[n])<0?o:n;if(e(t[s],t[a])<=0)break;[t[s],t[a]]=[t[a],t[s]],s=a}}function nXe(t,e,s,{locale:n,maxResults:o=50}={}){const a=e.toLocaleLowerCase();if(!a)return t;const i=new Toe((l,c)=>l.score-c.score,o);for(let l=0;l<t.length;l++){const{targets:c,weight:u=1}=s(t[l]);let d=0;for(let f=0;f<c.length;f++){const m=c[f];if(m){const p=m.toLowerCase(),g=Moe(p,a,n);g>d&&(d=g)}}d>0&&i.push({value:t[l],score:d*u})}return i.toArray(l=>l.value)}function Moe(t,e,s){if(e.length===0||e.length>t.length||!t.includes(e[0])||e.length>1&&!t.includes(e[e.length-1]))return 0;const n=[];for(let c=0,u=0;c<t.length&&u<e.length;c++)t.charCodeAt(c)===e.charCodeAt(u)&&(n.push(c),u++);if(n.length!==e.length)return 0;for(let c=n.length-2;c>=0;c--){const u=n[c+1]-1;n[c]<u&&t.charCodeAt(u)===e.charCodeAt(c)&&(n[c]=u)}const o=n[0];let a=0,i=0,l=SM(t,n[0],s)?1:0;for(let c=1;c<n.length;c++){const u=n[c]-n[c-1];u===1?a++:(i+=u-1,l+=SM(t,n[c],s)?1:0)}return Noe*n.length+Aoe*a+Ioe*(o===0?1:0)+joe*l+Poe*i+Roe*o}const Noe=5,Aoe=10,Ioe=5,joe=15,Poe=-5,Roe=-.2;function SM(t,e,s){var n;if(typeof Intl.Segmenter=="function"){const o=new Intl.Segmenter(s,{granularity:"word"}).segment(t);if(typeof o.containing=="function"){const a=o.containing(e);if(!a)return!1;const i=(n=a.segment)==null?void 0:n[e-a.index-1];return a.isWordLike===!0&&(a.index===e||i==="_")}}return!1}const Ooe=t=>t!=null,Loe=t=>["getApp",t].filter(Ooe),Doe=async t=>await de.safeGet("/connectors/directory/{app_id}",{parameters:{path:{app_id:t}},authOption:is.SendIfAvailable}),oXe=(t,e)=>{"use forget";const s=F.c(8),n=e===void 0?!0:e;let o;s[0]!==t?(o=Loe(t),s[0]=t,s[1]=o):o=s[1];let a;s[2]!==t?(a=async()=>t?await Doe(t):null,s[2]=t,s[3]=a):a=s[3];const i=!!t&&n;let l;return s[4]!==o||s[5]!==a||s[6]!==i?(l={queryKey:o,queryFn:a,enabled:i},s[4]=o,s[5]=a,s[6]=i,s[7]=l):l=s[7],dt(l)},Foe=()=>{"use forget";const t=F.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=jt(),t[0]=e):e=t[0];const s=e;let n;return t[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>ZP(s,{fetchValidLinksOnly:!0,productSku:$s.CONNECTOR_SETTING}),t[1]=n):n=t[1],oe(n)},Boe=t=>["connector",t],Uoe=async t=>await de.safeGet("/aip/connectors/{connector_id}",{parameters:{path:{connector_id:t},query:{include_logo:!1,include_actions:!1}}}),$oe=t=>{"use forget";const e=F.c(8),s=t!=null?t:"";let n;e[0]!==s?(n=Boe(s),e[0]=s,e[1]=n):n=e[1];let o;e[2]!==t?(o=async()=>await Uoe(t!=null?t:""),e[2]=t,e[3]=o):o=e[3];const a=!!t;let i;return e[4]!==n||e[5]!==o||e[6]!==a?(i={queryKey:n,queryFn:o,enabled:a},e[4]=n,e[5]=o,e[6]=a,e[7]=i):i=e[7],dt(i)},y7=new Set([CK,$v,wK]),aXe=new Map(Object.values(JP).map(({access:t,sync:e})=>[t,e])),b7=new Set(Object.values(JP).map(({sync:t})=>t)),v7=t=>t.connector_type!=="SERVICE"||Ca[t.id]!==void 0||t.id==="connector_2b0a9009c9c64bf9933a3dae3f2b1254",Hoe=t=>({apps:t.apps.filter(e=>v7(e)&&!y7.has(e.id)&&!b7.has(e.id)).sort((e,s)=>+(s.distribution_channel==="TENANT_CATALOG")-+(e.distribution_channel==="TENANT_CATALOG")||e.name.localeCompare(s.name)),next_token:t.next_token}),Goe=t=>({apps:t.apps.filter(e=>v7(e)&&!y7.has(e.id)&&!b7.has(e.id)).sort((e,s)=>+(s.distribution_channel==="TENANT_CATALOG")-+(e.distribution_channel==="TENANT_CATALOG")||e.name.localeCompare(s.name)),next_token:t.next_token}),Voe=({tier:t}={})=>["listApps",t],zoe=({tier:t}={})=>de.safeGet("/connectors/directory/list",{authOption:is.SendIfAvailable,parameters:{query:{tier:t}}}),rXe=t=>{"use forget";const e=F.c(9);let s;e[0]!==t?(s=Voe({tier:t}),e[0]=t,e[1]=s):s=e[1];let n,o;e[2]!==t?(n=async()=>await zoe({tier:t}),o=i=>t==="featured"?i:Hoe(i),e[2]=t,e[3]=n,e[4]=o):(n=e[3],o=e[4]);let a;return e[5]!==s||e[6]!==n||e[7]!==o?(a={queryKey:s,queryFn:n,select:o},e[5]=s,e[6]=n,e[7]=o,e[8]=a):a=e[8],dt(a)},Woe=()=>["listWorkspaceApps"],qoe=()=>de.safeGet("/connectors/directory/list_workspace",{authOption:is.SendIfAvailable}),iXe=()=>{"use forget";var n;const t=F.c(2);let e,s;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const o=jt(),a=ct(o);e=dt,s={queryKey:Woe(),queryFn:Koe,select:Goe,enabled:(n=a==null?void 0:a.isEnterprisey())!=null?n:!1},t[0]=e,t[1]=s}else e=t[0],s=t[1];return e(s)},lXe=t=>{"use forget";var o;const e=F.c(3),s=Foe();let n;return e[0]!==t||e[1]!==s.data?(n=(o=s.data)==null?void 0:o.has(t!=null?t:""),e[0]=t,e[1]=s.data,e[2]=n):n=e[2],n};async function Koe(){return await qoe()}var qw="Radio",[Yoe,S7]=Oc(qw),[Qoe,Joe]=Yoe(qw),C7=x.forwardRef((t,e)=>{const _=t,{__scopeRadio:s,name:n,checked:o=!1,required:a,disabled:i,value:l="on",onCheck:c,form:u}=_,d=De(_,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[f,m]=x.useState(null),p=Ks(e,b=>m(b)),g=x.useRef(!1),h=f?u||!!f.closest("form"):!0;return r.jsxs(Qoe,{scope:s,checked:o,disabled:i,children:[r.jsx(vs.button,U(T({type:"button",role:"radio","aria-checked":o,"data-state":T7(o),"data-disabled":i?"":void 0,disabled:i,value:l},d),{ref:p,onClick:zt(t.onClick,b=>{o||c==null||c(),h&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})})),h&&r.jsx(Zoe,{control:f,bubbles:!g.current,name:n,value:l,checked:o,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});C7.displayName=qw;var w7="RadioIndicator",k7=x.forwardRef((t,e)=>{const i=t,{__scopeRadio:s,forceMount:n}=i,o=De(i,["__scopeRadio","forceMount"]),a=Joe(w7,s);return r.jsx(A_,{present:n||a.checked,children:r.jsx(vs.span,U(T({"data-state":T7(a.checked),"data-disabled":a.disabled?"":void 0},o),{ref:e}))})});k7.displayName=w7;var Zoe=t=>{const c=t,{control:e,checked:s,bubbles:n=!0}=c,o=De(c,["control","checked","bubbles"]),a=x.useRef(null),i=mC(s),l=XP(e);return x.useEffect(()=>{const u=a.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==s&&m){const p=new Event("click",{bubbles:n});m.call(u,s),u.dispatchEvent(p)}},[i,s,n]),r.jsx("input",U(T({type:"radio","aria-hidden":!0,defaultChecked:s},o),{tabIndex:-1,ref:a,style:U(T(T({},t.style),l),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function T7(t){return t?"checked":"unchecked"}var Xoe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Kw="RadioGroup",[eae]=Oc(Kw,[M_,S7]),E7=M_(),M7=S7(),[tae,sae]=eae(Kw),N7=x.forwardRef((t,e)=>{const b=t,{__scopeRadioGroup:s,name:n,defaultValue:o,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f}=b,m=De(b,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),p=E7(s),g=N_(u),[h,_]=ii({prop:a,defaultProp:o,onChange:f});return r.jsx(tae,{scope:s,name:n,required:i,disabled:l,value:h,onValueChange:_,children:r.jsx(GP,U(T({asChild:!0},p),{orientation:c,dir:g,loop:d,children:r.jsx(vs.div,U(T({role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g},m),{ref:e}))}))})});N7.displayName=Kw;var A7="RadioGroupItem",I7=x.forwardRef((t,e)=>{const p=t,{__scopeRadioGroup:s,disabled:n}=p,o=De(p,["__scopeRadioGroup","disabled"]),a=sae(A7,s),i=a.disabled||n,l=E7(s),c=M7(s),u=x.useRef(null),d=Ks(e,u),f=a.value===o.value,m=x.useRef(!1);return x.useEffect(()=>{const g=_=>{Xoe.includes(_.key)&&(m.current=!0)},h=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",h)}},[]),r.jsx(HP,U(T({asChild:!0},l),{focusable:!i,active:f,children:r.jsx(C7,U(T(T({disabled:i,required:a.required,checked:f},c),o),{name:a.name,ref:d,onCheck:()=>a.onValueChange(o.value),onKeyDown:zt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:zt(o.onFocus,()=>{var g;m.current&&((g=u.current)==null||g.click())})}))}))});I7.displayName=A7;var nae="RadioGroupIndicator",j7=x.forwardRef((t,e)=>{const a=t,{__scopeRadioGroup:s}=a,n=De(a,["__scopeRadioGroup"]),o=M7(s);return r.jsx(k7,U(T(T({},o),n),{ref:e}))});j7.displayName=nae;var P7=N7,Cx=I7,wx=j7;const Yw=({defaultValue:t,onContinue:e,options:s})=>{const[n,o]=x.useState(t);return r.jsxs(r.Fragment,{children:[r.jsx(P7,{value:n,onValueChange:a=>o(a),className:"flex flex-col gap-2 pt-8 pb-6",children:s.map(({value:a,label:i,description:l,Icon:c,Badge:u,disabled:d,tooltip:f})=>{const m=r.jsxs(Cx,{value:a,className:z("border-token-border-default flex items-center gap-4 rounded-2xl border p-4 text-sm",d&&"cursor-not-allowed opacity-60"),disabled:d,children:[c&&r.jsx("span",{children:r.jsx(c,{className:"h-6 w-6"})}),r.jsxs("div",{className:"flex-1 text-start",children:[r.jsxs("div",{className:"flex items-center gap-1.5 pb-0.5",children:[typeof i=="string"?i:r.jsx(j,T({},i)),u&&r.jsx(u,{})]}),r.jsx("div",{className:"text-token-text-secondary",children:typeof l=="string"?l:r.jsx(j,T({},l))})]}),n===a?r.jsx(wx,{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-950 p-0.5 dark:bg-white",children:r.jsx("div",{className:"h-2 w-2 rounded-full bg-white dark:bg-gray-950"})}):r.jsx("div",{className:"border-token-border-default h-5 w-5 rounded-full border"})]},a);return f?r.jsx(It,{label:r.jsx("div",{className:"max-w-50",children:typeof f=="string"?f:r.jsx(j,T({},f))}),side:"right",children:m},a):m})}),r.jsx(ke,{className:"w-full",size:"large",disabled:!n,onClick:()=>{n&&e(n)},children:r.jsx(j,T({},oae.nextStepButton))})]})},oae=Ne({nextStepButton:{id:"addConnectorLinkModal.nextStepButton",defaultMessage:"Continue"}}),Nl=ue(Ce,"a5ec30",20,20),aae=Object.freeze(Object.defineProperty({__proto__:null,default:Nl},Symbol.toStringTag,{value:"Module"})),Na=ue(Ce,"e60167",20,20),R7=ue(Ce,"61861c",12,13),Pd=ue(Ce,"ec66f0",20,20),ul=ue(Ce,"5e6658",20,20),rae=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"}));function Fp(t){"use forget";var p;const e=F.c(7),{lightLogoUrl:s,darkLogoUrl:n,enabled:o,theme:a}=t,i=o===void 0?!0:o,c=(p=sa()&&a!=="light"||a==="dark"?n!=null?n:s:s!=null?s:n)!=null?p:null;let u,d;e[0]!==c?(u=["connector-logo",c],d=()=>iae(c),e[0]=c,e[1]=u,e[2]=d):(u=e[1],d=e[2]);const f=i&&!!c;let m;return e[3]!==u||e[4]!==d||e[5]!==f?(m={queryKey:u,queryFn:d,enabled:f},e[3]=u,e[4]=d,e[5]=f,e[6]=m):m=e[6],dt(m)}async function iae(t){var e;if(t!=null&&t.startsWith("connectors://")){const s=new URL(t),n=s.hostname,o=(e=s.searchParams.get("theme"))!=null?e:"light",a=await de.safeGet("/aip/connectors/{connector_id}/logo",{parameters:{path:{connector_id:n},query:{theme:o}},skipJsonTransform:!0});if(!a.ok)throw new Error("Failed to get connector logo: ".concat(await a.text()));const i=await a.blob();return{url:URL.createObjectURL(i),text:await i.text()}}return{url:t}}const O7={medium:"icon",small:"icon-sm",xsmall:"icon-xs",large:"icon-lg",xxlarge:"icon-xl"},l2={xsmall:"h-4.5 w-4.5 text-base",small:"h-6 w-6 text-xs",medium:"h-8 w-8 text-sm",large:"h-10 w-10 text-base",xxlarge:"h-20 w-20 text-base"},Kc=t=>{"use forget";var v,S,C;const e=F.c(30),{connector:s,className:n,iconClassName:o,size:a,theme:i}=t,l=sa()&&i!=="light"||i==="dark",c=(v=s.logo_url)!=null?v:null,u=(S=s.logo_url_dark)!=null?S:null;let d;e[0]!==c||e[1]!==u||e[2]!==i?(d={lightLogoUrl:c,darkLogoUrl:u,theme:i},e[0]=c,e[1]=u,e[2]=i,e[3]=d):d=e[3];const f=Fp(d);if(!((C=f.data)!=null&&C.url)){const w=l2[a],k=a==="large"||a==="xxlarge"?"rounded-xl":"rounded-md",E=l?"dark bg-token-bg-tertiary":"light bg-token-bg-secondary";let M;e[4]!==w||e[5]!==k||e[6]!==E?(M=z("text-token-text-secondary flex items-center justify-center font-semibold",w,k,E),e[4]=w,e[5]=k,e[6]=E,e[7]=M):M=e[7];const N=O7[a];let A;e[8]!==o||e[9]!==N?(A=z(N,o),e[8]=o,e[9]=N,e[10]=A):A=e[10];let I;e[11]!==A?(I=r.jsx(Na,{className:A}),e[11]=A,e[12]=I):I=e[12];let P;e[13]!==I||e[14]!==M?(P=r.jsx("span",{className:M,children:I}),e[13]=I,e[14]=M,e[15]=P):P=e[15];let R;return e[16]!==n||e[17]!==P?(R=r.jsx("div",{className:n,children:P}),e[16]=n,e[17]=P,e[18]=R):R=e[18],R}const m=f.data.url,p=s.name,g=l2[a],h=a==="large"||a==="xxlarge"?"rounded-xl":"rounded-md";let _;e[19]!==o||e[20]!==g||e[21]!==h?(_=z(g,"object-contain",h,o),e[19]=o,e[20]=g,e[21]=h,e[22]=_):_=e[22];let b;e[23]!==s.name||e[24]!==f.data.url||e[25]!==_?(b=r.jsx("img",{src:m,alt:p,className:_}),e[23]=s.name,e[24]=f.data.url,e[25]=_,e[26]=b):b=e[26];let y;return e[27]!==n||e[28]!==b?(y=r.jsx("div",{className:n,children:b}),e[27]=n,e[28]=b,e[29]=y):y=e[29],y},cXe=t=>{"use forget";var p;const e=F.c(11),{template:s,className:n,iconClassName:o,size:a}=t,i=(p=s.logo_url)!=null?p:"",l=s.name,c=l2[a],u=a==="large"?"rounded-xl":"rounded-md";let d;e[0]!==o||e[1]!==c||e[2]!==u?(d=z(c,"object-contain",u,o),e[0]=o,e[1]=c,e[2]=u,e[3]=d):d=e[3];let f;e[4]!==i||e[5]!==d||e[6]!==s.name?(f=r.jsx("img",{src:i,alt:l,className:d}),e[4]=i,e[5]=d,e[6]=s.name,e[7]=f):f=e[7];let m;return e[8]!==n||e[9]!==f?(m=r.jsx("div",{className:n,children:f}),e[8]=n,e[9]=f,e[10]=m):m=e[10],m},uXe=t=>{"use forget";var u,d,f;const e=F.c(11),{connector:s}=t,n=sa(),o=(u=s.logo_url)!=null?u:null,a=(d=s.logo_url_dark)!=null?d:null;let i;e[0]!==o||e[1]!==a?(i={lightLogoUrl:o,darkLogoUrl:a},e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=Fp(i);if(!((f=l.data)!=null&&f.url)){const m=n?"bg-token-bg-tertiary":"bg-token-bg-secondary";let p;e[3]!==m?(p=z("text-token-text-secondary m-0.5 flex h-6 w-6 items-center justify-center rounded-md text-xs font-semibold",m),e[3]=m,e[4]=p):p=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(Na,{className:O7.small}),e[5]=g):g=e[5];let h;return e[6]!==p?(h=r.jsx("span",{className:p,children:g}),e[6]=p,e[7]=h):h=e[7],h}let c;return e[8]!==s.name||e[9]!==l.data.url?(c=r.jsx("span",{className:"m-0.5 rounded-md",children:r.jsx("img",{src:l.data.url,alt:s.name,className:"h-6 w-6 rounded-md object-contain"})}),e[8]=s.name,e[9]=l.data.url,e[10]=c):c=e[10],c},lae=t=>{"use forget";var ae,se;const e=F.c(49),{connector:s,onClose:n,onContinue:o,canAddDeepResearch:a,canAddInternalKnowledge:i,canAddOdyssey:l,messages:c}=t,u=fs(),d=sf(),f=!!(u!=null&&u.isPersonalAccount()&&d);let m;e[0]!==c.syncBadge?(m=()=>{"use forget";return r.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[r.jsx(R7,{}),r.jsx(j,T({},c.syncBadge))]})},e[0]=c.syncBadge,e[1]=m):m=e[1];const p=m;let g;e[2]!==c.recommendedBadge?(g=()=>{"use forget";return r.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:r.jsx(j,T({},c.recommendedBadge))})},e[2]=c.recommendedBadge,e[3]=g):g=e[3];const h=g;let _;e[4]!==p||e[5]!==c.internalKnowledgeDescription||e[6]!==c.internalKnowledgeTitle?(_={value:"internalKnowledge",label:c.internalKnowledgeTitle,description:c.internalKnowledgeDescription,Icon:Nl,Badge:p},e[4]=p,e[5]=c.internalKnowledgeDescription,e[6]=c.internalKnowledgeTitle,e[7]=_):_=e[7];const b=_;let y;e[8]!==h||e[9]!==c.syncDescription||e[10]!==c.syncTitle?(y={value:"internalKnowledge",label:c.syncTitle,description:c.syncDescription,Icon:Pd,Badge:h},e[8]=h,e[9]=c.syncDescription,e[10]=c.syncTitle,e[11]=y):y=e[11];const v=y;let S;e[12]!==c.deepResearchDescription||e[13]!==c.deepResearchTitle?(S={value:"deepResearch",label:c.deepResearchTitle,description:c.deepResearchDescription,Icon:ul},e[12]=c.deepResearchDescription,e[13]=c.deepResearchTitle,e[14]=S):S=e[14];const C=S;let w;e[15]!==c.deepResearchAndOdysseyDescription||e[16]!==c.deepResearchAndOdysseyTitle?(w={value:"deepResearchAndOdyssey",label:c.deepResearchAndOdysseyTitle,description:c.deepResearchAndOdysseyDescription,Icon:ul},e[15]=c.deepResearchAndOdysseyDescription,e[16]=c.deepResearchAndOdysseyTitle,e[17]=w):w=e[17];const k=w;let E;e[18]!==c.dontSyncDescription||e[19]!==c.dontSyncTitle?(E={value:"deepResearch",label:c.dontSyncTitle,description:c.dontSyncDescription,Icon:Na},e[18]=c.dontSyncDescription,e[19]=c.dontSyncTitle,e[20]=E):E=e[20];const M=E,N=f?v:b;let A;e[21]!==i||e[22]!==c.internalKnowledgeTooltip?(A=i?{}:T({disabled:!0},c.internalKnowledgeTooltip?{tooltip:c.internalKnowledgeTooltip}:{}),e[21]=i,e[22]=c.internalKnowledgeTooltip,e[23]=A):A=e[23];let I;e[24]!==N||e[25]!==A?(I=T(T({},N),A),e[24]=N,e[25]=A,e[26]=I):I=e[26];const P=I,R=l?k:f?M:C;let O;e[27]!==a||e[28]!==R?(O=a?R:U(T({},R),{disabled:!0}),e[27]=a,e[28]=R,e[29]=O):O=e[29];const L=O;let D;e[30]!==P||e[31]!==L?(D=[P,L],e[30]=P,e[31]=L,e[32]=D):D=e[32];const H=D;let V;e[33]!==c.selectProductTitle?(V=r.jsx(j,T({},c.selectProductTitle)),e[33]=c.selectProductTitle,e[34]=V):V=e[34];let q;e[35]!==s?(q=r.jsx(Kc,{connector:s,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[35]=s,e[36]=q):q=e[36];const W=(se=(ae=s.branding)==null?void 0:ae.developer)!=null?se:void 0;let $;e[37]!==n||e[38]!==V||e[39]!==q||e[40]!==W?($=r.jsx(I_,{title:V,connectorIcon:q,connectorDeveloper:W,onClose:n}),e[37]=n,e[38]=V,e[39]=q,e[40]=W,e[41]=$):$=e[41];const Z=f?"internalKnowledge":void 0;let K;e[42]!==H||e[43]!==o||e[44]!==Z?(K=r.jsx(Yw,{defaultValue:Z,onContinue:o,options:H}),e[42]=H,e[43]=o,e[44]=Z,e[45]=K):K=e[45];let Y;return e[46]!==$||e[47]!==K?(Y=r.jsxs(r.Fragment,{children:[$,K]}),e[46]=$,e[47]=K,e[48]=Y):Y=e[48],Y},Cr=({messages:t})=>s=>r.jsx(lae,U(T({},s),{messages:t})),cae=Ne({selectProductTitle:{id:"r2npOY",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"gzPmCe",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},deepResearchDescription:{id:"L+S/jI",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},dontSyncTitle:{id:"YcPoIP",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uO+gdP",defaultMessage:"ChatGPT will read your Google Drive files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"t5mu4H",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"0xFkEA",defaultMessage:"Sync Drive files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"yMY2Ng",defaultMessage:"Sync"},syncDescription:{id:"fcoBBw",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"AEBXx0",defaultMessage:"Contact your admin to enable Google Drive for chat"}}),uae=Cr({messages:cae});function dXe(t,{target:e,referrer:s,toggleAllAfterRedirect:n}={target:"connectors"}){let o="#settings/".concat(hn.Connectors);return t&&(o+="?connector=".concat(us[t],"&add-connector-link=true&target=").concat(e),s&&(o+="&referrer=".concat(encodeURIComponent(s))),n&&(o+="&".concat(Hv))),o}function fXe(t){return"#settings/".concat(hn.Connectors,"?connector=").concat(us[t])}function Qw(){const t=G(),e=Hs(),s=oe(()=>dC(t)),n=On();return o=>{var f,m;const a=e.pathname.match(/\/c\/.+/)?e.pathname:"/",i=e.hash.includes("suggestedPromptsText="),l=e.hash.includes(Hv),c=e.hash.includes("target=")?(f=e.hash.match(/target=([^&]+)/))==null?void 0:f[1]:"connectors",u="".concat(a,"?hints=").concat(c,"&sources=").concat(Ca[o.id]);if(i){const p=(m=e.hash.match(/suggestedPromptsText=([^&]+)/))==null?void 0:m[1];return"".concat(u,"&prompt=").concat(p,"&redirect_source=suggested_ca_prompts")}if(l)return"".concat(u,"&").concat(Hv);if((n==null||n===Ye.Slurm)&&(s==null?void 0:s.some(p=>p.id===o.id&&[je.GDRIVE_ACTION_CONNECTOR,je.BOX_CONNECTOR,je.DROPBOX_CONNECTOR,je.SHAREPOINT_CONNECTOR].includes(Ca[p.id])))){const p=_o(t,"1204757806").get("group","control");if(p==="connector-enabled"||p==="suggestions")return"".concat(u).concat(p==="suggestions"?"&suggestions-for-connector=".concat(Ca[o.id]):"")}return""}}const L7=({includeDisabledByAdmin:t}={})=>{const e=G(),{enabled:s,availableConnectorsType:n}=kK(e),o=oe(()=>{if(s)return j_(e,{includeDisabledByAdmin:t,productSku:$s.N7JUPD})}),a=s&&o===void 0,i=TK(e),l=Ee(e,"1826175200"),c=x.useMemo(()=>o?i?o.filter(u=>n.includes(u.type)):l?o.filter(u=>n.includes(u.type)||u.type===Xr.MCP_CONNECTOR&&u.status!=="ONLY_ME"):o.filter(u=>n.includes(u.type)&&u.type!==Xr.MCP_CONNECTOR):[],[n,o,i,l]);return s?{enabled:!0,availableConnectors:c,isLoading:a}:{enabled:!1,availableConnectors:[],isLoading:!1}};function Jw(t){ft.setItem(Be.ConnectorOAuthFlowType,t)}function mXe(){const t=ft.getItem(Be.ConnectorOAuthFlowType);return t?(ft.removeItem(Be.ConnectorOAuthFlowType),t):null}const dae=({connector:t,internalKnowledgeConfigs:e,onClose:s,onContinue:n})=>{var a,i;const o=x.useMemo(()=>e.filter(l=>l.user_connection_details.auth_status==="not_connected").map(l=>({value:l.user_connection_details.connection_instance_id,label:l.connection_display_info.display_name,description:l.connection_display_info.description})),[e]);return r.jsxs(r.Fragment,{children:[r.jsx(I_,{title:r.jsx(j,T({},fae.selectConnectionTitle)),connectorIcon:r.jsx(Kc,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(i=(a=t.branding)==null?void 0:a.developer)!=null?i:void 0,onClose:s}),r.jsx(Yw,{onContinue:n,options:o})]})},fae=Ne({selectConnectionTitle:{id:"2rQetR",defaultMessage:"Select a connection"}}),D7=t=>(t!=null?t:[]).map(e=>{var s,n,o,a,i;return U(T({},e),{description:(s=e.description)!=null?s:void 0,inputs:(o=(n=e.inputs)==null?void 0:n.map(l=>{var c,u;return U(T({},l),{description:(c=l.description)!=null?c:void 0,pattern:(u=l.pattern)!=null?u:void 0})}))!=null?o:void 0,i18n:(i=(a=e.i18n)==null?void 0:a.map(l=>{var c,u;return U(T({},l),{label:(c=l.label)!=null?c:void 0,description:(u=l.description)!=null?u:void 0})}))!=null?i:void 0})}),mae=t=>{if(t)return t.clamp_templates==null?t:U(T({},t),{clamp_templates:D7(t.clamp_templates)})},kx=ue(Ce,"aba6eb",16,16);function Zw(t){const e=ne();return r.jsxs("div",{className:"relative w-full",children:[r.jsx(Wm,U(T({},t),{className:z(t.className,t.error&&"border-red-500!")})),t.error&&t.showInlineErrorMessage!==!1&&r.jsxs("p",{className:z("mt-1 flex items-center text-xs text-red-500",t.showErrorIcon&&"gap-1"),children:[t.showErrorIcon&&r.jsx(kx,{title:e.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"})}),t.error]})]})}const CM=Ne({sectionTitle:{id:"QoBb/Y",defaultMessage:"Privacy settings"},tooltipLabel:{id:"LcLAFD",defaultMessage:"Info"}}),Cu=Ne({required:{id:"EFGauU",defaultMessage:"Enter a value."},requiredList:{id:"kVUhNg",defaultMessage:"Enter at least one value."},invalid:{id:"IbivRk",defaultMessage:"Value is not in the expected format."},invalidList:{id:"+x2rj7",defaultMessage:"One or more entries are not in the expected format."},listPlaceholder:{id:"3NDa/9",defaultMessage:"Enter one value per line"},validationToast:{id:"YYCWl0",defaultMessage:"Fix the highlighted clamp inputs."}}),wM=t=>t.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),pae=(t,e)=>{const s=n=>typeof n=="string"?Object.entries(e).reduce((o,[a,i])=>o.split("{{".concat(a,"}}")).join(i),n):Array.isArray(n)?n.map(o=>s(o)):n&&typeof n=="object"?Object.fromEntries(Object.entries(n).map(([o,a])=>[o,s(a)])):n;return s(t)},F7=({templates:t,intl:e,infoIcon:s,enabled:n=!0})=>{const o=e.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),a=x.useMemo(()=>n?D7(t):[],[n,t]),[i,l]=x.useState([]),[c,u]=x.useState({}),d=x.useRef(!1);x.useEffect(()=>{n&&!d.current&&i.length===0&&a.length>0&&(l(a.map(b=>b.id)),d.current=!0)},[a,n,i.length]);const f=x.useMemo(()=>a.filter(b=>i.includes(b.id)),[a,i]),m=x.useMemo(()=>{var v;const b=(v=e.locale)==null?void 0:v.toLowerCase(),y=b==null?void 0:b.split("-")[0];return S=>{var M,N,A,I;const C=(M=S.i18n)!=null?M:[];if(!b)return S;const w=C.find(P=>{var R;return((R=P.locale)==null?void 0:R.toLowerCase())===b}),k=y?C.find(P=>{var R;return((R=P.locale)==null?void 0:R.toLowerCase())===y}):void 0,E=w!=null?w:k;return E?U(T({},S),{label:(N=E.label)!=null?N:S.label,description:(I=(A=E.description)!=null?A:S.description)!=null?I:void 0}):S}},[e.locale]),p=(b,y,v)=>{u(S=>{var C;return U(T({},S),{[b]:U(T({},(C=S[b])!=null?C:{}),{[y]:v})})})},g=x.useCallback(()=>{const b={};let y=!1;const v={};return f.forEach(S=>{var E;const C={},w={};if(((E=S.inputs)!=null?E:[]).forEach(M=>{var P,R,O;const N=(P=M.input_type)!=null?P:"string",A=(O=(R=c[S.id])==null?void 0:R[M.name])!=null?O:"";if(N==="string_list"){const L=A.split(/[\n,]/).map(H=>H.trim()).filter(Boolean);if(L.length===0){w[M.name]=e.formatMessage(Cu.requiredList);return}if(M.pattern){const H=new RegExp(M.pattern);if(L.find(q=>!H.test(q))){w[M.name]=e.formatMessage(Cu.invalidList);return}}const D=L.map(wM);C[M.name]=D.length===1?D[0]:"(?:".concat(D.join("|"),")");return}const I=A.trim();if(!I){w[M.name]=e.formatMessage(Cu.required);return}if(M.pattern&&!new RegExp(M.pattern).test(I)){w[M.name]=e.formatMessage(Cu.invalid);return}C[M.name]=wM(I)}),Object.keys(w).length>0){b[S.id]=w,y=!0;return}if(!S.action_param_schemas)return;const k=Object.keys(C).length>0?pae(S.action_param_schemas,C):S.action_param_schemas;Object.assign(v,k)}),{actionParamSchemas:y||Object.keys(v).length===0?void 0:v,validationErrors:b,hasErrors:y}},[f,c,e]),h=x.useMemo(()=>n?g():{actionParamSchemas:void 0,validationErrors:{},hasErrors:!1},[n,g]);return{clampTemplatesContent:n&&a.length>0?r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("div",{className:"flex flex-col gap-1",children:r.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:r.jsx(j,T({},CM.sectionTitle))})}),r.jsx("div",{className:"divide-token-border-light border-token-border-heavy flex flex-col divide-y rounded-md border",children:a.map((b,y)=>{var M,N,A,I,P;const v=m(b),S="clamp-template-".concat(b.id||y),C=i.includes(b.id),w=(M=c[b.id])!=null?M:{},k=(N=h.validationErrors[b.id])!=null?N:{},E=((I=(A=b.inputs)==null?void 0:A.length)!=null?I:0)>0;return r.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[r.jsxs("div",{className:"flex items-center justify-between gap-1",children:[r.jsxs("label",{className:"flex cursor-pointer items-center gap-1",htmlFor:S,children:[r.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:v.label}),v.description?r.jsx(It,{label:v.description,delayDuration:0,side:"top",align:"center",children:r.jsx("span",{className:"text-token-text-secondary hover:text-token-text-primary inline-flex items-center justify-center rounded-full p-1","aria-label":e.formatMessage(CM.tooltipLabel),children:r.jsx(s,{className:"icon-xs"})})}):null]}),r.jsx(eR,{id:S,checked:C,withinLabel:!0,onCheckedChange:R=>l(O=>R?O.includes(b.id)?O:[...O,b.id]:O.filter(L=>L!==b.id))})]}),C&&E?r.jsx("div",{className:"flex flex-col gap-3",children:(P=b.inputs)==null?void 0:P.map(R=>{var V,q,W;const O=(V=R.input_type)!=null?V:"string",L="".concat(S,"-").concat(R.name),D=k[R.name],H=(q=w[R.name])!=null?q:"";return O==="string_list"?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{className:"text-token-text-primary text-xs font-semibold",htmlFor:L,children:R.label}),r.jsx("textarea",{id:L,className:"border-token-border-medium bg-token-bg-primary text-token-text-primary w-full rounded-md border px-3 py-2 text-sm focus:ring-1 focus:outline-none ".concat(D?"border-red-500 focus:border-red-500 focus:ring-red-500":"focus:border-token-border-xheavy focus:ring-token-text-secondary"),value:H,onChange:$=>p(b.id,R.name,$.target.value),placeholder:e.formatMessage(Cu.listPlaceholder),rows:3,"aria-invalid":D?!0:void 0}),D?r.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-500",children:[r.jsx(kx,{title:o}),D]}):null,R.description?r.jsx("div",{className:"text-token-text-secondary text-xs",children:R.description}):null]},R.name):r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Zw,{name:L,displayName:R.label,value:H,onChange:$=>p(b.id,R.name,$.target.value),placeholder:(W=R.description)!=null?W:void 0,error:D,showErrorIcon:!0}),R.description?r.jsx("div",{className:"text-token-text-secondary text-xs",children:R.description}):null]},R.name)})}):null]},b.id)})})]}):void 0,clampValidation:h,validationToastMessage:e.formatMessage(Cu.validationToast)}},gae=Pe(()=>me(()=>import("./gaj6e78ii9fgijkk.js"),__vite__mapDeps([5,1,3,4,6,7,8,9,10,2])).then(t=>t.RedirectContent)),hae=({onClose:t,connector:e,noRedirect:s,hideHeaderIcons:n=!1})=>{var qe;const o=G(),a=ne(),i=yt(),l=Kt(),c=sf(),u=!!tR(),d=fs(),f=!!(d!=null&&d.isPersonalAccount()&&c),{isLoading:m,internalKnowledgeConfigs:p}=sR(),{mutateAsync:g}=nR(),{availableConnectors:h,isLoading:_}=oR(),{availableConnectors:b,isLoading:y}=L7(),v=x.useMemo(()=>{var Ze;return(Ze=p==null?void 0:p.filter(st=>st.user_connection_details.auth_status==="not_connected"))!=null?Ze:[]},[p]),S=Qw(),C=v.length,{connectorLinks:w,refetch:k,isLoading:E}=Ta({productSku:$s.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:M}=Ta({productSku:$s.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),N=x.useMemo(()=>{var Ze;return!!((Ze=w.get(vm))!=null&&Ze.length)},[w]),A=!N&&h.some(Ze=>Ze.type===je.GDRIVE_ACTION_CONNECTOR),I=!N&&b.some(Ze=>Ze.type===je.GDRIVE_ACTION_CONNECTOR),P=A||I,R=C>0||f,O=P&&R,L=I?"deepResearchAndOdyssey":A?"deepResearch":null,D=P&&R,H=pC(),V=D&&H!==$s.DEEP_RESEARCH&&Ee(o,"3495630358"),q=Ee(o,"2515012530"),W=u&&R?"internalKnowledge":D?H===$s.DEEP_RESEARCH?L:V?"internalKnowledge":null:R?"internalKnowledge":L,[$,Z]=x.useState(!1),[K,Y]=x.useState(W),[ae,se]=x.useState(W==="internalKnowledge"&&!f),[ee,re]=x.useState(null),he=x.useMemo(()=>C===1?p==null?void 0:p[0]:ee?p==null?void 0:p.find(Ze=>Ze.user_connection_details.connection_instance_id===ee):void 0,[C,p,ee]),[fe,pe]=x.useState(!1),le=(qe=gC())!=null?qe:"unknown_referrer",ve=K!=null?K:O?null:R?"internalKnowledge":L,Te=ve==="deepResearch"||ve==="deepResearchAndOdyssey",xe=ve==="internalKnowledge",ce=f&&ve==="internalKnowledge",we=O&&K==null,ge=xe&&!ce&&ae,Ae=x.useCallback(Ze=>{Y(Ze),se(Ze==="internalKnowledge"&&!f),Ze!=="internalKnowledge"&&re(null)},[re,f]),Ue=x.useCallback(Ze=>{L&&Ae(Ze?"internalKnowledge":L)},[L,Ae]),Ie=x.useCallback(()=>{se(!1)},[]),Me=q&&!ge,{clampTemplatesContent:te,clampValidation:Q,validationToastMessage:ie}=F7({templates:e.clamp_templates,intl:a,infoIcon:ci,enabled:Me}),_e=x.useCallback(async()=>{const{actionParamSchemas:Ze,hasErrors:st}=Q;if(st){l.danger(ie);return}try{pe(!0),Jw("popup"),B.logEventWithStatsig("Connectors - Connect Personal Google Drive","chatgpt_connectors_connect_personal_google_drive_clicked",{sync:ce?"true":"false"});const rt=await hC({connector:e,openPopup:!0,toaster:ce?void 0:l,intl:a,productSku:$s.CONNECTOR_SETTING,actionParamSchemas:Ze});if(k(),M(),(rt==null?void 0:rt.errorType)==="oauth_failed_scope_mismatch"){pe(!1),Z(!0);return}rt!=null&&rt.linkId&&ce&&g({link:{id:rt.linkId,name:e.name,connector_id:us[je.GDRIVE_ACTION_CONNECTOR]},isConnectingAndUpgrading:!0,referrer:le}).then(()=>{Gv(o)});const wt=S(e);s?t():wt?window.location.href=wt:(t(),setTimeout(()=>{i(EK,{replace:!0})},500)),Z(!1)}catch(rt){pe(!1)}},[Q,o,ce,e,l,ie,a,k,M,S,s,g,t,i,le]),ye=xe&&!ce&&!ge&&C>1&&!ee,Re=xe&&he&&!ce&&!ge,Ve=Te||ce||ge,ze=Q.hasErrors,Fe=$||we||Ve||ye||Re,be=m||_||y||E,Oe=!!he;return x.useEffect(()=>{!Fe&&!be&&Ls.error("GoogleDriveModalContent rendered with no content",{isAddingIK:xe,isUpgradingStraightToSync:ce,shouldShowSyncRedirectContent:ge,numAddableIKConfigs:C,selectedIKConfig:ee,currentIKConfig:Oe,isAddingDeepResearch:Te,shouldShowProductSelector:we,shouldRenderInternalKnowledgeSelect:ye,shouldRenderOAuthModal:Re,shouldRenderRedirectContent:Ve,showOAuthFailedScopeMismatch:$})},[be,Oe,Te,xe,ce,C,ee,Fe,ye,Re,Ve,we,ge,$]),be?r.jsx("div",{className:"flex justify-center",children:r.jsx(Wn,{})}):$?r.jsxs(r.Fragment,{children:[r.jsx(I_,{onClose:t,connectorIcon:r.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:r.jsx($n,{height:32,width:32})}),title:a.formatMessage({id:"LrBpzI",defaultMessage:"Permissions required"}),hideAvatarRow:n}),r.jsxs("div",{className:"border-token-border-default text-token-text-secondary mt-8 mb-6 flex items-center gap-4 rounded-xl border p-4 text-sm",children:[r.jsx(ci,{className:"icon-lg"}),r.jsx(j,{id:"googleDriveLinkingModalDescription",defaultMessage:"In the next step, make sure to check all boxes. ChatGPT requires the full list of Google permissions."})]}),r.jsx(ke,{className:"w-full",onClick:_e,loading:fe,size:"large",children:r.jsx(j,{id:"reconnect",defaultMessage:"Reconnect"})})]}):r.jsxs(r.Fragment,{children:[we&&r.jsx(uae,{onClose:t,connector:e,onContinue:Ae,canAddDeepResearch:A,canAddOdyssey:I,canAddInternalKnowledge:R}),Ve&&r.jsx(gae,{connector:e,onClose:t,isConnecting:fe,onContinue:ge?Ie:_e,productSku:$s.CONNECTOR_SETTING,canSync:V,isRequestingSync:xe,setIsRequestingSync:V?Ue:void 0,hideHeaderIcons:n,additionalContent:te,isContinueDisabled:ze}),ye&&r.jsx(dae,{internalKnowledgeConfigs:p!=null?p:[],onClose:t,connector:e,onContinue:re}),Re&&r.jsx(MK,{immediatelyKickOffOAuth:V,isAdminFlow:!1,onClose:()=>{V||(Ae(null),re(null)),(!O||V)&&t()},connectionId:he.user_connection_details.connection_instance_id,location:"user_settings",onSuccess:()=>{setTimeout(()=>{Gv(o)},1e3),t()},excludeModalWrapper:!0})]})},_ae=(t,e)=>e.distribution_channel==="ECOSYSTEM_DIRECTORY",xae=(t,e)=>{var n,o;const s=js(t,"4204423555").get("metadata_by_connector_id",null);return In((o=Dm((n=Dm(s))==null?void 0:n[e.id]))==null?void 0:o.image_url,null)},yae=(t,e)=>!!xae(t,e)&&_o(t,"3764093839").get("is_enabled",!1),bae=Ne({selectProductTitle:{id:"EcfaIh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"7f5MJU",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},deepResearchDescription:{id:"52mZY5",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},dontSyncTitle:{id:"bIOtPo",defaultMessage:"Don't sync"},dontSyncDescription:{id:"R5dVLr",defaultMessage:"ChatGPT will read your HubSpot data as needed, so replies may be slower."},internalKnowledgeTitle:{id:"R09hUc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"Gf7d++",defaultMessage:"Sync HubSpot data to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"uCYMoO",defaultMessage:"Contact your admin to enable HubSpot for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"9Au+em",defaultMessage:"Sync"},syncDescription:{id:"BYPzIj",defaultMessage:"Sync HubSpot data to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),vae=Cr({messages:bae}),Sae=Ne({selectProductTitle:{id:"bpaehG",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"2EXqDU",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},deepResearchDescription:{id:"pNQbc3",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},dontSyncTitle:{id:"pFj6Xq",defaultMessage:"Don't sync"},dontSyncDescription:{id:"QX+ada",defaultMessage:"ChatGPT will read your Jira issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iK7v/r",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"RBzElS",defaultMessage:"Sync Jira issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"2NrkD8",defaultMessage:"Sync"},syncDescription:{id:"l4VShM",defaultMessage:"Sync Jira issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"vM2Wdq",defaultMessage:"Contact your admin to enable Jira for chat"}}),Cae=Cr({messages:Sae}),wae=Ne({selectProductTitle:{id:"0hzRKh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"hVvY37",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},deepResearchDescription:{id:"hbh71y",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},dontSyncTitle:{id:"9CKUT3",defaultMessage:"Don't sync"},dontSyncDescription:{id:"yeSkeT",defaultMessage:"ChatGPT will read your Jira Service Management tickets as needed, so replies may be slower."},internalKnowledgeTitle:{id:"jvk58G",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"qv1dVO",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"dk0bHH",defaultMessage:"Sync"},syncDescription:{id:"pgpt5C",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"arahcS",defaultMessage:"Contact your admin to enable Jira Service Management for chat"}}),kae=Cr({messages:wae}),Tae=()=>r.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[r.jsx(R7,{}),r.jsx(j,T({},Mo.syncBadge))]}),Eae=()=>r.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:r.jsx(j,T({},Mo.recommendedBadge))}),Mae=({connector:t,onClose:e,onContinue:s,canAddDeepResearch:n,canAddInternalKnowledge:o,canAddOdyssey:a})=>{var f,m;const i=fs(),l=sf(),c=!!(i!=null&&i.isPersonalAccount()&&l),u=ne(),d=x.useMemo(()=>[T(T({},c?jae:Iae),o?{}:{disabled:!0,tooltip:u.formatMessage({id:"GbkN+V",defaultMessage:"Contact your admin to enable Notion for chat"})}),...n?[a?Aae:c?Pae:Nae]:[]],[c,o,u,n,a]);return r.jsxs(r.Fragment,{children:[r.jsx(I_,{title:r.jsx(j,T({},Mo.selectProductTitle)),connectorIcon:r.jsx(Kc,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(m=(f=t.branding)==null?void 0:f.developer)!=null?m:void 0,onClose:e}),r.jsx(Yw,{defaultValue:c?"internalKnowledge":void 0,onContinue:s,options:d})]})},Mo=Ne({selectProductTitle:{id:"DAwG09",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"KXsRFb",defaultMessage:"Find, analyze, and synthesize your team's Notion pages and databases to create comprehensive reports"},deepResearchDescription:{id:"gZpO3N",defaultMessage:"Find, analyze, and synthesize Notion pages and databases for richer reports"},dontSyncTitle:{id:"GMrSDT",defaultMessage:"Don't sync"},dontSyncDescription:{id:"y/IdPs",defaultMessage:"ChatGPT will read your Notion content as needed, so replies may be slower."},internalKnowledgeTitle:{id:"QJf1Sc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"lJilfk",defaultMessage:"Sync Notion pages and databases to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"7Ar/Ej",defaultMessage:"Sync"},syncDescription:{id:"6WCZbJ",defaultMessage:"Sync Notion content to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Nae={value:"deepResearch",label:Mo.deepResearchTitle,description:Mo.deepResearchDescription,Icon:ul},Aae={value:"deepResearchAndOdyssey",label:Mo.deepResearchAndOdysseyTitle,description:Mo.deepResearchAndOdysseyDescription,Icon:ul},Iae={value:"internalKnowledge",label:Mo.internalKnowledgeTitle,description:Mo.internalKnowledgeDescription,Icon:Nl,Badge:Tae},jae={value:"internalKnowledge",label:Mo.syncTitle,description:Mo.syncDescription,Icon:Pd,Badge:Eae},Pae={value:"deepResearch",label:Mo.dontSyncTitle,description:Mo.dontSyncDescription,Icon:Na},Rae=Ne({selectProductTitle:{id:"uecmFA",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"plFxz/",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},deepResearchDescription:{id:"D9wqqk",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},dontSyncTitle:{id:"FNGsn2",defaultMessage:"Don't sync"},dontSyncDescription:{id:"ol0mde",defaultMessage:"ChatGPT will read your SharePoint files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"9IqPsM",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"Mkivbe",defaultMessage:"Sync SharePoint files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"w0EP7L",defaultMessage:"Sync"},syncDescription:{id:"WmlsRw",defaultMessage:"Sync SharePoint files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"g8mQKA",defaultMessage:"Contact your admin to enable SharePoint for chat"}}),Oae=Cr({messages:Rae});function M1(t,[e,s]){return Math.min(s,Math.max(e,t))}var Lae=[" ","Enter","ArrowUp","ArrowDown"],Dae=[" ","Enter"],Bp="Select",[Tx,Ex,Fae]=rC(Bp),[_f]=Oc(Bp,[Fae,P_]),Mx=P_(),[Bae,Al]=_f(Bp),[Uae,$ae]=_f(Bp),B7=t=>{const{__scopeSelect:e,children:s,open:n,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:m,required:p,form:g}=t,h=Mx(e),[_,b]=x.useState(null),[y,v]=x.useState(null),[S,C]=x.useState(!1),w=N_(u),[k=!1,E]=ii({prop:n,defaultProp:o,onChange:a}),[M,N]=ii({prop:i,defaultProp:l,onChange:c}),A=x.useRef(null),I=_?g||!!_.closest("form"):!0,[P,R]=x.useState(new Set),O=Array.from(P).map(L=>L.props.value).join(";");return r.jsx(aR,U(T({},h),{children:r.jsxs(Bae,{required:p,scope:e,trigger:_,onTriggerChange:b,valueNode:y,onValueNodeChange:v,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:R_(),value:M,onValueChange:N,open:k,onOpenChange:E,dir:w,triggerPointerDownPosRef:A,disabled:m,children:[r.jsx(Tx.Provider,{scope:e,children:r.jsx(Uae,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(L=>{R(D=>new Set(D).add(L))},[]),onNativeOptionRemove:x.useCallback(L=>{R(D=>{const H=new Set(D);return H.delete(L),H})},[]),children:s})}),I?r.jsxs(c8,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:M,onChange:L=>N(L.target.value),disabled:m,form:g,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(P)]},O):null]})}))};B7.displayName=Bp;var U7="SelectTrigger",$7=x.forwardRef((t,e)=>{const h=t,{__scopeSelect:s,disabled:n=!1}=h,o=De(h,["__scopeSelect","disabled"]),a=Mx(s),i=Al(U7,s),l=i.disabled||n,c=Ks(e,i.onTriggerChange),u=Ex(s),d=x.useRef("touch"),[f,m,p]=u8(_=>{const b=u().filter(S=>!S.disabled),y=b.find(S=>S.value===i.value),v=d8(b,_,y);v!==void 0&&i.onValueChange(v.value)}),g=_=>{l||(i.onOpenChange(!0),p()),_&&(i.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return r.jsx(_C,U(T({asChild:!0},a),{children:r.jsx(vs.button,U(T({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":l8(i.value)?"":void 0},o),{ref:c,onClick:zt(o.onClick,_=>{_.currentTarget.focus(),d.current!=="mouse"&&g(_)}),onPointerDown:zt(o.onPointerDown,_=>{d.current=_.pointerType;const b=_.target;b.hasPointerCapture(_.pointerId)&&b.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(g(_),_.preventDefault())}),onKeyDown:zt(o.onKeyDown,_=>{const b=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&m(_.key),!(b&&_.key===" ")&&Lae.includes(_.key)&&(g(),_.preventDefault())})}))}))});$7.displayName=U7;var H7="SelectValue",G7=x.forwardRef((t,e)=>{const m=t,{__scopeSelect:s,className:n,style:o,children:a,placeholder:i=""}=m,l=De(m,["__scopeSelect","className","style","children","placeholder"]),c=Al(H7,s),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=Ks(e,c.onValueNodeChange);return li(()=>{u(d)},[u,d]),r.jsx(vs.span,U(T({},l),{ref:f,style:{pointerEvents:"none"},children:l8(c.value)?r.jsx(r.Fragment,{children:i}):a}))});G7.displayName=H7;var Hae="SelectIcon",V7=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:s,children:n}=a,o=De(a,["__scopeSelect","children"]);return r.jsx(vs.span,U(T({"aria-hidden":!0},o),{ref:e,children:n||""}))});V7.displayName=Hae;var Gae="SelectPortal",z7=t=>r.jsx(lC,T({asChild:!0},t));z7.displayName=Gae;var kc="SelectContent",W7=x.forwardRef((t,e)=>{const s=Al(kc,t.__scopeSelect),[n,o]=x.useState();if(li(()=>{o(new DocumentFragment)},[]),!s.open){const a=n;return a?dr.createPortal(r.jsx(q7,{scope:t.__scopeSelect,children:r.jsx(Tx.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),a):null}return r.jsx(K7,U(T({},t),{ref:e}))});W7.displayName=kc;var ma=10,[q7,Il]=_f(kc),Vae="SelectContentImpl",K7=x.forwardRef((t,e)=>{const se=t,{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:_}=se,b=De(se,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),y=Al(kc,s),[v,S]=x.useState(null),[C,w]=x.useState(null),k=Ks(e,ee=>S(ee)),[E,M]=x.useState(null),[N,A]=x.useState(null),I=Ex(s),[P,R]=x.useState(!1),O=x.useRef(!1);x.useEffect(()=>{if(v)return rR(v)},[v]),iR();const L=x.useCallback(ee=>{const[re,...he]=I().map(le=>le.ref.current),[fe]=he.slice(-1),pe=document.activeElement;for(const le of ee)if(le===pe||(le==null||le.scrollIntoView({block:"nearest"}),le===re&&C&&(C.scrollTop=0),le===fe&&C&&(C.scrollTop=C.scrollHeight),le==null||le.focus(),document.activeElement!==pe))return},[I,C]),D=x.useCallback(()=>L([E,v]),[L,E,v]);x.useEffect(()=>{P&&D()},[P,D]);const{onOpenChange:H,triggerPointerDownPosRef:V}=y;x.useEffect(()=>{if(v){let ee={x:0,y:0};const re=fe=>{var pe,le,ve,Te;ee={x:Math.abs(Math.round(fe.pageX)-((le=(pe=V.current)==null?void 0:pe.x)!=null?le:0)),y:Math.abs(Math.round(fe.pageY)-((Te=(ve=V.current)==null?void 0:ve.y)!=null?Te:0))}},he=fe=>{ee.x<=10&&ee.y<=10?fe.preventDefault():v.contains(fe.target)||H(!1),document.removeEventListener("pointermove",re),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",he,{capture:!0})}}},[v,H,V]),x.useEffect(()=>{const ee=()=>H(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[H]);const[q,W]=u8(ee=>{const re=I().filter(pe=>!pe.disabled),he=re.find(pe=>pe.ref.current===document.activeElement),fe=d8(re,ee,he);fe&&setTimeout(()=>fe.ref.current.focus())}),$=x.useCallback((ee,re,he)=>{const fe=!O.current&&!he;(y.value!==void 0&&y.value===re||fe)&&(M(ee),fe&&(O.current=!0))},[y.value]),Z=x.useCallback(()=>v==null?void 0:v.focus(),[v]),K=x.useCallback((ee,re,he)=>{const fe=!O.current&&!he;(y.value!==void 0&&y.value===re||fe)&&A(ee)},[y.value]),Y=n==="popper"?c2:Y7,ae=Y===c2?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:_}:{};return r.jsx(q7,{scope:s,content:v,viewport:C,onViewportChange:w,itemRefCallback:$,selectedItem:E,onItemLeave:Z,itemTextRefCallback:K,focusSelectedItem:D,selectedItemText:N,position:n,isPositioned:P,searchRef:q,children:r.jsx(lR,{as:cR,allowPinchZoom:!0,children:r.jsx(uR,{asChild:!0,trapped:y.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:zt(o,ee=>{var re;(re=y.trigger)==null||re.focus({preventScroll:!0}),ee.preventDefault()}),children:r.jsx(dR,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:r.jsx(Y,U(T(T({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ee=>ee.preventDefault()},b),ae),{onPlaced:()=>R(!0),ref:k,style:T({display:"flex",flexDirection:"column",outline:"none"},b.style),onKeyDown:zt(b.onKeyDown,ee=>{const re=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!re&&ee.key.length===1&&W(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let fe=I().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const pe=ee.target,le=fe.indexOf(pe);fe=fe.slice(le+1)}setTimeout(()=>L(fe)),ee.preventDefault()}})}))})})})})});K7.displayName=Vae;var zae="SelectItemAlignedPosition",Y7=x.forwardRef((t,e)=>{const k=t,{__scopeSelect:s,onPlaced:n}=k,o=De(k,["__scopeSelect","onPlaced"]),a=Al(kc,s),i=Il(kc,s),[l,c]=x.useState(null),[u,d]=x.useState(null),f=Ks(e,E=>d(E)),m=Ex(s),p=x.useRef(!1),g=x.useRef(!0),{viewport:h,selectedItem:_,selectedItemText:b,focusSelectedItem:y}=i,v=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&h&&_&&b){const E=a.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),N=a.valueNode.getBoundingClientRect(),A=b.getBoundingClientRect();if(a.dir!=="rtl"){const pe=A.left-M.left,le=N.left-pe,ve=E.left-le,Te=E.width+ve,xe=Math.max(Te,M.width),ce=window.innerWidth-ma,we=M1(le,[ma,Math.max(ma,ce-xe)]);l.style.minWidth=Te+"px",l.style.left=we+"px"}else{const pe=M.right-A.right,le=window.innerWidth-N.right-pe,ve=window.innerWidth-E.right-le,Te=E.width+ve,xe=Math.max(Te,M.width),ce=window.innerWidth-ma,we=M1(le,[ma,Math.max(ma,ce-xe)]);l.style.minWidth=Te+"px",l.style.right=we+"px"}const I=m(),P=window.innerHeight-ma*2,R=h.scrollHeight,O=window.getComputedStyle(u),L=parseInt(O.borderTopWidth,10),D=parseInt(O.paddingTop,10),H=parseInt(O.borderBottomWidth,10),V=parseInt(O.paddingBottom,10),q=L+D+R+V+H,W=Math.min(_.offsetHeight*5,q),$=window.getComputedStyle(h),Z=parseInt($.paddingTop,10),K=parseInt($.paddingBottom,10),Y=E.top+E.height/2-ma,ae=P-Y,se=_.offsetHeight/2,ee=_.offsetTop+se,re=L+D+ee,he=q-re;if(re<=Y){const pe=I.length>0&&_===I[I.length-1].ref.current;l.style.bottom="0px";const le=u.clientHeight-h.offsetTop-h.offsetHeight,ve=Math.max(ae,se+(pe?K:0)+le+H),Te=re+ve;l.style.height=Te+"px"}else{const pe=I.length>0&&_===I[0].ref.current;l.style.top="0px";const ve=Math.max(Y,L+h.offsetTop+(pe?Z:0)+se)+he;l.style.height=ve+"px",h.scrollTop=re-Y+h.offsetTop}l.style.margin="".concat(ma,"px 0"),l.style.minHeight=W+"px",l.style.maxHeight=P+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,u,h,_,b,a.dir,n]);li(()=>v(),[v]);const[S,C]=x.useState();li(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const w=x.useCallback(E=>{E&&g.current===!0&&(v(),y==null||y(),g.current=!1)},[v,y]);return r.jsx(qae,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:w,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:r.jsx(vs.div,U(T({},o),{ref:f,style:T({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});Y7.displayName=zae;var Wae="SelectPopperPosition",c2=x.forwardRef((t,e)=>{const l=t,{__scopeSelect:s,align:n="start",collisionPadding:o=ma}=l,a=De(l,["__scopeSelect","align","collisionPadding"]),i=Mx(s);return r.jsx(fR,U(T(T({},i),a),{ref:e,align:n,collisionPadding:o,style:U(T({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});c2.displayName=Wae;var[qae,Xw]=_f(kc,{}),u2="SelectViewport",Q7=x.forwardRef((t,e)=>{const u=t,{__scopeSelect:s,nonce:n}=u,o=De(u,["__scopeSelect","nonce"]),a=Il(u2,s),i=Xw(u2,s),l=Ks(e,a.onViewportChange),c=x.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),r.jsx(Tx.Slot,{scope:s,children:r.jsx(vs.div,U(T({"data-radix-select-viewport":"",role:"presentation"},o),{ref:l,style:T({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:zt(o.onScroll,d=>{const f=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&m){const g=Math.abs(c.current-f.scrollTop);if(g>0){const h=window.innerHeight-ma*2,_=parseFloat(m.style.minHeight),b=parseFloat(m.style.height),y=Math.max(_,b);if(y<h){const v=y+g,S=Math.min(h,v),C=v-S;m.style.height=S+"px",m.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})}))})]})});Q7.displayName=u2;var J7="SelectGroup",[Kae,Yae]=_f(J7),Z7=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:s}=a,n=De(a,["__scopeSelect"]),o=R_();return r.jsx(Kae,{scope:s,id:o,children:r.jsx(vs.div,U(T({role:"group","aria-labelledby":o},n),{ref:e}))})});Z7.displayName=J7;var X7="SelectLabel",e8=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:s}=a,n=De(a,["__scopeSelect"]),o=Yae(X7,s);return r.jsx(vs.div,U(T({id:o.id},n),{ref:e}))});e8.displayName=X7;var N1="SelectItem",[Qae,t8]=_f(N1),s8=x.forwardRef((t,e)=>{const y=t,{__scopeSelect:s,value:n,disabled:o=!1,textValue:a}=y,i=De(y,["__scopeSelect","value","disabled","textValue"]),l=Al(N1,s),c=Il(N1,s),u=l.value===n,[d,f]=x.useState(a!=null?a:""),[m,p]=x.useState(!1),g=Ks(e,v=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,v,n,o)}),h=R_(),_=x.useRef("touch"),b=()=>{o||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(Qae,{scope:s,value:n,disabled:o,textId:h,isSelected:u,onItemTextChange:x.useCallback(v=>{f(S=>{var C;return S||((C=v==null?void 0:v.textContent)!=null?C:"").trim()})},[]),children:r.jsx(Tx.ItemSlot,{scope:s,value:n,disabled:o,textValue:d,children:r.jsx(vs.div,U(T({role:"option","aria-labelledby":h,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},i),{ref:g,onFocus:zt(i.onFocus,()=>p(!0)),onBlur:zt(i.onBlur,()=>p(!1)),onClick:zt(i.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:zt(i.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:zt(i.onPointerDown,v=>{_.current=v.pointerType}),onPointerMove:zt(i.onPointerMove,v=>{var S;_.current=v.pointerType,o?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:zt(i.onPointerLeave,v=>{var S;v.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:zt(i.onKeyDown,v=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&v.key===" "||(Dae.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})}))})})});s8.displayName=N1;var mm="SelectItemText",n8=x.forwardRef((t,e)=>{const b=t,{__scopeSelect:s,className:n,style:o}=b,a=De(b,["__scopeSelect","className","style"]),i=Al(mm,s),l=Il(mm,s),c=t8(mm,s),u=$ae(mm,s),[d,f]=x.useState(null),m=Ks(e,y=>f(y),c.onItemTextChange,y=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,y,c.value,c.disabled)}),p=d==null?void 0:d.textContent,g=x.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:_}=u;return li(()=>(h(g),()=>_(g)),[h,_,g]),r.jsxs(r.Fragment,{children:[r.jsx(vs.span,U(T({id:c.textId},a),{ref:m})),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?dr.createPortal(a.children,i.valueNode):null]})});n8.displayName=mm;var o8="SelectItemIndicator",a8=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:s}=a,n=De(a,["__scopeSelect"]);return t8(o8,s).isSelected?r.jsx(vs.span,U(T({"aria-hidden":!0},n),{ref:e})):null});a8.displayName=o8;var d2="SelectScrollUpButton",Jae=x.forwardRef((t,e)=>{const s=Il(d2,t.__scopeSelect),n=Xw(d2,t.__scopeSelect),[o,a]=x.useState(!1),i=Ks(e,n.onScrollButtonChange);return li(()=>{if(s.viewport&&s.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),o?r.jsx(r8,U(T({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});Jae.displayName=d2;var f2="SelectScrollDownButton",Zae=x.forwardRef((t,e)=>{const s=Il(f2,t.__scopeSelect),n=Xw(f2,t.__scopeSelect),[o,a]=x.useState(!1),i=Ks(e,n.onScrollButtonChange);return li(()=>{if(s.viewport&&s.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),o?r.jsx(r8,U(T({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});Zae.displayName=f2;var r8=x.forwardRef((t,e)=>{const u=t,{__scopeSelect:s,onAutoScroll:n}=u,o=De(u,["__scopeSelect","onAutoScroll"]),a=Il("SelectScrollButton",s),i=x.useRef(null),l=Ex(s),c=x.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return x.useEffect(()=>()=>c(),[c]),li(()=>{var f;const d=l().find(m=>m.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(vs.div,U(T({"aria-hidden":!0},o),{ref:e,style:T({flexShrink:0},o.style),onPointerDown:zt(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:zt(o.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:zt(o.onPointerLeave,()=>{c()})}))}),Xae="SelectSeparator",i8=x.forwardRef((t,e)=>{const o=t,{__scopeSelect:s}=o,n=De(o,["__scopeSelect"]);return r.jsx(vs.div,U(T({"aria-hidden":!0},n),{ref:e}))});i8.displayName=Xae;var m2="SelectArrow",ere=x.forwardRef((t,e)=>{const l=t,{__scopeSelect:s}=l,n=De(l,["__scopeSelect"]),o=Mx(s),a=Al(m2,s),i=Il(m2,s);return a.open&&i.position==="popper"?r.jsx(mR,U(T(T({},o),n),{ref:e})):null});ere.displayName=m2;function l8(t){return t===""||t===void 0}var c8=x.forwardRef((t,e)=>{const l=t,{value:s}=l,n=De(l,["value"]),o=x.useRef(null),a=Ks(e,o),i=mC(s);return x.useEffect(()=>{const c=o.current,u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==s&&f){const m=new Event("change",{bubbles:!0});f.call(c,s),c.dispatchEvent(m)}},[i,s]),r.jsx(iC,{asChild:!0,children:r.jsx("select",U(T({},n),{ref:a,defaultValue:s}))})});c8.displayName="BubbleSelect";function u8(t){const e=Om(t),s=x.useRef(""),n=x.useRef(0),o=x.useCallback(i=>{const l=s.current+i;e(l),(function c(u){s.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),a=x.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,o,a]}function d8(t,e,s){const o=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let i=tre(t,Math.max(a,0));o.length===1&&(i=i.filter(u=>u!==s));const c=i.find(u=>u.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==s?c:void 0}function tre(t,e){return t.map((s,n)=>t[(e+n)%t.length])}var sre=B7,nre=$7,ore=G7,are=V7,rre=z7,ire=W7,f8=Q7,lre=Z7,cre=e8,ure=s8,dre=n8,fre=a8,mre=i8;function pre(a,o){var i=a,{children:t,iconClassName:e,className:s}=i,n=De(i,["children","iconClassName","className"]);return r.jsxs(ure,U(T({ref:o,className:z("__menu-item flex justify-between",s)},n),{children:[r.jsx(dre,{children:t}),r.jsx(fre,{className:"trailing",children:r.jsx(sC,{className:e!=null?e:"icon-sm"})})]}))}function gre(t){return r.jsx(NK,T({$as:nre},t))}function hre(n){var o=n,{children:t,className:e}=o,s=De(o,["children","className"]);return r.jsx(pR,U(T({$as:ire,side:"bottom",sideOffset:4,alignOffset:-4,position:"popper",className:z("max-h-[60vh] min-w-[220px] overflow-auto",e)},s),{children:r.jsx(f8,{children:t})}))}function _re(){return r.jsx(are,{children:r.jsx(zo,{className:"icon-sm"})})}function xre({className:t}){return r.jsx(mre,{className:z("bg-token-border-default mx-5 my-2 h-px",t)})}function yre({children:t,className:e}){return r.jsx(cre,{className:z("text-token-text-secondary mx-2 my-1 px-3 text-xs font-semibold",e),children:t})}function pXe({options:t,value:e,onValueChange:s,disabled:n,defaultValue:o,placeholder:a,triggerClassName:i,contentClassName:l,triggerId:c}){return r.jsxs(rs.Root,{value:e,onValueChange:s,disabled:n,defaultValue:o,children:[r.jsxs(rs.Trigger,{className:i,id:c,children:[r.jsx(rs.Value,{placeholder:a}),r.jsx(rs.Icon,{})]}),r.jsx(rs.Portal,{children:r.jsx(rs.Content,{className:l,children:t.map(u=>r.jsx(rs.Item,{value:u.value,children:u.label},u.value))})})]})}const rs={Root:sre,Trigger:gre,Value:ore,Icon:_re,Portal:rre,Content:hre,Item:gn.forwardRef(pre),Separator:xre,Label:yre,Group:lre,Viewport:f8};var gy,kM;function bre(){if(kM)return gy;kM=1;var t=AK(),e=t(function(s,n,o){s[o?0:1].push(n)},function(){return[[],[]]});return gy=e,gy}var vre=bre();const ek=en(vre),Sre=Ne({selectProductTitle:{id:"tiiSob",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"E2YSMq",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},deepResearchDescription:{id:"sQ+00J",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},dontSyncTitle:{id:"M9p5Sr",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uJTHjO",defaultMessage:"ChatGPT will read your Box files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8z2iu4",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"xK+380",defaultMessage:"Sync Box files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"nbQOhy",defaultMessage:"Sync"},syncDescription:{id:"QVxBJI",defaultMessage:"Sync Box files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"4Gp6+x",defaultMessage:"Contact your admin to enable Box for chat"}}),Cre=Cr({messages:Sre}),wre=Ne({selectProductTitle:{id:"Kc1KGe",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"YxjjQU",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},deepResearchDescription:{id:"SmRTX8",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},dontSyncTitle:{id:"B1m/Ur",defaultMessage:"Don't sync"},dontSyncDescription:{id:"nDBuCO",defaultMessage:"ChatGPT will read your Confluence pages as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8ckwHH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"CkaEi7",defaultMessage:"Sync Confluence pages to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"tJk3ba",defaultMessage:"Sync"},syncDescription:{id:"di8xMd",defaultMessage:"Sync Confluence pages to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"dKvJHF",defaultMessage:"Contact your admin to enable Confluence for chat"}}),kre=Cr({messages:wre}),Tre=Ne({selectProductTitle:{id:"5spMkf",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"U0acJQ",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},deepResearchDescription:{id:"jIJEzP",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},dontSyncTitle:{id:"8B2iTh",defaultMessage:"Don't sync"},dontSyncDescription:{id:"MWu53i",defaultMessage:"ChatGPT will read your Dropbox files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iUMNhW",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"73blMa",defaultMessage:"Sync Dropbox files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"aRVh2X",defaultMessage:"Sync"},syncDescription:{id:"uTHxb2",defaultMessage:"Sync Dropbox files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"/uVHMl",defaultMessage:"Contact your admin to enable Dropbox for chat"}}),Ere=Cr({messages:Tre}),Mre=Ne({selectProductTitle:{id:"vNGjSS",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"1X1JDE",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},deepResearchDescription:{id:"0ExpFM",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},dontSyncTitle:{id:"4WufmE",defaultMessage:"Don't sync"},dontSyncDescription:{id:"0BFTy+",defaultMessage:"ChatGPT will read your Intercom conversations as needed, so replies may be slower."},internalKnowledgeTitle:{id:"m/G/ff",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"4gC4/b",defaultMessage:"Sync Intercom conversations to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"YxCdN8",defaultMessage:"Contact your admin to enable Intercom for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"jafwiu",defaultMessage:"Sync"},syncDescription:{id:"ISqAI/",defaultMessage:"Sync Intercom conversations to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Nre=Cr({messages:Mre}),Are=Ne({selectProductTitle:{id:"kU51Yz",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"5P9nHy",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},deepResearchDescription:{id:"7qO5UY",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},dontSyncTitle:{id:"s+7AVU",defaultMessage:"Don't sync"},dontSyncDescription:{id:"qQEaBe",defaultMessage:"ChatGPT will read your Linear issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"CZbTgH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"S+Hglq",defaultMessage:"Sync Linear issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"XI3bjb",defaultMessage:"Sync"},syncDescription:{id:"3e8sdS",defaultMessage:"Sync Linear issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"lxy6iQ",defaultMessage:"Contact your admin to enable Linear for chat"}}),Ire=Cr({messages:Are}),TM=Pe(()=>me(()=>import("./gaj6e78ii9fgijkk.js"),__vite__mapDeps([5,1,3,4,6,7,8,9,10,2])).then(t=>t.RedirectContent));function zs({platformConnectorType:t,knowledgeConnectorType:e,connectorId:s,ProductSelectComponent:n,syncConnectorId:o,showProductSelectWithoutDeepResearch:a}){return function({onClose:l,connector:c,hideHeaderIcons:u}){var Fe;const d=ne(),f=d.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),m=pC(),p=!!tR(),[g,h]=x.useState(!1),_=(Fe=gC())!=null?Fe:"unknown_referrer",b=fs(),y=sf(),v=G(),S=dp(v),C=x.useMemo(()=>gR(c.link_params_schema),[c.link_params_schema]),[w,k]=x.useState({}),E=x.useMemo(()=>hR(C,w),[C,w]),[M,N]=x.useState({}),A=x.useMemo(()=>{const be=new Set(C.map(qe=>qe.name)),Oe={};for(const[qe,Ze]of Object.entries(M))be.has(qe)&&(Oe[qe]=Ze);return Oe},[M,C]),I=x.useCallback((be,Oe)=>{k(qe=>U(T({},qe),{[be]:Oe})),N(qe=>{if(!qe[be])return qe;const Ze=T({},qe);return delete Ze[be],Ze})},[]),P=(b==null?void 0:b.planType)===tt.SELF_SERVE_BUSINESS?!0:!!(b!=null&&b.isPersonalAccount()&&y),{availableConnectors:R,isLoading:O}=oR(),{availableConnectors:L,isLoading:D}=L7(),{isLoading:H,internalKnowledgeConfigs:V,internalKnowledgeEnabled:q}=sie(e),[W,$]=x.useMemo(()=>ek(V!=null?V:[],be=>be.user_connection_details.auth_status==="not_connected"),[V]),Z=W.length,K=$.length,Y=Z>0||P,{connectorLinks:ae,refetch:se,isLoading:ee}=Ta({productSku:$s.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:re}=Ta({productSku:$s.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),he=Qw(),{mutateAsync:fe}=nR(),pe=x.useMemo(()=>{var be;return!!((be=ae.get(s))!=null&&be.length)},[ae]),le=!pe&&R.some(be=>be.type===t),ve=!pe&&L.some(be=>be.type===t),Te=le||ve,xe=!!(n&&a&&Y),ce=!!n&&m!==$s.DEEP_RESEARCH&&(Te||xe)&&(Y||!(b!=null&&b.isPersonalAccount())&&q&&K<1&&!P),we=Te?ve?"deepResearchAndOdyssey":"deepResearch":null,ge=Y&&Te,Ae=m!==$s.DEEP_RESEARCH&&ge&&Ee(v,"3495630358"),Ue=o==null,[Ie,Me]=x.useState(()=>p||Y&&!Te?"internalKnowledge":m===$s.DEEP_RESEARCH?"deepResearch":Ae?Ue?"internalKnowledge":we:null),te=m===$s.DEEP_RESEARCH||Ie==="deepResearch"||Ie==="deepResearchAndOdyssey"||!ce&&Te,Q=Ie==="internalKnowledge"||!ce&&m!==$s.DEEP_RESEARCH&&Y,ie=te?$s.DEEP_RESEARCH:$s.CONNECTOR_SETTING,_e=Q&&Y,ye=_e&&o!=null,Re=m!==$s.DEEP_RESEARCH&&(H||ce&&(O||D))||ce&&ee,Ve=C.length>0?r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:r.jsx(j,T({},tr.sectionTitle))}),r.jsx("div",{className:"text-token-text-secondary text-xs",children:r.jsx(j,T({},tr.sectionDescription))})]}),r.jsx("div",{className:"flex flex-col gap-3",children:C.map(be=>{var rt,wt,at;const Oe=be.required?d.formatMessage(tr.fieldLabelRequired,{label:be.title}):be.title,qe=d.formatMessage(tr.fieldPlaceholder,{label:be.title}),Ze=A[be.name];if(be.enumValues&&be.enumValues.length>0){const kt="link_param_".concat(be.name),Nt="".concat(kt,"_label"),Ot=Ze?"".concat(kt,"_error"):void 0,At=(rt=E[be.name])!=null?rt:"";return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{id:Nt,className:"text-token-text-primary text-xs font-semibold",htmlFor:kt,children:Oe}),r.jsxs(rs.Root,{value:At===""?void 0:At,onValueChange:Wt=>I(be.name,Wt),children:[r.jsxs(rs.Trigger,{id:kt,"aria-labelledby":Nt,"aria-describedby":Ot,"aria-invalid":Ze?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[r.jsx("div",{className:"flex-1 truncate text-sm",children:r.jsx(rs.Value,{placeholder:qe})}),r.jsx(rs.Icon,{})]}),r.jsx(rs.Portal,{children:r.jsx(rs.Content,{className:"border-token-border-heavy border",children:(wt=be.enumValues)==null?void 0:wt.map(Wt=>r.jsx(rs.Item,{value:Wt,children:Wt},Wt))})})]}),Ze?r.jsxs("div",{id:Ot,className:"flex items-center gap-1 text-xs text-red-500",children:[r.jsx(kx,{title:f}),Ze]}):null,be.description?r.jsx("div",{className:"text-token-text-secondary text-xs",children:be.description}):null]},be.name)}return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Zw,{name:"link_param_".concat(be.name),displayName:Oe,value:(at=E[be.name])!=null?at:"",onChange:kt=>I(be.name,kt.target.value),placeholder:qe,error:Ze,showErrorIcon:!0}),be.description?r.jsx("div",{className:"text-token-text-secondary text-xs",children:be.description}):null]},be.name)})})]}):void 0,ze=x.useCallback(async()=>{var Oe;let be;if(C.length>0){const{sanitizedLinkParams:qe,errors:Ze}=_R(C,E,d);if(Object.keys(Ze).length>0){N(Ze),S.danger(d.formatMessage(tr.requiredFieldsToast));return}N({}),be=qe}try{h(!0),Jw("popup");const qe=he(c),Ze=ye&&o!=null?o:c.id,st=await hC({connector:c,redirectAfter:qe||void 0,toaster:S,openPopup:!0,intl:d,productSku:ie,connectorIdOverride:ye?o:void 0,linkParams:be});if(await se(),_e)try{const{data:rt}=await re(),wt=st&&typeof st=="object"?st.linkId:void 0,at=(Oe=rt==null?void 0:rt.get(Ze))==null?void 0:Oe[0];let kt=null;typeof wt=="string"?kt={id:wt,name:c.name,connector_id:Ze}:at&&typeof at.id=="string"&&(kt={id:at.id,name:c.name,connector_id:Ze}),kt&&(await fe({link:kt,isConnectingAndUpgrading:!0,referrer:_}),setTimeout(()=>{Gv(v)},1e3))}catch(rt){}l()}catch(qe){h(!1)}},[v,c,d,C,E,he,l,ie,se,re,ye,_e,S,fe,_]);return Re?r.jsx("div",{className:"flex justify-center",children:r.jsx(Wn,{})}):r.jsxs(r.Fragment,{children:[n&&ce&&!Ie&&r.jsx(n,{onClose:l,connector:c,onContinue:Me,canAddDeepResearch:le,canAddOdyssey:ve,canAddInternalKnowledge:Y}),(te||_e)&&r.jsx(TM,{connector:c,onClose:l,isConnecting:g,onContinue:ze,productSku:ie,canSync:Ae,isRequestingSync:Ie==="internalKnowledge",setIsRequestingSync:be=>Me(be?"internalKnowledge":we),additionalContent:Ve,hideHeaderIcons:u}),Q&&!_e&&r.jsx(TM,{connector:c,onClose:()=>{Me(null),ce||l()},isConnecting:g,onContinue:ze,productSku:ie,canSync:Ae,isRequestingSync:Ie==="internalKnowledge",setIsRequestingSync:be=>Me(be?"internalKnowledge":we),additionalContent:Ve,hideHeaderIcons:u})]})}}const jre=zs({platformConnectorType:je.SHAREPOINT_CONNECTOR,knowledgeConnectorType:"sharepoint",connectorId:Xu,ProductSelectComponent:Oae}),Pre=zs({platformConnectorType:je.DROPBOX_CONNECTOR,knowledgeConnectorType:"dropbox",connectorId:FK,ProductSelectComponent:Ere}),Rre=zs({platformConnectorType:je.BOX_CONNECTOR,knowledgeConnectorType:"box",connectorId:DK,ProductSelectComponent:Cre}),Ore=zs({platformConnectorType:je.LINEAR_CONNECTOR,knowledgeConnectorType:"linear",connectorId:LK,ProductSelectComponent:Ire}),Lre=zs({platformConnectorType:je.JIRA_CONNECTOR,knowledgeConnectorType:"jira",connectorId:us[je.JIRA_CONNECTOR],ProductSelectComponent:Cae}),Dre=zs({platformConnectorType:je.JIRA_SERVICEMANAGEMENT_CONNECTOR,knowledgeConnectorType:"jira_servicemanagement",connectorId:us[je.JIRA_SERVICEMANAGEMENT_CONNECTOR],ProductSelectComponent:kae}),Fre=zs({platformConnectorType:je.CONFLUENCE_CONNECTOR,knowledgeConnectorType:"confluence",connectorId:us[je.CONFLUENCE_CONNECTOR],ProductSelectComponent:kre}),Bre=zs({platformConnectorType:je.NOTION_CONNECTOR,knowledgeConnectorType:"notion",connectorId:RK,syncConnectorId:OK,ProductSelectComponent:Mae}),Ure=zs({platformConnectorType:je.HUBSPOT_CONNECTOR,knowledgeConnectorType:"hubspot",connectorId:jK,syncConnectorId:PK,ProductSelectComponent:vae}),$re=zs({platformConnectorType:je.INTERCOM_CONNECTOR,knowledgeConnectorType:"intercom",connectorId:IK,ProductSelectComponent:Nre,showProductSelectWithoutDeepResearch:!0}),Hre=zs({platformConnectorType:je.AHA_CONNECTOR,knowledgeConnectorType:"aha",connectorId:us[je.AHA_CONNECTOR]}),Gre=zs({platformConnectorType:je.ASANA_CONNECTOR,knowledgeConnectorType:"asana",connectorId:us[je.ASANA_CONNECTOR]}),Vre=zs({platformConnectorType:je.AZURE_DEVOPS_CONNECTOR,knowledgeConnectorType:"azure_devops",connectorId:us[je.AZURE_DEVOPS_CONNECTOR]}),zre=zs({platformConnectorType:je.CLICKUP_CONNECTOR,knowledgeConnectorType:"clickup",connectorId:us[je.CLICKUP_CONNECTOR]}),Wre=zs({platformConnectorType:je.BASECAMP_CONNECTOR,knowledgeConnectorType:"basecamp",connectorId:us[je.BASECAMP_CONNECTOR]}),qre=zs({platformConnectorType:je.GITLAB_CONNECTOR,knowledgeConnectorType:"gitlab",connectorId:us[je.GITLAB_CONNECTOR]}),Kre=zs({platformConnectorType:je.GORGIAS_CONNECTOR,knowledgeConnectorType:"gorgias",connectorId:us[je.GORGIAS_CONNECTOR]}),Yre=zs({platformConnectorType:je.HELP_SCOUT_CONNECTOR,knowledgeConnectorType:"help_scout",connectorId:us[je.HELP_SCOUT_CONNECTOR]}),Qre=zs({platformConnectorType:je.IRONCLAD_CONNECTOR,knowledgeConnectorType:"ironclad",connectorId:us[je.IRONCLAD_CONNECTOR]}),Jre=zs({platformConnectorType:je.TEAMWORK_CONNECTOR,knowledgeConnectorType:"teamwork",connectorId:us[je.TEAMWORK_CONNECTOR]}),Zre=zs({platformConnectorType:je.PIPEDRIVE_CONNECTOR,knowledgeConnectorType:"pipedrive",connectorId:us[je.PIPEDRIVE_CONNECTOR]}),Xre=zs({platformConnectorType:je.ZOHO_CONNECTOR,knowledgeConnectorType:"zoho",connectorId:us[je.ZOHO_CONNECTOR]}),eie=zs({platformConnectorType:je.ZOHO_DESK_CONNECTOR,knowledgeConnectorType:"zoho_desk",connectorId:us[je.ZOHO_DESK_CONNECTOR]}),tie=zs({platformConnectorType:je.ZENDESK_CONNECTOR,knowledgeConnectorType:"zendesk",connectorId:us[je.ZENDESK_CONNECTOR]});function sie(t){const e=O_(),s=L_(),n=x.useMemo(()=>{var o;return(o=s.data)==null?void 0:o.connection_statuses.filter(a=>a.user_connection_details.knowledge_connector_type===t)},[s.data,t]);return{isLoading:s.isLoading,internalKnowledgeEnabled:e,internalKnowledgeConfigs:e&&(n!=null&&n.length)?n:null}}const p2=ue(Ce,"f0ee98",16,16),nie=Pe(()=>me(()=>import("./gaj6e78ii9fgijkk.js"),__vite__mapDeps([5,1,3,4,6,7,8,9,10,2])).then(t=>t.RedirectContent)),hy=Ne({addConnectorLinkModalTitle:{id:"addConnectorLinkModal.title",defaultMessage:"Connect {connectorName}"},overlayPillarAtlas:{id:"cJwLsn",defaultMessage:"When is Project Atlas launching?"},overlayPillarQ4Plans:{id:"BRs36X",defaultMessage:"Summarize our Q4 plans"},overlayPillarTravelPolicy:{id:"W60X5R",defaultMessage:"What is our travel policy?"}}),m8=({connector:t,onClose:e,productSku:s,redirectAfter:n,authTypeOverride:o,noRedirect:a=!1,onComplete:i})=>{"use no forget";var pe,le,ve,Te;const l=G(),c=ne(),u=Kt(),{connectorLinks:d}=Ta({productSku:s}),f=c.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),[m,p]=x.useState(!1),[g,h]=x.useState(void 0),_=Gt(),b=xC(),y=VK(),v=Qw(),S=gC(),[C,w]=Yn(),k=zK(),E=WK(),M=t.id===$v&&k,N=Ca[t.id]===je.GITHUB_CONNECTOR,A=Ee(l,"2515012530"),I=x.useMemo(()=>gR(t.link_params_schema),[t.link_params_schema]),[P,R]=x.useState({}),O=x.useMemo(()=>hR(I,P),[I,P]),[L,D]=x.useState({}),H=(pe=d.get(t.id))!=null?pe:[],V=(le=H[0])==null?void 0:le.id,q=qK((Te=(ve=H[0])==null?void 0:ve.tool_settings)==null?void 0:Te.personalized),W=x.useMemo(()=>{const xe=new Set(I.map(we=>we.name)),ce={};for(const[we,ge]of Object.entries(L))xe.has(we)&&(ce[we]=ge);return ce},[L,I]),{clampTemplatesContent:$,clampValidation:Z,validationToastMessage:K}=F7({templates:t.clamp_templates,intl:c,infoIcon:p2,enabled:A}),Y=(xe,ce)=>{R(we=>U(T({},we),{[xe]:ce})),D(we=>{if(!we[xe])return we;const ge=T({},we);return delete ge[xe],ge})};let ae=n;if(N){const xe=new URL(n!=null?n:"/",window.location.origin);b&&(xe.searchParams.append("github_onboarding","sync-repos"),ae=xe.pathname+xe.search)}const se=async(xe,ce)=>{const{actionParamSchemas:we,hasErrors:ge}=Z;if(ge){u.danger(K);return}const Ae=KK(t,o!=null?o:xe),Ue=ce===void 0?void 0:{personalized:ce?"PERSONALIZE_ALWAYS":"NO_PERSONALIZATION"};let Ie;if(Ae==="OAUTH"&&I.length>0){const{sanitizedLinkParams:Me,errors:te}=_R(I,O,c);if(Object.keys(te).length>0){D(te),u.danger(c.formatMessage(tr.requiredFieldsToast));return}D({}),Ie=Me}try{switch(p(!0),h(Ae),Ae){case"OAUTH":{a&&Jw("popup");const Me=v(t);await hC({connector:t,redirectAfter:a?void 0:Me||ae,toaster:u,openPopup:a?!0:y,intl:c,productSku:s,slackTeamIdOverride:t.id===$v&&E!=null?E:void 0,linkParams:Ie,toolSettings:Ue,actionParamSchemas:we}),await _.invalidateQueries({refetchType:"all",queryKey:["fetchConnectorLinkData"]}),i==null||i(),e();break}case"NONE":{await YK(t,Ue,we),await Promise.all([_.invalidateQueries({refetchType:"all",queryKey:["fetchConnectorLinkData"]}),QK.refetch(l)]),i==null||i(),e(),u.success(c.formatMessage({id:"cb/7hh",defaultMessage:"{connector} is now connected"},{connector:JK(t.name,c)})),(S===eo.JitPluginMessage||S===eo.MessageSuggestion||S===eo.SourcePills)&&w(Me=>(Me.set("link_success","true"),Me),{replace:!0});break}}}catch(Me){p(!1),h(void 0),Me instanceof Error&&u.danger(c.formatMessage({id:"wham.connectorSettings.addConnectorLinkModal.error",defaultMessage:"Failed to add connector link"}))}},ee=I.length>0?r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:r.jsx(j,T({},tr.sectionTitle))}),r.jsx("div",{className:"text-token-text-secondary text-xs",children:r.jsx(j,T({},tr.sectionDescription))})]}),r.jsx("div",{className:"flex flex-col gap-3",children:I.map(xe=>{var Ue,Ie,Me;const ce=xe.required?c.formatMessage(tr.fieldLabelRequired,{label:xe.title}):xe.title,we=c.formatMessage(tr.fieldPlaceholder,{label:xe.title}),ge=W[xe.name];if(xe.enumValues&&xe.enumValues.length>0){const te="link_param_".concat(xe.name),Q="".concat(te,"_label"),ie=ge?"".concat(te,"_error"):void 0,_e=(Ue=O[xe.name])!=null?Ue:"";return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{id:Q,className:"text-token-text-primary text-xs font-semibold",htmlFor:te,children:ce}),r.jsxs(rs.Root,{value:_e===""?void 0:_e,onValueChange:ye=>Y(xe.name,ye),children:[r.jsxs(rs.Trigger,{id:te,"aria-labelledby":Q,"aria-describedby":ie,"aria-invalid":ge?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[r.jsx("div",{className:"flex-1 truncate text-sm",children:r.jsx(rs.Value,{placeholder:we})}),r.jsx(rs.Icon,{})]}),r.jsx(rs.Portal,{children:r.jsx(rs.Content,{className:"border-token-border-heavy border",children:(Ie=xe.enumValues)==null?void 0:Ie.map(ye=>r.jsx(rs.Item,{value:ye,children:ye},ye))})})]}),ge?r.jsxs("div",{id:ie,className:"flex items-center gap-1 text-xs text-red-500",children:[r.jsx(kx,{title:f}),ge]}):null,xe.description?r.jsx("div",{className:"text-token-text-secondary text-xs",children:xe.description}):null]},xe.name)}return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(Zw,{name:"link_param_".concat(xe.name),displayName:ce,value:(Me=O[xe.name])!=null?Me:"",onChange:te=>Y(xe.name,te.target.value),placeholder:we,error:ge,showErrorIcon:!0}),xe.description?r.jsx("div",{className:"text-token-text-secondary text-xs",children:xe.description}):null]},xe.name)})})]}):void 0,re=Z.hasErrors,he=ee||$?r.jsxs("div",{className:"flex flex-col gap-4",children:[ee,$]}):void 0,fe=()=>{var xe;$e.count(He.ECOSYSTEM,"connector_link_modal_dismissed"),B.logEventWithStatsig("Connector Link Modal Dismissed","chatgpt_web_connector_link_modal_dismissed",{referrer:S,connector_id:t.id,connector_name:t.name,connector_distribution_channel:(xe=t.distribution_channel)!=null?xe:null,product_sku:s}),e()};return r.jsx(nie,{connector:t,onClose:fe,isConnecting:m,isConnectingAuthType:g,onContinue:se,productSku:s,showExternalIcon:!0,personalizationLinkId:V,isContinueDisabled:re,initialPersonalizeResultsEnabled:q,additionalContent:he,additionalMessageThatDoesNotContainLegalClaims:M?r.jsx(j,{id:"addConnectorLinkModal.slackWorkspaceReminder",defaultMessage:"In the next step, choose the {workspace} Slack workspace before approving access.",values:{workspace:r.jsx("span",{className:"font-semibold",children:k})}}):void 0})},oie=t=>{"use forget";const e=fs(),s=!(e!=null&&e.isPersonalAccount())&&(e==null?void 0:e.planType)!==tt.SELF_SERVE_BUSINESS,n=HK(),{isEnabled:o,isLoading:a}=GK(),i=s?o&&!a:!0,l=Rs("linear"),c=Rs("dropbox"),u=Rs("box"),d=Rs("notion"),f=Rs("hubspot"),m=Rs("confluence"),p=Rs("jira"),g=Rs("jira_servicemanagement"),h=Rs("intercom"),_=Rs("aha"),b=Rs("asana"),y=Rs("azure_devops"),v=Rs("basecamp"),S=Rs("clickup"),C=Rs("front"),w=Rs("gitlab"),k=Rs("gorgias"),E=Rs("help_scout"),M=Rs("ironclad"),N=Rs("pipedrive"),A=Rs("shortcut"),I=Rs("teamwork"),P=Rs("zendesk"),R=Rs("zoho"),O=Rs("zoho_desk");if(!t)return!1;switch(Ca[t.id]){case je.SHAREPOINT_CONNECTOR:return!!(n&&i);case je.LINEAR_CONNECTOR:return l;case je.DROPBOX_CONNECTOR:return c;case je.BOX_CONNECTOR:return u;case je.NOTION_CONNECTOR:return d;case je.HUBSPOT_CONNECTOR:return f;case je.CONFLUENCE_CONNECTOR:return m;case je.JIRA_CONNECTOR:return p;case je.JIRA_SERVICEMANAGEMENT_CONNECTOR:return g;case je.INTERCOM_CONNECTOR:return h;case je.AHA_CONNECTOR:return _;case je.ASANA_CONNECTOR:return b;case je.AZURE_DEVOPS_CONNECTOR:return y;case je.BASECAMP_CONNECTOR:return v;case je.CLICKUP_CONNECTOR:return S;case je.FRONT_CONNECTOR:return C;case je.GITLAB_CONNECTOR:return w;case je.GORGIAS_CONNECTOR:return k;case je.HELP_SCOUT_CONNECTOR:return E;case je.IRONCLAD_CONNECTOR:return M;case je.PIPEDRIVE_CONNECTOR:return N;case je.SHORTCUT_CONNECTOR:return A;case je.TEAMWORK_CONNECTOR:return I;case je.ZENDESK_CONNECTOR:return P;case je.ZOHO_CONNECTOR:return R;case je.ZOHO_DESK_CONNECTOR:return O;default:return!1}},p8=t=>{"use forget";const e=F.c(118),{onClose:s,connectorId:n,onComplete:o,redirectAfter:a,backgroundImageUrl:i,noRedirect:l}=t,c=G(),u=ne(),d=xR(),f=n!=null?n:d,m=pC(),{data:p,isLoading:g}=$oe(f);let h;e[0]!==p?(h=mae(p),e[0]=p,e[1]=h):h=e[1];const _=h,b=BK(),y=a!=null?a:b,v=UK(),S=$K(),C=l!=null?l:!!S,w=oie(_);if(g){let $;e[2]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(mn.Overlay,{}),e[2]=$):$=e[2];let Z;e[3]===Symbol.for("react.memo_cache_sentinel")?(Z=r.jsx(mn.Content,{children:r.jsx(Wn,{})}),e[3]=Z):Z=e[3];let K;return e[4]!==s?(K=r.jsxs(mn.Root,{isOpen:!0,onClose:s,testId:"modal-add-connector-link",children:[$,Z]}),e[4]=s,e[5]=K):K=e[5],K}const k=(_==null?void 0:_.id)===vm;if(!_){let $;e[6]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(mn.Overlay,{}),e[6]=$):$=e[6];let Z;return e[7]!==s?(Z=r.jsx(mn.Root,{isOpen:!0,onClose:s,testId:"modal-add-connector-link",children:$}),e[7]=s,e[8]=Z):Z=e[8],Z}const E=Ca[_.id];let M;e[9]!==v||e[10]!==_||e[11]!==C||e[12]!==s||e[13]!==o||e[14]!==m||e[15]!==y?(M=r.jsx(m8,{connector:_,onClose:s,productSku:m,redirectAfter:y,authTypeOverride:v,noRedirect:C,onComplete:o}),e[9]=v,e[10]=_,e[11]=C,e[12]=s,e[13]=o,e[14]=m,e[15]=y,e[16]=M):M=e[16];const N=M;let A;e:switch(E){case je.SHAREPOINT_CONNECTOR:{const $=!!i;let Z;e[17]!==_||e[18]!==s||e[19]!==$?(Z=r.jsx(jre,{onClose:s,connector:_,hideHeaderIcons:$}),e[17]=_,e[18]=s,e[19]=$,e[20]=Z):Z=e[20],A=Z;break e}case je.DROPBOX_CONNECTOR:{let $;e[21]!==_||e[22]!==s?($=r.jsx(Pre,{onClose:s,connector:_}),e[21]=_,e[22]=s,e[23]=$):$=e[23],A=$;break e}case je.BOX_CONNECTOR:{let $;e[24]!==_||e[25]!==s?($=r.jsx(Rre,{onClose:s,connector:_}),e[24]=_,e[25]=s,e[26]=$):$=e[26],A=$;break e}case je.LINEAR_CONNECTOR:{let $;e[27]!==_||e[28]!==s?($=r.jsx(Ore,{onClose:s,connector:_}),e[27]=_,e[28]=s,e[29]=$):$=e[29],A=$;break e}case je.NOTION_CONNECTOR:{let $;e[30]!==_||e[31]!==s?($=r.jsx(Bre,{onClose:s,connector:_}),e[30]=_,e[31]=s,e[32]=$):$=e[32],A=$;break e}case je.HUBSPOT_CONNECTOR:{let $;e[33]!==_||e[34]!==s?($=r.jsx(Ure,{onClose:s,connector:_}),e[33]=_,e[34]=s,e[35]=$):$=e[35],A=$;break e}case je.CONFLUENCE_CONNECTOR:{let $;e[36]!==_||e[37]!==s?($=r.jsx(Fre,{onClose:s,connector:_}),e[36]=_,e[37]=s,e[38]=$):$=e[38],A=$;break e}case je.JIRA_CONNECTOR:{let $;e[39]!==_||e[40]!==s?($=r.jsx(Lre,{onClose:s,connector:_}),e[39]=_,e[40]=s,e[41]=$):$=e[41],A=$;break e}case je.JIRA_SERVICEMANAGEMENT_CONNECTOR:{let $;e[42]!==_||e[43]!==s?($=r.jsx(Dre,{onClose:s,connector:_}),e[42]=_,e[43]=s,e[44]=$):$=e[44],A=$;break e}case je.INTERCOM_CONNECTOR:{let $;e[45]!==_||e[46]!==s?($=r.jsx($re,{onClose:s,connector:_}),e[45]=_,e[46]=s,e[47]=$):$=e[47],A=$;break e}case je.AHA_CONNECTOR:{let $;e[48]!==_||e[49]!==s?($=r.jsx(Hre,{onClose:s,connector:_}),e[48]=_,e[49]=s,e[50]=$):$=e[50],A=$;break e}case je.ASANA_CONNECTOR:{let $;e[51]!==_||e[52]!==s?($=r.jsx(Gre,{onClose:s,connector:_}),e[51]=_,e[52]=s,e[53]=$):$=e[53],A=$;break e}case je.AZURE_DEVOPS_CONNECTOR:{let $;e[54]!==_||e[55]!==s?($=r.jsx(Vre,{onClose:s,connector:_}),e[54]=_,e[55]=s,e[56]=$):$=e[56],A=$;break e}case je.BASECAMP_CONNECTOR:{let $;e[57]!==_||e[58]!==s?($=r.jsx(Wre,{onClose:s,connector:_}),e[57]=_,e[58]=s,e[59]=$):$=e[59],A=$;break e}case je.CLICKUP_CONNECTOR:{let $;e[60]!==_||e[61]!==s?($=r.jsx(zre,{onClose:s,connector:_}),e[60]=_,e[61]=s,e[62]=$):$=e[62],A=$;break e}case je.GITLAB_CONNECTOR:{let $;e[63]!==_||e[64]!==s?($=r.jsx(qre,{onClose:s,connector:_}),e[63]=_,e[64]=s,e[65]=$):$=e[65],A=$;break e}case je.GORGIAS_CONNECTOR:{let $;e[66]!==_||e[67]!==s?($=r.jsx(Kre,{onClose:s,connector:_}),e[66]=_,e[67]=s,e[68]=$):$=e[68],A=$;break e}case je.HELP_SCOUT_CONNECTOR:{let $;e[69]!==_||e[70]!==s?($=r.jsx(Yre,{onClose:s,connector:_}),e[69]=_,e[70]=s,e[71]=$):$=e[71],A=$;break e}case je.IRONCLAD_CONNECTOR:{let $;e[72]!==_||e[73]!==s?($=r.jsx(Qre,{onClose:s,connector:_}),e[72]=_,e[73]=s,e[74]=$):$=e[74],A=$;break e}case je.TEAMWORK_CONNECTOR:{let $;e[75]!==_||e[76]!==s?($=r.jsx(Jre,{onClose:s,connector:_}),e[75]=_,e[76]=s,e[77]=$):$=e[77],A=$;break e}case je.ZENDESK_CONNECTOR:{let $;e[78]!==_||e[79]!==s?($=r.jsx(tie,{onClose:s,connector:_}),e[78]=_,e[79]=s,e[80]=$):$=e[80],A=$;break e}case je.PIPEDRIVE_CONNECTOR:{let $;e[81]!==_||e[82]!==s?($=r.jsx(Zre,{onClose:s,connector:_}),e[81]=_,e[82]=s,e[83]=$):$=e[83],A=$;break e}case je.ZOHO_CONNECTOR:{let $;e[84]!==_||e[85]!==s?($=r.jsx(Xre,{onClose:s,connector:_}),e[84]=_,e[85]=s,e[86]=$):$=e[86],A=$;break e}case je.ZOHO_DESK_CONNECTOR:{let $;e[87]!==_||e[88]!==s?($=r.jsx(eie,{onClose:s,connector:_}),e[87]=_,e[88]=s,e[89]=$):$=e[89],A=$;break e}default:A=null}const I=A,P=_ae(c,_),R=yae(c,_),O=!!i;let L;e[90]!==i||e[91]!==_.id||e[92]!==u?(L=$=>{if(!i)return $;const Z=(_==null?void 0:_.id)===Xu?xc:$n;return r.jsxs("div",{className:"flex w-full flex-col overflow-hidden rounded-2xl md:max-h-[700px] md:flex-row",children:[r.jsxs("div",{className:"relative hidden h-full md:block md:w-[430px] lg:w-[430px]",children:[r.jsx("img",{src:i,alt:"",className:"h-full w-full object-cover","aria-hidden":!0}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2.5",children:[r.jsx("div",{className:"bg-token-bg-primary rounded-xl border-[0.5px] p-2 shadow-sm",children:r.jsx(Vv,{className:"h-8 w-8","aria-hidden":!0})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-black/15"}),r.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-black/30"}),r.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-black/45"})]}),r.jsx("div",{className:"bg-token-bg-primary rounded-xl border-[0.5px] p-2 shadow-sm",children:r.jsx(Z,{className:"h-8 w-8","aria-hidden":!0})})]}),r.jsx("div",{className:"mt-16 flex flex-col items-start gap-3",children:[u.formatMessage(hy.overlayPillarAtlas),u.formatMessage(hy.overlayPillarQ4Plans),u.formatMessage(hy.overlayPillarTravelPolicy)].map(K=>r.jsxs("div",{className:"inline-flex items-center gap-2 rounded-2xl bg-white/92 px-3 py-2 text-[14px] font-normal text-black",children:[r.jsx(Z,{className:"h-5 w-5","aria-hidden":!0}),r.jsx("span",{className:"font-normal",children:K})]},K))})]})]}),r.jsx("div",{className:"flex h-full flex-1 flex-col px-10 md:w-[420px] lg:w-[440px]",children:$})]})},e[90]=i,e[91]=_.id,e[92]=u,e[93]=L):L=e[93];const D=L;if(P){const $=O?"max-w-[900px]":R?"max-w-[660px]":"max-w-[580px]";let Z;e[94]!==N||e[95]!==D?(Z=D(N),e[94]=N,e[95]=D,e[96]=Z):Z=e[96];let K;return e[97]!==s||e[98]!==$||e[99]!==Z?(K=r.jsx(Ft,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:s,size:"custom",noPadding:!0,className:$,children:Z}),e[97]=s,e[98]=$,e[99]=Z,e[100]=K):K=e[100],K}const H=O?"max-w-[900px]":"max-w-[400px]";let V;e[101]!==i||e[102]!==_||e[103]!==N||e[104]!==k||e[105]!==w||e[106]!==I||e[107]!==C||e[108]!==s?(V=k?r.jsx(hae,{onClose:s,connector:_,noRedirect:C,hideHeaderIcons:!!i}):w&&I!=null?I:N,e[101]=i,e[102]=_,e[103]=N,e[104]=k,e[105]=w,e[106]=I,e[107]=C,e[108]=s,e[109]=V):V=e[109];let q;e[110]!==V||e[111]!==D?(q=D(V),e[110]=V,e[111]=D,e[112]=q):q=e[112];let W;return e[113]!==O||e[114]!==s||e[115]!==H||e[116]!==q?(W=r.jsx(Ft,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:s,size:"custom",noPadding:O,className:H,children:q}),e[113]=O,e[114]=s,e[115]=H,e[116]=q,e[117]=W):W=e[117],W},aie=Object.freeze(Object.defineProperty({__proto__:null,AddConnectorLinkModal:p8,PlatformConnectorModalContent:m8},Symbol.toStringTag,{value:"Module"})),Ln=Ne({title:{id:"connectorReconnectModal.title",defaultMessage:"Some apps were mistakenly disconnected"},descriptionLineOne:{id:"connectorReconnectModal.descriptionLineOne",defaultMessage:"We recently fixed an issue that caused some apps to silently disconnect from your ChatGPT account. <bold>Your data is safe and can be reconnected.</bold> We apologize for the inconvenience."},singleDescriptionLineOne:{id:"connectorReconnectModal.singleDescriptionLineOne",defaultMessage:"We recently fixed an issue that caused {connectorName} to silently disconnect from your ChatGPT account. <bold>Your data is safe and can be reconnected.</bold> We apologize for the inconvenience."},descriptionLineTwo:{id:"connectorReconnectModal.descriptionLineTwo",defaultMessage:"To continue using these apps with ChatGPT, please reconnect."},singleDescriptionLineTwo:{id:"connectorReconnectModal.singleDescriptionLineTwo",defaultMessage:"To continue using {connectorName} with ChatGPT, please reconnect."},connectCta:{id:"connectorReconnectModal.connectCta",defaultMessage:"Reconnect"},connectedCta:{id:"connectorReconnectModal.connectedCta",defaultMessage:"Connected"},fallbackConnectorName:{id:"connectorReconnectModal.fallbackConnectorName",defaultMessage:"App"},dismiss:{id:"connectorReconnectModal.dismiss",defaultMessage:"Dismiss"},done:{id:"connectorReconnectModal.done",defaultMessage:"Done"},allConnectedTitle:{id:"connectorReconnectModal.allConnectedTitle",defaultMessage:"Your apps have been reconnected"},allConnectedSyncingMultiple:{id:"connectorReconnectModal.allConnectedSyncingMultiple",defaultMessage:"Youve successfully reconnected your apps. Until syncing completes, some apps may be temporarily unavailable or have reduced performance and accuracy within ChatGPT."},allConnectedSyncingSingle:{id:"connectorReconnectModal.allConnectedSyncingSingle",defaultMessage:"Youve successfully reconnected your apps. Until syncing completes, {connectorName} may be temporarily unavailable or have reduced performance and accuracy within ChatGPT."},allConnectedNoSyncing:{id:"connectorReconnectModal.allConnectedNoSyncing",defaultMessage:"Youve successfully reconnected your apps to ChatGPT and can be used immediately."},singleTitle:{id:"connectorReconnectModal.singleTitle",defaultMessage:"{connectorName} was mistakenly disconnected"}});function rie(t){"use forget";var Re,Ve;const e=F.c(79),{onClose:s,forceOpen:n}=t,o=n===void 0?!1:n,a=G(),i=ne(),l=ln(a);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[0]=c):c=e[0];const[u,d]=x.useState(c),f=O_(),{data:m,refetch:p}=L_();let g;e[1]!==o?(g={forceOpen:o},e[1]=o,e[2]=g):g=e[2];const{connectorIds:h,connectors:_,connectorLinks:b,refetchConnectorLinks:y,dismiss:v,isLoading:S,shouldShowModal:C}=g8(a,g);let w;e[3]!==v||e[4]!==s?(w=()=>{v(),s==null||s()},e[3]=v,e[4]=s,e[5]=w):w=e[5];const k=w,E=h;let M;e[6]!==E.length?(M=()=>{B.logStructuredEvent(tY,{connectorIdsCount:String(E.length)})},e[6]=E.length,e[7]=M):M=e[7];let N;e[8]!==E?(N=[E],e[8]=E,e[9]=N):N=e[9],x.useEffect(M,N);let A;e[10]!==b||e[11]!==u?(A=ze=>b.has(ze)||u.includes(ze),e[10]=b,e[11]=u,e[12]=A):A=e[12];const I=A;let P;if(e[13]!==E||e[14]!==b||e[15]!==_||e[16]!==i||e[17]!==f||e[18]!==(m==null?void 0:m.connection_statuses)){let ze;e[20]!==b||e[21]!==_||e[22]!==i||e[23]!==f||e[24]!==(m==null?void 0:m.connection_statuses)?(ze=Fe=>{var st,rt,wt;const be=_.find(at=>at.id===Fe),Oe=(st=be==null?void 0:be.name)!=null?st:i.formatMessage(Ln.fallbackConnectorName),qe=(rt=b.get(Fe))==null?void 0:rt[0],Ze=f&&qe?(wt=m==null?void 0:m.connection_statuses)==null?void 0:wt.find(at=>at.user_connection_details.backing_link_id===qe.id||(be==null?void 0:be.id)===Xu&&at.user_connection_details.connection_type==="sharepoint_admin_sync_connector"&&at.user_connection_details.auth_status==="admin_connected"):void 0;return{connectorId:Fe,connector:be,connectorName:Oe,connectorLink:qe,maybeSyncConnection:Ze}},e[20]=b,e[21]=_,e[22]=i,e[23]=f,e[24]=m==null?void 0:m.connection_statuses,e[25]=ze):ze=e[25],P=E.map(ze),e[13]=E,e[14]=b,e[15]=_,e[16]=i,e[17]=f,e[18]=m==null?void 0:m.connection_statuses,e[19]=P}else P=e[19];const R=P,O=lie;let L;if(e[26]!==R||e[27]!==I){let ze;e[29]!==I?(ze=Fe=>{const{connectorId:be,maybeSyncConnection:Oe}=Fe;return I(be)&&O(Oe)},e[29]=I,e[30]=ze):ze=e[30],L=R.filter(ze),e[26]=R,e[27]=I,e[28]=L}else L=e[28];const D=L;let H;e[31]!==E||e[32]!==I?(H=E.length>0&&E.every(ze=>I(ze)),e[31]=E,e[32]=I,e[33]=H):H=e[33];const V=H;let q,W;e[34]!==E[0]||e[35]!==E.length||e[36]!==_||e[37]!==i?(q=E.length===1?(Ve=(Re=_.find(ze=>ze.id===E[0]))==null?void 0:Re.name)!=null?Ve:i.formatMessage(Ln.fallbackConnectorName):null,W=E.length===1&&q?i.formatMessage(Ln.singleTitle,{connectorName:q}):i.formatMessage(Ln.title),e[34]=E[0],e[35]=E.length,e[36]=_,e[37]=i,e[38]=q,e[39]=W):(q=e[38],W=e[39]);const $=W,Z=E.length===1&&q?Ln.singleDescriptionLineOne:Ln.descriptionLineOne,K=E.length===1&&q?Ln.singleDescriptionLineTwo:Ln.descriptionLineTwo;let Y;e[40]!==V||e[41]!==i||e[42]!==$?(Y=V?i.formatMessage(Ln.allConnectedTitle):$,e[40]=V,e[41]=i,e[42]=$,e[43]=Y):Y=e[43];const ae=Y;let se;e[44]!==V||e[45]!==D?(se=V?D.length>1?r.jsx(j,T({},Ln.allConnectedSyncingMultiple)):D.length===1?r.jsx(j,U(T({},Ln.allConnectedSyncingSingle),{values:{connectorName:D[0].connectorName}})):r.jsx(j,T({},Ln.allConnectedNoSyncing)):null,e[44]=V,e[45]=D,e[46]=se):se=e[46];const ee=se,re=ze=>{var Fe;B.logStructuredEvent(XK,{connectorId:ze,connectorName:(Fe=_.find(be=>be.id===ze))==null?void 0:Fe.name}),!I(ze)&&(d(be=>[...be,ze]),mt(a,p8,{connectorId:ze,noRedirect:!0,redirectAfter:"/",onClose:()=>{d(be=>be.filter(Oe=>Oe!==ze))},onComplete:()=>{d(be=>be.filter(Oe=>Oe!==ze)),y(),p(),l.invalidateQueries({queryKey:eY(a,!0,$s.PROMPT_TEXT_AREA).queryKey})}}))};if(S){const ze=C!=null?C:!1;let Fe;e[47]===Symbol.for("react.memo_cache_sentinel")?(Fe=r.jsx("div",{className:"flex min-h-[200px] items-center justify-center py-10",children:r.jsx(Wn,{})}),e[47]=Fe):Fe=e[47];let be;return e[48]!==k||e[49]!==ze?(be=r.jsx(Ft,{testId:"modal-connectors-reconnect",isOpen:ze,type:"warning",onClose:k,showCloseButton:!0,className:"w-[488px] max-w-[488px] px-4",children:Fe}),e[48]=k,e[49]=ze,e[50]=be):be=e[50],be}const he=Ft,fe="modal-connectors-reconnect",pe=C!=null?C:!1,le="warning",ve=!0,Te=!0,xe="w-[488px] max-w-[488px] px-4",ce="flex flex-col items-center gap-4 px-0 pt-8 text-center";let we;e[51]!==V?(we=!V&&r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(bR,{className:"icon-2xl text-danger","aria-hidden":!0})}),e[51]=V,e[52]=we):we=e[52];let ge;e[53]!==ae?(ge=r.jsx("div",{className:"text-token-text-primary text-xl leading-6 font-semibold",children:ae}),e[53]=ae,e[54]=ge):ge=e[54];let Ae;e[55]!==V||e[56]!==Z||e[57]!==K||e[58]!==ee||e[59]!==q?(Ae=r.jsx("div",{className:"flex w-full items-center justify-center text-center",children:r.jsx("div",{className:"text-token-text-secondary space-y-2 text-xs",children:V?r.jsx("p",{className:"text-token-text-secondary text-xs",children:ee}):r.jsxs(r.Fragment,{children:[r.jsx("p",{children:r.jsx(j,U(T({},Z),{values:U(T({},q?{connectorName:q}:{}),{bold:iie})}))}),r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,U(T({},K),{values:q?{connectorName:q}:void 0}))})]})})}),e[55]=V,e[56]=Z,e[57]=K,e[58]=ee,e[59]=q,e[60]=Ae):Ae=e[60];const Ue="border-token-border-light max-h-72 w-full space-y-2 overflow-y-auto rounded-2xl border p-3",Ie=R.map((ze,Fe)=>{const{connectorId:be,connector:Oe,connectorName:qe,maybeSyncConnection:Ze}=ze,st=I(be);return r.jsxs("div",{className:"bg-token-bg-primary flex items-center justify-between gap-3 px-3 py-2 ".concat(Fe!==0?"border-token-border-light mt-2 border-t pt-3":""),children:[r.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[r.jsx(Kc,{connector:Oe!=null?Oe:{name:qe,logo_url:null},size:"small",className:"shrink-0"}),r.jsx("div",{className:"min-w-0",children:r.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-shrink-0 items-center gap-4 truncate text-sm",children:qe})})]}),st?Ze&&Ze.user_connection_details.activation_status!=="inactive"?r.jsx(ZK,{connection:Ze,location:"user_settings",isBlueButton:!0}):r.jsxs("div",{className:"text-token-text-link flex items-center gap-1",children:[r.jsx(yR,{className:"icon-sm text-blue-500"}),r.jsx("span",{className:"text-sm text-blue-500",children:r.jsx(j,T({},Ln.connectedCta))})]}):r.jsx(ke,{type:"button",color:"primary",size:"small",onClick:()=>re(be),children:r.jsx(j,T({},Ln.connectCta))})]},be)});let Me;e[61]!==Ie?(Me=r.jsx("div",{className:Ue,children:Ie}),e[61]=Ie,e[62]=Me):Me=e[62];const te=V?Ln.done:Ln.dismiss;let Q;e[63]!==te?(Q=r.jsx(j,T({},te)),e[63]=te,e[64]=Q):Q=e[64];let ie;e[65]!==k||e[66]!==Q?(ie=r.jsx("div",{className:"flex justify-center pb-8",children:r.jsx(ke,{color:"ghost",type:"button",className:"text-token-text-secondary hover:text-token-text-primary border-token-border-light w-[320px] rounded-full border px-4 py-2",onClick:k,children:Q})}),e[65]=k,e[66]=Q,e[67]=ie):ie=e[67];let _e;e[68]!==we||e[69]!==ge||e[70]!==Ae||e[71]!==Me||e[72]!==ie?(_e=r.jsxs("div",{className:ce,children:[we,ge,Ae,Me,ie]}),e[68]=we,e[69]=ge,e[70]=Ae,e[71]=Me,e[72]=ie,e[73]=_e):_e=e[73];let ye;return e[74]!==he||e[75]!==k||e[76]!==pe||e[77]!==_e?(ye=r.jsx(he,{testId:fe,isOpen:pe,type:le,onClose:k,shouldIgnoreClickOutside:ve,showCloseButton:Te,className:xe,children:_e}),e[74]=he,e[75]=k,e[76]=pe,e[77]=_e,e[78]=ye):ye=e[78],ye}function iie(t){return r.jsx("span",{className:"font-semibold",children:t})}function lie(t){var s;const e=(s=t==null?void 0:t.user_connection_details)==null?void 0:s.activation_status;return e==="activating"||e==="partially_activated"}function g8(t,{forceOpen:e=!1}={}){var k,E;const[s,n]=x.useState(void 0),{data:o}=Jd(),{eligible:a,isLoading:i}=Ct(We.hasSeenConnectorsReconnectModal),l=sn(Ss),[c,u]=yi("connectors-reconnect-modal-dismissed",!1,M=>typeof M=="boolean"),d=()=>{u(!0),_t(t,We.hasSeenConnectorsReconnectModal)},f=(k=o==null?void 0:o.eligible_announcements)==null?void 0:k.includes(We.hasSeenConnectorsReconnectModal),m=We.hasSeenConnectorsReconnectModal in((E=o==null?void 0:o.announcements)!=null?E:{}),p=a&&!c||!f&&!m&&!c,g=Ee(t,"1138374840"),h=e&&!l||g&&p&&!l;x.useEffect(()=>{if(!h){n([]);return}de.safePost("/aip/connectors/needs_remediation",{requestBody:{}}).then(M=>n(M.needs_remediation.map(N=>N.connector_id)))},[h]);const{data:_,isLoading:b}=oe(()=>QP(t,{productSku:$s.CONNECTOR_SETTING,skipLogos:!1})),y=x.useMemo(()=>{var M;return(M=_==null?void 0:_.connectors)!=null?M:[]},[_]),{connectorLinks:v,isLoading:S,refetch:C}=Ta({fetchValidLinksOnly:!0,productSku:$s.CONNECTOR_SETTING,skip:!h}),w=s===void 0||b||S||!e&&i;return{shouldShowModal:h&&s&&s.length>0,connectorIds:s!=null?s:[],connectors:y,connectorLinks:v,dismiss:d,refetchConnectorLinks:C,areConnectorsLoading:b,areLinksLoading:S,isLoading:w}}const gXe=Object.freeze(Object.defineProperty({__proto__:null,ConnectorsReconnectModal:rie,useConnectorReconnectGate:g8},Symbol.toStringTag,{value:"Module"})),cie="https://persistent.oaistatic.com/chatgpt/google-connectors-nux.jpg",hXe=()=>{const t=G(),e=Ee(t,"2400167019"),{isLoading:s,eligible:n}=Ct(We.hasSeenGoogleConnectorsNuxModal);return e?s?"loading":n?"show":"hide":"hide"};function _Xe({onClose:t}){const e=G();x.useEffect(()=>{B.logEventWithStatsig("Google Connectors Nux Modal Shown","chatgpt_google_connectors_nux_modal_shown"),B.logUpsellOrModalEvent(ks,{eventId:"google_connectors_nux_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const s=()=>{B.logEventWithStatsig("Google Connectors Nux Modal Dismissed","chatgpt_google_connectors_nux_modal_dismissed"),_t(e,We.hasSeenGoogleConnectorsNuxModal),t()},n=yt(),o=(l,c,u)=>{B.logEventWithStatsig("Google Connectors Nux Modal Show Me Continued","chatgpt_google_connectors_nux_modal_continued",{target:u}),_t(e,We.hasSeenGoogleConnectorsNuxModal),t(),n({pathname:"/",search:"q=".concat(c)})},[a,i]=x.useState(!1);return r.jsxs(Ft,{testId:"modal-google-connectors-nux",isOpen:!0,noPadding:!0,onClose:s,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"flex max-w-[480px] flex-col",children:[r.jsx(Es,{onClick:s,className:"text-token-text-secondary absolute end-0 top-0 z-10 me-2 mt-2 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("div",{className:z("h-[224px] w-full transition-opacity duration-200",a?"opacity-100":"opacity-0"),children:r.jsx("img",{src:cie,draggable:!1,className:"object-cover object-center",alt:"",onLoad:()=>i(!0)})}),r.jsxs("div",{className:"flex flex-col p-8",children:[r.jsx("div",{className:"text-center text-[22px] font-medium",children:r.jsx(j,T({},ki.title))}),r.jsx("div",{className:"text-token-text-secondary mt-2 text-center",children:r.jsx(j,U(T({},ki.subtitle),{values:{link:l=>r.jsx("a",{href:ki.subtitle.link,target:"_blank",rel:"noopener noreferrer",className:"underline",children:l},"learn-more-link")}}))}),r.jsxs("div",{className:"text-token-text-tertiary mt-6 flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 border-t"}),r.jsx(j,T({},ki.tryItOut)),r.jsx("div",{className:"h-px flex-1 border-t"})]}),r.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[r.jsx(ke,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,ki.gmailPrompt.defaultMessage,"gmail"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(Gr,{className:"icon-lg"}),r.jsx(j,T({},ki.gmailPrompt))]})}),r.jsx(ke,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,ki.gcalPrompt.defaultMessage,"googleCalendar"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(vR,{className:"icon-lg"}),r.jsx(j,T({},ki.gcalPrompt))]})})]})]})]})}const ki=Ne({title:{id:"xQB7J6",defaultMessage:"Gmail and Google Calendar, now in chat"},subtitle:{id:"bMcG4Z",defaultMessage:"ChatGPT can now reference your emails and calendar events in responses. <link>Learn more</link>",link:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt"},tryItOut:{id:"Wkoh8S",defaultMessage:"Try it out"},gmailPrompt:{id:"GoogleConnectorsNuxModal.gmailPrompt",defaultMessage:"Which emails should I reply to?"},gcalPrompt:{id:"GoogleConnectorsNuxModal.googleCalendarPrompt",defaultMessage:"Help me with tomorrow's calendar"}}),uie=()=>{const t=x.useRef(die()),e=!ut(),s=fp(),n=sY(),o=e&&n&&!t.current&&!s,a=x.useCallback(()=>{o&&(fie(),B.logEventWithStatsig("Meet ChatGPT Modal Shown","chatgpt_meet_chatgpt_modal_shown"))},[o]),i=()=>{B.logEventWithStatsig("Meet ChatGPT Modal Confirmation Button Clicked","chatgpt_meet_chatgpt_modal_confirmation_button_clicked")};return o?{onConfirmationButtonClick:i,onMount:a,state:"show"}:{onConfirmationButtonClick:i,onMount:a,state:"hide"}};function die(){return!!localStorage.getItem(Be.HasSeenMeetChatGptModal)}function fie(){return localStorage.setItem(Be.HasSeenMeetChatGptModal,"true")}const xXe=({onClose:t})=>{const e=G(),{onConfirmationButtonClick:s,onMount:n,state:o}=uie(),a=SR(e)?EM.trainingDisclaimer:EM.safetyAndAbuseDisclaimer;return x.useEffect(n,[n]),o!=="show"?null:r.jsx(Ft,{testId:"modal-meet-chatgpt",isOpen:!0,noPadding:!0,onClose:Tn,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6 text-center",children:[r.jsx("div",{className:"-mt-5 -mb-4 self-center",children:r.jsx(CR,{})}),r.jsx("div",{className:"mb-2 text-2xl font-medium",children:r.jsx(j,{id:"fnY8gE",defaultMessage:"Meet ChatGPT"})}),r.jsx("div",{className:"text-token-text-secondary mb-6",children:r.jsx(j,{id:"OdX5ix",defaultMessage:"AI that can help with brainstorming, researching, planning, and more. Just ask."})}),r.jsx(ke,{color:"primary",size:"large",className:"mb-4",onClick:()=>{s(),t()},children:r.jsx(j,T({},$t.gotItButtonText))}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,U(T({},a),{values:{learnMoreLink:i=>r.jsx("a",{className:"underline",href:"https://help.openai.com/en/articles/9737562",rel:"noreferrer",target:"_blank",children:i})}}))})]})})},EM=Ne({trainingDisclaimer:{id:"hebnC4",defaultMessage:"Chats may be reviewed and used to train our models. You can opt out in settings. <learnMoreLink>Learn more</learnMoreLink>"},safetyAndAbuseDisclaimer:{id:"KpKqVi",defaultMessage:"Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"}});function tk(){var s;const{data:t}=Jd(),e=(s=t==null?void 0:t.settings)==null?void 0:s.amphora_locks;return typeof e=="object"&&e!=null?e:void 0}const mie="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",pie="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",gie="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47";function yXe(){const[t,e]=x.useState("loading"),s=sn(Ss),n=vx(),{eligible:o,isLoading:a}=Ct(We.hasSeenMoonshineNuxV2);return x.useEffect(()=>{if(s){t!=="hide"&&e("hide");return}t==="loading"&&!a&&e(!n||!o?"hide":"show")},[t,a,n,o,s]),t}function bXe({onClose:t}){const e=G(),n=sa()?pie:mie,[o,a]=x.useState(!1);x.useEffect(()=>{o||(_t(e,We.hasSeenMoonshineNuxV2),a(!0),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Shown","chatgpt_moonshine_nux_v2_modal_shown"),$e.count(He.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_shown"),B.logUpsellOrModalEvent(ks,{eventId:"moonshine_nux_v2_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[e,o]);const[i,l]=x.useState(!1);x.useEffect(()=>{const N=new Image;N.src=n,N.onload=()=>l(!0)},[n]);const[c,u]=x.useState(!1),[d,f]=x.useState(!1);x.useEffect(()=>{if(!i)return;const N=setTimeout(()=>{u(!0)},200),A=setTimeout(()=>{f(!0)},300);return()=>{clearTimeout(N),clearTimeout(A)}},[i]);const m=()=>{window.open(gie,"_blank","noopener noreferrer"),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Learn More Clicked","chatgpt_moonshine_nux_v2_modal_learn_more_clicked"),$e.count(He.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_learn_more_clicked")},p=yt(),g=Ee(e,"1542198993"),h=Dc(),_=tk(),[b,y]=x.useState(!1),v=js(e,"3934129380"),S=hie.describeMePrompt.defaultMessage,C=v.get("model","gpt-4o"),w=ct(e),k=w==null?void 0:w.hasPlusFeatures(),E=()=>{b||(y(!0),t(),p({pathname:"/",search:"?q=".concat(S,"&model=").concat(C,"&skip_instant_query=1&hints=").concat(Ye.Moonshine)}),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Show Me Clicked","chatgpt_moonshine_nux_v2_modal_show_me_clicked"),$e.count(He.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_show_me_clicked"))},M=()=>{h.mutate({setting:Qt.Moonshine,value:!0},{onSettled:()=>{t()}}),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Enable Clicked","chatgpt_moonshine_nux_v2_modal_enable_clicked"),$e.count(He.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_enable_clicked")};return i?r.jsxs(Ft,{testId:"modal-moonshine-nux-v2",isOpen:!0,noPadding:!0,onClose:()=>{t(),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Closed","chatgpt_moonshine_nux_v2_modal_closed"),$e.count(He.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(Es,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(c?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"MoonshineNuxV2Modal.firstBubble",defaultMessage:"Hey ChatGPT!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(d?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"MoonshineNuxV2Modal.secondBubble",defaultMessage:"Describe me based on our chats"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(j,{id:"MoonshineNuxV2Modal.title",defaultMessage:"Introducing new, improved memory"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:g?k?r.jsx(j,{id:"MoonshineNuxV2Modal.subtitleDefaultOff",defaultMessage:"ChatGPT can now remember more of your past chats to better personalize its responses. Want to change what it knows about you? Just ask."}):r.jsx(j,{id:"MoonshineNuxV2Modal.subtitleDefaultOff.freeMoonshine",defaultMessage:"ChatGPT can now remember your recent chats to better personalize its responses. Want to change what it knows about you? Just ask."}):k?r.jsx(j,{id:"MoonshineNuxV2Modal.subtitle",defaultMessage:"ChatGPT can now remember more of your past chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."}):r.jsx(j,{id:"MoonshineNuxV2Modal.subtitle.freeMoonshine",defaultMessage:"ChatGPT now remembers your recent chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."})}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-between",children:[r.jsx(ke,{color:"secondary",onClick:m,children:r.jsx(j,{id:"MoonshineNuxV2Modal.learnMoreButton",defaultMessage:"Learn more"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(ke,{color:"secondary",onClick:t,children:r.jsx(j,{id:"MoonshineNuxV2Modal.notNowButton",defaultMessage:"Not now"})}),g?r.jsx(ke,{color:"secondary",onClick:M,disabled:(_==null?void 0:_[Qt.Moonshine])===!0,children:r.jsx(j,{id:"MoonshineNuxV2Modal.enableButton",defaultMessage:"Enable"})}):r.jsx(ke,{color:"primary",onClick:E,children:r.jsx(j,{id:"MoonshineNuxV2Modal.showMeButton",defaultMessage:"Show me"})})]})]})]})]}):null}const hie=Ne({describeMePrompt:{id:"MoonshineNuxV2Modal.describeMePrompt",defaultMessage:"Describe me based on all our chats  make it catchy!"}}),_ie="/cdn/assets/no_auth_go_upsell_background-gp1k7btd.webp",h8={src:_ie};var _y,MM;function xie(){if(MM)return _y;MM=1;var t=wR(),e=yC(),s="[object Boolean]";function n(o){return o===!0||o===!1||e(o)&&t(o)==s}return _y=n,_y}var yie=xie();const Nx=en(yie),bie="/?default_tab=personal#pricing",_8=()=>yi(Be.HasSeenNoAuthFreeTrialUpsell,!1,Nx),vXe=()=>{const t=G(),e=!ut(),s=fp(),n=bC(),[o]=_8(),[a]=Yn(),i=Array.from(a.keys()).some(f=>f.toLowerCase()===kR.NoAuthPlan),l=!!a.get("utm_campaign");return!e||s||o||n||i||l||!Ee(t,"2207916353")||!Xe(t,"2860408342").get("show_go_12_month_free_trial_modal_web",!1)?"hide":"show"},SXe=({onClose:t})=>{const e=G(),[,s]=_8(),[n,o]=x.useState(!1),a=x.useCallback(()=>{s(!0),ft.setItem(Be.HasSeenNoAuthFreeTrialUpsell,!0)},[s]);x.useEffect(()=>{B.logEventWithStatsig("No Auth Go Free Trial Upsell Modal Shown","chatgpt_no_auth_go_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(ks,{eventId:"free_trial_upsell_modal_shown_go_no_auth",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const i=x.useCallback(()=>{a(),B.logEventWithStatsig("No Auth Go Free Trial Upsell Modal Dismissed","chatgpt_no_auth_go_free_trial_upsell_modal_dismissed"),t()},[a,t]),l=x.useCallback(()=>{a(),o(!0),os(e,{fallbackScreenHint:"login",callback:c=>{B.logLogInButtonClicked({provider:c,location:"No Auth Go Free Trial Upsell Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL)},callbackUrl:bie,skipLoginModal:!1}),t()},[e,a,t]);return r.jsxs(Ft,{testId:"modal-no-auth-free-trial-upsell",isOpen:!0,onClose:i,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:h8.src,loading:"eager",fetchPriority:"high"}),r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,T({},NM.imageText))})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[r.jsx("p",{className:"text-token-text-secondary dark:text-gray-solid-300 mb-6 text-center",children:r.jsx(j,T({},NM.subtitle))}),r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[r.jsx(ke,{size:"large",color:"secondary",onClick:i,className:"w-full focus-visible:outline-none md:w-auto",children:r.jsx(j,T({},$t.maybeLater))}),r.jsx(ke,{size:"large",color:"primary",onClick:l,className:"w-full min-w-[130px] md:w-auto",children:n?r.jsx(Wn,{}):r.jsx(j,T({},$t.logInButtonText))})]})]})]})},NM=Ne({subtitle:{id:"NoAuthGoFreeTrialUpsell.subtitle",defaultMessage:"Log in to see if you qualify for faster responses, higher file upload limits, and expanded image generation with a Go plan  all free for the next 12 months."},imageText:{id:"NoAuthGoFreeTrialUpsell.imageText",defaultMessage:"Try Go, Free"}});function Yc(t){return Xe(t,"3637408529").get("is_login_primary_button",!1)}const vie=t=>Xe(t,"1346366956").get("signup_cta_copy","SIGN_UP"),Sie=t=>Xe(t,"1803944755").get("login_or_signup_cta_copy","LOGIN_OR_SIGNUP"),CXe=t=>{switch(Sie(t)){case"LOGIN_OR_SIGNUP":return AM.loginOrSignup;case"SIGNIN":return AM.signin}},xf=(t,e)=>{switch(vie(t)){case"SIGN_UP":return e;case"SIGN_UP_FOR_FREE":return Gu.signUpForFreeCta;case"CREATE_ACCOUNT":return Gu.createAccountCta;case"CREATE_NEW_ACCOUNT":return Gu.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return Gu.createFreeAccountCta}},AM=Ne({loginOrSignup:{id:"loginOrSignupCta.loginOrSignup",defaultMessage:"Log in or sign up"},signin:{id:"loginOrSignupCta.signin",defaultMessage:"Sign in"}}),Gu=Ne({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}}),Cie="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",x8=()=>yi(Be.HasSeenNoAuthImagegenNux,!1,Nx),wXe=()=>{const t=G(),e=!ut(),s=fp(),[n]=x8(),o=bC(),a=Xe(t,"2118136551");return!e||s||n||o?"hide":a.get("should_show_imagegen_nux",!1)?"show":"hide"},kXe=({onClose:t})=>{const s=nf()?"center":"bottom",n=G(),[o,a]=x.useState(!1),i=js(n,"2604379743").value,l=typeof i.nux_video_url=="string"?i.nux_video_url:Cie,c=typeof i.nux_image_url=="string"?i.nux_image_url:"",[,u]=x8(),d=()=>{u(!0),ft.setItem(Be.HasSeenNoAuthImagegenNux,!0)},f=Yc(n),p=Xe(n,"2118136551").get("sign_up_button_has_the_word_free",!0),g=xf(n,p?Gu.signUpForFreeCta:$t.signUpButtonText),h=r.jsx(ke,{as:"button",size:"large",color:f?"secondary":"primary",onClick:()=>{d(),os(n,{fallbackScreenHint:"signup",callback:y=>{B.logSignUpButtonClicked({provider:y,location:"No Auth Imagegen Nux Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},fullWidth:!0,children:r.jsx(j,T({},g))}),_=r.jsx(ke,{as:"button",size:"large",color:f?"primary":"secondary",fullWidth:!0,onClick:()=>{d(),os(n,{fallbackScreenHint:"login",callback:y=>{B.logLogInButtonClicked({provider:y,location:"No Auth Imagegen Nux Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},children:r.jsx(j,T({},$t.logInButtonText))}),b=()=>{t(),d(),B.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return x.useEffect(()=>{B.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),r.jsxs(Ft,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:b,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:s,children:[r.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!o&&r.jsx("img",{src:c,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>a(!0)}),r.jsx("div",{className:"absolute end-4 top-4",children:r.jsx(Es,{onClick:b})})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:r.jsx(j,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),r.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:f?[_,h]:[h,_]}),r.jsx(ke,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:b,children:r.jsx(j,T({},$t.stayLoggedOut))})]})]})};function wie(t){const e=x.useRef(t);return zn(()=>{e.current=t}),e}function kie(t){const e=wie(t);x.useEffect(()=>{e.current()},[e])}const Tie=()=>{"use forget";const t=F.c(8),[e]=Yn(),s=e.get(kR.NoAuthPlan);let n;e:switch(s){case Ag.Business:{n="Business";break e}case Ag.Go:{n="Go";break e}case Ag.Plus:{n="Plus";break e}case Ag.Pro:{n="Pro";break e}default:n=""}const o=n,a=G();let i;t[0]!==a?(i=ut(),t[0]=a,t[1]=i):i=t[1];const c=!!(!i&&o);let u;t[2]!==c?(u=()=>{c&&B.logEventWithStatsig("No Auth Plan Upsell Modal Shown","chatgpt_no_auth_plan_upsell_shown")},t[2]=c,t[3]=u):u=t[3];const d=u,f=Eie;let m;return t[4]!==c||t[5]!==d||t[6]!==o?(m={isOpen:c,onClose:f,onMount:d,planType:o},t[4]=c,t[5]=d,t[6]=o,t[7]=m):m=t[7],m},TXe=t=>{"use forget";const e=F.c(31),{onClose:s}=t,n=G(),{onMount:o,onClose:a,planType:i}=Tie(),[l,c]=x.useState(!1),u=i==="Business"?"business":"personal",d="/?default_tab=".concat(u,"#pricing");let f;e[0]!==n?(f=Yc(n),e[0]=n,e[1]=f):f=e[1];const m=f;kie(o);let p;e[2]!==d||e[3]!==n||e[4]!==m?(p=function(){c(!0),os(n,{callbackUrl:d,fallbackScreenHint:m?"login":"signup",callback:A=>{m?B.logLogInButtonClicked({location:"No Auth Plan Upsell Modal",provider:A},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL):B.logSignUpButtonClicked({location:"No Auth Plan Upsell Modal",provider:A},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL),c(!1)},skipLoginModal:!1})},e[2]=d,e[3]=n,e[4]=m,e[5]=p):p=e[5];const g=p;let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:h8.src,loading:"eager",fetchPriority:"high"}),e[6]=h):h=e[6];let _;e[7]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("h2",{className:"mb-1 text-center text-xl font-semibold",children:r.jsx(j,T({},xy.title))}),e[7]=_):_=e[7];let b;e[8]!==i?(b=r.jsx("p",{className:"text-token-text-default-secondary text-gray-solid-500 mb-6 text-center",children:r.jsx(j,U(T({},xy.subtitle),{values:{planType:i}}))}),e[8]=i,e[9]=b):b=e[9];let y;e[10]!==s||e[11]!==a?(y=()=>{s(),a()},e[10]=s,e[11]=a,e[12]=y):y=e[12];let v;e[13]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(j,T({},$t.maybeLater)),e[13]=v):v=e[13];let S;e[14]!==y?(S=r.jsx(ke,{size:"large",color:"secondary",onClick:y,className:"w-full focus-visible:outline-none md:w-auto",children:v}),e[14]=y,e[15]=S):S=e[15];let C;e[16]!==l||e[17]!==i?(C=l?r.jsx(Wn,{}):r.jsx(j,U(T({},xy.primaryButton),{values:{planType:i}})),e[16]=l,e[17]=i,e[18]=C):C=e[18];let w;e[19]!==g||e[20]!==C?(w=r.jsx(ke,{size:"large",color:"primary",onClick:g,className:"w-full min-w-[130px] md:w-auto",children:C}),e[19]=g,e[20]=C,e[21]=w):w=e[21];let k;e[22]!==w||e[23]!==S?(k=r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[S,w]}),e[22]=w,e[23]=S,e[24]=k):k=e[24];let E;e[25]!==k||e[26]!==b?(E=r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[_,b,k]}),e[25]=k,e[26]=b,e[27]=E):E=e[27];let M;return e[28]!==s||e[29]!==E?(M=r.jsxs(Ft,{testId:"modal-no-auth-go-upsell",isOpen:!0,onClose:s,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[h,E]}),e[28]=s,e[29]=E,e[30]=M):M=e[30],M},xy=Ne({title:{id:"NoAuthGoUpsellModal.title",defaultMessage:"Unlock more of ChatGPT"},subtitle:{id:"NoAuthGoUpsellModal.subtitle",defaultMessage:"Upgrade to ChatGPT {planType} for extra messaging, uploads, and memory to keep your conversations going"},primaryButton:{id:"NoAuthGoUpsellModal.primaryButton",defaultMessage:"Upgrade to {planType}"}});function Eie(){B.logEventWithStatsig("No Auth Plan Upsell Modal Dismissed","chatgpt_no_auth_plan_upsell_dismissed")}function y8(){"use forget";const t=F.c(2),[e]=Yn();let s;return t[0]!==e?(s=e.get("promoCode"),t[0]=e,t[1]=s):s=t[1],s}function b8(){"use forget";const t=F.c(2),[e]=Yn();let s;return t[0]!==e?(s=e.get("referralCode"),t[0]=e,t[1]=s):s=t[1],s}const EXe=t=>{"use forget";const e=F.c(33),{onClose:s}=t,n=jt(),o=nf(),a=xf(n,$t.signUpButtonText),i=o?"center":"bottom",l=y8(),c=b8();let u,d;if(e[0]!==l||e[1]!==c?(u=()=>{l||c?B.logEventWithStatsig("No Auth Promo Redemption Modal Shown","chatgpt_no_auth_promo_redemption_modal_shown",{promoCode:l,referralCode:c}):console.warn("Mounted NoAuthPromoRedemptionModal without a valid promo code")},d=[l,c],e[0]=l,e[1]=c,e[2]=u,e[3]=d):(u=e[2],d=e[3]),x.useEffect(u,d),!l&&!c)return null;const f=l?"/p/".concat(l):"/rf/".concat(c);let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("p",{className:"mb-6 text-center text-2xl font-semibold",children:r.jsx(j,T({},IM.title))}),e[4]=m):m=e[4];let p;e[5]!==f||e[6]!==n?(p=()=>{os(n,{fallbackScreenHint:"login",callback:Mie,callbackUrl:f,skipLoginModal:!1})},e[5]=f,e[6]=n,e[7]=p):p=e[7];let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(j,T({},$t.logInButtonText)),e[8]=g):g=e[8];let h;e[9]!==p?(h=r.jsx(ke,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3",onClick:p,children:g}),e[9]=p,e[10]=h):h=e[10];let _;e[11]!==f||e[12]!==n?(_=()=>{os(n,{fallbackScreenHint:"signup",callback:Nie,callbackUrl:f,skipLoginModal:!1})},e[11]=f,e[12]=n,e[13]=_):_=e[13];let b;e[14]!==a?(b=r.jsx(j,T({},a)),e[14]=a,e[15]=b):b=e[15];let y;e[16]!==_||e[17]!==b?(y=r.jsx(ke,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:_,children:b}),e[16]=_,e[17]=b,e[18]=y):y=e[18];let v;e[19]!==s||e[20]!==l||e[21]!==c?(v=E=>{E.preventDefault(),B.logEventWithStatsig("No Auth Promo Redemption Modal Dismissed","chatgpt_no_auth_promo_redemption_modal_dismissed",{promoCode:l,referralCode:c}),s()},e[19]=s,e[20]=l,e[21]=c,e[22]=v):v=e[22];let S;e[23]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(j,T({},IM.stayLoggedOutLink)),e[23]=S):S=e[23];let C;e[24]!==v?(C=r.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:v,children:S}),e[24]=v,e[25]=C):C=e[25];let w;e[26]!==C||e[27]!==h||e[28]!==y?(w=r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[m,h,y,C]}),e[26]=C,e[27]=h,e[28]=y,e[29]=w):w=e[29];let k;return e[30]!==i||e[31]!==w?(k=r.jsx(Ft,{testId:"modal-no-auth-promo-redemption",isOpen:!0,onClose:Tn,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:i,children:w}),e[30]=i,e[31]=w,e[32]=k):k=e[32],k},IM=Ne({title:{id:"NoAuthPromoRedemptionModal.title",defaultMessage:"Log in or sign up to redeem your promotion"},stayLoggedOutLink:{id:"NoAuthPromoRedemptionModal.stayLoggedOut",defaultMessage:"Stay logged out"}});function MXe(){"use forget";const t=F.c(6);let e,s;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=jt(),s=ut(),t[0]=e,t[1]=s):(e=t[0],s=t[1]);const n=!s,o=y8(),a=b8();let i;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>TR(e),t[2]=i):i=t[2],oe(i)){let d;return t[3]===Symbol.for("react.memo_cache_sentinel")?(d={isOpen:!1},t[3]=d):d=t[3],d}const c=(o!=null?o:a)!=null&&n;let u;return t[4]!==c?(u={isOpen:c},t[4]=c,t[5]=u):u=t[5],u}function Mie(t){B.logLogInButtonClicked({provider:t,location:"No Auth Promo Redemption Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)}function Nie(t){B.logSignUpButtonClicked({provider:t,location:"No Auth Promo Redemption Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)}const NXe=Pe(()=>me(()=>import("./dxjfdnf0n7opciai.js"),__vite__mapDeps([11,1,3,4,12,13,14,8,9,15])).then(t=>t.NoAuthWelcomeBackModal)),Aie=({dismissLink:t,onLogInButtonClick:e,onSignUpButtonClick:s,subtitle:n,title:o})=>{const a=G(),l=nf()?"center":"bottom",c=Yc(a),d=Xe(a,"2118136551").get("sign_up_button_has_the_word_free",!0),f=xf(a,d?Gu.signUpForFreeCta:jM.signUpCta),m=r.jsx(ke,{as:"button",size:"large",color:c?"secondary":"primary",onClick:s,fullWidth:!0,children:r.jsx(j,T({},f))}),p=r.jsx(ke,{as:"button",size:"large",color:c?"primary":"secondary",fullWidth:!0,onClick:e,children:r.jsx(j,T({},jM.logInCta))}),g=c?[p,m]:[m,p];return r.jsx(Ft,{testId:"modal-no-auth-rate-limit",isOpen:!0,onClose:Tn,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:l,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:px-10 sm:pt-12 sm:pb-10",children:[r.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:r.jsx(j,T({},o))}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(j,T({},n))}),r.jsx("div",{className:"flex w-full flex-col gap-2 sm:gap-2.5",children:g}),t?r.jsx("a",{href:"#",className:"text-token-text-secondary mt-5 cursor-pointer text-sm font-semibold underline",onClick:h=>{h.preventDefault(),t.onClick()},children:r.jsx(j,T({},t.text))}):null]})})},jM=Ne({signUpCta:{id:"NoAuthModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthModal.logInCta",defaultMessage:"Log in"}}),v8={[ir.LoggedIn]:Be.LoggedInUserMessageCount,[ir.LoggedOut]:Be.NoAuthUserMessageCount},Ax=Zt(Vs(()=>({messageCountByAuthStatus:{[ir.LoggedIn]:PM(ir.LoggedIn),[ir.LoggedOut]:PM(ir.LoggedOut)}})));function S8(t){return t.messageCountByAuthStatus[ir.LoggedOut]}function Iie(t){return t.messageCountByAuthStatus[ir.LoggedIn]}const jie={incrementUserMessageCount:t=>{Ax.setState(e=>{const s=e.messageCountByAuthStatus[t]+1;e.messageCountByAuthStatus[t]=s,Pie({authStatus:t,messageCount:s})})}};function PM(t){const e=localStorage.getItem(v8[t]);return e?Number(e):0}function Pie({authStatus:t,messageCount:e}){localStorage.setItem(v8[t],String(e))}const Rie=10,Oie=({type:t="default"}={})=>{const e=G(),n=Xe(e,"3637408529").get("no_auth_soft_rate_limit",Rie),[o,a]=x.useState(()=>sessionStorage.getItem(Be.NoAuthHasDismissedSoftRateLimitModal)!=null),i=!ut(),l=fp(),c=Ax(S8),u=x.useRef(c),d=c>=n,[f,m]=x.useState(!1);x.useEffect(()=>{u.current<c&&(u.current=c,c===n&&m(!0))},[c,n]);const p=D_(),g=i&&d&&(t==="default"||f)&&!o&&!l&&!p,h=x.useCallback(()=>{g&&(B.logEvent("No Auth Soft Rate Limit Modal Shown"),pt.logEvent("chatgpt_no_auth_soft_rate_limit_modal_shown"))},[g]);return{isOpen:g,onClose:()=>{a(!0),sessionStorage.setItem(Be.NoAuthHasDismissedSoftRateLimitModal,"true")},onMount:h}},AXe=({onClose:t})=>{const e=G(),s=Yc(e),{isOpen:n,onClose:o,onMount:a}=Oie();return x.useEffect(()=>{a==null||a()},[a]),n?r.jsx(Aie,{dismissLink:{text:Gg.stayLoggedOutLink,onClick:()=>{B.logEvent("No Auth Soft Rate Limit Modal Stay Logged out Link Clicked"),pt.logEvent("chatgpt_no_auth_soft_rate_limit_modal_stay_logged_out_link_clicked"),t(),o()}},onLogInButtonClick:()=>{os(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},onSignUpButtonClick:()=>{os(e,{fallbackScreenHint:"signup",callback:i=>{B.logSignUpButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},subtitle:s?Gg.logInSubtitle:Gg.signUpSubtitle,title:Gg.title}):null},Gg=Ne({title:{id:"NoAuthSoftRateLimitModal.title",defaultMessage:"Thanks for trying ChatGPT"},signUpSubtitle:{id:"zpngdW",defaultMessage:"Sign up or log in to get smarter responses, upload files and images, and more."},logInSubtitle:{id:"iVew+I",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),Lie=3600*24*30*12;function Die(){var l;const{isLoading:t,data:e}=dt(nY),s=x.useRef(Fie()),n=(l=e==null?void 0:e.email)!=null?l:null,o=x.useCallback(()=>{s.current&&e?B.logEventWithStatsig("Punch Out Anon To Authed Modal Shown","chatgpt_punch_out_anon_to_authed_modal_shown"):console.warn("PunchOutAnonToAuthedModal is being mounted without a user and a token")},[e]),a=c=>{B.logEventWithStatsig("Punch Out Anon To Authed Modal Continue Button Clicked","chatgpt_punch_out_anon_to_authed_modal_continue_button_clicked"),RM(),Bie(),window.location.href="/continue_from_api?token=".concat(c)},i=()=>{RM(),B.logEventWithStatsig("Punch Out Anon To Authed Modal Cancel Button Clicked","chatgpt_punch_out_anon_to_authed_modal_cancel_button_clicked")};return t?{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"loading",token:null}:s.current&&n?{email:n,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"show",token:s.current}:{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"hide",token:null}}function Fie(){var t;return(t=En.getCookie(Mn.PunchOutRequireAnonToAuthedToken))!=null?t:null}function RM(){return En.deleteCookie(Mn.PunchOutRequireAnonToAuthedToken)}function Bie(){En.setCookie(Mn.PunchOutAnonToAuthedEnabled,"true",{maxAge:Lie})}const IXe=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:s,onMount:n,token:o,email:a,state:i}=Die(),c=bl()?"medium":"large";return x.useEffect(n,[n]),i!=="show"?null:r.jsx(Ft,{testId:"modal-punch-out-anon-to-authed",isOpen:!0,noPadding:!0,onClose:Tn,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-2 text-center text-xl font-medium md:text-start",children:r.jsx(j,{id:"qAel0I",defaultMessage:"Always open in ChatGPT?"})}),r.jsx("div",{className:"text-token-text-secondary mb-6 text-center md:text-start",children:r.jsx(j,{id:"9Pb+Og",defaultMessage:"Chats you open from Siri will be saved in your account <emailContainer>({email})</emailContainer>.",values:{emailContainer:u=>r.jsx("span",{className:"font-medium",children:u}),email:a}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(ke,{color:"primary",size:c,onClick:()=>s(o),children:r.jsx(j,T({},$t.continueButtonText))}),r.jsx(ke,{color:"secondary",size:c,onClick:()=>{e(),t()},children:r.jsx(j,T({},$t.cancelButtonText))})]})]})})};function Uie(){const t=x.useRef($ie()),e=G(),s=x.useCallback(()=>{t.current?B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Shown","chatgpt_no_auth_punch_out_sign_in_as_modal_shown"):console.warn("PunchOutSignInAsModal is being mounted without punchOutRequireLoginInfo")},[]);return{onCancelButtonClick:()=>{B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Cancel Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_cancel_button_clicked"),g2()},onContinueButtonClick:({token:a})=>{B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Continue Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_continue_button_clicked"),g2(),os(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({location:"No Auth Punch Out Sign In As Modal",provider:i},Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PUNCH_OUT_SIGN_IN_AS_MODAL)},callbackUrl:"/continue_from_api?token=".concat(a),skipLoginModal:!zr(e)})},onMount:s,punchOutRequireLoginInfo:t.current}}function $ie(){if(typeof window>"u")return null;const t=En.getCookie(Mn.PunchOutRequireLoginInfo);if(!t)return null;try{const e=JSON.parse(t);return oY(e,aY),e}catch(e){g2(),e instanceof rY?console.warn("Invalid struct for punch out require login info",e):Ge.addError("Failed to parse punch out require login info",{error:e})}return null}function g2(){En.deleteCookie(Mn.PunchOutRequireLoginInfo)}const jXe=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:s,onMount:n,punchOutRequireLoginInfo:o}=Uie(),i=bl()?"medium":"large";if(x.useEffect(n,[n]),!o)return null;const{email:l}=o;return r.jsx(Ft,{testId:"modal-punch-out-sign-in-as",isOpen:!0,noPadding:!0,onClose:Tn,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-6 text-center text-xl font-medium md:text-start",children:r.jsx(j,{id:"0e8g2r",defaultMessage:"Sign in as {email}?",values:{email:l}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(ke,{color:"primary",size:i,onClick:()=>s(o),children:r.jsx(j,T({},$t.continueButtonText))}),r.jsx(ke,{color:"secondary",size:i,onClick:()=>{e(),t()},children:r.jsx(j,T({},$t.cancelButtonText))})]})]})})};var it=(t=>(t.Starter="starter",t.Reply="reply",t.Capabilities="capabilities",t.Autocomplete="autocomplete",t.Trending="trending",t.Templated="templated",t))(it||{}),As=(t=>(t.Search="Search",t.Canvas="Canvas",t.Image="Image",t.ContextualAnswers="ContextualAnswers",t.ContextualAnswersNUX="ContextualAnswersNUX",t.ChatGPTTrending="ChatGPTTrending",t.ImageGenTrending="ImageGenTrending",t.Slurm="Slurm",t.Tatertot="Tatertot",t.Glaux="Glaux",t.TemplatedPrompts="TemplatedPrompts",t))(As||{});const Qc=ue(Ce,"6d87e1",20,20),Hie=Object.freeze(Object.defineProperty({__proto__:null,default:Qc},Symbol.toStringTag,{value:"Module"})),A1=ue(Ce,"23f3be",20,20),sk="tatertot_create_flashcards_or_quiz",Gie="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png";function Vie({onClose:t}){const e=G(),s=Gie,[n,o]=x.useState(!1);x.useEffect(()=>{n||(_t(e,We.hasSeenTatertotNux),o(!0),$e.count(He.TATERTOT,"tatertot_nux_modal_shown"),B.logEventWithStatsig("Tatertot Nux Modal Shown","chatgpt_tatertot_nux_modal_shown"))},[e,n]);const[a,i]=x.useState(!1);x.useEffect(()=>{const _=new Image;_.src=s,_.onload=()=>i(!0)},[s]);const[l,c]=x.useState(!1),[u,d]=x.useState(!1);x.useEffect(()=>{if(!a)return;const _=setTimeout(()=>{c(!0)},200),b=setTimeout(()=>{d(!0)},300);return()=>{clearTimeout(_),clearTimeout(b)}},[a]);const f=yt(),[m,p]=x.useState(!1),g=ne(),h=()=>{m||(p(!0),t(),f({pathname:"/",search:"?hints=".concat(ER)}),$e.count(He.TATERTOT,"tatertot_nux_modal_show_me_clicked"),B.logEventWithStatsig("Tatertot Nux Modal Show Me Clicked","chatgpt_tatertot_nux_modal_show_me_clicked"))};return a?r.jsxs(Ft,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),$e.count(He.TATERTOT,"tatertot_nux_modal_closed"),B.logEventWithStatsig("Tatertot Nux Modal Closed","chatgpt_tatertot_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(Es,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(l?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"StudyandLearnNux.firstBubble",defaultMessage:"Hey Chat!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"StudyandLearnNux.secondBubble",defaultMessage:"Help me with my homework"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-center text-[20px] leading-7 font-medium",children:g.formatMessage({id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"})}),r.jsx("div",{className:"text-token-text-secondary -mt-4 w-full text-center text-[17px]",children:r.jsx(j,{id:"StudyandLearnNux.subtitle",defaultMessage:"Your step-by-step guide to learning anything"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Qc,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle1",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription1",defaultMessage:"Break down complex problems with approachable, guided explanations."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(A1,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle2",defaultMessage:"Prep for tests"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription2",defaultMessage:"Test your knowledge with quizzes on any topic."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(iY,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle3",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription3",defaultMessage:"Go deep on any topic and ask any question."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4",children:r.jsx(ke,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-6",children:g.formatMessage({id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"})})})})]})]}):null}function C8(t,e){const s=[{type:it.Autocomplete,id:"tatertot_homework_autocomplete",title:t.formatMessage({id:"8ZR8F6",defaultMessage:"Help me with my homework"}),prompt:t.formatMessage({id:"3Cdh/P",defaultMessage:"Help me with my homework"}),icon:r.jsx(Qc,{className:"h-full w-full"}),body:"",theme:As.Tatertot},{type:it.Autocomplete,id:"tatertot_explain_topic",title:t.formatMessage({id:"eOU1s2",defaultMessage:"Explain a topic to me"}),prompt:t.formatMessage({id:"/SVEgw",defaultMessage:"Explain a topic to me"}),icon:r.jsx(Nl,{className:"h-full w-full"}),body:"",theme:As.Tatertot}];return e?s.push({type:it.Autocomplete,id:sk,title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"bNSdL3",defaultMessage:"Create a practice quiz with quizgpt"}),icon:r.jsx(A1,{className:"h-full w-full"}),body:"",theme:As.Tatertot}):s.push({type:it.Autocomplete,id:"tatertot_create_quiz",title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"MSsW2T",defaultMessage:"Create a practice quiz"}),icon:r.jsx(A1,{className:"h-full w-full"}),body:"",theme:As.Tatertot}),s}const zie=Object.freeze(Object.defineProperty({__proto__:null,TATERTOT_CREATE_QUIZ_PROMPT_STARTER_ID:sk,TatertotNuxModal:Vie,getTatertotStaticPromptStarters:C8},Symbol.toStringTag,{value:"Module"})),Wie="https://persistent.oaistatic.com/chatgpt/nux-quiz.jpg",PXe=()=>{const{eligible:t,isLoading:e}=Ct(We.hasSeenTatertotQuizNux),s=G();return!Ee(s,"550187082")||!MR(s)?"hide":e?"loading":t?"show":"hide"};function RXe({onClose:t}){const e=G(),s=oe(()=>na(e)),n=Wie,o=ne(),a=ut(),l=C8(o,a).find(_=>_.id===sk),c=x.useRef(!1),[u,d]=x.useState(!1);x.useEffect(()=>{const _=new Image;_.src=n,_.onload=()=>d(!0)},[n]),x.useEffect(()=>{!u||c.current||(c.current=!0,$e.count(He.TATERTOT,"tatertot_quiz_nux_modal_shown"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Shown","chatgpt_tatertot_quiz_nux_modal_shown"),B.logUpsellOrModalEvent(ks,{eventId:"tatertot_quiz_nux_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[u]);const f=yt();x.useMemo(()=>s?Object.fromEntries(s.map(_=>[_.systemHint,_])):{},[s]);const[m,p]=x.useState(!1),g=x.useCallback(()=>{_t(e,We.hasSeenTatertotQuizNux),t(),$e.count(He.TATERTOT,"tatertot_quiz_nux_modal_closed"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Closed","chatgpt_tatertot_quiz_nux_modal_closed")},[e,t]),h=x.useCallback(()=>{m||(p(!0),_t(e,We.hasSeenTatertotQuizNux),t(),f({pathname:"/",search:"?hints=".concat(ER,"&q=").concat(l==null?void 0:l.prompt)}),$e.count(He.TATERTOT,"tatertot_quiz_nux_modal_show_me_clicked"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Show Me Clicked","chatgpt_tatertot_quiz_nux_modal_show_me_clicked"))},[e,f,t,l==null?void 0:l.prompt,m]);return u?r.jsxs(Ft,{testId:"modal-tatertot-quiz-nux",isOpen:!0,noPadding:!0,onClose:g,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(Es,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:g})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:n,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsx("div",{className:"relative mx-auto w-full",children:r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[200px] max-w-[172px] -translate-x-1/2 translate-y-60 flex-col items-start justify-end rounded-xl bg-white p-4",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-2 flex-col items-start justify-end",children:[r.jsx("span",{className:"mb-5 flex items-center gap-4 font-serif text-xl text-[15px] leading-[1.5] font-medium text-black",children:r.jsx(r.Fragment,{children:o.formatMessage(Nr.quizQuestion)})}),r.jsx("div",{className:"mb-2 flex flex-col gap-2",children:[Nr.quizAnswer1,Nr.quizAnswer2,Nr.quizAnswer3].map((_,b)=>{const y=[Nr.quizOptionA,Nr.quizOptionB,Nr.quizOptionC];return r.jsx(gn.Fragment,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("label",{className:"flex items-center gap-2 text-[11.5px] text-black",children:[r.jsx("span",{className:"inline-block rounded bg-gray-100 px-1.5 py-0.5 text-[9px] font-medium text-gray-700",children:r.jsx(j,T({},y[b]))}),o.formatMessage(_)]}),r.jsx("div",{className:"ms-6.5 mt-1 h-[0.5px] w-[calc(100%+1.5rem)] bg-gray-200"})]})},_.id||b)})})]})})})})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:o.formatMessage(Nr.quizNUXTitle)}),r.jsx("div",{className:"flex w-full items-center justify-center text-[17px]",children:r.jsx("div",{className:"flex w-90 flex-col items-center",children:r.jsx("div",{className:"text-token-text-secondary text-center",children:o.formatMessage(Nr.quizNUXDescription)})})}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(ke,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-12",children:r.jsx(j,{id:"StudyandLearnNux.quizNuxButton",defaultMessage:"Try it"})})})})]})]}):null}const Nr=Ne({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},quizOptionA:{id:"StudyandLearnNux.quizOptionA",defaultMessage:"A"},quizOptionB:{id:"StudyandLearnNux.quizOptionB",defaultMessage:"B"},quizOptionC:{id:"StudyandLearnNux.quizOptionC",defaultMessage:"C"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),w8="has-dismissed-welcome-back-modal",OXe=()=>{"use forget";const t=F.c(18),e=G(),[s,n]=x.useState(qie);let o;t[0]!==e?(o=Xe(e,"3637408529").get("is_no_auth_welcome_back_modal_enabled",!1),t[0]=e,t[1]=o):o=t[1];const a=o,i=NR();let l;t[2]!==e?(l=ut(),t[2]=e,t[3]=l):l=t[3];const c=!l;let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=fp(),t[4]=u):u=t[4];const d=u,f=bC();let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{n(!0),sessionStorage.setItem(w8,"true")},t[5]=m):m=t[5];const p=m;let g;if(t[6]!==e?(g=()=>TR(e),t[6]=e,t[7]=g):g=t[7],oe(g)){let y;return t[8]===Symbol.for("react.memo_cache_sentinel")?(y={isOpen:!1,onClose:null},t[8]=y):y=t[8],y}let _;t[9]!==e||t[10]!==s||t[11]!==f||t[12]!==a||t[13]!==i||t[14]!==c?(_=c&&a&&!s&&d&&!i&&!f&&(lY()||!cY(e)),t[9]=e,t[10]=s,t[11]=f,t[12]=a,t[13]=i,t[14]=c,t[15]=_):_=t[15];let b;return t[16]!==_?(b={isOpen:_,onClose:p},t[16]=_,t[17]=b):b=t[17],b};function qie(){return sessionStorage.getItem(w8)!=null}const go=Pe(()=>me(()=>import("./zqh8zckrbn05i9g8.js").then(t=>t.F),__vite__mapDeps([16,1,17,3,4,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,2,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103])).then(t=>t.FormattedText));function Kie(){return x.use(go.prefetch()),null}const LXe=Pe(()=>me(()=>import("./jftncm63mknqil4t.js"),__vite__mapDeps([104,1,105,3,4,106])).then(t=>t.OpenStatusText)),DXe=Pe(()=>me(()=>import("./jftncm63mknqil4t.js"),__vite__mapDeps([104,1,105,3,4,106])).then(t=>t.BusinessMetadataWidget)),FXe=Pe(()=>me(()=>import("./jftncm63mknqil4t.js"),__vite__mapDeps([104,1,105,3,4,106])).then(t=>t.BusinessMetadataSummaryLine));function k8({workspaceId:t,enabled:e=!0}){return dt({queryKey:["workspace-policy",t],queryFn:t?()=>de.safeGet("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}}}):XS,enabled:!!t&&e})}function BXe(t){const e=Gt();return ds({mutationFn:s=>de.safePost("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}},requestBody:{workspace_policy:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-policy",t]})}})}const Yie=We.hasSeenWorkSpacePolicy;function Qie(t){"use forget";const e=F.c(7),{workspaceId:s,enabled:n}=t,o=n===void 0?!0:n;let a,i;e[0]!==s?(a=["workspace-policy-acknowledge",s],i=()=>s?de.safeGet("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:s}}}):Promise.resolve(null),e[0]=s,e[1]=a,e[2]=i):(a=e[1],i=e[2]);const l=!!s&&o;let c;return e[3]!==a||e[4]!==i||e[5]!==l?(c={queryKey:a,queryFn:i,enabled:l},e[3]=a,e[4]=i,e[5]=l,e[6]=c):c=e[6],dt(c)}function Jie(t){"use forget";const e=F.c(9),{workspaceId:s}=t,n=Gt();let o;e[0]!==s?(o=c=>{const{policyHash:u}=c;return de.safePost("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:s}},requestBody:{policy_hash:u}})},e[0]=s,e[1]=o):o=e[1];let a,i;e[2]!==n?(a=()=>{n.setQueryData(rr().queryKey,Zie)},i=()=>{n.invalidateQueries(rr())},e[2]=n,e[3]=a,e[4]=i):(a=e[3],i=e[4]);let l;return e[5]!==o||e[6]!==a||e[7]!==i?(l={mutationFn:o,onMutate:a,onSuccess:i},e[5]=o,e[6]=a,e[7]=i,e[8]=l):l=e[8],ds(l)}function Zie(t){return t&&U(T({},t),{eligible_announcements:t.eligible_announcements.filter(Xie)})}function Xie(t){return t!==Yie}const T8=t=>{let e=0;if(!t)return"";for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e|=0;return e.toString()},E8=30,ele=E8*24*60*60*1e3,nk=Le(null),tle=(t,e,s)=>{const n={hash:s,expiresAt:Date.now()+ele};ft.setItem(Be.WorkspacePolicyViewed,JSON.stringify(n),{userId:e,workspaceId:t}),nk.set(s)},sle=(t,e,s,n)=>{if(n&&n.policy_hash&&n.last_acknowledged_at){const a=Date.parse(n.last_acknowledged_at);if(!Number.isNaN(a)){const i=s&&Number.isFinite(s)&&s>0?s:E8;if(Date.now()-i*24*60*60*1e3<a)return n.policy_hash}}const o=ft.getItem(Be.WorkspacePolicyViewed,{userId:e,workspaceId:t});if(!o)return null;try{const a=JSON.parse(o);if(a.expiresAt>Date.now())return a.hash}catch(a){}return null},nle=t=>Ee(t,"45492109"),UXe=()=>{"use forget";var N,A,I;const t=F.c(22),e=Sa(mr.businessWorkspaceId),s=(N=xs())==null?void 0:N.id,{data:n,isLoading:o}=F_(e!=null?e:void 0),a=!!((A=n==null?void 0:n.beta_settings)!=null&&A.workspace_policy),i=e!=null?e:void 0;let l;t[0]!==a||t[1]!==i?(l={workspaceId:i,enabled:a},t[0]=a,t[1]=i,t[2]=l):l=t[2];const{data:c,isLoading:u}=k8(l);let d;if(t[3]===Symbol.for("react.memo_cache_sentinel")){const P=jt();d=nle(P),t[3]=d}else d=t[3];const f=d,m=e!=null?e:void 0,p=a&&f;let g;t[4]!==m||t[5]!==p?(g={workspaceId:m,enabled:p},t[4]=m,t[5]=p,t[6]=g):g=t[6];const{data:h,isLoading:_}=Qie(g),b=o||u||_,y=(I=c==null?void 0:c.workspace_policy)!=null?I:"";let v;t[7]!==y?(v=T8(y),t[7]=y,t[8]=v):v=t[8];const S=v,C=oe(ole);let w,k;if(t[9]!==o||t[10]!==h||t[11]!==s||t[12]!==e||t[13]!==n?(w=()=>{if(!e||!s||o||!n)return;const P=n.beta_settings_str.workspace_policy_cadence,R=Number(P),O=sle(e,s,R,h);nk.set(O)},k=[e,s,o,n,h],t[9]=o,t[10]=h,t[11]=s,t[12]=e,t[13]=n,t[14]=w,t[15]=k):(w=t[14],k=t[15]),x.useEffect(w,k),!e){let P;return t[16]===Symbol.for("react.memo_cache_sentinel")?(P={isLoading:!1,isOpen:!1},t[16]=P):P=t[16],P}if(b||!s){let P;return t[17]===Symbol.for("react.memo_cache_sentinel")?(P={isLoading:!0,isOpen:!1},t[17]=P):P=t[17],P}if(!a||!c||!y){let P;return t[18]===Symbol.for("react.memo_cache_sentinel")?(P={isLoading:!1,isOpen:!1},t[18]=P):P=t[18],P}if((n==null?void 0:n.beta_settings_str.workspace_policy_cadence)==="every_login"){let P;return t[19]===Symbol.for("react.memo_cache_sentinel")?(P={isLoading:!1,isOpen:!0},t[19]=P):P=t[19],P}const E=S!==C;let M;return t[20]!==E?(M={isLoading:!1,isOpen:E},t[20]=E,t[21]=M):M=t[21],M},$Xe=({onClose:t})=>{var m,p,g;const e=ne(),s=Sa(mr.businessWorkspaceId),n=(m=xs())==null?void 0:m.id,{mutate:o}=Jie({workspaceId:s!=null?s:""}),{data:a,isLoading:i}=k8({workspaceId:s!=null?s:void 0}),l=(p=a==null?void 0:a.workspace_policy)!=null?p:"",c=Sa(mr.isBusinessWorkspace),u=Sa(h=>h.currentWorkspace),d=e.formatMessage(OM.workspaceWelcome,{workspaceName:u==null?void 0:u.name}),f=()=>{t(),B.logEvent("Workspace Policy Acknowledged",{workspaceId:s});const h=T8(l);o({policyHash:h}),s&&n&&tle(s,n,h)};return r.jsx(Ft,{testId:"modal-workspace-policy",isOpen:!0,onClose:f,type:"success",icon:c?r.jsx(VP,{size:"small",src:u==null?void 0:u.profilePictureUrl}):void 0,title:d,size:"custom",shouldIgnoreClickOutside:!0,className:"h-[80vh]! min-h-[500px]! w-[80vw]!",children:i?r.jsx(vC,{lines:10,size:"xl"}):r.jsx("div",{className:"flex h-full min-h-0 flex-col",children:r.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full flex-col gap-6",children:[r.jsx(go,{size:"small",className:"px-4 md:px-6",useSafeUrls:!1,children:(g=a==null?void 0:a.workspace_policy)!=null?g:""}),r.jsx("div",{className:"mt-auto flex flex-row justify-end px-4 md:px-6",children:r.jsx(E_,{title:e.formatMessage(OM.gettingStartedButton),onClick:f,color:"primary"})})]})})})})},OM=Ne({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},gettingStartedButton:{id:"BlockingInitialModals.acknowledgeButton",defaultMessage:"Acknowledge"}});function ole(){return nk()}const ale="/cdn/assets/team-upsell-landscape-ee106ppw.webp",rle={src:ale};function HXe(){const t=G(),e=!ut(),s=_o(t,"2210309751").get("variant","control"),n=Pa(),[o]=yi(Be.HasDismissedTeamsNoAuthUpsell,!1,Nx);return!(!n&&e&&s==="front-door"&&!o)||ft.getItem(Be.HasDismissedTeamsNoAuthUpsell)?"hide":"show"}function GXe({onClose:t}){const e=G();Ee(e,"676035580");const s=yt(),n=AR(),o=()=>{t(),ft.setItem(Be.HasDismissedTeamsNoAuthUpsell,!0)},a=()=>{o(),s({hash:Pp,search:window.location.search},{state:{[xx]:"Teams no-auth upsell announcement"}})};return r.jsx(Pc,{open:!0,modal:!1,children:r.jsx(Rc,{container:n==null?void 0:n.document.body,children:r.jsxs("div",{className:"bg-token-bg-primary popover border-token-border-default bg-primary fixed end-4 bottom-4 z-100 flex w-full max-w-sm flex-col gap-3 overflow-hidden rounded-2xl border shadow-xl",children:[r.jsx("img",{className:"h-[147px] object-cover",src:rle.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-6 py-5",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(j,T({},Vg.teamsNoAuthUpsellTitle))}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(j,T({},Vg.teamsNoAuthUpsellDescription))}),r.jsxs("div",{className:"mt-5 flex flex-row justify-start space-x-2",children:[r.jsx(ke,{as:"button",color:"primary",onClick:a,children:r.jsx(j,T({},Vg.getTeam))}),!1,r.jsx(ke,{as:"button",color:"secondary",onClick:o,children:r.jsx(j,T({},Vg.notNow))})]})]})]})})})}const Vg=Ne({teamsNoAuthUpsellTitle:{id:"TeamsNoAuthUpsell.title",defaultMessage:"A shared space for teams"},teamsNoAuthUpsellDescription:{id:"TeamsNoAuthUpsell.description",defaultMessage:"Supercharge your team's work with a shared workspace, admin controls, and connectors to your company tools."},getTeam:{id:"TeamsNoAuthUpsell.getTeam",defaultMessage:"Get Business"},notNow:{id:"TeamsNoAuthUpsell.notNow",defaultMessage:"Not now"}}),Ix=ue(Ce,"003104",20,20),M8=We.Onboarding,VXe=()=>{const{eligible:t,isLoading:e}=Ct(M8);return{hasSeenOnboardingDate:e?null:!t}},zXe=()=>{const{eligible:t,isLoading:e}=Ct(We.TeamOwnerOnboarding);return{hasSeenTeamOwnerOnboardingDate:e?null:!t}};function WXe({onClose:t,scope:e}){const s=G(),n=x.useCallback(()=>{t(!0),_t(s,M8)},[s,t]);return e===oO.Personal?r.jsx(lle,{onSubmit:n}):r.jsx(cle,{onSubmit:()=>{t(!0)}})}const id=({icon:t,title:e,body:s})=>r.jsxs("div",{className:"flex flex-col gap-2 md:w-1/3",children:[r.jsxs("div",{className:"flex flex-row items-start gap-2",children:[r.jsx("div",{className:"mt-1",children:t}),r.jsx("div",{className:"text-token-text-primary font-semibold",children:e})]}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:s})]}),ile="https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",lle=({onSubmit:t})=>{const e=ne();return r.jsxs("div",{className:"flex flex-col gap-3 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(id,{icon:r.jsx(Ix,{isSolid:!0,className:"icon text-green-600"}),title:r.jsx(j,T({},uo.askAway)),body:r.jsx(j,T({},uo.askAwayBody))}),r.jsx(id,{icon:r.jsx(uY,{className:"icon text-brand-purple"}),title:r.jsx(j,T({},uo.warning)),body:r.jsx(j,U(T({},uo.warningBody),{values:{article:s=>r.jsx("a",{href:ile,target:"_blank",className:"underline",rel:"noopener noreferrer",children:s})}}))}),r.jsx(id,{icon:r.jsx(IR,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(j,T({},uo.accuracy)),body:r.jsx(j,T({},uo.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(E_,{title:e.formatMessage(uo.gettingStartedButton),onClick:t,color:"primary","data-testid":"getting-started-button"})})]})},cle=({onSubmit:t})=>{const e=ne();return r.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(id,{icon:r.jsx(gx,{className:"icon text-brand-purple"}),title:r.jsx(j,T({},uo.workUse)),body:r.jsx(j,T({},uo.workUseBody))}),r.jsx(id,{icon:r.jsx(Ix,{className:"icon text-green-600"}),title:r.jsx(j,T({},uo.askAway)),body:r.jsx(j,T({},uo.askAwayBody))}),r.jsx(id,{icon:r.jsx(IR,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(j,T({},uo.accuracy)),body:r.jsx(j,T({},uo.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(E_,{title:e.formatMessage(uo.gettingStartedButton),onClick:t,color:"primary"})})]})},uo=Ne({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more."},askAwayEducationBody:{id:"onboarding.askAwayEducationBody",defaultMessage:"Use ChatGPT to brainstorm lesson ideas, differentiate materials, create assessments, or save time on prep."},warning:{id:"onboarding.warning",defaultMessage:"Dont share sensitive info"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>."},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. Its not intended to give advice."},accuracyEducation:{id:"onboarding.accuracyEducation",defaultMessage:"Check important details"},accuracyEducationBody:{id:"onboarding.accuracyEducationBody",defaultMessage:"While helpful, ChatGPT can be incorrect. Check important information."},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, lets go"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits."},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work"},educationUse:{id:"onboarding.educationUse",defaultMessage:"Made for your classroom"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"Your chats arent used to train our models, including anything you share like lesson plans, student data, and planning work."}}),N8=ue(Ce,"dace10",20,20),yf=ue(Ce,"e717cc",20,20),ule=Object.freeze(Object.defineProperty({__proto__:null,default:yf},Symbol.toStringTag,{value:"Module"})),A8=We.MemoryOnboarding;function qXe(){const t=Dp(),{eligible:e,isLoading:s}=Ct(A8);return{eligible:e&&t,isLoading:s}}function yy({icon:t,title:e,description:s}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"text-token-text-secondary mt-1",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:s})]})]})}function KXe({onClose:t}){const e=G(),s=dle(e),n=Dc(),o=tk(),a=(o==null?void 0:o[Qt.Sunshine])===!0,i=ne(),l=x.useCallback(()=>{_t(e,A8),t()},[e,t]);return x.useEffect(()=>{B.logUpsellOrModalEvent(ks,{eventId:"memory_onboarding_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),r.jsx(Ft,{testId:"modal-memory-onboarding",isOpen:!0,onClose:Tn,size:"custom",className:"max-w-xl",type:"success",title:i.formatMessage(Ga.title),secondaryButton:s?r.jsx(mn.Button,{onClick:async()=>{try{await n.mutateAsync({setting:Qt.Sunshine,value:!1}),l()}catch(c){}},title:i.formatMessage(Ga.notNow),color:"secondary",disabled:a}):null,primaryButton:s?r.jsx(mn.Button,{onClick:async()=>{try{await n.mutateAsync({setting:Qt.Sunshine,value:!0}),l()}catch(c){}},title:i.formatMessage(Ga.enable),color:"primary",disabled:a}):r.jsx(mn.Button,{onClick:l,title:i.formatMessage(Ga.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(yy,{icon:r.jsx(Nl,{}),title:i.formatMessage(Ga.bulletTitle1),description:i.formatMessage(Ga.bulletDescription1)}),r.jsx(yy,{icon:r.jsx(yf,{}),title:i.formatMessage(Ga.bulletTitle2),description:r.jsx(j,T({},Ga.bulletDescription2))}),r.jsx(yy,{icon:r.jsx(N8,{}),title:i.formatMessage(Ga.bulletTitle3),description:r.jsx(j,U(T({},Ga.bulletDescription3),{values:{link1:c=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c}),link2:c=>r.jsx(Ia,{to:tf(hn.Personalization),className:"underline",children:c}),link3:c=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq#h_b8745c1ae1",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c})}}))})]})})}function dle(t){return Ee(t,"1542198993")}const Ga=Ne({title:{id:"MemoryOnboardingModal.title.1",defaultMessage:"ChatGPT now has memory"},bulletTitle1:{id:"MemoryOnboardingModal.bulletTitle1",defaultMessage:"Keep the conversation going"},bulletDescription1:{id:"MemoryOnboardingModal.bulletDescription1.1",defaultMessage:"ChatGPT will automatically remember useful details and preferences you share in all your conversations, carrying them between chats."},bulletTitle2:{id:"MemoryOnboardingModal.bulletTitle2.1",defaultMessage:"A more personalized assistant"},bulletDescription2:{id:"MemoryOnboardingModal.bulletDescription2.2",defaultMessage:"Memories and your chat history are used to give you more relevant responses. Want to change what ChatGPT remembers? Just ask."},bulletTitle3:{id:"MemoryOnboardingModal.bulletTitle3",defaultMessage:"You're in control"},bulletDescription3:{id:"MemoryOnboardingModal.bulletDescription3.2",defaultMessage:"<link1>Learn more</link1> about how memory works. You can turn off memory at any time in <link2>settings</link2>. Memories may be used to <link3>train our models</link3> if you have model training enabled."},continue:{id:"MemoryOnboardingModal.continue",defaultMessage:"Continue"},notNow:{id:"MemoryOnboardingModal.notNow",defaultMessage:"Not now"},enable:{id:"MemoryOnboardingModal.enable",defaultMessage:"Enable"}});function fle(t){"use no forget";bs()&&Fc().then(e=>{e.getHost().userStoppedAgentConversation(t)}).catch(()=>{})}function mle(t,e,s,n=!1,o=!1,a=null){"use no forget";if(!bs())return;const i=s==null?void 0:s.slice(-10).map(d=>{var f=d,{metadata:c}=f,u=De(f,["metadata"]);return u}),l=JSON.stringify({messages:i});Fc().then(c=>{c.getHost().userSentMessageInAgentConversation(t,l,n,o,a,e)}).catch(()=>{})}function ple(t,e=!1){"use no forget";bs()&&Fc().then(s=>{s.getHost().agentConversationStopped(t,e)}).catch(()=>{})}function gle(t){"use no forget";return bs()?Fc().then(e=>e.getHost().getAgentStatus(t)):Promise.resolve("stopped")}function hle(t,e,s,n,o=!1,a=void 0,i={},l=void 0){const c=U(T({client_thread_id:String(t),client_initiated:e,reason:s,is_agent_hint_enabled:a},i),{has_stop_conduit_token:l});if(!(a||n))return;if(o&&a!==void 0&&a!==n){const d=n?"from_agent_to_non_agent":"from_non_agent_to_agent",f="conversation.transition_".concat(d);Ge.addAction(f,U(T({},c),{action_type:"abort_completion"})),B.logEventWithStatsig("Agent Conversation Transition","chatgpt_agent_conversation_transition",U(T({},c),{action_type:"abort_completion"}))}$e.count(He.DEFAULT,"chatgpt_web_conversation_stop",[{key:"has_stop_conduit_token",value:l?"true":"false"},{key:"stop_reason",value:s}]),n&&(Ge.addAction("conversation.stop_attempted",U(T({},c),{is_last_turn_agent:!0})),B.logEventWithStatsig("Agent Conversation Stop","chatgpt_agent_conversation_stop",T({},c)))}function YXe(t,e){try{Ge.addAction(t,e)}catch(s){}}const jx=t=>{"use forget";const e=F.c(3),s=G();let n;return e[0]!==s||e[1]!==t?(n=()=>{if(t===void 0)return null;const o=Et(s,t);return Sl(o)},e[0]=s,e[1]=t,e[2]=n):n=e[2],oe(n)},I1=(t,e)=>{const s=Et(t,e);return Sl(s)},so=(t,e)=>{const s=Et(Io(),t);jR(s,e)};async function Px(t,e=Se.getRequestId(Tt(t)),{clientInitiated:s=!1,reason:n="other",isLastTurnAgent:o=void 0,hasAgentSystemHint:a=void 0}={}){var M,N,A,I;const i=dY(e),l=Io(),c=Tt(t),u=Rt(t),d=I1(l,t),f=(d==null?void 0:d.value)===Xt.REALTIME,m=(d==null?void 0:d.value)===Xt.REALTIME_BUSY,p=(d==null?void 0:d.value)===Xt.STREAMING,g=Se.getCurrentNode(c),h=(M=c==null?void 0:c.stopConduitToken)!=null?M:null,_=h!==null,y=(()=>{const P=g==null?void 0:g.message;return P?fY(P):!1})(),v=p&&((I=(A=(N=g==null?void 0:g.message)==null?void 0:N.metadata)==null?void 0:A.model_slug)==null?void 0:I.endsWith("-pro")),S=p&&s,C=Ee(l,"877631007");if(!i&&!f&&!m&&!v&&!S)return;nt(t,P=>{P.interruptionInProgress=!0});const w=()=>{var L,D,H;const R=(c?Se.getLastMessageSystemHints(c):[]).includes(Ye.Agent),O=!!((H=(D=(L=Se.getCurrentNode(c))==null?void 0:L.message)==null?void 0:D.metadata)!=null&&H.n7jupd_message);return R||O},k=o!=null?o:w();k&&u&&fle(u);let E;if(u&&Ee(l,"3922476776")){const R=T({requestBody:{conversation_id:u,exclude_async_types:C?["pro_mode"]:[]},authOption:is.SendIfAvailable},h?{additionalHeaders:{"x-conduit-token":h}}:{});E=await de.safePost("/stop_conversation",R),h&&nt(t,O=>{O.stopConduitToken=null});try{hle(t,s,n,k,!0,a,{},_)}catch(O){Ls.error("Error logging abort completion attempt for analytics",{error:O})}}return i&&!y&&Ph.abortRequest(e),nt(t,P=>{P.interruptionInProgress=!1}),E}const Rd=new Set,_le=(t,e=()=>!0)=>{const s={callback:t,shouldBlock:e};return Rd.add(s),()=>Rd.delete(s)},QXe=(t,e=()=>!0)=>{x.useEffect(()=>{const s={callback:t,shouldBlock:e};return Rd.add(s),()=>{Rd.delete(s)}},[t,e])},xle=()=>Array.from(Rd).some(t=>t.shouldBlock()),yle=()=>Promise.allSettled(Array.from(Rd).filter(t=>t.shouldBlock()).map(t=>t.callback()));function LM(t){var e;bs()&&((e=Bc())==null||e.recordConversationStreamEvent(t))}class ble{constructor(){X(this,"completionStartTime",Date.now());X(this,"completionEndTime");X(this,"blurDuringCompletionTime");X(this,"refocusTime");X(this,"logFocusAfterBlurDuringCompletionEvent",()=>{pt.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)}),B.logEvent("Focus After Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)})});X(this,"onWindowBlur",()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))});X(this,"onWindowFocusAfterBlur",()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()});X(this,"cleanupFocusAfterBlurListener",()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)});X(this,"onMessageError",()=>{window.removeEventListener("blur",this.onWindowBlur)});X(this,"onMessageDone",()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),pt.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),B.logEvent("Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())});window.addEventListener("blur",this.onWindowBlur)}}const h2=new Set,I8=t=>{x.useEffect(()=>(h2.add(t),()=>{h2.delete(t)}),[t])},DM=t=>{for(const e of h2)try{e({error:t})}catch(s){Ge.addError(s)}},bf=Zt(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),vle=()=>bf.getState().ui.focusedNodeId,vf=()=>bf.getState().messagesDevData;function JXe(t){const e=Object.keys(vf()),s=e.indexOf(t);if(s===-1)throw new Error("Key not found in object");const n=(s+1)%e.length;return e[n]}function ZXe(t){const e=Object.keys(vf()),s=e.indexOf(t);if(s===-1)throw new Error("Key not found in object");const n=(s-1+e.length)%e.length;return e[n]}function XXe(t){return Object.keys(vf()).indexOf(t)}const eet=()=>Object.keys(vf()).length;var by,FM;function Sle(){if(FM)return by;FM=1;function t(e,s){for(var n,o=-1,a=e.length;++o<a;){var i=s(e[o]);i!==void 0&&(n=n===void 0?i:n+i)}return n}return by=t,by}var vy,BM;function Cle(){if(BM)return vy;BM=1;var t=Sle(),e=NaN;function s(n,o){var a=n==null?0:n.length;return a?t(n,o)/a:e}return vy=s,vy}var Sy,UM;function wle(){if(UM)return Sy;UM=1;var t=Cle(),e=B_();function s(n){return t(n,e)}return Sy=s,Sy}var kle=wle();const Tle=en(kle);function Ele(t){return t.length===0?null:t.reduce((s,n)=>s+n,0)/t.length}function Mle(t){const e=t.length;if(e===0)return 0;const s=Ele(t)||0,n=t.reduce((o,a)=>o+Math.pow(a-s,2),0)/e;return Math.sqrt(n)}function $M(t,e){const s=t.slice().sort((l,c)=>l-c),n=e*(s.length-1),o=Math.floor(n),a=Math.ceil(n);if(o===a)return s[o];const i=n-o;return(1-i)*s[o]+i*s[a]}function Nle(t){if(t.length===0)return null;const e=t.slice().sort((n,o)=>n-o),s=Math.floor(e.length/2);return e.length%2===0?(e[s-1]+e[s])/2:e[s]}var fa=(t=>(t.FirstTokenLatency="first_token_lat",t.TotalRequestTime="total_request_time",t.TokenCount="token_count",t.StdDevTokenLatency="std_dev_token_lat",t.MeanTokenLatency="mean_token_lat",t.MedianTokenLatency="median_token_lat",t.MinTokenLatency="min_token_lat",t.MaxTokenLatency="max_token_lat",t.P95TokenLatency="p95_token_lat",t.P99TokenLatency="p99_token_lat",t))(fa||{});const j8=t=>{var m;const e=t.filter(p=>p.requestCount>1);let s=0;for(let p=0;p<t.length;p++){const g=t[p];if(s=g.requestDuration,g.content!=="")break}const n=$M(e.map(p=>p.lastTokenDuration),.95),o=$M(e.map(p=>p.lastTokenDuration),.99),a=Tle(e.map(p=>p.lastTokenDuration)),i=Nle(e.map(p=>p.lastTokenDuration)),l=e.filter(p=>p.lastTokenDuration!==0).reduce((p,g)=>Math.min(p,g.lastTokenDuration),1/0),c=e.reduce((p,g)=>Math.max(p,g.lastTokenDuration),-1/0),u=Mle(e.map(p=>p.lastTokenDuration)),d=(m=t[t.length-1])==null?void 0:m.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:s>0?"".concat(s.toFixed(2),"ms"):null,value:s>0?s:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:d?"".concat((d/1e3).toFixed(2),"s"):null,value:d||null,category:"summary"},{id:"token_count",name:"Token count",stat:"".concat(t.length),value:t.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:"".concat(u.toFixed(2)),value:u,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:a?"".concat(a.toFixed(2),"ms"):null,value:a!=null?a:null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:i?"".concat(i.toFixed(2),"ms"):null,value:i!=null?i:null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:"".concat(l.toFixed(2),"ms"),value:l!=null?l:null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:"".concat(c.toFixed(2),"ms"),value:c!=null?c:null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:n?"".concat(n.toFixed(2),"ms"):null,value:n!=null?n:null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:o?"".concat(o.toFixed(2),"ms"):null,value:o!=null?o:null,category:"aggregate"}]},tet=()=>{var a;const t=vf(),e=vle();if(!t||!e)return{stats:[],targetLatencyData:[]};const s=t[e],n=(a=s==null?void 0:s.data)!=null?a:[];return{stats:j8(n),targetLatencyData:n}},Ale=(t,e,s,n)=>{bf.setState(o=>{const a={focusedNodeId:t},i={status:"active",data:[],model:e,serverRequestId:s,preflightTime:n};return U(T({},o),{activeNodeId:t,ui:a,messagesDevData:U(T({},o.messagesDevData),{[t]:i})})})},Ile=(t,e,s)=>{const n=s==null?void 0:s.search_source;bf.setState(o=>{var i;const a=o.messagesDevData[t];return U(T({},o),{activeNodeId:t,messagesDevData:U(T({},o.messagesDevData),{[t]:U(T({},a),{data:[...(i=a==null?void 0:a.data)!=null?i:[],e],searchSource:n})})})})},Va=(t,e)=>{var s;return(s=e.find(n=>n.id===t))==null?void 0:s.value},jle=t=>{var c;if(!ut())return;const s=vf()[t],n=j8(s.data),{preflightTime:o,model:a,serverRequestId:i,searchSource:l}=s;return de.safePost("/lat/r",{requestBody:{server_request_id:i,model:a,preflight_time_ms:o,search_source:l,count_tokens:(c=Va(fa.TokenCount,n))!=null?c:0,ts_first_token_ms:Va(fa.FirstTokenLatency,n),ts_max_token_time_ms:Va(fa.MaxTokenLatency,n),ts_mean_token_without_first_ms:Va(fa.MeanTokenLatency,n),ts_median_token_without_first_ms:Va(fa.MedianTokenLatency,n),ts_min_token_time_ms:Va(fa.MinTokenLatency,n),ts_p95_token_without_first_ms:Va(fa.P95TokenLatency,n),ts_p99_token_without_first_ms:Va(fa.P99TokenLatency,n),ts_std_dev_token_ms:Va(fa.StdDevTokenLatency,n),ts_total_request_ms:Va(fa.TotalRequestTime,n)}})},Ple=t=>bf.setState(e=>{const s=U(T({},e.messagesDevData[t]),{status:"finished"});return U(T({},e),{messagesDevData:U(T({},e.messagesDevData),{[t]:s})})}),set=t=>bf.setState(e=>U(T({},e),{ui:U(T({},e.ui),{focusedNodeId:t})}));class Rle{constructor(e,s){X(this,"requestLastTokenTime");X(this,"requestCount",0);X(this,"requestTimes",[]);this.requestLatencyId=e,this.requestStartTime=s,this.requestLastTokenTime=s}onResponse(e,s,n){const o=performance.now(),a=o-this.requestLastTokenTime,i=o-this.requestStartTime;this.requestLastTokenTime=o,this.requestCount+=1;const l={requestCount:this.requestCount,requestDuration:i,lastTokenDuration:Number(JSON.stringify(a)),messageType:s.content.content_type,content:SC(s)?xo(s):""};this.requestTimes.push(l),e.type==="message"?Ile(this.requestLatencyId,l,s.metadata):e.type==="done"&&n!=null&&(Ple(this.requestLatencyId),jle(this.requestLatencyId))}}const P8=(t,e)=>{const{isCompletion:s,messageId:n,conversationId:o,flagged:a,blocked:i,disclaimers:l,metadata:c,shouldDisableConversation:u}=t,d=!!(l!=null&&l.length);nt(e,f=>{as.updateTree(f,m=>{var _,b,y;const p=m.messageIdToNodeId(n);i&&m.clearNodeMessageParts(p);const g=(_=c==null?void 0:c.model_incompatibility)!=null?_:!1,h=(b=c==null?void 0:c.safety_limited)!=null?b:!1;m.updateNodeMetadata(p,U(T(T(T(T({},(y=d&&!!(l!=null&&l.length)&&hY(l,i))!=null?y:{}),a&&gY),i&&pY({isSafetyLimited:h,shouldDisableConversation:u,isModelIncompatibility:g})),u&&mY),{completionSampleFinishTime:Date.now()}))})}),B.logEvent(s?i?"Moderation: Completion Content Blocked":"Moderation: Completion Content Flagged":i?"Moderation: Prompt Content Blocked":"Moderation: Prompt Content Flagged",{threadId:o,id:n})},HM={base_config:void 0,eval_preset:void 0,sonicberry_model_ids:void 0,settings_overrides:void 0,dump_sub_conversation:void 0};function Rx(){let t;try{const e=En.getCookie(Mn.InternalSearchSettings);t=e?JSON.parse(e):HM}catch(e){t=HM}return _Y(t,e=>!!e)}const R8=(t=Io(),e=!1)=>{var s;return ut()?((s=ct(t))==null?void 0:s.planType)===tt.FREE?Xe(t,"3178812292",{disableExposureLog:e}):Xe(t,"3703416703",{disableExposureLog:e}):Xe(t,"2861477803",{disableExposureLog:e})},Ole=(t=Io())=>{const e=of().fConversationEndpoint;return e==="convo2"?!0:e==="convo1"?!1:Ee(t,"4154476537")?!0:R8(t,!0).get("use_f_prepare",!1)},Ox=(t=Io(),e=!1)=>{const s=of().fConversationEndpoint;return s==="convo2"?!0:s==="convo1"?!1:Ee(t,"4154476537")?!0:R8(t,e).get("use_f_convo",!1)},Lle=()=>{var t;return(t=Rx().fast_search)!=null?t:!1};function GM(t,e){PR.setState(s=>{const n=s.threads[t];if(n)n.prepareRequestBlocked=e,e||(n.lastCompletionFinishedTimestamp=performance.now());else{const o=Rt(t);if(o){const a=s.threads[o];a&&(a.prepareRequestBlocked=e,e||(a.lastCompletionFinishedTimestamp=performance.now()))}}})}function ok(t,e,s,n){nt(e,o=>{o.title=s,o.titleSource=n}),lc.publish({kind:"updateThreadTitle",conversationId:e}),xY(t,e,s)}function O8(t){window.history.pushState({},"",t)}function ak(t,e,s,n,o,a){var d;const i=Tt(s),l=Se.getGizmoId(i),u=(d=new URLSearchParams(window.location.search).get(zv))!=null?d:void 0;if(l!=null)yY(e,l).then(f=>{if(n){const m=f.gizmo;t(ya(s,{project:m,superWidgetTab:u}));return}O8(ya(s,{gizmo:f,superWidgetTab:u}))}).catch(f=>{Ge.addError(f),t(ya(s,{superWidgetTab:u}))});else{const f=ya(s,{superWidgetTab:u});Dle(t)?t(f,{replace:a}):t(f)}}function Dle(t){return t!==O8}const L8=(t,e)=>{var h,_,b,y,v,S;const s=t.find(C=>{var w;return C.author.role===ot.Tool&&[bt.Error,bt.SystemError].includes(C.content.content_type)||((w=C.metadata)==null?void 0:w.is_error)}),{imageAssetPointers:n}=bY(t),o=n.length>0,i=t.some(C=>Fm(C))&&!o,l=t.some(C=>{var M,N;if((M=C.metadata)!=null&&M.image_gen_async)return!1;const w=C.author.name===Qs.IMAGE_GEN_HALLUCINATED||C.author.name===ed,k=C.content.content_type===bt.Text,E=!!((N=C.metadata)!=null&&N.is_visually_hidden_from_conversation);return w&&k&&E}),c=t.length>0&&!!((_=(h=t[t.length-1])==null?void 0:h.metadata)!=null&&_.image_gen_async),d=!t.some(C=>{var w;return[ed,Qs.IMAGE_GEN_HALLUCINATED].includes((w=C.author.name)!=null?w:"")&&C.content.content_type===bt.MultimodalText})&&t.some(C=>{var E;const w=[ed,Qs.IMAGE_GEN_HALLUCINATED].includes((E=C.author.name)!=null?E:""),k=C.recipient==="assistant";return w&&k});let f=0;for(const C of n){if((b=C.metadata)==null?void 0:b.is_no_auth_placeholder){f+=1;continue}const k=C.height,E=(S=(v=(y=C.metadata)==null?void 0:y.generation)==null?void 0:v.height)!=null?S:void 0;f+=k!==void 0&&E!==void 0?E/k:0}const m=n.length>0?f/n.length:0,p=s!==void 0,g=e?Lr.AsyncGenerating:Lr.AsyncHanging;if(i||l||d)return Lr.Empty;if(p)return Lr.Errored;if(m){if(m<1)return c?g:Lr.Generating;if(m===1)return Lr.Complete}else return c?g:Lr.Thinking;return Lr.Unavailable},Fle=t=>L8([t],!0)===Lr.Complete,rk=t=>t.author.role===ot.Assistant&&t.recipient===ed;function net(t){return(t.author.name===ed||rk(t))&&vY.includes(L8([t],!0))}const Ble=ue(Ce,"d03bce",20,20),wr=ue(Ce,"6fef0e",20,20),Ule=ue(Ce,"d6f274",24,24);function $le(t){"use forget";const e=F.c(29),{onClose:s,effect:n}=t,o=oe(Yle),a=x.useRef(!1);let i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{a.current||(a.current=!0,B.logEvent("SMHRK Intervention: Helpline Modal Opened",{}))},l=[],e[0]=i,e[1]=l):(i=e[0],l=e[1]),x.useEffect(i,l);const c=Kle;let u;if(e[2]!==n.text){const w=n.text.split(/\n+/).map(qle);u=[];let k=null;for(const E of w){const M=E.match(/^[-]\s+(.*)$/);M?(k==null&&(k=[]),k.push(M[1])):(k&&(u.push({type:"ul",content:k}),k=null),E&&u.push({type:"p",content:[E]}))}if(k){let E;e[4]!==k?(E={type:"ul",content:k},e[4]=k,e[5]=E):E=e[5],u.push(E)}e[2]=n.text,e[3]=u}else u=e[3];const d=u;let f;e[6]!==s?(f=()=>{de.safePost("/sentinel/modal_ack",{authOption:is.SendIfAvailable}).catch(Wle),s()},e[6]=s,e[7]=f):f=e[7];const m=f,p=n.title;let g;e[8]!==d?(g=r.jsx("div",{className:"text-token-text-secondary space-y-3",children:d.map(Vle)}),e[8]=d,e[9]=g):g=e[9];let h;if(e[10]!==n.helplines||e[11]!==o){let w;e[13]!==o?(w=(k,E)=>{var M,N;return r.jsxs("div",{className:"border-token-border-heavy rounded-lg border p-4",children:[r.jsx("div",{className:"text-base font-semibold",children:k.name}),k.description?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:k.description}):null,r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(N=o?k.links:(M=k.links)==null?void 0:M.filter(Gle))==null?void 0:N.map((A,I)=>r.jsxs(ke,{as:"a",to:Qle(A.kind,A.href),openNewTab:A.kind==="url"||A.kind==="chat",color:A.kind==="call"?"secondary":"ghost",className:A.kind==="call"?void 0:"border-token-border-heavy border",size:"small",label:A.label,onClick:()=>c(k.name,A.href,A.kind),children:[Jle(A.kind),A.label]},I))})]},E)},e[13]=o,e[14]=w):w=e[14],h=n.helplines.map(w),e[10]=n.helplines,e[11]=o,e[12]=h}else h=e[12];let _;e[15]!==h?(_=r.jsx("div",{className:"flex flex-col gap-4",children:h}),e[15]=h,e[16]=_):_=e[16];let b;e[17]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:r.jsx(j,U(T({},VM.disclaimer),{values:{link:Hle}}))}),e[17]=b):b=e[17];let y;e[18]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(j,T({},VM.close)),e[18]=y):y=e[18];let v;e[19]!==m?(v=r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsx(ke,{as:"button",color:"primary-inverse",onClick:m,size:"large",children:y})}),e[19]=m,e[20]=v):v=e[20];let S;e[21]!==v||e[22]!==g||e[23]!==_?(S=r.jsxs("div",{className:"flex flex-col gap-4 px-6 ps-6 pt-4 pb-6",children:[g,_,b,v]}),e[21]=v,e[22]=g,e[23]=_,e[24]=S):S=e[24];let C;return e[25]!==n.title||e[26]!==s||e[27]!==S?(C=r.jsx(Ft,{testId:"modal-crisis-helpline",isOpen:!0,onClose:s,title:p,showCloseButton:!1,noPadding:!0,position:"center",size:"custom",className:"max-w-[640px]",headerClassName:"ps-6 pe-6 pt-6 pb-0",shouldIgnoreClickOutside:!0,children:S}),e[25]=n.title,e[26]=s,e[27]=S,e[28]=C):C=e[28],C}function Hle(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/12315645",target:"_blank",rel:"noreferrer",className:"underline",children:t})}function Gle(t){return t.kind!=="call"&&t.kind!=="text"}function Vle(t,e){return t.type==="p"?r.jsx("p",{className:"text-pretty",children:t.content[0]},"p-".concat(e)):r.jsx("ul",{className:"list-disc space-y-2 ps-5",children:t.content.map(zle)},"ul-".concat(e))}function zle(t,e){return r.jsx("li",{children:t},e)}function Wle(){}function qle(t){return t.trim()}function Kle(t,e,s){B.logEvent("SMHRK Intervention: Helpline Modal Button Clicked",{helplineName:t,linkHref:e,linkKind:s})}function Yle(){return RR()}function Qle(t,e){switch(t){case"call":return e.startsWith("tel:")?e:"tel:".concat(e);case"text":return e.startsWith("sms:")?e:"sms:".concat(e);default:return e}}const VM=Ne({close:{id:"crisisHelplineModal.close",defaultMessage:"Close"},disclaimer:{id:"crisisHelplineModal.disclaimer",defaultMessage:"Services unaffiliated with ChatGPT"}});function Jle(t){const e=t==="call"?Ule:t==="text"||t==="chat"?Ble:wr;return r.jsx(e,{className:"icon-sm me-1","aria-label":""})}const Zle=ue(Ce,"127a53",20,20),Xle=ue(Ce,"bd0092",20,20),ece=ue(Ce,"1c992a",20,20),tce=ue(Ce,"143e56",20,20),sce=ue(Ce,"3c5754",20,20),nce=ue(Ce,"407870",20,20),oce=ue(Ce,"fec800",20,20),ace=ue(Ce,"c9d737",20,20),j1="gpt-5-thinking",D8=["min","standard","extended","max"],rce=(t,e,s)=>{if(s!=null&&s.thinkingEfforts){const o=s.thinkingEfforts.map(a=>a.thinking_effort).filter(a=>D8.includes(a));return o.length>0?o:[]}const n=ct(t);return n!=null&&n.isPro()||n!=null&&n.isEnterprise()?["min","standard","extended","max"]:["standard","extended"]},ice=t=>{var e;return(e=t==null?void 0:t.thinkingEfforts)!=null&&e.length?t.thinkingEfforts.reduce((s,n)=>{const o=n.thinking_effort;return D8.includes(o)&&(s[o]={fullLabel:n.full_label,mobileFullLabel:n.mobile_full_label,shortLabel:n.short_label,description:n.description}),s},{}):{}},lce=(t,e)=>{B.logEventWithStatsig("ChatGPT Composer Thinking Effort Changed","chatgpt_composer_thinking_effort_changed",{effort:e,model:t})};function F8(t,e,s){var l,c,u,d,f,m,p,g,h,_,b,y;const n=s==null?void 0:s[e],o=()=>{var v;return(v=n==null?void 0:n.fullLabel)!=null?v:n==null?void 0:n.mobileFullLabel},a=()=>{var v,S;return(S=(v=n==null?void 0:n.shortLabel)!=null?v:n==null?void 0:n.mobileFullLabel)!=null?S:n==null?void 0:n.fullLabel},i=()=>n==null?void 0:n.description;switch(e){case"min":return{filledIcon:ece,progressIcon:nce,fullLabel:(l=o())!=null?l:t.formatMessage({id:"kogr4P",defaultMessage:"Light thinking"}),shortLabel:(c=a())!=null?c:t.formatMessage({id:"oHA6pi",defaultMessage:"Light"}),description:(u=i())!=null?u:t.formatMessage({id:"IXCwXJ",defaultMessage:"Quick, thoughtful answers"})};case"standard":return{filledIcon:ace,progressIcon:oce,fullLabel:(d=o())!=null?d:t.formatMessage({id:"SF0DXJ",defaultMessage:"Standard thinking"}),shortLabel:(f=a())!=null?f:t.formatMessage({id:"LvLUFd",defaultMessage:"Standard"}),description:(m=i())!=null?m:t.formatMessage({id:"KBwMuT",defaultMessage:"Balanced thinking and speed"})};case"extended":return{filledIcon:Zle,progressIcon:tce,fullLabel:(p=o())!=null?p:t.formatMessage({id:"ZdXWiu",defaultMessage:"Extended thinking"}),shortLabel:(g=a())!=null?g:t.formatMessage({id:"8yC7rt",defaultMessage:"Extended"}),description:(h=i())!=null?h:t.formatMessage({id:"UvHF8K",defaultMessage:"Thinks longer for complex questions"})};case"max":return{filledIcon:Xle,progressIcon:sce,fullLabel:(_=o())!=null?_:t.formatMessage({id:"WQe8sQ",defaultMessage:"Heavy thinking"}),shortLabel:(b=a())!=null?b:t.formatMessage({id:"ZCryku",defaultMessage:"Heavy"}),description:(y=i())!=null?y:t.formatMessage({id:"uTE58+",defaultMessage:"Even longer analysis for harder questions"})};default:return F8(t,"standard",s)}}const cce=["notificationSettings"];class uce{static async getOrCreateSubscription({endpoint:e,p256dh:s,auth:n}){return de.safePost("/notifications/subscription/register",{requestBody:{platform:"web",web_metadata:{endpoint:e,p256dh:s},token:n}})}static async deregisterSubscription({token:e}){const s={token:e,platform:"web"};return de.safeDelete("/notifications/subscription/deregister",{requestBody:s})}static async getSettings(){return de.safeGet("/notifications/settings")}static async updateSettings(e){const o=e,{category:s}=o,n=De(o,["category"]);return de.safePatch("/notifications/settings",{requestBody:{updates:{[s]:n}}})}}const dce=1e4,ik=Zt(Vs(()=>({notifications:[]}))),qm=t=>{var n;const e=crypto.randomUUID();ik.setState(o=>{o.notifications.push(U(T({},t),{id:e}))});const s=(n=t.timeout)!=null?n:dce;setTimeout(()=>{lk(e)},s)},lk=t=>{ik.setState(e=>{e.notifications=e.notifications.filter(s=>s.id!==t)})},oet=({onSuccess:t,alwaysRefetchOnMount:e=!1})=>dt({queryKey:cce,queryFn:async()=>{const n=(await uce.getSettings()).settings;return t==null||t(n),n},refetchOnMount:e?"always":!0});function fce(t,e){if(t.length<=e)return t;const s=t.slice(0,Math.min(t.length,e+20)),n=s.lastIndexOf("."),o=s.lastIndexOf("!"),a=s.lastIndexOf("?"),i=Math.max(n,o,a);if(i>0&&i<=e&&i>=Math.floor(e*.4))return t.slice(0,i+1).trim()+"";const l=t.lastIndexOf(" ",e);return l>Math.floor(e*.25)?t.slice(0,l).trim()+"":t.slice(0,e).trim()+""}const B8=["home-beacon"];function mce(t){return Ps({enabled:t,queryKey:B8,queryFn:async()=>(await de.safeGet("/beacons/home")).beacon_ui_response})}function pce(){const t=jt();ln(t).removeQueries({queryKey:B8,exact:!0})}const gce=Le(!1);function ck(){"use forget";return oe(hce)}function hce(){return gce()}const Od=Zt(Vs(()=>null)),No={updateDetails:(t,e,s)=>{["beacon_banner_info","beacon_modal_info","beacon_container_info"].includes(t.ui_info.type)&&Od.setState(()=>U(T({},t),{responseThreadId:e,responseLeafId:s}),!0)},dismiss:()=>{pce(),Od.setState(()=>null,!0)}};function _ce(t,e){return t.responseThreadId===e}function Lx(t,e,s){return t?t.responseLeafId!=null?t.responseLeafId===s:t.responseThreadId===e:!1}function xce(t){return(t==null?void 0:t.ui_info.type)==="beacon_container_info"}function yce(t){return(t==null?void 0:t.ui_info.type)==="beacon_banner_info"}function bce(t){return(t==null?void 0:t.ui_info.type)==="beacon_modal_info"}function uk(t){"use forget";const e=F.c(3),{serverThreadId:s,leafId:n}=t,o=ck();let a;e[0]!==n||e[1]!==s?(a=l=>!yce(l)||l.ui_info.dismiss_variant!==a1.PERSISTENT&&!Lx(l,s,n)||l.ui_info.dismiss_variant===a1.PERSISTENT&&!_ce(l,s)?null:l,e[0]=n,e[1]=s,e[2]=a):a=e[2];const i=Od(a);return o?i:null}function vce(t){"use forget";const e=F.c(3),{serverThreadId:s,leafId:n}=t,o=ck();let a;e[0]!==n||e[1]!==s?(a=l=>!Lx(l,s,n)||!bce(l)?null:l,e[0]=n,e[1]=s,e[2]=a):a=e[2];const i=Od(a);return o?i:null}function dk(t){"use forget";const e=F.c(3),{serverThreadId:s,leafId:n}=t,o=ck();let a;e[0]!==n||e[1]!==s?(a=l=>!Lx(l,s,n)||!xce(l)?null:l,e[0]=n,e[1]=s,e[2]=a):a=e[2];const i=Od(a);return o?i:null}function Sce(t){"use forget";const e=F.c(3),{serverThreadId:s,leafId:n}=t;let o;return e[0]!==n||e[1]!==s?(o=a=>{var i;return Lx(a,s,n)&&(i=a==null?void 0:a.ui_info)!=null?i:null},e[0]=n,e[1]=s,e[2]=o):o=e[2],Od(o)}const fk={};function aet(t,e){fk[t]=e}function Cce(t){var e;return(e=fk[t])!=null?e:null}function U8(t){return t in fk}const wce=t=>{const e=Object.entries(t.mapping).find(([s])=>s==="");if(e!==void 0){const s=OR(t),[,n]=e,o=n.children;s.mapping["client-created-root"]=U(T({},n),{id:"client-created-root"}),delete s.mapping[""];for(const a of o)s.mapping[a].parent="client-created-root";return s}return t},ret=t=>(t.parent_message_id==="client-created-root"&&delete t.parent_message_id,t);async function hr(t,e={}){const s=Cce(t),n={};e.projectId&&jn(e.projectId)&&(n["chatgpt-project-id"]=e.projectId,e.ownerUserId&&(n["chatgpt-conv-owner-id"]=e.ownerUserId));const o=s!=null?s:await de.safeGet("/conversation/{conversation_id}",T({parameters:{path:{conversation_id:t}},authOption:is.SendIfAvailable},n?{additionalHeaders:n}:{}));s||Ge.addTiming("chatgpt.web.chatPage.loadExistingConversation");const a=wce(o);return To.updateThreadFromServer(t,a,{skipIfExisting:e==null?void 0:e.skipIfExisting}),so(a.conversation_id,a.async_status?{source:Cn.SERVER,value:a.async_status}:null),a}const Up=o=>{var a=o,{clientThreadId:t,alwaysForceUpdate:e=!1,onError:s}=a,n=De(a,["clientThreadId","alwaysForceUpdate","onError"]);return Ps({queryKey:["conversation",t],queryFn:()=>hr(t,U(T({},n),{skipIfExisting:!e})).catch(i=>{throw s==null||s(i),i})})};function kce(t){return t==null||[Pt.PrimaryAssistant,Pt.GizmoInteraction].includes(t.kind)}function $8(t){"use forget";const e=F.c(5),s=G();let n;e[0]!==t||e[1]!==s?(n=Et(s,t),e[0]=t,e[1]=s,e[2]=n):n=e[2];const o=n;let a;return e[3]!==o?(a=()=>mk(o),e[3]=o,e[4]=a):a=e[4],oe(a)}const mk=oa(t=>vt(()=>{const{ctx:e}=t,s=SY(t);if(s)switch(s.kind){case Pt.PrimaryAssistant:case Pt.FlyingCircusCustomization:return s;case Pt.GizmoInteraction:case Pt.GizmoMagicCreate:{const n=yc(t);return U(T({},s),{gizmo:n?wY(e,n).data:void 0})}case Pt.GizmoTest:{const n=yc(t);return U(T({},s),{gizmo:n?CY(e,n).data:void 0})}}}));function iet(t){return t.kind===Pt.GizmoInteraction||t.kind===Pt.GizmoMagicCreate||t.kind===Pt.GizmoTest?t.gizmo:void 0}const Tce="gpt-4",Ece="oai/apps/capExpiresAt";Zt(()=>({serverThreadIds:new Set}));function Mce(){const t=Dx(o=>o.isoDate),e=Date.now(),s=t&&new Date(t).getTime(),n=t&&s&&s<=e;return x.useEffect(()=>{n&&H8()},[n]),n?null:t?Tce:null}const Dx=Zt()(LR(()=>({isoDate:""}),{name:Ece}));function Nce(t){Dx.setState({isoDate:t})}function H8(){Dx.setState({isoDate:""})}const zM="atlas",Ace="side_chat",Ice="new_tab_page",jce=window.location.host;function G8(t){return xt(()=>Ss(t)?{app_name:zM,app_surface:Ace}:yr(t)?{app_name:zM,app_surface:Ice}:{app_name:jce})}const Pce="https://help.openai.com/en/articles/8590148-memory-faq",sc=80,zg=100;function Rce(t){return t==="cold"?"cold":"warm"}function Oce(t){return t==="user"?"user":"assistant"}function V8(t){const e=t.last_updated,s=n=>n?{actor:Oce(n.actor),timestamp:n.timestamp}:null;return U(T({},t),{status:Rce(t.status),last_updated:s(e)})}function P1(t){if(!(!t||t.length===0))return Array.from(t).sort()}function z8(t,e=!0,s,n){const o=P1(s),a=P1(n);return["memories",T(T({gizmoId:t,includeMemoryEntries:e},o?{contextScopes:o}:{}),a?{requiredContextScopes:a}:{})]}function $p(t,e=!0,s=!0,n,o){const a=P1(n),i=P1(o);return dt({queryKey:z8(t,e,a,i),queryFn:async()=>{const l={gizmo_id:t,include_memory_entries:e};a&&(l.context_scopes=a),i&&(l.required_context_scopes=i);const c=await de.safeGet("/memories",{parameters:{query:l}}),u=Math.min(Math.floor(100*c.memory_num_tokens/c.memory_max_tokens),100);return U(T({},c),{memoryFullPct:u,memories:c.memories.map(d=>V8(d))})},refetchOnMount:"always",enabled:s})}function W8(t=50){return["memory_history",{limit:t}]}function cet(t=50,e=!0){return dt({queryKey:W8(t),queryFn:async()=>{const s=await de.safeGet("/memories/history",{parameters:{query:{limit:t}}}),n=Array.isArray(s.history)?s.history:[];return U(T({},s),{history:n.map(o=>U(T({},o),{memories:o.memories.map(a=>V8(a))}))})},refetchOnMount:"always",enabled:e})}function pk(t,e,s=!1){var l;const n="684023316",a=(l=Xe(t,n,{disableExposureLog:!0}).get("memory_almost_full_threshold",sc))!=null?l:sc;if((e!=null?e:0)<a)return"control";const i=Xe(t,n);return s?{threshold:a,layer:i.get("upsell_variant","control")}:i.get("upsell_variant","control")}function Lce(t,e=!0){return Xe(t,"684023316",{disableExposureLog:e}).get("upsell_variant","control")}const dl=(t,e)=>{window.__reactRouterDataRouter.navigate(t,e)},R1=t=>{const e=window.__reactRouterDataRouter.state.location.pathname;return Jq(t,e)},uet=t=>{var e,s;return(s=(e=window.history.state)==null?void 0:e.usr)==null?void 0:s[t]},det=t=>{window.history.replaceState(U(T({},window.history.state),{usr:U(T({},window.history.state.usr),{[t]:void 0})}),"")};function Dce(t){let e=2166136261;for(let s=0;s<t.length;s++)e^=t.charCodeAt(s),e=Math.imul(e,16777619)>>>0;return e^=e>>>16,e=Math.imul(e,2246822507)>>>0,e^=e>>>13,e=Math.imul(e,3266489909)>>>0,e^=e>>>16,(e>>>0).toString(16).padStart(8,"0")}class Fce{constructor(){X(this,"answers",new Map);X(this,"maxAttempts",5e5);X(this,"requirementsSeed",Bce());X(this,"sid",Ds());X(this,"errorPrefix","wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D");X(this,"_runCheck",(e,s,n,o,a)=>{o[3]=a,o[9]=Math.round(performance.now()-e);const i=Wg(o);return Dce(s+i).substring(0,n.length)<=n?i+"~S":null})}async initializeAndGatherData(e){this._getAnswer(e)}async startEnforcement(e){this._getAnswer(e)}getEnforcementTokenSync(e){const s=this._getAnswer(e);return typeof s=="string"?s:null}async getEnforcementToken(e,s){return this._getAnswer(e,s==null?void 0:s.forceSync)}async getRequirementsToken(){return this.answers.has(this.requirementsSeed)||this.answers.set(this.requirementsSeed,this._generateAnswerAsync(this.requirementsSeed,"0")),"gAAAAAC"+await this.answers.get(this.requirementsSeed)}getRequirementsTokenBlocking(){return"gAAAAAC"+this._generateRequirementsTokenAnswerBlocking()}_getAnswer(e,s=!1){var l;const n="gAAAAAB";if(!((l=e==null?void 0:e.proofofwork)!=null&&l.required))return null;const{seed:o,difficulty:a}=e.proofofwork;if(!(typeof o=="string"&&typeof a=="string"))return null;const i=this.answers.get(o);if(typeof i=="string")return i;if(s){const c=this._generateAnswerSync(o,a),u=n+c;return this.answers.set(o,u),u}return this.answers.has(o)||this.answers.set(o,this._generateAnswerAsync(o,a)),Promise.resolve().then(async()=>n+await this.answers.get(o)).then(c=>(this.answers.set(o,c),c))}buildGenerateFailMessage(e){return this.errorPrefix+Wg(String(e!=null?e:"e"))}_generateAnswerSync(e,s){const n=performance.now();try{const o=this.getConfig();for(let a=0;a<this.maxAttempts;a++){const i=this._runCheck(n,e,s,o,a);if(i)return i}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}async _generateAnswerAsync(e,s){const n=performance.now();try{let o=null;const a=this.getConfig();for(let i=0;i<this.maxAttempts;i++){(!o||o.timeRemaining()<=0)&&(o=await $ce());const l=this._runCheck(n,e,s,a,i);if(l)return l}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}_generateRequirementsTokenAnswerBlocking(){let e="e";const s=performance.now();try{const n=this.getConfig();return n[3]=1,n[9]=performance.now()-s,Wg(n)}catch(n){e=Wg(String(n))}return this.errorPrefix+e}getConfig(){var e,s,n,o;return[(screen==null?void 0:screen.width)+(screen==null?void 0:screen.height),""+new Date,(e=performance==null?void 0:performance.memory)==null?void 0:e.jsHeapSizeLimit,Math==null?void 0:Math.random(),navigator.userAgent,Dh(Array.from(document.scripts).map(a=>a==null?void 0:a.src).filter(a=>a)),(n=((s=Array.from(document.scripts||[]).map(a=>{var i;return(i=a==null?void 0:a.src)==null?void 0:i.match("c/[^/]*/_")}).filter(a=>a==null?void 0:a.length)[0])!=null?s:[])[0])!=null?n:document.documentElement.getAttribute("data-build"),navigator.language,(o=navigator.languages)==null?void 0:o.join(","),Math==null?void 0:Math.random(),Uce(),Dh(Object.keys(document)),Dh(Object.keys(window)),performance.now(),this.sid,[...new URLSearchParams(window.location.search).keys()].join(","),navigator==null?void 0:navigator.hardwareConcurrency,performance.timeOrigin]}}function Dh(t){return t[Math.floor(Math.random()*t.length)]}function Bce(){return""+Math.random()}function Uce(){const t=Dh(Object.keys(Object.getPrototypeOf(navigator)));try{return"".concat(t,"").concat(navigator[t].toString())}catch(e){return"".concat(t)}}function Wg(t){return t=JSON.stringify(t),window.TextEncoder?btoa(String.fromCharCode(...new TextEncoder().encode(t))):btoa(unescape(encodeURIComponent(t)))}function $ce(){return new Promise(t=>{(window.requestIdleCallback||Hce)(s=>{t(s)},{timeout:10})})}function Hce(t){return setTimeout(()=>{t({timeRemaining:()=>1,didTimeout:!1})},0),0}const gi=new Fce,q8=new WeakMap;function _2(t,e){q8.set(t,e)}function K8(t){return q8.get(t)}const Gce=0,Vce=1,zce=2,Y8=3,Q8=4,Wce=5,qce=6,Kce=24,Yce=7,Qce=8,wo=9,Jce=10,Zce=11,Xce=12,eue=13,tue=14,sue=15,x2=16,nue=17,oue=18,aue=19,rue=23,iue=20,lue=21,cue=22,uue=25,due=26,fue=27,mue=28,pue=29,J8=30,gue=33,hue=34,Ke=new Map;let Hi=0,WM=Promise.resolve();function Z8(t){const e=WM.then(t,t);return WM=e.then(()=>{},()=>{}),e}async function Km(){for(;Ke.get(wo).length>0;){const[t,...e]=Ke.get(wo).shift(),s=Ke.get(t)(...e);s&&typeof s.then=="function"&&await s,Hi++}}function _ue(t){return Z8(()=>new Promise((e,s)=>{let n=!1;setTimeout(()=>{n=!0,e(""+Hi)},500),Ke.set(Y8,o=>{n||(n=!0,e(btoa(""+o)))}),Ke.set(Q8,o=>{n||(n=!0,s(btoa(""+o)))}),Ke.set(J8,(o,a,i,l)=>{const c=Array.isArray(l),u=c?i:[],d=(c?l:i)||[];Ke.set(o,(...f)=>{if(n)return;const p=[...Ke.get(wo)];if(c)for(let g=0;g<u.length;g++){const h=u[g],_=f[g];Ke.set(h,_)}return Ke.set(wo,[...d]),Km().then(()=>Ke.get(a)).catch(g=>""+g).finally(()=>{Ke.set(wo,p)})})});try{Ke.set(wo,JSON.parse(gk(atob(t),""+Ke.get(x2)))),Km().catch(o=>{e(btoa(Hi+": "+o))})}catch(o){e(btoa(Hi+": "+o))}}))}function xue(t,e){return Z8(()=>new Promise((s,n)=>{var i;const o=(i=K8(t!=null?t:{}))!=null?i:"";yue(),Hi=0,Ke.set(x2,o);let a=!1;setTimeout(()=>{a=!0,s(""+Hi)},500),Ke.set(Y8,l=>{a||(a=!0,s(btoa(""+l)))}),Ke.set(Q8,l=>{a||(a=!0,n(btoa(""+l)))}),Ke.set(J8,(l,c,u,d)=>{const f=Array.isArray(d),m=f?u:[],p=(f?d:u)||[];Ke.set(l,(...g)=>{if(a)return;const _=[...Ke.get(wo)];if(f)for(let b=0;b<m.length;b++){const y=m[b],v=g[b];Ke.set(y,v)}return Ke.set(wo,[...p]),Km().then(()=>Ke.get(c)).catch(b=>""+b).finally(()=>{Ke.set(wo,_)})})});try{Ke.set(wo,JSON.parse(gk(atob(e),""+Ke.get(x2)))),Km().catch(l=>{s(btoa(Hi+": "+l))})}catch(l){s(btoa(Hi+": "+l))}}))}function gk(t,e){let s="";for(let n=0;n<t.length;n++)s+=String.fromCharCode(t.charCodeAt(n)^e.charCodeAt(n%e.length));return s}function yue(){Ke.clear(),Ke.set(Gce,_ue),Ke.set(Vce,(t,e)=>Ke.set(t,gk(""+Ke.get(t),""+Ke.get(e)))),Ke.set(zce,(t,e)=>Ke.set(t,e)),Ke.set(Wce,(t,e)=>{const s=Ke.get(t);Array.isArray(s)?s.push(Ke.get(e)):Ke.set(t,s+Ke.get(e))}),Ke.set(fue,(t,e)=>{const s=Ke.get(t);Array.isArray(s)?s.splice(s.indexOf(Ke.get(e)),1):Ke.set(t,s-Ke.get(e))}),Ke.set(pue,(t,e,s)=>Ke.set(t,Ke.get(e)<Ke.get(s))),Ke.set(gue,(t,e,s)=>{const n=Number(Ke.get(e)),o=Number(Ke.get(s));Ke.set(t,n*o)}),Ke.set(qce,(t,e,s)=>Ke.set(t,Ke.get(e)[Ke.get(s)])),Ke.set(Yce,(t,...e)=>Ke.get(t)(...e.map(s=>Ke.get(s)))),Ke.set(nue,(t,e,...s)=>{try{const n=Ke.get(e)(...s.map(o=>Ke.get(o)));if(n&&typeof n.then=="function")return n.then(o=>{Ke.set(t,o)}).catch(o=>{Ke.set(t,""+o)});Ke.set(t,n)}catch(n){Ke.set(t,""+n)}}),Ke.set(eue,(t,e,...s)=>{try{Ke.get(e)(...s)}catch(n){Ke.set(t,""+n)}}),Ke.set(Qce,(t,e)=>Ke.set(t,Ke.get(e))),Ke.set(Jce,window),Ke.set(Zce,(t,e)=>{var s,n;return Ke.set(t,(n=((s=Array.from(document.scripts||[]).map(o=>{var a;return(a=o==null?void 0:o.src)==null?void 0:a.match(Ke.get(e))}).filter(o=>o==null?void 0:o.length)[0])!=null?s:[])[0])!=null?n:null)}),Ke.set(Xce,t=>Ke.set(t,Ke)),Ke.set(tue,(t,e)=>Ke.set(t,JSON.parse(""+Ke.get(e)))),Ke.set(sue,(t,e)=>Ke.set(t,JSON.stringify(Ke.get(e)))),Ke.set(oue,t=>Ke.set(t,atob(""+Ke.get(t)))),Ke.set(aue,t=>Ke.set(t,btoa(""+Ke.get(t)))),Ke.set(iue,(t,e,s,...n)=>Ke.get(t)===Ke.get(e)?Ke.get(s)(...n):null),Ke.set(lue,(t,e,s,n,...o)=>Math.abs(Ke.get(t)-Ke.get(e))>Ke.get(s)?Ke.get(n)(...o):null),Ke.set(rue,(t,e,...s)=>Ke.get(t)!==void 0?Ke.get(e)(...s):null),Ke.set(Kce,(t,e,s)=>Ke.set(t,Ke.get(e)[Ke.get(s)].bind(Ke.get(e)))),Ke.set(hue,(t,e)=>{try{const s=Ke.get(e);return Promise.resolve(s).then(n=>{Ke.set(t,n)})}catch(s){return}}),Ke.set(cue,(t,e)=>{const s=[...Ke.get(wo)];return Ke.set(wo,[...e]),Km().catch(n=>{Ke.set(t,""+n)}).finally(()=>{Ke.set(wo,s)})}),Ke.set(mue,()=>{}),Ke.set(due,()=>{}),Ke.set(uue,()=>{})}const bue="https://challenges.cloudflare.com/turnstile/v0/api.js",vue="chatgpt-paid",Sue="chatgpt-freeaccount",y2="chatgpt-noauth",qM={[vue]:"0x4AAAAAAASbFNinhLLnW5f1",[Sue]:"0x4AAAAAAACPe2BTwOIpYk6H",[y2]:"0x4AAAAAAASbHVR44GU82lOI"};class O1{toString(){return JSON.stringify(this.toJSON())}}class Cy extends O1{constructor(e){super(),this.message=e,this.message=e}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class Cue extends O1{constructor(e){super(),this.errorCode=e,this.errorCode=e}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class wue{constructor(){X(this,"app",y2);X(this,"status","idle");X(this,"turnstileInstancePromise",null);X(this,"enforcementTokenPromise",null);X(this,"enforcementTokenCache",new WeakMap);X(this,"requestStartTimeMs",0);X(this,"_onCompleted");X(this,"_onError");X(this,"dxPromiseCache",new Map)}async initializeAndGatherData(e){this._getOrCreateInstance(e)}cacheEnforcementToken(e,s){s&&this.enforcementTokenCache.set(e,s)}async _getOrCreateInstance(e){var s,n,o;return!((s=e.turnstile)!=null&&s.required)||(n=e.turnstile)!=null&&n.dx?null:(this.app!==e.persona&&(this.app=e.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),(o=this.turnstileInstancePromise)!=null?o:new Cy("Turnstile instance not initialized."))}getEnforcementTokenSync(e){const s=this.enforcementTokenCache.get(e);return s!=null?s:null}async getEnforcementToken(e){var s;if((s=e.turnstile)!=null&&s.dx){const n=e.turnstile.dx,o=K8(e),a=o?"".concat(o,"::").concat(n):n,i=this.dxPromiseCache.get(a);if(i)return i;const c=xue(e,n).then(u=>(u&&this.enforcementTokenCache.set(e,u),u)).finally(()=>{this.dxPromiseCache.delete(a)});return this.dxPromiseCache.set(a,c),c}return this.startEnforcement(e).then(n=>(this.enforcementTokenPromise=null,n?n.toString():null))}async startEnforcement(e){var s,n;return(s=e.turnstile)!=null&&s.required?(n=e.turnstile)!=null&&n.dx?this.getEnforcementToken(e):this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(e):null}precomputeEnforcementToken(e){var n;const s=this.enforcementTokenCache.get(e);return s?Promise.resolve(s):(n=e.turnstile)!=null&&n.dx?this.getEnforcementToken(e):this.startEnforcement(e).then(o=>{var a;return typeof o=="string"?o:(a=o==null?void 0:o.toString())!=null?a:null})}async _getEnforcementToken(e,s){const n=await this._getOrCreateInstance(e);return n instanceof O1||n===null?n:new Promise((o,a)=>{this.setOnCompleted(i=>{const l=performance.now()-this.requestStartTimeMs;Ge.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:l}),o(i)}),this.setOnError(i=>{if(!s)this._getEnforcementToken(e,!0).then(o,a);else{const l=performance.now()-this.requestStartTimeMs;Ge.addAction("turnstile_get_token_error",{app_release:"27708bcc2b52f2ffa559a947c7b032818dec0af9",error:i,app:this.app.toString(),durationMs:l}),o(new Cue(i))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),n.reset(),n.execute()})}setStatus(e){this.status=e}onCompleted(e){var s;(s=this._onCompleted)==null||s.call(this,e)}setOnCompleted(e){this._onCompleted=e}onError(e){var s;(s=this._onError)==null||s.call(this,e)}setOnError(e){this._onError=e}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(e){if(this.turnstileInstancePromise!==null)if(e)this.turnstileInstancePromise.then(s=>{s instanceof O1||s.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((s,n)=>{var u,d;const o="onloadTurnstileCallback";Object.defineProperty(window,o,{value:()=>{var m;if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:f}=window;if(f===null){this.setStatus("error"),e?(Ge.addAction("turnstile_instance_missing",{app_release:"27708bcc2b52f2ffa559a947c7b032818dec0af9",app:this.app.toString()}),s(new Cy("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(s,n);return}f.render("#"+a,{sitekey:(m=qM[this.app])!=null?m:qM[y2],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),s(f)}});const a="cf-turnstile",i="cf-turnstile-script";(u=document.getElementById(a))==null||u.remove(),(d=document.getElementById(i))==null||d.remove();const l=document.createElement("div");l.id=a,l.hidden=!0,document.body.appendChild(l),this.setStatus("loading");const c=document.createElement("script");c.id=i,c.src=bue+"?onload=".concat(o),c.async=!0,c.defer=!0,c.onerror=()=>{this.setStatus("error"),e?(Ge.addAction("turnstile_script_load_error",{app_release:"27708bcc2b52f2ffa559a947c7b032818dec0af9",app:this.app.toString()}),s(new Cy("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(s,n)},document.body.appendChild(c)}),this.turnstileInstancePromise}}const Ym=new wue,kue=1e3*60*9;var Fu=(t=>(t.ChatRequirementsToken="OpenAI-Sentinel-Chat-Requirements-Token",t.TurnstileToken="OpenAI-Sentinel-Turnstile-Token",t.ProofToken="OpenAI-Sentinel-Proof-Token",t.Token="OpenAI-Sentinel-Token",t))(Fu||{});let Tue=-1,yo=null;const Eue="2115167980";function Mue(){try{const t=Io(),e=Ee(t,Eue);return e!=null?e:!1}catch(t){return!1}}async function Nue(t){const e=await de.safePost("/sentinel/chat-requirements",{requestBody:{p:t},authOption:is.SendIfAvailable});return _2(e,t),e}async function Aue(t){const e=performance.now(),s=await de.safePost("/sentinel/chat-requirements/prepare",{requestBody:{p:t},authOption:is.SendIfAvailable}),n=performance.now()-e,o=s,a={token:void 0,persona:o.persona,turnstile:o.turnstile,proofofwork:o.proofofwork,force_login:o.force_login};_2(a,t);const[i,l]=await Promise.all([gi.getEnforcementToken(a,{forceSync:!0}),Ym.getEnforcementToken(a)]),c=performance.now()-e,u={prepare_token:o.prepare_token};i&&(u.proofofwork=i),l&&(u.turnstile=l);const f=await de.safePost("/sentinel/chat-requirements/finalize",{requestBody:u,authOption:is.SendIfAvailable});Object.assign(a,f),a.persona=f.persona,_2(a,t),l&&Ym.cacheEnforcementToken(a,l);const m=performance.now()-e;return Ge.addAction("chat_requirements_time",{prepare_time:n,token_time:c,finalize_time:m}),a}function Iue(){if(yo){const{chatRequirements:t,expiration:e}=yo;if(Date.now()>=e)return yo=null,null;if(t)return yo=null,t}return null}function X8(t=!1){if(yo){const{expiration:o,chatRequirementsPromise:a}=yo;if(Date.now()<o)try{return t||(yo=null),a}catch(i){}else a.then(i=>Ge.addAction("chat_requirements_cache_expired",{app:i.persona.toString()}));yo=null}const e=gi.getRequirementsTokenBlocking();let s;Mue()?s=Aue(e):s=Nue(e);const n=++Tue;return t&&(yo={id:n,chatRequirements:null,chatRequirementsPromise:s.then(o=>((yo==null?void 0:yo.id)===n&&(yo.chatRequirements=o),o)),expiration:Date.now()+kue}),s}const jue=window.location.origin+"/backend-api/sentinel/sdk.js",Pue="https://sentinel.openai.com/backend-api/sentinel/sdk.js";function Rue(t){return new Promise((e,s)=>{const n=document.createElement("script");n.type="text/javascript",n.src=t,n.async=!0,n.defer=!0,n.onload=e,n.onerror=s,document.getElementsByTagName("head")[0].appendChild(n)})}function eL(t){let e;return()=>(e||(e=Rue(t)),e)}const Oue=eL(jue),Lue=eL(Pue);function tL(t,e){var o;return(((o=e==null?void 0:e.sdkVariant)!=null?o:"chatgpt")==="openai"?Lue:Oue)().then(()=>window.SentinelSDK.token(t))}function hk(t,e,s,n){const o={};return t!=null&&t.token&&(o["OpenAI-Sentinel-Chat-Requirements-Token"]=t.token),e&&(o["OpenAI-Sentinel-Turnstile-Token"]=e),s&&(o["OpenAI-Sentinel-Proof-Token"]=s),n&&(o["OpenAI-Sentinel-Token"]=n),o}async function Due(){try{const t=await X8(!0);t&&(await Ym.precomputeEnforcementToken(t),await gi.startEnforcement(t))}catch(t){}}let nc=null;const Fue=2e3,_k=Cl(Be.PendingSurveySpec,()=>null);function Bue(){return ft.getItem(Be.PendingSurveySpec)}function Uue(t){nc&&clearTimeout(nc),nc=setTimeout(()=>{nc=null,_k.set(t)},Fue)}function sL(){_k.set(null),nc&&(clearTimeout(nc),nc=null)}const Vu=Zt(t=>({survey:null,triggered:!1,setSurvey:e=>t({survey:e}),setTriggered:e=>t({triggered:e})}));function $ue(){const{setTriggered:t}=Vu.getState();t(!0)}function Hue(){const t=Vu(a=>a.survey),e=Vu(a=>a.triggered),s=Vu(a=>a.setSurvey),n=Vu(a=>a.setTriggered);return x.useEffect(()=>{if(!e||t)return;const a=Bue();sL(),s(a)},[t,e,s]),{survey:t,finishSurvey:()=>{s(null),n(!1)}}}function Gue(){const t=Vu(o=>o.setTriggered),e=oe(()=>_k()),s=Hs(),n=x.useRef(null);x.useEffect(()=>{if(typeof document<"u"&&document.visibilityState!=="visible"){t(!1);return}if(!e){t(!1);return}s.pathname==="/"&&s.key!==n.current&&(n.current=s.key,t(!0))},[s.key,s.pathname,t,e])}function KM(t){return!(t.type==="perf_stats"||t.type==="server_ste_metadata"||t.type==="message_marker")}let Ql=null;const nL="".concat(DR,".suggest_agent");async function xk(){return Ql==null&&(Ql=await kY()),Ql!=null?Ql:[]}function Fh(t){return Ql==null?!1:Ql.includes(t)}function Vue(){const t=[],e=[];let s=!1;return{push(n){var o;s||(e.length?(o=e.shift())==null||o({value:n,done:!1}):t.push(n))},close(){var n;if(!s)for(s=!0;e.length;)(n=e.shift())==null||n({done:!0})},async shift(){return t.length?{value:t.shift(),done:!1}:s?{done:!0}:await new Promise(n=>e.push(n))}}}function zue(t,e){return Mr(this,null,function*(){var l;const s=Vue(),n=new Set;let o=0,a=!1;const i=c=>{if(a)return;const u=c[Symbol.asyncIterator]();n.add(u),o++,(async()=>{try{for(;;){const{value:d,done:f}=await u.next();if(f)break;s.push({kind:"value",value:d});const m=e==null?void 0:e(d);m&&i(m)}}catch(d){s.push({kind:"error",error:d})}finally{n.delete(u),o--,o===0&&s.close()}})()};i(t);try{for(;;){const{value:c,done:u}=yield new nn(s.shift());if(u)return;if(c){if(c.kind==="error")throw c.error;yield c.value}}}finally{a=!0;for(const c of n)try{yield new nn((l=c.return)==null?void 0:l.call(c))}catch(u){}s.close()}})}function oL(t,e){var l;const s=!!((l=e==null?void 0:e.prefetchIds)!=null&&l.length),n=performance.now(),o=[],a=Iue();if(a==null)return o.push("chatReq"),X8().then(i);return i(a);function i(c){c.force_login&&os(t,{fallbackScreenHint:"login"});const u=Ym.getEnforcementTokenSync(c);if(u==null)return o.push("turnstile"),Ym.getEnforcementToken(c).then(d);return d(u);function d(f){const m=performance.now(),p=gi.getEnforcementTokenSync(c);if(p==null)return o.push("proofofwork"),gi.getEnforcementToken(c,{forceSync:s}).then(g);return g(p);function g(h){const _=String(performance.now()-m),b=o.includes("chatReq")?"false":"true",y=o.includes("turnstile")?"false":"true",v=o.includes("proofofwork")?"false":"true";return $e.hist(He.DEFAULT,"chat_req_time",[{key:"wasChatReqSync",value:b},{key:"wasTurnstileSync",value:y},{key:"wasProofofworkSync",value:v}],performance.now()-n),wa(Io(),{eventName:"chatgpt_web_completion_integrity_checks",value:o.length===0?"true":"false",metadata:{wasChatReqSync:b,wasTurnstileSync:y,wasProofofworkSync:v,isPrefetchInitialLoad:s?"true":"false",powTime:_}}),{chatReq:c,turnstileToken:f,proofToken:h}}}}}var io=(t=>(t.Success="success",t.Error="error",t.Canceled="canceled",t))(io||{});const Wue=1e3,que=Wue*60,Kue=que*60;function yk(){var s;const t=(s=ft.getItem(Be.ResumeTokenStore))!=null?s:{};return Object.fromEntries(Object.entries(t).filter(([n,o])=>o.expiresAt>Date.now()))}function aL(t){ft.setItem(Be.ResumeTokenStore,t)}function Yue(t,e){const s=yk();s[t]={token:e,expiresAt:Date.now()+Kue},aL(s)}function Que(t){var s;return(s=yk()[t])==null?void 0:s.token}function Jue(t){const e=yk();delete e[t],aL(e)}function Zue(){ft.removeItem(Be.ResumeTokenStore)}const km={set:Yue,get:Que,remove:Jue,clear:Zue};function bk(t){return Ee(t,"988697485")}function Xue(t){return Ee(t,"2939856311")}function fet(t){return Ee(t,"32004461")}function pm(t){return Cf(t)}const rL=Bt(t=>vt(()=>r1(t,Qt.Moonshine)&&r1(t,Qt.Sunshine))),ede=Bt(t=>vt(()=>Xue(t))),tde=Bt(t=>vt(()=>bk(t)&&Sf(t)&&rL(t)===!0&&r1(t,Qt.UkdvthEntrypointVisible)===!0)),sde=Bt(t=>vt(()=>bk(t)&&rL(t)&&r1(t,Qt.UkdvthMemoryEnabled))),Sf=t=>sde(t)===!0;function Cf(t){return Ee(t,"58496621")}const vk=Bt(t=>vt(()=>Sf(t)&&Cf(t))),nde=Bt(()=>Cl(Be.LastOpenedPulseId,()=>null));function met(t){"use forget";const e=F.c(4),s=G();let n,o;e[0]!==s||e[1]!==t?(n=()=>{t&&nde.set(s,t)},o=[t,s],e[0]=s,e[1]=t,e[2]=n,e[3]=o):(n=e[2],o=e[3]),x.useEffect(n,o)}const Hp=t=>t.content_type==="card",iL=t=>t.content_type==="card_stack",Sk=t=>t.flatMap(e=>Hp(e)?[e]:iL(e)?Sk(e.items):[]),pet=t=>t.card_type==="light"?"light":"core";function b2(t){return t.replace("..."," ")}function ode(t,e){var o;const s=Sk(t),n=s.findIndex(a=>a.id===e);return n<0?null:(o=s.slice(n+1).find(a=>a.conversation_id!=null))!=null?o:null}function get(){"use forget";return _c("/pulse/*")!=null}function ade(t){switch(t.type){case"card":return"feed/card/".concat(t.card_id,"/conversation");case"feedback-conversation":return"feed/feedback/conversation"}}function rde(t,e){e.type==="feedback-conversation"&&(e.feedback_card_id&&t.searchParams.set("card_id",e.feedback_card_id),e.task_id&&t.searchParams.set("task_id",e.task_id))}function L1(t){return{url:t,fallback_url:t,id:t}}function lL(t){let e=!1;const s=[],n=[];function o(c){s.length>0?s.shift()(c):n.push(c)}function a(c){e||o({value:c,done:!1})}function i(){e||(e=!0,s.forEach(c=>c({value:void 0,done:!0})),s.length=0)}function l(c){e||(o(Promise.reject(c)),i())}try{t(a,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{n.length>0?c(n.shift()):e?c({value:void 0,done:!0}):s.push(c)})},[Symbol.asyncIterator](){return this}}}function cL(t,e){return Mr(this,null,function*(){let s=null;try{for(var n=ua(t),o,a,i;o=!(a=yield new nn(n.next())).done;o=!1){const l=a.value;if("response"in l)yield l;else if(l.event==="delta_encoding"){const c=String(l.data);if(e==null||e(c),c==="v1")s=new ide;else throw new Error("[delta] unknown delta encoding: ".concat(c))}else if(l.event==="delta"){if(!s)throw new Error("[delta] delta event before delta_encoding");yield{data:s.applyDelta(l.data)}}else yield l}}catch(a){i=[a]}finally{try{o&&(a=n.return)&&(yield new nn(a.call(n)))}finally{if(i)throw i[0]}}})}var uL=(t=>(t.V1="v1",t))(uL||{});class ide{constructor(){X(this,"prevObjByChannel",[]);X(this,"prevDelta",{channel:0,op:"add",path:"",value:void 0})}applyDelta(e){try{const s=this.decodeDelta(e),n=s.channel,o=this.prevObjByChannel[n],a=ude(o,s);return this.prevObjByChannel[n]=a,a}catch(s){Ge.addError("Error applying delta: ".concat(s))}}decodeDelta(e){cde(e);const s=lde(e,this.prevDelta),n=dL(s);return this.prevDelta=n,n}}function lde(t,e){for(const[s,n]of fL)s!=="value"&&!(n in t)&&(t[n]=e[s]);return t}function dL(t){const e=t;for(const[s,n]of fL)n in t&&(e[s]=t[n],delete t[n]);return e.op==="patch"&&(e.value=e.value.map(dL)),e}function cde(t){if(!t||typeof t!="object")throw new Error("Unexpected delta non-object")}const fL=[["channel","c"],["path","p"],["op","o"],["value","v"]];function ude(t,e){return td({__root:t},n=>mL(n,e)).__root}function mL(t,e){var o;const s=mde((o=e.path)!=null?o:"");for(let a=0;a<s.length-1;a++)t[s[a]]===void 0&&(typeof s[a+1]=="number"?t[s[a]]=[]:t[s[a]]={}),t=t[s[a]];const n=s[s.length-1];switch(e.op){case"patch":for(const a of e.value){const i={__root:t[n]};mL(i,a),t[n]=i.__root}break;case"add":Array.isArray(t)?t.splice(n,0,e.value):t[n]=e.value;break;case"remove":Array.isArray(t)?t.splice(n,1):delete t[n];break;case"replace":t[n]=e.value;break;case"append":if(typeof t[n]=="string")t[n]+=e.value;else if(Array.isArray(t[n]))t[n].push(...pde(e.value));else if(YM(t[n])&&YM(e.value))for(const a in e.value)t[n][a]=e.value[a];else t[n]=e.value;break;case"truncate":t[n]&&(typeof t[n]=="string"?t[n]=t[n].substring(0,e.value):Array.isArray(t[n])&&(t[n].length=e.value));break;default:throw new Error("Unknown json delta operation")}}function dde(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}const fde=new RegExp("^(?:0|[1-9]\\d*)$","d");function mde(t){const e=["__root"];if(t==="")return e;t[0]==="/"&&(t=t.substring(1));for(const s of t.split("/"))fde.test(s)?e.push(parseInt(s,10)):e.push(dde(s));return e}function pde(t){return Array.isArray(t)?t:[t]}function YM(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function wy(t){var e,s;return(s=(e=t.headers.get("x-request-id"))!=null?e:t.headers.get("cf-ray"))!=null?s:void 0}function D1(t,{accessToken:e,ctx:s,method:n,headers:o,body:a,signal:i,observer:l}={}){return lL((c,u,d)=>{let f=!1,m=!1,p=null,g=!1,h=!1;const _=(w,k,E)=>{const M={reason:w,source:k,requestUrl:t};if(typeof navigator<"u"&&(M.navigator_online=navigator.onLine),p){M.response_status=p.status;const A=wy(p);A&&(M.response_request_id=A)}const N=TY(E);return Object.entries(N).forEach(([A,I])=>{I!==void 0&&(M[A]=I)}),M},b=(w,k,E)=>{if(g||h||w==="error")return;h=!0;const M=_(w,k,E);B.logValueEventWithStatsig({segmentEventName:"request_stream_no_events",statsigEventName:"chatgpt_request_stream_no_events",data:M})},y=void 0;function v(w,k="manual_error"){var E;if(f)return w;f=!0,y==null||y({reason:"error",source:k,error:w});try{return d(w),(E=l==null?void 0:l.onClose)==null||E.call(l,"error",w),w}finally{w instanceof Zs?(EY(w,"stream"),MY(w)):(Ge.addError(w),B.logValueEventWithStatsig({segmentEventName:"request_stream_error",statsigEventName:"chatgpt_request_stream_error",data:{error:w instanceof Error?w.message:String(w)}}))}}function S(w){var k,E,M;if(!f)if(f=!0,i!=null&&i.aborted){const N=(k=i.reason)!=null?k:new DOMException("Aborted","AbortError");y==null||y({reason:"aborted",source:"abort_signal",error:N}),b("aborted","abort_signal",N),d(N),(E=l==null?void 0:l.onClose)==null||E.call(l,"aborted",N)}else y==null||y({reason:"completed",source:w}),b("completed",w),(M=l==null?void 0:l.onClose)==null||M.call(l,"completed"),u()}const C=e!=null?e:s?eC(s):void 0;NY(t,{method:n,credentials:"include",headers:T(T(T({},C?i1({accessToken:C}):BR()),a?{"Content-Type":"application/json"}:null),o),body:a?JSON.stringify(a):void 0,signal:i,openWhenHidden:!0,async onopen(w){var E,M;p=w;const k=(E=w.headers.get("content-type"))!=null?E:"";if(w.ok&&k.includes("text/event-stream"))c({response:w}),(M=l==null?void 0:l.onOpen)==null||M.call(l,w);else if(k.includes("application/json")){const N=await w.json();throw v(new Zs(t,w.status,N,wy(w),new Error(JSON.stringify(N))),"onopen_error")}else{const A=(await w.text()).substring(0,1e3);throw v(new Zs(t,w.status,{detail:{message:AY,code:"unexpected_content_type",contentType:k,text:A}},wy(w),new Error(A)),"onopen_error")}},onmessage(w){var N;const k=new TextEncoder,E=w.data==="[DONE]";if((N=l==null?void 0:l.onEvent)==null||N.call(l,{byteLength:k.encode(w.data).length,isDoneEvent:E}),w.event==="ping"||!w.data)return;if(E){S("done_event");return}const M=JSON.parse(w.data);if(M.error){const A=new Error(M.error);B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:A.message,isNetworkError:H0(A),isErrorInMessageData:!0,messageData:M,transport:"sse"}}),v(Zs.createWithErrorMessage(t,"server",M.error,void 0,new Error(M.error)),"onmessage_error")}else g=!0,c({event:w.event||void 0,data:M})},onerror(w){const k=w instanceof Error?w:new Error(JSON.stringify(w));throw B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:k.message,isNetworkError:H0(k),isErrorInMessageData:!1,transport:"sse"}}),H0(k)?v(Zs.createWithErrorMessage(t,"client",ll,void 0,k),"onerror"):k.message==="Failed to fetch"?(B.logFailedToFetchError({source:"request_stream"}),v(Zs.createWithErrorMessage(t,"server","An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ".concat(FR),void 0,k),"onerror")):v(k,"onerror")}}).then(()=>S("fetch_resolved"),v)})}const gde=t=>new Promise(e=>setTimeout(e,t));function pL(t,c){return Mr(this,null,function*(){var u=c,{shouldRetry:e=()=>!0,retryConfig:{MIN_RETRY_INTERVAL:s,MAX_RETRY_INTERVAL:n,RETRY_FACTOR:o,MAX_RETRY_COUNT:a},onRetry:i}=u,l=De(u,["shouldRetry","retryConfig","onRetry"]);let d=!1,f=!1,m=l;const p=S=>{const C=S.observer;return U(T({},S),{observer:U(T({},C),{onClose:(w,k)=>{var E;(E=C==null?void 0:C.onClose)==null||E.call(C,w,k),w==="completed"&&(f=!0)}})})};let g=D1(t,p(m)),h=0;for(;!d&&!f;)try{try{for(var _=ua(g),b,y,v;b=!(y=yield new nn(_.next())).done;b=!1){const S=y.value;"response"in S&&(d=!0),yield S}}catch(y){v=[y]}finally{try{b&&(y=_.return)&&(yield new nn(y.call(_)))}finally{if(v)throw v[0]}}f=!0}catch(S){if(f)return;if(d||!e(S)||h>=a)throw S;const C=Math.min(s*o**h,n);if(yield new nn(gde(C)),h++,i){const w=yield new nn(i());$e.count(He.DEFAULT,"chat_requirements.retry_refetch_token"),m=U(T(T({},m),w),{headers:w.headers!==void 0?w.headers:m.headers,body:w.body!==void 0?w.body:m.body})}g=D1(t,p(m))}})}const Go=t=>{if(t.type===it.Starter&&t.category==="onboarding")return"";switch(t.type){case it.Reply:return t.text;case it.Templated:case it.Starter:case it.Autocomplete:case it.Trending:case it.Capabilities:return t.prompt}},gL=t=>{var s;const e=(s=t.data)==null?void 0:s.hazelnut_hint;if(typeof e=="string"){const n=e.trim();return n?[n]:[]}return Array.isArray(e)?e.filter(n=>typeof n=="string").map(n=>n.trim()).filter(n=>n.length>0):[]},hde=t=>t.type===it.Reply,ld=t=>t.type===it.Starter,Ck=t=>t.type===it.Autocomplete,Gi=t=>t.type===it.Trending,Vi=t=>Ck(t)&&!!t.theme,wk=t=>t.type===it.Capabilities,_de=t=>t.type===it.Templated,xde=t=>Gi(t)||wk(t)||Ck(t)&&!Vi(t),Fx=(t,e,s,n,o)=>{var a,i,l,c,u;switch(pt.logEvent("chatgpt_prompt_use_suggestion",xde(t)?"":Go(t),{id:(ld(t)||Vi(t)||Gi(t))&&(a=t.id)!=null?a:"",index:"".concat(e),type:t.type,theme:Gi(t)&&t.theme?t.theme:"",category:(ld(t)||Vi(t)||Gi(t))&&(i=t.category)!=null?i:"",source:(ld(t)||Vi(t)||Gi(t))&&(l=t.source)!=null?l:""}),t.type){case it.Reply:B.logEvent("Use Suggested Reply",{value:Go(t),prompt_type:it.Reply,messageId:n});break;case it.Capabilities:B.logEvent("Use Capabilities Suggestion",{prompt_type:it.Capabilities,categoryId:t.categoryId,client_thread_id:s,messageId:n});break;case it.Starter:B.logEvent(o!=null?o:"Use Starter Prompt",{value:Go(t),prompt_type:it.Starter,title:t.title,body:t.body,id:t.id,category:t.category,client_thread_id:s,messageId:n,index:e,theme:t.theme});break;case it.Autocomplete:{const d=Vi(t);B.logEvent("Use Autocomplete",{value:d?Go(t):"",prompt_type:it.Autocomplete,title:d?t.title:"",body:d?t.body:"",id:d?t.id:"",category:t.category,index:e,messageId:n,client_thread_id:s,theme:(c=t.theme)!=null?c:""});break}case it.Trending:{B.logEvent("Use Trending Prompt",{prompt_type:it.Trending,title:t.title,index:e,messageId:n,client_thread_id:s,theme:(u=t.theme)!=null?u:""});break}}},yde=(t,e)=>{var a,i,l,c;if(t.length===0)return;const n=Se.getCurrentNode(Tt(e)).message.id;pt.logEvent("chatgpt_prompt_show_suggestions","count_".concat(t.length),{type:t[0].type,category:(ld(t[0])||Vi(t[0])||Gi(t[0]))&&(a=t[0].category)!=null?a:"",source:(ld(t[0])||Vi(t[0])||Gi(t[0]))&&(i=t[0].source)!=null?i:""});const o=u=>{var d;for(let f=0;f<u.length;f++){const m=u[f];B.logEventWithStatsig("Show Trending Prompt","chatgpt_prompt_show_suggestion",{type:m.type,id:m.id,index:f,client_thread_id:e,message_id:n,theme:(d=m.theme)!=null?d:""})}};if(t.every(hde))B.logEvent("Show Suggested Replies",{prompt_count:t.length,prompt_type:it.Reply,client_thread_id:e,suggestions:t.map(u=>u.text),message_id:n});else if(t.every(ld)){const{isAdditional:u}=t[0];B.logEvent(u?"More Starter Prompts Shown":"Show Starter Prompts",{prompt_count:t.length,prompt_type:it.Starter,titles:t.map(d=>d.title),bodies:t.map(d=>d.body),ids:t.map(d=>d.id),client_thread_id:e,message_id:n,themes:t.map(d=>{var f;return(f=d.theme)!=null?f:""})}),u&&B.logEvent("Expand More Starter Prompts",{client_thread_id:e,message_id:n}),o(t)}else if(t.every(Ck)){const u=!!t.find(d=>Vi(d));B.logEvent("Show Autocomplete Prompts",{prompt_count:t.length,prompt_type:t[0].type,titles:t.map(d=>u?d.title:""),bodies:t.map(d=>u?d.body:""),ids:t.map(d=>u?d.id:""),category:(l=t[0].category)!=null?l:"",source:(c=t[0].source)!=null?c:"",client_thread_id:e,message_id:n,themes:t.map(d=>{var f;return(f=d.theme)!=null?f:""})})}else t.every(Gi)?(B.logEvent("Show Trending Prompts",{prompt_count:t.length,prompt_type:it.Trending,titles:t.map(u=>u.title),client_thread_id:e,message_id:n}),o(t)):t.every(wk)?B.logEvent("Show Capabilities Suggestions",{prompt_count:t.length,prompt_type:it.Capabilities,category_ids:t.map(u=>u.categoryId),client_thread_id:e,message_id:n}):t.every(_de)?B.logEvent("Show Templated Suggestions",{prompt_count:t.length,prompt_type:it.Templated,titles:t.map(u=>u.title),client_thread_id:e,message_id:n}):Ge.addError("Unhandled suggestion type",{type:t[0].type})},het=t=>{const s=Se.getCurrentNode(Tt(t)).message.id;B.logEvent("Show Expand More Starter Prompts Button",{client_thread_id:t,message_id:s})},_et=t=>{const s=Se.getCurrentNode(Tt(t)).message.id;B.logEvent("Expand More Starter Prompts",{client_thread_id:t,message_id:s})},Ja=Ne({searchPlaceholder:{id:"PromptTextarea.searchPlaceholder",defaultMessage:"Search the web"},internalSearchPlaceholder:{id:"PromptTextarea.internalSearchPlaceholder",defaultMessage:"Ask anything about {workspaceName}..."},thinkPlaceholder:{id:"PromptTextarea.thinkPlaceholder",defaultMessage:"Ask anything"},connectorPlaceholder:{id:"PromptTextarea.connectorPlaceholder",defaultMessage:"Search connected sources"},apiToolPlaceholder:{id:"PromptTextarea.apiToolPlaceholder",defaultMessage:"Use tools"},researchPlaceholder:{id:"PromptTextarea.researchPlaceholder",defaultMessage:"Get a detailed report"},canvasPlaceholder:{id:"PromptTextarea.canvasPlaceholder",defaultMessage:"Write or code"},picturePlaceholder:{id:"PromptTextarea.picturePlaceholder",defaultMessage:"Describe an image"},pictureV2Placeholder:{id:"PromptTextarea.pictureV2Placeholder",defaultMessage:"Describe or edit an image"},tatertotPlaceholder:{id:"PromptTextarea.studyAndLearnPlaceholder",defaultMessage:"Learn something new"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasnt approved this GPT."},pimBlockPlaceholder:{id:"PromptTextarea.pimBlockPlaceholder",defaultMessage:"Potentially Malicious Content Detected"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},placeholderAskAnythingVariant:{id:"PromptTextarea.placeholderAskAnythingVariant",defaultMessage:"Ask anything"},placeholderAsyncSteering:{id:"PromptTextarea.placeholderAsyncSteering",defaultMessage:"Provide more detail"},placeholderAskNameAnythingVariant:{id:"PromptTextarea.placeholderAskNameAnythingVariant",defaultMessage:"Ask {name} anything"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},readOnlyConversationPlaceholder:{id:"PromptTextarea.readOnlyConversationPlaceholder",defaultMessage:"This conversation is read-only."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},imagesAppPlaceholder:{id:"PromptTextarea.imagesAppPlaceholder",defaultMessage:"Describe a new image"},imagesAppEditPlaceholder:{id:"PromptTextarea.imagesAppEditPlaceholder",defaultMessage:"Describe or edit {attachmentCount, plural, one {this image} other {these images}}"},imagesAppLightboxPlaceholder:{id:"PromptTextarea.imagesAppLightboxPlaceholder",defaultMessage:"Describe edits"},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."},n7jupdSystemHintPlaceholder:{id:"3pa1zs",defaultMessage:"Describe a task"},n7jupdActivePlaceholder:{id:"0qUILF",defaultMessage:"Follow up"}}),F1="prompt-textarea";function kk(){var t;(t=document.getElementById(F1))==null||t.focus()}const xet={getAndReset:(t,e)=>{const s=ft.getItem(Be.RestoreMessageAfterOauthRedirect);return ft.removeItem(Be.RestoreMessageAfterOauthRedirect),!s||s.userId!==t||e!==s.serverThreadId||Date.now()>s.expiresAt?null:s},set:(t,e,s)=>{const n={userId:t,serverThreadId:e,inputText:s,expiresAt:Date.now()+6e4};ft.setItem(Be.RestoreMessageAfterOauthRedirect,n)}},La=()=>{"use forget";const t=F.c(16),e=jo(),s=Ko.useStore();let n;t[0]!==s?(n=g=>s.getPersistedSystemHintTrigger(g),t[0]=s,t[1]=n):n=t[1];const o=n;let a;t[2]!==e?(a=g=>e(null,{ifPrevSystemHint:g}),t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]!==e?(l=()=>e(null),t[4]=e,t[5]=l):l=t[5];const c=l;let u;t[6]!==e?(u=(g,h,_,b)=>{h?e(g,{analyticsMetadata:_,triggerSource:b}):e(null,{ifPrevSystemHint:g,analyticsMetadata:_})},t[6]=e,t[7]=u):u=t[7];const d=u;let f;t[8]!==e?(f=(g,h)=>{e(g,{analyticsMetadata:h})},t[8]=e,t[9]=f):f=t[9];const m=f;let p;return t[10]!==c||t[11]!==i||t[12]!==o||t[13]!==d||t[14]!==m?(p={getSystemHintModeTrigger:o,clearSystemHintModeTrigger:i,setThreadSystemHintMode:d,clearAllSystemHintModeTriggers:c,updateSystemHint:m},t[10]=c,t[11]=i,t[12]=o,t[13]=d,t[14]=m,t[15]=p):p=t[15],p},yet=({promptDisabledReason:t,hasExceededFileUploadLimit:e,hasPendingFiles:s,hasTextContent:n,isTextContentTooLong:o,hasAsyncTaskPending:a,noSourceSelectedDr:i,isDeepResearchTaskStreaming:l,isThreadHardBlocked:c})=>t||(c?"rate_limit_hard_block":e?"exceeds_remaining_file_uploads":s?"file_upload_pending":a?l?void 0:"async_task_pending":n?o?"text_content_too_long":i?"no_source_selected_dr":void 0:"empty_text_content");function bet(t,e){const s=Math.ceil(e/4);return typeof(t==null?void 0:t.maxTokens)=="number"&&s>t.maxTokens}function vet(t,e){return t?e===void 0?!0:e.includes(t):!1}const bde=t=>{switch(t){case"readOnlyConversation":return{placeholder:Ja.readOnlyConversationPlaceholder,isLastingDisabledStyle:!0};case"pimBlock":return{placeholder:Ja.pimBlockPlaceholder,isLastingDisabledStyle:!0};case"workspaceDisallowsGizmo":return{placeholder:Ja.disallowedByWorkspacePlaceholder,isLastingDisabledStyle:!0};case"noModelsAvailable":return{placeholder:Ja.noModelsAvailablePlaceholder,isLastingDisabledStyle:!0};case"requiresPluginsToBeInstalled":return{placeholder:Ja.requiresPluginsToBeInstalled,isLastingDisabledStyle:!0};case"loadingPlugins":return{placeholder:Ja.loading,isLastingDisabledStyle:!0};case"noTestGizmoId":return{placeholder:Ja.noTestGizmoId,isLastingDisabledStyle:!0}}return null},vde="OAI-Echo-Logs",wu={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},hL=[];function ku(t){return()=>{hL.push({type:t,ts:Math.round(performance.now())})}}const Sde={focusin:ku(wu.FOCUS_IN),focusout:ku(wu.FOCUS_OUT),copy:ku(wu.COPY),paste:ku(wu.PASTE),touchstart:ku(wu.TOUCH_START),touchend:ku(wu.TOUCH_END)};function Cde(t){const e=t!=null?t:document.getElementById(F1);for(const[s,n]of Object.entries(Sde))e==null||e.removeEventListener(s,n),e==null||e.addEventListener(s,n)}function Bx(){return{[vde]:hL.slice(0,10).map(t=>"".concat(t.type,",").concat(t.ts)).join(",")}}var wde=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},oc="1.6.0",QM=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function kde(t){var e=new Set([t]),s=new Set,n=t.match(QM);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(c){return c===t};function a(l){return s.add(l),!1}function i(l){return e.add(l),!0}return function(c){if(e.has(c))return!0;if(s.has(c))return!1;var u=c.match(QM);if(!u)return a(c);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||o.major!==d.major?a(c):o.major===0?o.minor===d.minor&&o.patch<=d.patch?i(c):a(c):o.minor<=d.minor?i(c):a(c)}}var Tde=kde(oc),Ede=oc.split(".")[0],Qm=Symbol.for("opentelemetry.js.api."+Ede),Jm=wde;function Gp(t,e,s,n){var o;n===void 0&&(n=!1);var a=Jm[Qm]=(o=Jm[Qm])!==null&&o!==void 0?o:{version:oc};if(!n&&a[t]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return s.error(i.stack||i.message),!1}if(a.version!==oc){var i=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+oc);return s.error(i.stack||i.message),!1}return a[t]=e,s.debug("@opentelemetry/api: Registered a global for "+t+" v"+oc+"."),!0}function Tc(t){var e,s,n=(e=Jm[Qm])===null||e===void 0?void 0:e.version;if(!(!n||!Tde(n)))return(s=Jm[Qm])===null||s===void 0?void 0:s[t]}function Vp(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+oc+".");var s=Jm[Qm];s&&delete s[t]}var Mde=function(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return a},Nde=function(t,e,s){if(s||arguments.length===2)for(var n=0,o=e.length,a;n<o;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},Ade=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return $f("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return $f("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return $f("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return $f("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return $f("verbose",this._namespace,e)},t})();function $f(t,e,s){var n=Tc("diag");if(n)return s.unshift(e),n[t].apply(n,Nde([],Mde(s),!1))}var bo;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(bo||(bo={}));function Ide(t,e){t<bo.NONE?t=bo.NONE:t>bo.ALL&&(t=bo.ALL),e=e||{};function s(n,o){var a=e[n];return typeof a=="function"&&t>=o?a.bind(e):function(){}}return{error:s("error",bo.ERROR),warn:s("warn",bo.WARN),info:s("info",bo.INFO),debug:s("debug",bo.DEBUG),verbose:s("verbose",bo.VERBOSE)}}var jde=function(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return a},Pde=function(t,e,s){if(s||arguments.length===2)for(var n=0,o=e.length,a;n<o;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},Rde="diag",_r=(function(){function t(){function e(o){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var l=Tc("diag");if(l)return l[o].apply(l,Pde([],jde(a),!1))}}var s=this,n=function(o,a){var i,l,c;if(a===void 0&&(a={logLevel:bo.INFO}),o===s){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return s.error((i=u.stack)!==null&&i!==void 0?i:u.message),!1}typeof a=="number"&&(a={logLevel:a});var d=Tc("diag"),f=Ide((l=a.logLevel)!==null&&l!==void 0?l:bo.INFO,o);if(d&&!a.suppressOverrideMessage){var m=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return Gp("diag",f,s,!0)};s.setLogger=n,s.disable=function(){Vp(Rde,s)},s.createComponentLogger=function(o){return new Ade(o)},s.verbose=e("verbose"),s.debug=e("debug"),s.info=e("info"),s.warn=e("warn"),s.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})(),Ode=function(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return a},Lde=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dde=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var s=this._entries.get(e);if(s)return Object.assign({},s)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var s=Ode(e,2),n=s[0],o=s[1];return[n,o]})},t.prototype.setEntry=function(e,s){var n=new t(this._entries);return n._entries.set(e,s),n},t.prototype.removeEntry=function(e){var s=new t(this._entries);return s._entries.delete(e),s},t.prototype.removeEntries=function(){for(var e,s,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var a=new t(this._entries);try{for(var i=Lde(n),l=i.next();!l.done;l=i.next()){var c=l.value;a._entries.delete(c)}}catch(u){e={error:u}}finally{try{l&&!l.done&&(s=i.return)&&s.call(i)}finally{if(e)throw e.error}}return a},t.prototype.clear=function(){return new t},t})(),Fde=Symbol("BaggageEntryMetadata"),Bde=_r.instance();function Ude(t){return t===void 0&&(t={}),new Dde(new Map(Object.entries(t)))}function Cet(t){return typeof t!="string"&&(Bde.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:Fde,toString:function(){return t}}}function _L(t){return Symbol.for(t)}var $de=(function(){function t(e){var s=this;s._currentContext=e?new Map(e):new Map,s.getValue=function(n){return s._currentContext.get(n)},s.setValue=function(n,o){var a=new t(s._currentContext);return a._currentContext.set(n,o),a},s.deleteValue=function(n){var o=new t(s._currentContext);return o._currentContext.delete(n),o}}return t})(),Hde=new $de,wf=(function(){var t=function(e,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(e,s);function n(){this.constructor=e}e.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}})(),Gde=(function(){function t(){}return t.prototype.createHistogram=function(e,s){return Zde},t.prototype.createCounter=function(e,s){return Jde},t.prototype.createUpDownCounter=function(e,s){return Xde},t.prototype.createObservableGauge=function(e,s){return tfe},t.prototype.createObservableCounter=function(e,s){return efe},t.prototype.createObservableUpDownCounter=function(e,s){return sfe},t.prototype.addBatchObservableCallback=function(e,s){},t.prototype.removeBatchObservableCallback=function(e){},t})(),Tk=(function(){function t(){}return t})(),Vde=(function(t){wf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(s,n){},e})(Tk),zde=(function(t){wf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(s,n){},e})(Tk),Wde=(function(t){wf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(s,n){},e})(Tk),Ek=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),qde=(function(t){wf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Ek),Kde=(function(t){wf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Ek),Yde=(function(t){wf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Ek),Qde=new Gde,Jde=new Vde,Zde=new Wde,Xde=new zde,efe=new qde,tfe=new Kde,sfe=new Yde,nfe={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},ofe={set:function(t,e,s){t!=null&&(t[e]=s)}},afe=function(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return a},rfe=function(t,e,s){if(s||arguments.length===2)for(var n=0,o=e.length,a;n<o;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},ife=(function(){function t(){}return t.prototype.active=function(){return Hde},t.prototype.with=function(e,s,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return s.call.apply(s,rfe([n],afe(o),!1))},t.prototype.bind=function(e,s){return s},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})(),lfe=function(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return a},cfe=function(t,e,s){if(s||arguments.length===2)for(var n=0,o=e.length,a;n<o;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},ky="context",ufe=new ife,Ux=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Gp(ky,e,_r.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,s,n){for(var o,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(o=this._getContextManager()).with.apply(o,cfe([e,s,n],lfe(a),!1))},t.prototype.bind=function(e,s){return this._getContextManager().bind(e,s)},t.prototype._getContextManager=function(){return Tc(ky)||ufe},t.prototype.disable=function(){this._getContextManager().disable(),Vp(ky,_r.instance())},t})(),v2;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(v2||(v2={}));var xL="0000000000000000",yL="00000000000000000000000000000000",dfe={traceId:yL,spanId:xL,traceFlags:v2.NONE},Tm=(function(){function t(e){e===void 0&&(e=dfe),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,s){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,s){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,s){},t})(),Mk=_L("OpenTelemetry Context Key SPAN");function Nk(t){return t.getValue(Mk)||void 0}function ffe(){return Nk(Ux.getInstance().active())}function Ak(t,e){return t.setValue(Mk,e)}function mfe(t){return t.deleteValue(Mk)}function pfe(t,e){return Ak(t,new Tm(e))}function bL(t){var e;return(e=Nk(t))===null||e===void 0?void 0:e.spanContext()}var gfe=/^([0-9a-f]{32})$/i,hfe=/^[0-9a-f]{16}$/i;function _fe(t){return gfe.test(t)&&t!==yL}function xfe(t){return hfe.test(t)&&t!==xL}function vL(t){return _fe(t.traceId)&&xfe(t.spanId)}function yfe(t){return new Tm(t)}var Ty=Ux.getInstance(),SL=(function(){function t(){}return t.prototype.startSpan=function(e,s,n){n===void 0&&(n=Ty.active());var o=!!(s!=null&&s.root);if(o)return new Tm;var a=n&&bL(n);return bfe(a)&&vL(a)?new Tm(a):new Tm},t.prototype.startActiveSpan=function(e,s,n,o){var a,i,l;if(!(arguments.length<2)){arguments.length===2?l=s:arguments.length===3?(a=s,l=n):(a=s,i=n,l=o);var c=i!=null?i:Ty.active(),u=this.startSpan(e,a,c),d=Ak(c,u);return Ty.with(d,l,void 0,u)}},t})();function bfe(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var vfe=new SL,Sfe=(function(){function t(e,s,n,o){this._provider=e,this.name=s,this.version=n,this.options=o}return t.prototype.startSpan=function(e,s,n){return this._getTracer().startSpan(e,s,n)},t.prototype.startActiveSpan=function(e,s,n,o){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):vfe},t})(),Cfe=(function(){function t(){}return t.prototype.getTracer=function(e,s,n){return new SL},t})(),wfe=new Cfe,JM=(function(){function t(){}return t.prototype.getTracer=function(e,s,n){var o;return(o=this.getDelegateTracer(e,s,n))!==null&&o!==void 0?o:new Sfe(this,e,s,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:wfe},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,s,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,s,n)},t})(),ZM;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(ZM||(ZM={}));var XM;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(XM||(XM={}));var Em;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Em||(Em={}));var wet=Ux.getInstance(),ket=_r.instance(),kfe=(function(){function t(){}return t.prototype.getMeter=function(e,s,n){return Qde},t})(),Tfe=new kfe,Ey="metrics",Efe=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Gp(Ey,e,_r.instance())},t.prototype.getMeterProvider=function(){return Tc(Ey)||Tfe},t.prototype.getMeter=function(e,s,n){return this.getMeterProvider().getMeter(e,s,n)},t.prototype.disable=function(){Vp(Ey,_r.instance())},t})(),Tet=Efe.getInstance(),Mfe=(function(){function t(){}return t.prototype.inject=function(e,s){},t.prototype.extract=function(e,s){return e},t.prototype.fields=function(){return[]},t})(),Ik=_L("OpenTelemetry Baggage Key");function CL(t){return t.getValue(Ik)||void 0}function Nfe(){return CL(Ux.getInstance().active())}function Afe(t,e){return t.setValue(Ik,e)}function Ife(t){return t.deleteValue(Ik)}var My="propagation",jfe=new Mfe,Pfe=(function(){function t(){this.createBaggage=Ude,this.getBaggage=CL,this.getActiveBaggage=Nfe,this.setBaggage=Afe,this.deleteBaggage=Ife}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Gp(My,e,_r.instance())},t.prototype.inject=function(e,s,n){return n===void 0&&(n=ofe),this._getGlobalPropagator().inject(e,s,n)},t.prototype.extract=function(e,s,n){return n===void 0&&(n=nfe),this._getGlobalPropagator().extract(e,s,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Vp(My,_r.instance())},t.prototype._getGlobalPropagator=function(){return Tc(My)||jfe},t})(),Eet=Pfe.getInstance(),Ny="trace",Rfe=(function(){function t(){this._proxyTracerProvider=new JM,this.wrapSpanContext=yfe,this.isSpanContextValid=vL,this.deleteSpan=mfe,this.getSpan=Nk,this.getActiveSpan=ffe,this.getSpanContext=bL,this.setSpan=Ak,this.setSpanContext=pfe}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var s=Gp(Ny,this._proxyTracerProvider,_r.instance());return s&&this._proxyTracerProvider.setDelegate(e),s},t.prototype.getTracerProvider=function(){return Tc(Ny)||this._proxyTracerProvider},t.prototype.getTracer=function(e,s){return this.getTracerProvider().getTracer(e,s)},t.prototype.disable=function(){Vp(Ny,_r.instance()),this._proxyTracerProvider=new JM},t})(),wL=Rfe.getInstance();function Ofe(t,e,s,n,o,a){const i=Ffe(t,e,s,o,a);return kL(s,n,i)}function Lfe(t,e,s,n,o,a){const{conversationId:i,resumeToken:l,model:c}=e;let u=AL({ctx:t,conversationId:i,resumeToken:l,model:c,turnTracker:s,offset:0,signal:o!=null?o:null});u=NL(u,{ctx:t,model:c,turnTracker:s,signal:o!=null?o:null}),u=IL(u,{turnTracker:s,prepareState:null,signal:o!=null?o:null,f_completion:!0});const m=cL(u,p=>{s.stream_encoding=p});return kL(s,n,TL(m))}const Dfe=1e3*30,Hf=wL.getTracer("completion");function Ay(t,e){$e.count(He.DEFAULT,t,[{key:"prepare_sent",value:e&&e!=="none"?"true":"false"},{key:"prepare_succeeded",value:e==="success"?"true":"false"},{key:"prepare_failed",value:e==="failure"?"true":"false"}])}function kL(t,e,s){return Mr(this,null,function*(){var h;let n=!1,o=!1,a=!1,i=!1,l,c,u,d,f;Hf.startActiveSpan("completion.response",S=>{l=Hf.startSpan("completion.first_response"),c=Hf.startSpan("completion.first_token_including_tool_calls"),u=Hf.startSpan("completion.first_token_including_visible_content"),d=Hf.startSpan("completion.first_token"),f=S});const m=Date.now();let p=!1,g=setTimeout(()=>{B.logEvent("SSE Response Took Too Long to Come Back",{}),t.logCompletion({type:io.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}}),p=!0},Dfe);try{e==null||e.logTimingOnce("prompt_submitted");try{for(var _=ua(s),b,y,v;b=!(y=yield new nn(_.next())).done;b=!1){const S=y.value;if(yield S,S.type==="message"&&S.message.id){const C={id:S.message.id,status:S.message.status,role:S.message.author.role,contentType:S.message.content.content_type};t.messages[S.message.id]=C}S.type!=="connected"&&g&&(clearTimeout(g),g=null),S.type!=="connected"&&p&&(p=!1,t.logger.info("Late message received after ".concat(Date.now()-m,"ms"),t.createLogPayload()),$e.count(He.DEFAULT,"conversation.stream.late_message_received",[{key:"trigger",value:(h=t.trigger)!=null?h:"null"}])),S.type==="message"&&(t.onMessageUpdate(S.message),n||(n=!0,l==null||l.end(),e==null||e.logTimingOnce("first_response")),!o&&S.message.author.role===ot.Assistant&&(o=!0,c==null||c.end(),e==null||e.logTimingOnce("first_assistant_token")),!a&&S.message.author.role===ot.Assistant&&SC(S.message)&&(a=!0,u==null||u.end(),e==null||e.logTimingOnce("first_visible_content_token")),!i&&S.message.author.role===ot.Assistant&&IY(S.message)&&(i=!0,d==null||d.end(),e==null||e.logTimingOnce("first_message_token"))),S.type==="perf_stats"&&t.addServerPerfStats(S),S.type==="server_ste_metadata"&&t.addServerSteMetadata(S),S.type==="message_marker"&&t.onMessageMarker(S),S.type==="done"&&t.onStreamClose()}}catch(y){v=[y]}finally{try{b&&(y=_.return)&&(yield new nn(y.call(_)))}finally{if(v)throw v[0]}}}catch(S){throw g&&(clearTimeout(g),g=null),S}finally{f==null||f.end()}})}function Ffe(t,e,s,n,o){return Mr(this,null,function*(){var w;const{conduitToken:a,prepareState:i,model:l,f_completion:c,f_search:u}=e,d=ui(3010482349,"".concat(l,"-AAAA"))||ui(3240390095,"".concat(l,"-AAAA")),f=ut()?d?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let m="".concat(f,"/conversation");c&&(m="".concat(f,"/f/conversation")),e.pulseCompletionParams&&(m="".concat(f,"/").concat(ade(e.pulseCompletionParams)));const p=zfe(m);if(e.pulseCompletionParams&&rde(p,e.pulseCompletionParams),Ee(t,"212625335")&&p.searchParams.set("debug","true"),s.onSentUserMessage(),o){const k=Tt(o),E=(w=k==null?void 0:k.lastPrepareParentMessageId)!=null?w:null;if(E!=null){if(e.f_completion&&E!==e.parentMessageId){const M=Se.getBranch(k,e.parentMessageId).length;Ge.addAction("fast_conversation.parent_message_id_mismatch",{client_thread_id:String(o),model:l,prepare_parent_message_id:E,request_parent_message_id:e.parentMessageId,completion_type:String(e.completionType),has_conduit_token:e.conduitToken!=null,branch_length:M})}nt(o,M=>{M.lastPrepareParentMessageId=null})}}const g=bs()?yield new nn(xk()):void 0,h=()=>T(T(T({},Bx()),hk(e.chatReq,e.turnstileToken,e.proofToken,null)),a?{"x-conduit-token":a}:{}),_=()=>EL(e,g),b=async()=>{const k=await oL(t,e.completionMetadata);if(e.chatReq=k.chatReq,e.turnstileToken=k.turnstileToken,e.proofToken=k.proofToken,k.chatReq.force_login)throw new Error("force_login during retry");return{headers:h(),body:_()}};let y=pL(p.toString(),{ctx:t,method:"POST",headers:h(),body:_(),signal:n,observer:{onEvent:k=>{s.onStreamEvent(k.byteLength,k.isDoneEvent)}},shouldRetry:k=>(Zm(k)||k instanceof Zs&&jk(k.status))&&Xe(t,"603105008").get("retry_stream_requests",!1),retryConfig:Pk(t),onRetry:b});y=NL(y,{ctx:t,model:l,turnTracker:s,signal:n!=null?n:null}),y=Hfe(y,{turnTracker:s}),y=IL(y,{turnTracker:s,prepareState:i,signal:n!=null?n:null,f_completion:c!=null?c:null}),c&&o&&nt(o,k=>{k.stopConduitToken=a!=null?a:null,k.prepareState=null,k.lastPrepareTimestamp=null});const C=cL(y,k=>{s.stream_encoding=k});yield*B0(TL(C,{onPrematureTermination:()=>{s.onPrematureStreamTermination()}}))})}const Bfe=t=>{let e=null;const s=new TextEncoder,n=jY(()=>{},()=>{},i=>{i.data!==""&&(e=i)}),a=t.replace(/\r\n/g,"\n").split("\n");for(const i of a){const l=i.indexOf(":");n(s.encode(i),l)}return a[a.length-1]!==""&&n(s.encode(""),-1),e};function Ufe(t){return lL((e,s,n)=>{const o=UR(jt(),t);o.subscribe();const a=o.onMessage(i=>{var l,c;if(i.type==="conversation-turn-stream")if(i.payload.type==="stream-item"){const u=Bfe(i.payload.encoded_item);if(!(u!=null&&u.data)||u.data==="[DONE]")return;const f=JSON.parse(u==null?void 0:u.data);if(f.error){const m=new Error(f.error);B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:m.message,isNetworkError:Zm(m),isErrorInMessageData:!0,messageData:f,transport:"ws"}}),n(Zs.createWithErrorMessage((l=$R(jt()).ws.url)!=null?l:"ws","server",f.error,void 0,m));return}e({event:(c=u.event)!=null?c:void 0,data:f})}else i.payload.type==="done"&&(s(),a(),o.unsubscribe())})})}const $fe=t=>{if(!t||typeof t!="object")return!1;const e=t;return e.type==="websocket_handoff"&&typeof e.topic_id=="string"};function Hfe(t,e){return zue(t,s=>"data"in s&&$fe(s.data)?(e.turnTracker.stream_protocol="ws",Ufe(s.data.topic_id)):null)}function TL(s){return Mr(this,arguments,function*(t,e={}){var o,a,i,l,m;let n=!1;try{for(var c=ua(t),u,d,f;u=!(d=yield new nn(c.next())).done;u=!1){const p=d.value;if("response"in p){const g=p.response,h=(a=(o=g==null?void 0:g.headers)==null?void 0:o.get("Cf-Ray"))!=null?a:null,_=(l=(i=g==null?void 0:g.headers)==null?void 0:i.get("X-Conduit-Token"))!=null?l:null;yield{type:"connected",serverRequestId:h,interruptConversationToken:_}}else{const g=ML(p.data);g&&(g.type==="done"&&(n=!0),yield g)}}}catch(d){f=[d]}finally{try{u&&(d=c.return)&&(yield new nn(d.call(c)))}finally{if(f)throw f[0]}}n||((m=e.onPrematureTermination)==null||m.call(e),yield{type:"done"})})}function EL(t,e){var n,o,a,i,l,c,u,d;const s="threadId"in t?t.threadId:void 0;return U(T({action:t.completionType,messages:t.messages.length>0?t.messages.map(S2):void 0,continue_from_shared_conversation_id:"continueFromSharedConversationId"in t&&s==null?t.continueFromSharedConversationId:void 0,branching_from_conversation_id:"branchingFromConversationId"in t&&s==null?t.branchingFromConversationId:void 0,branching_from_message_id:"branchingFromMessageId"in t&&s==null?t.branchingFromMessageId:void 0,continue_from_shared_post_id:"continueFromSharedPostId"in t?t.continueFromSharedPostId:void 0,fork_from_shared_post:"forkFromSharedPost"in t?t.forkFromSharedPost:void 0},"sharedProjectConversationOwnerId"in t&&"sharedProjectConversationId"in t&&t.sharedProjectConversationId&&t.sharedProjectConversationOwnerId?{continue_from_shared_project_conversation_id:t.sharedProjectConversationId,shared_project_conversation_owner_id:t.sharedProjectConversationOwnerId}:{conversation_id:s}),{parent_message_id:t.parentMessageId,model:t.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:(n=t.completionMetadata)==null?void 0:n.variantPurpose,suggestions:(o=t.completionMetadata)!=null&&o.suggestions?t.completionMetadata.suggestions.map(f=>Go(f)):void 0,chosen_suggestion:(a=t.completionMetadata)!=null&&a.suggestion?{type:t.completionMetadata.suggestion.type,index:t.completionMetadata.suggestionIndex,source:t.completionMetadata.suggestion.type===it.Autocomplete?t.completionMetadata.suggestion.source:void 0,user_input:t.completionMetadata.suggestion.type===it.Autocomplete?t.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:ro(t.historyDisabled),conversation_mode:Ya((i=t.completionMetadata)==null?void 0:i.conversationMode),force_paragen:ro(t.forceParagen),force_paragen_model_slug:t.forceParagenModel,force_indepth_feedback:ro(t.forceIndepthFeedback),force_rate_limit:ro(t.forceRateLimit),reset_rate_limits:ro(t.resetRateLimits),record_rendering:ro(t.recordRendering),record_transformed_convo_json:ro(t.recordTransformedConvoJson),disable_system_content_toggling:ro(t.disableSystemContentToggling),enable_message_followups:t.enableMessageFollowups,source:(l=t.completionMetadata)==null?void 0:l.source,system_hints:(c=t.completionMetadata)==null?void 0:c.systemHints,prefetch_ids:(u=t.completionMetadata)==null?void 0:u.prefetchIds,attachment_mime_types:bn(t.attachmentMimeTypes),partial_query:t.partialQuery?S2(t.partialQuery):void 0,supports_buffering:!0,supported_encodings:[uL.V1],conversation_origin:bn(t.conversationOrigin),force_use_search:bn(t.forceUseSearch),force_disable_features:bn(t.forceDisableFeatures),client_reported_search_source:(d=t.completionMetadata)==null?void 0:d.searchSource,client_contextual_info:t.contextualInfo,paragen_stream_type_override:bn(t.paragenStreamType==="none"?null:t.paragenStreamType),paragen_cot_summary_display_override:bn(t.paragenCotSummaryDisplay==="none"?null:t.paragenCotSummaryDisplay),is_onboarding_conversation:ro(t.isOnboardingConversation),is_visible:bn(t.isVisible),override_infer_treatment:bn(t.overrideInferTreatment),model_slug_stats_override:bn(t.modelSlugStatsOverride),is_anon_mode:ro(t.isAnonModeEnabled),is_reasoning_skipped:ro(t.isReasoningSkipped),async_task_id:bn(t.asyncTaskId),force_parallel_switch:bn(t.forceParallelSwitch),thinking_effort:bn(t.thinkingEffort),juice_score:bn(t.juiceScore),multimodal_juice_score:bn(t.multimodalJuiceScore),show_all_answers:ro(t.showAllAnswers),pre_retrieval_settings:bn(t.preRetrievalSettings),nc_override:bn(t.ncOverride),cpr_override:bn(t.cprOverride),cm_override_slug:bn(t.cmOverride),local_function_names:bs()&&e?[...e]:void 0,r2xg7vml:ro(t.r2xg7vml),zafn3kp8:ro(t.zafn3kp8)})}function S2(t){let e=t;return t.clientMetadata&&(e=T({},t),delete e.clientMetadata),e}function ro(t){if(t===!0)return t}function bn(t){if(t!=null)return t}function ML(t){if("type"in t){switch(t.type){case"gizmo_inline_review":return{type:"gizmo_inline_review",gizmoId:t.gizmo_id};case"title_generation":return{type:"title_generation",title:t.title,conversation_id:t.conversation_id};case"moderation":return{type:"moderation",conversationId:t.conversation_id,messageId:t.message_id,isCompletion:t.is_completion,flagged:t.moderation_response.flagged,blocked:t.moderation_response.blocked,shouldDisableConversation:!!t.moderation_response.should_disable_conversation,disclaimers:t.moderation_response.disclaimers,metadata:t.moderation_response.metadata};case"url_moderation":return{type:"url_moderation",conversationId:t.conversation_id,messageId:t.message_id,url:t.url_moderation_result.full_url,isSafe:t.url_moderation_result.is_safe};case"num_variants_in_stream":return{type:"num_variants_in_stream",num_variants_in_stream:t.num_variants_in_stream,display_treatment:t.display_treatment};case"input_message":return{type:"input_message",message:t.input_message,conversationId:t.conversation_id};case"display_crisis_helpline_message":return{type:"display_crisis_helpline_message",text:t.text,links:t.links,conversationId:t.conversation_id,messageId:t.message_id};case"perf_stats":case"conversation_detail_metadata":case"beacon_ui_response":case"resume_conversation_token":case"conversation_async_status":case"server_ste_metadata":case"message_marker":case"survey_campaign_effect":case"display_crisis_helpline_modal":return t;case"message_stream_complete":return{type:"done"}}return}if(t.message)return{type:"message",message:t.message,conversationId:t.conversation_id}}async function Gfe(t,e,s=[],n,o){var M,N,A,I,P,R,O;const a=Io();if(!Ox(a,!0)||!Ole(a)||Xe(a,"1925940714").get("disable-convo-2",!1))return;const l=Rt(t),c=Tt(t);if(Et(a,t),c!=null&&c.prepareRequestBlocked)return;const u=3e3;if(o.delayAfterCompletion&&(c!=null&&c.lastCompletionFinishedTimestamp)){const L=performance.now()-c.lastCompletionFinishedTimestamp,D=u-L;D>0&&await new Promise(H=>setTimeout(H,D))}const d=(M=c==null?void 0:c.conversationOrigin)!=null?M:null;let f;if(o.isRegen){const L=Se.getParentPromptNode(c);f=(N=L==null?void 0:L.id)!=null?N:""}else f=Se.getCurrentNode(c).message.id;const m=of(),p=xt(()=>af(a)),g=xt(()=>CC(a)),h=xt(()=>U_(a)),_=(A=c==null?void 0:c.conduitToken)!=null?A:null,b=(I=c==null?void 0:c.prepareState)!=null?I:"none",y={threadId:l,prepareState:b,conduitToken:_,continueFromSharedPostId:c==null?void 0:c.continuingFromSharedPostId,forkFromSharedPost:!!(c!=null&&c.continuingFromSharedPostId),continueFromSharedConversationId:c==null?void 0:c.continuingFromSharedConversationId,branchingFromMessageId:c==null?void 0:c.branchingFromMessageId,branchingFromConversationId:c==null?void 0:c.branchingFromConversationId,sharedProjectConversationId:c==null?void 0:c.continuingFromSharedProjectConversationId,sharedProjectConversationOwnerId:(P=c==null?void 0:c.sharedProjectConversationOwner)==null?void 0:P.id,isOnboardingConversation:o.isOnboardingConversation,conversationOrigin:d,model:e,completionType:Fi.Next,completionMetadata:{systemHints:s,conversationMode:(R=c==null?void 0:c.mode)!=null?R:{kind:Pt.PrimaryAssistant}},partialQuery:o.partialQuery,messages:[],attachmentMimeTypes:o.attachmentMimeTypes,parentMessageId:f,thinkingEffort:o.thinkingEffort,recordRendering:m.recordRendering,recordTransformedConvoJson:m.recordTransformedConvoJson,historyDisabled:p,asyncTaskId:(O=c==null?void 0:c.steeringAsyncTaskId)!=null?O:void 0,contextualInfo:G8(a),r2xg7vml:g!=null?g:!1,zafn3kp8:h!=null?h:!1},v=bs()?await xk():void 0,S=EL(y,v),C={"x-conduit-token":_!=null?_:"no-token"},w=ui(3010482349,"".concat(e,"-AAAA"))||ui(3240390095,"".concat(e,"-AAAA"));if(w){nt(t,L=>{L.conduitToken=null,L.prepareState=null});return}const k=ut()?w?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let E="".concat(k,"/f/conversation/prepare");try{nt(t,H=>{H.prepareState="sent",H.lastPrepareTimestamp=performance.now(),H.lastPrepareParentMessageId=f});const L=await Sm.post(E,S,{additionalHeaders:C,authOption:is.SendIfAvailable}),{conduit_token:D}=L;n(D)}catch(L){$e.count(He.DEFAULT,"conduit_f_conversation_prepare_api_error"),Ge.addError(L)}}const Vfe=t=>new Promise(e=>setTimeout(e,t));function NL(t,e){return Mr(this,null,function*(){const{MIN_RETRY_INTERVAL:s,MAX_RETRY_INTERVAL:n,RETRY_FACTOR:o,MAX_RETRY_COUNT:a}=Pk(e.ctx),{signal:i,turnTracker:l}=e;let c=!1;const u={onClose:(y,v)=>{y==="completed"&&(c=!0)}};let d,f,m=t,p=0;for(;m!=null;)try{try{for(var g=ua(m),h,_,b;h=!(_=yield new nn(g.next())).done;h=!1){const y=_.value;const v="response"in y;!v&&y.data!=null&&typeof y.data=="object"&&"type"in y.data&&y.data.type==="resume_conversation_token"&&"token"in y.data&&"conversation_id"in y.data?(f=String(y.data.token),d=String(y.data.conversation_id),km.set(d,f)):yield y,l.onResumeSuccessful(p),v||p++}}catch(_){b=[_]}finally{try{h&&(_=g.return)&&(yield new nn(_.call(g)))}finally{if(b)throw b[0]}}d!=null&&km.remove(d),m=null,c=!0}catch(y){if(c)return;const v=Zm(y);l.onStreamNetworkError(p,y,v);const S=y instanceof Zs&&jk(y.status);if(l.resume.currentAttemptCount<a&&!(i!=null&&i.aborted)&&f!=null&&d!=null&&(Zm(y)||S)&&Xe(e.ctx,"2489999880").get("is_resume_enabled",!1)){l.onResumeAttempted(p);const w=Math.min(s*o**l.resume.currentAttemptCount,n)*(.5+Math.random()*.5);yield new nn(Vfe(w)),m=AL(U(T({},e),{observer:u,resumeToken:f,conversationId:d,offset:p}))}else{const C=y instanceof Zs&&y.status===404;throw(l.resume.currentAttemptCount>=a||C&&l.resume.currentAttemptCount>0)&&l.onResumeFailed(p,C,v),m=null,y instanceof Zs&&y.status===404&&l.resume.currentAttemptCount>0?(d!=null&&km.remove(d),Zs.createWithErrorMessage(y.url,"client",ll,void 0,y)):y}}})}function Zm(t){return t instanceof Error&&t.message===ll||typeof t=="string"&&t===ll}function jk(t){return t===408||t===409||t===425||t===429||t===502||t===504}function AL({ctx:t,conversationId:e,resumeToken:s,model:n,turnTracker:o,offset:a,signal:i,observer:l={}}){const c=ui(3010482349,"".concat(n,"-AAAA"))||ui(3240390095,"".concat(n,"-AAAA")),u=ut()?c?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon",d={"x-conduit-token":s!=null?s:"no-token"},f="".concat(u,"/f/conversation/resume"),m=t?eC(t):void 0,p={conversation_id:e,offset:a};return pL(f,{method:"POST",headers:U(T(T(T({},Bx()),m?i1({accessToken:m}):BR()),d),{"Content-Type":"application/json"}),body:p,signal:i!=null?i:void 0,observer:U(T({},l),{onEvent:h=>{var _;(_=l.onEvent)==null||_.call(l,h),o.onStreamEvent(h.byteLength,h.isDoneEvent)}}),ctx:t,retryConfig:Pk(t),shouldRetry:h=>(Zm(h)||h instanceof Zs&&jk(h.status))&&Xe(t,"603105008").get("retry_stream_requests",!1)})}function IL(a,i){return Mr(this,arguments,function*(t,{turnTracker:e,prepareState:s,f_completion:n,signal:o}){try{try{for(var l=ua(t),c,u,d;c=!(u=yield new nn(l.next())).done;c=!1){const f=u.value;yield f}}catch(u){d=[u]}finally{try{c&&(u=l.return)&&(yield new nn(u.call(l)))}finally{if(d)throw d[0]}}e.onStreamClose(),n&&Ay("conduit_f_conversation_api.success",s)}catch(f){throw $e.count(He.DEFAULT,"conversation_api.client_request_error"),o!=null&&o.aborted?(e.handleAbort(f),n&&Ay("conduit_f_conversation_api.aborted",s)):(e.handleRawError(f instanceof Error||typeof f=="string"?f:JSON.stringify(f)),n&&Ay("conduit_f_conversation_api.error",s)),f}})}function Pk(t){const e=js(t,"3165814200");return{MIN_RETRY_INTERVAL:e.get("MIN_RETRY_INTERVAL",300),MAX_RETRY_INTERVAL:e.get("MAX_RETRY_INTERVAL",5e3),RETRY_FACTOR:e.get("RETRY_FACTOR",1.5),MAX_RETRY_COUNT:e.get("MAX_RETRY_COUNT",12)}}function zfe(t){try{return new URL(t)}catch(e){return new URL(t,window.location.origin)}}const Wfe=.5,qfe=Pe(()=>me(()=>import("./josbm46cli4lgccy.js"),__vite__mapDeps([107,1,3,4])).then(t=>t.QuietHoursModal));function Kfe(){const t=Yfe();return t?t.gapPx>t.viewportHeightPx*Wfe:!1}function Yfe(){if(typeof window>"u"||typeof document>"u")return null;const t=document.getElementById("thread");if(!t)return null;const e=t.querySelectorAll('[data-turn="user"]');if(!e.length)return null;const s=e[e.length-1],n=window.innerHeight;if(!Number.isFinite(n)||n<=0)return null;const{bottom:o}=s.getBoundingClientRect();return{gapPx:n-o,viewportHeightPx:n}}var Vt,PL,C2,op,Qfe,Bh,RL,OL,LL,DL,FL,BL,UL,$L,HL,GL,VL,w2,k2,T2,E2;class jL{constructor(e,s,n,o,a,i,l,c,u,d,f,m,p,g,h,_,b,y,v,S,C=!1,w,k=!1,E=!1,M,N=void 0,A,I,P=!1,R=!1){Oo(this,Vt);X(this,"isFirstCompletionInThread");X(this,"activeBranchLastMessage");X(this,"messagesToUpdate",{});X(this,"allIncompleteMessageIds",new Set);X(this,"responseThreadId");X(this,"isCompletionBlocked",!1);X(this,"isEitherFlagged",!1);X(this,"sentNotification",!1);X(this,"variantsInStreamInfo");X(this,"blurDuringCompletionTracker",new ble);X(this,"completionLatencyTracker");X(this,"preflightTime");X(this,"treatCompletionAsAsync",!1);X(this,"realtimeAsyncCompletion",!1);X(this,"resumeToken");X(this,"placeholderNodeId");X(this,"callbacks");Oo(this,op,e=>{var s,n,o,a,i;if(this.activeBranchLastMessage&&this.completionLatencyTracker.onResponse(e,this.activeBranchLastMessage,this.responseThreadId),this.responseThreadId===void 0&&"conversationId"in e){const l=e.conversationId;if(this.responseThreadId=l,this.turnTracker.onConversationId(l),(n=(s=this.callbacks)==null?void 0:s.onServerThreadId)==null||n.call(s,l),wl(this.conversation.id)&&Rt(this.conversation.id)!==l&&(RY(this.ctx,this.conversation.id,l),B.logEvent("Attribution: Client Thread to Server Thread",{client_thread_id:this.conversation.id,server_thread_id:l})),ut(this.ctx)||OY.set(this.ctx,l),this.isContinuingFromSharedConversation&&(nt(this.conversation.id,u=>{delete u.continuingFromSharedConversationId}),pt.logEvent("chatgpt_continue_conversation_first_message_sent"),B.logEvent("Continue Conversation: First Message Sent",{forked_conversation_id:l,shared_conversation_id:(o=this.initialThread)==null?void 0:o.continuingFromSharedConversationId})),this.isContinuingFromBranchingConversation&&nt(this.conversation.id,u=>{delete u.branchingFromConversationId,delete u.branchingFromMessageId}),this.isContinuingFromSharedProjectConversation&&nt(this.conversation.id,u=>{delete u.continuingFromSharedProjectConversationId,delete u.sharedProjectConversationOwner}),this.isContinuableSharedPost&&nt(this.conversation.id,u=>{delete u.continuingFromSharedPostId,delete u.forkFromSharedPost}),this.isFirstCompletionInThread){const u=Tt(this.conversation.id);if(B.logEvent("Create New Thread"),!this.isHistoryAndTrainingDisabled&&kce(u==null?void 0:u.mode)&&ut(this.ctx)){Ea(this.queryClient,Se.getGizmoId(u));const d=bc(this.ctx)&&xn(this.ctx);u!=null&&u.disableConversationNavigation||ak(dl,this.queryClient,l,this.isSnorlaxEnabledForGizmo,void 0,d)}}const c={id:this.requestId,threadId:this.responseThreadId,completionType:this.completionType,eventSource:this.eventSource,model:this.model};if(this.completionType===Fi.Next){const u=Se.getConversationTurns(Tt(this.conversation.id)),d=u.length,f=u.filter(p=>p.role===ot.User),m=f&&((a=f[f.length-1])==null?void 0:a.messages[0]);if((m==null?void 0:m.content.content_type)===bt.Text){const p=m.content.parts.join("").length,g=(i=f==null?void 0:f.length)!=null?i:0;c.countConversationTurns=d,c.countUserSubmittedMessages=g,c.countLastUserPromptTextMessageLength=p}}B.logEvent("Generate Completion",c)}switch(e.type){case"num_variants_in_stream":ms(this,Vt,UL).call(this,e);break;case"moderation":ms(this,Vt,GL).call(this,e);break;case"url_moderation":ms(this,Vt,VL).call(this,e);break;case"message":ms(this,Vt,w2).call(this,e);break;case"input_message":ms(this,Vt,w2).call(this,e);break;case"done":ms(this,Vt,T2).call(this);break;case"gizmo_inline_review":ms(this,Vt,RL).call(this,e);break;case"title_generation":ms(this,Vt,OL).call(this,e);break;case"conversation_detail_metadata":ms(this,Vt,LL).call(this,e);break;case"beacon_ui_response":ms(this,Vt,DL).call(this,e,this.responseThreadId);break;case"survey_campaign_effect":Uue(e);break;case"conversation_async_status":ms(this,Vt,FL).call(this,e);break;case"resume_conversation_token":ms(this,Vt,BL).call(this,e);break;case"display_crisis_helpline_message":ms(this,Vt,$L).call(this,e);break;case"display_crisis_helpline_modal":ms(this,Vt,HL).call(this,e);break}});X(this,"debouncedUpdateExistingMessages",di(()=>{if(this.isCompletionBlocked)return;const e=Object.values(this.messagesToUpdate);e.length!==0&&(nt(this.conversation.id,s=>{as.updateTree(s,n=>{for(const o of e)n.updateNodeMessage(o.id,o),o.status!=="in_progress"&&(n.updateNodeMetadata(o.id,{completionSampleFinishTime:Date.now()}),this.allIncompleteMessageIds.delete(o.id))})}),this.messagesToUpdate={})},50,{leading:!0,maxWait:50}));this.ctx=e,this.requestId=s,this.queryClient=n,this.initialThread=o,this.conversation=a,this.parentMessageId=i,this.prependMessages=l,this.promptMessage=c,this.appendMessages=u,this.completionType=d,this.model=f,this.eventSource=m,this.isHistoryAndTrainingDisabled=p,this.startPreflightTime=g,this.isSnorlaxEnabledForGizmo=h,this.isNewThread=_,this.isContinuingFromSharedConversation=b,this.isContinuingFromBranchingConversation=y,this.isContinuingFromSharedProjectConversation=v,this.turnTracker=S,this.isAnonModeEnabled=w,this.isContinuableSharedPost=k,this.isReasoningSkipped=E,this.thinkingEffort=M,this.modelSlugStatsOverride=N,this.asyncTaskId=A,this.canEnableAuraAdultSearch=P,this.isAuraAdultSearchEnabled=R,this.completionLatencyTracker=new Rle(this.requestId,g),this.isFirstCompletionInThread=_||this.isContinuingFromSharedConversation||this.isContinuingFromSharedProjectConversation||this.isContinuableSharedPost||this.isContinuingFromBranchingConversation,I!=null&&I.disablePlaceholder||(this.placeholderNodeId="".concat(wC).concat(s)),this.callbacks=I!=null?I:{},C&&(this.sentNotification=!0)}updateBeforeRequest(){jie.incrementUserMessageCount(ut(this.ctx)?ir.LoggedIn:ir.LoggedOut),To.retainThread(this.conversation.id),nt(this.conversation.id,e=>{var a,i,l,c,u;e.stopConduitToken=(a=e.conduitToken)!=null?a:null,e.prepareState=null,e.lastPrepareTimestamp=null;const s=this.parentMessageId?Se.getNode(e,this.parentMessageId):void 0,n=(s==null?void 0:s.message.author.role)===ot.User,o=Kfe();this.completionType===Fi.Next&&Se.hasUserMessage(e)&&((i=this.promptMessage)==null?void 0:i.author.role)===ot.User&&!((c=(l=this.promptMessage)==null?void 0:l.metadata)!=null&&c.is_visually_hidden_from_conversation)&&!(n&&o)&&(e.scrollToMessageId=(u=this.promptMessage)==null?void 0:u.id),as.updateTree(e,(d,f)=>{var p,g;if(this.parentMessageId&&(f=Se.getNode(e,this.parentMessageId).id),this.prependMessages)for(const h of this.prependMessages)h.clientMetadata=U(T({},h.clientMetadata),{isOptimistic:!0}),f=d.addMessageNode(f,h);if(this.promptMessage){const h=this.promptMessage;h.clientMetadata=U(T({},h.clientMetadata),{isOptimistic:!0}),f=d.addMessageNode(f,h)}if(this.appendMessages)for(const h of this.appendMessages)h.clientMetadata=U(T({},h.clientMetadata),{isOptimistic:!0}),f=d.addMessageNode(f,h);const m=(g=(p=this.promptMessage)==null?void 0:p.metadata)==null?void 0:g.gizmo_id;if(this.placeholderNodeId){const h=l1("",m?{gizmo_id:m}:void 0,{requestId:this.requestId,isPlaceholder:!0},this.placeholderNodeId);f=d.addMessageNode(f,h)}return f})})}async sendRequest({conduitToken:e,turnstileToken:s,proofToken:n,completionMetadata:o,resolvedParentMessageId:a,messages:i,extraStreamParams:l,chatReq:c,profiler:u}){var y,v,S,C,w,k,E,M,N,A,I,P,R,O,L;GM(this.conversation.id,!0);let d=!1,f=!1,m=!1;const p=W=>LM(W),g=new AbortController;Ph.addRequest(this.requestId,g,this.turnTracker);const h=of(),_=xt(this.conversation.serverId$);if(this.completionType===Fi.Variant&&_==null){Ge.addError("Generating variant without conversation_id"),ms(this,Vt,Bh).call(this,new Error("Regeneration must have conversation_id"));return}const b=Ofe(this.ctx,U(T(T(T({conversationOrigin:(v=(y=this.initialThread)==null?void 0:y.conversationOrigin)!=null?v:null,model:this.model,completionType:this.completionType,prepareState:(C=(S=this.initialThread)==null?void 0:S.prepareState)!=null?C:"none",conduitToken:e,threadId:_,isReasoningSkipped:this.isReasoningSkipped,asyncTaskId:this.asyncTaskId,overrideInferTreatment:h.autoSwitcherTreatmentOverride,modelSlugStatsOverride:this.modelSlugStatsOverride,continueFromSharedConversationId:(w=this.initialThread)==null?void 0:w.continuingFromSharedConversationId,branchingFromConversationId:(k=this.initialThread)==null?void 0:k.branchingFromConversationId,branchingFromMessageId:(E=this.initialThread)==null?void 0:E.branchingFromMessageId,sharedProjectConversationOwnerId:(N=(M=this.initialThread)==null?void 0:M.sharedProjectConversationOwner)==null?void 0:N.id,sharedProjectConversationId:(A=this.initialThread)==null?void 0:A.continuingFromSharedProjectConversationId,continueFromSharedPostId:(I=this.initialThread)==null?void 0:I.continuingFromSharedPostId,forkFromSharedPost:(P=this.initialThread)==null?void 0:P.forkFromSharedPost,historyDisabled:this.isHistoryAndTrainingDisabled,isAnonModeEnabled:this.isAnonModeEnabled,parentMessageId:a,messages:i,chatReq:c,turnstileToken:s,proofToken:n,completionMetadata:o,contextualInfo:T({is_dark_mode:PY(),time_since_loaded:Math.floor(performance.now()/1e3),page_height:window.innerHeight,page_width:window.innerWidth,pixel_ratio:window.devicePixelRatio,screen_height:window.screen.height,screen_width:window.screen.width,window_style:Gs(this.ctx).windowStyle},G8(this.ctx)),isOnboardingConversation:o==null?void 0:o.isOnboardingConversation,thinkingEffort:ms(this,Vt,PL).call(this),forceParagen:h.forceParagen,forceParagenModel:h.forceParagen?h.forceParagenModel.value:void 0,forceRateLimit:h.forceRateLimit,resetRateLimits:h.resetRateLimits,recordRendering:h.recordRendering,recordTransformedConvoJson:h.recordTransformedConvoJson,disableSystemContentToggling:h.rebaseSystemMessageContent!=null,forceUseSearch:(R=h.forceUseSearch)!=null?R:void 0,paragenStreamType:h.paragenStreamType,paragenCotSummaryDisplay:h.paragenCotSummaryDisplay,forceParallelSwitch:h.forceParallelSwitch,juiceScore:h.juiceScore,multimodalJuiceScore:h.multimodalJuiceScore,showAllAnswers:h.showAllAnswers,ncOverride:h.ncOverride,cprOverride:h.cprOverride,cmOverride:h.cmOverride},Ox(this.ctx)?{f_completion:!0}:{}),Lle()?{f_search:!0}:{}),l),{r2xg7vml:this.canEnableAuraAdultSearch,zafn3kp8:this.isAuraAdultSearchEnabled}),this.turnTracker,u,g.signal,this.conversation.id);Due();try{try{for(var D=ua(b),H,V,q;H=!(V=await D.next()).done;H=!1){const W=V.value;if(W.type==="connected")d||(p("streamOpened"),d=!0),ms(this,Vt,C2).call(this,W);else if(KM(W)){const $=W;$.type==="message"&&(f||(p("messageReceived"),f=!0),!m&&((L=(O=$.message)==null?void 0:O.author)==null?void 0:L.role)===ot.Assistant&&(p("assistantMessageReceived"),m=!0)),Us(this,op).call(this,$)}}}catch(V){q=[V]}finally{try{H&&(V=D.return)&&await V.call(D)}finally{if(q)throw q[0]}}}catch(W){I3(W)||g.signal.aborted?(p("streamAborted"),ms(this,Vt,k2).call(this,W)):(p("streamError"),ms(this,Vt,Bh).call(this,W))}finally{d&&p("streamClosed"),GM(this.conversation.id,!1)}}async sendResumeRequest({conversationId:e,resumeToken:s,profiler:n}){var d,f;let o=!1,a=!1,i=!1;const l=_=>LM(_),c=new AbortController;Ph.addRequest(this.requestId,c,this.turnTracker),nt(this.conversation.id,_=>{as.setRequestIdOnCurrentLeaf(_,this.requestId)});const u=Lfe(this.ctx,{conversationId:e,resumeToken:s,model:this.model},this.turnTracker,n,c.signal,this.conversation.id);try{try{for(var m=ua(u),p,g,h;p=!(g=await m.next()).done;p=!1){const _=g.value;if(_.type==="connected")o||(l("streamOpened"),o=!0),ms(this,Vt,C2).call(this,_);else if(KM(_)){const b=_;b.type==="message"&&(a||(l("messageReceived"),a=!0),!i&&((f=(d=b.message)==null?void 0:d.author)==null?void 0:f.role)===ot.Assistant&&(l("assistantMessageReceived"),i=!0)),Us(this,op).call(this,b)}}}catch(g){h=[g]}finally{try{p&&(g=m.return)&&await g.call(m)}finally{if(h)throw h[0]}}}catch(_){I3(_)||c.signal.aborted?(l("streamAborted"),ms(this,Vt,k2).call(this,_)):(l("streamError"),ms(this,Vt,Bh).call(this,_))}finally{o&&l("streamClosed")}}async maybeSendNotification(){var i;if(this.sentNotification)return;const e=Tt(this.conversation.id),s=(i=e==null?void 0:e.title)!=null?i:void 0;if(!s)return;const n=Se.getCurrentNode(e).message;if(Fm(n)&&!Fle(n))return;const o=n.content,a=(o==null?void 0:o.content_type)===bt.Text?fce(await me(()=>import("./kgjs6438c34s9yzr.js").then(l=>l.h),__vite__mapDeps([73,3,1,4,46,47,25,26,24,27,22,28,49,23,50,21,74])).then(l=>{var c,u;return l.messageTextToPlaintext((c=o.parts[0])!=null?c:"",(u=n.metadata)==null?void 0:u.content_references)}),120):void 0;qm({title:s,subtitle:a,clientThreadId:this.conversation.id}),this.sentNotification=!0}}Vt=new WeakSet,PL=function(){if(this.model!==j1){const s=xt(()=>Cs(this.conversation));if(this.model!==j1&&!s.configurableThinkingEffort)return}if(Xe(this.ctx,"790459319").get("show-juice-control",!1))return this.thinkingEffort},C2=function(e){const{serverRequestId:s,interruptConversationToken:n}=e;this.turnTracker.onStreamOpen(n!==null),s&&this.turnTracker.onReceivedServerRequestId(s),n&&nt(this.conversation.id,o=>{o.conduitToken=n}),Ale(this.requestId,this.model,s,to(this.preflightTime))},op=new WeakMap,Qfe=function(){var e;return this.promptMessage?this.promptMessage.id:(e=Se.getParentPromptNode(Tt(this.conversation.id),this.parentMessageId))==null?void 0:e.message.id},Bh=function(e){var u,d,f,m;const s=LY(e),n=s.message,o=e instanceof Zs?e.code:void 0,a=e instanceof Zs?(u=e.detail)==null?void 0:u.can_retry:void 0,i=n===ll,l=i&&!this.treatCompletionAsAsync&&ut(this.ctx)&&Xe(this.ctx,"2489999880").get("is_polling_enabled",!1);l&&(this.treatCompletionAsAsync=!0),this.debouncedUpdateExistingMessages.flush(),this.treatCompletionAsAsync&&n===ll&&!l||nt(this.conversation.id,p=>{as.updateTree(p,(g,h)=>{var y,v,S,C,w;const _=this.variantsInStreamInfo&&(v=(y=Se.getParentPromptNode(p))==null?void 0:y.id)!=null?v:h,b={err:l?FY:n,errType:l?"info":"danger",errCode:l?DY.NetworkErrorWithReconnection:o,completionSampleFinishTime:Date.now(),canRetry:l?!1:a};if(((w=(C=(S=g.getNodeIfExists(_))==null?void 0:S.message)==null?void 0:C.content)==null?void 0:w.content_type)!==bt.Text){const k=l1("");return k.clientMetadata=T(T({},k.clientMetadata),b),g.addMessageNode(_,k)}else g.updateNodeMetadata(_,b)})});try{typeof n=="string"&&n.toLowerCase().includes("blackout hours")&&mt(this.ctx,qfe)}catch(p){}try{const p=Tt(this.conversation.id),g=Se.getLastMessageSystemHints(p);if(g==null?void 0:g.includes(Pn)){const _=e instanceof Zs?e:void 0,b=_==null?void 0:_.status,y=(d=_==null?void 0:_.isClientError())!=null?d:!1,v=(f=_==null?void 0:_.isServerError())!=null?f:!1,S=i?"network":v?"server":y?"client":"unknown";Ge.addAction("agent.conversation.start_failed",{request_id:this.requestId,model:this.model,error_code:o!=null?o:"unknown",is_network_error:i,is_recoverable_error:l,error_status:b,is_client_error:y,is_server_error:v,error_type:S})}}catch(p){}switch(i&&B.logNetworkError({source:"request_stream",type:l?"info_polling":"error"}),o){case Ai.ContentPolicy:case Ai.ContentOrTos:case Cm.ModelCapExceeded:case Cm.HistoryDisabledConversationNotFound:break;default:n!==void 0&&pt.logEvent("chatgpt_conversation_error_web",n)}if(this.blurDuringCompletionTracker.onMessageError(),DM(s),ms(this,Vt,E2).call(this),lc.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),e instanceof Zs&&e.code===Cm.ModelCapExceeded){const p=(m=e.detail)==null?void 0:m.clears_in;p&&(Nce(new Date(Date.now()+p*1e3).toISOString()),setTimeout(()=>{H8()},p*1e3))}},RL=function({gizmoId:e}){nt(this.conversation.id,s=>{s.promptGptRating={gizmoId:e}})},OL=function(e){ok(this.ctx,e.conversation_id,e.title,$_.Generated),this.isSnorlaxEnabledForGizmo||BY(this.ctx,e.conversation_id,e.title)},LL=function(e){const{default_model_slug:s}=e;s&&!mp({id:s},this.ctx)&&nt(this.conversation.id,o=>{o.defaultModelId=s}),Ee(this.ctx,"3315017149")&&HR(e)&&this.queryClient.invalidateQueries({queryKey:GR()}),Bm.updateDetails(e)},DL=function(e,s){var o,a;const n=(a=(o=this.activeBranchLastMessage)==null?void 0:o.id)!=null?a:Se.getCurrentLeafId(Tt(this.conversation.id));No.updateDetails(e,s!=null?s:void 0,n)},FL=function(e){const{async_status:s}=e;s===Xt.REALTIME&&(this.realtimeAsyncCompletion=!0),this.responseThreadId&&so(this.responseThreadId,{source:Cn.SERVER,value:s}),so(this.conversation.id,{source:Cn.SERVER,value:s})},BL=function(e){var i,l;const{token:s}=e;this.resumeToken=s!=null?s:void 0;const n=Tt(this.conversation.id),o=Se.getLastMessageSystemHints(n),a=o==null?void 0:o.includes(Pn);this.realtimeAsyncCompletion&&a&&Ge.addAction("agent.conversation.start_succeeded",{conversation_id:(l=(i=e.conversation_id)!=null?i:this.responseThreadId)!=null?l:"",request_id:this.requestId,model:this.model})},UL=function(e){this.variantsInStreamInfo=e,nt(this.conversation.id,s=>{as.updateTree(s,(n,o)=>{var i;const a=(i=Se.getParentPromptNode(s))!=null?i:n.getNodeByIdOrMessageId(o);n.updateNodeMetadata(a.id,{variantsInStreamInfo:this.variantsInStreamInfo})})})},$L=function(e){nt(this.conversation.id,s=>{as.updateTree(s,n=>{n.updateNodeMessageMetadata(e.messageId,{crisis_helpline_message:e})})})},HL=function(e){mt(this.ctx,$le,{effect:e})},GL=function(e){const{isCompletion:s,flagged:n,blocked:o,disclaimers:a}=e,i=!!(a!=null&&a.length);(n||o||i)&&(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged=!0,o&&s&&(this.isCompletionBlocked=!0),P8(e,this.conversation.id))},VL=function(e){const{conversationId:s,url:n,isSafe:o}=e;o&&nt(s,a=>{a.safeUrls.push(n)})},w2=function({type:e,message:s,conversationId:n}){var o,a,i,l,c;if(e==="message"&&(this.activeBranchLastMessage=s),(Fm(s)||rk(s))&&((a=(o=this.callbacks)==null?void 0:o.onImageGenMessage)==null||a.call(o,s)),(s==null?void 0:s.author.role)===ot.Tool&&(s==null?void 0:s.author.name)==="bio"){const u=(i=s.metadata)==null?void 0:i.gizmo_id;setTimeout(()=>{this.queryClient.invalidateQueries({queryKey:z8(u)}),this.queryClient.invalidateQueries({queryKey:W8()})},5e3)}if((l=s.metadata)!=null&&l.trigger_async_ux&&(this.treatCompletionAsAsync=!0,so(this.conversation.id,{source:Cn.SERVER,value:Xt.STREAMING})),Se.getTree(Tt(n)).containsNodeOrMessageId(s.id)){this.messagesToUpdate[s.id]=s,this.debouncedUpdateExistingMessages();const u=(c=s.metadata)==null?void 0:c.parent_id;if(!u)return;nt(this.conversation.id,d=>{as.updateTree(d,f=>{const m=f.getNodeIfExists(s.id),p=f.getNodeIfExists(u);if(!m){Ge.addError(new Error("CompletionRequest handleMessage: message ".concat(s.id," not found in tree")));return}if(!p){Ge.addAction("conversation.input_missing_expected_parent",{message_id:s.id,parent_id:u,completion_type:this.completionType});return}m.parentId!==p.id&&(f.moveNode(p.id,m.id),this.placeholderNodeId&&f.getNodeIfExists(this.placeholderNodeId)&&f.getParent(this.placeholderNodeId).id===f.getNodeByIdOrMessageId(u).id&&(G0(s)?f.moveNode(m.id,this.placeholderNodeId):j3(s)||(f.deleteNode(this.placeholderNodeId),this.placeholderNodeId=void 0)))})});return}this.debouncedUpdateExistingMessages.flush(),nt(this.conversation.id,u=>{as.updateTree(u,(d,f)=>{var h,_,b,y,v;const m={requestId:this.requestId};s.status!=="in_progress"?m.completionSampleFinishTime=Date.now():this.allIncompleteMessageIds.add(s.id);const p=U(T({},s),{clientMetadata:m});(h=s.metadata)!=null&&h.invoked_resource&&(u.startedWithByoMcp||(u.startedWithByoMcp=((_=s.metadata)==null?void 0:_.invoked_resource.publish_status)==="private"));const g=(b=s.metadata)==null?void 0:b.parent_id;if(g){if(this.placeholderNodeId&&d.getNodeIfExists(this.placeholderNodeId)&&d.getParent(this.placeholderNodeId).id===d.getNodeByIdOrMessageId(g).id)if(G0(p)){d.prependNode(this.placeholderNodeId,p);return}else j3(p)||(d.getNodeIfExists(this.placeholderNodeId)&&d.deleteNode(this.placeholderNodeId),this.placeholderNodeId=void 0);if(!d.containsNodeOrMessageId(g))return;const S=d.getNodeByIdOrMessageId(g).children,C=d.addMessageNode(g,p);if(this.completionType===Fi.Next&&((v=(y=this.variantsInStreamInfo)==null?void 0:y.num_variants_in_stream)!=null?v:0)<=1&&S.length>0){for(const w of S)w!==C&&d.moveNode(C,w);return}return C}else{const S=d.findFirst(C=>!G0(C.message));if(S)d.prependNode(S.id,p);else return d.addMessageNode(f,p)}})})},k2=function(e){this.debouncedUpdateExistingMessages.flush(),nt(this.conversation.id,s=>{as.updateTree(s,n=>{for(const o of this.allIncompleteMessageIds)n.updateNodeMessageMetadata(o,{finish_details:{type:"interrupted"}})})}),ms(this,Vt,T2).call(this)},T2=function(){var e;if(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged||lc.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),this.isFirstCompletionInThread&&this.responseThreadId){const s=Se.getGizmoId(Tt(this.responseThreadId)),n=this.queryClient.getQueryState([c1,{gizmoId:s}]);if((n==null?void 0:n.fetchStatus)!=="fetching"){const o=this.queryClient.getQueryData([c1,{gizmoId:s}]);((e=o==null?void 0:o.pages.flatMap(l=>l.items))!=null?e:[]).some(l=>l.id===this.responseThreadId)||(UY(this.queryClient,s),B.logEventWithStatsig("Refetch Project Conversation in Completion Request","chatgpt_web_projects_completion_request_new_chat_refetch"))}}lc.publish({kind:"createConversation",clientThreadId:this.conversation.id}),this.blurDuringCompletionTracker.onMessageDone(),DM(),ms(this,Vt,E2).call(this)},E2=function(){nt(this.conversation.id,e=>{if(e.shouldRefetchConvoOnFinalize){const s=Rt(this.conversation.id);s&&(hr(s,{skipIfExisting:!1}),as.setShouldRefetchConvoOnFinalize(e,!1))}as.updateTree(e,s=>{for(const n of this.allIncompleteMessageIds)s.updateNodeMetadata(n,{completionSampleFinishTime:Date.now()})})}),this.allIncompleteMessageIds.clear(),setTimeout(()=>{if(this.treatCompletionAsAsync||this.realtimeAsyncCompletion){const e=this.treatCompletionAsAsync?Xt.STREAMING:Xt.REALTIME,s=n=>{if(!n)return;const o=I1(this.ctx,n);(o==null||o.source===Cn.CLIENT)&&so(n,{source:Cn.SERVER,value:e})};s(this.responseThreadId),s(this.conversation.id)}else{const e=I1(this.ctx,this.conversation.id);(e==null?void 0:e.value)!==Xt.REALTIME&&(e==null?void 0:e.value)!==Xt.REALTIME_BUSY&&(e==null?void 0:e.value)!==Xt.REALTIME_BACKGROUND&&(so(this.conversation.id,{source:Cn.CLIENT,value:Xt.UNREAD}),this.maybeSendNotification())}Ph.removeRequest(this.requestId),To.releaseThread(this.conversation.id)},0)};const zL="perfStore:v1",Jfe=100;function Zfe(t){var e,s,n,o;try{const a=localStorage.getItem(zL);if(!a)return t;const i=(e=JSON.parse(a))!=null?e:{};return U(T({},t),{requests:(s=i.requests)!=null?s:t.requests,requestIds:(n=i.requestIds)!=null?n:t.requestIds,messageIdToRequestId:(o=i.messageIdToRequestId)!=null?o:t.messageIdToRequestId})}catch(a){return t}}function eN(t){try{const e={requests:t.requests,requestIds:t.requestIds,messageIdToRequestId:t.messageIdToRequestId};localStorage.setItem(zL,JSON.stringify(e))}catch(e){Ls.error("Error saving perf store to localStorage",{error:e})}}const qg=Zt(Vs(()=>Zfe({requests:{},requestIds:[],messageIdToRequestId:{},overlay:{latest_turn:null,active_streaming_message_id:null,adaptive_buffer:{message_id:null,samples:[]}}}))),M2={appendServerStats:(t,e)=>{qg.setState(s=>{s.requests[t]&&(s.requests[t].perf_stats=e),eN(s)})},publishTurnAnalytics:(t,e,s)=>{qg.setState(n=>{if(n.requestIds.push(e),n.messageIdToRequestId[t]=e,n.requests[e]=s,n.overlay.latest_turn={message_id:t,request_id:e,published_at_ms:Date.now()},n.requestIds.length>Jfe){const o=n.requestIds.shift();if(o&&n.requests[o]){for(const[i,l]of Object.entries(n.messageIdToRequestId))l===o&&delete n.messageIdToRequestId[i];delete n.requests[o]}}eN(n)})},setActiveStreamingMessageId:t=>{qg.setState(e=>{e.overlay.active_streaming_message_id=t,t!=null&&e.overlay.adaptive_buffer.message_id!==t&&(e.overlay.adaptive_buffer={message_id:t,samples:[]})})},recordAdaptiveBufferSample:(t,e)=>{qg.setState(s=>{if(s.overlay.active_streaming_message_id!==t)return;s.overlay.adaptive_buffer.message_id!==t&&(s.overlay.adaptive_buffer={message_id:t,samples:[]}),s.overlay.adaptive_buffer.samples.push(e)})}},WL=t=>{var e,s;return!!((s=(e=t.metadata)==null?void 0:e.attachments)!=null&&s.length)},qL=t=>{const e=t.content;return e.content_type!==bt.MultimodalText?!1:e.parts.some(Xfe)},Xfe=t=>typeof t=="string"?!1:t.content_type===Yo.ImageAssetPointer||t.content_type===Yo.Image;class eme{constructor(e){X(this,"isAuraRequest");X(this,"surface");X(this,"hasSearchHint",!1);X(this,"hasAuraContextToolMessage",!1);X(this,"hasAuraContextAttachments",!1);X(this,"hasAuraContextImageContent",!1);X(this,"hasFileSearchToolCall",!1);X(this,"modelSlug");this.ctx=e,this.isAuraRequest=bs(),this.surface=this.isAuraRequest?this.resolveSurface():null}trackMessage(e){var a,i,l,c,u,d;if(!this.isAuraRequest)return;const s=(u=(l=(a=e.metadata)==null?void 0:a.model_slug)!=null?l:(i=e.metadata)==null?void 0:i.default_model_slug)!=null?u:(c=e.author.metadata)==null?void 0:c.model_slug;s&&(this.modelSlug=s),this.recordSystemHints((d=e.metadata)==null?void 0:d.system_hints);const n=e.author.name,o=e.author.role;o===ot.Tool&&n===cm&&(this.hasAuraContextToolMessage||(this.hasAuraContextToolMessage=!0),this.hasAuraContextAttachments||(this.hasAuraContextAttachments=WL(e)),this.hasAuraContextImageContent||(this.hasAuraContextImageContent=qL(e))),!this.hasFileSearchToolCall&&o===ot.Tool&&n===Qs.FILE_SEARCH&&(this.hasFileSearchToolCall=!0)}recordSystemHints(e){if(!(!this.isAuraRequest||this.hasSearchHint||!e)){for(const s of e)if(s===Ye.Search){this.hasSearchHint=!0;break}}}getTags(){var o,a,i,l;if(!this.isAuraRequest)return;const e=c=>c?"true":"false",s=(a=(o=ct(this.ctx))==null?void 0:o.planType)!=null?a:"unknown",n=(i=this.modelSlug)!=null?i:"unknown";return[{key:"surface",value:(l=this.surface)!=null?l:"unknown"},{key:"is_search_request",value:e(this.hasSearchHint)},{key:"has_".concat(cm,"_tool"),value:e(this.hasAuraContextToolMessage)},{key:"has_".concat(cm,"_attachments"),value:e(this.hasAuraContextAttachments)},{key:"has_".concat(cm,"_image_content"),value:e(this.hasAuraContextImageContent)},{key:"has_file_search_tool_call",value:e(this.hasFileSearchToolCall)},{key:"plan_type",value:s},{key:"model_slug",value:n}]}resolveSurface(){return xt(()=>yr(this.ctx)?"mini-web":Ss(this.ctx)?"sidebar":"unknown")}}var Iy,tN;function tme(){if(tN)return Iy;tN=1;function t(e){return e===void 0}return Iy=t,Iy}var sme=tme();const nme=en(sme);var jy,sN;function ome(){if(sN)return jy;sN=1;var t="Expected a function";function e(s){if(typeof s!="function")throw new TypeError(t);return function(){var n=arguments;switch(n.length){case 0:return!s.call(this);case 1:return!s.call(this,n[0]);case 2:return!s.call(this,n[0],n[1]);case 3:return!s.call(this,n[0],n[1],n[2])}return!s.apply(this,n)}}return jy=e,jy}var Py,nN;function ame(){if(nN)return Py;nN=1;var t=VR(),e=ome(),s=$Y();function n(o,a){return s(o,e(t(a)))}return Py=n,Py}var rme=ame();const ime=en(rme);function lme(t){return typeof t=="number"?Math.trunc(t):t}const cme=["time_since_prompt_sent_ms","time_since_last_event_ms","first_token_lat","api_start_delay","completion_request_time_to_first_visible_message","await_duration_ms"],Tu="is_kaur1br5";class KL{constructor({ctx:e,clientRequestId:s,gizmoType:n,preflightTime:o,isTemporaryChat:a,conversationId:i}){X(this,"ctx");X(this,"start_time_ms");X(this,"turn_id");X(this,"trigger");X(this,"result");X(this,"time_since_prompt_sent_ms");X(this,"stream_update_event_count",0);X(this,"first_token_lat");X(this,"first_visible_content_token_lat");X(this,"last_model_message_received");X(this,"api_start_time");X(this,"time_since_last_event_ms");X(this,"api_start_delay");X(this,"completion_request_time_to_first_visible_message");X(this,"model_slug");X(this,"last_message_model_slug");X(this,"tools_used");X(this,"system_hints");X(this,"gizmo_id");X(this,"promptSentTimestamp");X(this,"serverStats");X(this,"serverSteMetadata");X(this,"logger");X(this,"server_request_id");X(this,"client_request_id");X(this,"completed",!1);X(this,"num_images_attached",0);X(this,"num_files_attached",0);X(this,"hasKaur1br5ContextAttachments",!1);X(this,"hasKaur1br5ContextImageContent",!1);X(this,"bytes_received",0);X(this,"model_message_update_count",0);X(this,"stream_encoding");X(this,"stream_protocol","sse");X(this,"stream_buffering",!0);X(this,"gizmo_type");X(this,"isStreamOpen",!1);X(this,"isTemporaryChat");X(this,"conversationId");X(this,"lastAssistantMessageId");X(this,"hasReceivedAgentMetadataMessage",!1);X(this,"streamTerminatedPrematurely",!1);X(this,"auraTimeToFirstTokenTracker");X(this,"awaitTimings",new Map);X(this,"await_duration_ms",0);X(this,"messageMarkerLatencies",{});X(this,"resume",{currentAttemptCount:0,totalAttemptCount:0,successfulCount:0});X(this,"messages",{});this.ctx=e,this.client_request_id=s,this.start_time_ms=performance.now(),this.turn_id=Ds(),this.promptSentTimestamp=o!=null?o:performance.now(),this.tools_used=new Set,this.system_hints=new Set,this.logger=HY.createLogger("turn-analytics","info","http"),this.auraTimeToFirstTokenTracker=new eme(e),n&&(this.gizmo_type=n),this.isTemporaryChat=a,this.conversationId=i}onResumeSuccessful(e){this.resume.currentAttemptCount!==0&&(this.resume.successfulCount++,this.resume.currentAttemptCount=0,B.logEventWithStatsig("ChatGPT Convo Stream: Resume Succeeded","chatgpt_convo_stream_resume_succeeded",U(T({},this.createStatsigPayload()),{offset:e})))}onStreamNetworkError(e,s,n){this.resume.currentAttemptCount===0&&B.logEventWithStatsig("ChatGPT Convo Stream: Error","chatgpt_convo_stream_error",U(T({},this.createStatsigPayload()),{offset:e,isNetworkError:n,errorMessage:s instanceof Error?s.message:String(s)}))}onResumeAttempted(e){this.resume.currentAttemptCount===0&&B.logEventWithStatsig("ChatGPT Convo Stream: Resume Attempted","chatgpt_convo_stream_resume_attempted",U(T({},this.createStatsigPayload()),{offset:e})),this.resume.currentAttemptCount++,this.resume.totalAttemptCount++}onResumeFailed(e,s,n){B.logEventWithStatsig("ChatGPT Convo Stream: Resume Failed","chatgpt_convo_stream_resume_failed",U(T({},this.createStatsigPayload()),{offset:e,is404:s,isNetworkError:n}))}setFirstVisibleTokenLatency(e){this.first_token_lat=e-this.promptSentTimestamp,this.api_start_time&&(this.completion_request_time_to_first_visible_message=e-this.api_start_time);const s=this.auraTimeToFirstTokenTracker.getTags();s&&$e.hist(He.DEFAULT,"conversation.kaur1br5.time_to_first_token",s,this.first_token_lat)}truncateValueForKey(e){const s=lme(this[e]);s!==void 0&&(this[e]=s)}onUserMessages(e){e.forEach(s=>{var n,o,a,i;this.auraTimeToFirstTokenTracker.trackMessage(s),this.updateAuraContextToolMetadata(s),s.author.role==="user"&&((o=(n=s.metadata)==null?void 0:n.attachments)==null||o.forEach(l=>{l.height&&l.width?this.num_images_attached+=1:this.num_files_attached+=1}),(i=(a=s.metadata)==null?void 0:a.system_hints)==null||i.forEach(l=>{this.system_hints.add(l)}))})}addServerPerfStats(e){M2.appendServerStats(this.client_request_id,e),this.serverStats=e}addServerSteMetadata(e){this.serverSteMetadata=e.metadata}onMessageMarker(e){const s=performance.now(),o="".concat(e.event,"_").concat("received");this.messageMarkerLatencies[e.marker]=U(T({},this.messageMarkerLatencies[e.marker]),{[o]:s-this.promptSentTimestamp}),e.marker===GY.USER_VISIBLE_TOKEN&&e.event===VY.First&&this.setFirstVisibleTokenLatency(s)}onStreamOpen(e){this.isStreamOpen=!0,this.logCompletionStarted(),this.logTimeToInterruptToken(e!=null?e:!1),B.logStructuredEvent(zY,{userMessageMetadata:{modelSlug:this.model_slug,toolsUsed:[...this.tools_used],numFilesAttached:this.num_files_attached,numImagesAttached:this.num_images_attached,conversation:{id:this.conversationId,isTemporary:this.isTemporaryChat}},startTimeMs:Date.now()})}onReceivedServerRequestId(e){this.server_request_id=e}onStreamClose(){this.model_message_update_count>0?this.logCompletion({type:io.Success}):this.logCompletion({type:io.Error,error:{reason:"empty_response",message:"Successful completion ended with no messages"}})}onPrematureStreamTermination(){var s,n,o;if(this.streamTerminatedPrematurely)return;this.streamTerminatedPrematurely=!0;const e=bs()?"true":"false";Ge.addAction("conversation.stream.terminated_prematurely",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,system_hints:this.system_hints,model_slug:(n=(s=this.model_slug)!=null?s:this.last_message_model_slug)!=null?n:void 0,message_count:this.model_message_update_count,[Tu]:e}),$e.count(He.DEFAULT,"conversation.stream.terminated_prematurely",[{key:"first_system_hint",value:[...this.system_hints][0]||"n/a"},{key:"trigger",value:(o=this.trigger)!=null?o:"unknown"},{key:Tu,value:e}])}onCompletionStarted(e,s){switch(e){case"next":this.trigger="submit";break;case"variant":this.trigger="reroll";break;case"continue":this.trigger="continue";break}this.model_slug=s}onConversationId(e){this.conversationId=e}onStreamEvent(e,s){this.bytes_received+=e,s||(this.stream_update_event_count+=1)}onSentUserMessage(){this.api_start_time=performance.now(),this.api_start_delay=this.api_start_time-this.promptSentTimestamp}onMessageUpdate(e){var i,l;this.auraTimeToFirstTokenTracker.trackMessage(e),this.updateAuraContextToolMetadata(e),e.author.name===Qs.n7jupd_m&&(this.hasReceivedAgentMetadataMessage=!0);const{model_slug:s,gizmo_id:n}=(i=e.metadata)!=null?i:{},{role:o,name:a}=e.author;o===ot.Assistant&&(this.lastAssistantMessageId=e.id),this.gizmo_id=(l=this.gizmo_id)!=null?l:n,o===ot.Tool&&a&&this.tools_used.add(a),o!==ot.User&&o!==ot.System&&o!==ot.Developer&&o!==ot.Root&&(this.model_message_update_count+=1,this.last_model_message_received=performance.now(),this.last_message_model_slug=s!=null?s:this.last_message_model_slug),!this.first_visible_content_token_lat&&e.author.role===ot.Assistant&&SC(e)&&(this.first_visible_content_token_lat=performance.now()-this.promptSentTimestamp)}updateAuraContextToolMetadata(e){e.author.role!==ot.Tool||e.author.name!==cm||(this.hasKaur1br5ContextAttachments||(this.hasKaur1br5ContextAttachments=WL(e)),this.hasKaur1br5ContextImageContent||(this.hasKaur1br5ContextImageContent=qL(e)))}handleAbort(e){this.logCompletion({type:io.Canceled})}handleRawError(e){var a;let s,n=null,o=null;e instanceof Error?(n=(a=e.message)!=null?a:"Something went wrong",o=e instanceof Zs?e.status:void 0):n=e,o===400||n===ll||n==="NetworkError when attempting to fetch resource."||n==="The network connection was lost."?s="network_error":n==="Request timed out"?s="timeout":s="request_failed",this.logCompletion({type:io.Error,error:T({reason:s,message:n},o&&{status_code:o})})}getFeatureFlags(){const e={"resumable-streaming":Xe(this.ctx,"2489999880",{disableExposureLog:!0}).get("is_resume_enabled",!1)},s=Object.entries(e),n=s.filter(([a,i])=>i).map(([a])=>a),o=s.filter(([a,i])=>!i).map(([a])=>a);return{enabled_feature_flags:n,disabled_feature_flags:o}}createLogPayload(){var i,l,c,u,d,f;const{enabled_feature_flags:e,disabled_feature_flags:s}=this.getFeatureFlags(),n=Gs(this.ctx),o=P3(this.ctx),a=U(T({turn_id:this.turn_id,trigger:this.trigger,result:to((i=this.result)==null?void 0:i.type)},((l=this.result)==null?void 0:l.type)===io.Error?{error:this.result.error}:void 0),{time_since_prompt_sent_ms:this.time_since_prompt_sent_ms,stream_update_event_count:this.stream_update_event_count,model_message_update_count:this.model_message_update_count,time_since_last_event_ms:this.time_since_last_event_ms,first_token_lat:this.first_token_lat,first_visible_content_token_lat:this.first_visible_content_token_lat,api_start_delay:this.api_start_delay,completion_request_time_to_first_visible_message:this.completion_request_time_to_first_visible_message,bytes_received:this.bytes_received,stream_encoding:this.stream_encoding,stream_protocol:this.stream_protocol,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used],system_hints:[...this.system_hints],gizmo_id:this.gizmo_id,attachments:{files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached},has_kaur1br5_context_attachments:this.hasKaur1br5ContextAttachments,has_kaur1br5_context_image_content:this.hasKaur1br5ContextImageContent,[Tu]:bs(),plan_type:(c=o==null?void 0:o.planType)!=null?c:void 0,temporary_chat:this.isTemporaryChat,gizmo_type:this.gizmo_type,server_ste_metadata:this.serverSteMetadata,message_marker_latencies:OR(this.messageMarkerLatencies),cluster:(u=n.cluster)!=null?u:void 0,residency_region:(d=o==null?void 0:o.residencyRegion)!=null?d:void 0,compute_residency:(f=o==null?void 0:o.computeResidency)!=null?f:void 0,await_timings:Object.fromEntries(this.awaitTimings),await_duration_ms:this.await_duration_ms,enabled_feature_flags:e,disabled_feature_flags:s,server_request_id:this.server_request_id});return{request_id:this.server_request_id,turn_analytics:a}}createStatsigPayload(){var e,s,n,o;return ime({turn_id:String(this.turn_id),trigger:this.trigger,result:(e=this.result)==null?void 0:e.type,error:JSON.stringify(((s=this.result)==null?void 0:s.type)===io.Error?{error:this.result.error}:void 0),time_since_prompt_sent_ms:String(this.time_since_prompt_sent_ms),stream_update_event_count:String(this.stream_update_event_count),model_message_update_count:String(this.model_message_update_count),time_since_last_event_ms:JSON.stringify(this.time_since_last_event_ms),first_token_lat:String(this.first_token_lat),api_start_delay:String(this.api_start_delay),completion_request_time_to_first_visible_message:String(this.completion_request_time_to_first_visible_message),bytes_received:String(this.bytes_received),stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used].join(", "),system_hints:[...this.system_hints].join(", "),gizmo_id:this.gizmo_id,attachments:JSON.stringify({files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached}),has_kaur1br5_context_attachments:String(this.hasKaur1br5ContextAttachments),has_kaur1br5_context_image_content:String(this.hasKaur1br5ContextImageContent),[Tu]:String(bs()),plan_type:(o=(n=P3(this.ctx))==null?void 0:n.planType)!=null?o:void 0,temporary_chat:String(this.isTemporaryChat),gizmo_type:this.gizmo_type,server_ste_metadata:JSON.stringify(this.serverSteMetadata),message_marker_latencies:JSON.stringify(this.messageMarkerLatencies),afterRetryCount:this.resume.currentAttemptCount,successfulResumeCount:this.resume.successfulCount},nme)}getTurnClientStatus(){var e;switch((e=this.result)==null?void 0:e.type){case io.Success:return Ig.TURN_CLIENT_STATUS_SUCCESS;case io.Error:return Ig.TURN_CLIENT_STATUS_ERROR;case io.Canceled:return Ig.TURN_CLIENT_STATUS_CANCELLED;default:return Ig.TURN_CLIENT_STATUS_UNSPECIFIED}}logStructuredTurnCompleteEvent(){var s,n;B.logStructuredEvent(WY,{requestId:this.getServerSteRequestId(),clientStatus:this.getTurnClientStatus(),lastMessageId:this.lastAssistantMessageId,conversationId:this.conversationId,timeToFirstVisibleTokenMs:this.first_token_lat,timeToLastTokenMs:this.time_since_prompt_sent_ms});const e={userMessageMetadata:{modelSlug:this.model_slug,toolsUsed:[...this.tools_used],numFilesAttached:this.num_files_attached,numImagesAttached:this.num_images_attached,conversation:{id:this.conversationId,isTemporary:this.isTemporaryChat}},numSuccessfulResumes:this.resume.successfulCount,numResumeAttempts:this.resume.totalAttemptCount,offset:this.stream_update_event_count,incompleteMessagesMetadata:Object.values(this.messages).filter(o=>o.status!=="finished_successfully").map(o=>({id:o.id,status:o.status,role:o.role,type:o.contentType}))};((s=this.result)==null?void 0:s.type)===io.Error?B.logStructuredEvent(qY,U(T({},e),{errorMessage:this.result.error.message,errorCode:this.result.error.status_code,errorType:this.getTurnErrorType(this.result.error),errorDetails:this.result.error.message})):B.logStructuredEvent(KY,U(T({},e),{turnCompletionStatus:((n=this.result)==null?void 0:n.type)===io.Canceled?R3.CHATGPT_TURN_COMPLETION_STATUS_SUCCESS:R3.CHATGPT_TURN_COMPLETION_STATUS_CANCELED}))}getTurnErrorType(e){switch(e.reason){case"network_error":return Bf.CHATGPT_TURN_ERROR_TYPE_NETWORK_ERROR;case"timeout":return Bf.CHATGPT_TURN_ERROR_TYPE_TIMEOUT;case"request_failed":return Bf.CHATGPT_TURN_ERROR_TYPE_REQUEST_FAILED;case"unknown_error":return Bf.CHATGPT_TURN_ERROR_TYPE_UNKNOWN_ERROR;default:return Bf.CHATGPT_TURN_ERROR_TYPE_UNSPECIFIED}}getServerSteRequestId(){if(this.serverSteMetadata==null)return;const e=this.serverSteMetadata.request_id;return typeof e=="string"?e:void 0}async awaitWrapper(e,s){const n=performance.now(),o=await e,a=performance.now()-n;return this.awaitTimings.set(s,a),this.await_duration_ms+=a,o}logCompletionStarted(){B.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_started","chatgpt_conversation_turn_turn_exchange_started",this.createStatsigPayload())}logTimeToInterruptToken(e){e&&$e.hist(He.DEFAULT,"chatgpt_web_interrupt_token_latency",[],performance.now()-this.promptSentTimestamp),$e.count(He.DEFAULT,"chatgpt_web_interrupt_token_exists",[{key:"has_conduit_token",value:e?"true":"false"}])}logCompletion(e){var o,a,i;if(this.completed)return;const s=performance.now();$e.count(He.DEFAULT,"completion_request"),$e.hist(He.DEFAULT,"completion_request_time",[],s-this.start_time_ms),this.completed=!0,this.result=e;for(const l of cme)this.truncateValueForKey(l);this.time_since_prompt_sent_ms=s-this.promptSentTimestamp,this.last_model_message_received&&(this.time_since_last_event_ms=s-this.last_model_message_received);const n=this.createLogPayload();if(this.lastAssistantMessageId&&M2.publishTurnAnalytics(this.lastAssistantMessageId,this.client_request_id,n.turn_analytics),e.type===io.Error?this.logger.error("Turn exchange complete",n):this.logger.info("Turn exchange complete",n),this.system_hints.has(Pn)&&!this.hasReceivedAgentMetadataMessage){const l=bs()?"true":"false";Ge.addAction("conversation.stream.agent_metadata_message_missing",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,completion_result:e.type,stream_terminated_prematurely:this.streamTerminatedPrematurely,model_slug:(a=(o=this.model_slug)!=null?o:this.last_message_model_slug)!=null?a:void 0,trigger:this.trigger,[Tu]:l}),$e.count(He.DEFAULT,"conversation.stream.agent_metadata_message_missing",[{key:"trigger",value:(i=this.trigger)!=null?i:"null"},{key:Tu,value:l}])}this.logStructuredTurnCompleteEvent(),B.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_complete","chatgpt_conversation_turn_turn_exchange_complete",this.createStatsigPayload()),B.logEventWithStatsig("ChatGPT Convo Stream: Stream Completed","chatgpt_convo_stream_completed",this.createStatsigPayload())}}const N2=oa(()=>Le(!1));function ume(t){return kC(t)&&!YY(t)}const Kg=50,dme=95;function fme(t,e){if(t<=e)return t/e*Kg;{const s=Kg,n=dme-Kg,o=t-e,i=-(Kg/e)/n;return s+n*(1-Math.exp(i*o))}}class mme{constructor(){X(this,"mostRecentCompletionRequest");X(this,"loggedRequests",new Set)}onCompletionRequestStarted(e){this.mostRecentCompletionRequest={requestId:e,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(e,s,n,o,a){var l;const i=this.mostRecentCompletionRequest;i!=null&&!this.loggedRequests.has(e)&&((l=Se.getNode(Tt(s),n).message.clientMetadata)==null?void 0:l.requestId)===i.requestId&&(B.logEvent(e,T({messageId:n,timeMs:Date.now()-i.timestamp},o)),a==null||a(),this.loggedRequests.add(e))}}const YL=new mme;function pme(t){var o,a;const e=t.find(i=>{var l;return((l=i.metadata)==null?void 0:l.image_search_results)!==void 0});return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.image_search_results)!=null?a:[]).slice(0,5)}function gme(t){return{event:"attributes",data:{attributes:{isForceHide:t}}}}function Ry(t,e){return{event:"fetch.status",data:{useCases:{[t]:{started:Date.now(),status:e}}}}}function QL(t,e){switch(e){case"navlinks":return t.navlinks.length>0;case"images":return t.images.length>0;case"videos":return t.videos.length>0;case"news":return t.news.length>0}return!1}const hme=new Set(["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_id","utm_name","utm_creative","gclid","fbclid","igshid","msclkid","vero_id","oly_enc_id","oly_anon_id","mc_eid","mc_cid","ref","ref_src","trk","spm"]);function _me(t){if(t.hostname=t.hostname.toLowerCase().replace(/^www\./,""),/(^|\.)youtube\.com$/.test(t.hostname)||t.hostname==="youtu.be"){if(t.hostname==="youtu.be"){const n=t.pathname.replace(/^\/+/,"");t.hostname="youtube.com",t.pathname="/watch",t.searchParams.set("v",n)}const e=t.pathname.match(/^\/shorts\/([^/]+)\/?$/i);e&&(t.pathname="/watch",t.searchParams.set("v",e[1])),t.hostname!=="youtube.com"&&(t.hostname="youtube.com");const s=new Set(["t","time_continue","start","feature","si","pp","ab_channel","index","redir_token"]);for(const n of[...t.searchParams.keys()])s.has(n.toLowerCase())&&t.searchParams.delete(n)}if(t.hostname==="x.com"||t.hostname==="twitter.com"||t.hostname==="mobile.twitter.com"||t.hostname==="m.twitter.com"){t.hostname="twitter.com";const e=new Set(["s","t","ref_src"]);for(const s of[...t.searchParams.keys()])e.has(s.toLowerCase())&&t.searchParams.delete(s)}if(t.hostname==="instagram.com"||t.hostname==="m.instagram.com"){t.hostname="instagram.com";const e=new Set(["hl"]);for(const s of[...t.searchParams.keys()])e.has(s.toLowerCase())&&t.searchParams.delete(s)}}function B1(t){const e=(t!=null?t:"").trim();if(!e)return"";try{const s=/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e),n=new URL(s?e:"http://".concat(e));n.protocol=n.protocol.toLowerCase(),n.username="",n.password="",n.hostname=n.hostname.replace(/\.$/,""),(n.protocol==="http:"&&n.port==="80"||n.protocol==="https:"&&n.port==="443")&&(n.port=""),n.hash="",n.pathname=n.pathname.replace(/\/{2,}/g,"/"),n.pathname!=="/"&&n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),_me(n);const o=n.searchParams,a=[],i=new Set;for(const u of o.keys()){const d=u.toLowerCase();d.startsWith("utm_")||hme.has(d)||i.has(u)||(i.add(u),a.push([u,o.getAll(u).sort((f,m)=>f.localeCompare(m))]))}a.sort((u,d)=>u[0].localeCompare(d[0]));const l=new URLSearchParams;for(const[u,d]of a)for(const f of d)l.append(u,f);return"".concat(n.hostname.toLowerCase()).concat(n.pathname).concat(l.toString()?"?".concat(l.toString()):"").toLowerCase()}catch(s){return e.replace(/^https?:\/\//i,"").replace(/^www\./i,"").replace(/\/{2,}/g,"/").replace(/\/+$/g,"").toLowerCase()}}function zi(t,e,s){var a,i,l;if(!(e!=null&&e.length))return t;const n=[...t],o=new Map;for(let c=0;c<n.length;c++)o.set(B1(n[c].url),c);for(const c of e){const u=B1(c.url);if(!o.has(u)){const h=c.sources===void 0&&c.source!==void 0?U(T({},c),{sources:[c.source]}):c;o.set(u,n.push(h)-1);continue}const d=o.get(u);if(d===void 0)continue;let f=!0;if(c.domain!==void 0){const h=n[d].domain;(h===void 0||s&&c.domain!==h)&&(n[d]=U(T({},n[d]),{domain:c.domain}),f=!1)}c.snippet!==void 0&&c.snippet!==n[d].snippet&&(f?(n[d]=U(T({},n[d]),{snippet:c.snippet}),f=!1):n[d].snippet=c.snippet);let m=n[d];const p=m.source;p&&(m.sources===void 0||!m.sources.includes(p))&&(f&&(n[d]=T({},n[d]),m=n[d],f=!1),m.sources=(a=m.sources)!=null?a:[],m.sources.push(p));const g=[...c.source?[c.source]:[],...(i=c.sources)!=null?i:[]];if(g.length)for(const h of g)h&&(m.sources===void 0||!m.sources.includes(h))&&(f&&(n[d]=T({},n[d]),m=n[d],f=!1),m.sources=(l=m.sources)!=null?l:[],m.sources.push(h))}return n}function Oy(t,e=[]){if(!t.length||!e.length)return t;const s=new Map;for(const a of e){const i=B1(a.url);i&&s.set(i,a.attribution)}let n=!1;const o=t.map(a=>{const i=B1(a.url),l=i?s.get(i):void 0;return l&&a.domain!==l?(n=!0,U(T({},a),{domain:l})):a});return n?o:t}var si=(t=>(t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.DONE=1]="DONE",t[t.ERROR=2]="ERROR",t))(si||{}),Wi=(t=>(t[t.NOT_RUN=0]="NOT_RUN",t[t.SAFE=1]="SAFE",t[t.ADULT=2]="ADULT",t[t.FLAGGED=3]="FLAGGED",t))(Wi||{});const cd={navlinks:[],images:[],videos:[],news:[],isSearchLikely:void 0,analytics:{},safeSearchOff:!1},xme=t=>({entries:{},updateFromEvent:(e,s)=>t(n=>{var i,l,c,u,d,f,m,p,g,h,_,b,y;const o=(i=n.entries[e])!=null?i:cd;let a=o;switch(s.event){case"navlinks":a=U(T({},o),{navlinks:zi(o.navlinks,(l=s.data.navlinks)!=null?l:[],!1),images:zi(o.images,(c=s.data.images)!=null?c:[],!1),videos:zi(o.videos,(u=s.data.videos)!=null?u:[],!1),news:zi(o.news,(d=s.data.news)!=null?d:[],!1)}),o.analytics.firstNavlinkFetched===void 0&&((f=s.data.navlinks)!=null?f:[]).length>0&&(a.analytics=U(T({},o.analytics),{firstNavlinkFetched:s.processTime,firstNavlinksFetchedTS:s.timestampMs}));break;case"search.classifier":a=U(T({},o),{isSearchLikely:s.data.is_search_likely}),o.analytics.firstClassifierFetched===void 0&&s.data.is_search_likely&&(a.analytics=U(T({},o.analytics),{firstClassifierFetched:s.processTime,firstClassifierFetchedTS:s.timestampMs}));break;case"attributions":a=U(T({},o),{navlinks:Oy(o.navlinks,(m=s.data.attributions)!=null?m:[]),videos:Oy(o.videos,(p=s.data.attributions)!=null?p:[]),news:Oy(o.news,(g=s.data.attributions)!=null?g:[])});break;case"attributes":{const v=(h=s.data.attributes)!=null?h:{};a=U(T({},o),{isNoForceSearch:v.shortQueryNoOptimize!==void 0?!!v.shortQueryNoOptimize:o.isNoForceSearch,isNavlinkIntent:v.isNavlinkIntent!==void 0?!!v.isNavlinkIntent:o.isNavlinkIntent,isForceHide:v.isForceHide!==void 0?!!v.isForceHide:o.isForceHide,truncateFastNavlinks:v.truncateFastNavlinks!==void 0?Number(v.truncateFastNavlinks):o.truncateFastNavlinks});break}case"fetch.status":a=U(T({},o),{fetchingStatus:T(T({},(_=o.fetchingStatus)!=null?_:{}),(b=s.data.useCases)!=null?b:{})});break;case"log":switch(s.data.event){case"fetchSonicNavLinks.start":a=U(T({},o),{analytics:U(T({},o.analytics),{lastStartFetch:s.processTime,lastStartFetchTS:s.timestampMs,firstStartFetch:o.analytics.firstStartFetch!==void 0?o.analytics.firstStartFetch:s.processTime})});break;case"fetchBENavlinks.start":o.analytics.firstRoundtripTime===void 0&&(a=U(T({},o),{analytics:U(T({},o.analytics),{firstRoundtripTime:s.processTime})}));break;case"fetchNavlinks.finished":a=U(T({},o),{fetchingStatus:U(T({},(y=o.fetchingStatus)!=null?y:{}),{navlinks:{started:0,status:1}})});break;case"navlinkRequested":a=U(T({},o),{analytics:U(T({},o.analytics),{requestedTimeUnixEpochMs:s.timestampMs})});break;case"search_safety_safe":a=U(T({},o),{safety:1});break;case"search_safety_adult":a=U(T({},o),{safety:2});break;case"search_safety_flagged":a=U(T({},o),{safety:3});break;case"search_safety_not_run":a=U(T({},o),{safety:0});break;case"shortQueryNoOptimize":a=U(T({},o),{isNoForceSearch:!0});break;case"isNavlinkIntent":a=U(T({},o),{isNavlinkIntent:!0});break;case"safe_search_off":a=U(T({},o),{safeSearchOff:!0});break}break}return{entries:U(T({},n.entries),{[e]:a})}})}),Kr=TC()(xme,fi);function yme(t,e){return Kr(s=>{var o,a,i;if(t==null)return cd;const n=(a=(o=s.entries[t])==null?void 0:o.safeSearchOff)!=null?a:!1;return e!==void 0&&n!==e?cd:(i=s.entries[t])!=null?i:cd})}function bme(t){Kr.setState(e=>{const o=e.entries,{[t]:s}=o;return{entries:De(o,[A3(t)])}})}const vme=8e3;async function gm(t,e,s,n){var b,y;if(e.length===0)return;const o=Kr.getState();let a=o.entries[e];if(a){if(a.safety===Wi.ADULT&&n!==void 0&&n!==!!a.safeSearchOff)bme(e),a=cd;else if(QL(a,s))return}if(((y=(b=a==null?void 0:a.fetchingStatus)==null?void 0:b[s])==null?void 0:y.started)!==void 0)return;Kr.getState().updateFromEvent(e,Ry(s,si.IN_PROGRESS));const l={query:e,classifier:!1,attributions:s!=="images",[s]:!0,is_strict:!n};let c=null,u=!1;const f=js(t,"3205212221").get("retry",{}),m=typeof f[s]=="number"?Math.max(Math.min(f[s],10),0):0,p=typeof f.timeoutMs=="number"?Math.max(f.timeoutMs,500):6e3;let h=typeof f.retryDelayMs=="number"?f.retryDelayMs:0;const _=async()=>{var v;try{const E="".concat(vc,"/navlinks");try{for(var S=ua(D1(E,{ctx:t,method:"POST",headers:T({},Bx()),body:l})),C,w,k;C=!(w=await S.next()).done;C=!1){const M=w.value;if("response"in M)continue;const N=(v=M.event)!=null?v:void 0;if(N===void 0)continue;const A=M.data;o.updateFromEvent(e,{event:N,data:A,timestampMs:Date.now()})}}catch(w){k=[w]}finally{try{C&&(w=S.return)&&await w.call(S)}finally{if(k)throw k[0]}}u=!0,Kr.getState().updateFromEvent(e,Ry(s,si.DONE))}catch(E){c=E}};for(let v=0;v<=m;v++){v>0&&(await oN(h),h=h*2+Math.random()*10);const S=_(),C=oN(p);if(await Promise.race([S,C]),u)break}!u&&c!=null&&(Kr.getState().updateFromEvent(e,Ry(s,si.ERROR)),Ge.addError(new Error("Failed to fetch navlinks",{cause:c})))}function JL(t,e){var i,l,c,u,d,f;const s=(l=(i=t.fetchingStatus)==null?void 0:i[e])==null?void 0:l.started;if(!s)return!1;const o=Date.now()-s>vme;return!(QL(t,e)||o||((u=(c=t.fetchingStatus)==null?void 0:c[e])==null?void 0:u.status)===si.DONE||((f=(d=t.fetchingStatus)==null?void 0:d[e])==null?void 0:f.status)===si.ERROR)}function Yg(t,e){var n;if(!t)return!1;const s=(n=Kr.getState().entries[t])!=null?n:cd;return JL(s,e)}function oN(t){return new Promise(e=>setTimeout(e,t))}const Sme=(t,e=!1)=>{var s;return t==="web"?O3.Web:t==="cloud"?O3.Cloud:(s=EC[t])!=null?s:e?t:void 0},fl=(t,e=!1)=>Array.from(t.values()).map(s=>Sme(s,e)).filter(Boolean),Cme="I took control of the virtual browser. If you're unsure what changed, ask for more context. If the task is complete, just acknowledge and wrap it up. Otherwise, please proceed.",rn=Zt(()=>({token:null,clientThreadId:null,isOpen:!1,isResuming:!1,isTakeoverInProgress:!1,parentMessageId:null,vmId:null,abortPromise:null})),Met=(t,e)=>{rn.setState(s=>U(T({},s),{clientThreadId:t,token:e}))},wme=t=>{var s;const e=Rk();((s=e.clientMetadata)!=null?s:e.clientMetadata={}).isPlaceholder=!0,nt(t,n=>{as.appendMessage(n,e)})},ZL=t=>{nt(t,e=>{as.updateTree(e,s=>{const n=s.nodes.filter(o=>{var l,c,u;const a=(l=o.message)==null?void 0:l.metadata,i=(c=o.message)==null?void 0:c.clientMetadata;return(i==null?void 0:i.isPlaceholder)&&(a==null?void 0:a.is_takeover_ended_message)&&((u=a==null?void 0:a.system_hints)==null?void 0:u.includes(Pn))});for(const o of n)s.updateNodeMetadata(o.id,{isPlaceholder:!1})})})},Rk=(t,e)=>cn(Cme,T(T({is_takeover_ended_message:!0,system_hints:[Pn]},t&&{selected_sources:fl(t)}),e!=null?e:{})),Net=()=>{rn.setState({token:null,clientThreadId:null,isOpen:!1,isTakeoverInProgress:!1})};function kme(t){return t instanceof KeyboardEvent||"key"in t||"detail"in t&&t.detail===0?"keyboard":"mouse"}function Tme(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}async function Ao({conversation:t,requestedModelId:e,completionType:s=Fi.Next,sourceEvent:n,eventSource:o,completionMetadata:a,extraStreamParams:i,parentMessageId:l,promptMessage:c,existingMessages:u,prependMessages:d,appendMessages:f,profiler:m,skipNotification:p,disablePlaceholder:g,isReasoningSkipped:h,parentMessageIdPromise:_,thinkingEffort:b,callbacks:y}){var _e,ye,Re,Ve,ze,Fe,be,Oe,qe,Ze,st,rt,wt;const v=t.ctx;N2.set(t,!0);const S=ln(v),C=(_e=n==null?void 0:n.timeStamp)!=null?_e:performance.now(),w=o!=null?o:n?kme(n):"mouse",k=zR(),E="request-".concat(t.id,"-").concat(k),M=Tt(t.id),{conduitToken:N=null,prepareState:A="none",lastPrepareTimestamp:I=null}=M!=null?M:{},P=xr(v).getLayer("3360722522");(ye=a==null?void 0:a.systemHints)!=null&&ye.includes(Ye.PictureV2)&&(P.get("use_default_model")&&(e=xt(()=>H_(v).id)),P.get("use_standard_thinking_effort")&&(b="standard"));const R=e!=null?e:xt(()=>Cs(t).id),O=xt(()=>pp(v)),L=Se.findNode(M,at=>at.message.author.role===ot.Assistant||at.message.author.role===ot.Tool)==null,D=(M==null?void 0:M.continuingFromSharedConversationId)!=null,H=(M==null?void 0:M.continuingFromSharedProjectConversationId)!=null,V=!!(M!=null&&M.continuingFromSharedPostId),q=(M==null?void 0:M.branchingFromConversationId)!=null,W=Se.getConversationLastTurn(M),$=W==null?void 0:W.messages.some(at=>{var kt;return(kt=at.metadata)==null?void 0:kt.n7jupd_message});let Z=l?Se.getNode(M,l):u!=null&&u[0]?Se.getParentNode(M,u[0].id):Se.getCurrentNode(M),K=l;Z.message.id.startsWith(wC)&&(Z=Se.getParentNode(M,Z.message.id),K=(Re=Z.message.id)!=null?Re:Z.id);let Y=(Ve=Z.message.id)!=null?Ve:Z.id;if((ze=Z.message.metadata)!=null&&ze.is_hazelnut_enable_prompt){const at=Se.getParentNode(M,Z.id);at&&(Z=at,Y=(Fe=at.message.id)!=null?Fe:at.id,K=Y)}rn.getState().isTakeoverInProgress&&(rn.setState({isTakeoverInProgress:!1}),ZL(t.id),d=[...d!=null?d:[],Rk()]);const ae=[...u!=null?u:[],...d!=null?d:[],...c?[c]:[],...f!=null?f:[]],se=xt(()=>WR(v,yc(t))),ee=Rt(t.id),re=new KL({ctx:v,clientRequestId:E,gizmoType:se,preflightTime:C,isTemporaryChat:O,conversationId:ee!=null?ee:void 0});if(re.onUserMessages(ae),se===u1.PROJECT&&L){const at=a==null?void 0:a.systemHints;QY.set(t,at)}const he=xt(()=>af(v)),fe=xt(()=>JY(v)),pe=xt(()=>CC(v)),le=xt(()=>U_(v)),ve=ft.getItem(Be.ModelSlugStatsOverride),Te=new jL(v,E,S,M,t,K,d,c,f,s,R,w,he,C,se===u1.PROJECT,L,D,q,H,re,p!=null?p:!1,fe,V,h,b,ve,(be=M==null?void 0:M.steeringAsyncTaskId)!=null?be:void 0,T({disablePlaceholder:g!=null?g:!1},y),pe,le);ZY(t.id);const xe=(Oe=a==null?void 0:a.systemHints)==null?void 0:Oe.includes(Pn),ce=bs();if(ce){const at=!((a==null?void 0:a.systemHints)===void 0||a.systemHints.length===0||a.systemHints.length===1&&a.systemHints.includes(Ye.Search)),kt=((st=(Ze=(qe=c==null?void 0:c.metadata)==null?void 0:qe.attachments)==null?void 0:Ze.length)!=null?st:0)>0,Nt=c!=null&&c.metadata?c.metadata[DR]:void 0,Ot=!!((rt=Nt==null?void 0:Nt.sources)!=null&&rt.length),At=at||kt||Ot;if(c){const Wt=xo(c,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(Kr.getState().updateFromEvent(Wt,gme(At)),L)try{const ls=js(v,"3205212221").get("optimistic_fetch",{}),Ua=$a=>{const Ro=ls[$a];typeof Ro!="number"||!isFinite(Ro)||Ro<=0||Math.random()<Ro&&gm(v,Wt,$a)};Ua("images"),Ua("videos"),Ua("news")}catch(hs){}}}xe&&Ge.addAction("agent.conversation.start_attempted",{client_thread_id:String(t.id),model:R});const we=Px(t.id,void 0,{clientInitiated:!0,reason:"new_completion",hasAgentSystemHint:xe});if(lc.publish({kind:"requestCompletion"}),so(t.id,{source:Cn.CLIENT,value:xe?Xt.REALTIME:Xt.STREAMING}),YL.onCompletionRequestStarted(E),Te.updateBeforeRequest(),((wt=I1(v,t.id))==null?void 0:wt.value)===Xt.REALTIME&&!!!($&&h)&&we){const at=await re.awaitWrapper(we,"abortCompletion");at!=null&&at.last_message_id&&(Y=at.last_message_id)}if(_){const at=await re.awaitWrapper(_,"parentMessageId");at&&(Y=at)}const Ue=oL(v,a),{chatReq:Ie,turnstileToken:Me,proofToken:te}=Tme(Ue)?await re.awaitWrapper(Ue,"completionIntegrity"):Ue;if(Ie.force_login)return;if(S.getQueriesData(L3())==null&&await re.awaitWrapper(S.ensureQueryData(L3()),"modelsQuery"),xle()){const at=await re.awaitWrapper(yle(),"blockingPromises"),kt=Ot=>typeof Ot=="object"&&Ot!=null&&"id"in Ot,Nt=at.flatMap(Ot=>Ot.status!=="fulfilled"||!Ot.value?[]:Array.isArray(Ot.value)?Ot.value.filter(kt):kt(Ot.value)?[Ot.value]:[]);if(Nt.length>0){const Ot=[...Nt].reverse();ae.unshift(...Ot),Eme({conversation:t,request:Te,messages:Ot})}}re.onCompletionStarted(s,R),Te.preflightTime=performance.now()-C;const Q=Ox(v);if(Ge.addFeatureFlagEvaluation("fast_convo",Q),Q&&I!=null){const at=performance.now()-I;at<=6e4&&$e.hist(He.DEFAULT,"fast_conversation_last_prepare_to_convo_client",[{key:"model_id",value:R},{key:"prepare_state",value:String(A)},{key:"has_conduit_token",value:N!=null?"true":"false"}],at)}Q&&ce&&$e.count(He.DEFAULT,"client_request_conduit_token",[{key:"has_conduit_token",value:N!=null?"true":"false"}]),ce&&(m==null||m.logTimingOnce("prompt_request_started")),await Te.sendRequest({conduitToken:N,turnstileToken:Me,proofToken:te,completionMetadata:a,resolvedParentMessageId:Y,messages:ae,extraStreamParams:i,chatReq:Ie,profiler:m})}function Eme({conversation:t,request:e,messages:s}){nt(t.id,n=>{as.updateTree(n,o=>{var i,l,c,u;const a=(u=(l=(i=e.prependMessages)==null?void 0:i[0])!=null?l:e.promptMessage)!=null?u:(c=e.appendMessages)==null?void 0:c[0];if(a&&o.containsNodeOrMessageId(a.id)){for(const d of s)o.containsNodeOrMessageId(d.id)||o.prependNode(a.id,d);return}})})}async function Mme({ctx:t,conversation:e,completionType:s,token:n,serverThreadId:o,preflightTime:a}){const i=a!=null?a:performance.now();if(xt(()=>N2(e)))return;N2.set(e,!0);const l=ln(t),c=xt(()=>WR(t,yc(e))),u=xt(()=>Cs(e).id),d=xt(()=>pp(t)),f=xt(()=>af(t)),m=xt(()=>CC(t)),p=xt(()=>U_(t));so(e.id,{source:Cn.CLIENT,value:Xt.STREAMING});const g=zR(),h="request-".concat(e.id,"-").concat(g),_=Rt(e.id),b=new KL({ctx:t,clientRequestId:h,gizmoType:c,preflightTime:i,isTemporaryChat:d,conversationId:_!=null?_:void 0});Tt(e.id)||To.initThread({clientThreadId:e.id,conversationMode:{kind:Pt.PrimaryAssistant},userId:void 0,accountId:void 0}),To.retainThread(e.id);const y=new jL(t,h,l,void 0,e,void 0,void 0,void 0,void 0,s,u,"url",f,i,c===u1.PROJECT,!1,!1,!1,!1,b,void 0,!1,void 0,void 0,void 0,void 0,void 0,{disablePlaceholder:!0},m,p);y.preflightTime=0,await y.sendResumeRequest({conversationId:o,resumeToken:n,profiler:void 0})}function zp(t){"use forget";const e=F.c(5),s=G();let n;e[0]!==t||e[1]!==s?(n=Et(s,t),e[0]=t,e[1]=s,e[2]=n):n=e[2];const o=n;let a;return e[3]!==o?(a=i=>Ao(T({conversation:o},i)),e[3]=o,e[4]=a):a=e[4],a}const Vr=Bt(()=>Le(null)),ac=Bt(()=>Le(null));function Nme(t,e){const s=ct(t),n=Ee(t,"4100765009");return s!=null&&s.isK12()||n?"k12":e!=null&&e.isHipaaCompliantWorkspace?"health":s!=null&&s.isEnterprise()||s!=null&&s.isSelfServeBusiness()?"new":null}function Ame(){"use forget";var _;const t=F.c(13);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=jt(),t[0]=e):e=t[0];const s=e,{eligible:n,isLoading:o}=Ct(We.NewOnboardingFlow);let a;t[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>Vr(s)===!0,t[1]=a):a=t[1];const i=oe(a),l=eD();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=(_=ct(s))==null?void 0:_.isFree(),t[2]=c):c=t[2];const u=c;let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>_t(s,We.NewOnboardingFlow),t[3]=d):d=t[3];const f=d;let m,p;t[4]!==n||t[5]!==l||t[6]!==o?(m=()=>{if(n&&!o&&!l&&u){Vr.set(s,Ime),ac.set(s,!1);const b=Xe(s,"997657492",{disableExposureLog:!0}).get("onboarding-mode",void 0)==="personality";tO.set(s,b)}},p=[s,n,o,l,u],t[4]=n,t[5]=l,t[6]=o,t[7]=m,t[8]=p):(m=t[7],p=t[8]),x.useEffect(m,p);let g;t[9]===Symbol.for("react.memo_cache_sentinel")?(g=()=>Vr.set(s,!1),t[9]=g):g=t[9];let h;return t[10]!==o||t[11]!==i?(h={isOpen:i,isLoading:o,closeModal:g,markAsViewed:f},t[10]=o,t[11]=i,t[12]=h):h=t[12],h}function Ime(t){return t!=null?t:!0}function jme(){"use forget";var E,M;const t=F.c(28),e=G(),s=ct(e),n=fs(),o=s==null?void 0:s.isWorkspacePlan(),a=s==null?void 0:s.isEnterprisey(),i=s==null?void 0:s.isSelfServeBusiness();let l;t[0]!==e?(l=Ee(e,"4100765009"),t[0]=e,t[1]=l):l=t[1];const u=l||((E=s==null?void 0:s.isK12())!=null?E:!1),d=(M=n==null?void 0:n.isHipaaCompliantWorkspace)!=null?M:!1;let f;t[2]!==n||t[3]!==e?(f=Nme(e,n),t[2]=n,t[3]=e,t[4]=f):f=t[4];const m=f,{eligible:p,isLoading:g}=Ct(We.Onboarding),h=eD();let _;t[5]!==e?(_=()=>Vr(e)===!0,t[5]=e,t[6]=_):_=t[6];const b=oe(_),y=!!o&&n===null;let v,S;t[7]!==e||t[8]!==p||t[9]!==h||t[10]!==a||t[11]!==d||t[12]!==u||t[13]!==g||t[14]!==i||t[15]!==o?(v=()=>{if(!(!o||!p||g||h))if(u)Vr.set(e,Lme),ac.set(e,!1);else if(d){const N=_o(e,"217573384");if(N==null?void 0:N.get("enabled")){Vr.set(e,Ome),ac.set(e,!1);return}}else a?(Vr.set(e,Rme),ac.set(e,!1)):i&&(Vr.set(e,Pme),ac.set(e,!1))},S=[e,o,u,p,g,h,a,i,d],t[7]=e,t[8]=p,t[9]=h,t[10]=a,t[11]=d,t[12]=u,t[13]=g,t[14]=i,t[15]=o,t[16]=v,t[17]=S):(v=t[16],S=t[17]),x.useEffect(v,S);let C,w;t[18]!==e?(C=()=>Vr.set(e,!1),w=()=>_t(e,We.Onboarding),t[18]=e,t[19]=C,t[20]=w):(C=t[19],w=t[20]);let k;return t[21]!==g||t[22]!==b||t[23]!==y||t[24]!==C||t[25]!==w||t[26]!==m?(k={isOpen:b,isLoading:g,isWorkspaceOnboardingVariantLoading:y,closeModal:C,markAsViewed:w,workspaceOnboardingVariant:m},t[21]=g,t[22]=b,t[23]=y,t[24]=C,t[25]=w,t[26]=m,t[27]=k):k=t[27],k}function Pme(t){return t!=null?t:!0}function Rme(t){return t!=null?t:!0}function Ome(t){return t!=null?t:!0}function Lme(t){return t!=null?t:!0}function XL(){"use forget";const t=F.c(6),e=G();let s;if(t[0]!==e){const l=ct(e);s=l==null?void 0:l.isWorkspacePlan(),t[0]=e,t[1]=s}else s=t[1];const n=s,o=Ame(),a=jme();let i;return t[2]!==n||t[3]!==o||t[4]!==a?(i=n?U(T({},a),{isWorkspaceUser:!0}):U(T({},o),{isWorkspaceUser:!1,isWorkspaceOnboardingVariantLoading:!1,workspaceOnboardingVariant:void 0}),t[2]=n,t[3]=o,t[4]=a,t[5]=i):i=t[5],i}function eD(){"use forget";const t=F.c(2),[e]=Yn();let s;return t[0]!==e?(s=e.has("prompt"),t[0]=e,t[1]=s):s=t[1],s}const Ld=Ne({hi:{id:"new_user_onboarding.hi",defaultMessage:"Hi"},hiThere:{id:"new_user_onboarding.hi_there",defaultMessage:"Hi there"},tryUploadingAFile:{defaultMessage:"Try uploading a file",id:"chatgpt.new-onboarding.try-uploading-a-file"},uploadFileExample:{defaultMessage:"ChatGPT can summarize and analyze your files or images.",id:"chatgpt.new-onboarding.upload-file-exp"},school:{defaultMessage:"School",id:"chatgpt.new-onboarding.school"},schoolPrompt:{defaultMessage:"Im trying to learn and do better in school.",id:"chatgpt.new-onboarding.school-prompt"},work:{defaultMessage:"Work",id:"chatgpt.new-onboarding.work"},workPrompt:{defaultMessage:"I'm here to learn and grow in my work.",id:"chatgpt.new-onboarding.work-prompt"},personalTasks:{defaultMessage:"Personal tasks",id:"chatgpt.new-onboarding.personal-tasks"},personalTasksPrompt:{defaultMessage:"I'm here for my personal tasks",id:"chatgpt.new-onboarding.personal-tasks-prompt"},funAndEntertainment:{defaultMessage:"Fun and entertainment",id:"chatgpt.new-onboarding.fun-and-entertainment"},funAndEntertainmentPrompt:{defaultMessage:"I'm here to explore fun ideas and relax.",id:"chatgpt.new-onboarding.fun-and-entertainment-prompt"},other:{defaultMessage:"Other",id:"chatgpt.new-onboarding.other"},justCurious:{defaultMessage:"Just curious",id:"chatgpt.new-onboarding.just-curious"},justCuriousPrompt:{defaultMessage:"I'm just curious, exploring what you can do.",id:"chatgpt.new-onboarding.just-curious-prompt"},tryAnExample:{defaultMessage:"Try an example below or send any message in the message box below.",id:"chatgpt.new-onboarding.try-an-example"}});function Dme(){"use forget";const t=F.c(5),e=G(),{eligible:s,isLoading:n}=Ct(We.NewOnboardingConvo);let o;t[0]!==e?(o=()=>_t(e,We.NewOnboardingConvo),t[0]=e,t[1]=o):o=t[1];const a=o,i=s&&!n;let l;return t[2]!==a||t[3]!==i?(l={isEligible:i,markAsViewed:a},t[2]=a,t[3]=i,t[4]=l):l=t[4],l}function Aet(t){"use forget";const e=F.c(20),s=G();let n;e[0]!==s?(n=qR(),e[0]=s,e[1]=n):n=e[1];const o=n,a=Sc(Fme),{isEligible:i,markAsViewed:l}=Dme();let c;e[2]!==t?(c={clientThreadId:t},e[2]=t,e[3]=c):c=e[3];const u=Ok(c);let d;e[4]!==s?(d=Xe(s,"109457"),e[4]=s,e[5]=d):d=e[5];const f=d,m=ne(),p=NR(),g=Hs();let h;e[6]!==p||e[7]!==g?(h=p||tne(g),e[6]=p,e[7]=g,e[8]=h):h=e[8];const _=h;let b,y;e[9]!==t||e[10]!==u||e[11]!==_||e[12]!==m||e[13]!==o||e[14]!==i||e[15]!==f||e[16]!==l||e[17]!==a?(b=()=>{i&&!a&&(m.locale===KR||m.messages!==XY)&&!o&&!_&&f.get("onboarding_style","")==="CONVO"&&(tn.setOnboardingConvoState({onboardingConvoClientThreadId:t}),l(),u({eventSource:"url",stepPrompt:m.formatMessage(Ld.hi),messageMetadata:{is_visually_hidden_from_conversation:!0},authorMetadata:{real_author:MC.Onboarding}}),pt.logEvent("chatgpt_convo_onboarding_started"))},y=[i,l,u,a,m,m.locale,m.messages,t,f,o,_],e[9]=t,e[10]=u,e[11]=_,e[12]=m,e[13]=o,e[14]=i,e[15]=f,e[16]=l,e[17]=a,e[18]=b,e[19]=y):(b=e[18],y=e[19]),x.useEffect(b,y)}function Fme(t){var e;return(e=t.onboardingConvoState)!=null?e:void 0}const Ok=t=>{"use forget";const e=F.c(2),{clientThreadId:s}=t,n=zp(s);let o;return e[0]!==n?(o=a=>{var f;const d=a,{stepPrompt:i,messageMetadata:l,authorMetadata:c}=d,u=De(d,["stepPrompt","messageMetadata","authorMetadata"]);n(U(T({},u),{promptMessage:cn(i,l!=null?l:void 0,c!=null?c:void 0),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:Pt.PrimaryAssistant},systemHints:(f=l==null?void 0:l.onboarding)==null?void 0:f.system_hints},skipNotification:!0}))},e[0]=n,e[1]=o):o=e[1],o},Iet=t=>{"use forget";const e=F.c(5),{clientThreadId:s}=t,n=G(),o=zp(s),{open:a}=sD();let i;return e[0]!==s||e[1]!==n||e[2]!==a||e[3]!==o?(i=l=>{const{suggestedPrompt:c,index:u,isOnboarding:d}=l;d&&(_t(n,We.Onboarding),a()),o({promptMessage:cn(c.prompt,{is_starter_prompt:!0,suggestion_type:it.Starter,starter_prompt_id:c.id}),eventSource:"mouse",completionMetadata:{conversationMode:{kind:Pt.PrimaryAssistant}},skipNotification:!0}),Fx(c,u,s)},e[0]=s,e[1]=n,e[2]=a,e[3]=o,e[4]=i):i=e[4],i};function tD(t){"use forget";var d;const e=F.c(9),s=G(),n=Qe(t,Bme),{eligible:o,isLoading:a}=Ct(We.hasSeenFilePickerNuxTooltip);let i;e[0]!==s?(i=()=>_t(s,We.hasSeenFilePickerNuxTooltip),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==o||e[3]!==a||e[4]!==(n==null?void 0:n.triggered_tools)?(c=((d=n==null?void 0:n.triggered_tools)==null?void 0:d.includes("file_upload"))&&o&&!a,e[2]=o,e[3]=a,e[4]=n==null?void 0:n.triggered_tools,e[5]=c):c=e[5];let u;return e[6]!==l||e[7]!==c?(u={isEligible:c,markAsViewed:l},e[6]=l,e[7]=c,e[8]=u):u=e[8],u}function Bme(t){var e,s;return(s=(e=Se.findNode(t,Ume))==null?void 0:e.message.metadata)==null?void 0:s.onboarding}function Ume(t){return t.message.author.role===ot.User}function jet(t){return Xe(t,"109457",{disableExposureLog:!0}).get("onboarding_show_followups",!1)}const Ly=Bt(()=>Le(null)),Qg=Bt(()=>Le({isOpen:null,isUserTriggered:!1}));function $me(){"use forget";var S;const t=F.c(25),e=G(),{eligible:s,isLoading:n}=Ct(We.NewPromptOnboardingFlow);let o;t[0]!==e?(o=()=>Qg(e),t[0]=e,t[1]=o):o=t[1];const{isOpen:a,isUserTriggered:i}=oe(o),l=G();let c;t[2]!==l?(c=Xe(l,"109457",{disableExposureLog:!0}).get("prompt_onboarding_style","list"),t[2]=l,t[3]=c):c=t[3];const u=c;let d;t[4]!==e?(d=(S=ct(e))==null?void 0:S.isFree(),t[4]=e,t[5]=d):d=t[5];const f=d;let m;t[6]!==e?(m=()=>_t(e,We.NewPromptOnboardingFlow),t[6]=e,t[7]=m):m=t[7];const p=m;let g,h;t[8]!==e||t[9]!==s||t[10]!==f||t[11]!==n?(g=()=>{s&&!n&&f&&Qg.set(e,Gme)},h=[e,s,n,f],t[8]=e,t[9]=s,t[10]=f,t[11]=n,t[12]=g,t[13]=h):(g=t[12],h=t[13]),x.useEffect(g,h);const _=!!a;let b,y;t[14]!==e?(b=()=>Qg.set(e,{isOpen:!0,isUserTriggered:!0}),y=()=>Qg.set(e,Hme),t[14]=e,t[15]=b,t[16]=y):(b=t[15],y=t[16]);let v;return t[17]!==n||t[18]!==i||t[19]!==p||t[20]!==u||t[21]!==_||t[22]!==b||t[23]!==y?(v={isOpen:_,isUserTriggered:i,isLoading:n,onboardingStyle:u,reopenModal:b,closeModal:y,markAsViewed:p},t[17]=n,t[18]=i,t[19]=p,t[20]=u,t[21]=_,t[22]=b,t[23]=y,t[24]=v):v=t[24],v}function Hme(t){return U(T({},t),{isOpen:!1})}function Gme(t){var e;return U(T({},t),{isOpen:(e=t.isOpen)!=null?e:!0})}function Vme(){"use forget";var h;const t=F.c(19),e=G(),{eligible:s,isLoading:n}=Ct(We.NewStaticOnboardingFlow);let o;t[0]!==e?(o=()=>Ly(e)===!0,t[0]=e,t[1]=o):o=t[1];const a=oe(o);let i;t[2]!==e?(i=(h=ct(e))==null?void 0:h.isFree(),t[2]=e,t[3]=i):i=t[3];const l=i;let c;t[4]!==e?(c=()=>_t(e,We.NewStaticOnboardingFlow),t[4]=e,t[5]=c):c=t[5];const u=c;let d,f;t[6]!==e||t[7]!==s||t[8]!==l||t[9]!==n?(d=()=>{s&&!n&&l&&(Ly.set(e,zme),ac.set(e,!1))},f=[e,s,n,l],t[6]=e,t[7]=s,t[8]=l,t[9]=n,t[10]=d,t[11]=f):(d=t[10],f=t[11]),x.useEffect(d,f);const m=!!a;let p;t[12]!==e?(p=()=>{Ly.set(e,!1),ac.set(e,!0)},t[12]=e,t[13]=p):p=t[13];let g;return t[14]!==n||t[15]!==u||t[16]!==m||t[17]!==p?(g={isOpen:m,isLoading:n,closeModal:p,markAsViewed:u},t[14]=n,t[15]=u,t[16]=m,t[17]=p,t[18]=g):g=t[18],g}function zme(t){return t!=null?t:!0}const Jg=Bt(()=>Le({isOpen:!1,viewedInClientThreadId:null}));function sD(){"use forget";const t=F.c(12),e=G();let s;t[0]!==e?(s=()=>Jg(e),t[0]=e,t[1]=s):s=t[1];const{isOpen:n,viewedInClientThreadId:o}=oe(s);let a,i,l;t[2]!==e?(a=()=>Jg.set(e,qme),i=()=>Jg.set(e,Wme),l=u=>Jg.set(e,d=>U(T({},d),{viewedInClientThreadId:u})),t[2]=e,t[3]=a,t[4]=i,t[5]=l):(a=t[3],i=t[4],l=t[5]);let c;return t[6]!==n||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==o?(c={isOpen:n,viewedInClientThreadId:o,close:a,open:i,markViewedInClientThreadId:l},t[6]=n,t[7]=a,t[8]=i,t[9]=l,t[10]=o,t[11]=c):c=t[11],c}function Wme(t){return U(T({},t),{isOpen:!0})}function qme(t){return U(T({},t),{isOpen:!1})}function Pet(){"use forget";const t=F.c(7),e=G(),s=Xe(e,"109457",{disableExposureLog:!0}),n=xs();let o;t[0]!==e?(o=ut(),t[0]=e,t[1]=o):o=t[1];const a=o,[i,l]=yi(Be.HasDismissedOnboardingSidebarEntry,!1,Nx),c=typeof(n==null?void 0:n.created)=="number"?n.created>1e12?n.created:n.created*1e3:void 0,u=typeof window<"u"&&window.innerHeight>=667,d=!!(a&&c!=null&&Date.now()-c<=6048e5&&u),f=s.get("onboarding_sidebar_entry_style","");let m;return t[2]!==i||t[3]!==d||t[4]!==l||t[5]!==f?(m={style:f,hasDismissed:i,setHasDismissed:l,isEligible:d},t[2]=i,t[3]=d,t[4]=l,t[5]=f,t[6]=m):m=t[6],m}function Ret(t,e=!1){return Xe(t,"109457",{disableExposureLog:!e})}const un=Ne({marketing:{id:"onboarding.departments.marketing",defaultMessage:"Marketing"},analytics:{id:"onboarding.departments.analytics",defaultMessage:"Data or Analytics"},product:{id:"onboarding.departments.product",defaultMessage:"Product Management"},comms:{id:"onboarding.departments.comms",defaultMessage:"Communications"},finance:{id:"onboarding.departments.finance",defaultMessage:"Finance or Accounting"},customer_experience:{id:"onboarding.departments.customer_experience",defaultMessage:"Customer Experience"},project_management:{id:"onboarding.departments.project_management",defaultMessage:"Project or Program Management"},engineering:{id:"onboarding.departments.engineering",defaultMessage:"Engineering"},education_professional:{id:"onboarding.departments.education_professional",defaultMessage:"Education Professional"},design:{id:"onboarding.departments.design",defaultMessage:"Design"},administrative:{id:"onboarding.departments.administrative",defaultMessage:"Administrative Assistant"},partnerships:{id:"onboarding.departments.partnerships",defaultMessage:"Partnerships"},it:{id:"onboarding.departments.it",defaultMessage:"Information Technology (IT)"},ops:{id:"onboarding.departments.ops",defaultMessage:"Operations"},human_resources:{id:"onboarding.departments.human_resources",defaultMessage:"Human Resources"},research:{id:"onboarding.departments.research",defaultMessage:"Research & Development"},sales:{id:"onboarding.departments.sales",defaultMessage:"Sales"},legal:{id:"onboarding.departments.legal",defaultMessage:"Legal"},healthcare:{id:"onboarding.departments.healthcare",defaultMessage:"Healthcare Professional"},other:{id:"onboarding.departments.other",defaultMessage:"Other"}}),Dn=Ne({engineering:{id:"onboarding.edu_departments.engineering",defaultMessage:"Engineering"},math:{id:"onboarding.edu_departments.math",defaultMessage:"Mathematics"},applied_sciences:{id:"onboarding.edu_departments.applied_sciences",defaultMessage:"Applied Sciences"},finance:{id:"onboarding.edu_departments.finance",defaultMessage:"Finance or Accounting"},health:{id:"onboarding.edu_departments.health",defaultMessage:"Health or Medical"},law:{id:"onboarding.edu_departments.law",defaultMessage:"Law"},business:{id:"onboarding.edu_departments.business",defaultMessage:"Business"},social:{id:"onboarding.edu_departments.social",defaultMessage:"Social Sciences"},liberal_art:{id:"onboarding.edu_departments.liberal_art",defaultMessage:"Liberal Arts"},fine_art:{id:"onboarding.edu_departments.fine_art",defaultMessage:"Fine Arts"},linguistics:{id:"onboarding.edu_departments.linguistics",defaultMessage:"Linguistics"},teaching:{id:"onboarding.edu_departments.teaching",defaultMessage:"Teaching"},dev:{id:"onboarding.edu_departments.dev",defaultMessage:"Research & Development"},campus_ops:{id:"onboarding.edu_departments.campus_ops",defaultMessage:"Campus Operations"},it:{id:"onboarding.edu_departments.it",defaultMessage:"Information Technology (IT)"},other:{id:"onboarding.edu_departments.other",defaultMessage:"Other"}}),Ti=Ne({team_member:{id:"onboarding.role.team_member",defaultMessage:"Team Member/ Individual Contributor"},manager:{id:"onboarding.role.manager",defaultMessage:"Manager"},student:{id:"onboarding.role.student",defaultMessage:"Student"},executive:{id:"onboarding.role.executive",defaultMessage:"Executive"},director:{id:"onboarding.role.director",defaultMessage:"Director"},business_owner:{id:"onboarding.role.business_owner",defaultMessage:"Business Owner"},freelancer:{id:"onboarding.role.freelancer",defaultMessage:"Freelancer"},other:{id:"onboarding.role.other",defaultMessage:"Other"}}),Eu=Ne({student:{id:"onboarding.edu_role.student",defaultMessage:"Student"},instructional_staff:{id:"onboarding.edu_role.instructional_staff",defaultMessage:"Instructional Staff"},researcher:{id:"onboarding.edu_role.researcher",defaultMessage:"Researcher"},admin:{id:"onboarding.edu_role.admin",defaultMessage:"Administration"},alumni:{id:"onboarding.edu_role.alumni",defaultMessage:"Alumni"},other:{id:"onboarding.edu_role.other",defaultMessage:"Other"}}),Zg=Ne({teacher:{id:"k12.onboarding.role.teacher",defaultMessage:"Teacher"},administratorDistrictLeader:{id:"k12.onboarding.role.administrator_district_leader",defaultMessage:"Administrator / District Leader"},itTechnicalStaff:{id:"k12.onboarding.role.it_staff",defaultMessage:"IT / Technical Staff"},others:{id:"k12.onboarding.role.others",defaultMessage:"Others"},other:{id:"k12.onboarding.role.other",defaultMessage:"Other"}}),Oet=[{id:"team_member",displayValue:Ti.team_member},{id:"manager",displayValue:Ti.manager},{id:"director",displayValue:Ti.director},{id:"executive",displayValue:Ti.executive},{id:"business_owner",displayValue:Ti.business_owner},{id:"freelancer",displayValue:Ti.freelancer},{id:"student",displayValue:Ti.student},{id:"other",displayValue:Ti.other}],Let=[{id:"student",displayValue:Eu.student},{id:"instructional_staff",displayValue:Eu.instructional_staff},{id:"researcher",displayValue:Eu.researcher},{id:"admin",displayValue:Eu.admin},{id:"alumni",displayValue:Eu.alumni},{id:"other",displayValue:Eu.other}],Det=[{id:"teacher",displayValue:Zg.teacher},{id:"administrator_district_leader",displayValue:Zg.administratorDistrictLeader},{id:"it_staff",displayValue:Zg.itTechnicalStaff},{id:"others",displayValue:Zg.others}],Fet=[{id:"marketing",displayValue:un.marketing},{id:"analytics",displayValue:un.analytics},{id:"product",displayValue:un.product},{id:"comms",displayValue:un.comms},{id:"engineering",displayValue:un.engineering},{id:"education_professional",displayValue:un.education_professional},{id:"finance",displayValue:un.finance},{id:"customer_experience",displayValue:un.customer_experience},{id:"project_management",displayValue:un.project_management},{id:"design",displayValue:un.design},{id:"administrative",displayValue:un.administrative},{id:"it",displayValue:un.it},{id:"ops",displayValue:un.ops},{id:"human_resources",displayValue:un.human_resources},{id:"research",displayValue:un.research},{id:"sales",displayValue:un.sales},{id:"partnerships",displayValue:un.partnerships},{id:"legal",displayValue:un.legal},{id:"healthcare",displayValue:un.healthcare},{id:"other",displayValue:un.other}],Bet=[{id:"engineering",displayValue:Dn.engineering},{id:"math",displayValue:Dn.math},{id:"applied_sciences",displayValue:Dn.applied_sciences},{id:"finance",displayValue:Dn.finance},{id:"health",displayValue:Dn.health},{id:"law",displayValue:Dn.law},{id:"business",displayValue:Dn.business},{id:"social",displayValue:Dn.social},{id:"liberal_art",displayValue:Dn.liberal_art},{id:"fine_art",displayValue:Dn.fine_art},{id:"linguistics",displayValue:Dn.linguistics},{id:"teaching",displayValue:Dn.teaching},{id:"dev",displayValue:Dn.dev},{id:"campus_ops",displayValue:Dn.campus_ops},{id:"it",displayValue:Dn.it},{id:"other",displayValue:Dn.other}],Uet=[{id:"2-10",displayValue:"2-10"},{id:"11-50",displayValue:"11-50"},{id:"51-200",displayValue:"51-200"},{id:"201-500",displayValue:"201-500"},{id:"500+",displayValue:"500+"}];var Kme=(t=>(t.unsupported_app_version="unsupported_app_version",t))(Kme||{});const $et=t=>{const e=Ee(t,"2335877601");return ka?e?{isLoading:!1,isOpen:!0,modalType:"unsupported_app_version",onClose:()=>{}}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}},Het="chatgpt",Get="chatgpt-alt",Vet="oauth_complete",zet="ms-windows-store://pdp/?productid=9nt1r1c2hh7j",Wet="https://apps.microsoft.com/detail/9nt1r1c2hh7j",Yme=({className:t})=>r.jsxs("div",{className:z("flex-column flex gap-[10px]",t),children:[r.jsx("div",{className:"relative flex h-[62px] w-[88px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(j,T({},aN.alt))})}),r.jsx("div",{className:"relative flex h-[62px] w-[232px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(j,T({},aN.space))})})]}),aN=Ne({alt:{id:"DesktopOnboardingKeyboardIllustration.altKeyboardKeyLabel",defaultMessage:"alt"},space:{id:"DesktopOnboardingKeyboardIllustration.spaceKeyboardKeyLabel",defaultMessage:"space"}}),rN=We.hasSeenWindowsAppOnboarding,Qme=()=>{"use forget";const t=F.c(7),e=G(),{eligible:s,isLoading:n}=Ct(rN);if(!ka||qR()){let i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i={isLoading:!1,isOpen:!1,onClose:null},t[0]=i):i=t[0],i}if(n){let i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i={isLoading:!0,isOpen:null,onClose:null},t[1]=i):i=t[1],i}let o;t[2]!==e?(o=()=>_t(e,rN),t[2]=e,t[3]=o):o=t[3];let a;return t[4]!==s||t[5]!==o?(a={isLoading:!1,isOpen:s,onClose:o},t[4]=s,t[5]=o,t[6]=a):a=t[6],a},qet=({onClose:t})=>{const{isOpen:e,onClose:s}=Qme();return e?(pt.logEvent("chatgpt_sidetron_onboarding_nux_shown"),r.jsx(Ft,{testId:"modal-desktop-onboarding",isOpen:!0,onClose:Tn,type:"success",noPadding:!0,position:"center",className:"max-w-[552px] p-14 sm:max-w-[552px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[r.jsx(Es,{className:"absolute end-4 top-4",onClick:()=>{t(),s()}}),r.jsx("p",{className:"mb-3 text-center text-2xl font-bold",children:r.jsx(j,T({},Xg.title))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(j,T({},Xg.subtitle))}),r.jsx(Yme,{className:"my-8"}),r.jsx("p",{className:"mb-2 text-center text-lg font-semibold",children:r.jsx(j,T({},Xg.keyboardShortcut))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(j,T({},Xg.keyboardShortcutHint))})]})})):null},Xg=Ne({title:{id:"DesktopOnboardingModal.title",defaultMessage:"Quickly access ChatGPT"},subtitle:{id:"DesktopOnboardingModal.subtitle",defaultMessage:"Use a shortcut to ask questions, upload files, or take screenshots from anywhere on your computer."},keyboardShortcut:{id:"DesktopOnboardingModal.keyboardShortcut1",defaultMessage:"Press Alt+Space to open the companion window"},keyboardShortcutHint:{id:"DesktopOnboardingModal.keyboardShortcutHint",defaultMessage:"You can change this shortcut in Settings."}});function Jme(t){const e=x.useRef(!1);return()=>{e.current||(t(),e.current=!0)}}function Ket(t=30){"use no forget";const e=G(),{session:s}=vl(e);return x.useMemo(()=>{const n=s==null?void 0:s.accessToken;if(!n)return!1;let o;try{const u=UP(n);o=u==null?void 0:u.pwd_auth_time}catch(u){return!1}if(o==null)return!1;const a=o<1e12?o*1e3:o,l=Date.now()-a;return l>=0&&l<=t*1e3},[s==null?void 0:s.accessToken,t])}const Zme="https://persistent.oaistatic.com/chatgpt/codex-arcticfox.png",Wr=Ne({heading:{id:"wham.codexArticFox.heading",defaultMessage:"GPT-5.1-Codex-Max"},subtitle:{id:"wham.codexArticFox.subtitle",defaultMessage:"Codex just got an upgrade"},subtitle2:{id:"wham.codexArticFox.subtitle2",defaultMessage:"Introducing GPT-5.1-Codex-Max"},body:{id:"wham.codexArticFox.body",defaultMessage:"Codex is now powered by GPT-5.1-Codex-Max, our latest frontier agentic coding model. It is <bold>smarter and faster</bold> than its predecessors and capable of long-running project-scale work."},cta:{id:"wham.codexArticFox.cta",defaultMessage:"Try new model now"}});function Xme(){const t=G(),e=x.useMemo(()=>new eQ(t),[t]),s=oe(()=>Cd(e));return{composerController:e,isComposerEmpty:s}}function Yet(t){"use forget";const e=F.c(42),{onClose:s}=t,n=G(),{composerController:o}=Xme(),a=ne(),{eligible:i,isLoading:l}=jw();if(l||!i)return null;let c;e[0]!==o||e[1]!==n||e[2]!==s?(c=()=>{_t(n,Iw),s==null||s(),o&&no(Ht(o))},e[0]=o,e[1]=n,e[2]=s,e[3]=c):c=e[3];const u=c;let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d={backgroundImage:"url(".concat(Zme,")")},e[4]=d):d=e[4];let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("div",{"aria-hidden":!0,className:z("pointer-events-none absolute inset-0 z-10","dark:bg-none","bg-[radial-gradient(ellipse_140%_90%_at_50%_130%,var(--bg-primary)_0%,var(--bg-primary)_50%,transparent_90%)]")}),e[5]=f):f=e[5];let m;e[6]!==a?(m=a.formatMessage(Wr.heading),e[6]=a,e[7]=m):m=e[7];let p;e[8]!==m?(p=r.jsxs("div",{className:"relative h-[300px] w-full overflow-hidden bg-cover bg-center",style:d,children:[f,r.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center p-6 text-center text-white",children:r.jsx("div",{className:"text-3xl leading-9 font-semibold",children:m})})]}),e[8]=m,e[9]=p):p=e[9];let g;e[10]!==a?(g=a.formatMessage(Wr.subtitle),e[10]=a,e[11]=g):g=e[11];let h;e[12]!==g?(h=r.jsx("div",{className:"text-token-text-primary text-xl leading-7 font-semibold whitespace-nowrap",children:g}),e[12]=g,e[13]=h):h=e[13];let _;e[14]!==a?(_=a.formatMessage(Wr.subtitle2),e[14]=a,e[15]=_):_=e[15];let b;e[16]!==_?(b=r.jsx("div",{className:"text-token-text-primary text-xl leading-7 font-semibold whitespace-nowrap",children:_}),e[16]=_,e[17]=b):b=e[17];let y;e[18]!==h||e[19]!==b?(y=r.jsxs("div",{children:[h,b]}),e[18]=h,e[19]=b,e[20]=y):y=e[20];let v;e[21]!==a?(v=a.formatMessage(Wr.body,{bold:epe}),e[21]=a,e[22]=v):v=e[22];let S;e[23]!==v?(S=r.jsx("div",{className:"text-token-text-secondary text-sm leading-6",children:v}),e[23]=v,e[24]=S):S=e[24];let C;e[25]!==y||e[26]!==S?(C=r.jsxs("div",{className:"flex w-full max-w-[420px] flex-col items-center gap-3 self-center pb-6 text-center",children:[y,S]}),e[25]=y,e[26]=S,e[27]=C):C=e[27];let w;e[28]!==a?(w=a.formatMessage(Wr.cta),e[28]=a,e[29]=w):w=e[29];let k;e[30]!==u||e[31]!==w?(k=r.jsx("div",{className:"flex justify-center",children:r.jsx(ke,{color:"primary",onClick:u,size:"medium",children:w})}),e[30]=u,e[31]=w,e[32]=k):k=e[32];let E;e[33]!==C||e[34]!==k?(E=r.jsxs("div",{className:"px-8 pb-10",children:[C,k]}),e[33]=C,e[34]=k,e[35]=E):E=e[35];let M;e[36]!==E||e[37]!==p?(M=r.jsxs("div",{className:"bg-primary relative flex flex-col gap-6 overflow-hidden",children:[p,E]}),e[36]=E,e[37]=p,e[38]=M):M=e[38];let N;return e[39]!==u||e[40]!==M?(N=r.jsx(Ft,{isOpen:!0,onClose:u,testId:"modal-codex-artic-fox",position:"center",size:"custom",className:"max-w-[520px]",noPadding:!0,showOverlayBackground:!0,children:M}),e[39]=u,e[40]=M,e[41]=N):N=e[41],N}function epe(t){return r.jsx("span",{className:"text-[#3794FF]",children:t})}const nD=Bt(()=>YR(()=>({width:window.innerWidth,height:window.innerHeight}),t=>rf(window,{resize:t}),{getServerFallback:()=>({width:tQ()?360:768,height:640})}));function Qet(t){"use forget";const e=F.c(107),{onClose:s}=t,n=G(),o=ne(),{eligible:a}=nO(),{eligible:i}=jw();let l;e[0]!==n||e[1]!==i?(l=()=>{_t(n,sO),i&&_t(n,Iw)},e[0]=n,e[1]=i,e[2]=l):l=e[2];const c=l,[u,d]=x.useState(!0),[f,m]=x.useState(0),p=NC();let g;e[3]!==n?(g=()=>Math.min(390,Math.round(nD(n).height*.4)),e[3]=n,e[4]=g):g=e[4];const h=oe(g),_=h<260,b=x.useRef(null);let y,v;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{var fe;(fe=b.current)==null||fe.focus()},v=[],e[5]=y,e[6]=v):(y=e[5],v=e[6]),x.useEffect(y,v);let S;e:{let fe;e[7]!==o?(fe=o.formatMessage({id:"wham.codexOnboardingModal.title.welcome",defaultMessage:"Your software engineering agent"}),e[7]=o,e[8]=fe):fe=e[8];let pe;e[9]!==o?(pe=o.formatMessage({id:"wham.codexOnboardingModal.body.welcome",defaultMessage:"Codex understands your codebase, answers questions, and writes tested code you can ship."}),e[9]=o,e[10]=pe):pe=e[10];let le;e[11]!==fe||e[12]!==pe?(le={id:"welcome",image:"https://persistent.oaistatic.com/chatgpt/codex-web-view-diff.png",title:fe,body:pe},e[11]=fe,e[12]=pe,e[13]=le):le=e[13];let ve;e[14]!==o?(ve=o.formatMessage({id:"wham.codexOnboardingModal.title.everywhere",defaultMessage:"Everywhere you work"}),e[14]=o,e[15]=ve):ve=e[15];let Te;e[16]!==o?(Te=o.formatMessage({id:"wham.codexOnboardingModal.body.everywhere",defaultMessage:"Codex is built into your IDE, CLI, GitHub, and the web. Work side-by-side locally, or let it keep going in the cloud when you step away."}),e[16]=o,e[17]=Te):Te=e[17];let xe;e[18]!==Te||e[19]!==ve?(xe={id:"everywhere",image:"https://persistent.oaistatic.com/chatgpt/codex-supported-platform-apple-icons.png",title:ve,body:Te},e[18]=Te,e[19]=ve,e[20]=xe):xe=e[20];let ce;e[21]!==o?(ce=o.formatMessage({id:"wham.codexOnboardingModal.title.code-review",defaultMessage:"Deep code review"}),e[21]=o,e[22]=ce):ce=e[22];let we;e[23]!==o?(we=o.formatMessage({id:"wham.codexOnboardingModal.body.code-review",defaultMessage:"Codex reviews pull requests using the entire codebase, running code when needed to suggest improvements."}),e[23]=o,e[24]=we):we=e[24];let ge;e[25]!==ce||e[26]!==we?(ge={id:"code-review",image:"https://persistent.oaistatic.com/chatgpt/codex-code-review.png",title:ce,body:we},e[25]=ce,e[26]=we,e[27]=ge):ge=e[27];let Ae;e[28]!==xe||e[29]!==ge||e[30]!==le?(Ae=[le,xe,ge],e[28]=xe,e[29]=ge,e[30]=le,e[31]=Ae):Ae=e[31];const Ue=Ae;if(!i){S=Ue;break e}let Ie;e[32]!==o?(Ie=o.formatMessage(Wr.subtitle),e[32]=o,e[33]=Ie):Ie=e[33];let Me;e[34]!==o?(Me=o.formatMessage(Wr.subtitle2),e[34]=o,e[35]=Me):Me=e[35];let te;e[36]!==o?(te=o.formatMessage(Wr.body,{bold:spe}),e[36]=o,e[37]=te):te=e[37];let Q;e[38]!==Ie||e[39]!==Me||e[40]!==te?(Q={id:"codex-articFox",image:"https://persistent.oaistatic.com/chatgpt/codex-arcticfox.png",title:Ie,subtitle:Me,body:te},e[38]=Ie,e[39]=Me,e[40]=te,e[41]=Q):Q=e[41];let ie;e[42]!==Ue||e[43]!==Q?(ie=[Q,...Ue],e[42]=Ue,e[43]=Q,e[44]=ie):ie=e[44],S=ie}const C=S,w=Math.min(f,C.length-1),k=C[w];if(!a||!u)return null;let E;e[45]!==c||e[46]!==s?(E=()=>{c(),d(!1),s==null||s()},e[45]=c,e[46]=s,e[47]=E):E=e[47];const M=E;let N;e[48]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{m(tpe)},e[48]=N):N=e[48];const A=N;let I;e[49]!==w||e[50]!==c||e[51]!==s||e[52]!==C.length?(I=()=>{w<C.length-1?m(fe=>Math.min(fe+1,C.length-1)):(c(),d(!1),s==null||s())},e[49]=w,e[50]=c,e[51]=s,e[52]=C.length,e[53]=I):I=e[53];const P=I;let R;e[54]!==c||e[55]!==s?(R=()=>{c(),d(!1),s==null||s()},e[54]=c,e[55]=s,e[56]=R):R=e[56];let O;e[57]!==k.id||e[58]!==k.image||e[59]!==_||e[60]!==o||e[61]!==M||e[62]!==p||e[63]!==h?(O=!_&&r.jsxs("div",{className:"relative w-full select-none",style:{height:h},children:[r.jsx(Ms,{children:r.jsx(gt.img,{src:k.image,alt:o.formatMessage({id:"wham.codexOnboardingModal.illustration",defaultMessage:"Codex onboarding illustration"}),className:"absolute inset-0 h-full w-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:p?1e-5:.25,ease:"easeInOut"}},k.image)}),r.jsx("div",{"aria-hidden":!0,className:z("pointer-events-none absolute inset-0 z-10","dark:bg-none","bg-[radial-gradient(ellipse_140%_90%_at_50%_130%,var(--bg-primary)_0%,var(--bg-primary)_50%,transparent_90%)]")}),k.id==="codex-articFox"&&r.jsx("div",{className:"pointer-events-none absolute inset-0 z-20 flex items-center justify-center px-10 text-center",children:r.jsx("div",{className:"text-3xl leading-9 font-semibold text-white drop-shadow-[0_6px_18px_rgba(0,0,0,0.35)]",children:o.formatMessage(Wr.heading)})}),r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(Es,{onClick:M,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})})]}),e[57]=k.id,e[58]=k.image,e[59]=_,e[60]=o,e[61]=M,e[62]=p,e[63]=h,e[64]=O):O=e[64];let L;e[65]!==_||e[66]!==M?(L=_&&r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(Es,{onClick:M,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})}),e[65]=_,e[66]=M,e[67]=L):L=e[67];const D=_?null:"-translate-y-6 dark:-translate-y-0";let H;e[68]!==D?(H=z("mx-auto flex h-full max-w-[400px] flex-col items-center justify-center gap-2",D),e[68]=D,e[69]=H):H=e[69];let V;e[70]!==k.title?(V=r.jsx("div",{className:"max-w-[360px] text-center text-2xl font-semibold",children:k.title}),e[70]=k.title,e[71]=V):V=e[71];let q;e[72]!==k.subtitle?(q=k.subtitle&&r.jsx("div",{className:"max-w-[360px] text-center text-2xl font-semibold",children:k.subtitle}),e[72]=k.subtitle,e[73]=q):q=e[73];let W;e[74]!==V||e[75]!==q?(W=r.jsxs("div",{children:[V,q]}),e[74]=V,e[75]=q,e[76]=W):W=e[76];let $;e[77]!==k.body?($=r.jsx("div",{className:"text-token-text-secondary text-md w-full text-center leading-6",children:k.body}),e[77]=k.body,e[78]=$):$=e[78];let Z;e[79]!==H||e[80]!==W||e[81]!==$?(Z=r.jsx("div",{className:"relative min-h-[220px] flex-1 select-none",children:r.jsxs("div",{className:H,children:[W,$]})}),e[79]=H,e[80]=W,e[81]=$,e[82]=Z):Z=e[82];let K;e[83]!==f?(K=f>0?r.jsx("div",{children:r.jsx(ke,{color:"secondary",onClick:A,children:r.jsx(j,{id:"wham.codexOnboardingModal.back",defaultMessage:"Back"})})}):r.jsx("div",{}),e[83]=f,e[84]=K):K=e[84];let Y;e[85]!==w||e[86]!==o||e[87]!==C?(Y=r.jsx("div",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:r.jsx("div",{className:"flex items-center gap-1.5",children:C.map((fe,pe)=>r.jsx("button",{type:"button",onClick:()=>m(pe),"aria-label":o.formatMessage({id:"wham.codexOnboardingModal.goToStep",defaultMessage:"Go to step {step}"},{step:pe+1}),"aria-current":pe===w?"page":void 0,className:z("h-1.5 w-1.5 cursor-pointer rounded-full",pe===w?"bg-token-text-primary":"bg-token-text-primary opacity-20")},fe.id))})}),e[85]=w,e[86]=o,e[87]=C,e[88]=Y):Y=e[88];let ae;e[89]!==w||e[90]!==C.length?(ae=w<C.length-1?r.jsx(j,{id:"wham.codexOnboardingModal.continue",defaultMessage:"Continue"}):r.jsx(j,{id:"wham.codexOnboardingModal.done",defaultMessage:"Done"}),e[89]=w,e[90]=C.length,e[91]=ae):ae=e[91];let se;e[92]!==P||e[93]!==ae?(se=r.jsx("div",{className:"ms-auto",children:r.jsx(ke,{color:"primary",onClick:P,ref:b,children:ae})}),e[92]=P,e[93]=ae,e[94]=se):se=e[94];let ee;e[95]!==K||e[96]!==Y||e[97]!==se?(ee=r.jsxs("div",{className:"relative flex items-center px-6 py-5 pt-2",children:[K,Y,se]}),e[95]=K,e[96]=Y,e[97]=se,e[98]=ee):ee=e[98];let re;e[99]!==O||e[100]!==L||e[101]!==Z||e[102]!==ee?(re=r.jsxs("div",{className:"relative flex h-full flex-col",children:[O,L,Z,ee]}),e[99]=O,e[100]=L,e[101]=Z,e[102]=ee,e[103]=re):re=e[103];let he;return e[104]!==re||e[105]!==R?(he=r.jsx(Ft,{isOpen:!0,onClose:R,testId:"modal-codex-onboarding",position:"center",size:"custom",className:"max-h-[90vh] w-[640px] max-w-[640px]",noPadding:!0,showOverlayBackground:!0,shouldIgnoreClickOutside:!0,children:re}),e[104]=re,e[105]=R,e[106]=he):he=e[106],he}function tpe(t){return t>0?t-1:t}function spe(t){return r.jsx("span",{className:"text-[#3794FF]",children:t})}function Jet(){"use forget";const{eligible:t,isLoading:e}=jw();return e?"loading":t?"show":"hide"}function Zet(){const{eligible:t,isLoading:e}=nO();return e?"loading":t?"show":"hide"}const iN=ue(Ce,"6be2f1",20,20,!0),npe=ue(Ce,"5ed5de",24,24);function ope(){const t=G(),e=ct(t),{data:s,isLoading:n,isError:o}=F_(e==null?void 0:e.getWorkspaceId()),a=G(),i=Ee(a,"616577762");return!(e!=null&&e.isEnterprisey())||i?"ENABLED":n&&s==null?"LOADING":o?"ERROR":s!=null&&s.beta_settings.wham_access?"ENABLED":"DISABLED"}var lN=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ape(t,e){return!!(t===e||lN(t)&&lN(e))}function rpe(t,e){if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(!ape(t[s],e[s]))return!1;return!0}function Jc(t,e){e===void 0&&(e=rpe);var s=null;function n(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(s&&s.lastThis===this&&e(o,s.lastArgs))return s.lastResult;var i=t.apply(this,o);return s={lastResult:i,lastArgs:o,lastThis:this},i}return n.clear=function(){s=null},n}const ipe=ue(Ce,"10ff38",20,20),lpe=/#/g,cpe=/&/g,upe=/\//g,dpe=/=/g,Lk=/\+/g,fpe=/%5e/gi,mpe=/%60/gi,ppe=/%7c/gi,gpe=/%20/gi;function hpe(t){return encodeURI(""+t).replace(ppe,"|")}function A2(t){return hpe(typeof t=="string"?t:JSON.stringify(t)).replace(Lk,"%2B").replace(gpe,"+").replace(lpe,"%23").replace(cpe,"%26").replace(mpe,"`").replace(fpe,"^").replace(upe,"%2F")}function Dy(t){return A2(t).replace(dpe,"%3D")}function oD(t=""){try{return decodeURIComponent(""+t)}catch(e){return""+t}}function _pe(t){return oD(t.replace(Lk," "))}function xpe(t){return oD(t.replace(Lk," "))}function ype(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const s of t.split("&")){const n=s.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const o=_pe(n[1]);if(o==="__proto__"||o==="constructor")continue;const a=xpe(n[2]||"");e[o]===void 0?e[o]=a:Array.isArray(e[o])?e[o].push(a):e[o]=[e[o],a]}return e}function bpe(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(s=>"".concat(Dy(t),"=").concat(A2(s))).join("&"):"".concat(Dy(t),"=").concat(A2(e)):Dy(t)}function vpe(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>bpe(e,t[e])).filter(Boolean).join("&")}const Spe=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Cpe=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,wpe=/^([/\\]\s*){2,}[^/\\]/;function kpe(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Spe.test(t):Cpe.test(t)||(e.acceptRelative?wpe.test(t):!1)}function Tpe(t,e){const s=Epe(t),n=T(T({},ype(s.search)),e);return s.search=vpe(n),Mpe(s)}const aD=Symbol.for("ufo:protocolRelative");function Epe(t="",e){const s=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,f,m=""]=s;return{protocol:f.toLowerCase(),pathname:m,href:f+m,auth:"",host:"",search:"",hash:""}}if(!kpe(t,{acceptRelative:!0}))return cN(t);const[,n="",o,a=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",l=""]=a.match(/([^#/?]*)(.*)?/)||[];n==="file:"&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:u,hash:d}=cN(l);return{protocol:n.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:c,search:u,hash:d,[aD]:!n}}function cN(t=""){const[e="",s="",n=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:s,hash:n}}function Mpe(t){const e=t.pathname||"",s=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",n=t.hash||"",o=t.auth?t.auth+"@":"",a=t.host||"";return(t.protocol||t[aD]?(t.protocol||"")+"//":"")+o+a+e+s+n}var eh={exports:{}},th={exports:{}},uN;function Dk(){return uN||(uN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(n){if(n==null)throw new TypeError("Expected a string but received a ".concat(n));if(n.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(n.constructor.name))}t.exports=e.default,t.exports.default=e.default})(th,th.exports)),th.exports}var sh={exports:{}},dN;function Npe(){return dN||(dN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function s(o){return Object.prototype.toString.call(o)==="[object RegExp]"}function n(o,a){for(var i=0;i<a.length;i++){var l=a[i];if(o===l||s(l)&&l.test(o))return!0}return!1}t.exports=e.default,t.exports.default=e.default})(sh,sh.exports)),sh.exports}var nh={exports:{}},fN;function Ape(){return fN||(fN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(o,a){return o.indexOf(a)!==-1};e.default=s,t.exports=e.default,t.exports.default=e.default})(nh,nh.exports)),nh.exports}var oh={exports:{}},ah={exports:{}},mN;function rD(){return mN||(mN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var a in o)typeof n[a]>"u"&&(n[a]=o[a]);return n}t.exports=e.default,t.exports.default=e.default})(ah,ah.exports)),ah.exports}var pN;function Ipe(){return pN||(pN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var s=o(Dk()),n=o(rD());function o(l){return l&&l.__esModule?l:{default:l}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function i(l,c){(0,s.default)(l),c=(0,n.default)(c,a),c.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),c.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var u=l.split("."),d=u[u.length-1];return c.require_tld&&(u.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(d)||/\s/.test(d))||!c.allow_numeric_tld&&/^\d+$/.test(d)?!1:u.every(function(f){return!(f.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(f)||/[\uff01-\uff5e]/.test(f)||/^-|-$/.test(f)||!c.allow_underscores&&/_/.test(f))})}t.exports=e.default,t.exports.default=e.default})(oh,oh.exports)),oh.exports}var rh={exports:{}},gN;function jpe(){return gN||(gN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var s=n(Dk());function n(f){return f&&f.__esModule?f:{default:f}}function o(f){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},o(f)}var a="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(a,"[.]){3}").concat(a),l=new RegExp("^".concat(i,"$")),c="(?:[0-9a-fA-F]{1,4})",u=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(i,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(i,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(i,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(i,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(i,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(i,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(i,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function d(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,s.default)(f);var p=(o(m)==="object"?m.version:arguments[1])||"";return p?p.toString()==="4"?l.test(f):p.toString()==="6"?u.test(f):!1:d(f,{version:4})||d(f,{version:6})}t.exports=e.default,t.exports.default=e.default})(rh,rh.exports)),rh.exports}var hN;function Ppe(){return hN||(hN=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var s=c(Dk()),n=c(Npe()),o=c(Ape()),a=c(Ipe()),i=c(jpe()),l=c(rD());function c(y){return y&&y.__esModule?y:{default:y}}function u(y,v){return g(y)||p(y,v)||f(y,v)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(y,v){if(y){if(typeof y=="string")return m(y,v);var S={}.toString.call(y).slice(8,-1);return S==="Object"&&y.constructor&&(S=y.constructor.name),S==="Map"||S==="Set"?Array.from(y):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?m(y,v):void 0}}function m(y,v){(v==null||v>y.length)&&(v=y.length);for(var S=0,C=Array(v);S<v;S++)C[S]=y[S];return C}function p(y,v){var S=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(S!=null){var C,w,k,E,M=[],N=!0,A=!1;try{if(k=(S=S.call(y)).next,v!==0)for(;!(N=(C=k.call(S)).done)&&(M.push(C.value),M.length!==v);N=!0);}catch(I){A=!0,w=I}finally{try{if(!N&&S.return!=null&&(E=S.return(),Object(E)!==E))return}finally{if(A)throw w}}return M}}function g(y){if(Array.isArray(y))return y}var h={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},_=/^\[([^\]]+)\](?::([0-9]+))?$/;function b(y,v){if((0,s.default)(y),!y||/[\s<>]/.test(y)||y.indexOf("mailto:")===0||(v=(0,l.default)(v,h),v.validate_length&&y.length>v.max_allowed_length)||!v.allow_fragments&&(0,o.default)(y,"#")||!v.allow_query_components&&((0,o.default)(y,"?")||(0,o.default)(y,"&")))return!1;var S,C,w,k,E,M,N,A;if(N=y.split("#"),y=N.shift(),N=y.split("?"),y=N.shift(),N=y.split("://"),N.length>1){if(S=N.shift().toLowerCase(),v.require_valid_protocol&&v.protocols.indexOf(S)===-1)return!1}else{if(v.require_protocol)return!1;if(y.slice(0,2)==="//"){if(!v.allow_protocol_relative_urls)return!1;N[0]=y.slice(2)}}if(y=N.join("://"),y==="")return!1;if(N=y.split("/"),y=N.shift(),y===""&&!v.require_host)return!0;if(N=y.split("@"),N.length>1){if(v.disallow_auth||N[0]===""||(C=N.shift(),C.indexOf(":")>=0&&C.split(":").length>2))return!1;var I=C.split(":"),P=u(I,2),R=P[0],O=P[1];if(R===""&&O==="")return!1}k=N.join("@"),M=null,A=null;var L=k.match(_);if(L?(w="",A=L[1],M=L[2]||null):(N=k.split(":"),w=N.shift(),N.length&&(M=N.join(":"))),M!==null&&M.length>0){if(E=parseInt(M,10),!/^[0-9]+$/.test(M)||E<=0||E>65535)return!1}else if(v.require_port)return!1;return v.host_whitelist?(0,n.default)(w,v.host_whitelist):w===""&&!v.require_host?!0:!(!(0,i.default)(w)&&!(0,a.default)(w,v)&&(!A||!(0,i.default)(A,6))||(w=w||A,v.host_blacklist&&(0,n.default)(w,v.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(eh,eh.exports)),eh.exports}var Rpe=Ppe();const Ope=en(Rpe);function Lpe(t){return(t.type==="containerDirective"||t.type==="textDirective"||t.type==="leafDirective")&&"name"in t}function Xet(t){return t.type==="containerDirective"}function ett(t){return t.type==="code"}function ttt(t){if(t!=null)return new Date(t*1e3).toISOString()}const Dpe=t=>{let e=5381;for(let s=0;s<t.length;s++)e=(e<<5)+e^t.charCodeAt(s);return(e>>>0).toString(36)},stt=t=>{try{return"".concat(t?Dpe(t):"")}catch(e){return""}},Fpe=window.location.host,Bpe=(t,e={})=>{const s=Object.keys(e).length?e:{utm_source:Fpe};try{const n=t.trim();return Ope(n,{protocols:["http","https"]})?Tpe(n,s):t}catch(n){return t}},ntt=(t,e={},s=[])=>{const n=D3(t);return s.some(a=>a&&D3(a)===n)?Bpe(t,e):t},ott=t=>{try{return Se.getConversationSearchEntryUrls(t&&Tt(t))}catch(e){return[]}},att=(t,e)=>{try{return t&&e?Se.getNode(Tt(t),e).message:void 0}catch(s){return}};function rtt(t){const e=t.trim();if(!e.startsWith("{"))return null;try{const s=JSON.parse(e);return!s||Array.isArray(s)||typeof s!="object"?null:Upe(s)}catch(s){return null}}function Upe(t){const e={};for(const[s,n]of Object.entries(t))(typeof n=="string"||typeof n=="number"||typeof n=="boolean")&&(e[s]=String(n));return e.type&&!e.variant&&(e.variant=e.type),e}const iD=(function(t){if(t==null)return Vpe;if(typeof t=="function")return $x(t);if(typeof t=="object")return Array.isArray(t)?$pe(t):Hpe(t);if(typeof t=="string")return Gpe(t);throw new Error("Expected function, string, or object as test")});function $pe(t){const e=[];let s=-1;for(;++s<t.length;)e[s]=iD(t[s]);return $x(n);function n(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function Hpe(t){const e=t;return $x(s);function s(n){const o=n;let a;for(a in t)if(o[a]!==e[a])return!1;return!0}}function Gpe(t){return $x(e);function e(s){return s&&s.type===t}}function $x(t){return e;function e(s,n,o){return!!(zpe(s)&&t.call(this,s,typeof n=="number"?n:void 0,o||void 0))}}function Vpe(){return!0}function zpe(t){return t!==null&&typeof t=="object"&&"type"in t}const lD=[],Wpe=!0,_N=!1,qpe="skip";function Kpe(t,e,s,n){let o;typeof e=="function"&&typeof s!="function"?(n=s,s=e):o=e;const a=iD(o),i=n?-1:1;l(t,void 0,[])();function l(c,u,d){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return m;function m(){let p=lD,g,h,_;if((!e||a(c,u,d[d.length-1]||void 0))&&(p=Ype(s(c,d)),p[0]===_N))return p;if("children"in c&&c.children){const b=c;if(b.children&&p[0]!==qpe)for(h=(n?b.children.length:-1)+i,_=d.concat(b);h>-1&&h<b.children.length;){const y=b.children[h];if(g=l(y,h,_)(),g[0]===_N)return g;h=typeof g[1]=="number"?g[1]:h+i}}return p}}}function Ype(t){return Array.isArray(t)?t:typeof t=="number"?[Wpe,t]:t==null?lD:[t]}function Fk(t,e,s,n){let o,a,i;typeof e=="function"&&typeof s!="function"?(a=void 0,i=e,o=s):(a=e,i=s,o=n),Kpe(t,a,l,o);function l(c,u){const d=u[u.length-1],f=d?d.children.indexOf(c):void 0;return i(c,f,d)}}const Qpe={red:"bg-red-500",yellow:"bg-yellow-500",blue:"bg-blue-500"},Jpe={sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"},cD=({color:t,size:e="sm",className:s})=>r.jsx("div",{className:z("rounded-full",t?Qpe[t]:void 0,Jpe[e],s)}),uD=ue(Ce,"06188d",20,20,!0),dD=ue(Ce,"2e54eb",20,20),itt=ue(Ce,"25e330",20,20);function ltt(t){return xr(t).checkGate("2067628123")}const kr=ue(Ce,"6b0d8c",20,20),fD=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),Fy="oai-chat-backend",ctt=()=>{var o;const[t,e]=x.useState(!1),[s,n]=x.useState(((o=V0.getCookie(Fy))==null?void 0:o.toString())==="preview");return r.jsxs(r.Fragment,{children:[r.jsxs(J.CheckboxItem,{icon:kr,checked:t,onCheckedChange:a=>{e(a),requestAnimationFrame(()=>{window.location.href=a?"/preview":"/public"})},children:["Preview",r.jsx(Cc,{children:"web"})]}),r.jsxs(J.CheckboxItem,{icon:N8,checked:s,onCheckedChange:a=>{a?(n(!0),V0.setCookie(Fy,"preview")):V0.deleteCookie(Fy),window.location.reload()},children:["Preview",r.jsx(Cc,{children:"sa-server"})]})]})},Zpe=ue(Ce,"6dc452",16,17);function utt(t){"use forget";const e=F.c(38),{conversationMode:s}=t;let n;e[0]!==s?(n={conversationMode:s},e[0]=s,e[1]=n):n=e[1];const{isAdultSearchEnabled:o,handleToggleSetting:a,isLoading:i}=QR(n),l=x.useRef(!1);let c,u;e[2]!==o?(c=()=>{l.current||(l.current=!0,B.logStructuredEvent(sQ,{step:nQ.ATLAS_SAFE_SEARCH_TOGGLE_ACTION_STEP_SHOW,fromEnabled:!o}))},u=[o],e[2]=o,e[3]=c,e[4]=u):(c=e[3],u=e[4]),x.useEffect(c,u);let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=z("flex min-w-[155px] items-center justify-between rounded-full p-3 whitespace-nowrap","hover:bg-token-text-secondary text-token-bg-primary bg-token-text-primary focus-visible:bg-token-text-secondary!","dark:bg-token-text-secondary! dark:hover:bg-token-text-primary! dark:focus-visible:bg-token-text-primary!"),e[5]=d):d=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(j,T({},Hl.matureContent)),e[6]=f):f=e[6];let m;e[7]!==o||e[8]!==i?(m=!i&&r.jsxs("span",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 whitespace-pre",children:[" ",o?r.jsx(j,T({},Hl.off)):r.jsx(j,T({},Hl.on))]}),e[7]=o,e[8]=i,e[9]=m):m=e[9];let p;e[10]!==m?(p=r.jsxs("span",{className:"flex",children:[f,m]}),e[10]=m,e[11]=p):p=e[11];let g;e[12]!==i?(g=r.jsx("div",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 min-w-[16px]",children:i?r.jsx(Wn,{className:"icon-sm"}):r.jsx(Zpe,{className:"icon-md"})}),e[12]=i,e[13]=g):g=e[13];let h;e[14]!==p||e[15]!==g?(h=r.jsxs(J.Trigger,{color:"primary",className:d,children:[p,g]}),e[14]=p,e[15]=g,e[16]=h):h=e[16];const _=o?"off":"on",b=o?"default":"selected";let y,v;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(j,T({},Hl.on)),v=r.jsx(j,T({},Hl.onDescription)),e[17]=y,e[18]=v):(y=e[17],v=e[18]);let S;e[19]!==a?(S=()=>a(!1),e[19]=a,e[20]=S):S=e[20];let C;e[21]!==b||e[22]!==S?(C=r.jsx(J.RadioItem,{color:b,value:"on",label:y,secondary:v,onClick:S}),e[21]=b,e[22]=S,e[23]=C):C=e[23];const w=o?"selected":"default";let k,E;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(j,T({},Hl.off)),E=r.jsx(j,T({},Hl.offDescription)),e[24]=k,e[25]=E):(k=e[24],E=e[25]);let M;e[26]!==a?(M=()=>a(!0),e[26]=a,e[27]=M):M=e[27];let N;e[28]!==w||e[29]!==M?(N=r.jsx(J.RadioItem,{color:w,value:"off",label:k,secondary:E,onClick:M}),e[28]=w,e[29]=M,e[30]=N):N=e[30];let A;e[31]!==_||e[32]!==C||e[33]!==N?(A=r.jsx(J.Portal,{children:r.jsx(J.Content,{size:"auto",children:r.jsxs(J.RadioGroup,{value:_,children:[C,N]})})}),e[31]=_,e[32]=C,e[33]=N,e[34]=A):A=e[34];let I;return e[35]!==A||e[36]!==h?(I=r.jsxs(J.Root,{children:[h,A]}),e[35]=A,e[36]=h,e[37]=I):I=e[37],I}const Hl=Ne({matureContent:{id:"GICB3y",defaultMessage:"Safe search"},on:{id:"mC2XW7",defaultMessage:"On"},onDescription:{id:"+P7pkx",defaultMessage:"Attempt to hide explicit content"},off:{id:"HnMYit",defaultMessage:"Off"},offDescription:{id:"P/OfYZ",defaultMessage:"Allow explicit links"}}),dtt=Pe(()=>me(()=>import("./ojkqq3te81elkpjg.js"),__vite__mapDeps([108,1,3,4])).then(t=>t.CalpicoCustomizeChatGPTModalContainer)),ftt=Pe(()=>me(()=>import("./cwq0gi4f13ay6h52.js"),__vite__mapDeps([109,1,3,4])).then(t=>t.CalpicoChatMembersModalContainer)),mtt=Pe(()=>me(()=>import("./ou3j8wj06trp8hbr.js"),__vite__mapDeps([110,1,3,4])).then(t=>t.CalpicoDeleteMessageConfirmationModal)),Xpe=Pe(()=>me(()=>import("./pazedx7do1c0xn6x.js"),__vite__mapDeps([111,1,3,4])).then(t=>t.CalpicoEditProfileModal)),ptt=Pe(()=>me(()=>import("./hzc7rrqdw0neuxr5.js"),__vite__mapDeps([112,1,113,3,4])).then(t=>t.CalpicoEmojiPickerModal)),ege=Pe(()=>me(()=>import("./k33ydwk4jqdakpjy.js"),__vite__mapDeps([114,1,3,4])).then(t=>t.CalpicoLeaveChatConfirmationModalContainer)),tge=Pe(()=>me(()=>import("./nujyfdxvqflp0wta.js"),__vite__mapDeps([115,1,3,4])).then(t=>t.CalpicoDeleteChatConfirmationModalContainer)),sge=Pe(()=>me(()=>import("./duoq7ejw2jqizqxh.js"),__vite__mapDeps([116,1,3,4])).then(t=>t.CalpicoManageGroupLinkModalContainer)),nge=Pe(()=>me(()=>import("./nlmt707suek57scb.js"),__vite__mapDeps([117,1,3,4])).then(t=>t.CalpicoRenameChatModalContainer)),gtt=Pe(()=>me(()=>import("./d4kxeixumk26u3v3.js"),__vite__mapDeps([118,1,3,4])).then(t=>t.CalpicoReportModalContainer)),U1=Pe(()=>me(()=>import("./ikwkp3ockmohedj0.js"),__vite__mapDeps([119,1,3,4])).then(t=>t.CalpicoStartChatModalContainer)),htt=Pe(()=>me(()=>import("./rl7826g0utb81vs9.js"),__vite__mapDeps([120,1,3,4])).then(t=>t.CalpicoUserProfileModal)),_tt=Pe(()=>me(()=>import("./khmkg5huin8s2wyf.js"),__vite__mapDeps([121,1,3,4])).then(t=>t.CalpicoNoAccessYetModalContainer)),xtt=Pe(()=>me(()=>import("./d37ov03m33dewesc.js"),__vite__mapDeps([122,1,123,124,3,4])).then(t=>t.CalpicoAppMightNeedUpdateModalContainer)),ytt=Pe(()=>me(()=>import("./mfujv3piojpkt0st.js"),__vite__mapDeps([125,1,3,4,126,127,128,129,130,131,132,133,134,135,39,136,137,138,139,140,141,142,143,144])).then(t=>t.CalpicoSharedModalContainer)),Uh=ue(Ce,"427dd9",20,20);function Wp(t){"use forget";const e=F.c(14);let s;if(e[0]!==t){s=Symbol.for("react.early_return_sentinel");e:{const n=t,{icon:a,mobileIcon:i,color:l,iconClassName:c,children:u,as:d,ref:f}=n,m=De(n,["icon","mobileIcon","color","iconClassName","children","as","ref"]),p=l===void 0?"primary":l;let g=u;if(a){const h=c!=null?c:"icon",_=i!=null&&"max-md:hidden";let b;e[2]!==h||e[3]!==_?(b=z(h,_),e[2]=h,e[3]=_,e[4]=b):b=e[4];let y;e[5]!==a||e[6]!==b?(y=r.jsx(a,{className:b}),e[5]=a,e[6]=b,e[7]=y):y=e[7];let v;e[8]!==i||e[9]!==c?(v=i?r.jsx(i,{className:z(c!=null?c:"icon","md:hidden")}):null,e[8]=i,e[9]=c,e[10]=v):v=e[10];let S;e[11]!==y||e[12]!==v?(S=r.jsxs(r.Fragment,{children:[y,v]}),e[11]=y,e[12]=v,e[13]=S):S=e[13],g=S}switch(d){case"link":case"a":{const o=m,{linkProps:h}=o,_=De(o,["linkProps"]),{to:b,state:y}=h;s=r.jsx(Ia,U(T({},_),{className:z(p==="primary"?"text-token-text-primary":p==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",m.className),ref:f,to:b,state:y,children:g}));break e}case"button":default:{const h=m;s=r.jsx("button",U(T({},h),{className:z(p==="primary"?"text-token-text-primary":p==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",m.className),ref:f,children:g}));break e}}}e[0]=t,e[1]=s}else s=e[1];if(s!==Symbol.for("react.early_return_sentinel"))return s}function btt(t){"use no forget";const e=G(),s=ne(),n=s.formatMessage({id:"yKEGRx",defaultMessage:"Start a group chat"});if(t.type==="from-conversation"||t.type==="from-shared-project"){const a=s.formatMessage({id:"dX9+Fz",defaultMessage:"Add people"}),i=r.jsx(ke,{onClick:()=>{const l=t.type==="from-shared-project"?{type:"from-shared-project",serverThreadId:t.serverThreadId,projectId:t.projectId,source:"top-nav"}:{type:"from-conversation",serverThreadId:t.serverThreadId,source:"top-nav"};mt(e,U1,l)},icon:Uh,label:n,"data-testid":"start-group-chat-from-conversation-button",color:"ghost",className:"text-token-text-primary hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover rounded-lg whitespace-nowrap max-sm:hidden",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:r.jsx("span",{className:"max-md:hidden",children:t.type==="from-conversation"?a:n})});return t.type==="from-conversation"?r.jsx(It,{triggerAs:null,label:n,children:i}):i}const o=async()=>{mt(e,U1,{type:"new-chat",source:"top-nav"})};return r.jsx(It,{triggerAs:null,label:n,children:t.variant==="default"?r.jsx(Wp,{className:"me-1 rounded-full!","aria-label":n,onClick:o,icon:Uh}):r.jsx(ke,{className:"text-token-text-secondary me-1 rounded-lg",color:"ghost",icon:Uh,onClick:o,label:n})})}const oge=1024*1024,By=5;function vtt(t){return Ee(t,"4123826335")}function Stt(t){var o;const s=(o=js(t,"216497991").get("max_file_size_mb",By))!=null?o:By;return(Number.isFinite(s)?Math.max(s,1):By)*oge}function Ctt(t){return Ee(t,"3525904070")}function age(t){return Ee(t,"4105134853")}function rge(){const t=_c("/gg/*"),e=_c("/g/:projectId/gg/*");return t!=null||e!=null}function ige(){var s,n;const t=_c("/gg/:id"),e=_c("/g/:projectId/gg/:id");return(n=(s=t==null?void 0:t.params.id)!=null?s:e==null?void 0:e.params.id)!=null?n:null}function lge(){var s,n;const t=R1("/gg/:id"),e=R1("/g/:projectId/gg/:id");return(n=(s=t==null?void 0:t.params.id)!=null?s:e==null?void 0:e.params.id)!=null?n:null}function cge(){var e;const t=R1("/g/:projectId/*");return(e=t==null?void 0:t.params.projectId)!=null?e:null}function uge(t,e=240){var a;const n=((a=t.preview)!=null?a:"").trim().replace(/\s+/g," ");return n.length>e?"".concat(n.slice(0,e),""):n}function wtt(t,e){const s=new Date,n=new Date(s.getFullYear(),s.getMonth(),s.getDate()),o=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),a=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1),i=new Date(n);i.setDate(i.getDate()-6);const l=new Intl.DateTimeFormat(e,{hour:"numeric",minute:"2-digit"}).format(t),c=new Intl.RelativeTimeFormat(e,{numeric:"auto"});if(t>=n&&t<a)return{date:Uy(c.format(0,"day"),e),time:l};if(t>=o&&t<n)return{date:Uy(c.format(-1,"day"),e),time:l};if(t>=i&&t<o){const p=new Intl.DateTimeFormat(e,{weekday:"long"});return{date:Uy(p.format(t),e),time:l}}const u=t.getFullYear()===s.getFullYear(),d=T({month:"long",day:"numeric"},u?{}:{year:"numeric"});return{date:new Intl.DateTimeFormat(e,d).format(t),time:l}}function Uy(t,e){const[s="",...n]=JR(t);return s?"".concat(s.toLocaleUpperCase(e)).concat(n.join("")):t}var $h=(t=>(t.CreateRoom="calpico_create_room",t.SendMessage="calpico_send_message",t))($h||{});const dge=window.location.origin+"/backend-api/sentinel/sdk.js",Dd=globalThis,mD=!!(Dd.window&&Dd.document)&&!0;function fge(){return new Promise((t,e)=>{var o;const s=Dd.document;if(!s){e(new Error("Sentinel SDK script cannot be injected outside the browser"));return}const n=s.createElement("script");n.type="text/javascript",n.src=dge,n.async=!0,n.defer=!0,n.onload=t,n.onerror=a=>{e(a!=null?a:new Error("Failed to load Sentinel SDK script"))},(o=s.head)==null||o.appendChild(n)})}const mge=(()=>{let t;return()=>(t||(mD?(t=fge(),t.then(()=>{var e;try{(e=Dd.SentinelSDK)==null||e.init("calpico_init")}catch(s){Ge.addError("Sentinel SDK init failed",{error:s})}})):t=Promise.resolve()),t)})();function $y(t){const e={};return t&&(e["OpenAI-Sentinel-Token"]=t),e}function xN(t){return mD?mge().then(()=>{if(!Dd.SentinelSDK)throw new Error("Sentinel SDK not initialized");return Dd.SentinelSDK.token(t)}):Promise.resolve("disabled")}const yN=3e3,bN=20,pge=5;function gge(t,e){var n;const s=(n=ct(t))==null?void 0:n.normalizedAccountUserId;return e.role==="user"&&e.accountUserId===s}function hge(t,e,s){var o;return{id:(o=t.id)!=null?o:"".concat(e,":raw:").concat(s),author:t.author,content:t.content,create_time:t.create_time,update_time:t.update_time,end_turn:t.end_turn,weight:t.weight,metadata:t.metadata,recipient:t.recipient,channel:t.channel,status:t.status}}function vN(t){if(!t)return null;const e=t.message;if(!e)return U(T({},t),{message:null});const s=zu(e);return U(T({},t),{message:s})}function _ge(t){return t?U(T({},t),{message:null}):null}function zu(t){var e,s,n,o,a,i,l;if(t.role==="user")return{id:t.id,role:"user",accountUserId:t.account_user_id,content:t.content,reactions:(e=t.reactions)!=null?e:{},replyTo:vN(t.reply_to),createdAt:new Date(t.created_at),deletedAt:t.deleted_at?new Date(t.deleted_at):null,preview:(s=t.preview)!=null?s:null};if(t.role==="assistant")return{id:t.id,role:"assistant",rawMessages:((n=t.raw_messages)!=null?n:[]).map((c,u)=>hge(c,t.id,u)),reactions:(o=t.reactions)!=null?o:{},replyTo:vN(t.reply_to),createdAt:new Date(t.created_at),attachments:(a=t.attachments)!=null?a:[],deletedAt:t.deleted_at?new Date(t.deleted_at):null,preview:(i=t.preview)!=null?i:null,modelSlug:(l=t.model_slug)!=null?l:null};if(t.role==="system")return{id:t.id,role:"system",content:t.content,createdAt:new Date(t.created_at),message:t.content.text,preview:t.preview};throw new Error("Unknown message response type: ".concat(t.role))}function SN(t,e){cl(()=>{const s=t(),n=e.map(zu),o=new Map;for(const i of[...s,...n]){const l=o.get(i.id);l&&l.role==="assistant"&&i.role==="assistant"?o.set(i.id,pD(l,i)):o.set(i.id,i)}const a=Array.from(o.values()).sort((i,l)=>i.createdAt.getTime()-l.createdAt.getTime());t.set(a)})}function pD(t,e){var n;const s=((n=e.attachments)!=null?n:[]).map((o,a)=>{var l;const i=(l=t.attachments)==null?void 0:l[a];return(o==null?void 0:o.type)==="post"&&(i==null?void 0:i.type)==="post"&&(o.loading_message==null||o.summary==null)?U(T({},o),{loading_message:o.loading_message==null&&i.loading_message!=null?i.loading_message:o.loading_message,summary:o.summary==null&&i.summary!=null?i.summary:o.summary}):o});return U(T({},e),{attachments:s})}function xge(t,e){var o,a;const s=(o=t.text)!=null?o:"",n=(a=t.attachments)==null?void 0:a.map((i,l)=>{switch(i==null?void 0:i.type){case"file":return{type:"file",file_id:i.file_id};case"link":return{type:"link",url:i.url,title:i.title};case"post":return{type:"post",post_id:i.post_id};case"conversation":return{type:"conversation",conversation_id:i.conversation_id};case"media":return{type:"media",post_id:i.post_id,generation_id:i.generation_id,generation_type:i.generation_type,title:i.title,conversation_id:i.conversation_id,message_id:i.message_id};case"sticker":{let c=null;const u=e==null?void 0:e[l];return(u==null?void 0:u.type)==="sticker"&&(c=u.image_url),{type:"sticker",sticker_id:i.sticker_id,image_url:c}}case"sticker_pack":return{type:"sticker_pack",sticker_ids:i.sticker_ids};default:return i}});return{text:s,attachments:n}}class yge{constructor(e){X(this,"hasFetchedRooms$",Le(!1));X(this,"rooms$",Le(new Map));X(this,"liveMessageIds$",Le(new Set));X(this,"users$",Le(new Map));X(this,"userAttributes$",Le(null));X(this,"userProfileSnapshots$",Le(new Map));X(this,"sortedRooms$",vt(()=>Array.from(this.rooms$().values()).filter(s=>s.projectId==null).sort(this._compareRooms)));X(this,"sortedProjectRooms$",e=>vt(()=>Array.from(this.rooms$().values()).filter(n=>n.projectId===e).sort(this._compareRooms)));X(this,"totalUnreadMessageCount$",vt(()=>Array.from(this.rooms$().values()).reduce((e,s)=>e+s.unreadMessageCount$(),0)));X(this,"messageDebugMode$",Le(!1));X(this,"roomsPaginationCursor$",Le(vge));X(this,"isFetchingMoreRooms$",Le(!1));X(this,"selfProfile$",vt(()=>{var s,n;const e=(s=ct(this.ctx))==null?void 0:s.normalizedAccountUserId;return e==null?null:(n=this.users$().get(e))!=null?n:null}));X(this,"_markMessageArrivedViaPubSub$",e=>{var n;(e==null?void 0:e.role)!=="assistant"||!e.id||!((n=e.attachments)!=null?n:[]).some(o=>(o==null?void 0:o.type)==="post"&&o.post_type==="report")||(this.liveMessageIds$.set(o=>{if(o.has(e.id))return o;const a=new Set(o);return a.add(e.id),a}),console.log("[CalpicoState] live report message via pubsub",{messageId:e.id}))});X(this,"_compareRooms",(e,s)=>{const n=e.pinned$(),o=s.pinned$();return n!==o?n?-1:1:s.updatedAt$().getTime()-e.updatedAt$().getTime()});X(this,"_handlePubSubMessage",e=>{switch(e.type){case"calpico-message-add":{const{room_id:s,message:n}=e.payload;this._markMessageArrivedViaPubSub$(n),this._handleMessagesResponse$(s,[n]),this._cancelHeartbeat$(s,n),this._drawNotification$(s,n);break}case"calpico-message-update":{const{room_id:s,message:n}=e.payload;this._handleMessageUpdate$(s,n);break}case"calpico-room-update":{const{room:s}=e.payload;this._handleRoomsResponse$({response:[s],fetchSource:"pubsub"});break}case"calpico-room-read":{const{room_id:s,last_read_at:n}=e.payload;this._markRoomRead$(s,new Date(n));break}case"calpico-is-responding-heartbeat":{this._handleHeartbeatPayload$(e.payload);break}case"calpico-room-leave":{const{room_id:s}=e.payload;this.rooms$.set(n=>(n.delete(s),n));break}}});X(this,"_drawNotification$",(e,s)=>{var c;if(!Ee(this.ctx,"1497872396")||e===lge())return;const n=zu(s);if(n.role==="system")return;const o=(c=ct(this.ctx))==null?void 0:c.normalizedAccountUserId;if(n.role==="user"&&n.accountUserId===o)return;const a=this.rooms$().get(e);if(a==null||a.projectId!=null&&cge()!==a.projectId)return;let i=uge(n,50),l=null;if(n.role==="user"){const u=this.users$().get(n.accountUserId);if(u==null)return;l={name:u.name,picture:u.avatarUrl},i="".concat(u.name,": ").concat(i)}qm({clientThreadId:e,title:a.name$(),subtitle:i,userAvatar:l,timeout:5e3,onClick:()=>{const u=a.projectId!=null?"/g/".concat(a.projectId,"/gg/").concat(e):"/gg/".concat(e);dl(u)}})});X(this,"_handleRoomsResponse$",({response:e,fetchSource:s})=>{cl(()=>{e.forEach(n=>{var f,m,p,g,h,_,b,y,v;const o=this.rooms$(),a=(f=n.project_id)!=null?f:null,i=n.members.flatMap(S=>{var C,w;return S.role==="user"?[{role:"user",accountUserId:S.account_user_id,name:S.name,avatarUrl:S.avatar_url,avatarFileId:S.avatar_file_id,username:S.username,isBlocked:(C=S.is_blocked)!=null?C:!1,canMessage:(w=S.can_message)!=null?w:!1}]:[]}),l=n.member_profile_snapshots.map(S=>({accountUserId:S.account_user_id,name:S.name,avatarUrl:S.avatar_url,username:S.username})),c=o.get(n.id);if(c){if(s==="summary"&&c.fetchSource$()!=="summary")return;n.latest_messages&&(Hy(this.ctx,n.latest_messages),SN(c.messages$,n.latest_messages)),c.members$.set(i),c.memberProfileSnapshots$.set(l),c.name$.set(n.name),c.shouldAutoRespond$.set((m=n.should_auto_respond)!=null?m:null),c.pinned$.set(n.pinned===!0),c.assistantPersonality$.set(typeof n.assistant_personality=="string"&&n.assistant_personality||""),c.groupLink$.set((p=n.magic_link_url)!=null?p:null),c.groupLinkShareText$.set((g=n.magic_link_share_text)!=null?g:null),c.fetchSource$.set(s),a&&c.projectId==null&&(c.projectId=a)}else{n.latest_messages&&Hy(this.ctx,n.latest_messages);const S={id:n.id,type:n.type,projectId:a,name$:Le(n.name),assistantPersonality$:Le(typeof n.assistant_personality=="string"&&n.assistant_personality||""),members$:Le(i),memberProfileSnapshots$:Le(l),messages$:Le(n.latest_messages?n.latest_messages.map(zu):[]),optimisticMessages$:Le([]),threadSidebar$:Le(null),viewMessages$:vt(()=>{const w=S.messages$(),k=S.optimisticMessages$();let E=[...w,...k];return E.sort((M,N)=>M.createdAt.getTime()-N.createdAt.getTime()),E=E.filter(M=>M.role==="system"?!0:M.deletedAt==null),E}),lastReadAt$:Le(n.last_read_at?new Date(n.last_read_at):null),isFetchingMessages$:Le(!1),hasFetchedBeginning$:Le(!1),createdAt:new Date,assistantHeartbeats$:Le([]),userHeartbeats$:Le([]),updatedAt$:vt(()=>{var k,E;const w=S.viewMessages$();return(E=(k=Qo(w))==null?void 0:k.createdAt)!=null?E:new Date(n.updated_at)}),pinned$:Le(n.pinned===!0),unreadMessageCount$:vt(()=>{const w=S.lastReadAt$();return w==null?0:S.messages$().filter(E=>!gge(this.ctx,E)&&E.createdAt>w).length}),shouldAutoRespond$:Le((h=n.should_auto_respond)!=null?h:null),groupLink$:Le((_=n.magic_link_url)!=null?_:null),groupLinkShareText$:Le((b=n.magic_link_share_text)!=null?b:null),shouldInsertHeader$:vt(()=>S.messages$().some(w=>w.role==="system"&&w.content.type==="create_magic_link")),creatorAccountUserId$:Le(to(n.creator_account_user_id)),fetchSource$:Le(s),_oai_internal_roomSystemInstructions:(y=n.oai_internal_system_instructions)!=null?y:null,_oai_internal_speakDecisionToolDescription:(v=n.oai_internal_speak_decision_tool_description)!=null?v:null},C=new Map(o);C.set(n.id,S),this.rooms$.set(C)}const u=new Map(this.users$());for(const S of i)u.set(S.accountUserId,{accountUserId:S.accountUserId,name:S.name,avatarUrl:S.avatarUrl,username:S.username});this.users$.set(u);const d=new Map(this.userProfileSnapshots$());for(const S of l)d.set(S.accountUserId,S);this.userProfileSnapshots$.set(d)})})});X(this,"_handleMessagesResponse$",(e,s)=>{var a;const n=this.rooms$().get(e);if(!n)return;const o=(a=ct(this.ctx))==null?void 0:a.normalizedAccountUserId;for(const i of s)i.role==="user"&&i.account_user_id===o&&i.request_id&&n.optimisticMessages$.set(l=>l.filter(c=>c.requestId!==i.request_id));Hy(this.ctx,s),SN(n.messages$,s)});X(this,"_handleMessageUpdate$",(e,s)=>{const n=this.rooms$().get(e);n&&n.messages$.set(td(o=>{const a=o.findIndex(i=>i.id===s.id);if(a!==-1){const i=zu(s);o[a].role==="assistant"&&i.role==="assistant"?o[a]=pD(o[a],i):o[a]=i}else return[...o,zu(s)].sort((l,c)=>l.createdAt.getTime()-c.createdAt.getTime())},n.messages$()))});X(this,"_handleHeartbeatPayload$",e=>{var l,c;const{source:s,room_id:n,timestamp:o}=e,a=this.rooms$().get(n);if(a==null)return;const i=new Date(o*1e3);switch(s.role){case"user":{a.userHeartbeats$.set(u=>{const d=setTimeout(()=>{a.userHeartbeats$.set(m=>m.filter(p=>p.accountUserId!==s.account_user_id))},yN),f=u.find(m=>m.accountUserId===s.account_user_id);if(f!=null){const m=T({},f);return m.timestamp=i,clearTimeout(m.timeoutRef),m.timeoutRef=d,u.map(p=>p.accountUserId===s.account_user_id?m:p)}else return[...u,{accountUserId:s.account_user_id,timestamp:i,timeoutRef:d}]});break}case"assistant":{for(const d of a.assistantHeartbeats$())clearTimeout(d.timeoutRef);const u=setTimeout(()=>{a.assistantHeartbeats$.set(d=>d.filter(f=>f.modelSlug!==s.model_slug))},yN);a.assistantHeartbeats$.set([{modelSlug:s.model_slug,taskType:(l=s.task_type)!=null?l:null,timestamp:i,timeoutRef:u,message:(c=s.message)!=null?c:null}]);break}}});X(this,"_cancelHeartbeat$",(e,s)=>{if(s.role==null)return;const n=this.rooms$().get(e);if(n!=null)switch(s.role){case"assistant":{for(const o of n.assistantHeartbeats$())clearTimeout(o.timeoutRef);n.assistantHeartbeats$.set([]);break}case"user":{n.userHeartbeats$.set(o=>{const a=o.find(i=>i.accountUserId===s.account_user_id);return a==null?o:(clearTimeout(a.timeoutRef),o.filter(i=>i.accountUserId!==s.account_user_id))});break}}});X(this,"_mapRoomPreviewToRoomResponse$",e=>{var s,n,o;return U(T({},e),{creator_account_user_id:(s=e.creator_account_user_id)!=null?s:null,magic_link_url:(n=e.magic_link_url)!=null?n:null,magic_link_share_text:(o=e.magic_link_share_text)!=null?o:null,member_profile_snapshots:[]})});X(this,"_fetchRoomsSidebarLightweight$",async(e=null)=>{const s=await de.safeGet("/calpico/chatgpt/rooms/summary",{parameters:{query:{cursor:e,limit:pge}}});return cl(()=>{var n;this.hasFetchedRooms$.set(!0),this._handleRoomsResponse$({response:s.items.map(o=>this._mapRoomPreviewToRoomResponse$(o)),fetchSource:"summary"}),this.roomsPaginationCursor$.set((n=s.cursor)!=null?n:null)}),s});X(this,"fetchProjectRoomListLightweight$",async(e,s=null)=>({items:[],cursor:null}));X(this,"fetchMoreRooms$",async()=>{const e=this.roomsPaginationCursor$();if(!(this.isFetchingMoreRooms$()||e==null)){this.isFetchingMoreRooms$.set(!0);try{await this._fetchRoomsSidebarLightweight$(e)}finally{this.isFetchingMoreRooms$.set(!1)}}});X(this,"fetchRoom$",async(e,s)=>{const n=s?await de.safeGet("/calpico/chatgpt/project/{project_id}/rooms/{room_id}",{parameters:{path:{project_id:s,room_id:e}}}):await de.safeGet("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}}});return this._handleRoomsResponse$({response:[n],fetchSource:"rest-full"}),n});X(this,"createRoom$",async e=>{const s=await this._getSentinelHeadersForFlow$($h.CreateRoom),n=await de.safePost("/calpico/chatgpt/rooms",{requestBody:e,additionalHeaders:s});return this._handleRoomsResponse$({response:[n],fetchSource:"rest-full"}),n});X(this,"createProjectRoom$",async(e,s)=>{const n=await xN($h.CreateRoom),o=$y(n),a=await de.safePost("/calpico/chatgpt/project/{project_id}/rooms",{parameters:{path:{project_id:e}},requestBody:s,additionalHeaders:o});return this._handleRoomsResponse$({response:[a],fetchSource:"rest-full"}),a});X(this,"shareThreadToCalpico$",async(e,s)=>{if(!e)throw new Error("Cannot share conversation without server thread id");return await this._createRoomFromSinglePlayerThread$(e,s)});X(this,"_createRoomFromSinglePlayerThread$",async(e,s)=>{const n={room_type:"GROUP_DM",with_user_emails:[],with_account_user_ids:[],with_conversation_id:e};return s?await this.createProjectRoom$(s,n):await this.createRoom$(n)});X(this,"removeMemberFromRoom$",async(e,s)=>{const n=await de.safeDelete("/calpico/chatgpt/rooms/{room_id}/members/{account_user_id}",{parameters:{path:{room_id:e,account_user_id:s}}});return this._handleRoomsResponse$({response:[n],fetchSource:"rest-full"}),n});X(this,"addMembersToSharedProjectRoom$",async(e,s)=>{throw new Error("This operation is not supported.")});X(this,"editRoom$",async(e,s)=>{const n=await de.safePatch("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}},requestBody:s});return this._handleRoomsResponse$({response:[n],fetchSource:"rest-full"}),n});X(this,"leaveRoom$",async e=>{await de.safePost("/calpico/chatgpt/rooms/{room_id}/leave",{parameters:{path:{room_id:e}}});const s=new Map(this.rooms$());s.delete(e),this.rooms$.set(s)});X(this,"deleteRoom$",async e=>{await de.safeDelete("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}}});const s=new Map(this.rooms$());s.delete(e),this.rooms$.set(s)});X(this,"sendMessage$",async(e,s,n)=>{var i;const o=this.rooms$().get(e),a=(i=ct(this.ctx))==null?void 0:i.normalizedAccountUserId;o&&a&&s.request_id?await this._postAndUpdateOptimisticMessage$(o,a,s,n):await this._postAndUpdateMessages$(e,s)});X(this,"_setOptimisticMessageDeliveryState$",(e,s,n,o)=>{e.optimisticMessages$.set(a=>a.map(i=>i.requestId===s?U(T({},i),{deliveryState:n,deliveryErrorMessage:o}):i))});X(this,"_postAndUpdateOptimisticMessage$",async(e,s,n,o)=>{if(!n.request_id)return await this._postAndUpdateMessages$(e.id,n);const a={id:n.request_id,role:"user",accountUserId:s,content:xge(n.content,o),createdAt:new Date,reactions:{},replyTo:_ge(n.reply_to),deliveryState:"pending",requestId:n.request_id,deletedAt:null,preview:n.content.text,deliveryErrorMessage:null};e.optimisticMessages$.set(i=>{const l=[...i,a];return l.sort((c,u)=>c.createdAt.getTime()-u.createdAt.getTime()),l});try{await this._postAndUpdateMessages$(e.id,n)}catch(i){const l=AC(i);this._setOptimisticMessageDeliveryState$(e,n.request_id,"failed",l)}});X(this,"fetchMessages$",async({roomId:e,before:s=null,after:n=null})=>{const o=this.rooms$().get(e);if(!o)return[];if(s!=null&&o.hasFetchedBeginning$()||o.isFetchingMessages$())return[];o.isFetchingMessages$.set(!0);try{const a=o.projectId!=null?await de.safeGet("/calpico/chatgpt/project/{project_id}/rooms/{room_id}/messages",{parameters:{path:{project_id:o.projectId,room_id:e},query:{before:s,after:n,limit:bN}}}):await de.safeGet("/calpico/chatgpt/rooms/{room_id}/messages",{parameters:{path:{room_id:e},query:{before:s,after:n,limit:bN}}});return s!=null&&a.items.length===0&&o.hasFetchedBeginning$.set(!0),this._handleMessagesResponse$(e,a.items),a.items}finally{o.isFetchingMessages$.set(!1)}});X(this,"fetchMoreMessages$",(e,s)=>{const n=this.rooms$().get(e);if(!n)return;const o=n.messages$(),a=s==="before"&&o[0]?o[0].id:null,i=s==="after"&&o.length>0?o[o.length-1].id:null;return this.fetchMessages$({roomId:e,before:a,after:i})});X(this,"deleteMessage$",async(e,s)=>{const n=this.rooms$().get(e);n&&(n.messages$.set(o=>o.filter(a=>a.id!==s)),await de.safeDelete("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}",{parameters:{path:{room_id:e,message_id:s}}}))});X(this,"_markRoomRead$",(e,s)=>{const n=this.rooms$().get(e);n&&n.lastReadAt$.set(s)});X(this,"markRoomRead$",async(e,s)=>{var o;await G_(()=>oQ(this.ctx));const n=(o=this.rooms$().get(e))==null?void 0:o.lastReadAt$();(n==null||s>n)&&(await de.safePost("/calpico/chatgpt/rooms/{room_id}/read",{parameters:{path:{room_id:e}},requestBody:{last_read_at:new Date().toISOString()}}),this._markRoomRead$(e,s))});X(this,"_addReactionLocal$",(e,s,n,o)=>{const a=this.rooms$().get(e);a&&a.messages$.set(td(i=>{const l=i.find(c=>c.id===s);l&&l.role!=="system"&&(l.reactions[n]=o)},a.messages$()))});X(this,"_removeReactionLocal$",(e,s,n)=>{const o=this.rooms$().get(e);o&&o.messages$.set(td(a=>{const i=a.find(l=>l.id===s);i&&i.role!=="system"&&delete i.reactions[n]},o.messages$()))});X(this,"addMessageReaction$",async(e,s,n)=>{var a;const o=(a=ct(this.ctx))==null?void 0:a.normalizedAccountUserId;o&&this._addReactionLocal$(e,s,o,n.reaction),await de.safePost("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}/reactions",{parameters:{path:{room_id:e,message_id:s}},requestBody:n})});X(this,"removeMessageReaction$",async(e,s)=>{var o;const n=(o=ct(this.ctx))==null?void 0:o.normalizedAccountUserId;n&&this._removeReactionLocal$(e,s,n),await de.safeDelete("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}/reactions",{parameters:{path:{room_id:e,message_id:s}}})});X(this,"fetchSelfProfile$",async()=>{var o,a;const e=(o=ct(this.ctx))==null?void 0:o.normalizedAccountUserId;if(e==null)return null;const s=await de.safeGet("/calpico/chatgpt/profile/{user_id}",{parameters:{path:{user_id:e}}}),n=new Map(this.users$());return n.set(e,{accountUserId:e,name:(a=s.display_name)!=null?a:"User",avatarUrl:s.profile_picture_url,username:s.username}),this.users$.set(n),s});X(this,"updateSelfProfile$",async e=>{var a,i;const s=(a=ct(this.ctx))==null?void 0:a.normalizedAccountUserId;if(s==null)return null;const n=await de.safePost("/calpico/chatgpt/profile/{user_id}",{parameters:{path:{user_id:s}},requestBody:e}),o=new Map(this.users$());return o.set(s,{accountUserId:s,name:(i=n.display_name)!=null?i:"User",avatarUrl:n.profile_picture_url,username:n.username}),this.users$.set(o),n});X(this,"updateSelfUsername$",async e=>{var a,i;const s=(a=ct(this.ctx))==null?void 0:a.normalizedAccountUserId;if(s==null)return null;const n=await de.safePost("/calpico/chatgpt/profile/{user_id}/username",{parameters:{path:{user_id:s}},requestBody:e}),o=new Map(this.users$());return o.set(s,{accountUserId:s,name:(i=n.display_name)!=null?i:"User",avatarUrl:n.profile_picture_url,username:n.username}),this.users$.set(o),n});X(this,"acceptMagicLink$",async e=>{const s=await de.safePost("/calpico/chatgpt/links",{requestBody:e});switch(s.content.type){case"invitation_redeemed":{const n=s.content.room_id;return this.fetchRoom$(n),{roomId:n}}case"noop":return null;default:throw new Error("Unknown redeem response type: ".concat(s.content.type))}});X(this,"createGroupLink$",async({roomId:e})=>{const s=await de.safePost("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}}),n=to(s.magic_link_url),o=to(s.magic_link_share_text),i=this.rooms$().get(s.room_id);return i==null||(i.groupLink$.set(n),i.groupLinkShareText$.set(o)),n});X(this,"deleteGroupLink$",async({roomId:e})=>{await de.safeDelete("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}});const n=this.rooms$().get(e);if(n==null)return null;n.groupLink$.set(null),n.groupLinkShareText$.set(null)});X(this,"resetGroupLink$",async({roomId:e})=>{const s=await de.safePatch("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}}),n=to(s.magic_link_url),o=to(s.magic_link_share_text),i=this.rooms$().get(s.room_id);return i==null||(i.groupLink$.set(n),i.groupLinkShareText$.set(o)),n});X(this,"openThreadSidebar$",(e,s)=>{if(s.type!=="product")return;const n=e.messages$().find(o=>o.role!=="assistant"?!1:o.rawMessages.find(a=>a.id===s.messageId));if(n!=null)return e.threadSidebar$.set(U(T({},s),{calpicoMessageId:n.id}))});X(this,"closeThreadSidebar$",e=>{e.threadSidebar$.set(null)});X(this,"fetchUserAttributes$",async()=>{const e=await de.safeGet("/calpico/chatgpt/user_attributes"),s={onboardedAt:e.onboarded_at?new Date(e.onboarded_at):null};return this.userAttributes$.set(s),s});X(this,"setUserOnboardingCompletion$",async()=>{const e=await de.safePost("/calpico/chatgpt/user_attributes/onboarding_completion");this.userAttributes$.set({onboardedAt:e.onboarded_at?new Date(e.onboarded_at):null})});if(this.ctx=e,!this.hasAccess)return;Ee(this.ctx,"1746750389")&&this._fetchRoomsSidebarLightweight$();const s=$R(e),n=s.getTopic("calpico-chatgpt");if(n.subscribe(),n.onMessage(this._handlePubSubMessage),Ee(this.ctx,"4105134853")){const o=s.getTopic("calpico-chatgpt-shared-project");o.subscribe(),o.onMessage(this._handlePubSubMessage)}}get hasAccess(){return Ee(this.ctx,"3096078201")}async _getSentinelHeadersForFlow$(e){const s={};try{const n=await xN(e);Object.assign(s,$y(n))}catch(n){const o=n instanceof Error?n.message:"Failed to get sentinel token";Object.assign(s,$y(o)),Ge.addError("Calpico sentinel token fetch failed",{error:n,sentinelFlow:e,errorMessage:o})}return s}async _postAndUpdateMessages$(e,s){const n=await this._getSentinelHeadersForFlow$($h.SendMessage);await de.safePost("/calpico/chatgpt/rooms/{room_id}/messages",{parameters:{path:{room_id:e}},requestBody:s,additionalHeaders:n}),await this.fetchMoreMessages$(e,"after")}}const qp=ys(t=>new yge(t));function bge({calpicoState:t,accountUserId:e}){var l;const s=(l=ct(t.ctx))==null?void 0:l.normalizedAccountUserId,n=oe(()=>t.users$().has(e)),o=s!=null&&e===s,a=!n,i=t.hasAccess&&o&&a;return dt({queryKey:["calpico","profile","self",e],queryFn:()=>t.fetchSelfProfile$(),enabled:i})}const vge=null;function Bk(t){const e=G(),s=qp(e),n=oe(()=>{var o,a;return s.hasAccess&&(a=(o=s.users$().get(t))!=null?o:s.userProfileSnapshots$().get(t))!=null?a:null});return bge({calpicoState:s,accountUserId:t}),n}function ktt(t){var e,s;return(s=(e=Bk(t))==null?void 0:e.name)!=null?s:"User"}function Ttt(t){var e,s;return(s=(e=Bk(t))==null?void 0:e.avatarUrl)!=null?s:""}function Sge(t){return Ps({queryKey:["calpico-file",t],queryFn:()=>de.safeGet("/calpico/chatgpt/files/{file_id}",{parameters:{path:{file_id:t}}}),staleTime:ZR})}function Hy(t,e){var n;const s=ln(t);for(const o of e)if(o.role==="user"){const a=(n=o.content.attachments)!=null?n:[];for(const i of a)i.type==="file"&&i.file&&s.setQueryData(Sge(i.file_id).queryKey,i.file)}}const $1=Zt(()=>({focusedObject:null}));function Cge(){return $1(t=>t.focusedObject)}var pc=(t=>(t[t.Textdoc=0]="Textdoc",t[t.ADAVisualization=1]="ADAVisualization",t))(pc||{});const ml=Zt(()=>({focusedObject:null,fromMessageId:null})),Ett=(t,e)=>{const s=ml.getState();e!==s.fromMessageId&&ml.setState({focusedObject:t,fromMessageId:e})},gc=t=>{ml.setState({focusedObject:t,fromMessageId:null})},pl=t=>{$1.setState({focusedObject:null});const e=ml.getState(),{focusedObject:s}=e;(!s||s.type!==0||s.textdocId!==t)&&gD(t)},gD=t=>{gc({type:0,textdocId:t})},wge=(t,e,s)=>{gc({type:0,textdocId:t,history:e,showChangesAtVersion:s})},Mtt=(t,e,s)=>{gc({type:0,textdocId:t,showChangesAtVersion:e,history:s!=null?s:void 0})},Uk=()=>{ml.setState({focusedObject:null})},kge=()=>{ml.setState({focusedObject:null,fromMessageId:null})};var Gy,CN;function Tge(){if(CN)return Gy;CN=1;var t=aQ();function e(s,n,o,a){return t(s,function(i,l,c){n(a,o(i),l,c)}),a}return Gy=e,Gy}var Vy,wN;function Ege(){if(wN)return Vy;wN=1;var t=Tge();function e(s,n){return function(o,a){return t(o,s,n(a),{})}}return Vy=e,Vy}var zy,kN;function Mge(){if(kN)return zy;kN=1;var t=rQ(),e=Ege(),s=B_(),n=Object.prototype,o=n.toString,a=e(function(i,l,c){l!=null&&typeof l.toString!="function"&&(l=o.call(l)),i[l]=c},t(s));return zy=a,zy}var Nge=Mge();const Age=en(Nge);function $k(t,e){var a,i,l,c;if(!t||e==null)return null;const{resolveTempTextdocId:s}=t,n=(a=s==null?void 0:s[e])!=null?a:e;let o=(l=(i=t.textdocById[n])!=null?i:t.textdocById[e])!=null?l:null;if(!o&&s){const u=Age(s);o=(c=t.textdocById[u[n]])!=null?c:null}return o}var Wy=Zq();const H1=Symbol(),Ige=Symbol(),jge=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),hD=jge?x.useEffect:x.useLayoutEffect,Pge=Wy.unstable_runWithPriority?t=>{try{Wy.unstable_runWithPriority(Wy.unstable_NormalPriority,t)}catch(e){if(e.message==="Not implemented.")t();else throw e}}:t=>t(),Rge=t=>({value:s,children:n})=>{const o=x.useRef(s),a=x.useRef(0),[i,l]=x.useState(null);i&&(i(s),l(null));const c=x.useRef();if(!c.current){const u=new Set,d=(f,m)=>{a.current+=1;const p={n:a.current};m!=null&&m.suspense&&(p.n*=-1,p.p=new Promise(g=>{l(()=>h=>{p.v=h,delete p.p,g(h)})})),u.forEach(g=>g(p)),f()};c.current={[H1]:{v:o,n:a,l:u,u:d}}}return hD(()=>{o.current=s,a.current+=1,Pge(()=>{c.current[H1].l.forEach(u=>{u({n:a.current,v:s})})})},[s]),x.createElement(t,{value:c.current},n)};function Oge(t){const e=x.createContext({[H1]:{v:{current:t},n:{current:-1},l:new Set,u:s=>s()}});return e[Ige]=e.Provider,e.Provider=Rge(e.Provider),delete e.Consumer,e}function Lge(t,e){const s=x.useContext(t)[H1],{v:{current:n},n:{current:o},l:a}=s,i=e(n),[l,c]=x.useReducer((u,d)=>{if(!d)return[n,i];if("p"in d)throw d.p;if(d.n===o)return Object.is(u[1],i)?u:[n,i];try{if("v"in d){if(Object.is(u[0],d.v))return u;const f=e(d.v);return Object.is(u[1],f)?u:[d.v,f]}}catch(f){}return[...u]},[n,i]);return Object.is(l[1],i)||c(),hD(()=>(a.add(c),()=>{a.delete(c)}),[a]),l[1]}var I2=(t=>(t.NATIVE="native",t.LAST_TURN="last_turn",t))(I2||{});const _D=Oge(null);function Dge(){return{lastCanvasAssistantMessageById:{},resolveTempCommentId:{},resolveTempTextdocId:{},latestTextdocId:null}}function xD(t){return T({fetchError:null,isFetchingFromPersistence:!1,textdocById:{},allTextdocIdSet:{},streamingSource:null},t!=null?t:Dge())}function qi(t,e){return td(t,e)}function Mm(t,e,s=!0){var o,a,i,l,c,u;const n=t.textdocById[e.textdocId];if(n)t.textdocById[e.textdocId]=n,n.metadata.type=e.type,n.metadata.title=e.title,n.metadata.updatedAt=e.createdAt,n.metadata.contentReferences=(l=e.metadata)==null?void 0:l.content_references,n.metadata.hiveId=(c=e.metadata)==null?void 0:c.hive_id,n.metadata.recordMeetingId=(u=e.metadata)==null?void 0:u.record_meeting_id,s?n.versions.push(e):n.versions[n.versions.length-1]=e;else{const d={metadata:{textdocId:e.textdocId,type:e.type,title:e.title,createdAt:e.createdAt,updatedAt:e.createdAt,contentReferences:(o=e.metadata)==null?void 0:o.content_references,hiveId:(a=e.metadata)==null?void 0:a.hive_id,recordMeetingId:(i=e.metadata)==null?void 0:i.record_meeting_id},versions:[e]};t.allTextdocIdSet[e.textdocId]=e.textdocId,t.textdocById[e.textdocId]=d}}var Fge=B_();const Bge=en(Fge);function Xo(t=Bge){return Lge(_D,t)}function Uge(){return Xo(t=>t==null?void 0:t.isFetchingFromPersistence)}function Ntt(){return Xo(t=>t==null?void 0:t.resolveTempCommentId)}function $ge(){return Xo(t=>{var e;return(e=t==null?void 0:t.latestTextdocId)!=null?e:null})}function Att(){return Xo(t=>{var e;return(e=t==null?void 0:t.streamingSource)!=null?e:null})}function Itt(t){return Xo(e=>$k(e,t))}function Hx(t){return Xo(e=>{var s,n;return(n=(s=$k(e,t))==null?void 0:s.metadata)!=null?n:null})}function yD(){const t=Xo(e=>e==null?void 0:e.allTextdocIdSet);return t?Object.keys(t):null}function Hge(){return Xo(t=>t?Object.keys(t.allTextdocIdSet).length>1:!1)}function Gge({textdocId:t,assistantMessageId:e}){return Xo(s=>{const n=s==null?void 0:s.lastCanvasAssistantMessageById;return n==null||t==null?!0:n[t]==null||n[t]===e})}function bD(){return ml(t=>t.focusedObject)}function jtt(){const t=ml(e=>e.focusedObject);return(t==null?void 0:t.type)!==pc.Textdoc?null:t}function Kp(){return bD()!=null}function Hk(t){const e=bD();return Xo(s=>{var i,l,c;if(!t||(e==null?void 0:e.type)!==pc.Textdoc)return!1;const n=(i=s==null?void 0:s.resolveTempTextdocId)!=null?i:{},o=(l=n[e.textdocId])!=null?l:e.textdocId,a=(c=n[t])!=null?c:t;return o===a})}var Gx=(t=>(t.ACCELERATOR="accelerator",t.BLOCK_COMMENT_LAUNCHER="block_comment_launcher",t.CLOSE_TEXTDOC="close_textdoc",t.COLLAPSED_COMMENT="collapsed_comment",t.COMMENT_ACCEPT="comment_accept",t.COMMENT_DISMISS="comment_dismiss",t.COPY="copy",t.DOWNLOAD="download",t.EXPANDED_COMMENT="expanded_comment",t.FILE_DRAWER_ITEM="file_drawer_item",t.HISTORY_NEXT="history_next",t.HISTORY_PREVIOUS="history_previous",t.MESSAGE_ATTACHMENT="message_attachment",t.OPEN_SHARE_MENU="open_share_menu",t.CREATE_SHARE_LINK="create_share_link",t.UPDATE_SHARE_LINK_TO_LATEST="update_share_link_to_latest",t.COPY_SHARE_LINK="copy_share_link",t.UPDATE_SHARE_LINK_PRIVATE="update_share_link_private",t.UPDATE_SHARE_LINK_PUBLIC="update_share_link_public",t.SHOW_CHANGES="show_changes",t.TOOLBAR_FORMAT_BOLD="toolbar_format_bold",t.TOOLBAR_FORMAT_HEADER1="toolbar_format_header1",t.TOOLBAR_FORMAT_HEADER2="toolbar_format_header2",t.TOOLBAR_FORMAT_HEADER3="toolbar_format_header3",t.TOOLBAR_FORMAT_ITALIC="toolbar_format_italic",t.TOOLBAR_FORMAT_PARAGRAPH="toolbar_format_paragraph",t.TOOLBAR_FORMAT_STYLE="toolbar_format_style",t.TOOLBAR_ASK_CHATGPT="toolbar_ask_chatgpt",t.EDIT_IN_CANVAS_MESSAGE="edit_in_canvas_message",t.EDIT_IN_CANVAS_CODE_SNIPPET="edit_in_canvas_code_snippet",t.OPEN_IN_CANVAS_WRITING_BLOCK="open_in_canvas_writing_block",t.SAVE_TO_CHAT_ON_EDITOR_CLOSE="save_to_chat_on_editor_close",t.CLOSE_WITHOUT_SAVING="close_without_saving",t.LEARN_MODE_ABOUT_NETWORK_REQUESTS="learn_more_about_network_requests",t))(Gx||{}),G1=(t=>(t.Unknown="unknown",t.ShowToast="show_toast",t.CanvasMessage="canvas_message",t.TurnComplete="turn_complete",t))(G1||{});const Vge={canvas_message:ba({message:Dm}),turn_complete:ba({}),unknown:ba({}),show_toast:ba({text:In})},TN=iQ(Object.values(G1));function zge(t){const{type:e}=XR(t,{type:TN}),s=TN(e);return T({type:s},Vge[s](t))}function EN(t,e){qge(s=>{s.type===t&&e(s)})}function Wge(t){const e=atob(t),s=new Uint8Array(e.length);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return new TextDecoder("utf-8").decode(s)}function qge(t){x.useEffect(()=>rf(window,{message:s=>{const n=s.data;if(!(typeof n!="object"||(n==null?void 0:n.type)!=="canmore_native"))try{const o=Wge(n.msg),a=zge(JSON.parse(o));t(a)}catch(o){console.warn("Unknown message from native app: ".concat(n.msg))}}}),[t])}function vD(){var s;let t;const e=Kge();switch(e){case"android":t=window.CanmoreNative;break;case"ios":t=(s=window.webkit)==null?void 0:s.messageHandlers.canmoreNative;break;case"web":t=void 0;break}return{platform:e,isNative:e!=="web",bridge:t,sendMessage:n=>t==null?void 0:t.postMessage(btoa(JSON.stringify(n)))}}function Kge(){return typeof window.CanmoreNative<"u"?"android":typeof window.webkit<"u"&&typeof window.webkit.messageHandlers.canmoreNative<"u"?"ios":"web"}function Vx(t,e){B.logEvent(t,T({platform:vD().platform},e!=null?e:{}))}function Yge(t,e,s){B.logEventWithStatsig(t,e,T({platform:vD().platform},s))}function Qge(t,e,s){Vx(t,T({distributionValue:e},s!=null?s:{}))}function Jge(t,e){Vx("Canvas Button Clicked",T({buttonName:t},e!=null?e:{}))}function Zge(t){if(t instanceof Error){const{name:e,message:s,stack:n,cause:o}=t;return{name:e,message:s,stack:n,cause:o}}return t}function Xge(t,e,s){Vx("Canvas Client Error",{message:t,error:e==null?t:Zge(e),attributes:s}),Ge.addError(e)}const Zc={logButtonClick:Jge,logEvent:Vx,logEventWithStatsig:Yge,logError:Xge,logDistribution:Qge},ehe=({children:t})=>{const e=yD(),s=Pa();return!(e!=null&&e.length)||s?null:r.jsxs(J.Root,{children:[r.jsx(J.BasicTrigger,{children:t}),r.jsx(J.Portal,{children:r.jsx(J.Content,{align:"end",onCloseAutoFocus:n=>n.preventDefault(),children:e.map(n=>r.jsx(the,{textdocId:n},n))})})]})},the=({textdocId:t})=>{const e=to(Hx(t));return r.jsx(J.Item,{icon:Eo,onClick:()=>{Zc.logButtonClick(Gx.FILE_DRAWER_ITEM),pl(e.textdocId)},children:r.jsx("span",{className:"block max-w-[200px] truncate",children:e.title})})},Ptt=()=>{const t=yD(),e=Kp();return!t||e?null:t.length===1?r.jsx(she,{textdocId:t[0]}):r.jsx(ehe,{children:r.jsx(SD,{})})},she=({textdocId:t})=>{const e=to(Hx(t));return r.jsx(SD,{onClick:()=>pl(e.textdocId)})},SD=({onClick:t})=>{const e=ne();return r.jsx(It,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:r.jsx(Wp,{onClick:t,icon:Eo,style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"}})})},sl="canmore";var dn=(t=>(t.CreateTextdoc="".concat(sl,".create_textdoc"),t.UpdateTextdoc="".concat(sl,".update_textdoc"),t.CommentTextdoc="".concat(sl,".comment_textdoc"),t))(dn||{});function CD(t){return t===dn.CreateTextdoc||t===dn.UpdateTextdoc||t===dn.CommentTextdoc}var Ut=(t=>(t[t.STREAMING=0]="STREAMING",t[t.WAITING=1]="WAITING",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t[t.CANCELED=4]="CANCELED",t[t.REDACTED=5]="REDACTED",t))(Ut||{});function nhe({thread:t,leafId:e}){return t?Se.findNode(t,s=>{var n,o;return((n=s.message.author.name)==null?void 0:n.startsWith("".concat(sl,".")))===!0||((o=s.message.recipient)==null?void 0:o.startsWith("".concat(sl,".")))===!0},e!=null?e:Se.getCurrentLeafId(t))!=null:!1}function wD(t,e){return nhe({thread:t,leafId:e})}function kD(t){const e=Gt();return x.useCallback(async()=>{if(!t)return;const s=await hr(t);Ea(e,s.gizmo_id)},[e,t])}function TD(t){var o,a;const e=IC(t),s={[on.UNKNOWN]:{inProgress:{id:"task.inProgress",defaultMessage:"In progress"},completed:{id:"task.completed",defaultMessage:"Completed"},failed:{id:"task.failed",defaultMessage:"Failed"},cancelled:{id:"task.cancelled",defaultMessage:"Cancelled"},skipped:{id:"task.skipped",defaultMessage:"Skipped"}},[on.RESEARCH]:{inProgress:{id:"task.research.inProgress",defaultMessage:"Research in progress"},completed:{id:"task.research.completed",defaultMessage:"Research completed"},failed:{id:"task.research.failed",defaultMessage:"Research failed"},cancelled:{id:"task.research.cancelled",defaultMessage:"Research cancelled"},skipped:{id:"task.research.skipped",defaultMessage:"Research skipped"}},[on.PRO_MODE]:{inProgress:{id:"task.pro.inProgress",defaultMessage:"Pro thinking in progress"},completed:{id:"task.pro.completed",defaultMessage:"Pro thinking completed"},failed:{id:"task.pro.failed",defaultMessage:"Pro thinking failed"},cancelled:{id:"task.pro.cancelled",defaultMessage:"Pro thinking cancelled"},skipped:{id:"task.pro.skipped",defaultMessage:"Pro thinking skipped"}},[on.THINKING]:{inProgress:{id:"task.thinking.inProgress",defaultMessage:"Thinking"},completed:{id:"task.thinking.completed",defaultMessage:"Thinking completed"},failed:{id:"task.thinking.failed",defaultMessage:"Thinking failed"},cancelled:{id:"task.thinking.cancelled",defaultMessage:"Thinking cancelled"},skipped:{id:"task.thinking.skipped",defaultMessage:"Thinking skipped"}},[on.IMAGE_GEN]:{inProgress:{id:"task.image.inProgress",defaultMessage:"Creating image"},completed:{id:"task.image.completed",defaultMessage:"Image created"},failed:{id:"task.image.failed",defaultMessage:"Image failed"},cancelled:{id:"task.image.cancelled",defaultMessage:"Image creation cancelled"},skipped:{id:"task.image.skipped",defaultMessage:"Image creation skipped"}},[on.FRONTEND_ARTIFACT]:{inProgress:{id:"task.artifact.inProgress",defaultMessage:"Artifact in progress"},completed:{id:"task.artifact.completed",defaultMessage:"Artifact created"},failed:{id:"task.artifact.failed",defaultMessage:"Artifact failed"},cancelled:{id:"task.artifact.cancelled",defaultMessage:"Artifact creation cancelled"},skipped:{id:"task.artifact.skipped",defaultMessage:"Artifact creation skipped"}}},n=(()=>{switch(t.status){case Is.CREATED:case Is.RUNNING:case Is.UNDETERMINED:case Is.FINALIZING:return"inProgress";case Is.COMPLETED:return"completed";case Is.FAILED:return"failed";case Is.CANCELLED:return"cancelled";case Is.SKIPPING:return"skipped";default:return}})();if(n)return(a=(o=s[e])==null?void 0:o[n])!=null?a:s[on.UNKNOWN][n]}function ohe(t,e,s){var a;const n=t.originalConversationId,o=TD(t);qm({clientThreadId:n,title:(a=t.title)!=null?a:e.formatMessage({id:"qi9HQV",defaultMessage:"Task complete"}),subtitle:o?e.formatMessage(o):void 0,thumbnail:s})}const ea=ue(Ce,"554074",20,20),ahe=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),rhe="https://cdn.openai.com/";class ihe{async fetch(e,s){const a=this.makeQueryOptions(s,e),{enabled:n}=a,o=De(a,["enabled"]);return await e.fetchQuery(o)}makeQueryOptions(e,s){var i;const n=Ma(e.asset.asset_pointer),o=U(T({},e),{id:n}),a=["getFileDownloadLink",n,e.gizmoId,e.conversationId,e.sharedThreadId,e.postId];return e.force&&(s==null||s.invalidateQueries({queryKey:a})),{queryKey:a,queryFn:async()=>n.startsWith(vc)||n.startsWith(rhe)?U(T({},e.asset),{url:n}):await lhe(o),staleTime:ZR,enabled:(i=e.getServerUrl)!=null?i:!0}}}const jl=new ihe;async function lhe(t){const{asset:e,gizmoId:s,id:n,isUnauthenticated:o,conversationId:a,postId:i}=t,l=await V_(n,s,o,a,!1,i).catch(c=>{throw c instanceof Zs||Ge.addError(new Error("Could not fetch file with ID ".concat(n," from file service"),{cause:c})),c});if(l.status!==z_.Success)throw Ge.addError("Could not fetch file with ID ".concat(n," from file service"),l),new Error("Could not fetch file with ID ".concat(n," from file service"));return U(T({},e),{url:l.download_url})}const ih=({Icon:t,size:e="lg"})=>r.jsx("div",{className:z("bg-token-bg-tertiary group-hover:bg-token-bg-secondary group-hover/task-row:bg-token-bg-secondary flex items-center justify-center",e==="lg"?"h-12 w-12 rounded-lg":"h-10 w-10 rounded-md"),children:t&&r.jsx(t,{className:z("text-token-text-secondary",e==="lg"?"h-5 w-5":"h-4 w-4")})}),ED=({task:t,conversationId:e,size:s="lg"})=>{const n=t.imageGenMessage,o=Gt(),[a,i]=x.useState(void 0);return x.useEffect(()=>{if(!n)return;const c=gr.getImageAssetPointers(n)[0];c&&jl.fetch(o,{asset:c,conversationId:e}).then(u=>{i(u)})},[n,o,e]),x.useMemo(()=>{switch(IC(t)){case on.IMAGE_GEN:return a?r.jsx("img",{src:a.url,alt:t.title,className:z("shrink-0 rounded-md object-cover",s==="lg"?"h-12 w-12":"h-10 w-10")}):r.jsx(ih,{size:s});case on.RESEARCH:return r.jsx(ih,{Icon:ul,size:s});case on.FRONTEND_ARTIFACT:return r.jsx(ih,{Icon:ea,size:s});case on.PRO_MODE:case on.THINKING:case on.UNKNOWN:return r.jsx(ih,{Icon:yf,size:s})}},[a,t,s])},che=t=>{"use forget";var k;const e=F.c(12),{isOdysseyTurn:s,hasConduitToken:n,isProTurn:o,isDeepResearchTurn:a,isImageGenAsync:i,metadataNode:l,isImageGenSync:c,isInterruptionBlocked:u}=Qe(t,uhe),d=G(),f=(k=l==null?void 0:l.message.metadata)==null?void 0:k.async_task_id;let m;e[0]!==f?(m=E=>f?E.tasks[f]:null,e[0]=f,e[1]=m):m=e[1];const p=bi(m);let g;e[2]!==d?(g=Ee(d,"1439437954"),e[2]=d,e[3]=g):g=e[3];const h=g;let _;e[4]!==d||e[5]!==(p==null?void 0:p.status)?(_=(p==null?void 0:p.status)===Is.RUNNING&&Ee(d,"877631007"),e[4]=d,e[5]=p==null?void 0:p.status,e[6]=_):_=e[6];const b=_;let y;e[7]!==d||e[8]!==(p==null?void 0:p.status)?(y=((p==null?void 0:p.status)===Is.RUNNING||(p==null?void 0:p.status)===Is.FINALIZING)&&Ee(d,"1927459101"),e[7]=d,e[8]=p==null?void 0:p.status,e[9]=y):y=e[9];const v=y;let S;e[10]!==d?(S=Xe(d,"3396794266").get("enable_interruption",!1),e[10]=d,e[11]=S):S=e[11];const w=S&&n&&!o&&!a&&!i&&!c;return u?!1:h||s||w||b||v},kf=t=>Ee(t,"1927459101"),Rtt=t=>Ee(t,"877631007");function uhe(t){var e,s,n,o,a,i,l,c,u,d,f,m,p,g,h;return{isOdysseyTurn:!!((s=(e=Se.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&s.n7jupd_message),hasConduitToken:(t==null?void 0:t.conduitToken)!=null,isProTurn:!!(((n=Se.getCurrentNode(t))==null?void 0:n.message.author.name)===Qs.A8KM123||(i=(a=(o=Se.getCurrentNode(t))==null?void 0:o.message.metadata)==null?void 0:a.model_slug)!=null&&i.endsWith("-pro")),isDeepResearchTurn:!!((c=(l=Se.getCurrentNode(t))==null?void 0:l.message.metadata)!=null&&c.deep_research_version),isImageGenAsync:!!((d=(u=Se.getCurrentNode(t))==null?void 0:u.message.metadata)!=null&&d.image_gen_async),isImageGenSync:((m=(f=Se.getCurrentNode(t))==null?void 0:f.message.author)==null?void 0:m.role)===ot.Assistant&&((p=Se.getCurrentNode(t))==null?void 0:p.message.recipient)===ed,metadataNode:Se.findAsyncTaskMetadataNode(t),isInterruptionBlocked:!!((h=(g=Se.getCurrentNode(t))==null?void 0:g.message.metadata)!=null&&h.block_interruption)}}const dhe=()=>!1;function fhe({task:t}){const e=ne(),s=G(),n=t.originalConversationId,o=aa(),a=oe(()=>o==null?void 0:o.serverId$()),i=dhe(t.originalConversationId),l=kD(n),c=kf(s),u=a===n,{clearSystemHintModeTrigger:d}=La();return x.useEffect(()=>{var f,m;if((f=t.notificationStatus)!=null&&f.recentlyCompleted&&!((m=t.notificationStatus)!=null&&m.notificationSent)&&!i)if(c&&d1(s))nt(n,p=>{as.setShouldRefetchConvoOnFinalize(p,!0)});else{if(!u){const p=r.jsx(ED,{task:t,conversationId:n});l(),ohe(t,e,p)}d(Ye.Research),Bn.setTaskNotificationSent(t.taskId)}},[t,e,l,i,d,c,u,s,n]),r.jsx(gn.Fragment,{})}function Ott(){const t=bi(Um.getAllTasksOrdered);return lQ(),t.length?r.jsx(r.Fragment,{children:t.map(e=>r.jsx(fhe,{task:e},e.taskId))}):null}function Fd({percentage:t,thickness:e=1/12,className:s,sizeOverride:n,backgroundStrokeClassName:o="stroke-gray-400",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){const c=n!=null?n:120,u=c*e,d=(c-u)/2,f=2*Math.PI*d,m=f-t/100*f;return r.jsxs("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),className:s,children:[r.jsx("circle",{className:z("origin-[50%_50%] -rotate-90",o),strokeWidth:u,fill:"transparent",r:d,cx:c/2,cy:c/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:u,strokeDashoffset:m,strokeDasharray:"".concat(f," ").concat(f),fill:"transparent",r:d,cx:c/2,cy:c/2,style:{strokeLinecap:"round",transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}const mhe=({size:t=40,className:e="text-blue-400",backgroundStrokeClassName:s="stroke-gray-400"})=>{const n=t,o=1/12,a=n*o,i=(n-a)/2,l=2*Math.PI*i,u=l-60/100*l;return r.jsxs("svg",{width:n,height:n,viewBox:"0 0 ".concat(n," ").concat(n),className:z("animate-spin",e),children:[r.jsx("circle",{className:z("origin-[50%_50%] -rotate-90",s),strokeWidth:a,fill:"transparent",r:i,cx:n/2,cy:n/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90",stroke:"currentColor",strokeWidth:a,strokeDashoffset:u,strokeDasharray:"".concat(l," ").concat(l),fill:"transparent",r:i,cx:n/2,cy:n/2,style:{strokeLinecap:"round"}})]})};function Pl(t,e){t({pathname:"/",search:(e==null?void 0:e.params)&&"?".concat(e.params)},{replace:e==null?void 0:e.replace,state:AD(e==null?void 0:e.config)})}function MD(){"use no forget";const t=Hs(),e=ghe(t),s=x.useRef(e!=null?e:{});return e?s.current=e:s.current}function ND(){"use forget";const t=F.c(2),e=MD();let s;return t[0]!==e?(s=phe(),t[0]=e,t[1]=s):s=t[1],s}function phe(t){return AD()}function AD(t){return{newConversationConfig:T({},t)}}function ghe(t){var e;return(e=t.state)==null?void 0:e.newConversationConfig}const Bd=ue(Ce,"28a8a0",20,20),Nm=ue(Ce,"c31c21",20,20,!0),ID="personalization:open-memories-modal",Lo=new Set(Object.values(tt)),Ltt={US:{plans:Lo,channels:new Set(["sms"])},CA:{plans:Lo,channels:new Set(["sms"])},IN:{plans:Lo,channels:new Set(["whatsapp"])},CO:{plans:Lo,channels:new Set(["whatsapp"])},JP:{plans:Lo,channels:new Set(["sms"])},GB:{plans:Lo,channels:new Set(["whatsapp"])},BR:{plans:Lo,channels:new Set(["whatsapp"])},MX:{plans:Lo,channels:new Set(["whatsapp"])},AR:{plans:Lo,channels:new Set(["whatsapp"])},KR:{plans:Lo,channels:new Set(["sms"])},FR:{plans:Lo,channels:new Set(["sms"])},DE:{plans:Lo,channels:new Set(["whatsapp"])}};function lh({label:t,tooltip:e,Icon:s,tooltipInteractive:n=!1}){return r.jsx(It,{label:e,interactive:n,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold opacity-70",children:[s&&r.jsx(s,{className:"icon-sm"}),r.jsx("div",{children:t})]})})}function Dtt({clientThreadId:t,gizmoId:e}){const s=G(),n=ne(),o=yt(),{openSettings:a}=Lp(),i=Dp(),l=Ml(),c=Sx(),{data:u}=$p(e,!1,c),d=!!e,f=coe(),m=pk(s,u==null?void 0:u.memoryFullPct),p=m!=="control",g=oo(),h=Qe(t,Se.getIsNewConversation),_=oe(()=>gp(s));if(!c)return null;const b=()=>{var y;if(typeof window<"u")try{(y=window.sessionStorage)==null||y.setItem(ID,"true")}catch(v){}};if(g&&(!h||d))return r.jsx(lh,{label:n.formatMessage(Ar.temporaryChat),tooltip:n.formatMessage(Ar.temporaryChatTooltip),Icon:Bd});if(_&&!h)return r.jsx(lh,{label:n.formatMessage(Ar.memoryOff),tooltip:n.formatMessage(Ar.developerModeTooltip),Icon:Nm});if(i&&!l&&!g)return r.jsx(lh,{label:n.formatMessage(Ar.memoryOff),tooltip:n.formatMessage(Ar.memoryOffTooltip),Icon:Nm});if(u&&(u==null?void 0:u.memoryFullPct)>=100&&!g&&!f){const y=()=>{B.logEventWithStatsig("Memory Indicator Upgrade Clicked","chatgpt_memory_indicator_upgrade_clicked",{memoryFullButtonVariant:m}),an(o,"Memory Indicator")},v=()=>{B.logEventWithStatsig("Memory Indicator Manage Clicked","chatgpt_memory_indicator_manage_clicked",{memoryFullButtonVariant:m}),b(),a(hn.Personalization)};return r.jsx(lh,{label:n.formatMessage(Ar.memoryFull),tooltip:r.jsx("div",{className:"whitespace-normal",children:r.jsx(j,U(T({},p?Ar.memoryFullTooltipGoldenHour:Ar.memoryFullTooltip),{values:{upgrade:S=>r.jsx("button",{onClick:y,className:"text-token-text-link underline",children:S}),manage:S=>r.jsx("button",{onClick:v,className:"text-token-text-link underline",children:S}),link:S=>r.jsx(Ia,{to:tf(hn.Personalization),className:"underline",children:S})}}))}),Icon:Nm,tooltipInteractive:!0})}else return null}const Ar=Ne({temporaryChat:{id:"ConversationPrivacyIndicator.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatTooltip:{id:"ConversationPrivacyIndicator.temporaryChatTooltip",defaultMessage:"Temporary Chats won't appear in your history, and ChatGPT won't remember anything you talk about."},memoryOff:{id:"ConversationPrivacyIndicator.memoryOff",defaultMessage:"Memory Off"},memoryOffTooltip:{id:"ConversationPrivacyIndicator.memoryOffTooltip",defaultMessage:"ChatGPT won't remember anything you talk about in this conversation."},developerModeTooltip:{id:"ConversationPrivacyIndicator.developerModeTooltip",defaultMessage:"ChatGPT won't reference past memories, or create new memories from this chat."},memoryFull:{id:"Z4zW/R",defaultMessage:"Memory full"},memoryFullTooltip:{id:"7IKefd",defaultMessage:"ChatGPT's out of space for saved memories. <link>Manage saved memories</link> to create more space."},memoryFullTooltipGoldenHour:{id:"mc0vkm",defaultMessage:"New memories can't be saved. <upgrade>Upgrade</upgrade> for more memory or <manage>manage</manage> saved memories."}}),Ftt=ue(Ce,"1bf527",20,20),Xc=ue(Ce,"630ca2",20,20),jD=ue(Ce,"edbcb1",20,20);let qy="",MN="",Gf;const ts={logProductEvent(t,e){const s=T(T({referrals_session_id:qy,program_name:MN},Gf?{is_referrer:Gf}:{}),e!=null?e:{});B.logEvent(t,s)},logAnnouncementProductEvent(t,e){B.logEvent(t,e)},createNewSession(t,e=void 0){qy=Ds(),MN=t,Gf=e},logShowReferralDiscount(t,e){ts.createNewSession(t,e),$e.count(He.REFERRALS,"referrals.web.showReferralDiscount"),ts.logProductEvent("Referrals: Show Referral Discount")},logShowReferralLinkGenerationModal(t){ts.createNewSession(t,!0),$e.count(He.REFERRALS,"referrals.web.showReferralLinkGenerationModal"),ts.logProductEvent("Referrals: Show Referral Link Generation Modal")},logClickReferralGetLinkButton(){$e.count(He.REFERRALS,"referrals.web.clickReferralGetLinkButton"),ts.logProductEvent("Referrals: Click Referral Get Link Button")},logCopyReferralLink(){$e.count(He.REFERRALS,"referrals.web.copyReferralLinkSuccess"),ts.logProductEvent("Referrals: Copy Referral Link")},logClickReferrerIntroNotNowButton(){$e.count(He.REFERRALS,"referrals.web.clickReferrerIntroNotNowButton"),ts.logProductEvent("Referrals: Click Referrer Intro Not Now Button")},logShowReferrerConclusion(){$e.count(He.REFERRALS,"referrals.web.showReferrerConclusion"),ts.logProductEvent("Referrals: Show Referrer Conclusion")},logClickUpgradeButton(t){const e=[{key:"is_paying_user",value:t?"true":"false"}];Gf!==void 0&&e.push({key:"is_referrer",value:Gf?"true":"false"}),$e.count(He.REFERRALS,"referrals.web.clickUpgradeButton",e),ts.logProductEvent("Referrals: Click Upgrade Button",{is_paying_user:t})},logReferralDiscountContinue(){$e.count(He.REFERRALS,"referrals.web.referralDiscountContinue"),ts.logProductEvent("Referrals: Referral Discount Continue")},logClose(t){$e.count(He.REFERRALS,"referrals.web.close",[{key:"source",value:t}]),B.logEvent("Referrals: Close",{referrals_session_id:qy,source:t})},logClickValidateEmail(){$e.count(He.REFERRALS,"referrals.web.clickValidateEmail"),ts.logProductEvent("Referrals: Click Validate Email")},logValidateEmailSuccess(){$e.count(He.REFERRALS,"referrals.web.validateEmailSuccess")},logValidateEmailFailure(){$e.count(He.REFERRALS,"referrals.web.validateEmailFailure")},logSendVerificationCode(){$e.count(He.REFERRALS,"referrals.web.sendVerificationCode"),ts.logProductEvent("Referrals: Send Verification Code")},logClickResendVerificationCodeButton(){$e.count(He.REFERRALS,"referrals.web.resendVerificationCode"),ts.logProductEvent("Referrals: Click Resend Verification Code Button")},logClickChangeEmailButton(){$e.count(He.REFERRALS,"referrals.web.changeEmail"),ts.logProductEvent("Referrals: Click Change Email Button")},logClickValidateVerificationCode(){$e.count(He.REFERRALS,"referrals.web.validateVerificationCode"),ts.logProductEvent("Referrals: Click Validate Verification Code")},logValidateVerificationCodeSuccess(){$e.count(He.REFERRALS,"referrals.web.validateVerificationCodeSuccess")},logValidateVerificationCodeFailure(){$e.count(He.REFERRALS,"referrals.web.validateVerificationCodeFailure")},logApplyDiscount(){$e.count(He.REFERRALS,"referrals.web.applyDiscount"),ts.logProductEvent("Referrals: Apply Discount")},logMobileSubscriptionTooltipOpen(){$e.count(He.REFERRALS,"referrals.web.mobileSubscriptionTooltipOpen"),ts.logProductEvent("Referrals: Show Mobile Subscription Tooltip")},logShowReferralUpsellAnnouncementBanner(){$e.count(He.REFERRALS,"referrals.web.showReferralUpsellAnnouncementBanner"),ts.logAnnouncementProductEvent("Referrals: Show Referral Upsell Announcement Banner")},logShowReferrerRedemptionBanner(){$e.count(He.REFERRALS,"referrals.web.showReferrerRedemptionBanner"),ts.logAnnouncementProductEvent("Referrals: Show Referrer Redemption Banner")},logShowRefereeRedemptionBanner(t){$e.count(He.REFERRALS,"referrals.web.showRefereeRedemptionBanner"),ts.logAnnouncementProductEvent("Referrals: Show Referee Redemption Banner",{referral_code:t})},logClickReferralUpsellButton(){$e.count(He.REFERRALS,"referrals.web.clickReferralUpsellButton"),ts.logProductEvent("Referrals: Click Referral Upsell Button")},logClickReferrerRedeemButton(){$e.count(He.REFERRALS,"referrals.web.clickReferrerRedeemButton"),ts.logProductEvent("Referrals: Click Referrer Redeem Button")},logClickRefereeRedeemButton(t){$e.count(He.REFERRALS,"referrals.web.clickRefereeRedeemButton"),ts.logProductEvent("Referrals: Click Referee Redeem Button",{referral_code:t})},logCloseReferralUpsellAnnouncementBanner(){$e.count(He.REFERRALS,"referrals.web.closeReferralUpsellAnnouncementBanner"),ts.logAnnouncementProductEvent("Referrals: Close Referral Upsell Announcement Banner")},logCloseReferrerRedemptionBanner(){$e.count(He.REFERRALS,"referrals.web.closeReferrerRedemptionBanner"),ts.logAnnouncementProductEvent("Referrals: Close Referrer Redemption Banner")},logCloseRefereeRedemptionBanner(t){$e.count(He.REFERRALS,"referrals.web.closeRefereeRedemptionBanner"),ts.logAnnouncementProductEvent("Referrals: Close Referee Redemption Banner",{referral_code:t})},logShowReferralUpsellHomepageButton(){$e.count(He.REFERRALS,"referrals.web.showReferralUpsellHomepageButton"),ts.logProductEvent("Referrals: Show Referral Upsell Homepage Button")},logClickReferralUpsellHomepageButton(){$e.count(He.REFERRALS,"referrals.web.clickReferralUpsellHomepageButton"),ts.logProductEvent("Referrals: Click Referral Upsell Homepage Button")}};function PD(t=!0){return dt({queryKey:["referral-upsell-announcement"],queryFn:async()=>await Yp.getUpsellAnnouncementBannerInfo(),enabled:t})}class Yp{static async getReferralProgramMetadata(e){return de.safeGet("/referrals/{program_name}",{parameters:{path:{program_name:e}},authOption:is.SendIfAvailable})}static async getReferralCodeMetadata(e){return de.safeGet("/referrals/{referral_code}/metadata",{parameters:{path:{referral_code:e}},authOption:is.SendIfAvailable})}static async createReferralCode(e){return de.safePost("/referrals/create_referral_code",{requestBody:{transaction_id:e}})}static async getEnrollmentDetails(){return de.safeGet("/referrals/enrollment_details")}static async validateEmail(e,s){return de.safePost("/referrals/validate_email",{requestBody:{email:e,program_name:s}})}static async sendVerificationCode(e){return de.safePost("/referrals/send_verification_code",{requestBody:{transaction_id:e}})}static async validateVerificationCode(e,s){return de.safePost("/referrals/validate_verification_code",{requestBody:{transaction_id:e,verification_code:s}})}static async redeemReferral(e,s){return de.safePost("/referrals/{referral_code}/redeem",{parameters:{path:{referral_code:e}},requestBody:{transaction_id:s}})}static async getReferralDiscount(){return de.safeGet("/referrals/available_referral_discount")}static async getUpsellAnnouncementBannerInfo(){return de.safeGet("/referrals/upsell_announcement_banner_info")}static async getIsEligibleForReferrals(){return de.safeGet("/referrals/is_eligible_for_referrals")}static async trackReferralSignup(e){return de.safePost("/referrals/track_referral_signup",{parameters:{query:{referral_code:e}},authOption:is.SendIfAvailable})}}function Btt(){const t=G(),e=yt(),{data:s}=dt({queryKey:["is-eligible-for-referrals"],queryFn:Ee(t,"550432558")?()=>Yp.getIsEligibleForReferrals():XS}),n=s==null?void 0:s.eligible_program_name;if(x.useEffect(()=>{n&&ts.logShowReferralUpsellHomepageButton()},[n,s]),!n)return null;const o="Refer";return r.jsx(It,{side:"bottom",label:o,children:r.jsx(ke,{color:"secondary",className:z("text-token-text-primary relative"),icon:jD,onClick:()=>{ts.logClickReferralUpsellHomepageButton(),e("/refer/".concat(n))},label:o,children:o})})}const hhe=cQ(t=>({gizmo_id:t,kind:Pt.GizmoInteraction}),{limit:16});function _he(t,e){return e&&((t==null?void 0:t.kind)===Pt.GizmoInteraction||(t==null?void 0:t.kind)===Pt.PrimaryAssistant)?hhe(e):t}function Gk(t){var a;const e=ja(),s=G(),n=ct(s);return!(n==null?void 0:n.isWorkspaceAccount())||((a=e==null?void 0:e.includes(t))!=null?a:!1)}const RD=ue(Ce,"f7f872",20,20),Ec=ue(Ce,"974afd",20,20),xhe=ue(Ce,"30e002",20,20),Vk=ue(Ce,"ce3544",20,20),Tf=ue(Ce,"ee1f3e",20,20),Xm=ue(Ce,"61ee0c",20,20),yhe=Object.freeze(Object.defineProperty({__proto__:null,default:Xm},Symbol.toStringTag,{value:"Module"})),bhe=ue(Ce,"23d2ff",20,20),vhe=ue(Ce,"a04f47",20,20,!0),Utt=ue(Ce,"48c914",20,20,!0),zk=ue(Ce,"452c6a",44,44),Rl=ue(Ce,"3ee541",20,20),She=ue(Ce,"13322a",20,20);class NN{constructor(e){X(this,"conversationId");this.conversationId=e}}function OD(){const t=Gt(),e=Kt();return x.useCallback(async({newGizmoId:n,conversation:o,previousGizmoId:a,optimistic:i=!0,contextScopes:l})=>{let c=()=>{};const u=()=>{a&&jn(a)&&t.invalidateQueries({queryKey:[c1,{gizmoId:a}]}),n&&jn(n)&&t.invalidateQueries({queryKey:[c1,{gizmoId:n}]}),(!n||!a||!jn(n)||!jn(a))&&t.invalidateQueries({queryKey:um()}),a&&t.invalidateQueries({queryKey:F3(t,a,!1).queryKey}),n&&t.invalidateQueries({queryKey:F3(t,n,!1).queryKey})};i&&!(o instanceof NN)&&(c=uQ({queryClient:t,newGizmoId:n,conversation:o,previousGizmoId:a}));try{const d=o instanceof NN?o.conversationId:o.id,f={gizmo_id:n==null?"":n};l&&l.length>0&&(f.context_scopes=l),await de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:d}},requestBody:f})}catch(d){i&&(c(),u()),e.danger(cs.moveConversationToProjectError,{toastId:"move_conversation_to_snorlax_error",hasCloseButton:!0})}i||u()},[t,e])}const Che="3553340571";function whe(t){return t?js(t,Che):null}function zx(t){var s;const e=whe(t);return(s=e==null?void 0:e.get("enable_api",!1))!=null?s:!1}const khe=({gizmoResource:t})=>{const e=Kt(),s=ne(),[n,o]=x.useState(!1),a=G(),i=yt(),l=zx(a);return{isConverting:n,handleConvertToSkill:async()=>{var u,d;if(!n)try{o(!0);const f=await de.safePost("/hazelnuts/gpts/{gizmo_id}/convert",{parameters:{path:{gizmo_id:t.gizmo.id}}}),m=(d=(u=f==null?void 0:f.name)!=null?u:t.gizmo.display.name)!=null?d:"skill";e.success(s.formatMessage(AN.convertToSkillSuccess,{skillName:m})),f!=null&&f.id&&i("/skills/editor/".concat(f.id))}catch(f){const m=AC(f);e.danger(m!=null?m:s.formatMessage(AN.convertToSkillFailure))}finally{o(!1)}},isHazelnutsEnabled:l}},The=({gizmoResource:t,canEdit:e})=>(khe({gizmoResource:t}),null),AN=Ne({convertToSkill:{defaultMessage:"Convert to skill",id:"GizmoInformation.convertToSkill"},convertingToSkill:{defaultMessage:"Converting...",id:"GizmoInformation.convertingToSkill"},convertToSkillSuccess:{defaultMessage:"Converted {skillName} to a skill",id:"GizmoInformation.convertToSkillSuccess"},convertToSkillFailure:{defaultMessage:"Couldn't convert this GPT. Please try again.",id:"GizmoInformation.convertToSkillFailure"}}),Wk=ue(Ce,"787580",20,20);function qk({title:t,description:e,confirmText:s,cancelText:n,isOpen:o=!1,onClose:a,onConfirm:i,primaryButtonColor:l="primary",textCenter:c=!1,loading:u=!1,children:d}){const f=ne();return r.jsx(Ft,{testId:"modal-confirm",isOpen:o,onClose:a,title:t,description:e,textCenter:c,primaryButton:r.jsx(mn.Button,{title:s!=null?s:f.formatMessage(IN.confirmLabel),color:l,onClick:i,loading:u}),secondaryButton:r.jsx(mn.Button,{title:n!=null?n:f.formatMessage(IN.cancelLabel),color:"secondary",onClick:a}),children:d})}const IN=Ne({confirmLabel:{id:"ConfirmModal.confirmLabel",defaultMessage:"Confirm"},cancelLabel:{id:"ConfirmModal.cancelLabel",defaultMessage:"Cancel"}}),nr={messages:Ne({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}})};class gl{static async getAutomations(e=null,s=null){return de.safeGet("/automations",{parameters:{query:{cursor:e,filter:s}}})}static getAutomationQueryKey(e){return["automation",e]}static async getAutomation(e){return de.safeGet("/automation/{automation_id}",{parameters:{path:{automation_id:e}}})}static async setAutomationStatus(e,s){return de.safePost("/automations/set_status",{requestBody:{jawbone_id:e,is_enabled:s}})}static async removeAutomation(e){return de.safePost("/automations/remove",{requestBody:{automation_id:e}})}static async saveAutomation(e,s,n,o,a,i,l,c){return de.safePost("/automations/save",{requestBody:{jawbone_id:e,title:s,schedule:n,is_enabled:o,prompt:a,default_timezone:i,notifications_enabled:!1,email_enabled:!1,schedule_components:l,last_run_time:c}})}static async getAutomationNextRunTimes(e,s=null,n=5){return de.safeGet("/automation/{automation_id}/next_run_times",{parameters:{path:{automation_id:e},query:{last_run_time:s,page_size:n}}})}}const qt=Ne({pageTitle:{id:"CHk10n",defaultMessage:"Tasks"},emptyStateTitle:{id:"WZwnBu",defaultMessage:"Start creating tasks"},emptyStateDescription:{id:"VGFt6n",defaultMessage:"Ask ChatGPT to do things in the future."},emptyStateTryYourOwn:{id:"ARS7Xs",defaultMessage:"Try your own"},makingAutomation:{id:"nngZkS",defaultMessage:"Creating task..."},updatingAutomation:{id:"TtVqbi",defaultMessage:"Updating task..."},cancelModalDescription:{id:"ovdvFi",defaultMessage:"Are you sure you want to cancel? Your changes will not be saved."},pauseBanner:{id:"Shy3x+",defaultMessage:"This task is paused."},editModalTitle:{id:"TATVBL",defaultMessage:"Task"},editModalName:{id:"6yXwm0",defaultMessage:"Name"},editModalInstructions:{id:"6m8uZT",defaultMessage:"Instructions"},editModalSchedule:{id:"huULIs",defaultMessage:"When"},editModalDelete:{id:"jmdwEu",defaultMessage:"Delete"},editModalCancel:{id:"CkqFyL",defaultMessage:"Cancel"},editModalSave:{id:"tw230z",defaultMessage:"Save"},editModalSaveSuccess:{id:"2bPf6t",defaultMessage:"Task saved"},editModalSaveFailure:{id:"s9XRUo",defaultMessage:"Failed to save task"},editModalMissingTaskName:{id:"Gvl61x",defaultMessage:"A task name is required."},editModalMissingInstructions:{id:"50eJR5",defaultMessage:"Instructions are required."},editModalTooFarInFuture:{id:"pRMB4Q",defaultMessage:"Tasks cant be scheduled more than 2 years in the future."},editModalInPast:{id:"og7U6X",defaultMessage:"Please choose a date in the future."},newScheduleTitle:{id:"T+KLUF",defaultMessage:"New schedule"},editScheduleTitle:{id:"foaSfJ",defaultMessage:"Edit schedule"},seeMore:{id:"e818FO",defaultMessage:"See more"},scheduleFrequencyOnce:{id:"ubLvlf",defaultMessage:"Doesn't repeat"},scheduleFrequencyDaily:{id:"fCPVKk",defaultMessage:"Daily"},scheduleFrequencyWeekly:{id:"LBJNa8",defaultMessage:"Weekly"},scheduleFrequencyMonthly:{id:"KtDbq5",defaultMessage:"Monthly"},scheduleFrequencyYearly:{id:"jPb1ga",defaultMessage:"Annually"},scheduleFrequencyCustom:{id:"aW+M+B",defaultMessage:"Custom"},scheduleNextThreeTimes:{id:"jHrFIq",defaultMessage:"Next three times"},scheduleCustomScheduleTitle:{id:"S55b0f",defaultMessage:"To update this custom schedule, just ask ChatGPT"},scheduleCustomScheduleContent:{id:"HzgAWq",defaultMessage:'For example, "do this every 3 weeks on Tuesday"'},scheduleCustomScheduleOpenChat:{id:"QIZwlV",defaultMessage:"Open chat"},pausedPill:{id:"H45WpI",defaultMessage:"Paused"},customSchedule:{id:"xBDjE1",defaultMessage:"Custom schedule"},deleteModalConfirmation:{id:"VvP/mR",defaultMessage:"Are you sure you want to delete this task? This cannot be undone."},deleteModalSuccess:{id:"yOFuly",defaultMessage:"Task deleted"},deleteScheduleModalSuccess:{id:"o9VBGa",defaultMessage:"Scheduled task deleted"},deleteModalFailure:{id:"/sJV6Y",defaultMessage:"Failed to delete task"},deleteModalTitle:{id:"ghUY4y",defaultMessage:"Delete task"},lastRunToday:{id:"32N654",defaultMessage:"Today"},lastRunYesterday:{id:"0J3FW6",defaultMessage:"Yesterday"},notificationsBannerAllow:{id:"cw4hGs",defaultMessage:"Allow"},notificationsBannerNotNow:{id:"zwEnmc",defaultMessage:"Not now"},notificationsBannerTitle:{id:"aZg1Bl",defaultMessage:"Turn on desktop notifications"},notificationsBannerContent:{id:"I6r+8F",defaultMessage:"Get notified when theres an update on your tasks."},notificationsDisabledBannerTitle:{id:"mVWjpz",defaultMessage:"Notifications are disabled in your browser."},notificationsDisabledBannerContent:{id:"wAahVE",defaultMessage:"You'll need to visit your browser preferences to allow them."},attachmentEdit:{id:"/KHfm0",defaultMessage:"Edit"},attachmentManageAll:{id:"hlEgKT",defaultMessage:"Schedules"},localizedRuntimeTomorrow:{id:"yK7y4m",defaultMessage:"Tomorrow"},scheduled:{id:"Vor1nS",defaultMessage:"Scheduled"},paused:{id:"ATWDeu",defaultMessage:"Paused"},completed:{id:"Ur4kmZ",defaultMessage:"Completed"}}),xa={nextRunTime:t=>r.jsx(j,{id:"/OfbaB",defaultMessage:"Next run {nextRunTime}",values:{nextRunTime:t}}),runtimeDaily:t=>r.jsx(j,{id:"jawbone.runtime.daily",defaultMessage:"Daily at {localizedTime}",values:{localizedTime:t}}),runtimeWeeklyShort:t=>r.jsx(j,{id:"iTSfMl",defaultMessage:"Weekly on {localizedDayOfWeek}",values:{localizedDayOfWeek:t}}),runtimeWeekly:(t,e)=>r.jsx(j,{id:"jawbone.runtime.weekly",defaultMessage:"Weekly on {localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeMonthly:t=>r.jsx(j,{id:"jawbone.runtime.monthly",defaultMessage:"Monthly on the {monthDay, selectordinal, one {#st} two {#nd} few {#rd} other {#th}}",values:{monthDay:t}}),runtimeYearly:(t,e)=>r.jsx(j,{id:"jawbone.runtime.yearly",defaultMessage:"Annually on {localizedMonth} {day}",values:{localizedMonth:t,day:e}}),runtimeToday:t=>r.jsx(j,{id:"hStcUW",defaultMessage:"Today at {localizedTime}",values:{localizedTime:t}}),runtimeTomorrow:t=>r.jsx(j,{id:"BF9QGd",defaultMessage:"Tomorrow at {localizedTime}",values:{localizedTime:t}}),runtimeNextFiveDays:(t,e)=>r.jsx(j,{id:"UdC7R6",defaultMessage:"{localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeThisYear:(t,e)=>r.jsx(j,{id:"L9Pqre",defaultMessage:"{localizedMonthDay} at {localizedTime}",values:{localizedMonthDay:t,localizedTime:e}}),runtimeOutsideThisYear:(t,e)=>r.jsx(j,{id:"XOR8K9",defaultMessage:"{localizedDate} at {localizedTime}",values:{localizedDate:t,localizedTime:e}})},Qp=Zt(Vs(()=>({jawboneById:{},cursorsByFilter:{scheduled:null,paused:null,finished:null},maxBannerClientThreadId:void 0}))),Gl=Qp.getState,Mu=Qp.setState,Jp={initJawbonesFromServerData:(t,e,s)=>{Mu(n=>{t.forEach(o=>{n.jawboneById[o.id]=o}),n.cursorsByFilter[s]=e})},removeAutomation:t=>{Mu(e=>{delete e.jawboneById[t]})},setAutomation:(t,e)=>{Mu(s=>{const n=s.jawboneById[t];if(!n){s.jawboneById[t]=e;return}const o=new Date(n.updated_at),a=new Date(e.updated_at);(isNaN(o.getTime())||isNaN(a.getTime())||o<a)&&(s.jawboneById[t]=e)})},setAutomationStatus:(t,e)=>{Mu(s=>{s.jawboneById[t].is_enabled=e})},clearMaxBannerClientThreadId:()=>{Mu(t=>{t.maxBannerClientThreadId=void 0})},setMaxBannerClientThreadId:t=>{Mu(e=>{e.maxBannerClientThreadId=t})}},Zp={getAllJawbonesGrouped:(t=Gl())=>Nhe(Object.values(t.jawboneById)),getAutomation:(t,e=Gl())=>e.jawboneById[t],getCursor:(t,e=Gl())=>e.cursorsByFilter[t],getHasJawbones:(t=Gl())=>Object.values(t.jawboneById).length>0,getTargetTimeUTC:(t,e=Gl())=>{var s;return(s=e.jawboneById[t])==null?void 0:s.target_time_utc},hasJawbones:(t=Gl())=>Object.keys(t.jawboneById).length>0,getMaxBannerClientThreadId:(t=Gl())=>t.maxBannerClientThreadId};function Ky(t){const{isLoading:e}=ip({queryKey:["automations",t],queryFn:async({pageParam:s})=>{const n=await gl.getAutomations(s,t);return Jp.initJawbonesFromServerData(n.items,n.cursor,t),n},initialPageParam:Zp.getCursor(t),getNextPageParam:s=>{var n;return(n=s.cursor)!=null?n:void 0}});return{isLoading:e}}function Ehe(){const{isLoading:t}=Ky("scheduled"),{isLoading:e}=Ky("paused"),{isLoading:s}=Ky("finished");return{isLoadingScheduled:t,isLoadingPaused:e,isLoadingFinished:s}}function LD({automation_id:t,onSuccess:e,onError:s}){return ds({mutationFn:({is_enabled:n})=>gl.setAutomationStatus(t,n),onSuccess:n=>{Jp.setAutomation(n.id,n),e&&e()},onError:(n,o)=>{s&&s(o.is_enabled)}})}function Mhe({automation_id:t,onSuccess:e,onError:s}){return ds({mutationFn:()=>gl.removeAutomation(t),onSuccess:()=>{Jp.removeAutomation(t),e&&e()},onError:()=>{s&&s()}})}function Nhe(t){return t.reduce((e,s)=>(s.next_run_times.length===0?e.completed.automations.push(s):s.is_enabled?e.scheduled.automations.push(s):e.paused.automations.push(s),e),{scheduled:{label:qt.scheduled,filter:"scheduled",automations:[]},paused:{label:qt.paused,filter:"paused",automations:[]},completed:{label:qt.completed,filter:"finished",automations:[]}})}function Kk({item:t,onClose:e,onConfirm:s}){const n=ne(),o=Kt(),a=G(),i=Ee(a,"733205176");let l;i?l=qt.deleteScheduleModalSuccess:l=qt.deleteModalSuccess;const{mutate:c,isPending:u}=Mhe({automation_id:t.id,onSuccess:()=>{o.success(n.formatMessage(l),{hasCloseButton:!0}),s==null||s(),e()},onError:()=>{o.danger(qt.deleteModalFailure,{hasCloseButton:!0,toastId:"jawbone_delete_modal"})}});return r.jsx(qk,{isOpen:!0,title:n.formatMessage(qt.deleteModalTitle),primaryButtonColor:"danger",onClose:e,confirmText:n.formatMessage(nr.messages.delete),onConfirm:()=>{c()},loading:u,children:r.jsx("div",{className:"text-sm",children:r.jsx(j,T({},qt.deleteModalConfirmation))})})}const Ahe=Object.freeze(Object.defineProperty({__proto__:null,JawboneDeleteModal:Kk},Symbol.toStringTag,{value:"Module"})),Xp=ue(Ce,"d0e761",20,20),Wx=ue(Ce,"6eb6ca",16,16,!0),Po=x.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0,validFrequencies:void 0,setValidFrequencies:()=>{}});function ep({initialScheduleComponents:t,initialValidFrequencies:e,nextRunTimes:s,children:n}){const[o,a]=x.useState(t),[i,l]=x.useState(void 0),[c,u]=x.useState(void 0),[d,f]=x.useState(e);return r.jsx(Po.Provider,{value:{scheduleComponents:o,setFrequency:m=>{a(U(T({},o),{frequency:m}))},setStartDate:m=>{l(m),u(Ihe(m)),a(U(T({},o),{start_time:m.toISOString()}))},setByDay:m=>{a(U(T({},o),{by_day:m}))},setByMonthDay:m=>{a(U(T({},o),{by_month_day:m}))},setByYearDay:m=>{a(U(T({},o),{by_year_day:m}))},setByMonth:m=>{a(U(T({},o),{by_month:m}))},setTime:(m,p)=>{a(U(T({},o),{by_hour:m,by_minute:p,by_second:0}))},startDate:i,scheduleErrors:o.frequency!=="once"?void 0:c,nextRunTimes:s,setValidFrequencies:f,validFrequencies:d},children:n})}function Ihe(t){let e=!1;const s=new Date;s.setFullYear(s.getFullYear()+2),t.getTime()>=s.getTime()&&(e=!0);let n=!1;const o=new Date;if(o.setSeconds(0,0),t.getTime()<o.getTime()&&(n=!0),e||n)return{tooFarInFuture:e,inPast:n}}function DD(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function jhe(t,e){const s=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;s.setHours(t.getHours(),t.getMinutes()),e.setStartDate(s)}function Phe(t,e){var o,a;const s=DD(e.scheduleComponents),n=new Date(t);n.setHours((o=s==null?void 0:s.getHours())!=null?o:0,(a=s==null?void 0:s.getMinutes())!=null?a:0),e.setStartDate(n)}function Rhe(t,e){const s=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;s.setDate(t),e.setStartDate(s)}function Ohe({initialDate:t,onClick:e}){const s=ne(),{scheduleComponents:n}=x.useContext(Po),o=x.useMemo(()=>Lhe(n),[n]),[a,i]=x.useState(t),c=new Intl.DateTimeFormat(s.locale,{month:"short",year:"numeric"}).format(a);return r.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"grow text-lg font-semibold",children:c}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(jN,{onClick:()=>i(new Date(a.getFullYear(),a.getMonth()-1,1)),children:r.jsx(Wx,{className:"icon-sm"})}),r.jsx(jN,{onClick:()=>{i(new Date(a.getFullYear(),a.getMonth()+1,1))},children:r.jsx(Zr,{className:"icon-sm"})})]})]}),r.jsx(Fhe,{visibleDate:a,selectedDate:o,onClick:e})]})}function jN(t){const n=t,{children:e}=n,s=De(n,["children"]);return r.jsx("button",U(T({},s),{className:"flex h-10 w-10 items-center justify-center",children:e}))}function Lhe(t){return t.start_time?new Date(t.start_time):void 0}function PN(t,e){return new Date(t,e+1,0).getDate()}function Dhe(t,e){return new Date(t,e,1).getDay()}function Fhe({visibleDate:t,selectedDate:e,onClick:s}){const n=ne(),o=x.useContext(Po),a=6,i=x.useMemo(()=>{const u=t.getFullYear(),d=t.getMonth(),f=PN(u,d),m=Dhe(u,d),p=[];for(let h=m-1;h>=0;h--)p.push(new Date(u,d-1,PN(u,d-1)-h));for(let h=1;h<=f;h++)p.push(new Date(u,d,h));const g=a*7-p.length;for(let h=1;h<=g;h++)p.push(new Date(u,d+1,h));return p},[t]),l=x.useMemo(()=>{const u=new Intl.DateTimeFormat(n.locale,{weekday:"narrow"});return Array.from({length:7},(d,f)=>u.format(new Date(1970,0,f+4)))},[n.locale]),c=new Date;return c.setHours(0,0,0,0),r.jsxs("div",{children:[r.jsx("div",{className:"flex",children:l.map((u,d)=>r.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:u},d))}),Array.from({length:a}).map((u,d)=>r.jsx("div",{className:"flex",children:i.slice(d*7,(d+1)*7).map(f=>{const m=f>=c;return r.jsx("button",{className:"h-10 w-10",onClick:()=>{m&&(Phe(f,o),s())},children:r.jsx(FD,{dayNumber:f.getDate(),isSelected:!!e&&e.toDateString()===f.toDateString(),isSelectable:m})},f.getDay())})},d))]})}function FD({dayNumber:t,isSelected:e,isSelectable:s}){return r.jsx("div",{className:"h-full w-full p-1",children:r.jsx("div",{className:z("flex h-full w-full items-center justify-center rounded-full text-sm",!s&&"text-token-text-tertiary",!e&&s&&"hover:bg-token-main-surface-secondary",e&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}function Bhe({onClick:t,selectedDay:e}){const s=x.useContext(Po),n=x.useMemo(()=>{const o=[];let a=1;for(let i=0;i<5;i++){const l=[];for(let c=0;c<7&&a<=31;c++){const u=a;l.push(r.jsx("button",{className:"h-10 w-10 text-sm",onClick:()=>{Rhe(u,s),t(u)},children:r.jsx(FD,{dayNumber:u,isSelectable:!0,isSelected:a===e},a)},a)),a++}o.push(r.jsx("div",{className:"flex",children:l},i))}return r.jsxs("div",{children:[r.jsx("p",{className:"ms-2 mb-2 text-sm font-semibold",children:r.jsx(j,{id:"WOVV2Z",defaultMessage:"Repeat every month on the"})}),r.jsx("div",{children:o})]})},[e,t,s]);return r.jsx("div",{children:n})}const Uhe="flex-1",$he="max-h-96 overflow-y-auto";function eg({rootClassName:t,contentClassName:e,trigger:s,children:n,open:o,onOpenChange:a,onCloseAutoFocus:i}){return r.jsx("div",{className:z(t!=null?t:Uhe),children:r.jsxs(J.Root,{open:o,onOpenChange:a,children:[s,r.jsx(J.Portal,{children:r.jsx(J.Content,{className:e!=null?e:$he,side:"bottom",onCloseAutoFocus:i,children:n})})]})})}const Hhe="w-full justify-start rounded-lg border-token-border-medium";function tg({className:t,showError:e=!1,children:s}){return r.jsx(J.Trigger,{className:z(Hhe,t),style:{borderColor:e?"var(--text-error)":void 0},children:r.jsxs("div",{className:"flex w-full items-center gap-1",children:[r.jsx("div",{className:"grow text-start",children:s}),r.jsx(Xp,{className:"icon-sm text-token-text-tertiary"})]})})}function Yk({options:t,initialOption:e,showError:s=!1,onClick:n}){var o;return r.jsx(eg,{trigger:r.jsx(tg,{showError:s,children:(o=e==null?void 0:e.label)!=null?o:t[0].label}),children:r.jsx(Qk,{options:t,onClick:n})})}function Qk({options:t,onClick:e}){return r.jsx(r.Fragment,{children:t.map((s,n)=>r.jsx(J.Item,{onClick:()=>e==null?void 0:e(s),children:s.label},n))})}function BD({targetTimeUTC:t,useShortForm:e=!1}){return r.jsx(W_,{fallback:void 0,name:"JawboneLocalizedRuntime",children:r.jsx(Ghe,{targetTimeUTC:t,useShortForm:e})})}function Ghe({targetTimeUTC:t,useShortForm:e=!1}){const s=ne(),{localDate:n,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}=Vhe(t,s.locale);if(n.toDateString()===o.toDateString())return xa.runtimeToday(c);if(n.toDateString()===a.toDateString())return xa.runtimeTomorrow(c);if(n>=i&&n<l){const u=new Intl.DateTimeFormat(s.locale,{weekday:"long"}).format(n);return xa.runtimeNextFiveDays(u,c)}else if(n.getFullYear()===o.getFullYear()){const u=new Intl.DateTimeFormat(s.locale,{month:"long",day:"numeric"}).format(n);return e?u:xa.runtimeThisYear(u,c)}else{const u=new Intl.DateTimeFormat(s.locale,{year:"numeric",month:"short",day:"numeric"}).format(n);return e?u:xa.runtimeOutsideThisYear(u,c)}}function Vhe(t,e){const s=new Date(t);if(isNaN(s.getTime()))throw new Error("Invalid targetTimeUTC provided: ".concat(t));const n=s,o=new Date;o.setHours(0,0,0,0);const a=new Date(o);a.setDate(a.getDate()+1);const i=new Date(o);i.setDate(i.getDate()+2);const l=new Date(o);l.setDate(o.getDate()+7);const c=new Intl.DateTimeFormat(e,{hour:"numeric",minute:n.getMinutes()===0?void 0:"numeric",hour12:!0}).format(n);return{localDate:n,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}}function UD(t){const e=new Date,s=e.getFullYear(),n=e.getMonth(),o=e.getDate();let a;if(a=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=parseInt(a[2],10),c=a[3].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(s,n,o,i,l)}if(a=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),a){let i=parseInt(a[2],10);const l=parseInt(a[3],10),c=a[1].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(s,n,o,i,l)}if(a=t.match(/^(\d{1,2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=a[2].toLowerCase();if(i===12&&l==="am")return i=0,new Date(s,n,o,i,0);if(i>=1&&i<=11&&l==="pm")return i+=12,new Date(s,n,o,i,0);if(i>=1&&i<=12)return new Date(s,n,o,i,0)}if(a=t.match(/^(\d{1,2}):(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(s,n,o,i,l)}if(a=t.match(/^(\d{1,2})(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(s,n,o,i,l)}if(a=t.match(/^(\d{1,2})$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(s,n,o,i,0)}if(a=t.match(/^(\d{1,2}):$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(s,n,o,i,0)}}function zhe(t){return UD(t)}function $D(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function HD(t){if(!t)return"";const e=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return"".concat(e,":").concat(s)}function GD(t,e){const s=new Date(0,0,0,t,e);return $D(s)}function Whe(t,e){return"".concat(String(t).padStart(2,"0"),":").concat(String(e).padStart(2,"0"))}function RN(t){const[e,s]=t.split(":"),n=Number.parseInt(e!=null?e:"",10),o=Number.parseInt(s!=null?s:"",10);return Number.isNaN(n)||Number.isNaN(o)?"":GD(n,o)}function ON(t){const e=UD(t);if(e)return HD(e)}function sg(){const t=x.useContext(Po),[e,s]=x.useState(!1),[n,o]=x.useState(!0),a=x.useRef(null),i=x.useRef(null),l=x.useMemo(()=>qhe(),[]),c=DD(t.scheduleComponents),u=x.useMemo(()=>c!=null?c:new Date(new Date().setHours(14,0,0,0)),[c]);x.useEffect(()=>{c||VD(u,t)},[c,u,t]);const d=$D(u),f=HD(u),[m,p]=x.useState(!0),g=x.useRef(f),h=x.useRef(d),_=x.useRef(h.current);x.useEffect(()=>{const v=setTimeout(()=>{e&&a.current&&a.current.select()},0);return()=>clearTimeout(v)},[e]),x.useEffect(()=>{const v=setTimeout(()=>{if(e&&i.current){const S=e6(l,C=>C.value===g.current||C.value===Khe(g.current));if(S!==-1&&i.current){const C=i.current.children[S];C&&C.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(v)},[e,g,l]);const b=v=>{_.current=v;const S=ON(v),C=S!==void 0;p(C),C&&S&&(g.current=S,h.current=RN(S))},y=()=>{const v=ON(_.current);v?(g.current=v,h.current=RN(v),_.current=h.current,Yy(v,t)):(_.current=h.current,Yy(g.current,t)),p(!0),a.current&&(a.current.value=h.current)};return r.jsx(eg,{trigger:r.jsx(tg,{showError:!m||!!t.scheduleErrors,children:r.jsx("div",{className:"flex w-full items-center",children:r.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:a,rows:1,wrap:"off",onBlur:()=>{y()},onChange:v=>{const S=v.target.value;b(S)},onKeyDown:v=>{v.key===" "&&v.stopPropagation()}})})}),open:e,onOpenChange:v=>{s(v),v?o(!0):y()},onCloseAutoFocus:v=>{v.preventDefault(),a.current&&a.current.select()},children:r.jsx("ul",{ref:i,children:r.jsx(Qk,{options:l,onClick:v=>{g.current=v.value,h.current=v.label,_.current=v.label,Yy(v.value,t),p(!0),s(!1),a.current&&(a.current.value=v.label,a.current.select())}})})})}function qhe(){return Array.from({length:96},(e,s)=>{const n=Math.floor(s/4),o=s%4*15,a=Whe(n,o);return{label:GD(n,o),value:a}})}function Khe(t){if(!t)return t;const[e]=t.split(":");return e?"".concat(e.padStart(2,"0"),":00"):t}function VD(t,e){if(t)switch(e.scheduleComponents.frequency){case"once":{jhe(t,e);break}case"daily":case"weekly":case"monthly":case"yearly":{e.setTime(t.getHours(),t.getMinutes());break}}}function Yy(t,e){const s=zhe(t);VD(s,e)}function Ef(){const t=ne(),{scheduleComponents:e,scheduleErrors:s,setFrequency:n,validFrequencies:o}=x.useContext(Po),a=x.useMemo(()=>[{label:t.formatMessage(qt.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(qt.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(qt.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(qt.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(qt.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(qt.scheduleFrequencyCustom),value:"custom"}].filter(c=>o===void 0||(o==null?void 0:o.includes(c.value))),[t,o]),i=a.find(l=>l.value===e.frequency);return x.useEffect(()=>{i||n(a[0].value)},[i,a,n]),r.jsx(Yk,{options:a,initialOption:i,onClick:l=>n(l.value),showError:!!s})}function Yhe(){const t=ne(),{scheduleComponents:e,scheduleErrors:s,setByDay:n}=x.useContext(Po),o=Array.from({length:7},(c,u)=>new Intl.DateTimeFormat(t.locale,{weekday:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2021,2,u+1)))),a=["MO","TU","WE","TH","FR","SA","SU"],i=o.map((c,u)=>({label:c,value:a[u]})),l=i.find(c=>c.value===e.by_day);return x.useEffect(()=>{l||n(i[0].value)},[l,i,n]),r.jsx(Yk,{options:i,initialOption:l,onClick:c=>n(c.value),showError:!!s})}function Qhe({useShortForm:t=!1}){var c;const{scheduleComponents:e,scheduleErrors:s,setByMonthDay:n}=x.useContext(Po),o=Array.from({length:31},(u,d)=>({label:(d+1).toString(),value:d+1})),a=(u,d=new Date().getFullYear())=>new Date(d,u,0).getDate(),i=o.slice(0,a((c=e.by_month)!=null?c:1)),l=i.find(u=>u.value===e.by_month_day);return x.useEffect(()=>{l||n(i[0].value)},[l,i,n]),r.jsx(eg,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(tg,{className:t?"w-[75px]":void 0,showError:!!s,children:l==null?void 0:l.label}),children:r.jsx(Qk,{options:i,onClick:u=>n(u.value)})})}function Jhe({useShortForm:t=!1}){var l;const{scheduleComponents:e,scheduleErrors:s,setByMonthDay:n}=x.useContext(Po),o=ne(),a=(l=e.by_month_day)!=null?l:1,i=o.formatMessage(c1e[a-1]);return r.jsx(eg,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(tg,{className:t?"w-[75px]":void 0,showError:!!s,children:i}),children:r.jsx("div",{className:"m-4",children:r.jsx(Bhe,{onClick:n,selectedDay:a})})})}function Zhe(){const t=ne(),{scheduleComponents:e,scheduleErrors:s,setByMonth:n}=x.useContext(Po),o=new Intl.DateTimeFormat(t.locale,{month:"long"}),a=Array.from({length:12},(l,c)=>({label:o.format(new Date(0,c)),value:c+1})),i=a.find(l=>l.value===e.by_month);return x.useEffect(()=>{i||n(a[0].value)},[i,a,n]),r.jsx(Yk,{options:a,initialOption:i,onClick:l=>n(l.value),showError:!!s})}function Xhe(){const t=ne(),{scheduleComponents:e,scheduleErrors:s,setStartDate:n}=x.useContext(Po),[o,a]=x.useState(!1);x.useEffect(()=>{e.start_time||n(new Date)},[e.start_time,n]);const i=e.start_time?new Date(e.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return r.jsx(eg,{trigger:r.jsx(tg,{showError:!!s,children:l.format(i)}),contentClassName:"min-w-[224px]",open:o,onOpenChange:a,children:r.jsx(Ohe,{initialDate:i,onClick:()=>a(!1)})})}function e1e(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ef,{}),r.jsx(Xhe,{}),r.jsx(sg,{})]})}function t1e(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ef,{}),r.jsx(sg,{})]})}function s1e(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ef,{}),r.jsx(Yhe,{}),r.jsx(sg,{})]})}function n1e(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ef,{}),r.jsx(Jhe,{}),r.jsx(sg,{})]})}function o1e(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ef,{}),r.jsx(Zhe,{}),r.jsx(Qhe,{useShortForm:!0}),r.jsx(sg,{})]})}function a1e({automationId:t,conversationId:e,onModalClose:s}){return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Ef,{}),r.jsx(r1e,{automationId:t}),r.jsx(i1e,{conversationId:e,onModalClose:s})]})}function r1e({automationId:t}){var i;const{data:e,fetchNextPage:s,hasNextPage:n,isFetchingNextPage:o}=ip({queryKey:["automation-next-run-times",t],queryFn:({pageParam:l})=>gl.getAutomationNextRunTimes(t,l),getNextPageParam:l=>l.has_more?l.next_run_times[l.next_run_times.length-1]:void 0,initialPageParam:null}),a=x.useRef(null);return x.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]),r.jsx("div",{className:"bg-token-main-surface-secondary rounded-lg p-3",children:r.jsxs("div",{ref:a,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[(i=e==null?void 0:e.pages)==null?void 0:i.flatMap(l=>l.next_run_times).map((l,c)=>r.jsx("div",{children:r.jsx(BD,{targetTimeUTC:l})},c)),n&&r.jsx("button",{onClick:()=>s(),disabled:o,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[r.jsx(j,{id:"qL17GV",defaultMessage:"See more"}),r.jsx(Xp,{className:"icon"})]})})]})})}function i1e({conversationId:t,onModalClose:e}){const s=yt();return t?r.jsxs("div",{className:"border-token-border-medium flex gap-3 rounded-lg border p-4",children:[r.jsx(ci,{}),r.jsxs("div",{className:"flex grow flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:r.jsx(j,T({},qt.scheduleCustomScheduleTitle))}),r.jsx("span",{className:"text-token-text-secondary text-sm",children:r.jsx(j,T({},qt.scheduleCustomScheduleContent))})]}),r.jsx(ke,{onClick:()=>{e(),s(ya(t))},children:r.jsx(j,T({},qt.scheduleCustomScheduleOpenChat))})]}):null}function l1e({automationId:t,conversationId:e,onModalClose:s}){const{scheduleComponents:n}=x.useContext(Po);switch(n.frequency){case"once":return r.jsx(e1e,{});case"daily":return r.jsx(t1e,{});case"weekly":return r.jsx(s1e,{});case"monthly":return r.jsx(n1e,{});case"yearly":return r.jsx(o1e,{});case"custom":return t?r.jsx(a1e,{automationId:t,conversationId:e,onModalClose:s}):null}}const c1e=new Array(31).fill(0).map((t,e)=>e+1).map(t=>{const e=t%10===1&&t!==11?"".concat(t,"st"):t===2||t===22?"".concat(t,"nd"):t===3||t===23?"".concat(t,"rd"):"".concat(t,"th");return{id:"date-ordinal-".concat(t),description:"Brief translation of a number's ordinal abbreviation, i.e. #1 = 1st (the 'st'), #2 = 2nd (the 'nd')",defaultMessage:e}});function u1e(t){return!!t.id}function d1e({onClose:t,onConfirm:e}){const s=ne();return r.jsx(qk,{isOpen:!0,title:s.formatMessage(qt.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{e()},children:r.jsx("div",{className:"text-sm",children:r.jsx(j,T({},qt.cancelModalDescription))})})}function f1e({onClick:t}){return r.jsxs("div",{className:"border-token-border-medium flex items-center justify-between rounded-2xl border p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[r.jsx(Wk,{className:"icon-lg"}),r.jsx(j,T({},qt.pauseBanner))]}),r.jsx("div",{children:r.jsx(ke,{onClick:t,children:r.jsx(j,T({},nr.messages.resume))})})]})}function Jk({item:t,source:e,onClose:s,onSave:n=gl.saveAutomation}){const o=ne(),a=Kt();x.useEffect(()=>{$e.count(He.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:i,scheduleErrors:l}=x.useContext(Po),[c,u]=x.useState(!0),[d,f]=x.useState(!1),[m,p]=x.useState(!1),[g,h]=x.useState(t.title),[_,b]=x.useState(t.prompt),[y,v]=x.useState(t.is_enabled),S=x.useRef(null);x.useEffect(()=>{const P=S.current;if(!P)return;P.style.height="auto";const R=300;P.style.height="".concat(Math.min(P.scrollHeight,R),"px")},[_]);const C=!!t.id;x.useEffect(()=>{l!=null&&l.tooFarInFuture||l!=null&&l.inPast?u(!1):u(g.length>0&&_.length>0);const P=g!==t.title||_!==t.prompt||y!==t.is_enabled||!hp(i,t.schedule_components);f(P)},[l==null?void 0:l.tooFarInFuture,l==null?void 0:l.inPast,g,_,y,t,i]);const{mutate:w}=ds({mutationFn:()=>{var P;return n((P=t.id)!=null?P:null,g,t.schedule,y,_,t.schedule_components.start_time!==i.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,i,t.last_run_time)},onSuccess:P=>{P&&Jp.setAutomation(P.id,P),s(o.formatMessage(qt.editModalSaveSuccess))},onError:()=>{a.danger(qt.editModalSaveFailure,{hasCloseButton:!0,toastId:"jawbone_edit_modal"}),u(!0),p(!1)}}),[k,E]=x.useState(!1),[M,N]=x.useState(!1),A=G();Ee(A,"156153730");const I=yt();return r.jsxs(r.Fragment,{children:[r.jsx(Ft,{testId:"modal-jawbone-edit",className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(d){N(!0);return}s()},showCloseButton:!0,title:C?r.jsx(j,T({},qt.editScheduleTitle)):r.jsx(j,T({},qt.newScheduleTitle)),headerAccessory:e==="tasks"&&r.jsx(ke,{icon:Nl,color:"secondary",onClick:()=>{I(ya(t.conversation_id))},children:r.jsx(j,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:r.jsxs("div",{className:"flex flex-col gap-6",children:[!y&&r.jsx(f1e,{onClick:()=>{v(!0)}}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,T({},qt.editModalName))}),r.jsx("textarea",{className:z("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",g.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:g,onChange:P=>h(P.target.value),placeholder:o.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),g.length===0&&r.jsx(ch,{children:r.jsx(j,T({},qt.editModalMissingTaskName))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,T({},qt.editModalInstructions))}),r.jsx("textarea",{ref:S,className:z("border-token-border-medium bg-token-main-surface-primary w-full resize-none overflow-y-auto rounded-lg text-sm",_.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:_,onChange:P=>b(P.target.value),placeholder:o.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),_.length===0&&r.jsx(ch,{children:r.jsx(j,T({},qt.editModalMissingInstructions))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,T({},qt.editModalSchedule))}),r.jsx("div",{children:r.jsx(l1e,{automationId:t.id,conversationId:t.conversation_id,onModalClose:s})}),r.jsxs("div",{children:[(l==null?void 0:l.tooFarInFuture)&&r.jsx(ch,{children:r.jsx(j,T({},qt.editModalTooFarInFuture))}),(l==null?void 0:l.inPast)&&r.jsx(ch,{children:r.jsx(j,T({},qt.editModalInPast))})]}),!1]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{className:"flex gap-2",children:[y&&C&&r.jsx(ke,{color:"secondary",onClick:()=>{v(!1)},children:r.jsx(j,T({},nr.messages.pause))}),C&&r.jsx(ke,{color:"danger-outline",onClick:()=>{E(!0)},children:r.jsx(j,T({},qt.editModalDelete))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ke,{color:"secondary",onClick:()=>{if(d){N(!0);return}s()},children:r.jsx(j,T({},qt.editModalCancel))}),r.jsx(ke,{disabled:!c,loading:m,color:"primary",onClick:()=>{p(!0),w()},children:r.jsx(j,T({},qt.editModalSave))})]})]})]})}),M&&r.jsx(d1e,{onClose:()=>N(!1),onConfirm:()=>s()}),k&&u1e(t)&&r.jsx(Kk,{item:t,onClose:()=>E(!1),onConfirm:()=>{E(!1),s()}})]})}function ch({children:t}){return r.jsx("div",{className:"text-token-text-error text-sm font-medium",children:t})}const Zk=ue(Ce,"402281",20,20);function m1e({dateString:t}){switch(p1e(t)){case"today":return r.jsx(j,T({},qt.lastRunToday));case"yesterday":return r.jsx(j,T({},qt.lastRunYesterday));case"weekday":return new Date(t).toLocaleDateString(void 0,{weekday:"long"});case"full":return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}}function p1e(t){const e=new Date(t),n=t6(new Date,e);return n===0?"today":n===1?"yesterday":n<=7?"weekday":"full"}function LN(t){"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx("span",{className:"bg-token-main-surface-tertiary text-token-text-secondary rounded-[0.25rem] px-1 py-[1px] text-xs font-medium",children:s}),e[0]=s,e[1]=n):n=e[1],n}function g1e(t){"use forget";const e=F.c(2),{item:s}=t,{is_enabled:n,target_time_utc:o}=s;if(!n){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(LN,{children:r.jsx(j,T({},qt.pausedPill))}),e[0]=a):a=e[0],a}if(o){const a=new Date,i=new Date(o);if(a.getTime()-i.getTime()>=6e4){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(LN,{children:r.jsx(j,{id:"ppsH3r",defaultMessage:"Delayed"})}),e[1]=l):l=e[1],l}}return null}function h1e(t){"use forget";const e=F.c(19),{item:s,useShortForm:n}=t,o=n===void 0?!1:n;if(s.next_run_times.length===0&&s.last_run_time){let i;return e[0]!==s.last_run_time?(i=r.jsx(m1e,{dateString:s.last_run_time}),e[0]=s.last_run_time,e[1]=i):i=e[1],i}const a=s.schedule_components;switch(a.frequency){case"once":{let i;return e[2]!==s.id||e[3]!==o?(i=r.jsx(_1e,{automationId:s.id,useShortForm:o}),e[2]=s.id,e[3]=o,e[4]=i):i=e[4],i}case"daily":{let i;return e[5]!==a?(i=r.jsx(x1e,{scheduleComponents:a,useShortForm:!1}),e[5]=a,e[6]=i):i=e[6],i}case"weekly":{let i;return e[7]!==a||e[8]!==o?(i=r.jsx(y1e,{scheduleComponents:a,useShortForm:o}),e[7]=a,e[8]=o,e[9]=i):i=e[9],i}case"monthly":{let i;return e[10]!==a?(i=r.jsx(b1e,{scheduleComponents:a}),e[10]=a,e[11]=i):i=e[11],i}case"yearly":{let i;return e[12]!==a?(i=r.jsx(v1e,{scheduleComponents:a}),e[12]=a,e[13]=i):i=e[13],i}case"custom":{if(s.next_run_times.length===0){let c;return e[14]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("div",{children:r.jsx(j,T({},qt.customSchedule))}),e[14]=c):c=e[14],c}let i;if(e[15]!==s.next_run_times[0]){const u=new Date(s.next_run_times[0]).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});i=xa.nextRunTime(u),e[15]=s.next_run_times[0],e[16]=i}else i=e[16];let l;return e[17]!==i?(l=r.jsx("div",{children:i}),e[17]=i,e[18]=l):l=e[18],l}}}function zD(t){"use forget";const e=F.c(2),{item:s}=t;let n;return e[0]!==s?(n=r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(h1e,{item:s}),r.jsx(g1e,{item:s})]}),e[0]=s,e[1]=n):n=e[1],n}function _1e(t){"use forget";const e=F.c(5),{automationId:s,useShortForm:n}=t,o=n===void 0?!1:n;let a;e[0]!==s?(a=Zp.getTargetTimeUTC(s),e[0]=s,e[1]=a):a=e[1];const i=a;if(!i)return null;let l;return e[2]!==i||e[3]!==o?(l=r.jsx(BD,{targetTimeUTC:i,useShortForm:o}),e[2]=i,e[3]=o,e[4]=l):l=e[4],l}function x1e(t){"use forget";var c,u;const e=F.c(3),{scheduleComponents:s,useShortForm:n}=t,o=n===void 0?!1:n,a=ne(),i=WD((c=s.by_hour)!=null?c:0,(u=s.by_minute)!=null?u:0,a.locale);if(o){let d;return e[0]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(j,T({},qt.scheduleFrequencyDaily)),e[0]=d):d=e[0],d}let l;return e[1]!==i?(l=xa.runtimeDaily(i),e[1]=i,e[2]=l):l=e[2],l}function y1e(t){"use forget";var d,f,m;const e=F.c(8),{scheduleComponents:s,useShortForm:n}=t,o=n===void 0?!1:n,a=ne();let i;if(e[0]!==a.locale||e[1]!==s.by_day){const p=new Date,g=S1e((d=s.by_day)!=null?d:"")-p.getDay();p.setDate(p.getDate()+(g>=0?g:g+7)),i=new Intl.DateTimeFormat(a.locale,{weekday:"long"}).format(p),e[0]=a.locale,e[1]=s.by_day,e[2]=i}else i=e[2];const l=i,c=WD((f=s.by_hour)!=null?f:0,(m=s.by_minute)!=null?m:0,a.locale);if(o){let p;return e[3]!==l?(p=xa.runtimeWeeklyShort(l),e[3]=l,e[4]=p):p=e[4],p}let u;return e[5]!==l||e[6]!==c?(u=xa.runtimeWeekly(l,c),e[5]=l,e[6]=c,e[7]=u):u=e[7],u}function b1e({scheduleComponents:t}){var e;return xa.runtimeMonthly(String((e=t.by_month_day)!=null?e:1))}function v1e({scheduleComponents:t}){var n;const e=ne(),s=x.useMemo(()=>{var a;const o=new Date;return o.setMonth(((a=t.by_month)!=null?a:1)-1),new Intl.DateTimeFormat(e.locale,{month:"long"}).format(o)},[t.by_month,e.locale]);return xa.runtimeYearly(s,(n=t.by_month_day)!=null?n:1)}function WD(t,e,s){"use forget";const n=F.c(4);let o;if(n[0]!==t||n[1]!==s||n[2]!==e){const i=new Date;i.setHours(t),i.setMinutes(e),o=new Intl.DateTimeFormat(s,{hour:"numeric",minute:e===0?void 0:"numeric",hour12:!0}).format(i),n[0]=t,n[1]=s,n[2]=e,n[3]=o}else o=n[3];return o}function S1e(t){switch(t){case"SU":return 0;case"MO":return 1;case"TU":return 2;case"WE":return 3;case"TH":return 4;case"FR":return 5;case"SA":return 6;default:return-1}}const Xk="view",qD="curate",KD="taskId";function YD(t){const e=new URLSearchParams(t);return e.set(Xk,qD),e.toString()}function C1e(t,e){const s=new URLSearchParams(t);return s.set(Xk,qD),s.set(KD,e),s.toString()}function $tt(t,e){const s=new URLSearchParams(e);s.delete(Xk),s.delete(KD),t({search:s.toString()},{replace:!0})}function QD(t){const e=jt();return xt(()=>vk(e))===!0?t?"/pulse?".concat(C1e(window.location.search,t)):"/pulse?".concat(YD(window.location.search)):"/tasks"}const w1e=Pe(()=>me(()=>Promise.resolve().then(()=>Ahe),void 0).then(t=>t.JawboneDeleteModal)),k1e=Pe(()=>me(()=>Promise.resolve().then(()=>lW),void 0).then(t=>t.SugarboneMessageAttachmentInner)),T1e=Pe(()=>me(()=>Promise.resolve().then(()=>lW),void 0).then(t=>t.ViewPulseAutomationDropdownItem));function Htt(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(eT,{children:r.jsxs("div",{className:"flex h-full w-full flex-col justify-center py-4 ps-5 pe-3",children:[r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary h-4 w-1/2 rounded-sm"}),r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary mt-2.5 h-4 w-2/5 rounded-sm"})]})}),t[0]=e):e=t[0],e}function eT(t){"use forget";const e=F.c(6),{children:s,className:n,fullWidth:o}=t,a=o?"w-full":"inline-block max-w-[360px] min-w-[320px]";let i;e[0]!==n||e[1]!==a?(i=z("border-token-border-default relative my-2 overflow-hidden rounded-xl border",a,n),e[0]=n,e[1]=a,e[2]=i):i=e[2];let l;return e[3]!==s||e[4]!==i?(l=r.jsx("div",{className:i,children:s}),e[3]=s,e[4]=i,e[5]=l):l=e[5],l}function E1e(t){"use forget";const e=F.c(10),{automation:s,onSave:n,overrideManageAllAction:o,fullWidth:a}=t,i=a===void 0?!1:a;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=jt(),e[0]=l):l=e[0];const c=l;let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>vk(c),e[1]=u):u=e[1];const d=oe(u);if(!s)return null;if(d&&s.content_type==="sugar"){let f;return e[2]!==s||e[3]!==i?(f=r.jsx(k1e,{item:s,overrideManageAllAction:!1,fullWidth:i}),e[2]=s,e[3]=i,e[4]=f):f=e[4],f}else{let f;return e[5]!==s||e[6]!==i||e[7]!==n||e[8]!==o?(f=r.jsx(M1e,{item:s,onSave:n,overrideManageAllAction:o,fullWidth:i}),e[5]=s,e[6]=i,e[7]=n,e[8]=o,e[9]=f):f=e[9],f}}function M1e(t){"use forget";const e=F.c(40),{item:s,onSave:n,overrideManageAllAction:o,fullWidth:a}=t,i=Kt();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],x.useEffect(N1e,l);const{id:c,is_enabled:u,title:d}=s,[f,m]=x.useState(!1),p=x.useRef(null);let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(p.current){const L=p.current.clientHeight,D=parseFloat(getComputedStyle(p.current).lineHeight);m(L>D)}},e[1]=g):g=e[1];let h;e[2]!==d?(h=[d],e[2]=d,e[3]=h):h=e[3],x.useEffect(g,h);const _=s.next_run_times.length===0,[b,y]=x.useState(!1);let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=()=>y(!0),e[4]=v):v=e[4];const S=f?"items-start":"items-center";let C;e[5]!==S?(C=z("flex h-full w-full cursor-pointer justify-between py-4 ps-5 pe-3",S),e[5]=S,e[6]=C):C=e[6];let w;e[7]!==d?(w=r.jsx("div",{ref:p,className:"line-clamp-2 text-start font-medium",children:d}),e[7]=d,e[8]=w):w=e[8];let k;e[9]!==s?(k=r.jsx(zD,{item:s}),e[9]=s,e[10]=k):k=e[10];let E;e[11]!==s.next_run_times||e[12]!==s.schedule_components||e[13]!==k?(E=r.jsx("div",{className:"text-token-text-secondary text-start",children:r.jsx(ep,{initialScheduleComponents:s.schedule_components,nextRunTimes:s.next_run_times,children:k})}),e[11]=s.next_run_times,e[12]=s.schedule_components,e[13]=k,e[14]=E):E=e[14];let M;e[15]!==w||e[16]!==E?(M=r.jsxs("div",{className:"flex flex-col gap-0.5 pe-8 text-sm",children:[w,E]}),e[15]=w,e[16]=E,e[17]=M):M=e[17];let N;e[18]!==M||e[19]!==C?(N=r.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:v,children:r.jsx("div",{className:C,children:M})}),e[18]=M,e[19]=C,e[20]=N):N=e[20];let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=()=>y(!0),e[21]=A):A=e[21];let I;e[22]!==c||e[23]!==_||e[24]!==u||e[25]!==s||e[26]!==o?(I=r.jsx("div",{className:"absolute end-3 top-1/2 -translate-y-1/2 transform",children:r.jsx("div",{className:"ms-4 flex",children:r.jsx(JD,{className:"h-9 w-9",automation_id:c,is_enabled:u,item:s,isFinished:_,onEditModalOpen:A,overrideManageAllAction:o})})}),e[22]=c,e[23]=_,e[24]=u,e[25]=s,e[26]=o,e[27]=I):I=e[27];let P;e[28]!==a||e[29]!==N||e[30]!==I?(P=r.jsxs(eT,{fullWidth:a,children:[N,I]}),e[28]=a,e[29]=N,e[30]=I,e[31]=P):P=e[31];let R;e[32]!==b||e[33]!==s||e[34]!==n||e[35]!==i?(R=b&&r.jsx(ep,{initialScheduleComponents:s.schedule_components,nextRunTimes:s.next_run_times,children:r.jsx(Jk,{item:s,source:"chat",onSave:n,onClose:L=>{L&&i.success(L,{hasCloseButton:!0}),y(!1)}})}),e[32]=b,e[33]=s,e[34]=n,e[35]=i,e[36]=R):R=e[36];let O;return e[37]!==P||e[38]!==R?(O=r.jsxs(r.Fragment,{children:[P,R]}),e[37]=P,e[38]=R,e[39]=O):O=e[39],O}function N1e(){$e.count(He.JAWBONE,"jawbone_message_attachment.open")}function JD(t){"use forget";const e=F.c(44),{automation_id:s,is_enabled:n,item:o,isFinished:a,onEditModalOpen:i,overrideManageAllAction:l,className:c}=t;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=jt(),e[0]=u):u=e[0];const d=u;let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=()=>vk(d),e[1]=f):f=e[1];const m=oe(f),p=ne(),g=yt(),h=Kt(),[_,b]=x.useState(n);let y,v;e[2]!==n?(y=()=>b(n),v=[n],e[2]=n,e[3]=y,e[4]=v):(y=e[3],v=e[4]),x.useEffect(y,v);let S;e[5]!==h?(S=q=>{h.danger(q?nr.messages.enableFailure:nr.messages.pauseFailure,{hasCloseButton:!0,toastId:"toggle_automation_status"}),b(!q)},e[5]=h,e[6]=S):S=e[6];let C;e[7]!==s||e[8]!==S?(C={automation_id:s,onError:S},e[7]=s,e[8]=S,e[9]=C):C=e[9];const{mutate:w,isPending:k}=LD(C);let E;e[10]!==p||e[11]!==g||e[12]!==l?(E=function(){return l===null?null:r.jsxs(r.Fragment,{children:[r.jsx(J.Separator,{}),l!=null?l:r.jsx(J.Item,{icon:Ec,label:p.formatMessage(qt.attachmentManageAll),onClick:()=>{g(QD())}})]})},e[10]=p,e[11]=g,e[12]=l,e[13]=E):E=e[13];const M=E;let N;e[14]!==c?(N=z("hover:bg-token-surface-hover focus-visible:bg-token-surface-hover radix-state-open:bg-token-surface-hover flex items-center justify-center rounded-lg focus-visible:outline-0",c),e[14]=c,e[15]=N):N=e[15];let A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(ra,{className:"icon"}),e[16]=A):A=e[16];let I;e[17]!==N?(I=r.jsx("button",{className:N,children:A}),e[17]=N,e[18]=I):I=e[18];let P;e[19]!==_||e[20]!==p||e[21]!==a||e[22]!==k||e[23]!==i||e[24]!==w?(P=!a&&r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:Ip,label:p.formatMessage(qt.attachmentEdit),onClick:i}),r.jsx(J.Item,{icon:_?Wk:Zk,label:p.formatMessage(_?nr.messages.pause:nr.messages.resume),onClick:()=>{const q=!_;b(q),w({is_enabled:q})},disabled:k})]}),e[19]=_,e[20]=p,e[21]=a,e[22]=k,e[23]=i,e[24]=w,e[25]=P):P=e[25];let R;e[26]!==p?(R=p.formatMessage(nr.messages.delete),e[26]=p,e[27]=R):R=e[27];let O;e[28]!==o?(O=()=>{mt(d,w1e,{item:o})},e[28]=o,e[29]=O):O=e[29];let L;e[30]!==R||e[31]!==O?(L=r.jsx(J.Item,{icon:Rl,color:"danger",label:R,onClick:O}),e[30]=R,e[31]=O,e[32]=L):L=e[32];let D;e[33]!==M?(D=M(),e[33]=M,e[34]=D):D=e[34];let H;e[35]!==o||e[36]!==m?(H=m&&o.content_type==="sugar"&&r.jsx(T1e,{taskId:o.id}),e[35]=o,e[36]=m,e[37]=H):H=e[37];let V;return e[38]!==I||e[39]!==P||e[40]!==L||e[41]!==D||e[42]!==H?(V=r.jsxs(ia,{size:"auto",alignOffset:-8,sideOffset:4,triggerButton:I,children:[P,L,D,H]}),e[38]=I,e[39]=P,e[40]=L,e[41]=D,e[42]=H,e[43]=V):V=e[43],V}function A1e(t){return["odyssey_aut",t!=null?t:""]}function qx(t){const{data:e}=dt({queryKey:A1e(t),queryFn:()=>de.safeGet("/agent_automation/{automation_id}",{parameters:{path:{automation_id:t!=null?t:""}}}),enabled:!!t});return e!=null?e:null}function ZD(){return["odyssey_aut"]}function XD(t){const{isLoading:e,data:s}=I1e(t),n=x.useMemo(()=>{var d;return(d=s==null?void 0:s.items.reduce((f,m)=>(f[m.id]=m,f),{}))!=null?d:void 0},[s]),o=x.useCallback(d=>d.map(f=>{const m=n==null?void 0:n[f.id];return m?T(T({},m),f):null}).filter(Boolean),[n]),{isLoadingScheduled:a,isLoadingPaused:i,isLoadingFinished:l}=Ehe(),c=Qp(Zp.getAllJawbonesGrouped),u=e||a||i||l;return x.useMemo(()=>{var d,f,m;return{isLoading:u,scheduledAutomations:o((d=c.scheduled.automations)!=null?d:[]),pausedAutomations:o((f=c.paused.automations)!=null?f:[]),completedAutomations:o((m=c.completed.automations)!=null?m:[])}},[u,c,o])}function I1e({enabled:t,staleTimeMs:e=1e3*5*60}){return dt({enabled:t,queryKey:ZD(),queryFn:()=>de.safeGet("/agent_automations"),refetchOnMount:"always",refetchOnWindowFocus:"always",staleTime:e})}function Gtt(t,e=null){const s=x.useRef({}),[n,o]=x.useState({});return x.useEffect(()=>{async function a(l){const c=await de.safeGet("/agent_automation/{automation_id}/conversations",{parameters:{path:{automation_id:l}}});o(u=>U(T({},u),{[l]:c.items}))}async function i(l,c){const u=await de.safePost("/conversations/batch",{requestBody:{conversation_ids:[c]}});o(d=>U(T({},d),{[l]:u}))}for(const l of t)l.id in s.current||(l.job_type==="agent"||l.source_conversation_id&&l.source_message_id?s.current[l.id]=a(l.id):l.conversation_id&&(s.current[l.id]=i(l.id,l.conversation_id)))},[t]),x.useMemo(()=>{let a=[];return t.forEach(i=>{const l=n[i.id];if(l)for(const c of l)a.push({automation:i,conversation:c})}),e&&(a=a.filter(i=>{var c;return new Date((c=i.conversation.update_time)!=null?c:0).getTime()>e.getTime()})),a.sort((i,l)=>{var d,f;const c=new Date((d=i.conversation.update_time)!=null?d:0).getTime();return new Date((f=l.conversation.update_time)!=null?f:0).getTime()-c})},[n,t,e])}const Kx="github-global",j1e=async t=>(await de.safePost("/aip/connectors/github/has_installations",{requestBody:{link_id:t}})).has_installations,Vtt=({linkId:t})=>dt({queryKey:["github-has-installations",t],enabled:!!t,queryFn:async()=>await j1e(t),retry:1});function tT({enabled:t=!0,connectionInstanceId:e}){return dt({queryKey:["user_connection_sync_configuration",e],queryFn:async()=>{try{return await dQ.user_connection_sync_configuration(e)}catch(s){return null}},enabled:!!(t&&e),retry:1})}function ztt(t){return js(t,"1001765573").get("ca_github_sync_max_repos",5)}const eF="v1.0",V1=Be.SelectedGithubRepos,Vf=({selectedReposMap:t,scope:e})=>{if(!t){ft.removeItem(V1,e);return}const s={selected_github_repos:[...t].map(([o,a])=>[o,a])},n={version:eF,data:s};ft.setItem(V1,JSON.stringify(n),e)},DN=t=>{const e=ft.getItem(V1,t);if(e)try{const{version:s,data:n}=JSON.parse(e);if(s!==eF){ft.removeItem(V1,t);return}return new Map(n.selected_github_repos)}catch(s){return}},P1e=t=>{var s;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const n of[...e].reverse()){const o=n.message;if(o.author.role!==ot.User)continue;const a=(s=o.metadata)!=null?s:{},i=a.selected_github_repos,l=a.selected_all_github_repos;if(i||l)return{selectedRepos:i!=null?i:[],selectedAllRepos:l!=null?l:!1}}},R1e=s6(t=>P1e(t),{equals:hp}),sT=()=>{var n,o;const t=On(),e=up(),s=G();if(t===Ye.Slurm){const a=(n=e==null?void 0:e.connectorConfig)==null?void 0:n[je.GITHUB_CONNECTOR];return{maxRepos:(o=a==null?void 0:a.max_repos)!=null?o:3}}return t===Ye.Glaux?{maxRepos:fQ(s)}:{maxRepos:void 0}};function O1e(t,e){return t==null?void 0:t.get(e)}function nT(t,e=Kx){var E,M,N,A;const s=G(),{session:n}=vl(s),o=xC(),a=n6(),i=oe(a),l=x.useMemo(()=>{var I;return(I=e!=null?e:i)!=null?I:null},[e,i]),{maxRepos:c}=sT(),u=oe(()=>{if(o)return o6(s).data}),d=(M=(E=u==null?void 0:u.connection_statuses.find(I=>I.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(I.user_connection_details.activation_status)&&!!I.user_connection_details.connection_instance_id&&!!I.user_connection_details.backing_link_id))==null?void 0:E.user_connection_details.connection_instance_id)!=null?M:"",{data:f}=tT({connectionInstanceId:d!=null?d:"",enabled:!!(d&&o)}),m=x.useMemo(()=>{var I,P;return{userId:(I=n==null?void 0:n.user)==null?void 0:I.id,workspaceId:(P=n==null?void 0:n.account)==null?void 0:P.id}},[(N=n==null?void 0:n.user)==null?void 0:N.id,(A=n==null?void 0:n.account)==null?void 0:A.id]),p=Et(s,t),g=oe(()=>R1e(p)),[h,_]=Qe(t,I=>[I==null?void 0:I.hasModifiedGithubRepos,I==null?void 0:I.selectedGithubRepos]),b=x.useMemo(()=>f!=null&&f.sync_enabled_objects?{selectedRepos:f.sync_enabled_objects.filter(P=>P.object_type==="repository").map(P=>P.object_name).filter(P=>P!=null),selectedAllRepos:!1}:void 0,[f==null?void 0:f.sync_enabled_objects]);x.useEffect(()=>{var O,L,D,H;if((_==null?void 0:_.get(l))||h)return;if(g&&oT(g)){if(c&&((L=(O=g.selectedRepos)==null?void 0:O.length)!=null?L:0)>c)return;nt(t,V=>{var q;(q=V.selectedGithubRepos)!=null||(V.selectedGithubRepos=new Map),V.selectedGithubRepos.set(l,Ya(g))});return}const P=DN(m);let R=P==null?void 0:P.get(l);if(!R&&P&&i!==l&&(R=P.get(i!=null?i:null)),R){if(c&&((H=(D=R.selectedRepos)==null?void 0:D.length)!=null?H:0)>c)return;nt(t,V=>{var q;(q=V.selectedGithubRepos)!=null||(V.selectedGithubRepos=new Map),V.selectedGithubRepos.set(l,Ya(R))})}q_(n==null?void 0:n.user)&&nt(t,V=>{var q;(q=V.selectedGithubRepos)!=null||(V.selectedGithubRepos=new Map),V.selectedGithubRepos.set(l,Ya({selectedRepos:["openai/openai"],selectedAllRepos:!1}))})},[t,h,_,l,g,m,i,f==null?void 0:f.sync_enabled_objects,c,n==null?void 0:n.user]);const y=x.useMemo(()=>{var R,O,L,D;const I=O1e(_,l);if(I)return I;if(l==null&&b||b)return b;if(g&&(((O=(R=g.selectedRepos)==null?void 0:R.length)!=null?O:0)>0||g.selectedAllRepos)&&(c==null||((D=(L=g.selectedRepos)==null?void 0:L.length)!=null?D:0)<=c))return g;const P=DN(m);if(P){const H=P.get(l);if(H)return H}return aT()},[l,_,g,m,c,b]),v=x.useCallback(I=>{t&&nt(t,P=>{var R;P.hasModifiedGithubRepos=!0,(R=P.selectedGithubRepos)!=null||(P.selectedGithubRepos=new Map),P.selectedGithubRepos.set(l,Ya(I)),Vf({selectedReposMap:P.selectedGithubRepos,scope:m})})},[t,l,m]),S=x.useCallback(I=>{t&&nt(t,P=>{var O,L;P.hasModifiedGithubRepos=!0,(O=P.selectedGithubRepos)!=null||(P.selectedGithubRepos=new Map);const R=(L=P.selectedGithubRepos.get(l))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(R.selectedRepos)&&!R.selectedRepos.includes(I)&&(R.selectedRepos=[...R.selectedRepos,I]),P.selectedGithubRepos.set(l,Ya(R)),Vf({selectedReposMap:P.selectedGithubRepos,scope:m})})},[t,l,m]),C=x.useCallback(I=>{t&&nt(t,P=>{var O,L;P.hasModifiedGithubRepos=!0,(O=P.selectedGithubRepos)!=null||(P.selectedGithubRepos=new Map);const R=(L=P.selectedGithubRepos.get(l))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(R.selectedRepos)&&(R.selectedRepos=R.selectedRepos.filter(D=>D!==I)),P.selectedGithubRepos.set(l,Ya(R)),Vf({selectedReposMap:P.selectedGithubRepos,scope:m})})},[t,l,m]),w=x.useCallback(I=>{t&&nt(t,P=>{var O,L;P.hasModifiedGithubRepos=!0,(O=P.selectedGithubRepos)!=null||(P.selectedGithubRepos=new Map);const R=(L=P.selectedGithubRepos.get(l))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(R.selectedRepos)&&(R.selectedRepos.includes(I)?R.selectedRepos=R.selectedRepos.filter(D=>D!==I):R.selectedRepos=[...R.selectedRepos,I]),P.selectedGithubRepos.set(l,Ya(R)),Vf({selectedReposMap:P.selectedGithubRepos,scope:m})})},[t,l,m]),k=x.useCallback(I=>{t&&nt(t,P=>{var O,L;P.hasModifiedGithubRepos=!0,(O=P.selectedGithubRepos)!=null||(P.selectedGithubRepos=new Map);const R=(L=P.selectedGithubRepos.get(l))!=null?L:{selectedRepos:[],selectedAllRepos:!1};R.selectedAllRepos=I,P.selectedGithubRepos.set(l,Ya(R)),Vf({selectedReposMap:P.selectedGithubRepos,scope:m})})},[t,l,m]);return{selectedRepos:y,setSelectedRepos:v,addRepo:S,removeRepo:C,toggleRepo:w,setAllRepos:k}}function Wtt(t,e=Kx){var n,o;const s=(n=t==null?void 0:t.selectedGithubRepos)==null?void 0:n.get(e);return(o=s!=null?s:D1e(e))!=null?o:aT()}function oT(t){return t.selectedAllRepos||t.selectedRepos!=null&&t.selectedRepos.length>0}function aT(){return{selectedRepos:[],selectedAllRepos:!1}}function L1e(t,e){var s;try{const n=JSON.parse(t);if("selectedRepos"in n&&"selectedAllRepos"in n)return n;const o=e==null?"__null__":e;return(s=n[o])!=null?s:void 0}catch(n){return}}function D1e(t){const e=En.getCookie(Mn.LastSelectedGithubRepo);return e?L1e(e,t):aT()}const F1e="venus_model_variant",qtt="standard",B1e={disabledAutoConnectors:[],isLoading:!1},U1e=t=>{"use forget";var ee,re;const e=F.c(62),{clientThreadId:s,includeAutoConnectors:n}=t,o=n===void 0?!1:n,a=G();let i;e[0]!==a?(i=a6(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=sf();let u;e[2]!==a?(u=()=>PC(a),e[2]=a,e[3]=u):u=e[3];const d=oe(u);let f;e[4]!==d||e[5]!==c?(f=(d==null?void 0:d.isPersonalAccount())&&c,e[4]=d,e[5]=c,e[6]=f):f=e[6];const m=!!f;let p;e[7]!==o?(p={includeAutoConnectors:o},e[7]=o,e[8]=p):p=e[8];const{connectedTypes:g,isLoading:h,linkIdToConnectedType:_}=jC(p);let b;e[9]!==a||e[10]!==o?(b=()=>o?mQ(a):B1e,e[9]=a,e[10]=o,e[11]=b):b=e[11];const{isLoading:y,disabledAutoConnectors:v}=oe(b);let S;e[12]!==s?(S={clientThreadId:s},e[12]=s,e[13]=S):S=e[13];const{connectorConfigMap:C}=$1e(S);let w;e[14]!==a?(w=()=>RC(a),e[14]=a,e[15]=w):w=e[15];const k=oe(w),E=!k,{connectedTypes:M,isLoading:N}=r6(),{data:A,isLoading:I}=L_();let P;e[16]===Symbol.for("react.memo_cache_sentinel")?(P=bs(),e[16]=P):P=e[16];const R=P,O=h||N||I||y||E;A==null||A.connection_statuses;let L,D,H,V,q,W,$;if(e[17]!==l||e[18]!==M||e[19]!==k||e[20]!==g||e[21]!==v||e[22]!==o||e[23]!==C||e[24]!==_||e[25]!==(A==null?void 0:A.connection_statuses)||e[26]!==m){const he=(ee=A==null?void 0:A.connection_statuses.filter(H1e).map(G1e))!=null?ee:[],fe=(re=A==null?void 0:A.connection_statuses.reduce((ce,we)=>{if(["activated","partially_activated"].includes(we.user_connection_details.activation_status)&&we.user_connection_details.backing_link_id){const ge=_.get(we.user_connection_details.backing_link_id);ge&&ce.add(ge)}return ce},new Set))!=null?re:new Set,pe=[...g].filter(ce=>{var we;if(ce===je.GDRIVE_ACTION_CONNECTOR&&m){if(he.includes("gdrive_sync_connector"))return!1}else{if(fe.has(ce))return!1;if(ce===je.SHAREPOINT_CONNECTOR&&he.includes("sharepoint_admin_sync_connector"))return!1}return o&&v.includes(ce)?!1:ce!==Xr.MCP_CONNECTOR&&(!C.has(ce)||!((we=C.get(ce))!=null&&we.disabled))});let le;e[34]!==M?(le=[...M].filter(V1e),e[34]=M,e[35]=le):le=e[35];let ve;e[36]!==le?(ve=[...le,"web"],e[36]=le,e[37]=ve):ve=e[37],L=ve;const Te=[...[...k!=null?k:[]].filter(ce=>l&&ce===Xr.MCP_CONNECTOR||ce!==Xr.MCP_CONNECTOR)];$=Map;let xe;e[38]!==L?(xe=new Set(L),e[38]=L,e[39]=xe):xe=e[39],e[40]!==xe?(V=[Ye.Research,xe],e[40]=xe,e[41]=V):V=e[41],q=[Ye.Slurm,new Set([...pe,...he])],W=[Ye.Glaux,new Set([...Te,...he])],D=null,H=new Set(he),e[17]=l,e[18]=M,e[19]=k,e[20]=g,e[21]=v,e[22]=o,e[23]=C,e[24]=_,e[25]=A==null?void 0:A.connection_statuses,e[26]=m,e[27]=L,e[28]=D,e[29]=H,e[30]=V,e[31]=q,e[32]=W,e[33]=$}else L=e[27],D=e[28],H=e[29],V=e[30],q=e[31],W=e[32],$=e[33];let Z;e[42]!==D||e[43]!==H?(Z=[D,H],e[42]=D,e[43]=H,e[44]=Z):Z=e[44];let K;e[45]!==V||e[46]!==q||e[47]!==W||e[48]!==Z?(K=[V,q,W,Z],e[45]=V,e[46]=q,e[47]=W,e[48]=Z,e[49]=K):K=e[49];let Y;if(e[50]!==L||e[51]!==$||e[52]!==K){Y=new $(K);let he;e[54]===Symbol.for("react.memo_cache_sentinel")?(he=R?["cloud"]:[],e[54]=he):he=e[54];let fe;e[55]!==L?(fe=new Set([...L,"web",...he]),e[55]=L,e[56]=fe):fe=e[56],Y.set(Pn,fe),e[50]=L,e[51]=$,e[52]=K,e[53]=Y}else Y=e[53];const ae=Y;let se;return e[59]!==ae||e[60]!==O?(se={availableConnectorTypes:ae,isLoading:O},e[59]=ae,e[60]=O,e[61]=se):se=e[61],se},$1e=t=>{"use forget";const e=F.c(12),{clientThreadId:s}=t,n=G();let o;e[0]!==s||e[1]!==n?(o=()=>Cs(Et(n,s)),e[0]=s,e[1]=n,e[2]=o):o=e[2];const a=oe(o),i=ne(),l=up();l==null||l.connectorConfig;let c;if(e[3]!==a||e[4]!==i||e[5]!==(l==null?void 0:l.connectorConfig)){const f=(l==null?void 0:l.connectorConfig)||{};let m;e[7]!==a||e[8]!==i?(m=(p,g)=>{const[h,_]=g,b=h,y=_.enabledModels&&a?!_.enabledModels.includes(a.id):!1;return p.set(b,{disabled:y,disabledText:y?i.formatMessage({id:"1MD3y6",defaultMessage:"Switch to {model} model to use connectors"},{model:_.enabledModels.join(", ")}):void 0,hasBetaTag:_.beta}),p},e[7]=a,e[8]=i,e[9]=m):m=e[9],c=Object.entries(f).reduce(m,new Map),e[3]=a,e[4]=i,e[5]=l==null?void 0:l.connectorConfig,e[6]=c}else c=e[6];const u=c;let d;return e[10]!==u?(d={connectorConfigMap:u},e[10]=u,e[11]=d):d=e[11],d};function H1e(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function G1e(t){return t.user_connection_details.connection_type}function V1e(t){return t!==Xr.MCP_CONNECTOR}const z1e=(t,e)=>{var n,o,a,i;if(!t)return{};const s=t.tree.getBranchFromLeaf(t.currentLeafId);for(const l of[...s].reverse()){const c=l.message;if(c.author.role!==ot.User)continue;const u=(n=c.metadata)!=null?n:{};let d=[];e===Ye.Research?d=(o=u.caterpillar_selected_sources)!=null?o:[]:d=(a=u.selected_sources)!=null?a:[];const f=(i=u==null?void 0:u.selected_mcp_sources)!=null?i:[],m=d.map(p=>{if(p==="web"||p==="cloud")return p;const g=Object.entries(EC);for(const[h,_]of g)if(_===p)return h;return p});if(d.length||f.length){const p=new Set(m),g=new Set(f.map(_=>_.id)),h=new Set(f.filter(_=>_.status==="ONLY_ME").map(_=>_.id));return{selectedSources:p,selectedMCPSources:g,selectedByoMCPSources:h}}}return{}},W1e=t=>{var s,n,o,a,i,l,c,u;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const d of e){const f=d.message;if(f.author.role!==ot.User&&((s=f.metadata)==null?void 0:s.invoked_resource)===void 0||f.content.content_type==="user_editable_context")continue;const m=(o=(n=f.metadata)==null?void 0:n.selected_sources)!=null?o:[],p=(i=(a=f.metadata)==null?void 0:a.selected_mcp_sources)!=null?i:[];if(((l=f.metadata)==null?void 0:l.invoked_resource)!==void 0||m.length>0||p.length>0)return p.some(g=>g.status==="ONLY_ME")||((u=(c=f.metadata)==null?void 0:c.invoked_resource)==null?void 0:u.publish_status)==="private"}},q1e=t=>{var e;return Ee(t,"3544641259")||!!((e=hQ(t))!=null&&e.enabled)},K1e=(t,e,s)=>[...t].filter(n=>e.includes(n)||s&&Wl(n)),zf=t=>{B.logEventWithStatsig("chatgpt_connectors_toggled_sources","chatgpt_connectors_toggled_sources",t)};function Da(t,e=!1){var Ie,Me;const s=G(),{session:n}=vl(s),o=Ee(s,"4059945251"),a=q1e(s),i=n6(),l=oe(i),c=oe(()=>Cs(Et(s,t))),u=l!=null?l:mp(c!=null?c:null,s)?Ye.Glaux:null,d=pQ(),f=oe(d),m=x.useMemo(()=>s6(te=>z1e(te,u),{equals:hp}),[u]),p=Et(s,t),g=oe(()=>m(p)),h=oe(()=>i6(s)),_=oe(()=>RC(s)),b=h===void 0||_===void 0,y=a6(s),v=oe(()=>OC(s)),S=v===void 0,C=x.useMemo(()=>(v!=null?v:[]).filter(te=>["admin_connected","user_connected"].includes(te.user_connection_details.auth_status)),[v]),w=Ee(s,"1030527215"),{data:k}=qo(Qt.EnableRemoteBrowserData),{availableConnectorTypes:E,isLoading:M}=U1e({clientThreadId:t,includeAutoConnectors:e}),N=w&&!k&&wc(u),[A,I,P,R,O,L]=Qe(t,te=>[W1e(te),te==null?void 0:te.startedWithByoMcp,te==null?void 0:te.selectedSources,te==null?void 0:te.selectedMCPSources,te==null?void 0:te.hasModifiedSources,te==null?void 0:te.mentionedSources]),{platformConnectors:D,isLoading:H}=_p(),V=u===Ye.Research||wc(u),{connectorLinks:q,isLoading:W,isFetching:$}=Ta({skip:!a||!V,fetchValidLinksOnly:!0}),Z=oe(()=>gp(s)),K=fs(),Y=(K==null?void 0:K.isWorkspacePlan())&&Z,ae=x.useMemo(()=>y?(h!=null?h:[]).filter(te=>te.type===Xr.MCP_CONNECTOR&&(q==null?void 0:q.has(te.id))).map(te=>String(te.id)):[],[y,h,q]);x.useEffect(()=>{if(!t||!u||typeof window>"u")return;const te=new URL(window.location.href),Q=te.searchParams.get("select_connector_id");if(!Q)return;const ie=Ca[Q],_e=tc(u);if(!_e||_e&&(b||S))return;const ye=_e?new Set([...Array.from(h!=null?h:[]).map(Ve=>Ve.type).filter(Ve=>typeof Ve=="string"&&Ve!==Xr.MCP_CONNECTOR),...(C!=null?C:[]).map(Ve=>Ve.user_connection_details.connection_type)]):void 0;nt(t,Ve=>{var ze,Fe,be,Oe,qe,Ze;if((ze=Ve.selectedSources)!=null||(Ve.selectedSources=new Map),(Fe=Ve.selectedMCPSources)!=null||(Ve.selectedMCPSources=new Map),ie){const st=(be=Ve.selectedSources.get(u))!=null?be:new Set;st.add(ie),_e&&ye&&ye.forEach(rt=>st.add(rt)),Ve.selectedSources.set(u,st)}else{const st=(Oe=Ve.selectedMCPSources.get(u))!=null?Oe:new Set;st.add(Q),_e&&y&&ae.forEach(rt=>st.add(rt)),Ve.selectedMCPSources.set(u,st)}if(_e&&ye){const st=(qe=Ve.selectedSources.get(u))!=null?qe:new Set;ye.forEach(rt=>st.add(rt)),Ve.selectedSources.set(u,st)}if(_e&&y){const st=(Ze=Ve.selectedMCPSources.get(u))!=null?Ze:new Set;ae.forEach(rt=>st.add(rt)),Ve.selectedMCPSources.set(u,st)}}),te.searchParams.delete("select_connector_id");const Re=te.pathname+(te.searchParams.toString()?"?".concat(te.searchParams.toString()):"")+te.hash;window.history.replaceState({},"",Re)},[t,u,h,C,y,ae,b,S]),x.useEffect(()=>{t&&I===void 0&&A!==void 0&&nt(t,te=>{te.startedWithByoMcp=A})},[t,I,A]),x.useEffect(()=>{if(!t||I===void 0||H||Y)return;const te=P==null?void 0:P.get(u),Q=R==null?void 0:R.get(u),ie=new Set([...Q!=null?Q:[]].filter(ye=>{const Re=D.get(ye);return(Re==null?void 0:Re.status)==="ONLY_ME"})),_e=new Set([...Q!=null?Q:[]].filter(ye=>{const Re=D.get(ye);return(Re==null?void 0:Re.status)!=="ONLY_ME"}));I?(te&&te.size>0||_e.size>0)&&nt(t,ye=>{var Re,Ve,ze,Fe;(Ve=(Re=ye.selectedSources)==null?void 0:Re.get(u))==null||Ve.clear();for(const be of _e)(Fe=(ze=ye.selectedMCPSources)==null?void 0:ze.get(u))==null||Fe.delete(be)}):ie.size>0&&nt(t,ye=>{var Re,Ve;for(const ze of ie)(Ve=(Re=ye.selectedMCPSources)==null?void 0:Re.get(u))==null||Ve.delete(ze)})},[t,I,P,R,u,D,H,Y]),x.useEffect(()=>{var be,Oe,qe,Ze;if(!t||O)return;const te=(be=P==null?void 0:P.get(u))!=null?be:new Set,Q=(Oe=R==null?void 0:R.get(u))!=null?Oe:new Set,ie=te.size>0,_e=Q.size>0,ye=new Set([...Array.from(_!=null?_:[]).filter(st=>st!==Xr.MCP_CONNECTOR),...(C!=null?C:[]).map(st=>st.user_connection_details.connection_type)]),Re=tc(u)&&!b&&!S&&Array.from(ye).some(st=>!te.has(st)),Ve=tc(u)&&y&&ae.length>0&&ae.some(st=>!Q.has(st));if(Re||Ve){nt(t,st=>{var rt,wt,at,kt;if(Re){const Nt=(rt=st.selectedSources)==null?void 0:rt.get(u);(wt=st.selectedSources)!=null||(st.selectedSources=new Map),st.selectedSources.set(u,new Set([...Nt!=null?Nt:[],...ye]))}if(Ve){const Nt=(at=st.selectedMCPSources)==null?void 0:at.get(u);(kt=st.selectedMCPSources)!=null||(st.selectedMCPSources=new Map),st.selectedMCPSources.set(u,new Set([...Nt!=null?Nt:[],...ae]))}});return}if(ie||_e)return;const ze=g.selectedSources,Fe=g.selectedMCPSources;((qe=ze==null?void 0:ze.size)!=null?qe:0)===0&&((Ze=Fe==null?void 0:Fe.size)!=null?Ze:0)===0||nt(t,st=>{var rt,wt;ze&&ze.size>0&&((rt=st.selectedSources)!=null||(st.selectedSources=new Map),st.selectedSources.set(u,new Set(ze))),Fe&&Fe.size>0&&((wt=st.selectedMCPSources)!=null||(st.selectedMCPSources=new Map),st.selectedMCPSources.set(u,new Set(Fe)))})},[t,P,R,O,u,g.selectedSources,g.selectedMCPSources,_,y,ae,s,C,b,S]);const se=x.useMemo(()=>{var ie;const te=(ie=P==null?void 0:P.get(u))!=null?ie:new Set;if(O)return[...te];const Q=g.selectedSources;return Q&&Q.size>0?[...Q]:N?te.has("cloud")?["web","cloud"]:["web"]:[...te]},[P,u,O,g.selectedSources,N]),ee=x.useMemo(()=>new Set(L!=null?L:[]),[L]),re=x.useMemo(()=>[],[f,u,E]),he=x.useMemo(()=>{var te;return M?new Set([...se,...L!=null?L:[]]):new Set([...K1e([...se],[...(te=E.get(u))!=null?te:[],...re],y&&u===Ye.Glaux),...L!=null?L:[]])},[E,M,L,u,se,y,re]),fe=x.useMemo(()=>{var ie;const te=(ie=R==null?void 0:R.get(u))!=null?ie:new Set;if(O)return te;const Q=g.selectedMCPSources;if(Q&&Q.size>0)return Q;if(N)return new Set;if(tc(u)&&y){const _e=new Set(te);for(const ye of ae)_e.add(ye);return _e}return te},[R,O,u,g.selectedMCPSources,N,y,ae]),pe=x.useMemo(()=>new Set(fe),[fe]),le=x.useMemo(()=>{if(!a||!V||W||$)return he;const te=new Set;return he.forEach(Q=>{if(Q==="web"||Q==="cloud"){te.add(Q);return}if(Q in us){const ie=us[Q];q.has(ie)&&te.add(Q);return}if(Wl(Q)){q.has(Q)&&te.add(Q);return}}),te},[he,q,a,V,W,$]),ve=x.useCallback(te=>{var Q,ie,_e;l6({selectedSourcesMap:gQ((Q=te.selectedSources)!=null?Q:new Map),selectedMCPSourcesMap:te.selectedMCPSources,scope:{userId:(ie=n==null?void 0:n.user)==null?void 0:ie.id,workspaceId:(_e=n==null?void 0:n.account)==null?void 0:_e.id}})},[(Ie=n==null?void 0:n.user)==null?void 0:Ie.id,(Me=n==null?void 0:n.account)==null?void 0:Me.id]),Te=x.useCallback(te=>{const Q=D.get(te);return(Q==null?void 0:Q.status)==="ONLY_ME"},[D]),xe=x.useCallback(te=>{t&&nt(t,Q=>{var qe,Ze,st,rt,wt,at,kt,Nt;const ie=(Ze=(qe=Q.selectedSources)==null?void 0:qe.get(u))!=null?Ze:new Set,_e=(rt=(st=Q.selectedMCPSources)==null?void 0:st.get(u))!=null?rt:new Set,ye=new Set([..._e].filter(Te)),Re=new Set([..._e].filter(Ot=>!Te(Ot))),Ve=new Set([...ie,..._e,...(wt=Q.mentionedSources)!=null?wt:[]]),ze=(at=Q.mentionedSources)!=null?at:new Set;let Fe,be;const Oe=Q.startedWithByoMcp!==void 0;if(Wl(te))if(Te(te)){if(be="mcp-byo",_e.has(te))Fe="remove",_e.delete(te);else{if(Oe&&Q.startedWithByoMcp===!1&&!Y)return;if(Fe="add",!Oe&&!Y){ie.clear();for(const At of Re)_e.delete(At)}_e.add(te)}!o&&ie.has("web")&&!Q.hasRemovedWebSource&&(ie.delete("web"),Q.hasRemovedWebSource=!0)}else if(be="mcp-workspace",Ve.has(te))Fe="remove",_e.delete(te);else{if(Oe&&Q.startedWithByoMcp&&!Y)return;if(Fe="add",!Oe&&ye.size>0&&!Y)for(const Ot of ye)_e.delete(Ot);_e.add(te),!o&&te!=="web"&&te!=="cloud"&&ie.has("web")&&!Q.hasRemovedWebSource&&(ie.delete("web"),Q.hasRemovedWebSource=!0)}else if(be="platform",te==="sharepoint_admin_sync_connector"&&(ie.delete("sharepoint_sync_connector"),ze.delete("sharepoint_sync_connector"),ie.delete(je.SHAREPOINT_CONNECTOR),ze.delete(je.SHAREPOINT_CONNECTOR)),Ve.has(te))Fe="remove",ie.delete(te),ze.has(te)&&ze.delete(te);else{if(Oe&&Q.startedWithByoMcp&&!Y)return;if(Fe="add",ie.add(te),!Oe&&ye.size>0&&!Y)for(const Ot of ye)_e.delete(Ot);!o&&te!=="web"&&te!=="cloud"&&ie.has("web")&&!Q.hasRemovedWebSource&&(ie.delete("web"),Q.hasRemovedWebSource=!0)}(kt=Q.selectedSources)!=null||(Q.selectedSources=new Map),Q.selectedSources.set(u,ie),(Nt=Q.selectedMCPSources)!=null||(Q.selectedMCPSources=new Map),Q.selectedMCPSources.set(u,_e),Q.mentionedSources=ze,Q.hasModifiedSources=!0,zf({source:"toggle",action:Fe,type:be,systemHint:u,selectedSource:te}),ve(Q)})},[t,u,o,ve,Te,Y]),ce=x.useCallback(te=>{t&&nt(t,Q=>{var Fe,be,Oe,qe,Ze,st,rt,wt,at;let ie;const _e=Q.startedWithByoMcp!==void 0,ye=(be=(Fe=Q.selectedSources)==null?void 0:Fe.get(u))!=null?be:new Set,Re=(qe=(Oe=Q.selectedMCPSources)==null?void 0:Oe.get(u))!=null?qe:new Set,Ve=new Set([...Re].filter(Te)),ze=new Set([...Re].filter(kt=>!Te(kt)));if(Te(te)){if(ie="mcp-byo",_e&&Q.startedWithByoMcp===!1&&!Y)return;if(!_e&&!Y){((rt=(st=Q.selectedSources)==null?void 0:st.get(u))!=null?rt:new Set).clear();for(const Nt of ze)Re.delete(Nt)}Re.add(te)}else{if(ie=Wl(te)?"mcp-workspace":"platform",_e&&Q.startedWithByoMcp&&!Y)return;if((Wl(te)?Re:ye).add(te),!_e&&!Y){const kt=(Ze=Q.selectedMCPSources)==null?void 0:Ze.get(u);for(const Nt of Ve)kt==null||kt.delete(Nt)}}(wt=Q.selectedSources)!=null||(Q.selectedSources=new Map),Q.selectedSources.set(u,ye),(at=Q.selectedMCPSources)!=null||(Q.selectedMCPSources=new Map),Q.selectedMCPSources.set(u,Re),zf({source:"toggle",action:"add",type:ie,systemHint:u,selectedSource:te}),ve(Q),Q.hasModifiedSources=!0})},[t,u,ve,Te,Y]),we=x.useCallback(te=>{t&&nt(t,Q=>{var ye,Re,Ve,ze;const ie=(ye=Q.mentionedSources)!=null?ye:new Set;ie.add(te),Q.mentionedSources=ie;const _e=(Ve=(Re=Q.selectedSources)==null?void 0:Re.get(u))!=null?Ve:new Set;_e.add(te),(ze=Q.selectedSources)!=null||(Q.selectedSources=new Map),Q.selectedSources.set(u,_e),zf({source:"mentions",action:"add",type:"platform",systemHint:u,selectedSource:te}),ve(Q)})},[t,u,ve]),ge=x.useCallback(te=>{t&&nt(t,Q=>{var _e;const ie=(_e=Q.mentionedSources)!=null?_e:new Set;ie.delete(te),Q.mentionedSources=ie,zf({source:"mentions",action:"remove",type:"platform",systemHint:u,selectedSource:te})})},[t,u]),Ae=x.useCallback(te=>{t&&nt(t,Q=>{var Ve,ze,Fe,be,Oe,qe,Ze,st,rt;const ie=(ze=(Ve=Q.selectedSources)==null?void 0:Ve.get(u))!=null?ze:new Set,_e=(be=(Fe=Q.selectedMCPSources)==null?void 0:Fe.get(u))!=null?be:new Set,ye=(Oe=Q.mentionedSources)!=null?Oe:new Set;let Re;Te(te)?(Re="mcp-byo",((Ze=(qe=Q.selectedMCPSources)==null?void 0:qe.get(u))!=null?Ze:new Set).delete(te)):(Re=Wl(te)?"mcp-workspace":"platform",ie.delete(te),_e.delete(te),ye.has(te)&&ye.delete(te)),(st=Q.selectedSources)!=null||(Q.selectedSources=new Map),Q.selectedSources.set(u,ie),(rt=Q.selectedMCPSources)!=null||(Q.selectedMCPSources=new Map),Q.selectedMCPSources.set(u,_e),Q.mentionedSources=ye,zf({source:"toggle",action:"remove",type:Re,systemHint:u,selectedSource:te}),ve(Q),Q.hasModifiedSources=!0})},[t,u,ve,Te]),Ue=x.useRef(!1);return x.useEffect(()=>{if(Ue.current||!V||W||$)return;const te=[...he].filter(Q=>!le.has(Q)&&Q!=="web"&&Q!=="cloud");te.length!==0&&(Ue.current=!0,t&&(nt(t,Q=>{var ye,Re,Ve,ze;const ie=(Re=(ye=Q.selectedSources)==null?void 0:ye.get(u))!=null?Re:new Set,_e=(Ve=Q.mentionedSources)!=null?Ve:new Set;te.forEach(Fe=>{var be,Oe,qe;if(!Wl(Fe))ie.delete(Fe),_e.delete(Fe);else{const Ze=(Oe=(be=Q.selectedMCPSources)==null?void 0:be.get(u))!=null?Oe:new Set;Ze.delete(Fe),(qe=Q.selectedMCPSources)!=null||(Q.selectedMCPSources=new Map),Q.selectedMCPSources.set(u,Ze)}}),(ze=Q.selectedSources)!=null||(Q.selectedSources=new Map),Q.selectedSources.set(u,ie),Q.mentionedSources=_e,ve(Q)}),wa(s,"chatgpt_connectors_toggled_sources",te.length,{action:"expired_auto_removed",sources:te.join(","),systemHint:String(u!=null?u:"")})))},[he,le,V,t,u,ve,s,W,$]),a?{selectedSources:le,selectedMCPSources:pe,mentionedSources:ee,toggleSource:xe,addSource:ce,deleteSource:Ae,addMentionedSource:we,deleteMentionedSource:ge}:{selectedSources:void 0,selectedMCPSources:void 0,mentionedSources:void 0,toggleSource:()=>{},addSource:()=>{},deleteSource:()=>{},addMentionedSource:()=>{},deleteMentionedSource:()=>{}}}function tF(t,e="<unknown>"){if(!t)throw _Q(new Error("".concat(e,": unexpected non-truthy condition: ").concat(JSON.stringify(t))),tF)}const ng=x.createContext({sourceConversationId:null,sourceMessageId:null,automationId:null,isScheduledRun:!1,modalOpen:!1,openModal:()=>{},closeModal:()=>{}});function Ktt({clientThreadId:t,children:e}){var m,p,g,h,_,b,y,v,S;const s=nF(t),n=t_e(t),o=((m=n==null?void 0:n.metadata)==null?void 0:m.real_author_type)==="automation";let a=null;o?a=(g=(p=n==null?void 0:n.metadata)==null?void 0:p.real_author_id)!=null?g:null:s&&(a=(_=(h=s==null?void 0:s.metadata)==null?void 0:h.n7jupd_scheduled_id)!=null?_:null);const i=qx(a);let l=null,c=null;o?(l=(b=i==null?void 0:i.source_conversation_id)!=null?b:null,c=(y=i==null?void 0:i.source_message_id)!=null?y:null):s&&(l=(v=Rt(t))!=null?v:null,c=(S=s==null?void 0:s.id)!=null?S:null);const[u,d]=x.useState(!1),f=x.useMemo(()=>({sourceConversationId:l,sourceMessageId:c,automationId:a,isScheduledRun:o,modalOpen:u,openModal:()=>d(!0),closeModal:()=>d(!1)}),[a,u,l,c,o]);return r.jsxs(ng.Provider,{value:f,children:[e,r.jsx(Q1e,{clientThreadId:t})]})}const sF=["daily","weekly","monthly"],Y1e=Object.freeze({frequency:"monthly",by_hour:14,by_minute:0,by_month_day:1,by_second:0});function Q1e({clientThreadId:t}){const{sourceConversationId:e,sourceMessageId:s,modalOpen:n,closeModal:o,automationId:a}=x.useContext(ng),i=nF(t),l=qx(a);return e?l&&s?r.jsx(Z1e,{automation:l,sourceConversationId:e,sourceMessageId:s,sourceClientThreadId:t,modalOpen:n,closeModal:o}):i?r.jsx(J1e,{sourceClientThreadId:t,sourceConversationId:e,sourceMessage:i,modalOpen:n,closeModal:o}):null:null}function J1e({sourceClientThreadId:t,sourceConversationId:e,sourceMessage:s,modalOpen:n,closeModal:o}){const a=n_e(t,s),{selectedSources:i}=Da(t),{selectedRepos:l}=nT(t,Kx),c=Intl.DateTimeFormat().resolvedOptions().timeZone,u=x.useMemo(()=>{var f;return T(T(T({system_hints:[Pn]},i&&{selected_sources:fl(i)}),l&&{selected_github_repos:[...(f=l.selectedRepos)!=null?f:[]],selected_all_github_repos:l.selectedAllRepos}),c&&{user_timezone:c})},[i,l,c]),d=iT(e,t,s.id,u,null);return a?r.jsx(r.Fragment,{children:r.jsx(ep,{initialScheduleComponents:a.schedule_components,nextRunTimes:a.next_run_times,initialValidFrequencies:sF,children:n&&r.jsx(Jk,{source:"chat",item:a,onSave:d,onClose:o})},a.id)}):null}function Z1e({automation:t,sourceConversationId:e,sourceMessageId:s,sourceClientThreadId:n,modalOpen:o,closeModal:a}){var l;const i=iT(e,n,s,(l=t.user_message)==null?void 0:l.metadata,t.id);return r.jsx(r.Fragment,{children:r.jsx(ep,{initialScheduleComponents:t.schedule_components,nextRunTimes:t.next_run_times,initialValidFrequencies:sF,children:o&&r.jsx(Jk,{source:"chat",item:t,onSave:i,onClose:a})},t.id)})}function rT({children:t}){const{openModal:e,automationId:s,sourceMessageId:n,isScheduledRun:o}=x.useContext(ng);return t({openScheduleModal:e,isScheduled:!!s,isSchedulable:!s&&!!n,isScheduledRun:o})}function X1e(){const{automationId:t,sourceConversationId:e,sourceMessageId:s}=x.useContext(ng),n=qx(t);if(!n||!e||!s)return null;const o=LC(e);return r.jsx(e_e,{automation:n,sourceClientThreadId:o,sourceConversationId:e,sourceMessageId:s})}function e_e({sourceConversationId:t,sourceClientThreadId:e,sourceMessageId:s,automation:n}){var l;const o=ne(),a=yt(),i=iT(t,e,s,(l=n.user_message)==null?void 0:l.metadata,n.id);return r.jsx(E1e,{automation:n,onSave:i,overrideManageAllAction:r.jsx(J.Item,{icon:Ec,label:o.formatMessage({id:"uPBjIE",defaultMessage:"Schedules"}),onClick:()=>a(o_e())})})}function nF(t){return Qe(t,e=>{if(!e)return null;function s(){const n=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!n)return null;for(let o=n.length-1;o>=0;o--)if(s_e(n[o].message))return n[o].message;return null}return s()})}function t_e(t){return Qe(t,e=>{if(!e)return null;function s(){var o;const n=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!n)return null;for(let a=0;a<n.length;a++){const i=n[a].message;if(i.author.role===ot.User&&((o=i.metadata)==null?void 0:o.real_author_type)==="automation")return i}return null}return s()})}function s_e(t){var e,s;return((e=t.metadata)==null?void 0:e.n7jupd_schedulable)||((s=t.metadata)==null?void 0:s.n7jupd_schedulable_score)!==void 0}function n_e(t,e){const s=ne(),n=Rt(t),o=Qe(t,l=>{const c=l==null?void 0:l.tree.getBranchFromLeaf(e.id);return Uc(c,u=>u.message.author.role===ot.User)}),a=Qe(t,l=>{var c;return(c=l==null?void 0:l.title)!=null?c:s.formatMessage({id:"4lMgsa",defaultMessage:"New Task"})}),i=x.useMemo(()=>{var c,u;if((c=e.metadata)!=null&&c.n7jupd_summary)return(u=e.metadata)==null?void 0:u.n7jupd_summary;if(!o)return null;const l=o.message.content;return l.content_type==="text"?l.parts.join(""):null},[e,o]);return x.useMemo(()=>!o||!i||!n?null:{id:null,title:a,prompt:i,conversation_id:n,schedule:"",is_enabled:!0,notifications_enabled:!0,email_enabled:!0,target_time_utc:null,schedule_components:Y1e,default_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,last_run_time:null,next_run_times:[]},[o,a,i,n])}function iT(t,e,s,n,o){const a=Gt(),i=qx(o);return x.useCallback(async(c,u,d,f,m,p,g,h)=>{var b,y;tF(t,"Need server thread ID");const _=await de.safePost("/conversation/{conversation_id}/agent_automation",{parameters:{path:{conversation_id:t}},requestBody:{jawbone_id:c,title:u,schedule:d,is_enabled:f,prompt:m,default_timezone:p,schedule_components:g,last_run_time:h,email_enabled:(b=i==null?void 0:i.email_enabled)!=null?b:!0,notifications_enabled:(y=i==null?void 0:i.notifications_enabled)!=null?y:!0,message_id:s,user_message:n&&S2(cn(m,n))}});return a.invalidateQueries({queryKey:ZD()}),e&&nt(e,v=>{as.updateTree(v,S=>{S.updateNodeMessageMetadata(s,{n7jupd_scheduled_id:_.id})})}),_},[a,s,t,e,i,n])}function o_e(){return"/schedules"}const a_e=ue(Ce,"608c49",20,20),FN=Pe(()=>me(()=>import("./mfxq5h29sjdj6875.js"),__vite__mapDeps([145,1,3,4])).then(t=>t.MoveConversationBetweenProjectsConfirmModal)),r_e=ue(Ce,"c93ee6",20,20),vo={gray:{solid:{50:"#f9f9f9",400:"#8f8f8f"}},green:{400:"#04b84c"},purple:{400:"#924ff7"},blue:{400:"#0285ff"},orange:{400:"#fb6a22"},red:{400:"#fa423e"},pink:{400:"#ff66ad"},yellow:{400:"#ffc300"}},gs=new Set;function Ytt(){return Promise.allSettled(Array.from(gs).map(t=>t()))}const oF=Pe(()=>me(()=>import("./jzxs0bgx7ce7scj5.js"),__vite__mapDeps([146,3,1,4])));gs.add(oF.prefetch);const aF=Pe(()=>me(()=>import("./mtk1qztvnb31pw5r.js").then(t=>t.CI),__vite__mapDeps([3,1,4])));gs.add(aF.prefetch);const rF=Pe(()=>me(()=>import("./nvdi5lzwa8dbv05v.js"),__vite__mapDeps([147,3,1,4])));gs.add(rF.prefetch);const iF=Pe(()=>me(()=>import("./mtk1qztvnb31pw5r.js").then(t=>t.CJ),__vite__mapDeps([3,1,4])));gs.add(iF.prefetch);const lF=Pe(()=>me(()=>import("./h733mrhdc6qfebgd.js"),__vite__mapDeps([51,3,1,4])));gs.add(lF.prefetch);const cF=Pe(()=>me(()=>import("./c5w9jn2muqrh3ojm.js"),__vite__mapDeps([148,3,1,4])));gs.add(cF.prefetch);const uF=Pe(()=>me(()=>import("./m1n2uc2tzay1c1y2.js"),__vite__mapDeps([149,3,1,4])));gs.add(uF.prefetch);const dF=Pe(()=>me(()=>Promise.resolve().then(()=>VOe),void 0));gs.add(dF.prefetch);const fF=Pe(()=>me(()=>import("./dw8txin0q2l0tkpd.js"),__vite__mapDeps([150,3,1,4])));gs.add(fF.prefetch);const mF=Pe(()=>me(()=>import("./hu7cdk8arxck4dwq.js"),__vite__mapDeps([151,3,1,4])));gs.add(mF.prefetch);const pF=Pe(()=>me(()=>import("./dg0rfsh5mqkm9hm4.js"),__vite__mapDeps([152,3,1,4])));gs.add(pF.prefetch);const gF=Pe(()=>me(()=>Promise.resolve().then(()=>aIe),void 0));gs.add(gF.prefetch);const hF=Pe(()=>me(()=>Promise.resolve().then(()=>$_e),void 0));gs.add(hF.prefetch);const _F=Pe(()=>me(()=>Promise.resolve().then(()=>yhe),void 0));gs.add(_F.prefetch);const xF=Pe(()=>me(()=>import("./b18itl2ir4ckyrtk.js"),__vite__mapDeps([153,3,1,4])));gs.add(xF.prefetch);const yF=Pe(()=>me(()=>Promise.resolve().then(()=>fD),void 0));gs.add(yF.prefetch);const bF=Pe(()=>me(()=>import("./mtk1qztvnb31pw5r.js").then(t=>t.CK),__vite__mapDeps([3,1,4])));gs.add(bF.prefetch);const vF=Pe(()=>me(()=>import("./mtk1qztvnb31pw5r.js").then(t=>t.CF),__vite__mapDeps([3,1,4])));gs.add(vF.prefetch);const SF=Pe(()=>me(()=>import("./nszcnwx7ev33l5cf.js"),__vite__mapDeps([154,3,1,4])));gs.add(SF.prefetch);const CF=Pe(()=>me(()=>import("./mjip4fua52db3tz9.js"),__vite__mapDeps([155,3,1,4])));gs.add(CF.prefetch);const wF=Pe(()=>me(()=>import("./j927c56p6ea5l726.js"),__vite__mapDeps([156,3,1,4])));gs.add(wF.prefetch);const kF=Pe(()=>me(()=>import("./fjmhseqydb9toe6x.js"),__vite__mapDeps([157,3,1,4])));gs.add(kF.prefetch);const TF=Pe(()=>me(()=>import("./h2y70v3i8sai30ul.js"),__vite__mapDeps([158,3,1,4])));gs.add(TF.prefetch);const EF=Pe(()=>me(()=>Promise.resolve().then(()=>Hie),void 0));gs.add(EF.prefetch);const MF=Pe(()=>me(()=>import("./kkwj04vdxs6m2ftx.js"),__vite__mapDeps([159,3,1,4])));gs.add(MF.prefetch);const NF=Pe(()=>me(()=>import("./grqm82wc8aer8abm.js"),__vite__mapDeps([160,3,1,4])));gs.add(NF.prefetch);const AF=Pe(()=>me(()=>import("./go93lwsl5xpollna.js"),__vite__mapDeps([161,3,1,4])));gs.add(AF.prefetch);const IF=Pe(()=>me(()=>import("./iay21uvdtolet9qf.js"),__vite__mapDeps([162,3,1,4])));gs.add(IF.prefetch);const jF=Pe(()=>me(()=>import("./kr7a91ljdepbwd63.js"),__vite__mapDeps([163,3,1,4])));gs.add(jF.prefetch);const PF=Pe(()=>me(()=>Promise.resolve().then(()=>vye),void 0));gs.add(PF.prefetch);const RF=Pe(()=>me(()=>import("./mtk1qztvnb31pw5r.js").then(t=>t.CL),__vite__mapDeps([3,1,4])));gs.add(RF.prefetch);const OF=Pe(()=>me(()=>Promise.resolve().then(()=>qVe),void 0));gs.add(OF.prefetch);const Os={red:vo.red[400],orange:vo.orange[400],yellow:vo.yellow[400],green:vo.green[400],blue:vo.blue[400],purple:vo.purple[400],pink:vo.pink[400]},i_e=new Map([["pencil","edit"],["code-brackets","function"],["balancing-scale","scale"],["globe-spin","desk-globe"],["lite","lotus"],["pens","customize"]]),l_e=t=>{var s;const e=(s=i_e.get(t))!=null?s:t;return LF[e]},Qtt={[Os.red]:{color:Os.red,label:Je({defaultMessage:"Red",id:"project-color-red"})},[Os.orange]:{color:Os.orange,label:Je({defaultMessage:"Orange",id:"project-color-orange"})},[Os.yellow]:{color:Os.yellow,label:Je({defaultMessage:"Yellow",id:"project-color-yellow"})},[Os.green]:{color:Os.green,label:Je({defaultMessage:"Green",id:"project-color-green"})},[Os.blue]:{color:Os.blue,label:Je({defaultMessage:"Blue",id:"project-color-blue"})},[Os.purple]:{color:Os.purple,label:Je({defaultMessage:"Purple",id:"project-color-purple"})},[Os.pink]:{color:Os.pink,label:Je({defaultMessage:"Pink",id:"project-color-pink"})}},LF={folder:{id:"folder",icon:_F,label:Je({id:"U1Ed2E",defaultMessage:"Folder"})},"currency-dollar":{id:"currency-dollar",icon:uF,label:Je({id:"O1L2ji",defaultMessage:"Currency Dollar"})},book:{id:"book",icon:rF,label:Je({id:"Ikd2nV",defaultMessage:"Book"})},"graduation-cap":{id:"graduation-cap",icon:bF,label:Je({id:"XyOlu9",defaultMessage:"Graduation Cap"})},edit:{id:"edit",icon:EF,label:Je({id:"e+bON4",defaultMessage:"Pencil"})},writing:{id:"writing",icon:OF,label:Je({id:"Xsx76J",defaultMessage:"Writing"})},function:{id:"function",icon:lF,label:Je({id:"1dLIWL",defaultMessage:"Code Brackets"})},terminal:{id:"terminal",icon:RF,label:Je({id:"A7r7WM",defaultMessage:"Terminal"})},music:{id:"music",icon:kF,label:Je({id:"vhV09/",defaultMessage:"Music"})},popcorn:{id:"popcorn",icon:AF,label:Je({id:"IBA2my",defaultMessage:"Popcorn"})},customize:{id:"customize",icon:dF,label:Je({id:"NoBDe3",defaultMessage:"Customize"})},palette:{id:"palette",icon:cF,label:Je({id:"1NjHcj",defaultMessage:"Palette"})},stethoscope:{id:"stethoscope",icon:jF,label:Je({id:"m/9B0l",defaultMessage:"Stethoscope"})},health:{id:"health",icon:vF,label:Je({id:"uyQlnK",defaultMessage:"Health"})},lotus:{id:"lotus",icon:wF,label:Je({id:"XVtU4x",defaultMessage:"Lotus"})},suitcase:{id:"suitcase",icon:PF,label:Je({id:"Q7L6wE",defaultMessage:"Suitcase"})},"bar-chart":{id:"bar-chart",icon:aF,label:Je({id:"clYNPV",defaultMessage:"Bar Chart"})},kettlebell:{id:"kettlebell",icon:CF,label:Je({id:"d8EgqT",defaultMessage:"Kettlebell"})},dumbbell:{id:"dumbbell",icon:fF,label:Je({id:"4f2kWJ",defaultMessage:"Dumbbell"})},logs:{id:"logs",icon:gF,label:Je({id:"Uo10ll",defaultMessage:"Logs"})},scale:{id:"scale",icon:oF,label:Je({id:"Duq21q",defaultMessage:"Balancing Scale"})},"desk-globe":{id:"desk-globe",icon:xF,label:Je({id:"2oKfXd",defaultMessage:"Globe Spin"})},plane:{id:"plane",icon:MF,label:Je({id:"Mp7VbF",defaultMessage:"Plane"})},globe:{id:"globe",icon:yF,label:Je({id:"7Gk2Au",defaultMessage:"Globe"})},wrench:{id:"wrench",icon:IF,label:Je({id:"cVZEQn",defaultMessage:"Wrench"})},paw:{id:"paw",icon:TF,label:Je({id:"SwLz4n",defaultMessage:"Paw"})},flask:{id:"flask",icon:hF,label:Je({id:"YRGg1h",defaultMessage:"Flask"})},brain:{id:"brain",icon:iF,label:Je({id:"xDBu5X",defaultMessage:"Brain"})},heart:{id:"heart",icon:SF,label:Je({id:"7bZxVY",defaultMessage:"Heart"})},plant:{id:"plant",icon:NF,label:Je({id:"h4prM6",defaultMessage:"Plant"})}};function Bo(t){return t==null?null:l_e(t)}function c_e(){return u_e}const u_e={icon:pF,label:Je({id:"i39yRC",defaultMessage:"Emoji"}),id:"default",hoverIcon:mF},d_e=[{label:Je({id:"cvNQv+",defaultMessage:"Investing"}),icon:Bo("currency-dollar"),color:Os.green,emoji:"currency-dollar"},{label:Je({id:"fxIuzw",defaultMessage:"Homework"}),icon:Bo("graduation-cap"),color:Os.blue,emoji:"graduation-cap"},{label:Je({id:"x1ggA9",defaultMessage:"Writing"}),icon:Bo("writing"),color:Os.purple,emoji:"writing"},{label:Je({id:"FdXDrg",defaultMessage:"Health"}),icon:Bo("health"),color:Os.red,emoji:"health"},{label:Je({id:"ftkSeM",defaultMessage:"Travel"}),icon:Bo("plane"),color:Os.yellow,emoji:"plane"}],f_e=[{label:Je({id:"dNjvRY",defaultMessage:"Research"}),icon:Bo("desk-globe"),color:Os.blue,emoji:"desk-globe"},{label:Je({id:"lPMK20",defaultMessage:"Planning"}),icon:Bo("book"),color:Os.green,emoji:"book"},{label:Je({id:"LM4RDS",defaultMessage:"Code"}),icon:Bo("function"),color:Os.orange,emoji:"function"},{label:Je({id:"umKvY2",defaultMessage:"Meetings"}),icon:Bo("logs"),color:Os.purple,emoji:"logs"},{label:Je({id:"NXAQZ1",defaultMessage:"Onboarding"}),icon:Bo("suitcase"),color:Os.yellow,emoji:"suitcase"},{label:Je({id:"4tnZcg",defaultMessage:"Brainstorms"}),icon:Bo("brain"),color:Os.pink,emoji:"brain"}];function Jtt(t){return xQ(t)?f_e:d_e}function Ztt(){return Object.values(LF)}function DF(t){"use forget";const e=F.c(23),{color:s,emoji:n,className:o,isSharedProject:a,size:i,strict:l}=t,c=n===void 0?null:n,u=ne();let d;if(e[0]!==o||e[1]!==s||e[2]!==c||e[3]!==u||e[4]!==a||e[5]!==i||e[6]!==l){const f=z("icon",i==="lg"&&"h-8 w-8 max-md:h-6 max-md:w-[28px] max-md:h-[28px]",o);let m,p,g,h,_,b;if(e[8]!==s||e[9]!==c||e[10]!==u||e[11]!==a||e[12]!==l){const y=Bo(c),v=!!y;g=!v&&!l;const S=c_e();let C;m=null;let w=null;v?(C=y.icon,w=y):g?(C=S.icon,m=S.hoverIcon,w=S):C=a?r_e:Xm;const k=g&&"relative";e[19]!==k?(_=z(k),e[19]=k,e[20]=_):_=e[20];const E=s!=null?s:void 0;e[21]!==E?(b={color:E},e[21]=E,e[22]=b):b=e[22],p=C,h=w?u.formatMessage(w.label):void 0,e[8]=s,e[9]=c,e[10]=u,e[11]=a,e[12]=l,e[13]=m,e[14]=p,e[15]=g,e[16]=h,e[17]=_,e[18]=b}else m=e[13],p=e[14],g=e[15],h=e[16],_=e[17],b=e[18];d=r.jsxs("div",{className:_,style:b,children:[r.jsx(p,{"aria-label":h,className:z(f,g&&"group-hover:invisible group-data-[state=open]:invisible")}),g&&m&&r.jsx(m,{"aria-hidden":!0,inert:!0,className:z(f,"invisible absolute inset-0 place-self-center justify-self-center group-hover:visible group-data-[state=open]:visible")})]}),e[0]=o,e[1]=s,e[2]=c,e[3]=u,e[4]=a,e[5]=i,e[6]=l,e[7]=d}else d=e[7];return d}const Xtt=Pe(()=>me(()=>import("./gbx9lblxsjstng4m.js"),__vite__mapDeps([164,1,3,4,165])).then(t=>t.SnorlaxFolderAnimation),{loading:({color:t,isSharedProject:e,strict:s})=>r.jsx(DF,{color:t,isSharedProject:e,strict:s})}),Qy=Pe(()=>me(()=>Promise.resolve().then(()=>yye),void 0).then(t=>t.CreateOrEditProjectModalAsync));function j2(t){"use forget";const e=F.c(48),s=ne(),n=Gt(),o=G(),a=!t.inSidebarFlyout,{canCreate:i}=yQ(),l=yt(),[c,u]=x.useState(!1),{snorlaxes:d,hasNextPage:f,fetchNextPage:m,isLoading:p,isFetchingNextPage:g,isError:h}=DC();let _,b,y,v,S;if(e[0]!==a||e[1]!==i||e[2]!==o||e[3]!==f||e[4]!==c||e[5]!==s||e[6]!==h||e[7]!==p||e[8]!==l||e[9]!==m||e[10]!==t||e[11]!==n||e[12]!==d){const k=t.inSidebarFlyout?d.slice(c6):d;let E;e[18]!==t.currentGizmoId?(E=R=>{const{gizmo:O}=R;return O.gizmo.id!==t.currentGizmoId},e[18]=t.currentGizmoId,e[19]=E):E=e[19];const M=k.filter(E),N=M.length===0;let A;e[20]!==f||e[21]!==p||e[22]!==m?(A=R=>{if(p||R==null)return;const O=new IntersectionObserver(L=>{L[0].isIntersecting&&f&&m()});return O.observe(R),()=>{O.disconnect()}},e[20]=f,e[21]=p,e[22]=m,e[23]=A):A=e[23];const I=A,P=a&&i;_=N&&!h?I:void 0,e[24]!==N||e[25]!==p?(b=N&&p&&r.jsxs(lf,{children:[r.jsx(J.Shimmer,{}),r.jsx(J.Shimmer,{})]}),e[24]=N,e[25]=p,e[26]=b):b=e[26],e[27]!==c||e[28]!==s||e[29]!==N||e[30]!==h||e[31]!==n?(y=N&&h&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[s.formatMessage(cs.unableToLoadHistory),!c&&r.jsx("div",{className:"mt-1",children:r.jsx(ke,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{u(!0),bQ(n)},children:s.formatMessage(cs.retryLoadingHistory)})})]}),e[27]=c,e[28]=s,e[29]=N,e[30]=h,e[31]=n,e[32]=y):y=e[32],e[33]!==o||e[34]!==l||e[35]!==t||e[36]!==P||e[37]!==d?(v=P&&r.jsx(r.Fragment,{children:r.jsx(J.Item,{icon:a_e,label:r.jsx(j,T({},cs.newProjectButton)),onSelect:()=>{mt(o,Qy,{onClose:()=>Un(o,Qy),onSuccess:async R=>{var H;if(!R)return;Un(o,Qy);const O=t.currentGizmoId,L=(H=d.find(V=>V.gizmo.gizmo.id===R))==null?void 0:H.gizmo,D=async()=>{await t.onUpdateConversationGizmo(R),l("/g/".concat(R,"/project"))};if(jn(O)&&jn(R)&&O!==R&&L&&wd(L)){mt(o,FN,{onConfirmMove:D});return}await D()}})}})}),e[33]=o,e[34]=l,e[35]=t,e[36]=P,e[37]=d,e[38]=v):v=e[38],S=!p&&!N&&M.map((R,O)=>{const{gizmo:L}=R,D=O===M.length-1?I:void 0;return r.jsxs(r.Fragment,{children:[P&&O===0&&r.jsx(J.Separator,{},"new-project-separator"),r.jsx(J.LinkItem,{to:L!=null?$m(o,L):"/",icon:r.jsx(DF,{color:L.gizmo.display.theme,emoji:L.gizmo.display.emoji,strict:!0}),label:L.gizmo.display.name,onClick:H=>{if(t.inSidebarFlyout)return;H.preventDefault();const V=L!=null?$m(o,L):"/",q=t.currentGizmoId,W=()=>{t.onUpdateConversationGizmo(L.gizmo.id),l(V)};if(jn(q)&&jn(L.gizmo.id)&&q!==L.gizmo.id&&wd(L)){mt(o,FN,{onConfirmMove:W});return}W()},ref:D},L.gizmo.id)]})}),e[0]=a,e[1]=i,e[2]=o,e[3]=f,e[4]=c,e[5]=s,e[6]=h,e[7]=p,e[8]=l,e[9]=m,e[10]=t,e[11]=n,e[12]=d,e[13]=_,e[14]=b,e[15]=y,e[16]=v,e[17]=S}else _=e[13],b=e[14],y=e[15],v=e[16],S=e[17];let C;e[39]!==g?(C=g&&r.jsxs(r.Fragment,{children:[r.jsx(J.Shimmer,{}),r.jsx(J.Shimmer,{})]}),e[39]=g,e[40]=C):C=e[40];let w;return e[41]!==_||e[42]!==b||e[43]!==y||e[44]!==v||e[45]!==S||e[46]!==C?(w=r.jsxs("div",{ref:_,children:[b,y,v,S,C]}),e[41]=_,e[42]=b,e[43]=y,e[44]=v,e[45]=S,e[46]=C,e[47]=w):w=e[47],w}const BN=Pe(()=>me(()=>import("./lcdvojbjninqw880.js"),__vite__mapDeps([166,1,3,4,167])).then(t=>t.ShareProjectChatModal));function m_e(t){"use forget";var h,_,b;const e=F.c(10),{clientThreadId:s}=t,n=G(),o=ct(n),a=Bs(s),[i,l,c]=Qe(s,p_e),u=o==null?void 0:o.normalizedAccountUserId,{data:d}=u6(c),f=((b=(_=(h=d==null?void 0:d.gizmo.sharing)==null?void 0:h.subjects)==null?void 0:_.length)!=null?b:0)>0,m=(i!=null?i:u)&&(a!=null?a:l)&&jn(c)&&f&&!(o!=null&&o.isWorkspaceAccount());let p;e[0]!==n||e[1]!==d||e[2]!==(i==null?void 0:i.id)||e[3]!==a||e[4]!==l||e[5]!==u?(p=()=>{var y,v;d&&mt(n,BN,{gizmo:d,serverThreadId:a!=null?a:l,ownerUserId:(v=(y=i==null?void 0:i.id)!=null?y:u)!=null?v:"",onClose:()=>Un(n,BN)})},e[0]=n,e[1]=d,e[2]=i==null?void 0:i.id,e[3]=a,e[4]=l,e[5]=u,e[6]=p):p=e[6];let g;return e[7]!==m||e[8]!==p?(g={shouldShowProjectsChatShareModal:m,openProjectsChatShareModal:p},e[7]=m,e[8]=p,e[9]=g):g=e[9],g}function p_e(t){return[t==null?void 0:t.sharedProjectConversationOwner,t==null?void 0:t.continuingFromSharedProjectConversationId,Se.getGizmoId(t)]}function g_e(){"use forget";var i;const t=F.c(5),e=fs();let s;t[0]!==e?(s=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=s):s=t[1];const n=F_(s),o=n.isLoading?null:((i=n.data)==null?void 0:i.allow_third_party_gpts)==="allow_specific";let a;return t[2]!==e||t[3]!==o?(a=(e==null?void 0:e.isOwnerOfAccount())&&o,t[2]=e,t[3]=o,t[4]=a):a=t[4],a}function h_e(){"use forget";var l;const t=F.c(5),e=fs();let s;t[0]!==e?(s=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=s):s=t[1];const{data:n,isLoading:o}=F_(s);let a;t[2]!==o||t[3]!==(n==null?void 0:n.permissions)?(a=o?null:((l=n==null?void 0:n.permissions)==null?void 0:l.includes("chatgpt.workspace.feature.enhanced-citations.access"))===!0,t[2]=o,t[3]=n==null?void 0:n.permissions,t[4]=a):a=t[4];const i=a;return xp()&&i}function FF(t){const e=JSON.stringify(t.map(n=>[n.id,n.title,n.update_time]));return x.useMemo(()=>t,[e])}const BF=3,__e="starred-conversations",x_e=1;function y_e(t){return e=>e?[...e.filter(n=>n.item.id!==t.item.id),t]:[t]}function b_e(t){return e=>e&&e.filter(s=>s.item.id!==t)}function v_e(t){var e;return((e=t==null?void 0:t.length)!=null?e:0)<BF}function UN(){return Ps({queryKey:[dm],queryFn:async()=>await de.safeGet("/pins",{parameters:{query:{limit:BF}},authOption:is.SendIfAvailable})})}function UF(){"use forget";var d;const t=F.c(10);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=UN(),t[0]=e):e=t[0];const s=vQ(__e,x_e,e.queryKey);let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=UN(),t[1]=n):n=t[1];let o;t[2]!==s?(o=U(T({},n),{placeholderData:s}),t[2]=s,t[3]=o):o=t[3];const{data:a,isLoading:i}=dt(o);let l;t[4]!==a?(l=(d=a==null?void 0:a.map(S_e))!=null?d:[],t[4]=a,t[5]=l):l=t[5];const c=FF(l);let u;return t[6]!==c||t[7]!==a||t[8]!==i?(u={conversations:c,data:a,isLoading:i},t[6]=c,t[7]=a,t[8]=i,t[9]=u):u=t[9],u}function S_e(t){return t.item}function C_e(){"use forget";const t=F.c(11),e=Gt(),s=Kt();let n;t[0]!==e?(n=l=>{const{isStarred:c,conversation:u}=l,d=e.getQueryData([dm]),f=e.getQueryData(um());if(c&&!v_e(d))return{previousStarredConversationsData:d,previousGeneralConversationsData:f};c?(e.setQueryData([dm],y_e({item_type:"conversation",item:u})),e.setQueryData(um(),SQ(u.id))):(e.setQueryData([dm],b_e(u.id)),e.setQueryData(um(),CQ(u,{items:[u],total:1,limit:wQ,offset:0})));const m=Rt(u.id);return m&&nt(m,p=>{p.isStarred=c}),{previousStarredConversationsData:d,previousGeneralConversationsData:f}},t[0]=e,t[1]=n):n=t[1];let o;t[2]!==e||t[3]!==s?(o=(l,c,u)=>{if(u!=null&&u.previousStarredConversationsData&&e.setQueryData([dm],u.previousStarredConversationsData),u!=null&&u.previousGeneralConversationsData&&e.setQueryData(um(),u.previousGeneralConversationsData),c){const f=Rt(c.conversation.id);f&&nt(f,m=>{m.isStarred=!c.isStarred})}const d=AC(l);s.warning(d!=null?d:"Error",{duration:2})},t[2]=e,t[3]=s,t[4]=o):o=t[4];let a;t[5]!==e?(a=()=>{Ea(e)},t[5]=e,t[6]=a):a=t[6];let i;return t[7]!==n||t[8]!==o||t[9]!==a?(i={mutationFn:w_e,onMutate:n,onError:o,onSettled:a},t[7]=n,t[8]=o,t[9]=a,t[10]=i):i=t[10],ds(i)}async function w_e(t){const{isStarred:e,conversation:s}=t;return await de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s.id}},requestBody:{is_starred:e}}),{conversation:s,isStarred:e}}function $F(t){const e=Xe(t,"3436367576"),s=e.get("enable_local_indexing",!1),n=e.get("enable_ux",!1),o=ct(t),a=!!(o!=null&&o.hasPlusFeatures());return{isFannyPackEnabled:n||a,isFannyPackInitializerEnabled:s||a}}var Jy={},$N;function k_e(){return $N||($N=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator"})(t.Key||(t.Key={}))})(Jy)),Jy}var T_e=k_e(),Js=(t=>(t.Core="Core",t.Chat="Chat",t.Settings="Settings",t.Internal="Internal",t))(Js||{});const et=T({Mod:"mod",Comma:",",Space:"Space"," ":"Space","":"Space"},T_e.Key),E_e=new RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");function HN(){return TQ()||EQ()}const M_e={[et.Comma]:",",[et.Enter]:"",[et.Escape]:"Esc",[et.ArrowUp]:"",[et.ArrowDown]:"",[et.ArrowLeft]:"",[et.ArrowRight]:"",[et.Backspace]:"",[et.Delete]:"",[et.Tab]:"",[et.Control]:"Ctrl",[et.Shift]:"Shift"};function N_e(t){switch(t){case et.Mod:return HN()?"":"Ctrl";case et.Meta:return HN()?"":"Win";default:return M_e[t]}}const est=t=>t.map(e=>{var s;return(s=N_e(e))!=null?s:e}),za=Ne({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},toggleDevMode:{id:"keyboardActions.toggleDevMode",defaultMessage:"Toggle dev mode"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),HF=new kQ,A_e=[et.Mod,et.Shift,"o"],tst=[et.Mod,"k"],I_e=Pe(()=>me(()=>import("./fl4ha52uwxfs3yp2.js"),__vite__mapDeps([168,1,3,4])).then(t=>t.DeleteConversationConfirmationModalContainer)),sst=t=>{"use forget";const e=F.c(24),{newChatAction:s,clientThreadId:n,focusPromptTextareaAction:o}=t,a=G(),i=Kt();let l;e[0]!==a?(l=$F(a),e[0]=a,e[1]=l):l=e[1];const{isFannyPackEnabled:c}=l;let u;e[2]!==a?(u=()=>gp(a),e[2]=a,e[3]=u):u=e[3];const d=oe(u);let f;e[4]!==a?(f=()=>MQ(a),e[4]=a,e[5]=f):f=e[5];const m=oe(f),p=Dc();let g;e[6]!==a?(g=()=>NQ(a),e[6]=a,e[7]=g):g=e[7];const h=oe(g),_=jc(),b=sn(Ss),y=yt(),v=ne();let S,C;e[8]!==m||e[9]!==h||e[10]!==n||e[11]!==a||e[12]!==o||e[13]!==v||e[14]!==b||e[15]!==d||e[16]!==_||e[17]!==c||e[18]!==y||e[19]!==s||e[20]!==i||e[21]!==p?(S=()=>{const w=_?[[et.Mod,"n"]]:[],k={key:"navigationToggle",action:j_e,actionMessageDescriptor:za.navigationToggle,group:Js.Core,keyboardBinding:[et.Mod,et.Shift,"s"]},E={key:"toggleDevMode",action:()=>{p.mutate({setting:Qt.DeveloperMode,value:!d}),i.success(v.formatMessage({id:"ANH+8L",defaultMessage:"Developer mode toggled"}))},actionMessageDescriptor:za.toggleDevMode,group:Js.Settings,keyboardBinding:[et.Mod,"."]};return K_(a).addAction({key:"newChat",action:s||Tn,actionMessageDescriptor:za.newChat,group:Js.Core,keyboardBinding:A_e,altKeyboardBindings:c?[...w]:[...w,[et.Mod,"k"]]},{key:"focusPromptTextarea",action:o!=null?o:kk,actionMessageDescriptor:za.focusPromptTextarea,group:Js.Chat,keyboardBinding:[et.Shift,et.Escape]},{key:"copyLastCodeBlock",action:M=>{if(n!=null){const N=Se.getConversationTurns(Tt(n));for(let A=N.length-1;A>=0;A--){const{messages:I}=N[A],R=[...I.reduce(P_e,"").matchAll(E_e)],O=R.length?R[R.length-1][1]:null;if(O!=null){Jo(O,i,M).then(()=>{i.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:za.copyLastCodeBlock,group:Js.Chat,keyboardBinding:[et.Mod,et.Shift,";"],altKeyboardBindings:[[et.Mod,et.Shift,":"]]},{key:"toggleCustomInstructions",action:()=>{y("#settings/".concat(hn.Personalization))},actionMessageDescriptor:za.toggleCustomInstructions,group:Js.Settings,keyboardBinding:[et.Mod,et.Shift,"i"]},...m&&h?[E]:[],...b?[]:[k],{key:"deleteChat",action:()=>{if(n){const M=Rt(n);M&&mt(a,I_e,{serverThreadId:M,isActiveConversation:!0})}},actionMessageDescriptor:za.deleteChat,group:Js.Chat,keyboardBinding:[et.Mod,et.Shift,et.Backspace],altKeyboardBindings:[[et.Mod,et.Shift,et.Delete]]},{key:"zoomIn",enabled:ka,action:R_e,actionMessageDescriptor:za.zoomIn,group:Js.Chat,keyboardBinding:[et.Mod,"+"],altKeyboardBindings:[[et.Mod,"="]]},{key:"zoomOut",enabled:ka,action:O_e,actionMessageDescriptor:za.zoomOut,group:Js.Chat,keyboardBinding:[et.Mod,"-"]},{key:"resetZoom",enabled:ka,action:L_e,actionMessageDescriptor:za.resetZoom,group:Js.Chat,keyboardBinding:[et.Mod,"0"]})},C=[a,n,o,b,_,c,s,i,y,d,p,m,h,v],e[8]=m,e[9]=h,e[10]=n,e[11]=a,e[12]=o,e[13]=v,e[14]=b,e[15]=d,e[16]=_,e[17]=c,e[18]=y,e[19]=s,e[20]=i,e[21]=p,e[22]=S,e[23]=C):(S=e[22],C=e[23]),x.useEffect(S,C)},nst=t=>{"use forget";const e=F.c(6),{setSelectedVoiceIndex:s,prevVoiceIndex:n,nextVoiceIndex:o}=t,a=G();let i,l;e[0]!==a||e[1]!==o||e[2]!==n||e[3]!==s?(i=()=>K_(a).addAction({key:"selectPrevVoice",action:()=>{s(n)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:Js.Core,keyboardBinding:[et.ArrowLeft]},{key:"selectNextVoice",action:()=>{s(o)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:Js.Chat,keyboardBinding:[et.ArrowRight]}),l=[a,s,n,o],e[0]=a,e[1]=o,e[2]=n,e[3]=s,e[4]=i,e[5]=l):(i=e[4],l=e[5]),x.useEffect(i,l)};function j_e(){tn.setSidebarOpen(void 0)}function P_e(t,e){var s;return((s=e.clientMetadata)==null?void 0:s.err)==null&&e.author.role===ot.Assistant&&e.recipient==="all"?t+(t?"\n\n":"")+xo(e):t}function R_e(){return AQ()}function O_e(){return IQ()}function L_e(){return jQ()}const lT=ue(Ce,"eee0f5",20,20);function D_e({gizmoResource:t}){const e=G(),s=Kt(),[n,o]=x.useState(!1);return t.gizmo.share_recipient===ec.Private?null:r.jsx(J.Item,{onClick:async a=>{a.stopPropagation(),a.preventDefault();try{const i=t.gizmo.short_url?PQ(t.gizmo.short_url):window.location.origin.concat($m(e,t));await Jo(i,s,a),o(!0),setTimeout(()=>{o(!1)},2e3)}catch(i){Ge.addError(i);return}},icon:lT,children:n?r.jsx(j,T({},GN.copiedURL)):r.jsx(j,T({},GN.copyLink))})}const GN=Ne({copyLink:{defaultMessage:"Copy link",id:"GizmoInformation.copyLink"},copiedURL:{defaultMessage:"Copied URL",id:"GizmoInformation.copiedURL"}});function GF({className:t,inputClassName:e,value:s,onChange:n,onKeyDown:o,onFocus:a,onBlur:i,placeholder:l,id:c,autoFocus:u}){return r.jsxs("div",{className:z("relative",t),children:[r.jsx(d6,{className:"icon-sm text-token-text-tertiary absolute start-2 top-1/2 -translate-y-1/2 transform"}),r.jsx("input",{id:c,type:"text",value:s,onKeyDown:o,onChange:n,onFocus:a,onBlur:i,placeholder:l,autoFocus:u,className:z("rounded-lg border border-gray-200 ps-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",e),autoComplete:"off"})]})}const F_e=ue(Ce,"1b87bb",20,20),B_e=ue(Ce,"c24a00",24,24),VN=ue(Ce,"6335c3",24,24),U_e=ue(Ce,"29679e",24,24),VF=ue(Ce,"4e1864",20,20),$_e=Object.freeze(Object.defineProperty({__proto__:null,default:VF},Symbol.toStringTag,{value:"Module"}));function zF({modelSwitcherDeny:t}){const e=G(),s=ct(e),n=s==null?void 0:s.isPro();switch(t.reason){case pa.UNSUPPORTED_TOOL_USE:case pa.UNSUPPORTED_AUDIO:case pa.UNSUPPORTED_IMAGE:case pa.UNSUPPORTED_GIZMO:case pa.UNSUPPORTED_ATTACHMENT:case pa.UNSUPPORTED_CUSTOM_INSTRUCTIONS:case pa.UNSUPPORTED_CANVAS:case pa.UNSUPPORTED_TEMPORARY_CHAT:return r.jsx(r.Fragment,{children:t.description});case Y_.RATE_LIMIT:{const{resetsAfter:a}=t,i=new Date(a),l=new Date(a).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(n)return r.jsx("div",{children:r.jsx(j,{id:"CwSQn9",defaultMessage:"Temporarily limited. Contact <supportEmail>support@openai.com</supportEmail> for help.",values:{supportEmail:c=>r.jsx(Ia,{to:"mailto:support@openai.com",className:"underline",children:c})}})});if(f6(i))return r.jsx(j,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:l}});if(RQ(i))return r.jsx(j,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:l}});{const c=i.toLocaleDateString([],{month:"short",day:"numeric"});return r.jsx(j,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:c}})}}}const o=t.description;if(o)return r.jsx(r.Fragment,{children:o})}function cT({clientThreadId:t}){var p;const e=G(),s=Et(e,t),n=Q_(),[o,a]=Qe(t,g=>{var h,_;return[(_=(h=Se.getCurrentNode(g))==null?void 0:h.message.metadata)==null?void 0:_.model_switcher_deny,Se.getGizmoId(g)]}),i=a!=null?a:n,{data:l}=vi(i),c=oe(()=>br(s)),u=ne(),d={},f=Ee(e,"891514942"),m=J_();for(const{resets_after:g,model_slug:h}of m)[jg.CONVERSATION,jg.REGENERATE].forEach(_=>{var S,C;const b=(S=d[h])!=null?S:{},y=(C=b[_])!=null?C:[],v={reason:Y_.RATE_LIMIT,resetsAfter:g,isAvailable:!1};y.push(v),b[_]=y,d[h]=b});if(o==null||o.forEach(g=>{var k,E;const{slug:h,context:_,reason:b,description:y,is_available:v}=g,S=f&&v,C=(k=d[h])!=null?k:{},w=(E=C[_])!=null?E:[];w.push({reason:b,description:y,isAvailable:S}),C[_]=w,d[h]=C}),i&&jn(i)){const g=[An.GIZMO_PROJECT];(p=l==null?void 0:l.files)!=null&&p.length&&g.push(An.ATTACHMENT),l!=null&&l.gizmo.instructions.length&&g.push(An.CUSTOM_INSTRUCTIONS),c.categories.forEach(h=>{var S;const{defaultModel:_,supportedFeatures:b}=h,y=b||[],v=[];if(g.includes(An.GIZMO_PROJECT)&&!y.includes(An.GIZMO_PROJECT)&&v.push({reason:pa.UNSUPPORTED_GIZMO,description:u.formatMessage({id:"6w0z4F",defaultMessage:"This model doesn't support projects."}),isAvailable:!1}),g.includes(An.ATTACHMENT)&&!y.includes(An.ATTACHMENT)&&v.push({reason:pa.UNSUPPORTED_ATTACHMENT,description:u.formatMessage({id:"ZKjdak",defaultMessage:"This model doesn't support file attachments."}),isAvailable:!1}),g.includes(An.CUSTOM_INSTRUCTIONS)&&!y.includes(An.CUSTOM_INSTRUCTIONS)&&v.push({reason:pa.UNSUPPORTED_CUSTOM_INSTRUCTIONS,description:u.formatMessage({id:"zaubcf",defaultMessage:"This model doesn't support custom instructions."}),isAvailable:!1}),v.length){const C=(S=d[_])!=null?S:{};[jg.CONVERSATION,jg.REGENERATE].forEach(w=>{var E;const k=(E=C[w])!=null?E:[];k.push(...v),C[w]=k,d[_]=C})}})}return d}function WF({modelSlug:t,modelSwitcherDenialsBySlug:e}){var n;const s=t?(n=e[t])==null?void 0:n.conversation:null;return s?s.every(o=>o.isAvailable===!0):!0}function H_e(t){"use forget";var A;const e=F.c(41),{conversation:s,currentModel:n,categoryOptions:o,className:a,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:l,onModelItemClick:c,preferredModelId:u}=t,d=l===void 0?!1:l,f=ne(),m=(A=n==null?void 0:n.id)!=null?A:null,[p,g]=x.useState("");let h;e:{if(!p){h=o;break e}let I;if(e[0]!==o||e[1]!==p){let P;e[3]!==p?(P=R=>R.name.toLowerCase().includes(p.toLowerCase()),e[3]=p,e[4]=P):P=e[4],I=o.filter(P),e[0]=o,e[1]=p,e[2]=I}else I=e[2];h=I}const _=h;let b;e[5]!==a?(b=z("flex flex-col pt-0",a),e[5]=a,e[6]=b):b=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y={borderRadius:"inherit"},e[7]=y):y=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=I=>{g(I.target.value)},e[8]=v):v=e[8];let S;e[9]!==p?(S=r.jsx("div",{className:"p-2",children:r.jsx(GF,{inputClassName:"w-full",value:p,onKeyDown:G_e,onChange:v})}),e[9]=p,e[10]=S):S=e[10];let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("hr",{}),e[11]=C):C=e[11];let w;e[12]!==S?(w=r.jsxs("div",{style:y,className:"sticky top-0 z-1 bg-white",children:[S,C]}),e[12]=S,e[13]=w):w=e[13];let k;e[14]!==_.length||e[15]!==f?(k=_.length===0&&r.jsx(J.Item,{children:f.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),e[14]=_.length,e[15]=f,e[16]=k):k=e[16];let E;if(e[17]!==s||e[18]!==n||e[19]!==m||e[20]!==d||e[21]!==_||e[22]!==i||e[23]!==c||e[24]!==u){let I;e[26]!==s||e[27]!==n||e[28]!==m||e[29]!==d||e[30]!==i||e[31]!==c||e[32]!==u?(I=P=>{const{value:R}=P;return"options"in P?r.jsx(Bu,{conversation:s,currentModel:n,isSelected:m==null?void 0:m.startsWith(R),option:P,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:d,onModelItemClick:c,preferredModelId:u},R):r.jsx(Pi,{conversation:s,currentModelId:m,isSelected:m===R,value:R,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:d,onClick:c,preferredModelId:u,children:P.name},R)},e[26]=s,e[27]=n,e[28]=m,e[29]=d,e[30]=i,e[31]=c,e[32]=u,e[33]=I):I=e[33],E=_.map(I),e[17]=s,e[18]=n,e[19]=m,e[20]=d,e[21]=_,e[22]=i,e[23]=c,e[24]=u,e[25]=E}else E=e[25];let M;e[34]!==E||e[35]!==k?(M=r.jsxs("div",{className:"scrollbar-gutter-stable w-[min(320px,95vw)] flex-grow overflow-auto",children:[k,E]}),e[34]=E,e[35]=k,e[36]=M):M=e[36];let N;return e[37]!==M||e[38]!==b||e[39]!==w?(N=r.jsx(J.Portal,{children:r.jsxs(J.SubContent,{className:b,children:[w,M]})}),e[37]=M,e[38]=b,e[39]=w,e[40]=N):N=e[40],N}function G_e(t){t.stopPropagation()}function Bu({conversation:t,currentModel:e,option:s,isSelected:n=!1,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a=!1,onModelItemClick:i,preferredModelId:l}){var g;const{name:c,options:u,categoryId:d}=s,f="".concat(c," Models"),m=()=>r.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(VF,{className:"icon"}),f]})});let p;return a&&n&&(p=(g=s.options.find(h=>h.value===(e==null?void 0:e.id)))==null?void 0:g.name),r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{children:r.jsxs("div",{className:z("flex grow justify-between gap-2 overflow-hidden",a?"items-center break-all":""),children:[d?m():c,n&&r.jsx("div",{className:"text-token-text-tertiary truncate",children:p!=null?p:e==null?void 0:e.title})]})}),r.jsx(H_e,{conversation:t,currentModel:e,categoryOptions:u,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a,onModelItemClick:i,preferredModelId:l})]})}function Pi({value:t,children:e,icon:s,secondary:n,currentModelId:o,isSelected:a,onClick:i,modelSwitcherDenialsBySlug:l,isUpgradeUpsell:c=!1,testId:u,displayInFull_INTERNAL_USE_ONLY:d=!1,deprecated:f,preferredModelId:m,disabledByAdmin:p,conversation:g}){var E,M;const h=G(),_=t?(M=(E=l[t])==null?void 0:E.conversation)==null?void 0:M[0]:null,b=On(),y=jo(),v=WF({modelSlug:t,modelSwitcherDenialsBySlug:l}),S=p||!v,C=Xe(h,"1846737571"),w=()=>{if(b===Ye.Glaux&&y(null,{ifPrevSystemHint:Ye.Glaux}),i)i(t);else if(t){B.logEvent("Model Switcher Model Changed",{from:o,to:t}),pt.logEvent("chatgpt_model_switcher_model_changed",t,{from:o!=null?o:"",to:t});const N=t;FC(h,N)||OQ(h).mutate({modelSlug:N}),kd(g,N)}},k=r.jsx(J.Item,{onClick:w,disabled:S,className:z(d&&"break-all"),icon:s,secondary:n,trailingColor:"primary",trailing:c?r.jsx(ke,{color:"secondary",size:"small",className:C.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:r.jsx(j,{id:"oKo8wt",defaultMessage:"Upgrade"})}):a?r.jsx(sC,{className:"icon-sm"}):r.jsx("span",{className:"icon"}),"data-testid":u,children:r.jsxs("span",{className:"flex items-center gap-1",children:[e,t&&t===m&&!a&&!c&&!f&&r.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:r.jsx(j,{id:"model-switcher.preferred",defaultMessage:"GPT creator recommended"})})]})},t);return _?r.jsx(It,{withArrow:!0,side:"right",sideOffset:-10,label:r.jsx(zF,{modelSwitcherDeny:_}),children:k}):k}var Hh=(t=>(t.GPT4o="AG8PqS2q",t.AUTO="auto",t))(Hh||{});const V_e=t=>{const{categoryId:e}=t;return e==="auto"},z_e=(t,e,s,n)=>{const o=Ee(t,"2861925050"),a=s==null?void 0:s.some(({model_slug:i})=>n==null?void 0:n.models.get(i));return!(!o||!a||!e||!e.isSelfServeBusiness())},qF=()=>{const t=ft.getItem(Be.FinchAdminNotified);return new Date(t!=null?t:0)},W_e=()=>{const t=new Date;t.setDate(t.getDate()+1),ft.setItem(Be.FinchAdminNotified,t.toISOString())},q_e=()=>{const t=qF();return ft.getItem(Be.FinchAdminNotified)!=null&&new Date<=t},K_e=()=>{const t=qF();return new Date>t},Y_e=t=>{switch(t){case"wham":return"wham";case"deep_research":return"deep_research";case"image_gen":return"image_gen";case"gpt-4-5":return"gpt-4-5";default:return null}},Q_e=Zt(t=>({hasRequestedCredits:q_e(),setHasRequestedCredits:e=>t(()=>({hasRequestedCredits:e}))})),J_e=Pe(()=>me(()=>import("./dydcwm1dqf2artli.js"),__vite__mapDeps([169,1,3,4])).then(t=>t.CreditPurchaseModal)),Z_e=()=>{const t=Kt(),e=ne(),{hasRequestedCredits:s,setHasRequestedCredits:n}=Q_e(),{mutate:o,isPending:a}=ds({mutationFn:i=>de.safePost("/credits/pleas",{requestBody:{product:i}}),onError:i=>{Ge.addError(new Error("Error occurred while submitting credit plea request",{cause:i})),t.danger(ud.errorRequestCredits,{toastId:"teams_credit_plea_button"})},onSuccess:()=>{n(!0),t.success(e.formatMessage(ud.successRequestCredits)),W_e(),tn.setThreadModelPickerAlertDot(!1)}});return{submitCreditPleaRequest:o,hasRequestedCredits:s,isPending:a}},KF=s=>{var n=s,{trigger:t}=n,e=De(n,["trigger"]);const o=G();x.useEffect(()=>{B.logEventWithStatsig("ChatGPT Credits: Add Credits Button Shown","chatgpt_credits_add_credits_button_shown",{trigger:t})},[t]);const a=()=>{B.logEventWithStatsig("ChatGPT Credits: Add Credits Clicked","chatgpt_credits_add_credits_clicked"),mt(o,J_e)};return r.jsx(ke,U(T({color:"primary",onClick:a},e),{children:r.jsx(j,T({},ud.addCredits))}))},YF=n=>{var o=n,{creditConsumingProduct:t,trigger:e}=o,s=De(o,["creditConsumingProduct","trigger"]);const a=ne(),{submitCreditPleaRequest:i,isPending:l,hasRequestedCredits:c}=Z_e();x.useEffect(()=>{B.logEventWithStatsig("ChatGPT Credits: Notify Admin Button Shown","chatgpt_credits_notify_admin_button_shown",{trigger:e,creditConsumingProduct:t})},[t,e]);const u=()=>{c||(i(t),B.logEventWithStatsig("ChatGPT Credits: Notify Admin Clicked","chatgpt_credits_notify_admin_clicked"))},d=r.jsx(ke,U(T({loading:l,color:c?"secondary":"primary",disabled:c,onClick:u},s),{children:c?a.formatMessage(ud.requested):a.formatMessage(ud.notifyAdmin)}));return c?r.jsx(It,{className:"w-auto whitespace-nowrap",withArrow:!0,labelTextAlign:"left",contentClassName:"w-[180px]",side:"right",label:a.formatMessage(ud.alreadyRequested),children:d}):d},ud=Ne({notifyAdmin:{id:"prompt-textarea.teamsCreditRequestBanner.notifyAdmin",defaultMessage:"Notify admin"},addCredits:{id:"prompt-textarea.teamsCreditRequestBanner.addCredits",defaultMessage:"Add credits"},requested:{id:"prompt-textarea.teamsCreditRequestBanner.requested",defaultMessage:"Requested"},errorRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.error",defaultMessage:"Error occurred while submitting credit request"},successRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.success",defaultMessage:"Request sent to your admin"},alreadyRequested:{id:"prompt-textarea.teamsCreditRequestBanner.alreadyRequested",defaultMessage:"Youve already notified your admin"}}),zN="needsCreditsSection",X_e=()=>{const t=fs(),e=t==null?void 0:t.isOwnerOfAccount();return r.jsxs(J.Item,{className:"pointer-events-none pe-2.5! hover:bg-transparent hover:text-inherit",onSelect:s=>s.preventDefault(),disabled:!0,children:[r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,T({},e?WN.ownerDescription:WN.description))}),e?r.jsx(KF,{size:"small",trigger:"thread-header-dropdown-credits-section"}):r.jsx(YF,{size:"small",creditConsumingProduct:"gpt-4-5",trigger:"thread-header-dropdown-credits-section"})]})},WN=Ne({description:{id:"prompt-textarea.teamsCreditRequestBanner.label",defaultMessage:"Limits reached. Send a request to your admin to get access"},ownerDescription:{id:"prompt-textarea.teamsCreditRequestBanner.ownerLabel",defaultMessage:"Limits reached. Add credits to your account"}}),exe="/cdn/assets/no-auth-upsell-m8ypcpwf.webp",txe={src:exe};function sxe({statsig_login_event:t,statsig_signup_event:e,location:s}){const n=G(),o=Yc(n),a=xf(n,qN.signUpCta),i="no-auth-".concat(s),l=yt(),c=h=>{switch(h){case"attach":return Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_ATTACH;case"model-switcher":return Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_MODEL_SWITCHER;default:return Lt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL}},u=_o(n,"2210309751").get("variant","control"),d=()=>{l({hash:Pp,search:window.location.search},{state:{[xx]:"NoAuth Model Picker Upsell"}})},f=()=>{os(n,{fallbackScreenHint:"login",callback:h=>{B.logLogInButtonClicked({location:i,provider:h},c(s)),pt.logEvent(t)},skipLoginModal:!1})},m=()=>{os(n,{fallbackScreenHint:"signup",callback:h=>{B.logSignUpButtonClicked({location:i,provider:h},c(s)),pt.logEvent(e)},skipLoginModal:!1})},p=r.jsx(ke,{as:"button",size:"medium",color:o?"primary":"secondary",onClick:f,children:r.jsx(j,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})},"login-button"),g=r.jsx(ke,{as:"button",size:"medium",color:o?"secondary":"primary",onClick:m,children:r.jsx(j,T({},a))},"signup-button");return r.jsxs("div",{className:"-mt-4 flex max-w-[calc(100vw-2rem)] flex-col",children:[r.jsx("img",{className:"max-xs:hidden h-[132px] object-fill",src:txe.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-4 pt-5 pb-2",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(j,{id:"rwmTbn",defaultMessage:"Try advanced features for free"})}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(j,{id:"unOBJo",defaultMessage:"Get smarter responses, upload files, create images, and more by logging in."})}),r.jsx("div",{className:"mt-5 flex flex-row flex-wrap justify-start gap-2",children:o?[p,g]:[g,p]}),u==="model-picker"&&r.jsx("p",{className:"text-token-text-secondary mt-5 text-xs",children:r.jsx(j,U(T({},qN.createWorkspaceTeamOrBusiness),{values:{createWorkspaceLink:h=>r.jsx("span",{onClick:d,className:"text-token-text-secondary decoration-token-text-primary cursor-pointer underline",children:h})}}))})]})]})}const qN=Ne({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},createWorkspaceTeamOrBusiness:{id:"components.noAuthUpsell.createWorkspaceTeamOrBusiness",defaultMessage:"<createWorkspaceLink>Create a workspace</createWorkspaceLink> for a team or business"}}),nxe=({isUnauthenticated:t,enabled:e=!0})=>Ps({queryKey:["modelMessageCap",t],queryFn:()=>BC.safeGet("/conversation_limit",{authOption:is.SendIfAvailable}),enabled:e});function z1(t){return t.map(e=>typeof e=="string"?e:"").join("")}function ost(t){return t.map(e=>e.type==="text"?e.text:"").join("\n")}function QF(t,e){const s=[];let n=0;for(let o=0;o<t.length;o++){const a=t[o];if(typeof a=="string")if(e!=null&&e<n+a.length){s.push({type:"text",text:a.slice(0,e-n)});break}else s.push({type:"text",text:a}),n+=a.length;else if(a.content_type===Yo.ImageAssetPointer){const i=o>0?s[o-1]:null;(i==null?void 0:i.type)==="images"?i.imageAssets.push(a):s.push({type:"images",imageAssets:[a]})}else a.content_type===Yo.AudioTranscription&&s.push({type:"transcription",text:a.text})}return s}function ast({isUserTurn:t,parts:e}){if(!t)return QF(e);const s={text:[],images:[]};for(let o=0;o<e.length;o++){const a=e[o];typeof a=="string"?a.trim().length>0&&s.text.push({type:"text",text:a}):a.content_type===Yo.AudioTranscription?s.text.push({type:"transcription",text:a.text}):a.content_type===Yo.ImageAssetPointer&&s.images.push(a)}const n=[];return s.images.length>0&&n.unshift({type:"images",imageAssets:s.images}),n.push(...s.text.map(o=>({type:o.type,text:o.text}))),n}function oxe(t){const e=t&&new Date(t),s=e&&new Date(e);return s?"after ".concat(s.getHours()%12||12,":").concat(s.getMinutes()<10?"0":"").concat(s.getMinutes()," ").concat(s.getHours()>=12?"PM":"AM"):"later"}function axe(t){if(t<60)return{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")};const e=Math.floor(t/60);if(e<24)return{type:"hour",value:e,text:e<2?"hour":"".concat(e," hours")};const s=Math.floor(e/24);return s<7?{type:"day",value:s,text:s<2?"day":"".concat(s," days")}:{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")}}const Zy={textarea:"","model-switcher":""};function rxe(){const t=Dx(i=>i.isoDate),e=oxe(t),s=ne(),n=Sa(mr.isEnterpriseyPlan),o=!ut(),{data:a}=dt(nxe({isUnauthenticated:o}));return x.useMemo(()=>{var p,g,h;const i=(p=a==null?void 0:a.message_cap)!=null?p:0,l=(g=a==null?void 0:a.message_cap_window)!=null?g:1,{text:c,type:u,value:d}=axe(l),f=(h=a==null?void 0:a.message_disclaimer)!=null?h:Zy;if(!c||n)return{textareaDisclaimer:f.textarea,modelSwitcherDisclaimer:f["model-switcher"],modelSwitcherLimitShort:""};if(!a||!l||!i)return{textareaDisclaimer:Zy.textarea,modelSwitcherDisclaimer:Zy["model-switcher"],modelSwitcherLimitShort:""};let m=s.formatMessage(Xy.shortLimitMinutes,{numerator:i,denominator:d});switch(u){case"hour":m=s.formatMessage(Xy.shortLimitHours,{numerator:i,denominator:d});break;case"day":m=s.formatMessage(Xy.shortLimitDays,{numerator:i,denominator:d});break}return{textareaDisclaimer:f.textarea.replaceAll("%FORMATTED_TIME%",e).replaceAll("%NUMERATOR%","".concat(i)).replaceAll("%DENOMINATOR%",c),modelSwitcherDisclaimer:f["model-switcher"].replaceAll("%FORMATTED_TIME%",e).replaceAll("%NUMERATOR%","".concat(i)).replaceAll("%DENOMINATOR%",c),modelSwitcherLimitShort:m}},[a,e,s,n])}const Xy=Ne({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var Dr=(t=>(t.ALPHA="alpha",t.DATA_CAMPAIGNS="data_campaigns",t.EXPERIMENTS="experiments",t.MAINLINE="mainline",t))(Dr||{});const ixe=t=>$c(t,({id:e})=>e.split(":").slice(0,1).join(":"));function uT(){const t=G(),e=Q_(),s=oe(()=>m6(t,{isGizmo:!!e})),n=Mce(),{modelSwitcherDisclaimer:o}=rxe();return x.useMemo(()=>{const a=[],{categories:i,groups:l,models:c}=s;for(const u of i){const{defaultModel:d,categoryId:f,label:m}=u,p=c.get(d);if(p){const g=n===d;a.push({categoryId:f,value:d,name:m,description:g?o:p.description,options:[eb(p,{name:"Default"})]})}}for(const u of l){const{group:d,label:f,modelIds:m}=u,p=m[0],g=[];for(const h of m){const _=c.get(h);_&&!_.tags.includes(LQ.HIDDEN)&&g.push(_)}if(d==="experiments"){const h=ixe(g),_=Object.entries(h).map(([b,y])=>{const v=b.split(":").slice(-1)[0];return{key:b,value:v,name:v,options:y.map(S=>{const{title:C}=S;return eb(U(T({},S),{title:C.replace(v,"")}))})}});a.push({categoryId:d,value:p,name:f,options:_})}else a.push({categoryId:d,value:p,name:f,options:g.map(h=>eb(h))})}return a},[s,n,o])}function eb(t,e={}){return T({value:t.id,name:t.title},e)}const JF="top_level_secondary_models";function W1(t,e){let s=t;if(t===B3.AUTO){const a=e.categories.filter(({defaultModel:i})=>i!==B3.AUTO);(a==null?void 0:a.length)===1&&(s=a[0].defaultModel)}const n=e.categories.find(({defaultModel:a,supportedModels:i})=>a===s||s&&(i==null?void 0:i.includes(s)));if(n){const{categoryId:a}=n;return{selectedCategory:a,modelLabel:n.shortLabel,fullModelLabel:n.label}}const o=e.groups.find(({modelIds:a})=>s&&a.includes(s));if(o){const{group:a,shortLabel:i,label:l}=o;return{selectedCategory:a,modelLabel:i,fullModelLabel:l}}return{selectedCategory:null,modelLabel:null,fullModelLabel:null}}function lxe(t,e,s,n){const o=e?t.formatMessage(P2.beta):s?t.formatMessage(P2.alpha):n;if(o)return r.jsx(Cc,{children:o})}function cxe({category:t,modelSwitcherDenialsBySlug:e,conversation:s,currentGizmoId:n,currentModelId:o,testId:a,preferredModelId:i,disabledByAdmin:l=!1,disableSelectionHighlight:c=!1}){const u=ne(),{defaultModel:d,label:f,description:m,isBeta:p,isAlpha:g,modelBadge:h,subcategory:_}=t,b=jn(n!=null?n:""),y=G(),v=FC(y,d),S=_!==void 0&&_!==JF,C=r.jsxs(Pi,{value:d,conversation:s,currentModelId:o,modelSwitcherDenialsBySlug:e,secondary:S?void 0:m,deprecated:v,disabledByAdmin:l,isSelected:!c&&(!n||b)&&o===d,testId:a,preferredModelId:i,children:[f,lxe(u,p,g,h)]},d);return l?r.jsx(It,{label:u.formatMessage(P2.disabledByAdmin),children:C}):C}function dT({sections:t}){return r.jsx(r.Fragment,{children:t.map((e,s)=>{var n;return r.jsxs(gn.Fragment,{children:[s!==0&&((n=t[s-1])==null?void 0:n.id)!=="model-picker-title"?r.jsx(J.Separator,{}):null,e.content]},e.id)})})}function fT(t,e,s,n,o){var Te,xe,ce,we,ge,Ae,Ue,Ie,Me,te;const a=ne(),i=G(),l=!ut(),{data:c}=Ic(),u=xs(),d=!l&&!!u&&p6(u)&&c&&(!UC(c)||((Te=c.currentAccount)==null?void 0:Te.isFreeWorkspace())),{session:f}=vl(i),m=f==null?void 0:f.user,p=m&&q_(m),g=oe(()=>Cs(t)),h=g.id,_=oe(()=>yc(t)),b=On(),y=tc(b),v=y?null:h;let S=oe(()=>br(t));const C=g6(i),w=Bs(t.id),k=cT({clientThreadId:t.id}),E=S.modelPickerVersion===2,{data:M}=oe(()=>_&&!Hc(i,_)?h6(i):{data:void 0}),N=!w,A=e.find(({categoryId:Q})=>Q===Dr.ALPHA),I=e.find(({categoryId:Q})=>Q===Dr.DATA_CAMPAIGNS),P=e.find(({categoryId:Q})=>Q===Dr.EXPERIMENTS),R=e.find(({categoryId:Q})=>Q===Dr.MAINLINE),[O,L]=x.useState(""),D=oe(()=>!0),H=[A,I,P,R].reduce((Q,ie)=>ie?[...Q,...ie.options.map(_e=>U(T({},_e),{badge:ie.categoryId}))]:Q,[]),V=x.useMemo(()=>O?H.filter(Q=>Q.name.toLowerCase().includes(O.toLowerCase())):H,[H,O]);if(n&&_&&M){const Q=JSON.parse(JSON.stringify(S));Q.categories=Q.categories.filter(({defaultModel:ie})=>M.editor.models_list_with_custom_actions.includes(ie)),S=Q}S=x.useMemo(()=>S,[S]);const q=!!(A!=null&&A.options.length),W=!!(I!=null&&I.options.length),$=!!(P!=null&&P.options.length),Z=!!(R!=null&&R.options.length),K=yt(),Y=x.useCallback(Q=>{B.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),an(K,"Thread header dropdown",Q)},[K]),ae=()=>{pt.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),B.logEvent("Model Switcher Plus Upgrade Button Clicked"),l?os(i,{shouldOpenPaymentModalOnAuth:!0,callback:Q=>{B.logSignUpButtonClicked({location:"Model switcher GPT-4 upsell",provider:Q},Lt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GPT4_UPSELL)},skipLoginModal:!1}):Y()},se=()=>{B.logEventWithStatsig("Model Switcher Go Upgrade Button Clicked","chatgpt_model_switcher_go_upgrade_button_clicked"),l?os(i,{shouldOpenPaymentModalOnAuth:!0,callback:Q=>{B.logSignUpButtonClicked({location:"Model switcher Go upsell",provider:Q},Lt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GO_UPSELL)},skipLoginModal:!1}):Y()},ee=()=>{B.logEventWithStatsig("Model Switcher Team Upgrade Button Clicked","chatgpt_model_switcher_team_upgrade_button_clicked"),Y(Pp)},re=[],he=Ee(i,"3315017149"),fe=!!(S.secondaryTitle&&S.secondaryTitle!==""&&he);S.title&&he&&re.push({id:"model-picker-title",content:[r.jsx(J.Label,{className:"mb-0",children:S.title},"model-picker-title")]});const pe=r.jsxs(J.Label,{className:"flex items-center",children:[r.jsx(j,{id:"coNCb7",defaultMessage:"Models"}),r.jsx(It,{side:"right",className:"ms-1.5",delayDuration:120,label:r.jsx(j,{id:"/vFWz/",defaultMessage:"Learn more"}),children:r.jsx("a",{href:"https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",target:"_blank",rel:"noreferrer",children:r.jsx(p2,{className:"h-3.5 w-3.5 shrink-0"})})})]},"models-section-header");if(l){const Q={id:"modelSection",content:[]};Q.content.push(r.jsx(sxe,{location:"model-switcher",statsig_login_event:"chatgpt_modelswitcher_login_button_clicked",statsig_signup_event:"chatgpt_modelswitcher_signup_button_clicked"},"noAuthUpsell")),re.push(Q)}else if(!C&&!_){const Q={id:"modelSection",content:[]};E1(i)?Q.content.push(r.jsx(Pi,{value:"",conversation:t,currentModelId:h,onClick:se,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:B_e,secondary:r.jsx(j,{id:"vm2Wqf",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"/d/+gD",defaultMessage:"ChatGPT Go"})},"goUpgrade")):d?Q.content.push(r.jsx(Pi,{value:"",conversation:t,currentModelId:h,onClick:ee,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:F_e,secondary:r.jsx(j,{id:"001Ixi",defaultMessage:"Advanced AI for your work"}),isSelected:!1,children:r.jsx(j,{id:"K94mcH",defaultMessage:"ChatGPT Business"})},"teamUpgrade")):Q.content.push(r.jsx(Pi,{value:"",conversation:t,currentModelId:h,onClick:ae,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:VN,secondary:r.jsx(j,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade")),Q.content.push(r.jsx(Pi,{value:Hh.AUTO,conversation:t,currentModelId:h,modelSwitcherDenialsBySlug:k,icon:U_e,secondary:d?r.jsx(j,{id:"R8fHfF",defaultMessage:"For quick tasks & answers"}):r.jsx(j,{id:"n96qML",defaultMessage:"Great for everyday tasks"}),isSelected:!y&&!_&&v===Hh.AUTO,children:r.jsx(j,{id:"U9E7Rx",defaultMessage:"ChatGPT"})},Hh.AUTO)),re.push(Q)}else{const Q={id:"modelSection",content:[]};S.categories.length&&!E&&Q.content.push(pe),(xe=ct(i))!=null&&xe.isGo()&&Q.content.push(r.jsx(Pi,{value:"",conversation:t,currentModelId:h,onClick:ae,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:VN,secondary:r.jsx(j,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade"));const ie=new Map,_e=[];S.categories.forEach(be=>{var qe;const Oe=r.jsx(cxe,{category:be,conversation:t,currentGizmoId:_,currentModelId:h,modelSwitcherDenialsBySlug:k,preferredModelId:o,testId:"model-switcher-".concat(be.defaultModel),disabledByAdmin:be.disabledByAdmin,disableSelectionHighlight:y},be.categoryId);if(be.subcategory===JF){_e.push(Oe);return}be.subcategory?(ie.has(be.subcategory)||ie.set(be.subcategory,[]),(qe=ie.get(be.subcategory))==null||qe.push(Oe)):Q.content.push(Oe)}),fe&&_e.length&&Q.content.push(r.jsx(J.Label,{className:"mb-0",children:S.secondaryTitle},"secondary-model-picker-title")),_e.length&&Q.content.push(..._e);const ye=(ce=S.categories.some(be=>be.defaultModel==="gpt-5"))!=null?ce:!1,Re=(we=S.categories.some(be=>be.defaultModel==="gpt-5-pro"))!=null?we:!1;if(ye&&!Re&&!((ge=ct(i))!=null&&ge.isPro())&&Ee(i,"3309244414")){const be=r.jsx(uxe,{}),Oe=(Ae=S.categories.find(qe=>qe.defaultModel==="gpt-5-thinking"))==null?void 0:Ae.subcategory;Oe?(Ue=ie.get(Oe))==null||Ue.push(be):Q.content.push(be)}E?ie.forEach((be,Oe)=>{var st;Oe&&Q.content.push(r.jsx(J.Separator,{},"".concat(Oe,"-divider")));const qe=S.categories.find(rt=>rt.subcategory===Oe&&rt.defaultModel===(g==null?void 0:g.id)),{fullModelLabel:Ze}=W1((st=qe==null?void 0:qe.defaultModel)!=null?st:"",S);Q.content.push(r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{"data-testid":Oe+"-submenu",trailing:r.jsx("div",{className:"truncate",children:Ze}),children:Oe}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{children:be})})]},Oe))}):ie.forEach((be,Oe)=>{const qe=S.categories.find(Ze=>Ze.subcategory===Oe&&Ze.defaultModel===(g==null?void 0:g.id));Q.content.push(r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{"data-testid":Oe?"".concat(Oe,"-submenu"):void 0,trailing:qe&&r.jsx("div",{className:"truncate",children:qe.label}),children:Oe}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{children:be})})]},Oe))});const Ve=(Ie=S.categories.some(be=>be.defaultModel==="gpt-5-2"))!=null?Ie:!1,ze=(Me=S.categories.some(be=>be.defaultModel==="gpt-5-1"))!=null?Me:!1,Fe=(te=S.categories.some(be=>be.defaultModel==="gpt-4o"||be.defaultModel==="gpt-4.1"))!=null?te:!1;n&&_&&Q.content.push(r.jsx(J.Label,{className:"flex flex-col items-start gap-1",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(j,{id:"Y96ci5",defaultMessage:"Limited models for Custom Action GPTs"}),r.jsx(It,{side:"right",className:"ms-1.5 cursor-pointer",delayDuration:0,label:Ve?r.jsx(j,{id:"vyOVss",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant, GPT-4o, and GPT-4.1."}):ze?r.jsx(j,{id:"vyOVss",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant, GPT-4o, and GPT-4.1."}):ye&&Fe?r.jsx(j,{id:"vyOVss",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant, GPT-4o, and GPT-4.1."}):ye?r.jsx(j,{id:"0CtjLX",defaultMessage:"GPTs with custom web actions can currently only use GPT-5 Instant."}):r.jsx(j,{id:"wDE3HX",defaultMessage:"GPTs with custom web actions can currently only use GPT-4o and GPT-4.1. If your GPT has no custom actions it can use any model."}),children:r.jsx(p2,{className:"h-4 w-4 shrink-0"})})]})})),re.push(Q)}const le={id:"otherOptionsSection",content:[]},{selectedCategory:ve}=W1(v,S);return N&&(q||W||$||Z?le.content.push(r.jsx("div",{className:"px-4 py-2",children:r.jsx(GF,{inputClassName:"w-full",onKeyDown:Q=>{Q.stopPropagation()},onChange:Q=>{L(Q.target.value)},value:O})})):p&&le.content.push(r.jsxs(r.Fragment,{children:[r.jsx(J.Shimmer,{size:"long"}),r.jsx(J.Shimmer,{size:"long"}),r.jsx(J.Shimmer,{size:"long"}),r.jsx(J.Shimmer,{size:"long"})]})),O?le.content.push(r.jsxs("div",{className:"scrollbar-gutter-stable max-h-64 w-[min(320px,95vw)] overflow-y-scroll",children:[V.length===0&&r.jsx(J.Item,{className:"w-full",children:a.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),V.map(Q=>{const{value:ie}=Q;return"options"in Q?r.jsx(Bu,{conversation:t,currentModel:g,isSelected:!y&&(h==null?void 0:h.startsWith(ie)),option:Q,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},ie):r.jsxs(Pi,{conversation:t,currentModelId:h,isSelected:!y&&h===ie,value:ie,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o,children:[Q.name,Q.badge&&r.jsx(Cc,{children:Q.badge})]},ie)})]})):(q&&le.content.push(r.jsx(Bu,{isSelected:!y&&ve===Dr.ALPHA,conversation:t,currentModel:g,option:A,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},A.value)),W&&le.content.push(r.jsx(Bu,{isSelected:!y&&ve===Dr.DATA_CAMPAIGNS,conversation:t,currentModel:g,option:I,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},I.value)),$&&le.content.push(r.jsx(Bu,{conversation:t,currentModel:g,isSelected:!y&&ve===Dr.EXPERIMENTS,option:P,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},P.value)),Z&&le.content.push(r.jsx(Bu,{isSelected:!y&&ve===Dr.MAINLINE,conversation:t,currentModel:g,option:R,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},R.value)))),le.content.length&&D&&re.push(le),s&&re.push({id:zN,content:[r.jsx(X_e,{},zN)]}),re}const uxe=()=>{const t=yt(),e=G(),s=Ee(e,"3315017149");let n=r.jsx(j,{id:"4myKt+",defaultMessage:"GPT-5 Pro"});return s&&(n=r.jsx(j,{id:"fCVj6z",defaultMessage:"Pro"})),r.jsx(J.Item,{disabled:!0,label:n,secondary:r.jsx(j,{id:"BsApen",defaultMessage:"Research-grade intelligence"}),trailing:r.jsx(ke,{color:"secondary",size:"small",onClick:()=>{B.logEventWithStatsig("Model Switcher Pro Upgrade Button Clicked","chatgpt_model_switcher_pro_upgrade_button_clicked"),B.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),an(t,"Thread header dropdown")},children:r.jsx(j,{id:"aJndhk",defaultMessage:"Upgrade"})})})},P2=Ne({alpha:{id:"o5FsPB",defaultMessage:"Alpha"},beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALLE, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALLE and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALLE, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"},disabledByAdmin:{id:"XoQ6cH",defaultMessage:"Disabled by Admin"}});function dxe(t,e,s){const n=oe(()=>W1(Cs(t).id,br(t)).modelLabel),o=uT(),a=fT(t,o,void 0,e,s);return{modelLabel:n,dropdownSections:a}}function fxe({show:t,conversation:e,gizmoHasCustomActions:s,preferredModelId:n}){const{modelLabel:o,dropdownSections:a}=dxe(e,s,n);return t?r.jsxs(J.Sub,{onOpenChange:i=>{i&&B.logEvent("GPTs: Breadcrumb Picker Model Picker Open")},children:[r.jsx(J.SubMenuTrigger,{children:r.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[r.jsx(j,{id:"ilkdMh",defaultMessage:"Model"}),r.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o})]})}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{onClick:()=>{B.logEvent("GPTs: Breadcrumb Picker Model Picker Select")},children:r.jsx(dT,{sections:a})})})]}):null}function KN(t,e){const o=300/t,a=35/o;let i;if(e<=a)i=o*e;else{const l=t-a,u=-4*((e-a)/l);i=35+(99.9-35)*(1-Math.exp(u))}return Math.min(i,99.9)}const R2=(t,e)=>{const s=+new Date-t,[n,o]=x.useState(KN(e,s));return x.useEffect(()=>{const a=setInterval(()=>{const i=+new Date-t,l=KN(e,i);if(o(l),l>=100||i>=e)return clearInterval(a),o(100),100},100);return()=>{clearInterval(a)}},[t,e]),n},mxe={[on.RESEARCH]:30,[on.PRO_MODE]:15,[on.THINKING]:2,[on.IMAGE_GEN]:2,[on.UNKNOWN]:15,[on.FRONTEND_ARTIFACT]:12},ZF=t=>{var o,a;const e=((a=(o=t.expectedDurationMinutes)!=null?o:mxe[IC(t)])!=null?a:15)*60*1e3,s=t.createdAt?+new Date(t.createdAt):Date.now();return R2(s,e)},pxe="",gxe=({thumbnail:t,title:e,description:s,progress:n,link:o,onClick:a})=>{const i=ne(),l=r.jsxs("div",{className:"flex items-center gap-2",children:[t,r.jsxs("div",{className:"flex flex-col gap-0.5",children:[r.jsx("div",{children:e}),r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[s&&r.jsx("span",{children:s}),n!=null&&r.jsxs(r.Fragment,{children:[pxe,r.jsx("span",{className:"w-[40px]",children:i.formatMessage({id:"task.progressOnly",defaultMessage:"{progress}%"},{progress:Math.round(n)})})]})]})]})]});return o!=null?r.jsx(J.LinkItem,{to:o,children:l}):r.jsx(J.Item,{onClick:a,children:l})},XF=t=>{"use forget";const e=F.c(23),{task:s,conversationId:n,isActiveConversation:o}=t,a=ne();let i;e[0]!==s?(i=TD(s),e[0]=s,e[1]=i):i=e[1];const l=i,c=ZF(s);let u;e[2]!==c||e[3]!==s?(u=$C(s)?Math.min(c,99):void 0,e[2]=c,e[3]=s,e[4]=u):u=e[4];const d=u,f=s.scrollToMessageIdOverride,m=f!=null?f:s.status===Is.COMPLETED?s.responseMessageId:s.originalConversationUserMessageId,p=o?void 0:"/c/".concat(s.originalConversationId,"?messageId=").concat(m);let g;e[5]!==n||e[6]!==o||e[7]!==m?(g=o?()=>{nt(n,xxe),requestAnimationFrame(()=>{nt(n,v=>{v.scrollToMessageId=m,v.scrollToMessageIsAssistant=!0})})}:void 0,e[5]=n,e[6]=o,e[7]=m,e[8]=g):g=e[8];const h=g;let _;e[9]!==n||e[10]!==s?(_=r.jsx(ED,{task:s,conversationId:n,size:"md"}),e[9]=n,e[10]=s,e[11]=_):_=e[11];let b;e[12]!==l||e[13]!==a?(b=l?a.formatMessage(l):void 0,e[12]=l,e[13]=a,e[14]=b):b=e[14];let y;return e[15]!==p||e[16]!==h||e[17]!==d||e[18]!==_||e[19]!==b||e[20]!==s.taskId||e[21]!==s.title?(y=r.jsx(gxe,{thumbnail:_,title:s.title,description:b,progress:d,link:p,onClick:h},s.taskId),e[15]=p,e[16]=h,e[17]=d,e[18]=_,e[19]=b,e[20]=s.taskId,e[21]=s.title,e[22]=y):y=e[22],y},hxe=t=>{"use forget";const e=F.c(21),{task:s,conversationId:n,isActiveConversation:o}=t,a=ne();let i;e[0]!==a||e[1]!==s.title?(i=s.title&&s.title.trim().length>0?s.title:a.formatMessage({id:"artifactTask.defaultTitle",defaultMessage:"Creating artifact"}),e[0]=a,e[1]=s.title,e[2]=i):i=e[2];const l=i,c=s.id;let u;e[3]!==s.startedAt?(u=new Date(s.startedAt).toISOString(),e[3]=s.startedAt,e[4]=u):u=e[4];let d;e[5]!==s.startedAt?(d=new Date(s.startedAt).toISOString(),e[5]=s.startedAt,e[6]=d):d=e[6];const f=s.isTurnEnded?Is.COMPLETED:Is.RUNNING;let m,p;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=[],p=[],e[7]=m,e[8]=p):(m=e[7],p=e[8]);let g;e[9]!==n||e[10]!==u||e[11]!==d||e[12]!==f||e[13]!==s.id||e[14]!==s.scrollToMessageId||e[15]!==l?(g={taskId:c,title:l,prompt:"",createdAt:u,updatedAt:d,status:f,originalConversationId:n,conversationId:n,rows:m,messages:p,finalMessage:void 0,collapsed:!1,scrollToMessageIdOverride:s.scrollToMessageId,responseMessageId:void 0,responseCanvasTextdocId:void 0,notificationStatus:void 0,originalConversationUserMessageId:void 0,imageGenMessage:void 0},e[9]=n,e[10]=u,e[11]=d,e[12]=f,e[13]=s.id,e[14]=s.scrollToMessageId,e[15]=l,e[16]=g):g=e[16];const h=g;let _;return e[17]!==n||e[18]!==o||e[19]!==h?(_=r.jsx(XF,{task:h,conversationId:n,isActiveConversation:o},h.taskId),e[17]=n,e[18]=o,e[19]=h,e[20]=_):_=e[20],_},_xe=t=>{"use forget";const e=F.c(18),{conversationId:s,isActiveConversation:n}=t,o=Qe(s,yxe),a=DQ(s);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(J.Separator,{className:"first:hidden last:hidden"}),e[0]=i):i=e[0];let l;if(e[1]!==s||e[2]!==o||e[3]!==n){let d;e[5]!==s||e[6]!==n?(d=f=>r.jsx(hxe,{task:f,conversationId:s,isActiveConversation:n},f.id),e[5]=s,e[6]=n,e[7]=d):d=e[7],l=o.map(d),e[1]=s,e[2]=o,e[3]=n,e[4]=l}else l=e[4];let c;if(e[8]!==s||e[9]!==n||e[10]!==a){let d;e[12]!==s||e[13]!==n?(d=f=>r.jsx(XF,{task:f,conversationId:s,isActiveConversation:n},f.taskId),e[12]=s,e[13]=n,e[14]=d):d=e[14],c=a.filter(bxe).map(d),e[8]=s,e[9]=n,e[10]=a,e[11]=c}else c=e[11];let u;return e[15]!==l||e[16]!==c?(u=r.jsxs(r.Fragment,{children:[i,l,c]}),e[15]=l,e[16]=c,e[17]=u):u=e[17],u};function xxe(t){t.scrollToMessageId=void 0,t.scrollToMessageIsAssistant=void 0}function yxe(t){var e;return FQ(Se.getConversationTurns(t),{title:(e=t==null?void 0:t.title)!=null?e:null,threadUpdateTimeMs:(t==null?void 0:t.update_time)!=null?t.update_time*1e3:void 0})}function bxe(t){return t.title!=null&&t.title!==""}const vxe=Pe(()=>me(()=>import("./o7qo6wd4jpqdyj9p.js"),__vite__mapDeps([170,1,3,4]))),Sxe=Pe(()=>me(()=>import("./88cccwvek02yf61d.js"),__vite__mapDeps([171,1,3,4])).then(t=>t.GizmoKeepInSidebarMenuItem)),Cxe=Pe(()=>me(()=>import("./fl4ha52uwxfs3yp2.js"),__vite__mapDeps([168,1,3,4])).then(t=>t.DeleteConversationConfirmationModalContainer)),wxe=Pe(()=>me(()=>import("./moee19t0icnodtc2.js").then(t=>t.c),__vite__mapDeps([172,1,3,4])).then(t=>t.GizmoDetailsModal)),kxe=Pe(()=>me(()=>import("./kfz799kdnokj9job.js"),__vite__mapDeps([173,1,3,4])).then(t=>t.default)),Txe=Pe(()=>me(()=>import("./dot4yzsm2q0eyrg0.js"),__vite__mapDeps([174,1,3,4])).then(t=>t.default)),Exe=Pe(()=>me(()=>Promise.resolve().then(()=>Z$e),void 0).then(t=>t.default)),Mxe=Pe(()=>me(()=>import("./c5og9r81gzk0nhum.js"),__vite__mapDeps([175,1,3,4])).then(t=>t.ThreadReportConversationModal));function Nxe(t){"use forget";const e=F.c(8),{children:s,conversation:n,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}=t;let l;e[0]!==n||e[1]!==o||e[2]!==i||e[3]!==a?(l=r.jsx(eB,{conversation:n,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}),e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=l):l=e[4];let c;return e[5]!==s||e[6]!==l?(c=r.jsx(r.Fragment,{children:r.jsx(ia,{size:"small",triggerButton:s,children:l})}),e[5]=s,e[6]=l,e[7]=c):c=e[7],c}function eB({conversation:t,gizmoResource:e,showReportModal:s,showGizmoModelPicker:n}){var k,E;const{canEdit:o}=BQ(e),{canCreate:a}=UQ(),{canViewConfig:i}=$Q(e),l=HQ(e.gizmo.id),c=ja(),u=GQ(e),d=e.gizmo.share_recipient===ec.Marketplace||e.gizmo.share_recipient===ec.Link,f=!u&&d,m=G(),g=Ee(m,"1825130190")&&!u&&_6(e),h=(c==null?void 0:c.includes(kn.GizmoSupportEmails))&&!u&&e.gizmo.author.will_receive_support_emails&&g,_=g_e(),b=oe(t.serverId$),v=Gk(kn.WorkspaceShareLinks)&&b&&ut(),S=yt(),C=fs(),w=ND();return r.jsxs(r.Fragment,{children:[r.jsx(fxe,{show:n,conversation:t,gizmoHasCustomActions:x6(e.tools),preferredModelId:(k=e.gizmo.default_model)!=null?k:void 0}),r.jsx(J.LinkItem,{onClick:()=>{B.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:e.gizmo.id})},to:"/g/".concat(e.gizmo.short_url),state:w,icon:Ip,children:r.jsx(j,T({},vn.newChat))}),r.jsx(J.Item,{onClick:()=>mt(m,wxe,{gizmoId:e.gizmo.id,creatorId:e.gizmo.author.user_id}),icon:ci,children:r.jsx(j,T({},vn.about))}),((E=e.tools)==null?void 0:E.find(M=>M.type===Ka.JIT_PLUGIN))&&r.jsx(J.Item,{onClick:()=>mt(m,kxe,{gizmo:e}),icon:gx,children:r.jsx(j,T({},vn.privacySettings))}),o&&r.jsx(J.Item,{onClick:()=>{S(l)},icon:yp,children:r.jsx(j,T({},vn.customize))}),!o&&i&&r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{onClick:()=>{S("/g/".concat(e.gizmo.id,"/view"))},icon:HC,children:r.jsx(j,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),a&&r.jsx(J.Item,{onClick:async()=>{const M=await GC.copyGizmo({gizmoId:e.gizmo.id});M.gizmo.id&&S("/gpts/editor/".concat(M.gizmo.id))},icon:Vk,children:r.jsx(j,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),r.jsx(Sxe,{gizmoResource:e,location:"conversation_page"}),r.jsx(D_e,{gizmoResource:e}),r.jsx(The,{gizmoResource:e,canEdit:o}),h&&r.jsx(J.Item,{onClick:()=>mt(m,Txe,{gizmo:e}),icon:Ix,children:r.jsx(j,T({},vn.feedbackEmail))}),g&&r.jsx(J.Item,{onClick:()=>mt(m,Exe,{gizmo:e}),icon:xhe,children:r.jsx(j,T({},vn.reviewGPT))}),f&&r.jsx(J.Item,{onClick:s,icon:Tf,children:r.jsx(j,T({},vn.reportGPT))}),v&&r.jsx(J.Item,{onClick:()=>tn.openSharingModal(b),icon:Xc,children:r.jsx(j,T({},vn.shareChat))}),_&&r.jsxs(r.Fragment,{children:[r.jsx(J.Separator,{}),r.jsx(J.Item,{color:"danger",onClick:()=>{mt(m,vxe,{gpt:e,account:C,isOpen:!0})},icon:Rn,children:r.jsx(j,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),(c==null?void 0:c.includes("debug"))&&r.jsxs(r.Fragment,{children:[r.jsx(J.Separator,{}),r.jsx(J.Item,{onClick:()=>{S(VQ(e))},children:"(Internal) See share page"})]})]})}const Axe=({conversation:t,isActiveConversation:e,inMainScreen:s=!1,inChatWindow:n=!1,inOrla:o=!1,shouldShowAdultSearchToggle:a=!1})=>{var te,Q,ie;const i=G(),l=qp(i),c=oe(()=>yr(i)),u=fs(),d=t.id,f=t.gizmo_id,m=oe(()=>f?VC(i,f).gizmo$():null),p=Hc(i,f),g=Ee(i,"3376455464"),h=Ee(i,"16480203"),_=oo(),b=Ee(i,"2560369700"),y=Rt(d),v=Gk(kn.WorkspaceShareLinks),S=!ut(),C=zQ(i),w="owner"in t?(te=t.owner)==null?void 0:te.user_id:null,k=w==null||w===(u==null?void 0:u.normalizedAccountUserId),[E,M,N,A]=Qe(d,_e=>[_e==null?void 0:_e.isStarred,_e==null?void 0:_e.continuingFromSharedProjectConversationId,_he(_e==null?void 0:_e.mode,f!=null?f:void 0),wD(_e)]),{shouldShowProjectsChatShareModal:I,openProjectsChatShareModal:P}=m_e({clientThreadId:d}),R=v&&(y!=null?y:M)&&!S&&(!p||h)&&!0,O=!!m&&wd(m),L=age(i),D=O&&L&&!0,H=f==null&&M==null,V=l.hasAccess&&!S&&v&&y!=null&&!_&&k&&(H||D)&&!A,[q,W]=x.useState(!!t.is_do_not_remember),$=E!=null?E:!!t.is_starred,Z=ne(),K=m&&p?wd(m):!1;let Y=null;const{snorlaxes:ae}=DC();Y=ae;let se=null;p&&Y&&(se=(Q=Y.find(({gizmo:_e})=>_e.gizmo.id===f))==null?void 0:Q.gizmo);const ee=OD(),{mutate:re}=C_e(),he=Gt(),{eligible:fe}=Ct(We.ArchiveConversationOnboarding),pe=Kt(),le=yt(),{isAdultSearchEnabled:ve,handleToggleSetting:Te}=QR({conversationMode:N}),xe=async()=>{await de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:t.id}},requestBody:{is_archived:!0}}),Ea(he,t.gizmo_id),pt.logEvent("chatgpt_conversation_archived"),B.logEvent("Conversation Archived");const _e=bc(i)&&bs();fe&&!_e&&(pe.info(Z.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),_t(i,We.ArchiveConversationOnboarding)),e&&Pl(le)},ce=()=>{const _e=!$;re({conversation:t,isStarred:_e}),B.logEvent(_e?"Conversation Pinned":"Conversation Unpinned")},we=Z_(),ge=[R&&r.jsx(J.Item,{className:z(n&&!c&&"sm:hidden"),onClick:()=>I?P():tn.openSharingModal(y,"History Item Menu"),icon:Xc,"data-testid":"share-chat-menu-item",children:r.jsx(j,T({},vn.shareChat))},"share"),V&&r.jsx(J.Item,{className:z(n&&"sm:hidden"),onClick:()=>{if(!y||U1==null)return;mt(i,U1,D&&f?{type:"from-shared-project",serverThreadId:y,projectId:f,source:"sidebar"}:{type:"from-conversation",serverThreadId:y,source:"sidebar"})},icon:Uh,children:r.jsx(j,{id:"2lQyjA",defaultMessage:"Start a group chat"})},"start-group-chat"),!n&&!o&&k&&r.jsx(J.Item,{disabled:!y,onClick:()=>{setTimeout(()=>{y&&HF.publish({kind:s?"editTitleInMainScreen":"editTitle",serverThreadId:y})},100)},icon:Qc,children:r.jsx(j,T({},vn.renameChat))},"rename"),C&&!_&&k&&Y&&(Y==null?void 0:Y.length)>0&&Wv(f,$)&&y&&!0&&r.jsxs(gn.Fragment,{children:[p&&r.jsxs(r.Fragment,{children:[Y.length>1&&r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{icon:Xm,children:r.jsx(j,T({},cs.moveConversationToProject))}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{children:r.jsx(j2,{inSidebarFlyout:!1,onUpdateConversationGizmo:_e=>ee({newGizmoId:_e,conversation:t,previousGizmoId:f!=null?f:null}),currentGizmoId:f})})})]}),r.jsx(J.Item,{onClick:()=>{ee({newGizmoId:null,conversation:t,previousGizmoId:f!=null?f:null})},icon:vhe,children:r.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:r.jsx(j,U(T({},cs.removeConversationFromProject),{values:{projectName:(ie=se==null?void 0:se.gizmo.display.name)!=null?ie:"project"}}))})})]}),!p&&!0&&r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{icon:Xm,children:Z.formatMessage(cs.moveConversationToProject)}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{children:r.jsx(j2,{inSidebarFlyout:!1,onUpdateConversationGizmo:_e=>ee({newGizmoId:_e,conversation:t,previousGizmoId:f!=null?f:null})})})})]})]},"snorlax")].filter(Boolean),{automationId:Ae,sourceMessageId:Ue}=x.useContext(ng),Ie=Ee(i,"3018147683"),Me={topItems:ge.length>0,odysseyItem:!!Ae||!Ae&&!!Ue,pinItem:!f&&!_&&b,reportItem:g&&(n||K),archiveItem:k&&!_,dnrItem:!1,deleteItem:k,toggleAdultSearchItem:a};return Object.values(Me).some(Boolean)?r.jsxs(r.Fragment,{children:[Me.topItems&&r.jsxs(r.Fragment,{children:[ge,r.jsx(J.Separator,{className:"first:hidden last:hidden"})]}),a&&r.jsx(J.Item,{onClick:()=>Te(!ve),icon:zk,children:ve?r.jsx(j,T({},vn.hideMatureContent)):r.jsx(j,T({},vn.showMatureContent))},"adult-search-toggle"),Me.odysseyItem&&r.jsx(rT,{children:({openScheduleModal:_e,isScheduled:ye,isSchedulable:Re})=>(Re||ye)&&r.jsx(J.Item,{onClick:_e,disabled:!y,icon:Ec,children:r.jsx(j,T({},ye?vn.editSchedule:vn.scheduleTask))})}),Me.pinItem&&r.jsx(J.Item,{disabled:!y,onClick:ce,icon:$?She:bhe,children:r.jsx(j,T({},$?vn.unpinChat:vn.pinChat))}),Me.archiveItem&&r.jsx(J.Item,{disabled:!y,onClick:()=>{y&&xe()},icon:RD,children:r.jsx(j,T({},vn.archiveChat))}),!1,Me.reportItem&&r.jsx(J.Item,{icon:Tf,onClick:()=>mt(i,Mxe,U(T({clientThreadId:d,isSharedConversation:we},K&&{projectId:f,conversationOwnerId:w}),{isStaticSharedThread:!1})),children:f?r.jsx(j,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):r.jsx(j,{id:"thread.report",defaultMessage:"Report"})}),Me.deleteItem&&r.jsx(J.Item,{color:"danger",disabled:!y,onClick:()=>{y&&mt(i,Cxe,{conversationTitle:t.title,serverThreadId:y,isActiveConversation:e,gizmoId:f})},icon:Rl,"data-testid":"delete-chat-menu-item",children:r.jsx(j,T({},vn.deleteChat))}),Ie&&r.jsx(_xe,{conversationId:t.id,isActiveConversation:e})]}):null};function Ixe({clientThreadId:t,gizmoId:e,conversationTitle:s,conversationAsyncStatus:n,isDoNotRemember:o,isStarred:a,owner:i=null}){return{id:t,title:s!=null?s:"",create_time:null,update_time:null,owner:i,conversation_template_id:null,async_status:n!=null?n:null,gizmo_id:e!=null?e:null,snippet:null,is_do_not_remember:o,is_starred:a}}const jxe=u=>{var d=u,{conversation:t,children:e,isActiveConversation:s,onOpenChange:n,inMainScreen:o=!1,inChatWindow:a=!1,inOrla:i=!1,shouldShowAdultSearchToggle:l=!1}=d,c=De(d,["conversation","children","isActiveConversation","onOpenChange","inMainScreen","inChatWindow","inOrla","shouldShowAdultSearchToggle"]);const[f,m]=x.useState(!1),p=Axe({conversation:t,inMainScreen:o,isActiveConversation:s,inChatWindow:a,inOrla:i,shouldShowAdultSearchToggle:l});return r.jsx(ia,U(T({},c),{open:f,onOpenChange:g=>{m(g),n==null||n(g)},side:"bottom",contentAlign:a?"end":"start",alignOffset:a?0:-8,sideOffset:a?0:-4,triggerButton:p?e:void 0,size:"auto",children:f&&r.jsx(r.Fragment,{children:p})}))},vn=Ne({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"},pinChat:{defaultMessage:"Pin chat",id:"GizmoInformation.pinChat"},unpinChat:{defaultMessage:"Unpin chat",id:"GizmoInformation.unpinChat"},showMatureContent:{defaultMessage:"Show mature content",id:"GizmoInformation.showMatureContent"},hideMatureContent:{defaultMessage:"Hide mature content",id:"GizmoInformation.hideMatureContent"}}),Pxe=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:jxe,GizmoInformationDropdown:Nxe,GizmoInformationDropdownItems:eB,buildConversationResponse:Ixe},Symbol.toStringTag,{value:"Module"})),Rxe=ue(Ce,"306b75",20,20);function rst(t){"use no forget";const e=ne(),s=e.formatMessage({id:"ljSkwg",defaultMessage:"Personalize"}),n=e.formatMessage({id:"XF6dTC",defaultMessage:"Personalize ChatGPT"}),o=jt();return r.jsx(It,{triggerAs:null,label:n,children:r.jsx(ke,{onClick:()=>{wa(o,"chatgpt_personalization_settings_button_clicked",void 0,{variant:t.variant}),dl("#settings/Personalization")},icon:Rxe,label:s,"data-testid":"open-personalization-settings-button",color:"ghost",className:z("max-sm:hidden",t.variant==="default"?"text-token-text-primary rounded-lg whitespace-nowrap":"text-token-text-primary whitespace-nowrap"),style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:t.variant==="default"?s:null})})}const Oxe=ue(Ce,"6eabdf",20,20);function ist({clientThreadId:t,variant:e="default"}){const s=G(),n=Qe(t,Se.getIsNewConversation),o=oe(()=>pp(s)),a=yt(),[,i]=Yn(),l=()=>{B.logEvent("Temporary Chat Move: Temporary Chat Button Clicked"),n?i(f=>(f.has(Pg)?f.delete(Pg):f.set(Pg,"true"),f),{replace:!0}):Pl(a,{params:o?void 0:new URLSearchParams({[Pg]:"true"})})},c=ne(),u=o?c.formatMessage({id:"0emak7",defaultMessage:"Turn off temporary chat"}):c.formatMessage({id:"x2lslS",defaultMessage:"Turn on temporary chat"}),d=o?Oxe:Bd;return r.jsx(It,{label:u,children:e==="default"?r.jsx(Wp,{className:"rounded-full!","aria-label":u,onClick:l,icon:d}):r.jsx(ke,{className:"text-token-text-secondary rounded-lg",color:"ghost",icon:d,onClick:l,label:u})})}function Lxe(t,e,{location:s}){if(B.logNewChatButtonClicked({location:s}),"button"in e&&(e.metaKey||e.ctrlKey)){B.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab");return}pt.logEvent("chatgpt_web_thread_tap_new_thread"),ut()?$ue():ft.getItem(Be.HasSeenNewChatModal)!==!0&&(ft.setItem(Be.HasSeenNewChatModal,!0),tn.openModal(Lm.NoAuthNewChat),e.preventDefault())}function tB(t){return r.jsx(Wp,U(T({},t),{icon:ra}))}function sB(){const{data:t}=Ic();return ut()&&!!t&&!UC(t)}const Wf={enableProfileUpgradePill:!1,enableUpgradeMenuSparkleIcon:!1,enableTinybarUpgradeBtn:!1,enableThreadHeaderUpgradePill:!0};function Dxe(){const t=G();if(!sB())return Wf;const s=Xe(t,"772164167");return{enableProfileUpgradePill:s.get("enable_profile_upgrade_pill",Wf.enableProfileUpgradePill),enableUpgradeMenuSparkleIcon:s.get("enable_upgrade_menu_sparkle_icon",Wf.enableUpgradeMenuSparkleIcon),enableTinybarUpgradeBtn:s.get("enable_tinybar_upgrade_btn",Wf.enableTinybarUpgradeBtn),enableThreadHeaderUpgradePill:s.get("enable_thread_header_upgrade_pill",Wf.enableThreadHeaderUpgradePill)}}function lst(t){"use forget";var g,h;const e=F.c(14),{currentAccount:s}=t,n=G(),o=s==null?void 0:s.normalizedAccountUserId,a=Bk(o!=null?o:"");if(!o)return null;const i=(h=(g=a==null?void 0:a.name)!=null?g:s==null?void 0:s.name)!=null?h:"",l=(a==null?void 0:a.username)!=null&&a.username.length>0?"@".concat(a.username):void 0;let c;e[0]!==a?(c=a!=null?{name:a.name,picture:a.avatarUrl}:void 0,e[0]=a,e[1]=c):c=e[1];const u=c;let d;e[2]!==u?(d=r.jsx(zC,{size:"small",user:u}),e[2]=u,e[3]=d):d=e[3];let f;e[4]!==o||e[5]!==n?(f=()=>{mt(n,Xpe,{accountUserId:o})},e[4]=o,e[5]=n,e[6]=f):f=e[6];let m;e[7]!==i?(m=i||r.jsx(j,{id:"TNVQQS",defaultMessage:"Edit profile"}),e[7]=i,e[8]=m):m=e[8];let p;return e[9]!==d||e[10]!==f||e[11]!==m||e[12]!==l?(p=r.jsx(J.Item,{"data-testid":"calpico-edit-profile-menu-item",icon:d,secondary:l,onSelect:f,children:m}),e[9]=d,e[10]=f,e[11]=m,e[12]=l,e[13]=p):p=e[13],p}const cst=ue(Ce,"b834c9",20,20),ust=ue(Ce,"d13764",20,20),Fxe=ue(Ce,"9efea5",20,20),dst=ue(Ce,"ab0e8b",20,20),fst=ue(Ce,"54bf3e",20,20),og=ue(Ce,"6be74c",20,20),nB=ue(Ce,"975ff3",20,20),mst=ue(Ce,"ac4202",20,20),Bxe=ue(Ce,"5fc1e3",20,20),Uxe=x.createContext("none"),$xe=()=>x.useContext(Uxe),pst=()=>{"use forget";const t=F.c(5),e=$xe();let s;t[0]!==e?(s=()=>{B.logEvent("Hazelnuts: Profile dropdown clicked",{location:e})},t[0]=e,t[1]=s):s=t[1];let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(j,{id:"workspacePopoverNavigation.hazelnutsMenuItem",defaultMessage:"Skills"}),t[2]=n):n=t[2];let o;return t[3]!==s?(o=r.jsx(J.LinkItem,{to:"/skills",icon:Bxe,onClick:s,children:n}),t[3]=s,t[4]=o):o=t[4],o};function YN(t,e){const s=t.indexOf(e);return s===-1?Number.POSITIVE_INFINITY:s}const mT=t=>{"use forget";const e=F.c(14),{binding:s,className:n}=t,o=ne();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=WQ(),e[0]=a):a=e[0];const i=a;let l,c;if(e[1]!==s||e[2]!==n||e[3]!==o){let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=(p,g)=>{const h=i?Wxe:qxe,_=YN(h,p),b=YN(h,g);return _-b},e[6]=d):d=e[6];const f=[...s].sort(d);e[7]!==n?(l=z("inline-flex whitespace-pre *:inline-flex *:font-sans",!i&&"*:not-last:after:px-0.5 *:not-last:after:content-['+']",n),e[7]=n,e[8]=l):l=e[8];let m;e[9]!==o?(m=p=>{var _,b,y;const g=(b=(_=i?Vxe[p]:null)!=null?_:zxe[p])!=null?b:p.toLocaleUpperCase(),h=(y=i?Hxe[p]:null)!=null?y:Gxe[p];return r.jsx("kbd",{"aria-label":h&&o.formatMessage(h),children:r.jsx("span",{className:"min-w-[1em]",children:g})},p)},e[9]=o,e[10]=m):m=e[10],c=f.map(m),e[1]=s,e[2]=n,e[3]=o,e[4]=l,e[5]=c}else l=e[4],c=e[5];let u;return e[11]!==l||e[12]!==c?(u=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=u):u=e[13],u},ga=Ne({commandKey:{id:"keyboard.key.command",defaultMessage:"Command"},optionKey:{id:"keyboard.key.option",defaultMessage:"Option"},shiftKey:{id:"keyboard.key.shift",defaultMessage:"Shift"},controlKey:{id:"keyboard.key.control",defaultMessage:"Control"},altKey:{id:"keyboard.key.alt",defaultMessage:"Alt"},winKey:{id:"keyboard.key.win",defaultMessage:"Windows"},escapeKey:{id:"keyboard.key.esc",defaultMessage:"Escape"},deleteKey:{id:"keyboard.key.delete",defaultMessage:"Delete"},backspaceKey:{id:"keyboard.key.bksp",defaultMessage:"Backspace"}}),Hxe={[et.Mod]:ga.commandKey,[et.Meta]:ga.commandKey,[et.Alt]:ga.optionKey,[et.Backspace]:ga.deleteKey},Gxe={[et.Mod]:ga.controlKey,[et.Meta]:ga.winKey,[et.Alt]:ga.altKey,[et.Shift]:ga.shiftKey,[et.Control]:ga.controlKey,[et.Escape]:ga.escapeKey,[et.Backspace]:ga.backspaceKey},Vxe={[et.Mod]:"",[et.Meta]:"",[et.Alt]:"",[et.Shift]:"",[et.Control]:"",[et.Escape]:""},zxe={[et.Mod]:"Ctrl",[et.Meta]:"Win",[et.Alt]:"Alt",[et.Shift]:"Shift",[et.Control]:"Ctrl",[et.Comma]:",",[et.Enter]:"",[et.Escape]:"Esc",[et.ArrowUp]:"",[et.ArrowDown]:"",[et.ArrowLeft]:"",[et.ArrowRight]:"",[et.Backspace]:"",[et.Delete]:"",[et.Tab]:""},Wxe=[et.Control,et.Alt,et.Shift,et.Meta,et.Mod],qxe=[et.Meta,et.Mod,et.Control,et.Alt,et.Shift],Yx=Le(!1),gst=()=>{"use forget";const t=F.c(14),e=G();let s;t[0]!==e?(s=K_(e),t[0]=e,t[1]=s):s=t[1];const{actions$:n,addAction:o}=s,a=oe(Yx),i=oe(n);let l;t[2]!==i?(l=Yxe(i),t[2]=i,t[3]=l):l=t[3];const c=l;let u,d;if(t[4]!==o?(u=()=>o({key:"toggleKeyboardActions",action:Xxe,actionMessageDescriptor:Je({id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}),group:Js.Settings,keyboardBinding:[et.Mod,"/"]}),d=[o],t[4]=o,t[5]=u,t[6]=d):(u=t[5],d=t[6]),x.useEffect(u,d),c.length===0)return null;let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(mn.Overlay,{}),t[7]=f):f=t[7];let m;t[8]!==c||t[9]!==a?(m=r.jsxs(Rc,{children:[f,r.jsx(Zd,{asChild:!0,children:r.jsx(Qxe,{groups:c,showAsModal:a,onClose:t0e})})]}),t[8]=c,t[9]=a,t[10]=m):m=t[10];let p;return t[11]!==a||t[12]!==m?(p=r.jsx(Pc,{open:a,onOpenChange:e0e,modal:a,children:m}),t[11]=a,t[12]=m,t[13]=p):p=t[13],p};function Kxe(t){return t.toReversed?t.toReversed():t.slice().reverse()}function Yxe(t){const e=Object.entries($c(qQ(y6(t,s=>s.key),s=>Kxe(s.keyboardBinding).join("")),s=>s.group));return e.sort(([s],[n])=>Object.keys(Js).indexOf(s)-Object.keys(Js).indexOf(n)),e}const Qxe=t=>{"use forget";const e=F.c(16),{groups:s,showAsModal:n,onClose:o}=t,a=!n&&"transition-opacity starting:opacity-0";let i;e[0]!==a?(i=z("shadow-long fixed start-3 bottom-3 min-w-(--sidebar-width) px-1.5 text-sm",a),e[0]=a,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h2",{className:"text-sm",children:r.jsx(j,{id:"hotkeyModal.title",defaultMessage:"Keyboard shortcuts"})}),e[2]=l):l=e[2];let c;e[3]!==o||e[4]!==n?(c=n&&r.jsx(Xd,{asChild:!0,children:r.jsx(Es,{onClick:o})}),e[3]=o,e[4]=n,e[5]=c):c=e[5];let u;e[6]!==c?(u=r.jsxs("div",{className:"ms-2.5 mb-3 flex h-9 items-center justify-between font-semibold",children:[l,c]}),e[6]=c,e[7]=u):u=e[7];let d;e[8]!==s?(d=s.map(n0e),e[8]=s,e[9]=d):d=e[9];let f;e[10]!==d?(f=r.jsx("dl",{className:"grid [grid-template-columns:minmax(0,1fr)_max-content] gap-x-6 gap-y-3 px-2.5 pb-2",children:d}),e[10]=d,e[11]=f):f=e[11];let m;return e[12]!==i||e[13]!==u||e[14]!==f?(m=r.jsxs(pR,{className:i,children:[u,f]}),e[12]=i,e[13]=u,e[14]=f,e[15]=m):m=e[15],m};function Jxe(t){switch(t){case Js.Core:return null;case Js.Chat:return r.jsx(j,{id:"keyboardActionGroup.label.Chat",defaultMessage:"Chat"});case Js.Settings:return r.jsx(j,{id:"keyboardActionGroup.label.Settings",defaultMessage:"Settings"});case Js.Internal:return"Internal"}}function Zxe(t){return!t}function Xxe(){Yx.set(Zxe)}function e0e(t){t||Yx.set(!1)}function t0e(){return Yx.set(!1)}function s0e(t){return r.jsxs(x.Fragment,{children:[r.jsx("dt",{children:typeof t.actionMessageDescriptor=="string"?t.actionMessageDescriptor:r.jsx(j,T({},t.actionMessageDescriptor))}),r.jsx("dd",{className:"text-token-text-secondary justify-self-end",children:r.jsx(mT,{binding:t.keyboardBinding})})]},t.key)}function n0e(t){const[e,s]=t;return r.jsxs(x.Fragment,{children:[r.jsx("dt",{className:"text-token-text-tertiary col-span-2 mt-2 empty:hidden",children:Jxe(e)}),s.map(s0e)]},e)}function hst(t){var n;const{data:e,isLoading:s}=Vse(t);return{count:(n=e==null?void 0:e.total)!=null?n:0,isLoading:s}}const hl=ue(Ce,"fa1dbd",20,20),o0e=ue(Ce,"0f510f",20,20);var G5;Mt.ol(G5||(G5=St(["ms-5 list-decimal"])));var V5;const a0e=Mt.ul(V5||(V5=St(["ms-3 list-disc"])));var z5;const r0e=Mt.li(z5||(z5=St(["marker:text-token-text-tertiary text-token-text-primary mb-2"])));var tb,QN;function i0e(){if(QN)return tb;QN=1;function t(e,s,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),s!==void 0&&(e=e>=s?e:s)),e}return tb=t,tb}var sb,JN;function l0e(){if(JN)return sb;JN=1;var t=i0e(),e=KQ();function s(n,o,a){return a===void 0&&(a=o,o=void 0),a!==void 0&&(a=e(a),a=a===a?a:0),o!==void 0&&(o=e(o),o=o===o?o:0),t(e(n),o,a)}return sb=s,sb}var c0e=l0e();const pT=en(c0e);var q1=(t=>(t.Month="month",t.Year="year",t.Once="once",t))(q1||{}),u0e=(t=>(t.Inclusive="inclusive",t.Exclusive="exclusive",t))(u0e||{});function _st(t,e,s,n,o){return{product:t,currency:e,recurringInterval:s,amount:Number(n),amountTaxBehavior:o}}const d0e="/checkout_pricing_config/countries",f0e="/checkout_pricing_config/configs/{country_code}",m0e="go",p0e="plus",xst="pro",ZN="business",oB=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","ID","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IN","PK","TH","MY","VN","PH","NG","ZA","KZ","TZ","EG","BR"];function g0e(t){return oB.includes(t)}const aB={AT:20,BE:21,BG:20,HR:25,CY:19,CZ:21,DK:25,EE:24,FI:25.5,FR:20,DE:19,GR:24,HU:27,IS:24,ID:11,IE:23,IT:22,LV:21,LI:8.1,LT:21,LU:17,MT:18,NL:21,NO:25,PL:23,PT:23,RO:21,SK:23,SI:22,ES:21,SE:25,CH:8.1,GB:20,IN:18,PK:0,TH:7,MY:8,VN:10,PH:12,NG:8,ZA:15,KZ:12,TZ:18,EG:14,BR:0};function h0e({amount:t,roundToPrecision:e=2}){const s=Math.pow(10,e);return Math.round(t*s)/s}function _0e({amount:t,taxPercent:e,inclusive:s,roundToPrecision:n=2}){const o=e*t/((s?e:0)+100),a=Math.pow(10,n);return Math.round(o*a)/a}function yst(t,e){return e==null?(Ge.addError(new Error("nullish_country_for_vat_calculation"),{country:e}),0):g0e(e)?_0e({amount:t,taxPercent:aB[e],inclusive:!0}):(Ge.addError(new Error("unrecognized_country_for_vat_calculation"),{country:e}),0)}function bst(t,e){let s=null,n=null;return t===e.countryCode?(s=e.currencyConfig.tax_percent,n=e.currencyConfig.tax_type):oB.includes(t)&&(s=aB[t],n=t===qse?"gst":"vat"),s==null||n==null?null:{taxCountry:t,taxRatePercent:s,taxName:n,reverseChargeEligible:!0}}const vst={at_vat:{type:"at_vat",country:"AT",region:"EEA-GB-CH",country_label:"Austria",format:"ATU[0-9]{8}",placeholder:"ATU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},be_vat:{type:"be_vat",country:"BE",region:"EEA-GB-CH",country_label:"Belgium",format:"BE(0|1)[0-9]{9}",placeholder:"BE0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},bg_vat:{type:"bg_vat",country:"BG",region:"EEA-GB-CH",country_label:"Bulgaria",format:"BG[0-9]{9,10}",placeholder:"BG0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},br_cnpj:{type:"br_cnpj",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})[\\/\\\\]?([0-9]{4})\\-?([0-9]{2})",placeholder:"01.234.456/5432-10",stripe_type:"br_cnpj",verifiable:!1,replacement_string:"\\1.\\2.\\3/\\4-\\5",description:"Brazilian CNPJ number",reverse_charge:!1,supported:!0},br_cpf:{type:"br_cpf",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{3})\\.?([0-9]{3})\\.?([0-9]{3})\\-?([0-9]{2})",placeholder:"123.456.789-87",stripe_type:"br_cpf",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Brazilian CPF number",reverse_charge:!1,supported:!0},cy_vat:{type:"cy_vat",country:"CY",region:"EEA-GB-CH",country_label:"Cyprus",format:"CY[0-9]{8}[A-Z]",placeholder:"CY12345678Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},cz_vat:{type:"cz_vat",country:"CZ",region:"EEA-GB-CH",country_label:"Czech Republic",format:"CZ[0-9]{8,10}",placeholder:"CZ1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},de_vat:{type:"de_vat",country:"DE",region:"EEA-GB-CH",country_label:"Germany",format:"DE[0-9]{9}",placeholder:"DE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},dk_vat:{type:"dk_vat",country:"DK",region:"EEA-GB-CH",country_label:"Denmark",format:"DK[0-9]{8}",placeholder:"DK12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ee_vat:{type:"ee_vat",country:"EE",region:"EEA-GB-CH",country_label:"Estonia",format:"EE[0-9]{9}",placeholder:"EE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},es_vat:{type:"es_vat",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"ES([A-Z][0-9]{8}|[0-9]{8}[A-Z]|[A-Z][0-9]{7}[A-Z])",placeholder:"ESA1234567Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fi_vat:{type:"fi_vat",country:"FI",region:"EEA-GB-CH",country_label:"Finland",format:"FI[0-9]{8}",placeholder:"FI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fr_vat:{type:"fr_vat",country:"FR",region:"EEA-GB-CH",country_label:"France",format:"FR[A-Z0-9]{2}[0-9]{9}",placeholder:"FRAB123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},gr_vat:{type:"gr_vat",country:"GR",region:"EEA-GB-CH",country_label:"Greece",format:"EL[0-9]{9}",placeholder:"EL123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hr_vat:{type:"hr_vat",country:"HR",region:"EEA-GB-CH",country_label:"Croatia",format:"HR[0-9]{11}",placeholder:"HR12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hu_vat:{type:"hu_vat",country:"HU",region:"EEA-GB-CH",country_label:"Hungary",format:"(HU)?[0-9]{8}((-)?[0-9]{1}(-)?[0-9]{2})?",placeholder:"HU12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ie_vat:{type:"ie_vat",country:"IE",region:"EEA-GB-CH",country_label:"Ireland",format:"IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])",placeholder:"IE1234567AB",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},it_vat:{type:"it_vat",country:"IT",region:"EEA-GB-CH",country_label:"Italy",format:"IT[0-9]{11}",placeholder:"IT12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lt_vat:{type:"lt_vat",country:"LT",region:"EEA-GB-CH",country_label:"Lithuania",format:"LT([0-9]{9}|[0-9]{12})",placeholder:"LT123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lu_vat:{type:"lu_vat",country:"LU",region:"EEA-GB-CH",country_label:"Luxembourg",format:"LU[0-9]{8}",placeholder:"LU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lv_vat:{type:"lv_vat",country:"LV",region:"EEA-GB-CH",country_label:"Latvia",format:"LV[0-9]{11}",placeholder:"LV12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},mt_vat:{type:"mt_vat",country:"MT",region:"EEA-GB-CH",country_label:"Malta",format:"MT[0-9]{8}",placeholder:"MT12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},nl_vat:{type:"nl_vat",country:"NL",region:"EEA-GB-CH",country_label:"Netherlands",format:"NL[0-9]{9}B[0-9]{2}",placeholder:"NL123456789B12",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pl_vat:{type:"pl_vat",country:"PL",region:"EEA-GB-CH",country_label:"Poland",format:"PL[0-9]{10}",placeholder:"PL1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pt_vat:{type:"pt_vat",country:"PT",region:"EEA-GB-CH",country_label:"Portugal",format:"PT[0-9]{9}",placeholder:"PT123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ro_vat:{type:"ro_vat",country:"RO",region:"EEA-GB-CH",country_label:"Romania",format:"RO[0-9]{2,10}",placeholder:"RO1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},se_vat:{type:"se_vat",country:"SE",region:"EEA-GB-CH",country_label:"Sweden",format:"SE[0-9]{12}",placeholder:"SE123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},si_vat:{type:"si_vat",country:"SI",region:"EEA-GB-CH",country_label:"Slovenia",format:"SI[0-9]{8}",placeholder:"SI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},sk_vat:{type:"sk_vat",country:"SK",region:"EEA-GB-CH",country_label:"Slovakia",format:"SK[0-9]{10}",placeholder:"SK1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},xi_vat:{type:"xi_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"(XI)([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"XI123456789",stripe_type:"eu_vat",verifiable:!0,description:"Northern Ireland VAT number",reverse_charge:!0,supported:!0},gb_vat:{type:"gb_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"GB([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"GB123456789",stripe_type:"gb_vat",verifiable:!0,description:"United Kingdom VAT number",reverse_charge:!0,supported:!0},nz_gst:{type:"nz_gst",country:"NZ",region:"NZ",country_label:"New Zealand",format:"[0-9]{8,9}",placeholder:"123456789",stripe_type:"nz_gst",description:"New Zealand GST number",reverse_charge:!0,supported:!0,verifiable:!1},au_abn:{type:"au_abn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{11}",placeholder:"12345678912",stripe_type:"au_abn",verifiable:!0,description:"Australian Business Number (AU ABN)",reverse_charge:!0,supported:!0},au_arn:{type:"au_arn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{12}",placeholder:"123456789123",stripe_type:"au_arn",verifiable:!1,description:"Australian Taxation Office Reference Number",reverse_charge:!0,supported:!0},in_gst:{type:"in_gst",country:"IN",region:"IN",country_label:"India",format:"[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][1-9A-Z]Z[0-9A-Z]",placeholder:"12ABCDE3456FGZH",stripe_type:"in_gst",description:"Indian GST number",reverse_charge:!0,supported:!0,verifiable:!1},no_vat:{type:"no_vat",country:"NO",region:"EEA-GB-CH",country_label:"Norway",format:"[0-9]{9}MVA",placeholder:"123456789MVA",stripe_type:"no_vat",verifiable:!1,description:"Norwegian VAT number",reverse_charge:!0,supported:!0},za_vat:{type:"za_vat",country:"ZA",region:"ZA",country_label:"South Africa",format:"4[0-9]{9}",placeholder:"4123456789",stripe_type:"za_vat",verifiable:!1,description:"South African VAT number",reverse_charge:!1,supported:!0},ch_vat:{type:"ch_vat",country:"CH",region:"EEA-GB-CH",country_label:"Switzerland",placeholder:"CHE-123.456.789 MWST",format:"([Cc][Hh][Ee])[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3}) ?([Mm][Ww][Ss][Tt]|[Tt][Vv][Aa]|[Ii][Vv][Aa])",stripe_type:"ch_vat",verifiable:!1,replacement_string:"\\1-\\2.\\3.\\4 \\5",description:"Switzerland VAT number",reverse_charge:!0,supported:!0},mx_rfc:{type:"mx_rfc",country:"MX",region:"MX",country_label:"Mexico",format:"([A-Za-z&]{3,4})-?([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])-?([A-Za-z0-9])-?([A-Za-z0-9][0-9A])",placeholder:"ABC010203AB9",stripe_type:"mx_rfc",verifiable:!1,replacement_string:"\\1\\2\\3\\4\\5\\6",description:"Mexican RFC number",reverse_charge:!0,supported:!0},sg_uen:{type:"sg_uen",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z])",placeholder:"123456789F",stripe_type:"sg_uen",verifiable:!1,description:"Singaporean UEN",reverse_charge:!0,supported:!0},ru_inn:{type:"ru_inn",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{10}",placeholder:"1234567891",stripe_type:"ru_inn",verifiable:!1,description:"Russian INN",reverse_charge:!0,supported:!1},ru_kpp:{type:"ru_kpp",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ru_kpp",verifiable:!1,description:"Russian KPP",reverse_charge:!0,supported:!1},ca_bn:{type:"ca_bn",country:"CA",region:"CA",country_label:"Canada",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ca_bn",verifiable:!1,description:"Canadian BN",reverse_charge:!1,supported:!0},hk_br:{type:"hk_br",country:"HK",region:"HK",country_label:"Hong Kong",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"hk_br",description:"Hong Kong BR number",reverse_charge:!1,supported:!1,verifiable:!1},es_cif:{type:"es_cif",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"[0-9A-Z][0-9]{7}[0-9A-Z]",placeholder:"A12345678",stripe_type:"es_cif",description:"Spanish CIF number",reverse_charge:!0,supported:!0,verifiable:!1},tw_vat:{type:"tw_vat",country:"TW",region:"TW",country_label:"Taiwan",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"tw_vat",description:"Taiwanese VAT",reverse_charge:!0,supported:!0,verifiable:!1},th_vat:{type:"th_vat",country:"TH",region:"TH",country_label:"Thailand",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"th_vat",description:"Thai VAT",reverse_charge:!0,supported:!0,verifiable:!1},jp_cn:{type:"jp_cn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"jp_cn",description:"Japanese Corporate Number",reverse_charge:!0,supported:!0,verifiable:!1},jp_rn:{type:"jp_rn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{5}",placeholder:"12345",stripe_type:"jp_rn",description:"Japanese Registered Foreign Businesses Number",reverse_charge:!0,supported:!0,verifiable:!1},li_uid:{type:"li_uid",country:"LI",region:"EEA-GB-CH",country_label:"Liechtenstein",format:"CHE[0-9]{9}",placeholder:"CHE123456789",stripe_type:"li_uid",description:"Liechtensteinian UID number",reverse_charge:!0,supported:!0,verifiable:!1},my_itn:{type:"my_itn",country:"MY",region:"MY",country_label:"Malaysia",format:"([A-Z]{1,2}) ?([0-9]{10})",placeholder:"C 1234567890",stripe_type:"my_itn",description:"Malaysian ITN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1 \\2"},us_ein:{type:"us_ein",country:"US",region:"US",country_label:"United States",format:"([0-9]{2})-?([0-9]{7})",placeholder:"12-3456789",stripe_type:"us_ein",verifiable:!1,replacement_string:"\\1-\\2",description:"United States EIN",reverse_charge:!1,supported:!1},kr_brn:{type:"kr_brn",country:"KR",region:"KR",country_label:"South Korea",format:"([0-9]{3})-?([0-9]{2})-?([0-9]{5})",placeholder:"123-45-67890",stripe_type:"kr_brn",description:"Korean BRN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1-\\2-\\3"},ca_qst:{type:"ca_qst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{10}TQ[0-9]{4}|[0-9]{9}[A-Z]{2}[0-9]{4}|[0-9]{9,10}|NR[0-9]{8})",placeholder:"1234567890TQ1234",stripe_type:"ca_qst",verifiable:!1,description:"Canadian QST number (Qubec)",reverse_charge:!1,supported:!0},ca_gst_hst:{type:"ca_gst_hst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{9}) ?RT ?([0-9]{4})",placeholder:"123456789RT0002",stripe_type:"ca_gst_hst",verifiable:!1,replacement_string:"\\1RT\\2",description:"Canadian GST/HST number",reverse_charge:!1,supported:!0},ca_pst_bc:{type:"ca_pst_bc",country:"CA",region:"CA",country_label:"Canada",format:"PST-?([0-9]{4})-?([0-9]{4})",placeholder:"PST-1234-5678",stripe_type:"ca_pst_bc",verifiable:!1,replacement_string:"PST-\\1-\\2",description:"Canadian PST number (British Columbia)",reverse_charge:!1,supported:!0},ca_pst_mb:{type:"ca_pst_mb",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{6})-?([0-9])",placeholder:"123456-7",stripe_type:"ca_pst_mb",verifiable:!1,replacement_string:"\\1-\\2",description:"Canadian PST number (Manitoba)",reverse_charge:!1,supported:!0},ca_pst_sk:{type:"ca_pst_sk",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{7})",placeholder:"1234567",stripe_type:"ca_pst_sk",verifiable:!1,description:"Canadian PST number (Saskatchewan)",reverse_charge:!1,supported:!0},my_sst:{type:"my_sst",country:"MY",region:"MY",country_label:"Malaysia",format:"(([A-Z][0-9]{2})-?([0-9]{4})-?([0-9]{8})|[0-9]{8})",placeholder:"A12-3456-78912345",stripe_type:"my_sst",description:"Malaysian SST number",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\2-\\3-\\4",only_replace_if_group_captured:2},sg_gst:{type:"sg_gst",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z]|M[0-9A-Z][0-9]{7}[0-9A-Z]|F[0-9]{8}[A-Z])",placeholder:"M12345678X",stripe_type:"sg_gst",description:"Singaporean GST",reverse_charge:!0,supported:!0,verifiable:!1},ae_trn:{type:"ae_trn",country:"AE",region:"AE",country_label:"United Arab Emirates",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"ae_trn",verifiable:!1,description:"United Arab Emirates TRN",reverse_charge:!0,supported:!0},cl_tin:{type:"cl_tin",country:"CL",region:"CL",country_label:"Chile",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})-?([K0-9])",placeholder:"12.345.678-K",stripe_type:"cl_tin",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Chilean TIN",reverse_charge:!0,supported:!1},sa_vat:{type:"sa_vat",country:"SA",region:"SA",country_label:"Saudi Arabia",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"sa_vat",description:"Saudi Arabia VAT",reverse_charge:!0,supported:!0,verifiable:!1},id_npwp:{type:"id_npwp",country:"ID",region:"ID",country_label:"Indonesia",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})\\.?([0-9])-?([0-9]{3})\\.?([0-9]{3})",placeholder:"12.345.678.9-012.345",verifiable:!1,stripe_type:"id_npwp",description:"Indonesian NPWP number",reverse_charge:!0,supported:!0,replacement_string:"\\1.\\2.\\3.\\4-\\5.\\6"},my_frp:{type:"my_frp",country:"MY",region:"MY",country_label:"Malaysia",format:"[0-9]{8}",placeholder:"12345678",verifiable:!1,stripe_type:"my_frp",description:"Malaysian FRP number",reverse_charge:!0,supported:!0},il_vat:{type:"il_vat",country:"IL",region:"IL",country_label:"Israel",format:"[0-9]{9}",placeholder:"000012345",verifiable:!1,stripe_type:"il_vat",description:"Israel VAT",reverse_charge:!0,supported:!0},ge_vat:{type:"ge_vat",country:"GE",region:"GE",country_label:"Georgia",format:"([0-9]{9}|[0-9]{11})",placeholder:"123456789",verifiable:!1,stripe_type:"ge_vat",description:"Georgian VAT",reverse_charge:!0,supported:!0},ua_vat:{type:"ua_vat",country:"UA",region:"UA",country_label:"Ukraine",format:"([0-9]{8,10}|[0-9]{12})",placeholder:"123456789",verifiable:!1,stripe_type:"ua_vat",description:"Ukrainian VAT",reverse_charge:!0,supported:!1},is_vat:{type:"is_vat",country:"IS",region:"EEA-GB-CH",country_label:"Iceland",format:"[0-9]{6}",placeholder:"123456",verifiable:!1,stripe_type:"is_vat",description:"Icelandic VAT",reverse_charge:!0,supported:!0},tr_tin:{country:"TR",region:"TR",format:"[0-9]{10,11}",placeholder:"0123456789",verifiable:!1,type:"tr_tin",stripe_type:"tr_tin",description:"Turkish Tax Identification Number",country_label:"Trkiye",reverse_charge:!0,supported:!0}};function O2(t){return t.trim().toUpperCase()}function x0e(t,e){return e||(e=Io()),Xe(e,"3768341700").get(t,!1)}async function y0e(){return(await(await de.safeGet(d0e,{skipJsonTransform:!0,authOption:is.SendIfAvailable})).json()).countries.map(O2)}async function Nu(t){const e=O2(t);if(!e){const o=new Error("Country code is required to fetch checkout pricing config");throw Ge.addError(o,{countryCode:t}),o}const s=await de.safeGet(f0e,{parameters:{path:{country_code:e}},skipJsonTransform:!0,authOption:is.SendIfAvailable});if(!s.ok){let o;try{const i=await s.json();typeof(i==null?void 0:i.detail)=="string"&&(o=i.detail)}catch(i){}const a=s.status===404&&o==="Country config not found"?"Checkout pricing config not found for this country":"Failed to fetch checkout pricing config";throw Ge.addError(new Error(a),{countryCode:e,status:s.status,detail:o}),new Error(a)}const n=await s.json();return{countryCode:O2(n.country_code),currencyConfig:n.currency_config}}async function b0e(t,e,s){const n=t!==void 0&&Zse(t)?"EU":o2;let o=null;const a=await y0e();if(e?(t&&a.includes(t)&&(o=await Nu(t),o.currencyConfig.symbol_code!==e&&(o=null)),o||(o=await Nu(e))):t&&(a.includes(t)?o=await Nu(t):o=await Nu(n)),!o)return Nu(n);const i=o.currencyConfig.pricing_rollout_gate;return!i||x0e(i,s)?o:Nu(n)}function L2(t,e,s){const n=t.currencyConfig[e];if(!n){const a=new Error("Plan is not available for given country's pricing");throw Ge.addError(a,{countryCode:t.countryCode,planType:e,interval:s}),a}const o=n[s];if(!o){const a=new Error("Price for interval is not available for given country's pricing");throw Ge.addError(a,{countryCode:t.countryCode,planType:e,interval:s}),a}return{amount:o.amount,taxBehavior:o.tax}}function rB({countryCode:t,currency:e,ctx:s,enabled:n=!0}){return dt({queryKey:["checkout-pricing-config",t!=null?t:null,e!=null?e:null],queryFn:()=>b0e(t,e,s),enabled:n})}function Sst(t){return t===tt.SELF_SERVE_BUSINESS?"business":t}function Cst(t,e,s){return{id:"pricingPlan.".concat(e,".costAmount"),defaultMessage:v0e(t),description:"Cost for ".concat(e," plan in ").concat(s)}}function v0e(t){const e=h0e({amount:t,roundToPrecision:2});return e%1===0?e.toFixed(0):e.toFixed(2)}var W5;const S0e=Mt.div(W5||(W5=St(["flex flex-col gap-3 text-token-text-secondary text-sm mt-3"])));var q5;const C0e=Mt.p(q5||(q5=St(["text-token-text-primary"])));var K5;const w0e=Mt(Cx)(K5||(K5=St(["relative flex cursor-pointer flex-col rounded-xl border-token-border-default p-5 text-start align-top transition-[border-color] duration-100 hover:border-token-border-heavy data-[state=unchecked]:m-[1px] data-[state=checked]:border-2 data-[state=unchecked]:border data-[state=checked]:border-black dark:data-[state=checked]:border-white md:min-h-[300px]"])));var Y5;const k0e=Mt(wx)(Y5||(Y5=St(["flex h-5 w-5 items-center justify-center rounded-full border-2 border-token-border-heavy bg-token-bg-primary outline-hidden data-[state=checked]:bg-black dark:data-[state=checked]:bg-white"])));var Q5;const XN=Mt.s(Q5||(Q5=St(["text-token-text-tertiary"]))),nb=999,T0e=2,E0e=5,wst="team-pricing-seat-selection",kst="team-pricing-seat-selection-direct",Tst="numSeats",Est="selectedPlan",Mst="promo_campaign",M0e=t=>T0e,Nst=t=>E0e;function Ast({billingType:t,name:e,billingFeatures:s,cost:n,currencySign:o,currencyCode:a,monthlyCost:i,discountedMonthlyCost:l,costStructure:c,selectedValue:u,hideDetails:d=!1,showWelcomeOfferLabel:f=!1,promoDisclaimer:m=null,hideSavingsMessage:p=!1}){const g=ne(),h=M0e(),_=Math.floor(100-l/i*100);return r.jsxs(w0e,{value:t,id:t,className:z(d&&"min-h-0!"),children:[f&&r.jsx("div",{className:"absolute start-3 top-0 -translate-y-1/2 rounded-xl bg-[#10A37F] px-2 py-1 text-xs font-medium text-white",children:r.jsx(j,T({},ps.welcomeOfferLabel))}),!p&&l<i&&r.jsx("div",{className:z("absolute start-3 top-0 -translate-y-1/2 px-2 py-1 text-xs font-medium",u===t?"bg-token-bg-primary text-[#10A37F]":"rounded-xl bg-[#10A37F] text-white"),children:r.jsx(j,U(T({},u===t?ps.discountSelectedLabel:ps.discountUnselectedLabel),{values:{discountedRate:_}}))}),r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsx("div",{className:z(d?"text-base":"text-xl","font-medium"),children:r.jsx(j,T({},e))}),r.jsx(k0e,{forceMount:!0,children:r.jsx(hl,{className:z("mt-0.25 h-[14px] w-[14px] stroke-3 text-white dark:text-black",u!==t&&"hidden")})})]}),r.jsxs(S0e,{children:[r.jsxs("div",{children:[r.jsx(C0e,{children:r.jsx(j,U(T({},n),{values:{monthlyCost:i,discountedMonthlyCost:l,currencyCode:g.formatMessage(a),currencySign:g.formatMessage(o),s:(...b)=>r.jsx(XN,{children:b})}}))}),r.jsx("p",{children:r.jsx(j,T({},c))})]}),!d&&r.jsx(a0e,{children:s.map(b=>r.jsx(r0e,{className:"text-token-text-secondary",children:r.jsx(j,U(T({},b),{values:{minSeats:h,monthlyCost:i,minimumMonthlyCost:l*2,currencyCode:g.formatMessage(a),currencySign:g.formatMessage(o),s:(...y)=>r.jsx(XN,{children:y})}}))},b.id))}),m&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:m})]})]})}var J5;const eA=Mt.button(J5||(J5=St(["h-12 w-12 rounded-lg flex items-center justify-center border border-token-border-default px-1.5 py-1.5 hover:bg-token-main-surface-secondary disabled:pointer-events-none disabled:text-token-text-tertiary"])));function Ist({numSeats:t,minSeats:e,setNumSeats:s,label:n,maxSeats:o,classNames:a}){const i=o!=null?o:nb,[l,c]=x.useState(!1),u=fs(),d=x.useMemo(()=>u==null?void 0:u.subscriptionAnalyticsParams,[u]),f=x.useCallback(v=>{B.logEvent("Account Pay: Team Plan Seat Count Clicked",T(T({},d),v))},[d]),m=x.useRef(null);x.useEffect(()=>{var v;(v=m.current)==null||v.focus()},[m]);const p=x.useRef(null),g=x.useRef(0),h=x.useCallback(v=>{s(S=>{const C=pT(S+v,e,i);return f({prevSeats:S,currentSeats:C}),C})},[i,e,s,f]),_=x.useCallback(v=>{const k=300-v*50;return k>25?k:25},[]),b=x.useCallback(v=>{h(v),g.current=0;const S=()=>{g.current+=1,h(v);const C=_(g.current);p.current=setTimeout(S,C)};p.current=setTimeout(S,_(g.current))},[h,_]),y=x.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);return x.useEffect(()=>{l||i===nb&&t>i&&c(!0)},[l,i,t]),r.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[r.jsx("label",{className:z(a==null?void 0:a.label,"mb-1 flex text-base font-medium"),htmlFor:"seats",children:n!=null?n:r.jsx(j,T({},ps.usersTitle))}),r.jsxs("div",{className:"relative flex items-center gap-3",children:[r.jsx("input",{ref:m,type:"number",min:e,max:i,name:"seats",value:t,onChange:v=>{const S=parseInt(v.target.value);s(S),f({prevSeats:t,currentSeats:S})},onBlur:()=>{let v=t;t<e&&(v=e),t>i&&(v=i),t||(v=e),v!==t&&(f({prevSeats:t,currentSeats:v}),s(v))},autoFocus:!0,tabIndex:0,className:z(a==null?void 0:a.input,"bg-token-bg-primary text-token-text-primary relative m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white")}),r.jsxs("div",{className:z(a==null?void 0:a.buttons,"flex gap-1.5"),children:[r.jsx(eA,{disabled:t<=e,onMouseDown:()=>b(-1),onMouseUp:y,onMouseLeave:y,className:a==null?void 0:a.button,type:"button",children:r.jsx(o0e,{className:z("icon-sm",t<=e&&"text-token-text-tertiary")})}),r.jsx(eA,{type:"button",disabled:t>=i,onMouseDown:()=>b(1),onMouseUp:y,onMouseLeave:y,className:a==null?void 0:a.button,children:r.jsx(og,{className:"icon-sm"})})]})]}),i===nb&&l&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:r.jsx(j,U(T({},ps.seatSelectorTooltipMaxLimit),{values:{maxSeats:i,link:v=>r.jsx(Ia,{to:Xse,target:"_blank",className:"underline",children:v})}}))})]})}const ps=Ne({flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"{currencyCode} {currencySign}{monthlyCost}"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost} <s>{currencySign}{monthlyCost}</s>"},nameWorkspace:{id:"nameWorkspace.title",defaultMessage:"Name your workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Business Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your Business plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},continueToPricePreview:{id:"teamBilling.continueToPricePreview",defaultMessage:"Continue"},changeEffectDate:{id:"teamBilling.changeEffectDate",defaultMessage:"This change will take effect at your next renewal on {date}"},confirmPageChangeEffectDate:{id:"teamBilling.confirmPageChangeEffectDate",defaultMessage:"Your billing schedule will change from {current_plan} to {new_plan} starting at your next renewal on {date}"},confirmChange:{id:"teamBilling.confirmChange",defaultMessage:"Confirm"},teamsCostStructure:{id:"teamBilling.teamsCostStructureNew",defaultMessage:"per user/month"},businessCostStructure:{id:"teamBilling.businessCostStructure",defaultMessage:"seat/mo"},businessAnnualPlanName:{id:"teamBilling.businessAnnualPlanName",defaultMessage:"Annual billing"},businessFlexiblePlanName:{id:"teamBilling.businessFlexiblePlanName",defaultMessage:"Monthly billing"},businessAnnualPlanCost:{id:"teamBilling.businessAnnualPlanCost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost}"},businessAnnualPlanSavingsAmount:{id:"teamBilling.businessAnnualPlanSavingsAmount.v2",defaultMessage:"Youre saving {savingsAmountMonthly}/month by choosing an annual plan. Thats {savingsAmountYearly}/year."},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},usersTitle:{id:"teamBilling.usersTitle",defaultMessage:"Users"},chatGptTeam:{id:"teamBilling.chatGptTeam",defaultMessage:"ChatGPT Business"},annualPlanName:{id:"teamBilling.annualPlan.nameNew",defaultMessage:"Annual"},annualPlanSavingsLabel:{id:"teamBilling.annualPlan.savingsLabel",defaultMessage:"({percent}% off)"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnuallyNew",defaultMessage:"Billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewalNew",defaultMessage:"Add and reassign users as needed"},annualMinBill:{id:"teamBilling.annualPlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},flexiblePlanName:{id:"teamBilling.flexiblePlan.nameNew",defaultMessage:"Monthly"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthlyNew",defaultMessage:"Billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsersNew",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},today:{id:"teamBilling.today",defaultMessage:"Today"},allPlansTotal:{id:"teamBilling.allPlansTotal",defaultMessage:"Plan Total"},allPlansTodayTotal:{id:"teamBilling.allPlansTodayTotal",defaultMessage:"Today's total"},flexiblePlanAmountBreakdown:{id:"teamBilling.flexiblePlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}}"},annualPlanAmountBreakdown:{id:"teamBilling.annualPlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}} x 12 months"},breakdownAmount:{id:"teamBilling.breakdownAmount",defaultMessage:"{currencySign}{amount}/seat"},allPlansPreDiscountTotal:{id:"teamBilling.allPlansPreDiscountTotal",defaultMessage:"{currencySign}{preDiscountTotalAmount}"},planDiscountLabel:{id:"teamBilling.planDiscountLabel",defaultMessage:"Discount"},annualPlanDiscountDescription:{id:"teamBilling.annualPlanDiscountDescription",defaultMessage:"Annual (-{discountPercentage}%)"},annualPlanDiscountAmount:{id:"teamBilling.annualPlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanDiscountAmount:{id:"teamBilling.flexiblePlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanBilledMonthly:{id:"teamBilling.flexiblePlanBilledMonthly",defaultMessage:"Billed monthly starting {billDate}"},annualPlanBilledAnnually:{id:"teamBilling.annualPlanBilledAnnually",defaultMessage:"Billed annually starting {billDate}"},allPlansTotalAmount:{id:"teamBilling.allPlansTotalAmount",defaultMessage:"{currencyCode} {currencySign}{totalAmount}"},discountSelectedLabel:{id:"teamBilling.discountSelectedLabel",defaultMessage:"You're saving {discountedRate}%"},discountUnselectedLabel:{id:"teamBilling.discountUnselectedLabel",defaultMessage:"Save {discountedRate}%"},welcomeOfferLabel:{id:"teamBilling.welcomeOfferLabel",defaultMessage:"Welcome Offer"},seatSelectorTooltipMaxLimit:{id:"teamBilling.seatSelectorTooltipMaxLimit",defaultMessage:"For more than {maxSeats} users, upgrade to our <link>Enterprise plan</link>."}});var N0e=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(N0e||{});function jst(t,e,s){const n=L2(e,ZN,q1.Month),o=L2(e,ZN,q1.Year),a=cf(t),i={type:"month",name:s?ps.businessFlexiblePlanName:ps.flexiblePlanName,cost:ps.flexiblePlanCost,monthlyCost:n.amount,discountedMonthlyCost:n.amount,unitCost:n.amount,currencySign:a.sign,currencyCode:a.code,costStructure:s?ps.businessCostStructure:ps.teamsCostStructure,billingFeatures:[ps.flexibleBilledMonthly,ps.flexibleMinBill,ps.flexibleAddRemoveUsers]},l={type:"year",name:s?ps.businessAnnualPlanName:ps.annualPlanName,cost:s?ps.businessAnnualPlanCost:ps.annualPlanCost,monthlyCost:n.amount,discountedMonthlyCost:o.amount,unitCost:o.amount*12,currencySign:a.sign,currencyCode:a.code,costStructure:s?ps.businessCostStructure:ps.teamsCostStructure,billingFeatures:[ps.annualBilledAnnually,ps.annualMinBill,ps.annualAddUsersWithRenewal]};return{flexibleBillingPlan:i,annualBillingPlan:l}}const Pst={month:{name:ps.chatGptTeam,breakdown:ps.flexiblePlanAmountBreakdown,discountAmount:ps.flexiblePlanDiscountAmount,discountDescription:void 0,billed:ps.flexiblePlanBilledMonthly,total:ps.allPlansTotalAmount},year:{name:ps.chatGptTeam,breakdown:ps.annualPlanAmountBreakdown,discountAmount:ps.annualPlanDiscountAmount,discountDescription:ps.annualPlanDiscountDescription,billed:ps.annualPlanBilledAnnually,total:ps.allPlansTotalAmount}},Rst=(t,e)=>Math.floor((1-e/t)*100);function Ost(){return{queryKey:["personalityTypeList"],queryFn:()=>de.safeGet("/personality_types")}}const iB={key:"default",label:"Default",description:"Preset style and tone",footer_text:null,example_messages:null,deprecated:!1,icon_src:null,badge:"Popular"};function A0e(t,e){const s=t!=null?t:[];let n=s==null?void 0:s.find(o=>o.key===e);return(!n||!e)&&(n=s==null?void 0:s.find(o=>o.key==="default")),n||iB}const I0e=[iB],Lst=t=>{"use forget";const e=F.c(43),{enabled:s,personalitiesList:n,onSelect:o,selectedPersonality:a}=t,[i,l]=x.useState(!1),c=n!=null?n:I0e,u=ne();let d;e[0]!==n||e[1]!==a?(d=A0e(n,a),e[0]=n,e[1]=a,e[2]=d):d=e[2];const f=d.key;let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=A=>{l(A),A&&B.logEventWithStatsig("User Context: View Personalities","chatgpt_user_context_view_personalities")},e[3]=m):m=e[3];let p;e[4]!==c.length?(p=c.length===0&&r.jsx("span",{className:"invisible col-span-full row-span-full",children:r.jsx(j,{defaultMessage:"Professional",id:"user-context-modal.personality.professional_placeholder"})}),e[4]=c.length,e[5]=p):p=e[5];let g;e[6]!==c?(g=c.map(j0e),e[6]=c,e[7]=g):g=e[7];let h;e[8]!==p||e[9]!==g?(h=r.jsxs("div",{"aria-hidden":!0,className:"invisible grid w-fit px-5 [&>*]:col-start-1 [&>*]:row-start-1",children:[p,g]}),e[8]=p,e[9]=g,e[10]=h):h=e[10];let _;e[11]!==u?(_=u.formatMessage({id:"user-context-modal.personality.select",defaultMessage:"Select personality"}),e[11]=u,e[12]=_):_=e[12];const b=!s;let y;if(e[13]!==c||e[14]!==f){let A;e[16]!==f?(A=I=>r.jsx("span",{"aria-hidden":I.key!==f,className:z("col-span-full row-span-full",I.key===f?"":"hidden"),children:I.label},I.key),e[16]=f,e[17]=A):A=e[17],y=c.map(A),e[13]=c,e[14]=f,e[15]=y}else y=e[15];let v;e[18]!==y?(v=r.jsx("div",{className:"grid [&>*]:col-start-1 [&>*]:row-start-1",children:y}),e[18]=y,e[19]=v):v=e[19];let S;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e[20]=S):S=e[20];let C;e[21]!==_||e[22]!==b||e[23]!==v?(C=r.jsxs(J.Trigger,{className:"data-[state=open]:bg-token-bg-tertiary flex h-min w-fit items-center justify-between gap-0! justify-self-end rounded-lg border px-3 py-2 text-start",id:"personality-select-trigger","aria-label":_,disabled:b,children:[v,S]}),e[21]=_,e[22]=b,e[23]=v,e[24]=C):C=e[24];let w;e[25]!==C||e[26]!==h?(w=r.jsxs("div",{className:"grid w-fit [&>*]:col-start-1 [&>*]:row-start-1",children:[h,C]}),e[25]=C,e[26]=h,e[27]=w):w=e[27];let k;e[28]!==o?(k=A=>{x.startTransition(()=>{o(A),l(!1)})},e[28]=o,e[29]=k):k=e[29];let E;if(e[30]!==c||e[31]!==f){let A;e[33]!==f?(A=I=>r.jsx(J.RadioItem,{color:f===I.key?"selected":"default",value:I.key,label:I.label,secondary:I.description},I.key),e[33]=f,e[34]=A):A=e[34],E=c.map(A),e[30]=c,e[31]=f,e[32]=E}else E=e[32];let M;e[35]!==f||e[36]!==k||e[37]!==E?(M=r.jsx(J.Portal,{children:r.jsx(J.Content,{size:"auto",alignOffset:-7,align:"end",children:r.jsx(J.RadioGroup,{value:f,onValueChange:k,children:E})})}),e[35]=f,e[36]=k,e[37]=E,e[38]=M):M=e[38];let N;return e[39]!==i||e[40]!==w||e[41]!==M?(N=r.jsxs(J.Root,{open:i,onOpenChange:m,children:[w,M]}),e[39]=i,e[40]=w,e[41]=M,e[42]=N):N=e[42],N};function j0e(t){return r.jsx("span",{className:"invisible col-span-full row-span-full",children:t.label},t.key)}const Dst=Ne({free:{id:"pricingPlanConstants.free.name",defaultMessage:"Free"},plus:{id:"pricingPlanConstants.plus.name",defaultMessage:"Plus"},go:{id:"pricingPlanConstants.go.name",defaultMessage:"Go"},team:{id:"pricingPlanConstants.teams.teamPlanName",defaultMessage:"Business"},pro:{id:"pricingPlanConstants.pro.name",defaultMessage:"Pro"}}),Fst=t=>{"use forget";var p;const e=F.c(18);let s,n,o,a,i;e[0]!==t?(p=t,{label:a,first:o,children:s,className:n}=p,i=De(p,["label","first","children","className"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5]);const l=x.useId(),c=o?"pt-(--sidebar-section-first-margin-top)":"pt-(--sidebar-section-margin-top)";let u;e[6]!==n||e[7]!==c?(u=z(c,"last:mb-5",n),e[6]=n,e[7]=c,e[8]=u):u=e[8];const d=a?l:void 0;let f;e[9]!==l||e[10]!==a?(f=a&&r.jsx(lB,{id:l,children:a}),e[9]=l,e[10]=a,e[11]=f):f=e[11];let m;return e[12]!==s||e[13]!==i||e[14]!==u||e[15]!==d||e[16]!==f?(m=r.jsxs("aside",U(T({className:u,"aria-labelledby":d},i),{children:[f,s]})),e[12]=s,e[13]=i,e[14]=u,e[15]=d,e[16]=f,e[17]=m):m=e[17],m},lB=t=>r.jsx(YQ,T({as:"h2"},t)),cB=t=>{"use forget";var k;const e=F.c(40);let s,n,o,a,i,l,c,u,d,f;e[0]!==t?(k=t,{children:n,label:c,badge:s,secondary:d,trailing:f,highlightTrailing:a,keyBinding:l,external:o,iconOnly:i}=k,u=De(k,["children","label","badge","secondary","trailing","highlightTrailing","keyBinding","external","iconOnly"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10]);let m;e[11]!==l?(m=()=>l!=null&&b6(),e[11]=l,e[12]=m):m=e[12];const p=oe(m);let g;e[13]!==o||e[14]!==l?(g=l?r.jsx(mT,{binding:l,className:"touch:hidden"}):o?r.jsx(bp,{className:"icon-sm"}):null,e[13]=o,e[14]=l,e[15]=g):g=e[15];const h=g,_="to"in u?Ia:"div",b=u.size==="large"&&i&&"p-2";let y;e[16]!==b?(y=z(b),e[16]=b,e[17]=y):y=e[17];let v;e[18]!==o?(v=o?{target:"_blank",rel:"noopener noreferrer"}:null,e[18]=o,e[19]=v):v=e[19];let S;e[20]!==s||e[21]!==n||e[22]!==p||e[23]!==a||e[24]!==i||e[25]!==c||e[26]!==d||e[27]!==f||e[28]!==h?(S=i?null:{children:n,label:c,badge:s,secondary:d,trailing:f,highlightTrailing:a!=null?a:h,showHighlightTrailing:p},e[20]=s,e[21]=n,e[22]=p,e[23]=a,e[24]=i,e[25]=c,e[26]=d,e[27]=f,e[28]=h,e[29]=S):S=e[29];let C;e[30]!==u||e[31]!==_||e[32]!==y||e[33]!==v||e[34]!==S?(C=r.jsx(WC,T(T(T({as:_,className:y,"data-sidebar-item":!0,fillContainer:!0},v),S),u)),e[30]=u,e[31]=_,e[32]=y,e[33]=v,e[34]=S,e[35]=C):C=e[35];const w=C;if(i){const E=c!=null?c:n;let M;return e[36]!==w||e[37]!==E||e[38]!==h?(M=r.jsx(It,{label:E,secondaryLabel:h,side:"right",labelOrientation:"horizontal",triggerAs:"div",children:w}),e[36]=w,e[37]=E,e[38]=h,e[39]=M):M=e[39],M}return w},la=cB,P0e=cB,uB=Pe(()=>me(()=>import("./c7d3fpgj9nqway0g.js"),__vite__mapDeps([176,1,3,4])).then(t=>t.default));function Bst(){"use forget";const t=F.c(8),e=G(),s=Xe(e,"2888142241").get("is_feedback_tool_shown",!1),n=aa();let o;t[0]!==n?(o=()=>n==null?void 0:n.serverId$(),t[0]=n,t[1]=o):o=t[1];const a=oe(o),i=ct(e);if(!i)return null;const c=i.isEnterprise()||i.isEdu();if(!s||c)return null;let u;t[2]!==a||t[3]!==e?(u=()=>{B.logEventWithStatsig("Feedback: Report Bug Button Clicked","chatgpt_feedback_report_bug_click",{location:"help-menu"}),$e.count(He.DEFAULT,"chatgpt_feedback_report_bug_click",{location:"help-menu"}),requestAnimationFrame(()=>{mt(e,uB,{entryPointElementId:"report-bug-menu-item",conversationId:a})})},t[2]=a,t[3]=e,t[4]=u):u=t[4];let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(j,{id:"feedback.reportBug",defaultMessage:"Report Bug"}),t[5]=d):d=t[5];let f;return t[6]!==u?(f=r.jsx(J.Item,{id:"report-bug-menu-item",icon:Tf,onPointerOver:R0e,onClick:u,children:d}),t[6]=u,t[7]=f):f=t[7],f}function R0e(){return uB.prefetch()}/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L0e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),tA=t=>{const e=L0e(t);return e.charAt(0).toUpperCase()+e.slice(1)},dB=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),D0e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0e=x.forwardRef((u,c)=>{var d=u,{color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:o="",children:a,iconNode:i}=d,l=De(d,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return x.createElement("svg",T(T(U(T({ref:c},F0e),{width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:dB("lucide",o)}),!a&&!D0e(l)&&{"aria-hidden":"true"}),l),[...i.map(([f,m])=>x.createElement(f,m)),...Array.isArray(a)?a:[a]])});/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=(t,e)=>{const s=x.forwardRef((i,a)=>{var l=i,{className:n}=l,o=De(l,["className"]);return x.createElement(B0e,T({ref:a,iconNode:e,className:dB("lucide-".concat(O0e(tA(t))),"lucide-".concat(t),n)},o))});return s.displayName=tA(t),s};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0e=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ust=Tr("arrow-up-right",U0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0e=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],$st=Tr("atom",$0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hst=Tr("check",H0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gst=Tr("chevron-right",G0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0e=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Vst=Tr("code-xml",V0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zst=Tr("plus",z0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0e=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Wst=Tr("route",W0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0e=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],qst=Tr("sparkle",q0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kst=Tr("square-pen",K0e);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yst=Tr("x",Y0e),Q0e=ue(Ce,"4a920d",20,20),J0e=ue(Ce,"c6a95f",20,20),Z0e="https://help.openai.com/en/collections/3742473-chatgpt",X0e="https://help.openai.com/en/articles/9982051",eye="https://help.openai.com/en/articles/6825453-chatgpt-release-notes",tye="https://help.openai.com/en/articles/10003026-windows-app-release-notes";function sye(){return ka?X0e:Z0e}function nye(){return ka?tye:eye}function Qst(){return r.jsxs(r.Fragment,{children:[r.jsx(J.LinkItem,{icon:nB,external:!0,to:sye(),onClick:()=>{B.logEvent("Click FAQ")},children:r.jsx(j,{id:"thread.helpCenter",defaultMessage:"Help center"})}),r.jsx(J.LinkItem,{icon:Q0e,external:!0,to:nye(),children:r.jsx(j,{id:"thread.releaseNotes",defaultMessage:"Release notes"})}),r.jsx(J.LinkItem,{icon:J0e,external:!0,to:"https://openai.com/policies",children:r.jsx(j,{id:"thread.termsAndPolicies",defaultMessage:"Terms & policies"})})]})}const fB=ue(Ce,"715504",20,20);var mB=(t=>(t.Header="Header",t.HeaderTop="HeaderTop",t.HeaderBottom="HeaderBottom",t))(mB||{}),oye=(t=>(t.Box="Box",t.PromptTextareaAction="PromptTextareaAction",t.BannerTermsDisclaimer="BannerTermsDisclaimer",t.NewUserBannerTermsDisclaimer="NewUserBannerTermsDisclaimer",t.BannerSignup="BannerSignup",t.BannersRateLimit="BannersRateLimit",t.EnablePreciseLocation="EnablePreciseLocation",t.BannersBeaconUI="BannersBeaconUI",t.BannerSidekickAnnouncement="BannerSidekickAnnouncement",t.BannerMemoryFull="BannerMemoryFull",t.BannerMemoryAlmostFull="BannerMemoryAlmostFull",t.ParagenControls="ParagenControls",t.AdvancedVoiceOnMobileAnnouncement="AdvancedVoiceOnMobileAnnouncement",t.SearchBrowserExtensionAnnouncement="SearchBrowserExtensionAnnouncement",t.SearchBrowserExtensionReactiveAnnouncement="SearchBrowserExtensionReactiveAnnouncement",t.MoonshineAnnouncement="MoonshineAnnouncement",t.CustomizeChatGPTAnnouncement="CustomizeChatGPTAnnouncement",t.ProjectConversationTaskNoFileAccess="ProjectConversationTaskNoFileAccess",t.JawboneAnnouncement="JawboneAnnouncement",t.JawboneMaxActiveAnnouncement="JawboneMaxActiveAnnouncement",t.PromoRedemptionAnnouncement="PromoRedemptionAnnouncement",t.OperatorAnnouncement="OperatorAnnouncement",t.BannerPlusUpsell="BannerPlusUpsell",t.PlusFreeTrialHomepageAnnouncementBanner="PlusFreeTrialHomepageAnnouncementBanner",t.ContextualAnswersAdminUpsell="ContextualAnswersAdminUpsell",t.ContextualAnswersUserUpsell="ContextualAnswersUserUpsell",t.ReferrerRedemptionAvailableAnnouncement="ReferrerRedemptionAvailableAnnouncement",t.RefereeRedemptionAvailableAnnouncement="RefereeRedemptionAvailableAnnouncement",t.ReferralProgramUpsellAnnouncement="ReferralProgramUpsellAnnouncement",t.TatertotIntakeFormAnnouncement="TatertotIntakeFormAnnouncement",t.StudentsUpsellAnnouncement="StudentsUpsellAnnouncement",t.TeamSeatsPromoAnnouncement="TeamSeatsPromoAnnouncement",t.ModelDeprecationBanner="ModelDeprecationBanner",t.TeamsContextualAnswersUpsell="TeamsContextualAnswersUpsell",t.LanguageUpsellBanner="LanguageUpsellBanner",t.AgentModeAnnouncementBanner="AgentModeAnnouncementBanner",t.GoldenHourAnnouncementBanner="GoldenHourAnnouncementBanner",t.BannerNoAuthTrials="BannerNoAuthTrials",t.StarterPrompts="StarterPrompts",t.ImageGenBanner="ImageGenBanner",t.IntegratedVoiceModeNuxBanner="IntegratedVoiceModeNuxBanner",t.ImageGenV2Banner="ImageGenV2Banner",t.PulseAnnouncementBanner="PulseAnnouncementBanner",t.PulseTasksAnnouncementBanner="PulseTasksAnnouncementBanner",t.CocoonAnnouncementBanner="CocoonAnnouncementBanner",t))(oye||{}),aye=(t=>(t.DallePromptControls="DallePromptControls",t))(aye||{});const sA={contentAreas:{Header:{dimensions:null,contentId:null},HeaderTop:{dimensions:null,contentId:null},HeaderBottom:{dimensions:null,contentId:null}},sharedProps:null};function rye(){const t=Zt(vp(Vs(()=>sA)));function e(s,n){t.setState(o=>{o.contentAreas[s].dimensions=n})}return{reset:()=>t.setState(sA),useContentAreaId(s){return t(n=>n.contentAreas[s].contentId)},useHasAnnouncementInHeader(){const s=t(n=>n.contentAreas.HeaderTop.contentId);return s==="AdvancedVoiceOnMobileAnnouncement"||s==="BannerSidekickAnnouncement"},useContentAreaApi(s){const n=x.useCallback(a=>(a&&$e.count(He.DEFAULT,"prompt_textarea.content_area_set_header",{content_id:a}),t.setState(i=>{i.contentAreas[s].contentId=a})),[s]),o=x.useCallback(()=>{t.setState(a=>{a.contentAreas[s].contentId=null})},[s]);return{set:n,remove:o}},useContentAreaDimensions(s,n){return t(o=>n(o.contentAreas[s].dimensions))},useContentAreaResizeObserver(s,n){x.useEffect(()=>{if(n.current){e(s,n.current.getBoundingClientRect());const o=new ResizeObserver(a=>{for(const i of a)e(s,i.contentRect)});return o.observe(n.current),()=>{o.disconnect(),e(s,null)}}},[n,s])},useIsHeaderContentAreaPopulated(){return t(s=>!!s.contentAreas.HeaderTop.contentId||!!s.contentAreas.HeaderBottom.contentId)},useSharedProps(s){return t(n=>s?s(n.sharedProps):n.sharedProps)},getSharedProps(){return t.getState().sharedProps},useSetSharedProps(){return x.useCallback(s=>{t.setState(n=>{n.sharedProps=s})},[])}}}const pB=x.createContext(null);function iye(t){"use forget";const e=F.c(3),{children:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={store:rye()},e[0]=n):n=e[0];let o;return e[1]!==s?(o=r.jsx(pB.Provider,{value:n,children:s}),e[1]=s,e[2]=o):o=e[2],o}function Mf(t){"use forget";const e=t===void 0?!0:t,s=x.useContext(pB);if(!s&&e)throw new Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return s}var gT="Popover",[gB]=Oc(gT,[P_]),ag=P_(),[lye,Ol]=gB(gT),hB=t=>{const{__scopePopover:e,children:s,open:n,defaultOpen:o,onOpenChange:a,modal:i=!1}=t,l=ag(e),c=x.useRef(null),[u,d]=x.useState(!1),[f=!1,m]=ii({prop:n,defaultProp:o,onChange:a});return r.jsx(aR,U(T({},l),{children:r.jsx(lye,{scope:e,contentId:R_(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:x.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:i,children:s})}))};hB.displayName=gT;var _B="PopoverAnchor",xB=x.forwardRef((t,e)=>{const c=t,{__scopePopover:s}=c,n=De(c,["__scopePopover"]),o=Ol(_B,s),a=ag(s),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=o;return x.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(_C,U(T(T({},a),n),{ref:e}))});xB.displayName=_B;var yB="PopoverTrigger",bB=x.forwardRef((t,e)=>{const c=t,{__scopePopover:s}=c,n=De(c,["__scopePopover"]),o=Ol(yB,s),a=ag(s),i=Ks(e,o.triggerRef),l=r.jsx(vs.button,U(T({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":EB(o.open)},n),{ref:i,onClick:zt(t.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?l:r.jsx(_C,U(T({asChild:!0},a),{children:l}))});bB.displayName=yB;var hT="PopoverPortal",[cye,uye]=gB(hT,{forceMount:void 0}),vB=t=>{const{__scopePopover:e,forceMount:s,children:n,container:o}=t,a=Ol(hT,e);return r.jsx(cye,{scope:e,forceMount:s,children:r.jsx(A_,{present:s||a.open,children:r.jsx(lC,{asChild:!0,container:o,children:n})})})};vB.displayName=hT;var Ud="PopoverContent",SB=x.forwardRef((t,e)=>{const s=uye(Ud,t.__scopePopover),i=t,{forceMount:n=s.forceMount}=i,o=De(i,["forceMount"]),a=Ol(Ud,t.__scopePopover);return r.jsx(A_,{present:n||a.open,children:a.modal?r.jsx(dye,U(T({},o),{ref:e})):r.jsx(fye,U(T({},o),{ref:e}))})});SB.displayName=Ud;var dye=x.forwardRef((t,e)=>{const s=Ol(Ud,t.__scopePopover),n=x.useRef(null),o=Ks(e,n),a=x.useRef(!1);return x.useEffect(()=>{const i=n.current;if(i)return rR(i)},[]),r.jsx(lR,{as:cR,allowPinchZoom:!0,children:r.jsx(CB,U(T({},t),{ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=s.triggerRef.current)==null||l.focus()}),onPointerDownOutside:zt(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:zt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})}))})}),fye=x.forwardRef((t,e)=>{const s=Ol(Ud,t.__scopePopover),n=x.useRef(!1),o=x.useRef(!1);return r.jsx(CB,U(T({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,o.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((u=s.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),CB=x.forwardRef((t,e)=>{const g=t,{__scopePopover:s,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d}=g,f=De(g,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),m=Ol(Ud,s),p=ag(s);return iR(),r.jsx(uR,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(dR,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(fR,U(T(T({"data-state":EB(m.open),role:"dialog",id:m.contentId},p),f),{ref:e,style:U(T({},f.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),wB="PopoverClose",kB=x.forwardRef((t,e)=>{const a=t,{__scopePopover:s}=a,n=De(a,["__scopePopover"]),o=Ol(wB,s);return r.jsx(vs.button,U(T({type:"button"},n),{ref:e,onClick:zt(t.onClick,()=>o.onOpenChange(!1))}))});kB.displayName=wB;var mye="PopoverArrow",TB=x.forwardRef((t,e)=>{const a=t,{__scopePopover:s}=a,n=De(a,["__scopePopover"]),o=ag(s);return r.jsx(mR,U(T(T({},o),n),{ref:e}))});TB.displayName=mye;function EB(t){return t?"open":"closed"}var eu=hB,pye=xB,hi=bB,tu=vB,su=SB,gye=kB,hye=TB;function nu(t){var E;const e=G(),[s,n]=x.useState(!1),k=t,{announcementKey:o,onDismiss:a,children:i,childrenWrapperClassName:l}=k,c=De(k,["announcementKey","onDismiss","children","childrenWrapperClassName"]),{show:u}=c,f=Xe(e,"717266490").get("one_announcement_tooltip_per_session",!1),m=Sc(M=>!!M.displayAnnouncementTooltip),p=Sc(M=>!f||M.displayAnnouncementTooltip===o),g=ne(),h=QQ(),_=JQ();let b=!1;const y=Mf(!1);b=((E=y==null?void 0:y.store.useContentAreaId(mB.HeaderTop))!=null?E:null)!==null;const C=u&&!(h||b||_);if(x.useEffect(()=>{f&&C&&s&&tn.showAnnouncementTooltipExclusively(o)},[s,f,o,C]),x.useEffect(()=>{C&&(!f||p)&&(pt.logEvent("announcement_tooltip_shown",null,{announcement_key:o}),B.logEvent("Announcement Tooltip Shown",{announcement_key:o}),B.logUpsellOrModalEvent(ks,{eventId:"".concat(o,"_tooltip_shown"),type:Ts.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[C,p,o,f]),m&&!p)return i;const w=()=>{(!f||p)&&(a(),pt.logEvent("announcement_tooltip_dismissed",null,{announcement_key:o}),B.logEvent("Announcement Tooltip Dismissed",{announcement_key:o}))};return r.jsx(_ye,U(T({},c),{show:C,onDismiss:w,renderAsInvisible:f&&!m,onTooltipChildrenBecomeVisible:()=>{f&&n(!0)},children:r.jsx("div",{"aria-label":g.formatMessage({id:"announcementTooltip.ariaLabel",defaultMessage:"Announcements"}),className:z("w-fit",l),children:i})}))}function _ye({align:t,arrowPadding:e,alignOffset:s,show:n,onDismiss:o,children:a,title:i,side:l,sideOffset:c,theme:u="default",badge:d="new",contentAlign:f="start",description:m,className:p,collisionPadding:g,onTooltipChildrenBecomeVisible:h,renderAsInvisible:_=!1,dismissOnOutsideClick:b=!1,dismissOnTriggerClick:y=!0,contentClassName:v}){var E;const S=x.useRef(null),[C,w]=x.useState(!1);x.useEffect(()=>{if(!n)return;const M=S.current;if(!M)return;const N=new IntersectionObserver(A=>{w(A[A.length-1].intersectionRatio===1)},{threshold:1});return N.observe(M),()=>{N.unobserve(M)}},[n]);const k=M=>{n&&M&&M.getBoundingClientRect().width>0&&M.getBoundingClientRect().height>0&&(h==null||h()),S.current=M};return r.jsxs(eu,{open:n&&C,onOpenChange:M=>{M||o()},children:[r.jsx(hi,{asChild:!0,onPointerDown:()=>{y&&o()},ref:k,children:a}),r.jsx(tu,{container:(E=S.current)==null?void 0:E.ownerDocument.body,children:r.jsx(v6,{children:r.jsxs(su,{arrowPadding:e,alignOffset:s,align:t,collisionPadding:g,side:l,sideOffset:c,onOpenAutoFocus:M=>{M.preventDefault()},onCloseAutoFocus:M=>{M.preventDefault()},onInteractOutside:M=>{var A;M.target instanceof Element&&((A=S.current)==null?void 0:A.contains(M.target))||M.type==="dismissableLayer.focusOutside"?M.preventDefault():b?o():M.preventDefault()},updatePositionStrategy:"always",className:z("animate-slideLeftAndFade relative z-30 rounded-xl p-4 text-sm shadow-sm select-none",u==="default"?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white",_&&"invisible",v),children:[r.jsxs("div",{className:z("flex max-w-xs flex-col gap-1",p),children:[r.jsxs("div",{className:"mb-0.5 flex gap-2",children:[d==="new"?r.jsx("span",{className:z("self-center rounded-sm px-1.5 py-0.5 text-[10px] leading-normal font-semibold uppercase",u==="default"?"bg-token-main-surface-primary text-token-main-surface-primary-inverse":"bg-white text-blue-400"),children:r.jsx(j,T({},nA.new))}):d==="beta"&&r.jsx("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:r.jsx(j,T({},nA.beta))}),r.jsx("div",{className:z("grow font-semibold",f&&"text-".concat(f)),children:i}),r.jsx(gye,{className:"-m-1 p-1 leading-[0] opacity-70 transition hover:opacity-100","data-testid":"announcement-tooltip-close-btn",children:r.jsx(f1,{className:"icon-sm"})})]}),m!==void 0&&r.jsx("div",{className:z(f&&"text-".concat(f)),children:m})]}),r.jsx(hye,{asChild:!0,children:r.jsx("div",{className:z("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-ee-sm",u==="default"?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})})]})}const nA=Ne({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}}),xye=Pe(()=>me(()=>import("./mbkrlljiwhbkwjre.js"),__vite__mapDeps([177,1,3,4])).then(t=>t.CustomInstructionsModal)),Gh=Pe(()=>me(()=>import("./u69kqoyzot6736n2.js"),__vite__mapDeps([178,1,3,4,179,180,181,129,130,182,183])).then(t=>t.CreateOrEditProjectModal)),yye=Object.freeze(Object.defineProperty({__proto__:null,CreateOrEditProjectModalAsync:Gh},Symbol.toStringTag,{value:"Module"})),oA=Pe(()=>me(()=>import("./bg41hz7jg49p6v5w.js"),__vite__mapDeps([184,1,3,4,185,167,186,187,188,80,189,190,85])).then(t=>t.ShareProjectModal)),bye=ue(Ce,"caa797",20,20),vye=Object.freeze(Object.defineProperty({__proto__:null,default:bye},Symbol.toStringTag,{value:"Module"})),aA=Pe(()=>me(()=>import("./kcu773p5ymk2g8p7.js"),__vite__mapDeps([191,1,3,4])).then(t=>t.ProjectReportModal)),rA=Pe(()=>me(()=>import("./j1jsb5rfz3wt3sb5.js"),__vite__mapDeps([192,1,3,4])).then(t=>t.SnorlaxDeletionModal)),iA=Pe(()=>me(()=>import("./gpk0t7ye9ay70lna.js"),__vite__mapDeps([193,1,3,4])).then(t=>t.SnorlaxLeaveModal)),Sye=null,Cye=null;function wye(t){"use forget";var I;const e=F.c(28);let s,n;e[0]!==t?(I=t,{className:n}=I,s=De(I,["className"]),e[0]=t,e[1]=s,e[2]=n):(s=e[1],n=e[2]);const o=G(),a=ne(),i=ct(o),{eligible:l}=Ct(We.hasSeenSharedProjectsTooltip),c=nu,u=We,d="bottom",f="end",m="w-full",p=0,g="z-100",h="w-full",_="bright",b=!0,y="new";let v;e[3]!==a?(v=a.formatMessage({id:"YJ1BcI",defaultMessage:"Invite others to projects"}),e[3]=a,e[4]=v):v=e[4];const S=i!=null&&i.isWorkspaceAccount()?a.formatMessage({id:"7i6HBq",defaultMessage:"Build reports, plan client work, or do research  together."}):a.formatMessage({id:"CO0hjY",defaultMessage:"Plan adventures, campaigns, workouts, and more  together."});let C;e[5]!==o?(C=()=>_t(o,We.hasSeenSharedProjectsTooltip),e[5]=o,e[6]=C):C=e[6];let w;e[7]!==n?(w=z("mx-2",n),e[7]=n,e[8]=w):w=e[8];let k;e[9]!==a?(k=a.formatMessage(cs.projectShareButton),e[9]=a,e[10]=k):k=e[10];let E;e[11]!==a?(E=a.formatMessage(cs.projectShareButton),e[11]=a,e[12]=E):E=e[12];let M;e[13]!==E?(M=r.jsx("span",{className:"max-md:hidden",children:E}),e[13]=E,e[14]=M):M=e[14];let N;e[15]!==s||e[16]!==w||e[17]!==k||e[18]!==M?(N=r.jsx(ke,U(T({className:w,color:"ghost",icon:Xc,label:k},s),{children:M})),e[15]=s,e[16]=w,e[17]=k,e[18]=M,e[19]=N):N=e[19];let A;return e[20]!==c||e[21]!==l||e[22]!==u.hasSeenSharedProjectsTooltip||e[23]!==v||e[24]!==S||e[25]!==C||e[26]!==N?(A=r.jsx(c,{announcementKey:u.hasSeenSharedProjectsTooltip,show:l,side:d,align:f,className:m,sideOffset:p,contentClassName:g,childrenWrapperClassName:h,theme:_,dismissOnOutsideClick:b,badge:y,title:v,description:S,onDismiss:C,children:N}),e[20]=c,e[21]=l,e[22]=u.hasSeenSharedProjectsTooltip,e[23]=v,e[24]=S,e[25]=C,e[26]=N,e[27]=A):A=e[27],A}function kye(t){"use forget";var _e,ye,Re,Ve,ze;const e=F.c(123),{gizmoId:s,serverThreadId:n}=t,o=ne(),a=yt(),i=G();let l;e[0]!==i||e[1]!==s?(l=VC(i,s),e[0]=i,e[1]=s,e[2]=l):l=e[2];const c=l;let u;e[3]!==i?(u=()=>PC(i),e[3]=i,e[4]=u):u=e[4];const d=oe(u);let f;e[5]!==c?(f=()=>c.gizmo$(),e[5]=c,e[6]=f):f=e[6];const m=oe(f);let p;e[7]!==c?(p=()=>eJ(c)(),e[7]=c,e[8]=p):p=e[8];const g=oe(p),h=!n;let _;e[9]!==c?(_=()=>tJ(c)(),e[9]=c,e[10]=_):_=e[10];const b=oe(_);let y;e[11]!==c?(y=()=>sJ(c)(),e[11]=c,e[12]=y):y=e[12];const v=oe(y);let S;e[13]!==c?(S=()=>nJ(c)(),e[13]=c,e[14]=S):S=e[14];const C=oe(S);let w;e[15]!==c?(w=()=>oJ(c)(),e[15]=c,e[16]=w):w=e[16];const k=oe(w),{canEdit:E}=qC(m!=null?m:void 0),{canDelete:M}=ZQ(m!=null?m:void 0),N=v&&h;let A;e[17]!==m?(A=m?wd(m):!1,e[17]=m,e[18]=A):A=e[18];const I=A;let P;e[19]!==i||e[20]!==m?(P=S6(),e[19]=i,e[20]=m,e[21]=P):P=e[21];const R=P;let O;e[22]!==i||e[23]!==m?(O=!1,e[22]=i,e[23]=m,e[24]=O):O=e[24];const L=O;let D;e[25]!==i||e[26]!==m?(D=!1,e[25]=i,e[26]=m,e[27]=D):D=e[27];const H=D,V=((ye=(_e=m==null?void 0:m.gizmo)==null?void 0:_e.author)==null?void 0:ye.user_id)===(d==null?void 0:d.normalizedAccountUserId),q=I&&h;let W;e[28]!==i||e[29]!==R?(W=!1,e[28]=i,e[29]=R,e[30]=W):W=e[30];const $=W;let Z;e[31]!==i||e[32]!==m?(Z=()=>{m&&mt(i,aA,{projectId:m.gizmo.id,projectName:m.gizmo.display.name,onClose:()=>Un(i,aA)})},e[31]=i,e[32]=m,e[33]=Z):Z=e[33];const K=Z;let Y;e[34]!==i||e[35]!==m||e[36]!==o?(Y=()=>{m&&mt(i,Gh,{submitButtonTitle:o.formatMessage(cs.projectSettingsSubmitButton),gizmo:m,onClose:()=>Un(i,Gh),onSuccess:()=>{Un(i,Gh)}})},e[34]=i,e[35]=m,e[36]=o,e[37]=Y):Y=e[37];const ae=Y;let se;e[38]!==i||e[39]!==s||e[40]!==a?(se=()=>{mt(i,rA,{gizmoId:s,handleDelete:()=>{Un(i,rA),a("/",{replace:!0})}})},e[38]=i,e[39]=s,e[40]=a,e[41]=se):se=e[41];const ee=se;let re;e[42]!==i||e[43]!==m||e[44]!==H||e[45]!==L?(re=()=>{if(!m)return;let Fe=null;L?Fe=Sye:H?Fe=Cye:Fe=xye,Fe&&mt(i,Fe,{gizmo:m,onClose:()=>Un(i,Fe)})},e[42]=i,e[43]=m,e[44]=H,e[45]=L,e[46]=re):re=e[46];const he=wn(re);let fe;e[47]!==i||e[48]!==m||e[49]!==s||e[50]!==a?(fe=()=>{m&&mt(i,iA,{gizmoId:s,projectName:m.gizmo.display.name,handleLeave:()=>{Un(i,iA),a("/",{replace:!0})}})},e[47]=i,e[48]=m,e[49]=s,e[50]=a,e[51]=fe):fe=e[51];const pe=fe;let le;e[52]!==i?(le=()=>{},e[52]=i,e[53]=le):le=e[53];const ve=le,Te=((ze=(Ve=(Re=m==null?void 0:m.gizmo)==null?void 0:Re.instructions)==null?void 0:Ve.length)!=null?ze:0)>0,xe=E?Te?cs.editInstructionsDropdownLabel:cs.addInstructionsDropdownLabel:cs.viewOnlyInstructionsDropdownLabel;let ce;if(e[54]!==M||e[55]!==E||e[56]!==i||e[57]!==xe||e[58]!==m||e[59]!==he||e[60]!==ee||e[61]!==ae||e[62]!==pe||e[63]!==K||e[64]!==ve||e[65]!==Te||e[66]!==R||e[67]!==H||e[68]!==V||e[69]!==L||e[70]!==$||e[71]!==q){ce=[];const Fe=Ee(i,"1478278884"),be=XQ(i);if(V){let Oe;e[79]===Symbol.for("react.memo_cache_sentinel")?(Oe=r.jsx(j,T({},cs.projectSettings)),e[79]=Oe):Oe=e[79];let qe;e[80]!==ae?(qe=r.jsx(J.Item,{onClick:ae,icon:yp,children:Oe},"edit"),e[80]=ae,e[81]=qe):qe=e[81],ce.push(qe)}if((E||Te)&&Fe&&(!be||R)){let Oe;e[84]!==xe?(Oe=r.jsx(j,T({},xe)),e[84]=xe,e[85]=Oe):Oe=e[85];let qe;e[86]!==he||e[87]!==Oe?(qe=r.jsx(J.Item,{onClick:he,icon:fB,children:Oe},"instructions"),e[86]=he,e[87]=Oe,e[88]=qe):qe=e[88],ce.push(qe)}if(q){let Oe;e[89]===Symbol.for("react.memo_cache_sentinel")?(Oe=r.jsx(j,T({},cs.reportProjectButtonLabel)),e[89]=Oe):Oe=e[89];let qe;e[90]!==K?(qe=r.jsx(J.Item,{onClick:K,icon:Tf,children:Oe},"report"),e[90]=K,e[91]=qe):qe=e[91],ce.push(qe)}if(!V&&!R){let Oe;e[92]===Symbol.for("react.memo_cache_sentinel")?(Oe=r.jsx(j,T({},cs.leaveProjectDropdownButton)),e[92]=Oe):Oe=e[92];let qe;e[93]!==pe?(qe=r.jsx(J.Item,{color:"danger",onClick:pe,icon:uD,children:Oe},"leave"),e[93]=pe,e[94]=qe):qe=e[94],ce.push(qe)}if(M&&!R&&!be){let Oe;e[95]===Symbol.for("react.memo_cache_sentinel")?(Oe=r.jsx(j,T({},cs.deleteProjectDropdownButton)),e[95]=Oe):Oe=e[95];let qe;e[96]!==ee?(qe=r.jsx(J.Item,{color:"danger",onClick:ee,icon:Rl,children:Oe},"delete"),e[96]=ee,e[97]=qe):qe=e[97],ce.push(qe)}e[54]=M,e[55]=E,e[56]=i,e[57]=xe,e[58]=m,e[59]=he,e[60]=ee,e[61]=ae,e[62]=pe,e[63]=K,e[64]=ve,e[65]=Te,e[66]=R,e[67]=H,e[68]=V,e[69]=L,e[70]=$,e[71]=q,e[72]=ce}else ce=e[72];const we=ce;let ge;e[98]!==i||e[99]!==m?(ge=()=>{m&&mt(i,oA,{gizmo:aJ(m),publishedGizmo:m,onClose:()=>Un(i,oA)})},e[98]=i,e[99]=m,e[100]=ge):ge=e[100];const Ae=ge;let Ue,Ie;e[101]!==i||e[102]!==g||e[103]!==v||e[104]!==N||e[105]!==b?(Ue=()=>{g&&($e.count(He.PROJECTS,"snorlax_header_actions_shown",{in_shared_projects_gate:Ee(i,"773249106")?"true":"false",workspace_allows_sharing:b?"true":"false",is_shared_projects_enabled:v?"true":"false"}),N&&$e.count(He.PROJECTS,"snorlax_header_actions_share_button_shown"))},Ie=[g,N,b,v,i],e[101]=i,e[102]=g,e[103]=v,e[104]=N,e[105]=b,e[106]=Ue,e[107]=Ie):(Ue=e[106],Ie=e[107]),x.useEffect(Ue,Ie);let Me;e[108]!==o?(Me=o.formatMessage(cs.showProjectDetailsDropdown),e[108]=o,e[109]=Me):Me=e[109];let te;e[110]!==o?(te=o.formatMessage(cs.projectShareButton),e[110]=o,e[111]=te):te=e[111];const Q=!m;let ie;return e[112]!==we||e[113]!==Ae||e[114]!==R||e[115]!==k||e[116]!==h||e[117]!==C||e[118]!==N||e[119]!==Me||e[120]!==te||e[121]!==Q?(ie={dropdownAriaLabel:Me,dropdownOptions:we,handleClickShare:Ae,isFirstPartyProjectValue:R,monograms:k,onProjectHomePage:h,projectShareLabel:te,shareButtonDisabled:Q,shouldShowMonograms:C,showShareProjectButton:N},e[112]=we,e[113]=Ae,e[114]=R,e[115]=k,e[116]=h,e[117]=C,e[118]=N,e[119]=Me,e[120]=te,e[121]=Q,e[122]=ie):ie=e[122],ie}function Tye(t){"use forget";const e=F.c(6),{state:s}=t,{handleClickShare:n,monograms:o,projectShareLabel:a,shouldShowMonograms:i}=s;if(!i)return null;let l;e[0]!==o?(l=r.jsx(rJ,{monograms:o}),e[0]=o,e[1]=l):l=e[1];let c;return e[2]!==n||e[3]!==a||e[4]!==l?(c=r.jsx(ke,{"aria-label":a,className:"bg-transparent! px-0! hover:opacity-90",color:"ghost",onClick:n,children:l}),e[2]=n,e[3]=a,e[4]=l,e[5]=c):c=e[5],c}function Eye(t){"use forget";const e=F.c(3),{state:s}=t,{handleClickShare:n,isFirstPartyProjectValue:o,shareButtonDisabled:a,showShareProjectButton:i}=s;if(!i||o)return null;let l;return e[0]!==n||e[1]!==a?(l=r.jsx(wye,{disabled:a,onClick:n}),e[0]=n,e[1]=a,e[2]=l):l=e[2],l}function Mye(t){"use forget";const e=F.c(5),{state:s}=t,{dropdownAriaLabel:n,dropdownOptions:o,onProjectHomePage:a}=s;if(!a||o.length===0)return null;let i;e[0]!==n?(i=r.jsx(tB,{"aria-label":n,className:"shrink-0"}),e[0]=n,e[1]=i):i=e[1];let l;return e[2]!==o||e[3]!==i?(l=r.jsx(ia,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:i,size:"auto",children:o}),e[2]=o,e[3]=i,e[4]=l):l=e[4],l}function Jst(t){"use forget";const e=F.c(2),s=kye(t);let n;return e[0]!==s?(n=r.jsxs(r.Fragment,{children:[r.jsx(Tye,{state:s}),r.jsx(Eye,{state:s}),r.jsx(Mye,{state:s})]}),e[0]=s,e[1]=n):n=e[1],n}function Zst(){const t=Hs();return MB(t.pathname)}function Nye(t){const s=new URL("http://example.com".concat(t)).pathname.match(/\/g\/(g-p-[\w\d-]+)/);if(s)return s[1]}function Aye(t){const e=t.split("-");return e.length>1&&e[0]==="g"?(e==null?void 0:e[1])==="p"?"g-p-".concat(e[2]):"g-".concat(e[1]):e[0]}function MB(t){const e=Nye(t);if(e)return Aye(e)}const Xst=ue(Ce,"984817",20,20,!0),ent=ue(Ce,"38e54b",20,20,!0),Iye=ue(Ce,"92c0d7",20,20),NB=ue(Ce,"dcac0b",20,20),_T=ue(Ce,"7ad2ce",20,20);function AB({date:t}){const e=ne(),s=t instanceof Date?t:new Date(t*1e3),n=mo(s,new Date);if(n<4&&n>-4){const o=e.formatRelativeTime(n,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return e.formatDate(s,{year:"numeric",month:"long",day:"numeric"})}const jye="OeMrba_disabled",Pye="OeMrba_label",Rye="OeMrba_wrapper",ob={disabled:jye,label:Pye,wrapper:Rye};function Oye(u){var d=u,{className:t,icon:e,label:s,onClick:n,style:o,tabIndex:a=0,ref:i,disabled:l}=d,c=De(d,["className","icon","label","onClick","style","tabIndex","ref","disabled"]);return r.jsx("label",{"aria-label":s,className:z(t,ob.wrapper,l&&ob.disabled),style:o,tabIndex:-1,children:r.jsx("button",U(T({className:z(ob.label,l&&"opacity-50"),onClick:n,tabIndex:a,ref:i,type:"button",disabled:l},c),{children:e}))})}const rg=Zt(Vs(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),Lye=rg.getState,ab=rg.setState,Dye={getHasUnreadNotifications:(t=Lye())=>t.hasUnreadNotifications},dd={setIsModalOpen:t=>{ab({isModalOpen:t})},setHasUnreadNotifications:t=>{ab({hasUnreadNotifications:t})},bulkLoadFeedItems:t=>{ab(e=>{e.feedItems=t})}};function Fye(){const t=G(),e=xT(t),s=rg(Dye.getHasUnreadNotifications);return e&&s}function Bye(t,e,s,n){const o=G(),a=Fye(),i=oe(()=>iJ(o).some(c=>{var u;return((u=Sl(c))==null?void 0:u.value)===Xt.UNREAD}));return s&&a||n&&i?t:e}function xT(t){return Xe(t,"3606233934",{disableExposureLog:!0}).get("enable_notifications_feed")}function tnt(){const t=G(),e=xT(t),s=rg(n=>n.isModalOpen);return e&&s}function Uye(){const t=G(),e=xT(t),s=dt({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const n=await de.safeGet("/notifications/feed");return dd.bulkLoadFeedItems(n.items),dd.setHasUnreadNotifications(n.has_unreads),n.items},enabled:e});return{isLoading:s.isLoading,isFetching:s.isFetching}}function snt(){const t=ne(),e=Bye(Iye,NB,!0,!1),s=t.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return Uye(),r.jsx(It,{label:s,className:"group",children:r.jsx(Wp,{icon:e,onClick:()=>dd.setIsModalOpen(!0),"aria-label":s})})}function $ye({conversation:t,item:e,onClose:s}){const o={announcement:_T}[e.type];let a=null;try{const u=new Date(e.created_at);a=AB({date:u})}catch(u){}const i=zp(t.id),l=yt(),c=u=>{var d,f,m;if(((d=e.action)==null?void 0:d.type)==="show_conversation")s(),l(e.action.conversation_id);else if(((f=e.action)==null?void 0:f.type)==="new_conversation"){const p=e.action;p.prefilled_message&&(i({sourceEvent:u,promptMessage:cn(p.prefilled_message),requestedModelId:(m=p.model_slug)!=null?m:void 0}),s())}};return r.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:c,disabled:!e.action,children:[r.jsx("div",{className:"relative",children:o&&r.jsx(o,{className:"icon"})}),r.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[r.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:e.message}),r.jsx("div",{className:"flex items-center justify-start gap-1",children:r.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:a!=null?a:""})})]})]})}function nnt({conversation:t}){const{feedItems:e,isModalOpen:s}=rg();x.useEffect(()=>{s&&(dd.setHasUnreadNotifications(!1),de.safePost("/notifications/feed/read",{authOption:is.SendIfAvailable}))},[s]);const n=ne(),o=yt(),a=G(),i=Ee(a,"3325813340"),l=new Date,c=$c(e,d=>{const f=new Date(d.created_at);if(f6(f))return"today";const m=mo(l,f);return m<=7?"last_7_days":m<=30?"last_30_days":"more_than_30_days"}),u=d=>{switch(d){case"today":return n.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return n.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return n.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return n.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return r.jsx(Ft,{testId:"modal-notifications-feed",isOpen:s,onClose:()=>{dd.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:r.jsxs("div",{className:"flex flex-col gap-y-10",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold",children:n.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),i&&r.jsx(Oye,{icon:r.jsx(yp,{className:"icon"}),onClick:()=>{o(tf(hn.Notifications))},label:n.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(c).map(([d,f])=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold",children:u(d)}),f.map(m=>r.jsx($ye,{conversation:t,item:m,onClose:()=>dd.setIsModalOpen(!1)},m.id))]},d))]})})}const Hye={type:"spring",bounce:.1,duration:.3},ont={type:"spring",bounce:.1,duration:.24},IB={duration:1e-14},jB=Pe(()=>me(()=>import("./ghgxmj8t0vml5d42.js"),__vite__mapDeps([194,1,3,4,133,134,195,78,186,187,188,80,189,196,197])).then(t=>t.AdminInviteModal)),PB=Object.freeze(Object.defineProperty({__proto__:null,AdminInviteModal:jB},Symbol.toStringTag,{value:"Module"})),ant=ue(Ce,"836f7a",20,20,!0),yT=ue(Ce,"350877",20,20),Vh=Ne({allowH17180rActivity:{id:"G79Ih9",defaultMessage:"Allow proactive activity"},allowH17180rGmailDesc:{id:"HzRL3y",defaultMessage:"Let ChatGPT proactively read Gmail and give you helpful insights. <link>Learn more</link>"},allowH17180rGoogleCalendarDesc:{id:"ziIyKz",defaultMessage:"Let ChatGPT proactively read Google Calendar and give you helpful insights. <link>Learn more</link>"},allowH17180rGoogleContactsDesc:{id:"1hp0Yi",defaultMessage:"Let ChatGPT proactively read Google Contacts and give you helpful insights. <link>Learn more</link>"}}),RB={[us[je.GMAIL_CONNECTOR]]:Qt.H17180rGmail,[us[je.GCAL_CONNECTOR]]:Qt.H17180rGoogleCalendar,[us[je.GOOGLE_CONTACTS_CONNECTOR]]:Qt.H17180rGoogleContacts},Gye=new Set(Object.keys(RB));function Vye(t,e){return!!(Ee(t,"3304830717")&&e&&Gye.has(e))}function zye(t){switch(t){case us[je.GMAIL_CONNECTOR]:return Vh.allowH17180rGmailDesc;case us[je.GCAL_CONNECTOR]:return Vh.allowH17180rGoogleCalendarDesc;case us[je.GOOGLE_CONTACTS_CONNECTOR]:return Vh.allowH17180rGoogleContactsDesc;default:return}}function rnt({connectorId:t,connectorName:e}){var g,h;const s=G(),n=ne(),o=Vye(s,t),a=t!=null?RB[t]:void 0,{data:i,isLoading:l}=Jd(),c=a&&(h=(g=i==null?void 0:i.settings)==null?void 0:g[a])!=null?h:void 0,{mutate:u,isPending:d}=Dc(!0),f=c!=null?c:!0,m=x.useCallback(()=>{a&&u({setting:a,value:!f})},[u,a,f]);if(!o||!a)return null;const p=zye(t);return p?r.jsx(_a,{children:r.jsx(Xi,{label:n.formatMessage(Vh.allowH17180rActivity,{connectorName:e}),description:r.jsx(j,U(T({},p),{values:{connectorName:e,link:_=>r.jsx(qn,{href:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt",className:"underline",children:_})}})),enabled:!!f,isLoading:l||d,onChange:m})}):null}function ho(t,e){B.logStructuredEvent(lJ,T({type:t},e?{connectorInfo:e}:{}))}function int(t){if(t==="hero"){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_HERO_SCREEN_SHOWN);return}if(t==="interests"){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_SHOWN);return}ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_SHOWN)}function lnt(t){ho(t==="hero"?po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_HERO_SCREEN_CLOSED:t==="interests"?po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_CLOSED:po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_CLOSED)}function cnt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_HERO_SCREEN_GET_STARTED_CLICKED)}function unt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_NEXT_CLICKED)}function dnt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_DONE_CLICKED)}function fnt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_INTEREST_SCREEN_ITEM_TAPPED)}function mnt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_SKIP_CLICKED)}function pnt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_CONNECT_CLICKED)}function gnt(t){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_CONNECTOR_SCREEN_CONNECT_SUCCESS,t)}function hnt(){ho(po.CHATGPT_PULSE_ONBOARDING_EVENT_TYPE_LOADING_SCREEN_NOTIFICATION_SETTINGS_CLICKED)}function _nt(t){"use forget";const e=F.c(3),{onClose:s,onBack:n,backAriaLabel:o,closeAriaLabel:a,showBack:i,showClose:l,buttonBackgroundClassName:c}=t,u=i===void 0?!1:i,d=l===void 0?!0:l,f=c===void 0?"!bg-white":c;let m;sa()?m=z("pointer-events-auto flex h-8 w-8 items-center justify-center rounded-full transition focus:outline-hidden","text-token-text-inverted"):m=z("pointer-events-auto flex h-8 w-8 items-center justify-center rounded-full transition focus:outline-hidden","text-token-text-primary");const g="pointer-events-none absolute inset-x-0 top-0 z-20 flex items-start justify-between px-9 pt-9",h=u?r.jsx("button",{type:"button",onClick:()=>n==null?void 0:n(),"aria-label":o,className:z(m,f),disabled:!n,children:r.jsx(Wx,{"aria-hidden":!0})}):r.jsx("span",{className:"h-8 w-8"}),_=d?r.jsx("button",{type:"button",onClick:s,"aria-label":a,className:z(m,f),children:r.jsx(Rn,{"aria-hidden":!0})}):r.jsx("span",{className:"h-8 w-8"});let b;return e[0]!==h||e[1]!==_?(b=r.jsxs("div",{className:g,children:[h,_]}),e[0]=h,e[1]=_,e[2]=b):b=e[2],b}const Wye=3e3,qye=[{opacity:1,scale:1,translateY:0,zIndex:30},{opacity:1,scale:.94,translateY:18,zIndex:20}];function Kye(t){"use forget";const e=F.c(12),{cards:s}=t,n=s.length,[o,a]=x.useState(0);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{a(0)},e[0]=i):i=e[0];let l;e[1]!==n?(l=[n],e[1]=n,e[2]=l):l=e[2],x.useEffect(i,l);let c,u;if(e[3]!==n?(c=()=>{if(n<=1)return;const p=window.setInterval(()=>{a(g=>(g+1)%n)},Wye);return()=>{window.clearInterval(p)}},u=[n],e[3]=n,e[4]=c,e[5]=u):(c=e[4],u=e[5]),x.useEffect(c,u),!n)return null;let d;e[6]!==o||e[7]!==n?(d=n===1?[o]:[o,(o+1)%n],e[6]=o,e[7]=n,e[8]=d):d=e[8];const f=d;let m;return e[9]!==s||e[10]!==f?(m=r.jsx("div",{className:"flex flex-col items-center justify-center gap-12",children:r.jsx("div",{className:"relative h-[160px] w-[393px]",children:f.map((p,g)=>{const h=qye[g],_=s[p];return r.jsx("div",{className:"absolute inset-0",style:{opacity:h.opacity,transform:"translateY(".concat(h.translateY,"px) scale(").concat(h.scale,")"),transformOrigin:"center",transition:"transform 800ms ease, opacity 800ms ease",zIndex:h.zIndex,pointerEvents:g===0?"auto":"none"},"aria-hidden":g!==0,children:r.jsx("div",{className:"h-full w-full",children:_})},p)})})}),e[9]=s,e[10]=f,e[11]=m):m=e[11],m}const Mc=t=>{"use forget";var w;const e=F.c(31);let s,n,o,a;e[0]!==t?(w=t,{className:o,fallbackSrc:s,shadow:a}=w,n=De(w,["className","fallbackSrc","shadow"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a):(s=e[1],n=e[2],o=e[3],a=e[4]);const i=o===void 0?"":o,l=a===void 0?!1:a,c=ne();let u;e[5]!==s||e[6]!==n.src?(u=()=>n.src?"primary":s?"fallback":"error",e[5]=s,e[6]=n.src,e[7]=u):u=e[7];const[d,f]=x.useState(u);let m,p;e[8]!==s||e[9]!==n.src?(m=()=>{const k=n.src?"primary":s?"fallback":"error";f(E=>E===k?E:k)},p=[n.src,s],e[8]=s,e[9]=n.src,e[10]=m,e[11]=p):(m=e[10],p=e[11]),x.useEffect(m,p);const g=d==="primary"?n.src:s!=null?s:void 0,h=l&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let _;e[12]!==i||e[13]!==h?(_=z("rounded-2xl object-cover aspect-square",h,i),e[12]=i,e[13]=h,e[14]=_):_=e[14];const b=_;if(!g||d==="error"){let k;return e[15]!==b||e[16]!==n.onClick||e[17]!==l?(k=r.jsx(Yye,{onClick:n.onClick,className:b,shadow:l}),e[15]=b,e[16]=n.onClick,e[17]=l,e[18]=k):k=e[18],k}let y;e[19]!==c?(y=c.formatMessage({id:"syAyIZ",defaultMessage:"Image attachment"}),e[19]=c,e[20]=y):y=e[20];let v;e[21]===Symbol.for("react.memo_cache_sentinel")?(v=k=>{const{currentTarget:E}=k;(E.naturalWidth<30||E.naturalHeight<30)&&f("error")},e[21]=v):v=e[21];let S;e[22]!==s||e[23]!==d?(S=k=>{const{currentTarget:E}=k;d==="primary"&&s&&E.src!==s?f("fallback"):f("error")},e[22]=s,e[23]=d,e[24]=S):S=e[24];let C;return e[25]!==b||e[26]!==n||e[27]!==g||e[28]!==S||e[29]!==y?(C=r.jsx("img",U(T({},n),{alt:y,loading:"eager",src:g,className:b,onLoad:v,onError:S})),e[25]=b,e[26]=n,e[27]=g,e[28]=S,e[29]=y,e[30]=C):C=e[30],C},Yye=t=>{"use forget";const e=F.c(7),{className:s,shadow:n,onClick:o}=t,a=n&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let i;e[0]!==s||e[1]!==a?(i=z("border-token-[#0285FF17] flex items-center justify-center rounded-2xl border bg-[#DFEFFF] object-cover p-2",a,s),e[0]=s,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(yT,{className:"text-token-text-accent aspect-square h-1/3 w-1/3"}),e[3]=l):l=e[3];let c;return e[4]!==o||e[5]!==i?(c=r.jsx("div",{onClick:o,className:i,children:l}),e[4]=o,e[5]=i,e[6]=c):c=e[6],c};function Qye({title:t,imageUrl:e,fallbackImageUrl:s}){return r.jsxs("div",{className:"flex h-[160px] w-[393px] flex-row items-center gap-4 rounded-[24px] border border-black/10 bg-white p-4",style:{boxShadow:"0px 4px 16px 0px rgba(0,0,0,0.05)"},children:[r.jsx(Mc,{className:"h-[128px] w-[128px] flex-shrink-0 rounded-[16px]",fallbackSrc:s,src:e!=null?e:void 0,shadow:!0}),r.jsx("p",{className:"text-xl leading-[25px] font-medium text-black",children:t})]})}const Jye="https://persistent.oaistatic.com/chatgpt/pulse/hero-banner.webp",Zye="https://persistent.oaistatic.com/chatgpt/pulse/hero-banner.webp",Au=Ne({title:{id:"pulse.onboarding.modal.hero.title",defaultMessage:"Pulse can help you stay on top of anything."},body:{id:"pulse.onboarding.modal.hero.body",defaultMessage:"Each day, it curates research and reminders based on your goals, plans, and ongoing tasks."},cta:{id:"pulse.onboarding.modal.hero.cta",defaultMessage:"Get started"},heroCardRunning:{id:"pulse.onboarding.modal.hero.cardRunning",defaultMessage:"Hudson Valley trails for your running goals"},heroCardDinner:{id:"pulse.onboarding.modal.hero.cardDinner",defaultMessage:"Easy weeknight vegetarian dinners"},heroCardTravel:{id:"pulse.onboarding.modal.hero.cardTravel",defaultMessage:"Travel ideas for your London trip"}});function xnt(t){"use forget";const e=F.c(5),{headingId:s,descriptionId:n,onGetStarted:o,previewItems:a}=t;let i;return e[0]!==n||e[1]!==s||e[2]!==o||e[3]!==a?(i={content:r.jsx(Xye,{headingId:s,descriptionId:n,onGetStarted:o,previewItems:a}),footerContent:null},e[0]=n,e[1]=s,e[2]=o,e[3]=a,e[4]=i):i=e[4],i}function Xye(t){"use forget";var w;const e=F.c(26),{headingId:s,descriptionId:n,onGetStarted:o,previewItems:a}=t,l=sa()?Zye:Jye,c=ne();let u;if(e[0]!==c||e[1]!==a){const k=(w=a==null?void 0:a.filter(tbe))!=null?w:[],E=[{id:"hero-fallback-running",title:c.formatMessage(Au.heroCardRunning),image_url:""},{id:"hero-fallback-dinner",title:c.formatMessage(Au.heroCardDinner),image_url:""},{id:"hero-fallback-travel",title:c.formatMessage(Au.heroCardTravel),image_url:""}];u=(k.length?k:E).map(ebe),e[0]=c,e[1]=a,e[2]=u}else u=e[2];const d=u;let f;e[3]!==l?(f=r.jsx("img",{src:l,className:"w-full object-cover object-bottom",alt:""}),e[3]=l,e[4]=f):f=e[4];let m;e[5]!==d?(m=r.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx(Kye,{cards:d})})}),e[5]=d,e[6]=m):m=e[6];let p;e[7]!==f||e[8]!==m?(p=r.jsxs("div",{className:"relative flex h-full min-h-[364px] flex-1 overflow-x-clip",children:[f,m]}),e[7]=f,e[8]=m,e[9]=p):p=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(j,T({},Au.title)),e[10]=g):g=e[10];let h;e[11]!==s?(h=r.jsx("p",{id:s,className:"text-token-text-primary text-[28px] font-normal",children:g}),e[11]=s,e[12]=h):h=e[12];let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(j,T({},Au.body)),e[13]=_):_=e[13];let b;e[14]!==n?(b=r.jsx("p",{id:n,className:"text-token-text-primary mt-4 text-base",children:_}),e[14]=n,e[15]=b):b=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(j,T({},Au.cta)),e[16]=y):y=e[16];let v;e[17]!==o?(v=r.jsx(ke,{className:"mt-9 h-12 rounded-full",color:"primary",fullWidth:!0,size:"large",onClick:o,children:y}),e[17]=o,e[18]=v):v=e[18];let S;e[19]!==v||e[20]!==h||e[21]!==b?(S=r.jsx("div",{className:"flex w-full flex-1 flex-col items-start justify-start p-9 text-start",children:r.jsxs("div",{children:[h,b,v]})}),e[19]=v,e[20]=h,e[21]=b,e[22]=S):S=e[22];let C;return e[23]!==S||e[24]!==p?(C=r.jsxs(r.Fragment,{children:[p,S]}),e[23]=S,e[24]=p,e[25]=C):C=e[25],C}function ebe(t,e){var n,o,a;let s=(o=(n=t.preview)!=null?n:t.title)!=null?o:"";return s.endsWith(".")&&(s=s.slice(0,-1)),r.jsx(Qye,{title:s,imageUrl:t.image_url},(a=t.id)!=null?a:"".concat(t.title,"-").concat(e))}function tbe(t){return!!(t!=null&&t.title)}var sbe=x.useLayoutEffect,nbe=function(e){var s=x.useRef(e);return sbe(function(){s.current=e}),s},lA=function(e,s){if(typeof e=="function"){e(s);return}e.current=s},obe=function(e,s){var n=x.useRef();return x.useCallback(function(o){e.current=o,n.current&&lA(n.current,null),n.current=s,s&&lA(s,o)},[s])},cA={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},abe=function(e){Object.keys(cA).forEach(function(s){e.style.setProperty(s,cA[s],"important")})},uA=abe,Xn=null,dA=function(e,s){var n=e.scrollHeight;return s.sizingStyle.boxSizing==="border-box"?n+s.borderSize:n-s.paddingSize};function rbe(t,e,s,n){s===void 0&&(s=1),n===void 0&&(n=1/0),Xn||(Xn=document.createElement("textarea"),Xn.setAttribute("tabindex","-1"),Xn.setAttribute("aria-hidden","true"),uA(Xn)),Xn.parentNode===null&&document.body.appendChild(Xn);var o=t.paddingSize,a=t.borderSize,i=t.sizingStyle,l=i.boxSizing;Object.keys(i).forEach(function(m){var p=m;Xn.style[p]=i[p]}),uA(Xn),Xn.value=e;var c=dA(Xn,t);Xn.value=e,c=dA(Xn,t),Xn.value="x";var u=Xn.scrollHeight-o,d=u*s;l==="border-box"&&(d=d+o+a),c=Math.max(d,c);var f=u*n;return l==="border-box"&&(f=f+o+a),c=Math.min(f,c),[c,u]}var fA=function(){},ibe=function(e,s){return e.reduce(function(n,o){return n[o]=s[o],n},{})},lbe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],cbe=!!document.documentElement.currentStyle,ube=function(e){var s=window.getComputedStyle(e);if(s===null)return null;var n=ibe(lbe,s),o=n.boxSizing;if(o==="")return null;cbe&&o==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var a=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:a,borderSize:i}},dbe=ube;function OB(t,e,s){var n=nbe(s);x.useLayoutEffect(function(){var o=function(i){return n.current(i)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var fbe=function(e){OB(window,"resize",e)},mbe=function(e){OB(document.fonts,"loadingdone",e)},pbe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],gbe=function(e,s){var n=e.cacheMeasurements,o=e.maxRows,a=e.minRows,i=e.onChange,l=i===void 0?fA:i,c=e.onHeightChange,u=c===void 0?fA:c,d=cJ(e,pbe),f=d.value!==void 0,m=x.useRef(null),p=obe(m,s),g=x.useRef(0),h=x.useRef(),_=function(){var v=m.current,S=n&&h.current?h.current:dbe(v);if(S){h.current=S;var C=rbe(S,v.value||v.placeholder||"x",a,o),w=C[0],k=C[1];g.current!==w&&(g.current=w,v.style.setProperty("height",w+"px","important"),u(w,{rowHeight:k}))}},b=function(v){f||_(),l(v)};return x.useLayoutEffect(_),fbe(_),mbe(_),x.createElement("textarea",uJ({},d,{onChange:b,ref:p}))},ynt=x.forwardRef(gbe);const LB="DEFAULT",hbe=Bt(()=>Le(LB)),pn={recentPulse:["recent-pulse"],pulseCard:t=>["pulse-card",t],pulseEntrypoint:["pulse-entrypoint"],pulseHistory:["pulse-history"]},_be=["pulse-entrypoint","live"],xbe=["recent-pulse","live"],mA={useCache:!0};function bT(t,e){t.setQueryData(pn.pulseCard(e.id),e)}const DB=t=>t!==void 0,FB=(t,e,s)=>{if(Hp(t)&&t.id===e)return s(t);if(iL(t)){const n=t.items.map(o=>FB(o,e,s)).filter(DB);return n.length===0?void 0:U(T({},t),{items:n})}return t};function BB(t,e,s){t.setQueryData(pn.pulseCard(e),n=>n&&s(n)),t.setQueryData(pn.recentPulse,n=>n&&U(T({},n),{items:n.items.map(o=>FB(o,e,s)).filter(DB)}))}function ybe(t,e){BB(t,e,()=>{})}function bnt(t,e,s){BB(t,e,n=>U(T({},n),{conversation_id:s}))}const Qx=t=>Object.keys(t).length===0,bbe=uf((t,e)=>Qn(t,()=>Ps({queryKey:["pulse-feed",e],queryFn:async()=>{const s=await de.safeGet("/feed/mixed/{feed_variant_id}",{parameters:{path:{feed_variant_id:e}}});return Qx(s)?null:(s.items.filter(Hp).forEach(n=>{bT(ln(t),n)}),s)}}),{enabled$:()=>Sf(t)})),UB=Bt(t=>Qn(t,()=>Ps({queryKey:pn.recentPulse,queryFn:async()=>{const e=await de.safeGet("/feed/mixed");return Qx(e)?null:(e.items.filter(Hp).forEach(s=>{bT(ln(t),s)}),e)}}),{enabled$:()=>Sf(t)})),vbe=Bt(t=>Qn(t,()=>Ps({queryKey:xbe,queryFn:async()=>{const e=await de.safeGet("/feed/mixed");return Qx(e)?null:(e.items.filter(Hp).forEach(s=>{bT(ln(t),s)}),e)},staleTime:0,gcTime:0}),{enabled$:()=>Sf(t)})),Sbe=t=>{UB.prefetch(t)},vnt=t=>{vbe.prefetch(t)},ig=Bt(t=>vt(()=>{const e=hbe(t);return e&&e!==LB?bbe(t,e):UB(t)})),Cbe=uf((t,e)=>Qn(t,()=>{const{useCache:s=mA.useCache}=e!=null?e:{},n=s?pn.pulseEntrypoint:_be;return Ps({queryKey:n,queryFn:async()=>{const o=await de.safeGet("/feed/entrypoint");return Qx(o)?null:o},staleTime:s?300*1e3:0,gcTime:s?300*1e3:0,refetchOnMount:s?void 0:"always",refetchOnReconnect:s?void 0:"always",refetchOnWindowFocus:s?void 0:"always"})},{enabled$:()=>tde(t)}),t=>{var e;return JSON.stringify({useCache:(e=t==null?void 0:t.useCache)!=null?e:mA.useCache})}),Jx=Cbe,wbe=uf(t=>Qn(t,()=>Ps({queryKey:["cocoon-entrypoint"],queryFn:async()=>{var o;const s=await de.safeGet("/feed/cocoon/entrypoint");if(!s)return null;const n=s.convo_id;return n?{conversationId:n,title:s.title,caption:s.caption,videoUrl:(o=s.preview_video_url)!=null?o:void 0}:null},staleTime:1/0,gcTime:1/0,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1}),{enabled$:()=>ede(t)})),kbe=wbe,Tbe=Bt(t=>vt(()=>{var e,s;return(s=(e=ig(t).data)==null?void 0:e.feedback)==null?void 0:s.feedback_conversation_id})),Ebe=ys(t=>X_(t,{mutationFn:async()=>await de.safePost("/feed/feedback/conversation/delete"),onSuccess:()=>{ln(t).invalidateQueries({queryKey:pn.recentPulse})}})),$B=t=>{"use forget";const e=F.c(11),s=G();let n;e[0]!==t?(n=pn.pulseCard(t),e[0]=t,e[1]=n):n=e[1];let o;e[2]!==t?(o=async()=>{if(!t)throw new Error("Card ID is required");return await de.safeGet("/feed/card/{card_id}",{parameters:{path:{card_id:t}}})},e[2]=t,e[3]=o):o=e[3];let a;e[4]!==t||e[5]!==s?(a=bk(s)&&!!t,e[4]=t,e[5]=s,e[6]=a):a=e[6];let i;return e[7]!==n||e[8]!==o||e[9]!==a?(i={queryKey:n,queryFn:o,enabled:a},e[7]=n,e[8]=o,e[9]=a,e[10]=i):i=e[10],dt(i)},Mbe=t=>{"use forget";const e=F.c(12),s=Gt();let n;e[0]!==t?(n=async c=>c==="remove"?await de.safeDelete("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}}}):await de.safePost("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}},requestBody:{emoji:c}}),e[0]=t,e[1]=n):n=e[1];let o,a,i;e[2]!==t||e[3]!==s?(o=async c=>{await s.cancelQueries({queryKey:pn.pulseCard(t)});const u=s.getQueryData(pn.pulseCard(t));return u&&s.setQueryData(pn.pulseCard(t),U(T({},u),{reaction:c})),{previousCard:u}},a=(c,u,d)=>{d!=null&&d.previousCard&&s.setQueryData(pn.pulseCard(t),d.previousCard)},i=(c,u,d)=>{const{emoji:f}=c,{previousCard:m}=d;s.setQueryData(pn.pulseCard(t),U(T({},m),{reaction:f}))},e[2]=t,e[3]=s,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==n||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:n,onMutate:o,onError:a,onSuccess:i},e[7]=n,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],ds(l)},Nbe=t=>{"use forget";const e=F.c(12),s=Gt();let n;e[0]!==t?(n=async c=>c==="save"?await de.safePut("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}):await de.safeDelete("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}),e[0]=t,e[1]=n):n=e[1];let o,a,i;e[2]!==t||e[3]!==s?(o=async c=>{await s.cancelQueries({queryKey:pn.pulseCard(t)});const u=s.getQueryData(pn.pulseCard(t));return u&&s.setQueryData(pn.pulseCard(t),U(T({},u),{is_saved:c==="save"})),{previousCard:u}},a=(c,u,d)=>{d!=null&&d.previousCard&&s.setQueryData(pn.pulseCard(t),d.previousCard)},i=(c,u,d)=>{const{saved:f}=c,{previousCard:m}=d;s.setQueryData(pn.pulseCard(t),U(T({},m),{is_saved:f}))},e[2]=t,e[3]=s,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==n||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:n,onMutate:o,onError:a,onSuccess:i},e[7]=n,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],ds(l)},Snt=(t,e)=>{"use forget";const s=F.c(3);let n;return s[0]!==t||s[1]!==e?(n={mutationFn:async()=>await de.safePost("/feed/interactions",{requestBody:{events:[{type:"proactive_connectors_declined",connector_ids:t,item_id:e,timestamp:new Date().toISOString()}]}})},s[0]=t,s[1]=e,s[2]=n):n=s[2],ds(n)},Cnt=ys(t=>X_(t,{mutationFn:async e=>await de.safePost("/feed/onboarding/preferences",{requestBody:{selected_suggestions:e}}),onSuccess:()=>{ln(t).invalidateQueries({queryKey:pn.recentPulse})}})),wnt=Bt(t=>Qn(t,()=>Ps({queryKey:pn.pulseHistory,queryFn:async()=>await de.safeGet("/feed/history")}),{enabled$:()=>Sf(t)})),knt=ys(t=>X_(t,{mutationFn:async({taskId:e,action:s})=>await de.safePost("/feed/task-pause-survey/submit",{requestBody:{task_id:e,action:s}}),onSuccess:({task_id:e})=>{ln(t).invalidateQueries({queryKey:gl.getAutomationQueryKey(e)})}})),Tnt=ys(t=>X_(t,{mutationFn:async({cardId:e})=>await de.safePut("/feed/card/{card_id}/dismiss",{parameters:{path:{card_id:e}}}),onMutate:async({cardId:e})=>{ybe(ln(t),e)}}));function Abe(t){return Ps({queryKey:gl.getAutomationQueryKey(t),queryFn:async()=>{const e=await gl.getAutomation(t);return Jp.setAutomation(t,e),e},enabled:t.length>0})}const HB=uf((t,e)=>{const s=dJ(Qp,{selector:o=>Zp.getAutomation(e,o)}),n=Qn(t,()=>Abe(e));return vt(()=>({automation:s()||n().data,error:n().error}))});function vT(t){const e=G();return oe(()=>HB(e,t))}const Ibe="".concat(C6,":DUMMY_PULSE");var Fr=(t=>(t.Card="card",t.Feedback="feedback",t))(Fr||{}),qs=(t=>(t.OnCard="on-card",t.Conversation="conversation",t.Preview="preview",t.TaskEdit="sugarbone-edit",t))(qs||{});const jbe={type:"preview"},_i=oa(t=>{const e=Le(null),s=e.set;return e.set=n=>{const o=xt(e);s(n);const a=xt(e);o&&!K1(a,o)&&Dbe(t,o),a&&!K1(a,o)&&Lbe(t,a)},e}),Pbe=oa(t=>vt(()=>_i(t)!=null));function $d(t,e){_i.set(t,e)}function fd(t){_i.set(t,null)}function GB(t,e,s){const n=xt(()=>_i(t));n&&K1(e,n)?ss(e,"searchSources")&&ss(n,"searchSources")&&n.scrollToHeader!==e.scrollToHeader?_i.set(t,U(T({},e),{shouldAnimateScroll:!0})):fd(t):(s==null||s(),$d(t,e))}function K1(t,e){return t===e?!0:!t||!e?!1:ss(t,"searchSources")&&ss(e,"searchSources")?e.messageId===t.messageId:ss(t,"caterpillar")&&ss(e,"caterpillar")?e.caterpillarId===t.caterpillarId&&e.initialTab===t.initialTab:ss(t,"summarizer")&&ss(e,"summarizer")?e.turnIndex===t.turnIndex:ss(t,"cot")&&ss(e,"cot")?e.turnIndex===t.turnIndex&&e.reasoningGroupIndex===t.reasoningGroupIndex:ss(t,"retrievalResults")&&ss(e,"retrievalResults")?e.turnIndex===t.turnIndex&&e.messageId===t.messageId:ss(t,"n7jupdSources")&&ss(e,"n7jupdSources")||ss(t,"n7jupdTabs")&&ss(e,"n7jupdTabs")?e.messageId===t.messageId:ss(t,"codingCitations")&&ss(e,"codingCitations")?e.messageId===t.messageId&&e.matchedText===t.matchedText:ss(t,"product")&&ss(e,"product")?e.messageId===t.messageId&&e.turnIndex===t.turnIndex&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.productIndex===t.productIndex:ss(t,"product_agent")&&ss(e,"product_agent")?e.product.id===t.product.id:ss(t,"entity")&&ss(e,"entity")?e.messageId===t.messageId&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.query===t.query&&e.category===t.category:ss(t,"strix")&&ss(e,"strix")?e.entityId===t.entityId:ss(t,"pulse")&&ss(e,"pulse")?!(t.feedbackViewType===qs.Preview&&(e.feedbackViewType===qs.TaskEdit||e.feedbackViewType===qs.Conversation)):!1}function Er(t){"use forget";const e=F.c(2),s=aa(),n=t!=null?t:s;rge();let o;return e[0]!==n?(o={openThreadSidebar:a=>{n&&$d(n,a)},closeThreadSidebar:()=>{n&&fd(n)},toggleThreadSidebar:(a,i)=>{n&&GB(n,a,i)}},e[0]=n,e[1]=o):o=e[1],o}function ss(t,e){return(t==null?void 0:t.type)===e}function Rbe(){"use forget";const t=F.c(2),e=aa();let s;return t[0]!==e?(s=()=>e!=null&&Pbe(e),t[0]=e,t[1]=s):s=t[1],oe(s)}function Obe(){"use forget";const t=F.c(2),e=aa();let s;return t[0]!==e?(s=()=>e!=null?_i(e):null,t[0]=e,t[1]=s):s=t[1],oe(s)}function pA(t){"use forget";const e=F.c(3),s=aa();let n;return e[0]!==s||e[1]!==t?(n=()=>{const o=s!=null?_i(s):null;if(o&&ss(o,t))return o},e[0]=s,e[1]=t,e[2]=n):n=e[2],oe(n)}const Lbe=(t,e)=>{if(ss(e,"searchSources")){const{turnIndex:s,messageId:n}=e;B.logEventWithStatsig("Search Links Sidebar Shown","search_links_sidebar_shown",Fs({turnIndex:s,clientThreadId:t.id,messageId:n}))}else if(ss(e,"product")){const{turnIndex:s,messageId:n,contentReferenceStartIndex:o,productId:a,productIndex:i,productUrl:l,interactionSource:c}=e;B.logEventWithStatsig("Product Sidebar Shown","product_sidebar_shown",U(T({},Fs({turnIndex:s,clientThreadId:t.id,messageId:n})),{content_reference_start_index:o,product_index:(i+1).toString(),product_url:l,product_id:a,interaction_source:c}))}else if(ss(e,"retrievalResults")){const{turnIndex:s}=e;B.logEventWithStatsig("File Sources Sidebar Shown","file_sources_sidebar_shown",T({},Fs({turnIndex:s,clientThreadId:t.id})))}},Dbe=(t,e)=>{if(ss(e,"searchSources")){const{messageId:s,turnIndex:n}=e;B.logEventWithStatsig("Search Links Sidebar Closed","search_links_sidebar_closed",Fs({clientThreadId:t.id,messageId:s,turnIndex:n}))}else if(ss(e,"product")){const{messageId:s,turnIndex:n,contentReferenceStartIndex:o,productIndex:a,productId:i}=e;B.logEventWithStatsig("Product Sidebar Closed","product_sidebar_closed",U(T({},Fs({turnIndex:n,clientThreadId:t.id,messageId:s})),{content_reference_start_index:o,product_index:(a+1).toString(),product_id:i}))}else if(ss(e,"retrievalResults")){const{turnIndex:s}=e;B.logEvent("File Sources Sidebar Closed",Fs({clientThreadId:t.id,turnIndex:s}))}},rb=Pe(()=>me(()=>import("./b85im3an1hkdbtlf.js"),__vite__mapDeps([198,1,3,4,199,143,144,128,129,130,131,132,133,134,135,39,136,137,138,139,140,141,142])).then(t=>t.PulseFeedbackConversationModal)),ib=Pe(()=>me(()=>import("./ih9kmj09tggp8llw.js"),__vite__mapDeps([200,1,128,3,4,129,130,131,132,133,134,135,39,136,137,138,139,140,141,142,199,143,144])).then(t=>t.PulseCardConversationModal)),ao=ys(t=>{const e=Et(t,Ibe),s=Le(null),n=Le(void 0),o=vt(()=>{const y=s();return(y==null?void 0:y.type)===Fr.Card?y.cardId:null}),a=vt(()=>{var y;return((y=s())==null?void 0:y.type)===Fr.Card}),i=vt(()=>{var y;return((y=s())==null?void 0:y.type)===Fr.Feedback}),l=vt(()=>{const y=s();return(y==null?void 0:y.type)===Fr.Feedback?y.feedbackState:null}),c=()=>{s.set(null),n.set(void 0),fd(e)},u=()=>{s.set(null),pm(t)?fd(e):Un(t,ib)},d=(y,v)=>{s.set({type:Fr.Card,cardId:y}),pm(t)?$d(e,{type:"pulse",viewType:Fr.Card}):qv(t,ib)||mt(t,ib,{onClose:()=>{v(),u()}})},f=()=>{s.set(null),n.set(void 0),pm(t)?fd(e):Un(t,rb)},m=y=>{switch(y==null?void 0:y.type){case qs.OnCard:n.set({type:"cardReply",cardId:y.cardId});break;case qs.TaskEdit:n.set({type:"sugarboneReply",taskId:y.taskId,composerMessage:y.composerMessage,taskName:xt(()=>HB(t,y.taskId)).automation.title});break;case qs.Preview:n.set(y.populatePrompt);break;default:n.set(void 0);break}},p=(y=jbe)=>{s.set({type:Fr.Feedback,feedbackState:y}),m(y),pm(t)?$d(e,{type:"pulse",viewType:Fr.Feedback,feedbackViewType:y==null?void 0:y.type}):qv(t,rb)||mt(t,rb,{onClose:f})},g=(y,v)=>{p({type:qs.TaskEdit,taskId:y,composerMessage:v})},h=(y,v)=>{m({type:qs.TaskEdit,taskId:y,composerMessage:v})},_=()=>{n.set(void 0)},b=vt(()=>{const y=n();return(y==null?void 0:y.type)!=="sugarboneReply"?null:y.taskId});return{autoSendCompletion:void 0,shouldAutoSendCompletion$:Le(!1),populatePrompt$:n,clearPopulatePrompt:_,activeCardId$:o,viewState$:s,isCardViewOpen$:a,_openCardView:d,selectedTaskReplyId$:b,isFeedbackViewOpen$:i,feedbackViewState$:l,openFeedbackView:p,openTaskView:g,prefillTaskReply:h,_closeCardView:u,closeFeedbackView:f,clearState:c}}),VB=Bt(t=>vt(()=>{var s;const{data:e}=ig(t);return Sk((s=e==null?void 0:e.items)!=null?s:[])})),Fbe=Bt(t=>vt(()=>VB(t).find(e=>e.id===ao(t).activeCardId$())));var ST=(t=>(t.Sidebar="sidebar",t.Chat="chat",t.Url="url",t.AnnouncementBanner="announcement_banner",t))(ST||{});const zB=Bt(()=>Le(void 0)),Gn=ys(t=>{let e;return Zo(()=>{var s,n,o,a;return(a=(o=(s=ig(t).data)==null?void 0:s.id)!=null?o:(n=Jx(t).data)==null?void 0:n.id)!=null?a:void 0},s=>{e=s},{fireImmediately:!0}),{logEventWithStatsig:(s,n,o)=>{const a=e?U(T({},o),{feed_id:e}):o;B.logEventWithStatsig(s,n,a)}}});var Bbe=(t=>(t.NOT_STARTED="not_started",t.SUBMITTED_PENDING_FEED="submitted_pending_feed",t.FINISHED_WITH_FEED="finished_with_feed",t))(Bbe||{});const Nf=ue(Ce,"266724",20,20),Ube=Object.freeze(Object.defineProperty({__proto__:null,default:Nf},Symbol.toStringTag,{value:"Module"}));function Zx(t){return Ht(t).state.doc.textContent}function $be(t){return new Promise((e,s)=>{const n=new Image;n.crossOrigin="anonymous",n.fetchPriority="high",n.onload=()=>{e(n)},n.onerror=o=>{s(o)},n.src=t})}function WB(t,e,s,n){return Zo(()=>e(t),o=>{o.status==="success"&&!o.isPlaceholderData&&typeof o.data!="function"&&s.set(t,n(o.data))})}const qB=25,Hbe=4,KB="__optimistic__",YB=1440*60*1e3,QB=t=>t<1e12?t*1e3:t;function Gbe(t){switch(t){case"image_card":return Rg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_IMAGE_CARD;case"portrait":return Rg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_PORTRAIT;case"text_pill":return Rg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_TEXT_PILL;case"icon_pill":return Rg.CHATGPT_IMAGE_PROMPT_GROUP_PRESENTATION_TYPE_ICON_PILL;default:return}}function Ent(){const t=jt();return Xe(t,"3360722522").get("auto_send_with_attachments",!1)}function Vbe(){const t=jt();return Xe(t,"3360722522").get("cache_recent_images",!1)}function gA(){const t=jt();return Xe(t,"3360722522").get("cache_recent_uploads",!1)}function zbe(){return Ps({queryKey:["imagesStyles"],queryFn:()=>de.safeGet("/images/styles",{authOption:is.SendIfAvailable})})}const hA=Bt(()=>Le(!1));function Wbe(){return Ps({queryKey:["imageGenPrompts"],queryFn:async()=>{var n,o,a;const t=await de.safeGet("/images/init",{authOption:is.SendIfAvailable}),e=(a=(o=(n=t.groups)==null?void 0:n[0])==null?void 0:o.items)==null?void 0:a[0].image_url,s=jt();return e&&!hA(s)&&($be(e),hA.set(s,!0)),t}})}async function qbe(t,e,s,n){const o=await nve(t,e,s,n);ln(jt()).setQueryData(["recentImages"],i=>{if(!i)return i;const[l,...c]=i.pages;if(l!=null&&l.items.some(d=>d.id===o.id))return i;const u=l?U(T({},l),{items:[o,...l.items]}):{items:[o],cursor:null};return U(T({},i),{pages:[u,...c]})})}const JB=Bt(()=>Cl(Be.RecentUploads,()=>({items:[],accountId:null,v:"1"}))),zh="1",CT="1",Kbe=Bt(()=>vt(()=>{var o;const t=JB(jt()),e=ct(jt()),s=Date.now();return(e==null?void 0:e.id)!==t.accountId||t.v!==zh?{items:[],accountId:null,v:zh}:{items:t.items.filter(a=>QB(a.timestamp)>s-YB),accountId:(o=e==null?void 0:e.id)!=null?o:null,v:zh}}));function Ybe(t,e,s){const n={limit:s};return Ps({queryKey:["recentUploads",s],staleTime:120*1e3,placeholderData:e?()=>({items:xt(()=>Kbe(t)).items}):void 0,queryFn:()=>de.safeGet("/my/recent/uploaded_images",{parameters:{query:n}}),select:o=>o.items})}const Qbe=Bt(t=>{const e=gA(),s=ct(t),n=Qn(t,()=>Ybe(t,gA(),Hbe));return e&&WB(t,n,JB,o=>{var a;return{items:o,accountId:(a=s==null?void 0:s.id)!=null?a:null,v:zh}}),n});function Jbe(t,e){return Xq({queryKey:["recentImages"],staleTime:120*1e3,queryFn:({pageParam:s})=>de.safeGet("/my/recent/image_gen",{authOption:is.SendIfAvailable,parameters:{query:{limit:qB,after:s}}}),placeholderData:e?()=>({pages:[{items:xt(()=>Zbe(t)),cursor:null}],pageParams:[null]}):void 0,enabled:()=>ut(),initialPageParam:null,getNextPageParam:s=>{var n;return(n=s.cursor)!=null?n:void 0},select:s=>s.pages.flatMap(n=>n.items).map(n=>sve(n))})}const Xx=Bt(t=>Qn(t,()=>zbe())),ZB=Bt(t=>Qn(t,()=>Wbe())),XB=Bt(()=>Cl(Be.RecentImages,()=>({items:[],accountId:null,v:CT}))),Zbe=Bt(t=>vt(()=>{const e=XB(t),s=ct(t),n=Date.now();return(s==null?void 0:s.id)!==e.accountId||e.v!==CT?[]:e.items.filter(o=>typeof o.created_at!="number"?!0:QB(o.created_at)>n-YB)})),Xbe=Bt(t=>{const e=Vbe(),s=ct(t),n=fJ(t,()=>Jbe(t,e));return e&&WB(t,n,XB,o=>{var i;return{items:(o!=null?o:[]).filter(l=>!l.id.startsWith(KB)).map(u=>{var d=u,{createdAt:l}=d,c=De(d,["createdAt"]);return c}).slice(0,qB),accountId:(i=s==null?void 0:s.id)!=null?i:null,v:CT}}),n}),Mnt=Bt(t=>vt(()=>{var l,c,u,d,f;const e=Xx(t),s=ZB(t),n=new Set(((c=(l=e.data)==null?void 0:l.styles)!=null?c:[]).map(m=>m.id)),a=((f=(d=(u=s.data)==null?void 0:u.groups)==null?void 0:d.flatMap(m=>{var p;return(p=m.items)==null?void 0:p.map(g=>U(T({},g),{group:m}))}))!=null?f:[]).filter(ex).filter(m=>m.id!=null&&n.has(m.id)),i=Object.fromEntries(a.map(m=>[m.id,m.group]));return{items:a,itemToGroup:i}}));function Nnt(t){var e;return{id:t.id,title:t.title,label:t.title,imageUrl:(e=t.image_url)!=null?e:"",width:void 0,height:void 0,textToImagePrompt:t.prompt_text,imageToImagePrompt:t.prompt_text}}function eve(t,e){var n,o;const s={};for(const a of Object.values(e!=null?e:{}))for(const i of(n=a.items)!=null?n:[])i!=null&&i.id&&(s[i.id]={id:i.id,image_url:(o=i.image_url)!=null?o:"",prompt_text:i.prompt_text});return(t!=null?t:[]).map(a=>{var u,d;const i=a.id,l=s[i],c=(u=a.variants)==null?void 0:u[0];return{id:i,title:a.title,label:a.title,imageUrl:(d=c==null?void 0:c.url)!=null?d:l==null?void 0:l.image_url,width:c==null?void 0:c.width_px,height:c==null?void 0:c.height_px,textToImagePrompt:l==null?void 0:l.prompt_text,imageToImagePrompt:l==null?void 0:l.prompt_text}})}const tve=Bt(t=>vt(()=>{var n,o,a,i;const e=Xx(t),s=ZB(t);return eve((o=(n=e.data)==null?void 0:n.styles)!=null?o:[],(i=(a=s.data)==null?void 0:a.groups)!=null?i:[])}));function sve(t){var e,s,n,o,a,i,l,c;return U(T({},t),{archived:(e=t.is_archived)!=null?e:!1,messageId:(s=t.message_id)!=null?s:null,conversationId:(n=t.conversation_id)!=null?n:void 0,transformationId:(o=t.transformation_id)!=null?o:null,assetPointer:(a=t.asset_pointer)!=null?a:null,thumbnail:(c=(l=(i=t.encodings)==null?void 0:i.thumbnail)==null?void 0:l.path)!=null?c:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0})}const Ant=Bt(t=>vt(()=>{const e=Xbe(t);return{images:e.data,isLoading:e.status==="pending",hasNextPage:e.hasNextPage,isFetchingNextPage:e.isFetchingNextPage,fetchNextPage:e.fetchNextPage,refetch:e.refetch}}));async function nve(t,e,s,n){var l,c,u;const o=ln(t),a=await jl.fetch(o,{asset:s,conversationId:e}),i=(u=(c=(l=s.metadata)==null?void 0:l.dalle)==null?void 0:c.gen_id)!=null?u:"";return U(T({},a),{id:"".concat(KB).concat(s.asset_pointer),generation_id:i,generation_type:"image_gen",created_at:Date.now(),message_id:n.id,conversation_id:e,transformation_id:i})}const eU=ys(()=>({isShowingHiddenImages$:Le(!1)})),tU=oa(()=>Le({promptItem:null,group:null})),_A=Gc(()=>Le(null));function ove(t){return Array.from(new Set(t)).sort().join(",")}const ave=Gc(()=>Le([]));function rve(){eU(jt()).isShowingHiddenImages$.set(t=>!t)}function Int(t){return Xe(t,"3360722522").get("composer_suggestions",!1)}function ive(){const t=jt();return Xe(t,"3360722522").get("show_new_badge",!1)}const jnt=Bt(()=>Le(!1));function sU(){const t=jt();return Xe(t,"3360722522").get("images_home_entrypoint_enabled",!1)}function Pnt(){const t=jt();return Xe(t,"3360722522").get("imagegen_loading_shimmer",!1)}function lve(){return sU()?"/images":"/library"}const cve=t=>({visible$:vt(()=>t().activeSystemHintType===Ye.PictureV2)}),Rnt=()=>{"use forget";const t=F.c(2),e=Ko.useStoreSignal();let s;t[0]!==e?(s=()=>cve(e),t[0]=e,t[1]=s):s=t[1];const[n]=x.useState(s);return n},Ont=df(t=>({setImageStyle$:s=>{const{ctx:n,style:o,isEditingImage:a}=s,i=Ht(t),l=Zx(t),c=a?o.imageToImagePrompt:o.textToImagePrompt;if(B.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:o.id,source:"image-gen-story"}),l.trim()===""){w6(i,c);return}const u=l.toLowerCase(),d=tve(n);for(const{textToImagePrompt:f,imageToImagePrompt:m}of d){const g=[f,m].map(h=>{const _=u.indexOf(h.toLowerCase());return _===-1?null:{start:_,end:_+h.length}}).filter(Boolean);if(g.length){const h=Math.min(...g.map(y=>{var v;return(v=y==null?void 0:y.start)!=null?v:0})),_=Math.max(...g.map(y=>{var v;return(v=y==null?void 0:y.end)!=null?v:0})),b=l.substring(h,_).trimEnd();k6(i,b,c);return}}T6(i,c)}})),Lnt=t=>{"use forget";const e=F.c(8),{iconOnly:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=sU(),e[0]=n):n=e[0];const o=n,a=lve(),i=tx(a).toString(),l=Hs().pathname.startsWith(a);let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=ive()?r.jsx(j,{id:"image-gen.images-app.my-images.sidebar-badge",defaultMessage:"New"}):void 0,e[1]=c):c=e[1];let u,d;e[2]===Symbol.for("react.memo_cache_sentinel")?(u={source:KC.CHATGPT_IMAGE_HOME_NAVIGATION_SOURCE_TYPE_SIDE_BAR},d=o?r.jsx(j,{id:"fVw/us",defaultMessage:"Images"}):r.jsx(j,{id:"E56n+Q",defaultMessage:"Library"}),e[2]=u,e[3]=d):(u=e[2],d=e[3]);let f;return e[4]!==s||e[5]!==l||e[6]!==i?(f=r.jsx(la,{"data-testid":"sidebar-item-library",onClick:uve,badge:c,active:l,icon:Nf,to:i,state:u,label:d,iconOnly:s}),e[4]=s,e[5]=l,e[6]=i,e[7]=f):f=e[7],f};function uve(){B.logStructuredEvent(mJ,{menuItem:pJ.CHATGPT_SIDEBAR_MENU_ITEM_IMAGE_HOME})}const nU="/archived";function dve(){"use forget";return _c(nU)!=null}function Dnt(){"use forget";const t=F.c(6),e=ne(),s=dve();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=tx(nU),t[0]=n):n=t[0];let o;t[1]!==e?(o=e.formatMessage(fve),t[1]=e,t[2]=o):o=t[2];let a;return t[3]!==s||t[4]!==o?(a=r.jsx(la,{icon:RD,to:n,active:s,label:o}),t[3]=s,t[4]=o,t[5]=a):a=t[5],a}const fve=Je({id:"WvXi2t",defaultMessage:"Archived chats"});function mve(){const t=G();return oe(()=>{var e,s;return(s=(e=kbe(t))==null?void 0:e.data)!=null?s:void 0})}function pve({fps:t=6,isAnimating:e=!0,className:s}){const n=(1/t).toFixed(4),o=(3/t).toFixed(4);return r.jsx("div",{className:z(s,"grid h-full w-full place-items-center"),children:r.jsxs("svg",{viewBox:"0 0 9 9",role:"img","aria-label":"Pixel star",focusable:"false",className:z("starburst",e?"starburst--animating":"starburst--static"),style:{display:"block",shapeRendering:"crispEdges","--frame":"".concat(n,"s"),"--cycle":"".concat(o,"s")},children:[r.jsx("style",{children:"\n          .starburst .px {\n            fill: var(--text-primary);\n          }\n\n          .starburst .frame {\n            opacity: 0;\n          }\n\n          .starburst--animating .frame {\n            animation: frames var(--cycle) steps(1, end) infinite;\n          }\n\n          .starburst--animating .f1 { animation-delay: 0s; }\n          .starburst--animating .f2 { animation-delay: var(--frame); }\n          .starburst--animating .f3 { animation-delay: calc(var(--frame) * 2); }\n\n          .starburst--static .f3 {\n            opacity: 1;\n          }\n\n          @keyframes frames {\n            0%   { opacity: 1; }\n            33%  { opacity: 1; }\n            34%  { opacity: 0; }\n            100% { opacity: 0; }\n          }\n        "}),r.jsx(gve,{}),r.jsx(hve,{}),r.jsx(_ve,{})]})})}function gve(){return r.jsxs("g",{className:"frame f1",children:[r.jsx("rect",{className:"px",x:"4",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"3",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"5",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"3",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"5",y:"4",width:"1",height:"1"})]})}function hve(){return r.jsxs("g",{className:"frame f2",children:[r.jsx("rect",{className:"px",x:"4",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"2",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"3",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"5",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"6",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"2",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"3",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"5",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"6",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"3",y:"3",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"5",y:"3",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"3",y:"5",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"5",y:"5",width:"1",height:"1"})]})}function _ve(){return r.jsxs("g",{className:"frame f3",children:[r.jsx("rect",{className:"px",x:"1",y:"1",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"7",y:"1",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"1",y:"7",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"7",y:"7",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"0",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"8",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"0",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"8",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"3",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"5",y:"4",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"3",width:"1",height:"1"}),r.jsx("rect",{className:"px",x:"4",y:"5",width:"1",height:"1"})]})}function xve({iconOnly:t}){const e=ne(),s=mve(),n=s==null?void 0:s.conversationId,o="/c/".concat(n),a=!!_c(o),[i,l]=x.useState(!1);return n?r.jsx(la,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),"data-testid":"sidebar-item-yywc",active:a,icon:r.jsx(pve,{isAnimating:i}),to:o,label:e.formatMessage({id:"OM9PNa",defaultMessage:"Your Year With ChatGPT"}),iconOnly:t}):null}function Fnt({iconOnly:t}){return m1("cocoon")?r.jsx(xve,{iconOnly:t}):null}function lg({axis:t,debounce:e,initialSize:s=!0,onChange:n,target:o}){if(!o)return;let a=new AbortController,i=null,l=null,c=s;const u=new ResizeObserver(f=>{f.forEach(m=>{const{width:p,height:g}=yve(m);let h=!1;if(t==="width"){const _=(c||i!=null)&&i!==p;i=p,_&&(h=!0)}else if(t==="height"){const _=(c||l!=null)&&l!==g;l=g,_&&(h=!0)}else if(t==="both"){const _=(c||i!=null)&&i!==p,b=(c||l!=null)&&l!==g;i=p,l=g,(_||b)&&(h=!0)}if(c=!1,h)if(!e)n({width:p,height:g,previousWidth:i,previousHeight:l},m);else{a.abort(),a=new AbortController;const _=a.signal;requestAnimationFrame(()=>{_.aborted||n({width:p,height:g,previousWidth:i,previousHeight:l},m)})}})});function d(){try{u.disconnect()}catch(f){}}return u.observe(o),d}function yve(t){let e,s;if(t.borderBoxSize){const n=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=n.inlineSize,s=n.blockSize}else e=t.contentRect.width,s=t.contentRect.height;return{width:e,height:s}}function Bnt(t){return e=>lg(U(T({},t),{target:e}))}const e0=t=>{x.useEffect(t,[])},bve=ue(Ce,"d6b1ab",20,20);class lo extends Lc()(()=>({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})){appendOrReplaceActive(e,s=K1){const{history:n,historyIndex:o,historyScrollTops:a,historyFullWidthImageHeights:i}=this.getState();if(o>=0&&s(n[o],e)){const c=[...n];c[o]=e,this.setState({history:c});return}const l=o>=0?n.slice(0,o+1):[];this.setState({history:[...l,e],historyScrollTops:[...a.slice(0,Math.max(0,o+1)),0],historyFullWidthImageHeights:[...i.slice(0,Math.max(0,o+1)),null],historyIndex:l.length})}setActiveIndex(e){const{history:s}=this.getState();e<0||e>=s.length||this.setState({historyIndex:e})}setScrollTopForActive(e){const{historyIndex:s,historyScrollTops:n}=this.getState();if(s<0)return;const o=[...n];o[s]=e,this.setState({historyScrollTops:o})}setFullWidthImageHeightForIndex(e,s){const{history:n,historyFullWidthImageHeights:o}=this.getState();if(e<0||e>=n.length)return;const a=[...o];a[e]=s,this.setState({historyFullWidthImageHeights:a})}setFullWidthImageHeightForActive(e){const{historyIndex:s}=this.getState();this.setFullWidthImageHeightForIndex(s,e)}reset(){this.setState({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})}goBack(e){const{historyIndex:s,history:n}=this.getState();s<=0||(this.setActiveIndex(s-1),e(n[s-1]))}goToHistoryIndex(e,s){const{history:n}=this.getState();e<0||e>=n.length||(this.setActiveIndex(e),s(n[e]))}closeThreadSidebar(e){this.reset(),e()}}X(lo,"selectCanGoBack",e=>e.historyIndex>0),X(lo,"selectBackHistory",e=>e.history.slice(0,Math.max(0,e.historyIndex))),X(lo,"selectCurrentHistoryScrollTop",e=>{var s;return e.historyIndex>=0&&(s=e.historyScrollTops[e.historyIndex])!=null?s:0}),X(lo,"selectCurrentHistoryFullWidthImageHeight",e=>{var s;return e.historyIndex>=0&&(s=e.historyFullWidthImageHeights[e.historyIndex])!=null?s:null});function oU(){const{openThreadSidebar:t,closeThreadSidebar:e}=Er(),s=Obe(),n=lo.useStore(),o=lo.useState(lo.selectCanGoBack),a=lo.useState(lo.selectBackHistory),i=lo.useState(lo.selectCurrentHistoryScrollTop),l=lo.useState(lo.selectCurrentHistoryFullWidthImageHeight),c=lo.useState(_=>_.historyIndex);x.useEffect(()=>{s&&n.appendOrReplaceActive(s)},[s,n]);const u=x.useCallback(()=>n.goBack(t),[n,t]),d=x.useCallback(_=>n.goToHistoryIndex(_,t),[n,t]),f=x.useCallback(_=>n.setScrollTopForActive(_),[n]),m=x.useCallback(_=>n.setFullWidthImageHeightForActive(_),[n]),p=x.useCallback((_,b)=>n.setFullWidthImageHeightForIndex(_,b),[n]),g=x.useCallback(()=>{n.reset()},[n]),h=x.useCallback(()=>{n.reset(),e()},[n,e]);return{canGoBack:o,backHistory:a,goBack:u,goToHistoryIndex:d,setScrollTopForActive:f,currentHistoryScrollTop:i,setFullWidthImageHeightForActive:m,setFullWidthImageHeightForIndex:p,currentHistoryFullWidthImageHeight:l,activeHistoryIndex:c,resetSidebarHistory:g,closeThreadSidebarAndResetHistory:h}}function lb(t,e){let s=t.parentElement;for(;s!=null;){if(e(s))return s;s=s.parentElement}}function vve(t){switch(getComputedStyle(t).display){case"block":case"inline-block":case"list-item":case"table":case"table-caption":case"flow-root":case"flex":case"grid":return!0}return!1}function aU(t){const e=getComputedStyle(t);return e.transform!=="none"||e.perspective!=="none"||e.willChange==="transform"||e.willChange==="perspective"||e.filter!=="none"||e.willChange==="filter"||e.backdropFilter!=="none"}function Sve(t){return getComputedStyle(t).position!=="static"?!0:aU(t)}function xA(t){switch(getComputedStyle(t).position){case"static":case"relative":case"sticky":return lb(t,vve);case"absolute":return lb(t,Sve);case"fixed":return lb(t,aU)}}function rU(t,e="y"){if(!t.isConnected)return null;let s=xA(t);for(;s&&s!==document.body;){const n=getComputedStyle(s);switch(e==="x"?n.overflowX:n.overflowY){case"auto":case"scroll":case"hidden":return s}s=xA(s)}return document.scrollingElement&&getComputedStyle(document.scrollingElement).overflow==="visible"?document.scrollingElement:document.body}function iU({node:t,axis:e,onScrollIntoView:s,onDone:n,obscuringHeight:o=0,options:a={behavior:"smooth",block:"end"}}){if(!t)return;const i=rU(t,e);if(!i)return;const l=t.getBoundingClientRect(),c=i.getBoundingClientRect(),u=c.top+i.clientHeight-o,d=l.bottom>u,f=l.top<c.top;if(!d&&!f){n==null||n();return}requestAnimationFrame(()=>{t.scrollIntoView(a),s==null||s(),n==null||n()})}const Cve=2e3,wve=1e3,kve="rgba(255, 235, 140, 0.6)",Tve="rgba(120, 100, 40, 0.7)";function Eve(t,e){if((e==null?void 0:e.start)==null)return null;if(e.end!=null){const s=t.querySelector('[data-start="'.concat(e.start,'"][data-end="').concat(e.end,'"]'));if(s)return s}return t.querySelector('[data-start="'.concat(e.start,'"]'))}function Mve({messageId:t,messageRange:e,shouldHighlight:s,scrollMarginBottom:n}){if(!t)return;requestAnimationFrame(()=>{var u;const a=document.querySelector('[data-message-id="'.concat(t,'"]'));if(!a)return;const i=(u=Eve(a,e))!=null?u:a,l=i.style.scrollMarginTop,c=i.style.scrollMarginBottom;i.style.scrollMarginTop="40px",i.style.scrollMarginBottom=n,iU({node:i,axis:"y",obscuringHeight:100,options:{behavior:"smooth",block:"nearest",inline:"nearest"},onDone:()=>{requestAnimationFrame(()=>{i.style.scrollMarginTop=l,i.style.scrollMarginBottom=c}),setTimeout(()=>Nve(i),450)}})})}function Nve(t){var a,i;const e=t.style.transition,s=t.style.backgroundColor,o=typeof window<"u"&&((i=(a=window.matchMedia)==null?void 0:a.call(window,"(prefers-color-scheme: dark)"))==null?void 0:i.matches)?Tve:kve;t.style.transition="none",t.style.backgroundColor=o,requestAnimationFrame(()=>{setTimeout(()=>{t.style.transition="background-color 1s ease",t.style.backgroundColor=s,setTimeout(()=>{t.style.transition=e},wve)},Cve)})}var cb,yA;function lU(){if(yA)return cb;yA=1;var t=gJ(),e=hJ();function s(n,o,a){(a!==void 0&&!e(n[o],a)||a===void 0&&!(o in n))&&t(n,o,a)}return cb=s,cb}var ub,bA;function Ave(){if(bA)return ub;bA=1;var t=_J(),e=yC();function s(n){return e(n)&&t(n)}return ub=s,ub}var db,vA;function Ive(){if(vA)return db;vA=1;var t=wR(),e=xJ(),s=yC(),n="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,l=a.hasOwnProperty,c=i.call(Object);function u(d){if(!s(d)||t(d)!=n)return!1;var f=e(d);if(f===null)return!0;var m=l.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&i.call(m)==c}return db=u,db}var fb,SA;function cU(){if(SA)return fb;SA=1;function t(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}return fb=t,fb}var mb,CA;function jve(){if(CA)return mb;CA=1;var t=yJ(),e=E6();function s(n){return t(n,e(n))}return mb=s,mb}var pb,wA;function Pve(){if(wA)return pb;wA=1;var t=lU(),e=bJ(),s=vJ(),n=M6(),o=SJ(),a=CJ(),i=YC(),l=Ave(),c=wJ(),u=kJ(),d=N6(),f=Ive(),m=TJ(),p=cU(),g=jve();function h(_,b,y,v,S,C,w){var k=p(_,y),E=p(b,y),M=w.get(E);if(M){t(_,y,M);return}var N=C?C(k,E,y+"",_,b,w):void 0,A=N===void 0;if(A){var I=i(E),P=!I&&c(E),R=!I&&!P&&m(E);N=E,I||P||R?i(k)?N=k:l(k)?N=n(k):P?(A=!1,N=e(E,!0)):R?(A=!1,N=s(E,!0)):N=[]:f(E)||a(E)?(N=k,a(k)?N=g(k):(!d(k)||u(k))&&(N=o(E))):A=!1}A&&(w.set(E,N),S(N,E,v,C,w),w.delete(E)),t(_,y,N)}return pb=h,pb}var gb,kA;function Rve(){if(kA)return gb;kA=1;var t=EJ(),e=lU(),s=MJ(),n=Pve(),o=N6(),a=E6(),i=cU();function l(c,u,d,f,m){c!==u&&s(u,function(p,g){if(m||(m=new t),o(p))n(c,u,g,d,l,f,m);else{var h=f?f(i(c,g),p,g+"",c,u,m):void 0;h===void 0&&(h=p),e(c,g,h)}},a)}return gb=l,gb}var hb,TA;function Ove(){if(TA)return hb;TA=1;var t=NJ(),e=QC();function s(n){return t(function(o,a){var i=-1,l=a.length,c=l>1?a[l-1]:void 0,u=l>2?a[2]:void 0;for(c=n.length>3&&typeof c=="function"?(l--,c):void 0,u&&e(a[0],a[1],u)&&(c=l<3?void 0:c,l=1),o=Object(o);++i<l;){var d=a[i];d&&n(o,d,i,c)}return o})}return hb=s,hb}var _b,EA;function Lve(){if(EA)return _b;EA=1;var t=Rve(),e=Ove(),s=e(function(n,o,a){t(n,o,a)});return _b=s,_b}var Dve=Lve();const ou=en(Dve);function t0(t,{type:e="copy",source:s,messageId:n,serverThreadId:o,selectedText:a,location:i,contentType:l,productLogOnly:c=!1}){if(ut()&&(B.logEvent("Content Exported",{type:e,source:s,length:a.length,location:i,contentType:l}),!(c||e==="download")))return de.safePost("/conversation/implicit_message_feedback",{requestBody:{message_id:n,conversation_id:o,source:s,feedback:{feedback_type:e,selected_text_length:a.length},location:i}})}function Fve(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)s.hasOwnProperty(n)&&(t[n]=s[n])}return t}function D2(t,e){return Array(e+1).join(t)}function Bve(t){return t.replace(/^\n*/,"")}function Uve(t){for(var e=t.length;e>0&&t[e-1]==="\n";)e--;return t.substring(0,e)}var $ve=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function wT(t){return kT(t,$ve)}var uU=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function dU(t){return kT(t,uU)}function Hve(t){return mU(t,uU)}var fU=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Gve(t){return kT(t,fU)}function Vve(t){return mU(t,fU)}function kT(t,e){return e.indexOf(t.nodeName)>=0}function mU(t,e){return t.getElementsByTagName&&e.some(function(s){return t.getElementsByTagName(s).length})}var Zn={};Zn.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}};Zn.lineBreak={filter:"br",replacement:function(t,e,s){return s.br+"\n"}};Zn.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,s){var n=Number(e.nodeName.charAt(1));if(s.headingStyle==="setext"&&n<3){var o=D2(n===1?"=":"-",t.length);return"\n\n"+t+"\n"+o+"\n\n"}else return"\n\n"+D2("#",n)+" "+t+"\n\n"}};Zn.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),"\n\n"+t+"\n\n"}};Zn.list={filter:["ul","ol"],replacement:function(t,e){var s=e.parentNode;return s.nodeName==="LI"&&s.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}};Zn.listItem={filter:"li",replacement:function(t,e,s){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=s.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var a=o.getAttribute("start"),i=Array.prototype.indexOf.call(o.children,e);n=(a?Number(a)+i:i+1)+".  "}return n+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}};Zn.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,s){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}};Zn.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,s){for(var n=e.firstChild.getAttribute("class")||"",o=(n.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,i=s.fence.charAt(0),l=3,c=new RegExp("^"+i+"{3,}","gm"),u;u=c.exec(a);)u[0].length>=l&&(l=u[0].length+1);var d=D2(i,l);return"\n\n"+d+o+"\n"+a.replace(/\n$/,"")+"\n"+d+"\n\n"}};Zn.horizontalRule={filter:"hr",replacement:function(t,e,s){return"\n\n"+s.hr+"\n\n"}};Zn.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var s=e.getAttribute("href"),n=Y1(e.getAttribute("title"));return n&&(n=' "'+n+'"'),"["+t+"]("+s+n+")"}};Zn.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,s){var n=e.getAttribute("href"),o=Y1(e.getAttribute("title"));o&&(o=' "'+o+'"');var a,i;switch(s.linkReferenceStyle){case"collapsed":a="["+t+"][]",i="["+t+"]: "+n+o;break;case"shortcut":a="["+t+"]",i="["+t+"]: "+n+o;break;default:var l=this.references.length+1;a="["+t+"]["+l+"]",i="["+l+"]: "+n+o}return this.references.push(i),a},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}};Zn.emphasis={filter:["em","i"],replacement:function(t,e,s){return t.trim()?s.emDelimiter+t+s.emDelimiter:""}};Zn.strong={filter:["strong","b"],replacement:function(t,e,s){return t.trim()?s.strongDelimiter+t+s.strongDelimiter:""}};Zn.code={filter:function(t){var e=t.previousSibling||t.nextSibling,s=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!s},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",s="`",n=t.match(/`+/gm)||[];n.indexOf(s)!==-1;)s=s+"`";return s+e+t+e+s}};Zn.image={filter:"img",replacement:function(t,e){var s=Y1(e.getAttribute("alt")),n=e.getAttribute("src")||"",o=Y1(e.getAttribute("title")),a=o?' "'+o+'"':"";return n?"!["+s+"]("+n+a+")":""}};function Y1(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function pU(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}pU.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=xb(this.array,t,this.options))||(e=xb(this._keep,t,this.options))||(e=xb(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function xb(t,e,s){for(var n=0;n<t.length;n++){var o=t[n];if(zve(o,e,s))return o}}function zve(t,e,s){var n=t.filter;if(typeof n=="string"){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(t,e,s))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Wve(t){var e=t.element,s=t.isBlock,n=t.isVoid,o=t.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var a=null,i=!1,l=null,c=MA(l,e,o);c!==e;){if(c.nodeType===3||c.nodeType===4){var u=c.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!i&&u[0]===" "&&(u=u.substr(1)),!u){c=yb(c);continue}c.data=u,a=c}else if(c.nodeType===1)s(c)||c.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,i=!1):n(c)||o(c)?(a=null,i=!0):a&&(i=!1);else{c=yb(c);continue}var d=MA(l,c,o);l=c,c=d}a&&(a.data=a.data.replace(/ $/,""),a.data||yb(a))}}function yb(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function MA(t,e,s){return t&&t.parentNode===e||s(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var gU=typeof window<"u"?window:{};function qve(){var t=gU.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch(s){}return e}function Kve(){var t=function(){};return Yve()?t.prototype.parseFromString=function(e){var s=new window.ActiveXObject("htmlfile");return s.designMode="on",s.open(),s.write(e),s.close(),s}:t.prototype.parseFromString=function(e){var s=document.implementation.createHTMLDocument("");return s.open(),s.write(e),s.close(),s},t}function Yve(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}var Qve=qve()?gU.DOMParser:Kve();function Jve(t,e){var s;if(typeof t=="string"){var n=Zve().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");s=n.getElementById("turndown-root")}else s=t.cloneNode(!0);return Wve({element:s,isBlock:wT,isVoid:dU,isPre:e.preformattedCode?Xve:null}),s}var bb;function Zve(){return bb=bb||new Qve,bb}function Xve(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function e2e(t,e){return t.isBlock=wT(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=t2e(t),t.flankingWhitespace=s2e(t,e),t}function t2e(t){return!dU(t)&&!Gve(t)&&/^\s*$/i.test(t.textContent)&&!Hve(t)&&!Vve(t)}function s2e(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var s=n2e(t.textContent);return s.leadingAscii&&NA("left",t,e)&&(s.leading=s.leadingNonAscii),s.trailingAscii&&NA("right",t,e)&&(s.trailing=s.trailingNonAscii),{leading:s.leading,trailing:s.trailing}}function n2e(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function NA(t,e,s){var n,o,a;return t==="left"?(n=e.previousSibling,o=/ $/):(n=e.nextSibling,o=/^ /),n&&(n.nodeType===3?a=o.test(n.nodeValue):s.preformattedCode&&n.nodeName==="CODE"?a=!1:n.nodeType===1&&!wT(n)&&(a=o.test(n.textContent))),a}var o2e=Array.prototype.reduce,a2e=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Q1(t){if(!(this instanceof Q1))return new Q1(t);var e={rules:Zn,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(s,n){return n.isBlock?"\n\n":""},keepReplacement:function(s,n){return n.isBlock?"\n\n"+n.outerHTML+"\n\n":n.outerHTML},defaultReplacement:function(s,n){return n.isBlock?"\n\n"+s+"\n\n":s}};this.options=Fve({},e,t),this.rules=new pU(this.options)}Q1.prototype={turndown:function(t){if(!l2e(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=hU.call(this,new Jve(t,this.options));return r2e.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return a2e.reduce(function(e,s){return e.replace(s[0],s[1])},t)}};function hU(t){var e=this;return o2e.call(t.childNodes,function(s,n){n=new e2e(n,e.options);var o="";return n.nodeType===3?o=n.isCode?n.nodeValue:e.escape(n.nodeValue):n.nodeType===1&&(o=i2e.call(e,n)),_U(s,o)},"")}function r2e(t){var e=this;return this.rules.forEach(function(s){typeof s.append=="function"&&(t=_U(t,s.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function i2e(t){var e=this.rules.forNode(t),s=hU.call(this,t),n=t.flankingWhitespace;return(n.leading||n.trailing)&&(s=s.trim()),n.leading+e.replacement(s,t,this.options)+n.trailing}function _U(t,e){var s=Uve(t),n=Bve(e),o=Math.max(t.length-s.length,e.length-n.length),a="\n\n".substring(0,o);return s+a+n}function l2e(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var AA=/highlight-(?:text|source)-([a-z0-9]+)/;function c2e(t){t.addRule("highlightedCodeBlock",{filter:function(e){var s=e.firstChild;return e.nodeName==="DIV"&&AA.test(e.className)&&s&&s.nodeName==="PRE"},replacement:function(e,s,n){var o=s.className||"",a=(o.match(AA)||[null,""])[1];return"\n\n"+n.fence+a+"\n"+s.firstChild.textContent+"\n"+n.fence+"\n\n"}})}function u2e(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var d2e=Array.prototype.indexOf,f2e=Array.prototype.every,Hd={};Hd.tableCell={filter:["th","td"],replacement:function(t,e){return xU(t,e)}};Hd.tableRow={filter:"tr",replacement:function(t,e){var s="",n={left:":--",right:"--:",center:":-:"};if(TT(e))for(var o=0;o<e.childNodes.length;o++){var a="---",i=(e.childNodes[o].getAttribute("align")||"").toLowerCase();i&&(a=n[i]||a),s+=xU(a,e.childNodes[o])}return"\n"+t+(s?"\n"+s:"")}};Hd.table={filter:function(t){return t.nodeName==="TABLE"&&TT(t.rows[0])},replacement:function(t){return t=t.replace("\n\n","\n"),"\n\n"+t+"\n\n"}};Hd.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function TT(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||m2e(e))&&f2e.call(t.childNodes,function(s){return s.nodeName==="TH"})}function m2e(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function xU(t,e){var s=d2e.call(e.parentNode.childNodes,e),n=" ";return s===0&&(n="| "),n+t+" |"}function p2e(t){t.keep(function(s){return s.nodeName==="TABLE"&&!TT(s.rows[0])});for(var e in Hd)t.addRule(e,Hd[e])}function g2e(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,s){return(s.checked?"[x]":"[ ]")+" "}})}function h2e(t){t.use([c2e,u2e,p2e,g2e])}function IA(t){const e=T({},t);for(const s of Object.keys(e))e[s]=Math.round(e[s]);return e}function rc(t,e){for(;t;){if(t instanceof HTMLElement&&t.dataset[e]!=null)return{node:t,dataValue:t.dataset[e]};t=t.parentNode}return{node:void 0,dataValue:void 0}}const vb={clientRect:void 0,isCollapsed:void 0,textContent:void 0,documentFragment:void 0,selection:void 0},yU=new Q1;yU.use(h2e);function _2e(t){const s=t.getRangeAt(0).cloneContents(),n=document.createElement("div");return n.appendChild(s),yU.turndown(n.innerHTML)}function x2e(t){const e=G(),[{clientRect:s,isCollapsed:n,textContent:o,documentFragment:a,selection:i},l]=x.useState(vb);zn(()=>{const u=()=>{setTimeout(()=>{let d;const f=window.getSelection(),m={};if(f==null||!f.rangeCount){l(vb);return}const p=f.getRangeAt(0);if(p==null){l(vb);return}const g=p.cloneContents();m.documentFragment=g,m.textContent=_2e(f);const h=p.getClientRects();if(h.length===0&&p.commonAncestorContainer!=null&&p.commonAncestorContainer instanceof HTMLElement){const _=p.commonAncestorContainer;d=IA(_.getBoundingClientRect().toJSON())}else{if(h.length<1)return;d=IA(h[0].toJSON())}m.clientRect=d,m.isCollapsed=p.collapsed,m.selection=f,l(m)},0)};return window.addEventListener("mouseup",u),()=>{window.removeEventListener("mouseup",u)}},[]);const c=oo();return x.useEffect(()=>{if(c)return;const u=d=>{const f=window.getSelection(),m=f==null?void 0:f.toString(),p=Rt(t),{dataValue:g}=rc(f==null?void 0:f.anchorNode,"messageAuthorRole"),{dataValue:h}=rc(f==null?void 0:f.anchorNode,"messageId");!m||!h||!p||!g||g!=="assistant"||t0(e,{source:"keyboard",type:"copy",messageId:h,serverThreadId:p,selectedText:m,location:"selection",contentType:"text"})};return document.addEventListener("copy",u),()=>{document.removeEventListener("copy",u)}},[e,t,c]),{clientRect:s,isCollapsed:n,textContent:o,documentFragment:a,selection:i}}const bU="agent-turn",Unt=[Pt.PrimaryAssistant,Pt.GizmoInteraction],Sb=8,y2e=44,b2e=12;function v2e({clientRect:t,containerSize:e}){const s=t.top,n=s+t.height,o=t.left+t.width/2;let a=s-y2e,i=o-e.width/2;const l=Sb;(a<l||s<l)&&(a=n+b2e);const c=window.innerWidth-e.width-Sb;return i=Math.max(Sb,Math.min(i,c)),{top:a,left:i}}function S2e(t){var e;return dr.createPortal(t.children,(e=t.mount)!=null?e:document.body)}function C2e({onClick:t}){return r.jsx(ke,{size:"medium",color:"secondary",className:"shadow-long flex rounded-xl border-none active:opacity-1",onClick:t,children:r.jsxs("span",{className:"flex items-center gap-1.5 select-none",children:[r.jsx(bve,{className:"icon"}),r.jsx("span",{className:"whitespace-nowrap! select-none max-md:sr-only",children:r.jsx(j,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})]})})}function w2e(t){"use forget";const e=F.c(6),{onClick:s,className:n}=t;let o;e[0]!==n?(o=z("border-token-border-heavy rounded-none active:opacity-1",n),e[0]=n,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("span",{className:"flex items-center select-none",children:r.jsx("span",{className:"whitespace-nowrap! select-none",children:r.jsx(j,{defaultMessage:"More Details",id:"TargetedActionPopover.moreContext"})})}),e[2]=a):a=e[2];let i;return e[3]!==s||e[4]!==o?(i=r.jsx(ke,{size:"medium",color:"secondary",className:o,onClick:s,children:a}),e[3]=s,e[4]=o,e[5]=i):i=e[5],i}function k2e(t){"use forget";const e=F.c(6),{onClick:s,className:n}=t;let o;e[0]!==n?(o=z("rounded-none border-none active:opacity-1",n),e[0]=n,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("span",{className:"flex items-center select-none",children:r.jsx("span",{className:"whitespace-nowrap! select-none",children:r.jsx(j,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})}),e[2]=a):a=e[2];let i;return e[3]!==s||e[4]!==o?(i=r.jsx(ke,{size:"medium",color:"secondary",className:o,onClick:s,children:a}),e[3]=s,e[4]=o,e[5]=i):i=e[5],i}function T2e(t){"use forget";var v;const e=F.c(18),{anchorNode:s,clientRect:n,buttons:o}=t,a=x.useRef(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={width:0,height:0},e[0]=i):i=e[0];const[l,c]=x.useState(i);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const S=a.current;if(!S)return;const C=()=>{a.current&&c({width:a.current.offsetWidth,height:a.current.offsetHeight})};C();const w=new ResizeObserver(C);return w.observe(S),()=>w.disconnect()},e[1]=u):u=e[1];let d;if(e[2]!==o.length?(d=[o.length],e[2]=o.length,e[3]=d):d=e[3],zn(u,d),!s||!s.closest(".".concat(bU))||(o==null?void 0:o.length)===0)return null;let f;e[4]!==n||e[5]!==l?(f=v2e({clientRect:n,containerSize:l}),e[4]=n,e[5]=l,e[6]=f):f=e[6];const{top:m,left:p}=f,g=(v=s.ownerDocument)==null?void 0:v.body;if(!g)return null;let h;e[7]!==p||e[8]!==m?(h={top:m,left:p},e[7]=p,e[8]=m,e[9]=h):h=e[9];let _;e[10]!==o?(_=r.jsx("div",{ref:a,className:"shadow-long flex overflow-hidden rounded-xl",children:o}),e[10]=o,e[11]=_):_=e[11];let b;e[12]!==h||e[13]!==_?(b=r.jsx("div",{className:"aria-live=polite fixed select-none",style:h,children:_}),e[12]=h,e[13]=_,e[14]=b):b=e[14];let y;return e[15]!==g||e[16]!==b?(y=r.jsx(S2e,{mount:g,children:b}),e[15]=g,e[16]=b,e[17]=y):y=e[17],y}function E2e(t){if(!(t!=null&&t.rangeCount))return;const e=t.getRangeAt(0),{node:s}=rc(e.startContainer,"start");if(!(s instanceof HTMLElement))return;const n=Number(s.dataset.start);if(Number.isNaN(n))return;const o=s.dataset.end!=null?Number(s.dataset.end):void 0,a=o!=null&&!Number.isNaN(o)?o:void 0;return{start:n,end:a}}const jA=3;function $nt({conversation:t,onTargetedReply:e}){var k;const{clientRect:s,isCollapsed:n,textContent:o,selection:a}=x2e(t.id),{resetSidebarHistory:i}=oU(),l=G(),c=oe(()=>Ss(l)),u=Ee(l,"4290238484"),d=Ee(l,"473637331"),{dataValue:f}=rc(a==null?void 0:a.anchorNode,"messageAuthorRole"),{node:m,dataValue:p}=rc(a==null?void 0:a.anchorNode,"messageId"),{dataValue:g}=rc(a==null?void 0:a.focusNode,"messageId"),h=!g||p===g,_=o==null?void 0:o.trim(),b=(k=_==null?void 0:_.length)!=null?k:0,{dataValue:y}=rc(a==null?void 0:a.focusNode,"writingBlock"),v=x.useCallback(E=>{if(u&&_&&_.length>0){i(),$d(t,{type:"entity",messageId:E,contentReferenceStartIndex:0,query:_,category:"ask_sidebar",debugThreadId:void 0});const M=window.getSelection();M&&M.removeAllRanges()}},[t,u,_,i]),S=x.useCallback(E=>{const M=E2e(a);if(_!==void 0&&e){e({targetedReply:{type:"text",label:_,onLabelClick:()=>Mve({messageId:E,messageRange:M,shouldHighlight:!0,scrollMarginBottom:"100px"}),createNewCompletionParams:A=>{const I=sx(_);return U(T({},A),{promptMessage:ou(A.promptMessage,{metadata:T({targeted_reply:_,targeted_reply_source_message_id:E},M?{targeted_reply_source_range:M}:{})}),appendMessages:A.appendMessages==null?[I]:[...A.appendMessages,I]})},onCreateCompletion:({serverThreadId:A,currentLeafId:I})=>{B.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversationId:A,currentLeafId:I})},onCleared:({serverThreadId:A,currentLeafId:I})=>{B.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversationId:A,currentLeafId:I})}},messageId:E});const N=window.getSelection();N&&N.removeAllRanges()}},[e,a,_]);if(s==null||n||y||!h||f!=="assistant")return null;const C=p!=null?p:"",w=[];return u?(d&&b>=jA&&w.push(r.jsx(k2e,{onClick:()=>S(C),className:"border-y-0 border-s-0 border-e border-solid"})),c||w.push(r.jsx(w2e,{onClick:()=>v(C),className:"border-none"}))):b>=jA&&w.push(r.jsx(C2e,{onClick:()=>S(C)})),r.jsx(T2e,{anchorNode:m,clientRect:s,buttons:w})}function Hnt({isUserTurn:t}){return z("relative flex w-full min-w-0 flex-col",!t&&bU)}function Gnt({text:t,customSymbolOffsets:e}){return r.jsx(W_,{name:"formatted_text_error",fallback:()=>r.jsx(r.Fragment,{children:t}),children:r.jsx(M2e,{text:t,customSymbolOffsets:e})})}const M2e=({text:t,customSymbolOffsets:e=[]})=>{const s=/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g;let n=0;const o=t.split(s).flatMap((a,i)=>{const l=n;if(n+=a.length,a.startsWith("```")&&a.endsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3,-3).trim()})},i);if(a.startsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3).trim()})},i);if(a.startsWith("`")&&a.endsWith("`"))return r.jsx("code",{children:a.slice(1,-1)},i);if(a.startsWith("`"))return r.jsx("code",{children:a.slice(1)},i);{const c=e.map(u=>U3(u)).filter(u=>l<=u.startIndex&&u.endIndex<=n);if(c.length){const u=c.map(m=>U3(m)).sort((m,p)=>m.startIndex-p.startIndex),d=[];let f=0;for(let m=0;m<u.length;m++){const p=u[m],g=p.startIndex-l,h=p.endIndex-l;g>f&&d.push(a.slice(f,g)),d.push(N2e(p.symbol,a.slice(g,h),"".concat(i,"-multi-").concat(m))),f=h}return f<a.length&&d.push(a.slice(f)),d.filter(m=>!!m)}return a}});return r.jsx("div",{className:"whitespace-pre-wrap",children:o})};function N2e(t,e,s=void 0){return t===$3.SystemHint?r.jsx("span",{className:"hint-pill",children:e},s):t===$3.EcosystemMention?r.jsx("span",{className:"ecosystem-mention",children:e},s):null}function A2e({scriptSrc:t}){return r.jsx("script",{nonce:Gs().cspScriptNonce,suppressHydrationWarning:!0,children:t})}function Vnt({role:t,children:e}){const s=sn(Ss);if(!s)return e;const n=t===ot.User&&s?"py-4":void 0;return r.jsx("div",{className:z(n),children:e})}const I2e=AJ("(width <= 500px)",()=>!1);function j2e(){return oe(I2e)}function vU(){const t=sn(Ss);return j2e()&&t}let PA=!1;function znt(t,e,s){x.useEffect(()=>{var n;!t||e||PA||s&&((n=Bc())==null||n.receivedFirstToken(),PA=!0)},[t,e,s])}const F2=Pe(()=>me(()=>import("./eyfrni5t2e7z7udl.js"),__vite__mapDeps([201,1,202,3,4,203,204,96,33,205,206,6,207,188,80,189,208,209,97,91,99,100,41,83,84,210,211,212,213])).then(t=>t.CanvasMessageAttachment)),P2e=Pe(()=>me(()=>import("./eyfrni5t2e7z7udl.js"),__vite__mapDeps([201,1,202,3,4,203,204,96,33,205,206,6,207,188,80,189,208,209,97,91,99,100,41,83,84,210,211,212,213])).then(t=>t.CanvasMessageAttachmentWrapper));var Do=(t=>(t.INFERRING="inferring",t.PENDING="pending",t.SENT="sent",t))(Do||{}),tp=(t=>(t.MODEL="model",t.SYSTEM_HINT_CANVAS="system_hint_canvas",t.SYSTEM_HINT_CANVAS_APPS="system_hint_canvas_apps",t.USER_CREATED_COMPOSER="user_created_composer",t.MESSAGE_CODE_SNIPPET="message_code_snippet",t.MESSAGE_WRITING_BLOCK="message_writing_block",t.MESSAGE="message",t.TASK_RESULT="task_result",t.REMIX_OF_SHARED_CANVAS="remix_of_shared_canvas",t.HIVE="hive",t))(tp||{});const Yr=-1;var fo=(t=>(t.CREATING="creating",t.REWRITING="rewriting",t.COMMENTING="commenting",t.UPDATING="updating",t.COMPLETE="complete",t.ATTACHED_PENDING="attached_pending",t.ATTACHED_SENT="attached_sent",t))(fo||{});const Wnt=t=>(t==null?void 0:t.status)!=="complete"&&(t==null?void 0:t.status)!=="attached_pending"&&(t==null?void 0:t.status)!=="attached_sent",qnt=t=>(t==null?void 0:t.status)==="rewriting",Knt=t=>(t==null?void 0:t.status)==="creating",Ynt=t=>(t==null?void 0:t.status)==="attached_pending"||(t==null?void 0:t.status)==="attached_sent",Qnt=t=>(t==null?void 0:t.status)==="attached_pending";var ni=(t=>(t.DOCUMENT="document",t.CODE_BASH="code/bash",t.CODE_ZSH="code/zsh",t.CODE_JAVASCRIPT="code/javascript",t.CODE_TYPESCRIPT="code/typescript",t.CODE_HTML="code/html",t.CODE_CSS="code/css",t.CODE_PYTHON="code/python",t.CODE_JSON="code/json",t.CODE_SQL="code/sql",t.CODE_GO="code/go",t.CODE_YAML="code/yaml",t.CODE_JAVA="code/java",t.CODE_RUST="code/rust",t.CODE_CPP="code/cpp",t.CODE_SWIFT="code/swift",t.CODE_PHP="code/php",t.CODE_XML="code/xml",t.CODE_RUBY="code/ruby",t.CODE_HASKELL="code/haskell",t.CODE_KOTLIN="code/kotlin",t.CODE_CSHARP="code/csharp",t.CODE_C="code/c",t.CODE_OBJECTIVEC="code/objectivec",t.CODE_R="code/r",t.CODE_LUA="code/lua",t.CODE_DART="code/dart",t.CODE_SCALA="code/scala",t.CODE_PERL="code/perl",t.CODE_COMMONLISP="code/commonlisp",t.CODE_CLOJURE="code/clojure",t.CODE_OCAML="code/ocaml",t.CODE_POWERSHELL="code/powershell",t.CODE_VERILOG="code/verilog",t.CODE_DOCKERFILE="code/dockerfile",t.CODE_VUE="code/vue",t.CODE_REACT="code/react",t.CODE_OTHER="code/other",t.LOADING="loading",t))(ni||{});function J1(t){return t.startsWith("code/")}function Nc(t){const e=p1(t,Object.values(ni),null);if(e)return e;if(t==="webview")return"code/html";if(t.startsWith("code"))switch(t){case"code/js":case"code/jsx":return"code/javascript";case"code/ts":case"code/tsx":return"code/typescript";default:return"code/other"}return"document"}var Xs=(t=>(t.CREATE="create",t.REWRITE="rewrite",t.EDIT="edit",t.ADD_COMMENT="add_comment",t.REMOVE_COMMENT="remove_comment",t))(Xs||{}),SU=(t=>(t.ACCEPT="accept",t.DISMISS="dismiss",t))(SU||{}),B2=(t=>(t.ACCEPT_INITIATED="accept_initiated",t.DISMISSED="dismissed",t.PENDING="pending",t))(B2||{}),R2e=(t=>(t.ADDED="added",t.REMOVED="removed",t))(R2e||{}),O2e=(t=>(t.ACCEPT_COMMENT="accept_comment",t.ASK_CHATGPT="ask_chatgpt",t.ACCELERATOR="accelerator",t.CONSOLE="console",t.FULL_SCREEN_SUBMIT="full_screen_submit",t.HIVE_SPEAKER_EDIT="hive_speaker_edit",t))(O2e||{}),CU=(t=>(t.PUBLIC="public",t.PRIVATE="private",t.WORKSPACE="workspace",t))(CU||{});const L2e=t=>p1(t,Object.values(CU),void 0),D2e=t=>x.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24"},t),x.createElement("path",{fillRule:"evenodd",d:"M14.447 7.106a1 1 0 0 1 .447 1.341l-4 8a1 1 0 1 1-1.788-.894l4-8a1 1 0 0 1 1.341-.447ZM6.6 7.2a1 1 0 0 1 .2 1.4L4.25 12l2.55 3.4a1 1 0 0 1-1.6 1.2l-3-4a1 1 0 0 1 0-1.2l3-4a1 1 0 0 1 1.4-.2Zm10.8 0a1 1 0 0 1 1.4.2l3 4a1 1 0 0 1 0 1.2l-3 4a1 1 0 0 1-1.6-1.2l2.55-3.4-2.55-3.4a1 1 0 0 1 .2-1.4Z",clipRule:"evenodd"}));function Wu(t,e){return t===ni.DOCUMENT?r.jsx(Eo,{className:z("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):t&&J1(t)?r.jsx(D2e,{className:z("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):null}const F2e=({textdocId:t,clientThreadId:e})=>{const s=Xo(f=>{var m;return(m=f==null?void 0:f.resolveTempTextdocId[t])!=null?m:t}),n=Hx(s),o=Hk(s),a=Kp(),i=Xo(f=>{const m=f==null?void 0:f.lastCanvasAssistantMessageById;return m==null||s==null?!0:m[s]==null});if(!n)return null;const l=()=>{pl(s)},c=()=>{gc({type:pc.Textdoc,textdocId:s,shouldRunCodeOnOpen:!0})},{title:u,type:d}=n;return r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(F2,{textdocId:s,clientThreadId:e,name:u,tag:d,icon:Wu(d,!1),iconSelected:Wu(d,!0),isCanvasOpen:a,isInlinePreview:i,isFocused:o,isUserMessage:!0,onClick:l,onPreview:c})})},Jnt=({messages:t,clientThreadId:e})=>{var o,a;const[s]=t,n=(o=s==null?void 0:s.metadata)==null?void 0:o.canvas;return!n||n.user_message_type!=null?null:r.jsx(r.Fragment,{children:(a=n.user_created_textdocs)==null?void 0:a.map(({user_created_temp_textdoc_id:i})=>r.jsx(F2e,{textdocId:i,clientThreadId:e},i))})};function Znt(t){const e=Bs(t);return bi(s=>Um.getTaskIdsByConversationId(e,s).map(a=>Um.getTask(a,s)).filter(a=>a!==void 0).some(a=>a.status===Is.RUNNING||a.status===Is.CREATED))}function Xnt(t){var e,s;return t&&(s=(e=t.metadata)==null?void 0:e.b1de6e2_rm)!=null?s:!1}function B2e(t,e){return Se.findNode(t,({message:s})=>{var n,o;return((n=s.metadata)==null?void 0:n.b1de6e2_rm)===!0&&((o=s.metadata)==null?void 0:o.async_task_id)===e})!=null}function U2e(t,e){var n;let s=Se.getCurrentNode(t);return s.message.author.role==="developer"&&(s=Se.getNode(t,s.parentId)),e!=null&&(s.message.id===e||((n=s.message.metadata)==null?void 0:n.parent_id)===e)}function $2e(t,e){const s=Se.getCurrentNode(t);return e!=null&&s.message.id===e}const H2e=ue(vr,"b0ab4c",24,24),RA={[window.location.origin+"/c/"]:"Canvas","https://chatgpt-staging.com/c/":"Canvas","https://docs.google.com/document":"Google Docs","https://docs.google.com/presentation":"Google Slides","https://docs.google.com/spreadsheets":"Google Sheets","https://drive.google.com/":"Google Drive","https://mail.google.com/mail/":"Gmail","https://calendar.google.com/":"Google Calendar","https://www.google.com/calendar":"Google Calendar","https://github.com/":"GitHub","https://linear.app/":"Linear","https://app.intercom.com/":"Intercom","https://www.notion.so/":"Notion","https://notion.so/":"Notion","https://canva.com/":"Canva","https://www.canva.com/":"Canva","https://dropbox.com/":"Dropbox","https://www.dropbox.com/":"Dropbox","https://box.com/":"Box","https://app.box.com/":"Box","https://outlook.office.com/":"Outlook","https://outlook.live.com/":"Outlook","https://outlook.office365.com/":"Outlook","https://teams.microsoft.com/":"Teams","mailto:":"Google Contacts","https://app.hubspot.com/":"Hubspot","https://gitlab.com/":"GitLab","https://desk.zoho.":"Zoho Desk","https://3.basecamp.com":"Basecamp"},OA={".aha.io/":"Aha!",".asana.com/":"Asana","dev.azure.com/":"Azure DevOps",".clickup.com/":"ClickUp","gitlab.com/":"GitLab",".helpscout.net/":"Help Scout",".teamwork.com/":"Teamwork",".zendesk.com/":"Zendesk"},G2e=/^(https:\/\/)([a-zA-Z0-9-]+\.)+slack\.com(\/.*)?$/,V2e=/^https:\/\/outlook\.(office|live)\.com/,z2e=/^https:\/\/[^\s]+?\.sharepoint\.com\/[^\s]*/,W2e=/^https:\/\/chatgpt\.com\/c\/[^\s]*/;function wU(t){if(t){if(G2e.test(t))return"Slack";if(V2e.test(t))return"Outlook";if(z2e.test(t))return"SharePoint";if(W2e.test(t))return"Past Conversation";{const e=Object.keys(RA).find(n=>t.startsWith(n));if(e)return RA[e];const s=Object.keys(OA).find(n=>t.includes(n));return s?OA[s]:void 0}}}function ET(t){switch(t){case"Google Contacts":return U6;case"Google Docs":return fC;case"Google Slides":return JC;case"Google Sheets":return g1;case"Google Drive":return $n;case"Gmail":return Gr;case"Google Calendar":return vR;case"GitHub":return ff;case"Slack":return nx;case"Canvas":return Eo;case"SharePoint":return xc;case"Linear":return Yv;case"Dropbox":return uc;case"Box":return Kv;case"Intercom":return B6;case"Notion":return cc;case"Canva":return jJ;case"Outlook":return H2e;case"Teams":return Rh;case"Hubspot":return sd;case"Aha!":return F6;case"Asana":return D6;case"Azure DevOps":return L6;case"ClickUp":return O6;case"GitLab":return R6;case"Help Scout":return P6;case"Teamwork":return j6;case"Zendesk":return I6;case"Zoho Desk":return IJ;case"Basecamp":return A6;case"Past Conversation":return Nl;default:return null}}function Af(t){const e=wU(t);if(!e)return null;const s=ET(e);return s?{type:e,Icon:s}:null}const U2=({connectorId:t,cloud_doc_url:e,availableConnectors:s,iconClassName:n})=>{const o=Af(e!=null?e:""),{Icon:a,type:i}=o!=null?o:{};if(a)return{Icon:r.jsx(a,{className:z(n,"icon-sm")}),appName:i!=null?i:""};if(t){const l=Array.from(s!=null?s:[]).find(c=>c.id===t);if(l)return{Icon:r.jsx(Kc,{connector:l,size:"xsmall",className:n,iconClassName:"m-0"}),appName:l.name}}return{Icon:e?r.jsx(Na,{className:z(n,"icon-sm")}):r.jsx(ea,{className:z(n,"icon-sm")}),appName:i!=null?i:""}};function eot(t){var e;{const s=(e=t.extra)==null?void 0:e.cloud_doc_url;if(!s)return;const n=wU(s);if(!n)return;const o=t.name;return{url:s,type:n,title:K2e(n)?Y2e(o):o}}}const q2e=["Google Docs","Google Slides","Google Sheets"];function K2e(t){return q2e.includes(t)}function Y2e(t){const e=t.lastIndexOf(".");return e!==-1?t.slice(0,e):t}function tot({citationMetadata:t,compact:e}){if(!t)return null;const s=ET(t.type);return s?e?r.jsx("a",{href:z0(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-clip rounded-lg border border-gray-200 px-[16px] py-2",children:[r.jsx(s,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title?t.title:z0(t.url)})]})}):r.jsx("a",{href:z0(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-col gap-[2px] overflow-clip rounded-lg border border-gray-200 px-[16px] py-[12px]",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[r.jsx(s,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token-text-secondary text-xs leading-normal",children:t.type})]}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title})]})}):null}const Vn=ue(Ce,"e04414",20,20,!0);function sot({hint:t}){var s;if(!t)return null;const e=Af((s=t.url)!=null?s:"");return r.jsxs("div",{className:"text-token-text-tertiary mb-2 flex flex-row items-center justify-end",children:[r.jsx(Vn,{className:"icon me-1.5"}),r.jsx("span",{className:"shrink-0",children:r.jsx(j,{id:"Y+ZBkg",defaultMessage:"Referring to {fileName}",values:{fileName:r.jsxs(pr,{className:"text-token-text-secondary font-semibold hover:underline",href:t.url,underline:!1,openNewTab:!0,children:[e&&r.jsx(e.Icon,{className:"icon me-1.5 inline"}),t.name]})}})})]})}const not=t=>{"use forget";const e=F.c(26),{children:s,collapsedHeight:n,fadeOutStyle:o,fadeClassName:a}=t,i=o===void 0?"hr":o,l=a===void 0?"from-[var(--theme-user-msg-bg)]":a,[c,u]=x.useState(!1),[d,f]=x.useState(null),m=x.useRef(null);let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{m.current&&f(m.current.scrollHeight)},e[0]=p):p=e[0];let g;e[1]!==s||e[2]!==c?(g=[s,c],e[1]=s,e[2]=c,e[3]=g):g=e[3],x.useEffect(p,g);const h=c&&d?d:"".concat(n,"rem");let _;e[4]!==h?(_={maxHeight:h},e[4]=h,e[5]=_):_=e[5];let b;e[6]!==l||e[7]!==i||e[8]!==c?(b=i==="hr"?r.jsx("hr",{className:z("absolute start-0 end-0 bottom-0","hires:[border-inline-width:0.5px] [border-inline-width:1px] border-[var(--theme-user-msg-text)] opacity-20")}):!c&&r.jsx("div",{className:z("pointer-events-none absolute start-0 end-0 bottom-0 h-10 bg-gradient-to-t to-transparent",l)}),e[6]=l,e[7]=i,e[8]=c,e[9]=b):b=e[9];let y;e[10]!==s||e[11]!==_||e[12]!==b?(y=r.jsxs("div",{id:"expandable-content",ref:m,className:"relative overflow-hidden pb-3",style:_,children:[s,b]}),e[10]=s,e[11]=_,e[12]=b,e[13]=y):y=e[13];let v;e[14]===Symbol.for("react.memo_cache_sentinel")?(v=()=>u(Q2e),e[14]=v):v=e[14];const S=c?LA.showLess.defaultMessage:LA.showMore.defaultMessage,C=c&&"rotate-180";let w;e[15]!==C?(w=z("self-center text-[var(--theme-user-msg-text)] group-hover:scale-110",C),e[15]=C,e[16]=w):w=e[16];let k;e[17]!==w?(k=r.jsx(zo,{className:w}),e[17]=w,e[18]=k):k=e[18];let E;e[19]!==c||e[20]!==S||e[21]!==k?(E=r.jsx("button",{onClick:v,className:"group -mb-3 flex w-full cursor-pointer flex-col items-stretch pt-2 pb-2.5 select-none","aria-expanded":c,"aria-controls":"expandable-content","aria-label":S,children:k}),e[19]=c,e[20]=S,e[21]=k,e[22]=E):E=e[22];let M;return e[23]!==E||e[24]!==y?(M=r.jsxs("div",{className:"relative",children:[y,E]}),e[23]=E,e[24]=y,e[25]=M):M=e[25],M},LA=Ne({showLess:{id:"showLess",defaultMessage:"Show Less"},showMore:{id:"showMore",defaultMessage:"Show More"}});function Q2e(t){return!t}const oot=ue(Ce,"57c721",20,20),J2e={highlightedAttributions:new Set},DA=8,$2=Zt(()=>J2e),FA={debugMode:!1,viewModelPredictedFallback:!1,disableSegmentReplacement:!1,useSigmoid:!0,influenceTemperature:.2,probThreshold:.45,probBaseline:.02},MT=Zt()(LR(()=>T({},FA),{name:"search.attributions-settings",version:DA,migrate:(t,e)=>e!==DA?FA:t}));function kU(t,e){return"".concat(t,"-").concat(e)}const BA={setHighlight:(t,e)=>{if(t==null)return;if(e==null||e.length===0)return BA.clearHighlights();Array.isArray(e)||(e=[e]);const s=new Set;for(const n of e)s.add(kU(t,n));return $2.setState(()=>({highlightedAttributions:s}))},setHighlightBySource:(t,e)=>{var n;let s;"attribution_segments"in e&&(s=(n=e.attribution_segments)!=null?n:void 0),BA.setHighlight(t,s)},clearHighlights:()=>$2.setState({highlightedAttributions:new Set})},aot=()=>MT(t=>t.viewModelPredictedFallback),rot=()=>MT(t=>t.debugMode),iot=(t,e)=>$2(s=>t==null?!1:s.highlightedAttributions.has(kU(t,e))),lot=()=>MT(t=>t.disableSegmentReplacement),Z2e=x.createContext(void 0);function cot(){return!1}const uot=t=>Xe(t,"453021389").get("enable-block-animations",!1);function TU(t){var e;return t.author.role===ot.Assistant&&((e=t.recipient)==null?void 0:e.startsWith(Qs.CANMORE))===!0}function EU(t){var e;return t.author.role===ot.Tool&&((e=t.author.name)==null?void 0:e.startsWith(sl))===!0}function MU(t,e){const s=[];let n=0,o=0;for(const a of e)s[o]=n,n+=a.length,o+=1;return s[o]=n,t.map(a=>{const{start:i,end:l}=a;return{start:s[i],end:s[l]}})}function X2e(t,e){const s=[];let n=0,o=0;for(const a of e)s[n]=o,a.length===2?(s[n+1]=o,n+=2):n+=1,o+=1;return s[n]=o,t.map(a=>{const{start:i,end:l}=a;return{start:s[i],end:s[l]}})}function H2(t,e){const s=t.map(({content:a,id:i,start:l,end:c})=>({id:i,at:{start:l,end:c},content:a})),n=s.map(a=>a.at),o=MU(n,e);return s.map((a,i)=>U(T({},a),{at:o[i]}))}function dot(t,e){const s=t.map(a=>a.at),n=X2e(s,e);return t.map((a,i)=>U(T({},a),{at:n[i]})).map(({content:a,id:i,at:l})=>({id:i,start:l.start,end:l.end,content:a}))}const eSe=(t,e)=>{const s=MU(e,t),n=[];for(let a=0;a<s.length;a++){const{start:i}=s[a];let l=0;const c=s.slice(0,a).entries();for(const[u,d]of c)if(i>d.start||i>d.end){const f=d.end-d.start,m=e[u].content.length;l+=m-f}n.push(l)}const o=[];for(let a=0;a<s.length;a++){const{content:i}=e[a],l=s[a],{start:c}=l,u=n[a],d={start:c+u,end:c+u+i.length};o.push({id:"edit-".concat(a),content:i,positionBefore:l,positionAfter:d})}return o},tSe=(t,e)=>de.safeGet("/textdoc/{textdoc_id}/diff/{version}",{parameters:{path:{textdoc_id:t,version:e}}});function sSe(t,e){const s=t.filter(n=>n.op_type==="edit");return eSe(e,s)}const nSe=async(t,e)=>{if(e===1)return null;const{content_before:s,content_after:n,comments_before:o,comments_after:a,operations:i}=await tSe(t,e!=null?e:-1);return{edits:sSe(i,s),contentBefore:s,contentAfter:n,commentsBefore:H2(o,s),commentsAfter:H2(a,n)}},NU=(t,e)=>Ps({queryKey:[t,e,"edit"],enabled:e!=null,gcTime:1e3*60*5,queryFn:()=>nSe(t,e)}),NT=()=>({lastFlushedAt:null,lastTriggeredAt:null}),AT=Zt(Vs(()=>({userEdits:{},timestamps:{}}))),{setState:s0}=AT,fot=t=>AT(({timestamps:e})=>{var s,n,o,a;return((n=(s=e[t])==null?void 0:s.lastTriggeredAt)!=null?n:0)>((a=(o=e[t])==null?void 0:o.lastFlushedAt)!=null?a:0)}),mot=t=>{s0(e=>{var s,n;(n=(s=e.timestamps)[t])!=null||(s[t]=NT()),e.timestamps[t].lastTriggeredAt=Date.now()})},pot=({textdocId:t,basedOnVersionInt:e,content:s,comments:n})=>{s0(o=>{var a,i,l,c;(i=(a=o.timestamps)[t])!=null||(a[t]=NT()),o.timestamps[t].lastFlushedAt=Date.now(),(c=(l=o.userEdits)[t])!=null||(l[t]=[]),o.userEdits[t].push({content:s,basedOnVersionInt:e,nextVersionInt:null,isPending:!0,comments:n})})},got=({textdocId:t,basedOnVersionInt:e,newVersion:s})=>{s0(n=>{var o,a;(a=(o=n.userEdits)[t])!=null||(o[t]=[]);for(const i of n.userEdits[t])if(i.basedOnVersionInt===e){i.isPending=!1,i.nextVersionInt=s;break}})},oSe=t=>{s0(e=>{for(const{textdocId:s,versionInt:n}of t){const o=e.userEdits[s];o&&(e.userEdits[s]=o.filter(a=>a.basedOnVersionInt>(n!=null?n:Yr)),o.length===0&&(e.timestamps[s]=NT()))}})},aSe=Jc(({userEdits:t})=>t),rSe=Jc(t=>{const e=new Map;for(const[s,n]of Object.entries(t)){const o=Qo(n);if(!o)continue;const{content:a,comments:i,nextVersionInt:l,basedOnVersionInt:c}=o;e.set(s,{textdocId:s,comments:i,content:a,versionInt:l!=null?l:c})}return e}),iSe=()=>AT(t=>rSe(aSe(t))),AU=Zt(()=>({optimisticRestore:null})),{setState:Wh,getState:lSe}=AU;function cSe(t){Wh(e=>{var s;if(e.optimisticRestore){for(const{textdocId:n,versionInt:o}of t)if(e.optimisticRestore.textdocId===n&&e.optimisticRestore.versionInt!==-1&&((s=e.optimisticRestore.versionInt)!=null?s:Yr)<=(o!=null?o:Yr))return{optimisticRestore:null}}return e})}function IU(){return AU(t=>t.optimisticRestore)}function hot(t,e,s){const n=Gt(),{mutateAsync:o}=ds({mutationKey:["canvas","textdoc","persist"],mutationFn:uSe,onSuccess:()=>{t&&n.invalidateQueries({queryKey:[t,"textdocs"]})}}),a=IU(),i=x.useCallback(async()=>{if(!e||!s||e.versionInt==null||s.versionInt==null||lSe().optimisticRestore!=null)return;const{textdocId:l,versionInt:c}=e,u=s.versionInt,d=U(T({},s),{versionInt:-1});Wh(()=>({optimisticRestore:d})),gD(l);try{const f=await o({textdocId:l,versionInt:c,restoreFromVersionInt:u});Wh(m=>({optimisticRestore:m.optimisticRestore&&U(T({},m.optimisticRestore),{versionInt:f})}))}catch(f){Wh(()=>({optimisticRestore:null})),wge(l,{version:u})}},[e,s,o]);return{optimisticRestoredTextdocVersion:a,restoreHistoricalTextdocVersion:i}}async function uSe({textdocId:t,versionInt:e,restoreFromVersionInt:s}){return(await de.safePost("/textdoc/{textdoc_id}/restore",{parameters:{path:{textdoc_id:t}},requestBody:{version:e,restore_from_version:s}})).version}const dSe=async({lastVersion:t,textdocId:e,commentId:s,reason:n})=>(await de.safeDelete("/textdoc/{textdoc_id}/{version}/comment/{comment_id}",{parameters:{query:{reason:n},path:{textdoc_id:e,version:String(t),comment_id:s}}})).version,G2=Zt(()=>({persistingOp:null,ops:[]})),{setState:qh,getState:fSe}=G2,mSe=()=>{const t=G2(({ops:s})=>s),e=G2(({persistingOp:s})=>s);return x.useMemo(()=>[...t,e].filter(ex),[t,e])},pSe=t=>{qh(e=>{let s=e.ops;for(const{textdocId:n,versionInt:o}of t)s=s.filter(a=>{var i;return a.textdocId!==n||((i=a.versionInt)!=null?i:Yr)>(o!=null?o:Yr)});return{ops:s}})},_ot=t=>x.useCallback(async(e,s)=>{const n=!!fSe().persistingOp,o=t==null?void 0:t.versionInt,a=t==null?void 0:t.textdocId;if(n||o==null||a==null)return!1;const i={kind:Xs.REMOVE_COMMENT,textdocId:a,author:{role:ot.User},versionInt:o,createdAt:Date.now()/1e3,commentId:e,reason:s};qh(({ops:l})=>({ops:l,isPersisting:!0,persistingOp:i}));try{const l=await dSe({lastVersion:o,textdocId:a,commentId:e,reason:s});return qh(({ops:c})=>({ops:[...c,U(T({},i),{versionInt:l})],isPersisting:!1,persistingOp:null})),l}catch(l){return qh(({ops:c})=>({ops:c,isPersisting:!1,persistingOp:null})),!1}},[t]),IT=t=>Ee(t,"2928249761");function gSe(t){var s,n;const e=(n=(s=t.metadata)==null?void 0:s.open_in_canvas_view)==null?void 0:n.id;return e!=null?e:null}const hSe=async t=>await de.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:t}}}).catch(e=>(Zc.logError("Failed to fetch persisted textdocs",e,{clientThreadId:t}),[])),_Se=async t=>{const e=await hSe(t),s=new Map(e.map(a=>[a.id,a])),n=[];for(const{id:a,content:i,version:l,textdoc_type:c,title:u,comments:d,metadata:f}of e)n.push({textdocId:a,messageId:null,type:Nc(c),comments:H2(d,i),status:fo.COMPLETE,title:u,content:i,versionInt:l,createdAt:0,metadata:{content_references:f==null?void 0:f.content_references,hive_id:f==null?void 0:f.hive_id,record_meeting_id:f==null?void 0:f.record_meeting_id}});return{persistedTextdocVersionById:new Map(n.map(a=>[a.textdocId,a])),persistedTextdocVersions:n,persistedTextdocById:s}};function xSe(t){const e=G(),s=IT(e),n=Ee(e,"3959994305")||s,o=Bs(t),[a,i]=Qe(t,g=>[Se.isMessageTurnEnded(g),Se.lastUserMessage(g)]),l=i&&!!gSe(i),c=!!o&&ut()&&(!n||a||!!l),{data:u,error:d,isLoading:f,isFetching:m,refetch:p}=dt({queryKey:[o,"textdocs"],enabled:c,queryFn:o?()=>_Se(o):XS});return x.useEffect(()=>{if(!u)return;const{persistedTextdocVersions:g}=u;pSe(g),oSe(g),cSe(g)},[u]),[U(T({},u),{error:d,isEnabled:c,isLoading:f,isFetching:m}),p]}var Z1=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.READY=1]="READY",t[t.REFETCHING=2]="REFETCHING",t))(Z1||{});function jU(t){"use forget";const e=F.c(14),[s,n]=xSe(t),{error:o,persistedTextdocVersionById:a,isEnabled:i,isLoading:l,isFetching:c}=s,u=a===void 0?null:a,d=Gt();let f;e[0]!==t||e[1]!==d||e[2]!==n?(f=()=>{var y,v,S,C,w;const g=Se.getConversationLastTurn(Tt(t)),h=(y=g==null?void 0:g.messages)!=null?y:[],_=Uc(h,bSe),b=h.some(ySe);if(_){const k=(S=(v=_.metadata)==null?void 0:v.canvas)==null?void 0:S.textdoc_id,E=(w=(C=_.metadata)==null?void 0:C.canvas)==null?void 0:w.version;k!=null&&E!=null&&d.prefetchQuery(NU(k,E))}(_||b)&&n()},e[0]=t,e[1]=d,e[2]=n,e[3]=f):f=e[3],I8(f);let m;e[4]!==i||e[5]!==c||e[6]!==l||e[7]!==u?(m=0,u&&c?m=2:(!i||u&&!c&&!l)&&(m=1),e[4]=i,e[5]=c,e[6]=l,e[7]=u,e[8]=m):m=e[8];let p;return e[9]!==o||e[10]!==u||e[11]!==n||e[12]!==m?(p={status:m,fetchError:o,textdocVersionById:u,refetch:n},e[9]=o,e[10]=u,e[11]=n,e[12]=m,e[13]=p):p=e[13],p}function ySe(t){var e,s;return((s=(e=t.metadata)==null?void 0:e.canvas)==null?void 0:s.user_created_temp_textdoc_id)!=null}function bSe(t){return EU(t)}const vSe=ue(Ce,"e45ab3",20,20);function xot({messages:t,clientThreadId:e}){var a,i,l,c;const s=t.find(u=>{var d;return((d=u.metadata)==null?void 0:d.open_in_canvas_view)!=null}),{textdocVersionById:n}=jU(e);if(s==null)return null;const o=(i=(a=s.metadata)==null?void 0:a.open_in_canvas_view)!=null&&i.id?n==null?void 0:n.get((c=(l=s.metadata)==null?void 0:l.open_in_canvas_view)==null?void 0:c.id):void 0;return o!=null?r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(Vn,{className:"icon"}),o.type.startsWith("code/")?r.jsx(vSe,{className:"ms-2 inline-block"}):r.jsx(Eo,{className:"ms-2 inline-block"}),o.title]}):r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(Vn,{className:"icon"}),r.jsx(j,{id:"NHZXLr",defaultMessage:"Canvas document"})]})}const UA=Ne({noThanksLabel:{id:"shoppingDecisionBoundaryButtons.noThanksLabel",defaultMessage:"No thanks"},continueLabel:{id:"shoppingDecisionBoundaryButtons.continueLabel",defaultMessage:"Continue"}}),$A="shopping_app";function yot(t){"use forget";const e=F.c(12),{conversation:s,messages:n}=t;let o;e[0]!==s?(o=async()=>{const g={id:Ds(),author:{role:ot.Tool,name:$A},create_time:Date.now()/1e3,content:{content_type:bt.Text,parts:["The user has declined to use Shopping api tool, answer their question directly"]},recipient:"all",metadata:{is_visually_hidden_from_conversation:!0},status:"finished_successfully",weight:0};await Ao({conversation:s,promptMessage:g,eventSource:"mouse"})},e[0]=s,e[1]=o):o=e[1];const a=o;let i;e[2]!==s?(i=async()=>{const g={id:Ds(),author:{role:ot.Tool,name:$A},create_time:Date.now()/1e3,content:{content_type:bt.Text,parts:["The user has accepted to use Shopping api tool, now we MUST answer their question by triggering the Shopping app"]},recipient:"all",metadata:{is_visually_hidden_from_conversation:!0},status:"finished_successfully",weight:0};await Ao({conversation:s,promptMessage:g,eventSource:"mouse"})},e[2]=s,e[3]=i):i=e[3];const l=i;let c;e[4]!==n[0].id?(c=g=>Se.isLastActorMessage(g,n[0].id),e[4]=n[0].id,e[5]=c):c=e[5];const u=Qe(s.id,c),[d,f]=x.useState(!u);let m;e[6]!==a||e[7]!==l||e[8]!==d?(m=!d&&r.jsxs("div",{className:"mt-4 flex gap-3",children:[r.jsx("button",{type:"button",className:"btn btn-secondary rounded-full px-4 py-2 font-medium",onClick:()=>{f(!0),a()},children:r.jsx(j,T({},UA.noThanksLabel))}),r.jsx("button",{type:"button",className:"btn btn-primary rounded-full px-4 py-2 font-medium",onClick:()=>{f(!0),l()},children:r.jsx(j,T({},UA.continueLabel))})]}),e[6]=a,e[7]=l,e[8]=d,e[9]=m):m=e[9];let p;return e[10]!==m?(p=r.jsx("div",{children:m}),e[10]=m,e[11]=p):p=e[11],p}const bot="n7jupd_crefs",Ri="agentCitation";function SSe(t){return t.type!=="invalid"&&t.cite_key!=null}function vot(t,e){return e.forEach((s,n)=>{s.start_idx!=null&&s.end_idx!=null?(t=t.replace(MSe(s),(o,a)=>" :".concat(Ri,"{").concat(Iu(n,a),"}\n")),t=t.replace(TSe(s),(o,a)=>" :".concat(Ri,"{").concat(Iu(n,a),"}")),t=t.replace(wSe(s)," :".concat(Ri,"{").concat(Iu(n),"}"))):SSe(s)&&(t=t.replace(ESe(s),(o,a)=>" :".concat(Ri,"{").concat(Iu(n,a),"}\n")),t=t.replace(kSe(s),(o,a)=>" :".concat(Ri,"{").concat(Iu(n,a),"}")),t=t.replace(CSe(s)," :".concat(Ri,"{").concat(Iu(n),"}")))}),t}function Sot(){return t=>{Fk(t,e=>{var s;!Lpe(e)||e.name!==Ri||(e.data=(s=e.data)!=null?s:{},e.data.hName=Ri,e.data.hProperties=U(T({},e.attributes),{nodeType:e.type}))})}}function CSe(t){return new RegExp("{{".concat(t.type,":").concat(t.cite_key,"}}\\.?"))}function wSe(t){return new RegExp("".concat(t.matched_text,"\\.?"))}function kSe(t){return new RegExp("\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function TSe(t){return new RegExp("\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function ESe(t){return new RegExp("\\!\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function MSe(t){return new RegExp("\\!\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function Iu(t,e){const s={citationIndex:t.toString()};return e&&(s.label=e),Object.entries(s).map(([n,o])=>"".concat(n,"='").concat(o,"'")).join(" ")}function NSe(t,e=[]){var n;if(e.length===0)return t;const s=e.filter(o=>{var a;return o.end_ix<=t.length&&o.citation_format_type==="tether_markdown"&&((a=o.metadata)==null?void 0:a.type)==="webpage"});for(let o=s.length-1;o>=0;o--){const a=s[o];if(((n=a.metadata)==null?void 0:n.type)!=="webpage")continue;const{start_ix:i,end_ix:l,metadata:c}=a,d=t.substring(i,l).replace(/\[(.*?)\]\((\d+)\)/g,"[$1](".concat(c==null?void 0:c.url,")"));t=t.substring(0,i)+d+t.substring(l)}return t}function ASe(t,e=[]){var a,i;if(e.length===0)return[];const s=[],n=e.filter(l=>l.end_ix<=t.length&&l.citation_format_type!=="tether_markdown"),o=JR(t);for(let l=n.length-1;l>=0;l--){const c=n[l];let u;const{start_ix:d,end_ix:f,metadata:m,invalid_reason:p}=c;if(!(m!=null&&m.type))continue;const g=o.slice(d,f).join("");switch(m.type){case"webpage":u=U(T({},m),{type:"webpage",title:(a=m.title)!=null?a:"",snippet:(i=m.text)!=null?i:null,pub_date:ISe(m.pub_date),matched_text:g,start_idx:d,end_idx:f,alt:null,prompt_text:null,safe_urls:[],attributions:null,refs:[]});break;case"file":u=U(T({},m),{matched_text:g,start_idx:d,end_idx:f,alt:null,prompt_text:null,safe_urls:[],refs:[]});break}p&&(u={type:"invalid",alt:p,prompt_text:null,start_idx:d,end_idx:f,matched_text:g,invalid:!0,safe_urls:[],refs:[]});let h=!1;if(s.length>0){const _=s[s.length-1];HA(_)===HA(u)&&o.slice(_.end_idx,c.start_ix).join("").trim().length===0&&(s[s.length-1].end_idx=c.end_ix,h=!0)}!h&&u&&s.push(u)}return s}function Cot(t,e=[],s=[]){const n=NSe(t,e),a=[...s.length>0?[]:ASe(n,e),...s],i=ox(a);return{text:n,contentReferences:i}}function HA(t){switch(t.type){case"file":return t.id;case"webpage":return t.url;case"invalid":return t.alt}}function ISe(t){return t==null?null:new Date(t).getTime()/1e3}function wot(t){return t.startsWith("file_")||t.startsWith("file-")}class jSe{constructor(){X(this,"loggedEvents",new Set)}logEvent(e,s,n){if(!this.loggedEvents.has(e)){const o=n!=null?n:window.performance.now();B.logEvent(e,T({timeMs:o},s)),this.loggedEvents.add(e)}}}const PSe=new jSe;function kot({messages:t,clientThreadId:e}){var l,c,u;const[s,n]=x.useState(),o=ne(),a=Bs(e);let i=null;for(const d of t)if(((u=(c=(l=d.metadata)==null?void 0:l.dalle)==null?void 0:c.from_client)==null?void 0:u.operation)!=null){i=d.metadata.dalle.from_client.operation;break}return x.useEffect(()=>{if(i==null)return;const d=i.original_file_id;async function f(m){try{const p=await V_(m,void 0,void 0,a,!1);p.status===z_.Success?n(p.download_url):Ge.addError("Error fetching URL for file ".concat(m,": ").concat(p.status))}catch(p){}}f(d)},[a,i]),i==null?null:r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(Vn,{className:"icon"}),s==null?r.jsx("div",{className:"h-7"}):r.jsxs(r.Fragment,{children:[r.jsx("img",{src:s,alt:o.formatMessage({id:"textMessage.editedImageAltText",defaultMessage:"Edited image"}),className:"h-7 w-auto rounded-sm opacity-50"}),i.type==="inpainting"&&r.jsx("span",{className:"ms-1 text-sm font-semibold",children:r.jsx(j,{id:"textMessage.inpaintedImage",defaultMessage:"Selection"})})]})]})}function jT({type:t="info",children:e,isDismissible:s=!1,onDismiss:n,className:o,isElevated:a=!1,primaryAction:i,customIcon:l,iconCentered:c=!1}){const[u,d]=x.useState(!1);if(u)return null;let f;return t!=="none"&&(f=l||ci),r.jsxs(RSe,{$type:t,className:z("flex w-full items-center gap-6 rounded-2xl border text-sm",s?"py-2.5 ps-3 pe-2 md:py-3 md:ps-4 md:pe-3":"px-3 py-2.5 md:p-4",a&&"shadow-xxs",o),children:[r.jsxs("div",{className:z("flex min-w-0 grow gap-3",c?"items-center":"items-start"),children:[f&&r.jsx(f,{className:z("icon-lg shrink-0",s&&"mt-[2px] md:mt-px",(t==="info"||t==="none")&&"text-token-text-secondary")}),r.jsx("div",{className:z("min-w-0 grow",s?"pt-[4px] md:pt-[3px]":"pt-[2px]",!f&&"ps-1"),children:e})]}),i,s&&r.jsx("button",{onClick:()=>{d(!0),n==null||n()},className:z("text-token-text-primary flex h-7 w-7 shrink-0 items-center justify-center self-start rounded-full bg-transparent",(t==="info"||t==="none")&&"hover:bg-token-main-surface-secondary",t==="danger"&&"hover:bg-token-surface-error/10",t==="warning"&&"hover:bg-orange-400/10"),children:r.jsx(Rn,{className:"icon"})})]})}var Z5;const RSe=Mt.div(Z5||(Z5=St(["\n",""])),({$type:t})=>{switch(t){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error/5";case"warning":return"text-orange-600 bg-orange-400/5 border-orange-400/15";case"success":return"text-green-500 border-green-500 bg-green-500/10";default:return"text-token-text-primary border-token-border-default bg-token-main-surface-primary/10"}}),OSe=({disclaimerContent:t})=>{let e;switch(t){case"us_elections_policy":e=r.jsx(j,{id:"D1Mw8a",defaultMessage:"Always verify information about voting with your state or local election authority. For more information, visit <usElectionLink></usElectionLink>.",values:{usElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://canivote.org",rel:"noreferrer",className:"underline hover:no-underline",children:"canivote.org"})}});break;case"eu_elections_policy":e=r.jsx(j,{id:"Disclaimer.EUElections",defaultMessage:"Always verify information about voting with your local election authority. For more information about the EU elections, visit <euElectionLink></euElectionLink>.",values:{euElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://elections.europa.eu",rel:"noreferrer",className:"underline hover:no-underline",children:"elections.europa.eu"})}});break;case"generic_elections_policy":e=r.jsx(j,{id:"Disclaimer.GenericElections",defaultMessage:"Always verify information about voting with your local election authority."});break;default:e=r.jsx(go,{className:"text-sm",componentOverrides:{a:s=>{const i=s,{node:n,children:o}=i,a=De(i,["node","children"]);return r.jsx("a",U(T({},a),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:o}))}},children:t})}return r.jsx(jT,{className:"w-fit self-start",children:e})};function LSe({message:t}){var e,s;return(s=(e=t==null?void 0:t.clientMetadata)==null?void 0:e.disclaimers)!=null&&s.length?r.jsx("div",{className:"flex flex-col gap-2",children:t.clientMetadata.disclaimers.map(n=>r.jsx(OSe,{disclaimerContent:n},n))}):null}const DSe=t=>{var e;return{type:"table",file_id:(e=t.id)!=null?e:"",title:PJ(t),file_name:t.name,context_connector_info:t.context_connector_info}};function FSe(){return m1(kn.DataAnalysisV2)}const BSe=ue(Ce,"29e159",20,20,!0);function PU(s){var n=s,{contextConnectorSourceUrl:t}=n,e=De(n,["contextConnectorSourceUrl"]);const o=ne(),[a,i]=x.useState({width:0,height:0}),l=a.width/a.height,c=a.width>0&&a.height>0,u=x.useMemo(()=>{if(t!==void 0){let d=new URL(t);return d.protocol!=="https:"&&(d=void 0),d==null?void 0:d.toString()}},[t]);return x.useEffect(()=>{if(!e.src)throw new Error("ExpandableImage requires a src");const d=new Image;d.onload=()=>{i({width:d.naturalWidth,height:d.naturalHeight})},d.onerror=()=>{},d.src=e.src},[e.src]),r.jsxs(Pc,{children:[r.jsx(aC,{className:e.className,disabled:!c,children:e.children}),r.jsx(Rc,{children:r.jsxs(cp,{className:"radix-state-open:animate-show fixed inset-0 z-[100] flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(Xd,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(Rn,{className:"h-5 w-5 text-gray-100"})})}),r.jsxs(Zd,{onEscapeKeyDown:d=>d.stopPropagation(),className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:[r.jsx("div",{className:z("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:l},children:r.jsx("img",{src:e.src,alt:e.alt,className:"h-full w-full object-contain"})}),u&&r.jsx("div",{className:"absolute end-14 top-4",children:r.jsx(It,{label:o.formatMessage(USe.openOriginal),children:r.jsx("a",{href:u,target:"_blank",rel:"noreferrer",children:r.jsx(BSe,{className:"icon rotate-180 text-gray-100"})})})})]})]})})]})}const USe=Ne({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}}),RU=ue(Ce,"1a3695",20,20),If=ue(Ce,"d7281f",20,20),$Se=t=>x.createElement("svg",T({width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),x.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.7587 3H15.2413C16.0463 2.99999 16.7106 2.99998 17.2518 3.04419C17.8139 3.09012 18.3306 3.18868 18.816 3.43597C19.5686 3.81947 20.1805 4.43139 20.564 5.18404C20.8113 5.66937 20.9099 6.18608 20.9558 6.74817C21 7.28936 21 7.95372 21 8.75868V15.2413C21 16.0463 21 16.7106 20.9558 17.2518C20.9099 17.8139 20.8113 18.3306 20.564 18.816C20.1805 19.5686 19.5686 20.1805 18.816 20.564C18.3306 20.8113 17.8139 20.9099 17.2518 20.9558C16.7106 21 16.0463 21 15.2413 21H8.75868C7.95372 21 7.28936 21 6.74817 20.9558C6.18608 20.9099 5.66937 20.8113 5.18404 20.564C4.43139 20.1805 3.81947 19.5686 3.43597 18.816C3.18868 18.3306 3.09012 17.8139 3.04419 17.2518C2.99998 16.7106 2.99999 16.0463 3 15.2413V8.7587C2.99999 7.95373 2.99998 7.28937 3.04419 6.74817C3.09012 6.18608 3.18868 5.66937 3.43597 5.18404C3.81947 4.43139 4.43139 3.81947 5.18404 3.43597C5.66937 3.18868 6.18608 3.09012 6.74817 3.04419C7.28937 2.99998 7.95373 2.99999 8.7587 3ZM5 11V15.2C5 16.0566 5.00078 16.6389 5.03755 17.089C5.07337 17.5274 5.1383 17.7516 5.21799 17.908C5.40973 18.2843 5.7157 18.5903 6.09202 18.782C6.24842 18.8617 6.47262 18.9266 6.91104 18.9624C7.36113 18.9992 7.94342 19 8.8 19H9V11H5ZM9 9H5V8.8C5 7.94342 5.00078 7.36113 5.03755 6.91104C5.07337 6.47262 5.1383 6.24842 5.21799 6.09202C5.40973 5.7157 5.7157 5.40973 6.09202 5.21799C6.24842 5.1383 6.47262 5.07337 6.91104 5.03755C7.36113 5.00078 7.94342 5 8.8 5H9V9ZM11 11V19H15.2C16.0566 19 16.6389 18.9992 17.089 18.9624C17.5274 18.9266 17.7516 18.8617 17.908 18.782C18.2843 18.5903 18.5903 18.2843 18.782 17.908C18.8617 17.7516 18.9266 17.5274 18.9624 17.089C18.9992 16.6389 19 16.0566 19 15.2V11H11ZM19 9H11V5H15.2C16.0566 5 16.6389 5.00078 17.089 5.03755C17.5274 5.07337 17.7516 5.1383 17.908 5.21799C18.2843 5.40973 18.5903 5.7157 18.782 6.09202C18.8617 6.24842 18.9266 6.47262 18.9624 6.91104C18.9992 7.36113 19 7.94342 19 8.8V9Z"})),ws="/cdn/assets/sprites-sonic-koti6qe3.svg",PT=ue(ws,"ab8f91",24,24);function HSe({enabled:t,text:e}){"use no forget";const[s,n]=x.useState(null),[o,a]=x.useState(!1),i=x.useCallback(l=>{n(l)},[]);return x.useEffect(()=>{if(!t||!s){a(!1);return}const l=()=>{a(s.scrollWidth>s.clientWidth)};if(l(),typeof ResizeObserver>"u")return;const c=new ResizeObserver(()=>l());return c.observe(s),()=>c.disconnect()},[s,t,e]),{ref:i,isTruncated:o}}function OU({fileName:t,icon:e,loadingPercentage:s,contextConnectorInfo:n,customFileDescription:o,fileNameClass:a,showFileNameTooltip:i=!1}){var b,y;const l=ne(),c=s!==void 0&&s<100,u=Hm(t),d=(b=n==null?void 0:n.syntheticExtension)!=null?b:null;function f(v){if(Vc(v))return l.formatMessage(ju.fileDescImage);switch(u){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return l.formatMessage(ju.fileDescDocument);case"zip":return l.formatMessage(ju.fileDescZip);case"xls":case"xlsx":case"csv":return l.formatMessage(ju.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return l.formatMessage(ju.fileDescPresentation);default:return l.formatMessage(ju.fileDescFile)}}const m=o!=null?o:n!=null&&n.contextConnector?r.jsx(RJ,{contextConnector:n.contextConnector,extension:(y=d!=null?d:u)!=null?y:null}):f(t),p=OJ(t,d),{ref:g,isTruncated:h}=HSe({enabled:i,text:p}),_=r.jsx("div",{ref:g,className:z("truncate",a!=null?a:"font-semibold"),"aria-label":i?p:void 0,children:p});return r.jsxs("div",{className:"overflow flex flex-row items-center gap-2",children:[e!=null&&e!==!1?r.jsxs("div",{className:"border-token-border-heavy relative h-10 w-10 shrink-0 overflow-hidden rounded-lg border",children:[e,c&&r.jsx(GA,{percentage:s,blurBackground:!0})]}):r.jsx("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-lg",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:z("inset-0",LU),style:{backgroundColor:DU(t,n==null?void 0:n.contextConnector)}}),r.jsx(GA,{percentage:n?null:s})]}):r.jsx(RT,{filename:t,contextConnectorInfo:n})}),r.jsxs("div",{className:"overflow-hidden",children:[i?r.jsx(It,{label:p,contentClassName:"break-all",open:h?void 0:!1,children:_}):_,r.jsx("div",{className:"text-token-text-secondary truncate",children:m})]})]})}function GA({percentage:t,blurBackground:e=!1}){return r.jsx("div",{className:z("absolute inset-0 flex items-center justify-center rounded-lg text-white",e&&"bg-black/5 backdrop-blur-xs"),children:t?r.jsx(Fd,{percentage:t,className:"h-6 w-6"}):r.jsx(Wn,{className:"text-token-text-secondary h-6 w-6"})})}const LU="h-10 w-10 shrink-0";function RT({filename:t,contextConnectorInfo:e,className:s=LU,glyphClassName:n="h-5 w-5"}){var l,c,u;if(e)return r.jsx("div",{className:z("flex items-center justify-center rounded-lg",s),style:{backgroundColor:DU(t,e.contextConnector)},children:r.jsx(LJ,{contextConnector:e.contextConnector,extension:(c=(l=e.syntheticExtension)!=null?l:Hm(t))!=null?c:null,className:z(n,"text-white")})});const o=(u=Hm(t))!=null?u:null,{BgColor:a,Icon:i}=FU(o);return r.jsx("div",{className:z("flex items-center justify-center rounded-lg",s),style:{backgroundColor:a},children:r.jsx(i,{className:z(n,"text-white")})})}function DU(t,e){var n;if(e)return vo.gray.solid[50];const s=(n=Hm(t))!=null?n:null;return FU(s).BgColor}function FU(t){const e={purple:vo.purple[400],blue:vo.blue[400],green:vo.green[400],red:vo.red[400],gray:vo.gray.solid[400]},s=(t!=null?t:"").toLowerCase();return s==="zip"?{BgColor:e.purple,Icon:PT}:s==="pdf"?{BgColor:e.red,Icon:ea}:s==="xls"||s==="xlsx"||s==="csv"?{BgColor:e.green,Icon:$Se}:s==="doc"||s==="docx"||s==="txt"||s==="md"||s==="markdown"?{BgColor:e.blue,Icon:Eo}:s==="png"||s==="jpg"||s==="jpeg"||s==="gif"||s==="webp"?{BgColor:e.gray,Icon:If}:{BgColor:e.gray,Icon:ea}}const ju=Ne({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}}),GSe=Pe(()=>me(()=>import("./kcgt5jmhu7rxo8su.js"),__vite__mapDeps([214,1,3,4])).then(t=>t.FilePreviewModal));function nl(t){return typeof window>"u"?!1:typeof t!="string"}function VSe({downloadLink:t}){const e=x.useCallback(()=>{var n;const s=document.createElement("a");s.href=t,s.setAttribute("download",(n=t.split("/").pop())!=null?n:"downloaded_file"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},[t]);return r.jsx("button",{onClick:e,children:r.jsx(RU,{className:"icon-sm m-1.5"})})}function VA({onClick:t,ariaLabel:e,large:s=!1,children:n}){return r.jsx("button",{onClick:t,"aria-label":e,className:z("transition-colors","flex h-4 w-4 items-center justify-center rounded-full","border-[rgba(0,0,0,0.1)] bg-black text-white","dark:border-[rgba(255,255,255,0.1)] dark:bg-white dark:text-black",s&&"h-6 w-6"),children:n})}function BU(t){"use forget";const e=F.c(91),{disableEditButton:s,onRemoveFileClick:n,onImageEditClick:o,useLargeImageThumbnailStyle:a,file:i,fileId:l,gizmoId:c,loadingPercentage:u,contextConnectorInfo:d,width:f,alwaysShowData:m,showDownloadButton:p,downloadLink:g,borderRadius:h,className:_,isUserTurn:b,clientThreadId:y}=t,v=f===void 0?"normal":f,S=m===void 0?!1:m,C=p===void 0?!1:p,w=g===void 0?"":g,k=h===void 0?"xl":h,E=b===void 0?!1:b,M=G(),N=ne(),A=u!==void 0&&u<100,I=nl(i)?i.name:i;let P;e[0]!==i||e[1]!==l||e[2]!==I?(P=nl(i)&&(i==null?void 0:i.type.startsWith("image/"))||Vc(I)&&l!=null,e[0]=i,e[1]=l,e[2]=I,e[3]=P):P=e[3];const R=P;let O;e[4]!==y?(O=y?Rt(y):void 0,e[4]=y,e[5]=O):O=e[5];const L=O;let D;e[6]!==d||e[7]!==L||e[8]!==i||e[9]!==l||e[10]!==c||e[11]!==R?(D=R&&r.jsx(WSe,{file:i,fileId:l,gizmoId:c,contextConnectorInfo:d,conversationId:L}),e[6]=d,e[7]=L,e[8]=i,e[9]=l,e[10]=c,e[11]=R,e[12]=D):D=e[12];const H=D,V=x.useContext(ZC),q=(V==null?void 0:V.serverSharedThreadId)&&E,W=DJ(),$=R||d==null?void 0:d.sourceUrl,Z=!(d!=null&&d.sourceUrl)&&!H?I:void 0;let K;e[13]!==i?(K=nl(i)&&(i==null?void 0:i.type)==="text/plain",e[13]=i,e[14]=K):K=e[14];const Y=K;let ae;e[15]!==S||e[16]!==d||e[17]!==M||e[18]!==Y?(ae=Y&&!S&&!d&&$6(M),e[15]=S,e[16]=d,e[17]=M,e[18]=Y,e[19]=ae):ae=e[19];const se=ae;let ee;e[20]!==y||e[21]!==L||e[22]!==M||e[23]!==l||e[24]!==I||e[25]!==c||e[26]!==A?(ee=async()=>{if(!A&&l)if(Hm(I)==="pdf")mt(M,GSe,{gizmoId:c,fileId:l,fileName:I,clientThreadId:y});else{const ye=await V_(l,c,!1,y!=null?L:void 0,!1);ye.status===z_.Success?window.open(ye.download_url,"_blank"):Ge.addError("Failed to get download link for file: ".concat(I))}},e[20]=y,e[21]=L,e[22]=M,e[23]=l,e[24]=I,e[25]=c,e[26]=A,e[27]=ee):ee=e[27];const re=ee;let he;e[28]!==i||e[29]!==se?(he={file:i,isExpandableTextFile:se},e[28]=i,e[29]=se,e[30]=he):he=e[30];const fe=qSe(he),pe=!n;if(q){if(!R||W()){let ye;e[31]!==R?(ye=R?r.jsx(If,{className:"icon-sm"}):r.jsx(Xm,{className:"icon-sm"}),e[31]=R,e[32]=ye):ye=e[32];const Re=ye;let Ve;e[33]!==N||e[34]!==R?(Ve=R?N.formatMessage(hm.uploadedImage):N.formatMessage(hm.uploadedFile),e[33]=N,e[34]=R,e[35]=Ve):Ve=e[35];const ze=Ve;let Fe;e[36]!==ze?(Fe=r.jsx("span",{children:ze}),e[36]=ze,e[37]=Fe):Fe=e[37];let be;return e[38]!==Re||e[39]!==Fe?(be=r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[Re,Fe]}),e[38]=Re,e[39]=Fe,e[40]=be):be=e[40],be}if(R)return null}const le=v==="wide"?"w-80":"w-60";let ve;e[41]!==le?(ve=z("p-2",le),e[41]=le,e[42]=ve):ve=e[42];let Te;e[43]!==d||e[44]!==I||e[45]!==H||e[46]!==u?(Te=r.jsx(OU,{fileName:I,icon:H,loadingPercentage:u,contextConnectorInfo:d}),e[43]=d,e[44]=I,e[45]=H,e[46]=u,e[47]=Te):Te=e[47];let xe;e[48]!==w||e[49]!==C?(xe=C&&w!==""&&r.jsx("div",{className:"absolute end-1 top-1",children:r.jsx(VSe,{downloadLink:w})}),e[48]=w,e[49]=C,e[50]=xe):xe=e[50];let ce;e[51]!==ve||e[52]!==Te||e[53]!==xe?(ce=r.jsxs("div",{className:ve,children:[Te,xe]}),e[51]=ve,e[52]=Te,e[53]=xe,e[54]=ce):ce=e[54];const we=ce,ge=k==="xl"&&"rounded-xl",Ae=k==="2xl"&&"rounded-2xl";let Ue;e[55]!==_||e[56]!==ge||e[57]!==Ae?(Ue=z("border-token-border-default bg-primary relative overflow-hidden border",ge,Ae,_),e[55]=_,e[56]=ge,e[57]=Ae,e[58]=Ue):Ue=e[58];let Ie;e[59]!==S||e[60]!==we||e[61]!==H||e[62]!==se||e[63]!==R||e[64]!==A||e[65]!==u||e[66]!==fe||e[67]!==a?(Ie=R&&!S?r.jsxs("div",{className:z("h-14.5 w-14.5",a&&"tall:h-36 tall:w-36"),children:[H,A&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:r.jsx(Fd,{percentage:u,className:"h-6 w-6"})})]}):se&&(fe!=null&&fe.length)?r.jsx(KSe,{trigger:we,content:fe}):we,e[59]=S,e[60]=we,e[61]=H,e[62]=se,e[63]=R,e[64]=A,e[65]=u,e[66]=fe,e[67]=a,e[68]=Ie):Ie=e[68];let Me;e[69]!==re||e[70]!==pe||e[71]!==$||e[72]!==Ue||e[73]!==Ie||e[74]!==Z?(Me=r.jsx(QSe,{showTooltip:pe,sourceUrl:$,className:Ue,tooltipContent:Z,onClick:re,children:Ie}),e[69]=re,e[70]=pe,e[71]=$,e[72]=Ue,e[73]=Ie,e[74]=Z,e[75]=Me):Me=e[75];let te;e[76]!==s||e[77]!==N||e[78]!==o||e[79]!==a?(te=a&&o&&!s&&r.jsx(VA,{onClick:ye=>{ye.stopPropagation(),ye.preventDefault(),o()},ariaLabel:N.formatMessage(hm.editImage),large:a,children:r.jsx(Qc,{"aria-label":"",className:"icon-sm"})}),e[76]=s,e[77]=N,e[78]=o,e[79]=a,e[80]=te):te=e[80];let Q;e[81]!==N||e[82]!==n||e[83]!==a?(Q=n!=null&&r.jsx(VA,{onClick:n,ariaLabel:N.formatMessage(hm.removeFile),large:a,children:r.jsx(f1,{"aria-label":"",className:"icon-sm"})}),e[81]=N,e[82]=n,e[83]=a,e[84]=Q):Q=e[84];let ie;e[85]!==te||e[86]!==Q?(ie=r.jsxs("div",{className:"absolute end-1.5 top-1.5 inline-flex gap-1",children:[te,Q]}),e[85]=te,e[86]=Q,e[87]=ie):ie=e[87];let _e;return e[88]!==Me||e[89]!==ie?(_e=r.jsxs("div",{className:"group text-token-text-primary relative inline-block text-sm",children:[Me,ie]}),e[88]=Me,e[89]=ie,e[90]=_e):_e=e[90],_e}var X5;const UU=Mt.span(X5||(X5=St(["flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white"])));function zSe(){return r.jsx(UU,{})}function WSe({file:t,fileId:e,gizmoId:s,contextConnectorInfo:n,conversationId:o}){const a=ne(),i=nl(t)?t.name:t,l=$U(nl(t)?t:null,i,e,s,n,void 0,void 0,o);return l==null?r.jsx(zSe,{}):r.jsx(PU,{src:l,alt:a.formatMessage(hm.userUploadedImage),contextConnectorSourceUrl:n==null?void 0:n.sourceUrl,className:"h-full w-full",children:r.jsx(UU,{style:{backgroundImage:"url(".concat(l,")")}})})}function qSe({file:t,isExpandableTextFile:e}){const[s,n]=x.useState(void 0);return x.useEffect(()=>{if(e&&nl(t)){const o=new FileReader;o.addEventListener("load",()=>{const a=o.result;n(typeof a=="string"?a:void 0)}),o.readAsText(t)}},[e,t]),s}function KSe({trigger:t,content:e}){return r.jsxs(Pc,{children:[r.jsx(aC,{className:"h-full w-full text-start",children:t}),r.jsx(Rc,{children:r.jsxs(cp,{className:"radix-state-open:animate-show fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(Xd,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(Rn,{className:"h-5 w-5 text-gray-100"})})}),r.jsx(Zd,{className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:r.jsx("div",{className:z("relative max-h-[85vh] max-w-[90vw] overflow-scroll bg-white p-10 dark:bg-gray-800"),children:r.jsx(go,{children:e})})})]})})]})}const uh=new Map,YSe=100;function $U(t,e,s,n,o,a=!1,i=!1,l){const[c,u]=x.useState(void 0),d=Gs().flags,f=d==null?void 0:d.includes(h1.NoAuthEnableFileUploads);return x.useEffect(()=>{if(!a&&o&&s!=null)zA({fileId:s,gizmoId:n,setUri:u,conversationId:l});else if(!o&&(t!=null&&t.type.startsWith("image/")))if(f||i){const m=URL.createObjectURL(t);return u(m),()=>{URL.revokeObjectURL(m)}}else{const m=new FileReader;m.addEventListener("load",()=>{const p=m.result;u(typeof p=="string"?p:void 0)}),m.readAsDataURL(t)}else!a&&e&&Vc(e)&&s!=null?zA({fileId:s,gizmoId:n,setUri:u,conversationId:l}):u(void 0)},[t,e,s,n,o,a,f,i,l]),c}async function zA({fileId:t,gizmoId:e,setUri:s,conversationId:n}){try{const o=uh.get(t);if(o){s(o);return}const a=await V_(t,e,void 0,n);a.status===z_.Success?(uh.size>YSe&&uh.clear(),uh.set(t,a.download_url),s(a.download_url)):Ge.addError("Error fetching URL for file ".concat(t,": ").concat(a.status))}catch(o){Ge.addError(new Error("Error fetching URL for file ".concat(t,")"),{cause:o}))}}const hm=Ne({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},editImage:{id:"FileTile.editImage",defaultMessage:"Edit image"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"},uploadedImage:{id:"FileTile.uploadedImage",defaultMessage:"Uploaded an image"},uploadedFile:{id:"FileTile.uploadedFile",defaultMessage:"Uploaded a file"}});function QSe({showTooltip:t,sourceUrl:e,children:s,className:n,onClick:o,tooltipContent:a}){var u;const i=oe(ax);if(!e&&!a)return r.jsx("div",{className:n,children:s});const l=r.jsx("a",{href:e,target:"_blank",rel:"noreferrer",onClick:o,className:"cursor-pointer",children:r.jsx("div",{className:n,children:s})});if(!t||!i)return l;const c=(u=a!=null?a:e)!=null?u:"";return r.jsx(It,{wide:!0,interactive:!0,label:r.jsxs("a",{href:e,target:"_blank",className:"flex w-full items-center gap-2",rel:"noreferrer",children:[r.jsx("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:JSe(c)}),e&&r.jsx(wr,{className:"icon-sm"})]}),side:"top",children:l})}function JSe(t){return t.split("").join("")}const ZSe=x.createContext({isEmbeddedInFocusedView:!1});function OT(){return x.useContext(ZSe).isEmbeddedInFocusedView}const XSe="GPT-4o with scheduled tasks";function HU({featureType:t,isUserTurn:e=!1,clientThreadId:s}){const n=G(),o=Et(n,s),a=Ee(n,"3612584454"),i=eCe(),l=Ee(n,"891514942"),c=oe(()=>Cs(o).id),u=!tCe({featureType:t,currentModelId:c,conversation:o});if(!(a&&i||l&&u))return null;const m=sCe({featureType:t,unsupportedMessageReason:i?"rateLimit":"modelPicker",currentModelId:c});return r.jsx("div",{className:"flex ".concat(e?"justify-end":"justify-start"),children:m})}function eCe(){var a;const t=G(),e=ct(t),s=(a=e==null?void 0:e.isFree())!=null?a:!1,o=J_().some(i=>i.model_slug==="gpt-4o");return s&&o}function tCe({featureType:t,currentModelId:e,conversation:s}){const n=oe(()=>br(s)),o=G(),a=ct(o),i=a==null?void 0:a.isFree(),l=a==null?void 0:a.isFreeWorkspace();if(i||l)return!0;{const c=n==null?void 0:n.categories.find(d=>d.defaultModel===e);return c?!!(c==null?void 0:c.supportedFeatures.includes(t)):!0}}function sCe({featureType:t,unsupportedMessageReason:e,currentModelId:s=""}){const n=s===FJ?XSe:s,o=ne();let a=null;switch(e){case"rateLimit":switch(t){case An.ATTACHMENT:a=o.formatMessage(Cb.file);break;case An.IMAGE:a=o.formatMessage(Cb.image);break;case An.CANVAS_SUPPORTED:a=o.formatMessage(Cb.canvas);break;default:return null}break;case"modelPicker":switch(t){case An.ATTACHMENT:a=o.formatMessage(wb.file,{modelDisplayName:n});break;case An.IMAGE:a=o.formatMessage(wb.image,{modelDisplayName:n});break;case An.CANVAS_SUPPORTED:a=o.formatMessage(wb.canvas,{modelDisplayName:n});break;default:return null}break}return r.jsx("span",{className:"text-opacity-80 text-xs text-yellow-500",children:a})}const Cb=Ne({canvas:{id:"featureUnsupportedWarning.canvas",defaultMessage:"Document editing temporarily unavailable"},file:{id:"featureUnsupportedWarning.file",defaultMessage:"File analysis temporarily unavailable"},image:{id:"featureUnsupportedWarning.image",defaultMessage:"Image analysis temporarily unavailable"}}),wb=Ne({canvas:{id:"modelPickerUnsupportedWarning.canvas",defaultMessage:"{modelDisplayName} cannot edit documents"},file:{id:"modelPickerUnsupportedWarning.file",defaultMessage:"{modelDisplayName} cannot analyze files"},image:{id:"modelPickerUnsupportedWarning.image",defaultMessage:"{modelDisplayName} cannot analyze images"}}),nCe=Pe(()=>me(()=>import("./ufggbgnzngd8vlsq.js").then(t=>t.A),__vite__mapDeps([215,1,3,4,216,217,41,75,76,218,189,219,220,221])).then(t=>t.default));var eP;const oCe=Mt.div(eP||(eP=St(["flex gap-2 flex-wrap mt-1 max-w-[80%] justify-end"])));var tP;const aCe=Mt.div(tP||(tP=St(["flex flex-col gap-2"]))),Tot=({parts:t,attachments:e,isUserTurn:s,conversation:n})=>{const o=Pa(),a=FSe(),i=gr.getImageAssetPointersFromParts(t),l=new Set(i.map(p=>Ma(p.asset_pointer))),u=OT()||o,d=(e!=null?e:[]).filter(p=>BJ(p.name)),f=(e!=null?e:[]).filter(p=>p.id==null||l.has(p.id)?!1:a?!d.includes(p):!0);return(a?(f.length>0||d.length>0)&&s:f.length>0&&s)?r.jsxs(r.Fragment,{children:[r.jsx(oCe,{children:f.map(p=>r.jsx(BU,{file:p.name,fileId:p.id,contextConnectorInfo:UJ(p.context_connector_info),width:o?"normal":"wide",alwaysShowData:!0,isUserTurn:s,clientThreadId:n.id},p.id))}),r.jsx(HU,{featureType:An.ATTACHMENT,isUserTurn:s,clientThreadId:n.id}),a&&r.jsx(aCe,{className:z(!u&&!0&&"w-[80%]"),children:d.map(p=>r.jsx(nCe,{clientThreadId:n.id,visualization:DSe(p)},p.id))})]}):null};function Eot(t){"use forget";const e=F.c(9),{duration:s,delay:n,animate:o}=t,a=s===void 0?.6:s,i=n===void 0?.1:n,l=o===void 0?!0:o;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=[0,1,1,0,0,0],e[0]=c):c=e[0];const u=c;let d,f;if(e[1]!==l||e[2]!==i||e[3]!==a){const p=$J(u.length-1);d="flex h-8 w-12 items-center justify-center gap-1",f=new Array(3).fill(!0).map((g,h)=>r.jsx(gt.div,{className:"bg-token-text-primary h-1.5 w-1.5 rounded-full",animate:l?{opacity:u}:{opacity:1},transition:{duration:a,repeat:1/0,ease:p,delay:i*h}},h)),e[1]=l,e[2]=i,e[3]=a,e[4]=d,e[5]=f}else d=e[4],f=e[5];let m;return e[6]!==d||e[7]!==f?(m=r.jsx("div",{className:d,children:f}),e[6]=d,e[7]=f,e[8]=m):m=e[8],m}function GU(){const t=x.useRef(!1);return x.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),x.useCallback(()=>t.current,[])}const WA=Ne({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied"}});function VU({buttonText:t,shouldChangeText:e=!0,iconClassName:s="icon-sm",onCopy:n,className:o,iconOnly:a=!1,textPosition:i="right",tooltipSideOffset:l}){const c=ne(),[u,d]=x.useState(!1),f=GU(),m=x.useCallback(g=>{g.stopPropagation(),n(g),d(!0),setTimeout(()=>{f()&&d(!1)},2e3)},[f,n]);let p=t;return e&&u?p=r.jsx(j,T({},WA.copied)):t===!0&&(p=r.jsx(j,T({},WA.copy))),r.jsxs(r.Fragment,{children:[!u&&r.jsx(It,{triggerAs:null,label:r.jsx(j,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),disabled:!a,sideOffset:l,children:r.jsxs(qA,{onClick:m,className:o,"aria-label":c.formatMessage({id:"ywKsIl",defaultMessage:"Copy"}),children:[i==="left"&&!a&&p,r.jsx(Vk,{className:s}),i==="right"&&!a&&p]})}),u&&r.jsxs(qA,{className:o,"aria-label":c.formatMessage({id:"I3L53c",defaultMessage:"Copied"}),children:[i==="left"&&!a&&p,r.jsx(hl,{className:s}),i==="right"&&!a&&p]})]})}var sP;const qA=Mt.button(sP||(sP=St(["flex gap-1 items-center select-none"]))),zU=ue(Ce,"ee0f3c",20,20),WU=-1,n0=0,X1=1,e_=2,LT=3,DT=4,FT=5,BT=6,qU=7,KU=8,KA=typeof self=="object"?self:globalThis,rCe=(t,e)=>{const s=(o,a)=>(t.set(a,o),o),n=o=>{if(t.has(o))return t.get(o);const[a,i]=e[o];switch(a){case n0:case WU:return s(i,o);case X1:{const l=s([],o);for(const c of i)l.push(n(c));return l}case e_:{const l=s({},o);for(const[c,u]of i)l[n(c)]=n(u);return l}case LT:return s(new Date(i),o);case DT:{const{source:l,flags:c}=i;return s(new RegExp(l,c),o)}case FT:{const l=s(new Map,o);for(const[c,u]of i)l.set(n(c),n(u));return l}case BT:{const l=s(new Set,o);for(const c of i)l.add(n(c));return l}case qU:{const{name:l,message:c}=i;return s(new KA[l](c),o)}case KU:return s(BigInt(i),o);case"BigInt":return s(Object(BigInt(i)),o)}return s(new KA[a](i),o)};return n},YA=t=>rCe(new Map,t)(0),Pu="",{toString:iCe}={},{keys:lCe}=Object,qf=t=>{const e=typeof t;if(e!=="object"||!t)return[n0,e];const s=iCe.call(t).slice(8,-1);switch(s){case"Array":return[X1,Pu];case"Object":return[e_,Pu];case"Date":return[LT,Pu];case"RegExp":return[DT,Pu];case"Map":return[FT,Pu];case"Set":return[BT,Pu]}return s.includes("Array")?[X1,s]:s.includes("Error")?[qU,s]:[e_,s]},dh=([t,e])=>t===n0&&(e==="function"||e==="symbol"),cCe=(t,e,s,n)=>{const o=(i,l)=>{const c=n.push(i)-1;return s.set(l,c),c},a=i=>{if(s.has(i))return s.get(i);let[l,c]=qf(i);switch(l){case n0:{let d=i;switch(c){case"bigint":l=KU,d=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return o([WU],i)}return o([l,d],i)}case X1:{if(c)return o([c,[...i]],i);const d=[],f=o([l,d],i);for(const m of i)d.push(a(m));return f}case e_:{if(c)switch(c){case"BigInt":return o([c,i.toString()],i);case"Boolean":case"Number":case"String":return o([c,i.valueOf()],i)}if(e&&"toJSON"in i)return a(i.toJSON());const d=[],f=o([l,d],i);for(const m of lCe(i))(t||!dh(qf(i[m])))&&d.push([a(m),a(i[m])]);return f}case LT:return o([l,i.toISOString()],i);case DT:{const{source:d,flags:f}=i;return o([l,{source:d,flags:f}],i)}case FT:{const d=[],f=o([l,d],i);for(const[m,p]of i)(t||!(dh(qf(m))||dh(qf(p))))&&d.push([a(m),a(p)]);return f}case BT:{const d=[],f=o([l,d],i);for(const m of i)(t||!dh(qf(m)))&&d.push(a(m));return f}}const{message:u}=i;return o([l,{name:c,message:u}],i)};return a},QA=(t,{json:e,lossy:s}={})=>{const n=[];return cCe(!(e||s),!!e,new Map,n)(t),n},kb=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?YA(QA(t,e)):structuredClone(t):(t,e)=>YA(QA(t,e)),Mot=(function(t,e,s,n,o){const a=UT(e);return YU(t)?a.call(o,t,s,n):!1}),UT=(function(t){if(t==null)return fCe;if(typeof t=="string")return dCe(t);if(typeof t=="object")return uCe(t);if(typeof t=="function")return $T(t);throw new Error("Expected function, string, or array as `test`")});function uCe(t){const e=[];let s=-1;for(;++s<t.length;)e[s]=UT(t[s]);return $T(n);function n(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function dCe(t){return $T(e);function e(s){return s.tagName===t}}function $T(t){return e;function e(s,n,o){return!!(YU(s)&&t.call(this,s,typeof n=="number"?n:void 0,o||void 0))}}function fCe(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function YU(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const mCe=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,pCe=/^[a-zA-Z]:\\/;function gCe(t){if(typeof t!="string")throw new TypeError("Expected a `string`, got `".concat(typeof t,"`"));return pCe.test(t)?!1:mCe.test(t)}function hCe(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function Not(t){return t.join(" ").trim()}const _Ce=["http","https"],xCe=["nofollow"],yCe={};function Aot(t){const e=t||yCe,s=e.protocols||_Ce,n=UT(e.test);return function(o){Fk(o,"element",function(a,i,l){if(a.tagName==="a"&&typeof a.properties.href=="string"&&n(a,i,l)){const c=a.properties.href;if(gCe(c)?s.includes(c.slice(0,c.indexOf(":"))):c.startsWith("//")){const u=Kf(e.content,a),d=u&&!Array.isArray(u)?[u]:u,f=Kf(e.rel,a)||xCe,m=typeof f=="string"?hCe(f):f,p=Kf(e.target,a),g=Kf(e.properties,a);if(g&&Object.assign(a.properties,kb(g)),m.length>0&&(a.properties.rel=[...m]),p&&(a.properties.target=p),d){const h=Kf(e.contentProperties,a)||{};a.children.push({type:"element",tagName:"span",properties:kb(h),children:kb(d)})}}}})}}function Kf(t,e){return typeof t=="function"?t(e):t}const bCe=t=>{"use forget";var v;const e=F.c(24);let s,n,o,a,i,l,c;e[0]!==t?(v=t,{label:o,icon:n,as:l,isUserTurn:c,className:s,onClick:a}=v,i=De(v,["label","icon","as","isUserTurn","className","onClick"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7]);const u=l===void 0?"div":l,d=c===void 0?!0:c,f=u,m=u==="button"&&"hover:text-token-text-primary",p=d?"mt-1 justify-end":"mt-12";let g;e[8]!==s||e[9]!==m||e[10]!==p?(g=z("text-token-text-tertiary mx-2 mb-1 flex items-start gap-1.5 text-sm font-normal focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-current",m,p,s),e[8]=s,e[9]=m,e[10]=p,e[11]=g):g=e[11];const h=u==="button"?"button":void 0;let _;e[12]!==n?(_=r.jsx("span",{"aria-hidden":"true",className:"pointer-events-none",children:n}),e[12]=n,e[13]=_):_=e[13];let b;e[14]!==o?(b=r.jsx("p",{className:"line-clamp-3",children:o}),e[14]=o,e[15]=b):b=e[15];let y;return e[16]!==f||e[17]!==a||e[18]!==i||e[19]!==g||e[20]!==h||e[21]!==_||e[22]!==b?(y=r.jsxs(f,U(T({className:g,type:h,onClick:a},i),{children:[_,b]})),e[16]=f,e[17]=a,e[18]=i,e[19]=g,e[20]=h,e[21]=_,e[22]=b,e[23]=y):y=e[23],y},vCe=XC(()=>({images:new Set})),SCe=t=>ew(vCe,t);function CCe(){return SCe(t=>t.images)}function Iot({messages:t}){const e=pme(t),s=CCe();return e.length===0?null:r.jsx("div",{className:z({"mb-2":!0,"grid grid-flow-col gap-3":e.length>1,"w-1/3":e.length===1}),children:e.filter(({contentUrl:n})=>s.has(n)).map((n,o)=>r.jsx("a",{href:n.hostPageUrl,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:n.contentUrl,alt:n.name,className:"aspect-square rounded-xl object-cover"})},o))})}const wCe="o0OWBW_slideUp",jot={slideUp:wCe};function Pot({containsImagesOrAttachments:t,isMaxWidthMessage:e=!1,children:s}){const n=x.useRef(!1);return r.jsx("div",{className:z("user-message-bubble-color corner-superellipse/1.1 relative rounded-[18px] px-4 py-1.5 data-[multiline]:py-3",t&&"rounded-se-lg",e?"w-full":"max-w-[var(--user-chat-width,70%)]"),ref:o=>lg({axis:"height",target:o,onChange:({height:a})=>{if(o){const i=parseFloat(getComputedStyle(document.documentElement).fontSize),l=2*(n.current?12:6);n.current=a>1.5*i+l,dc(o,"data-multiline",n.current)}}}),children:s})}function kCe(){return r.jsx(gt.div,{className:"absolute flex h-8 w-3 origin-center items-center justify-center",initial:{scale:1,opacity:1},animate:{scale:0,opacity:0},transition:{ease:"easeInOut",duration:.2},children:r.jsx("div",{className:"bg-token-text-primary h-3 w-3 rounded-full"})})}function TCe(t){return dt(ECe(t))}function ECe(t){return Ps({enabled:t!=null,queryKey:["imageData",t],queryFn:()=>new Promise((e,s)=>{const n=new Image;n.onload=()=>{e(n)},n.onerror=s,n.src=t})})}function Kn(t){"use forget";const e=F.c(14),{url:s,size:n,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,applySizeToImg:u,onLoad:d,onError:f}=t,m=n===void 0?16:n,p=u===void 0?!0:u;let g;e[0]!==m||e[1]!==s?(g=RCe(s,m),e[0]=m,e[1]=s,e[2]=g):g=e[2];const h=g;if(h==null)return a!=null?a:null;let _;return e[3]!==p||e[4]!==i||e[5]!==l||e[6]!==a||e[7]!==h||e[8]!==o||e[9]!==f||e[10]!==d||e[11]!==c||e[12]!==m?(_=o!=null?r.jsx(MCe,{faviconUrl:h,size:m,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:d,onError:f}):r.jsx(QU,{faviconUrl:h,size:p?m:void 0,className:i,onLoad:d,onError:f}),e[3]=p,e[4]=i,e[5]=l,e[6]=a,e[7]=h,e[8]=o,e[9]=f,e[10]=d,e[11]=c,e[12]=m,e[13]=_):_=e[13],_}function MCe(t){"use forget";const e=F.c(13),{faviconUrl:s,size:n,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:u,onError:d}=t,{data:f,isLoading:m}=TCe(s),p=f&&Math.min(f.width,f.height);if(!m&&(p==null||p<o))return a!=null?a:null;let g;e[0]!==l?(g=z("relative inline-block shrink-0",l),e[0]=l,e[1]=g):g=e[1];let h;e[2]!==i||e[3]!==s||e[4]!==m||e[5]!==d||e[6]!==u||e[7]!==c||e[8]!==n?(h=m?c?r.jsx(NCe,{className:z(i,"duration-200 motion-safe:transition-opacity",!m&&"pointer-events-none opacity-0")}):r.jsx("div",{className:i}):r.jsx(QU,{faviconUrl:s,size:n,className:z(i,"duration-200 motion-safe:transition-opacity",m?"pointer-events-none opacity-0":"opacity-100"),onLoad:u,onError:d}),e[2]=i,e[3]=s,e[4]=m,e[5]=d,e[6]=u,e[7]=c,e[8]=n,e[9]=h):h=e[9];let _;return e[10]!==g||e[11]!==h?(_=r.jsx("div",{className:g,children:h}),e[10]=g,e[11]=h,e[12]=_):_=e[12],_}function QU(t){"use forget";const e=F.c(7),{faviconUrl:s,size:n,className:o,onLoad:a,onError:i}=t,l=n!=null?n:"auto",c=n!=null?n:"auto";let u;return e[0]!==o||e[1]!==s||e[2]!==i||e[3]!==a||e[4]!==l||e[5]!==c?(u=r.jsx("img",{src:s,alt:"",width:l,height:c,className:o,onLoad:a,onError:i}),e[0]=o,e[1]=s,e[2]=i,e[3]=a,e[4]=l,e[5]=c,e[6]=u):u=e[6],u}function NCe({className:t,children:e}){return r.jsx("div",{"aria-busy":!0,className:z("bg-token-bg-tertiary flex animate-pulse items-center justify-center rounded-full",t),children:e})}const ACe="http://files.openai.com",ICe="https://openai.com",jCe="https://images.openai.com";function PCe(t){const e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")return ACe;const s=e.origin;return s===jCe?ICe:s}function RCe(t,e){if(!t)return null;try{const s=PCe(t);return"https://www.google.com/s2/favicons?domain=".concat(s,"&sz=").concat(e)}catch(s){return Ge.addAction("Invalid favicon url",{error:s,url:t}),null}}const V2={favicons:[]};function OCe(t,e){const s=new Set,n=[];for(const o of[...t,...e])s.has(o.url)||(n.push(o),s.add(o.url));return n}const LCe=t=>({entries:{},updateFromEvent:(e,s)=>t(n=>{var i,l;const o=(i=n.entries[e])!=null?i:V2,a=U(T({},o),{favicons:OCe(o.favicons,(l=s.data.favicons)!=null?l:[])});return{entries:U(T({},n.entries),{[e]:a})}})}),JA=TC()(LCe,fi);function DCe(t){const e=JA(n=>{var o,a;return t==null?V2.favicons:(a=(o=n.entries[t])==null?void 0:o.favicons)!=null?a:V2.favicons}),s=x.useCallback(({ctx:n,profiler:o})=>{if(!t||t.trim().length===0||!xr(n).checkGate("948657827",{disableExposureLog:!0}))return;(async()=>{var d,f,m;o==null||o.logTimingOnce("fetch_favicons_stream_called");const l=D1("".concat(vc,"/favicons"),{ctx:n,method:"POST",headers:T({},Bx()),body:{query:t}});let c=!1,u=!1;try{for(var p=ua(l),g,h,_;g=!(h=await p.next()).done;g=!1){const b=h.value;u||(u=!0,o==null||o.logTimingOnce("fetch_favicons_stream_first_event"));const y=b;y.event==="favicons"&&(JA.getState().updateFromEvent(t,{event:"favicons",data:{favicons:(d=y.data.favicons)!=null?d:[]}}),!c&&((m=(f=y.data.favicons)==null?void 0:f.length)!=null?m:0)>0&&(c=!0,o==null||o.logTimingOnce("fetch_favicons_first_link_fetched_client")))}}catch(h){_=[h]}finally{try{g&&(h=p.return)&&await h.call(p)}finally{if(_)throw _[0]}}})().catch(()=>{})},[t]);return{favicons:e,load:s}}const FCe=x.createContext(!1);var JU=(t=>(t.Sources="sources",t.Images="images",t))(JU||{}),HT=(t=>(t.Links="links",t.Citations="citations",t.SearchResults="search_results",t))(HT||{}),Tb,ZA;function BCe(){if(ZA)return Tb;ZA=1;var t=hO(),e=QC(),s=H6(),n=Math.ceil,o=Math.max;function a(i,l,c){(c?e(i,l,c):l===void 0)?l=1:l=o(s(l),0);var u=i==null?0:i.length;if(!u||l<1)return[];for(var d=0,f=0,m=Array(n(u/l));d<u;)m[f++]=t(i,d,d+=l);return m}return Tb=a,Tb}var UCe=BCe();const $Ce=en(UCe),XA=3;function HCe({navigation:t,trackContentReferenceEvent:e}){const[s,n]=x.useState(!1),[o,a]=x.useState(0),i=t.domains.filter(m=>m.url);x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:i.map(m=>m.url).join(",")})},[i]);const l=nf(),c=VCe(i.length,!l),u=s?$Ce(i,c):[i.slice(0,XA)];function d(){return i.length<=XA?null:o===0&&!s?r.jsx(Eb,{onClick:()=>n(!0),className:"shrink-0 text-sm whitespace-nowrap",children:r.jsx(j,{id:"B5xwY8",defaultMessage:"More links"})}):r.jsx(Eb,{onClick:()=>a(o-1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o===0,children:r.jsx(j,{id:"Q0o6pZ",defaultMessage:"{icon} Previous",values:{icon:r.jsx(Wx,{className:"icon-sm -ms-1 -me-1"})}})})}function f(){return s?r.jsx(Eb,{onClick:()=>a(o+1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o>=u.length-1,children:r.jsx(j,{id:"N4c5Xd",defaultMessage:"Next {icon}",values:{icon:r.jsx(Zr,{className:"icon-sm -ms-1 -me-1"})}})}):null}return r.jsxs("div",{className:"not-prose mb-3",children:[r.jsx(gt.div,{initial:!1,animate:{maxHeight:s?1e3:250,opacity:1},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"flex transition-transform",style:{transform:"translateX(-".concat(o*100,"%)")},children:u.map((m,p)=>r.jsx("div",{className:"flex flex-[0_0_100%] shrink-0 flex-col gap-6",children:m.map((g,h)=>r.jsx(GCe,{navigationDomain:g,trackContentReferenceEvent:e,analyticsMetadata:{section_index:h}},g.url))},p))})}),r.jsx("div",{className:"mt-6 flex flex-col gap-6",children:r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-3",children:[d(),r.jsx("div",{className:"bg-token-bg-tertiary h-[1px] w-full flex-1"}),f()]})})]})}function GCe({navigationDomain:t,trackContentReferenceEvent:e,analyticsMetadata:s}){var n;return x.useEffect(()=>{e("link_action",null,"navigation",{url:t.url,title:t.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:s.section_index})},[]),r.jsxs(qn,{className:"flex flex-col hover:underline",href:t.url,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kn,{url:t.url,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"text-token-text-secondary text-xs",children:(n=t.attribution)!=null?n:t.subtitle})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-token-text-primary text-sm",children:t.title}),t.snippet&&r.jsx("div",{className:"text-token-text-secondary line-clamp-1 w-full text-sm",children:t.snippet})]})]})}function VCe(t,e){const s=e?[5,6]:[6,7,8];let n=s[0],o=-1;for(let a=0;a<s.length;a++){const i=s[a],l=t%i;if(l===0)return i;l>o&&(o=l,n=i)}return n}var nP;const Eb=Mt.button(nP||(nP=St(["\n    shrink-0\n    text-sm\n    whitespace-nowrap\n    flex\n    items-center\n    gap-1\n    text-token-text-secondary\n    hover:text-token-text-primary\n    disabled:opacity-50\n    disabled:hover:text-token-text-secondary\n  "]))),zCe=x.createContext(null),Mb=3,WCe=3;function qCe({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:s}){const n=G(),o=Ee(n,"4111922784"),a=x.useContext(zCe)==="user-query-with-navlink",i=x.useContext(FCe);return r.jsx("div",{className:z({hidden:i&&a}),children:o?r.jsx(HCe,{navigation:t,trackContentReferenceEvent:s}):r.jsx(KCe,{navigation:t,onShowSearchResults:e,trackContentReferenceEvent:s})})}function KCe({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:s}){const n=t.domains.filter(i=>i.url);x.useEffect(()=>{s("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:n.map(i=>i.url).join(",")})},[n]);const o=n.slice(0,Mb),a=n.slice(Mb,Mb+WCe);return r.jsxs("div",{className:"not-prose mb-3 flex gap-2",children:[o.map((i,l)=>r.jsx(QCe,{isPrimaryDomain:l===0,isFistLineDomain:!0,navigationDomain:i,trackContentReferenceEvent:s,analyticsMetadata:{section_index:l}},i.url)),a.length>0&&r.jsx(YCe,{onShowSearchResults:e,trackContentReferenceEvent:s,moreDomains:a})]})}const YCe=({onShowSearchResults:t,trackContentReferenceEvent:e,moreDomains:s})=>r.jsx(ZU,{component:"div",className:"group flex w-28 cursor-pointer",onClick:()=>{e("Search Content Reference Clicked","search_content_reference_clicked","navigation",{sidebar:"sidebar"}),t(JU.Sources,HT.Links)},children:r.jsxs("div",{className:"flex min-w-0 flex-col",children:[r.jsx("div",{className:"flex items-center",children:s.map((n,o)=>r.jsx("div",{style:{zIndex:s.length-o},className:"ms-[-6px] first:ms-0",children:r.jsx("div",{className:z("flex h-4 w-4 items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary group-hover:border-token-bg-tertiary border-2"),children:r.jsx(Kn,{url:n.url,size:32,minSize:20,className:"icon-xs rounded-full",showLoadingAnimation:!0})},n.url)},n.url))}),r.jsx("div",{className:"text-token-text-primary flex text-sm font-semibold",children:r.jsx("span",{className:"truncate",children:r.jsx(j,{id:"B5xwY8",defaultMessage:"More links"})})})]})}),QCe=({isPrimaryDomain:t,isFistLineDomain:e,navigationDomain:s,trackContentReferenceEvent:n,analyticsMetadata:o})=>{var a;return x.useEffect(()=>{n("link_action",null,"navigation",{url:s.url,title:s.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:o.section_index})},[]),r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx(JCe,{isFistLineDomain:e,isPrimaryDomain:t,title:s.title,subtitle:(a=s.subtitle)!=null?a:void 0,url:s.url,domain:s.domain,subDomains:s.sub_domains,trackContentReferenceEvent:n,analyticsMetadata:o})})},JCe=({isFistLineDomain:t,title:e,subtitle:s,url:n,trackContentReferenceEvent:o,analyticsMetadata:a})=>{const i={url:n,title:e,link_type:"card",section:"fast_nav",section_location:"response",section_index:a.section_index},l=bs()?"_self":"_blank";return r.jsxs(ZU,{component:qn,href:n,target:l,onClick:()=>o("link_action",null,"navigation",U(T({},i),{action:"click"})),onMouseEnter:()=>{o("link_action",null,"navigation",U(T({},i),{action:"hover"}))},className:"flex flex-col gap-[2px]",children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-[6px] text-xs",children:[r.jsx(Kn,{url:n,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"truncate",children:s})]}),r.jsx("div",{className:z("text-token-text-primary flex items-center font-medium",t?"text-sm":"text-xs"),children:r.jsx("span",{className:"truncate",children:e})})]})},ZU=o=>{var a=o,{component:t,children:e,className:s}=a,n=De(a,["component","children","className"]);return r.jsx(t,U(T({},n),{className:z("hover:bg-token-bg-tertiary border-token-border-light rounded-2xl border px-4 py-3",s),children:e}))},ZCe=(t,e)=>t==="Search Content Reference Shown"||t==="Contextual Answers Content Reference Shown"||t==="Search Content Reference Failed"||t==="link_action"&&(e==null?void 0:e.action)==="show"||t==="product_offer"&&(e==null?void 0:e.action)==="shown",XCe=(t,e,s)=>T(U(T({},Fs(e)),{type:t}),s?twe(s):{}),ewe=["section_index","product_index","offer_index"],twe=t=>Object.fromEntries(Object.entries(t!=null?t:{}).map(([e,s])=>[e,ewe.includes(e)&&s!==void 0?(Number(s)+1).toString():String(s)]));function Rot(t){var n;const e=(n=x.useContext(ZC))==null?void 0:n.serverSharedThreadId;return x.useMemo(()=>{const[o,a]=t.split("?"),i=new URLSearchParams(a!=null?a:"");return e&&i.set("shared_conversation_id",e),i.size?o+"?"+i.toString():o},[t,e])}function swe(t){const e=x.useRef(new Set);return x.useCallback((s,n,o,a,i)=>{if(t&&t.messageId&&nwe(t.messageId)){const l=XCe(o,t,a),c="".concat(s,"-").concat(JSON.stringify(l));(!e.current.has(c)||!ZCe(s,a))&&(e.current.add(c),n?B.logEventWithStatsig(s,n,l):B.logEvent(s,l),i==null||i(t))}},[t])}const nwe=t=>!t.startsWith(C6)&&!t.startsWith(wC),XU=Pe(()=>me(()=>import("./f30i8nw1t33buoyn.js"),__vite__mapDeps([222,1])).then(t=>t.QRCodeSVG)),_s=({onDismiss:t,title:e,content:s,customCtas:n,onPrimaryCtaClick:o,primaryCtaText:a,primaryCtaColor:i,primaryCtaClassName:l,secondaryCtaColor:c,primaryCtaQrLink:u,onPrimaryCtaQrClick:d,onSecondaryCtaClick:f,onDangerCtaClick:m,secondaryCtaText:p,dangerCtaText:g,icon:h,isElevated:_=!0,isPrimaryCtaDisabled:b=!1,isSecondaryCtaDisabled:y=!1,isDangerCtaDisabled:v=!1,type:S="normal",className:C,contentClassName:w,closeButtonContainerClassName:k,verticalCta:E=!1})=>{const M=OT(),N=z("m-w-fit flex shrink-0 gap-2 pb-1 md:pb-0",E&&"flex-col"),A=n?r.jsx("div",{className:N,children:n}):(a||p||g)&&r.jsxs("div",{className:N,children:[a&&r.jsx(ke,{onClick:o,color:i!=null?i:"primary",className:z("shrink-0",l),disabled:b,children:a}),p&&r.jsx(ke,{onClick:f,color:c!=null?c:"secondary",className:"shrink-0",disabled:y,children:p}),g&&r.jsx(ke,{onClick:m,color:"danger-outline",className:"shrink-0",disabled:v,children:g})]});return r.jsxs("aside",{className:z("flex w-full items-start gap-4 rounded-3xl border py-4 ps-5 pe-3 text-sm [text-wrap:pretty] lg:mx-auto dark:border-transparent",_&&"shadow-xxs",M?"flex-col":"md:items-center",S==="error"?"border-token-surface-error/15 text-token-text-error dark:bg-token-surface-error/5 bg-red-50":S==="info"?"border-token-border-light bg-token-main-surface-secondary text-token-text-primary dark:bg-token-main-surface-tertiary":"border-token-border-default bg-token-main-surface-primary text-token-text-primary dark:bg-token-main-surface-secondary",C),children:[r.jsxs("div",{className:z("flex h-full w-full gap-3",!M&&"md:items-center"),children:[h&&r.jsx("div",{className:"flex items-start pt-0.5",children:h}),r.jsxs("div",{className:z("flex grow flex-col md:flex-row md:items-center md:justify-between md:gap-8",w),children:[r.jsxs("div",{className:"flex flex-col",children:[e&&r.jsx("h3",{className:z("text-sm font-bold",S==="error"?"text-token-text-error":"text-token-text-primary"),children:e}),r.jsx("div",{className:z(e?S==="error"?"text-token-text-error":"text-token-text-secondary":""),children:s})]}),r.jsxs("div",{className:"mt-2 flex min-w-fit flex-col gap-2 md:mt-0 md:items-center md:gap-4",children:[u&&r.jsx(XU,{className:"min-h-[62px] min-w-[62px] cursor-pointer",onClick:d,size:62,value:u}),!M&&A]})]}),r.jsx("div",{className:z("flex shrink-0 items-start gap-2 sm:items-center",k),children:!!t&&r.jsx(Es,{onClick:t})})]}),M&&A]})},e$=({onDismiss:t,title:e,content:s,onPrimaryCtaClick:n,primaryCtaText:o,onSecondaryCtaClick:a,secondaryCtaText:i})=>r.jsxs("div",{className:z("border-main-surface-secondary bg-token-main-surface-primary text-token-text-primary flex h-16 items-center border-b px-2 text-sm"),children:[r.jsxs("div",{className:"flex items-center justify-center",children:[!!t&&r.jsx(Es,{onClick:t,className:"text-token-text-tertiary -me-2"}),r.jsx(CR,{className:"h-16 w-16 rounded-xs pt-1 shadow-none"}),r.jsxs("div",{className:"-ms-1 flex flex-col",children:[e&&r.jsx("div",{className:"text-token-text-primary font-bold",children:e}),r.jsx("div",{className:z(e?"text-token-text-secondary -mt-0.5":""),children:s})]})]}),r.jsxs("div",{className:"ms-auto flex justify-end",children:[o&&r.jsx(ke,{onClick:n,color:"primary",className:"shrink-0",children:o}),i&&r.jsx(ke,{onClick:a,color:"secondary",className:"me-2 shrink-0",children:i})]})]}),t$=We.DesktopBrowserExtensionAnnouncement,s$=We.DesktopBrowserExtensionReactiveAnnouncement,owe=5,awe="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function rwe({announcementKey:t=t$,onClose:e}){const s=G();x.useEffect(()=>{B.logEventWithStatsig("ChatGPT Browser Extension: Announcement Shown","chatgpt_browser_extension_announcement_shown"),B.logUpsellOrModalEvent(ks,{eventId:"browser_extension_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const n=x.useCallback(()=>{_t(s,t),B.logEventWithStatsig("ChatGPT Browser Extension: Announcement Closed","chatgpt_browser_extension_announcement_closed"),e&&e()},[t,s,e]),o=x.useCallback(()=>{B.logEventWithStatsig("ChatGPT Browser Extension: CTA Clicked","chatgpt_browser_extension_announcement_cta_clicked"),_t(s,t),e&&e()},[t,s,e]);return r.jsx(iwe,{downloadUrl:awe,announcementKey:t,handleCTAClicked:o,handleClose:n})}function Oot({onClose:t}){return rwe({announcementKey:s$,onClose:t})}function iwe({downloadUrl:t,announcementKey:e,handleCTAClicked:s,handleClose:n}){const o=()=>{s(),window.open(t)},a=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return r.jsx(_s,{onPrimaryCtaClick:o,primaryCtaText:r.jsx(j,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:()=>n(e),content:a})}function n$(t){var c;const e=G(),s=G6(()=>document.documentElement.dataset.searchExtension==="1"),o=(c=oe(()=>Cs(Et(e,t.clientThreadId))).enabledTools)==null?void 0:c.includes(Sp.Search),a=ja(),i=!(a!=null&&a.includes(kn.SearchToolHoldout)),l=bs();return HJ()&&!l&&!s&&o&&i}function Lot(t){return n$(t),cwe(),Ct(t$),!1}function Dot(t){var i;const e=n$(t),s=Qe(t.clientThreadId,l=>Uc(Se.getConversationTurns(l),c=>c.role===ot.User));let n=!1;const o=s==null?void 0:s.messages[0];if((o==null?void 0:o.content.content_type)===bt.Text){const l=(i=o==null?void 0:o.content.parts[0])==null?void 0:i.toLowerCase();l&&(n=l.includes("chrome extension")||l.includes("default search"))}const a=Ct(s$);return a.eligible&&!a.isLoading&&e&&n}function lwe(t){var s;const e=(s=ft.getItem(Be.SearchSettings))!=null?s:{};e.hasSearchedMinTimes||(e.searchMessageIds||(e.searchMessageIds=[]),e.searchMessageIds.includes(t)||(e.searchMessageIds.push(t),e.searchMessageIds.length>=owe&&(e.hasSearchedMinTimes=!0,delete e.searchMessageIds),ft.setItem(Be.SearchSettings,e)))}function cwe(){var e;return((e=ft.getItem(Be.SearchSettings))!=null?e:{}).hasSearchedMinTimes===!0}var cg=(t=>(t.SonicBusinessesMap="sonic.web.businessesMap",t.CompletionRequest="chatgpt.web.completionRequest",t.GetDiffedDoc="chatgpt.web.canvas.getDiffedDoc",t.ProductsCompletionRequest="chatgpt.web.products.completionRequest",t.ProductSidebar="chatgpt.web.products.sidebar",t.SuperWidget="chatgpt.web.super_widget",t.SearchingState="chatgpt.web.searchingState",t))(cg||{});class uwe{constructor(e,s){X(this,"namespace");X(this,"expectedTimingLogs");X(this,"expectedTimingLogTimeouts",{});X(this,"startMs",-1);X(this,"lastLogMs",-1);X(this,"loggedTimings",new Set);X(this,"timingBlocks",{});X(this,"_debug",!1);X(this,"context");var n,o,a;this.namespace=e,this.expectedTimingLogs=(n=s==null?void 0:s.expectedTimingLogs)!=null?n:[],this._debug=(o=s==null?void 0:s.debug)!=null?o:!1,this.context=(a=s==null?void 0:s.context)!=null?a:{},this.reset()}reset(e){this.startMs=this.lastLogMs=e!=null?e:performance.now(),this.timingBlocks={},this.loggedTimings=new Set;for(const s of Object.values(this.expectedTimingLogTimeouts))clearTimeout(s);this.expectedTimingLogTimeouts={};for(const s of this.expectedTimingLogs){const n=setTimeout(()=>{var o;Ge.addAction("".concat(this.namespace,".").concat(s.name,".timed_out"),(o=s.initializationInfo)!=null?o:{})},s.expectedInMs);this.expectedTimingLogTimeouts[s.name]=n,this.isDebug()&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(s.name," to be logged within ").concat(s.expectedInMs,"ms"))}}isDebug(){var e;return(e=window.__DATADOG_PROFILER_DEBUG__)!=null?e:this._debug}getStartTime(){return this.startMs}logTimingOnce(e,s={fromLastLog:!1}){var a;if(this.loggedTimings.has(e)){this.isDebug()&&console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}const n=performance.now(),o=(a=s.overrideDurationMs)!=null?a:n-(s.fromLastLog?this.lastLogMs:this.startMs);return Ge.addAction("".concat(this.namespace,".").concat(e),U(T(T({},this.context),s.context),{durationMs:o})),this.lastLogMs=n,this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.isDebug()&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(o,"ms")),o}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e,s={throwError:!0}){const n=this.timingBlocks[e];if(n===void 0&&s.throwError)throw new Error('Block "'.concat(e,'" not started'));const o=performance.now()-n;Ge.addAction("".concat(this.namespace,".").concat(e),U(T(T({},this.context),s.context),{durationMs:o})),delete this.timingBlocks[e]}}const t_={};function dwe({namespace:t,opts:e}){return t_[t]!==void 0&&Ge.addError("Profiler already exists for namespace ".concat(t)),t_[t]=new uwe(t,e)}function GT({namespace:t,opts:e}){let s=t_[t];return s===void 0&&(s=t_[t]=dwe({namespace:t,opts:e})),s}function o$(t){"use forget";const e=F.c(11),{namespace:s,clientThreadId:n}=t,[o,a]=x.useState(!1);let i;e[0]!==s?(i=()=>GT({namespace:s,opts:{debug:!1}}),e[0]=s,e[1]=i):i=e[1];const[l]=x.useState(i),c=Qe(n,fwe),u=Sr(c);let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[2]=d):d=e[2];const f=x.useRef(d),m=G();let p,g;e[3]!==m||e[4]!==l||e[5]!==c?(p=()=>{if(c&&!f.current.has(c)){f.current.add(c);const b=GJ(m,c);b&&(l.reset(b.turnTracker.promptSentTimestamp),a(!0))}},g=[c,l,m],e[3]=m,e[4]=l,e[5]=c,e[6]=p,e[7]=g):(p=e[6],g=e[7]),x.useEffect(p,g);const h=o?l:null;let _;return e[8]!==u||e[9]!==h?(_={profiler:h,isRequestActive:u},e[8]=u,e[9]=h,e[10]=_):_=e[10],_}function fwe(t){return Se.getRequestId(t)}const z2=XC(()=>({delayedRenderingMessageIds:new Set})),mwe=t=>ew(z2,t);function pwe(t){return mwe(e=>t?t(e.delayedRenderingMessageIds):e.delayedRenderingMessageIds)}const e4={addDelayedRenderingMessage(t){z2.setState(e=>{if(e.delayedRenderingMessageIds.has(t))return e;const s=new Set(e.delayedRenderingMessageIds);return s.add(t),{delayedRenderingMessageIds:s}})},removeDelayedRenderingMessage(t){z2.setState(e=>{if(!e.delayedRenderingMessageIds.has(t))return e;const s=new Set(e.delayedRenderingMessageIds);return s.delete(t),{delayedRenderingMessageIds:s}})}},gwe="5.7.5",hwe=100,_we=0,xwe=350,ywe=24,bwe=24,vwe="Comp 1",Swe=0,Cwe=[],wwe=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],kwe=[],Twe={v:gwe,fr:hwe,ip:_we,op:xwe,w:ywe,h:bwe,nm:vwe,ddd:Swe,assets:Cwe,layers:wwe,markers:kwe},Ewe="5.7.5",Mwe=100,Nwe=0,Awe=400,Iwe=24,jwe=24,Pwe="Comp 1",Rwe=0,Owe=[],Lwe=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.944433333333334],[-1.166666666666667,0]],o:[[-1.166666666666666,1.944433333333333],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.003000259399414062,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.3626899123191833],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.003000259399414062,2.333300590515137],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.120759010314941]],o:[[1.720494627952576,0],[.6510882377624512,-1.120759010314941]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.166999816894531,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],Dwe=[],Fwe={v:Ewe,fr:Mwe,ip:Nwe,op:Awe,w:Iwe,h:jwe,nm:Pwe,ddd:Rwe,assets:Owe,layers:Lwe,markers:Dwe},Bwe="5.7.5",Uwe=100,$we=0,Hwe=400,Gwe=24,Vwe=24,zwe="Comp 1",Wwe=0,qwe=[],Kwe=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.9444333333333343],[-1.166666666666667,0]],o:[[-1.166666666666666,1.9444333333333326],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.0030002593994140625,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.36268991231918335],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.0030002593994140625,2.3333005905151367],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.1207590103149414]],o:[[1.7204946279525757,0],[.6510882377624512,-1.1207590103149414]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.1669998168945312,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],Ywe=[],Qwe={v:Bwe,fr:Uwe,ip:$we,op:Hwe,w:Gwe,h:Vwe,nm:zwe,ddd:Wwe,assets:qwe,layers:Kwe,markers:Ywe},Jwe="5.7.5",Zwe=100,Xwe=0,eke=350,tke=24,ske=24,nke="Comp 1",oke=0,ake=[],rke=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],ike=[],lke={v:Jwe,fr:Zwe,ip:Xwe,op:eke,w:tke,h:ske,nm:nke,ddd:oke,assets:ake,layers:rke,markers:ike},cke=Pe(()=>me(()=>import("./mq7uqtztbvim4zqv.js"),__vite__mapDeps([165,1])));function a$({animationData:t,animationSegmentToPlay:e,animationLoopCounter:s}){const n=x.useRef(null);return x.useEffect(()=>{var o;(o=n.current)==null||o.playSegments(e,!0)},[s]),r.jsx(cke,{animationData:t,lottieRef:n,loop:!1,autoplay:!1})}function uke(t){return r.jsx(Jn,U(T({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.66607 0.376042C8.01072 0.605806 8.10385 1.07146 7.87408 1.4161L3.54075 7.9161C3.40573 8.11863 3.18083 8.24304 2.93752 8.24979C2.69421 8.25654 2.46275 8.1448 2.31671 7.95008L0.150044 5.06119C-0.098484 4.72982 -0.0313267 4.25972 0.300044 4.01119C0.631415 3.76266 1.10152 3.82982 1.35004 4.16119L2.88068 6.20204L6.62601 0.584055C6.85577 0.239408 7.32142 0.146278 7.66607 0.376042Z",fill:"currentColor"})}))}function dke(t){return r.jsxs(Jn,U(T({width:"4",height:"12",viewBox:"0 0 4 12",fill:"none"},t),{children:[r.jsx("mask",{id:"path-1-inside-1_1975_4008",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z",fill:"currentColor"}),r.jsx("path",{d:"M1 6.5H-0.25H1ZM1 1.5L-0.25 1.5L-0.25 1.5L1 1.5ZM2 6.25C2.13807 6.25 2.25 6.36193 2.25 6.5H-0.25C-0.25 7.74264 0.757359 8.75 2 8.75V6.25ZM1.75 6.5C1.75 6.36193 1.86193 6.25 2 6.25V8.75C3.24264 8.75 4.25 7.74264 4.25 6.5H1.75ZM1.75 1.5V6.5H4.25V1.5H1.75ZM2 1.75C1.86193 1.75 1.75 1.63807 1.75 1.5H4.25C4.25 0.257359 3.24264 -0.75 2 -0.75V1.75ZM2.25 1.5C2.25 1.63807 2.13807 1.75 2 1.75V-0.75C0.757359 -0.75 -0.25 0.257359 -0.25 1.5L2.25 1.5ZM2.25 6.5L2.25 1.5L-0.25 1.5L-0.25 6.5L2.25 6.5ZM2 10.25H-0.5C-0.5 11.6307 0.619288 12.75 2 12.75V10.25ZM2 10.25V12.75C3.38071 12.75 4.5 11.6307 4.5 10.25H2ZM2 10.25H2H4.5C4.5 8.86929 3.38071 7.75 2 7.75V10.25ZM2 10.25H2V7.75C0.619288 7.75 -0.5 8.86929 -0.5 10.25H2Z",fill:"currentColor",mask:"url(#path-1-inside-1_1975_4008)"})]}))}function fke(t){return r.jsx(Jn,U(T({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.32256 1.48447C7.59011 1.16827 7.55068 0.695034 7.23447 0.427476C6.91827 0.159918 6.44503 0.199354 6.17748 0.515559L4.00002 3.08892L1.82256 0.515559C1.555 0.199354 1.08176 0.159918 0.765559 0.427476C0.449355 0.695034 0.409918 1.16827 0.677476 1.48447L3.01755 4.25002L0.677476 7.01556C0.409918 7.33176 0.449354 7.805 0.765559 8.07256C1.08176 8.34011 1.555 8.30068 1.82256 7.98447L4.00002 5.41111L6.17748 7.98447C6.44503 8.30068 6.91827 8.34011 7.23447 8.07256C7.55068 7.805 7.59011 7.33176 7.32256 7.01556L4.98248 4.25002L7.32256 1.48447Z",fill:"currentColor"})}))}function Fot({animationLoopCounter:t}){const e=sa();return r.jsx(a$,{animationData:e?Twe:lke,animationSegmentToPlay:[0,300],animationLoopCounter:t})}function Bot({animationLoopCounter:t}){const e=sa();return r.jsx(a$,{animationData:e?Fwe:Qwe,animationSegmentToPlay:[0,400],animationLoopCounter:t})}const mke=2e3,r$=.4,pke=.45,gke=.2,hke=.1,_ke=.25;var _n=(t=>(t[t.Running=0]="Running",t[t.Finished=1]="Finished",t[t.Error=2]="Error",t[t.Stopped=3]="Stopped",t[t.Paused=4]="Paused",t))(_n||{});function Uot({conversationMessages:t,icon:e,status:s,text:n,estimatedToolDurationMs:o,animationLoopDurationMs:a=mke,shouldPersistAfterFinished:i=!1}){const[l,c]=x.useState(s===0?0:s===1&&!i?7:1),[u,d]=x.useState(0);x.useEffect(()=>{s===2?c(8):s===3?c(9):s===4?c(10):s===1?c(l===2?3:7):s===0&&l===10&&(c(2),d(m=>m+1))},[s]);const f=bke(l);return x.useEffect(()=>{const m=t[0].id;if(f)return e4.addDelayedRenderingMessage(m),()=>{e4.removeDelayedRenderingMessage(m)}},[f]),tw(()=>{md(l)&&d(m=>m+1)},a),l===7&&!i?null:r.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[r.jsx(xke,{icon:e,status:s,uiState:l,estimatedToolDurationMs:o,animationLoopCounter:u,shouldPersistAfterFinished:i,onFillProgressBarAnimationComplete:()=>c(4),onFinishAnimationComplete:()=>{c(5),setTimeout(()=>{c(i?7:6)},hke*1e3)},onHideAnimationComplete:()=>c(7)}),r.jsx(yke,{text:n,uiState:l,animationLoopCounter:u,onEnterAnimationComplete:()=>c(2)})]})}const t4=50;function xke({icon:t,status:e,uiState:s,estimatedToolDurationMs:n,animationLoopCounter:o,shouldPersistAfterFinished:a,onFillProgressBarAnimationComplete:i,onFinishAnimationComplete:l,onHideAnimationComplete:c}){const[u,d]=x.useState(0);tw(()=>{md(s)?d(y=>y+t4):s===10&&d(0)},t4);let f,m,p;md(s)||s===10?(f="running",m=r.jsx(t,{animationLoopCounter:o}),p="bg-transparent"):s===4||s===5||s===7&&a?(f="finished",m=r.jsx(uke,{}),p="bg-brand-purple"):e===2?(f="error",m=r.jsx(dke,{}),p="bg-orange-500"):e===3&&(f="stopped",m=r.jsx(fke,{}),p="bg-gray-300");let g={opacity:0,scale:0,rotate:-180,x:0},h={type:"spring",bounce:.3,duration:pke},_={opacity:0,scale:.6,rotate:0,x:0};s===0?(g={opacity:0,scale:.5,rotate:-180,x:-8},h={type:"spring",bounce:.3,duration:r$}):s===1?g=!1:s===5&&(_={opacity:0,scale:0,rotate:0,x:0},h={type:"spring",bounce:.3,duration:_ke});const b=fme(u,n);return r.jsx("div",{className:"relative h-5 w-5 shrink-0",children:r.jsx(Ms,{onExitComplete:()=>{s===6&&c()},children:f!=null&&r.jsxs(gt.div,{className:z("absolute start-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",p),initial:g,animate:{opacity:1,scale:1,rotate:0,x:0},exit:_,transition:h,onAnimationComplete:()=>{s===4&&l()},children:[m,(md(s)||s===10)&&r.jsx(Fd,{percentage:s===3?100:b,thickness:1.5/23,className:"text-brand-purple absolute start-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:s===3?"".concat((100-b)/100*gke,"s"):void 0,transitionTimingFunction:s===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{s===3&&i()}})]},f)})})}function yke({text:t,uiState:e,animationLoopCounter:s,onEnterAnimationComplete:n}){const[o,a]=x.useState(t);x.useEffect(()=>{e===2&&a(t)},[s]),x.useEffect(()=>{md(e)||a(t)},[e,t]);let i={opacity:0,x:0,y:15},l={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};e===0?(i={opacity:0,x:-8,y:0},l={type:"spring",bounce:.3,duration:r$,delay:.15}):e===1&&(i=!1);const c=o!=null?o:void 0;return r.jsx("div",{className:z("relative h-5 w-full leading-5",e===8||e===9?"text-token-text-tertiary":"text-token-text-secondary"),children:r.jsx(Ms,{children:c!=null&&r.jsx(gt.div,{className:"absolute start-0 top-0 line-clamp-1 overflow-visible",initial:i,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:l,onAnimationComplete:()=>{e===0&&n()},children:c},c.toString())})})}function md(t){return t===0||t===2||t===3}function bke(t){return md(t)||t===4||t===5||t===6||t===10}const vke=ue(Ce,"43e704",16,16);var oP;const s4=Mt.div(oP||(oP=St(["group start-0 top-0 me-1.5 overflow-hidden mt-1 text-start"]))),s_=t=>{"use forget";var se;const e=F.c(70);let s,n,o,a,i,l,c,u,d,f,m,p,g;e[0]!==t?(se=t,{highlightedCommand:o,status:d,children:n,showWorkUserSetting:f,hideOnlyIfNotInteractedWith:m,defaultExpanded:p,forceExpanded:g,labelPrefix:a,onOpenAnalytics:l,onClick:i,accessory:s,ref:c}=se,u=De(se,["highlightedCommand","status","children","showWorkUserSetting","hideOnlyIfNotInteractedWith","defaultExpanded","forceExpanded","labelPrefix","onOpenAnalytics","onClick","accessory","ref"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=u,e[9]=d,e[10]=f,e[11]=m,e[12]=p,e[13]=g):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],p=e[12],g=e[13]);const h=f===void 0?!1:f,_=m===void 0?!1:m,b=p===void 0?!1:p,y=g===void 0?!1:g,v=n!=null||i!=null,[S]=x.useState(h),[C,w]=x.useState(h||b),[k,E]=x.useState(!1),M=d===_n.Finished||d===_n.Error,N=_?S?!1:!k:!1,A=d===_n.Running?"loading-shimmer":"inline-block";if(M&&N)return null;if(!v){let ee;e[14]!==A?(ee=z(A),e[14]=A,e[15]=ee):ee=e[15];let re;e[16]!==o?(re=r.jsx("span",{className:"text-start",children:o}),e[16]=o,e[17]=re):re=e[17];let he;e[18]!==s||e[19]!==a||e[20]!==re?(he=r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[a,re,s]}),e[18]=s,e[19]=a,e[20]=re,e[21]=he):he=e[21];let fe;e[22]!==ee||e[23]!==he?(fe=r.jsx(s4,{className:ee,children:he}),e[22]=ee,e[23]=he,e[24]=fe):fe=e[24];let pe;return e[25]!==c||e[26]!==u||e[27]!==fe?(pe=r.jsx(n4,U(T({ref:c,$canShowWork:!1},u),{children:fe})),e[25]=c,e[26]=u,e[27]=fe,e[28]=pe):pe=e[28],pe}let I;e[29]!==i||e[30]!==l||e[31]!==C?(I=ee=>{C||l==null||l(),w(Ske),E(!0),i==null||i(ee)},e[29]=i,e[30]=l,e[31]=C,e[32]=I):I=e[32];let P;e[33]!==o?(P=o==null?void 0:o.toString(),e[33]=o,e[34]=P):P=e[34];let R,O,L,D;e[35]===Symbol.for("react.memo_cache_sentinel")?(O={opacity:0},L={opacity:1},D={opacity:0},R={duration:.3},e[35]=R,e[36]=O,e[37]=L,e[38]=D):(R=e[35],O=e[36],L=e[37],D=e[38]);let H;e[39]!==A?(H=z(A),e[39]=A,e[40]=H):H=e[40];let V;e[41]!==o?(V=r.jsx("span",{className:"text-start",children:o}),e[41]=o,e[42]=V):V=e[42];let q;e[43]!==y||e[44]!==i||e[45]!==C?(q=!i&&!y&&(C?r.jsx(vke,{className:"icon-sm"}):r.jsx(zo,{className:"icon-sm"})),e[43]=y,e[44]=i,e[45]=C,e[46]=q):q=e[46];let W;e[47]!==s||e[48]!==a||e[49]!==V||e[50]!==q?(W=r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[a,V,q,s]}),e[47]=s,e[48]=a,e[49]=V,e[50]=q,e[51]=W):W=e[51];let $;e[52]!==H||e[53]!==W||e[54]!==I||e[55]!==P?($=r.jsx(Ms,{children:r.jsx(s4,{children:r.jsx(gt.button,{onClick:I,initial:O,animate:L,exit:D,transition:R,className:H,children:W},P)})}),e[52]=H,e[53]=W,e[54]=I,e[55]=P,e[56]=$):$=e[56];let Z;e[57]!==c||e[58]!==u||e[59]!==$?(Z=r.jsx(n4,U(T({ref:c,$canShowWork:!0},u),{children:$})),e[57]=c,e[58]=u,e[59]=$,e[60]=Z):Z=e[60];let K;e[61]!==n||e[62]!==y||e[63]!==C?(K=(C||y)&&n&&r.jsx(gt.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:n}),e[61]=n,e[62]=y,e[63]=C,e[64]=K):K=e[64];let Y;e[65]!==K?(Y=r.jsx(Ms,{children:K}),e[65]=K,e[66]=Y):Y=e[66];let ae;return e[67]!==Z||e[68]!==Y?(ae=r.jsxs(r.Fragment,{children:[Z,Y]}),e[67]=Z,e[68]=Y,e[69]=ae):ae=e[69],ae};var aP;const n4=Mt.span(aP||(aP=St(["block first:mt-0 relative\n",""])),({$canShowWork:t})=>t?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary");function Ske(t){return!t}const o4=3,Cke=.1,a4=[0,.26,.4],wke=800,kke=1200;function $ot(t){"use forget";var Me;const e=F.c(98),{nextMessage:s,isLastMessage:n,isRequestActive:o,isLastTurnInConversation:a,clientThreadId:i,turnIndex:l,searchResultGroups:c,query:u,searchModelQueries:d,showFastNav:f,isForcedMessage:m,shouldShowAnimatedBlackDot:p}=t;let g;e[0]!==c?(g=c===void 0?[]:c,e[0]=c,e[1]=g):g=e[1];const h=g,_=u===void 0?null:u;let b;e[2]!==d?(b=d===void 0?[]:d,e[2]=d,e[3]=b):b=e[3];const y=b,v=f===void 0?!0:f,S=m===void 0?!1:m,C=p===void 0?!0:p;let w;e[4]!==n||e[5]!==s?(w=Ake({isLastMessage:n,nextMessage:s}),e[4]=n,e[5]=s,e[6]=w):w=e[6];const k=w,E=x.useRef(!1),M=Gt(),N=Qe(i,Se.getGizmoId);let A,I;e[7]!==N||e[8]!==s||e[9]!==M?(A=()=>{s&&sw(s)&&!E.current&&(E.current=!0,Ea(M,N))},I=[s,M,N],e[7]=N,e[8]=s,e[9]=M,e[10]=A,e[11]=I):(A=e[10],I=e[11]),x.useEffect(A,I);let P;e[12]!==s?(P=rx(s),e[12]=s,e[13]=P):P=e[13];const R=P;s!=null&&s.id&&lwe(s==null?void 0:s.id);let O;e[14]!==i?(O={namespace:cg.SearchingState,clientThreadId:i},e[14]=i,e[15]=O):O=e[15];const{profiler:L}=o$(O),D=G();let H;e[16]!==D?(H=xn(D),e[16]=D,e[17]=H):H=e[17];const V=H;let q;e[18]!==D?(q=xr(D).checkGate("1640462792"),e[18]=D,e[19]=q):q=e[19];const W=q,{favicons:$,load:Z}=DCe(_!=null?_:null);let K;e[20]!==D||e[21]!==Z||e[22]!==L?(K=()=>{Z({ctx:D,profiler:L})},e[20]=D,e[21]=Z,e[22]=L,e[23]=K):K=e[23];const Y=x.useEffectEvent(K);let ae;e[24]!==S||e[25]!==Y||e[26]!==_||e[27]!==W?(ae=()=>{_&&_.trim().length>0&&!S&&!W&&Y()},e[24]=S,e[25]=Y,e[26]=_,e[27]=W,e[28]=ae):ae=e[28];let se;e[29]!==S||e[30]!==_||e[31]!==W?(se=[_,S,W],e[29]=S,e[30]=_,e[31]=W,e[32]=se):se=e[32],x.useEffect(ae,se);let ee;e:{let te;e[33]!==$?(te=$.slice(0,o4).map(Mke),e[33]=$,e[34]=te):te=e[34];const Q=te;if(Q.length>0){ee=Q;break e}let ie;e[35]!==h?(ie=ox(h.slice(0,o4).map(Eke)),e[35]=h,e[36]=ie):ie=e[36],ee=ie}const re=ee,he=x.useRef(!1),fe=x.useRef(!1);let pe,le;e[37]!==o||e[38]!==L||e[39]!==k?(pe=()=>{k&&!he.current&&L&&o&&(he.current=!0,L.logTimingOnce("searching_the_web_shown"))},le=[k,L,o],e[37]=o,e[38]=L,e[39]=k,e[40]=pe,e[41]=le):(pe=e[40],le=e[41]),x.useEffect(pe,le);let ve,Te;e[42]!==o||e[43]!==L||e[44]!==k||e[45]!==re.length?(ve=()=>{!fe.current&&k&&re.length>0&&L&&o&&(fe.current=!0,L.logTimingOnce("favicons_shown"))},Te=[re.length,k,L,o],e[42]=o,e[43]=L,e[44]=k,e[45]=re.length,e[46]=ve,e[47]=Te):(ve=e[46],Te=e[47]),x.useEffect(ve,Te);const[xe,ce]=x.useState(0),[we,ge]=x.useState(!0);let Ae,Ue;e[48]!==o||e[49]!==y.length||e[50]!==k||e[51]!==we?(Ae=()=>{if(o&&k&&y.length>0&&we){let te=null;const Q=setTimeout(()=>{ge(!1),te=setInterval(()=>{ce(ie=>ie+1>=y.length?y.length-1:ie+1)},kke)},wke);return()=>{clearTimeout(Q),te!=null&&clearInterval(te)}}(!o||!k||y.length===0)&&!we&&ge(!0)},Ue=[o,k,y.length,we],e[48]=o,e[49]=y.length,e[50]=k,e[51]=we,e[52]=Ae,e[53]=Ue):(Ae=e[52],Ue=e[53]),x.useEffect(Ae,Ue);let Ie;if(e[54]!==i||e[55]!==R||e[56]!==V||e[57]!==a||e[58]!==o||e[59]!==s||e[60]!==y||e[61]!==xe||e[62]!==C||e[63]!==v||e[64]!==k||e[65]!==W||e[66]!==we||e[67]!==l||e[68]!==re){if(Ie=[],((Me=R==null?void 0:R[0])==null?void 0:Me.type)==="navigation"&&s&&v){const te=R[0];let Q;e[70]!==i||e[71]!==a||e[72]!==o||e[73]!==s||e[74]!==te||e[75]!==l?(Q=r.jsx(Nke,{clientThreadId:i,turnIndex:l,nextMessage:s,isRequestActive:o,isLastTurnInConversation:a,navigationCitation:te},"fast-nav"),e[70]=i,e[71]=a,e[72]=o,e[73]=s,e[74]=te,e[75]=l,e[76]=Q):Q=e[76],Ie.push(Q)}if(k){if(W){const te=!o;let Q;e[77]!==te||e[78]!==y||e[79]!==xe||e[80]!==we?(Q=te?r.jsx(j,{id:"sjbaxy",defaultMessage:"Stopped searching"}):we?r.jsx(j,{id:"jjx8Qg",defaultMessage:"Searching the web"}):r.jsx(j,{id:"FauKHv",defaultMessage:"Searching for {query}",values:{query:y[xe]}}),e[77]=te,e[78]=y,e[79]=xe,e[80]=we,e[81]=Q):Q=e[81];const ie=Q;if(te){let _e;e[82]!==ie?(_e=r.jsx(s_,{highlightedCommand:ie,status:_n.Error},"search-gpt-query"),e[82]=ie,e[83]=_e):_e=e[83],Ie.push(_e)}else{if(we&&C){let Ve;e[84]===Symbol.for("react.memo_cache_sentinel")?(Ve=r.jsx(kCe,{}),e[84]=Ve):Ve=e[84],Ie.push(Ve)}const _e=!V&&"truncate";let ye;e[85]!==_e?(ye=z("loading-shimmer text-token-text-secondary inline-block w-full pt-[3px] font-medium select-none",_e),e[85]=_e,e[86]=ye):ye=e[86];let Re;e[87]!==ie||e[88]!==ye?(Re=r.jsx("span",{className:ye,children:ie}),e[87]=ie,e[88]=ye,e[89]=Re):Re=e[89],Ie.push(Re)}}else if(k){let te;e[90]!==o||e[91]!==re?(te=o?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(j,{id:"jjx8Qg",defaultMessage:"Searching the web"}),re.map(Tke)]}):r.jsx(j,{id:"sjbaxy",defaultMessage:"Stopped searching"}),e[90]=o,e[91]=re,e[92]=te):te=e[92];const Q=te,ie=o?_n.Running:_n.Error;let _e;e[93]!==Q||e[94]!==ie?(_e=r.jsx(s_,{highlightedCommand:Q,status:ie},"search-gpt-query"),e[93]=Q,e[94]=ie,e[95]=_e):_e=e[95],Ie.push(_e)}}e[54]=i,e[55]=R,e[56]=V,e[57]=a,e[58]=o,e[59]=s,e[60]=y,e[61]=xe,e[62]=C,e[63]=v,e[64]=k,e[65]=W,e[66]=we,e[67]=l,e[68]=re,e[69]=Ie}else Ie=e[69];if(Ie.length){let te;return e[96]!==Ie?(te=r.jsx("div",{children:Ie}),e[96]=Ie,e[97]=te):te=e[97],te}return null}function Tke(t,e){return r.jsx(gt.div,{className:z("-ms-1.5 first:ms-0 last:me-1.5","relative"),initial:{width:e===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:Cke,delay:a4[Math.min(e,a4.length-1)]},children:r.jsx("div",{className:z("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary border-2"),children:r.jsx(Kn,{url:t,size:32,minSize:16,className:"icon rounded-full"})})},t)}function Eke(t){return t.entries[0].url}function Mke(t){return t.url}const Nke=({clientThreadId:t,turnIndex:e,nextMessage:s,isRequestActive:n,isLastTurnInConversation:o,navigationCitation:a})=>{var d;const{scrollToHeader:i}=(d=pA("searchSources"))!=null?d:{},l=Rbe(),c=pA("searchSources"),{openThreadSidebar:u}=Er();return x.useEffect(()=>{Ge.addFirstTiming("render.fastNavigation")},[]),x.useEffect(()=>{var f;l&&c&&u({type:"searchSources",scrollToHeader:i,turnIndex:e,messageId:(f=s==null?void 0:s.id)!=null?f:""})},[]),x.useEffect(()=>{var g;const f=s,m=(g=f.metadata)==null?void 0:g.search_source,p=a.domains.map(h=>h.url);YL.logEvent("Search Tool Request Time To Fast Nav",t,f.id,{search_source:m,urls:p},()=>{m===VJ.InstantQuery&&PSe.logEvent("Search Tool Page Load Time To Fast Nav",{message_id:f.id,urls:p,search_source:m})})},[t,s,a]),n&&o?r.jsx(gt.div,{initial:{opacity:n?0:1,height:n?0:"auto"},animate:{opacity:1,height:"auto"},children:r.jsx(r4,{clientThreadId:t,turnIndex:e,nextMessage:s,navigationCitation:a})}):r.jsx(r4,{clientThreadId:t,turnIndex:e,nextMessage:s,navigationCitation:a})},r4=({clientThreadId:t,turnIndex:e,nextMessage:s,navigationCitation:n})=>{const{toggleThreadSidebar:o}=Er(),a=x.useMemo(()=>({clientThreadId:t,turnIndex:e,messageId:s==null?void 0:s.id}),[t,e,s==null?void 0:s.id]),i=x.useCallback((c,u)=>{var d;o({type:"searchSources",scrollToHeader:u,turnIndex:e,messageId:(d=s==null?void 0:s.id)!=null?d:""})},[o,e,s==null?void 0:s.id]),l=swe(a);return r.jsx(qCe,{navigation:n,onShowSearchResults:i,trackContentReferenceEvent:l})};function Ake({isLastMessage:t,nextMessage:e}){return t||!e||e&&!sw(e)}function W2({fullHeight:t,children:e,verticalPadding:s,horizontalPadding:n,overflowY:o,verticalMargin:a="auto",horizontalMargin:i="auto",ref:l}){const[c,u]=sn(f=>[yr(f),Ss(f)]),d=!u&&!c;return r.jsx("div",{className:z("text-base",o==="auto"&&"overflow-y-auto",a==="auto"&&"my-auto",i==="auto"&&"mx-auto",d&&s==="first"&&"pt-3",d&&s==="last"&&"pb-10",d&&s==="last-standard"&&"pb-3",d&&s==="large"&&"pt-12",d&&s==="small"&&"py-1",c&&s==="first"&&"pt-4.5",c&&s==="large"&&"pt-4.5",c&&s==="last"&&"pb-8",jke,n!=="none"&&"px-(--thread-content-margin)",t&&"h-full"),ref:l,children:e})}function Aa(n){var o=n,{children:t,className:e}=o,s=De(o,["children","className"]);const a=G(),i=oe(()=>Ss(a)),l=i?"[--thread-content-max-width:100%]":Ike(),c=i?"mx-auto flex-1 w-full max-w-full":"mx-auto max-w-(--thread-content-max-width) flex-1";return r.jsx("div",U(T({className:z(l,c,e)},s),{children:t}))}function Ike(){return"[--thread-content-max-width:40rem] @w-lg/main:[--thread-content-max-width:48rem]"}const jke="[--thread-content-margin:--spacing(4)] @w-sm/main:[--thread-content-margin:--spacing(6)] @w-lg/main:[--thread-content-margin:--spacing(16)]";function Hot(t){return Xe(t,"1803944755").get("enable_combined_login_or_signup_button",!1)}const VT=ue(Ce,"bbf3a9",20,20),Pke=ue(Ce,"6eb585",20,20);function i$(t,e){const[s,n]=x.useState(t),o=x.useRef(di(a=>n(a),e));return x.useEffect(()=>(o.current=di(a=>{n(a)},e),()=>{var a;(a=o.current)==null||a.cancel()}),[e]),x.useEffect(()=>{var a;(a=o.current)==null||a.call(o,t)},[t]),s}const Rke=ue(Ce,"4bb189",16,16),Oke=ue(Ce,"f64f60",20,20),zT=(...t)=>e=>{t.forEach(s=>{if(typeof s=="function")s(e);else if(s){const n=s;n.current=e}})},Lke=(...t)=>{"use no forget";return x.useMemo(()=>zT(...t),[...t])},Dke=new RegExp("((?:\\n|\\r)+)((?:\\s{2,}|\\t)+)?|(```)|([#*_-]+)|([(){}[\\]]+)|([\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E]+)|(\\b(?:await|break|case|catch|class|continue|default|define|except|extends|export|finally|implements|import|include|print|private|protected|public|return|span|switch|system|template|throw|type|using|while)\\b)|(\\b(?:async|breakpoint|cin|cmd|console|const|constexpr|cout|def|defn|div|env|fn|func|function|href|html|img|interface|lambda|namespace|println|src|stdout|struct|var|workdir|yield)\\b)","gi"),Fke=[80.33911781017851,19.194942847935266,-78.96158351597562,31.404985863148777,48.13976028814005,82.48501866379408,15.781632991361631,67.81666324403915],Bke=-9.860574779222393;function l$(t){return Uke($ke(t),Fke,Bke)>0}function Uke(t,e,s){let n=s;for(let o=0;o<t.length;o++)n+=t[o]*e[o];return n}function $ke(t){const e=[0,0,0,0,0,0,0,0];if(!t)return e;let s;for(;(s=Dke.exec(t))!=null;)for(let n=0;n<e.length;n++)s[n+1]&&(e[n]+=s[n+1].length);for(let n=0;n<e.length;n++)e[n]/=t.length;return e}function Hke(t){var e,s;return{sharedTextdocId:t.shared_textdoc_id,versionInt:(e=t.version)!=null?e:void 0,title:t.name,type:Nc(t.textdoc_type),content:t.content,access:L2e(t.access),isModerationBlocked:t.is_moderation_blocked,isAnonifyApiKeyDetected:(s=t.is_anonify_api_key_detected)!=null?s:!1}}const Gke=4e4,Vke={[tt.GUEST]:8e3,[tt.FREE]:8e3,[tt.FREE_WORKSPACE]:8e3,[tt.GO]:8e3,[tt.PLUS]:32e3,[tt.PRO]:128e3,[tt.SELF_SERVE_BUSINESS]:32e3,[tt.ENTERPRISE_CBP]:128e3,[tt.ENTERPRISE_HC]:128e3,[tt.EDUCATION_CBP]:32e3,[tt.K12]:32e3,[tt.QUORUM]:128e3,[tt.DEPRECATED_ENTERPRISE]:128e3,[tt.DEPRECATED_EDU]:32e3};function Got(t){return Math.round(Vke[t]/3*4)}const zke="max-length-toast",c$=di((t,e,s,n=1.5)=>t.warning(e,{description:s,duration:n,id:zke}),500,{leading:!0,trailing:!1});function Vot(t,e,s){c$(t,e.formatMessage(n_.exceededMaxLengthTitle),e.formatMessage(n_.exceededMaxLengthDescription),s)}function Wke(t,e,s){c$(t,e.formatMessage(n_.exceededMaxLengthTitle),e.formatMessage(n_.exceededMaxLengthForTruncatedMessageDescription),s)}const n_=Ne({exceededMaxLengthDescription:{id:"YhSTHh",defaultMessage:"The document might be longer than a canvas can currently handle. To edit, please reduce the length."},exceededMaxLengthForTruncatedMessageDescription:{id:"r87COE",defaultMessage:"The document was truncated because it was too long."},exceededMaxLengthTitle:{id:"v9nHC8",defaultMessage:"Document may exceed maximum length"}}),o0="temp";function u$(t,e){return"".concat(o0,"-tdc-").concat(e,"-").concat(t)}function WT(t){return"".concat(o0,"-td-").concat(t)}function qke(){return"".concat(o0,"-td-user:").concat(Date.now())}function Kke(t){return"".concat(o0,"-td-remix:").concat(t)}const jf=Zt(Vs(()=>({attachedTempTextdocs:{}}))),{setState:Ir,getState:Yke}=jf,Qke=7e3,d$={createTempTextdoc:(t,e,s,n)=>{const o=qke(),a=n?Nc("code/"+n):l$(t)?ni.CODE_OTHER:ni.DOCUMENT;Ir(u=>{u.attachedTempTextdocs[o]={tempTextdocId:o,createdAt:Date.now(),status:Do.INFERRING,type:a,title:e,content:t,create_source:s,hasUserEdits:!1}});let i=!1;const l=new Promise(u=>setTimeout(u,Qke)).then(()=>{i=!0}),c=de.safePost("/conversation/textdocs/infer_metadata",{requestBody:{content:t.slice(0,Gke)}}).then(({name:u,type:d})=>{i||Ir(f=>{f.attachedTempTextdocs[o]&&(f.attachedTempTextdocs[o].title=u,f.attachedTempTextdocs[o].type=Nc(d))})});return Promise.race([l,c]).finally(()=>{Ir(u=>{u.attachedTempTextdocs[o]&&(u.attachedTempTextdocs[o].status=Do.PENDING)})}),o},createRemixTempTextdoc:(t,e)=>{const s=Kke(t);if(!Yke().attachedTempTextdocs[s])return Ir(n=>{n.attachedTempTextdocs[s]={tempTextdocId:s,createdAt:Date.now(),status:Do.PENDING,type:ni.LOADING,title:"",content:"",create_source:tp.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:t}}),de.safeGet("/textdoc/shared/{shared_textdoc_id}",{parameters:{path:{shared_textdoc_id:t}}}).then(({shared_textdoc:n})=>{const o=Hke(n);Ir(a=>{a.attachedTempTextdocs[s]={tempTextdocId:s,createdAt:Date.now(),status:Do.PENDING,type:o.type,title:e.formatMessage({id:"cuH4su",defaultMessage:"Copy of {title}"},{title:o.title}),content:o.content,create_source:tp.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:o.sharedTextdocId}})}).catch(()=>{d$.removeTempTextdoc(s),window.location.href=zJ(WJ.CANVAS_NOT_FOUND)}),s},replaceTempTextdocContent:(t,e)=>{Ir(s=>{s.attachedTempTextdocs[t].content=e,s.attachedTempTextdocs[t].hasUserEdits=!0})},markAsSent:t=>{Ir(e=>{e.attachedTempTextdocs[t].status===Do.PENDING?e.attachedTempTextdocs[t].status=Do.SENT:delete e.attachedTempTextdocs[t]})},markAllAsSent:()=>{Ir(t=>{for(const e of Object.keys(t.attachedTempTextdocs))t.attachedTempTextdocs[e].status===Do.PENDING?t.attachedTempTextdocs[e].status=Do.SENT:delete t.attachedTempTextdocs[e]})},removeTempTextdoc:t=>{Ir(e=>{delete e.attachedTempTextdocs[t]})}},ug=Jc(({attachedTempTextdocs:t})=>t),Jke=Jc(t=>Object.values(t)),qT=Jc(t=>Object.values(t).filter(e=>e.status!==Do.SENT)),Zke=()=>qT(ug(jf.getState())),Xke=()=>jf(t=>Jke(ug(t))),eTe=()=>jf(t=>qT(ug(t))),zot=t=>jf(e=>{if(t)return ug(e)[t]}),Wot=()=>jf(t=>qT(ug(t)).length>0),tTe=t=>{const[e,s]=x.useState(null),n=x.useCallback(a=>{s(i=>{if(!i)return[a];const l=[...i];for(let c=0;c<i.length;c++)l[c].id===a.id?l[c]=a:c===l.length-1&&l.push(a);return l})},[]),o=x.useCallback(()=>s(null),[]);return EN(G1.TurnComplete,async()=>{await t(),o()}),EN(G1.CanvasMessage,async({message:a})=>{var u;const{message:i}=a,{recipient:l,author:c}=i;(l!=null&&l.startsWith(sl)||(u=c.name)!=null&&u.startsWith(sl))&&n(i)}),e};function sTe(t,e){return t.replace(new RegExp("\\\\(\\d+)|\\\\g<(?:(\\d+)|(\\D[^>]*))>|((?<!\\\\)\\\\(?:g(?:<[^>]*)?)?$)","gi"),(s,n,o,a,i)=>{var c,u,d;if(n==="0")return"\\0";const l=n!=null?n:o;if(l)return(c=e[V6(l)])!=null?c:"";if(a)return(d=(u=e.groups)==null?void 0:u[a])!=null?d:"";if(i)return"";throw new Error("Unreachable")})}function nTe(t,e){var _;let s="",n=0,o=0,a=0,i=0,l=!1;const c=b=>{n+=b},u=b=>{n>o&&(s+=t.slice(o,n)),n=o=n+b},d=b=>{u(0),s+=b},f=()=>{d("\\"),c(1)},m=b=>{if(n+b<t.length)return t[n+b]},p=(b,y=0)=>n+y<t.length&&b===t[n+y],g=b=>{const y=t.indexOf(b,n);if(y===-1)u(t.length-n);else return y-n},h=b=>{let y=1;if(m(b)==="\\"){const S=m(b+1);y=S==="U"?10:S==="u"?6:S==="x"?4:2}const v=n+b+y>t.length;return v&&u(t.length-n),v};for(;n<t.length;){if(p("\\")){if(h(0))continue;const v=(_=m(1))!=null?_:"";if(v==="a")u(2),d("\\x07");else if(v==="A")u(2),d("^");else if(v==="z")u(2),d("$");else if(v==="Z")u(2),d("(?=\\n?$)");else if(v==="U"){const S=t.slice(n+2,n+10);u(10),d("\\u{".concat(parseInt(S,16).toString(16),"}"))}else if(v==="u")c(6);else if(v==="x")c(4);else{let S;l?S=/[0bdDsSwWfnrtv()[\]{}|/\\^-]/.test(v):/[1-9]/.test(v)?S=parseInt(v,10)<=i:S=/[0bBdDsSwWfnrtv()[\]{}|/\\^$.?*+]/.test(v),S?c(2):u(1)}continue}if(p("]")){l?(l=!1,c(1)):f();continue}else if(l){if(p("-")&&h(1))continue;/[()[\]{}|/\\]/.test(t[n])?f():c(1);continue}else if(p("[")){l=!0,c(1),p("]")&&f();continue}if(p("|")&&h(1))continue;if(p("{")){const v=/^\{(?:\d+(?:,\d*)?(\}|$)|$)/.exec(t.slice(n));n>0&&(v==null?void 0:v[1])==="}"?c(v[0].length):n>0&&v&&e?u(v[0].length):f();continue}else if(p("}")){f();continue}if(p("+")){const v=m(-1);v&&/[*+?}]/.test(v)&&m(-2)!=="\\"?u(1):c(1);continue}if(p(")")){a>0?(a--,c(1)):f();continue}if(!p("(")){c(1);continue}if(h(1))continue;if(m(1)!=="?"){a++,i++,c(1);continue}if(h(2))continue;const b=m(2);if(!b){u(2);continue}if(b==="#"){const v=g(")");v&&u(1+v);continue}if(b==="P"){if(m(3)==="="){const v=g(")");if(v){const S=t.slice(n+4,n+v);u(1+v),d("\\k<".concat(S,">"))}}else{const v=g(">");if(v){const S=t.slice(n+4,n+v);if(u(1+v),h(0))continue;d("(?<".concat(S,">")),a++}}continue}if(/[-a-z]/.test(b)){const v=t.indexOf(":",n)>=0,S=g(v?":":")");if(S&&u(1+S),v){if(h(0))continue;d("(?:"),a++}continue}if(b===">"){if(u(3),h(0))continue;d("(?:"),a++;continue}const y=b==="<"?4:3;h(y)||(c(y),a++)}for(s+=t.slice(o,t.length),l&&(s+="]");a-- >0;)s+=")";return s.length>0?s:"(?!)"}function i4(t){const e=[/^`{1,3}\s*$/,/^```[^\n]*\n?/],s=[/\n?`{1,3}\s*$/];for(const n of e)if(n.test(t)){t=t.replace(n,"");break}for(const n of s)if(n.test(t)){t=t.replace(n,"");break}return t}function f$(t){let e=t;return e=e.replace(/\.[^/.]+$/,""),e=e.replace(/_/g," "),e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" ")}function o_(t,e){return e!=null||t!=null?{modelSelectionPositionRange:e,modelCursorPosition:t}:void 0}function oTe(t,e,s){const n=[],o=e.start-e.end+s;for(const a of t){const i=aTe(a.at,e,o);i&&n.push(i===a.at?a:U(T({},a),{at:i}))}return n}function aTe(t,e,s){return e.start>=t.end?t:e.start<=t.start&&e.end>=t.end?null:e.end<=t.start?s===0?t:{start:t.start+s,end:t.end+s}:e.start<=t.start?{start:e.end+s,end:t.end+s}:e.end>=t.end?{start:t.start,end:e.start}:{start:t.start,end:t.end+s}}const rTe=/[*_-\s\d.\\`]+$/;function q2(t,e){return e?t.replace(rTe,""):t}function m$(t,e){return qi(t,s=>{for(const n of e){if(n.kind===Xs.CREATE){const o=lTe(n);Mm(s,o)}else{const o=s.textdocById[n.textdocId];if(!o){Ge.addError("Attempted to apply canmore operation to an unknown target id",{textdocOp:n});continue}const a=o.versions[o.versions.length-1],i=p$(a,n);Mm(s,i,iTe(a,n))}n.textdocId&&(s.latestTextdocId=n.textdocId)}})}function iTe(t,e){if(e.author.role===ot.User)return t.messageId?!0:e.createdAt-t.createdAt>3600;switch(e.kind){case Xs.REWRITE:return!0;case Xs.EDIT:return e.messageId!==t.messageId;case Xs.ADD_COMMENT:return!1;case Xs.REMOVE_COMMENT:return!1}}function lTe(t){var n,o;const e=!!t.isPartial,s=q2(t.content,e);return{textdocId:t.textdocId,versionInt:(n=t.versionInt)!=null?n:null,messageId:(o=t.messageId)!=null?o:null,title:t.title,type:t.type,content:s,createdAt:t.createdAt,status:e?fo.CREATING:fo.COMPLETE,comments:[],modelCursor:o_(t.author.role===ot.Assistant&&t.isPartial?s.length:void 0)}}function cTe(t,e){if(!t.isPartial)return;if(t.isPartialRange)return o_(void 0,t.at);const s=t.at.start+e.length;return o_(s)}function p$(t,e){var s,n,o,a,i,l,c,u,d,f;switch(e.kind){case Xs.REMOVE_COMMENT:return U(T({},t),{versionInt:(s=e.versionInt)!=null?s:t.versionInt,comments:t.comments.map(m=>m.id===e.commentId?U(T({},m),{status:e.reason===SU.ACCEPT?B2.ACCEPT_INITIATED:B2.DISMISSED}):m)});case Xs.REWRITE:{const m=t.status!==fo.COMPLETE||e.isPartial===!0,p=q2(e.content,m),g=e.author.role===ot.Assistant&&e.isPartial?p.length:void 0;return U(T({},t),{versionInt:(n=e.versionInt)!=null?n:t.versionInt,messageId:(o=e.messageId)!=null?o:null,content:p,createdAt:e.createdAt,comments:(a=e.comments)!=null?a:t.comments,status:e.isPartial?fo.REWRITING:fo.COMPLETE,modelCursor:o_(g)})}case Xs.EDIT:{const m=e.isPartial&&e.isPartialRange?t.content.slice(e.at.start,e.at.end):q2(e.content,e.isPartial===!0),p=t.content.slice(0,e.at.start)+m+t.content.slice(e.at.end);return U(T({},t),{versionInt:(i=e.versionInt)!=null?i:t.versionInt,messageId:(l=e.messageId)!=null?l:null,content:p,createdAt:e.createdAt,status:e.isPartial?fo.UPDATING:fo.COMPLETE,comments:oTe(t.comments,e.at,m.length),modelCursor:cTe(e,m)})}case Xs.ADD_COMMENT:{const m={id:(c=e.id)!=null?c:e.tempId,tempId:e.tempId,at:e.at,content:(u=e.content)!=null?u:""},p=t.comments.concat(m);return U(T({},t),{versionInt:(d=e.versionInt)!=null?d:t.versionInt,messageId:(f=e.messageId)!=null?f:null,createdAt:e.createdAt,status:e.isPartial?fo.COMMENTING:fo.COMPLETE,comments:p})}}}function uTe(t){let e="";const s=t.length;let n=0,o=0;for(;n<s;){let a=t.charCodeAt(n);if(a!==92){n++;continue}if(o<n&&(e+=t.slice(o,n)),n++,n>=s){e+="\\";break}switch(a=t.charCodeAt(n),a){case 110:e+="\n",n++;break;case 116:e+="	",n++;break;case 114:e+="\r",n++;break;case 98:e+="\b",n++;break;case 102:e+="\f",n++;break;case 118:e+="\v",n++;break;case 48:e+="\0",n++;break;case 39:e+="'",n++;break;case 34:e+='"',n++;break;case 92:e+="\\",n++;break;case 120:if(n+2<s){const i=parseInt(t.slice(n+1,n+3),16);if(!isNaN(i)){e+=String.fromCharCode(i),n+=3;break}}e+="\\x",n++;break;case 117:if(n+1<s)if(t.charAt(n+1)==="{"){const i=t.indexOf("}",n+2);if(i!==-1){const l=parseInt(t.slice(n+2,i),16);if(!isNaN(l)&&l<=1114111){e+=String.fromCodePoint(l),n=i+1;break}}}else{const i=parseInt(t.slice(n+1,n+5),16);if(!isNaN(i)){e+=String.fromCharCode(i),n+=5;break}}e+="\\u",n++;break;default:e+="\\"+t.charAt(n),n++;break}o=n}return o<s&&(e+=t.slice(o)),e}const l4=t=>t===" "||t==="\n"||t==="\r"||t==="	";function dTe(t,e=!1){let s=0,n=null;const o=[];if(!t)return[void 0,o];if(e)return[l(),o];try{return[JSON.parse(t),null]}catch(g){return n=g,[l(),o]}function a(){for(;s<t.length&&l4(t[s]);)s++;return s<t.length}function i(g){return a()&&t[s]===g?(s++,!0):!1}function l(){if(a())switch(t[s]){case"{":return f();case"[":return m();case'"':{const[g]=u();return g}case"f":return p("false",!1);case"t":return p("true",!0);case"n":return p("null",null);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return d()}throw n}function c(g,h=!1){return h?uTe(g):g}function u(g=!1){const h=s+1;let _=!1;for(s++;s<t.length;){const b=t[s++];if(b==="\\"){if(_=!0,s===t.length||t[s]==="u"&&s+4>=t.length){const y=s-1;return s=t.length,[c(t.slice(h,y),_),!1]}s++;continue}if(b==='"'){let y=s;for(;y<t.length&&l4(t[y]);)y++;if(t[y]==null||t[y]===","||t[y]==="]"||t[y]==="}"||g&&t[y]===":")return[c(t.slice(h,s-1),_),!0]}}return[c(t.slice(h,s),_),!1]}function d(){const g=s;for(;s<t.length&&/[0-9.eE+-]/.test(t[s]);)s++;const h=Number(t.slice(g,s));if(isNaN(h)){if(a())throw n;return 0}return h}function f(){s++;const g={};if(i("}"))return g;for(;a();){const[h,_]=u(!0);if(!_||(o.push(h),!a()))break;if(!i(":"))throw n;if(!a()||(g[h]=l(),!a()))break;if(i("}")){o.pop();break}if(!i(","))throw n;o.pop()}return g}function m(){s++;const g=[];if(i("]"))return g;for(o.push(0);a()&&(g.push(l()),!!a());){if(i("]")){o.pop();break}if(!i(","))throw n;o[o.length-1]=g.length}return g}function p(g,h){const _=s+g.length;if(_<=t.length?t.slice(s,_)===g:g.startsWith(t.slice(s)))return s=_,h;throw n}}function ol(t,e,s=!1){try{const[n,o]=dTe(t);return[e(n),o]}catch(n){return s&&Zc.logError("JSON parsing",n),[void 0,[]]}}function Yf(t,e){return t!=null&&e.every((s,n)=>t[n]===s)}const fTe=ba({type:el(In),name:el(In),content:el(In)}),mTe=ba({updates:z6(ba({pattern:el(In),multiple:el(Ii),replacement:el(In)}))}),pTe=ba({comments:z6(ba({pattern:el(In),comment:el(In)}))});function g$(t){var n;const e=t.author.name;if(!CD(e))return null;const s=(n=t==null?void 0:t.metadata)==null?void 0:n.canvas;return{function:e,status:hTe(t),textdocId:s==null?void 0:s.textdoc_id,type:(s==null?void 0:s.textdoc_type)&&Nc(s.textdoc_type),versionInt:_Te(s),commentIds:s==null?void 0:s.comment_ids}}function h$(t,e,s){var u,d,f,m,p;const{id:n,author:o,recipient:a,create_time:i}=e;if(!i)throw new Error("Expected a create_time");const l=xo(e),c=s&&g$(s);if((u=e==null?void 0:e.metadata)!=null&&u.is_redacted||(c==null?void 0:c.status)===Ut.REDACTED||l==="The output of this plugin was redacted.")return{function:a,status:Ut.REDACTED,messageId:n,author:o,createdAt:i};switch(a){case dn.CreateTextdoc:{const[g,h]=ol(l,fTe),_=(d=c==null?void 0:c.type)!=null?d:!(g!=null&&g.type)||Yf(h,["type"])?void 0:Nc(g.type);return{function:dn.CreateTextdoc,status:(f=c==null?void 0:c.status)!=null?f:Nb(t,e,h!=null),messageId:n,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,title:g==null?void 0:g.name,type:_,content:g==null?void 0:g.content}}case dn.UpdateTextdoc:{const[g,h]=ol(l,mTe,!t),_=g==null?void 0:g.updates.map((b,y)=>U(T({},b),{isPartialPattern:Yf(h,["updates",y,"pattern"]),isPartial:Yf(h,["updates",y])}));return{function:dn.UpdateTextdoc,status:(m=c==null?void 0:c.status)!=null?m:Nb(t,e,h!=null),messageId:n,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,updates:_}}case dn.CommentTextdoc:{const[g,h]=ol(l,pTe,!t),_=c==null?void 0:c.commentIds,b=g==null?void 0:g.comments.map((y,v)=>U(T({},y),{id:_==null?void 0:_[v],isPartialPattern:Yf(h,["comments",v,"pattern"]),isPartial:Yf(h,["comments",v])}));return{function:dn.CommentTextdoc,status:(p=c==null?void 0:c.status)!=null?p:Nb(t,e,h!=null),messageId:n,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,comments:b}}}}function K2(t){return CD(t==null?void 0:t.recipient)}function gTe(t,e=0){for(let s=e;s<t.length;s++)if(K2(t[s]))return!0;return!1}function Nb(t,e,s){var o,a;return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.finish_details)==null?void 0:a.type)==="interrupted"?Ut.CANCELED:t?s?Ut.STREAMING:Ut.WAITING:Ut.FAILED}function hTe(t){var s,n;if((s=t==null?void 0:t.metadata)!=null&&s.is_redacted)return Ut.REDACTED;if((t==null?void 0:t.content.content_type)===bt.SystemError)return Ut.FAILED;const e=(n=t==null?void 0:t.metadata)==null?void 0:n.canvas;return e!=null&&e.is_failure!==!0?Ut.COMPLETE:Ut.FAILED}function _Te(t){var e;return(e=t==null?void 0:t.version)!=null?e:t==null?void 0:t.version_int}const xTe=5;function KT(t){var s;let e=null;for(let n=0;n<t.length;n++){const o=t[n];if(K2(o)){let a=null;for(let i=n+1;i<t.length;i++){const l=t[i];if(K2(l))break;if(((s=l.author)==null?void 0:s.name)===o.recipient){a=l;break}}e?e.push([o,a]):e=[[o,a]]}}return e}function yTe(t,e,s){let n=null;const o=KT(s);if(!o)return n;for(const[a,i]of o){const l=h$(t,a,i),c=bTe(e,l);c&&(e&&(e=m$(e,c)),n?n=n.concat(c):n=c)}return n}const Ab=Jc((t,e,s)=>{Ge.addError(e,s)},([t],[e])=>t===e);function bTe(t,e){var a,i,l,c,u,d,f;if(e.status===Ut.FAILED||e.status===Ut.CANCELED)return null;if(e.function===dn.CreateTextdoc){if(!e.type)return null;const m=WT(e.messageId),p=e.content&&J1(e.type)?i4(e.content):e.content;return[{kind:Xs.CREATE,textdocId:(a=e.textdocId)!=null?a:m,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,tempTextdocId:m,title:f$((i=e.title)!=null?i:""),type:e.type,content:p!=null?p:"",isPartial:e.status===Ut.STREAMING}]}const s=t==null?void 0:t.latestTextdocId,n=(l=e==null?void 0:e.textdocId)!=null?l:s;if(e.status===Ut.COMPLETE&&(s?e!=null&&e.textdocId&&e.textdocId!==s&&Ab(e.messageId,"Attempted to parse canmore operation with incorrect client latest target id",{latestTextdocId:s,toolCall:e}):Ab(e.messageId,"Attempted to parse canmore operation but latestTextdocId is unset",{toolCall:e})),!n)return null;const o=Qo((c=$k(t,n))==null?void 0:c.versions);if(!o)return e.status===Ut.COMPLETE&&Ab(e.messageId,"Attempted to parse canmore operation against unknown target id",{textdocId:n}),null;switch(e.function){case dn.UpdateTextdoc:{const m=[],p=(u=e.updates)!=null?u:[];for(let g=0;g<p.length;g++){const h=p[g];if(h.isPartialPattern&&h.pattern&&h.pattern.length<xTe)continue;if(h.pattern===".*"){const y=h.replacement?J1(o.type)?i4(h.replacement):h.replacement:"";return[{kind:Xs.REWRITE,textdocId:n,versionInt:e.versionInt,messageId:e.messageId,createdAt:e.createdAt,author:e.author,content:y,isPartial:e.status===Ut.STREAMING&&h.isPartial,comments:[]}]}const _=u4(h.pattern,h.isPartialPattern,h.multiple);if(!_)continue;let b=!1;for(const y of c4(o.content,_,h.multiple)){b=!0;const v=d4(y),S=h.replacement&&sTe(h.replacement,y);for(const C of m)if(C.at.end<=v.start){if(!C.isPartialRange){const w=C.at.start-C.at.end+C.content.length;v.start+=w,v.end+=w}}else C.at.start<v.end;m.push({kind:Xs.EDIT,textdocId:n,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,at:v,content:S!=null?S:"",isPartialRange:e.status===Ut.STREAMING&&h.isPartialPattern,isPartial:e.status===Ut.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!b)return null}return m.length>0?m:null}case dn.CommentTextdoc:{const m=[],p=(d=e.comments)!=null?d:[];for(let g=0;g<p.length;g++){const h=p[g],_=u4(h.pattern,h.isPartialPattern);if(!_)continue;let b=!1;for(const y of c4(o.content,_)){b=!0;const v=d4(y);v.end>v.start&&m.push({kind:Xs.ADD_COMMENT,textdocId:n,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,id:h.id,tempId:u$(e.messageId,g),at:v,content:(f=h.comment)!=null?f:"",isPartialRange:e.status===Ut.STREAMING&&h.isPartialPattern,isPartial:e.status===Ut.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!b)return null}return m.length>0?m:null}}}function*c4(t,e,s=!1){if(s)yield*B0(t.matchAll(e));else{const n=t.match(e);n&&(yield n)}}function u4(t,e,s=!1){if(t)try{const n=nTe(t,e);return new RegExp(n,s?"gsv":"sv")}catch(n){console.warn("Assistant returned invalid Regexp, dropping",{pattern:t,error:n})}}function d4(t){return{start:t.index,end:t.index+t[0].length}}const f4=(t,e)=>{var o,a,i;for(const l of e){const c=(o=l.metadata)==null?void 0:o.canvas;if(c!=null&&c.user_created_temp_textdoc_id&&(c!=null&&c.textdoc_id)){const{user_created_temp_textdoc_id:u,textdoc_id:d}=c;t=qi(t,f=>{f.latestTextdocId=d,f.resolveTempTextdocId[u]=d})}}const s=Uc(e,l=>TU(l));for(let l=e.length-1;l>=0;l--){const{metadata:c}=e[l],u=c==null?void 0:c.canvas,d=(i=(a=c==null?void 0:c.open_in_canvas_view)==null?void 0:a.id)!=null?i:u==null?void 0:u.textdoc_id;if(d){t=qi(t,f=>{f.latestTextdocId=d!=null?d:null,s&&(f.lastCanvasAssistantMessageById[d]=s.id)});break}}const n=KT(e);if(!n)return t;for(const[l,c]of n){const u=c&&g$(c);u&&(t=qi(t,d=>{if(u.function===dn.CreateTextdoc){const{textdocId:f}=u;f&&(d.resolveTempTextdocId[WT(l.id)]=f)}else if(u.function===dn.CommentTextdoc){const{commentIds:f=[]}=u;for(let m=0;m<f.length;m++){const p=f[m],g=u$(l.id,m);d.resolveTempCommentId[p]=g}}}))}return t},vTe=(t,e,s)=>{const n=Tt(t),o=Se.getTree(n),a=Se.getVariantIds(n,s.messages[0].id);if(a.length<2)return f4(e,s.messages);for(const i of a){const l=o.getLeafFromNode(i).id,c=Se.getConversationLastTurn(n,l);c&&(e=f4(e,c.messages))}return e};function STe(){return new WeakMap}function _$(t,e,s,n){const o=s[n];let a=e.get(o);if(!a){const i=n===0?xD():_$(t,e,s,n-1);a=vTe(t,i,o),e.set(o,a)}return a}function CTe(t,e,s){return s.length===0?null:_$(t,e,s,s.length-1)}function wTe(t,e){const[s]=x.useState(STe);return x.useMemo(()=>CTe(t,s,e),[s,t,e])}const m4=t=>{if(!t)return;const{messages:e}=t,s=e6(e!=null?e:[],o=>o.author.role===ot.System||o.author.role===ot.Developer),n=s===-1?e:e==null?void 0:e.slice(s+1);if(n&&gTe(n))return n},kTe=({lastTurn:t,clientThreadId:e,isRequestActive:s,persistedTextdocStoreStatus:n})=>{const[o,a]=x.useState(!0),i=s||!o||n!==Z1.READY,l=x.useMemo(()=>{if(!t)return null;const u=Tt(e),d=Se.getTree(u),f=Se.getVariantIds(u,t.messages[0].id);return f.length<2?null:f.map(m=>{const p=d.getLeafFromNode(m).id;return Se.getConversationLastTurn(u,p)})},[e,t]);return[x.useMemo(()=>{var u,d;return!i||!t?null:l?(d=l.flatMap(m4).filter(ex))!=null?d:null:(u=m4(t))!=null?u:null},[i,t,l]),a]};class x${constructor(e,s,n,o){X(this,"sentLength",null);X(this,"sentIsComplete",null);X(this,"bufferedLength");X(this,"requestUpdateRaf",null);X(this,"prevBuffer");X(this,"nextBuffer");this.targetLength=e,this.isActivelyStreaming=s,this.onUpdate=o,this.bufferedLength=n?0:this.targetLength,n&&!n.isComplete()?(n.nextBuffer=this,this.prevBuffer=n):n!=null&&n.isComplete()&&(this.bufferedLength=this.targetLength)}setTargetLength(e,s){e<this.bufferedLength&&(this.bufferedLength=e),this.targetLength=e,this.isActivelyStreaming=s,this.shouldUpdate()&&this.updateBufferedState()}shouldUpdate(){return!this.prevBuffer&&(this.isBuffering()||this.sentIsComplete!==this.isComplete())}isBuffering(){return this.bufferedLength<this.targetLength}isComplete(){return!this.prevBuffer&&!this.isActivelyStreaming&&!this.isBuffering()}getTotalRemainingLength(){let e=this.targetLength,s=this.nextBuffer;for(;s;)e+=s.targetLength,s=s.nextBuffer;return e-this.bufferedLength}requestUpdate(){this.requestUpdateRaf||this.sentLength===this.bufferedLength&&this.sentIsComplete===this.isComplete()||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this.requestUpdateRaf=null;const e=this.isComplete();this.sentLength=this.bufferedLength,this.sentIsComplete=e,this.onUpdate(this.bufferedLength,e),e&&this.resolveDependency()}))}resolveDependency(){if(this.nextBuffer){const e=this.nextBuffer;this.nextBuffer=e.prevBuffer=void 0,e.shouldUpdate()&&e.updateBufferedState()}}destroy(){this.resolveDependency(),this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}const Xl=class Xl extends x${constructor(){super(...arguments);X(this,"frameRequestId");X(this,"prevAddFrameTime")}updateBufferedState(){if(!this.frameRequestId){const s=this.getTotalRemainingLength(),n=Math.max(Xl.MIN_BUFFERING_CHAR_PER_MS,s/Xl.MAX_BUFFERING_LAG_MS);this.frameRequestId=window.requestAnimationFrame(o=>{this.frameRequestId=void 0;const a=this.prevAddFrameTime===void 0?2/Xl.MIN_BUFFERING_CHAR_PER_MS:o-this.prevAddFrameTime,i=Math.floor(n*a);i>0&&(this.prevAddFrameTime=o,this.bufferedLength=Math.min(this.bufferedLength+i,this.targetLength)),this.requestUpdate(),this.shouldUpdate()&&this.updateBufferedState()})}}destroy(){super.destroy(),this.frameRequestId&&window.cancelAnimationFrame(this.frameRequestId)}};X(Xl,"MAX_BUFFERING_LAG_MS",500),X(Xl,"MIN_BUFFERING_CHAR_PER_MS",1/30);let Y2=Xl;class YT extends x${constructor(e,s,n,o){super(z1(e).length,n,o,(a,i)=>s(QF(this.textMessageParts,a),i)),this.textMessageParts=e}onMessagePartsUpdated(e,s){this.textMessageParts=e,this.setTargetLength(z1(e).length,s)}removeDelayedRender(){return!this.isBuffering()}}const Zu=class Zu extends YT{constructor(s,n,o,a,i){var l,c,u,d;super(s,n,o,a);X(this,"ALPHA",.1);X(this,"DIV",1.2);X(this,"MUL",1.5);X(this,"minRate");X(this,"expectedDisplayInterval");X(this,"maxTokensPerStep");X(this,"displayNextChunkTimeout");X(this,"messageIdForDebug");X(this,"_rate");X(this,"_lastArrival",null);X(this,"_lastDrain",0);X(this,"_drainCarry",0);X(this,"_lastTargetLength",0);this.updateReactComponentDisplay=n,this.minRate=(l=i==null?void 0:i.minRate)!=null?l:Zu.DEFAULT_MIN_RATE,this.expectedDisplayInterval=(c=i==null?void 0:i.expectedDisplayInterval)!=null?c:Zu.DEFAULT_EXPECTED_DISPLAY_INTERVAL,this.maxTokensPerStep=(u=i==null?void 0:i.maxTokensPerStep)!=null?u:Number.POSITIVE_INFINITY,this._rate=this.minRate,this.messageIdForDebug=(d=i==null?void 0:i.messageId)!=null?d:null}removeDelayedRender(){return this.bufferedLength>1}calculateBufferLength(){if(!this.isActivelyStreaming){this.bufferedLength<this.targetLength&&(this.bufferedLength=this.targetLength,this.requestUpdate());return}const s=performance.now(),n=s/1e3,o=this.targetLength-this._lastTargetLength;if(this._lastTargetLength=this.targetLength,o>0){if(this._lastArrival!=null){const u=Math.max(n-this._lastArrival,10),d=o/u;this._rate=Math.max(this.minRate,this.ALPHA*d+(1-this.ALPHA)*this._rate)}else this._rate=o;this._lastArrival=n}const a=n-this._lastDrain;this._lastDrain=n;const i=this.targetLength-this.bufferedLength;for(let u=0;u<(a+this._drainCarry)/this.expectedDisplayInterval;u++)i&&i<this._rate*this.MUL&&(this._rate=(i+this._rate*this.MUL)/2),i>this._rate/this.DIV&&(this._rate=(i+this._rate/this.DIV)/2);this._rate=Math.max(this.minRate,this._rate);const l=a*this._rate+this._drainCarry,c=Math.min(Math.floor(l),this.maxTokensPerStep);this._drainCarry=l-c,c>=1&&(this.bufferedLength=Math.min(this.bufferedLength+c,this.targetLength)),this.messageIdForDebug&&M2.recordAdaptiveBufferSample(this.messageIdForDebug,{rate:this._rate,timestampMs:s,receivedCharsTotal:this.targetLength,displayedCharsTotal:this.bufferedLength,queueChars:Math.max(0,this.targetLength-this.bufferedLength)}),this.requestUpdate()}updateBufferedState(){this.calculateBufferLength(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},50))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};X(Zu,"DEFAULT_MIN_RATE",1),X(Zu,"DEFAULT_EXPECTED_DISPLAY_INTERVAL",.05);let p4=Zu;const Hr=class Hr extends YT{constructor(s,n,o,a){super(s,n,o,a);X(this,"displayNextChunkTimeout");this.updateReactComponentDisplay=n}updateBufferedState(){const s=this.getTotalRemainingLength(),n=s<Hr.MIN_CHARS_BEHIND_TO_CATCHUP?this.targetLength-this.bufferedLength:Math.ceil(s*Hr.UPDATE_FREQUENCY_MS/Hr.CATCHUP_TIME_MS);this.bufferedLength=Math.min(this.bufferedLength+n,this.targetLength),this.requestUpdate(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},Hr.UPDATE_FREQUENCY_MS))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};X(Hr,"MIN_CHARS_BEHIND_TO_CATCHUP",5),X(Hr,"CATCHUP_TIME_MS",300),X(Hr,"UPDATE_FREQUENCY_MS",30);let a_=Hr;const fh=15,Ib=8;class qot extends YT{constructor(s,n,o,a,i){var l;super(s,n,o,a);X(this,"LAG_FACTORS",T({".":fh,"!":fh,"?":fh,"\n":fh,",":Ib,":":Ib,";":Ib,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08},typeof window<"u"&&window.__PUNCTUATION_BUFFER_LAG_FACTORS));X(this,"concatenatedText");X(this,"displayNextCharTimeout");X(this,"debug");X(this,"streamStartMs");X(this,"averageMsPerChar");X(this,"_throttledDebugLog",W6(s=>{console.debug(s)},500,{leading:!0,trailing:!0}));this.updateReactComponentDisplay=n,this.concatenatedText=z1(this.textMessageParts),this.debug=(l=i==null?void 0:i.debug)!=null?l:!1,this.streamStartMs=0,this.averageMsPerChar=.25,this.debug&&console.debug(["PunctuationBuffer:","[lagFactors: ".concat(JSON.stringify(this.LAG_FACTORS,null,2),"]")].join("\n"))}displayNextChar(){this.displayNextCharTimeout=void 0,this.shouldUpdate()&&(this.bufferedLength++,this.requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}updateBufferedState(){this.concatenatedText=z1(this.textMessageParts),this.streamStartMs===0?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.targetLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){var l;const s=this.concatenatedText[this.bufferedLength-1],n=this.getTotalRemainingLength(),o=1/Math.max(n*this.LAG_FACTORS.BUFFER_FACTOR,1),a=((l=this.LAG_FACTORS[s])!=null?l:this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*o,i=this.averageMsPerChar*a;return this.debug&&this._throttledDebugLog(["PunctuationBuffer:","[lagMs: ".concat(i,"]"),'[lastChar: "'.concat(s,'"]'),"[averageMsPerChar: ".concat(this.averageMsPerChar,"]"),"[lagFactor: ".concat(a,"]"),"[bufferLagFactor: ".concat(o,"]"),"[remainingLength: ".concat(n,"]"),"==="].join("\n")),i}}function TTe(t){return t.type==="text"}class g4{constructor(e,s,n="",o,a){X(this,"buffer");X(this,"text");this.buffer=new e([n],(i,l)=>{const c=i.filter(TTe).map(u=>u.text).join("");s(c,l)},o,a),this.text=n}setText(e,s=!0){this.text=e,this.buffer.onMessagePartsUpdated([this.text],s)}isBuffering(){return this.buffer.isBuffering()}isComplete(){return this.buffer.isComplete()}destroy(){return this.buffer.destroy()}}function ETe(t,e,s){var c;const[n,o]=x.useState(null),a=(c=e==null?void 0:e.length)!=null?c:0,i=a>0,l=x.useRef(new Map);return x.useEffect(()=>{if(e)for(const u of e){const{messageId:d}=u;if(d==null||l.current.has(d))continue;const f=new MTe((m,p)=>{if(o(g=>U(T({},g),{[d]:m})),!!p){for(const[g,h]of l.current.entries())if(g!==d&&!h.isComplete())return;s(!0)}});l.current.set(d,f)}},[a]),x.useEffect(()=>{const u=l.current;return()=>{for(const d of u.values())d.destroy()}},[i]),x.useEffect(()=>{if(!i)return o(null);const u=$c(e,"messageId");for(const[d,f]of Object.entries(u)){const m=l.current.get(d);m&&m.setTextdocOps(f,!t)}},[i,t,e]),x.useMemo(()=>!i||!n?null:Object.values(n).flatMap(u=>u!=null?u:[]),[i,n])}class MTe{constructor(e){X(this,"bufferedOps",[]);X(this,"isFinishedStreaming",!1);X(this,"rangeBuffers",[]);X(this,"textBuffers",[]);X(this,"completeCounters",[]);X(this,"lastBuffer");this.onUpdate=e}destroy(){for(const e of this.rangeBuffers)e==null||e.destroy();for(const e of this.textBuffers)e==null||e.destroy();this.isFinishedStreaming=!0,this.rangeBuffers=[],this.textBuffers=[],this.completeCounters=[],this.lastBuffer=void 0}isBuffering(){var e,s,n,o;return!(((s=(e=this.lastBuffer)==null?void 0:e.isComplete())==null||s)&&((o=(n=Qo(this.completeCounters))==null?void 0:n.isComplete())==null||o))}getNonEmptyBufferedOpsOrNull(){return this.bufferedOps&&this.bufferedOps.length>0?this.bufferedOps:null}isComplete(){return this.isFinishedStreaming&&!this.isBuffering()}setTextdocOps(e,s){if(this.isFinishedStreaming=s,e)for(let n=0;n<e.length;n++){const o=e[n];if(o.author.role===ot.Assistant)switch(o.kind){case Xs.CREATE:case Xs.REWRITE:this.setAllContentOpAtIndex(o,n);break;case Xs.EDIT:case Xs.ADD_COMMENT:this.setRangeAndContentOpAtIndex(o,n);break;default:this.setUnbufferedOpAtIndex(o,n)}else this.setUnbufferedOpAtIndex(o,n)}s&&(e?this.isBuffering()||this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),!0):(this.destroy(),this.update(()=>null)))}update(e){const s=this.bufferedOps;this.bufferedOps=td(s,e),this.bufferedOps!==s&&this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),this.isComplete())}getBufferedAllContentOp(e,s,n){let o=e[n];return o||(o=U(T({},s),{content:""}),e[n]=o),o}setAllContentOpAtIndex(e,s){const{content:n,isPartial:o=!1}=e;let a=this.textBuffers[s];a?(a.setText(n,o),e.kind===Xs.CREATE&&this.update(i=>{const l=this.getBufferedAllContentOp(i,e,s);l.textdocId=e.textdocId})):(a=new g4(a_,(i,l)=>{this.update(c=>{const u=this.getBufferedAllContentOp(c,e,s);u.content=i,u.isPartial=!l})},n,o,this.lastBuffer),this.textBuffers[s]=a,this.lastBuffer=a.buffer)}getBufferedRangeAndContentOp(e,s,n){let o=e[n];return o||(o=U(T({},s),{at:{start:s.at.start,end:s.at.start},content:"",isPartial:!0,isPartialRange:!0}),e[n]=o),o}setRangeAndContentOpAtIndex(e,s){const{at:n,content:o,isPartialRange:a=!1,isPartial:i=!1}=e;let l=this.completeCounters[s];l||(l=new NTe(()=>{this.update(d=>{const f=this.getBufferedRangeAndContentOp(d,e,s);f.isPartial=!1})}),l.update("original",!1),this.completeCounters[s]=l);let c=this.rangeBuffers[s];c?(this.update(d=>{const f=this.getBufferedRangeAndContentOp(d,e,s);if(f.at.start!==n.start){const m=f.at.end-f.at.start;f.at={start:n.start,end:n.start+m}}}),c.setTargetLength(n.end-n.start,a)):(c=new Y2(0,a,this.lastBuffer,(d,f)=>{this.update(m=>{const p=this.getBufferedRangeAndContentOp(m,e,s);p.at.end=p.at.start+d,p.isPartialRange=!f}),l.update("range",f)}),this.rangeBuffers[s]=c,this.lastBuffer=c,l.update("range",!1));let u=this.textBuffers[s];u?u.setText(o!=null?o:"",i):(u=new g4(a_,(d,f)=>{this.update(m=>{const p=this.getBufferedRangeAndContentOp(m,e,s);p.content=d}),l.update("content",f)},o,i,this.lastBuffer),this.textBuffers[s]=u,this.lastBuffer=u.buffer,l.update("content",!1)),l.update("original",!i)}setUnbufferedOpAtIndex(e,s){this.update(n=>{n[s]=e})}}class NTe{constructor(e){X(this,"keyStates",new Set);X(this,"onComplete");this.onComplete=e}isComplete(){return this.onComplete==null}update(e,s){if(!s)this.keyStates.add(e);else if(this.keyStates.delete(e),this.keyStates.size===0&&this.onComplete){const n=this.onComplete;this.onComplete=null,n()}}}function ATe(t){const e=ne(),s=Kt();I8(()=>{var a,i;const n=Se.getConversationLastTurn(Tt(t)),o=Uc(n==null?void 0:n.messages,l=>TU(l));((i=(a=o==null?void 0:o.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="max_tokens"&&Wke(s,e,4)})}function ITe(t){var e;return t?!!((e=t.metadata)!=null&&e.async_completion_id&&t.status==="in_progress"):!1}function jTe(t){var C,w;const[e,s]=Qe(t,k=>[Se.getRequestId(k),Se.getConversationTurns(k)],{disablePerfDetector:!0}),n=Sr(e)||ITe((w=(C=Qo(s))==null?void 0:C.messages)==null?void 0:w[0]),o=jU(t),a=iSe(),i=tTe(()=>Promise.allSettled([o.refetch(),hr(t)])),[l,c]=kTe({isRequestActive:n,lastTurn:Qo(s),clientThreadId:t,persistedTextdocStoreStatus:o.status}),u=i!=null?i:l,d=!!i||n,f=u?i?I2.NATIVE:I2.LAST_TURN:null,m=wTe(t,s),p=IU(),g=mSe(),h=Xke(),_=x.useMemo(()=>{let k=xD(m);const{textdocVersionById:E,fetchError:M,status:N}=o;return k=qi(k,A=>{var I,P,R,O;A.fetchError=M,A.isFetchingFromPersistence=N===Z1.REFETCHING||N===Z1.INITIALIZING;for(const{tempTextdocId:L,status:D,createdAt:H,type:V,title:q,content:W}of h){const $=(I=A.resolveTempTextdocId[L])!=null?I:L;Mm(A,{textdocId:$,title:q,type:V,content:W,createdAt:H,versionInt:0,comments:[],messageId:null,status:D===Do.SENT?fo.ATTACHED_SENT:fo.ATTACHED_PENDING})}if(E)for(const[L,D]of E.entries()){A.allTextdocIdSet[L]=L;const H=a.get(L);let V=H&&((P=H.versionInt)!=null?P:Yr)>((R=D.versionInt)!=null?R:Yr)?T(T({},D),H):D;const q=g.filter($=>$.textdocId===L&&$.kind===Xs.REMOVE_COMMENT);let W=V.versionInt;for(const $ of q)V=p$(V,$),W=Math.max(W!=null?W:Yr,(O=$.versionInt)!=null?O:Yr);V=U(T({},V),{versionInt:W}),A.textdocById[L]=void 0,Mm(A,V)}}),p?qi(k,A=>{Mm(A,p,!1)}):k},[h,m,o,a,p,g]),b=x.useMemo(()=>u!=null&&u.length?yTe(d,_,u):null,[u,d,_]),y=x.useMemo(()=>qi(_,k=>{for(const E of b!=null?b:[])if(E.messageId&&(k.lastCanvasAssistantMessageById[E.textdocId]=E.messageId),E.kind===Xs.CREATE){const{tempTextdocId:M,textdocId:N}=E;M&&N&&(k.resolveTempTextdocId[M]=N)}}),[b,_]),v=ETe(d,b,c);return x.useMemo(()=>v?qi(m$(y,v),k=>{k.streamingSource=f}):y,[y,f,v])}function Kot({clientThreadId:t,children:e}){const s=jTe(t);return ATe(t),r.jsx(_D.Provider,{value:s,children:e})}const y$=ue(Ce,"ac89a7",20,20),a0=ue(Ce,"b140e7",20,20,!0),Yot=ue(Ce,"8ed617",20,20),Qot=[et.Mod,"k"],Jot=[et.Mod,et.Alt,"0"],Zot=[et.Mod,et.Alt,"1"],Xot=[et.Mod,et.Alt,"2"],eat=[et.Mod,et.Alt,"3"],tat=[et.Mod,et.Alt,"4"],sat=[et.Mod,et.Alt,"5"],nat="writingBlockSkipSerialize",PTe=/^((`{3,})|(~{3,}))\s*/,b$=/^(?:\s*)((`{3,})|(~{3,}))[^\S\n]*\{/m;var rP;const RTe=new RegExp(String.raw(rP||(rP=St(["^s*:::","{[^}]*}[sS]*?:::"],["^\\s*:::","\\{[^}]*\\}[\\s\\S]*?:::"])),nw),"m");var iP;const OTe=new RegExp(String.raw(iP||(iP=St(["^s*:::",""],["^\\s*:::",""])),nw),"m");var lP;const LTe=new RegExp(String.raw(lP||(lP=St(["^s*:::","(?:s|{|$)"],["^\\s*:::","(?:\\s|\\{|$)"])),nw)),DTe=/^\s*:::\s*$/;function FTe(t){const e=BTe(t);return RTe.test(e)?!0:b$.test(e)}function oat(t){return OTe.test(t)?!0:b$.test(t)}function aat(t){var i,l,c;const e=t.split("\n"),s=[],n=[];let o=null,a=null;for(const u of e){if(a){if(DTe.test(u)){s.push(...a),a=null;continue}a.push(u);continue}if(o){const m=(i=o.nested[o.nested.length-1])!=null?i:null;if((m==null?void 0:m.kind)==="code"){s.push(u);const g=_m(u);g&&g.info.trim().length===0&&g.marker===m.marker&&g.fence.length===m.length&&o.nested.pop();continue}const p=_m(u);if(p){const g=p.info.trimStart();if((m==null?void 0:m.kind)==="writing"&&p.info.trim().length===0&&p.marker===m.marker&&p.fence.length===m.length){o.nested.pop();continue}if(o.nested.length===0&&p.info.trim().length===0&&p.marker===o.marker&&p.fence.length===o.length){o=null;continue}const _=g.startsWith("{")?"writing":"code";o.nested.push({kind:_,marker:p.marker,length:p.fence.length}),_==="code"&&s.push(u);continue}s.push(u);continue}if(n.length>0){s.push(u);const m=_m(u);m&&m.info.trim().length===0&&m.marker===((l=n[n.length-1])==null?void 0:l.marker)&&m.fence.length===((c=n[n.length-1])==null?void 0:c.length)&&n.pop();continue}if(LTe.test(u)){a=[];continue}const d=_m(u);if(!d){s.push(u);continue}if(d.info.trimStart().startsWith("{")){o={marker:d.marker,length:d.fence.length,nested:[]};continue}n.push({marker:d.marker,length:d.fence.length}),s.push(u)}return a&&s.push(...a),s.join("\n")}function BTe(t){const e=t.split("\n"),s=[];let n=null,o=[];for(const a of e){const i=_m(a);if(i){const l=i.info.trimStart();if(!n){l.startsWith("{")?(s.push(a),n={marker:i.marker,length:i.fence.length,kind:"writing"},o=[]):(n={marker:i.marker,length:i.fence.length,kind:"code"},o=[a]);continue}n.kind==="code"?o.push(a):s.push(a),i.info.trim().length===0&&i.marker===n.marker&&i.fence.length===n.length&&(n.kind==="code"&&(o=[]),n=null);continue}if(!n){s.push(a);continue}if(n.kind==="writing"){s.push(a);continue}o.push(a)}return(n==null?void 0:n.kind)==="code"&&s.push(...o),s.join("\n")}function _m(t){const e=t.match(/^\s*/),s=e?e[0]:"",n=t.slice(s.length),o=n.match(PTe);if(!o)return null;const a=o[0].trim(),i=a[0],l=n.slice(a.length).trimStart();return{leadingWhitespace:s,fence:a,marker:i,info:l}}function h4(t,e){const s=[];let n=e;for(;n&&n!==t;){const o=n.parentNode;if(!o)throw new Error("Unable to resolve selection for magic edit.");const a=Array.prototype.indexOf.call(o.childNodes,n);s.unshift(a),n=o}if(n!==t)throw new Error("Unable to resolve selection for magic edit.");return s}function rat(t,e){return{startPath:h4(t,e.startContainer),startOffset:e.startOffset,endPath:h4(t,e.endContainer),endOffset:e.endOffset}}function iat(t,e,s,n=120){const o=Math.max(0,e-n),a=Math.min(t.length,s+n);return{leading:t.slice(o,e),selection:t.slice(e,s),trailing:t.slice(s,a)}}async function lat(t){const e=new TextEncoder,s=await crypto.subtle.digest("SHA-256",e.encode(t));return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}const cat=t=>Ee(t,"3700195277")||!1,uat=()=>{const t=ja();return!!(t!=null&&t.includes(kn.CanvasCodeExecution))||void 0},dat=()=>{const t=ja();return!!(t!=null&&t.includes(kn.CanvasCodeNetworkAccess))||void 0},fat=t=>Ee(t,"2311599525"),mat=t=>Ee(t,"3468624635")||!1,UTe=()=>{const t=G(),e=Ee(t,"3286474446"),s=Pa();return ut()&&e&&!s},pat=(t,e)=>{var p,g;const s=G(),n=ut(),a=!!((p=oe(()=>Cs(Et(s,t))).enabledTools)!=null&&p.includes(Sp.Canvas)),i=Pa(),l=jc(),c=(g=e==null?void 0:e.metadata)==null?void 0:g.b1de6e2_s,u=oo(),d=!!e&&ow(e)===aw.PIMBlock,f=Ee(s,"4223274760"),m=((e==null?void 0:e.content.content_type)===bt.Text||(e==null?void 0:e.content.content_type)===bt.MultimodalText)&&FTe(e==null?void 0:e.content.parts.join("\n"));return n&&f&&!m&&(!i||l)&&a&&!c&&!u&&!d};var jb,_4;function $Te(){if(_4)return jb;_4=1;var t=B_();function e(s){return typeof s=="function"?s:t}return jb=e,jb}var Pb,x4;function HTe(){if(x4)return Pb;x4=1;var t=qJ(),e=$Te(),s=H6(),n=9007199254740991,o=4294967295,a=Math.min;function i(l,c){if(l=s(l),l<1||l>n)return[];var u=o,d=a(l,o);c=e(c),l-=o;for(var f=t(d,c);++u<l;)c(u);return f}return Pb=i,Pb}var GTe=HTe();const VTe=en(GTe);class zTe{constructor({capacity:e,dispose:s}){X(this,"capacity");X(this,"cache");X(this,"dispose");this.capacity=e,this.cache=new Map,this.dispose=s}get(e){if(!this.cache.has(e))return null;const s=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,s),s}set(e,s){if(this.cache.has(e)){this.cache.delete(e),this.cache.set(e,s);return}if(this.cache.size>=this.capacity){const n=this.cache.keys().next().value;n!=null&&this.delete(n)}this.cache.set(e,s)}delete(e){const s=this.cache.get(e);this.cache.delete(e),this.dispose&&this.dispose(s)}}const WTe=ue(Ce,"71a046",20,20,!0),r0=ue(Ce,"1fa93b",20,20,!0),qTe=Object.freeze(Object.defineProperty({__proto__:null,default:r0},Symbol.toStringTag,{value:"Module"})),xi=ue(Ce,"cf3864",20,20),KTe=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"})),YTe=ue(Ce,"efede7",20,20),v$=ue(Ce,"01bab7",20,20),QTe=300,S$=({collapsed:t,setCollapsed:e,children:s})=>{const n=G(),o=xn(n),a=ne(),[i,l]=x.useState(!1);return r.jsxs(gt.div,{className:z("border-token-border-sharp dark:border-token-main-surface-secondary @container relative mb-4","flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border shadow-md contain-inline-size",!o&&"mx-[-16px] sm:mx-[-32px] sm:rounded-[28px]"),initial:!1,animate:{height:t?QTe:"auto"},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>l(!1),children:[t&&r.jsx("button",{type:"button",className:"absolute inset-0 z-10","aria-label":a.formatMessage({id:"iB4l+i",defaultMessage:"Expand full response"}),"aria-expanded":!t,onClick:()=>{e(!1),l(!0)}}),r.jsx("div",{className:z("p-4",!o&&"sm:p-8"),children:r.jsx(Aa,{children:s})}),(t||i)&&r.jsx("span",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-b from-transparent to-[var(--bg-primary)] dark:to-[var(--bg-elevated-secondary)]"})]})},JTe=1e3;function gat({children:t,messages:e,clientThreadId:s}){var d,f;const n=e.find(m=>{var p;return(p=m.metadata)==null?void 0:p.is_async_task_result_message}),o=(d=n==null?void 0:n.metadata)==null?void 0:d.async_task_id,a=bi(m=>o?m.tasks[o]:null),[i,l]=x.useState((f=a==null?void 0:a.collapsed)!=null?f:!1),c=Qe(s,m=>{var p,g;return n&&((p=n.metadata)==null?void 0:p.async_task_id)&&Se.hasContinuedFromAsyncTask(m,n==null?void 0:n.id,(g=n==null?void 0:n.metadata)==null?void 0:g.async_task_id)});if(!n)return null;const u=n.content.content_type==="text"&&n.content.parts.reduce((m,p)=>m+p.length,0)<JTe;return!c||u?r.jsx(r.Fragment,{children:t}):r.jsx("div",{className:"py-2",children:r.jsx(S$,{collapsed:i,setCollapsed:l,children:t})})}const y4=Ne({manage:{id:"manage",defaultMessage:"Manage"},continue:{id:"continue",defaultMessage:"Continue"}});function hat({title:t,description:e,settingsTab:s="general",clientThreadId:n,parentMessageId:o}){const a=G(),i=Et(a,n),l=ne(),[c,u]=x.useState(!1),{openSettings:d}=Lp(),f=()=>{var _;if(c)return;u(!0);const p=Tt(n),g=p?Se.getCurrentNode(p):null;(g?(_=g.message.id)!=null?_:g.id:void 0)===o&&Ao({conversation:i,promptMessage:cn("Yes, please proceed"),eventSource:"mouse",parentMessageId:o})},m=x.useCallback(()=>{const p=Bc();bs()&&p?p.openSettings(s):d()},[d,s]);return r.jsxs("div",{className:"max-w-md rounded-lg border p-4 shadow-sm",children:[r.jsx("h2",{className:"mb-1 font-bold",children:r.jsx(go,{className:"text-base",children:t})}),r.jsx("p",{className:"mb-3 text-sm",children:r.jsx(go,{className:"text-base",children:e})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ke,{className:"text-base",color:"secondary",onClick:m,children:l.formatMessage(y4.manage)}),r.jsx(ke,{className:"text-base",color:"primary",onClick:f,children:l.formatMessage(y4.continue)})]})]})}function ZTe({className:t}){return r.jsxs(r.Fragment,{children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:z(t,"dark:hidden"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"black",fillOpacity:"0.04"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"black",strokeOpacity:"0.16",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8988 4.47241C11.297 4.30205 11.6994 4.7051 11.5287 5.10327L9.85392 9.01147C9.69208 9.3891 9.39072 9.69046 9.0131 9.85229L5.1049 11.5271C4.70673 11.6977 4.30368 11.2954 4.47404 10.8972L6.14982 6.98804C6.31165 6.61062 6.61225 6.31002 6.98966 6.14819L10.8988 4.47241ZM8.00138 7.19995C7.5597 7.20005 7.20167 7.55807 7.20158 7.99976C7.20158 8.44152 7.55964 8.79946 8.00138 8.79956C8.44321 8.79956 8.80119 8.44158 8.80119 7.99976C8.80109 7.55801 8.44315 7.19995 8.00138 7.19995Z",fill:"black",fillOpacity:"0.16"})]}),r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:z(t,"hidden dark:block"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"white",fillOpacity:"0.2"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"white",strokeOpacity:"0.65",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8989 4.47248C11.2971 4.30212 11.6994 4.70517 11.5288 5.10334L9.85399 9.01154C9.69215 9.38917 9.39079 9.69052 9.01317 9.85236L5.10496 11.5272C4.7068 11.6978 4.30375 11.2955 4.47411 10.8973L6.14989 6.98811C6.31171 6.61069 6.61232 6.31009 6.98973 6.14826L10.8989 4.47248ZM8.00145 7.20002C7.55976 7.20012 7.20174 7.55814 7.20164 7.99982C7.20164 8.44159 7.5597 8.79953 8.00145 8.79963C8.44328 8.79963 8.80125 8.44165 8.80125 7.99982C8.80116 7.55808 8.44322 7.20002 8.00145 7.20002Z",fill:"white",fillOpacity:"0.65"})]})]})}function r_({base64:t,title:e,alt:s,className:n}){var o;return t?r.jsx("img",{src:"data:image/png;base64,".concat(t),alt:(o=s!=null?s:e)!=null?o:"",className:n}):r.jsx(ZTe,{className:n})}function _at(t){"use forget";const e=F.c(19),{browserContextMetadata:s,className:n}=t,o=s.sources[0];if(!o)return null;const{url:a,title:i,base64favicon:l}=o;if(!a)return null;let c;e[0]!==i?(c=i==null?void 0:i.trim(),e[0]=i,e[1]=c):c=e[1];const u=c;let d;if(e[2]!==a){let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,e[4]=y):y=e[4],d=a.replace(y,""),e[2]=a,e[3]=d}else d=e[3];const f=d,m=u&&u.length>0?u:f||a;let p;e[5]!==n?(p=z("no-underline",n),e[5]=n,e[6]=p):p=e[6];let g;e[7]!==l||e[8]!==m?(g=r.jsx(r_,{base64:l,title:m,alt:"",className:"h-4 w-4 flex-shrink-0"}),e[7]=l,e[8]=m,e[9]=g):g=e[9];let h;e[10]!==m?(h=r.jsx("span",{className:"truncate select-none",children:m}),e[10]=m,e[11]=h):h=e[11];let _;e[12]!==g||e[13]!==h?(_=r.jsx("div",{className:"user-message-bubble-color relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-3.5 py-1.5",children:r.jsxs("div",{className:"flex min-w-0 cursor-pointer items-center gap-2",children:[g,h]})}),e[12]=g,e[13]=h,e[14]=_):_=e[14];let b;return e[15]!==p||e[16]!==_||e[17]!==a?(b=r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:p,children:_}),e[15]=p,e[16]=_,e[17]=a,e[18]=b):b=e[18],b}const XTe=t=>Qe(t,e=>{var s,n;return(n=(s=e==null?void 0:e.disabledToolIds)==null?void 0:s.includes(Qs.CANMORE))!=null?n:!1}),eEe=(t,e)=>{var d;const s=Qe(t,f=>Se.getLastMessageSystemHints(f).includes(Ka.CANVAS)),n=rw({clientThreadId:t}),o=XTe(t),a=G(),i=IT(a),l=(d=Qo(e))==null?void 0:d.id,c=e.some(f=>{var m,p;return(p=(m=f.metadata)==null?void 0:m.canvas)==null?void 0:p.canvas_opt_in});return{isVisible:!s&&!o&&!i&&!c&&!!l,onClick:async f=>{var _;if(!l)return;f.stopPropagation(),Uk();const m=[Qs.CANMORE];n({sourceEvent:f,nodeId:l,appendMessages:[iw("The user has requested the canvas tool be disabled for this conversation. You should not call the tool again.",{disable_tool_ids:m,exclude_after_next_user_message:!0})]});const p=Tt(t),g=Se.getConversationTurns(p,l).length,h=(_=Se.getParentPromptNode(p,l))==null?void 0:_.message.id;Zc.logEventWithStatsig("Canvas Opt Out Clicked","chatgpt_canvas_opt_out_clicked",{num_turns:String(g),conversation_id:Rt(t),message_id:h}),nt(t,b=>{b.disabledToolIds=m})}}},tEe=({clientThreadId:t,allTurnMessages:e})=>{const{isVisible:s,onClick:n}=eEe(t,e);return s?r.jsx("button",{onClick:n,className:"text-token-text-secondary hover:text-token-text-primary mb-2 w-full",children:r.jsxs("div",{className:"flex items-center rounded-xl",children:[r.jsx(j,{id:"aa5Dyk",defaultMessage:"Answer in chat instead"}),r.jsx(a0,{className:"icon text-token-text-secondary"})]})}):null},dg=t=>{const{closeThreadSidebar:e}=Er();return()=>{t!=="canvas"&&Uk(),t!=="caterpillar"&&t!=="summarizer"&&t!=="searchSources"&&t!=="entity"&&e()}},sEe=(t,e)=>t!=null&&t.textdocId?t.textdocId:(t==null?void 0:t.function)===dn.CreateTextdoc?WT(t.messageId):e!=null?e:void 0,nEe=({toolCall:t,clientThreadId:e,isRequestActive:s})=>{const n=G(),o=ne(),a=$ge(),i=sEe(t,a),l=Hx(i),c=Kp(),u=Hk(i),d=Hge(),f=IT(n),m=Gt(),p=Uge(),g=Gge({textdocId:i,assistantMessageId:t==null?void 0:t.messageId}),h=Jme(()=>{const M=Cs(Et(n,e)).id;Zc.logError("Textdoc missing from conversation",null,{clientThreadId:e,modelId:M,textdocId:i,latestTextdocId:a,toolCallTextdocId:t==null?void 0:t.textdocId,toolCallStatus:t==null?void 0:t.status,toolCallFunction:t==null?void 0:t.function})});x.useEffect(()=>{!s&&(t==null?void 0:t.status)===Ut.COMPLETE&&!p&&!l&&h()},[t,l,s,p,h]);const _=dg("canvas");if(!t)return null;const b=t.status===Ut.REDACTED||!p&&!l&&t.status!==Ut.STREAMING&&t.status!==Ut.WAITING;let y,v,S;if(t.status!==Ut.REDACTED&&t.status!==Ut.FAILED&&!b&&i){const M=!g&&t.status===Ut.COMPLETE;y=()=>{_(),M&&t.versionInt?gc({type:pc.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):pl(i)},v=()=>{_(),M&&t.versionInt?gc({type:pc.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):gc({type:pc.Textdoc,textdocId:i,shouldRunCodeOnOpen:!0})},S=()=>{M&&t.versionInt&&m.prefetchQuery(NU(i,t.versionInt))}}const C=oEe(t,l);if(t.function===dn.CreateTextdoc&&!(f&&(!g||c))){if(t.status===Ut.STREAMING||t.status===Ut.WAITING||t.status===Ut.COMPLETE){const N=p===!0&&(t.status===Ut.STREAMING||t.status===Ut.WAITING);return r.jsx(F2,{textdocId:i,name:C,clientThreadId:e,tag:t.type,icon:Wu(t.type,!1),iconSelected:Wu(t.type,!0),isCanvasOpen:c,isInlinePreview:g,isFetching:N,isFocused:u,isStreaming:t.status===Ut.STREAMING,onClick:y,onPreview:v})}let M;switch(t.status){case Ut.FAILED:M=o.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case Ut.CANCELED:M=o.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case Ut.REDACTED:M=r.jsx(It,{align:"start",label:o.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:o.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return r.jsx(b4,{children:M})}const w=b||t.status===Ut.REDACTED,k=f?w?null:C:d&&!w?C:null,E=r.jsxs(b4,{onClick:y,onMouseOver:S,isStreaming:t.status===Ut.STREAMING,children:[f&&r.jsx(Eo,{}),t.function===dn.CommentTextdoc?rEe(o,t,k):t.function===dn.CreateTextdoc?k!=null?k:o.formatMessage({id:"/402F4",defaultMessage:"New document"}):aEe(o,t,k)]});return g&&!c&&!b&&i?r.jsx(F2,{textdocId:i,clientThreadId:e,name:C,tag:l==null?void 0:l.type,icon:Wu(l==null?void 0:l.type,!1),iconSelected:Wu(l==null?void 0:l.type,!0),isCanvasOpen:c,isFetching:!1,isFocused:u,isInlinePreview:!0,isStreaming:t.status===Ut.STREAMING,onPreview:v,onClick:i!=null?()=>{_(),pl(i)}:void 0}):E};function oEe(t,e){return e!=null&&e.title?e.title:t.function===dn.CreateTextdoc&&t.title?f$(t.title):null}const b4=({isStreaming:t=!1,onClick:e,onMouseOver:s,children:n})=>r.jsx("button",{disabled:!e,className:z(t&&"loading-shimmer","text-token-text-secondary flex min-h-5 w-fit flex-row items-center gap-1.5 pt-[3px] text-start select-none",e&&"hover:text-token-text-primary"),onClick:e,onMouseOver:s,children:n}),C$=9;function aEe(t,e,s){var o;if(e.status===Ut.STREAMING)return s?t.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(e.status===Ut.FAILED)return s?t.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(e.status===Ut.CANCELED)return s?t.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const n=(o=e.updates)==null?void 0:o.length;return e.status===Ut.REDACTED||!n||n>C$?s?t.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):s?t.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:n,documentTitle:s}):t.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:n})}function rEe(t,e,s){var o;if(e.status===Ut.STREAMING)return s?t.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(e.status===Ut.FAILED)return s?t.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(e.status===Ut.CANCELED)return s?t.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const n=(o=e.comments)==null?void 0:o.length;return e.status===Ut.REDACTED||!n||n>C$?s?t.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:s}):t.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):s?t.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:n,documentTitle:s}):t.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:n})}const xat=({messages:t,isRequestActive:e,isFinalTurn:s,allTurnMessages:n,clientThreadId:o,isUserTurn:a=!1})=>{const i=x.useMemo(()=>{const c=KT(n);if(!c)return null;const u=new Set(t.map(d=>d.id));return c.filter(([d])=>u.has(d.id))},[n,t]),l=x.useMemo(()=>i?i.map(([c,u])=>h$(e,c,u)).filter(Boolean):[],[i,e]);return l.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col gap-2 [&:not(:first-child)]:mt-2",children:l.map(c=>r.jsx(nEe,{toolCall:c,clientThreadId:o,isRequestActive:e},c.messageId))}),r.jsx(HU,{featureType:An.CANVAS_SUPPORTED,isUserTurn:a,clientThreadId:o}),s&&r.jsx(tEe,{clientThreadId:o,allTurnMessages:n})]})};function iEe(t,e,s){const n=bi(l=>!!(t&&l.tasks[t])),o=dg("caterpillar"),a=Qe(s,l=>Se.findNode(l,c=>{var u,d,f;return((u=c.message.metadata)==null?void 0:u.async_task_id)===t&&(((d=c.message.metadata)==null?void 0:d.b1de6e2_rm)===!0||((f=c.message.metadata)==null?void 0:f.is_async_task_result_message)===!0)})!=null),{clearSystemHintModeTrigger:i}=La();x.useEffect(()=>{var p;if(n||!t||!e)return;const{async_task_created_at:l,async_task_prompt:c,async_task_title:u,async_task_original_message_id:d}=(p=e.metadata)!=null?p:{},f=Rt(s),m={originalConversationId:f!=null?f:s,taskId:t,title:u!=null?u:"",prompt:c!=null?c:"",createdAt:l!=null?l:"",updatedAt:l!=null?l:"",status:Is.UNDETERMINED,originalConversationUserMessageId:d};Bn.setTask(t,m),i(Ye.Research)},[n,t,e,s,o,i,a])}const lEe=ue(vr,"409a38",24,24),cEe=ue(vr,"cb060c",24,24),uEe=ue(Ce,"ebc49a",20,20),dEe=ue(Ce,"5d7f10",24,24),w$=ue(Ce,"ac37b7",20,20),fEe={pdf:cEe,sheet:g1,excel:Y6,doc:Eo,audio:w$,video:uEe,image:dEe,csv:g1,word:K6,forms:lEe,slides:JC,powerpoint:q6,other:ea};function QT(t){var e;return(e=fEe[t])!=null?e:ea}const mEe=({children:t,iconType:e})=>{const s=QT(e);return r.jsxs("div",{className:"flex items-start gap-2 text-start text-wrap",children:[r.jsx("div",{className:"mt-[1px] inline-flex h-5 w-5 shrink-0 items-center justify-end gap-2.5 pt-[3px]",children:r.jsx(s,{className:"text-token-text-primary relative h-5 w-5"})}),t]})},yat=({row:t})=>r.jsx(mEe,{iconType:t.iconType,children:r.jsx("div",{className:"text-token-text-primary flex-1 truncate text-base",children:t.rowText})});function pEe(){return dt({queryKey:["clientStrings"],queryFn:()=>de.safeGet("/client/strings"),staleTime:1/0,enabled:ut()})}const k$=ue(ws,"03f099",24,24);function T$(t,e,s,n){"use forget";const o=F.c(7),a=e===void 0?"small":e,{platformConnectors:i}=_p(!1,$s.DEEP_RESEARCH);let l;e:try{let d;if(n&&(d=KJ[n.toLowerCase()]),!d){l=null;break e}const f=us[d];if(!f){l=null;break e}let m;o[0]!==f||o[1]!==i?(m=i.get(f),o[0]=f,o[1]=i,o[2]=m):m=o[2];const p=m;if(!p){l=null;break e}l=p}catch(d){l=null}const c=l;let u;return o[3]!==s||o[4]!==c||o[5]!==a?(u=c?r.jsx(Kc,{connector:c,size:a,className:s}):null,o[3]=s,o[4]=c,o[5]=a,o[6]=u):u=o[6],u}function gEe({url:t,size:e="small",className:s,fallback:n,connectorSource:o}){const a=T$(t,e,s,o);return a!=null?a:n}function bat(t,e=0){if(!t)return!1;const s=t.getBoundingClientRect();return s.top+e>=0&&s.left+e>=0&&s.bottom-e<=(window.innerHeight||document.documentElement.clientHeight)&&s.right-e<=(window.innerWidth||document.documentElement.clientWidth)}function E$(){var o,a,i,l,c,u,d;const t=ne(),{data:e}=pEe(),s=e==null?void 0:e.caterpillar_status_message_texts,n={cancelledMessage:t.formatMessage({id:"ZVkPyf",defaultMessage:"Task cancelled"}),failureMessage:t.formatMessage({id:"3BZzpX",defaultMessage:"Something went wrong"}),completedMessage:t.formatMessage({id:"nZ8w6W",defaultMessage:"Completed in"}),failureBannerContentMessage:t.formatMessage({id:"9peWdy",defaultMessage:"There was an error"}),waitingInQueueMessage:t.formatMessage({id:"k4vqxH",defaultMessage:"Your request is queued up. It will be completed shortly."}),startingMessage:t.formatMessage({id:"+jIjI+",defaultMessage:"Starting Task"}),caterpillarNoneSelectedMessage:t.formatMessage({id:"cLZOtM",defaultMessage:"Choose at least one"})};return s?{cancelledMessage:(o=s.cancelled_message)!=null?o:n.cancelledMessage,failureMessage:(a=s.failure_message)!=null?a:n.failureMessage,completedMessage:(i=s.completed_message)!=null?i:n.completedMessage,failureBannerContentMessage:(l=s.failure_banner_content_message)!=null?l:n.failureBannerContentMessage,waitingInQueueMessage:(c=s.waiting_in_queue_message)!=null?c:n.waitingInQueueMessage,startingMessage:(u=s.starting_message)!=null?u:n.startingMessage,caterpillarNoneSelectedMessage:(d=s.none_selected_dr_message)!=null?d:n.caterpillarNoneSelectedMessage}:n}function M$(t){const e=new Map;return ox(t).forEach(n=>{if(n.type==="website")try{const o=r.jsx(gEe,{url:n.url,size:"xsmall",className:"icon-sm",fallback:r.jsx(Kn,{url:n.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(k$,{className:"icon-sm text-token-text-quaternary"})})}),a=new URL(n.url).hostname;if(e.has(a)){const i=e.get(a);i&&(i.count+=1)}else e.set(a,{url:n.url,count:1,icon:o})}catch(o){}else if(!e.has(n.name)){const o=QT(n.fileType);e.set(n.name,{url:n.name,count:1,icon:r.jsx(o,{className:"text-token-text-primary relative h-4 w-4"})})}}),Array.from(e.values())}function hEe(t){const e=t.map(s=>s.type==="websiteOpen"?{url:s.url,type:"website"}:s.type==="fileOpen"&&s.fileName?{name:s.fileName,type:"file",fileType:s.iconType}:null);return M$(e)}function _Ee(t){return t.reduce((e,s)=>{var n,o;if(s.type==="search"){const a=(o=(n=s.urls)==null?void 0:n.length)!=null?o:0;return e+a}return e},0)}function xEe(t){var n;const e=(n=t.metadata)==null?void 0:n.content_references;if(!e)return[];const s=e.map(o=>o.type==="webpage_extended"?o.icon_type?{name:o.title,type:"file",fileType:o.icon_type}:{url:o.url,type:"website"}:null);return M$(s)}function vat(t){var e;return{type:Q6,groups:(e=t==null?void 0:t.filter(s=>s.type==="summary").map(s=>{var n;return{type:s.message?(n=YJ(s.message))!=null?n:ei.Text:ei.Text,messages:s.message?[s.message]:[]}}))!=null?e:[]}}const N$=ue(ws,"1f1450",24,24),A$=ue(ws,"dfff97",24,24),I$=ue(ws,"ea4e71",24,24),j$=ue(ws,"78f6aa",24,24),P$=ue(ws,"f616fd",24,24),R$=ue(ws,"de4618",24,24),O$=ue(ws,"becb12",24,24),L$=ue(ws,"9e4e62",24,24),D$=ue(ws,"e05e3f",24,24),F$=ue(ws,"69efb8",24,24),B$=ue(ws,"05b551",24,24),U$=ue(ws,"117e74",24,24),$$=ue(ws,"538bdf",24,24);function yEe({url:t,className:e}){switch(new URL(t).pathname.split(".").pop()){case"pdf":return r.jsx(D$,{className:e});case"gif":return r.jsx(A$,{className:e});case"jpg":case"jpeg":return r.jsx(I$,{className:e});case"png":return r.jsx(F$,{className:e});case"webp":return r.jsx($$,{className:e});case"mp3":return r.jsx(R$,{className:e});case"m4a":return r.jsx(j$,{className:e});case"ogg":return r.jsx(L$,{className:e});case"wav":return r.jsx(U$,{className:e});case"mp4":return r.jsx(O$,{className:e});case"mov":return r.jsx(P$,{className:e});case"zip":return r.jsx(PT,{className:e});case"rar":return r.jsx(B$,{className:e});case"css":return r.jsx(N$,{className:e});default:return null}}function bEe({searchResult:t,className:e}){switch(t.content_type){case"application/pdf":return r.jsx(D$,{className:e});case"image/gif":return r.jsx(A$,{className:e});case"image/jpeg":return r.jsx(I$,{className:e});case"image/png":return r.jsx(F$,{className:e});case"image/webp":return r.jsx($$,{className:e});case"audio/mpeg":return r.jsx(R$,{className:e});case"audio/m4a":return r.jsx(j$,{className:e});case"audio/ogg":return r.jsx(L$,{className:e});case"audio/wav":return r.jsx(U$,{className:e});case"video/mp4":return r.jsx(O$,{className:e});case"video/quicktime":return r.jsx(P$,{className:e});case"application/zip":return r.jsx(PT,{className:e});case"application/x-rar-compressed":return r.jsx(B$,{className:e});case"text/css":return r.jsx(N$,{className:e})}return r.jsx(yEe,{url:t.url,className:e})}function JT(t,e="short"){try{const s=new URL(t).hostname.replace("www.","");return e==="hostname"?s:s.replace(/\.[^.]*$/,"")}catch(s){return t}}function vEe(t){var e;if(t.startsWith("file://"))return QT((e=t.split(".").pop())!=null?e:"other")}const H$=({item:t})=>{const e=t.attribution,s=T$(t.url,"small","relative",e!=null?e:void 0);if(s)return s;const n=vEe(t.url);return n?r.jsx(n,{className:"text-token-text-primary relative h-4 w-4"}):r.jsx(Kn,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(k$,{className:"icon-sm text-token-text-quaternary"})})};function SEe({item:t}){var o;const e=t.attribution,s=e!=null?e:JT(t.url,"short"),n=a=>"ref_id"in a&&"content_type"in a;return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(H$,{item:t}),s,n(t)&&r.jsx(bEe,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),r.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:t.title}),((o=t.pub_date)!=null?o:t.snippet)&&r.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&r.jsx(AB,{date:t.pub_date}),t.pub_date&&t.snippet&&"  ",t.snippet]})]})}function CEe(t,e=20){if(t.length<=e)return{attribution:t,wasTruncated:!1};const s="...",n=e-s.length,o=Math.floor(n/2),a=n-o;return{attribution:t.substring(0,o)+s+t.substring(t.length-a),wasTruncated:!0}}function wEe({citation:t,showCounts:e}){const s=JT(t.url,"short"),{attribution:n,wasTruncated:o}=CEe(s);return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group hover:bg-token-main-surface-secondary flex items-center gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",title:o?s:void 0,children:[t.icon,n]}),e&&t.count>1&&r.jsx("div",{className:"flex h-4 items-center justify-end ps-1",children:r.jsx("div",{className:"bg-token-main-surface-tertiary group-hover:bg-token-main-surface-primary flex h-4 min-w-4 items-center justify-center rounded-full text-[8px]",children:t.count})})]})}function kEe({item:t}){const e=t.url.split("#:~:text=")[0];return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(H$,{item:t}),r.jsx("p",{className:"text-normal truncate text-base font-semibold",children:t.title})]}),r.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:e})]})}function TEe({taskIsPending:t,finalMessage:e,sources:s,caterpillarHeaderRef:n,showCounts:o=!0,citationView:a="normal"}){var l,c;const i=y6((c=(l=e==null?void 0:e.metadata)==null?void 0:l.content_references)==null?void 0:c.filter(u=>u.type==="webpage_extended"),"matched_text");return r.jsxs("div",{children:[r.jsx("div",{ref:n},"task-header"),r.jsxs("div",{className:"flex flex-col gap-4",children:[i.length>0&&r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-base font-medium",children:r.jsx(j,{id:"cc9nL7",defaultMessage:"Citations"})}),r.jsx("div",{className:"ms-[-12px] flex flex-col gap-1",children:i==null?void 0:i.map((u,d)=>a==="condensed"?r.jsx(kEe,{item:u},"citation-".concat(d,"-").concat(u.matched_text)):r.jsx(SEe,{item:u},"citation-".concat(d,"-").concat(u.matched_text)))})]}),r.jsxs("div",{className:"flex flex-col gap-2.5",children:[r.jsx("div",{className:"text-base font-medium",children:t?r.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:r.jsx(j,{id:"Wo2ed3",defaultMessage:"Compiling sources"})}):r.jsx(j,{id:"h6ereF",defaultMessage:"All Sources"})}),r.jsx("div",{className:"ms-[-12px] flex flex-wrap",children:s==null?void 0:s.map((u,d)=>r.jsx(wEe,{citation:u,showCounts:o},"source-".concat(d,"-").concat(u.url)))})]})]})]})}const EEe=(t,e)=>e?!1:Ee(t,"3576660381"),MEe=(t,e)=>{if(!t)return[];const s=Se.getConversationTurns(t);return e<0||e>=s.length?[]:Se.getConversationTurnAtIndex(t,e).messages.filter(o=>{var a;return((a=o.metadata)==null?void 0:a.b47u8ra0)===!0})},NEe=5;function AEe(t){const e=Af(t);if(e)return e.type;try{return new URL(t).hostname.replace(/^www\./,"")}catch(s){return t}}function IEe(t){const e=new Map;return t.forEach(s=>e.set(AEe(s),s)),Array.from(e.values())}function G$(t){"use forget";const e=F.c(14),{urls:s,max:n,itemClass:o,iconClass:a,faviconClass:i}=t;let l,c;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==n||e[4]!==s){const d=IEe(s);l="flex flex-row-reverse";let f;e[7]!==i||e[8]!==a||e[9]!==o?(f=(m,p)=>{var _;const g=Af(m),h=(_=g==null?void 0:g.Icon)!=null?_:null;return r.jsx("div",{className:z(o),children:h?r.jsx(h,{className:z("icon-sm",a),alt:g==null?void 0:g.type}):r.jsx(Kn,{url:m,size:32,minSize:16,className:z("icon-sm",i),"aria-label":"",showLoadingAnimation:!0,fallback:r.jsx(ea,{className:"icon-sm"})})},p)},e[7]=i,e[8]=a,e[9]=o,e[10]=f):f=e[10],c=d.slice(0,n).reverse().map(f),e[0]=i,e[1]=a,e[2]=o,e[3]=n,e[4]=s,e[5]=l,e[6]=c}else l=e[5],c=e[6];let u;return e[11]!==l||e[12]!==c?(u=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=u):u=e[13],u}function V$({sourcesUrls:t,onClick:e,className:s}){return r.jsxs("button",{className:z("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex h-[38px] w-fit items-center gap-1.5 rounded-3xl border py-2","ps-3 pe-3",s),onClick:e,children:[t.length>0&&r.jsx(G$,{urls:t,max:NEe,itemClass:z("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden rounded-full","-ms-1 first:me-0","border-2","group-hover/footnote:border-token-main-surface-secondary","relative")}),r.jsx("div",{className:"text-token-text-secondary flex items-center text-xs font-semibold",children:r.jsx(j,{id:"/48IOP",defaultMessage:"Sources"})})]})}function jEe(t,e,s){const n=G(),o=Qe(t,d=>{const f=MEe(d,e);return[s,...f]}),a=x.useMemo(()=>o.flatMap(d=>rx(d)),[o]),i=a.find(d=>d.type==="sources_footnote"),l=oe(()=>Cs(Et(n,t))),c=mp(l,n),u=i!=null&&i.sources?i==null?void 0:i.sources.map(({url:d})=>d).filter(d=>!!d):c?a.map(d=>{var f;return(f=d.safe_urls)!=null?f:[]}).flat().filter(d=>!!d):[];return{hasSources:(!!i||c)&&u.length>0,sourcesUrls:u}}function Sat({clientThreadId:t,message:e,turnIndex:s,isAgentTurn:n}){const o=e==null?void 0:e.id,{toggleThreadSidebar:a}=Er(),i=G(),l=EEe(i,n),[c,u]=Qe(t,_=>{var y;if(!((y=e==null?void 0:e.metadata)!=null&&y.async_task_id))return[-1,-1];const b=Se.getConversationTurns(_);for(let v=0;v<b.length;v++){const S=b[v];for(let C=0;C<S.messageGroups.length;C++){const w=S.messageGroups[C];if(w.type===ei.a8km123&&w.messages.some(k=>{var E,M;return((E=k==null?void 0:k.metadata)==null?void 0:E.async_task_id)===((M=e==null?void 0:e.metadata)==null?void 0:M.async_task_id)}))return[v,C]}}return[-1,-1]}),d=Qe(t,_=>{var b;return s>=0?(b=Se.getConversationTurnAtIndex(_,s))==null?void 0:b.messageGroups.findIndex(y=>y.type===Q6||y.type===ei.a8km123):-1}),f=c>=0?c:s,m=u>=0?u:d,p=x.useCallback(()=>{o&&(l&&m>=0?a({type:"cot",turnIndex:f,reasoningGroupIndex:m,scrollTo:"sources"}):a({type:"searchSources",scrollToHeader:HT.Citations,turnIndex:s,messageId:o}))},[o,a,s,l,m,f]),{hasSources:g,sourcesUrls:h}=jEe(t,s,e);return g?r.jsx(REe,{sourcesUrls:h,onClick:p,className:"hover:bg-token-bg-tertiary rounded-3xl"}):null}const PEe=3;function REe({sourcesUrls:t,onClick:e,className:s}){const o=ne().formatMessage({id:"/48IOP",defaultMessage:"Sources"});return r.jsxs("button",{className:z("group/footnote bg-token-bg-primary flex w-fit items-center gap-1.5 px-3 py-1.5",s),onClick:e,"aria-label":o,children:[t.length>0?r.jsx(G$,{urls:t,max:PEe,itemClass:z("border-token-bg-primary bg-token-bg-primary flex items-center overflow-clip rounded-full","-ms-1.5 first:me-0","border-2","group-hover/footnote:border-token-bg-tertiary","relative"),iconClass:"rounded-full shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05)]",faviconClass:"rounded-full border border-token-border-light border-[0.5px]"}):r.jsx(kr,{className:"icon-sm text-token-text-secondary"}),r.jsx("div",{className:"text-token-text-secondary mt-[-1px] text-[13px] font-medium",children:o})]})}const OEe=({title:t})=>r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-2",children:[r.jsx(ul,{className:"h-4 w-4"}),r.jsx("p",{children:t})]});function Cat({messages:t,children:e,clientThreadId:s,renderingView:n}){var S,C,w,k;const o=G(),a=t.find(E=>{var M;return(M=E.metadata)==null?void 0:M.b1de6e2_rm}),i=(S=a==null?void 0:a.metadata)==null?void 0:S.async_task_id,l=bi(E=>i?E.tasks[i]:null),[c,u]=x.useState((C=l==null?void 0:l.collapsed)!=null?C:!1),{toggleThreadSidebar:d}=Er(),f=dg("caterpillar"),m=x.useRef(null),p=xp(),g=kf(o),h=Qe(s,E=>{var A,I;if(!c||!l)return!1;const M=Se.getCurrentNode(E);let N=Se.getNode(E,M.parentId);return N.message.author.role==="developer"&&(N=Se.getNode(E,N.parentId)),!(((A=N.message.metadata)==null?void 0:A.async_task_id)===i&&((I=N.message.metadata)!=null&&I.async_task_created_at))});x.useEffect(()=>{!h&&c&&u(h)},[h,c]);const _=x.useCallback(E=>{i&&d({type:"caterpillar",caterpillarId:i,initialTab:E},f)},[d,i,f]),{uniqueSources:b}=x.useMemo(()=>a?{uniqueSources:xEe(a)}:{uniqueSources:[],totalSources:0},[a]),y=Cp();if(!a)return null;const v=({taskId:E})=>p?null:r.jsx("div",{className:"hover:bg-token-main-surface-secondary cursor-pointer rounded-md p-2",children:r.jsx(Xc,{className:"icon text-token-text-tertiary",onClick:()=>{Bn.setResearchShareIntent({messages:t.map(M=>M),threadId:s,taskId:E})}})});return n==="chat"?r.jsxs(S$,{collapsed:c,setCollapsed:u,children:[r.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[!g&&((w=a.metadata)==null?void 0:w.async_task_title)&&r.jsx(OEe,{title:(k=a.metadata)==null?void 0:k.async_task_title}),i&&r.jsx(v,{taskId:i})]}),e,r.jsxs("div",{className:"flex items-center gap-2 py-2",children:[r.jsx(V$,{sourcesUrls:b.map(E=>E.url),onClick:()=>{y&&_("sources")},className:z("mt-0! mb-0!",y&&"cursor-default")}),i&&r.jsx(v,{taskId:i})]})]}):r.jsxs("div",{className:"flex flex-col gap-4",children:[e,r.jsx("div",{className:"border-token-border-sharp flex flex-col gap-2 border-b"}),r.jsx(TEe,{caterpillarHeaderRef:m,taskIsPending:!1,finalMessage:a,showCounts:!1,sources:b,citationView:"condensed"})]})}function wat({className:t}){return r.jsx(z$,{className:z("w-full",t)})}function z$({className:t}){return r.jsx("div",{className:z("loading-results-shimmer rounded-md",t),children:""})}function LEe({percentage:t,height:e=10,className:s,backgroundClassName:n="bg-gray-400",barClassName:o="bg-current",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){return r.jsxs("div",{className:z("relative w-full",s),style:{height:e},children:[r.jsx("div",{className:z("absolute start-0 top-0 h-full w-full",n)}),r.jsx("div",{className:z("absolute start-0 top-0 h-full transition-[width]",o),style:{width:"".concat(Math.max(Math.min(t,100),1),"%"),transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}function DEe({taskId:t,intl:e,toaster:s}){return ds({mutationFn:async()=>{if(t)return await J6.cancelTask({taskId:t})},onSuccess:()=>{t&&(Bn.setTaskStatus(t,Is.CANCELLED),Bn.abortTaskStream(t))},onError:()=>{s.danger(e.formatMessage({id:"4Hl5/B",defaultMessage:"An error occurred while cancelling the task."}),{loggingTitle:"An error occurred while cancelling the task.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task cancellation throws an error"})}})}function kat({taskId:t,intl:e,toaster:s}){return ds({mutationFn:async()=>{if(!t)throw new Error("Cannot answer now without a task id");return await J6.answerNowTask({taskId:t})},onMutate:()=>{var o;if(!t)return;const n=(o=Um.getTask(t))==null?void 0:o.status;return Bn.setTaskStatus(t,Is.SKIPPING),{previousStatus:n}},onSuccess:()=>{},onError:(n,o,a)=>{t&&(a!=null&&a.previousStatus)&&Bn.setTaskStatus(t,a.previousStatus),s.danger(e.formatMessage({id:"c0xDWm",defaultMessage:"An error occurred while skipping thinking."}),{loggingTitle:"An error occurred while skipping thinking.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task answer now throws an error"})}})}const FEe=({taskId:t,clientThreadId:e,onClose:s})=>{const n=ne(),o=Kt(),a=Z6(c=>c.bySystemHint(Ye.Research)),i=DEe({taskId:t,intl:n,toaster:o}),l=x.useCallback(()=>{i.mutate(),so(e,null),B.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:Rt(e),currentLeafId:Se.getCurrentNode(Tt(e)).message.id,eventSource:"mouse"}),s()},[i,e,s]);return r.jsx(Pc,{open:!0,onOpenChange:c=>{c||s()},children:r.jsxs(Rc,{children:[r.jsx(cp,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0 bg-black/25"}),r.jsxs(Zd,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",children:[r.jsx(nC,{className:"p-4 pb-2 text-lg font-semibold md:p-6 md:pb-2",children:r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskTitle",defaultMessage:"Are you sure you want to stop researching?"})}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 pt-0 md:p-6 md:pt-0",children:[r.jsx(oC,{className:"text-base",children:r.jsx("span",{className:"mb-2",children:a?r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskDescription",defaultMessage:"Stopping now will still count as one deep research request. You have {remaining} more available until {resetDate}.",values:{remaining:a.remaining,resetDate:new Date(a.reset_after).toLocaleDateString(n.locale,{month:"long",day:"numeric"})}}):r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskDescriptionNoRateLimit",defaultMessage:"Stopping now will still count as one deep research request."})})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(ke,{color:"secondary",onClick:s,children:r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskCancelButton",defaultMessage:"Don't stop"})}),r.jsx(ke,{color:"danger",className:"w-20",onClick:l,children:i.isPending?r.jsx(Wn,{}):r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskButton",defaultMessage:"Stop"})})]})]})]})]})})},Rb={div:t=>{const o=t,{node:e,children:s}=o,n=De(o,["node","children"]);return r.jsx("div",U(T({},n),{className:"text-red-500",children:s}))},p:t=>{const o=t,{node:e,children:s}=o,n=De(o,["node","children"]);return r.jsx("p",U(T({},n),{className:"text-token-text-primary text-start leading-6",children:s}))},a:t=>{const o=t,{node:e,children:s}=o,n=De(o,["node","children"]);return r.jsx("a",U(T({},n),{className:"font-sm text-token-text-primary! leading-6",children:s}))}},BEe=1e3*60*2,UEe=30;function W$({taskId:t,clientThreadId:e,onClick:s,statusMessage:n,showSources:o,includeMargin:a,sources:i,progressBar:l}){const c=Cp(),[u,d]=x.useState(!1);return r.jsxs(r.Fragment,{children:[t&&u&&r.jsx(FEe,{taskId:t,clientThreadId:e,onClose:()=>d(!1)}),r.jsxs("div",{className:"relative flex w-4/5 max-w-[416px]",children:[t&&r.jsx("button",{onClick:()=>d(!0),disabled:!t,className:"hover:bg-token-bg-elevated-secondary bg-token-bg-elevated-primary absolute end-4 bottom-4 flex items-center justify-center rounded-full border border-black/10 p-0.5 dark:border-white/10",children:r.jsx(VT,{className:"icon-lg"})}),r.jsx("button",{onClick:()=>c&&s(),className:z("bg-token-main-surface-primary mt-4 flex w-full items-start justify-start gap-[18px] rounded-2xl border border-black/10 px-5 py-4 shadow-sm dark:border-white/10",c?"hover:bg-token-main-surface-secondary cursor-pointer":"cursor-auto"),children:r.jsxs("div",{className:"flex w-full flex-col gap-3",children:[r.jsxs("div",{className:z("flex flex-col items-start justify-start self-stretch md:h-7 md:flex-row md:items-center md:justify-between",o?"h-12":"h-6"),children:[r.jsx("div",{className:z("font-sm text-token-text-primary w-full flex-1 truncate text-start leading-7 md:w-0",a&&"me-[30px]"),children:n}),o&&i]}),r.jsx("div",{className:z("flex w-full items-center justify-start gap-4 self-stretch pb-2",t&&"pe-10"),children:l})]})})]})]})}function ZT({taskId:t,clientThreadId:e,toggleSidebar:s,openSidebar:n,startTime:o,progressBar:a}){const i=G(),l=ne(),[c,u]=x.useState(!1),d=E$();x.useEffect(()=>{if(!o)return;const g=Date.now()-o,h=BEe-g;if(h>0){const _=setTimeout(()=>{u(!0),n()},h);return()=>clearTimeout(_)}else u(!0),n()},[o,n]);const f=kf(i),m=bi(g=>t?g.tasks[t]:null),p=f&&m&&$C(m);return x.useEffect(()=>{p&&n()},[p,n]),a||(a=r.jsx(z$,{className:"h-2 w-full"})),r.jsx(W$,{taskId:t,clientThreadId:e,onClick:s,statusMessage:c?l.formatMessage({id:"T2SbxC",defaultMessage:"Waiting"}):r.jsx("div",{className:"text-token-text-primary text-sm font-medium text-pretty",children:d.startingMessage}),progressBar:a,showSources:!1})}function $Ee(t,e,s){var a;const n=t.formatMessage({id:"Bs+OcV",defaultMessage:"Thinking"});if(e.length<2)return(a=s==null?void 0:s.initial)!=null?a:n;const o=e[e.length-2];return o.type==="summary"?o.title:o.type==="search"?o.query:(o==null?void 0:o.type)==="websiteOpen"?r.jsx(go,{componentOverrides:Rb,children:o.activeRowText}):o.type==="fileOpen"?r.jsx(go,{componentOverrides:Rb,children:o.activeRowText}):o.type==="pythonAnalysis"?r.jsx(go,{componentOverrides:Rb,children:o.analysisSummary}):n}function HEe({task:t,clientThreadId:e,caterpillarRows:s,messageWithTaskMetadata:n,totalSources:o,handleToggleCaterpillarSidebar:a}){var w,k;const i=ne(),l=Cp(),c=$Ee(i,s,(w=n.metadata)==null?void 0:w.async_task_status_messages),u=((k=t==null?void 0:t.expectedDurationMinutes)!=null?k:UEe)*60*1e3,d=G(),f=kf(d),m=Ee(d,"3550239432"),p=t.createdAt?+new Date(t.createdAt):Date.now(),g=R2(p,u),h=n!=null&&n.create_time?n.create_time*1e3:0,_=Math.min(R2(h||Date.now(),u),4),b=m?Math.max(g,_):g;let y;const v=r.jsx("div",{className:"bg-token-main-surface-tertiary flex h-2 shrink grow basis-0 items-start justify-start gap-2.5 overflow-hidden rounded-[10px]",children:r.jsx(LEe,{percentage:b,barClassName:"bg-token-text-primary",backgroundClassName:"bg-token-main-surface-tertiary"})});m&&(y=v),x.useEffect(()=>{f||so(e,{source:Cn.CLIENT,value:Xt.STREAMING})},[e,f]);const{openThreadSidebar:S}=Er();x.useEffect(()=>{s.length===2&&l&&S({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[s.length,S,t.taskId,e,l]);const C=x.useCallback(()=>{S({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[S,t.taskId]);return s.length<=1?r.jsx(ZT,{taskId:t.taskId,clientThreadId:e,toggleSidebar:()=>a("activity"),openSidebar:C,startTime:new Date(t.createdAt).getTime(),progressBar:y}):r.jsx(W$,{taskId:t.taskId,clientThreadId:e,onClick:()=>a("activity"),statusMessage:c,showSources:!0,includeMargin:o>0,sources:o===0?r.jsx("div",{className:"text-token-text-tertiary text-sm text-pretty",children:r.jsx(j,{id:"zfwUjs",defaultMessage:"Looking for sources"})}):r.jsxs("button",{onClick:E=>{E.stopPropagation(),a("sources")},className:z("flex shrink-0 gap-1 text-[13px] leading-[18px] text-[#0285ff]",l?"cursor-pointer hover:text-[#0285ff]/80":"cursor-auto"),children:[r.jsx("div",{className:"relative",children:r.jsx(Ms,{initial:!1,children:r.jsx(gt.span,{initial:{opacity:0,rotateX:-90,translateY:20},animate:{opacity:1,rotateX:0,translateY:0},exit:{opacity:0,rotateX:90,translateY:-20},transition:{duration:.35},className:"absolute start-0 md:end-0",children:o},o)})}),r.jsx("div",{className:z("md:pe-0",o>0&&"ps-2",o>9&&"ps-[14px]",o>99&&"ps-[22px]"),children:o>1?r.jsx(j,{id:"zN+MuO",defaultMessage:" sources"}):r.jsx(j,{id:"dMowmJ",defaultMessage:" source"})})]}),progressBar:v})}function Q2({message:t,handleToggleCaterpillarSidebar:e}){const s=Cp();return r.jsx("div",{className:"flex w-full flex-col gap-6 pt-3 pb-6",children:r.jsx("button",{onClick:()=>s&&e(),className:z("text-token-text-tertiary flex w-full text-start",s?"hover:text-token-text-secondary cursor-pointer":"cursor-auto"),children:t})})}const GEe=()=>!1;function v4({task:t,clientThreadId:e,messageWithTaskMetadata:s,totalSources:n,totalSearches:o,handleToggleCaterpillarSidebar:a}){var p,g,h,_,b,y;const i=t==null?void 0:t.originalConversationId,l=kD(i),c=G(),u=kf(c),d=GEe(),f=Qe(e,v=>B2e(v,t==null?void 0:t.taskId)),{clearSystemHintModeTrigger:m}=La();return x.useEffect(()=>{(t==null?void 0:t.status)===Is.COMPLETED&&!f&&!d&&(u&&d1(c)?nt(i,v=>{as.setShouldRefetchConvoOnFinalize(v,!0)}):l(),m(Ye.Research))},[t==null?void 0:t.status,d,f,l,m,u,c,i]),r.jsx(Q2,{message:r.jsxs(r.Fragment,{children:[(y=(b=(g=(p=s.metadata)==null?void 0:p.async_task_status_messages)==null?void 0:g.completed_with_time)!=null?b:(_=(h=s.metadata)==null?void 0:h.async_task_status_messages)==null?void 0:_.completed_no_time)!=null?y:r.jsx(j,{id:"4d0xZc",defaultMessage:"Completed"}),n===0?r.jsx(j,{id:"VggF2B",defaultMessage:"  0 sources"}):n===1?r.jsx(j,{id:"zkkdKV",defaultMessage:"  1 source"}):r.jsx(j,{id:"qcKt3q",defaultMessage:"  {sourcesCount} sources",values:{sourcesCount:n}}),o>0&&r.jsx(j,{id:"ti+7CY",defaultMessage:"  {searchesCount, plural, one {# search} other {# searches}}",values:{searchesCount:o}})]}),handleToggleCaterpillarSidebar:()=>a("activity")})}function q$({clientThreadId:t}){const e=G(),s=Et(e,t),n=oe(()=>{var i;return((i=Sl(s))==null?void 0:i.value)===Xt.STREAMING}),[o]=Qe(t,i=>[Se.getRequestId(i)]);return Sr(o)||n}function Tat({messages:t,clientThreadId:e}){var m;const s=G(),n=t.find(p=>{var g,h;return((g=p.metadata)==null?void 0:g.b1de6e2_s)&&((h=p.metadata)==null?void 0:h.async_task_id)}),o=(m=n==null?void 0:n.metadata)==null?void 0:m.async_task_id,a=t.find(p=>p.recipient===Qs.START_RESEARCH_TASK),i=kf(s),l=Qe(e,p=>i?U2e(p,a==null?void 0:a.id):$2e(p,a==null?void 0:a.id)),c=q$({clientThreadId:e}),[u,d]=x.useState(c),{clearSystemHintModeTrigger:f}=La();return x.useEffect(()=>{const p=setTimeout(()=>{d(l&&(c||i))},3e3);return()=>clearTimeout(p)},[c,l,i]),x.useEffect(()=>{u&&f(Ye.Research)},[u,f]),!n||!o?u?r.jsx(ZT,{taskId:o,clientThreadId:e,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):null:r.jsx(VEe,{clientThreadId:e,payloadTaskId:o,messageWithTaskMetadata:n})}function VEe({payloadTaskId:t,messageWithTaskMetadata:e,clientThreadId:s}){var m,p,g,h,_,b,y,v;iEe(t,e,s);const n=bi(S=>t?S.tasks[t]:null),o=ne(),a=n==null?void 0:n.status,i=x.useMemo(()=>n!=null&&n.rows?n.rows:[],[n==null?void 0:n.rows]),{toggleThreadSidebar:l}=Er(),{totalSources:c,totalSearches:u}=x.useMemo(()=>{if(!i)return{uniqueSources:[],totalSources:0,totalSearches:0};const S=hEe(i),C=S.reduce((k,E)=>k+E.count,0),w=_Ee(i);return{uniqueSources:S,totalSources:C,totalSearches:w}},[i]),d=dg("caterpillar"),f=x.useCallback(S=>{t&&l({type:"caterpillar",caterpillarId:t,initialTab:S},d)},[l,t,d]);return QJ(t),(p=(m=e.metadata)==null?void 0:m.async_task_status_messages)!=null&&p.completed_with_time?r.jsx(v4,{task:n,clientThreadId:s,messageWithTaskMetadata:e,totalSources:c,totalSearches:u,handleToggleCaterpillarSidebar:f}):!n||!a||a===Is.UNDETERMINED?r.jsx(ZT,{taskId:t,clientThreadId:s,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):n.status===Is.COMPLETED?r.jsx(v4,{task:n,clientThreadId:s,messageWithTaskMetadata:e,totalSources:c,totalSearches:u,handleToggleCaterpillarSidebar:f}):n.status===Is.FAILED?r.jsx(Q2,{message:(_=(h=(g=e.metadata)==null?void 0:g.async_task_status_messages)==null?void 0:h.error)!=null?_:o.formatMessage({id:"at6zk8",defaultMessage:"Failed to think"}),handleToggleCaterpillarSidebar:()=>f("activity")}):n.status===Is.CANCELLED?r.jsx(Q2,{message:(v=(y=(b=e.metadata)==null?void 0:b.async_task_status_messages)==null?void 0:y.cancelled)!=null?v:o.formatMessage({id:"u1rIr5",defaultMessage:"Task Cancelled"}),handleToggleCaterpillarSidebar:()=>f("activity")}):r.jsx(HEe,{task:n,clientThreadId:s,caterpillarRows:i,messageWithTaskMetadata:e,totalSources:c,handleToggleCaterpillarSidebar:f})}var Ob,S4;function zEe(){if(S4)return Ob;S4=1;function t(e){return e==null}return Ob=t,Ob}var WEe=zEe();const qEe=en(WEe);function KEe({formData:t,readOnly:e,schema:s,uiSchema:n,onChange:o}){const a=x.useCallback((c,u)=>{o==null||o(U(T({},t),{[c]:u}))},[t,o]);x.useEffect(()=>{const c={};Object.entries(s.properties).forEach(([u,d])=>{c[u]===void 0&&d.default!==void 0&&("enum"in d?c[u]=[d.default]:c[u]=d.default)}),o(c)},[]);const i=x.useMemo(()=>{const c=Object.fromEntries(n.elements.map(u=>{const d=Qo(u.scope.split("/"));return d?[d,u]:[]}).filter(u=>u.length>0));return Object.entries(s.properties).map(([u,d])=>{const f=c[u];return f?{dataRow:d,uiRow:f,rowKey:u}:null}).filter(u=>!!u).sort((u,d)=>{const f="enum"in u.dataRow,m="enum"in d.dataRow;return f===m?0:f?-1:1})},[s,n]),l=i.filter(c=>"enum"in c.dataRow).length;return r.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:i.map((c,u)=>r.jsx(YEe,{updateFormDataForRow:d=>a(c.rowKey,d),clearAll:()=>a(c.rowKey,void 0),renderRow:c,value:t==null?void 0:t[c.rowKey],readOnly:e,forceFullWidth:l%2===1&&u===l-1},c.rowKey))})}function YEe({updateFormDataForRow:t,clearAll:e,renderRow:s,readOnly:n,value:o,forceFullWidth:a=!1}){const{dataRow:i,uiRow:l,rowKey:c}=s,u=ne(),d=x.useCallback(w=>{o===void 0?t([w]):o.includes(w)?t(o.filter(k=>k!==w)):t([...o,w])},[o,t]),[f,m]=x.useState(!1),[p,g]=x.useState(""),[h,_]=x.useState(!1),[b,y]=x.useState(void 0);x.useEffect(()=>{m(!1),g("")},[h]);const v=x.useCallback(()=>{d(p),m(!1),g(""),b&&y([...b,p])},[p,d,m,g,b]);x.useEffect(()=>{"enum"in i&&i.enum&&y(i.enum)},[i]);const S=x.useMemo(()=>{const w=i.type,k=qEe(o)||o===""||Array.isArray(o)&&o.length===0;if(b){const E=k?u.formatMessage({id:"Dzsmf1",defaultMessage:"Any"}):o.length===1?o[0]:o[0]+" + ".concat(o.length-1);return r.jsxs(J.Root,{open:h,onOpenChange:_,children:[r.jsxs(J.Trigger,{className:"border-token-main-surface-quaternary bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-full justify-between rounded-md border text-start",children:[r.jsx("span",{className:"text-token-text-primary truncate",children:E}),r.jsx(Xp,{className:"icon-sm text-token-text-tertiary"})]}),r.jsx(J.Portal,{children:r.jsxs(J.Content,{size:"medium",children:[r.jsx(J.MultiSelectCheckboxItem,{checked:(o==null?void 0:o.length)===0||o===void 0,onCheckedChange:e,children:r.jsx(j,{id:"Dzsmf1",defaultMessage:"Any"})},"any"),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),b.map(M=>r.jsx(J.MultiSelectCheckboxItem,{checked:o==null?void 0:o.includes(M),onCheckedChange:()=>d(M),children:r.jsx("span",{className:"pe-2",children:M})},M)),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),f?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between pe-5",children:[r.jsx(Wm,{autoFocus:!0,name:"new-option",className:"bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-0 flex-1 grow rounded-md border-none text-start focus-within:ring-0!",value:p,placeholder:u.formatMessage({id:"LhAlwa",defaultMessage:"Add option..."}),ariaLabel:u.formatMessage({id:"XElhCL",defaultMessage:"New option"}),onChange:M=>g(M.target.value),onKeyDown:M=>M.stopPropagation(),onPressEnter:v}),r.jsx("button",{className:"shrink-0 cursor-pointer",onClick:v,children:r.jsx(yR,{className:"icon-sm text-token-text-primary"})})]}):r.jsx("div",{className:"flex px-2",children:r.jsx("button",{className:"bg-token-main-surface-primary hover:bg-token-main-surface-secondary w-full rounded-md border-none p-2 text-start text-sm",onClick:()=>m(!0),children:r.jsx(j,{id:"lMgmto",defaultMessage:"Add Option..."})})})]})})]})}else return w==="string"||w==="integer"?r.jsx(Wm,{ariaLabel:u.formatMessage({id:"M18pon",defaultMessage:"Form row"}),name:c,color:"quaternary",placeholder:l.placeholder,value:o!=null?o:"",type:"text",className:z("border-token-main-surface-quaternary text-token-text-primary",k&&"text-token-text-quaternary"),onChange:E=>t(E.target.value),disabled:n}):null},[i,o,l.placeholder,d,u,c,n,t,e,f,p,h,b,v]);if(!S)return null;const C=a||!b;return r.jsx(QEe,{label:l.label,className:z("col-span-1 flex flex-col justify-between",C&&"sm:col-span-2"),children:S})}function QEe({children:t,label:e,className:s}){return r.jsxs("div",{className:s,children:[r.jsx("p",{className:"mb-1 font-[550]",children:e}),r.jsx("div",{children:t})]})}function JEe(t,e,s){const n=e.elements.length;if(n===0)return;const o=Object.entries(t).reduce((a,[i,l])=>Array.isArray(l)?l.length>0?a+1:a:l!==""?a+1:a,0);B.logEventWithStatsig("dynamic-form-submission","chatgpt_dyanmic_form_submission",U(T({},Fs({clientThreadId:s})),{totalItems:n.toString(),completedItems:o.toString(),ratio:(o/n).toString()}))}function ZEe(t,e){let s="";return e.elements.forEach(n=>{var c;const o=n.scope.split("/").pop(),a=o&&t[o],i=a?Array.isArray(a)?a.join(", "):a:"Any",l=(c=n.label)!=null?c:o;s+="".concat(l,": ").concat(i,"\n")}),s}function Eat({messages:t,clientThreadId:e,isLastMessage:s}){var S;const n=t.find(C=>C.author.role===ot.Assistant),o=t.find(C=>{var w;return(w=C.metadata)==null?void 0:w.json_form}),a=(S=o==null?void 0:o.metadata)==null?void 0:S.json_form,[i,l]=x.useState({}),[c,u]=x.useState(),[d,f]=x.useState(),m=Ko.useStore(),p=zp(e);x.useEffect(()=>{a&&(u(a.json_form_ui),f(a.json_form_data))},[a]);const g=x.useCallback(()=>{if(l({}),c){const C=U(T({},c),{elements:c.elements.filter(w=>w.scope!=="#/properties/AdditionalInfo")});u(C)}d&&(delete d.properties.AdditionalInfo,f(d))},[l,u,f,c,d]),h=x.useCallback(()=>{if(c){const C=U(T({},c),{elements:[...c.elements,{type:"Control",scope:"#/properties/AdditionalInfo",label:"Additional Info",placeholder:"Any other details..."}]});u(C)}if(d){const C=U(T({},d.properties),{AdditionalInfo:{type:"string"}});f(U(T({},d),{properties:C}))}},[u,f,c,d]),_=c==null?void 0:c.elements.some(C=>C.scope.endsWith("#/properties/AdditionalInfo")),b=Qe(e,Se.getCurrentLeafId),y=(o==null?void 0:o.id)!==b;if(!o||!d||!c)return(n==null?void 0:n.status)==="in_progress"&&s?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(qr,{className:"h-[26px] w-full"}),r.jsx(qr,{className:"h-[26px] w-3/4"}),r.jsx(Hse,{})]}):null;if(y)return null;const v=async C=>{const w=m.getActiveSystemHintType(),k=ZEe(i,c);JEe(i,c,e),p({sourceEvent:C,promptMessage:cn(k),completionMetadata:{systemHints:w?[w]:[],conversationMode:{kind:Pt.PrimaryAssistant}}})};return r.jsxs(MO,{children:[r.jsx(XEe,{formData:i,dataSchema:d,uiSchema:c,setData:l,readOnly:y}),r.jsxs("div",{className:"flex w-full justify-between",children:[_?r.jsx("div",{}):r.jsx(ke,{disabled:y,onClick:h,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ke,{disabled:y,onClick:g,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(ke,{disabled:y,onClick:v,children:r.jsx(j,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function XEe({dataSchema:t,uiSchema:e,setData:s,readOnly:n,formData:o}){return r.jsx("div",{children:r.jsx(KEe,{formData:o,readOnly:n,schema:t,uiSchema:e,onChange:a=>s(a)})})}var XT=(t=>(t.Turn="turn",t.ImagesTab="images_tab",t.ProductDetails="product_details",t.SuperWidget="super_widget",t.ImageGroup="image_group",t.DilWidget="dil_widget",t))(XT||{});class fg extends Lc()(()=>({currentImage:void 0})){setCurrentImage(e){this.setState({currentImage:e})}static useCurrentImage(){return this.useState(e=>e.currentImage)}}function e3e(t){"use forget";const e=F.c(8),{clientThreadId:s,children:n}=t,[o]=x.useState(t3e);let a;e[0]!==o?(a=()=>{o.setCurrentImage(void 0)},e[0]=o,e[1]=a):a=e[1];let i;e[2]!==s||e[3]!==o?(i=[s,o],e[2]=s,e[3]=o,e[4]=i):i=e[4],x.useEffect(a,i);let l;return e[5]!==n||e[6]!==o?(l=r.jsx(fg.Provider,{store:o,children:n}),e[5]=n,e[6]=o,e[7]=l):l=e[7],l}function t3e(){return new fg}function s3e(t){if(!t||typeof t!="object")return!1;const e=t;return typeof e.title=="string"&&typeof e.date_str=="string"&&(e.location==null||typeof e.location=="string")}function n3e(t){const{title:e,location:s="",date_str:n}=t,o=new URLSearchParams({action:"TEMPLATE",text:e,location:s,dates:n}),a="https://calendar.google.com/calendar/render?".concat(o.toString());window.open(a,"_blank","noopener,noreferrer")}function o3e({ctx:t,calendarPreferenceFeatureEnabled:e,CalendarPreferenceModal:s}){const n=!!t&&e,[o,a]=x.useState(()=>null),i=x.useCallback(d=>{},[n]),l=x.useCallback(({initialPreference:d}={})=>Promise.resolve(null),[s,o,t,n,i]),c=x.useCallback(async()=>null,[o,n,l]),u=x.useCallback(async d=>{{n3e(d);return}},[c,n]);return x.useMemo(()=>({runAddToCalendarFlow:u}),[u])}const a3e=async(t,{toaster:e})=>{const s=t.value;s!=null&&await Jo(typeof s=="string"?s:String(s),e,void 0,{showSuccessSnackbar:!0})},r3e=async(t,{calendar:e})=>{!e||!p3e(t)||await e.runAddToCalendarFlow(t.item)},i3e=(t,{openEntitySidebar:e})=>{if(!e)return;const s=t.query;typeof s!="string"||!s||e({query:s,category:"ask_sidebar"})},l3e=async(t,{issueNewTurn:e})=>{if(!e)return;const s=t.query;typeof s!="string"||!s||await e(s)},c3e=t=>{if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="bigint"||typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:void 0}},u3e=t=>typeof t.url=="string"&&typeof t.content_url=="string"&&typeof t.thumbnail_url=="string"&&typeof t.title=="string",d3e=t=>{const e=t.images;return Array.isArray(e)?e.every(u3e):!1},f3e=(t,{imageLightbox:e})=>{var n;const s=(n=c3e(t.selected_index))!=null?n:0;!e||!d3e(t)||t.images.length<s+1||e.setCurrentImage({image:t.images[s],source:XT.DilWidget,imageResults:t.images})},m3e={copy:a3e,add_to_calendar:r3e,open_entity_detail:i3e,issue_new_turn:l3e,open_image_lightbox:f3e};function p3e(t){return"item"in t&&s3e(t.item)}async function g3e({payload:t,context:e,library:s,actionType:n}){var i;const o=(i=t==null?void 0:t.action)!=null?i:n;if(!o||!t)return;const a=s[o];a&&await a(t,e)}const h3e=/^[A-Za-z_][\w]*$/,_3e=2;function x3e(t,e){const s=x.useMemo(()=>t?eE(t):null,[t]);return x.useCallback(n=>{s&&Jo(s,e,n,{showSuccessSnackbar:!0})},[s,e])}function y3e(){const t=xs(),e=_1(s=>s.showDebugConversationTurns);return b3e(t,e)}function b3e(t,e){return!!t&&q_(t)||e}function eE(t,e={}){var l,c;const{indent:s=0}=e,n=" ".repeat(s),o=v3e((l=t.props)!=null?l:{}),a=((c=t.children)!=null?c:[]).filter(u=>u!=null);if(!a.length)return"".concat(n,"<").concat(t.type).concat(o," />");const i=a.map(u=>eE(u,{indent:s+_3e})).join("\n");return"".concat(n,"<").concat(t.type).concat(o,">\n").concat(i,"\n").concat(n,"</").concat(t.type,">")}function v3e(t){const e=Object.keys(t!=null?t:{}).filter(n=>t[n]!==void 0);if(!e.length)return"";const s=e.sort().map(n=>S3e(n,t[n]));return" ".concat(s.join(" "))}function S3e(t,e){return typeof e=="string"?"".concat(t,"=").concat(K$(e)):"".concat(t,"={ ").concat(k3e(J2(e))," }")}function J2(t){if(C3e(t))return eE(t,{indent:0});if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number"){if(!Number.isFinite(t))throw new Error("Cannot serialize non-finite numbers in DIL props");return String(t)}if(typeof t=="string")return K$(t);if(Array.isArray(t)){const e=t.map(s=>J2(s)).join(", ");return"[".concat(e,"]")}if(t instanceof Date)return JSON.stringify(t.toISOString());if(w3e(t)){const s=Object.keys(t).sort().map(n=>{const o=h3e.test(n)?n:JSON.stringify(n);return"".concat(o,": ").concat(J2(t[n]))}).join(", ");return s?"{ ".concat(s," }"):"{}"}return JSON.stringify(t)}function C3e(t){return!t||typeof t!="object"?!1:"type"in t&&"props"in t&&"children"in t}function w3e(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function K$(t){var a,i;const e=((a=t.match(/'/g))!=null?a:[]).length,s=((i=t.match(/"/g))!=null?i:[]).length;let n;!s&&e?n='"':!e&&s?n="'":n=e<=s?"'":'"';const o=t.replace(/['"\\\u0000-\u001f\u2028\u2029]/g,l=>{var c;return l===n?"\\".concat(l):l==="\\"?"\\\\":(c={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"'",'"':'"'}[l])!=null?c:"\\u".concat(l.charCodeAt(0).toString(16).padStart(4,"0"))});return"".concat(n).concat(o).concat(n)}function k3e(t){return t.replace(/\s*\n\s*/g," ")}const T3e=Pe(()=>me(()=>import("./hkb83i2st775hw30.js"),__vite__mapDeps([223,1])).then(t=>t.DILRenderer)),E3e=!1;let M3e=null;const C4=[.18,.02,.25,1],N3e={hidden:{opacity:0,y:4},show:{opacity:1,y:0,transition:{opacity:{duration:.18,ease:C4},y:{duration:.25,ease:C4}}}};function Y$(t){const c=t,{props:e={},children:s=[]}=c,n=De(c,["props","children"]),o=T(T({},e),n),a=s.map(Y$),u=o,{type:i}=u,l=De(u,["type"]);if(typeof i!="string")throw new Error("Invalid DIL node: missing widget type");return U(T({},l),{type:i,children:a})}const A3e=({dil:t,rootWidget:e})=>{var N,A,I,P;const s=aa(),n=G(),o=(N=s==null?void 0:s.ctx)!=null?N:n,a=dp(o),i=JJ(),l=NC(),[c,u]=x.useState(0),d=o3e({ctx:o,calendarPreferenceFeatureEnabled:E3e,CalendarPreferenceModal:M3e}),f=x.useMemo(()=>{const R=e!=null?e:t?Y$(t):null;if(!R)throw new Error("DILWidget requires either a dil or rootWidget");return R},[e,t]),m=(I=(A=f.theme)!=null?A:i)!=null?I:"light",p=x.useRef(m),g=x.useMemo(()=>U(T({},f),{theme:m}),[f,m]),h=x3e(t,a),_=y3e(),{openThreadSidebar:b}=Er(s),{resetSidebarHistory:y}=oU(),v=x.useContext(Z2e),S=(P=v==null?void 0:v.message)==null?void 0:P.id,C=x.useCallback(({query:R,category:O="ask_sidebar",extraParams:L})=>{!R||!S||(y(),b({type:"entity",debugThreadId:void 0,messageId:S,contentReferenceStartIndex:0,query:R,category:O,extraParams:L}))},[S,b,y]),w=x.useCallback(async R=>{!s||!(R!=null&&R.trim())||await Ao({conversation:s,promptMessage:cn(R.trim()),eventSource:"mouse"})},[s]),k=fg.useStore(),E=x.useMemo(()=>({toaster:a,calendar:d,openEntitySidebar:C,issueNewTurn:w,imageLightbox:k}),[d,w,C,a,k]),M=x.useCallback(async({type:R,payload:O})=>{await g3e({payload:O,context:E,library:m3e,actionType:R})},[E]);return x.useEffect(()=>{p.current!==m&&(p.current=m,u(R=>R+1))},[m]),r.jsxs("div",{className:"mt-4 mb-3",children:[t&&_&&r.jsx("div",{className:"text-token-text-tertiary hover:text-token-text-secondary mb-2 flex justify-end",children:r.jsx(VU,{onCopy:h,buttonText:"Copy DIL (internal only)"})}),r.jsx(gt.div,{variants:N3e,initial:l?!1:"hidden",animate:"show",children:r.jsx(T3e,{widget:g,theme:m,onAction:M},c)})]})},Mat=Object.freeze(Object.defineProperty({__proto__:null,DILWidget:A3e},Symbol.toStringTag,{value:"Module"})),Q$=0,tE=700,I3e=t=>{var e;return Array.from((e=t.match(/\s*\S+(?:\s+|$)/g))!=null?e:[])},j3e=/^\s*$/,P3e=()=>{const{locale:t}=ne(),e=x.useMemo(()=>{try{return new Intl.Segmenter(t,{granularity:"word"})}catch(n){return null}},[t]);return x.useCallback(n=>{var a;if(e==null)return I3e(n);const o=[];for(const{segment:i,isWordLike:l}of e.segment(n))if(j3e.test(i)||!l){const c=Math.max(o.length-1,0);(a=o[c])!=null||(o[c]=""),o[c]+=i}else o.push(i);return o},[e])},R3e=x.createContext({isDisabled:!0,segmentText:()=>[],enqueueElement:()=>{},dequeueElement:()=>{},updateElementBounds:()=>{},reportReady:()=>{},reportProgress:()=>{},reportComplete:()=>{},lastPositionCompletedAnimating:null,activeStartPos:null,animationTiming:{durationMs:tE,delayMs:Q$}}),Qf=(t,e)=>"".concat(t,"-").concat(e),O3e=t=>{const[e,s]=t.split("-");return{tag:e,startPos:parseInt(s)}},Nat=({isDisabled:t,onComplete:e,children:s,defaultDelayPerSegmentMs:n=Q$,defaultAnimationDurationPerSegmentMs:o=tE})=>{const a=x.useRef(new Set),[i,l]=x.useState(null),[c,u]=x.useState(null),d=x.useRef(new Map),f=x.useRef(null),m=x.useCallback((S,C,w,k)=>{var E;f.current=Math.max((E=f.current)!=null?E:0,w),d.current.set(Qf(S,C),{start:C,end:w,numChildren:k})},[]),p=x.useCallback((S,C)=>{c!=null&&C<=c||(a.current.add(Qf(S,C)),a.current.size===1&&u(C))},[c]),g=x.useCallback((S,C)=>{const w=Qf(S,C);a.current.delete(w),d.current.delete(w)},[]),[h]=x.useState(()=>({delayMs:n,durationMs:o})),_=x.useCallback((S,C,w)=>{var N;if(C!==c)return;const k=Qf(S,C),E=(N=d.current.get(k))==null?void 0:N.end,M=f.current;E==null||M==null},[c]),b=x.useCallback((S,C)=>{const w=Qf(S,C);if(!a.current.has(w))return;a.current.delete(w);let k=null;for(const E of a.current){const{startPos:M}=O3e(E);(k==null||M<k)&&(k=M)}k!=null&&u(k)},[]),y=x.useCallback(S=>{(a.current.size===0||a.current.size===1&&S===f.current)&&(e==null||e()),l(C=>Math.max(C!=null?C:0,S))},[e]),v=P3e();return r.jsx(R3e.Provider,{value:{lastPositionCompletedAnimating:i,isDisabled:t,activeStartPos:c,animationTiming:h,segmentText:v,enqueueElement:p,dequeueElement:g,updateElementBounds:m,reportProgress:_,reportReady:b,reportComplete:y},children:s})},L3e="BZ_Pyq_fadeIn",D3e="BZ_Pyq_root",Aat={"fade-in":"BZ_Pyq_fade-in",fadeIn:L3e,root:D3e},Iat=()=>{const t=Xe(G(),"3991624489"),e=_1(({wordFadeType:o})=>o),s=_1(({tokenBufferType:o})=>o),n=t.get("animation_duration",tE);return{wordFadeType:p1(e!=null?e:t.get("word_fade_type"),XJ),bufferType:p1(s!=null?s:t.get("token_buffer_type"),ZJ),animationDurationMs:n}};function J$(t){return Ee(t,"2304807207")}function w4({text:t}){return t&&t.length>0?r.jsx("span",{className:"result-streaming streaming-dot loading-shimmer relative pt-1",children:r.jsx(go,{children:t})}):r.jsx("span",{className:"result-streaming streaming-dot relative pt-1",children:""})}function jat(t,e,s,n){var o;return(o=F3e(t))!=null?o:$3e(t,e,s,n)}function F3e(t){var u,d,f;const{errType:e,errCode:s,err:n,disclaimers:o}=(u=t.clientMetadata)!=null?u:{},a=U3e(t),i=s!==Ai.ModelIncompatibility&&s!==Ai.ContentPolicy&&((f=(d=t.clientMetadata)==null?void 0:d.canRetry)!=null?f:!0);if(a&&B3e(t))return{flagSeverity:"warning",shouldHideContent:!0,errCode:Ai.ContentRegurgitation,errMessage:n,canRetry:i};if(!(o&&o.length>0)&&a)return{flagSeverity:"warning",shouldHideContent:!0,errCode:Ai.ContentOrTos,errMessage:n,canRetry:i};if(e)return{flagSeverity:e,shouldHideContent:e==="danger"&&(s===Ai.ContentPolicy||s===Ai.ModelIncompatibility),disclaimers:o,errCode:s,errMessage:n,canRetry:i}}function B3e(t){var e;return((e=t.metadata)==null?void 0:e.safety_plugin_status_code)===123}function U3e(t){var e,s;return((s=(e=t.metadata)==null?void 0:e.finish_details)==null?void 0:s.type)==="content_filter"}function $3e(t,e,s,n){var a,i,l,c,u,d,f;if(!s&&e&&(t==null?void 0:t.author.role)===ot.User&&t.status!==void 0&&!n)return{flagSeverity:"info",shouldHideContent:!1,errCode:Cm.MissingLastCompletion,canRetry:!0};if(((i=(a=t.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="interrupted"&&((c=(l=t.metadata)==null?void 0:l.finish_details)==null?void 0:c.reason)==="server_error")return{flagSeverity:"danger",shouldHideContent:!1,errCode:Cm.InterruptionServerError,canRetry:!0};if((u=t.clientMetadata)!=null&&u.isOptimisticPlaceholder&&((d=t.clientMetadata)!=null&&d.placeholderErrorMessage))return{flagSeverity:"danger",shouldHideContent:!1,errMessage:(f=t.clientMetadata)==null?void 0:f.placeholderErrorMessage,canRetry:!1}}var fn=(t=>(t[t.Thought=0]="Thought",t[t.Recap=1]="Recap",t[t.Search=2]="Search",t[t.CodeAnalysis=3]="CodeAnalysis",t[t.ImageAnalysis=4]="ImageAnalysis",t[t.ComputerOutput=5]="ComputerOutput",t[t.N7jupdLoading=6]="N7jupdLoading",t[t.Browsing=7]="Browsing",t[t.N7jupdAPI=8]="N7jupdAPI",t[t.e1ld0dvz=9]="e1ld0dvz",t[t.Glaux=10]="Glaux",t[t.Strix=11]="Strix",t))(fn||{});const H3e=x.createContext(null);let Kh=null;const Z$=()=>{var t;return(t=Kh==null?void 0:Kh.platformConnectors)!=null?t:null};function Pat({value:t,children:e}){"use no forget";return Kh=t,r.jsx(H3e.Provider,{value:t,children:e})}const G3e=x.createContext({postId:""});function X$(){const{postId:t}=x.useContext(G3e),{postWithProfile:e}=x.useContext(eZ);return(e==null?void 0:e.post.id)||t}function Rat(o){var a=o,{className:t,onLoad:e,fadeIn:s=!0}=a,n=De(a,["className","onLoad","fadeIn"]);const[i,l]=x.useState(!1);function c(u){l(!0),e==null||e(u)}return r.jsx("img",U(T({},n),{alt:n.alt,onLoad:u=>c(u),className:z(t,"w-fit",s&&"transition-opacity duration-300",i?"opacity-100":"opacity-0")}))}function V3e(t,e,s){const n=!ut(),o=x.useContext(ZC),a=o==null?void 0:o.serverSharedThreadId,i=X$();return eK({queries:t.map(l=>jl.makeQueryOptions({asset:l,sharedThreadId:a,gizmoId:e,isUnauthenticated:n,postId:i,conversationId:s}))})}function Oat(t){"use forget";const e=F.c(10),{asset:s,gizmoId:n,conversationId:o,getServerUrl:a,sharedThreadId:i}=t,l=G();let c;e[0]!==l?(c=ut(),e[0]=l,e[1]=c):c=e[1];const u=!c,d=X$();let f;return e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==n||e[6]!==u||e[7]!==d||e[8]!==i?(f=jl.makeQueryOptions({asset:s,gizmoId:n,isUnauthenticated:u,conversationId:o,getServerUrl:a,sharedThreadId:i,postId:d}),e[2]=s,e[3]=o,e[4]=a,e[5]=n,e[6]=u,e[7]=d,e[8]=i,e[9]=f):f=e[9],dt(f)}const z3e=t=>{const[e,s]=x.useState(null);return Qe(t,o=>{var i,l,c;if(e)return e;const a=Se.findNode(o,u=>{var d;return((d=u.message.metadata)==null?void 0:d.visited_risky_domain)!==void 0});return(i=a==null?void 0:a.message.metadata)!=null&&i.visited_risky_domain?(s((l=a==null?void 0:a.message.metadata)==null?void 0:l.visited_risky_domain),(c=a.message.metadata)==null?void 0:c.visited_risky_domain):null})},W3e=(t,e)=>{var i,l;const s=aa(),n=oe(()=>e!=null?e:s==null?void 0:s.serverId$()),o=x.useMemo(()=>t?[t]:[],[t]);return(l=(i=V3e(o,void 0,n)[0])==null?void 0:i.data)==null?void 0:l.url},Lat=t=>{const[e,s]=x.useState(t);return x.useEffect(()=>{if(!t||t===e)return;const n=new Image;return n.src=t,n.onload=()=>s(t),n.onerror=()=>console.warn("failed to load",t),()=>{n.src="",n.onload=null,n.onerror=null}},[t,e]),e},q3e=t=>t.replace(/^wwws?\./,""),K3e=["localhost","127.0.0.1","newtab"];function Y3e(t){try{return new URL(t)}catch(e){return Ge.addError(e),null}}function k4(t){var a;const e=(a=t==null?void 0:t.vmMetadata)==null?void 0:a.url;if(!e)return{domain:null,origin:null};if(e.startsWith("data:"))return{domain:null,origin:null};const s=Y3e(e);if(!s)return{domain:null,origin:null};if(K3e.includes(s.hostname))return{domain:null,origin:null};const n=s.origin;return{domain:q3e(s.hostname),origin:n}}const Q3e=(t,e)=>{var d,f,m,p,g;const s=[],n=[],o=[],a=[];if(t.every(h=>h.author.name===Qs.n7jupd_m)){if(!e)return;const h=Qo(t),_=typeof((d=h==null?void 0:h.metadata)==null?void 0:d.agent_custom_loading_headline)=="string"?h.metadata.agent_custom_loading_headline:void 0;return[{type:fn.N7jupdLoading,needs_startup:(m=(f=h==null?void 0:h.metadata)==null?void 0:f.needs_startup)!=null?m:!1,custom_headline:_}]}for(const h of t){if(h.content.content_type===bt.ComputerOutput){const _=U(T({},h.content.screenshot),{vmMetadata:(p=h.metadata)==null?void 0:p.n7jupd_v,messageId:h.id});s.push(_)}if(h.content.content_type===bt.Text&&((g=h.recipient)!=null&&g.includes("computer"))&&n.push({type:h.recipient,parts:h.content.parts.join("")}),h.content.content_type===bt.StructuredThoughts)for(const _ of h.content.thoughts)_.summary&&(o.push(_.summary),a.push(_.content))}const l=!1,c=[],u=Math.min(s.length,a.length);for(let h=0;h<u;h++){const _=s[h],{domain:b}=k4(_),y={type:fn.ComputerOutput,screenshots:[_],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:n,isBlank:!b};c.push(y)}if(s.length>u){const h=s.slice(u);if(c.length===0)c.push({type:fn.ComputerOutput,screenshots:h,text:"",messages:t,thoughts:[],fullThoughts:[],actions:n,isBlank:l});else{const _=c[c.length-1];_.screenshots.push(...h),_.isBlank&&(_.isBlank=h.every(b=>!k4(b).domain)&&_.isBlank)}}if(a.length>u)for(let h=u;h<a.length;h++)c.push({type:fn.ComputerOutput,screenshots:[],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:n,isBlank:!0});return!c.length&&(s.length||a.length)?[{type:fn.ComputerOutput,screenshots:s,text:"",messages:t,thoughts:o,fullThoughts:a,actions:n,isBlank:l}]:c},Dat=t=>{var n,o,a,i;const e=t.messages[0];let s;switch(e.author.name){case"browser.search":{const l=(o=(n=e.metadata)==null?void 0:n.n7jupd_title)!=null?o:"Searched",c=(i=(a=e.metadata)==null?void 0:a.n7jupd_urls)!=null?i:[];s={type:fn.Search,queries:[{type:"search",q:l}],sources:c.map(u=>({type:"search_result_group",domain:u,entries:[{type:"search_result",url:u,title:"",snippet:"",ref_id:null,content_type:null,pub_date:null}]}))};break}}if(!(!s||!s.sources.length))return[s]},Z2=/connector_[0-9a-f]{32}/i,Fat=t=>{var l,c,u,d,f,m,p,g,h,_,b,y,v,S,C,w;const e=Z$();if(!e)return;const s=t.messages[0];if(!s)return;const n=(l=s.metadata)==null?void 0:l.n7jupd_subtool;if((c=n==null?void 0:n.subtool)!=null&&c.includes("search"))return[{type:fn.N7jupdAPI,action:"n7jupd_as"}];if((u=n==null?void 0:n.subtool)!=null&&u.includes("api_doc"))return[{type:fn.N7jupdAPI,action:"n7jupd_ag"}];const o=(f=(d=s.metadata)==null?void 0:d.n7jupd_subtool)==null?void 0:f.generic_api_func;let a=(p=(m=o==null?void 0:o.match(Z2))==null?void 0:m[0])!=null?p:void 0;a||(a=(b=(_=(h=(g=s.metadata)==null?void 0:g.n7jupd_url)==null?void 0:h.match(Z2))==null?void 0:_[0])!=null?b:void 0);const i=e==null?void 0:e.get(a!=null?a:"");if(!a||!i)return[{type:fn.N7jupdAPI,action:"n7jupd_cf"}];if(t.messages.length>1&&((y=t.messages[1].metadata)!=null&&y.connector_source)&&t.messages[1].content.content_type===bt.TetherBrowsingDisplay){if((v=t.messages[1].metadata)!=null&&v.display_url&&((S=t.messages[1].metadata)!=null&&S.display_title))return[{type:fn.N7jupdAPI,action:"n7jupd_cf",source:i,fetchResult:{url:(C=t.messages[1].metadata)==null?void 0:C.display_url,title:(w=t.messages[1].metadata)==null?void 0:w.display_title}}];const k=eH(t.messages[1].content.result);if(k.length)return[{type:fn.N7jupdAPI,action:"n7jupd_cs",source:i,searchResults:k.map(([E,M])=>({url:E,title:M}))}]}return[{type:fn.N7jupdAPI,action:"n7jupd_cf",source:i}]},Bat=t=>{var i,l,c,u,d,f,m,p,g,h,_,b,y;const e=Z$();if(!e)return;const s=t.messages[0];if(!s)return;if((i=s.recipient)!=null&&i.includes("list_resources")||(l=s.recipient)!=null&&l.includes("search_tools"))return[{type:fn.N7jupdAPI,action:"n7jupd_as"}];if((c=s.recipient)!=null&&c.includes("read_resources")||(u=s.recipient)!=null&&u.includes("get_resource"))return[{type:fn.N7jupdAPI,action:"n7jupd_ag"}];if(t.messages.length==1)return[];const n=t.messages[1];if(n.content.content_type!==bt.CitableCodeOutput)return[{type:fn.N7jupdAPI,action:"n7jupd_cf"}];let o=(f=(d=n.content.metadata)==null?void 0:d.connector_id)!=null?f:void 0;o||(o=(p=(m=n.content.output_str.match(Z2))==null?void 0:m[0])!=null?p:void 0);const a=e==null?void 0:e.get(o!=null?o:"");if(t.messages.length>1&&t.messages[1].content.content_type===bt.CitableCodeOutput&&((g=t.messages[1].content.metadata)!=null&&g.connector_source)){if((h=t.messages[1].metadata)!=null&&h.display_url&&((_=t.messages[1].metadata)!=null&&_.display_title))return[{type:fn.N7jupdAPI,action:"n7jupd_cf",source:a,fetchResult:{url:(b=t.messages[1].metadata)==null?void 0:b.display_url,title:(y=t.messages[1].metadata)==null?void 0:y.display_title}}];const v=eH(t.messages[1].content.output_str);if(v.length)return[{type:fn.N7jupdAPI,action:"n7jupd_cs",source:a,searchResults:v.map(([S,C])=>({url:S,title:C}))}]}return[{type:fn.N7jupdAPI,action:"n7jupd_cf",source:a}]};function eH(t){const e=t.replace(/^\s*L\d+:\s*/gm,""),s=[],n=[];for(let f=0;f<e.length;f++){const m=e[f];if(m==="{")n.push(f);else if(m==="}"){if(n.length===0)continue;const p=n.pop();s.push({start:p,end:f})}}const o=["display_url","web_link","url","web_url"],a=["display_title","title","name","path","subject","summary"],i=f=>f.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),l=(f,m)=>{const p=[];for(const g of f){const h=new RegExp('"'.concat(i(g),'"\\s*:\\s*"([^"]+)"'),"g");for(const _ of m.matchAll(h))p.push(_[1].replace(/\n/g,""))}return p},c=[];for(const{start:f,end:m}of s){const p=e.slice(f,m+1),g=l(o,p),h=l(a,p),_=Math.min(g.length,h.length);for(let b=0;b<_;b++)c.push([g[b],h[b]])}const u=new Map;for(const[f,m]of c)u.set("".concat(f,"|||").concat(m),[f,m]);return Array.from(u.values())}const T4=Zt(()=>({rect:null})),J3e=t=>{if(!t)return T4.setState({rect:null});const{height:e,left:s,top:n,width:o}=t.getBoundingClientRect(),{borderRadius:a}=getComputedStyle(t);T4.setState({rect:{height:e,left:s,top:n,width:o,borderRadius:a}})};function tH(t){const e=ne(),s=Bs(t),n=Gt();return async({title:a,textdocType:i,content:l,createSource:c})=>{if(!s)return;if(i==="loading"){Ge.addError("Tried to add a textdoc with type 'loading'");return}const u=e.formatMessage({id:"6dkdc5",defaultMessage:"New document"});a||(a=u);const{textdoc_id:d}=await de.safePost("/textdoc/add",{requestBody:{conversation_id:s,textdoc_title:a,textdoc_type:i,content:l,create_source:c}});return n.setQueryData([s,"textdocs"],f=>{if(!f)return f;const m={textdocId:d,messageId:null,type:i,comments:[],status:fo.COMPLETE,title:a,content:l,versionInt:1,createdAt:Date.now()},p=new Map(f.persistedTextdocVersionById);p.set(d,m);const g=[...f.persistedTextdocVersions,m],h=new Map(f.persistedTextdocById);return h.set(d,{id:d,version:1,title:a,textdoc_type:i,content:l,comments:[],metadata:null,updated_at:new Date().toISOString()}),U(T({},f),{persistedTextdocVersionById:p,persistedTextdocVersions:g,persistedTextdocById:h})}),await n.invalidateQueries({queryKey:[s,"textdocs"]}),requestAnimationFrame(()=>{pl(d),setTimeout(()=>{pl(d)},250)}),d}}const Z3e=({content:t,codeLanguage:e,codeSnippetRef:s,clientThreadId:n})=>{var u;const o=G(),a=ne(),i=oe(()=>Cs(Et(o,n))),l=tH(n);if(!((u=i.enabledTools)!=null&&u.includes(Sp.Canvas)))return null;function c(){Zc.logButtonClick(Gx.EDIT_IN_CANVAS_CODE_SNIPPET),s!=null&&s.current&&J3e(s.current);const d=e?Nc("code/"+e):l$(t)?ni.CODE_OTHER:ni.DOCUMENT;l({title:a.formatMessage({id:"ay0U57",defaultMessage:"New {codeLanguage} document"},{codeLanguage:e||"text"}),textdocType:d,content:t,createSource:tp.MESSAGE})}return r.jsx(It,{label:r.jsx(j,{id:"EditInCanvasButton.editTooltip",defaultMessage:"Edit in canvas"}),children:r.jsxs("button",{className:"flex items-center gap-1 py-1 select-none",onClick:c,children:[r.jsx(xi,{className:"icon-xs"}),a.formatMessage({id:"5k0sSJ",defaultMessage:"Edit"})]})})},X3e=x.createContext({isWithinDataAnalysisToolMessage:!1}),eMe=Jc(()=>me(()=>import("./k36uf504rvhwee31.js"),__vite__mapDeps([224,225,1,226]))),tMe=gn.memo(function({htmlSegment:e}){return r.jsx("span",{dangerouslySetInnerHTML:{__html:e}})}),sMe=t=>{var e,s;if(t instanceof Element)return(s=(e=t.closest("[data-message-id]"))==null?void 0:e.getAttribute("data-message-id"))!=null?s:void 0};function nMe({wrapperClassName:t,codeClassName:e,language:s,content:n,shouldWrapCode:o,removeTopBorderRadius:a,showActionBar:i=!0,showStickyRightContent:l=!0,codeContainerClassName:c,title:u}){var I;const d=G(),f=aa(),m=x.useRef(null),p=Kt(),g=oo(),h=UTe(),[_,b]=oe(()=>[Ss(d),yr(d)]),y=Z_(),v=x.useCallback(P=>{var O;P.preventDefault(),P.stopPropagation();const R=(O=window.getSelection())==null?void 0:O.toString();R&&Jo(R,void 0,P)},[]),S=x.useCallback(P=>{const R=(L,D,H)=>{if(g||(f==null?void 0:f.id)==null||D===void 0)return;const V=Rt(f.id);V!=null&&t0(d,{source:L,type:"copy",messageId:D,serverThreadId:V,selectedText:H,location:"code-snippet",contentType:"code"})},O=sMe(P.target);Jo(n,p,P),R("mouse",O,n)},[d,n,p,g,f]),C=ne(),{isWithinDataAnalysisToolMessage:w}=x.useContext(X3e),[k,E]=x.useState(null);x.useEffect(()=>{eMe().then(P=>{if(P!=null)try{E(P.highlightCode(n,s))}catch(R){if(!(R instanceof Error&&/Unknown language/i.test(R.message)))throw R}})},[n,s]);const M=s==="svg"||(s==="xml"||s==="html")&&uMe(n),N=x.useMemo(()=>k==null?void 0:k.html.split(/(<span[^>]*>.*?<\/span>)/g).filter(Boolean),[k==null?void 0:k.html]),A=M?r.jsx(tZ,{svgString:n,className:"max-h-96 w-full"}):N&&N.length>0?r.jsx("span",{children:N.map((P,R)=>r.jsx(tMe,{htmlSegment:P},R))}):k!=null&&k.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:k.html}}):r.jsx("span",{children:n});return r.jsx(aMe,{ref:m,title:(I=u!=null?u:k==null?void 0:k.language)!=null?I:s,shouldWrapCode:o,stickyTitleRightContent:l&&r.jsxs("div",{className:"bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs",children:[w&&r.jsx(oMe,{}),r.jsx(VU,{buttonText:h?C.formatMessage({id:"6NJu7m",defaultMessage:"Copy"}):C.formatMessage({id:"zIa6ZQ",defaultMessage:"Copy code"}),onCopy:S,className:"py-1",iconClassName:h?"icon-xs":"icon-sm"}),!y&&(f==null?void 0:f.id)&&h&&r.jsx(Z3e,{content:n,codeLanguage:s!=null?s:"",codeSnippetRef:m,clientThreadId:f==null?void 0:f.id})]}),codeClassName:e,codeContainerClassName:c,onCopy:v,className:z(t,_&&"border-token-border-medium bg-token-bg-primary dark:bg-token-sidebar-surface-primary border"),removeTopBorderRadius:a,showActionBar:i,isAuraSideChat:_,isAuraMainPage:b,children:A})}function oMe(){const e=Dc(!0),{data:s=!1}=qo(Qt.ShowExpandedCodeView),n=ne();return r.jsxs("div",{className:"border-token-border-medium me-2 flex items-center gap-2 border-e pe-2",children:[r.jsx("label",{htmlFor:"ada-always-show",children:r.jsx(j,{defaultMessage:"Always show details",id:"message.tools.codeInterpreter.alwaysShowAnalysis"})}),r.jsx(eR,{id:"ada-always-show",size:"small",onCheckedChange:o=>{e.mutate({setting:Qt.ShowExpandedCodeView,value:o})},checked:s,"aria-label":s?n.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis on",id:"message.tools.codeInterpreter.alwaysShowAnalysis.enabled"}):n.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis off",id:"message.tools.codeInterpreter.alwaysShowAnalysis.disabled"})})]})}function aMe({children:t,title:e,stickyTitleRightContent:s,shouldWrapCode:n=!1,className:o,codeContainerClassName:a,codeClassName:i,ref:l,onCopy:c,removeTopBorderRadius:u,showActionBar:d=!0,isAuraSideChat:f=!1,isAuraMainPage:m=!1}){return r.jsxs(rMe,{className:o,children:[d&&r.jsxs(r.Fragment,{children:[r.jsx(iMe,{$removeTopBorderRadius:u,className:z(f&&"bg-token-bg-primary dark:bg-token-sidebar-surface-primary"),children:e}),r.jsx("div",{className:z("sticky top-[calc(--spacing(9)+var(--header-height))]",!m&&"@w-xl/main:top-9"),children:r.jsx("div",{className:"absolute end-0 bottom-0 flex h-9 items-center pe-2",children:s})})]}),r.jsx(lMe,{ref:l,className:a,children:r.jsx(cMe,{$shouldWrap:n,className:i,onCopy:c,children:t})})]})}var cP;const rMe=Mt.div(cP||(cP=St(["contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"])));var uP;const iMe=Mt.div(uP||(uP=St(["flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none ",""])),t=>t.$removeTopBorderRadius?"":"rounded-t-2xl corner-t-superellipse/1.1"),lMe=function({children:e,className:s,ref:n}){return r.jsx("div",{ref:n,className:z("overflow-y-auto p-4",s),dir:"ltr",children:e})};var dP;const cMe=Mt.code(dP||(dP=St(["",""])),t=>t.$shouldWrap?"whitespace-pre-wrap!":"whitespace-pre!");function uMe(t){return t.trim().startsWith("<svg")}function dMe(t){return"children"in t?sH(t):"value"in t?t.value:""}function fMe(t){return t.type==="text"?t.value:"children"in t?sH(t):""}function sH(t){let e=-1;const s=[];for(;++e<t.children.length;)s[e]=fMe(t.children[e]);return s.join("")}function mMe(u){var d=u,{node:t,className:e,wrapperClassName:s,children:n,inline:o,removeTopBorderRadius:a,showActionBar:i=!0,codeContainerClassName:l}=d,c=De(d,["node","className","wrapperClassName","children","inline","removeTopBorderRadius","showActionBar","codeContainerClassName"]);var f;if(o)return r.jsx("code",U(T({className:e},c),{children:n}));{const m=(f=e==null?void 0:e.split(" ").find(g=>g.startsWith("language-")))==null?void 0:f.split("-")[1],p=t?dMe(t):"";return r.jsx(nMe,{language:m,wrapperClassName:s,codeContainerClassName:l,codeClassName:e,content:p,removeTopBorderRadius:a,showActionBar:i})}}function nH(t){return t.type==="element"}function pMe(t){return nH(t)?t.tagName==="code":!1}function Uat(){return function(t){Fk(t,"element",function(e,s,n){pMe(e)&&(n&&nH(n)&&n.tagName==="pre"?e.properties.inline=!1:e.properties.inline=!0)})}}const gMe="QKycbG_markdown",hMe={markdown:gMe},E4=({content:t})=>r.jsx(go,{className:z(hMe.markdown,"text-token-text-secondary text-[14px] leading-5"),componentOverrides:{code:e=>r.jsx(mMe,U(T({},e),{wrapperClassName:"",showActionBar:!1}))},children:t});function _Me(t){let e;try{e=JSON.parse(t)}catch(o){return Ge.addError(o),null}const s=o=>typeof o=="object"&&o!=null&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.button=="number"&&typeof o.action=="string",n=o=>typeof o=="object"&&o!=null&&Array.isArray(o.actions);if(typeof e=="object"&&e!=null&&n(e)){const o=Uc(e.actions,a=>a&&a.action==="click");if(s(o))return o}else if(s(e))return e;return null}const xMe=({chunk:t,isKAUR1BR5:e})=>{var p,g,h,_,b;const s=x.useRef(null),n=t.screenshots.at(-1),o=(p=t.fullThoughts)==null?void 0:p.at(-1),a=(g=t.thoughts)==null?void 0:g.at(-1),i=o!=null?o:a,l=(h=t.actions)==null?void 0:h.at(-1),c=W3e(n,void 0),[u,d]=x.useState(null),[f,m]=x.useState(!1);return x.useEffect(()=>{if(!c)return;let y=!1;const v=new Image;return m(!1),v.src=c,v.onload=()=>{!y&&d(c)},v.onerror=()=>{!y&&d(null),!y&&m(!0),!y&&Ge.addError(new Error("Failed to load image"))},()=>{y=!0}},[c]),(l==null?void 0:l.type)==="computer.click"&&_Me(l.parts),e?((_=t.fullThoughts)==null?void 0:_.length)===0?r.jsx(E4,{content:"Used the browser"},"used-the-browser"):r.jsx(r.Fragment,{children:(b=t.fullThoughts)==null?void 0:b.map(y=>r.jsx(E4,{content:y},y))}):r.jsxs("div",{className:"flex w-full flex-row items-start justify-center gap-4",children:[i&&r.jsx("div",{className:"text-token-text-secondary flex-1 text-sm",children:i}),n&&r.jsx("div",{ref:s,className:"border-token-border-heavy mt-1 flex h-30 w-40 items-center justify-center overflow-hidden rounded-lg border",children:u&&r.jsx(PU,{src:u,alt:"screenshot",className:"flex aspect-[1024/764] w-40 items-center justify-center overflow-hidden",children:r.jsx("img",{src:u,alt:"screenshot",loading:"lazy",className:"h-full w-full object-cover object-bottom"},u)})})]})},yMe=({clientThreadId:t,messageId:e,renderClosestScreenshot:s})=>{const n=Qe(t,i=>{const c=Se.getConversationTurns(i).find(f=>f.messages.some(m=>m.id===e));if(!c)return null;const u=Q3e([...c.messages],!1);return u==null?void 0:u.find(f=>f.type===fn.ComputerOutput)}),o=x.useMemo(()=>{if(!n)return null;if(s){const u=n.screenshots.findIndex(d=>d.messageId===e);return u===-1?null:u}const i={};n.screenshots.forEach((u,d)=>{i[u.messageId]=d});const l=n.messages.findIndex(u=>u.id===e),c=n.messages.slice(l).find(u=>i[u.id]);return c?i[c.id]:null},[n,e,s]),a=n==null?void 0:n.messages.some(i=>{var l;return(l=i.metadata)==null?void 0:l.kaur1br5_mode});return s&&o===null||!n||!n.screenshots.length?null:r.jsx("div",{children:r.jsx("div",{className:"relative flex flex-1 cursor-default flex-col gap-2",children:r.jsx(xMe,{chunk:n,isKAUR1BR5:a})})})};function bMe(t,e,s){const n=ne(),{selectedSources:o}=Da(t),a=zp(t);return x.useCallback(async()=>await a({promptMessage:cn(n.formatMessage({id:"3qSZZF",defaultMessage:"I understand the risks. Please continue"}),T({user_acknowledges_pim:!0,system_hints:e},o&&{selected_sources:fl(o)})),completionMetadata:{systemHints:e,conversationMode:s},eventSource:"mouse"}),[a,s,e,n,o])}const vMe=({onMarkSafe:t,justification:e,clientThreadId:s,flaggedMessageId:n})=>{const[o,a]=x.useState(!1),i=ne(),l=x.useCallback(()=>a(!1),[]);return r.jsxs(r.Fragment,{children:[r.jsx(Ft,{testId:"modal-confirm-close-editor",isOpen:o,size:"custom",className:"max-w-xl",onClose:l,type:"warning",hideSeparator:!1,title:r.jsx("span",{className:"text-xl",children:r.jsx(j,{id:"lzy3Zg",defaultMessage:"Potentially Malicious Content Detected"})}),primaryButton:r.jsx(mn.Button,{title:i.formatMessage({id:"E82qxN",defaultMessage:"Mark safe and continue"}),color:"danger",onClick:t}),secondaryButton:r.jsx(mn.Button,{title:i.formatMessage({id:"byfawg",defaultMessage:"Don't mark safe"}),color:"secondary",onClick:l}),showCloseButton:!0,closeButton:r.jsx(Es,{onClick:l}),children:r.jsxs("div",{children:[r.jsx("div",{className:"text-md text-token-text-secondary pb-2",children:e?r.jsx(go,{children:e}):r.jsx(j,{id:"OkPb2T",defaultMessage:"This webpage contained hidden instructions that may be attempting to extract sensitive information. You should only continue if you're sure this content is safe."})}),!!n&&r.jsx(yMe,{clientThreadId:s,messageId:n,renderClosestScreenshot:!0})]})}),r.jsx(ke,{color:"danger",onClick:()=>a(!0),children:r.jsx(j,{id:"5L93Tx",defaultMessage:"Continue"})})]})};function $at({children:t,isFinalTurn:e,hasActiveRequest:s,conversationMode:n,clientThreadId:o,justification:a,flaggedMessageId:i}){const l=Qe(o,d=>{var f;return(f=Se.findNode(d,m=>m.message.author.role===ot.User))==null?void 0:f.message}),c=x.useMemo(()=>{var d;return(d=l==null?void 0:l.metadata)==null?void 0:d.system_hints},[l]),u=bMe(o,c,n);return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-token-main-surface-secondary mt-1 flex gap-2 rounded-2xl px-3 py-2",children:[r.jsx(ci,{className:"icon-xl mt-2"}),r.jsx("div",{children:t})]}),e&&!s&&r.jsx("div",{className:"mt-2",children:r.jsx(SMe,{onMarkSafe:u,justification:a,flaggedMessageId:i,clientThreadId:o})})]})}function SMe({onMarkSafe:t,justification:e,clientThreadId:s,flaggedMessageId:n}){return r.jsx("div",{children:r.jsx(vMe,{onMarkSafe:t,justification:e,clientThreadId:s,flaggedMessageId:n})})}function CMe(t){return t.filter(e=>e.author.role===ot.Tool)}function wMe(t){const e=CMe(t);return e[e.length-1]}function Hat(t){"use forget";const e=F.c(12),{messages:s,nextMessage:n,isLastMessage:o}=t,a=wMe(s),i=ne();let l;e[0]!==i?(l=i.formatMessage({id:"q7dr546.remembering",defaultMessage:"Remembering"}),e[0]=i,e[1]=l):l=e[1];const c=l;let u;e[2]!==i?(u=i.formatMessage({id:"q7dr546.collecting-thoughts",defaultMessage:"Collecting thoughts"}),e[2]=i,e[3]=u):u=e[3];const d=u;if(!(o||!n||!n.content)){let p;return e[4]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(r.Fragment,{}),e[4]=p):p=e[4],p}if(!a){const p="q7dr546-"+s[0].id;let g;return e[5]!==c||e[6]!==p?(g=r.jsx(w4,{text:c},p),e[5]=c,e[6]=p,e[7]=g):g=e[7],g}if(a&&!n){const p="q7dr546-"+s[0].id;let g;return e[8]!==d||e[9]!==p?(g=r.jsx(r.Fragment,{children:r.jsx(w4,{text:d},p)}),e[8]=d,e[9]=p,e[10]=g):g=e[10],g}let m;return e[11]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(r.Fragment,{}),e[11]=m):m=e[11],m}var Lb,M4;function kMe(){if(M4)return Lb;M4=1;function t(e,s,n,o){var a=-1,i=e==null?0:e.length;for(o&&i&&(n=e[++a]);++a<i;)n=s(n,e[a],a,e);return n}return Lb=t,Lb}var Db,N4;function TMe(){if(N4)return Db;N4=1;function t(e){return function(s){return e==null?void 0:e[s]}}return Db=t,Db}var Fb,A4;function EMe(){if(A4)return Fb;A4=1;var t=TMe(),e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},s=t(e);return Fb=s,Fb}var Bb,I4;function MMe(){if(I4)return Bb;I4=1;var t=EMe(),e=lp(),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,n="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",i=n+o+a,l="["+i+"]",c=RegExp(l,"g");function u(d){return d=e(d),d&&d.replace(s,t).replace(c,"")}return Bb=u,Bb}var Ub,j4;function NMe(){if(j4)return Ub;j4=1;var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function e(s){return s.match(t)||[]}return Ub=e,Ub}var $b,P4;function AMe(){if(P4)return $b;P4=1;var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function e(s){return t.test(s)}return $b=e,$b}var Hb,R4;function IMe(){if(R4)return Hb;R4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",o=e+s+n,a="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",l="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",u="\\u2000-\\u206f",d=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="A-Z\\xc0-\\xd6\\xd8-\\xde",m="\\ufe0e\\ufe0f",p=l+c+u+d,g="[']",h="["+p+"]",_="["+o+"]",b="\\d+",y="["+a+"]",v="["+i+"]",S="[^"+t+p+b+a+i+f+"]",C="\\ud83c[\\udffb-\\udfff]",w="(?:"+_+"|"+C+")",k="[^"+t+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",M="[\\ud800-\\udbff][\\udc00-\\udfff]",N="["+f+"]",A="\\u200d",I="(?:"+v+"|"+S+")",P="(?:"+N+"|"+S+")",R="(?:"+g+"(?:d|ll|m|re|s|t|ve))?",O="(?:"+g+"(?:D|LL|M|RE|S|T|VE))?",L=w+"?",D="["+m+"]?",H="(?:"+A+"(?:"+[k,E,M].join("|")+")"+D+L+")*",V="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",q="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",W=D+L+H,$="(?:"+[y,E,M].join("|")+")"+W,Z=RegExp([N+"?"+v+"+"+R+"(?="+[h,N,"$"].join("|")+")",P+"+"+O+"(?="+[h,N+I,"$"].join("|")+")",N+"?"+I+"+"+R,N+"+"+O,q,V,b,$].join("|"),"g");function K(Y){return Y.match(Z)||[]}return Hb=K,Hb}var Gb,O4;function jMe(){if(O4)return Gb;O4=1;var t=NMe(),e=AMe(),s=lp(),n=IMe();function o(a,i,l){return a=s(a),i=l?void 0:i,i===void 0?e(a)?n(a):t(a):a.match(i)||[]}return Gb=o,Gb}var Vb,L4;function PMe(){if(L4)return Vb;L4=1;var t=kMe(),e=MMe(),s=jMe(),n="[']",o=RegExp(n,"g");function a(i){return function(l){return t(s(e(l).replace(o,"")),i,"")}}return Vb=a,Vb}var zb,D4;function RMe(){if(D4)return zb;D4=1;var t=PMe(),e=xO(),s=t(function(n,o,a){return n+(a?" ":"")+e(o)});return zb=s,zb}var OMe=RMe();const LMe=en(OMe),Jl=Ne({settingsUpdate:{id:"message.tools.user-settings.update",defaultMessage:"Settings updated"},examinedSettings:{id:"message.tools.user-settings.examined",defaultMessage:"Examined your settings"},accentColor:{id:"message.tools.user-settings.accent-color",defaultMessage:"Accent color"},appearance:{id:"settingsModal.appearance",defaultMessage:"Appearance"},personality:{id:"personalizationSettingsTool.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},customInstructionsAbout:{id:"user_settings.custom_instructions_about_you",defaultMessage:"Custom instructions  About you"},customInstructionsRespond:{id:"user_settings.custom_instruction",defaultMessage:"Custom instructions"}}),oH={accent_color:Jl.accentColor,appearance:Jl.appearance,personality:Jl.personality,know_about_me:Jl.customInstructionsAbout,custom_instructions:Jl.customInstructionsRespond},DMe={accent_color:"#settings",appearance:"#settings",personality:"#settings/Personalization",know_about_me:"#settings/Personalization",custom_instructions:"#settings/Personalization"},F4={accent_color:[rr],appearance:[],personality:[rr,W0],know_about_me:[rr,W0],custom_instructions:[rr,W0]},FMe=[rr];function aH(t){return Object.prototype.hasOwnProperty.call(oH,t)}function Gat(t){"use forget";const e=F.c(51),{messages:s,isRequestActive:n}=t,o=G();let a;e[0]!==o?(a=ln(o),e[0]=o,e[1]=a):a=e[1];const i=a,l=ne(),c=x.useRef(void 0),u=x.useRef(n),[,d]=sZ(),f=x.useRef(void 0);let m,p,g,h,_,b,y,v,S;if(e[2]!==l||e[3]!==n||e[4]!==s){m=s.find(UMe),y=s.find(BMe);const D=WMe(m);_=$Me(m),S=_&&aH(_)?_:void 0,h=D==="get_user_settings"||D==="settings_help";let H;e[14]!==l||e[15]!==h?(H=l.formatMessage(h?Jl.examinedSettings:Jl.settingsUpdate),e[14]=l,e[15]=h,e[16]=H):H=e[16],p=H,g=_?zMe(_,l):void 0,v=GMe(y),b=VMe({toolMessage:y,isRequestActive:n,hasError:v}),e[2]=l,e[3]=n,e[4]=s,e[5]=m,e[6]=p,e[7]=g,e[8]=h,e[9]=_,e[10]=b,e[11]=y,e[12]=v,e[13]=S}else m=e[5],p=e[6],g=e[7],h=e[8],_=e[9],b=e[10],y=e[11],v=e[12],S=e[13];const C=b,w=y==null?void 0:y.id;let k,E;e[17]!==n||e[18]!==i||e[19]!==_||e[20]!==w||e[21]!==S?(k=()=>{var V;const D=u.current;if(u.current=n,!w||n||!D||c.current===w)return;c.current=w;const H=(V=S?F4[S]:_==null?F4.accent_color:void 0)!=null?V:FMe;for(const q of H){const W=q(),{queryKey:$}=W;i.invalidateQueries({queryKey:$}),i.prefetchQuery(W)}},E=[i,n,w,_,S],e[17]=n,e[18]=i,e[19]=_,e[20]=w,e[21]=S,e[22]=k,e[23]=E):(k=e[22],E=e[23]),x.useEffect(k,E);let M;e[24]!==m||e[25]!==n||e[26]!==d||e[27]!==_?(M=()=>{if(_!=="appearance"||!m||!kC(m)||!n)return;const D=HMe(m);if(!nZ(D))return;const H="".concat(m.id,":").concat(D);f.current!==H&&(d(D),f.current=H)},e[24]=m,e[25]=n,e[26]=d,e[27]=_,e[28]=M):M=e[28];let N;if(e[29]!==m||e[30]!==n||e[31]!==d||e[32]!==_||e[33]!==y||e[34]!==v?(N=[m,y,n,_,d,v],e[29]=m,e[30]=n,e[31]=d,e[32]=_,e[33]=y,e[34]=v,e[35]=N):N=e[35],x.useEffect(M,N),!m&&!y)return null;let A;e[36]!==p?(A=r.jsx("strong",{className:"text-token-text-secondary font-medium",children:p}),e[36]=p,e[37]=A):A=e[37];let I;e[38]!==g||e[39]!==h?(I=g&&!h?r.jsxs("span",{className:"text-token-text-tertiary",children:[r.jsx("span",{className:"mx-1",children:""}),g]}):"",e[38]=g,e[39]=h,e[40]=I):I=e[40];let P;e[41]!==A||e[42]!==I?(P=r.jsxs("div",{children:[A,I]}),e[41]=A,e[42]=I,e[43]=P):P=e[43];let R=P;const O=S?DMe[S]:void 0;if(O){let D;e[44]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsx(a0,{className:"icon-xs text-token-text-tertiary ms-1"}),e[44]=D):D=e[44];let H;e[45]!==O||e[46]!==R?(H=r.jsxs("a",{href:O,className:"flex flex-row items-center",children:[R,D]}),e[45]=O,e[46]=R,e[47]=H):H=e[47],R=H}let L;return e[48]!==C||e[49]!==R?(L=r.jsx(s_,{status:C,highlightedCommand:R}),e[48]=C,e[49]=R,e[50]=L):L=e[50],L}function BMe(t){return t.author.role===ot.Tool}function UMe(t){return t.author.role===ot.Assistant}function rH(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function $Me(t){var o;if(!t)return;const e=(o=xo(t))!=null?o:"",[s,n]=ol(e,a=>a);if(n==null&&rH(s)){const a=s.setting_name;if(typeof a=="string")return a}}function HMe(t){var o;const e=(o=xo(t))!=null?o:"",[s,n]=ol(e,a=>a);if(n==null&&rH(s)){const a=s.setting_value;if(typeof a=="string")return a}}function GMe(t){var o;if(!t)return!1;const e=(o=xo(t))!=null?o:"",[s,n]=ol(e,a=>a);return n!=null?!1:s!=null&&typeof s=="object"&&!Array.isArray(s)?"error"in s:!1}function VMe({toolMessage:t,isRequestActive:e,hasError:s}){return s?_n.Error:t==null?e?_n.Running:_n.Stopped:kC(t)?_n.Finished:e?_n.Running:_n.Stopped}function zMe(t,e){if(aH(t)){const n=oH[t];if(n)return e.formatMessage(n)}const s=LMe(t.replace(/\./g," ").replace(/_/g," ").replace(/-/g," ")).trim();return s.length>0?s:void 0}function WMe(t){if(!(t!=null&&t.recipient))return;const[,e]=t.recipient.split(".",2);return e}const Vat=()=>r.jsxs("div",{className:"text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&]:mt-5",children:[r.jsx("div",{className:"text-token-text-tertiary px-5 text-sm",children:r.jsx(j,{id:"clarification.autoResponse",defaultMessage:"Auto response"})}),r.jsx("div",{className:"bg-token-message-surface relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-5 py-2.5",children:r.jsx(j,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})})]}),sE=ue(Ce,"e43eb6",20,20),zat=()=>r.jsx("div",{className:"flex w-full justify-end px-5 py-4",children:r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-1",children:[r.jsx(sE,{className:"size-5"}),r.jsx(j,{id:"operator.takeover.indicator",defaultMessage:"You took control"})]})});function qMe(t,e,s){var a,i,l,c;if(!t)return s.current=null,null;if(!e)return(i=(a=s.current)==null?void 0:a.message)!=null?i:null;const n=s.current;if(n&&n.threadId===t)return n.message;const o=(c=(l=Se.findFirstFromLeaf(e,u=>u.message.author.role===ot.Tool&&u.message.author.name==="n7jupd.metadata"))==null?void 0:l.message)!=null?c:null;return o&&(s.current={threadId:t,message:o}),o}function iH(t){const e=x.useRef(null);return Qe(t,s=>qMe(t,s,e),{disablePerfDetector:!0})}function KMe(t){var s;const e=iH(t);return((s=e==null?void 0:e.metadata)==null?void 0:s.n7jupd_local_safe_mode)===!0}const YMe=ue(Ce,"03424d",20,20),lH=118;function Wat(t){var l,c,u,d,f,m;const e=Tt(t),s=(l=Se.getCurrentNode(e))==null?void 0:l.message;if(!s||!cH(s)||(c=s.clientMetadata)!=null&&c.autoProceedCancelled||(u=s.metadata)!=null&&u.auto_proceed_cancelled)return!1;const n=Date.now(),o=((d=s.create_time)!=null?d:Date.now()/1e3)*1e3,a=(m=(f=s.metadata)==null?void 0:f.auto_proceed_timeout_seconds)!=null?m:lH;return Math.max(0,Math.ceil(a-(n-o)/1e3))>0}function cH(t){var e;return!!((e=t.metadata)!=null&&e.n7jupd_message&&t.channel==="commentary"&&t.end_turn===!0)}async function qat(t){const e=Rt(t);if(e)return nt(t,s=>{as.updateTree(s,(n,o)=>{n.updateNodeMetadata(o,{autoProceedCancelled:!0})})}),await de.safePost("/conversation/{conversation_id}/agent/cancel_auto_proceed",{parameters:{path:{conversation_id:e}}})}function QMe(t,e,s){const[n,o]=x.useState(()=>Date.now());x.useEffect(()=>{if(!s)return;const u=setInterval(()=>o(Date.now()),250);return()=>clearInterval(u)},[s]);const a=e-(n-t)/1e3,i=Math.max(0,a),l=Math.ceil(i),c=e===0?1:Math.min(1,Math.max(0,1-i/e));return{secondsDisplay:l,progress:c}}const JMe=({lastMessage:t,clientThreadId:e})=>{var p,g,h;const s=G(),n=Et(s,e),o=x.useRef(((p=t.create_time)!=null?p:Date.now()/1e3)*1e3),a=(h=(g=t.metadata)==null?void 0:g.auto_proceed_timeout_seconds)!=null?h:lH,{initialTimeLeft:i}=x.useMemo(()=>{const _=Date.now(),b=o.current,y=Math.ceil(a-(_-b)/1e3),v=(a-y)/a;return{initialTimeLeft:y,initialProgress:v}},[a]),[l,c]=x.useState(!1),{selectedSources:u}=Da(n.id),{secondsDisplay:d,progress:f}=QMe(o.current,a,l||i>0);x.useEffect(()=>{if(i<=0){c(!0);return}const _=setTimeout(()=>c(!0),i*1e3);return()=>clearTimeout(_)},[i]);const m=async()=>{c(!0),await Ao({conversation:n,eventSource:"mouse",promptMessage:cn("Continue",T({system_hints:[Pn]},u&&{selected_sources:fl(u)})),parentMessageId:t.id,completionMetadata:{systemHints:[Pn],conversationMode:{kind:Pt.PrimaryAssistant}}})};return i<-30?null:r.jsx("div",{className:"my-2 flex",children:r.jsxs(ke,{onClick:m,disabled:l,className:"relative min-w-32 overflow-hidden px-2 transition-all",contentWrapperClassName:"gap-2",children:[r.jsx("span",{className:"flex items-center gap-1",children:l?r.jsx(j,{id:"clarification.loading",defaultMessage:"Proceeding..."}):r.jsx(j,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})}),!l&&r.jsx(ZMe,{secondsDisplay:d,progress:f})]})})};function ZMe({secondsDisplay:t,progress:e,size:s=22,strokeWidth:n=2}){const o=(s-n)/2,a=2*Math.PI*o,i=a*(1-e),l=ne();return r.jsxs("div",{"aria-label":l.formatMessage({id:"clarification.secondsRemaining",defaultMessage:"{seconds} seconds remaining"},{seconds:t.toString()}),className:"relative inline-flex items-center justify-center",style:{width:s,height:s},children:[r.jsxs("svg",{width:s,height:s,className:"block",children:[r.jsx("circle",{cx:s/2,cy:s/2,r:o,stroke:"currentColor",strokeOpacity:.3,strokeWidth:n,fill:"none"}),r.jsx("circle",{cx:s/2,cy:s/2,r:o,stroke:"currentColor",strokeWidth:n,fill:"none",strokeDasharray:a,strokeDashoffset:i,style:{transition:"stroke-dashoffset 100ms linear"},transform:"rotate(-90 ".concat(s/2," ").concat(s/2,")")})]}),r.jsx("span",{className:"absolute text-[9px] leading-none font-medium",style:{fontVariantNumeric:"tabular-nums"},children:t})]})}const uH=ue(Ce,"f1b997",20,20),X2=Ne({heading:{id:"odyssey.openTabs.heading",defaultMessage:"Relevant tabs"},safeModeTooltip:{id:"odyssey.openTabs.safeModeTooltip",defaultMessage:"This tab is in logged out mode"}});function B4(t){"use forget";const e=F.c(19),{tabs:s,clientThreadId:n,className:o,onTabClick:a,detailed:i,isSafeMode:l}=t,c=l===void 0?!1:l,u=ne();let d;e[0]!==u||e[1]!==c?(d=c?u.formatMessage(X2.safeModeTooltip):void 0,e[0]=u,e[1]=c,e[2]=d):d=e[2];const f=d;if(!s||s.length===0)return null;let m;e[3]!==o?(m=z("flex flex-col",o),e[3]=o,e[4]=m):m=e[4];let p;if(e[5]!==n||e[6]!==i||e[7]!==a||e[8]!==f||e[9]!==s){let h;e[11]!==n||e[12]!==i||e[13]!==a||e[14]!==f?(h=(_,b)=>{var y;return r.jsx("div",{className:z(b>0&&"border-token-border-subtle border-t"),children:r.jsx("button",{type:"button",onClick:()=>{a?a(_):tNe(_,n)},className:"hover:bg-token-bg-secondary focus-visible:ring-token-text-tertiary w-full cursor-pointer p-3 text-start transition-colors focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:outline-hidden",children:i?r.jsx(eNe,{tab:_,safeModeLabel:f}):r.jsx(XMe,{tab:_,safeModeLabel:f})})},(y=_.id)!=null?y:"".concat(_.url,"-").concat(b))},e[11]=n,e[12]=i,e[13]=a,e[14]=f,e[15]=h):h=e[15],p=s.map(h),e[5]=n,e[6]=i,e[7]=a,e[8]=f,e[9]=s,e[10]=p}else p=e[10];let g;return e[16]!==m||e[17]!==p?(g=r.jsx("div",{className:m,children:p}),e[16]=m,e[17]=p,e[18]=g):g=e[18],g}const XMe=t=>{"use forget";var b,y,v;const e=F.c(25),{tab:s,safeModeLabel:n}=t;let o;e[0]!==s.url?(o=Af(s.url),e[0]=s.url,e[1]=o):o=e[1];const a=o,i=(b=a==null?void 0:a.Icon)!=null?b:null;let l;e[2]!==s.title||e[3]!==s.url?(l=((y=s.title)==null?void 0:y.trim())||i_(s.url),e[2]=s.title,e[3]=s.url,e[4]=l):l=e[4];const c=l;let u;e[5]!==(a==null?void 0:a.type)||e[6]!==s.url?(u=(v=a==null?void 0:a.type)!=null?v:i_(s.url),e[5]=a==null?void 0:a.type,e[6]=s.url,e[7]=u):u=e[7];const d=u;let f;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==s.url?(f=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(Kn,{url:s.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(ea,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=s.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let p;e[14]!==d?(p=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:d}),e[14]=d,e[15]=p):p=e[15];let g;e[16]!==m||e[17]!==p?(g=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,p]}),e[16]=m,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==n?(h=n?r.jsx(dH,{label:n}):null,e[19]=n,e[20]=h):h=e[20];let _;return e[21]!==f||e[22]!==g||e[23]!==h?(_=r.jsxs("div",{className:"flex items-center gap-3",children:[f,g,h]}),e[21]=f,e[22]=g,e[23]=h,e[24]=_):_=e[24],_},eNe=t=>{"use forget";var b,y,v;const e=F.c(25),{tab:s,safeModeLabel:n}=t;let o;e[0]!==s.url?(o=Af(s.url),e[0]=s.url,e[1]=o):o=e[1];const a=o,i=(b=a==null?void 0:a.Icon)!=null?b:null;let l;e[2]!==s.title||e[3]!==s.url?(l=((y=s.title)==null?void 0:y.trim())||i_(s.url),e[2]=s.title,e[3]=s.url,e[4]=l):l=e[4];const c=l;let u;e[5]!==(a==null?void 0:a.type)||e[6]!==s.url?(u=(v=a==null?void 0:a.type)!=null?v:i_(s.url),e[5]=a==null?void 0:a.type,e[6]=s.url,e[7]=u):u=e[7];const d=u;let f;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==s.url?(f=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(Kn,{url:s.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(ea,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=s.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let p;e[14]!==d?(p=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:d}),e[14]=d,e[15]=p):p=e[15];let g;e[16]!==m||e[17]!==p?(g=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,p]}),e[16]=m,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==n?(h=n?r.jsx(dH,{label:n}):null,e[19]=n,e[20]=h):h=e[20];let _;return e[21]!==f||e[22]!==g||e[23]!==h?(_=r.jsxs("div",{className:"flex items-center gap-3 px-3",children:[f,g,h]}),e[21]=f,e[22]=g,e[23]=h,e[24]=_):_=e[24],_},dH=t=>{"use forget";const e=F.c(6),{label:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(uH,{className:"icon-sm","aria-hidden":"true"}),e[0]=n):n=e[0];let o;e[1]!==s?(o=r.jsx("span",{className:"text-token-text-tertiary inline-flex items-center justify-center",role:"img","aria-label":s,children:n}),e[1]=s,e[2]=o):o=e[2];let a;return e[3]!==s||e[4]!==o?(a=r.jsx(It,{label:s,side:"top",className:"ms-auto inline-flex items-center justify-center",children:o}),e[3]=s,e[4]=o,e[5]=a):a=e[5],a};function tNe(t,e){if(t!=null&&t.url){try{const s=Rt(e);if(s){const n=Bc();n==null||n.openAgentTabs(s,[t.url]);return}}catch(s){Ls.error("openTabs via host failed",{error:s})}try{const s=window.open(t.url,"_blank","noopener,noreferrer");s==null||s.focus()}catch(s){Ls.error("openTabs fallback failed",{error:s})}}}function i_(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch(e){return t}}const sNe=Pe(()=>me(()=>import("./msku76juvh0p7yqn.js"),__vite__mapDeps([227,1,3,4])).then(t=>t.OdysseyTakeoverNuxModal)),nNe=()=>{"use no forget";const t=G(),e=Ct(We.hasSeenOdysseyTakeoverModal),{clientThreadId:s}=rn(),n=Qe(s!=null?s:void 0,l=>Se.findNode(l,c=>c.message.author.name==="n7jupd.metadata"));if(!s)return()=>{Ls.info("VNC modal opened without a client thread id")};const o=async l=>{const c=Rt(l);if(c)return await de.safePost("/conversation/{conversation_id}/agent/resume",{parameters:{path:{conversation_id:c}}})},a=()=>{var c,u;if(!bs()||!((c=n==null?void 0:n.message.metadata)!=null&&c.kaur1br5_mode))return Promise.resolve(!1);const l=Rt(s);if(!l)return Ls.info("Agent viewer opened without a server thread id"),Promise.resolve(!1);try{const d=Bc(),f=(u=d==null?void 0:d.tryOpenAgentViewer(l))!=null?u:!1;return Promise.resolve(f)}catch(d){return Ls.error("Failed to open local agent viewer - error thrown"),Promise.resolve(!1)}},i=async()=>{var c;if(await a()){Ls.info("Opened VNC modal with local agent viewer");return}rn.setState({isResuming:!0}),rn.setState({isOpen:!0}),tn.setSidebarOpen(!1);let l;Ge.addAction("agent.conversation.resume_rpc_attempted",{client_thread_id:s});try{l=await o(s),l?Ge.addAction("agent.conversation.resume_rpc_succeeded",{client_thread_id:s,vm_id:(c=l.vm_id)!=null?c:""}):Ge.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:s,reason:"no_response"})}catch(u){Ge.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:s,reason:"exception",error:u})}rn.setState({isResuming:!1,vmId:l==null?void 0:l.vm_id}),fH({})};return async()=>{if(e.eligible){mt(t,sNe,{onConfirm:async()=>{_t(t,We.hasSeenOdysseyTakeoverModal),await i()}});return}await i()}},oNe=async(t,e,{startNewTurn:s})=>{rn.setState({isOpen:!1}),await mH(t,e,{startNewTurn:s})},fH=async({showPlaceholderMessage:t=!1})=>{var n;rn.setState({isTakeoverInProgress:!0});const{clientThreadId:e}=rn.getState();if(!e){Ls.info("VNC takeover started without a client thread id");return}t&&wme(e);const s=await aNe();rn.setState({parentMessageId:(n=s==null?void 0:s.last_message_id)!=null?n:null})},mH=async(t,e,{startNewTurn:s,skipTakeoverAfterAbort:n=void 0},o)=>{rn.setState({isTakeoverInProgress:!1});const{clientThreadId:a}=rn.getState();if(!a){Ls.info("VNC modal closed without a client thread id");return}if(!s)return;const i=rNe(),{abortPromise:l}=rn.getState();l&&n&&(await l,await n())||(ZL(a),await Ao({conversation:Et(t,a),eventSource:"mouse",promptMessage:Rk(e,o),parentMessageIdPromise:i,completionMetadata:{systemHints:[Pn],conversationMode:{kind:Pt.PrimaryAssistant}}}))},aNe=()=>{const{clientThreadId:t}=rn.getState();if(!t)return Ls.info("stopAgent called without a client thread id"),Promise.resolve(void 0);const e=Px(t,void 0,{clientInitiated:!0,reason:"takeover",isLastTurnAgent:!0}).then(s=>s).finally(()=>{rn.setState({abortPromise:null})});return rn.setState({abortPromise:e}),e},rNe=(t=5e3)=>new Promise(e=>{const{parentMessageId:s}=rn.getState();if(s)return e(s);const n=setTimeout(()=>{o(),e(void 0)},t),o=rn.subscribe(a=>{a.parentMessageId&&(e(a.parentMessageId),clearTimeout(n),o())})}),iNe=()=>{"use forget";const t=F.c(5),e=nNe();let s;t[0]!==e?(s=l=>({token:l.token,clientThreadId:l.clientThreadId,isOpen:l.isOpen,isTakeoverInProgress:l.isTakeoverInProgress,isResuming:l.isResuming,vmId:l.vmId,open:e,close:oNe}),t[0]=e,t[1]=s):s=t[1];const n=rn(s),a=!Z_();let i;return t[2]!==a||t[3]!==n?(i=U(T({},n),{isVNCEnabled:a}),t[2]=a,t[3]=n,t[4]=i):i=t[4],i},Kat=t=>{"use forget";var C,w,k,E;const e=F.c(33),{currentGroupedMessage:s,isLastMessage:n,isLastTurnInConversation:o,conversation:a,turnIndex:i,lastAgentMetadataNode:l}=t,c=!!((C=l==null?void 0:l.metadata)!=null&&C.kaur1br5_mode);let u,d;e[0]!==(s==null?void 0:s.messages)||e[1]!==o?(u=Qo(s==null?void 0:s.messages),d=o&&u&&cH(u)&&!((w=u.metadata)!=null&&w.auto_proceed_cancelled)&&!((k=u.clientMetadata)!=null&&k.autoProceedCancelled),e[0]=s==null?void 0:s.messages,e[1]=o,e[2]=u,e[3]=d):(u=e[2],d=e[3]);const f=d;let m;e:{if(!((E=u==null?void 0:u.metadata)!=null&&E.open_tabs)){let N;e[4]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[4]=N):N=e[4],m=N;break e}let M;e[5]!==u.metadata.open_tabs?(M=u.metadata.open_tabs.filter(dNe),e[5]=u.metadata.open_tabs,e[6]=M):M=e[6],m=M}let p;e[7]!==m?(p=m.filter(fNe),e[7]=m,e[8]=p):p=e[8];const g=p,h=g.length>0&&c;let _;e[9]!==a||e[10]!==u||e[11]!==g||e[12]!==h?(_=h&&(u==null?void 0:u.id)&&r.jsx(lNe,{openTabList:g,clientThreadId:a.id,messageId:u.id}),e[9]=a,e[10]=u,e[11]=g,e[12]=h,e[13]=_):_=e[13];let b;e[14]!==a||e[15]!==u||e[16]!==f||e[17]!==i?(b=f&&r.jsx(JMe,{clientThreadId:a.id,lastMessage:u,turnIndex:i}),e[14]=a,e[15]=u,e[16]=f,e[17]=i,e[18]=b):b=e[18];let y;e[19]!==n||e[20]!==o?(y=o&&n&&r.jsx(rT,{children:mNe}),e[19]=n,e[20]=o,e[21]=y):y=e[21];let v;e[22]!==a||e[23]!==s||e[24]!==c||e[25]!==n||e[26]!==o?(v=r.jsx(cNe,{conversation:a,currentGroupedMessage:s,isLastMessage:n,isLastTurnInConversation:o,isKAUR1BR5:c}),e[22]=a,e[23]=s,e[24]=c,e[25]=n,e[26]=o,e[27]=v):v=e[27];let S;return e[28]!==_||e[29]!==b||e[30]!==y||e[31]!==v?(S=r.jsxs("div",{className:"my-2 flex flex-col",children:[_,b,y,v]}),e[28]=_,e[29]=b,e[30]=y,e[31]=v,e[32]=S):S=e[32],S};function lNe(t){"use forget";const e=F.c(30),{openTabList:s,clientThreadId:n,messageId:o}=t,[a,i]=x.useState(!1),{openThreadSidebar:l}=Er(),c=sn(Ss),u=KMe(n);let d;e[0]!==s?(d=s.slice(0,3),e[0]=s,e[1]=d):d=e[1];const f=d,m=s.length>1&&s.length!==f.length;let p;e[2]!==c||e[3]!==o||e[4]!==s||e[5]!==l?(p=()=>{if(c){i(!0);return}l({type:"n7jupdTabs",messageId:o,tabs:s})},e[2]=c,e[3]=o,e[4]=s,e[5]=l,e[6]=p):p=e[6];const g=p;let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"flex items-center py-0.5",children:r.jsx(j,T({},X2.heading))}),e[7]=h):h=e[7];let _;e[8]!==g||e[9]!==s.length||e[10]!==m?(_=m&&r.jsxs(ke,{onClick:g,color:"ghost",className:"text-token-text-secondary rounded-lg font-normal",contentWrapperClassName:"gap-1",children:[r.jsx(j,{id:"BrbWdy",defaultMessage:"View {count} tabs",values:{count:s.length}}),r.jsx(YMe,{className:"icon-sm"})]}),e[8]=g,e[9]=s.length,e[10]=m,e[11]=_):_=e[11];let b;e[12]!==_?(b=r.jsxs("div",{className:"text-token-text-primary flex items-center justify-between px-3 py-2 text-sm font-medium",children:[h,_]}),e[12]=_,e[13]=b):b=e[13];let y;e[14]!==n||e[15]!==u||e[16]!==f?(y=r.jsx(B4,{tabs:f,clientThreadId:n,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:u}),e[14]=n,e[15]=u,e[16]=f,e[17]=y):y=e[17];let v;e[18]!==b||e[19]!==y?(v=r.jsxs("div",{className:"border-token-border-subtle bg-token-bg-secondary/30 text-token-text-primary w-full max-w-[360px] overflow-hidden rounded-2xl border",children:[b,y]}),e[18]=b,e[19]=y,e[20]=v):v=e[20];let S;e[21]!==n||e[22]!==c||e[23]!==a||e[24]!==u||e[25]!==s?(S=c&&r.jsx(Ft,{headerClassName:"ps-6! pe-5!",isOpen:a,showCloseButton:!0,onClose:()=>i(!1),testId:"modal-odyssey-open-tabs",title:r.jsx("div",{className:"flex w-full items-center text-[15px] font-medium",children:r.jsx(j,T({},X2.heading))}),noPadding:!0,children:r.jsx(B4,{tabs:s,clientThreadId:n,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:u,detailed:!0})}),e[21]=n,e[22]=c,e[23]=a,e[24]=u,e[25]=s,e[26]=S):S=e[26];let C;return e[27]!==v||e[28]!==S?(C=r.jsxs(r.Fragment,{children:[v,S]}),e[27]=v,e[28]=S,e[29]=C):C=e[29],C}const cNe=t=>{"use forget";var E;const e=F.c(16),{conversation:s,currentGroupedMessage:n,isLastMessage:o,isLastTurnInConversation:a,isKAUR1BR5:i}=t,{formatMessage:l}=ne(),{open:c,isVNCEnabled:u}=iNe(),{selectedSources:d}=Da(s.id),f=G(),m=Ee(f,"733205176");let p;e:{if(!u){p=null;break e}if(!m){p=null;break e}if(!o||!a){p=null;break e}if(n.type!==ei.Text){p=null;break e}p=n.messages[0]}const g=p;if(!g)return null;const h=(E=g.metadata)==null?void 0:E.n7jupd_button_type;if(!h||h==="confirmation"||(h==="takeover"||h==="login")&&i)return null;let _;e[0]!==s||e[1]!==g.id||e[2]!==d?(_=async()=>{await Ao({conversation:s,eventSource:"mouse",promptMessage:cn("Yes, please proceed",T({system_hints:[Pn]},d&&{selected_sources:fl(d)})),parentMessageId:g.id,completionMetadata:{systemHints:[Pn],conversationMode:{kind:Pt.PrimaryAssistant}}})},e[0]=s,e[1]=g.id,e[2]=d,e[3]=_):_=e[3];const b=_;let y;e[4]!==c||e[5]!==b?(y=M=>{switch(M){case"takeover":return c();case"login":return c();case"confirmation":return b()}},e[4]=c,e[5]=b,e[6]=y):y=e[6];const v=y;let S;e[7]!==v||e[8]!==h?(S=()=>v(h),e[7]=v,e[8]=h,e[9]=S):S=e[9];const C=uNe[h];let w;e[10]!==l||e[11]!==C?(w=l(C),e[10]=l,e[11]=C,e[12]=w):w=e[12];let k;return e[13]!==S||e[14]!==w?(k=r.jsx("div",{className:"my-2 flex",children:r.jsx(ke,{onClick:S,children:w})}),e[13]=S,e[14]=w,e[15]=k):k=e[15],k},uNe=Ne({takeover:{id:"odyssey-message-indicator.takeover",defaultMessage:"Take over"},login:{id:"odyssey-message-indicator.login",defaultMessage:"Log in"},confirmation:{id:"odyssey-message-indicator.confirm",defaultMessage:"Confirm"}});function dNe(t){return t.url==="about:blank"?!1:!(t.url==="https://openai.com/"&&!t.selected)}function fNe(t){var s;const e=(s=t.url)==null?void 0:s.trim().toLowerCase();return e&&e!=="about:blank"&&e!==""}function mNe(t){const{isScheduled:e,isScheduledRun:s}=t;return e&&!s&&r.jsx(X1e,{})}function pNe(n){var o=n,{onChange:t,target:e}=o,s=De(o,["onChange","target"]);if(!e)return;const a=T({childList:!0,subtree:!0},s),i=new MutationObserver(c=>{t(c)});function l(){try{i.disconnect()}catch(c){}}return i.observe(e,a),l}const gNe=()=>{};function hNe(t){return x.useCallback(e=>t?e(console.log.bind(console)):gNe,[t])}const _Ne=".markdown:is(.streaming-animation,.result-streaming)",Yat=x.memo(function(e){const{debug:s,isStreaming:n}=e,o=x.useRef(-1),a=hNe(s),i=x.useRef(null),[l,c]=x.useState([]),u=x.useCallback(m=>{const p=m.dataset.start,g=m.tagName.toLowerCase(),h="--streaming-".concat(g,"-").concat(p),b={height:0,ready:!1,selector:"".concat(g,'[data-start="').concat(p,'"]'),target:m,variableName:h},y=lg({axis:"height",target:m,onChange({height:v}){var E;const S=m.dataset.end,C=m.dataset.isLastNode==="",w=["table","pre"].includes(g)&&C;if(a(M=>M("".concat(g,"-").concat(p),{observedElement:b,height:v,canLookAhead:w,isLastNode:C})),!b.ready){const M=w&&xNe(p,S,15),N=v>0;(M||N)&&(b.ready=!0,o.current=vNe(S))}const k=typeof b.height=="number"&&v<b.height;b.ready&&!k&&(b.height=v,(E=i.current)==null||E.style.setProperty(h,"".concat(v,"px")))}});b.unsubscribe=y,c(v=>[...v,b])},[a]),d=x.useCallback(m=>pNe({onChange(p){const{added:g}=bNe(p);for(const h of g)u(h)},target:m,subtree:!0,childList:!0}),[u]);x.useEffect(()=>{if(!n)return;let m;function p(h){i.current=h,m=d(h)}function g(h){const _=document.querySelector(_Ne);_?h(_):requestAnimationFrame(()=>{g(h)})}return g(p),()=>{window.setTimeout(()=>{if(s){a(h=>h("Animations complete, preserving state in debug mode."));return}m==null||m(),c([]),o.current=-1},500)}},[n,s,d,a]);const f=l.map(({selector:m,variableName:p})=>"".concat(m," { --streaming-reveal-amount: var(").concat(p,", 0) }")).join("\n");return r.jsx("style",{children:f})});function xNe(t,e,s){if(t===void 0||e===void 0)return!0;const n=parseInt(t,10),o=parseInt(e,10);return isNaN(n)||isNaN(o)?!0:o-n>=s}function yNe(t){return t instanceof HTMLElement?["PRE","TABLE"].includes(t.tagName):!1}function bNe(t){return{added:t.flatMap(s=>Array.from(s.addedNodes)).filter(yNe)}}function vNe(t){return t?parseInt(t,10):-1}function SNe(t){return gr.isMultimodalTextMessage(t)?t.content.parts.flatMap(e=>typeof e!="string"&&e.content_type===Yo.VideoAssetPointer?e:null).filter(e=>!!e):[]}const CNe=(t,e)=>{var a;const s={"video/mp4":"mp4","video/quicktime":"mov"},n={mp4:"mp4",mov:"mov"},o=(a=e.split(".").pop())==null?void 0:a.toLowerCase();return s[t]||n[o!=null?o:""]||void 0};function wNe(t){"use forget";const e=F.c(7),[s,n]=x.useState(null),o=Gt();let a,i;e[0]!==t.assetPointer||e[1]!==t.serverThreadId||e[2]!==o?(a=()=>{t.assetPointer&&jl.fetch(o,{asset:t.assetPointer,conversationId:t.serverThreadId}).then(c=>{n(c.url)})},i=[o,t.assetPointer,t.serverThreadId],e[0]=t.assetPointer,e[1]=t.serverThreadId,e[2]=o,e[3]=a,e[4]=i):(a=e[3],i=e[4]),x.useEffect(a,i);let l;return e[5]!==s?(l=s?r.jsx("video",{controls:!0,src:s,className:"w-full"}):null,e[5]=s,e[6]=l):l=e[6],l}function Qat(t){"use forget";var f,m;const e=F.c(5),{message:s,isUserTurn:n,clientThreadId:o}=t,a=SNe(s),i=Bs(o);if(a.length===0||!n)return null;const l=(m=(f=a[0].metadata)==null?void 0:f.transcription)==null?void 0:m.text,c=z("mt-2 text-sm italic",{"opacity-65":l,"opacity-30":!l});let u;e[0]!==l?(u=l!=null?l:r.jsx(j,T({},kNe.transcriptUnavailable)),e[0]=l,e[1]=u):u=e[1];let d;return e[2]!==c||e[3]!==u?(d=r.jsx("div",{className:c,children:u}),e[2]=c,e[3]=u,e[4]=d):d=e[4],r.jsxs("div",{className:"flex max-w-[400px] flex-col justify-end self-end",children:[r.jsx(wNe,{assetPointer:a[0],serverThreadId:i}),d]})}const kNe=Ne({transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}}),pH=ue(Ce,"29f921",20,20),TNe=ue(Ce,"dc94ab",20,20);function ENe(t){const e=Math.floor(t/60),s=Math.floor(e/60),n=String(Math.floor(t)%60).padStart(2,"0"),o=String(e%60).padStart(2,"0");return s===0?"".concat(o,":").concat(n):"".concat(s,":").concat(o,":").concat(n)}function MNe(t){var s;const e=(s=t==null?void 0:t.audio_asset_pointer)==null?void 0:s.metadata;if((e==null?void 0:e.start)!==void 0&&(e==null?void 0:e.end)!==void 0)return e.end-e.start}const Jat=x.memo(function(e){const s=ne(),{content:n,metadata:o}=e.message;if(!(n.content_type==="multimodal_text"&&e.isUserTurn))return;const i=n.parts.filter(gr.isPartRealTimeUserAudioVideoAssetPointer).find(c=>c.audio_asset_pointer),l=MNe(i);return r.jsxs("div",{className:"text-token-text-secondary my-2 me-4 flex flex-row justify-end gap-1 text-xs",children:[(o==null?void 0:o.real_time_audio_has_video)&&r.jsx(TNe,{"aria-label":s.formatMessage({id:"/nS9Zn",defaultMessage:"Recorded with video or screenshare"}),className:"icon-sm"}),i&&r.jsx(pH,{"aria-label":s.formatMessage({id:"eP1JEa",defaultMessage:"Recorded with voice"}),className:"icon-sm"}),l!==void 0&&r.jsx("span",{className:"font-semibold",children:ENe(l)})]})});function l_(t){if(t.buffer instanceof ArrayBuffer)return t;const e=new Uint8Array(t.byteLength);return e.set(t),e}function i0(){"use forget";var u,d,f,m,p,g,h;const t=F.c(8),{data:e}=Jd(),s=gH(),n=(u=e==null?void 0:e.settings)==null?void 0:u[Qt.VoiceName];let o;t[0]!==s||t[1]!==n?(o=_H(n,s),t[0]=s,t[1]=n,t[2]=o):o=t[2];const a=(f=(d=e==null?void 0:e.settings)==null?void 0:d[Qt.VoiceMainLanguage])!=null?f:fm.Auto,i=!!((m=e==null?void 0:e.settings)!=null&&m[Qt.TrainingAllowed]&&((p=e==null?void 0:e.settings)!=null&&p[Qt.VoiceTrainingAllowed])),l=!!((g=e==null?void 0:e.settings)!=null&&g[Qt.TrainingAllowed]&&((h=e==null?void 0:e.settings)!=null&&h[Qt.VideoTrainingAllowed]));let c;return t[3]!==o||t[4]!==a||t[5]!==i||t[6]!==l?(c={voiceName:o,voiceMainLanguage:a,voiceTrainingAllowed:i,videoTrainingAllowed:l},t[3]=o,t[4]=a,t[5]=i,t[6]=l,t[7]=c):c=t[7],c}function gH(){const t=hH(),e=X6().locale;return x.useCallback(()=>{if(t.length===0)return"juniper";let s=t[0].voice;return e.startsWith("zh")&&(s="cove"),s},[t,e])}function hH(){var s;const t=(s=qo(Qt.VoiceMainLanguage))==null?void 0:s.data,{data:e}=dt({queryKey:["getUserSettingVoices",t],queryFn:()=>de.safeGet("/settings/voices",{authOption:is.SendIfAvailable})});return e?e.voices:[]}function _H(t,e){return t==="sky"?"juniper":t!=null?t:e()}function nE(){if(typeof window<"u"&&"MediaSource"in window){const t=e=>oZ(e)&&MediaSource.isTypeSupported(e);if(t("audio/aac"))return"aac";if(t("audio/mpeg"))return"mp3";if(t("audio/ogg"))return"opus"}}function NNe({conversationId:t,messageId:e}){const{voiceName:s}=i0(),n=()=>de.safeGet("/synthesize",{parameters:{query:{message_id:e,conversation_id:t,voice:s,format:nE()}},skipJsonTransform:!0}),o="".concat(t,".").concat(e,".").concat(s);return ANe(n,o)}function ANe(t,e){var p;const[s,n]=x.useState(!1),o=x.useRef({isMediaSourceAvailable:oE(),mediaSourceFormat:(p=nE())!=null?p:"n/a",playPromise:null,shouldAbortQueuedPlayback:!1}).current,a=ne(),i=Kt(),l=lw(),c=cw(g=>{var h;return g.isPlaying&&g.sourceUrl===((h=Fo.get(e))==null?void 0:h.src)}),u=x.useCallback(async()=>{if(!l||!t)return;n(!0);const g={isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat};try{const h=await INe({key:e,onStreamingError:_=>{Jt.readAloud.error(_,g),n(!1),i.danger(a.formatMessage(mh.playbackError,{error:_.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:mh.playbackError.defaultMessage,loggingDescription:_.message})},onStreamingStart:()=>{n(!1)},fetchAudioDataResponse:t});if(o.shouldAbortQueuedPlayback){o.shouldAbortQueuedPlayback=!1;return}l.changeSource(h),o.playPromise=l.play()}catch(h){Jt.readAloud.error(h,g),n(!1),i.danger(a.formatMessage(mh.playbackError,{error:h.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:mh.playbackError.defaultMessage,loggingDescription:h.message})}},[l,o,e,i,a,t]),d=x.useCallback(()=>{const g=Qv();g&&(o.playPromise?o.playPromise.then(()=>{g.stop(),o.playPromise=null}):g.stop())},[o]),f=x.useCallback(()=>{var h;const g=Qv();g&&(g.state.isPlaying&&g.state.sourceUrl===((h=Fo.get(e))==null?void 0:h.src)?d():(Jt.readAloud.click({isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat}),u()))},[e,o,u,d]);x.useEffect(()=>{s&&c&&n(!1)},[s,c]);const m=x.useRef(e);return x.useEffect(()=>{m.current=e}),x.useEffect(()=>(o.shouldAbortQueuedPlayback=!1,()=>{var _;const g=e9();g.isPlaying&&g.sourceUrl===((_=Fo.get(m.current))==null?void 0:_.src)?d():o.shouldAbortQueuedPlayback=!0}),[o,d]),{togglePlayback:f,isPlaying:c,isLoading:s}}async function xH(t){var n;const e=await t(),s=(n=e.headers.get("content-type"))!=null?n:"audio/aac";return{response:e,format:s}}async function INe(t){return oE()?PNe(t):jNe(t)}async function jNe({key:t,fetchAudioDataResponse:e}){const s=Fo.get(t);if(s!=null&&s.blob)return s.src;const{response:n,format:o}=await xH(e),a=await n.arrayBuffer(),i=new Blob([a],{type:o}),l=yH({key:t,src:URL.createObjectURL(i),format:o,blob:i});return Fo.set(t,l),l.src}async function PNe({key:t,onStreamingError:e,onStreamingStart:s,fetchAudioDataResponse:n}){let o=Fo.get(t);o!=null&&o.streaming&&(Fo.delete(t),o=null);let a,i;const l=ONe(),c=new l;if(o)a=o,a.src=URL.createObjectURL(c);else{const{format:f,response:m}=await xH(n);i=m,a=yH({key:t,src:URL.createObjectURL(c),format:f})}const u=RNe(a.id),d={sourceopen:async()=>{var p,g;u("sourceopen");const f=c.addSourceBuffer(a.format),m=async()=>{f.updating&&await new Promise(h=>f.addEventListener("updateend",h,{once:!0}))};if(a.segments.length&&!a.streaming){u("streaming from cache"),a.streaming=!0,s();for(const h of a.segments)f.appendBuffer(l_(h)),await m();c.readyState==="open"&&c.endOfStream(),a.streaming=!1,u("done streaming from cache");return}if(i){u("fetching audio");try{const h=(p=i.body)==null?void 0:p.getReader();if(!h)return;for(;((g=Fo.get(t))==null?void 0:g.id)===a.id;){const{done:_,value:b}=await h.read();if(_){u("done streaming"),a.streaming=!1,c.readyState==="open"&&c.endOfStream();break}if(!b)continue;if(!Array.from(c.sourceBuffers).includes(f)){u("stop streaming, source buffer removed"),a.streaming=!1;break}a.streaming||(u("start streaming"),a.streaming=!0,s());const y=l_(b);f.appendBuffer(y),a.segments.push(y),await m()}}catch(h){if(u("error while streaming",h),a.streaming=!1,c.readyState==="open")try{c.endOfStream("network")}catch(_){Jt.readAloud.error(_)}Fo.delete(t),e(h)}}},sourceclose:()=>{var f;u("sourceclose"),a.streaming&&(a.streaming=!1,((f=Fo.get(t))==null?void 0:f.id)===a.id&&(u("sourceclosed while streaming, cleaning up cache"),Fo.delete(t)))},sourceended:Tn};for(const[f,m]of Object.entries(d))c.addEventListener(f,()=>{try{return m()}catch(p){Jt.readAloud.error(p)}});return Fo.set(t,a),a.src}const mh=Ne({playbackError:{id:"useVoiceReadAloudAudio.playbackError",defaultMessage:"Failed to play message"}}),RNe=t=>Tn;function ONe(){return oE()?window.MediaSource:null}function oE(){return!!nE()}const yH=t=>T({id:Ds(),segments:[],streaming:!1},t),Fo=new zTe({capacity:50,dispose:t=>{URL.revokeObjectURL(t.src)}}),bH=ue(Ce,"b26965",20,20),mg=ue(Ce,"29a5ec",20,20),LNe=ue(Ce,"334d9b",20,20);async function aE(t){const e=await me(()=>import("./km71i01x6ma5r62b.js").then(s=>s.i),__vite__mapDeps([134,1]));if(vc!=null&&(t!=null&&t.startsWith(vc)))return!0;try{return e.get(new URL(t!=null?t:"").hostname)==="openai.com"}catch(s){return!1}}function rE(t,e,s){return de.safeGet("/conversation/{conversation_id}/url_safe",{parameters:{path:{conversation_id:t},query:{url:e,history_and_training_disabled:s}}})}function DNe(t,e){const s=G(),n=oe(()=>af(s)),o=!ut();return dt({queryKey:["safe-url",{serverThreadId:t,url:e,isHistoryAndTrainingDisabled:n}],queryFn:async()=>{if(t==null||e==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await aE(e)||Se.isThreadUrlSafe(Tt(t),e)?{safe:!0}:o?{safe:!1}:rE(t,e,n)},enabled:t!=null&&e!=null})}function FNe(t,e,s=!0){const n=Qe(t,a=>e!=null&&Se.isThreadUrlSafe(a,e)),{data:{safe:o}={}}=DNe(t,n?void 0:e);return n||o||!s?e:void 0}function Zat(t,e,s=!0){const n=BNe(e,500);return FNe(t,n,s)}function BNe(t,e){const[s,n]=x.useState(void 0),[o]=x.useState(()=>di(a=>{n(a)},e));return x.useEffect(()=>{o(t)},[o,t]),s===t?t:void 0}function Xat(t,e){const s=G(),n=oe(()=>af(s)),o=Qe(t,i=>{var l;return(l=i==null?void 0:i.safeUrls)!=null?l:[]}),{data:a=[]}=dt({queryKey:["safe-urls",t,e,n,o],queryFn:async()=>{const i=o.filter(d=>e.includes(d)),l=e.filter(d=>!i.includes(d)),u=(await Promise.allSettled(l.map(async d=>{if(await aE(d))return d;if(t==null)return null;try{return(await rE(t,d,n)).safe?d:null}catch(m){return null}}))).map(d=>d.status==="fulfilled"?d.value:null).filter(d=>d!=null);return i.concat(u)},enabled:t!=null&&e.length>0});return a}async function UNe(t,e){const{isKnownSafeUrl:s,isUrlMarkedSafeInThread:n,serverCheck:o,isHistoryAndTrainingDisabled:a}=e,i=t.filter(f=>!n(f));if(i.length===0)return[];const l=await Promise.all(i.map(f=>s(f))),c=i.filter((f,m)=>!l[m]);if(c.length===0)return[];if(!o)return c;const u=await Promise.allSettled(c.map(async f=>{try{return await o(f,a)?null:f}catch(m){return f}})),d=[];return u.forEach((f,m)=>{const p=c[m];f.status==="fulfilled"?typeof f.value=="string"&&d.push(f.value):d.push(p)}),d}function $Ne(t,e,s){const n=Tt(e),o=Rt(e);return UNe(s,{isKnownSafeUrl:aE,isUrlMarkedSafeInThread:a=>Se.isThreadUrlSafe(n,a),serverCheck:o!=null?async(a,i)=>(await rE(o,a,i)).safe:void 0,isHistoryAndTrainingDisabled:xt(()=>af(t))})}const pg=Zt(t=>({targetedContent:void 0,setTargetedContent:e=>{t({targetedContent:e})}})),HNe=t=>{"use forget";const e=F.c(3),s=x.useRef(void 0);let n,o;return e[0]!==t?(n=()=>{s.current=t},o=[t],e[0]=t,e[1]=n,e[2]=o):(n=e[1],o=e[2]),x.useEffect(n,o),s};function U4(){return" "}const $4=t=>["conversation","init",t],GNe=({clientThreadId:t,conversationMode:e,clientModelId:s,enabled:n},o,a,i)=>{var f;const l=uw(e),u=(f=new URLSearchParams(i).get(t9))!=null?f:void 0,d=wl(t)?null:t;return{gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:"always",queryKey:$4(t),queryFn:()=>{let m=de.safePost("/conversation/init",{requestBody:{gizmo_id:l,requested_default_model:s,conversation_id:d,timezone_offset_min:new Date().getTimezoneOffset(),conversation_owner_id:u},authOption:is.SendIfAvailable});return m=m.then(p=>(o.getQueryData($4(t))&&HR(p)&&o.invalidateQueries({queryKey:GR()}),p)),m},enabled:n&&!U8(t)}},VNe=t=>{const e=Gt(),s=Kt(),{search:n}=Hs();return dt(GNe(t,e,s,n))},zNe=t=>{"use forget";var _;const e=F.c(23),s=yt(),{pathname:n,search:o}=Hs(),a=oo(),i=Kt(),l=sn(Ss),c=jc();let u,d,f;if(e[0]!==t||e[1]!==l||e[2]!==c||e[3]!==s||e[4]!==n||e[5]!==o||e[6]!==i){const b=c||U8(t);u=c;const y=new URLSearchParams(o),v=MB(n),S=(_=y.get(t9))!=null?_:void 0;f=dt;let C;e[10]!==t||e[11]!==l||e[12]!==s||e[13]!==n||e[14]!==i?(C=w=>{if(l)lt.wantsNewConversation$.set(!0),lt.selectedConversationId$.set(void 0);else{const k=aZ(n),E=k!=null?s9(k):"/";s(E)}i.danger("Unable to load conversation ".concat(t),{testId:"conversation-fetch-error-toaster",toastId:"use_fetch_conversation_failed_to_load_conversation"})},e[10]=t,e[11]=l,e[12]=s,e[13]=n,e[14]=i,e[15]=C):C=e[15],d=Up({clientThreadId:t,alwaysForceUpdate:b,projectId:v,ownerUserId:S,onError:C}),e[0]=t,e[1]=l,e[2]=c,e[3]=s,e[4]=n,e[5]=o,e[6]=i,e[7]=u,e[8]=d,e[9]=f}else u=e[7],d=e[8],f=e[9];let m;e[16]!==t||e[17]!==a?(m=!wl(t)&&!a,e[16]=t,e[17]=a,e[18]=m):m=e[18];const p=u?"always":!1;let g;e[19]!==d||e[20]!==m||e[21]!==p?(g=U(T({},d),{enabled:m,refetchOnMount:!0,refetchOnWindowFocus:p}),e[19]=d,e[20]=m,e[21]=p,e[22]=g):g=e[22];const{data:h}=f(g);return h},vH=(t,e,s)=>{const n=G(),o=sn(Ss),a=Rt(t),i=e.kind===Pt.GizmoInteraction?e.gizmo_id:null,{data:l}=vi(i!=null?i:void 0),u=i&&jn(i)&&!l;zNe(t);const{session:d}=vl(n),f=Ee(n,"544083113");x.useEffect(()=>{var g,h;To.initThread({clientThreadId:t,conversationMode:e,userId:(g=d==null?void 0:d.user)==null?void 0:g.id,accountId:(h=d==null?void 0:d.account)==null?void 0:h.id,skipFollowupMcpCheck:f}),Bm.reset(),No.dismiss()},[t]),x.useEffect(()=>{s!=null&&s.shouldScrollToBottom&&nt(t,g=>{g.scrollToMessageId="finalAgentTurn"})},[t,s==null?void 0:s.shouldScrollToBottom]),x.useEffect(()=>{s!=null&&s.disableConversationNavigation&&nt(t,g=>{g.disableConversationNavigation=s.disableConversationNavigation})},[t,s==null?void 0:s.disableConversationNavigation]);const{isLoading:m,data:p}=VNe({clientThreadId:a!=null?a:t,clientModelId:null,conversationMode:e,enabled:!u});x.useEffect(()=>{if(m||!p||o)return;const{default_model_slug:g}=p,h=g;Bm.updateDetails(p),h&&nt(t,_=>{_.defaultModelId=h})},[m,p,o])};function ert(){const t=Gs();t.redirect!=null&&(window.location.href=t.redirect.destination)}const WNe="365985288",qNe="3561896342";function ca({ctx:t,consumer:e,type:s}){if(!e)return!1;const n=Gs();if(n.userCountry!=="US")return!0;const i=js(t,s==="signup"?WNe:qNe).get(e,[]);return!(n.userRegionCode&&i.includes(n.userRegionCode))}const H4="3747963938802455",qu="1105138088231444",KNe="Lead",YNe="AddToCart",QNe={"":"",[tt.GO]:"FindLocation",[tt.PLUS]:"AddToWishlist",[tt.PRO]:"CustomizeProduct",[tt.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-codex-get-started":"Donate","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"CompleteRegistration","chatgpt-subscribe-plan-business":"Schedule"},JNe={"":"",[tt.GO]:"FindLocation",[tt.PLUS]:"AddToWishlist",[tt.PRO]:"CustomizeProduct",[tt.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-codex-get-started":"Donate","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"CompleteRegistration","chatgpt-subscribe-plan-business":"Schedule"};function trt(){"use forget";const t=F.c(8),e=G();let s;t[0]!==e?(s=ca({ctx:e,consumer:"maverick",type:"signup"}),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=ut(),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=Ct(We.hasSeenMaverick),c=xs();let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=U(T({},il),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=u):u=t[4];const{data:d,isLoading:f}=dt(u),m=d?d.is_consent_required?!!d.consent_marketing:!0:!1,p=n&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function srt(t){"use forget";const e=F.c(6),{key:s,onTracked:n,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=G(),l=xs();let c;e[0]!==i?(c=Gs(),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:u}=c;if(!window||!l&&!a||!u)return ZNe;let d;return e[2]!==u||e[3]!==s||e[4]!==n?(d=()=>{const f=Ra(Oa.Fbclid),m=f?QNe[s]:JNe[s];if(!m)return;const p=SH(u);p("set","autoConfig","false",qu),p("init",qu),p("dataProcessingOptions",["LDU"],0,0),f?p("trackSingle",qu,m,{fbclid:f}):p("trackSingle",qu,m),n()},e[2]=u,e[3]=s,e[4]=n,e[5]=d):d=e[5],d}function ZNe(){}function nrt(){"use forget";const t=F.c(7),e=xs(),s=G(),n=ca({ctx:s,consumer:"maverick",type:"signup"});let o;t[0]!==s?(o=Gs(),t[0]=s,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForMaverick,{eligible:c}=Ct(We.hasSeenMaverickCapi);if(!window||!e||!i||!n)return XNe;let u;return t[2]!==i||t[3]!==s||t[4]!==c||t[5]!==l?(u=()=>{const d=Ra(Oa.Fbclid);if(!d&&!l)return;const f=SH(i);d&&(f("init",H4),f("dataProcessingOptions",["LDU"],0,0),f("trackSingle",H4,KNe,{fbclid:d})),c&&(f("init",qu),f("dataProcessingOptions",["LDU"],0,0),f("trackSingle",qu,YNe,{fbclid:d!=null?d:""}),_t(s,We.hasSeenMaverickCapi))},t[2]=i,t[3]=s,t[4]=c,t[5]=l,t[6]=u):u=t[6],u}function XNe(){}function SH(t){return!window||!document?()=>{}:((function(e,s,n,o,a,i,l){e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod(...arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],i=s.createElement(n),i.async=!0,i.src=o,i.nonce=t,l=s.getElementsByTagName(n)[0],l==null||l.parentNode.insertBefore(i,l))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),window.fbq)}const CH="AW-16678058309",wH="AW-16679965591";function ort(){const t=G(),e=ca({ctx:t,consumer:"pioneer",type:"signup"}),s=!ut(),{eligible:n,isLoading:o}=Ct(We.hasSeenPioneer),a=xs(),{data:i,isLoading:l}=dt(U(T({},il),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),c=i?i.is_consent_required?!!i.consent_marketing:!0:!1;return{eligible:e&&a&&a.created>Date.now()/1e3-1440*60&&n&&c&&!s,isLoading:o||l}}function eAe(){["IDE","ANID","NID"].forEach(e=>{try{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=."+window.location.hostname}catch(s){pt.logEvent("chatgpt_pioneer_cookie_error")}})}async function tAe(t){if(t)try{const s=new TextEncoder().encode(t);return await crypto.subtle.digest("SHA-256",s).then(n=>Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join(""))}catch(e){pt.logEvent("chatgpt_pioneer_email_error")}}const sAe={"":"",[tt.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[tt.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[tt.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[tt.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-codex-get-started":"AW-16678058309/trpTCNO06tEbEMXy25A-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-","chatgpt-explore-plan":"AW-16678058309/-VhXCK3Z2r0bEMXy25A-","chatgpt-subscribe-plan-plus":"AW-16678058309/LjaPCJnT0b0bEMXy25A-","chatgpt-subscribe-plan-go":"AW-16678058309/ShZRCJbT0b0bEMXy25A-","chatgpt-subscribe-plan-pro":"AW-16678058309/lwuWCJzT0b0bEMXy25A-","chatgpt-subscribe-plan-business":"AW-16678058309/NiaVCLbJ2b0bEMXy25A-"},nAe={"":"",[tt.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[tt.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[tt.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[tt.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-codex-get-started":"AW-16678058309/trpTCNO06tEbEMXy25A-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-","chatgpt-explore-plan":"AW-16678058309/-VhXCK3Z2r0bEMXy25A-","chatgpt-subscribe-plan-plus":"AW-16678058309/LjaPCJnT0b0bEMXy25A-","chatgpt-subscribe-plan-go":"AW-16678058309/ShZRCJbT0b0bEMXy25A-","chatgpt-subscribe-plan-pro":"AW-16678058309/lwuWCJzT0b0bEMXy25A-","chatgpt-subscribe-plan-business":"AW-16678058309/NiaVCLbJ2b0bEMXy25A-"},oAe={"":"",[tt.GO]:"",[tt.PLUS]:"",[tt.PRO]:"",[tt.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-codex-get-started":"AW-16679965591/lgvPCJ3j6dEbEJen0JE-","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"AW-16679965591/fQSPCKP20r0bEJen0JE-","chatgpt-subscribe-plan-plus":"AW-16679965591/zJU3CLC02b0bEJen0JE-","chatgpt-subscribe-plan-go":"AW-16679965591/rQqJCK202b0bEJen0JE-","chatgpt-subscribe-plan-pro":"AW-16679965591/AZZZCLO02b0bEJen0JE-","chatgpt-subscribe-plan-business":"AW-16679965591/XTwNCLa02b0bEJen0JE-"},aAe={"":"",[tt.GO]:"",[tt.PLUS]:"",[tt.PRO]:"",[tt.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-codex-get-started":"AW-16679965591/lgvPCJ3j6dEbEJen0JE-","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"AW-16679965591/fQSPCKP20r0bEJen0JE-","chatgpt-subscribe-plan-plus":"AW-16679965591/zJU3CLC02b0bEJen0JE-","chatgpt-subscribe-plan-go":"AW-16679965591/rQqJCK202b0bEJen0JE-","chatgpt-subscribe-plan-pro":"AW-16679965591/AZZZCLO02b0bEJen0JE-","chatgpt-subscribe-plan-business":"AW-16679965591/XTwNCLa02b0bEJen0JE-"},G4=[[CH,"0kStCJHMl9QZEMXy25A-"],[wH,"1dOfCL2W9ZYbEJen0JE-"]];function art({key:t,onTracked:e,allowUnauthenticatedTracking:s=!1}){const n=xs(),{cspScriptNonce:o}=Gs();return!window||!n&&!s||!o?()=>{}:()=>{const a=Ra(Oa.Gclid),i=a?sAe[t]:nAe[t],l=a?oAe[t]:aAe[t];if(!i&&!l)return;const c=(u,d)=>{if(!d)return;const f=n9(o,u);f("config",u,{send_page_view:!1,conversion_linker:!1,allow_ad_personalization_signals:!1,restricted_data_processing:!0}),a?f("event","conversion",{send_to:d,user_data:{gclid:a}}):f("event","conversion",{send_to:d})};i&&c(CH,i),l&&c(wH,l),e()}}function rrt(){"use forget";const t=F.c(6),e=xs(),s=G(),n=ca({ctx:s,consumer:"pioneer",type:"signup"});let o;t[0]!==s?(o=Gs(),t[0]=s,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForPioneer;if(!window||!e||!i||!n)return rAe;let c;return t[2]!==i||t[3]!==l||t[4]!==e?(c=async()=>{const u=Ra(Oa.Gclid);if(!u&&!l)return;const d=await tAe(e.email),[f]=G4[0],m=n9(i,f);for(const[p,g]of G4)m("config",p,{send_page_view:!1,conversion_linker:!0,restricted_data_processing:!0}),eAe(),m("set","user_data",{sha256_email_address:d}),m("event","conversion",{send_to:"".concat(p,"/").concat(g),user_data:{sha256_email_address:d,gclid:u!=null?u:void 0}});pt.logEvent("chatgpt_pioneer_conv")},t[2]=i,t[3]=l,t[4]=e,t[5]=c):c=t[5],c}function rAe(){}const iAe={"":0,[tt.GO]:22738426,[tt.PLUS]:22738410,[tt.PRO]:22738418,[tt.SELF_SERVE_BUSINESS]:22738434,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22837578,"chatgpt-codex-get-started":25010242,"chatgpt-team-contact-sales":22998554,"chatgpt-explore-plan":24300506,"chatgpt-subscribe-plan-plus":24300482,"chatgpt-subscribe-plan-go":24300474,"chatgpt-subscribe-plan-pro":24300490,"chatgpt-subscribe-plan-business":24300498},lAe={"":0,[tt.GO]:22738426,[tt.PLUS]:22738410,[tt.PRO]:22738418,[tt.SELF_SERVE_BUSINESS]:22738434,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-codex-get-started":25010242,"chatgpt-team-contact-sales":0,"chatgpt-explore-plan":24300506,"chatgpt-subscribe-plan-plus":24300482,"chatgpt-subscribe-plan-go":24300474,"chatgpt-subscribe-plan-pro":24300490,"chatgpt-subscribe-plan-business":24300498},cAe={"":0,[tt.GO]:22332948,[tt.PLUS]:22332932,[tt.PRO]:22332940,[tt.SELF_SERVE_BUSINESS]:22332956,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22332972,"chatgpt-codex-get-started":23286204,"chatgpt-team-contact-sales":22332964,"chatgpt-explore-plan":22333036,"chatgpt-subscribe-plan-plus":22333012,"chatgpt-subscribe-plan-go":22333004,"chatgpt-subscribe-plan-pro":22333020,"chatgpt-subscribe-plan-business":22333028},uAe={"":0,[tt.GO]:22332948,[tt.PLUS]:22332932,[tt.PRO]:22332940,[tt.SELF_SERVE_BUSINESS]:22332956,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-codex-get-started":23286204,"chatgpt-team-contact-sales":0,"chatgpt-explore-plan":22333036,"chatgpt-subscribe-plan-plus":22333012,"chatgpt-subscribe-plan-go":22333004,"chatgpt-subscribe-plan-pro":22333020,"chatgpt-subscribe-plan-business":22333028};function irt(){"use forget";const t=F.c(8),e=G();let s;t[0]!==e?(s=ca({ctx:e,consumer:"seeker",type:"signup"}),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=ut(),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=Ct(We.hasSeenSeeker),c=xs();let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=U(T({},il),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=u):u=t[4];const{data:d,isLoading:f}=dt(u),m=d?d.is_consent_required?!!d.consent_marketing:!0:!1,p=n&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function lrt(){"use forget";const t=F.c(5),e=xs(),s=G(),n=ca({ctx:s,consumer:"seeker",type:"signup"});let o;t[0]!==s?(o=Gs(),t[0]=s,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForSeeker;if(!window||!e||!i||!n)return dAe;let c;return t[2]!==i||t[3]!==l?(c=()=>{if(!(!Ra(Oa.Liclid)&&!l))try{eS(i,va)("track",{conversion_id:22332924,[pd]:va})}catch(d){const f=d;Ge.addError(f,{conversion_id:22332924,partner_id:va})}},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function dAe(){}const V4="seeker-script-8jd10",fAe="seeker-script-h8d129",Ki="7057666",va="8245332",pd="__seekerPartnerId";let z4=!1;const Li={},W4={},c_={};function Am(t){const e=Li[t];if(!e)return;const s=c_[t];if(s!=null&&s.length){c_[t]=[];for(const[n,o,a]of s)e.call(n,o,a)}}function kH(t){if(typeof window>"u")return;const e=window,s="_linkedin_data_partner_ids";e._linkedin_partner_id=t,e._linkedin_data_partner_id=t,e[s]=Array.isArray(e[s])?e[s]:[],e[s].includes(t)||e[s].push(t)}function mAe(){if(z4||typeof window>"u")return;z4=!0;const t=window;let e=t.lintrk;const s=n=>{if(!n||n.__seekerWrapped)return n;const o=!!n.q,a=function(l,c){let u;if(c&&pd in c){const f=c[pd];(f===Ki||f===va)&&(u=f)}u&&kH(u);let d=c;return!o&&u&&c&&(d=T({},c),delete d[pd]),n.call(this,l,d)};return o&&n.q&&(a.q=n.q),a.__seekerWrapped=!0,a.__seekerIsStub=o,a};Object.defineProperty(t,"lintrk",{configurable:!0,get(){return e},set(n){if(e=s(n),e&&!e.__seekerIsStub){const o=t._linkedin_partner_id;o===Ki?(Li[Ki]=e,Am(Ki)):o===va&&(Li[va]=e,Am(va))}}}),e=s(e)}function pAe(t){switch(t){case Ki:return V4;case va:return fAe;default:return V4}}function crt(t){"use forget";const e=F.c(6),{key:s,onTracked:n,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=G(),l=xs();let c;e[0]!==i?(c=Gs(),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:u}=c;if(!window||!l&&!a||!u)return gAe;let d;return e[2]!==u||e[3]!==s||e[4]!==n?(d=()=>{const f=Ra(Oa.Liclid),m=f?iAe[s]:lAe[s],p=f?cAe[s]:uAe[s];if(!(!m&&!p)){if(m)try{eS(u,Ki)("track",{conversion_id:m,[pd]:Ki}),n()}catch(g){const h=g;Ge.addError(h,{conversion_id:m,partner_id:Ki})}if(p)try{eS(u,va)("track",{conversion_id:p,[pd]:va}),n()}catch(g){const h=g;Ge.addError(h,{conversion_id:p,partner_id:va})}}},e[2]=u,e[3]=s,e[4]=n,e[5]=d):d=e[5],d}function gAe(){}function eS(t,e){var o,a;if(typeof window>"u"||typeof document>"u")return()=>{};mAe();const s=window;kH(e);let n=W4[e];if(n||(n=function(l,c){var f;const u=Li[e];if(u)return Am(e),u.call(this,l,c);((f=c_[e])!=null?f:c_[e]=[]).push([this,l,c])},W4[e]=n),!Li[e]){if(!s.lintrk){const c=function(d,f){var p;const m=(p=s.lintrk)==null?void 0:p.q;m&&m.push([d,f])};c.q=[],s.lintrk=c}const i=pAe(e);if(document.getElementById(i))!Li[e]&&typeof s.lintrk=="function"&&(Li[e]=s.lintrk,Am(e));else{const c=document.getElementsByTagName("script")[0],u=document.createElement("script");u.id=i,u.type="text/javascript",u.async=!0,u.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",typeof t=="string"&&(u.nonce=t),u.addEventListener("load",()=>{const d=s.lintrk;typeof d=="function"&&(Li[e]=d,Am(e))}),((a=(o=c==null?void 0:c.parentNode)!=null?o:document.head)!=null?a:document.documentElement).insertBefore(u,c!=null?c:null)}}return n}function urt(){"use forget";const t=F.c(8),e=G();let s;t[0]!==e?(s=ca({ctx:e,consumer:"stratos",type:"signup"}),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=ut(),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=Ct(We.hasSeenStratos),c=xs();let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=U(T({},il),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=u):u=t[4];const{data:d,isLoading:f}=dt(u),m=d?d.is_consent_required?!!d.consent_marketing:!0:!1,p=n&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function drt(){"use forget";const t=F.c(5),e=xs(),s=G(),n=ca({ctx:s,consumer:"stratos",type:"signup"});let o;t[0]!==s?(o=Gs(),t[0]=s,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForStratos;if(!window||!e||!i||!n)return hAe;let c;return t[2]!==i||t[3]!==l?(c=()=>{const u=Ra(Oa.Tiktokclid);if(!(!u&&!l))try{const d=_Ae(i);d.load("D0V58BRC77UC6ES2LGJG",{limited_data_use:!0}),d.page(),d.identify({external_id:u}),d.track("AddToCart")}catch(d){const f=d;Ge.addError(f,{message:"Failed to track Stratos conversion"})}},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function hAe(){}function _Ae(t){return!window||!document?()=>{}:((function(e,s,n){e.TiktokAnalyticsObject=n;var o=e[n]=e[n]||[];o.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],o.setAndDefer=function(i,l){i[l]=function(){i.push([l].concat(Array.prototype.slice.call(arguments,0)))}};for(var a=0;a<o.methods.length;a++)o.setAndDefer(o,o.methods[a]);o.instance=function(i){for(var l=o._i[i]||[],c=0;c<o.methods.length;c++)o.setAndDefer(l,o.methods[c]);return l},o.load=function(i,l){var c="https://analytics.tiktok.com/i18n/pixel/events.js";l&&l.partner,o._i=o._i||{},o._i[i]=[],o._i[i]._u=c,o._t=o._t||{},o._t[i]=+new Date,o._o=o._o||{},o._o[i]=l||{},l=s.createElement("script"),l.type="text/javascript",l.async=!0,l.src=c+"?sdkid="+i+"&lib="+n,l.nonce=t,i=s.getElementsByTagName("script")[0],i.parentNode.insertBefore(l,i)}})(window,document,"ttq"),window.ttq)}function frt(){"use forget";const t=F.c(8),e=G();let s;t[0]!==e?(s=ca({ctx:e,consumer:"trailblazer",type:"signup"}),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=ut(),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=Ct(We.hasSeenTrailBlazer),c=xs();let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=U(T({},il),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=u):u=t[4];const{data:d,isLoading:f}=dt(u),m=d?d.is_consent_required?!!d.consent_marketing:!0:!1,p=n&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}const xAe={"":"",[tt.GO]:"FindLocation",[tt.PLUS]:"",[tt.PRO]:"CustomizeProduct",[tt.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"PageVisit","chatgpt-codex-get-started":"","chatgpt-team-contact-sales":"SignUp","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"AddToCart","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":"Purchase"},yAe={"":"",[tt.GO]:"",[tt.PLUS]:"",[tt.PRO]:"",[tt.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-codex-get-started":"","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":""};function mrt(t){"use forget";const e=F.c(6),{key:s,onTracked:n,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=G(),l=xs();let c;e[0]!==i?(c=Gs(),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:u}=c;if(!window||!l&&!a||!u)return bAe;let d;return e[2]!==u||e[3]!==s||e[4]!==n?(d=()=>{const f=Ra(Oa.Rdtcid),m=f?xAe[s]:yAe[s];if(!m)return;const p=TH(u);p("init","a2_f1c16ccvsrrl",{dpm:"LDU",dpcc:"ALL",dprc:"ALL"}),f?p("track",m,{rdt_cid:f}):p("track",m),n()},e[2]=u,e[3]=s,e[4]=n,e[5]=d):d=e[5],d}function bAe(){}function prt(){"use forget";const t=F.c(5),e=xs(),s=G(),n=ca({ctx:s,consumer:"trailblazer",type:"signup"});let o;t[0]!==s?(o=Gs(),t[0]=s,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForTrailBlazer;if(!window||!e||!i||!n)return vAe;let c;return t[2]!==i||t[3]!==l?(c=()=>{const u=Ra(Oa.Rdtcid);if(!u&&!l)return;const d=TH(i);d("init","a2_f1c16ccvsrrl",{}),d("track","Lead",{rdt_cid:u!=null?u:void 0})},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function vAe(){}function TH(t){return!window||!document?()=>{}:((function(e,s){if(!e.rdt){var n=e.rdt=function(){n.sendEvent?n.sendEvent(...arguments):n.callQueue.push(arguments)};n.callQueue=[];var o=s.createElement("script");o.src="https://www.redditstatic.com/ads/pixel.js",o.async=!0,o.nonce=t;var a=s.getElementsByTagName("script")[0];a==null||a.parentNode.insertBefore(o,a)}})(window,document),window.rdt)}const SAe="187204252",q4="wayfinder-uet-script",CAe={"":"",[tt.GO]:"FindLocation",[tt.PLUS]:"AddToWishlist",[tt.PRO]:"CustomizeProduct",[tt.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-codex-get-started":"","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"Complete Registration","chatgpt-subscribe-plan-business":"Schedule"};function grt(){"use forget";const t=F.c(8),e=G();let s;t[0]!==e?(s=ca({ctx:e,consumer:"wayfinder",type:"signup"}),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=ut(),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=Ct(We.hasSeenWayfinder),c=xs();let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=U(T({},il),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=u):u=t[4];const{data:d,isLoading:f}=dt(u),m=d?d.is_consent_required?!!d.consent_marketing:!0:!1,p=n&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function hrt(t){"use forget";const e=F.c(6),{key:s,onTracked:n,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=G(),l=xs();let c;e[0]!==i?(c=Gs(),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:u}=c;if(!window||!l&&!a||!u)return wAe;let d;return e[2]!==u||e[3]!==s||e[4]!==n?(d=()=>{if(!Ra(Oa.Msclkid))return;const m=CAe[s];if(m)try{const p=EH(u);if(!p)return;p.push("event",m),n()}catch(p){const g=p;Ge.addError(g,{message:"Failed to track Wayfinder Bing b2b conversion",eventName:m})}},e[2]=u,e[3]=s,e[4]=n,e[5]=d):d=e[5],d}function wAe(){}function _rt(){"use forget";const t=F.c(5),e=xs(),s=G(),n=ca({ctx:s,consumer:"wayfinder",type:"signup"});let o;t[0]!==s?(o=Gs(),t[0]=s,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForWayfinder;if(!window||!e||!i||!n)return kAe;let c;return t[2]!==i||t[3]!==l?(c=()=>{if(!(!Ra(Oa.Msclkid)&&!l))try{const d=EH(i);if(!d)return;d.push("event","AddToCart")}catch(d){const f=d;Ge.addError(f,{message:"Failed to track Wayfinder Bing b2c conversion",eventName:"AddToCart"})}},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function kAe(){}function EH(t){var a,i;if(!window||!document)return;const e=window;e.uetq=(a=e.uetq)!=null?a:[],e.__wayfinderConsentConfigured||(e.uetq.push("consent","default",{ad_storage:"granted"}),e.__wayfinderConsentConfigured=!0);const s=()=>{var c;if(e.__wayfinderUetInitialized||typeof e.UET!="function")return;const l={ti:SAe,enableAutoSpaTracking:!0};l.q=e.uetq,e.uetq=new e.UET(l),(c=e.uetq)==null||c.push("pageLoad"),e.__wayfinderUetInitialized=!0};if(document.getElementById(q4))return s(),e.uetq;const n=document.createElement("script");n.id=q4,n.async=!0,n.src="https://bat.bing.com/bat.js",t&&(n.nonce=t),n.onload=s,n.addEventListener("readystatechange",()=>{const l=n.readyState;(!l||l==="loaded"||l==="complete")&&s()});const o=document.getElementsByTagName("script")[0];return(i=o==null?void 0:o.parentNode)==null||i.insertBefore(n,o),e.uetq}function xrt(t){"use forget";const e=F.c(6);let s,n;if(e[0]!==t){const l=ut()&&!t;s=dt,n=mce(l),e[0]=t,e[1]=s,e[2]=n}else s=e[1],n=e[2];const{data:o}=s(n);let a,i;e[3]!==o?(a=()=>{!o||!o.ui_info||No.updateDetails(o,void 0,void 0)},i=[o],e[3]=o,e[4]=a,e[5]=i):(a=e[4],i=e[5]),x.useEffect(a,i)}const TAe={stiffness:300,damping:30,mass:1},EAe={transition:TAe,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};function MAe(t){"use forget";const e=F.c(26),{size:s,triggerIcon:n,triggerButton:o,children:a,side:i,className:l,triggerIconClassName:c,sideOffset:u,alignOffset:d,open:f,onOpenChange:m,alignAgainstAnchor:p,disableAutofocus:g,modal:h}=t,_=s===void 0?"default":s,b=i===void 0?"bottom":i,y=u===void 0?10:u,v=d===void 0?0:d,S=p===void 0?"center":p,C=g===void 0?!1:g,w=h===void 0?!1:h,k=rZ();let E;e[0]!==n||e[1]!==o||e[2]!==c?(E=n?r.jsx(hi,{className:z("hover:bg-token-main-surface-secondary rounded-lg p-2",c),children:r.jsx(n,{className:"icon"})}):r.jsx(hi,{asChild:!0,children:o}),e[0]=n,e[1]=o,e[2]=c,e[3]=E):E=e[3];let M;e[4]!==C?(M=O=>{C&&O.preventDefault()},e[4]=C,e[5]=M):M=e[5];const N=_==="default";let A;e[6]!==l||e[7]!==N?(A=z({"max-w-xs min-w-[200px]":N},l),e[6]=l,e[7]=N,e[8]=A):A=e[8];let I;e[9]!==S||e[10]!==v||e[11]!==a||e[12]!==b||e[13]!==y||e[14]!==A||e[15]!==M?(I=r.jsx(ix,{$as:su,side:b,sideOffset:y,alignOffset:v,align:S,collisionPadding:10,onOpenAutoFocus:M,className:A,children:a}),e[9]=S,e[10]=v,e[11]=a,e[12]=b,e[13]=y,e[14]=A,e[15]=M,e[16]=I):I=e[16];let P;e[17]!==k||e[18]!==I?(P=r.jsx(tu,U(T({},k),{children:I})),e[17]=k,e[18]=I,e[19]=P):P=e[19];let R;return e[20]!==w||e[21]!==m||e[22]!==f||e[23]!==P||e[24]!==E?(R=r.jsxs(eu,{open:f,onOpenChange:m,modal:w,children:[E,P]}),e[20]=w,e[21]=m,e[22]=f,e[23]=P,e[24]=E,e[25]=R):R=e[25],R}function iE(t){"use forget";const e=F.c(2);t.triggerIcon&&t.triggerButton;let s;return e[0]!==t?(s=r.jsx(MAe,T({},t)),e[0]=t,e[1]=s):s=e[1],s}const NAe={setFocusedObject:t=>{$1.setState({focusedObject:t}),kge()},close(){$1.setState({focusedObject:null})}},AAe=({className:t})=>r.jsxs(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:[r.jsx("path",{d:"M11.5047 10C12.8828 10 14 11.1172 14 12.4953C14 15.2919 10.9404 14.9905 9.00947 14.9905C9.00947 13.0596 8.70813 10 11.5047 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),r.jsx("path",{d:"M12 9.5C13.8983 6.79576 16.0839 4.85949 18.8983 3.40128C19.3829 3.15019 19.9712 3.25691 20.3571 3.64286V3.64286C20.7431 4.0288 20.8498 4.61706 20.5987 5.10168C19.1405 7.91612 17.2042 10.1017 14.5 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M12.0003 21.0003C11.5003 21.0003 8.93732 20.1297 6.71782 17.9102C3.00784 14.2002 2.05809 9.13491 4.5965 6.5965C6.68218 4.51082 10.4738 4.78002 13.8179 7.00031M17.1066 10.0003C19.9927 13.3315 21.2146 16.7289 19.0003 18.5003C17.3415 19.8274 15.2424 18.2927 14.0176 17.1097",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),IAe=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.70711 2.29289C8.09763 2.68342 8.09763 3.31658 7.70711 3.70711L6.41421 5H13.5C17.6421 5 21 8.35786 21 12.5C21 16.6421 17.6421 20 13.5 20H9C8.44772 20 8 19.5523 8 19C8 18.4477 8.44772 18 9 18H13.5C16.5376 18 19 15.5376 19 12.5C19 9.46243 16.5376 7 13.5 7H6.41421L7.70711 8.29289C8.09763 8.68342 8.09763 9.31658 7.70711 9.70711C7.31658 10.0976 6.68342 10.0976 6.29289 9.70711L3.29289 6.70711C2.90237 6.31658 2.90237 5.68342 3.29289 5.29289L6.29289 2.29289C6.68342 1.90237 7.31658 1.90237 7.70711 2.29289Z",fill:"currentColor"})}),jAe=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2929 2.29289C16.6834 1.90237 17.3166 1.90237 17.7071 2.29289L20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L17.7071 9.70711C17.3166 10.0976 16.6834 10.0976 16.2929 9.70711C15.9024 9.31658 15.9024 8.68342 16.2929 8.29289L17.5858 7H10.5C7.46243 7 5 9.46243 5 12.5C5 15.5376 7.46243 18 10.5 18H15C15.5523 18 16 18.4477 16 19C16 19.5523 15.5523 20 15 20H10.5C6.35786 20 3 16.6421 3 12.5C3 8.35786 6.35786 5 10.5 5H17.5858L16.2929 3.70711C15.9024 3.31658 15.9024 2.68342 16.2929 2.29289Z",fill:"currentColor"})}),yrt=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{d:"M3 18H4.17157C4.70201 18 5.21071 17.7893 5.58579 17.4142L15.4142 7.58579C15.7893 7.21071 16.298 7 16.8284 7H19M3 6H4.17157C4.70201 6 5.21071 6.21071 5.58579 6.58579L8 9M19 17H16.8284C16.298 17 15.7893 16.7893 15.4142 16.4142L14 15M18 4L21 7L18 10M18 14L21 17L18 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),brt=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),vrt=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Srt=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"6",y:"2",width:"12",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Crt=({className:t})=>r.jsx(Jn,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V10C21 10.5523 20.5523 11 20 11C19.4477 11 19 10.5523 19 10V6.41421L15.2071 10.2071C14.8166 10.5976 14.1834 10.5976 13.7929 10.2071C13.4024 9.81658 13.4024 9.18342 13.7929 8.79289L17.5858 5H14C13.4477 5 13 4.55228 13 4ZM4 13C4.55228 13 5 13.4477 5 14V17.5858L8.79289 13.7929C9.18342 13.4024 9.81658 13.4024 10.2071 13.7929C10.5976 14.1834 10.5976 14.8166 10.2071 15.2071L6.41421 19H10C10.5523 19 11 19.4477 11 20C11 20.5523 10.5523 21 10 21H4C3.44772 21 3 20.5523 3 20V14C3 13.4477 3.44772 13 4 13Z",fill:"currentColor"})});function MH(t){var e,s,n;return(n=(s=(e=t.metadata)==null?void 0:e.dalle)==null?void 0:s.prompt)!=null?n:""}async function PAe(t,e,s="image/png"){return new Promise((n,o)=>{t.toBlob(a=>{a!=null?n(new File([a],e,{type:s})):o(new Error("Failed to convert canvas to blob"))},s)})}async function RAe(t,e){const s=document.createElement("canvas");s.width=t.width,s.height=t.height;const n=s.getContext("2d");if(n==null)throw new Error("Failed to get 2d context for mask canvas");const o=n.createImageData(t.width,t.height);for(let a=0;a<t.data.length;a+=4)t.data[a+3]!==0?(o.data[a]=0,o.data[a+1]=0,o.data[a+2]=0,o.data[a+3]=255):(o.data[a]=255,o.data[a+1]=255,o.data[a+2]=255,o.data[a+3]=255);return n.putImageData(o,0,0),PAe(s,e)}async function OAe(t,e){const n=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,o.click(),o.remove()}function LAe(t){const e=lZ(new Date,"yyyy-MM-dd HH.mm.ss");let s=t.slice(0,150);return s.endsWith(".")&&(s=s.slice(0,-1)),"DALLE ".concat(e," - ").concat(s,".webp")}async function DAe(t,e,s,n=!1){var l,c,u,d,f,m,p,g,h,_,b,y,v,S,C,w,k,E,M,N,A,I;const o=MH(t),a=LAe(o);await OAe(t.url,a);const i=n?"chatgpt_dalle_image_captioning_download":"chatgpt_dalle_image_download";pt.logEvent(i,null,{sourceOperation:(u=(c=(l=t.metadata)==null?void 0:l.dalle)==null?void 0:c.edit_op)!=null?u:"none",hasParent:((f=(d=t.metadata)==null?void 0:d.dalle)==null?void 0:f.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent(i,{conversationId:e,messageId:s,generationId:(p=(m=t.metadata)==null?void 0:m.dalle)==null?void 0:p.gen_id,parentGenerationId:(h=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:h.parent_gen_id,fileId:Ma(t.asset_pointer),sourceOperation:(b=(_=t.metadata)==null?void 0:_.dalle)==null?void 0:b.edit_op,model:"dalle"}),pt.logEvent("chatgpt_image_download",null,{sourceOperation:(S=(v=(y=t.metadata)==null?void 0:y.dalle)==null?void 0:v.edit_op)!=null?S:"none",hasParent:((w=(C=t.metadata)==null?void 0:C.dalle)==null?void 0:w.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_image_download",{conversationId:e,messageId:s,generationId:(E=(k=t.metadata)==null?void 0:k.dalle)==null?void 0:E.gen_id,parentGenerationId:(N=(M=t.metadata)==null?void 0:M.dalle)==null?void 0:N.parent_gen_id,fileId:Ma(t.asset_pointer),sourceOperation:(I=(A=t.metadata)==null?void 0:A.dalle)==null?void 0:I.edit_op,model:"dalle"})}function wrt(t){const e=$8(t),s=OT(),n=e&&"gizmo"in e?e.gizmo:void 0;return!s&&(n==null?void 0:n.gizmo.id)===iZ}function FAe(t,e){var o,a;const s=(a=(o=e.metadata)==null?void 0:o.dalle)==null?void 0:a.gen_id,n=Ma(e.asset_pointer);return n==null||s==null?t:ou(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"transformation",original_gen_id:s,original_file_id:n}}}}}})}async function BAe(t,e,s,n){return new Promise((o,a)=>{cZ(tl(t),t,e,s,{kind:uZ.DalleAgent},{onFileCreated:Tn,onFileUploadProgress:Tn,onFileUploaded:(i,l)=>o(l),onError:(i,l)=>{a(new Error("Failed to upload file with reason: ".concat(l)))}},n)})}async function UAe(t,e,s,n,o){var l,c;const a=(c=(l=e.metadata)==null?void 0:l.dalle)==null?void 0:c.gen_id,i=Ma(e.asset_pointer);if(i==null||a==null||s==null)return t;try{const u=await RAe(s,"mask.png"),d=await BAe(u,n,o,{imageDimensions:{width:e.width,height:e.height}});return ou(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"inpainting",original_gen_id:a,original_file_id:i,mask_file_id:d}}}}}})}catch(u){return Ge.addError(u),t}}async function $Ae(t,e,s,n,o){return await Promise.all(e.map(a=>jl.fetch(t,{asset:a,sharedThreadId:s,gizmoId:n,conversationId:o}))).catch(a=>{const i=e.map(l=>Ma(l.asset_pointer));throw Ge.addError(new Error("Could not fetch files with IDs ".concat(i," from file service"),{cause:a})),a})}var NH=["PageUp","PageDown"],AH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],IH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Pf="Slider",[tS,HAe,GAe]=rC(Pf),[jH]=Oc(Pf,[GAe]),[VAe,l0]=jH(Pf),PH=x.forwardRef((t,e)=>{const A=t,{name:s,min:n=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:g}=A,h=De(A,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),_=x.useRef(new Set),b=x.useRef(0),v=i==="horizontal"?zAe:WAe,[S=[],C]=ii({prop:d,defaultProp:u,onChange:I=>{var R;(R=[..._.current][b.current])==null||R.focus(),f(I)}}),w=x.useRef(S);function k(I){const P=JAe(S,I);N(I,P)}function E(I){N(I,b.current)}function M(){const I=w.current[b.current];S[b.current]!==I&&m(S)}function N(I,P,{commit:R}={commit:!1}){const O=t4e(a),L=s4e(Math.round((I-n)/a)*a+n,O),D=M1(L,[n,o]);C((H=[])=>{const V=YAe(H,D,P);if(e4e(V,c*a)){b.current=V.indexOf(D);const q=String(V)!==String(H);return q&&R&&m(V),q?V:H}else return H})}return r.jsx(VAe,{scope:t.__scopeSlider,name:s,disabled:l,min:n,max:o,valueIndexToChangeRef:b,thumbs:_.current,values:S,orientation:i,form:g,children:r.jsx(tS.Provider,{scope:t.__scopeSlider,children:r.jsx(tS.Slot,{scope:t.__scopeSlider,children:r.jsx(v,U(T({"aria-disabled":l,"data-disabled":l?"":void 0},h),{ref:e,onPointerDown:zt(h.onPointerDown,()=>{l||(w.current=S)}),min:n,max:o,inverted:p,onSlideStart:l?void 0:k,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&N(n,0,{commit:!0}),onEndKeyDown:()=>!l&&N(o,S.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:P})=>{if(!l){const L=NH.includes(I.key)||I.shiftKey&&AH.includes(I.key)?10:1,D=b.current,H=S[D],V=a*L*P;N(H+V,D,{commit:!0})}}}))})})})});PH.displayName=Pf;var[RH,OH]=jH(Pf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zAe=x.forwardRef((t,e)=>{const v=t,{min:s,max:n,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u}=v,d=De(v,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[f,m]=x.useState(null),p=Ks(e,S=>m(S)),g=x.useRef(),h=N_(o),_=h==="ltr",b=_&&!a||!_&&a;function y(S){const C=g.current||f.getBoundingClientRect(),w=[0,C.width],E=lE(w,b?[s,n]:[n,s]);return g.current=C,E(S-C.left)}return r.jsx(RH,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:r.jsx(LH,U(T({dir:h,"data-orientation":"horizontal"},d),{ref:p,style:U(T({},d.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:S=>{const C=y(S.clientX);i==null||i(C)},onSlideMove:S=>{const C=y(S.clientX);l==null||l(C)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:S=>{const w=IH[b?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:w?-1:1})}}))})}),WAe=x.forwardRef((t,e)=>{const h=t,{min:s,max:n,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c}=h,u=De(h,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),d=x.useRef(null),f=Ks(e,d),m=x.useRef(),p=!o;function g(_){const b=m.current||d.current.getBoundingClientRect(),y=[0,b.height],S=lE(y,p?[n,s]:[s,n]);return m.current=b,S(_-b.top)}return r.jsx(RH,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:r.jsx(LH,U(T({"data-orientation":"vertical"},u),{ref:f,style:U(T({},u.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:_=>{const b=g(_.clientY);a==null||a(b)},onSlideMove:_=>{const b=g(_.clientY);i==null||i(b)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:_=>{const y=IH[p?"from-bottom":"from-top"].includes(_.key);c==null||c({event:_,direction:y?-1:1})}}))})}),LH=x.forwardRef((t,e)=>{const f=t,{__scopeSlider:s,onSlideStart:n,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c}=f,u=De(f,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),d=l0(Pf,s);return r.jsx(vs.span,U(T({},u),{ref:e,onKeyDown:zt(t.onKeyDown,m=>{m.key==="Home"?(i(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):NH.concat(AH).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:zt(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),d.thumbs.has(p)?p.focus():n(m)}),onPointerMove:zt(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&o(m)}),onPointerUp:zt(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),a(m))})}))}),DH="SliderTrack",FH=x.forwardRef((t,e)=>{const a=t,{__scopeSlider:s}=a,n=De(a,["__scopeSlider"]),o=l0(DH,s);return r.jsx(vs.span,U(T({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},n),{ref:e}))});FH.displayName=DH;var sS="SliderRange",BH=x.forwardRef((t,e)=>{const m=t,{__scopeSlider:s}=m,n=De(m,["__scopeSlider"]),o=l0(sS,s),a=OH(sS,s),i=x.useRef(null),l=Ks(e,i),c=o.values.length,u=o.values.map(p=>$H(p,o.min,o.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return r.jsx(vs.span,U(T({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},n),{ref:l,style:U(T({},t.style),{[a.startEdge]:d+"%",[a.endEdge]:f+"%"})}))});BH.displayName=sS;var nS="SliderThumb",UH=x.forwardRef((t,e)=>{const s=HAe(t.__scopeSlider),[n,o]=x.useState(null),a=Ks(e,l=>o(l)),i=x.useMemo(()=>n?s().findIndex(l=>l.ref.current===n):-1,[s,n]);return r.jsx(qAe,U(T({},t),{ref:a,index:i}))}),qAe=x.forwardRef((t,e)=>{const y=t,{__scopeSlider:s,index:n,name:o}=y,a=De(y,["__scopeSlider","index","name"]),i=l0(nS,s),l=OH(nS,s),[c,u]=x.useState(null),d=Ks(e,v=>u(v)),f=c?i.form||!!c.closest("form"):!0,m=XP(c),p=i.values[n],g=p===void 0?0:$H(p,i.min,i.max),h=QAe(n,i.values.length),_=m==null?void 0:m[l.size],b=_?ZAe(_,g,l.direction):0;return x.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:"calc(".concat(g,"% + ").concat(b,"px)")},children:[r.jsx(tS.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(vs.span,U(T({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},a),{ref:d,style:p===void 0?{display:"none"}:t.style,onFocus:zt(t.onFocus,()=>{i.valueIndexToChangeRef.current=n})}))}),f&&r.jsx(KAe,{name:o!=null?o:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:p},n)]})});UH.displayName=nS;var KAe=t=>{const a=t,{value:e}=a,s=De(a,["value"]),n=x.useRef(null),o=mC(e);return x.useEffect(()=>{const i=n.current,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(i,e),i.dispatchEvent(d)}},[o,e]),r.jsx("input",U(T({style:{display:"none"}},s),{ref:n,defaultValue:e}))};function YAe(t=[],e,s){const n=[...t];return n[s]=e,n.sort((o,a)=>o-a)}function $H(t,e,s){const a=100/(s-e)*(t-e);return M1(a,[0,100])}function QAe(t,e){return e>2?"Value ".concat(t+1," of ").concat(e):e===2?["Minimum","Maximum"][t]:void 0}function JAe(t,e){if(t.length===1)return 0;const s=t.map(o=>Math.abs(o-e)),n=Math.min(...s);return s.indexOf(n)}function ZAe(t,e,s){const n=t/2,a=lE([0,50],[0,n]);return(n-a(e)*s)*s}function XAe(t){return t.slice(0,-1).map((e,s)=>t[s+1]-e)}function e4e(t,e){if(e>0){const s=XAe(t);return Math.min(...s)>=e}return!0}function lE(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(s-t[0])}}function t4e(t){return(String(t).split(".")[1]||"").length}function s4e(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}var cE=PH,uE=FH,HH=BH,dE=UH;function krt({imageAsset:t,mode:e,setMode:s,clientThreadId:n,messageId:o,cursorWidth:a,setCursorWidth:i,inpaintingDrawingState:l,isLoadingNewImage:c}){const u=Rt(n),{canUndoDrawing:d,undoDrawing:f,canRedoDrawing:m,redoDrawing:p,clearAllDrawings:g}=l,h=ne();return r.jsxs(gt.div,U(T({className:"flex h-16 w-full justify-between px-4"},EAe),{children:[r.jsx("div",{className:"flex items-center",children:e==="inpaint"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:z("flex items-center gap-3",c&&"opacity-50"),children:[r.jsx(Y4,{className:"h-[11px] w-[11px]"}),r.jsxs(cE,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[a],onValueChange:_=>i(_[0]),disabled:c,children:[r.jsx(uE,{className:"bg-token-text-quaternary relative h-[2px] grow",children:r.jsx(HH,{className:"bg-token-text-secondary absolute h-full"})}),r.jsx(dE,{className:"bg-token-text-secondary block h-[11px] w-[11px] rounded-full"})]}),r.jsx(Y4,{className:"h-6 w-6"})]}),r.jsx(K4,{}),r.jsx(Ur,{disabled:!d||c,onClick:f,children:r.jsx(IAe,{})}),r.jsx(Ur,{disabled:!m||c,onClick:p,children:r.jsx(jAe,{})}),r.jsx(K4,{}),r.jsx(Ur,{disabled:!d||c,onClick:g,children:r.jsx(j,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),r.jsx("div",{className:"flex items-center",children:e==="inpaint"?r.jsx(Ur,{onClick:()=>s("default"),disabled:c,children:r.jsx(j,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):r.jsxs(r.Fragment,{children:[r.jsx(o4e,{imageAsset:t,setMode:s,messageId:o,serverThreadId:u}),r.jsx(Ur,{tooltip:h.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>DAe(t,u,o),children:r.jsx(RU,{})}),r.jsx(n4e,{prompt:MH(t),children:r.jsx(Ur,{tooltip:h.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:r.jsx(ci,{})})}),r.jsx(Ur,{tooltip:h.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:NAe.close,children:r.jsx(Rn,{className:"icon-lg"})})]})})]}))}function n4e({prompt:t,children:e}){const[s,n]=x.useState(!1),o=ne(),a=Kt();return r.jsx(iE,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:r.jsx("div",{className:"group",children:e}),className:"z-10",size:"none",children:r.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),r.jsx("div",{children:t}),r.jsx("div",{children:r.jsx(ke,{color:"secondary",disabled:s,onClick:i=>{n(!0),Jo(t,a,i),setTimeout(()=>n(!1),2e3)},icon:Vk,children:s?o.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):o.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function Ur({children:t,tooltip:e,disabled:s,onClick:n}){const o=r.jsx("button",{className:z("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold",s?"text-token-text-quaternary":"text-token-text-secondary"),disabled:s,onClick:n,children:t});return e!=null?r.jsx(It,{label:e,children:o}):o}function Trt({onClose:t}){const e=ne();return r.jsx(Ur,{tooltip:e.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:r.jsx(Rn,{className:"icon-lg"})})}function o4e({imageAsset:t,setMode:e,messageId:s,serverThreadId:n,disabled:o}){const a=ne(),i=G(),l=Ct(We.DalleEditingOnboarding),c=l.eligible&&!l.isLoading,u=r.jsx(Ur,{tooltip:c?void 0:a.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select area"}),onClick:()=>{var d,f,m,p,g,h,_,b,y,v,S,C,w,k,E,M,N,A,I,P,R,O;e("inpaint"),pt.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:(m=(f=(d=t.metadata)==null?void 0:d.dalle)==null?void 0:f.edit_op)!=null?m:"none",hasParent:((g=(p=t.metadata)==null?void 0:p.dalle)==null?void 0:g.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_dalle_inpaint_click",{conversationId:n,messageId:s,generationId:(_=(h=t.metadata)==null?void 0:h.dalle)==null?void 0:_.gen_id,fileId:Ma(t.asset_pointer),parentGenerationId:(y=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:y.parent_gen_id,sourceOperation:(S=(v=t.metadata)==null?void 0:v.dalle)==null?void 0:S.edit_op,model:"dalle"}),pt.logEvent("chatgpt_image_inpaint_click",null,{sourceOperation:(k=(w=(C=t.metadata)==null?void 0:C.dalle)==null?void 0:w.edit_op)!=null?k:"none",hasParent:((M=(E=t.metadata)==null?void 0:E.dalle)==null?void 0:M.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_image_inpaint_click",{conversationId:n,messageId:s,generationId:(A=(N=t.metadata)==null?void 0:N.dalle)==null?void 0:A.gen_id,fileId:Ma(t.asset_pointer),parentGenerationId:(P=(I=t.metadata)==null?void 0:I.dalle)==null?void 0:P.parent_gen_id,sourceOperation:(O=(R=t.metadata)==null?void 0:R.dalle)==null?void 0:O.edit_op,model:"dalle"})},disabled:o,children:r.jsx(AAe,{})});return c?r.jsx(nu,{announcementKey:We.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:a.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:a.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:()=>_t(i,We.DalleEditingOnboarding),children:r.jsx("div",{children:u})}):u}var fP;const K4=Mt.div(fP||(fP=St(["mx-3 w-[1px] h-6 bg-token-border-default"])));var mP;const Y4=Mt.div(mP||(mP=St(["rounded-full border-2 border-token-text-secondary"])));function GH(t,e,s,n,o){let a=dZ.getReadyFiles(t.getState());(n==null?void 0:n.kind)===Pt.GizmoMagicCreate?a=a.filter(g=>g.gizmoId!=null):a=a.filter(g=>g.gizmoId==null);let i=e!=null?e:"";const l=[],c=[],u=o9(s,n,o),f=a9(s,n).length>0,m=u===ko.Interpreter||u===ko.Retrieval||u===ko.ContextConnector,p=Ee(Io(),"3681682292");return a.forEach(g=>{var b,y;const h=g.fileSpec,_=CNe(h.mimeType,h.name);if(m&&!(f&&p&&_)){const v=h.contextConnectorInfo,S={id:h.id,size:h.size,name:h.name,context_connector_info:v?{context_connector:v==null?void 0:v.contextConnector,source_url:v==null?void 0:v.sourceUrl,synthetic_extension:(b=v==null?void 0:v.syntheticExtension)!=null?b:null,type:v==null?void 0:v.type}:void 0,mime_type:h.mimeType,width:"width"in h?h.width:void 0,height:"height"in h?h.height:void 0,file_token_size:h.fileTokenSize,source:g.source,library_file_id:g.libraryFileId,is_big_paste:(y=h.isBigPaste)!=null?y:!1};l.push(S)}f&&("width"in h&&"height"in h&&c.push({content_type:Yo.ImageAssetPointer,asset_pointer:Jv(h.id),size_bytes:h.size,width:h.width,height:h.height}),p&&_&&c.push({content_type:Yo.VideoAssetPointer,asset_pointer:Jv(h.id),size_bytes:h.size,format:_,metadata:{source:"quick_video_capture"}}))}),c.length>0&&(c.push(e!=null?e:""),i={content_type:bt.MultimodalText,parts:c}),{content:i,attachments:l}}const a4e=ys(()=>XC(()=>fZ)),r4e=oa(()=>Le(null)),c0=oa(t=>vt(()=>{const e=r4e(t);return e?{gizmo:e,gizmo_id:e.gizmo.id,kind:Pt.GizmoInteraction}:mk(t)})),VH="image-gen-action-modal-upload-photos",zH="image-gen-action-modal-upload-camera",i4e=ys(t=>function({files:s,type:n,conversation:o,filePickerStore:a}){const i=mZ(t);if(!s||!i)return{tempIds:[],uploads:null};const l=Cs(o),c=c0(o),u=a!=null?a:a4e(t),d=r9(l,c),f=Array.from(s).map(g=>{const h=tl(g);return{result:fr.uploadFile(u,h,g,ko.Multimodal,a9(l,c),i,dp(t),{isUnauthenticated:!ut()},d==null?void 0:d.attachments),tempId:h}}),m=f.map(g=>g.tempId),p=Promise.allSettled(f.map(g=>g.result));return ave(o).set(m),B.logEventWithStatsig("Upload File",n==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:n,source:"image-gen-action-modal",location:"image-gen-action-modal"}),{tempIds:m,uploads:p}});function Ert(t){"use forget";const e=F.c(9),{onUploadFiles:s}=t,n=l4e;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>n("photos"),e[0]=o):o=e[0];let a;e[1]!==s?(a=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:VH,onClick:o,onChange:u=>{s({files:u.currentTarget.files,type:"photos"})},accept:"image/*",multiple:!0}),e[1]=s,e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>n("camera"),e[3]=i):i=e[3];let l;e[4]!==s?(l=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:zH,onClick:i,onChange:u=>{s({files:u.currentTarget.files,type:"camera"})},accept:"image/*",capture:"environment",multiple:!0}),e[4]=s,e[5]=l):l=e[5];let c;return e[6]!==a||e[7]!==l?(c=r.jsxs(r.Fragment,{children:[a,l]}),e[6]=a,e[7]=l,e[8]=c):c=e[8],c}function l4e(t){B.logEvent("Open File Viewer",{intent:t,source:"image-gen-action-modal"}),pt.logEvent("chatgpt_web_".concat(t,"_file_viewer_opened"),null,{location:"image-gen-action-modal"})}class c4e{constructor(e){X(this,"conversation");X(this,"requestKey");X(this,"input");X(this,"optimisticMessages");X(this,"createdAt");X(this,"state$");X(this,"placeholderState$");this.conversation=e.conversation,this.requestKey=e.requestKey,this.input=e.input,this.optimisticMessages=e.input.optimisticMessages.map(n=>{var o;return U(T({},n),{id:(o=n.id)!=null?o:Ds()})});const[s]=this.optimisticMessages;if(!s)throw new Error("No optimistic prompt message provided");this.state$=Le({status:"created",error:void 0,serverThreadId:void 0,hasReceivedImageGenToolCall:!1,promptMessage:s},{equals:fi}),this.placeholderState$=Le(void 0),this.createdAt=new Date}setState(e){this.state$.set(s=>{const n=T(T({},s),e);return fi(s,n)?s:n})}renderPlaceholderConversation$(){var e,s;try{const n=jt(),{session:o}=vl(n),a=dw(n);return To.initThread({clientThreadId:a.id,conversationMode:{kind:Pt.PrimaryAssistant},userId:(e=o==null?void 0:o.user)==null?void 0:e.id,accountId:(s=o==null?void 0:o.account)==null?void 0:s.id,disableConversationNavigation:!0}),nt(a.id,i=>{for(const l of this.optimisticMessages)as.appendMessage(i,U(T({},l),{clientMetadata:U(T({},l.clientMetadata),{isOptimisticPlaceholder:!0}),id:Ds()}))}),this.placeholderState$.set({placeholderConversationId:a.id}),dl("/c/".concat(a.id)),!0}catch(n){return this.handleOptimisticRenderFailure(this.normalizeError(n,"image_gen_optimistic_render_failed")),!1}}async run$(){this.renderPlaceholderConversation$()&&await this.requestCompletion$()}async requestCompletion$(){this.setState({status:"generating"});let e=null;try{if(e=await this.input.asyncWork(),e==null){this.handleAsyncWorkFailure(new Error("image_gen_async_work_returned_null"));return}}catch(s){this.handleAsyncWorkFailure(this.normalizeError(s,"image_gen_async_work_failed"));return}try{const s=e.callbacks,n=U(T({},s!=null?s:{}),{onServerThreadId:o=>{var l,c;if((l=s==null?void 0:s.onServerThreadId)==null||l.call(s,o),xt(()=>this.state$().serverThreadId))return;this.setState({serverThreadId:o});const i=xt(()=>{var u;return(u=this.placeholderState$())==null?void 0:u.placeholderConversationId});if(i){const u=R1("/c/:conversationId");((c=u==null?void 0:u.params)==null?void 0:c.conversationId)===i&&dl("/c/".concat(o),{replace:!0})}xt(()=>Qbe(jt()).refetch())},onImageGenMessage:o=>{var i;(i=s==null?void 0:s.onImageGenMessage)==null||i.call(s,o),!(!rk(o)||xt(()=>this.state$().hasReceivedImageGenToolCall))&&this.setState({hasReceivedImageGenToolCall:!0})}});await Ao(U(T({conversation:this.conversation},e),{completionMetadata:{conversationMode:{kind:Pt.PrimaryAssistant},systemHints:[Ye.PictureV2]},callbacks:n})),this.handleCompletionSuccess()}catch(s){this.handleCompletionFailure(this.normalizeError(s,"image_gen_request_completion_failed"))}}handleOptimisticRenderFailure(e){var s,n;Ge.addError(e),this.setState({status:"failed",error:e}),(n=(s=this.input.lifecycleCallbacks)==null?void 0:s.onOptimisticRenderError)==null||n.call(s,e)}handleAsyncWorkFailure(e){var i,l;Ge.addError(e),this.setState({status:"failed",error:e}),(l=(i=this.input.lifecycleCallbacks)==null?void 0:i.onAsyncWorkError)==null||l.call(i,e);const s=xt(()=>{var c;return(c=this.placeholderState$())==null?void 0:c.placeholderConversationId});if(!s)return;const n=Tt(s),o=Se.getConversationLastTurn(n),a=o==null?void 0:o.messages.at(-1);a&&nt(s,c=>{as.updateTree(c,u=>{u.updateNodeMetadata(a.id,{placeholderErrorMessage:"Error preparing request"})})})}handleCompletionSuccess(){var e,s;this.setState({status:"succeeded"}),(s=(e=this.input.lifecycleCallbacks)==null?void 0:e.onSuccess)==null||s.call(e)}handleCompletionFailure(e){var s,n;Ge.addError(e),this.setState({status:"failed",error:e}),(n=(s=this.input.lifecycleCallbacks)==null?void 0:s.onCompletionError)==null||n.call(s,e)}normalizeError(e,s){return e instanceof Error?e:new Error(s,{cause:e})}}const u4e=3e4;async function d4e(t,e){let s=0,n=!1;const o=new Set(t);for(;s<u4e;){await new Promise(i=>setTimeout(i,100)),s+=100;const a=e.getState().files.filter(i=>o.has(i.tempId));if(n=a.length>0&&a.every(i=>i.status===fw.Ready),n)break}return n?{success:!0}:{success:!1,error:new Error("image-gen-upload-timeout")}}const f4e=ys(()=>Le([])),WH=uf((t,e)=>Le(void 0));function m4e(t,e){f4e(t).set(s=>s.includes(e.requestKey)?s:[...s,e.requestKey]),WH.set(t,e.requestKey,e)}function p4e(t){const{id:e=Ds(),text:s,filePickerStore:n,fileTempIds:o,persistedFileStore:a}=t,i=n.getState().files.filter(u=>o.includes(u.tempId));for(const u of i)a.getState().files.find(f=>f.tempId===u.tempId)||a.addFile({tempId:u.tempId,status:fw.Ready,file:u.file,fileId:u.tempId,cdnUrl:URL.createObjectURL(u.file),progress:100,source:"local",fileSpec:{id:u.tempId,name:u.file.name,size:u.file.size,mimeType:u.file.type,width:0,height:0}});const l=[s];for(const u of i)l.push({content_type:Yo.ImageAssetPointer,asset_pointer:u.tempId,size_bytes:u.file.size,height:0,width:0});return{id:e,author:{role:ot.User},content:{content_type:bt.MultimodalText,parts:l},metadata:{attachments:i.map(u=>({id:u.tempId,url:URL.createObjectURL(u.file),mimeType:u.file.type,name:u.file.name,size:u.file.size}))}}}function g4e(t){const e=l1(t);return e.clientMetadata={isOptimisticPlaceholder:!0},e}const qH=ys(t=>(e,s)=>{var i;const n=WH(t,e);if(n)return n;const o=(i=s.conversation)!=null?i:_4e(t),a=new c4e({conversation:o,requestKey:e,input:s});return m4e(t,a),a.run$(),a}),Mrt=ys(t=>{const e=qH(t);return({conversation:s,prompt:n,images:o})=>{if(o.length===0)return;const{promptItem:a,group:i}=tU(s);if(a==null)return;const l=Ds(),c={content_type:bt.MultimodalText,parts:[n,...o.map(f=>({content_type:Yo.ImageAssetPointer,asset_pointer:f.asset_pointer,width:f.width,height:f.height,size_bytes:0}))]},u=Ds(),d=cn(c,{image_feature:"prompt",image_prompt_id:a.id,image_send_uuid:u});KH(i,a,u),e(l,{model:H_(t),optimisticMessages:[d],asyncWork:()=>Promise.resolve({eventSource:"url",promptMessage:d})})}});function KH(t,e,s){B.logStructuredEvent(pZ,{promptId:e.id,promptGroupId:t.id,promptGroupPresentation:Gbe(t.presentation),imageSendUuid:s})}const Nrt=ys(t=>{const e=qH(t);return({conversation:s,tempIds:n,filePickerStore:o,persistedFileStore:a})=>{if(n.length===0)return;const{promptItem:i,group:l}=tU(s);if(i==null)return;const c=ove(n),u=_A(s)();if(u&&u!==c)return;_A(s).set(c);const d=H_(t),f=mk(s),m=p4e({filePickerStore:o,persistedFileStore:a,fileTempIds:n,text:i.prompt_text});e(c,{model:d,optimisticMessages:[m,g4e("Uploading")],asyncWork:async()=>{const p=await d4e(n,o);if(!p.success)throw p.error;const{content:g,attachments:h}=GH(o,i.prompt_text,d,f,null);o.setState(U(T({},o.getState()),{files:[]}));const _=Ds();return KH(l,i,_),{eventSource:"url",promptMessage:cn(g,{attachments:h,image_feature:"prompt",image_prompt_id:i.id,image_send_uuid:_})}}})}}),Art=ys(t=>({source:e})=>{const s=e==="camera"?zH:VH,n=document.getElementById(s);n instanceof HTMLInputElement&&n.click()});async function h4e(t,e){if(!Fm(t))return;const s=gr.getImageAssetPointers(t);s.length>0&&await Promise.allSettled(s.map(n=>qbe(jt(),e,n,t)))}function _4e(t){var n,o;const e=dw(t),{session:s}=vl(t);return To.initThread({clientThreadId:e.id,conversationMode:{kind:Pt.PrimaryAssistant},userId:(n=s==null?void 0:s.user)==null?void 0:n.id,accountId:(o=s==null?void 0:s.account)==null?void 0:o.id,disableConversationNavigation:!0}),e}const Irt=ue(Ce,"1a24f4",20,20);async function jrt({url:t,fileName:e}){const n=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,o.click(),o.remove()}const x4e="ChatGPT Image";function Prt(t){const e=new Date,s=t.formatDate(e,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return"".concat(x4e," ").concat(s,".png")}const y4e=Je({id:"imageGenEditor.transformationTextareaPlaceholder",defaultMessage:"Describe what you want to add, remove or replace"}),b4e=Je({id:"imageGenEditor.transformationTextareaPlaceholderShort",defaultMessage:"Describe your edit"}),oS="image",Rrt=({image:t,currentDrawnShape:e,onCleared:s,getImageData:n})=>{const o=ne(),{setTargetedContent:a}=pg(),i=Kt(),c=bl()?y4e:b4e;x.useEffect(()=>(e==null?a({type:"object",subtype:oS,placeholderTextOverride:c,shouldPersistAcrossMessages:!0,isFocusedViewContent:!1,createNewCompletionParams:u=>FAe(u,t)}):a({type:"object",subtype:oS,placeholderTextOverride:c,isFocusedViewContent:!1,createNewCompletionParams:async u=>await UAe(u,t,n(),o,i),onCleared:s}),()=>{a(void 0)}),[e,n,t,o,s,a,i,c])};function v4e({systemHints:t,isN7jupdActive:e}){const s=lt.agentSessionMode$();if(!e)return;const n=t.includes(Ye.Agent);if(!(s!=="incognito"||!n))return{n7jupd_local_safe_mode:!0}}let aS=null;function Ort(t){aS=t}function S4e(t){return aS?aS(t):t}async function C4e({appUri:t,file:e}){const s=await w4e(e),n=new FormData;return n.append("app_uri",t),n.append("file",s,s.name),n}async function w4e(t){const e=await t.arrayBuffer(),s=t.name&&t.name.trim().length>0?t.name.trim():"apps-sdk-upload";return new File([e],s,{type:t.type||"application/octet-stream",lastModified:t.lastModified})}function YH(t){switch(t.content.content_type){case bt.Text:return t.content.parts.join("");case bt.Code:return t.content.text;default:return""}}const Q4=new WeakMap,u_=new WeakMap,J4=t=>{const e=Q4.get(t);if(e)return e;try{const s=t!=null&&t.widget_state?JSON.parse(t.widget_state):void 0;return Q4.set(t,s),s}catch(s){return null}},k4e=t=>{var s;const e=u_.get(t);if(e)return e;try{const n=YH(t),o=n&&(s=JSON.parse(n))!=null?s:void 0;return u_.set(t,o),o}catch(n){return null}},T4e=t=>{const e=u_.get(t);if(e)return e;try{const s=YH(t),[n]=ol(s,ba({path:In,args:o=>{if(typeof o=="string"){const[a]=ol(In(o),Dm);return a!=null?a:{}}return Dm(o,{})}}));return n?(u_.set(t,n),n):null}catch(s){return null}},u0=t=>{var e;return(e=t.html_asset_pointer)!=null?e:""},E4e=t=>{var e;return(e=t.resolved_pineapple_uri)!=null?e:""},Z4="api_tool",fE=t=>t.filter(e=>{var s,n;return e.author.role===ot.Assistant&&!!((s=e.recipient)!=null&&s.startsWith(Z4))||e.author.role===ot.Tool&&!!((n=e.author.name)!=null&&n.startsWith(Z4))}),Wb=t=>{var e;if(t){if("metadata"in t)return(e=t.metadata)==null?void 0:e.chatgpt_sdk;if("chatgpt_sdk"in t)return t.chatgpt_sdk}else return},QH=lx(M4e);function M4e(t){var m,p,g,h,_,b,y,v,S,C,w;const e=fE(t),s=e.find(k=>k.author.role===ot.Assistant),n=e.findLast(k=>k.author.role===ot.Tool&&!!Wb(k)),o=Wb(s),a=Wb(n);let i=o;a&&(i=T(T({},i),a)),i=to(i);const l=u0(i),c=E4e(i),u=()=>s?T4e(s):null,d=()=>n?k4e(n):null,f=(m=i.tool_response_metadata)!=null?m:null;return new Proxy({csp:(p=i.csp)!=null?p:null,disableHeader:i.disable_header,isComplete:!!n&&!!s,invocationUuid:(g=i.invocation_uuid)!=null?g:null,turnUuid:(h=i.turn_uuid)!=null?h:null,distributionChannel:(_=i.distribution_channel)!=null?_:Oh.EXTERNAL,sessionId:(b=i.session_id)!=null?b:null,connectorId:(y=i.attribution_id)!=null?y:"",isError:(v=i.is_error)!=null?v:!1,messages:t,widgetId:(C=(S=n==null?void 0:n.id)!=null?S:s==null?void 0:s.id)!=null?C:"",toolMessageId:(w=n==null?void 0:n.id)!=null?w:null,metadata:i,widgetType:l,widgetParent:c,toolResponseMetadata:f,fitWidth:!!i.fit_width,toolInput:null,toolOutput:null,path:null},{get(k,E){var M,N,A,I,P,R;if(E==="path")return(N=(M=u())==null?void 0:M.path)!=null?N:null;if(E==="toolInput")return(I=(A=u())==null?void 0:A.args)!=null?I:null;if(E==="toolOutput")return(P=d())!=null?P:null;if(E in k)return(R=Object.getOwnPropertyDescriptor(k,E))==null?void 0:R.value}})}const N4e=t=>fE(t).some(e=>{var s;return!!((s=e.metadata)!=null&&s.chatgpt_sdk)}),A4e="oai-ecosys-db",Ei="resolved-widget-cache",I4e=10,X4=(t,e)=>XR(e,{key:()=>t,domain:Ll(In),subdomain:Ll(In),name:Ll(In),html:Ll(In),fitWidth:Ii,logoUrl:Ll(In),logoUrlDark:Ll(In),csp:Ll(ba({isTrusted:Ii,connectDomains:Og,resourceDomains:Og,frameDomains:Og})),redirectDomains:Og,prefersBorder:Ii,hideWidgetAttribution:Ii,hideWidgetActions:Ii,hideFullScreenHeader:Ii,lastAccess:V6});class j4e{constructor(e){X(this,"db");X(this,"openDB",Jf({name:"open_db"},()=>new Promise((e,s)=>{const n=indexedDB.open(A4e,1);n.onupgradeneeded=()=>{const o=n.result;o.objectStoreNames.contains(Ei)||o.createObjectStore(Ei,{keyPath:"key"}).createIndex("lastAccess","lastAccess")},n.onsuccess=()=>e(n.result),n.onerror=()=>s(n.error)})));X(this,"getDB",Jf({name:"get_db"},async()=>{const e=await this.db;return!e||e.close===void 0||e.version===0?(this.db=this.openDB(),this.db):e}));X(this,"get",Jf({name:"get"},async e=>{const s=await this.getDB();return s?new Promise((n,o)=>{const i=s.transaction(Ei,"readwrite").objectStore(Ei),l=i.get(e);l.onsuccess=()=>{if(l.result==null)return n(null);const c=X4(e,l.result);c.lastAccess=Date.now(),i.put(c),n(c)},l.onerror=()=>o(l.error)}):null}));X(this,"set",Jf({name:"set"},async(e,s)=>{const n=await this.getDB();if(!n)return;const a=n.transaction(Ei,"readwrite").objectStore(Ei);a.put(U(T({},X4(e,s)),{key:e,lastAccess:Date.now()})),await new Promise((i,l)=>{const c=a.count();c.onsuccess=()=>{if(c.result>I4e){const f=a.index("lastAccess").openCursor();f.onsuccess=()=>{const m=f.result;m&&a.delete(m.primaryKey),i()},f.onerror=()=>l(f.error);return}i()},c.onerror=()=>l(c.error)})}));X(this,"delete",Jf({name:"delete"},async e=>{const s=await this.getDB();if(!s)return;const o=s.transaction(Ei,"readwrite").objectStore(Ei);await new Promise((a,i)=>{const l=o.delete(e);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}));this.ctx=e,this.db=this.openDB()}}const Jf=({name:t},e)=>async(...s)=>{try{return await e(...s)}catch(n){return me(async()=>{const{DatadogLogger:o}=await import("./mtk1qztvnb31pw5r.js").then(a=>a.CD);return{DatadogLogger:o}},__vite__mapDeps([3,1,4])).then(({DatadogLogger:o})=>{o.addError(n)}),me(async()=>{const{statsc:o,Namespace:a}=await import("./mtk1qztvnb31pw5r.js").then(i=>i.CE);return{statsc:o,Namespace:a}},__vite__mapDeps([3,1,4])).then(({statsc:o,Namespace:a})=>{o.count(a.ECOSYSTEM,"resolved_widget_cache.".concat(t,".error"))}),null}},P4e=ys(t=>new j4e(t)),R4e=(t,e,s)=>{var n,o,a;return e!=null||(e=t.csp),e?{isTrusted:!0,connectDomains:(n=e.connect_domains)!=null?n:[],resourceDomains:(o=e.resource_domains)!=null?o:[],frameDomains:(a=e.frame_domains)!=null?a:[]}:s?{isTrusted:!1,connectDomains:[],resourceDomains:[],frameDomains:[]}:null},rS=t=>{if(!t)return null;try{return new URL(t).hostname.replaceAll(".","-")}catch(e){return t.startsWith("http")?null:rS("https://".concat(t))}},Yh=({chatSDK:t,widgetResponse:e})=>{var d,f,m,p,g,h,_,b,y,v,S,C,w,k,E,M,N,A,I,P,R,O,L,D,H;const s=(f=(d=e==null?void 0:e.domain)!=null?d:t.metadata.widget_domain)!=null?f:null,n=(p=rS(s))!=null?p:rS((m=t.metadata.resolved_pineapple_uri)!=null?m:null),o=t.distributionChannel!==Oh.ONLY_ME&&t.distributionChannel!==Oh.OPENAI,a=(g=e==null?void 0:e.logo_url)!=null?g:null,i=(_=(h=e==null?void 0:e.hide_widget_attribution)!=null?h:t.metadata.hide_widget_attribution)!=null?_:t.distributionChannel===Oh.OPENAI,l=(y=(b=e==null?void 0:e.csp)==null?void 0:b.redirect_domains)!=null?y:[],c=(S=(v=t.csp)==null?void 0:v.redirect_domains)!=null?S:[],u=l.length>0?l:c;return{domain:s,subdomain:n,name:(C=e==null?void 0:e.name)!=null?C:null,html:(w=e==null?void 0:e.html)!=null?w:null,logoUrl:a,logoUrlDark:(k=e==null?void 0:e.logo_url_dark)!=null?k:a,csp:R4e(t,(E=e==null?void 0:e.csp)!=null?E:null,o),redirectDomains:u,prefersBorder:(N=(M=e==null?void 0:e.prefers_border)!=null?M:t.metadata.prefers_border)!=null?N:!1,hideWidgetAttribution:i,hideWidgetActions:((I=(A=e==null?void 0:e.hide_widget_feedback)!=null?A:t.metadata.hide_widget_feedback)!=null?I:!1)||((R=(P=e==null?void 0:e.hide_widget_actions)!=null?P:t.metadata.hide_widget_actions)!=null?R:!1),fitWidth:(L=(O=e==null?void 0:e.fit_width)!=null?O:t.metadata.fit_width)!=null?L:!1,hideFullScreenHeader:(H=(D=e==null?void 0:e.hide_full_screen_header)!=null?D:t.disableHeader)!=null?H:!1}},O4e=({metadata:t})=>t.html_asset_pointer,JH=({metadata:t,path:e})=>["htmlAsset",t.resolved_pineapple_uri,t.html_asset_pointer,e||t.resource_name],L4e=(t,e)=>{var s;return Yh({chatSDK:e,widgetResponse:(s=t.getQueryData(JH(e)))!=null?s:null})},Lrt=t=>{"use no forget";const e=P4e(jt()),s=O4e(t),{path:n}=t,{html_asset_pointer:o,resolved_pineapple_uri:a,resource_name:i}=t.metadata,l=JH(t),{data:c,isLoading:u}=dt({queryKey:["resolvedWidgetCache",s],queryFn:()=>s?e.get(s):Promise.resolve(null),enabled:!!s,staleTime:1/0,gcTime:1/0}),{data:d,isLoading:f,isError:m,refetch:p}=dt({queryKey:l,queryFn:async()=>{try{const h=await de.safeGet("/ecosystem/widget",{parameters:{query:{force_local:!1,uri:a!=null?a:"",template_pointer:o!=null?o:"",resource_path:n||i||""}}});if(s){const _=Yh({chatSDK:t,widgetResponse:h});e.set(s,_)}return h}catch(h){throw s&&h instanceof Zs&&h.status===404&&e.delete(s),h}},gcTime:0,enabled:l.every(Boolean)}),g=T(T(T({},Yh({chatSDK:t,widgetResponse:null})),c!=null?c:void 0),d?Yh({chatSDK:t,widgetResponse:d}):{});return U(T({},g),{refetch:p,isLoading:f&&(!c||u),isError:m})};var ap,bd,vd,T_;class D4e{constructor(e){X(this,"requestBlockingPromiseListener",null);X(this,"subscriptionEffect",null);X(this,"showLoadingBar$",Le(!1));X(this,"transitioningId$",Le(null));X(this,"pinnedChatSDK$",Le(null));X(this,"pinnedChatSDKId$",vt(()=>{var e,s;return(s=(e=this.pinnedChatSDK$())==null?void 0:e.widgetId)!=null?s:null}));X(this,"pinnedWidgetType$",vt(()=>{var s;const e=(s=this.pinnedChatSDK$())==null?void 0:s.metadata;return e?u0(e):null}));X(this,"conversationChatSDKEntries$",vt(()=>Bi(this.conversation).map(({messages:s})=>N4e(s)?QH(s):null).filter(s=>s!=null),{equals:fi}));X(this,"widgetStateCache$",Le(new Map,{equals:()=>!1}));X(this,"conversationTurnSnapshot$",vt(()=>this.hasPinnedWidget$()?xt(()=>Bi(this.conversation)):[]));X(this,"hasPinnedWidget$",vt(()=>this.pinnedWidgetType$()!=null));X(this,"hasFullscreenWidget$",vt(()=>this.hasPinnedWidget$()&&this.displayMode$()==="fullscreen"));X(this,"displayMode$",Le("inline"));X(this,"title$",Le(null));Oo(this,ap,Le(null));X(this,"maxWidgetHeight$",vt(()=>{const{height:e}=nD(this.conversation.ctx);if(this.displayMode$()!=="inline")return this.displayMode$()==="pip"?e/2-38:void 0}));Oo(this,bd,new Set);Oo(this,vd,new Map);X(this,"closedWidgetIds$",Le(new Set,{equals:()=>!1}));X(this,"pinnedWidgetHeight$",vt(()=>{const e=this.maxWidgetHeight$(),s=this.pinnedWidgetType$(),n=Us(this,ap).call(this);return s?Math.min(e!=null?e:0,n!=null?n:0):null}));Oo(this,T_,e=>di(async s=>{const n=this.conversation.serverId$();if(n)try{await de.safePost("/ecosystem/widget_state",{requestBody:{conversation_id:n,message_id:e,state:JSON.stringify(s)}})}catch(o){}finally{Us(this,bd).delete(e)}},2e3));X(this,"getLatestChatSDK$",e=>{const s=this.pinnedWidgetType$();if(!s||s!==e.widgetType)return e;const n=Bi(this.conversation);return eI(e,n,s)});this.conversation=e,this.requestBlockingPromiseListener=_le(async()=>{await Promise.all(Us(this,vd).values().map(s=>s.flush()))},()=>Us(this,bd).size>0)}subscribeToNewMessages$(e,s){this.subscriptionEffect&&this.subscriptionEffect(),this.subscriptionEffect=kl(()=>{const n=this.pinnedWidgetType$();if(!n)return;const o=this.conversationTurnSnapshot$(),i=Bi(this.conversation).slice(o.length);if(i.length===0)return;const l=eI(e,i,n);s(c=>{var d,f;return!c||l.toolOutput!=null?l:U(T({},l),{toolResponseMetadata:(d=l.toolResponseMetadata)!=null?d:c.toolResponseMetadata,toolOutput:(f=l.toolOutput)!=null?f:c.toolOutput})})})}setPinnedWidgetHeight(e){Us(this,ap).set(e)}isPinned$(e){return this.pinnedWidgetType$()===e.widgetType}isPinOrigin$(e){return this.pinnedChatSDKId$()===e.widgetId}setDisplayMode$(e,s,n){cl(()=>{this.displayMode$.set(s),s==="fullscreen"?n&&this.title$.set(n):this.title$.set(null),s==="pip"||s==="fullscreen"?this.pinnedChatSDK$.set(e):this.pinnedChatSDK$.set(null)})}setWidgetState$(e,s){this.widgetStateCache$.set(this.widgetStateCache$().set(e,s));let n=Us(this,vd).get(e);n||(n=Us(this,T_).call(this,e),Us(this,vd).set(e,n)),Us(this,bd).add(e),n(s)}closeWidget$(e,s){const n=this.conversation.serverId$();n&&(this.closedWidgetIds$.set(this.closedWidgetIds$().add(e)),de.safePost("/ecosystem/widget_close",{requestBody:{conversation_id:n,message_id:e,close_reason:s}}))}callTool$(e,s,n){return de.safePost("/ecosystem/call_mcp",{requestBody:{app_uri:e,tool_name:s,tool_input:n}})}async uploadFile$(e,s){const n=await C4e({appUri:e,file:s});return Sm.post("".concat(vc,"/ecosystem/upload_widget_file"),n).then(o=>({fileId:o.file_id}))}getFileDownloadUrl$(e,s){return de.safePost("/ecosystem/file_download_url",{requestBody:{app_uri:e,file_id:s}}).then(n=>({downloadUrl:n.download_url}))}getFileMetadata$(e,s){return de.safePost("/ecosystem/file_metadata",{requestBody:{app_uri:e,file_id:s}}).then(n=>{var o,a;return{fileName:(o=n.file_name)!=null?o:null,mimeType:(a=n.mime_type)!=null?a:null}})}getWidgetState$(e){var o,a;const s=(o=this.widgetStateCache$().get(e.widgetId))!=null?o:J4(e.metadata);if(s!=null||e.sessionId==null)return s;const n=this.conversationChatSDKEntries$();for(let i=n.length-1;i>=0;i--){const l=n[i],c=(a=this.widgetStateCache$().get(l.widgetId))!=null?a:J4(l.metadata);if(l.widgetId!==e.widgetId&&l.sessionId===e.sessionId&&c!=null)return c}return null}getWidgetStateAndProps$(e){const{toolInput:s,toolOutput:n,toolResponseMetadata:o}=e;return{toolInput:s,toolOutput:n,toolResponseMetadata:o,widgetState:this.getWidgetState$(e)}}fullscreenWidgetPlaceholder$(e){if(this.displayMode$()!=="fullscreen")return null;const s=this.pinnedChatSDK$();if(!s)return null;const n=L4e(ln(this.conversation.ctx),s);return n!=null&&n.name?e.formatMessage(Je({id:"oECdDM",defaultMessage:"Ask {name}"}),{name:n.name}):null}}ap=new WeakMap,bd=new WeakMap,vd=new WeakMap,T_=new WeakMap;const ZH=Gc(t=>new D4e(t)),eI=(t,e,s)=>{var n,o;for(let a=e.length-1;a>=0;a--){const i=e[a];for(let l=i.messageGroups.length-1;l>=0;l--){const c=i.messageGroups[l];if(c.type===ei.JITPlugin)for(let u=c.messages.length-1;u>=0;u--){const d=c.messages[u];if((n=d.metadata)!=null&&n.chatgpt_sdk&&s===u0((o=d.metadata)==null?void 0:o.chatgpt_sdk))return QH(c.messages)}}}return t};class F4e{constructor(e){X(this,"isOpen$",Le(!1));X(this,"currentMessageId$",Le(void 0));X(this,"contentReferenceStartIndex$",Le(void 0));X(this,"wasSidebarOpen$",Le(!1));X(this,"turnIndex$",Le(-1));X(this,"businesses$",Le(void 0));X(this,"additionalBusinesses$",Le(void 0));X(this,"additionalBusinessesMergeMode$",Le("replace"));X(this,"hasRequestedNewData$",Le(!1));X(this,"initialViewState$",Le(void 0));X(this,"currentViewState$",Le(void 0));this.conversation=e}open$(){this.isOpen$.set(!0)}close$(){this.isOpen$.set(!1)}toggleIsOpen$(){this.isOpen$.set(!this.isOpen$())}setOverlayState$({messageId:e,contentReferenceStartIndex:s,businesses:n,additionalBusinesses:o,wasSidebarOpen:a,turnIndex:i,viewState:l}){this.currentMessageId$.set(e),this.contentReferenceStartIndex$.set(s),this.businesses$.set(n),this.additionalBusinesses$.set(o),this.turnIndex$.set(i),a!==void 0&&this.wasSidebarOpen$.set(a),l&&(this.initialViewState$.set(l),this.currentViewState$.set(l))}setViewState$({viewState:e}){this.currentViewState$.set(e)}setBusinesses$(e){this.businesses$.set(e)}setAdditionalBusinesses$(e){this.additionalBusinesses$.set(e)}setAdditionalBusinessesMergeMode$(e){this.additionalBusinessesMergeMode$.set(e!=null?e:"replace")}setTurnIndex$(e){this.turnIndex$.set(e)}setHasRequestedNewData$(e){this.hasRequestedNewData$.set(e)}reset$(){this.isOpen$.set(!1),this.currentMessageId$.set(void 0),this.contentReferenceStartIndex$.set(void 0),this.businesses$.set(void 0),this.additionalBusinesses$.set(void 0),this.turnIndex$.set(-1),this.initialViewState$.set(void 0),this.currentViewState$.set(void 0)}}const Qh=Gc(t=>new F4e(t));function Drt(){return!1}const B4e={apps:[],selectedApps:[]},Frt=Zt(vp(Vs(()=>B4e))),U4e=async t=>{var s;const e=t.map(n=>n.id);if(e.length!==0)return(s=gZ)==null?void 0:s.pairing.getContentForPairedApps(e)},Brt=async()=>{},Urt=({event:t,conversationMode:e,systemHints:s})=>{const{systemHints:n,extraStreamParams:o}=mw(s);return{sourceEvent:t,completionType:Fi.Continue,extraStreamParams:o,completionMetadata:{conversationMode:e,systemHints:n}}};function $4e(t){if(t===Ye.Research)return"research";if(t===Ye.Agent)return"agent";if(t===Ye.Glaux)return"scout";if(t===Ye.Search)return"file_search"}const $rt=async({ctx:t,clientThreadId:e,attachments:s,content:n,contentToSend:o,conversationMode:a,hasSelectedApps:i,desktopOrigin:l,shouldCollectSidebarContext:c,desktopSidebarContext:u,isMessageFollowupsEnabled:d,selectedApps:f,selectedGizmoTag:m,selectedRepos:p,selectedSources:g,selectedMCPConnectors:h,selectedConnectorIds:_,selectedSyncKnowledgeStoreIds:b,searchConnectorIds:y,noFullActionConnectorIds:v,startedWithByoMcp:S,sourceEvent:C,systemHints:w,allSystemHints:k,usedDictation:E,dictationEdited:M,dictationOriginalText:N,dictationAssetPointer:A,dictationAssetTTL:I,dictationAssetFormat:P,isN7jupdActive:R,customSourceList:O,isForceAllowCustomMcpModeEnabled:L,selectedHazelnuts:D,thinkingEffort:H,deepResearchVersion:V})=>{var Q,ie,_e;const q=GT({namespace:cg.CompletionRequest,opts:{expectedTimingLogs:[{name:"prompt_submitted",expectedInMs:3e3}],debug:!1}});q.reset();const W=[],{targetedContent:$}=pg.getState();if(i){const ye=await U4e(f);ye&&W.push(hZ(ye))}const Z=new Map;k.forEach(ye=>Z.set(ye.systemHint,ye)),(S||h&&h.some(ye=>ye.status==="ONLY_ME")||w.some(ye=>{var Re;return(Re=Z.get(ye))==null?void 0:Re.isDangerous}))&&W.push(iw("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));const K=[],{rebaseSystemMessageContent:Y}=_1.getState();Y&&K.push(_Z(Y));const ae=T({},a);"gizmo"in ae&&delete ae.gizmo;let se=ae;if(l){const ye=lt.newConversationGizmoId$();ye&&(se={kind:Pt.GizmoInteraction,gizmo_id:ye},lt.newConversationGizmoId$.set(void 0))}const ee=w.includes(Ye.Search);let re=w.includes(Ye.Research);const he=w.includes(Ye.Agent),fe=w.includes(Ye.Glaux),pe=w.includes(Ye.Slurm),le=w.length===0,ve=ee?Zv.CONVERSATION_COMPOSER_WEB_ICON:void 0,Te=Zke(),xe=Rx(),ce=Intl.DateTimeFormat().resolvedOptions().timeZone,we=l?v4e({systemHints:w,isN7jupdActive:R}):void 0,ge=Object.keys(xe).length>0,Ae=Et(t,e),Ue=(Q=ZH(Ae).pinnedChatSDK$())==null?void 0:Q.toolMessageId,Ie=cn(n,T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T(T({},s.length>0&&{attachments:s}),m&&{gizmo_id:m.gizmo.id}),g&&{caterpillar_selected_sources:re?fl(g):void 0,developer_mode_connector_ids:h==null?void 0:h.map(ye=>ye.id),selected_mcp_sources:re||pe||fe||R&&L?h:void 0,selected_connector_ids:_?Array.from(_):void 0,selected_sync_knowledge_store_ids:b?Array.from(b):void 0,selected_sources:pe||fe||re||R||le||he?fl(g,pe||fe||le):void 0}),p&&{selected_github_repos:[...(ie=p.selectedRepos)!=null?ie:[]],selected_all_github_repos:p.selectedAllRepos}),w.length>0&&{system_hints:w}),D&&D.length>0&&{selected_hazelnuts:D}),V&&{deep_research_version:V,[F1e]:V}),y&&y.length>0&&{search_connectors:y}),v&&v.length>0&&{no_full_action_connectors:v}),!!o.metadata&&{serialization_metadata:o.metadata}),Ue?{chatgpt_sdk_focused_message_id:Ue}:null),Te.length>0&&{canvas:{user_created_textdocs:Te.map(ye=>({user_created_temp_textdoc_id:ye.tempTextdocId,type:ye.type,title:ye.title,content:ye.content,create_source:ye.create_source,remix_shared_textdoc_id:ye.remixSharedTextdocId}))}}),ge&&{__internal:{search_settings:ge?xe:void 0}}),E&&T(T(T(T(T({dictation:!0},M&&{dictation_edited:!0}),N&&{dictation_original_text:N}),A&&{dictation_asset_pointer:A}),I&&{dictation_asset_ttl:I}),P&&{dictation_asset_format:P})),(re||R)&&ce&&{user_timezone:ce}),O&&{custom_source_list:O}),l?T(T({},await wp(c&&u!=null?u:void 0,l,"user",w)),we!=null?we:{}):{}));let Me={sourceEvent:C,completionMetadata:{conversationMode:se,systemHints:w,searchSource:ve},promptMessage:Ie,prependMessages:W,appendMessages:K,thinkingEffort:H,profiler:q};const te={};if(Me=S4e(Me),(_e=Me.completionMetadata)!=null&&_e.systemHints){let ye=!1;Me.completionMetadata.systemHints=Me.completionMetadata.systemHints.filter(Re=>Re===Ye.Search?(ye=!0,!1):!0),ye&&(te.forceUseSearch=!0)}if(d&&(te.enableMessageFollowups=!0),Qh(Ae).isOpen$()){const ye=Qh(Ae).currentViewState$();Qh(Ae).setHasRequestedNewData$(!0),te.preRetrievalSettings={use_last_turn_query:!1,top_n:20,query_type:"local_business",query:{latitude:ye==null?void 0:ye.latitude,longitude:ye==null?void 0:ye.longitude,radius_meters:ye==null?void 0:ye.radiusMeters}}}Me.extraStreamParams=te,$!=null&&$.createNewCompletionParams&&(Me=await $.createNewCompletionParams(Me));try{const ye=w.length>0?$4e(w[0]):void 0;Di.logSelectionChanged({selectedSources:g!=null?g:new Set,selectedMCPSources:h!=null?h:[],referrer:"composer_submit",triggerHint:ye})}catch(ye){}return q.logTimingOnce("request_params_ready"),Me};var qb,tI;function H4e(){if(tI)return qb;tI=1;var t=lp(),e=/[\\^$.*+?()[\]{}|]/g,s=RegExp(e.source);function n(o){return o=t(o),o&&s.test(o)?o.replace(e,"\\$&"):o}return qb=n,qb}var G4e=H4e();const V4e=en(G4e),z4e=t=>{var l;const e=(l=t==null?void 0:t.filter(c=>{var u;return(u=c.keywordInvocations)==null?void 0:u.length}))!=null?l:[],s=e.flatMap(c=>c.keywordInvocations).filter(c=>typeof c=="string"),n=s.map(c=>V4e(c)),o=[];e.forEach(c=>{var u;(u=c.keywordInvocations)==null||u.forEach(d=>{o.push([d.toLowerCase(),c])})});const a=Object.fromEntries(o);let i;try{i=n.length>0?new RegExp("^(".concat(n.join("|"),")\\s+"),"ig"):void 0}catch(c){Ge.addError("Error creating regex for ecosystem suggestions",{keywords:s,escapedKeywords:n})}return{keywordToSystemHintMap:a,regex:i}},W4e=t=>{"use forget";const e=F.c(25),{clientThreadId:s,composerController:n,availableSystemHints:o}=t,a=G();let i;e[0]!==a?(i=H3(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=On(),u=i9(),d=pw(),f=l9(),m=x.useRef(void 0);let p;e:{if(!H3(a)){let w;e[2]===Symbol.for("react.memo_cache_sentinel")?(w={},e[2]=w):w=e[2],p=w;break e}let S;e[3]!==o?(S=z4e(o),e[3]=o,e[4]=S):S=e[4];let C;e[5]!==f||e[6]!==c||e[7]!==S?(C=U(T({},S),{activeSystemHintType:c,activeConnectorSystemTypes:f}),e[5]=f,e[6]=c,e[7]=S,e[8]=C):C=e[8],p=C}const g=p;let h,_;e[9]!==n||e[10]!==g||e[11]!==l?(h=()=>{l&&xZ(Ht(n),g)},_=[n,g,l],e[9]=n,e[10]=g,e[11]=l,e[12]=h,e[13]=_):(h=e[12],_=e[13]),x.useEffect(h,_);let b,y;e[14]!==f||e[15]!==c||e[16]!==u||e[17]!==o||e[18]!==s||e[19]!==n||e[20]!==a||e[21]!==l||e[22]!==d?(b=()=>{if(!l)return;const v=S=>{var k;const C=Ht(n),{matches:w}=(k=bZ.getState(C.state))!=null?k:{};return{matches:w}};return Zo(()=>v(hw(n)),S=>{const{matches:C}=S,w=m.current,k=new Set([...C!=null?C:[]].map(q4e));m.current=k;const E=[...C!=null?C:[]].filter(P=>{const{systemHintType:R}=P;return!(w!=null&&w.has(R))}),M=[...w!=null?w:[]].filter(P=>!k.has(P));if(!C)return;let N=E.map(P=>({systemHint:o==null?void 0:o.find(R=>R.systemHint===P.systemHintType),keyword:P.keyword}));const A=M.map(P=>o==null?void 0:o.find(R=>R.systemHint===P)),I=o==null?void 0:o.find(P=>P.systemHint===c);if(!(I&&!gw(I.systemHint))){if(N.length>0){if(!_o(a,"2350526063").get("has_suggestions_enabled",!0))return;const L=_o(a,"2993367469").get("connector_id",null);if(N=N.filter(D=>{const{systemHint:H}=D;if(!(H!=null&&H.isConnector))return!0;const V=yZ(H.systemHint);return V?V!==L:!0}),N.length===0)return}N.forEach(P=>{const{systemHint:R,keyword:O}=P;R!=null&&R.isConnector&&!f.has(R.systemHint)&&(Td(R.systemHint,Ed.PrefixMatch,U(T({},Fs({clientThreadId:s})),{matched_keyword:O})),u(R.systemHint,{analyticsMetadata:{clientThreadId:s}}))}),A.forEach(P=>{P!=null&&P.isConnector&&f.has(P.systemHint)&&(Td(P.systemHint,Ed.PrefixRemove,T({},Fs({clientThreadId:s}))),d(P.systemHint,{analyticsMetadata:{clientThreadId:s}}))})}},{fireImmediately:!0,equals:fi})},y=[n,s,u,d,o,c,f,l,a],e[14]=f,e[15]=c,e[16]=u,e[17]=o,e[18]=s,e[19]=n,e[20]=a,e[21]=l,e[22]=d,e[23]=b,e[24]=y):(b=e[23],y=e[24]),x.useEffect(b,y)};function q4e(t){const{systemHintType:e}=t;return e}function mE(t){const e=G(),s=On(),n=oe(()=>t!=null&&XH(Cs(Et(e,t)).id,s));return x.useMemo(()=>({isOdysseyMode:n}),[n])}function XH(t,e){return t===vZ||wc(e)}const eG=t=>{"use forget";var O,L;const e=F.c(36),{clientThreadId:s}=t,n=On(),o=fs(),a=sf();let i;e[0]!==o||e[1]!==a?(i=(o==null?void 0:o.isPersonalAccount())&&a,e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=!!i,c=mE(s).isOdysseyMode,u=c||n===Ye.Research;let d;e[3]!==n?(d=bs()&&n===Ye.Agent,e[3]=n,e[4]=d):d=e[4];const f=d,m=up(),g=!!(m!=null&&m.softmentionEnabled)&&u&&!f;let h;e[5]!==g?(h={enabled:g},e[5]=g,e[6]=h):h=e[6];const{connectedTypes:_,linkIdToConnectedType:b}=jC(h);let y;e[7]!==g?(y={enabled:g},e[7]=g,e[8]=y):y=e[8];const{connectedTypes:v}=r6(y),{data:S}=L_();S==null||S.connection_statuses,m==null||m.connectorConfig;let C,w,k;if(e[9]!==n||e[10]!==(m==null?void 0:m.connectorConfig)||e[11]!==v||e[12]!==g||e[13]!==c||e[14]!==l||e[15]!==_||e[16]!==b||e[17]!==(S==null?void 0:S.connection_statuses)){const D=(O=S==null?void 0:S.connection_statuses.reduce(K4e,new Set))!=null?O:new Set;let H=_;if(n===Ye.Research||c)H=v;else{const K=(L=S==null?void 0:S.connection_statuses.reduce((Y,ae)=>{if(["activated","partially_activated"].includes(ae.user_connection_details.activation_status)&&ae.user_connection_details.backing_link_id){const se=b.get(ae.user_connection_details.backing_link_id);se&&Y.add(se)}return Y},new Set))!=null?L:new Set;H=new Set([..._].filter(Y=>Y===je.GDRIVE_ACTION_CONNECTOR&&l&&D.has("gdrive_sync_connector")||K.has(Y)?!1:!(Y===je.SHAREPOINT_CONNECTOR&&D.has("sharepoint_admin_sync_connector"))))}const V=(m==null?void 0:m.connectorConfig)||{},q={keywordSet:new Set,connectorToKeywordsMap:{},keywordsConnectorMap:{}},{keywordSet:W,connectorToKeywordsMap:$,keywordsConnectorMap:Z}=Object.entries(V).reduce((K,Y)=>{const[ae,se]=Y;if(H.has(ae)||D.has(ae)){const ee=((se==null?void 0:se.keywords)||[]).map(Y4e);K.connectorToKeywordsMap[ae]=ee,ee.forEach(re=>{K.keywordSet.add(re),K.keywordsConnectorMap[re]=ae})}return K},q);C=$,w=Z,k=g?Array.from(W):[],e[9]=n,e[10]=m==null?void 0:m.connectorConfig,e[11]=v,e[12]=g,e[13]=c,e[14]=l,e[15]=_,e[16]=b,e[17]=S==null?void 0:S.connection_statuses,e[18]=C,e[19]=w,e[20]=k}else C=e[18],w=e[19],k=e[20];let E;e[21]!==C||e[22]!==g?(E=g?C:{},e[21]=C,e[22]=g,e[23]=E):E=e[23];let M;e[24]!==g||e[25]!==w?(M=g?w:{},e[24]=g,e[25]=w,e[26]=M):M=e[26];let N;e[27]!==k||e[28]!==E||e[29]!==M?(N={filteredKeywords:k,connectorToKeywordsMap:E,keywordsConnectorMap:M},e[27]=k,e[28]=E,e[29]=M,e[30]=N):N=e[30];const{filteredKeywords:A,connectorToKeywordsMap:I,keywordsConnectorMap:P}=N;let R;return e[31]!==I||e[32]!==g||e[33]!==A||e[34]!==P?(R={enabled:g,keywords:A,connectorToKeywordsMap:I,keywordsConnectorMap:P},e[31]=I,e[32]=g,e[33]=A,e[34]=P,e[35]=R):R=e[35],R};function K4e(t,e){return["activated","partially_activated"].includes(e.user_connection_details.activation_status)&&t.add(e.user_connection_details.connection_type),t}function Y4e(t){return t.toLowerCase()}const Q4e=({clientThreadId:t,composerController:e})=>{const{mentionedSources:s,addMentionedSource:n,deleteMentionedSource:o}=Da(t),a=On(),{setThreadSystemHintMode:i}=La(),l=mE(t).isOdysseyMode,c=x.useRef(l),{keywords:u,connectorToKeywordsMap:d,keywordsConnectorMap:f}=eG({clientThreadId:t});x.useEffect(()=>{c9(u,Ht(e))},[e,u]);const m=x.useRef(a);x.useEffect(()=>{const _=m.current;m.current=a;const b=Ht(e),y=c.current;if(c.current=l,y&&!l&&q0(K0(b.state),b),(_===Ye.Slurm||_===Ye.Research)&&a==null){const v=K0(b.state);q0(v,b),v.forEach(S=>o(f[S]))}},[a,e,o,l,f]);const p=x.useRef(s);x.useEffect(()=>{const _=p.current;if(p.current=s,!_)return;const b=Array.from(_).filter(v=>!(s!=null?s:new Set).has(v)),y=[];b.forEach(v=>{var S;y.push(...(S=d[v])!=null?S:[])}),q0(y,Ht(e))},[e,d,s]);const g=x.useRef([]),h=a!=null;x.useEffect(()=>{const _=y=>{if(g.current.length===0&&y.length>0&&!h){const C={clientThreadId:t};i(Ye.Slurm,!0,C)}const v=y.filter(C=>!g.current.includes(C)),S=g.current.filter(C=>!y.includes(C));v.forEach(C=>n(C)),S.forEach(C=>o(C)),g.current=y},b=y=>K0(y).map(v=>f[v.toLowerCase()]);return kl(()=>{_(SZ(b(hw(e))))})},[n,t,e,o,f,h,i])},Hrt=({clientThreadId:t,currentModelId:e,isCompletionInProgress:s,composerController:n,availableSystemHints:o})=>{const a=G(),i=Si(),l=On(),c=Qe(t,v=>{var S;return(S=v==null?void 0:v.prepareRequestBlocked)!=null?S:!1}),{isOpen:u}=XL();Q4e({clientThreadId:t,composerController:n}),W4e({clientThreadId:t,composerController:n,availableSystemHints:o});const d=x.useRef(s),f=x.useRef(!1),m=x.useRef(c),p=x.useCallback(v=>{d.current||nt(t,S=>{S.conduitToken=v,S.prepareState="success"})},[t]),g=x.useRef(null);g.current=v=>{if(!e)return;const S=Zx(n).trim(),C=S?{id:typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():"".concat(Date.now()),author:{role:ot.User},content:{content_type:bt.Text,parts:[S]}}:void 0,w=[...new Set(i.getState().files.map(O=>{var L,D;return(D=(L=O.fileSpec)==null?void 0:L.mimeType)!=null?D:u9(O.file)}).filter(O=>!!O).map(O=>O.toLowerCase()))],k=Et(a,t),E=xt(()=>Cs(k)),M=l?[l]:[],{composerThinkingEffort$:N}=CZ(n);let A=e,I=E!=null&&E.configurableThinkingEffort||(E==null?void 0:E.id)===j1?xt(N):void 0;const P=xr(a).getLayer("3360722522");return M.includes(Ye.PictureV2)&&(P.get("use_default_model")&&(A=xt(()=>H_(a).id)),P.get("use_standard_thinking_effort")&&(I="standard")),A!==j1&&!(E!=null&&E.configurableThinkingEffort)&&(I=void 0),Xe(a,"790459319").get("show-juice-control",!1)||(I=void 0),Gfe(t,A,M,p,{isRegen:!1,isOnboardingConversation:u,delayAfterCompletion:v!=null?v:!0,partialQuery:C,attachmentMimeTypes:w.length>0?w:void 0,thinkingEffort:I})};const h=x.useCallback(v=>{var S;return(S=g.current)==null?void 0:S.call(g,v)},[]),_=x.useCallback(W6(()=>h(),5e3,{leading:!0,trailing:!0}),[]),b=x.useRef(!1),y=_w();return x.useEffect(()=>{d.current=s},[s]),x.useEffect(()=>{f.current=!1,m.current=c},[t]),x.useEffect(()=>{const v=m.current;if(m.current=c,!!y){if(!b.current){b.current=!0;return}if(!d.current&&!c){if(v&&Ee(a,"8899267")){h(!1);return}f.current&&h()}}},[y,t,e,l,c,a]),x.useEffect(()=>{_.cancel()},[s,_]),x.useEffect(()=>{if(s||!Ox(a,!0))return;function v(){f.current=!0,_()}const S=[Xe(a,"429683476").get("on-focus",!1)?Zo(()=>cx(n),C=>{C&&v()},{fireImmediately:!0}):()=>{},Zo(()=>hw(n),v),i.subscribe(C=>{C.files.length>0&&v()})];return()=>{S.forEach(C=>C())}},[s,n,_,a,i]),null},tG="side_chat",Grt="ntp",Vrt="website";function zrt(t){"use forget";var u;const e=F.c(4),{clientThreadId:s,isKaur1br5Client:n}=t,o=iH(n?s:void 0);let a;e:{if(!o){a=null;break e}a=((u=o.metadata)==null?void 0:u.n7jupd_local_safe_mode)===!0?"incognito":"signedInAccounts"}const i=a;let l,c;return e[0]!==i||e[1]!==n?(l=()=>{n&&i&&lt.agentSessionMode$()!==i&&lt.agentSessionMode$.set(i)},c=[i,n],e[0]=i,e[1]=n,e[2]=l,e[3]=c):(l=e[2],c=e[3]),x.useEffect(l,c),o!=null}const J4e="signedInAccounts";function Z4e(t){lt.agentSessionMode$.set(t)}function X4e(t){lt.agentSafeModeHasSeenNux$.set(t)}function sG(t){Z4e(t);const e=Bc();e==null||e.updateAgentSafeMode(t)}function eIe(t){X4e(t);const e=Bc();e==null||e.updateAgentSafeModeHasSeenNux(t)}const Hn=Ne({incognitoLabel:{id:"R+8byO",defaultMessage:"Start logged out"},incognitoDescription:{id:"Omk3s1",defaultMessage:"Let ChatGPT work alongside you logged out from your accounts."},incognitoMenuLabel:{id:"2E6cUi",defaultMessage:"Logged out"},signedInLabel:{id:"ajcZ1i",defaultMessage:"Start logged in"},signedInDescription:{id:"+aVek4",defaultMessage:"ChatGPT works alongside you using your logged in accounts."},signedInMenuLabel:{id:"dPv7uS",defaultMessage:"Logged in"},modalTitle:{id:"QvXNKA",defaultMessage:"Agent mode may introduce risk"},modalDescriptionIntroHeading:{id:"M46Qff",defaultMessage:"Agent mode may introduce risk."},modalDescriptionIntroBody:{id:"bwpgjC",defaultMessage:"In Agent mode, ChatGPT can perform complex tasks in the browser for you."},modalDescriptionLoggedInHeading:{id:"7YCY6E",defaultMessage:"Logged in:"},modalDescriptionLoggedInBody:{id:"6AOX4E",defaultMessage:'In "logged in" mode, ChatGPT can access your logged in sites, making it faster to complete tasks. ChatGPT is built to protect you, but there is always some risk that attackers could successfully break our safeguards to access your data, or take actions as you on logged in sites. You can use logged out mode to reduce risk.'},modalDescriptionLoggedOutHeading:{id:"seaiYG",defaultMessage:"Logged out:"},modalDescriptionLoggedOutBody:{id:"Gw4NKU",defaultMessage:'Use "logged out" mode to have Agent mode use sites without being logged in as you. You can still log ChatGPT agent into individual sites, allowing it to use just those sites logged in.'},modalIncognitoCta:{id:"JEr/J7",defaultMessage:"Start logged out"},modalSignedInCta:{id:"kGLOXd",defaultMessage:"Start logged in"},modalCancelCta:{id:"5anpHu",defaultMessage:"Cancel"}}),nG=ue(Ce,"aa2e8a",20,20),tIe=t=>({introHeading:t.formatMessage(Hn.modalDescriptionIntroHeading),introBody:t.formatMessage(Hn.modalDescriptionIntroBody),loggedInHeading:t.formatMessage(Hn.modalDescriptionLoggedInHeading),loggedInBody:t.formatMessage(Hn.modalDescriptionLoggedInBody),loggedOutHeading:t.formatMessage(Hn.modalDescriptionLoggedOutHeading),loggedOutBody:t.formatMessage(Hn.modalDescriptionLoggedOutBody)}),sIe=t=>["".concat(t.introHeading," ").concat(t.introBody),"".concat(t.loggedInHeading," ").concat(t.loggedInBody),"".concat(t.loggedOutHeading," ").concat(t.loggedOutBody)].join("\n\n");function nIe(t){"use forget";const e=F.c(35),{isOpen:s,onClose:n,onModeSelected:o}=t,a=ne(),i=oe(lt.agentSessionMode$),l=i!=null?i:J4e,c=oe(lt.agentSafeModeHasSeenNux$);let u,d,f;e[0]!==a?(u=tIe(a),d=a.formatMessage(Hn.modalTitle),f=sIe(u),e[0]=a,e[1]=u,e[2]=d,e[3]=f):(u=e[1],d=e[2],f=e[3]);let m;e[4]!==a?(m=a.formatMessage(Hn.modalIncognitoCta),e[4]=a,e[5]=m):m=e[5];let p;e[6]!==a?(p=a.formatMessage(Hn.modalSignedInCta),e[6]=a,e[7]=p):p=e[7];let g;e[8]!==a?(g=a.formatMessage(Hn.modalCancelCta),e[8]=a,e[9]=g):g=e[9];let h;e[10]!==u||e[11]!==d||e[12]!==f||e[13]!==m||e[14]!==p||e[15]!==g?(h={title:d,description:f,descriptionSections:u,incognitoCta:m,signedInCta:p,cancelCta:g},e[10]=u,e[11]=d,e[12]=f,e[13]=m,e[14]=p,e[15]=g,e[16]=h):h=e[16];const _=h;let b,y;e[17]!==c||e[18]!==s?(b=()=>{s&&c===!1&&eIe(!0)},y=[c,s],e[17]=c,e[18]=s,e[19]=b,e[20]=y):(b=e[19],y=e[20]),x.useEffect(b,y);let v;e[21]!==n||e[22]!==o?(v=w=>{sG(w),o==null||o(w),n()},e[21]=n,e[22]=o,e[23]=v):v=e[23];const S=v;let C;return e[24]!==S||e[25]!==s||e[26]!==_.cancelCta||e[27]!==_.description||e[28]!==_.descriptionSections||e[29]!==_.incognitoCta||e[30]!==_.signedInCta||e[31]!==_.title||e[32]!==l||e[33]!==n?(C=r.jsx(oIe,{isOpen:s,onClose:n,selectedMode:l,onSelectMode:S,title:_.title,description:_.description,descriptionSections:_.descriptionSections,incognitoCta:_.incognitoCta,signedInCta:_.signedInCta,cancelCta:_.cancelCta}),e[24]=S,e[25]=s,e[26]=_.cancelCta,e[27]=_.description,e[28]=_.descriptionSections,e[29]=_.incognitoCta,e[30]=_.signedInCta,e[31]=_.title,e[32]=l,e[33]=n,e[34]=C):C=e[34],C}function oIe(t){"use forget";const e=F.c(40),{isOpen:s,onClose:n,selectedMode:o,isSubmitting:a,onSelectMode:i,title:l,description:c,descriptionSections:u,incognitoCta:d,signedInCta:f,cancelCta:m}=t;let p;e[0]!==c||e[1]!==u?(p=u?r.jsxs("div",{className:"text-token-text-secondary space-y-3 text-sm md:text-base",children:[r.jsx("p",{children:u.introBody}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:u.loggedInHeading}),r.jsx("span",{children:u.loggedInBody})]}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:u.loggedOutHeading}),r.jsx("span",{children:u.loggedOutBody})]})]}):r.jsx("p",{className:"text-token-text-secondary text-sm whitespace-pre-line md:text-base",children:c}),e[0]=c,e[1]=u,e[2]=p):p=e[2];const g=p;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"bg-token-main-surface-secondary flex h-12 w-12 items-center justify-center rounded-full",children:r.jsx(nG,{className:"icon-xl text-token-text-primary"})}),e[3]=h):h=e[3];let _;e[4]!==l?(_=r.jsx("h2",{className:"text-token-text-primary text-lg font-semibold md:text-xl",children:l}),e[4]=l,e[5]=_):_=e[5];let b;e[6]!==g||e[7]!==_?(b=r.jsxs("div",{className:"flex flex-col gap-4",children:[h,r.jsxs("div",{className:"space-y-2",children:[_,g]})]}),e[6]=g,e[7]=_,e[8]=b):b=e[8];let y;e[9]!==m||e[10]!==a||e[11]!==n?(y=r.jsx(ke,{color:"secondary",onClick:n,disabled:a,className:"md:text-base",children:m}),e[9]=m,e[10]=a,e[11]=n,e[12]=y):y=e[12];let v;e[13]!==i?(v=()=>i("incognito"),e[13]=i,e[14]=v):v=e[14];const S=o==="incognito"&&"font-medium";let C;e[15]!==S?(C=z("md:text-base",S),e[15]=S,e[16]=C):C=e[16];let w;e[17]!==d||e[18]!==a||e[19]!==v||e[20]!==C?(w=r.jsx(ke,{color:"primary",onClick:v,disabled:a,className:C,children:d}),e[17]=d,e[18]=a,e[19]=v,e[20]=C,e[21]=w):w=e[21];let k;e[22]!==i?(k=()=>i("signedInAccounts"),e[22]=i,e[23]=k):k=e[23];const E=o==="signedInAccounts"&&"font-medium";let M;e[24]!==E?(M=z("md:text-base",E),e[24]=E,e[25]=M):M=e[25];let N;e[26]!==a||e[27]!==f||e[28]!==k||e[29]!==M?(N=r.jsx(ke,{color:"primary",onClick:k,disabled:a,className:M,children:f}),e[26]=a,e[27]=f,e[28]=k,e[29]=M,e[30]=N):N=e[30];let A;e[31]!==N||e[32]!==y||e[33]!==w?(A=r.jsxs("div",{className:"flex flex-col-reverse gap-2 md:flex-row md:justify-end",children:[y,w,N]}),e[31]=N,e[32]=y,e[33]=w,e[34]=A):A=e[34];let I;return e[35]!==s||e[36]!==n||e[37]!==A||e[38]!==b?(I=r.jsxs(Ft,{isOpen:s,onClose:n,testId:"modal-aura-agent-session-mode-nux",size:"xlarge",contentClassName:"flex flex-col gap-6 p-8",children:[b,A]}),e[35]=s,e[36]=n,e[37]=A,e[38]=b,e[39]=I):I=e[39],I}function Wrt(t){"use forget";const e=F.c(11),{isAgentHintActive:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=bs(),e[0]=n):n=e[0];const o=n,a=oe(lt.agentSafeModeHasSeenNux$),[i,l]=x.useState(!1),c=x.useRef(null),u=o&&s&&a!==!0;let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{l(!1),c.current=null},e[1]=d):d=e[1];const f=d;let m;e[2]!==u?(m=v=>u?(c.current=v,l(!0),!0):!1,e[2]=u,e[3]=m):m=e[3];const p=m;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=v=>{const S=c.current;if(c.current=null,!S)return;const C=()=>S(v);typeof queueMicrotask=="function"?queueMicrotask(C):Promise.resolve().then(C)},e[4]=g):g=e[4];const h=g;let _;e:{if(!o||!s||!i){_=null;break e}let v;e[5]!==i?(v=r.jsx(nIe,{isOpen:i,onClose:f,onModeSelected:h}),e[5]=i,e[6]=v):v=e[6],_=v}const b=_;let y;return e[7]!==b||e[8]!==p||e[9]!==i?(y={agentSessionModeNuxModal:b,closeAgentSessionModeNux:f,ensureAgentSessionModeNux:p,isAgentSessionModeNuxOpen:i},e[7]=b,e[8]=p,e[9]=i,e[10]=y):y=e[10],y}function qrt(){const t=G(),[e,s]=Yn(),n=bs();x.useEffect(()=>{if(!(!n||bc(t)))return Zo(()=>d9(t),o=>{let a;if(o==="mainPage"||o==="new_page_view")a=TZ,wZ(t);else if(o==="sidebar"||o==="sidebar_view")a=EZ,kZ(t);else return;e.get(a.name)!==a.value&&s(i=>{const l=new URLSearchParams(i);return l.set(a.name,a.value),l},{replace:!0})},{fireImmediately:!0})},[t,n,e,s])}function Krt(t){const e=G(),s=xn(e),{setTargetedContent:n}=pg();x.useEffect(()=>{if(s)return G_(()=>lt.wantsPopulatePrompt$(),()=>{lt.wantsPopulatePrompt$.set(!1);const o=lt.populatePrompt;o&&(o.userMessage&&Co(Ht(t),o.userMessage),setTimeout(()=>{n(o.targetedReply?{type:"text",label:o.targetedReply,createNewCompletionParams:a=>{if(!o.targetedReply)return a;const i=sx(o.targetedReply);return U(T({},a),{promptMessage:ou(a.promptMessage,{metadata:{targeted_reply:o.targetedReply}}),appendMessages:a.appendMessages==null?[i]:[...a.appendMessages,i]})}}:void 0)},0))})},[s,t,n])}const sI=ue(Ce,"817971",20,20),iS=ue(Ce,"25eafd",20,20,!0),aIe=Object.freeze(Object.defineProperty({__proto__:null,default:iS},Symbol.toStringTag,{value:"Module"})),rIe=ue(Ce,"c7ea4d",20,20);function nI(t,e){return t.connector===e.connector&&t.type===e.type}const iIe=()=>Zt((t,e)=>({_messages:[],_dismissedMessages:[],getFirstMessage:()=>{var n;return(n=e()._messages[0])!=null?n:null},appendMessageIfNotDismissed:s=>{t(n=>n._messages.some(o=>nI(o,s))||n._dismissedMessages.some(o=>nI(o,s))?n:U(T({},n),{_messages:[...n._messages,s]}))},dismissMessage:s=>{t(n=>n._messages.includes(s)?U(T({},n),{_messages:n._messages.filter(o=>o!==s),_dismissedMessages:[...n._dismissedMessages,s]}):n)},clearMessages:()=>{t(s=>s._messages.length||s._dismissedMessages.length?U(T({},s),{_messages:[],_dismissedMessages:[]}):s)}})),lIe=iIe(),cIe=x.createContext(lIe);function d_(){const t=x.useContext(cIe);return ew(t)}const lS="open-connector";function uIe(){const t=yt(),e=Hs(),[s]=Yn(),n=s.get(lS),o=x.useCallback(()=>{const i=new URLSearchParams(e.search);i.delete(lS),t(U(T({},e),{search:i.toString()}),{replace:!0})},[e,t]);return{connector:Object.values(es).find(i=>i===n),clearParam:o}}async function dIe(t,e,s,n){if(!e)return;s();let o="";n===Md.Picker&&(o="".concat(lS,"=").concat(e.type)),t!=null||(t="/"),o&&(t.includes("?")?t+="&".concat(o):t+="?".concat(o)),MZ({id:e.id},NZ(n),"".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),t)}function fIe(t,e){t.access_token&&t.expires_at!=null&&t.expires_at*1e3<=Date.now()&&sr.expiredAccessTokenUsed(t.type,e)}function mIe(t,e,s,n,o,a,i,l){fr.uploadFile(t,tl(e),e,l!=null?l:ko.Retrieval,s,n,o,{gizmoId:i},a)}function pIe(t,e,s,n,o,a,i,l,c){let u=e.title;s===es.GDRIVE&&(u=e.syntheticExtension?"".concat(e.title,".").concat(e.syntheticExtension):e.title);const d=e.mimeType.split(";")[0],f=d.startsWith("image/");if((o==null?void 0:o.includes(d))===!1||f&&!n.includes(d)){c.danger(l.formatMessage(oI.unsupportedFileType,{fileName:u}),U(T({},AZ),{toastId:"ccc_upload_file",loggingTitle:oI.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}));return}fr.uploadFile(t,e.id,new File([],u,{type:d}),ko.Retrieval,n,l,c,{gizmoId:i},a,{contextConnector:s,sourceUrl:e.url,syntheticExtension:e.syntheticExtension,type:Md.Picker,o365DriveId:e.o365DriveId})}const oI=Ne({unsupportedFileType:{id:"ContextConnectorUtils.unsupportedFileType",defaultMessage:"{fileName} is not a supported file type"}}),Yi={uploadFile:mIe,uploadPickedFile:pIe,doContextConnectorOauthRedirect:dIe,logAttemptIfAccessTokenIsExpired:fIe};function Yrt({onOauthRedirect:t}){const{connectorConfig:e,isLoading:s}=IZ(),n=d_(),o=G(),a=Ee(o,"1242184140"),{getFirstMessage:i}=n,l=i(),c=l?e.get(l.connector):null,u=s||!c,d=a?gIe:hIe,f=x.useMemo(()=>{if(u||!l)return null;switch(l.type){case"not-connected":return r.jsx(d,{unconnectedMessage:l,onOauthRedirect:t,entry:c})}},[d,u,c,l,t]),{dismissMessage:m}=d_(),p=x.useCallback(g=>{!g&&l&&!u&&m(l)},[u,m,l]);return r.jsx(iE,{size:"none",open:!u,onOpenChange:p,side:"top",sideOffset:4,triggerButton:r.jsx("button",{type:"button",name:"context-connector-pasted-link-popover-trigger",suppressHydrationWarning:!0,className:"invisible absolute self-center","aria-hidden":!0,tabIndex:-1}),children:f})}function gIe({unconnectedMessage:t,onOauthRedirect:e,entry:s}){const{dismissMessage:n}=d_(),o=ne(),a=x1(t.connector,o),i=_Ie(t.connector),l=()=>{sr.oauthUpsellButtonClick(s.type,"link"),Yi.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,s,e,Md.Link)},c=()=>{sr.oauthUpsellButtonClick(s.type,"not-now"),n(t)};return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-2 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-5 flex flex-row gap-2",children:[r.jsx(yIe,{icon:i}),r.jsx("span",{className:"text-sm font-bold",children:r.jsx(j,U(T({},Qi.connectTo),{values:{connectorName:a}}))})]}),r.jsx("span",{className:"text-token-text-secondary mb-5 text-sm",children:r.jsx(j,U(T({},Qi.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(ke,{color:"primary",onClick:l,children:r.jsx(j,T({},Qi.connect))}),r.jsx(ke,{color:"secondary",onClick:c,children:r.jsx(j,T({},Qi.notNow))})]})]})}function hIe({unconnectedMessage:t,onOauthRedirect:e,entry:s}){const{dismissMessage:n}=d_(),o=ne(),a=x1(t.connector,o),{icon1:i,icon2:l,icon3:c,icon4:u}=xIe(t.connector);return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-4 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-3 flex flex-row gap-2 self-center",children:[r.jsx(ph,{icon:i,rotation:-6}),r.jsx(ph,{icon:l,rotation:6}),r.jsx(ph,{icon:c,rotation:-6}),r.jsx(ph,{icon:u,rotation:6})]}),r.jsx("span",{className:"mb-3 text-lg font-semibold",children:r.jsx(j,U(T({},Qi.connectTo),{values:{connectorName:a}}))}),r.jsx("span",{className:"text-token-text-secondary mb-4 text-sm",children:r.jsx(j,U(T({},Qi.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[r.jsx(ke,{color:"primary",onClick:()=>{sr.oauthUpsellButtonClick(s.type,"link"),Yi.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,s,e,Md.Link)},children:r.jsx(j,T({},Qi.connect))}),r.jsx(ke,{color:"secondary",onClick:()=>{sr.oauthUpsellButtonClick(s.type,"not-now"),n(t)},children:r.jsx(j,T({},Qi.notNow))})]})]})}function _Ie(t){switch(t){case es.CONFLUENCE:return r.jsx(p9,{width:20,height:20});case es.GDRIVE:return r.jsx($n,{width:20,height:20});case es.JIRA:return r.jsx(m9,{width:20,height:20});case es.NOTION_OPEN_CONNECTOR:return r.jsx(cc,{width:20,height:20});case es.O365:case es.O365_BUSINESS:case es.O365_PERSONAL:return r.jsx(f9,{width:20,height:20});case es.SLACK_OPEN_CONNECTOR:return r.jsx(nx,{width:20,height:20})}g9(t)}function xIe(t){switch(t){case es.GDRIVE:return{icon1:r.jsx($n,{}),icon2:r.jsx(fC,{}),icon3:r.jsx(JC,{}),icon4:r.jsx(g1,{})};case es.O365:case es.O365_BUSINESS:case es.O365_PERSONAL:return{icon1:r.jsx(f9,{}),icon2:r.jsx(K6,{}),icon3:r.jsx(q6,{}),icon4:r.jsx(Y6,{})};case es.CONFLUENCE:case es.JIRA:case es.NOTION_OPEN_CONNECTOR:return{icon1:r.jsx(rIe,{}),icon2:r.jsx(sI,{}),icon3:r.jsx(Eo,{}),icon4:r.jsx(iS,{})};case es.SLACK_OPEN_CONNECTOR:return{icon1:r.jsx(nx,{}),icon2:r.jsx(sI,{}),icon3:r.jsx(Eo,{}),icon4:r.jsx(iS,{})}}g9(t)}const yIe=({icon:t})=>r.jsx("div",{className:z("flex h-[20px] w-[20px]"),children:r.jsx("div",{className:"object-contain",children:t})});function ph({rotation:t,icon:e}){return r.jsx("div",{className:z("flex h-[44px] w-[44px] items-center justify-center rounded-xl border border-[#EDEDF2] bg-white shadow-[0_1px_12px_0px_#0000000B]"),style:{transform:"rotate(".concat(t,"deg)")},children:r.jsx("div",{className:"object-contain",children:e})})}const Qi=Ne({connectTo:{id:"ContextConnectorPastedLinkPopover.connectTo",defaultMessage:"Connect to {connectorName}"},description:{id:"ContextConnectorPastedLinkPopover.description",defaultMessage:"Connect ChatGPT to {connectorName} to reference the content from this link."},notNow:{id:"ContextConnectorPastedLinkPopover.notNow",defaultMessage:"Not now"},connect:{id:"ContextConnectorPastedLinkPopover.connect",defaultMessage:"Connect"},addFromGdriveDescription:{id:"ContextConnectorPastedLinkPopover.addFromDriveDescription",defaultMessage:"To add files from Google Drive, upload them directly to your message."},addFromGdriveNotNow:{id:"ContextConnectorPastedLinkPopover.addFromDriveNotNow",defaultMessage:"Not now"},addFromGdriveUploadFile:{id:"ContextConnectorPastedLinkPopover.addFromDriveUploadFile",defaultMessage:"Upload file"}}),bIe="77377267392",oG="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk";var vIe=(t=>(t.OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",t.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",t.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",t.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",t.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",t))(vIe||{});let Kb=null;function aG(t){return Kb==null&&(Kb=SIe().then(()=>(gapi.client.setToken({access_token:t}),gapi.client.init({apiKey:oG,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),Kb}function SIe(){return new Promise((t,e)=>{const s=document.createElement("script");s.src="https://apis.google.com/js/api.js",s.onload=t,s.onerror=e,document.documentElement.appendChild(s)}).then(()=>Promise.all([new Promise(t=>gapi.load("client",t)),new Promise(t=>gapi.load("client:picker",t))]))}async function CIe(t,e,s,n){await aG(s);async function o(d){switch(d.action){case google.picker.Action.PICKED:{sr.filePickerPicked(es.GDRIVE,d.docs.length);const f=d.docs.map(m=>({connector:e,id:m.id,title:m.name,mimeType:m.mimeType,url:m.url,syntheticExtension:m.type==="document"?jZ(m.mimeType):null}));n(f);break}case google.picker.Action.CANCEL:sr.filePickerCancelled(es.GDRIVE);return;case"loaded":{sr.filePickerLoaded(es.GDRIVE);return}}}const a=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(!1).setMode(google.picker.DocsViewMode.LIST);let i="en";aI.includes(t)?i=t:aI.includes(t.split("-")[0])&&(i=t.split("-")[0]);const l=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(oG).setAppId(bIe).setOAuthToken(s).addView(a).setCallback(o).setLocale(i).build();sr.filePickerStarted(es.GDRIVE),l.setVisible(!0);const c=wIe(),u=()=>{sr.filePickerCancelled(es.GDRIVE),l.setVisible(!1),c==null||c.removeEventListener("click",u)};c==null||c.addEventListener("click",u)}function wIe(){var e;if(typeof window>"u")return null;const t=(e=window.document.body.querySelector("div.picker-dialog-bg"))!=null?e:window.document.body.querySelector("div.oai-picker-dialog-bg");return t==null||t.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-1000"),t==null||t.classList.remove("picker-dialog-bg"),t}const aI=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"],kIe=Pe(()=>me(()=>import("./n63vva46gvw4d35i.js"),__vite__mapDeps([228,1,3,4])).then(t=>t.GoogleDriveOAuthModal)),TIe=Pe(()=>me(()=>import("./c6ddmvq3k626ndki.js"),__vite__mapDeps([229,1,3,4])).then(t=>t.OneDrivePickerModal));function Qrt(t){"use forget";var N,A;const e=F.c(32),{connectorConfig:s,modelSupportedImageMimeTypes:n,modelAcceptedMimeTypes:o,attachmentsProductFeature:a,onOauthRedirect:i}=t,l=G(),c=ne(),u=Kt(),d=Si(),{getGizmoId:f}=xw(),m=(A=(N=up())==null?void 0:N.enabled)!=null?A:!1,[p,g]=x.useState();let h,_;e[0]!==f?(h=()=>{f?f().then(I=>g(I)):g(void 0)},_=[f],e[0]=f,e[1]=h,e[2]=_):(h=e[1],_=e[2]),x.useEffect(h,_);let b;e[3]!==a||e[4]!==d||e[5]!==p||e[6]!==c||e[7]!==o||e[8]!==n||e[9]!==u?(b=(I,P)=>Yi.uploadPickedFile(d,I,P,n,o,a,p,c,u),e[3]=a,e[4]=d,e[5]=p,e[6]=c,e[7]=o,e[8]=n,e[9]=u,e[10]=b):b=e[10];const y=b,v=x.useRef(!1);let S;e[11]!==l||e[12]!==m||e[13]!==i?(S=I=>{if(I.type===es.GDRIVE&&m&&!v.current){mt(l,kIe,{onContinue:()=>{v.current=!0,S(I)}});return}Yi.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,I,i,Md.Picker),i()},e[11]=l,e[12]=m,e[13]=i,e[14]=S):S=e[14];let C;e[15]!==a||e[16]!==d||e[17]!==p||e[18]!==c||e[19]!==o||e[20]!==n||e[21]!==u?(C=I=>{Yi.uploadPickedFile(d,I,es.GDRIVE,n,o,a,p,c,u)},e[15]=a,e[16]=d,e[17]=p,e[18]=c,e[19]=o,e[20]=n,e[21]=u,e[22]=C):C=e[22];const w=C;let k;e[23]!==s||e[24]!==l||e[25]!==S||e[26]!==w||e[27]!==y?(k=I=>{const{access_token:P}=I;if(!P){S(I);return}Yi.logAttemptIfAccessTokenIsExpired(I,Md.Picker);e:switch(I.type){case es.GDRIVE:{CIe(Gs().locale,I.type,P,R=>R.forEach(w));break e}case es.O365_PERSONAL:case es.O365_BUSINESS:{const R=I.type?s.get(I.type):null;R!=null&&R.access_token&&R.onedrive_endpoint_hint&&mt(l,TIe,{accessToken:R.access_token,oneDriveURL:R.onedrive_endpoint_hint,uploadPickedFile:y});break e}}},e[23]=s,e[24]=l,e[25]=S,e[26]=w,e[27]=y,e[28]=k):k=e[28];const E=k;let M;return e[29]!==S||e[30]!==E?(M={onSelectConnector:E,onConnectorOauthRedirect:S},e[29]=S,e[30]=E,e[31]=M):M=e[31],M}function Jrt(t,e){"use forget";const s=F.c(6),{connector:n,clearParam:o}=uIe();let a,i;s[0]!==o||s[1]!==n||s[2]!==t||s[3]!==e?(a=()=>{const l=n!=null&&Array.from(t.values()).find(c=>c.type===n&&!!c.access_token);l&&(e(l),o())},i=[t,n,o,e],s[0]=o,s[1]=n,s[2]=t,s[3]=e,s[4]=a,s[5]=i):(a=s[4],i=s[5]),x.useEffect(a,i)}function EIe({isOpen:t,onClose:e,markAsViewed:s}){const n=ne();return r.jsx(Ft,{testId:"modal-memory-alpha",isOpen:t,onClose:e,showCloseButton:!0,size:"custom",type:"success",className:"max-w-xl",title:n.formatMessage({id:"MoonshineAlphaAnnouncement.title",defaultMessage:"You're testing memory improvements"}),footerContent:r.jsxs("div",{className:"ms-1 mt-4 flex w-full justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(nB,{className:"icon text-token-text-secondary me-1.5 inline-block"}),r.jsx("a",{href:"https://help.openai.com/en/articles/10303002-how-does-memory-use-past-conversations",target:"_blank",rel:"noopener noreferrer",onClick:()=>{s&&s(),e()},className:"text-token-text-secondary font-medium",children:n.formatMessage({id:"MoonshineAlphaAnnouncement.secondaryButton",defaultMessage:"Learn more"})})]}),r.jsx("div",{children:r.jsx(mn.Button,{title:n.formatMessage({id:"MoonshineAlphaAnnouncement.primaryButton",defaultMessage:"Got it"}),color:"secondary",className:"text-base",onClick:e})})]}),children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(Nl,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.chatTitle",defaultMessage:"ChatGPT now uses all past chats"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.chatText",defaultMessage:"All past chats will inform responses, not just saved memories."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(Bd,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optInTitle",defaultMessage:"You're in control"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optInText",defaultMessage:"Use temporary chats for topics you don't want remembered."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(yp,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optOutText",defaultMessage:"Opt out any time"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.settingsLink",defaultMessage:"Visit {settingsLink} to turn off improved memory.",values:{settingsLink:r.jsx(Ia,{to:tf(hn.Personalization),onClick:()=>{s&&s()},className:"underline",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.settingsLinkWord",defaultMessage:"Settings"})})}})})]})]})]})})}const f_=We.hasSeenMoonshineNux;function Zrt(){"use forget";const t=F.c(19),e=G(),[s,n]=x.useState(!1);let o;t[0]!==e?(o=()=>_t(e,f_),t[0]=e,t[1]=o):o=t[1];const a=o;let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{n(!0)},t[2]=i):i=t[2];const l=i;let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{n(!1)},t[3]=c):c=t[3];const u=c;let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[4]=d):d=t[4],x.useEffect(MIe,d);let f,m;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{l(),$e.count(He.MOONSHINE,"announcement.learn_more_clicked"),B.logEventWithStatsig("ChatGPT Moonshine: CTA Clicked","chatgpt_moonshine_announcement_cta_clicked")},m=r.jsx(j,{id:"MoonshineAnnouncement.secondaryCtaText",defaultMessage:"Learn more"}),t[5]=f,t[6]=m):(f=t[5],m=t[6]);let p;t[7]!==a?(p=()=>{$e.count(He.MOONSHINE,"announcement.close_clicked"),B.logEventWithStatsig("ChatGPT Moonshine: Announcement Closed","chatgpt_moonshine_announcement_closed"),a()},t[7]=a,t[8]=p):p=t[8];let g;t[9]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[r.jsx(j,{id:"MoonshineAnnouncement.heading",defaultMessage:"You're testing memory improvements"}),r.jsx(PZ,{})]}),t[9]=g):g=t[9];let h;t[10]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsxs("div",{className:"grow",children:[g,r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"MoonshineAnnouncement.description",defaultMessage:"ChatGPT can now reference past chats, not just saved memories."})})]}),t[10]=h):h=t[10];let _;t[11]!==p?(_=r.jsx(_s,{onSecondaryCtaClick:f,secondaryCtaText:m,onDismiss:p,content:h}),t[11]=p,t[12]=_):_=t[12];let b;t[13]!==s||t[14]!==a?(b=s&&r.jsx(EIe,{isOpen:s,markAsViewed:a,onClose:()=>{u(),a()}}),t[13]=s,t[14]=a,t[15]=b):b=t[15];let y;return t[16]!==b||t[17]!==_?(y=r.jsxs(r.Fragment,{children:[_,b]}),t[16]=b,t[17]=_,t[18]=y):y=t[18],y}function MIe(){$e.count(He.MOONSHINE,"nux.shown"),B.logEventWithStatsig("ChatGPT Moonshine: Announcement Shown","chatgpt_moonshine_announcement_shown"),B.logUpsellOrModalEvent(ks,{eventId:"moonshine_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})}function NIe(){"use forget";const t=vx(),{eligible:e,isLoading:s}=Ct(f_);return t&&e&&!s}function Xrt(){"use forget";const t=F.c(4),e=G(),s=vx(),{eligible:n}=Ct(f_);let o;return t[0]!==e||t[1]!==n||t[2]!==s?(o=()=>{!s||!n||($e.count(He.MOONSHINE,"nux.implicit_close"),_t(e,f_))},t[0]=e,t[1]=n,t[2]=s,t[3]=o):o=t[3],o}const AIe=ue(Ce,"546a9a",20,20),pE=t=>{"use forget";const e=F.c(61),{pressed:s,disabled:n,icon:o,label:a,ariaLabel:i,animatedLabel:l,showLabel:c,onClick:u,splitButtonDropdownContent:d,showSplitButton:f,dropdownContent:m,dataTestid:p,splitSecondaryButton:g,tooltip:h,as:_}=t,b=f===void 0?!0:f,y=_===void 0?"popover":_,[v,S]=x.useState(!1),[C,w]=x.useState(!1),k=RZ(),E=!n&&s;let M;e[0]!==a?(M=a&&r.jsx("div",{className:"ps-1 pe-1 font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:a}),e[0]=a,e[1]=M):M=e[1];const N=M,A=!!d;let I;e[2]!==A?(I=z("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":A}),e[2]=A,e[3]=I):I=e[3];let P;e[4]===Symbol.for("react.memo_cache_sentinel")?(P=()=>w(!1),e[4]=P):P=e[4];let R;e[5]!==m||e[6]!==u?(R=Ie=>{m||(w(!0),u(Ie))},e[5]=m,e[6]=u,e[7]=R):R=e[7];const O=!l&&c?N:null;let L;e[8]!==l||e[9]!==N||e[10]!==k||e[11]!==c?(L=l&&r.jsx(Ms,{initial:!1,children:c&&r.jsx(gt.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:k?0:.15},children:N})}),e[8]=l,e[9]=N,e[10]=k,e[11]=c,e[12]=L):L=e[12];let D;e[13]!==i||e[14]!==p||e[15]!==n||e[16]!==o||e[17]!==s||e[18]!==I||e[19]!==R||e[20]!==O||e[21]!==L?(D=r.jsxs("button",{className:I,"data-testid":p,"aria-pressed":s,"aria-label":i,disabled:n,onTransitionEnd:P,onClick:R,children:[o,O,L]}),e[13]=i,e[14]=p,e[15]=n,e[16]=o,e[17]=s,e[18]=I,e[19]=R,e[20]=O,e[21]=L,e[22]=D):D=e[22];const H=D;let V;e[23]!==H||e[24]!==h?(V=h?h(H):H,e[23]=H,e[24]=h,e[25]=V):V=e[25];const q=V;let W;e[26]!==v?(W=v?r.jsx(AIe,{className:"icon"}):r.jsx(Xp,{className:"icon"}),e[26]=v,e[27]=W):W=e[27];const $=W;let Z;e[28]===Symbol.for("react.memo_cache_sentinel")?(Z={type:"tween",duration:.15,ease:"easeInOut"},e[28]=Z):Z=e[28];const K=Z;let Y;e[29]!==k?(Y=k?IB:{opacity:{delay:.1},default:K},e[29]=k,e[30]=Y):Y=e[30];const ae=Y;let se;e[31]!==y||e[32]!==m||e[33]!==d?(se=d||m?y==="popover"?r.jsx(tu,{children:r.jsx(ix,{className:"p-0",$as:su,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:m!=null?m:d})}):r.jsx(J.Portal,{children:r.jsx(J.Content,{children:m!=null?m:d})}):null,e[31]=y,e[32]=m,e[33]=d,e[34]=se):se=e[34];const ee=se;let re;e[35]!==y||e[36]!==q?(re=y==="popover"?r.jsx(hi,{asChild:!0,children:q}):r.jsx(J.Trigger,{asChild:!0,children:q}),e[35]=y,e[36]=q,e[37]=re):re=e[37];const he=re;let fe;e[38]!==ae||e[39]!==y||e[40]!==$||e[41]!==n||e[42]!==E?(fe=y==="popover"?r.jsx(hi,{asChild:!0,children:r.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:E?"#0285FF0D":void 0},disabled:n,children:$})}):r.jsx(gt.div,{initial:{width:0,opacity:0,padding:0},animate:{width:"auto",opacity:1,padding:"0.5rem"},exit:{width:0,opacity:0,padding:0,borderInlineStart:"unset"},transition:ae,style:{overflow:"hidden",border:"unset",borderInlineStart:"solid 1px",borderColor:E?"#0285FF0D":"var(--border-default)"},children:r.jsx(J.Trigger,{asChild:!0,children:r.jsx("button",{style:{padding:0,backgroundColor:"transparent",height:"100%",borderRadius:"unset",color:E?"var(--interactive-label-accent-default)":void 0},disabled:n,children:$})})}),e[38]=ae,e[39]=y,e[40]=$,e[41]=n,e[42]=E,e[43]=fe):fe=e[43];const pe=fe,le=!s,ve=!!E,Te=!E;let xe;e[44]!==n||e[45]!==C||e[46]!==le||e[47]!==ve||e[48]!==Te?(xe=z("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":C,"text-token-text-secondary":le,"text-token-interactive-label-accent-default bg-token-composer-blue-bg border-transparent hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A]":ve,"border-token-border-default hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":Te,"opacity-30":n}),e[44]=n,e[45]=C,e[46]=le,e[47]=ve,e[48]=Te,e[49]=xe):xe=e[49];const ce=m?he:q,we=!m&&d&&b?pe:null;let ge;e[50]!==we?(ge=r.jsx(Ms,{children:we}),e[50]=we,e[51]=ge):ge=e[51];let Ae;e[52]!==g||e[53]!==xe||e[54]!==ce||e[55]!==ge?(Ae=r.jsxs("div",{className:xe,children:[ce,ge,g]}),e[52]=g,e[53]=xe,e[54]=ce,e[55]=ge,e[56]=Ae):Ae=e[56];const Ue=Ae;if(d||m){let Ie;return e[57]!==y||e[58]!==Ue||e[59]!==ee?(Ie=y==="popover"?r.jsxs(eu,{onOpenChange:Me=>S(Me),children:[r.jsx(pye,{asChild:!0,children:Ue}),ee]}):r.jsxs(J.Root,{onOpenChange:Me=>S(Me),children:[Ue,ee]}),e[57]=y,e[58]=Ue,e[59]=ee,e[60]=Ie):Ie=e[60],Ie}else return Ue};var al=(t=>(t.ModelNotSupported="modelNotSupported",t.HasReachedMaxFiles="hasReachedMaxFiles",t.RateLimitReached="rateLimitReached",t))(al||{}),gE=(t=>(t.General="general",t.ModelNotSupported="modelNotSupported",t.GizmoNotSupported="gizmoNotSupported",t.HasAttachedFiles="hasAttachedFiles",t))(gE||{});function eit(t){"use forget";var N,A;const e=F.c(11),{account:s,clientBootstrapFlags:n,features:o,clientThreadId:a,currentModelConfig:i,composerController:l,isDisabled:c,gizmoId:u}=t,d=G(),f=$8(a),m=Hc(d,u);let p;e[0]!==(i==null?void 0:i.enabledTools)?(p=(N=i==null?void 0:i.enabledTools)==null?void 0:N.includes(Sp.Search),e[0]=i==null?void 0:i.enabledTools,e[1]=p):p=e[1];const g=p,h=f==null||(f==null?void 0:f.kind)===Pt.PrimaryAssistant||(f==null?void 0:f.kind)===Pt.GizmoInteraction&&m,_=!ut();let b;e[2]!==d?(b=()=>OZ(d,Ye.Search),e[2]=d,e[3]=b):b=e[3];const y=oe(b),v=!_&&(s==null||s.isFree());if(g===!1||_&&(n!=null&&n.includes(h1.AnonSearchHoldout))||v&&n!=null&&n.includes(h1.FreeSearchHoldout)||!y||!_&&(s==null||s.isEnterprisey())&&!(o!=null&&o.includes(kn.BrowsingAvailable))||!h)return null;let C;e[4]===Symbol.for("react.memo_cache_sentinel")?(C={viewTransitionName:"var(--vt-composer-".concat(Ye.Search,"-action)")},e[4]=C):C=e[4];const w=!!c||!g,k=g?void 0:gE.ModelNotSupported,E=(A=i==null?void 0:i.title)!=null?A:"";let M;return e[5]!==a||e[6]!==l||e[7]!==w||e[8]!==k||e[9]!==E?(M=r.jsx("div",{"data-testid":"system-hint-search",style:C,children:r.jsx(IIe,{clientThreadId:a,composerController:l,isDisabled:w,disabledReason:k,currentModelName:E})},"system-hint-".concat(Ye.Search)),e[5]=a,e[6]=l,e[7]=w,e[8]=k,e[9]=E,e[10]=M):M=e[10],M}function IIe(t){"use forget";const e=F.c(28),{clientThreadId:s,composerController:n,isDisabled:o,disabledReason:a,currentModelName:i}=t,l=ne();let c;e[0]!==l?(c=l.formatMessage({id:"TbHx8d",defaultMessage:"Search"}),e[0]=l,e[1]=c):c=e[1];const u=c,d=On(),f=jo(),m=d===Ye.Search;let p,g;e[2]!==s||e[3]!==o||e[4]!==m||e[5]!==f?(p=()=>{o&&m&&f(null,{analyticsMetadata:{clientThreadId:s}})},g=[o,m,f,s],e[2]=s,e[3]=o,e[4]=m,e[5]=f,e[6]=p,e[7]=g):(p=e[6],g=e[7]),x.useEffect(p,g);let h;e[8]!==s||e[9]!==n||e[10]!==m||e[11]!==f?(h=w=>{w.stopPropagation(),w.preventDefault(),f(m?null:Ye.Search,{analyticsMetadata:{clientThreadId:s}}),m||no(Ht(n)),B.logEventWithStatsig("Composer Search Button Clicked","composer_search_button_clicked",{clientThreadId:s}),m&&LZ(Ht(n),/^search\b/i)},e[8]=s,e[9]=n,e[10]=m,e[11]=f,e[12]=h):h=e[12];const _=h;let b;e[13]!==s?(b={clientThreadId:s},e[13]=s,e[14]=b):b=e[14];const y=o!=null?o:!1;let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(kr,{className:"icon"}),e[15]=v):v=e[15];let S;e[16]!==_||e[17]!==m||e[18]!==u||e[19]!==y?(S=r.jsx(pE,{pressed:m,disabled:y,icon:v,label:u,ariaLabel:u,animatedLabel:!0,showLabel:!0,onClick:_,dataTestid:"composer-button-search"}),e[16]=_,e[17]=m,e[18]=u,e[19]=y,e[20]=S):S=e[20];let C;return e[21]!==i||e[22]!==a||e[23]!==o||e[24]!==m||e[25]!==b||e[26]!==S?(C=r.jsx(PIe,{analyticsMetadata:b,isThreadUsingSearchMode:m,isDisabled:o,disabledReason:a,currentModelName:i,children:S}),e[21]=i,e[22]=a,e[23]=o,e[24]=m,e[25]=b,e[26]=S,e[27]=C):C=e[27],C}function jIe(){"use forget";const t=NIe(),e=Ct(We.hasSeenComposerSearchButtonTooltip);return!e.isLoading&&e.eligible&&!t}function PIe(t){"use forget";const e=F.c(19),{children:s,analyticsMetadata:n,isThreadUsingSearchMode:o,isDisabled:a,disabledReason:i,currentModelName:l}=t,c=G();if(!(jIe()&&!o)){let h;e[0]!==l||e[1]!==i||e[2]!==a?(h=a?i===gE.ModelNotSupported?r.jsx(j,{id:"GZemJe",defaultMessage:"Search disabled for {modelName}",values:{modelName:"".concat(l)}}):r.jsx(j,{id:"GpDAWD",defaultMessage:"Search is unavailable"}):r.jsx(j,{id:"c+4o2s",defaultMessage:"Search the web"}),e[0]=l,e[1]=i,e[2]=a,e[3]=h):h=e[3];let _;e[4]!==n?(_=y=>{y&&B.logEventWithStatsig("Composer Search Button Hovered","composer_search_button_hovered",n)},e[4]=n,e[5]=_):_=e[5];let b;return e[6]!==s||e[7]!==h||e[8]!==_?(b=r.jsx("div",{children:r.jsx(It,{className:"inline-block",label:h,side:"bottom",onOpenChange:_,children:s})}),e[6]=s,e[7]=h,e[8]=_,e[9]=b):b=e[9],b}let d;e[10]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(j,{id:"Yjduqi",defaultMessage:"Search the web"}),e[10]=d):d=e[10];let f;e[11]!==c?(f=()=>_t(c,We.hasSeenComposerSearchButtonTooltip),e[11]=c,e[12]=f):f=e[12];let m;e[13]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(j,{id:"W51Aei",defaultMessage:"Get fast answers with trusted sources. {learnMore}",values:{learnMore:r.jsx(qn,{href:"https://openai.com/index/introducing-chatgpt-search",className:"underline",children:r.jsx(j,{id:"stA7F4",defaultMessage:"Learn more"})})}}),e[13]=m):m=e[13];let p;e[14]!==s?(p=r.jsx("div",{children:s}),e[14]=s,e[15]=p):p=e[15];let g;return e[16]!==f||e[17]!==p?(g=r.jsx(nu,{announcementKey:We.hasSeenComposerSearchButtonTooltip,side:"right",show:!0,theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:d,onDismiss:f,sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",description:m,children:p}),e[16]=f,e[17]=p,e[18]=g):g=e[18],g}const cS=["hazelnuts"];function RIe({hazelnutId:t}){const{data:e,isLoading:s,isError:n}=dt({queryKey:["hazelnut",t],enabled:!!t,queryFn:async()=>await de.safeGet("/hazelnuts/{hazelnut_id}",{parameters:{path:{hazelnut_id:t},query:{include_permissions:!0}}})});return{skillData:e,isLoadingSkill:s,didFailSkillLoad:n}}function d0(t){const e=G(),s=zx(e),n=t==null?void 0:t.scope;return dt({queryKey:n?[...cS,n]:cS,queryFn:async()=>await de.safeGet("/hazelnuts",{parameters:{query:T({include_permissions:!0},n?{scope:n}:{})}}),enabled:s,staleTime:300*1e3})}async function tit(t){return de.safePost("/hazelnuts/draft/uploads",{requestBody:{files:t}})}async function sit(t,e){const s=await de.safePost("/hazelnuts/draft",{requestBody:t});return await e.invalidateQueries({queryKey:cS}),s}function nit({hazelnutId:t,isEnabled:e=!0}){return dt({queryKey:["hazelnut-share",t],enabled:!!(e&&t),queryFn:async()=>await de.safeGet("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}}})})}async function oit(t,e,s){const n=await de.safePost("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{targets:e}});return await s.invalidateQueries({queryKey:["hazelnut-share",t]}),n}async function ait(t,e,s,n,o){if(e){if(n==="none"&&s!=="none"){const a=s;await de.safePost("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{targets:[{principal_type:"workspace",principal_id:e,role:a}]}})}else n!=="none"&&s==="none"?await de.safeDelete("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{principal_type:"workspace",principal_id:e}}):n!==s&&s!=="none"&&await de.safePatch("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{principal_type:"workspace",principal_id:e,role:s}});await o.invalidateQueries({queryKey:["hazelnut-share",t]})}}async function rit(t,e,s,n){await de.safePatch("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{principal_type:e.principal_type,principal_id:e.principal_id,role:s}}),await n.invalidateQueries({queryKey:["hazelnut-share",t]})}async function iit(t,e,s){await de.safeDelete("/hazelnuts/{hazelnut_id}/share",{parameters:{path:{hazelnut_id:t}},requestBody:{principal_type:e.principal_type,principal_id:e.principal_id}}),await s.invalidateQueries({queryKey:["hazelnut-share",t]})}function lit(t,e){return de.safePost("/hazelnuts/{hazelnut_id}/files/get_download_link",{parameters:{path:{hazelnut_id:t}},requestBody:{file_id:e}})}async function cit(t){await de.safeDelete("/hazelnuts/{hazelnut_id}",{parameters:{path:{hazelnut_id:t}}})}function uit(t){return de.safePost("/hazelnuts/{hazelnut_id}/clone",{parameters:{path:{hazelnut_id:t}}})}async function dit(t,e,s){await de.safePost("/hazelnuts/{hazelnut_id}/status",{parameters:{path:{hazelnut_id:t}},requestBody:{enabled:e}}),s&&await s.invalidateQueries({queryKey:["hazelnut",t]})}const OIe=t=>"hazelnut-enable-".concat(t),hE=t=>"type"in t.content&&t.content.type==="hazelnut_enable_prompt",rG=t=>t.tree.nodes.find(e=>hE(e.message)),uS=(t,e)=>{as.updateTree(t,(s,n)=>{var i;const o=s.messageIdToExistingNodeId(e);if(!o)return;const a=(i=s.getParent(o))==null?void 0:i.id;if(s.deleteNode(o),n===o)return a!=null?a:s.rootId})},LIe=t=>({id:OIe(t.id),author:{role:ot.Assistant},content:{content_type:bt.SystemMessage,type:"hazelnut_enable_prompt",hazelnut_id:t.id,name:t.name,text:"hazelnut_enable_prompt"},metadata:{is_hazelnut_enable_prompt:!0}}),DIe=(t,e)=>{const s=rG(t);if(!e){s&&uS(t,s.id);return}if(s){const n=s.message.content;if(hE(s.message)&&n.hazelnut_id===e.id){n.name!==e.name&&as.updateTree(t,o=>{o.updateNodeMessage(s.id,U(T({},s.message),{content:U(T({},n),{name:e.name})}))});return}uS(t,s.id)}as.updateTree(t,(n,o)=>n.addMessageNode(o,LIe(e)))},rI=(t,e)=>{nt(t,s=>{DIe(s,e)})},fit=(t,e)=>{nt(t,s=>{const n=rG(s);n&&hE(n.message)&&n.message.content.hazelnut_id===e&&uS(s,n.id)})},FIe=t=>{"use forget";const e=F.c(21),{conversationId:s,selectedHazelnutIds:n}=t,o=G(),{data:a}=d0();let i;e[0]!==o?(i=zx(o),e[0]=o,e[1]=i):i=e[1];const l=i;let c;e[2]!==n?(c=[...n].sort(),e[2]=n,e[3]=c):c=e[3];const u=c,d=Qe(s,Se.hasUserMessage);let f;e:{if(!(a!=null&&a.hazelnuts)){f=null;break e}let y;e[4]!==a.hazelnuts?(y=new Map(a.hazelnuts.map(BIe)),e[4]=a.hazelnuts,e[5]=y):y=e[5],f=y}const m=f;let p;if(e[6]!==m||e[7]!==u){e:{if(!m){p=null;break e}for(const y of u){const v=m.get(y);if(v&&v.enabled===!1){p=v;break e}}p=null}e[6]=m,e[7]=u,e[8]=p}else p=e[8];const g=p;let h;e[9]!==s||e[10]!==g||e[11]!==d||e[12]!==(a==null?void 0:a.hazelnuts)||e[13]!==l?(h=()=>{if(!(!(a!=null&&a.hazelnuts)||!l)){if(!d){rI(s,null);return}rI(s,g)}},e[9]=s,e[10]=g,e[11]=d,e[12]=a==null?void 0:a.hazelnuts,e[13]=l,e[14]=h):h=e[14];const _=a==null?void 0:a.hazelnuts;let b;e[15]!==s||e[16]!==g||e[17]!==d||e[18]!==l||e[19]!==_?(b=[s,g,_,l,d],e[15]=s,e[16]=g,e[17]=d,e[18]=l,e[19]=_,e[20]=b):b=e[20],x.useEffect(h,b)};function mit({selectedHazelnutIds:t,conversationId:e}){return FIe({conversationId:e,selectedHazelnutIds:t}),null}function BIe(t){return[t.id,t]}const pit=Ne({promptPlaceholder:{defaultMessage:"Shop for anything",id:"composer.placeholder.mercuryMode"}}),git=async({filePickerStore:t,event:e,intl:s,toaster:n,conversationMode:o,clientThreadId:a,currentModelConfig:i,getEditorGizmoId:l,modelSupportedImageMimeTypes:c,activeSystemHintType:u,ctx:d,contextScopes:f})=>{var k,E,M,N,A;const m=ut(),p=Gs().flags,g=p==null?void 0:p.includes(h1.NoAuthEnableFileUploads),h=o9(i,o,u),_=c.length>0;B.logEvent("Pasted to Composer",{client_thread_id:a});const{clipboardData:b}=e,y=r9(i,o),v=!m&&g?c:(k=y==null?void 0:y.attachments)==null?void 0:k.accepted_mime_types,S=!m&&g?!1:(E=y==null?void 0:y.attachments)==null?void 0:E.can_accept_all_mime_types,C=T(T({},g&&{isUnauthenticated:!m}),m&&f&&f.length>0?{contextScopes:f}:{});if(_&&b&&b.files.length>0){const I=b.files[0],P=I.name.match(/\.[^.]+$/),R=P?"".concat(Ds()).concat(P[0]):Ds(),O=new File([I],R,{type:I.type,lastModified:I.lastModified});if(v!==void 0&&!v.includes(O.type)&&S!==!0){n.danger(s.formatMessage(Ja.unsupportedFileType,{file_type:u9(O)}),{toastId:"paste_unsupported_file_type",loggingTitle:Ja.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}),e.preventDefault();return}if(tn.hideThreadHeader(),B.logEvent("Upload File",{client:"web",eventSource:"paste"}),l!=null){l().then(L=>fr.uploadFile(t,tl(O),O,h,c,s,n,T({gizmoId:L},C)));return}fr.uploadFile(t,tl(O),O,h,c,s,n,C,y==null?void 0:y.attachments)}if(b&&b.types.includes("text/plain")){const I=b.getData("text");if(I&&$6(d,I)){e.preventDefault();const P="text/plain";let R="txt";const O=await DZ(I),L=FZ();O&&$e.count(He.DEFAULT,"chatgpt_web_big_paste_file_type_guess",[{key:"file_type",value:(M=O.ext)!=null?M:"unknown"}]),L&&(S||v!=null&&v.includes(L.mime))&&(R=L.ext);const D="pasted.".concat(R),H=new Blob([I],{type:P}),V=new File([H],D,{type:P});fr.uploadFile(t,tl(V),V,h,c,s,n,U(T({},C),{isBigPaste:!0})),B.logEventWithStatsig("Big Paste","chatgpt_web_big_paste",{text_length:UIe(I.length)})}$e.hist(He.DEFAULT,"chatgpt_web_paste_text_length",[{key:"plan_type",value:(A=(N=ct(d))==null?void 0:N.planType)!=null?A:"unknown"}],I.length)}},UIe=t=>t<500?"under 500":t<=1e3?"500-1000":t<=5e3?"1001-5000":t<=1e4?"5000-10000":"10000+",hit=(t,{canSubmit:e,isTextContentTooLong:s,toaster:n,requestCompletion:o})=>t.shiftKey||t.altKey||yw()&&h9(t)?!1:(e?(t.preventDefault(),o(t)):s&&n.danger("The message you submitted was too long, please submit something shorter.",{hasCloseButton:!0}),!0),_it=(t,{isAutocompletionActive:e,clearAutocompletions:s,canAbortCompletion:n,clientThreadId:o,abortCompletion:a,isEmpty:i,hasTargetedContent:l,clearTargetedContent:c,hasSystemHint:u,removeSystemHint:d,hasSelectedTarget:f,removeSelectedTarget:m,hasNonDefaultModel:p,removeNonDefaultModel:g})=>n?(a(),B.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:Rt(o),currentLeafId:Se.getCurrentNode(Tt(o)).message.id,eventSource:"keyboard"}),!0):e!=null&&e()?(s(),!0):u?(d(),!0):p?(g(),!0):i&&l?(c(),!0):f?(m(),!0):!1,$Ie="916292397";function HIe(t){const e=ft.getItem(Be.FirstSeenCocoonAnnouncementBannerAt);if(e==null)return!1;const s=Number(e);if(Number.isNaN(s))return!1;const n=ta(s);return mo(new Date,n)>t}function GIe(t){const e=ft.getItem(Be.CocoonBannerAnnouncementImpressions);if(e==null)return!1;const s=Number(e);return Number.isNaN(s)?!1:s>=t}function VIe(){const t=ft.getItem(Be.LastSeenCocoonAnnouncementBannerAt);if(t==null)return!1;const e=Number(t);if(Number.isNaN(e))return!1;const s=ta(e);return mo(new Date,s)<1}function zIe(t){const e=js(t,$Ie),s=e.get("max_days_visible",-1);if(s>=0&&HIe(s))return!0;const n=e.get("max_impressions",-1);return!!(n>=0&&GIe(n)||e.get("limit_one_impression_per_day",!1)&&VIe())}function WIe(){return ft.getItem(Be.HasDismissedCocoonAnnouncementBanner)!=null}function qIe(){ft.setItem(Be.HasDismissedCocoonAnnouncementBanner,!0)}function KIe(){const t=ft.getItem(Be.CocoonBannerAnnouncementImpressions),e=Number(t),s=Number.isNaN(e)?1:e+1;ft.setItem(Be.CocoonBannerAnnouncementImpressions,s);const n=Wo(new Date);ft.setItem(Be.LastSeenCocoonAnnouncementBannerAt,n),ft.getItem(Be.FirstSeenCocoonAnnouncementBannerAt)==null&&ft.setItem(Be.FirstSeenCocoonAnnouncementBannerAt,n)}var Yb,iI;function YIe(){if(iI)return Yb;iI=1;var t="Expected a function",e=NaN,s="[object Symbol]",n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof Ng=="object"&&Ng&&Ng.Object===Object&&Ng,u=typeof self=="object"&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),f=Object.prototype,m=f.toString,p=Math.max,g=Math.min,h=function(){return d.Date.now()};function _(C,w,k){var E,M,N,A,I,P,R=0,O=!1,L=!1,D=!0;if(typeof C!="function")throw new TypeError(t);w=S(w)||0,b(k)&&(O=!!k.leading,L="maxWait"in k,N=L?p(S(k.maxWait)||0,w):N,D="trailing"in k?!!k.trailing:D);function H(se){var ee=E,re=M;return E=M=void 0,R=se,A=C.apply(re,ee),A}function V(se){return R=se,I=setTimeout($,w),O?H(se):A}function q(se){var ee=se-P,re=se-R,he=w-ee;return L?g(he,N-re):he}function W(se){var ee=se-P,re=se-R;return P===void 0||ee>=w||ee<0||L&&re>=N}function $(){var se=h();if(W(se))return Z(se);I=setTimeout($,q(se))}function Z(se){return I=void 0,D&&E?H(se):(E=M=void 0,A)}function K(){I!==void 0&&clearTimeout(I),R=0,E=P=M=I=void 0}function Y(){return I===void 0?A:Z(h())}function ae(){var se=h(),ee=W(se);if(E=arguments,M=this,P=se,ee){if(I===void 0)return V(P);if(L)return I=setTimeout($,w),H(P)}return I===void 0&&(I=setTimeout($,w)),A}return ae.cancel=K,ae.flush=Y,ae}function b(C){var w=typeof C;return!!C&&(w=="object"||w=="function")}function y(C){return!!C&&typeof C=="object"}function v(C){return typeof C=="symbol"||y(C)&&m.call(C)==s}function S(C){if(typeof C=="number")return C;if(v(C))return e;if(b(C)){var w=typeof C.valueOf=="function"?C.valueOf():C;C=b(w)?w+"":w}if(typeof C!="string")return C===0?C:+C;C=C.replace(n,"");var k=a.test(C);return k||i.test(C)?l(C.slice(2),k?2:8):o.test(C)?e:+C}return Yb=_,Yb}var QIe=YIe();const lI=en(QIe);var _E=typeof window<"u"?x.useLayoutEffect:x.useEffect;function JIe(t,e,s,n){const o=x.useRef(e);_E(()=>{o.current=e},[e]),x.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{o.current(l)};return a.addEventListener(t,i,n),()=>{a.removeEventListener(t,i,n)}},[t,s,n])}var ZIe=typeof window>"u";function f0(t,{defaultValue:e=!1,initializeWithValue:s=!0}={}){const n=l=>ZIe?e:window.matchMedia(l).matches,[o,a]=x.useState(()=>s?n(t):e);function i(){a(n(t))}return _E(()=>{const l=window.matchMedia(t);return i(),l.addListener?l.addListener(i):l.addEventListener("change",i),()=>{l.removeListener?l.removeListener(i):l.removeEventListener("change",i)}},[t]),o}function XIe(t){const e=x.useRef(t);e.current=t,x.useEffect(()=>()=>{e.current()},[])}function eje(t,e=500,s){const n=x.useRef();XIe(()=>{n.current&&n.current.cancel()});const o=x.useMemo(()=>{const a=lI(t,e,s),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!n.current,i.flush=()=>a.flush(),i},[t,e,s]);return x.useEffect(()=>{n.current=lI(t,e,s)},[t,e,s]),o}function xit({threshold:t=0,root:e=null,rootMargin:s="0%",freezeOnceVisible:n=!1,initialIsIntersecting:o=!1,onChange:a}={}){var i;const[l,c]=x.useState(null),[u,d]=x.useState(()=>({isIntersecting:o,entry:void 0})),f=x.useRef();f.current=a;const m=((i=u.entry)==null?void 0:i.isIntersecting)&&n;x.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||m)return;const h=new IntersectionObserver(_=>{const b=Array.isArray(h.thresholds)?h.thresholds:[h.thresholds];_.forEach(y=>{const v=y.isIntersecting&&b.some(S=>y.intersectionRatio>=S);d({isIntersecting:v,entry:y}),f.current&&f.current(v,y)})},{threshold:t,root:e,rootMargin:s});return h.observe(l),()=>{h.disconnect()}},[l,JSON.stringify(t),e,s,m,n]);const p=x.useRef(null);x.useEffect(()=>{var h;!l&&((h=u.entry)!=null&&h.target)&&!n&&!m&&p.current!==u.entry.target&&(p.current=u.entry.target,d({isIntersecting:o,entry:void 0}))},[l,u.entry,n,m,o]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function tje(){const t=x.useRef(!1);return x.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),x.useCallback(()=>t.current,[])}var cI={width:void 0,height:void 0};function yit(t){const{ref:e,box:s="content-box"}=t,[{width:n,height:o},a]=x.useState(cI),i=tje(),l=x.useRef(T({},cI)),c=x.useRef(void 0);return c.current=t.onResize,x.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([d])=>{const f=s==="border-box"?"borderBoxSize":s==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=uI(d,f,"inlineSize"),p=uI(d,f,"blockSize");if(l.current.width!==m||l.current.height!==p){const h={width:m,height:p};l.current.width=m,l.current.height=p,c.current?c.current(h):i()&&a(h)}});return u.observe(e.current,{box:s}),()=>{u.disconnect()}},[s,e,i]),{width:n,height:o}}function uI(t,e,s){return t[e]?Array.isArray(t[e])?t[e][0][s]:t[e][s]:e==="contentBoxSize"?t.contentRect[s==="inlineSize"?"width":"height"]:void 0}var sje=typeof window>"u";function bit(t={}){let{initializeWithValue:e=!0}=t;sje&&(e=!1);const[s,n]=x.useState(()=>e?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),o=eje(n,t.debounceDelay);function a(){(t.debounceDelay?o:n)({width:window.innerWidth,height:window.innerHeight})}return JIe("resize",a),_E(()=>{a()},[]),s}const dI=uf((t,e)=>Le(!1),t=>t!=null?t:"default");function nje(t){"use forget";const e=F.c(9),s=G(),n=t!=null?t:"default";let o;e[0]!==s||e[1]!==n?(o=()=>dI(s,n),e[0]=s,e[1]=n,e[2]=o):o=e[2];const a=oe(o);let i;e[3]!==s||e[4]!==n?(i=()=>dI.set(s,n,!0),e[3]=s,e[4]=n,e[5]=i):i=e[5];const l=i;let c;return e[6]!==l||e[7]!==a?(c={isDismissed:a,dismiss:l},e[6]=l,e[7]=a,e[8]=c):c=e[8],c}function vit(t){"use forget";return iG(t).shouldShow}function iG(t){"use forget";const e=F.c(6),{clientThreadId:s,entrypointData:n,isNewThread:o}=t,a=G(),{isDismissed:i,dismiss:l}=nje(s),[c,u]=Qe(s,oje),d=f0("(max-height: 660px)");let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=WIe(),e[0]=f):f=e[0];const m=f;let p;e[1]!==a?(p=a!=null&&zIe(a),e[1]=a,e[2]=p):p=e[2];const h=!!n&&!!s&&!!o&&!i&&!m&&!p&&!d&&!c&&!u;let _;return e[3]!==l||e[4]!==h?(_={shouldShow:h,dismiss:l},e[3]=l,e[4]=h,e[5]=_):_=e[5],_}function oje(t){var e;return[Se.hasUserMessage(t),(e=t==null?void 0:t.isLoading)!=null?e:!1]}const Sit=t=>{"use forget";const e=F.c(33),{entrypointData:s,clientThreadId:n,className:o,isNewThread:a}=t;let i;e[0]!==n||e[1]!==s||e[2]!==a?(i={clientThreadId:n,entrypointData:s,isNewThread:a},e[0]=n,e[1]=s,e[2]=a,e[3]=i):i=e[3];const{dismiss:l,shouldShow:c}=iG(i);let u,d;e[4]!==c?(u=()=>{c&&(KIe(),B.logEventWithStatsig("ChatGPT Web Cocoon Announcement Banner Shown","chatgpt_web_cocoon_announcement_banner_shown"),$e.count(He.COCOON,"chatgpt_web_cocoon_announcement_banner_shown"))},d=[c],e[4]=c,e[5]=u,e[6]=d):(u=e[5],d=e[6]),x.useEffect(u,d);let f;e[7]!==l?(f=()=>{l(),qIe(),B.logEventWithStatsig("ChatGPT Web Cocoon Announcement Banner Dismissed","chatgpt_web_cocoon_announcement_banner_dismissed"),$e.count(He.COCOON,"chatgpt_web_cocoon_announcement_banner_dismissed")},e[7]=l,e[8]=f):f=e[8];const m=f;let p;e[9]!==s.conversationId?(p=()=>{B.logEventWithStatsig("ChatGPT Web Cocoon Announcement Banner CTA Clicked","chatgpt_web_cocoon_announcement_banner_cta_clicked"),$e.count(He.COCOON,"chatgpt_web_cocoon_announcement_banner_cta_clicked"),dl("/c/"+s.conversationId)},e[9]=s.conversationId,e[10]=p):p=e[10];const g=p;if(!c)return null;let h;e[11]!==s.videoUrl?(h=r.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-full bg-neutral-100",children:r.jsx("video",{src:s.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute inset-0 h-full w-full object-cover"})}),e[11]=s.videoUrl,e[12]=h):h=e[12];let _;e[13]!==s.title?(_=r.jsx("div",{className:"flex items-center gap-1",children:r.jsx("p",{className:"text-token-text-primary text-base font-semibold",children:s.title})}),e[13]=s.title,e[14]=_):_=e[14];let b;e[15]!==s.caption?(b=r.jsx("p",{className:"text-token-text-primary text-sm",children:s.caption}),e[15]=s.caption,e[16]=b):b=e[16];let y;e[17]!==_||e[18]!==b?(y=r.jsxs("div",{children:[_,b]}),e[17]=_,e[18]=b,e[19]=y):y=e[19];let v;e[20]!==h||e[21]!==y?(v=r.jsx("div",{className:"flex w-full flex-wrap items-center gap-6 md:flex-nowrap",children:r.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-6",children:r.jsxs("div",{className:"flex min-w-0 items-center gap-3 space-y-[2px]",children:[h,y]})})}),e[20]=h,e[21]=y,e[22]=v):v=e[22];const S=v;let C;e[23]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx(j,{id:"YB8gk2",defaultMessage:"Try it"}),e[23]=C):C=e[23];let w;e[24]!==g?(w=r.jsx(ke,{size:"large",color:"primary",onClick:g,children:C}),e[24]=g,e[25]=w):w=e[25];const k=w;let E;e[26]!==o?(E=z("w-full",o),e[26]=o,e[27]=E):E=e[27];let M;return e[28]!==S||e[29]!==k||e[30]!==m||e[31]!==E?(M=r.jsx(r.Fragment,{children:r.jsx(_s,{className:E,contentClassName:"flex-row items-center justify-between gap-4 md:gap-8",content:S,customCtas:k,onDismiss:m,verticalCta:!1})}),e[28]=S,e[29]=k,e[30]=m,e[31]=E,e[32]=M):M=e[32],M},Cit={PromptTextareaHeader:"z-20"},oi=(t,e)=>{var i;if(!t)return{conversationId:void 0,messageId:null};const s=Et(e,t),n=Tt(s.id),o=Se.getLastAssistantMessage(n),a=s.serverId$();return a?{conversationId:a,messageId:(i=o==null?void 0:o.id)!=null?i:null}:{conversationId:void 0,messageId:null}};function lG({beaconId:t,metadata:e}){const{conversationId:s,messageId:n}=e!=null?e:{conversationId:void 0,messageId:null};return de.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:bw.VIEW,conversation_id:s,message_id:n}})}function gg(t){"use forget";const e=F.c(2);let s;return e[0]!==t?(s={mutationFn:n=>lG({beaconId:n,metadata:t==null?void 0:t()})},e[0]=t,e[1]=s):s=e[1],ds(s)}function cG({beaconId:t,eventCtaId:e,metadata:s}){const{conversationId:n,messageId:o}=s!=null?s:{conversationId:void 0,messageId:null};return de.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:bw.CLICK,event_cta_id:e,conversation_id:n,message_id:o}})}function xE(t){"use forget";const e=F.c(2);let s;return e[0]!==t?(s={mutationFn:n=>{const{beaconId:o,eventCtaId:a}=n;return cG({beaconId:o,eventCtaId:a,metadata:t==null?void 0:t()})}},e[0]=t,e[1]=s):s=e[1],ds(s)}function uG({beaconId:t,metadata:e}){const{conversationId:s,messageId:n}=e!=null?e:{conversationId:void 0,messageId:null};return de.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:bw.DISMISS,conversation_id:s,message_id:n}})}function hg(t){"use forget";const e=F.c(2);let s;return e[0]!==t?(s={mutationFn:n=>uG({beaconId:n,metadata:t==null?void 0:t()})},e[0]=t,e[1]=s):s=e[1],ds(s)}function dG(t){"use forget";const e=F.c(18),{imageStyles:s,title:n,description:o,ctaText:a,onCtaClick:i,onDismiss:l}=t;let c;e[0]!==o?(c=r.jsx("p",{className:"mb-3",children:o}),e[0]=o,e[1]=c):c=e[1];let u;e[2]!==a||e[3]!==i?(u=r.jsx(ke,{color:"primary",onClick:i,children:a}),e[2]=a,e[3]=i,e[4]=u):u=e[4];let d;e[5]!==c||e[6]!==u?(d=r.jsxs("div",{className:"relative",children:[c,u]}),e[5]=c,e[6]=u,e[7]=d):d=e[7];const f=d;let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=z("hidden flex-1 flex-row gap-2 @lg/images-promo-banner:flex @lg/images-promo-banner:[&>*:nth-child(n+3)]:hidden @2xl/images-promo-banner:[&>*:nth-child(n+3)]:flex @2xl/images-promo-banner:[&>*:nth-child(n+5)]:hidden"),e[8]=m):m=e[8];let p;e[9]!==s?(p=s.map(aje),e[9]=s,e[10]=p):p=e[10];let g;e[11]!==p?(g=r.jsx("div",{className:m,children:p}),e[11]=p,e[12]=g):g=e[12];const h=g;let _;return e[13]!==f||e[14]!==h||e[15]!==l||e[16]!==n?(_=r.jsx(_s,{className:"@container/images-promo-banner max-w-[768px]",contentClassName:"md:!gap-4 gap-4 flex-row items-center",title:n,content:f,customCtas:h,onDismiss:l}),e[13]=f,e[14]=h,e[15]=l,e[16]=n,e[17]=_):_=e[17],_}function aje(t){const{id:e,imageUrl:s,title:n}=t;return r.jsx(rje,{id:e,imageUrl:s,title:n},e)}function rje(t){"use forget";const e=F.c(8),{imageUrl:s,title:n}=t;let o;e[0]!==s||e[1]!==n?(o=r.jsx("img",{className:"corner-superellipse/1.1 aspect-square h-20 w-20 rounded-lg object-cover",src:s,alt:n,width:80,height:80}),e[0]=s,e[1]=n,e[2]=o):o=e[2];let a;e[3]!==n?(a=r.jsx("span",{className:"text-body-small text-token-text-primary opacity-50",children:n}),e[3]=n,e[4]=a):a=e[4];let i;return e[5]!==o||e[6]!==a?(i=r.jsxs("div",{className:"flex max-w-24 flex-col items-center gap-2 text-center",children:[o,a]}),e[5]=o,e[6]=a,e[7]=i):i=e[7],i}const Jh="images_homepage_promo",ije="Images Homepage Promo Banner",lje="container",fI={beacon_id:Jh,beacon_name:ije,beacon_type:lje},Qb=Ne({title:{id:"j081C7",defaultMessage:"Better, faster image creation is here"},body:{id:"E4fwCv",defaultMessage:"Give it a whirl with one of our curated styles or imagine something from scratch."},cta:{id:"EiNplX",defaultMessage:"Start creating"}});function wit(t){"use forget";var S,C,w,k;const e=F.c(22),{clientThreadId:s}=t,n=G();let o;e[0]!==n?(o=()=>Xx(n),e[0]=n,e[1]=o):o=e[1];const a=oe(o);let i;e[2]!==((S=a.data)==null?void 0:S.styles)?(i=(w=(C=a.data)==null?void 0:C.styles)==null?void 0:w.filter(uje).map(cje),e[2]=(k=a.data)==null?void 0:k.styles,e[3]=i):i=e[3];const l=i,c=a.status==="success"&&l&&l.length!==0,u=x.useRef(!1);let d,f;if(e[4]!==s||e[5]!==n||e[6]!==c?(d=()=>{!c||u.current||(B.logStructuredEvent(y1,{type:b1.CHATGPT_IMAGE_HOME_NUX_TYPE_IMPRESSION}),lG({beaconId:Jh,metadata:oi(s,n)}),u.current=!0)},f=[c,s,n],e[4]=s,e[5]=n,e[6]=c,e[7]=d,e[8]=f):(d=e[7],f=e[8]),x.useEffect(d,f),!c)return null;let m;e[9]!==s||e[10]!==n?(m=()=>{B.logStructuredEvent(y1,{type:b1.CHATGPT_IMAGE_HOME_NUX_TYPE_CLICK}),dl("/images",{state:{source:KC.CHATGPT_IMAGE_HOME_NAVIGATION_SOURCE_TYPE_HOME_NUX}}),B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",U(T({},fI),{action_id:"images_homepage_promo_cta_click",action_type:"primary",action_enum:"primary"})),cG({beaconId:Jh,eventCtaId:"images_homepage_promo_cta_click",metadata:oi(s,n)}),No.dismiss()},e[9]=s,e[10]=n,e[11]=m):m=e[11];const p=m;let g;e[12]!==s||e[13]!==n?(g=()=>{B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",fI),uG({beaconId:Jh,metadata:oi(s,n)}),No.dismiss()},e[12]=s,e[13]=n,e[14]=g):g=e[14];const h=g;let _,b,y;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(j,T({},Qb.title)),b=r.jsx(j,T({},Qb.body)),y=r.jsx(j,T({},Qb.cta)),e[15]=_,e[16]=b,e[17]=y):(_=e[15],b=e[16],y=e[17]);let v;return e[18]!==p||e[19]!==h||e[20]!==l?(v=r.jsx(dG,{imageStyles:l,title:_,description:b,ctaText:y,onCtaClick:p,onDismiss:h}),e[18]=p,e[19]=h,e[20]=l,e[21]=v):v=e[21],v}function cje(t){var e,s,n,o;return{id:t.id,imageUrl:(n=(s=(e=t.variants)==null?void 0:e[0])==null?void 0:s.url)!=null?n:"",title:(o=t.title)!=null?o:""}}function uje(t){return t.variants&&t.variants.length>0&&t.title}const dje="/cdn/assets/logo-b4qsr7qc.webp",fje={src:dje},mje=()=>{"use forget";const t=F.c(8),e=oe(_9),s=ne();let n;t[0]!==s?(n=s.formatMessage(mI.separateModeSetting),t[0]=s,t[1]=n):n=t[1];let o;t[2]!==s?(o=s.formatMessage(mI.separateModeSettingDescription),t[2]=s,t[3]=o):o=t[3];let a;return t[4]!==e||t[5]!==n||t[6]!==o?(a=r.jsx(Xi,{label:n,enabled:e,onChange:pje,description:o}),t[4]=e,t[5]=n,t[6]=o,t[7]=a):a=t[7],a},mI=Ne({separateModeSetting:{id:"settings.voice.separateModeSetting",defaultMessage:"Separate voice mode"},separateModeSettingDescription:{id:"settings.voice.separateModeSettingDescription",defaultMessage:"Keep ChatGPT Voice in a separate full screen, without real time transcripts and visuals."}});function pje(t){Jt.settings.separateModeChanged({separateMode:t}),_9.set(t)}function gje({voice:t,voiceSpeed:e}){const[s,n]=x.useState(!1),o=lw(),a=t.voice,i=t.preview_url,l=x.useRef({playPromise:null}).current,c=cw(p=>p.isPlaying&&p.sourceUrl===i);x.useEffect(()=>{o&&o.setSpeed(e)},[o,e]);const u=Kt(),d=x.useCallback(async()=>{if(!o)return;const p={voice:a,source:i};Jt.previews.click(p);try{n(!0),o.changeSource(i),l.playPromise=o.play(),n(!1)}catch(g){Jt.previews.error(g,p),u.danger(Je({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}),{toastId:"voice_preview_player_play_error"})}},[o,i,a,l,u]),f=x.useCallback(()=>{o&&(l.playPromise?l.playPromise.then(()=>{o.stop(),l.playPromise=null}):o.stop())},[o,l]),m=x.useCallback(()=>{c?f():s||d()},[f,d,s,c]);return x.useEffect(()=>()=>{c&&f()},[t,c,f]),r.jsx(ke,{onClick:m,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:s,icon:c?Oke:bH,children:c?r.jsx(j,{id:"yGpEMJ",defaultMessage:"Stop"}):r.jsx(j,{id:"JwYDVp",defaultMessage:"Play"})})}const dS=.5,fS=2,fG=.1,mG=Math.round((fS-dS)/fG),hje=Array.from({length:mG+1},(t,e)=>e),pG=2,Zh=8,pI=(Zh-pG)/2,_je=t=>{const e=Number(t);return isNaN(e)?1:e};function xje(t){return Ee(t,"174366048")}function yje(t){return Ee(t,"3302173089")}const yE=()=>{const{value:t}=Rf(Qt.VoiceEnabled);return t!==!1};function kit(){const t=G(),e=xje(t),s=ja(),n=yje(t),{isLoading:o,value:a,setValue:i}=Rf(Qt.VoiceSpeed),l=_je(a),c=yE(),u=BZ(t);if(!e)return null;const d=(s==null?void 0:s.length)&&!(s!=null&&s.includes(kn.VideoScreenSharing));return r.jsxs(r.Fragment,{children:[c&&r.jsxs(r.Fragment,{children:[r.jsx(_a,{children:r.jsx(Sje,{})}),r.jsx(_a,{children:r.jsx(bje,{voiceSpeed:l})}),u&&r.jsx(_a,{children:r.jsx(mje,{})})]}),n&&c&&r.jsx(_a,{children:r.jsx(vje,{voiceSpeed:l,setVoiceSpeed:i,isLoading:o})}),d&&r.jsx(_a,{children:r.jsx(Cje,{})})]})}function Rf(t,e=!1){const{data:s,isLoading:n}=qo(t)||{},o=Dc(e);return{isLoading:n,value:s,setValue:a=>{o.mutate({setting:t,value:a})}}}function bje({voiceSpeed:t}){const{isLoading:e,value:s,setValue:n}=Rf(Qt.VoiceName),o=hH(),a=gH(),i=e?"":_H(s,a),l=o.find(({voice:c})=>c===i);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),r.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?r.jsxs(r.Fragment,{children:[r.jsx(gje,{voice:l,voiceSpeed:t}),r.jsx("div",{className:"h-4 border-s"})]}):null,r.jsxs(rs.Root,{value:i,onValueChange:c=>n(c),disabled:e,children:[r.jsxs(rs.Trigger,{children:[r.jsx(rs.Value,{}),r.jsx(rs.Icon,{})]}),r.jsx(rs.Portal,{children:r.jsx(rs.Content,{children:o.map(({voice:c,name:u})=>r.jsx(rs.Item,{value:c,children:u},c))})})]})]})]})})})}function vje({voiceSpeed:t,setVoiceSpeed:e,isLoading:s}){const[n,o]=x.useState(t);return x.useEffect(()=>o(t),[t]),r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),r.jsx("div",{className:"text-token-text-secondary tabular-nums",children:r.jsx(j,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:n.toFixed(1)}})})]}),r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(cE,{className:"relative flex w-full items-center",min:dS,max:fS,step:fG,value:[n],disabled:s,onValueChange:a=>o(a[0]),onValueCommit:a=>{const i=a[0],l=Math.min(fS,Math.max(dS,i));e(l.toString())},children:[r.jsxs(uE,{className:"relative h-[4px] grow rounded-full",children:[r.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:pI,right:pI}}),r.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:Zh/2,right:Zh/2},children:hje.map(a=>r.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:pG,left:"".concat(a/mG*100,"%"),transform:"translateX(-50%)"}},a))})]}),r.jsx(dE,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:Zh}})]})})})]})}function Sje(){const{isLoading:t,value:e,setValue:s}=Rf(Qt.VoiceMainLanguage);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),r.jsxs(rs.Root,{value:t?"":e!=null?e:fm.Auto,onValueChange:n=>s(n),disabled:t,children:[r.jsxs(rs.Trigger,{children:[r.jsx(rs.Value,{}),r.jsx(rs.Icon,{})]}),r.jsx(rs.Portal,{children:r.jsxs(rs.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[r.jsx(rs.Item,{value:fm.Auto,children:r.jsx(j,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(fm).filter(([n,o])=>o!==fm.Auto).map(([n,o])=>r.jsx(rs.Item,{value:o,className:"capitalize",children:n},o))]})})]})]}),r.jsx(UZ,{children:r.jsx(j,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function Cje(){const t=ne();return r.jsx(Xi,{label:t.formatMessage(gI.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:t.formatMessage(gI.voiceAndScreenSharingDescription)})}const gI=Ne({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}}),wje=()=>{"use forget";const t=F.c(12),{value:e,setValue:s,isLoading:n}=Rf(Qt.VoiceEnabled),o=ne();let a;t[0]!==o?(a=o.formatMessage(hI.voiceEnabledSetting),t[0]=o,t[1]=a):a=t[1];const i=e!=null?e:!0;let l;t[2]!==s?(l=d=>{s(d)},t[2]=s,t[3]=l):l=t[3];let c;t[4]!==o?(c=o.formatMessage(hI.voiceEnabledSettingDescription),t[4]=o,t[5]=c):c=t[5];let u;return t[6]!==n||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==c?(u=r.jsx(Xi,{label:a,isLoading:n,enabled:i,onChange:l,description:c}),t[6]=n,t[7]=a,t[8]=i,t[9]=l,t[10]=c,t[11]=u):u=t[11],u};function Tit({disabledTools:t,onDisabledToolsChanged:e}){var b;x.useEffect(()=>{B.logEvent("User Context GPT-4 Capabilities Shown")},[]);const s=G(),n=ct(s),o=(b=n==null?void 0:n.isEnterprisey())!=null?b:!1,a=!m1(kn.BrowsingAvailable)&&o,i=!Ee(s,"934056609"),l=Ee(s,"3199592968"),c=ne(),u=y=>{const v=t.includes(y)?t.filter(S=>S!==y):[...t,y];e(v)},d=ja(),f=!m1(kn.Canvas)&&o;var m;d!=null&&d.includes(kn.SearchTool)&&!d.includes(kn.SearchToolHoldout)?m=Zf({tool:Qs.BROWSER,label:c.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web search"}),disabledTooltipLabel:c.formatMessage({id:"4WldgK",defaultMessage:"Web search is disabled by your organization"}),description:c.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Let ChatGPT automatically search the web for answers."}),enabled:!t.includes(Qs.BROWSER)&&!a,handleToolClick:u,disabled:a}):m=Zf({tool:Qs.BROWSER,label:c.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),disabledTooltipLabel:c.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}),description:c.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Let ChatGPT browse the internet to find answers."}),enabled:!t.includes(Qs.BROWSER)&&!a,handleToolClick:u,disabled:a});const p=l?null:Zf({tool:Qs.PYTHON,label:c.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),description:c.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Let ChatGPT execute code using Code Interpreter."}),enabled:!t.includes(Qs.PYTHON),handleToolClick:u}),g=Zf({tool:Qs.CANMORE,label:c.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),description:c.formatMessage({id:"zPYZ4h",defaultMessage:"Collaborate with ChatGPT on text and code."}),enabled:!t.includes(Qs.CANMORE),handleToolClick:u}),h=Zf({tool:Qs.ADVANCED_VOICE,label:c.formatMessage({id:"eHCnkb",defaultMessage:"Advanced voice"}),description:c.formatMessage({id:"OrvjWP",defaultMessage:"Have more natural conversations in voice mode."}),enabled:!t.includes(Qs.ADVANCED_VOICE),handleToolClick:u}),_=yE();return r.jsxs(r.Fragment,{children:[m,p,!f&&g,r.jsx(_a,{children:r.jsx(wje,{})}),i&&_&&h]})}function Zf({tool:t,label:e,disabledTooltipLabel:s,description:n,enabled:o,handleToolClick:a,disabled:i}){return r.jsx(_a,{children:r.jsx(Xi,{label:e,enabled:o,onChange:()=>a(t),toggleTooltip:i&&s,description:n,disabled:i})})}const hI=Ne({voiceEnabledSetting:{id:"oFt0Pe",defaultMessage:"ChatGPT Voice"},voiceEnabledSettingDescription:{id:"v/Uvaa",defaultMessage:"Enable voice mode in ChatGPT"}}),kje=Ne({separateModeLabel:{id:"IntegratedVoiceMode.settings.separateModeLabel",defaultMessage:"Separate mode"}}),Tje=()=>!ft.getItem("hasSeenIntegratedVoiceNuxBefore"),Eje=()=>{ft.setItem("hasSeenIntegratedVoiceNuxBefore",!0)},Eit=()=>{"use forget";const t=F.c(3),[e,s]=x.useState(Nje);let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{s(!1),Eje()},t[0]=n):n=t[0];const o=n;let a;return t[1]!==e?(a=e?r.jsx(Mje,{markAsViewed:o}):null,t[1]=e,t[2]=a):a=t[2],a};function Mje(t){"use forget";const e=F.c(9),{markAsViewed:s}=t,n=ne();let o;e[0]!==n?(o=n.formatMessage(kje.separateModeLabel),e[0]=n,e[1]=o):o=e[1];const a=o;let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"flex-column flex min-w-6 pt-0.5",children:r.jsx("img",{className:"h-6 w-6",src:fje.src,alt:""})}),e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"text-md mb-0.5 font-semibold",children:r.jsx(j,T({},_I.integratedVoiceModeNuxBannerTitle))}),e[3]=l):l=e[3];let c;e[4]!==a?(c=r.jsxs("div",{className:"flex flex-row gap-4",children:[i,r.jsxs("div",{className:"flex-column",children:[l,r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,U(T({},_I.integratedVoiceModeNuxBannerDescription),{values:{separateModeLabel:a}}))})]})]}),e[4]=a,e[5]=c):c=e[5];const u=c;let d;return e[6]!==u||e[7]!==s?(d=r.jsx(_s,{type:"info",onDismiss:s,content:u}),e[6]=u,e[7]=s,e[8]=d):d=e[8],d}const _I=Ne({integratedVoiceModeNuxBannerTitle:{id:"IntegratedVoiceMode.nux.banner.title",defaultMessage:"Voice is now integrated in chat"},integratedVoiceModeNuxBannerDescription:{id:"IntegratedVoiceMode.nux.banner.description",defaultMessage:"Follow the conversation in real time with transcripts and visuals like links, maps, and weather. Switch back anytime by selecting {separateModeLabel} in Settings."}});function Nje(){return Tje()}function Mit(){const t=yt();return r.jsx(_s,{primaryCtaText:r.jsx(j,{id:"k/qPdM",defaultMessage:"Manage tasks"}),onPrimaryCtaClick:()=>{t("/tasks")},title:r.jsx(j,{id:"mYNRrn",defaultMessage:"Youve reached your limit for scheduled tasks."}),content:r.jsx(j,{id:"Bwsb55",defaultMessage:"To schedule new ones, pause some of your existing tasks first."})})}const mS=We.hasSeenGoldenHourAnnouncement;function Aje(){"use forget";var S,C,w;const t=F.c(6),e=G();let s;t[0]!==e?(s=xn(e),t[0]=e,t[1]=s):s=t[1];const n=s,o=ct(e),a=xs();let i;t[2]!==a?(i=a!=null&&q_(a),t[2]=a,t[3]=i):i=t[3];const l=i,{eligible:c,isLoading:u}=Ct(mS),d=Ml();let f;t[4]!==e?(f=_7(e),t[4]=e,t[5]=f):f=t[5];const m=f,{data:p}=$p(void 0,!1,d),g=(S=p==null?void 0:p.memoryFullPct)!=null?S:0,h=(C=o==null?void 0:o.isFree())!=null?C:!1,_=(w=o==null?void 0:o.isGo())!=null?w:!1,v=l||g>=(h||_?95:90);return c&&!u&&m&&v&&!n}function Nit(){"use forget";const t=F.c(4),e=G(),s=Aje(),{eligible:n}=Ct(mS);let o;return t[0]!==s||t[1]!==e||t[2]!==n?(o=()=>{!s||!n||($e.count(He.GOLDEN_HOUR,"announcement_banner.implicit_close"),_t(e,mS))},t[0]=s,t[1]=e,t[2]=n,t[3]=o):o=t[3],o}const gG=We.HasSeenAdvancedVoiceOnMobile,Ije=window.location.origin+"/update-app",xI=window.location.origin+"/update-app?origin=qr";function jje(t){const e=ct(t),s=Ee(t,"989108178");return e!=null&&s}function Ait(t){var l;const e=G(),s=jje(e),{eligible:n,isLoading:o}=Ct(gG);return{eligible:!(!s||!n||((l=t.conversationMode)==null?void 0:l.kind)!==Pt.PrimaryAssistant)&&!o}}const Pje=3;function Rje(t){let e=ft.getItem(Be.AdvancedVoiceOnMobileAnnouncementCount);Array.isArray(e)||(e=[]);const s=new Set(e);return t&&s.add(t),e=[...s],ft.setItem(Be.AdvancedVoiceOnMobileAnnouncementCount,e),e.length}function Iit({onClose:t,clientThreadId:e}){const s=G(),n=x.useCallback(()=>{_t(s,gG)},[s]),o=Bs(e);x.useEffect(()=>{const c=Rje(o);c>Pje&&(n(),pt.logEvent("chatgpt_advanced_voice_on_mobile_announcement_limit_reached",c)),B.logEvent("Advanced Voice on Mobile: Announcement Shown"),pt.logEvent("chatgpt_advanced_voice_on_mobile_announcement_shown"),B.logUpsellOrModalEvent(ks,{eventId:"advanced_voice_on_mobile_announcement_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[o,n]);const a=x.useCallback(()=>{n(),B.logEvent("Advanced Voice on Mobile: Dismissed Announcement"),pt.logEvent("chatgpt_advanced_voice_on_mobile_announcement_dismissed"),t&&t()},[n,t]),l={markAsDownloaded:x.useCallback(()=>{B.logEvent("Advanced Voice on Mobile: Link Clicked"),pt.logEvent("chatgpt_advanced_voice_on_mobile_announcement_download_clicked"),n(),t&&t()},[n,t]),markAsViewed:a};return r.jsx(Lje,T({},l))}function Oje(){window.open(Ije,"_blank")}function Lje({markAsDownloaded:t,markAsViewed:e}){const s=ne(),[n,o]=x.useState(!1),a=x.useCallback(()=>{Oje(),t()},[t]),i=r.jsx("div",{className:"grow flex-row",children:r.jsxs("div",{className:"flex-column",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,T({},Ru.advancedVoiceOnMobileBannerTitle))}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,T({},Ru.advancedVoiceOnMobileBannerDescription))})]})}),l=!mf(),c=nf();let u;return l?c?u=Object.freeze({primaryCtaQrLink:xI,onPrimaryCtaQrClick:()=>o(!0)}):u=Object.freeze({onSecondaryCtaClick:()=>o(!0),secondaryCtaText:s.formatMessage(Ru.advancedVoiceOnMobileButtonScanCode)}):u=Object.freeze({onPrimaryCtaClick:a,primaryCtaText:s.formatMessage(Ru.advancedVoiceOnMobileButtonDownload)}),r.jsxs(r.Fragment,{children:[r.jsx(_s,U(T({},u),{onDismiss:e,content:i})),l&&r.jsx(Ft,{testId:"modal-advanced-voice-on-mobile-qr",size:"custom",className:"w-[328px] max-w-[328px]",title:s.formatMessage(Ru.advancedVoiceOnMobileQRModalTitle),isOpen:n,showCloseButton:!0,onClose:()=>o(!1),type:"success",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(XU,{className:"m-[24px] mt-[0px]",size:280,value:xI}),r.jsx("div",{className:"text-token-text-primary text-start",children:r.jsx(j,T({},Ru.advancedVoiceOnMobileQRModalDescription))})]})})]})}const Ru=Ne({advancedVoiceOnMobileBannerTitle:{id:"AdvancedVoiceOnMobile.banner.title",defaultMessage:"Download the latest iOS or Android app to try advanced voice mode"},advancedVoiceOnMobileBannerDescription:{id:"AdvancedVoiceOnMobile.banner.description",defaultMessage:"Get more natural, real-time conversations with advanced voice. Senses and responds to humor, sarcasm, interruptions, and more."},advancedVoiceOnMobileButtonDownload:{id:"AdvancedVoiceOnMobile.button.download",defaultMessage:"Download"},advancedVoiceOnMobileButtonScanCode:{id:"AdvancedVoiceOnMobile.button.scancode",defaultMessage:"Scan code"},advancedVoiceOnMobileButtonClose:{id:"AdvancedVoiceOnMobile.button.close",defaultMessage:"Close"},advancedVoiceOnMobileQRModalTitle:{id:"AdvancedVoiceOnMobile.qrmodal.title",defaultMessage:"Download the app"},advancedVoiceOnMobileQRModalDescription:{id:"AdvancedVoiceOnMobile.qrmodal.description",defaultMessage:"Scan the QR code on your phone to download the ChatGPT app."}}),hG="1696863369",Dje=We.UseSidekick,Fje=We.SidekickLauncherOnboarding,Bje="https://help.openai.com/en/articles/9275200",Uje="https://persistent.oaistatic.com/sidekick/public/ChatGPT_Desktop_public_latest.dmg",_G="1697140512",$je=We.UseSidetron,Hje=We.hasSeenWindowsAppOnboarding,Gje="https://help.openai.com/en/articles/9982051",Vje="https://apps.microsoft.com/detail/9nt1r1c2hh7j",xG="download";function yG(t,e,s){const n=ct(t),o=Xe(t,e).get(s,!1);return n!=null&&o}function zje(t){return yG(t,hG,"has_sidekick_access")}function Wje(t){return yG(t,_G,"can_download_sidetron")}function bE(t){const e=zje(t),s=Wje(t);return{isSidekickAvailable:e,isSidetronAvailable:s,isDesktopAppAvailable:e||s}}function qje(t){return t===xG}function Kje(){const t=yt(),{hash:e}=Hs(),s=qje(e.slice(1));return{openModal:()=>{t({hash:xG})},closeModal:()=>{t({hash:""})},isOpen:s}}function jit(t){var p;const e=G(),s=bE(e),{isDesktopAppAvailable:n}=s,o=vE(s),i=Xe(e,o.statsigLayerName).get("show_nux_banner",!1),{eligible:l,isLoading:c}=Ct(o.downloadAnnouncement),{eligible:u,isLoading:d}=Ct(o.onboardingAnnouncement);return{eligible:!(!l||!u||!n||((p=t.conversationMode)==null?void 0:p.kind)!==Pt.PrimaryAssistant)&&i,isLoading:d||c}}function Pit({onClose:t}){const e=G(),s=bE(e),n=vE(s);x.useEffect(()=>{B.logEvent(n.analyticsBannerShown),pt.logEvent(n.statsigBannerShown),B.logUpsellOrModalEvent(ks,{eventId:"".concat(n.downloadAnnouncement,"_banner_shown"),type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[n.analyticsBannerShown,n.statsigBannerShown,n.downloadAnnouncement]);const o=x.useCallback(()=>{_t(e,n.downloadAnnouncement),B.logEvent(n.analyticsBannerDismissed),pt.logEvent(n.statsigBannerDismissed),t&&t()},[e,t,n.analyticsBannerDismissed,n.statsigBannerDismissed,n.downloadAnnouncement]),a=x.useCallback(()=>{B.logEvent(n.analyticsBannerDownloadClicked),pt.logEvent(n.statsigBannerDownloadClicked),_t(e,n.downloadAnnouncement),t&&t()},[e,t,n.analyticsBannerDownloadClicked,n.statsigBannerDownloadClicked,n.downloadAnnouncement]),i=U(T({},n),{isAppAvailable:s.isDesktopAppAvailable,markAsDownloaded:a,markAsViewed:o});return r.jsx(Jje,T({},i))}function Yje(t){window.open(t,"_blank")}function vE(t){return t.isSidekickAvailable?s5e:n5e}function Qje(t){return t.bannerTitle}function Rit(){const t=G(),{closeModal:e,isOpen:s}=Kje(),n=bE(t),{isDesktopAppAvailable:o}=n,a=vE(n),i=x.useMemo(()=>({isDesktopAppAvailable:o}),[o]),l=()=>{B.logEvent(a.analyticsModalClosed,i),pt.logEvent(a.statsigModalClosed),e()},c=()=>{B.logEvent(a.analyticsModalDownloadClicked,i),pt.logEvent(a.statsigModalDownloadClicked),e()};if(x.useEffect(()=>{s&&(B.logEvent(a.analyticsModalShown,T({},i)),pt.logEvent(a.statsigModalShown))},[i,s,a.analyticsModalShown,a.statsigModalShown]),!s)return null;const u=U(T({},a),{isAppAvailable:n.isDesktopAppAvailable,markAsDownloaded:c,markAsViewed:l});return r.jsx(Zje,T({},u))}function Jje({downloadUrl:t,markAsDownloaded:e,markAsViewed:s,messages:n,learnMoreUrl:o}){const a=ne(),i=x.useCallback(()=>{Yje(t),e()},[e,t]),l=r.jsx(j,T({},Qje(n))),c=r.jsx(j,T({},n.bannerContent)),u=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:l}),r.jsx("span",{className:"text-token-text-secondary",children:c}),r.jsxs(qn,{href:o,className:"ms-2 gap-1 font-medium",children:[r.jsx(j,T({},n.learnMore)),r.jsx(bp,{className:"icon-sm inline-block"})]})]});return r.jsx(_s,{onPrimaryCtaClick:i,primaryCtaText:a.formatMessage(n.download),onDismiss:s,content:u})}function Zje({downloadUrl:t,markAsDownloaded:e,markAsViewed:s,isAppAvailable:n,messages:o,learnMoreUrl:a}){const i=o.modalTitle,l=r.jsx(j,T({},i)),c=r.jsx(j,T({},o.modalContent)),u=r.jsx("div",{className:"mt-2",children:r.jsxs(qn,{href:a,className:"flex items-center gap-1 font-medium",children:[r.jsx(j,T({},o.learnMore)),r.jsx(bp,{className:"icon-sm"})]})}),d=r.jsx(ke,{as:"link",to:t,color:"primary",onClick:e,openNewTab:!0,children:r.jsx(j,T({},o.download))}),f=r.jsx(ke,{color:"secondary",onClick:s,children:r.jsx(j,T({},t5e.close))}),m=n?d:f,p=n?f:void 0;return r.jsx(VO,{onClose:s,title:l,description:c,actionButton:m,cancelButton:p,moreInfoLink:u})}const Xje=Ne({bannerTitle:{id:"SidekickOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for macOS 14+ with Apple Silicon"},bannerContent:{id:"SidekickOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Option + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidekickOnboarding.modalTitle",defaultMessage:"ChatGPT is available for macOS 14+ with Apple Silicon"},modalContent:{id:"SidekickOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Option + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidekickOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidekickOnboarding.download",defaultMessage:"Download"}}),e5e=Ne({bannerTitle:{id:"SidetronOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for Windows 10+"},bannerContent:{id:"SidetronOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Alt + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidetronOnboarding.modalTitle",defaultMessage:"ChatGPT is available for Windows 10+"},modalContent:{id:"SidetronOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Alt + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidetronOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidetronOnboarding.download",defaultMessage:"Download on Microsoft Store"}}),t5e=Ne({close:{id:"SidekickOnboarding.close",defaultMessage:"Close"}}),s5e={downloadUrl:Uje,messages:Xje,learnMoreUrl:Bje,analyticsModalShown:"Sidekick: Download Modal Shown",analyticsModalClosed:"Sidekick: Download Modal Closed",analyticsModalDownloadClicked:"Sidekick: Download Modal Downloaded",analyticsBannerShown:"Sidekick: Announcement Shown",analyticsBannerDismissed:"Sidekcik: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidekick: Clicked Announcement Link",statsigLayerName:hG,statsigModalShown:"chatgpt_sidekick_modal_shown",statsigModalClosed:"chatgpt_sidekick_modal_closed",statsigModalDownloadClicked:"chatgpt_sidekick_modal_download_clicked",statsigBannerShown:"chatgpt_sidekick_announcement_shown",statsigBannerDismissed:"chatgpt_sidekick_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidekick_announcement_download_clicked",downloadAnnouncement:Dje,onboardingAnnouncement:Fje},n5e={downloadUrl:Vje,messages:e5e,learnMoreUrl:Gje,analyticsModalShown:"Sidetron: Download Modal Shown",analyticsModalClosed:"Sidetron: Download Modal Closed",analyticsModalDownloadClicked:"Sidetron: Download Modal Downloaded",analyticsBannerShown:"Sidetron: Announcement Shown",analyticsBannerDismissed:"Sidetron: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidetron: Clicked Announcement Link",statsigLayerName:_G,statsigModalShown:"chatgpt_sidetron_modal_shown",statsigModalClosed:"chatgpt_sidetron_modal_closed",statsigModalDownloadClicked:"chatgpt_sidetron_modal_download_clicked",statsigBannerShown:"chatgpt_sidetron_announcement_shown",statsigBannerDismissed:"chatgpt_sidetron_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidetron_announcement_download_clicked",downloadAnnouncement:$je,onboardingAnnouncement:Hje};function bG({country:t,currentAccount:e,location:s,shouldUsePaidSubscriptionBillingCurrency:n=!0}){const o=G(),{data:a,isLoading:i,error:l}=rB({countryCode:t,ctx:o}),[c,u]=x.useState(()=>yI({country:t,currentAccount:e,location:s,shouldUsePaidSubscriptionBillingCurrency:n,checkoutPricingConfig:a}));return x.useEffect(()=>{u(yI({country:t,currentAccount:e,location:s,shouldUsePaidSubscriptionBillingCurrency:n,checkoutPricingConfig:a}))},[t,e,s,n,a,i,l]),c}function vG({initialCountryCode:t}={}){const e=Gs(),s="userCountry"in e?e.userCountry:null,[n,o]=x.useState(t&&Bw(t)?t:Yse({country:s,shouldUseDefaultCountryCode:!1}));return{country:n,setCountry:o,userCountry:s}}function yI({country:t,currentAccount:e,location:s,shouldUsePaidSubscriptionBillingCurrency:n,checkoutPricingConfig:o}){if(o){const a=o.currencyConfig.symbol_code;if(e!=null&&e.hasPaidSubscription()&&n){const i=e==null?void 0:e.mustGetSubscriptionBillingCurrency(s);if(i!==a)return{currency:i}}return{country:t,currency:a}}else return null}function Oit(){sessionStorage.removeItem(a5e),sessionStorage.removeItem(o5e),sessionStorage.removeItem(r5e)}const SG="promoCode",Lit="referralCode",o5e="oai/apps/closedReferralCode",a5e="oai/apps/closedPromoCode",r5e="oai/apps/closedPromoMetadata",i5e="oai/apps/promoEligibleUpsellSuppression",l5e=t=>{"use forget";var k,E,M;const e=F.c(25),{promoCode:s,referralCode:n}=t,o=s?"promo":n?"referral":void 0,a=s||n||"",i=!!a;let l;e[0]!==a?(l=["promotionEligibility",a],e[0]=a,e[1]=l):l=e[1];let c;e[2]!==a||e[3]!==o?(c=()=>de.safeGet("/promotions/eligibility/{code}",{parameters:{query:{type:o},path:{code:a}}}),e[2]=a,e[3]=o,e[4]=c):c=e[4];let u;e[5]!==i||e[6]!==l||e[7]!==c?(u={enabled:i,queryKey:l,queryFn:c},e[5]=i,e[6]=l,e[7]=c,e[8]=u):u=e[8];const{data:d,isLoading:f}=dt(u),m=!!a&&(d==null?void 0:d.is_eligible);let p;e[9]!==a?(p=["promotionMetadata",a],e[9]=a,e[10]=p):p=e[10];let g;e[11]!==a||e[12]!==o?(g=()=>de.safeGet("/promotions/metadata/{code}",{parameters:{query:{type:o},path:{code:a}}}),e[11]=a,e[12]=o,e[13]=g):g=e[13];let h;e[14]!==m||e[15]!==p||e[16]!==g?(h={enabled:m,queryKey:p,queryFn:g},e[14]=m,e[15]=p,e[16]=g,e[17]=h):h=e[17];const{data:_,isLoading:b}=dt(h),y=f||b,v=(d==null?void 0:d.ineligible_reason)&&(d&&!d.is_eligible&&(k=d.ineligible_reason)!=null?k:null),S=(E=d==null?void 0:d.is_eligible)!=null?E:!1,C=(M=_==null?void 0:_.metadata)!=null?M:null;let w;return e[18]!==y||e[19]!==s||e[20]!==v||e[21]!==n||e[22]!==C||e[23]!==S?(w={isEligible:S,isPromoLoading:y,promoCode:s,referralCode:n,promoError:v,promoMetadata:C},e[18]=y,e[19]=s,e[20]=v,e[21]=n,e[22]=C,e[23]=S,e[24]=w):w=e[24],w},pS=We.hasDismissedPromoRedemption,m_="month",CG="year",wG="hour";function c5e(t){return t==="chatgptplusplan"?"Plus":t==="chatgptgoplan"?"Go":t==="chatgptteamplan"?"Business":(Ls.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:t}),"Plus")}function Dit(){const{eligible:t}=Ct(pS);return ft.getItem(Be.PromoCode)?t:!1}function Fit(){const t=G(),e=ne(),s=yt(),n=fs(),{country:o}=vG(),a=bG({country:o,currentAccount:n,location:"PromoRedemptionAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0}),i=ft.getItem(Be.PromoCode),{promoMetadata:l}=l5e({promoCode:i,referralCode:null}),c=l!=null&&!l.schedule&&l.plan_name!=="chatgptteamplan",u=(l==null?void 0:l.plan_name)&&c5e(l.plan_name)||"",{data:d,isLoading:f,error:m}=rB({countryCode:a==null?void 0:a.country,currency:a==null?void 0:a.currency,ctx:t,enabled:a!==null});if(x.useEffect(()=>{c&&(B.logEvent("Promo Redemption Banner Shown",{promoCode:i}),pt.logEvent("chatgpt_promo_redemption_banner_shown"),B.logUpsellOrModalEvent(ks,{eventId:"promo_redemption_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[c,i]),!c)return null;let p,g;a&&d&&!f&&!m&&(p=d5e(e,a,l,u,d),g=f5e(e,a,l,d));const h=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:p!=null?p:""}),r.jsx("span",{className:"text-token-text-secondary",children:g!=null?g:""})]});return r.jsx(_s,{onPrimaryCtaClick:()=>{const _=ft.getItem(Be.PromoCode);ft.removeItem(Be.PromoCode),_t(t,pS),s("/p/".concat(_,"#pricing")),B.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:_}),pt.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:e.formatMessage(or.bannerPrimaryCta),onDismiss:()=>_t(t,pS),content:h})}function u5e({planName:t,checkoutPricingConfig:e}){return L2(e,t==="chatgptgoplan"?m0e:p0e,q1.Month).amount}function kG(t,e){const{discount:s}=t;let n=u5e({planName:t.plan_name,checkoutPricingConfig:e});if("percentage"in s){const o=(s==null?void 0:s.percentage)/100;n=n*(1-o)}else if("value"in s){const o=s==null?void 0:s.value;n-=o}return n}function d5e(t,e,s,n,o){var d,f;const{discount:a,duration:i}=s,l=cf(e.currency),c=i?i.period:m_,u=i?i.num_periods:1;if("percentage"in a){const m=a==null?void 0:a.percentage;return t.formatMessage(or.bannerTitleForPercentageDiscount,{discount:"".concat(m),planName:n})}else if("value"in a){const m=kG(s,o),p=(f=(d=l.code.defaultMessage)==null?void 0:d.toString())!=null?f:kp,g=t.formatNumber(m,{style:"currency",currency:p,minimumFractionDigits:0,maximumFractionDigits:2});let h;switch(c){case m_:u===1?h=t.formatMessage(or.bannerTitleForSingleMonth,{cost:g,planName:n}):h=t.formatMessage(or.bannerTitleForPluralMonths,{cost:g,num_months:u,planName:n});break;case CG:u===1?h=t.formatMessage(or.bannerTitleForSingleYear,{cost:g,planName:n}):h=t.formatMessage(or.bannerTitleForPluralYears,{cost:g,num_years:u,planName:n});break;case wG:throw new Error("Period 'hour' is not supported")}return h}}function f5e(t,e,s,n){var m,p;const{duration:o}=s,a=cf(e.currency),i=o?o.period:m_,l=o?o.num_periods:1,c=(p=(m=a.code.defaultMessage)==null?void 0:m.toString())!=null?p:kp,u=kG(s,n),d=t.formatNumber(u,{style:"currency",currency:c,minimumFractionDigits:0,maximumFractionDigits:2});let f;switch(i){case m_:l===1?f=t.formatMessage(or.bannerContentForSingleMonth,{cost:d}):f=t.formatMessage(or.bannerContentForPluralMonths,{num_months:l,cost:d});break;case CG:l===1?f=t.formatMessage(or.bannerContentForSingleYear,{cost:d}):f=t.formatMessage(or.bannerContentForPluralYears,{num_years:l,cost:d});break;case wG:throw new Error("Period 'hour' is not supported")}return f}const or=Ne({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),Uo=window.localStorage,bI=Zt(Vs(()=>{var s;const t=(s=Uo==null?void 0:Uo.getItem(Be.NoAuthBannerDisclaimerClientThreadId))!=null?s:null,e=(Uo==null?void 0:Uo.getItem(Be.NoAuthHasAcceptedFooterDisclaimer))==="true";return{bannerDisclaimerClientThreadId:t,hasAcceptedFooterDisclaimer:e}})),TG={updateBannerDisclaimerClientThreadId(t){bI.setState(e=>{e.bannerDisclaimerClientThreadId=t}),Uo==null||Uo.setItem(Be.NoAuthBannerDisclaimerClientThreadId,t)},updateHasAcceptedFooterDisclaimer(){bI.setState(t=>{t.hasAcceptedFooterDisclaimer=!0}),Uo==null||Uo.setItem(Be.NoAuthHasAcceptedFooterDisclaimer,"true")}},EG=ue(Ce,"6e8e3f",20,20),m5e=t=>Ee(t,"1639821169"),p5e=t=>Ee(t,"1831960162"),Jb=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx("div",{className:"pointer-events-auto",children:s}),e[0]=s,e[1]=n):n=e[1],n};function g5e({clientThreadId:t}){const e=vw(t);return e!=null?r.jsx(h5e,{clientThreadId:t,gizmoId:e}):r.jsx(MG,{clientThreadId:t})}function h5e({clientThreadId:t,gizmoId:e}){const s=vi(e).data,n=Qe(t,Se.getThreadCreateTime),o=(s==null?void 0:s.gizmo.updated_at)!=null?new Date(s.gizmo.updated_at):void 0;return(s==null?void 0:s.gizmo.gizmo_type)===u1.PROJECT||(s==null?void 0:s.gizmo.short_url)==null||o==null||n==null||o<=n?r.jsx(MG,{clientThreadId:t,gizmoResource:s}):r.jsxs("div",{className:"text-token-text-tertiary",children:[r.jsx(EG,{className:"text-token-secondary me-1 mb-1 inline-block h-4 w-4 stroke-0"}),r.jsx(j,U(T({},Ys.outdatedGptDisclaimer),{values:{link:a=>r.jsx(Ia,{to:s9(s.gizmo.short_url),className:"underline",children:a},"gizmo-link-".concat(s.gizmo.short_url)),bold:a=>r.jsx("span",{className:"text-token-secondary font-semibold",children:a},"gizmo-bold-".concat(s.gizmo.short_url))}}))]})}function MG({clientThreadId:t,gizmoResource:e}){var f,m,p,g;const s=G(),n=ct(s),o=fs(),a=!ut(),i=pi.useStore(),l=Qe(t,Se.hasUserMessage),c=oe(()=>$Z(s));if(n!=null&&n.isWorkspaceAccount()){if(o==null)return null;const h=(g=(p=(f=o.isK12)==null?void 0:f.call(o))!=null?p:(m=n==null?void 0:n.isK12)==null?void 0:m.call(n))!=null?g:!1;if(Ee(s,"2462890004"))return r.jsx(Jb,{children:o.name!=null?r.jsx(j,U(T({},Ys.earlyAccessBusinessDisclaimer),{values:{workspaceName:o.name}})):r.jsx(j,T({},Ys.earlyAccessBusinessDisclaimerNoName))});const _=o.data.ekmConfig!=null;return r.jsx(Jb,{children:_?o.name!=null?r.jsx(j,U(T({},h?Ys.k12BusinessDisclaimerWithEncryption:Ys.businessDisclaimerWithEncryption),{values:{workspaceName:o.name}})):r.jsx(j,T({},h?Ys.k12BusinessDisclaimerWithEncryptionNoName:Ys.businessDisclaimerWithEncryptionNoName)):o.name!=null?r.jsx(j,U(T({},h?Ys.k12BusinessDisclaimer:Ys.businessDisclaimer),{values:{workspaceName:o.name}})):r.jsx(j,T({},h?Ys.k12BusinessDisclaimerNoName:Ys.businessDisclaimerNoName))})}if(a&&!l){const _=Xe(s,"1677443372").get("is_disclaimer_optimized",!1);return r.jsx(SE,{clientThreadId:t,isDisclaimerOptimized:_})}const u=Vw(s,n);let d=Ys.mayProduceInaccurateInformation;return p5e(s)||!(c!=null&&c.is_adult)&&m5e(s)?d=Ys.mayProduceInaccurateInformationAIService:u&&(d=Ys.mayProduceInaccurateInformationWithCookieConsent),r.jsx(Jb,{children:r.jsx(j,U(T({},d),{values:{cookiePreferencesLink:h=>r.jsx("a",{onClick:_=>{_.preventDefault(),B.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!0}),i.openModal()},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:h})}}))})}function SE({clientThreadId:t,variant:e="default",isDisclaimerOptimized:s=!1}){const n=G(),o=ct(n),{country:a}=ef();let i=e==="default"?a==="KR"?Ys.mayProduceInaccurateInformationNoAuthKorea:Ys.mayProduceInaccurateInformationNoAuthV2:a==="KR"?Ys.agreeToTermsNoAuthKorea:Ys.agreeToTermsNoAuthV2;const l=pi.useStore();Vw(n,o)&&(i=e==="default"?a==="KR"?Ys.mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:Ys.mayProduceInaccurateInformationNoAuthV2WithCookieConsent:a==="KR"?Ys.agreeToTermsNoAuthKoreaWithCookieConsent:Ys.agreeToTermsNoAuthV2WithCookieConsent),x.useEffect(()=>()=>{Se.hasUserMessage(Tt(t))&&TG.updateHasAcceptedFooterDisclaimer()},[t]);const c=z(s?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline");return r.jsx("span",{className:z("pointer-events-auto",s?"text-token-text-secondary px-2 text-xs leading-3.5":"text-sm",e==="byContinuing"||s?void 0:"leading-none"),children:r.jsx(j,U(T({},i),{values:{privacyLink:u=>r.jsx("a",{href:"https://openai.com/privacy",target:"_blank",className:c,onClick:()=>{pt.logEvent("chatgpt_footer_disclaimer_privacy_link_clicked"),B.logEvent("Footer Disclaimer Privacy Link Clicked")},rel:"noreferrer",children:u},"privacy_link"),termsLink:u=>r.jsx("a",{href:"https://openai.com/terms",target:"_blank",className:c,onClick:()=>{pt.logEvent("chatgpt_footer_disclaimer_terms_link_clicked"),B.logEvent("Footer Disclaimer Terms Link Clicked")},rel:"noreferrer",children:u},"terms_link"),koreaAddendumLink:u=>r.jsx("a",{href:"https://openai.com/ko/policies/kr-privacy-policy-addendum",target:"_blank",className:c,onClick:()=>{pt.logEvent("chatgpt_footer_disclaimer_korea_addendum_link_clicked"),B.logEvent("Footer Disclaimer Korea Addendum Link Clicked")},rel:"noreferrer",children:u},"addendum_link"),cookiePreferencesLink:u=>r.jsx("a",{onClick:d=>{d.preventDefault(),l.openModal(),B.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!1})},className:z(c,"cursor-pointer"),children:u},"cookie_preferences_link")}}))})}const Ys=Ne({mayProduceInaccurateInformation:{id:"thread.chatgptMayProduceInaccurateInformation-oct-30",defaultMessage:"ChatGPT can make mistakes. Check important info."},mayProduceInaccurateInformationAIService:{id:"thread.chatgptMayProduceInaccurateInformationAIService-dec-16",defaultMessage:"ChatGPT is AI and can make mistakes. Check important info"},mayProduceInaccurateInformationWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationWithCookieConsent-may-12",defaultMessage:"ChatGPT can make mistakes. Check important info. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthV2:{id:"thread.chatgptMayProduceInaccurateInformationNoAuth-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},agreeToTermsNoAuthV2:{id:"thread.agreeToTermsNoAuth-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},mayProduceInaccurateInformationNoAuthV2WithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthV2WithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthV2WithCookieConsent:{id:"thread.agreeToTermsNoAuthV2WithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthKorea:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKorea-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},agreeToTermsNoAuthKorea:{id:"thread.agreeToTermsNoAuthKorea-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthKoreaWithCookieConsent:{id:"thread.agreeToTermsNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},businessDisclaimer:{id:"thread.businessDisclaimer-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},k12BusinessDisclaimer:{id:"thread.k12BusinessDisclaimer-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},businessDisclaimerNoName:{id:"thread.businessDisclaimerNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models."},k12BusinessDisclaimerNoName:{id:"thread.k12BusinessDisclaimerNoName-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use your workspace data to train its models."},businessDisclaimerWithEncryption:{id:"thread.businessDisclaimerWithEncryption-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},k12BusinessDisclaimerWithEncryption:{id:"thread.k12BusinessDisclaimerWithEncryption-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},businessDisclaimerWithEncryptionNoName:{id:"thread.businessDisclaimerWithEncryptionNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},k12BusinessDisclaimerWithEncryptionNoName:{id:"thread.k12BusinessDisclaimerWithEncryptionNoName-dec-09-24",defaultMessage:"ChatGPT for Teachers can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},outdatedGptDisclaimer:{id:"thread.outdatedGptDisclaimer.0",defaultMessage:"<bold>New version of GPT available</bold> - Continue chatting to use the old version, or start a <link>new chat</link> for the latest version."},earlyAccessBusinessDisclaimer:{id:"thread.earlyAccessBusinessDisclaimer",defaultMessage:"ChatGPT can make mistakes. OpenAI uses {workspaceName} workspace data to train its models."},earlyAccessBusinessDisclaimerNoName:{id:"thread.earlyAccessBusinessDisclaimerNoName",defaultMessage:"ChatGPT can make mistakes. OpenAI uses your workspace data to train its models."}});function Bit({threadId:t}){const e=G(),s=ne(),[n,o]=x.useState(!1);x.useEffect(()=>{TG.updateBannerDisclaimerClientThreadId(t),pt.logEvent("chatgpt_unauthenticated_legal_banner"),B.logEvent("Unauthenticated Legal Banner",{threadId:t})},[t]);const a=SR(e)?ai.bannerTermsDisclaimer:ai.bannerTermsDisclaimerSafetyAndAbuse;return n?null:r.jsx(_s,{onDismiss:()=>{o(!0),B.logEventWithStatsig("Unauthenticated Legal Banner Dismissed Clicked","chatgpt_unauthenticated_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(SE,{clientThreadId:t}),r.jsx("br",{}),s.formatMessage(a,{learnMoreLink:i=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{pt.logEvent("chatgpt_unauthenticated_banner_learn_more_clicked"),B.logEvent("Unauthenticated Signup Banner Learn More Clicked",{threadId:t})},children:i})})]})})}function Uit({threadId:t,showLogin:e=!0}){const s=G(),n=ne(),a=Xe(s,"2118136551").get("sign_up_button_has_the_word_free",!0);return x.useEffect(()=>{pt.logEvent("chatgpt_unauthenticated_signup_banner"),B.logEvent("Unauthenticated Signup Banner",{threadId:t})},[t]),r.jsx(_s,{content:n.formatMessage(ai.bannerSignup),onPrimaryCtaClick:()=>{os(s,{fallbackScreenHint:"signup",callback:i=>{pt.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),B.logSignUpButtonClicked({location:"Chat Stage Signup Banner",provider:i},Lt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})},primaryCtaText:n.formatMessage(a?ai.bannerSignupButtonWithFree:ai.bannerSignupButton),onSecondaryCtaClick:e?()=>{os(s,{fallbackScreenHint:"login",callback:i=>{pt.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),B.logLogInButtonClicked({location:"Chat Stage Signup Banner",provider:i},Lt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?n.formatMessage($t.logInButtonText):void 0})}function $it({threadId:t,showSignUp:e}){const s=G(),n=ne(),a=Xe(s,"2118136551").get("sign_up_button_has_the_word_free",!0);return x.useEffect(()=>{pt.logEvent("chatgpt_unauthenticated_login_banner"),B.logEvent("Unauthenticated Login Banner",{threadId:t})},[t]),r.jsx(_s,{content:n.formatMessage(ai.bannerSignup),onPrimaryCtaClick:()=>{os(s,{fallbackScreenHint:"login",callback:i=>{pt.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),B.logLogInButtonClicked({location:"Chat Stage Login Banner",provider:i},Lt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})},primaryCtaText:n.formatMessage($t.logInButtonText),onSecondaryCtaClick:e?()=>{os(s,{fallbackScreenHint:"signup",callback:i=>{pt.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),B.logSignUpButtonClicked({location:"Chat Stage Login Banner",provider:i},Lt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?a?n.formatMessage(ai.bannerSignupButtonWithFree):n.formatMessage(ai.bannerSignupButton):void 0})}const ai=Ne({bannerTermsDisclaimer:{id:"bannerTermsDisclaimer",defaultMessage:"Don't share sensitive info. Chats may be reviewed and used to train our models. <learnMoreLink>Learn more</learnMoreLink>"},bannerTermsDisclaimerSafetyAndAbuse:{id:"pDsoLk",defaultMessage:"Don't share sensitive information. Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"},bannerSignup:{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."},bannerSignupButton:{id:"hedgehog.banner_signup_button",defaultMessage:"Sign up"},bannerSignupButtonWithFree:{id:"xL5gsL",defaultMessage:"Sign up for free"}});function Hit({threadId:t}){const e=G(),s=ne(),{isOpen:n,close:o,markViewedInClientThreadId:a,viewedInClientThreadId:i}=sD(),l=_5e(e),c=Qe(t,Se.hasUserMessage);return x.useEffect(()=>{i?Rt(i)!==Rt(t)&&o():(a(t),B.logEventWithStatsig("New User Legal Banner Shown","chatgpt_new_user_legal_banner_shown",{threadId:t}))},[t,i,o,a,l]),x.useEffect(()=>{!l||!n||!c||i&&Rt(i)!==Rt(t)||(_t(e,We.Onboarding),o())},[e,o,c,l,n,t,i]),n?r.jsx(_s,{onDismiss:()=>{l&&_t(e,We.Onboarding),o(),B.logEventWithStatsig("New User Legal Banner Dismissed Clicked","chatgpt_new_user_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(SE,{clientThreadId:t}),r.jsx("br",{}),s.formatMessage(ai.bannerTermsDisclaimer,{learnMoreLink:u=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{B.logEventWithStatsig("New User Legal Banner Learn More Clicked","chatgpt_new_user_legal_banner_learn_more_clicked",{threadId:t})},children:u})})]})}):null}function _5e(t){return Xe(t,"109457",{disableExposureLog:!0}).get("is_new_user_banner_disclaimer_enabled",!1)}const vI={logCouponCheck(t,e){$e.count(He.TEAMS,"promo_campaign.web.check_coupon",[{key:"coupon",value:t},{key:"outcome",value:e}]),B.logEvent("Promo Campaign: Check Coupon",{coupon:t,outcome:e})},logCouponApplied(t){$e.count(He.TEAMS,"promo_campaign.web.coupon_applied",[{key:"coupon",value:t}]),B.logEvent("Promo Campaign: Coupon Applied",{coupon:t})}},x5e=t=>{var e,s,n,o,a;return U(T({},t),{redeemed_at:(e=t.redeemed_at)!=null?e:null,user_redeemed_at:(s=t.user_redeemed_at)!=null?s:null,workspace_redeemed_at:(n=t.workspace_redeemed_at)!=null?n:null,promotion_length_days:(o=t.promotion_length_days)!=null?o:null,expires_at:(a=t.expires_at)!=null?a:null})},y5e=t=>({coupon:t.coupon,state:t.state,redemption:t.redemption?x5e(t.redemption):null}),b5e=(t,e)=>{"use forget";const s=F.c(16),n=!!e;let o;s[0]!==t||s[1]!==n?(o=["promoCampaignEligibility",t,n],s[0]=t,s[1]=n,s[2]=o):o=s[2];let a;s[3]!==t||s[4]!==e?(a=async()=>{const f=await de.safeGet("/promo_campaign/check_coupon",{parameters:{query:{coupon:t,is_coupon_from_query_param:e}},authOption:is.SendIfAvailable});return y5e(f)},s[3]=t,s[4]=e,s[5]=a):a=s[5];const i=!!t;let l;s[6]!==o||s[7]!==a||s[8]!==i?(l={queryKey:o,queryFn:a,enabled:i},s[6]=o,s[7]=a,s[8]=i,s[9]=l):l=s[9];const c=dt(l);let u,d;return s[10]!==t||s[11]!==c.data||s[12]!==c.isError||s[13]!==c.isSuccess?(u=()=>{c.isSuccess&&c.data?vI.logCouponCheck(t,c.data.state):c.isError&&vI.logCouponCheck(t,"error")},d=[c.isSuccess,c.isError,c.data,t],s[10]=t,s[11]=c.data,s[12]=c.isError,s[13]=c.isSuccess,s[14]=u,s[15]=d):(u=s[14],d=s[15]),x.useEffect(u,d),c},gS=25,v5e=gS/100,S5e="team_seats_promo";function NG(t){return t==null||!Number.isFinite(t)?null:Math.ceil(t*v5e)}function Git(t){const{data:e}=b5e(S5e),s=(e==null?void 0:e.state)==="eligible",n=x.useMemo(()=>NG(t),[t]);return x.useMemo(()=>{const o=e!=null?e:null,a=s&&n!=null?n:null;return{eligible:s,seatThresholdGap:a,promoEligibility:o}},[e,s,n])}function Vit(){const t=G(),e=yt(),{data:s}=Dw(),n=s==null?void 0:s.seats_entitled,o=x.useMemo(()=>NG(n),[n]);return x.useEffect(()=>{$e.count(He.TEAMS,"teams.web.teamSeatsPromo.impressionAnnouncementBanner"),B.logEvent("Teams: Show Team Seats Promo Announcement Banner"),B.logUpsellOrModalEvent(ks,{eventId:"team_seats_promo_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),o==null?null:r.jsx(_s,{icon:r.jsx(dD,{className:"h-6 w-6 text-[#4338CA]","aria-hidden":"true"}),title:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.title.withThreshold",defaultMessage:"Add {seatsCount, plural, one {# seat} other {# seats}}, get {discount}% off",values:{discount:gS,seatsCount:o}}),content:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.content.withThreshold",defaultMessage:"Invite team members to work with you in ChatGPT and save {discount}% for a month when you add {seatsCount, plural, one {# seat} other {# seats}}.",values:{discount:gS,seatsCount:o}}),primaryCtaColor:"purple",className:"border-[#DDD8FF] bg-[#F2F0FF]",primaryCtaText:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.primaryCta",defaultMessage:"Add Seats"}),onPrimaryCtaClick:()=>{$e.count(He.TEAMS,"teams.web.teamSeatsPromo.clickAnnouncementBannerPrimaryCta"),B.logEvent("Teams: Click Team Seats Promo Announcement Banner"),_t(t,We.hasSeenTeamSeatsPromoAnnouncement),e("/admin/billing")},onDismiss:()=>{$e.count(He.TEAMS,"teams.web.teamSeatsPromo.dismissAnnouncementBanner"),B.logEvent("Teams: Close Team Seats Promo Announcement Banner"),_t(t,We.hasSeenTeamSeatsPromoAnnouncement)}})}function C5e(t){return Ee(t,"878458344")}const zit=t=>{const e=G(),s=C5e(e),{eligible:n}=Ct(We.hasSeenTeamsContextualAnswersUpsell),o=xs(),a=o!=null&&p6(o),l=!!Qe(t,u=>Se.findNode(u,d=>d.message.author.role===ot.Tool&&d.message.author.name===Qs.MYFILES_BROWSER));return s&&n&&a&&l};function Wit(){const t=G(),e=yt();return x.useEffect(()=>{$e.count(He.TEAMS,"teams.web.caUpsell.impressionAnnouncementBanner"),B.logEvent("Teams: Show CA Upsell Announcement Banner"),B.logUpsellOrModalEvent(ks,{eventId:"teams_contextual_upsell_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_s,{title:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.title",defaultMessage:"Connect to Google Drive directly with the Business plan"}),content:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.content",defaultMessage:"Summarize, analyze, and get smarter answers from your teams docs."}),primaryCtaText:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.primaryCtaText",defaultMessage:"Get Business"}),onPrimaryCtaClick:()=>{$e.count(He.TEAMS,"teams.web.caUpsell.clickAnnouncementBannerPrimaryCta"),B.logEvent("Teams: Click CA Upsell Announcement Banner"),_t(t,We.hasSeenTeamsContextualAnswersUpsell),e({hash:Pp,search:window.location.search},{state:{[xx]:"CA upsell announcement banner"}})},onDismiss:()=>{$e.count(He.TEAMS,"teams.web.caUpsell.dismissAnnouncementBanner"),B.logEvent("Teams: Close CA Upsell Announcement Banner"),_t(t,We.hasSeenTeamsContextualAnswersUpsell)}})}const SI=We.hasSeenAgentModeAnnouncementBanner,qit=t=>Ee(t,"785520609");function Kit(){const t=G(),e=jo();return x.useEffect(()=>{B.logUpsellOrModalEvent(ks,{eventId:"agent_mode_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_s,{title:r.jsx(j,{id:"VjCFGa",defaultMessage:"ChatGPT can now do more work for you"}),content:r.jsx(j,{id:"idZZDZ",defaultMessage:"Agent mode can do even more complex tasks, like spreadsheets, research, and reservations, all on its own."}),primaryCtaText:r.jsx(j,{id:"xT8iIw",defaultMessage:"Try agent mode"}),onPrimaryCtaClick:()=>{_t(t,SI),e(Pn)},onDismiss:()=>{_t(t,SI)}})}function Yit({onDismissSideEffect:t,onPrimaryCtaClickSideEffect:e}){var u;const s=ne(),n=yt(),o=Gs(),{locale:a,usedDefault:i}=AG((u=o.cfIpCity)!=null?u:""),l=s.formatMessage(T5e[a]),c=s.formatMessage({id:"language-upsell-banner.query",defaultMessage:"Talk to me in {language}"},{language:l});return x.useEffect(()=>{B.logEventWithStatsig("Language Upsell Banner Shown","chatgpt_web_language_upsell_banner_shown",{inferred_locale:a,used_default:i})},[a,i]),r.jsx(_s,{title:s.formatMessage({id:"language-upsell-banner.title",defaultMessage:"{hello} Want to chat in {language}?"},{hello:k5e[a],language:l}),content:i?s.formatMessage({id:"language-upsell-banner.content.default",defaultMessage:"ChatGPT speaks many languages. Give it a try, just by typing."}):s.formatMessage({id:"language-upsell-banner.content.language",defaultMessage:"ChatGPT speaks your local language  give it a try, just by typing."}),primaryCtaText:s.formatMessage({id:"language-upsell-banner.primary-cta",defaultMessage:"Try it"}),onPrimaryCtaClick:()=>{e(),n("/?q=".concat(encodeURIComponent(c)))},onDismiss:t})}const w5e=Bt(()=>Cl(Be.HasManuallyClosedLanguageUpsellBanner,()=>!1,{coerceStoredValue:Ii}));function Qit(t){var c,u;const e=G(),s=Qe(t,(c=Se.getIsNewConversation)!=null?c:(()=>!1)),n=Gs(),{country:o}=ef(),a=Xe(e,"723297404"),i=n.locale,{locale:l}=AG((u=n.cfIpCity)!=null?u:"");return oe(()=>s&&(o==null?void 0:o.toUpperCase())==="IN"&&i!==l&&a.get("show_india_language_upsell_banner",!1)&&!w5e(e))}function AG(t){return t in CI?{locale:CI[t],usedDefault:!1}:{locale:"hi-IN",usedDefault:!0}}const CI={Bengaluru:"kn-IN",Mumbai:"mr-IN",Hyderabad:"te-IN",Chennai:"ta-IN",Pune:"mr-IN","New Delhi":"hi-IN",Delhi:"hi-IN",Kolkata:"bn-BD",Ahmedabad:"gu-IN",Kochi:"ml",Jaipur:"hi-IN",Lucknow:"hi-IN",Indore:"hi-IN",Patna:"hi-IN",Guwahati:"as",Coimbatore:"ta-IN",Chandigarh:"pa",Bhopal:"hi-IN",Surat:"gu-IN",Bhubaneswar:"or",Gurugram:"hi-IN",Nagpur:"mr-IN",Noida:"hi-IN",Ludhiana:"pa",Dehradun:"hi-IN",Thrissur:"ml",Agra:"hi-IN",Visakhapatnam:"te-IN",Vadodara:"gu-IN",Thiruvananthapuram:"ml",Mangalore:"kn-IN",Ranchi:"hi-IN",Ghaziabad:"hi-IN",Kanpur:"hi-IN",Vijayawada:"te-IN",Madurai:"ta-IN",Varanasi:"hi-IN",Srinagar:"hi-IN",Salem:"ta-IN",Faridabad:"hi-IN",Jodhpur:"hi-IN",Raipur:"hi-IN",Jammu:"hi-IN",Sopur:"hi-IN",Nashik:"mr-IN","Navi Mumbai":"mr-IN",Rajkot:"gu-IN",Prayagraj:"hi-IN",Meerut:"hi-IN",Thane:"mr-IN",Kozhikode:"ml",Jabalpur:"hi-IN"},k5e={"kn-IN":"!","mr-IN":"!","te-IN":"!","ta-IN":"!","hi-IN":"!","bn-BD":"!","gu-IN":"!",ml:"!",as:"!",pa:"  !",or:"!"},T5e=Ne({"kn-IN":{id:"language-upsell-banner.locale.kn",defaultMessage:"Kannada"},"mr-IN":{id:"language-upsell-banner.locale.mr",defaultMessage:"Marathi"},"te-IN":{id:"language-upsell-banner.locale.te",defaultMessage:"Telugu"},"ta-IN":{id:"language-upsell-banner.locale.ta",defaultMessage:"Tamil"},"hi-IN":{id:"language-upsell-banner.locale.hi",defaultMessage:"Hindi"},"bn-BD":{id:"language-upsell-banner.locale.bn",defaultMessage:"Bengali"},"gu-IN":{id:"language-upsell-banner.locale.gu",defaultMessage:"Gujarati"},ml:{id:"language-upsell-banner.locale.ml",defaultMessage:"Malayalam"},as:{id:"language-upsell-banner.locale.as",defaultMessage:"Assamese"},pa:{id:"language-upsell-banner.locale.pa",defaultMessage:"Punjabi"},or:{id:"language-upsell-banner.locale.or",defaultMessage:"Odia"}});function Jit(t){const e=G();return oe(()=>FC(e,Cs(Et(e,t)).id))}function Zit(t){return null}const E5e=1;function IG(){const[t,e]=yi(Be.LastSeenNoAuthTrialsBannerAt,null,o=>o!=null&&typeof o=="number"),s=t==null||mo(Date.now(),ta(t))>=E5e;return{markBannerSeen:()=>{e(Wo(new Date)),localStorage.setItem(Be.LastSeenNoAuthTrialsBannerAt,JSON.stringify(Wo(new Date)))},canBeSeen:s}}function Xit(){const t=G(),e=!ut(),{canBeSeen:s}=IG();return e&&s&&Xe(t,"1074962980").get("is_plus_1_month_free_enabled",!1)}function elt(){const t=yt(),{markBannerSeen:e}=IG();return x.useEffect(()=>{B.logEventWithStatsig("No Auth Trials Banner Shown","chatgpt_no_auth_trials_banner_shown"),B.logUpsellOrModalEvent(ks,{eventId:"no_auth_trials_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_s,{icon:r.jsx("img",{src:"https://openaiassets.blob.core.windows.net/$web/chatgpt/filled-plus-icon.png",alt:"",style:{width:24,height:24}}),onPrimaryCtaClick:()=>{B.logEventWithStatsig("No Auth Trials Banner Try Plus free Button Clicked","chatgpt_no_auth_trials_banner_try_plus_free_button_clicked"),sessionStorage.setItem("poijcwa","jwoid"),an(t,"No auth trials banner",void 0,void 0,AO),e()},primaryCtaText:r.jsx(j,T({},$t.tryPlusTrial)),onDismiss:()=>{B.logEventWithStatsig("No Auth Trials Banner Dismissed","chatgpt_no_auth_trials_banner_dismissed"),e()},title:r.jsx(j,T({},wI.noAuthTrialUpsellTitle)),content:r.jsx(j,T({},wI.noAuthTrialUpsellDescription))})}const wI=Ne({noAuthTrialUpsellTitle:{id:"sSjBA2",defaultMessage:"Get better, faster responses for free"},noAuthTrialUpsellDescription:{id:"4yEtmJ",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}}),kI=We.DesktopOperatorAnnouncement;function tlt(){const t=G();x.useEffect(()=>{B.logEventWithStatsig("Operator Announcement Banner Shown","chatgpt_operator_announcement_banner_shown"),B.logUpsellOrModalEvent(ks,{eventId:"operator_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const e=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,{id:"/bPUPL",defaultMessage:"Delegate daily tasks with Operator"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"ODMLVJ",defaultMessage:"With the Pro plan, you can try the Operator research preview  an agent that browses the web to handle tasks for you."})})]});return r.jsx(_s,{onPrimaryCtaClick:()=>{_t(t,kI),B.logEventWithStatsig("Operator Announcement Banner Try Operator Button Clicked","chatgpt_operator_announcement_banner_try_operator_button_clicked"),window.open("".concat(HZ,"?utm_source=chatgpt"),"_blank")},primaryCtaText:r.jsx(j,{id:"eDZIyV",defaultMessage:"Try Operator"}),onDismiss:()=>{_t(t,kI),B.logEventWithStatsig("Operator Announcement Banner Dismissed","chatgpt_operator_announcement_banner_dismissed")},content:e})}const M5e=20,N5e=7;function slt(){const t=yt(),e=G();return x.useEffect(()=>{B.logEventWithStatsig("Plus Upsell Banner Shown","chatgpt_plus_upsell_banner_shown"),B.logUpsellOrModalEvent(ks,{eventId:"plus_upsell_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_s,{onPrimaryCtaClick:()=>{B.logEventWithStatsig("Plus Upsell Banner Get Plus Button Clicked","chatgpt_plus_upsell_banner_get_plus_button_clicked"),an(t,"Plus upsell banner"),TI()},primaryCtaText:r.jsx(j,T({},Rp(e))),onDismiss:()=>{B.logEventWithStatsig("Plus Upsell Banner Dismissed","chatgpt_plus_upsell_banner_dismissed"),TI()},title:r.jsx(j,{id:"CEHXxQ",defaultMessage:"Unlock more with Plus"}),content:r.jsx(j,{id:"s+Afdr",defaultMessage:"ChatGPT Plus gives you higher limits, smarter models, and Sora for video."})})}const jG=Zt(Vs(()=>({lastSeenPlusUpsellBannerAt:A5e()})));function TI(){const t=new Date;jG.setState(e=>{e.lastSeenPlusUpsellBannerAt=t}),localStorage.setItem(Be.LastSeenPlusUpsellBannerAt,String(Wo(new Date)))}function A5e(){const t=localStorage.getItem(Be.LastSeenPlusUpsellBannerAt);return t?ta(Number(t)):null}function nlt(){const t=Ax(Iie),e=jG(i=>i.lastSeenPlusUpsellBannerAt),s=fs(),n=!!(s!=null&&s.isFree()&&(s!=null&&s.features.includes("plus_upsell"))),o=t>=M5e,a=e==null||mo(Date.now(),e)>=N5e;return n&&o&&a}const I5e=({className:t,children:e})=>r.jsx(gt.div,{className:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.1,delay:0}},transition:{type:"tween",duration:.3,delay:.2},children:e});function olt(t){"use forget";const e=F.c(6),{canContinue:s,onContinueGenerating:n}=t;let o;e[0]!==n?(o=c=>{n(c),kk()},e[0]=n,e[1]=o):o=e[1];const a=o;let i=null;if(s){let c;e[2]!==a?(c=r.jsx(P5e,{onHandleContinueGenerating:a}),e[2]=a,e[3]=c):c=e[3],i=c}if(!i)return i;let l;return e[4]!==i?(l=r.jsx("div",{className:"flex h-full w-full items-center justify-end gap-0 py-4 md:gap-2",children:i}),e[4]=i,e[5]=l):l=e[5],l}function j5e({className:t}){return r.jsx(zU,{className:z("-rotate-180",t)})}const P5e=t=>{"use forget";const e=F.c(3),{onHandleContinueGenerating:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(j,T({},Ja.continueGenerating)),e[0]=n):n=e[0];let o;return e[1]!==s?(o=r.jsx(I5e,{children:r.jsx(ke,{as:"button",color:"secondary",onClick:s,className:"py-2 whitespace-nowrap",icon:j5e,size:"small",children:n})}),e[1]=s,e[2]=o):o=e[2],o},PG={small:24,medium:36,large:48},R5e="small",O5e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),L5e=t=>t&&O5e(PG,t)?t:R5e,RG=({bannerIconImageUrl:t,bannerIconSize:e,icon:s})=>{if(s)return s;if(!t)return null;const n=PG[L5e(e)];return r.jsx("img",{src:t,alt:"",style:{width:n,height:n,objectFit:"contain"}})},sp=t=>{"use forget";var M,N;const e=F.c(34),{actions:s,title:n,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,primaryButtonClassName:c,secondaryButtonColor:u,bannerIconImageUrl:d,bannerIconSize:f,icon:m}=t,p=ne();let g;e[0]!==s||e[1]!==p?(g=(M=s==null?void 0:s.primaryAction)!=null&&M.text?typeof s.primaryAction.text=="string"?s.primaryAction.text:p.formatMessage(s.primaryAction.text):void 0,e[0]=s,e[1]=p,e[2]=g):g=e[2];const h=g;let _;e[3]!==s||e[4]!==p?(_=(N=s==null?void 0:s.secondaryAction)!=null&&N.text?typeof s.secondaryAction.text=="string"?s.secondaryAction.text:p.formatMessage(s.secondaryAction.text):void 0,e[3]=s,e[4]=p,e[5]=_):_=e[5];const b=_,y=s==null?void 0:s.customActions;let v;e[6]!==d||e[7]!==f||e[8]!==m?(v=RG({icon:m,bannerIconImageUrl:d,bannerIconSize:f}),e[6]=d,e[7]=f,e[8]=m,e[9]=v):v=e[9];let S;e[10]!==o?(S=o?r.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):null,e[10]=o,e[11]=S):S=e[11];let C;e[12]!==a||e[13]!==i?(C=a?()=>{i==null||i(),a()}:void 0,e[12]=a,e[13]=i,e[14]=C):C=e[14];let w;e[15]!==(s==null?void 0:s.primaryAction)||e[16]!==i?(w=()=>{var A,I;i==null||i(),(I=(A=s==null?void 0:s.primaryAction)==null?void 0:A.onClick)==null||I.call(A)},e[15]=s==null?void 0:s.primaryAction,e[16]=i,e[17]=w):w=e[17];let k;e[18]!==(s==null?void 0:s.secondaryAction)||e[19]!==i?(k=()=>{var A,I;i==null||i(),(I=(A=s==null?void 0:s.secondaryAction)==null?void 0:A.onClick)==null||I.call(A)},e[18]=s==null?void 0:s.secondaryAction,e[19]=i,e[20]=k):k=e[20];let E;return e[21]!==y||e[22]!==c||e[23]!==l||e[24]!==h||e[25]!==u||e[26]!==b||e[27]!==v||e[28]!==S||e[29]!==C||e[30]!==w||e[31]!==k||e[32]!==n?(E=r.jsx(_s,{icon:v,title:n,content:S,onDismiss:C,customCtas:y,primaryCtaText:h,primaryCtaColor:l,primaryCtaClassName:c,onPrimaryCtaClick:w,secondaryCtaText:b,secondaryCtaColor:u,onSecondaryCtaClick:k,isElevated:!0}),e[21]=y,e[22]=c,e[23]=l,e[24]=h,e[25]=u,e[26]=b,e[27]=v,e[28]=S,e[29]=C,e[30]=w,e[31]=k,e[32]=n,e[33]=E):E=e[33],E},D5e=t=>Jo(t.trim());function F5e(t){"use forget";const e=F.c(50),{onThennableClick:s,text:n}=t,o=s!=null?s:D5e,a=ne();let i;e[0]!==a||e[1]!==n?(i=typeof n=="string"?n:a.formatMessage(n),e[0]=a,e[1]=n,e[2]=i):i=e[2];const l=i;let c;e[3]!==a?(c=a.formatMessage(gh.copy),e[3]=a,e[4]=c):c=e[4];const u=c;let d;e[5]!==a?(d=a.formatMessage(gh.copied),e[5]=a,e[6]=d):d=e[6];const f=d,[m,p]=x.useState(!1),g=x.useRef(null),h=x.useRef(null),[_,b]=x.useState();let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{var ee,re,he,fe;const Y=(re=(ee=g.current)==null?void 0:ee.offsetWidth)!=null?re:0,ae=(fe=(he=h.current)==null?void 0:he.offsetWidth)!=null?fe:0,se=Math.max(Y,ae);b(se===0?void 0:se)},e[7]=y):y=e[7];let v;e[8]!==f||e[9]!==u?(v=[u,f],e[8]=f,e[9]=u,e[10]=v):v=e[10],zn(y,v);let S,C;e[11]!==m?(S=()=>{if(!m)return;const Y=window.setTimeout(()=>{p(!1)},5e3);return()=>{window.clearTimeout(Y)}},C=[m],e[11]=m,e[12]=S,e[13]=C):(S=e[12],C=e[13]),x.useEffect(S,C);let w;e[14]!==o||e[15]!==l?(w=()=>{o(l).then(()=>{p(!0)})},e[14]=o,e[15]=l,e[16]=w):w=e[16];const k=w;let E;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=z("flex w-fit flex-row gap-1 text-center"),e[17]=E):E=e[17];let M;e[18]!==l?(M=r.jsx("code",{className:"max-w-[50vw] truncate sm:max-w-[300px] md:max-w-[200px] lg:max-w-[300px]",children:l}),e[18]=l,e[19]=M):M=e[19];let N;e[20]!==k||e[21]!==M?(N=r.jsx(ke,{color:"secondary",className:"w-fit max-w-[40vw] rounded-3xl border px-3 py-2 sm:max-w-[300px]",onClick:k,contentWrapperClassName:"flex justify-between! md:justify-center! w-full",children:M}),e[20]=k,e[21]=M,e[22]=N):N=e[22];const A=m?"primary-inverse":"primary";let I;e[23]!==_?(I=typeof _=="number"?{width:_}:void 0,e[23]=_,e[24]=I):I=e[24];let P;e[25]!==u?(P=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:g,children:u})}),e[25]=u,e[26]=P):P=e[26];let R;e[27]!==f?(R=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:h,children:f})}),e[27]=f,e[28]=R):R=e[28];const O=m?"copied":"copy";let L,D,H,V;e[29]===Symbol.for("react.memo_cache_sentinel")?(L={opacity:0,y:4},D={opacity:1,y:0},H={opacity:0,y:-4},V={duration:.2,ease:"easeInOut"},e[29]=L,e[30]=D,e[31]=H,e[32]=V):(L=e[29],D=e[30],H=e[31],V=e[32]);let q;e[33]!==m?(q=m?r.jsx(j,T({},gh.copied)):r.jsx(j,T({},gh.copy)),e[33]=m,e[34]=q):q=e[34];let W;e[35]!==O||e[36]!==q?(W=r.jsx(Ms,{mode:"wait",initial:!1,children:r.jsx(gt.span,{initial:L,animate:D,exit:H,transition:V,className:"inline-flex whitespace-nowrap",children:q},O)}),e[35]=O,e[36]=q,e[37]=W):W=e[37];let $;e[38]!==I||e[39]!==P||e[40]!==R||e[41]!==W?($=r.jsxs("span",{className:"relative inline-flex justify-center",style:I,children:[P,R,W]}),e[38]=I,e[39]=P,e[40]=R,e[41]=W,e[42]=$):$=e[42];let Z;e[43]!==k||e[44]!==A||e[45]!==$?(Z=r.jsx(ke,{color:A,className:"w-fit px-4 py-2 transition-all duration-200 ease-in-out",onClick:k,contentWrapperClassName:"flex justify-between! lg:justify-center! w-fit min-w-[40px] text-center",children:$}),e[43]=k,e[44]=A,e[45]=$,e[46]=Z):Z=e[46];let K;return e[47]!==N||e[48]!==Z?(K=r.jsxs("div",{className:E,children:[N,Z]}),e[47]=N,e[48]=Z,e[49]=K):K=e[49],K}const gh=Ne({copy:{id:"beacon-banner-copy-to-clipboard.copy",defaultMessage:"Copy"},copied:{id:"beacon-banner-copy-to-clipboard.copied",defaultMessage:"Copied"}});function B5e(t){"use forget";const e=F.c(8),{beaconInfo:s,copyBeaconAction:n,trackBeaconDismissAndClearBeaconUIState:o}=t,{title:a,description:i}=s.ui_info;let l;e[0]!==n.onThennableClick||e[1]!==n.text?(l=r.jsx(F5e,{onThennableClick:n.onThennableClick,text:n.text}),e[0]=n.onThennableClick,e[1]=n.text,e[2]=l):l=e[2];let c;return e[3]!==i||e[4]!==l||e[5]!==a||e[6]!==o?(c=r.jsx(_s,{title:a,content:i,onDismiss:o,customCtas:l,contentClassName:"gap-1!"}),e[3]=i,e[4]=l,e[5]=a,e[6]=o,e[7]=c):c=e[7],c}const U5e={banner:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full items-center justify-between gap-2 rounded-4xl! bg-[rgba(13,13,13,0.90)]! px-4 py-2 dark:bg-[rgba(255,255,255,0.90)]!",triggerTextClassName:"truncate font-medium text-white dark:text-[#0D0D0D]",chevronClassName:"icon-sm shrink-0 text-white dark:text-[#0D0D0D]",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-[256px] max-w-[80vw] min-w-[220px] overflow-hidden rounded-2xl border p-1.5 shadow-lg",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1",itemClassName:"m-0 py-1.5 ps-2.5 pe-0 [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"h-6 w-6 dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-sm font-medium",footerPlacement:"inline",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",showLinkIcon:!1},modal:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full h-11.5 items-center justify-between! gap-3 rounded-2xl! border-token-border-default! bg-token-bg-elevated-primary px-4 py-3 text-start dark:border-token-border-muted dark:bg-token-bg-elevated-secondary",triggerTextClassName:"truncate font-normal font-[14px] text-token-text-tertiary",chevronClassName:"icon-lg shrink-0 text-token-text-secondary",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-full overflow-hidden rounded-2xl border p-1.5 shadow-xl w-[416px] sm:max-w-[416px]",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1 px-1",itemClassName:"m-0 pe-2.5 py-1.5 ps-1.5 dark:ps-2.5 [&>div]:w-fit [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"flex h-6 w-6 items-center justify-center rounded-full dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-base font-semibold",footerPlacement:"below",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",footerBelowClassName:"text-token-text-tertiary leading-4.5 text-center text-[13px]",showLinkIcon:!0}};function $5e(t){"use forget";const e=F.c(6),{dropdownAction:s,formatAction:n}=t;let o;e:{if(!s){let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0],o=i;break e}let a;if(e[1]!==s.action_v2.items||e[2]!==n){let i;e[4]!==n?(i=l=>{const c=n(l);return c?{id:l.id,text:l.text,iconUrl:l.icon_url,action:c}:null},e[4]=n,e[5]=i):i=e[5],a=s.action_v2.items.map(i).filter(H5e),e[1]=s.action_v2.items,e[2]=n,e[3]=a}else a=e[3];o=a}return o}function H5e(t){return t!=null}function G5e(t){"use forget";const e=F.c(11),{iconUrl:s,label:n,className:o,fallbackTextClassName:a}=t;let i;e[0]!==n?(i=n.trim().slice(0,1).toUpperCase(),e[0]=n,e[1]=i):i=e[1];const l=i;let c;e[2]!==o?(c=z("flex items-center justify-center rounded-full",o),e[2]=o,e[3]=c):c=e[3];let u;e[4]!==l||e[5]!==a||e[6]!==s?(u=s?r.jsx("img",{src:s,alt:"",className:"h-4 w-4 object-contain",loading:"eager"}):r.jsx("span",{className:a,children:l}),e[4]=l,e[5]=a,e[6]=s,e[7]=u):u=e[7];let d;return e[8]!==c||e[9]!==u?(d=r.jsx("div",{className:c,"aria-hidden":"true",children:u}),e[8]=c,e[9]=u,e[10]=d):d=e[10],d}function V5e({item:t,beaconInfo:e,beaconClickEventMutation:s,variant:n,onClose:o}){var a,i,l;B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:e.beacon_id,beacon_name:(a=e.beacon_name)!=null?a:"unknown",beacon_type:n,action_id:t.id}),s.mutate({beaconId:e.beacon_id,eventCtaId:t.id}),"onThennableClick"in t.action&&t.action.onThennableClick?t.action.onThennableClick():(l=(i=t.action).onClick)==null||l.call(i),n==="modal"&&o()}function z5e(t){"use forget";var L;const e=F.c(68),{beaconInfo:s,conversationId:n,dropdownAction:o,dropdownItems:a,variant:i,onClose:l}=t,c=i===void 0?"banner":i,u=ne(),d=G();let f;e[0]!==n||e[1]!==d?(f=()=>oi(n,d),e[0]=n,e[1]=d,e[2]=f):f=e[2];const m=xE(f),p=U5e[c];let g=(L=o.action_v2.header_text)!=null?L:void 0;if(g&&typeof g!="string"){let D;e[3]!==u||e[4]!==g?(D=u.formatMessage(g),e[3]=u,e[4]=g,e[5]=D):D=e[5],g=D}let h;e[6]!==m||e[7]!==s||e[8]!==l||e[9]!==c?(h=D=>{V5e({item:D,beaconInfo:s,beaconClickEventMutation:m,variant:c,onClose:l})},e[6]=m,e[7]=s,e[8]=l,e[9]=c,e[10]=h):h=e[10];const _=h;if(a.length===0)return null;const b=p.containerClassName;let y;e[11]!==s||e[12]!==o.action_v2.action_enum||e[13]!==o.id||e[14]!==o.type||e[15]!==c?(y=D=>{var H;D&&B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:s.beacon_id,beacon_name:(H=s.beacon_name)!=null?H:"unknown",beacon_type:c,action_id:o.id,action_type:o.type,action_enum:o.action_v2.action_enum})},e[11]=s,e[12]=o.action_v2.action_enum,e[13]=o.id,e[14]=o.type,e[15]=c,e[16]=y):y=e[16];let v;e[17]!==p.triggerTextClassName||e[18]!==o.text?(v=r.jsx("span",{className:p.triggerTextClassName,children:o.text}),e[17]=p.triggerTextClassName,e[18]=o.text,e[19]=v):v=e[19];let S;e[20]!==p.chevronClassName?(S=r.jsx(zo,{className:p.chevronClassName}),e[20]=p.chevronClassName,e[21]=S):S=e[21];let C;e[22]!==p.triggerClassName||e[23]!==v||e[24]!==S?(C=r.jsx(J.Trigger,{asChild:!0,children:r.jsxs("button",{type:"button",className:p.triggerClassName,children:[v,S]})}),e[22]=p.triggerClassName,e[23]=v,e[24]=S,e[25]=C):C=e[25];const w=p.contentClassName;let k;e[26]!==p.headerClassName||e[27]!==o.action_v2.header_text||e[28]!==g?(k=o.action_v2.header_text&&g?r.jsx("p",{className:p.headerClassName,children:g}):null,e[26]=p.headerClassName,e[27]=o.action_v2.header_text,e[28]=g,e[29]=k):k=e[29];const E=p.itemsWrapperClassName;let M;if(e[30]!==p.fallbackTextClassName||e[31]!==p.iconClassName||e[32]!==p.itemClassName||e[33]!==p.itemTextClassName||e[34]!==p.showLinkIcon||e[35]!==a||e[36]!==_){let D;e[38]!==p.fallbackTextClassName||e[39]!==p.iconClassName||e[40]!==p.itemClassName||e[41]!==p.itemTextClassName||e[42]!==p.showLinkIcon||e[43]!==_?(D=H=>r.jsx(J.Item,{size:"large",className:p.itemClassName,icon:r.jsx(G5e,{iconUrl:H.iconUrl,label:H.text,className:p.iconClassName,fallbackTextClassName:p.fallbackTextClassName}),trailing:p.showLinkIcon?r.jsx(wr,{className:"text-token-text-primary"}):void 0,onSelect:()=>_(H),children:r.jsx("span",{className:p.itemTextClassName,children:H.text})},H.id),e[38]=p.fallbackTextClassName,e[39]=p.iconClassName,e[40]=p.itemClassName,e[41]=p.itemTextClassName,e[42]=p.showLinkIcon,e[43]=_,e[44]=D):D=e[44],M=a.map(D),e[30]=p.fallbackTextClassName,e[31]=p.iconClassName,e[32]=p.itemClassName,e[33]=p.itemTextClassName,e[34]=p.showLinkIcon,e[35]=a,e[36]=_,e[37]=M}else M=e[37];let N;e[45]!==p.itemsWrapperClassName||e[46]!==M?(N=r.jsx("div",{className:E,children:M}),e[45]=p.itemsWrapperClassName,e[46]=M,e[47]=N):N=e[47];let A;e[48]!==p.footerClassName||e[49]!==o.action_v2.footer_text?(A=o.action_v2.footer_text?r.jsx("p",{className:p.footerClassName,children:o.action_v2.footer_text}):null,e[48]=p.footerClassName,e[49]=o.action_v2.footer_text,e[50]=A):A=e[50];let I;e[51]!==p.contentClassName||e[52]!==k||e[53]!==N||e[54]!==A?(I=r.jsx(J.Portal,{children:r.jsxs(J.Content,{size:"auto",className:w,children:[k,N,A]})}),e[51]=p.contentClassName,e[52]=k,e[53]=N,e[54]=A,e[55]=I):I=e[55];let P;e[56]!==I||e[57]!==y||e[58]!==C?(P=r.jsxs(J.Root,{onOpenChange:y,children:[C,I]}),e[56]=I,e[57]=y,e[58]=C,e[59]=P):P=e[59];let R;e[60]!==p.footerBelowClassName||e[61]!==p.footerPlacement||e[62]!==o.action_v2.footer_text?(R=p.footerPlacement==="below"&&o.action_v2.footer_text?r.jsx("p",{className:p.footerBelowClassName,children:o.action_v2.footer_text}):null,e[60]=p.footerBelowClassName,e[61]=p.footerPlacement,e[62]=o.action_v2.footer_text,e[63]=R):R=e[63];let O;return e[64]!==p.containerClassName||e[65]!==P||e[66]!==R?(O=r.jsxs("div",{className:b,children:[P,R]}),e[64]=p.containerClassName,e[65]=P,e[66]=R,e[67]=O):O=e[67],O}function W5e({beaconInfo:t,conversationId:e,dropdownAction:s,formatAction:n,trackBeaconDismissAndClearBeaconUIState:o}){"use no forget";const{title:a,description:i,icon_image_url:l,icon_image_size:c}=t.ui_info,u=$5e({dropdownAction:s,formatAction:n});if(u.length===0)return r.jsx(sp,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:a,description:i});const d=r.jsx(z5e,{beaconInfo:t,conversationId:e,dropdownAction:s,dropdownItems:u,variant:"banner",onClose:()=>{}});return r.jsx(sp,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:a,description:i,actions:{customActions:d}})}function q5e(t){switch(t){case Ui.PRIMARY:return"primary";case Ui.SECONDARY:return"secondary";case Ui.COPY:return"primary";case Ui.DROPDOWN:return"primary"}return"primary"}function Gd(t,e){const s={beacon_id:t.beacon_id,beacon_name:t.beacon_name,beacon_type:"container"};if(e==="show"){B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",s);return}B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",s)}function K5e(t,e){if(Y5e.includes(e.beacon_id)){const s=(()=>{var n,o;if(e.beacon_id==="free_trial_upsell_modal_beacon")return((o=(n=e.action_items)==null?void 0:n[1])==null?void 0:o.id)==="plus_free_trial_upsell_modal_beacon_try_plus"?We.hasSeenFreeTrialUpsellModal:We.hasSeenGoFreeTrialUpsellModal;if(e.beacon_id==="tatertot_nux_modal_v2_beacon")return We.hasSeenTatertotNux})();if(!s)return;_t(t,s)}}const Y5e=["free_trial_upsell_modal_beacon","tatertot_nux_modal_v2_beacon"],OG=t=>{"use forget";var P,R;const e=F.c(40),{actions:s,title:n,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,secondaryButtonColor:c,bannerIconImageUrl:u,bannerIconSize:d,icon:f,className:m,contentClassName:p}=t,g=ne();let h;e[0]!==s||e[1]!==g?(h=(P=s==null?void 0:s.primaryAction)!=null&&P.text?typeof s.primaryAction.text=="string"?s.primaryAction.text:g.formatMessage(s.primaryAction.text):void 0,e[0]=s,e[1]=g,e[2]=h):h=e[2];const _=h;let b;e[3]!==s||e[4]!==g?(b=(R=s==null?void 0:s.secondaryAction)!=null&&R.text?typeof s.secondaryAction.text=="string"?s.secondaryAction.text:g.formatMessage(s.secondaryAction.text):void 0,e[3]=s,e[4]=g,e[5]=b):b=e[5];const y=b,v=s==null?void 0:s.customActions;let S;e[6]!==m?(S=z("relative -mb-9 ps-4! pe-2.5! pt-2.5 pb-9!","rounded-t-[32px] rounded-b-none border border-b-0","bg-token-bg-tertiary! dark:bg-token-bg-tertiary!","border-token-border-strong/60 dark:border-token-border-strong/60",m),e[6]=m,e[7]=S):S=e[7];let C;e[8]!==p?(C=z(p),e[8]=p,e[9]=C):C=e[9];let w;e[10]!==u||e[11]!==d||e[12]!==f?(w=RG({icon:f,bannerIconImageUrl:u,bannerIconSize:d}),e[10]=u,e[11]=d,e[12]=f,e[13]=w):w=e[13];let k;e[14]!==n?(k=n&&r.jsxs("span",{className:"font-medium",children:[n,n.toString().endsWith(".")?"":r.jsx(r.Fragment,{children:"."})]}),e[14]=n,e[15]=k):k=e[15];let E;e[16]!==o?(E=o?r.jsxs(r.Fragment,{children:["",r.jsx("span",{dangerouslySetInnerHTML:{__html:o}})]}):null,e[16]=o,e[17]=E):E=e[17];let M;e[18]!==k||e[19]!==E?(M=r.jsxs("div",{className:"text-token-text-secondary text-sm",children:[k,E]}),e[18]=k,e[19]=E,e[20]=M):M=e[20];let N;e[21]!==a||e[22]!==i?(N=a?()=>{i==null||i(),a==null||a()}:void 0,e[21]=a,e[22]=i,e[23]=N):N=e[23];let A;e[24]!==(s==null?void 0:s.primaryAction)||e[25]!==(s==null?void 0:s.secondaryAction)||e[26]!==v||e[27]!==i||e[28]!==l||e[29]!==_||e[30]!==c||e[31]!==y?(A=v!=null?v:r.jsxs("div",{className:"m-w-fit flex shrink-0 flex-col gap-2 pb-1 md:pb-0",children:[_&&r.jsx(ke,{onClick:()=>{var O,L;i==null||i(),(L=(O=s==null?void 0:s.primaryAction)==null?void 0:O.onClick)==null||L.call(O)},color:l!=null?l:"secondary",className:z("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8"),children:_}),y&&r.jsx(ke,{onClick:()=>{var O,L;i==null||i(),(L=(O=s==null?void 0:s.secondaryAction)==null?void 0:O.onClick)==null||L.call(O)},color:c!=null?c:"secondary",className:"shrink-0",children:y})]}),e[24]=s==null?void 0:s.primaryAction,e[25]=s==null?void 0:s.secondaryAction,e[26]=v,e[27]=i,e[28]=l,e[29]=_,e[30]=c,e[31]=y,e[32]=A):A=e[32];let I;return e[33]!==A||e[34]!==S||e[35]!==C||e[36]!==w||e[37]!==M||e[38]!==N?(I=r.jsx("div",{className:"relative",children:r.jsx(_s,{className:S,contentClassName:C,isElevated:!1,icon:w,title:void 0,content:M,onDismiss:N,customCtas:A})}),e[33]=A,e[34]=S,e[35]=C,e[36]=w,e[37]=M,e[38]=N,e[39]=I):I=e[39],I},Xf=Ne({modalHeading:{id:"claimBusinessWorkspaceModal.modalHeading",defaultMessage:"One step closer to your free ChatGPT Business trial"},modalHeadingFreeWorkspace:{id:"claimBusinessWorkspaceModal.modalHeadingFreeWorkspace",defaultMessage:"One step closer to your free ChatGPT Business workspace"},modalSubheading:{id:"claimBusinessWorkspaceModal.modalSubheading",defaultMessage:"Continue with your work email to unlock a secure AI workspace trusted by millions of professionals"},primaryCta:{id:"claimBusinessWorkspaceModal.primaryCta",defaultMessage:"Log out to continue"},tertiaryCta:{id:"claimBusinessWorkspaceModal.tertiaryCta",defaultMessage:"Maybe later"}}),Q5e="https://cdn.openai.com/chatgpt/team-interstitial-background.png",J5e="logout_account_hint",LG=t=>{"use forget";const e=F.c(31),{onClose:s}=t,n=ne(),o=xs(),a=G();let i;e[0]!==a?(i=Xe(a,"4038887252").get("enabled",!1),e[0]=a,e[1]=i):i=e[1];const l=i;let c;e[2]!==a||e[3]!==s||e[4]!==l||e[5]!==o?(c=async()=>{if(wa(a,"chatgpt_business_claim_workspace_modal_cta_click"),!(o!=null&&o.email))return;const w=l?"/business-free-workspace":"/team-sign-up",k=new URL(window.location.origin+w);k.searchParams.set(J5e,o.email);const E=k.toString();try{const M=await tK.signOut({redirect:!1,callbackUrl:E});M.url?window.location.href=M.url:window.location.assign(E)}catch(M){window.location.assign(E)}s==null||s()},e[2]=a,e[3]=s,e[4]=l,e[5]=o,e[6]=c):c=e[6];const u=c;let d;e[7]!==a||e[8]!==s?(d=()=>{wa(a,"chatgpt_business_claim_workspace_modal_dismiss"),s==null||s()},e[7]=a,e[8]=s,e[9]=d):d=e[9];const f=d;let m;e[10]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("div",{"aria-hidden":!0,className:"absolute inset-x-0 top-0 z-0 h-[180px] w-full bg-cover bg-center",style:{backgroundImage:"url(".concat(Q5e,")")}}),e[10]=m):m=e[10];const p=l?Xf.modalHeadingFreeWorkspace:Xf.modalHeading;let g;e[11]!==p?(g=r.jsx("div",{className:"text-token-text-primary text-2xl",children:r.jsx(j,T({},p))}),e[11]=p,e[12]=g):g=e[12];let h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"text-token-text-secondary text-sm",children:r.jsx(j,T({},Xf.modalSubheading))}),e[13]=h):h=e[13];let _;e[14]!==n?(_=n.formatMessage(Xf.primaryCta),e[14]=n,e[15]=_):_=e[15];let b;e[16]!==u||e[17]!==_?(b=r.jsx(mn.Button,{title:_,color:"primary",className:"w-full",onClick:u}),e[16]=u,e[17]=_,e[18]=b):b=e[18];let y;e[19]!==n?(y=n.formatMessage(Xf.tertiaryCta),e[19]=n,e[20]=y):y=e[20];let v;e[21]!==f||e[22]!==y?(v=r.jsx(mn.Button,{title:y,color:"ghost",className:"w-full",onClick:f}),e[21]=f,e[22]=y,e[23]=v):v=e[23];let S;e[24]!==v||e[25]!==g||e[26]!==b?(S=r.jsxs("div",{className:"relative z-1 flex w-full flex-col items-center gap-4 px-9 pt-33 pb-4 text-center",children:[g,h,b,v]}),e[24]=v,e[25]=g,e[26]=b,e[27]=S):S=e[27];let C;return e[28]!==s||e[29]!==S?(C=r.jsxs(Ft,{testId:"modal-claim-business-workspace",isOpen:!0,onClose:s,type:"success",size:"custom",className:"max-w-sm",contentClassName:"p-0! relative! overflow-hidden rounded-2xl",children:[m,S]}),e[28]=s,e[29]=S,e[30]=C):C=e[30],C},Z5e=Pe(()=>me(()=>import("./c1cxx6ihf6t1t9cb.js"),__vite__mapDeps([230,1,3,4,131,132,133,134,129,130])).then(t=>t.CreatePromptModal));async function X5e({ctx:t,account:e}){var _,b,y,v,S;const s=e==null?void 0:e.normalizedAccountUserId,n=e==null?void 0:e.getWorkspaceId(),o=j_(t,{includeDisabledByAdmin:!0}),a=o==null?void 0:o.find(C=>C.id===vm),i=o==null?void 0:o.find(C=>C.id===Xu),l=(a==null?void 0:a.status)==="DISABLED_BY_ADMIN"||!a,c=(i==null?void 0:i.status)==="DISABLED_BY_ADMIN"||!i;if(!o)return Ls.info("Connector nux recommendation: default_nux (connectors not yet loaded)"),{type:"default_nux"};let u=0,d=!1;if(s)try{const C=await de.safePost("/aip/connectors/links/list_accessible",{requestBody:{principals:[{type:"USER",id:s}],link_refresh_strategy:"BLOCKING"}}),w=$c((_=C==null?void 0:C.links)!=null?_:[],k=>k.connector_id);u=Object.keys(w).length}catch(C){d=!0,Ls.error("Failed to load connector links for nux recommendation",{error:C})}if(!s||d)return Ls.info("Connector nux recommendation: default_nux (missing user or fetch failed)",{normalizedAccountUserIdPresent:!!s,connectorLinkFetchFailed:d}),{type:"default_nux"};if(u>0)return Ls.info("Connector nux recommendation: default_nux (already connected)",{connectedConnectorCount:u}),{type:"default_nux"};let f=0,m=0,p="undetermined";if(n)try{const C=await de.safeGet("/aip/workspace/connector-stats"),w=(b=C==null?void 0:C.connector_stats)!=null?b:[];for(const k of w){const E=Number((y=k.unique_user_cnt)!=null?y:0);Number.isFinite(E)&&(k.connector_id===vm?f+=E:k.connector_id===Xu&&(m+=E))}f>m&&f>0?p="google_drive":m>f&&m>0&&(p="sharepoint")}catch(C){Ls.error("Failed to load workspace connector stats for nux recommendation",{error:C})}return B.logStructuredEvent(GZ,{connectedConnectorsCount:String(u),googledriveCount:String(f),sharepointCount:String(m),recommendation:p}),p==="undetermined"?(Ls.info("Connector nux recommendation: default_nux (undetermined recommendation)"),{type:"default_nux"}):p==="google_drive"&&l?(Ls.info("Connector nux recommendation: default_nux (google drive disabled by admin)",{status:a==null?void 0:a.status,connectorPresent:Ca[(v=a==null?void 0:a.id)!=null?v:""]!=null}),{type:"default_nux"}):p==="sharepoint"&&c?(Ls.info("Connector nux recommendation: default_nux (sharepoint disabled by admin)",{status:i==null?void 0:i.status,connectorPresent:Ca[(S=i==null?void 0:i.id)!=null?S:""]!=null}),{type:"default_nux"}):_o(t,"2748612044").get("show_targetted_recommendation",!1)?{type:"add_connector_link",connectorId:p==="google_drive"?vm:Xu}:{type:"default_nux"}}const ePe="https://cdn.openai.com/chatgpt/gdrive_sp_nux_background.jpg",tPe=Pe(()=>me(()=>import("./fnvr7bu6ngy60ar9.js"),__vite__mapDeps([231,1,3,4,10,232])).then(t=>t.ConnectorsOnboardingModal)),sPe=Pe(()=>me(()=>Promise.resolve().then(()=>aie),void 0).then(t=>t.AddConnectorLinkModal));function nPe(t){"use forget";const e=F.c(27),{clientThreadId:s,location:n,composerController:o,persistedSystemHintsStore:a,openFileDialog:i,beaconInfo:l}=t,c=G(),u=fs();let d;e[0]!==c?(d=ut(),e[0]=c,e[1]=d):d=e[1];const f=!d,m=yt(),p=Bs(s);let g;e[2]!==s?(g={clientThreadId:s},e[2]=s,e[3]=g):g=e[3];const h=rw(g);let _;e[4]!==s||e[5]!==c?(_=()=>oi(s,c),e[4]=s,e[5]=c,e[6]=_):_=e[6];const{mutate:b}=xE(_);let y;e[7]!==c?(y=()=>na(c),e[7]=c,e[8]=y):y=e[8];const v=oe(y);let S;e[9]!==u?(S=u==null?void 0:u.isWorkspaceAccount(),e[9]=u,e[10]=S):S=e[10];const C=S;let w;return e[11]!==v||e[12]!==l||e[13]!==s||e[14]!==o||e[15]!==c||e[16]!==u||e[17]!==f||e[18]!==C||e[19]!==n||e[20]!==m||e[21]!==i||e[22]!==a||e[23]!==h||e[24]!==p||e[25]!==b?(w=k=>{if(k===void 0)return;const E=l.ui_info.type==="beacon_banner_info"?"banner":"modal",M=typeof k=="object"&&"type"in k&&k.type?k.type:"unknown",N=()=>{var D,H,V;B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:l.beacon_id,beacon_name:(D=l.beacon_name)!=null?D:"unknown",beacon_type:E,action_id:(H=k.id)!=null?H:"unknown",action_type:M,action_enum:O.action_enum}),b({beaconId:l.beacon_id,eventCtaId:(V=k.id)!=null?V:"unknown"});const L=[Ui.PRIMARY,Ui.SECONDARY];M&&L.includes(M)&&No.dismiss()},A=L=>{if("onClick"in L&&L.onClick){const D=L.onClick;return U(T({},L),{onClick:()=>{N(),D()}})}if("onThennableClick"in L&&L.onThennableClick){const D=L.onThennableClick;return U(T({},L),{onThennableClick:()=>(N(),D())})}return L},I=()=>G3(a,o,Ye.Glaux,v,{analyticsMetadata:{clientThreadId:s}},C),{action_v2:P,text:R}=k,O=P;switch(O.action_enum){case Ns.FILE_UPLOAD:case Ns.PHOTO_UPLOAD:return A({text:R,onClick:()=>{if(i(),O.composer_text){const D=Ht(o);D.focus(),Co(D,O.composer_text)}}});case Ns.SYSTEM_HINT:return A({text:R,onClick:()=>{const D=ux(O.hint)||(v1(O.hint)?O.hint:void 0);if(D){if(O.new_chat){const H=new URLSearchParams({[Sw]:D});O.composer_text&&H.set("prompt",O.composer_text),Pl(m,{params:H})}else if(G3(a,o,D,v,{analyticsMetadata:{clientThreadId:s}},C),O.composer_text){const H=Ht(o);H.focus(),Co(H,O.composer_text)}}}});case Ns.INVITE_TEAM_MEMBERS:return u?A({text:R,onClick:()=>{mt(c,jB,{workspace:u})}}):void 0;case Ns.AUTHENTICATE_LOGIN:return A({text:R,onClick:()=>{os(c,{fallbackScreenHint:"login"})}});case Ns.AUTHENTICATE_SIGNUP:return A({text:R,onClick:()=>{os(c,{fallbackScreenHint:"signup"})}});case Ns.GET_PLUS:case Ns.GET_GO:case Ns.GET_PRO:case Ns.GET_TEAM:return A({text:R,onClick:()=>{if(f)os(c,{fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0});else{const D=O==null?void 0:O.promo_campaign_id;an(m,n,Uw,D)}}});case Ns.DISMISS:return A({text:R,onClick:()=>{if(O.composer_text){const D=Ht(o);D.focus(),Co(D,O.composer_text)}}});case Ns.OPEN_URL:return A({text:R,onClick:()=>{window.open(O.url,"_blank","noopener noreferrer")}});case Ns.OPEN_LOCAL_URL:return A({text:R,onClick:()=>{m(O.web_url)}});case Ns.SHARE_CONVERSATION:return p?A({text:R,onClick:()=>{tn.openSharingModal(p,n)}}):void 0;case Ns.UPDATE_PERSONALITY_TRAIT:return A({text:R,onClick:()=>{const D=new Map,{conversationId:H,messageId:V}=oi(p,c),q=H===void 0?null:H,W=V===void 0?null:V;Object.entries(O.updated_trait_settings_dict).forEach($=>{const[Z,K]=$;D.set(Z,K)}),VZ(c,D,q,W,{optimistic:!0})}});case Ns.CREATE_PROMPT:return{text:R,onClick:()=>{var W,$,Z,K,Y,ae,se,ee;if(O.open_in_modal===!1)return;const H=Se.getConversationTurns(Tt(s)).findLast(oPe),V=(Y=(K=(Z=($=(W=H==null?void 0:H.messages)==null?void 0:W[0])==null?void 0:$.metadata)==null?void 0:Z.system_hints)==null?void 0:K[0])!=null?Y:"",q={name:(ae=O.prompt_name)!=null?ae:"",prompt:(se=O.prompt_text)!=null?se:"",description:(ee=O.prompt_description)!=null?ee:"",system_hint:V};mt(c,Z5e,{prompt:q,referer:"prompt_template_beacon"})}};case Ns.OPEN_CONNECTORS_ONBOARDING_MODAL:return A({text:R,onClick:async()=>{const D=await X5e({ctx:c,account:u!=null?u:void 0});if(D.type==="default_nux"){mt(c,tPe,{onContinue:I});return}mt(c,sPe,{connectorId:D.connectorId,backgroundImageUrl:ePe,onComplete:I})}});case Ns.OPEN_CLAIM_BUSINESS_WORKSPACE_MODAL:return A({text:R,onClick:()=>{mt(c,LG)}});case Ns.COPY_TO_CLIPBOARD:{const L=O.copy_text;return A({text:L,onThennableClick:()=>{if(L.startsWith("$")){const H=L.slice(1);return Jo(H.trim())}else return Jo(L.trim())}})}case Ns.DROPDOWN:return;case Ns.UPDATE_MODEL_PICKER:return A({text:R,onClick:()=>{if(kd(Et(c,s),O.model_slug),O.composer_text){const D=Ht(o);D.focus(),Co(D,O.composer_text)}}});case Ns.REGENERATE:{const L=Se.getCurrentLeafId(Tt(s));return A({text:R,onClick:()=>{O.update_model_picker&&kd(Et(c,s),O.model_slug),h({sourceEvent:new Event("click"),nodeId:L,requestedModelId:O.model_slug})}})}}},e[11]=v,e[12]=l,e[13]=s,e[14]=o,e[15]=c,e[16]=u,e[17]=f,e[18]=C,e[19]=n,e[20]=m,e[21]=i,e[22]=a,e[23]=h,e[24]=p,e[25]=b,e[26]=w):w=e[26],w}function oPe(t){return t.role==="user"}const aPe=t=>{"use forget";const e=F.c(38),{clientThreadId:s,beaconInfo:n,trackBeaconDismissAndClearBeaconUIState:o,onMount:a,openFileDialog:i}=t,{ui_info:l,action_items:c}=n,{title:u,description:d,icon_image_url:f,icon_image_size:m}=l,p="beacon-banner-".concat(n.beacon_id),g=ne(),h=pf(),_=Ko.useStore();let b;e[0]!==n||e[1]!==s||e[2]!==h||e[3]!==p||e[4]!==i||e[5]!==_?(b={clientThreadId:s,location:p,composerController:h,openFileDialog:i,persistedSystemHintsStore:_,beaconInfo:n},e[0]=n,e[1]=s,e[2]=h,e[3]=p,e[4]=i,e[5]=_,e[6]=b):b=e[6];const y=nPe(b);let v;e[7]!==a?(v=()=>{a==null||a()},e[7]=a,e[8]=v):v=e[8],e0(v);let S;e:{if(c==null){S=void 0;break e}let N;e[9]!==c?(N=c.find(rPe),e[9]=c,e[10]=N):N=e[10],S=N}const C=S;if(C){let N;return e[11]!==n||e[12]!==s||e[13]!==C||e[14]!==y||e[15]!==o?(N=r.jsx(W5e,{beaconInfo:n,conversationId:s,dropdownAction:C,formatAction:y,trackBeaconDismissAndClearBeaconUIState:o}),e[11]=n,e[12]=s,e[13]=C,e[14]=y,e[15]=o,e[16]=N):N=e[16],N}let w,k;if(e[17]!==c||e[18]!==n||e[19]!==y||e[20]!==g||e[21]!==o||e[22]!==l.web_design){k=Symbol.for("react.early_return_sentinel");e:{let N;e[25]!==y?(N=R=>{const O=y(R);return O?{action:R,formatted:O}:null},e[25]=y,e[26]=N):N=e[26];const A=(c!=null?c:[]).map(N).filter(iPe),I=A.find(lPe);if(I&&"onThennableClick"in I.formatted&&I.formatted.onThennableClick){const R={text:I.formatted.text,onThennableClick:I.formatted.onThennableClick};k=r.jsx(B5e,{beaconInfo:n,copyBeaconAction:R,trackBeaconDismissAndClearBeaconUIState:o});break e}const P=A.filter(cPe);t:{if(P.length===0){w=void 0;break t}let R;e[27]!==g||e[28]!==l.web_design?(R=O=>{const{action:L,formatted:D}=O,H=typeof D.text=="string"?D.text:g.formatMessage(D.text),V=()=>{var W;"onThennableClick"in D&&D.onThennableClick?D.onThennableClick():(W=D.onClick)==null||W.call(D)},q=l.web_design===V3.COMPOSER?z("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8"):"w-full sm:w-auto";return r.jsx(ke,{color:q5e(L.type),onClick:V,className:q,children:H},L.id)},e[27]=g,e[28]=l.web_design,e[29]=R):R=e[29],w=r.jsx("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:P.map(R)})}}e[17]=c,e[18]=n,e[19]=y,e[20]=g,e[21]=o,e[22]=l.web_design,e[23]=w,e[24]=k}else w=e[23],k=e[24];if(k!==Symbol.for("react.early_return_sentinel"))return k;const E=w;let M;return e[30]!==E||e[31]!==d||e[32]!==m||e[33]!==f||e[34]!==u||e[35]!==o||e[36]!==l.web_design?(M=l.web_design===V3.COMPOSER?r.jsx(OG,{onDismiss:o,title:u,description:d,actions:E?{customActions:E}:void 0,bannerIconImageUrl:f,bannerIconSize:m!=null?m:void 0}):r.jsx(sp,{bannerIconImageUrl:f,bannerIconSize:m!=null?m:void 0,onDismiss:o,title:u,description:d,actions:E?{customActions:E}:void 0}),e[30]=E,e[31]=d,e[32]=m,e[33]=f,e[34]=u,e[35]=o,e[36]=l.web_design,e[37]=M):M=e[37],M};function rPe(t){return(t==null?void 0:t.action_v2.action_enum)===Ns.DROPDOWN}function iPe(t){return t!=null}function lPe(t){const{action:e,formatted:s}=t;return e.type===Ui.COPY&&"onThennableClick"in s&&typeof s.onThennableClick=="function"}function cPe(t){const{action:e}=t;return e.type!==Ui.COPY}const DG="plus_free_trial_homepage_banner",alt=t=>{"use forget";const e=F.c(34),{clientThreadId:s,openFileDialog:n}=t,o=Qe(s,Se.getRequestId),a=Qe(s,Se.getCurrentLeafId),i=Sr(o),l=G();let c;e[0]!==s||e[1]!==l?(c=Et(l,s),e[0]=s,e[1]=l,e[2]=c):c=e[2];const u=c;let d;e[3]!==u?(d=()=>u.serverId$(),e[3]=u,e[4]=d):d=e[4];const f=oe(d);let m;e[5]!==a||e[6]!==f?(m={serverThreadId:f,leafId:a},e[5]=a,e[6]=f,e[7]=m):m=e[7];const p=uk(m);let g;e[8]!==l||e[9]!==f?(g=()=>oi(f,l),e[8]=l,e[9]=f,e[10]=g):g=e[10];const h=g,_=gg(h),b=hg(h);let y;e[11]!==(p==null?void 0:p.beacon_id)||e[12]!==(p==null?void 0:p.beacon_name)||e[13]!==(p==null?void 0:p.ui_info)||e[14]!==i?(y=()=>{var A,I;i&&(p==null?void 0:p.ui_info.dismiss_variant)!==a1.PERSISTENT&&(B.logEventWithStatsig("Web Beacon Ignored","chatgpt_web_beacon_ignored",{beacon_id:(A=p==null?void 0:p.beacon_id)!=null?A:"unknown",beacon_name:(I=p==null?void 0:p.beacon_name)!=null?I:"unknown",beacon_type:"banner"}),No.dismiss())},e[11]=p==null?void 0:p.beacon_id,e[12]=p==null?void 0:p.beacon_name,e[13]=p==null?void 0:p.ui_info,e[14]=i,e[15]=y):y=e[15];let v;e[16]!==p||e[17]!==i?(v=[i,p],e[16]=p,e[17]=i,e[18]=v):v=e[18],x.useEffect(y,v);const S=x.useRef(!1);let C;e[19]!==p||e[20]!==_||e[21]!==l?(C=()=>{S.current||p&&(B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:p.beacon_id,beacon_name:p.beacon_name,beacon_type:"banner"}),_.mutate(p.beacon_id),p.beacon_id===DG&&_t(l,We.hasSeenPlusFreeTrialHomepageAnnouncementBanner),S.current=!0)},e[19]=p,e[20]=_,e[21]=l,e[22]=C):C=e[22];const w=C;let k;e[23]!==p||e[24]!==b?(k=()=>{p&&(B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:p.beacon_id,beacon_name:p.beacon_name,beacon_type:"banner"}),b.mutate(p.beacon_id)),No.dismiss()},e[23]=p,e[24]=b,e[25]=k):k=e[25];const E=k;let M;e[26]!==p||e[27]!==s||e[28]!==w||e[29]!==n||e[30]!==E?(M=p&&r.jsx(gt.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(aPe,{clientThreadId:s,beaconInfo:p,trackBeaconDismissAndClearBeaconUIState:E,onMount:w,openFileDialog:n})}),e[26]=p,e[27]=s,e[28]=w,e[29]=n,e[30]=E,e[31]=M):M=e[31];let N;return e[32]!==M?(N=r.jsx(Ms,{children:M}),e[32]=M,e[33]=N):N=e[33],N};function rlt(t){const e=Qe(t,Se.getRequestId),s=Sr(e),n=G(),o=Et(n,t),a=oe(()=>zZ(o)),i=oe(()=>o.serverId$()),l=Qe(t,Se.getCurrentLeafId),c=uk({serverThreadId:i,leafId:l}),u=Object.values(Ns),d=c!=null&&c.action_items.every(f=>u.includes(f.action_v2.action_enum)?f.action_v2.action_enum===Ns.DROPDOWN?f.action_v2.items.every(m=>u.includes(m.action_v2.action_enum)):f.action_v2.action_enum===Ns.CREATE_PROMPT?!a:!0:!1);return(!s||(c==null?void 0:c.ui_info.dismiss_variant)===a1.PERSISTENT)&&d}const uPe=3,dPe=3,Zb="oai/apps/connectorInContextUpsellBannerV1";function fPe(t){return!!Xe(t,"3819205143",{disableExposureLog:!1}).get("enabled",!0)}function mPe(t){return t?new Date>tC(t,uPe):!0}function FG(t){var f;const e=G(),[s,n]=yi(Zb,null,m=>m!=null&&typeof m=="object"&&typeof m.messageId=="string"&&typeof m.lastSeenAt=="number"&&typeof m.interacted=="boolean"&&typeof m.viewCount=="number"&&typeof m.hasDismissed=="boolean"),o=fPe(e),a=s?ta(s.lastSeenAt):null,i=s&&(f=s.viewCount)!=null?f:0,l=s?s.hasDismissed:!1;return{canBeSeen:t!==""&&!l&&o&&(!s||i<=dPe&&(mPe(a)||s.interacted===!1)),markSeen:m=>{const p={messageId:t,lastSeenAt:Wo(new Date),interacted:m,viewCount:(s?s.viewCount:0)+(m?0:1),hasDismissed:l};$e.count(He.DEFAULT,"connector_upsell_banner_shown"),n(p),window.localStorage.setItem(Zb,JSON.stringify(p))},markDismissed:()=>{const m={messageId:t,lastSeenAt:Wo(new Date),interacted:!0,viewCount:0,hasDismissed:!0};$e.count(He.DEFAULT,"connector_upsell_banner_dismissed"),n(m),window.localStorage.setItem(Zb,JSON.stringify(m))}}}const hS=30,pPe=3,gPe=1,_S=Zt(Vs(()=>({lastSeenInContextUpsellBannerAt:_Pe()}))),xS=Zt(Vs(()=>({inContextUpsellBannerPeriodStartAt:BG()}))),yS=Zt(Vs(()=>({inContextUpsellBannerPeriodExposureCount:UG()}))),bS=Zt(Vs(()=>({inContextUpsellBannerInteractedInPeriod:xPe()}))),vS=Zt(Vs(()=>({inContextUpsellBannerLastSeenId:$G()})));function hPe(t){if($G()===t)return;const s=BG(),n=UG();!s||!n||mo(Date.now(),s)>=hS?SS({lastSeenAt:new Date,periodStartAt:new Date,exposureCount:1,interactedInPeriod:!1,lastSeenId:t}):SS({lastSeenAt:new Date,exposureCount:n+1,lastSeenId:t})}function SS({lastSeenAt:t,periodStartAt:e,exposureCount:s,interactedInPeriod:n,lastSeenId:o}){t===void 0?t=_S.getState().lastSeenInContextUpsellBannerAt:_S.setState(i=>{i.lastSeenInContextUpsellBannerAt=t===void 0?null:t}),e===void 0?e=xS.getState().inContextUpsellBannerPeriodStartAt:xS.setState(i=>{i.inContextUpsellBannerPeriodStartAt=e===void 0?null:e}),s===void 0?s=yS.getState().inContextUpsellBannerPeriodExposureCount:yS.setState(i=>{i.inContextUpsellBannerPeriodExposureCount=s===void 0?null:s}),n===void 0?n=bS.getState().inContextUpsellBannerInteractedInPeriod:bS.setState(i=>{i.inContextUpsellBannerInteractedInPeriod=n===void 0?null:n}),o===void 0?o=vS.getState().inContextUpsellBannerLastSeenId:vS.setState(i=>{i.inContextUpsellBannerLastSeenId=o===void 0?null:o});const a={lastSeenInContextUpsellBannerAt:t?String(Wo(t)):null,inContextUpsellBannerPeriodStartAt:e?String(Wo(e)):null,inContextUpsellBannerPeriodExposureCount:s,inContextUpsellBannerInteractedInPeriod:n,inContextUpsellBannerLastSeenId:o};localStorage.setItem(Be.O3MiniHighInContextUpsellBanner,JSON.stringify(a))}function _g(){const t=localStorage.getItem(Be.O3MiniHighInContextUpsellBanner);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}}function _Pe(){var e;const t=(e=_g())==null?void 0:e.lastSeenInContextUpsellBannerAt;return t?ta(Number(t)):null}function BG(){var e;const t=(e=_g())==null?void 0:e.inContextUpsellBannerPeriodStartAt;return t?ta(Number(t)):null}function UG(){var t,e;return(e=(t=_g())==null?void 0:t.inContextUpsellBannerPeriodExposureCount)!=null?e:null}function xPe(){var t,e;return(e=(t=_g())==null?void 0:t.inContextUpsellBannerInteractedInPeriod)!=null?e:null}function $G(){var t,e;return(e=(t=_g())==null?void 0:t.inContextUpsellBannerLastSeenId)!=null?e:null}const yPe=[Yt.UPGRADE_TO_GO,Yt.GET_PLUS,Yt.GET_PRO,Yt.GET_BUSINESS_TRIAL,Yt.GET_PLUS_TRIAL,Yt.GET_GO_TRIAL,Yt.GET_BUSINESS],bPe=Pe(()=>me(()=>Promise.resolve().then(()=>zie),void 0).then(t=>t.TatertotNuxModal));function vPe({clientThreadId:t,rateLimitInfo:e,onDismiss:s,onInteract:n,onMount:o}){"use no forget";var Te;const a=Gt(),i=G(),{name:l,title:c,call_to_action:u,description:d,icon_image_url:f}=e,m="metadata"in e&&e.metadata?e.metadata:{},p=ct(i),{updateSystemHint:g}=La(),h=pf(),_=WZ(),b=Qe(t,Se.getIsNewConversation),y=(Te=p==null?void 0:p.planType)!=null?Te:"unknown",v=bl(),S=xe=>{switch(xe.trim().toLowerCase()){case"image_gen":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_IMAGE_GEN;case"send":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_SEND;case"gizmo":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO;case"gizmo_tag":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO_TAG;case"dalle":case"dall_e":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_DALLE;case"advanced_data_analysis":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_ADAVANCED_DATA_ANALYSIS;case"gpt_4o":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_4O;case"gpt_5_auto":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_5_AUTO;case"progress_banner_gpt_5":return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_PROGRESS_BANNER_GPT_5;default:return Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_TEMPLATE}},C=_&&"block_reason"in _?_.block_reason:null,w="banner_description",k=x.useMemo(()=>({type:l||"unknown",location:w,plan_type:y,is_new_conversation:b,is_hard_block:!!_,hard_block_reason:C!=null?C:"",call_to_action:u,title:c,description:d,icon_image_url:f}),[l,y,b,_,C,u,c,d,f]),E=yt(),M=x.useCallback(async({view:xe}={view:void 0})=>{await a.invalidateQueries($P()),an(E,"Prompt textarea rate limit banner",void 0,void 0,xe)},[E,a]),N=!ut(),A=Yc(i),I=xf(i,$t.signUpButtonText),{eligible:P,isLoading:R}=Ct(We.hasSeenTatertotNux),O=Xe(i,"1368081792"),L=x9(),D=Ta({skip:l!=="agent-connector-in-context-upsell",fetchValidLinksOnly:!0,productSku:"n7jupd"}),H=Array.from(D.connectorLinks.values()).some(xe=>xe.some(ce=>ce.connector_id===(m==null?void 0:m.connector_id))),{addSource:V}=Da(t),q=xe=>{switch(xe){case Yt.CONNECT_CONNECTOR:return{text:$t.connect,onClick:()=>{B.logEventWithStatsig("Agent Connector In Context Upsell Banner CTA Clicked","chatgpt_agent_connector_in_context_upsell_banner_cta_clicked",{location:"Agent Connector In Context Upsell Banner CTA Clicked",eventProperties:k});const ce=Rt(t),we=ce?new URL(ya(ce),window.location.origin):new URL(window.location.href);if(we.searchParams.set("oauth_success","true"),!!(m!=null&&m.connector_id))if(H){V(Ca[m==null?void 0:m.connector_id]);return}else L({connectorId:m==null?void 0:m.connector_id,redirectAfter:we.toString(),systemHintType:Ye.Agent})}};case Yt.AUTHENTICATE:return{text:A?$t.logInButtonText:I,onClick:()=>{os(i,{fallbackScreenHint:A?"login":"signup",callback:ce=>{A?B.logLogInButtonClicked({location:"Rate limit banner - ".concat(l),provider:ce},S(l)):B.logSignUpButtonClicked({location:"Rate limit banner - ".concat(l),provider:ce},S(l))},skipLoginModal:!zr(i)})}};case Yt.AUTHENTICATE_SECONDARY:return{text:A?I:$t.logInButtonText,onClick:()=>{os(i,{fallbackScreenHint:A?"signup":"login",callback:ce=>{A?B.logSignUpButtonClicked({location:"Rate limit banner - ".concat(l),provider:ce},S(l)):B.logLogInButtonClicked({location:"Rate limit banner - ".concat(l),provider:ce},S(l))},skipLoginModal:!zr(i)})}};case Yt.GET_PLUS:return{text:Rp(i),onClick:()=>{B.logRateLimitGetPlusButtonClicked(k),N?os(i,{fallbackScreenHint:A?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:ce=>{A?B.logLogInButtonClicked({location:"Rate limit banner Get Plus upsell",provider:ce},Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Get Plus upsell",provider:ce},Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL)},skipLoginModal:!zr(i)}):an(E,"Prompt textarea rate limit banner")}};case Yt.NEW_CHAT:return{text:Mi.newChatButton,onClick:()=>{B.logNewChatButtonClicked({location:w}),Pl(E)}};case Yt.DEEP_RESEARCH_IN_CONTEXT_UPSELL:{const ce=Se.findNode(Tt(t),ge=>y9(ge.message)),we=ce?xo(ce.message):void 0;return{text:Mi.tryItButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Deep Research CTA Clicked","chatgpt_in_context_upsell_banner_deep_research_cta_clicked",{location:"In-context upsell deep research - Try it button",eventProperties:k}),g(Ye.Research,{clientThreadId:t});const ge=Ht(h);ge.focus(),Co(ge,we!=null?we:"")}}}case Yt.GET_PRO:return{text:sne(i),onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(T({},k),{upgrade_plan_tye:"pro"})),N?os(i,{fallbackScreenHint:A?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:ce=>{A?B.logLogInButtonClicked({location:"Rate limit banner Get Pro upsell",provider:ce},Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Get Pro upsell",provider:ce},Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL)},skipLoginModal:!zr(i)}):an(E,"Prompt textarea rate limit banner")}};case Yt.UPGRADE_TO_GO:return{text:Mi.upgradeToGoButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(T({},k),{upgrade_plan_tye:"go"})),N?os(i,{fallbackScreenHint:A?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:ce=>{A?B.logLogInButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:ce},Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:ce},Lt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL)},skipLoginModal:!zr(i)}):an(E,"Prompt textarea rate limit banner")}};case Yt.GET_BUSINESS:return{text:Mi.getBusinessButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(T({},k),{upgrade_plan_tye:"business"})),an(E,"Prompt textarea rate limit banner")}};case Yt.GET_BUSINESS_TRIAL:return{text:Mi.getBusinessTrialButton,onClick:async()=>{B.logRateLimitUpgradePlanButtonClicked(U(T({},k),{upgrade_plan_tye:"business"})),await M()}};case Yt.GET_GO_TRIAL:return{text:$t.tryGoTrial,onClick:async()=>{B.logRateLimitUpgradePlanButtonClicked(U(T({},k),{upgrade_plan_tye:"go"})),await M()}};case Yt.GET_PLUS_TRIAL:return{text:Mi.getPlusTrialButton,onClick:async()=>{B.logRateLimitUpgradePlanButtonClicked(U(T({},k),{upgrade_plan_tye:"plus"})),await M({view:AO})}};case Yt.TRY_CODEX:return{text:Mi.tryCodexButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Codex CTA Clicked","chatgpt_in_context_upsell_banner_codex_cta_clicked",{location:"In-context upsell codex - Try Codex button",eventProperties:k}),E("/codex")}};case Yt.TRY_TATERTOT:return{text:Mi.tryItButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Tatertot CTA Clicked","chatgpt_in_context_upsell_banner_tatertot_cta_clicked",{location:"In-context upsell tatertot - Try it button",eventProperties:k}),$e.count(He.TATERTOT,"tatertot_upsell_banner_try_it_clicked"),g(Ye.Tatertot,{clientThreadId:t}),!R&&P&&Ee(i,"1586944302")&&mt(i,bPe)}};case Yt.NOTIFY_ADMIN_FOR_CREDITS:case Yt.ADD_CREDITS:return null}};e0(()=>{!O.get("should_change_model_picker",!0)&&k.type==="o3-mini-high-in-context-upsell-plus"&&(k.type="o3-mini-high-in-context-upsell-plus-no-model-switch"),B.logRateLimitBannerShown(k),o==null||o()});const[W,$]=u!=null?u:[];let Z=$;W===Yt.AUTHENTICATE&&v&&(Z=Yt.AUTHENTICATE_SECONDARY);const K=Ee(i,"2861925050");let Y={};K&&(W===Yt.NOTIFY_ADMIN_FOR_CREDITS||W===Yt.ADD_CREDITS)?W===Yt.ADD_CREDITS?Y={customActions:r.jsx(KF,{trigger:"prompt-textarea-rate-limit-banner"})}:W===Yt.NOTIFY_ADMIN_FOR_CREDITS&&(Y={customActions:r.jsx(YF,{creditConsumingProduct:Y_e(l),trigger:"prompt-textarea-rate-limit-banner"})}):Y={primaryAction:q(W),secondaryAction:q(Z)};const ae=m==null?void 0:m.connector_id,{platformConnectors:se,isLoading:ee}=_p(!!ae),re=ae?se.get(ae):void 0;let he=null;const fe=Xe(i,"2206338824"),pe=!b&&yPe.includes(W)?fe.get("web_design_style","control"):"control",le=pe==="composer_banner",ve=pe==="purple_cta";if(x.useEffect(()=>{No.dismiss()},[]),l==="agent-connector-in-context-upsell"){if(ae===void 0||!re||ee)return null;he=r.jsx(Kc,{connector:re,size:"xxlarge"})}return le?r.jsx(OG,{onDismiss:s,title:c,description:d,actions:Y,onInteract:n,bannerIconImageUrl:f!=null?f:void 0,icon:he}):r.jsx(sp,{onDismiss:s,title:c,description:d,actions:Y,primaryButtonClassName:z({"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]":ve}),onInteract:n,bannerIconImageUrl:f!=null?f:void 0,icon:he})}const Mi=Ne({upgradeToGoButton:{id:"SuXEJy",defaultMessage:"Upgrade to Go"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"},tryItButton:{id:"zPDzun",defaultMessage:"Try it"},tryCodexButton:{id:"KcWniZ",defaultMessage:"Try Codex"},getBusinessTrialButton:{id:"PMkLT4",defaultMessage:"Try Business free"},getBusinessButton:{id:"KorZ1v",defaultMessage:"Get Business"},getPlusTrialButton:{id:"H+N0ro",defaultMessage:"Try Plus free"}}),ilt=t=>{"use forget";const e=F.c(33),{clientThreadId:s,composerController:n}=t,o=Cw(),a=Qe(s,Se.getRequestId),i=Qe(s,Se.getCurrentLeafId),l=Sr(a),{markSeen:c}=b9(i),{markSeen:u,markDismissed:d}=FG(i),f=G();let m;e[0]!==f?(m=Xe(f,"1368081792"),e[0]=f,e[1]=m):m=e[1];const p=m;let g;e[2]!==o||e[3]!==i||e[4]!==u||e[5]!==c?(g=o!=null&&o.name?()=>{e:switch(o.name){case"tatertot-in-context-upsell":{c(!1);break e}case"agent-connector-in-context-upsell":{u(!1);break e}case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":hPe(i)}}:void 0,e[2]=o,e[3]=i,e[4]=u,e[5]=c,e[6]=g):g=e[6];const h=g;let _;e[7]!==f?(_=Ee(f,"3612584454"),e[7]=f,e[8]=_):_=e[8];const b=_,y=(o==null?void 0:o.name)==="gpt-4l"&&b;let v;e[9]!==l||e[10]!==y?(v=()=>{l&&!y&&Bm.dismissBanner()},e[9]=l,e[10]=y,e[11]=v):v=e[11];let S;e[12]!==n||e[13]!==l||e[14]!==y?(S=[l,y,n],e[12]=n,e[13]=l,e[14]=y,e[15]=S):S=e[15],x.useEffect(v,S);let C;e[16]!==(o==null?void 0:o.is_dismissible)||e[17]!==(o==null?void 0:o.name)||e[18]!==p||e[19]!==d?(C=o!=null&&o.is_dismissible?()=>{(o==null?void 0:o.name)==="agent-connector-in-context-upsell"?B.logEventWithStatsig("Dismiss Agent Connector In Context Upsell Banner","chatgpt_agent_connector_in_context_upsell_banner_dismissed",{type:"agent-connector-in-context-upsell"}):B.logEventWithStatsig("Rate Limit: Dismiss Banner","chatgpt_rate_limit_banner_dismissed",{type:!p.get("should_change_model_picker",!0)&&(o==null?void 0:o.name)==="o3-mini-high-in-context-upsell-plus"?"o3-mini-high-in-context-upsell-plus-no-model-switch":o==null?void 0:o.name}),(o==null?void 0:o.name)==="agent-connector-in-context-upsell"&&d(),Bm.dismissBanner()}:void 0,e[16]=o==null?void 0:o.is_dismissible,e[17]=o==null?void 0:o.name,e[18]=p,e[19]=d,e[20]=C):C=e[20];const w=C;let k;e[21]!==(o==null?void 0:o.name)||e[22]!==u||e[23]!==c?(k=()=>{e:switch(o==null?void 0:o.name){case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":{SS({interactedInPeriod:!0});break e}case"tatertot-in-context-upsell":{c(!0);break e}case"agent-connector-in-context-upsell":{u(!0);break e}}},e[21]=o==null?void 0:o.name,e[22]=u,e[23]=c,e[24]=k):k=e[24];const E=k;if((o==null?void 0:o.name)==="precise-location-banner")return null;let M;e[25]!==o||e[26]!==s||e[27]!==w||e[28]!==E||e[29]!==h?(M=o&&r.jsx(gt.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(vPe,{clientThreadId:s,rateLimitInfo:o,onDismiss:w,onInteract:E,onMount:h})}),e[25]=o,e[26]=s,e[27]=w,e[28]=E,e[29]=h,e[30]=M):M=e[30];let N;return e[31]!==M?(N=r.jsx(Ms,{children:M}),e[31]=M,e[32]=N):N=e[32],N};function SPe(t,e,s,n,o,a,i,l,c,u,d,f,m){if(c||(t.name==="o3-mini-high-in-context-upsell-free"||t.name==="o3-mini-high-in-context-upsell-plus")&&(e.some(S=>S.model_slug==="o4-mini-high")||(s==null?void 0:s.id)==="o4-mini-high")||l&&i&&mo(Date.now(),i)<hS)return!1;const g=n==null||mo(Date.now(),n)>=gPe,h=o===u,_=i==null||a==null||mo(Date.now(),i)>=hS||a<pPe;if(!(g&&_||h))return!1;switch(t.name){case"deep-research-in-context-upsell":return d("should_show_deep_research_upsell_banner",!1);case"deep-research-in-context-upsell-free":return d("should_show_deep_research_upsell_banner_free",!1);case"o3-mini-high-in-context-upsell-free":return d("should_show_o3_mini_high_upsell_banner_free_user_to_plus",!1);case"o3-mini-high-in-context-upsell-plus":return d("should_show_o3_mini_high_upsell_banner_plus_user",!1);case"codex-in-context-upsell":return f("should_show_codex_upsell_banner",!1);case"codex-in-context-upsell-plus":return m("should_show_codex_upsell_banner",!1);default:return!1}}function llt(t){"use no forget";var w;const e=G(),s=D_(),n=oe(()=>yr(e)),o=J_(),a=oe(()=>Cs(Et(e,t))),i=Qe(t,Se.getRequestId),l=Qe(t,Se.getCurrentLeafId),c=Sr(i),u=_S(k=>k.lastSeenInContextUpsellBannerAt),d=yS(k=>k.inContextUpsellBannerPeriodExposureCount),f=xS(k=>k.inContextUpsellBannerPeriodStartAt),m=vS(k=>k.inContextUpsellBannerLastSeenId),p=bS(k=>k.inContextUpsellBannerInteractedInPeriod),g=Xe(e,"1368081792"),h=Xe(e,"1738106734"),_=Xe(e,"3861158060"),b=Xe(e,"1092897457"),y=Cw(),{canBeSeen:v}=b9(l),{canBeSeen:S}=FG(l);if(s||n)return!1;let C=!1;switch(y==null?void 0:y.name){case null:case void 0:break;case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":C=SPe(y,o,a,u,m,d,f,p,c,l,g.get,h.get,_.get);break;case"tatertot-in-context-upsell":C=v&&b.get("is_tatertot_enabled",!0)&&b.get("is_upsell_banner_enabled",!0);break;case"agent-connector-in-context-upsell":C=S&&((w=y.metadata)==null?void 0:w.connector_id)!==void 0;break;case"precise-location-banner":C=!1;break;default:C=!0}return!c&&C}function clt(t){"use forget";const e=F.c(2);if(!t.shouldRender)return null;let s;return e[0]!==t?(s=r.jsx(CPe,T({},t)),e[0]=t,e[1]=s):s=e[1],s}function CPe({contentArea:t,children:e}){"use no forget";const{store:s}=Mf(),n=x.useRef(null);return s.useContentAreaResizeObserver(t,n),r.jsx("div",{ref:n,className:"relative h-full w-full",children:e})}const ult=Bt(()=>Le(!1)),CE=t=>{switch(t){case"thumbsDown":return"thumbs_down";case"thumbsUp":return"thumbs_up"}},wPe="ecosystem_app_feedback",kPe="ecosystem_suggestion_interaction";function Fa(t,e,s="CHAT"){return{signal_detail:{common_metadata:e},signal_type:t,signal_metadata:{},user_metadata:{},product_surface:s}}function Ba(t){de.safePost("/unified_user_signals",{requestBody:t,authOption:is.SendIfAvailable})}function TPe(t,e,s,n="CHAT",o){var a=Fa("message_feedback",T({conversation_id:e,message_id:s},o!=null&&o.originatingConversationId?{originating_conversation_id:o.originatingConversationId}:{}),n);a.signal_detail.message_feedback=t,Ba(a)}function EPe(t,e,s,n="CHAT"){var o=Fa("conversation_rating",{conversation_id:e,message_id:s},n);o.signal_detail.conversation_rating=t,Ba(o)}function dlt(t,e,s,n,o={},a="CHAT"){const i=Fa(t,{conversation_id:e,message_id:s,image_generation_id:n},a);Object.assign(i.signal_detail,o),Ba(i)}function wE(t,e,s,n="CHAT"){var o=Fa("turn_regeneration",{conversation_id:e,model_slug:s},n);o.signal_detail.turn_regeneration=t,Ba(o)}function flt(t,e,s="CHAT"){var n=Fa("active_branch_switch",{conversation_id:e},s);n.signal_detail.active_branch_switch=t,Ba(n)}function MPe(t,e,s,n,o="CHAT"){return Fa(t,{conversation_id:e,message_id:s,model_slug:n},o)}function mlt(t,e,s,n,o,a,i="CHAT"){if(!Ee(a,"2637496240"))return;const c=MPe(t==="accept"?"writing_block_magic_edit_accepted":"writing_block_magic_edit_rejected",s,n,o,i);t==="accept"?c.signal_detail.writing_block_magic_edit_accepted=e:c.signal_detail.writing_block_magic_edit_rejected=e,Ba(c)}function NPe(t,e,s="CHAT"){const n=Fa("survey_submission",{conversation_id:e},s);n.signal_detail.survey_submission=t,Ba(n)}function APe(t,e,s="CHAT"){const n=Fa("survey_seen",{conversation_id:e},s);n.signal_detail.survey_seen=t,Ba(n)}function IPe(t,e,s="CHAT"){var o,a;const n=Fa("survey_dismissed",{conversation_id:e},s);n.signal_detail.survey_dismissed={survey_campaign_name:(o=t.survey_campaign_name)!=null?o:null,survey_election_id:(a=t.survey_election_id)!=null?a:null},Ba(n)}function plt({rating:t,conversationId:e,messageId:s,suggestionMessageId:n,attributionId:o,widgetType:a,productSurface:i="CHAT"}){const l=Fa(wPe,{conversation_id:e!=null?e:null,message_id:s!=null?s:null},i);l.signal_detail.ecosystem_app_feedback={rating:CE(t),attribution_id:o!=null?o:null,widget_type:a!=null?a:null,suggestion_message_id:n!=null?n:null},Ba(l)}function jPe({conversationId:t,messageId:e,suggestionMessageId:s,connectorId:n,eventType:o,productSurface:a="CHAT"}){if(!t||!e||!n)return;const i=Fa(kPe,{conversation_id:t,message_id:e},a);i.signal_detail.ecosystem_suggestion_interaction={suggestion_message_id:s,connector_id:n,event_type:o},Ba(i)}function glt(t){"use forget";const e=F.c(13),{clientThreadId:s,conversationMode:n,retryOption:o,sourceEvent:a}=t,i=G();let l;e[0]!==s||e[1]!==n?(l={clientThreadId:s,conversationMode:n},e[0]=s,e[1]=n,e[2]=l):l=e[2];const c=rw(l);let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u={disablePerfDetector:!0},e[3]=u):u=e[3];const{lastAssistantMessageId:d,lastAssistantModelSlug:f,parentPromptId:m}=Qe(s,PPe,u);let p;return e[4]!==s||e[5]!==i||e[6]!==d||e[7]!==f||e[8]!==m||e[9]!==c||e[10]!==o||e[11]!==a?(p=()=>{if(!d||!m)return;const g=Rt(s);g&&f&&Ee(i,"3247947701")&&wE({retry_option:o,parent_prompt_id:m},g,f),c({nodeId:d,requestedModelId:f!=null?f:void 0,sourceEvent:a})},e[4]=s,e[5]=i,e[6]=d,e[7]=f,e[8]=m,e[9]=c,e[10]=o,e[11]=a,e[12]=p):p=e[12],p}function PPe(t){var s,n,o,a;if(!t)return{lastAssistantMessageId:null,lastAssistantModelSlug:null,parentPromptId:null};const e=Se.getLastAssistantMessage(t);return e?{lastAssistantMessageId:e.id,lastAssistantModelSlug:(n=(s=e.metadata)==null?void 0:s.model_slug)!=null?n:null,parentPromptId:(a=(o=Se.getParentPromptNode(t,e.id))==null?void 0:o.id)!=null?a:null}:{lastAssistantMessageId:null,lastAssistantModelSlug:null,parentPromptId:null}}const RPe="2751188136";function OPe(t){const e=ft.getItem(Be.FirstSeenPulseAnnouncementBannerAt);if(e==null)return!1;const s=Number(e);if(Number.isNaN(s))return!1;const n=ta(s);return mo(new Date,n)>t}function LPe(t){const e=ft.getItem(Be.PulseAnnouncementBannerImpressions);if(e==null)return!1;const s=Number(e);return Number.isNaN(s)?!1:s>=t}function DPe(){const t=ft.getItem(Be.LastSeenPulseAnnouncementBannerAt);if(t==null)return!1;const e=Number(t);if(Number.isNaN(e))return!1;const s=ta(e);return mo(new Date,s)<1}function hlt(t){const e=js(t,RPe),s=e.get("max_days_visible",-1);if(s>=0&&OPe(s))return!0;const n=e.get("max_impressions",-1);return!!(n>=0&&LPe(n)||e.get("limit_one_impression_per_day",!1)&&DPe())}function _lt(){return ft.getItem(Be.HasDismissedPulseAnnouncementBanner)!=null}function xlt(){ft.setItem(Be.HasDismissedPulseAnnouncementBanner,!0)}function ylt(){const t=ft.getItem(Be.PulseAnnouncementBannerImpressions),e=Number(t),s=Number.isNaN(e)?1:e+1;ft.setItem(Be.PulseAnnouncementBannerImpressions,s);const n=Wo(new Date);ft.setItem(Be.LastSeenPulseAnnouncementBannerAt,n),ft.getItem(Be.FirstSeenPulseAnnouncementBannerAt)==null&&ft.setItem(Be.FirstSeenPulseAnnouncementBannerAt,n)}const FPe=70,EI="radial-gradient(circle at center, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 99%)",HG=t=>{"use forget";var c,u;const e=F.c(5),{images:s}=t,o=oe(fc)?28:21,a=o>s.length&&((c=s.at(0))==null?void 0:c.url)===((u=s.at(-1))==null?void 0:u.url)?o-1:o;let i;e[0]!==a?(i=Array.from({length:a}),e[0]=a,e[1]=i):i=e[1];let l;if(e[2]!==s||e[3]!==i){const d=i.map((f,m)=>s[m%s.length]);l=r.jsx(BPe,{images:d,imageSize:80}),e[2]=s,e[3]=i,e[4]=l}else l=e[4];return l},BPe=t=>{"use forget";const e=F.c(12),{images:s,imageSize:n}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=z("flex h-45 w-full max-w-170 items-center justify-center transition-opacity duration-200 ease-in-out"),e[0]=o):o=e[0];let a,i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={maskImage:EI,WebkitMaskImage:EI,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},i=z("absolute start-1/2 top-0 aspect-square w-[190%] -translate-x-1/2 animate-spin"),l={animationDuration:"".concat(FPe,"s")},e[1]=a,e[2]=i,e[3]=l):(a=e[1],i=e[2],l=e[3]);let c;if(e[4]!==n||e[5]!==s){let d;e[7]!==n||e[8]!==s.length?(d=(f,m)=>{const p=m/s.length*360;return r.jsx("div",{className:"absolute inset-0 origin-center",style:{transform:"rotate(".concat(p,"deg)"),transformOrigin:"center"},children:r.jsx("div",{className:"absolute start-1/2 top-0 -translate-x-1/2",children:r.jsx("div",{style:{width:"".concat(n,"px"),height:"".concat(n,"px")},children:r.jsx(Mc,{src:f==null?void 0:f.url,fallbackSrc:f==null?void 0:f.fallback_url,className:"h-full w-full rounded-xl",shadow:!0})})})},"".concat(m,"-").concat(f==null?void 0:f.url))},e[7]=n,e[8]=s.length,e[9]=d):d=e[9],c=s.map(d),e[4]=n,e[5]=s,e[6]=c}else c=e[6];let u;return e[10]!==c?(u=r.jsx("div",{className:o,children:r.jsx("div",{className:"relative h-full w-full",style:a,children:r.jsx("div",{className:i,style:l,children:c})})}),e[10]=c,e[11]=u):u=e[11],u},CS=t=>{"use forget";const e=F.c(13),{firstRef:s,secondRef:n,firstSide:o,secondSide:a,threshold:i,absolute:l}=t,c=i===void 0?200:i,u=l===void 0?!0:l,[d,f]=x.useState(!1);let m;e[0]!==u||e[1]!==s||e[2]!==o||e[3]!==n||e[4]!==a||e[5]!==c?(m=()=>{const g=s.current,h=n.current;if(!g||!h){f(!1);return}const _=()=>{const v=g.getBoundingClientRect(),S=h.getBoundingClientRect(),C=v[o]-S[a];f(u?Math.abs(C)<=c:C<=c)};let b=null;const y=()=>{b!=null&&cancelAnimationFrame(b),b=requestAnimationFrame(()=>{b=null,_()})};return window.addEventListener("resize",y,{passive:!0}),_(),()=>{b!=null&&cancelAnimationFrame(b),window.removeEventListener("resize",y),window.removeEventListener("orientationchange",y)}},e[0]=u,e[1]=s,e[2]=o,e[3]=n,e[4]=a,e[5]=c,e[6]=m):m=e[6];let p;return e[7]!==s||e[8]!==o||e[9]!==n||e[10]!==a||e[11]!==c?(p=[s,n,o,a,c],e[7]=s,e[8]=o,e[9]=n,e[10]=a,e[11]=c,e[12]=p):p=e[12],zn(m,p),d},GG=Bt(()=>Cl(Be.HasSeenPulseOnboarding,()=>!1));function blt(){"use forget";var O,L;const t=F.c(37),e=G();let s;t[0]!==e?(s=()=>Jx(e),t[0]=e,t[1]=s):s=t[1];const{data:n}=oe(s);let o,a;t[2]!==e?(o=()=>{Sbe(e)},a=[e],t[2]=e,t[3]=o,t[4]=a):(o=t[3],a=t[4]),x.useEffect(o,a);let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[5]=i):i=t[5],x.useEffect($Pe,i);let l;t[6]!==(n==null?void 0:n.onboarding_config)?(l=(O=n==null?void 0:n.onboarding_config)!=null?O:{},t[6]=n==null?void 0:n.onboarding_config,t[7]=l):l=t[7];const{image_urls:c,name:u}=l,d=UPe,f=x.useRef(null),m=x.useRef(null);let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p={firstRef:m,secondRef:f,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},t[8]=p):p=t[8];const g=CS(p);let h;t[9]!==e?(h=()=>{GG.set(e,!0),Gn(e).logEventWithStatsig("(Web) FYP Onboarding Completed","chatgpt_web_fyp_onboarding_completed")},t[9]=e,t[10]=h):h=t[10];const _=h,b=g&&"sticky top-0";let y;t[11]!==b?(y=z("relative flex h-45 w-full items-center justify-center",b),t[11]=b,t[12]=y):y=t[12];let v;t[13]!==c?(v=(L=c==null?void 0:c.map(L1))!=null?L:[],t[13]=c,t[14]=v):v=t[14];let S;t[15]!==v?(S=r.jsx(HG,{images:v}),t[15]=v,t[16]=S):S=t[16];let C;t[17]!==S||t[18]!==y?(C=r.jsx("div",{className:y,ref:m,children:S}),t[17]=S,t[18]=y,t[19]=C):C=t[19];let w;t[20]!==u?(w=r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,U(T({},hh.greeting),{values:{name:u}}))}),t[20]=u,t[21]=w):w=t[21];let k;t[22]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"whitespace-pre-line",children:r.jsx(j,T({},hh.onboardingExplanation))}),t[22]=k):k=t[22];let E;t[23]!==w?(E=r.jsxs("div",{className:"flex flex-col gap-4",children:[w,k]}),t[23]=w,t[24]=E):E=t[24];let M;t[25]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(j,T({},hh.next)),t[25]=M):M=t[25];let N;t[26]!==_?(N=r.jsx(ke,{size:"large",className:"w-1/2",onClick:_,children:M}),t[26]=_,t[27]=N):N=t[27];let A;t[28]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx("span",{className:"text-token-text-tertiary px-2 text-sm font-medium",children:r.jsx(j,U(T({},hh.learnMore),{values:{link:d}}))}),t[28]=A):A=t[28];let I;t[29]!==N?(I=r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[N,A]}),t[29]=N,t[30]=I):I=t[30];let P;t[31]!==E||t[32]!==I?(P=r.jsxs("div",{className:"flex w-full flex-col justify-start gap-6 text-xl font-medium",children:[E,I]}),t[31]=E,t[32]=I,t[33]=P):P=t[33];let R;return t[34]!==C||t[35]!==P?(R=r.jsxs("div",{className:"relative mx-auto mb-30 flex w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-hidden px-4 py-6",children:[C,P]}),t[34]=C,t[35]=P,t[36]=R):R=t[36],R}function UPe(t){return r.jsx(qn,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",target:"_blank",rel:"noreferrer",className:"text-token-text-secondary underline",children:t})}function $Pe(){$e.count(He.PULSE,"chatgpt_web_fyp_onboarding_shown")}const hh=Ne({greeting:{id:"SqSmpy",defaultMessage:"Hi, {name}"},onboardingExplanation:{id:"SbZL/F",defaultMessage:"I'm here to surface what's helpful to you once a day, every day. You decide what shows up  if you tell me what to focus on, I'll curate it for you tomorrow."},learnMore:{id:"Chvn9N",defaultMessage:"<link>Learn more</link> about how Pulse works"},next:{id:"U2jFjI",defaultMessage:"Next"}}),HPe=Bt(t=>vt(()=>{var n,o,a;const e=Jx(t),s=(a=(o=(n=e==null?void 0:e.data)==null?void 0:n.onboarding_config)==null?void 0:o.image_urls)!=null?a:[];return new Set(s)})),GPe=()=>{"use forget";const t=F.c(2),e=G();let s;t[0]!==e?(s=()=>kl(()=>{GG(e)||HPe(e).forEach(VPe)}),t[0]=e,t[1]=s):s=t[1],x.useEffect(s)};function VPe(t){const e=new Image;e.src=t}const zPe=Ne({defaultTitle:{id:"pulse.entrypoint.defaultTitle",defaultMessage:"Today's pulse"},seenCaption:{id:"pulse.entrypoint.seenCaption",defaultMessage:"You're all caught up for today."}}),vlt=t=>{"use forget";const e=F.c(8),{pulseId:s,caption:n,previewImages:o,onClick:a}=t,i=G();GPe();let l;e[0]!==n||e[1]!==i||e[2]!==a||e[3]!==o||e[4]!==s?(l=s&&r.jsx(gt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.1,ease:"easeInOut"},className:"mt-10 max-md:hidden",children:r.jsx(Aa,{className:"flex justify-center px-10",children:r.jsx(WPe,{previewImages:o,title:r.jsx(j,T({},zPe.defaultTitle)),caption:n,onClick:()=>{Gn(i).logEventWithStatsig("(Web) FYP Entrypoint Tapped","chatgpt_web_fyp_entrypoint_tapped"),zB.set(i,ST.Chat),$e.count(He.PULSE,"chatgpt_web_fyp_entrypoint_tapped"),a()}})})}),e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsx(Ms,{children:l}),e[6]=l,e[7]=c):c=e[7],c};function WPe(t){"use forget";const e=F.c(19),{onClick:s,previewImages:n,title:o,caption:a}=t,i=G();let l,c;e[0]!==i?(l=()=>{Gn(i).logEventWithStatsig("(Web) FYP Entrypoint Shown","chatgpt_web_fyp_entrypoint_shown"),$e.count(He.PULSE,"chatgpt_web_fyp_entrypoint_shown")},c=[i],e[0]=i,e[1]=l,e[2]=c):(l=e[1],c=e[2]),x.useEffect(l,c);let u;e[3]!==n?(u=r.jsx(VG,{previewImages:n}),e[3]=n,e[4]=u):u=e[4];let d;e[5]!==o?(d=r.jsx("div",{className:"text-sm font-semibold",children:o}),e[5]=o,e[6]=d):d=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(a0,{className:"h-4 w-4 flex-shrink-0"}),e[7]=f):f=e[7];let m;e[8]!==d?(m=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[d,f]}),e[8]=d,e[9]=m):m=e[9];let p;e[10]!==u||e[11]!==m?(p=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[u,m]}),e[10]=u,e[11]=m,e[12]=p):p=e[12];let g;e[13]!==a?(g=r.jsx("div",{className:"text-token-text-tertiary group-hover:text-token-text-secondary min-w-0 flex-shrink truncate text-sm whitespace-nowrap transition-colors",children:a}),e[13]=a,e[14]=g):g=e[14];let h;return e[15]!==s||e[16]!==p||e[17]!==g?(h=r.jsxs("div",{className:"group hover:bg-token-bg-tertiary inline-flex cursor-pointer items-center gap-2 overflow-hidden rounded-full px-4 py-2",onClick:s,children:[p,g]}),e[15]=s,e[16]=p,e[17]=g,e[18]=h):h=e[18],h}function VG(t){"use forget";var b,y,v,S;const e=F.c(15),{previewImages:s,size:n,className:o}=t,a=n===void 0?"sm":n,i=a==="lg"?"relative h-14 w-14":"relative h-7 w-7",l=a==="lg"?"absolute aspect-square h-14 w-14 translate-x-3 rounded-xl object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-3.5 group-hover:rotate-[3deg]":"absolute aspect-square h-7 w-7 translate-x-2 rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-2.5 group-hover:rotate-[3deg]",c=a==="lg"?"absolute aspect-square h-14 w-14 -rotate-[4deg] rounded-xl object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1.5 group-hover:-rotate-[8deg]":"absolute aspect-square h-7 w-7 -rotate-[6.5deg] rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1 group-hover:-rotate-[10deg]";let u;e[0]!==o||e[1]!==i?(u=z(i,o),e[0]=o,e[1]=i,e[2]=u):u=e[2];const d=(b=s[0])==null?void 0:b.url,f=(y=s[0])==null?void 0:y.fallback_url;let m;e[3]!==l||e[4]!==d||e[5]!==f?(m=r.jsx(Mc,{src:d,fallbackSrc:f,className:l}),e[3]=l,e[4]=d,e[5]=f,e[6]=m):m=e[6];const p=(v=s[1])==null?void 0:v.url,g=(S=s[1])==null?void 0:S.fallback_url;let h;e[7]!==c||e[8]!==p||e[9]!==g?(h=r.jsx(Mc,{src:p,fallbackSrc:g,className:c}),e[7]=c,e[8]=p,e[9]=g,e[10]=h):h=e[10];let _;return e[11]!==u||e[12]!==m||e[13]!==h?(_=r.jsxs("div",{className:u,children:[m,h]}),e[11]=u,e[12]=m,e[13]=h,e[14]=_):_=e[14],_}const qPe="/cdn/assets/budget-k7x0kzms.webp",KPe={src:qPe},YPe="/cdn/assets/build_morning_routine-j1dgypfk.webp",QPe={src:YPe},JPe="/cdn/assets/redesign_house-j7tyooum.webp",ZPe={src:JPe},XPe="/cdn/assets/simplify_meal_prep-odaxlo93.webp",eRe={src:XPe},wS=We.hasSeenPulseTasksNux;function Slt(t){"use forget";return zG(t).shouldShow}function zG(t){"use forget";const e=F.c(6),{clientThreadId:s,isNewThread:n}=t,o=G(),{eligible:a,isLoading:i}=Ct(wS),[l,c]=Qe(s,tRe),u=f0("(max-height: 660px)");let d;e[0]!==o?(d=Cf(o),e[0]=o,e[1]=d):d=e[1];const f=d;let m;e[2]!==o?(m=()=>Jx(o,{useCache:!1}),e[2]=o,e[3]=m):m=e[3];const{data:p,isLoading:g}=oe(m),h=(p==null?void 0:p.is_nux)===!0,_=!!s&&!!n&&h&&f&&a&&!i&&!g&&!u&&!l&&!c;let b;return e[4]!==_?(b={shouldShow:_},e[4]=_,e[5]=b):b=e[5],b}function tRe(t){var e;return[Se.hasUserMessage(t),(e=t==null?void 0:t.isLoading)!=null?e:!1]}const Clt=t=>{"use forget";const e=F.c(29),{clientThreadId:s,isNewThread:n,className:o}=t,a=G(),i=yt();let l;e[0]!==s||e[1]!==n?(l={clientThreadId:s,isNewThread:n},e[0]=s,e[1]=n,e[2]=l):l=e[2];const{shouldShow:c}=zG(l),[u]=x.useState(sRe);let d,f;e[3]!==u.length||e[4]!==c?(d=()=>{c&&(B.logEventWithStatsig("ChatGPT Web Pulse Tasks Announcement Banner Shown","chatgpt_web_pulse_tasks_announcement_banner_shown",{preview_image_count:u.length}),$e.count(He.PULSE,"chatgpt_web_pulse_tasks_announcement_banner_shown"))},f=[c,u.length],e[3]=u.length,e[4]=c,e[5]=d,e[6]=f):(d=e[5],f=e[6]),x.useEffect(d,f);let m;e[7]!==a?(m=()=>{_t(a,wS),B.logEventWithStatsig("ChatGPT Web Pulse Tasks Announcement Banner Dismissed","chatgpt_web_pulse_tasks_announcement_banner_dismissed"),$e.count(He.PULSE,"chatgpt_web_pulse_tasks_announcement_banner_dismissed")},e[7]=a,e[8]=m):m=e[8];const p=m;let g;e[9]!==a||e[10]!==i?(g=()=>{_t(a,wS),B.logEventWithStatsig("ChatGPT Web Pulse Tasks Announcement Banner CTA Clicked","chatgpt_web_pulse_tasks_announcement_banner_cta_clicked"),$e.count(He.PULSE,"chatgpt_web_pulse_tasks_announcement_banner_cta_clicked"),zB.set(a,ST.Chat),i({pathname:"/pulse",search:YD("")})},e[9]=a,e[10]=i,e[11]=g):g=e[11];const h=g;if(!c)return null;let _;e[12]!==u?(_=r.jsx(VG,{previewImages:u,size:"lg",className:"flex-shrink-0"}),e[12]=u,e[13]=_):_=e[13];let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(yT,{"aria-hidden":"true",className:"text-token-text-primary h-5 w-5 flex-shrink-0"}),e[14]=b):b=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsxs("div",{className:"flex items-center gap-1",children:[b,r.jsx("p",{className:"text-token-text-primary text-base font-semibold",children:r.jsx(j,T({},Xb.title))})]}),e[15]=y):y=e[15];let v;e[16]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsxs("div",{className:"min-w-0 space-y-[2px] ps-2",children:[y,r.jsx("p",{className:"text-token-text-primary text-sm whitespace-pre-line",children:r.jsx(j,T({},Xb.body))})]}),e[16]=v):v=e[16];let S;e[17]!==_?(S=r.jsx("div",{className:"flex w-full flex-wrap items-center gap-6 md:flex-nowrap",children:r.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-6",children:[_,v]})}),e[17]=_,e[18]=S):S=e[18];const C=S;let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=r.jsx(j,T({},Xb.cta)),e[19]=w):w=e[19];let k;e[20]!==h?(k=r.jsx(ke,{size:"large",color:"primary",onClick:h,children:w}),e[20]=h,e[21]=k):k=e[21];const E=k;let M;e[22]!==o?(M=z("w-full",o),e[22]=o,e[23]=M):M=e[23];let N;return e[24]!==C||e[25]!==E||e[26]!==p||e[27]!==M?(N=r.jsx(_s,{className:M,contentClassName:"flex-row items-center justify-between gap-4 md:gap-8",content:C,customCtas:E,onDismiss:p,verticalCta:!1}),e[24]=C,e[25]=E,e[26]=p,e[27]=M,e[28]=N):N=e[28],N},Xb=Ne({title:{defaultMessage:"Scheduled tasks, now in Pulse",id:"pulse.tasks.announcement.banner.title"},body:{defaultMessage:"Tell ChatGPT what you want to stay on top of and when to send updates.",id:"pulse.tasks.announcement.banner.body"},cta:{defaultMessage:"Try it",id:"pulse.tasks.announcement.banner.cta"}});function sRe(){const t=[QPe.src,ZPe.src,KPe.src,eRe.src].filter(Boolean);if(t.length===0)return[];if(t.length===1)return t.map(L1);const e=Math.floor(Math.random()*t.length);let s=Math.floor(Math.random()*t.length);for(;s===e;)s=Math.floor(Math.random()*t.length);return[t[e],t[s]].map(L1)}function wlt(t){returnwindow.location.host+"/redeem/".concat(t)}function nRe(t){return"/?code=".concat(t,"#referrals")}function klt(t,e,s){return t.formatNumber(e||0,{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:2})}function oRe(t){return"/?program=".concat(t,"#referrals")}function Tlt(t){return"/refer/".concat(t)}function Elt(){const t=G(),e=yt(),{data:s}=PD();x.useEffect(()=>{s&&s.info&&(ts.logShowReferralUpsellAnnouncementBanner(),B.logUpsellOrModalEvent(ks,{eventId:"referral_upsell_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[s]);const n=s==null?void 0:s.info;return n?r.jsx(_s,{title:r.jsx(j,{id:"referralUpsellAnnouncementBanner.title",defaultMessage:"Get up to 12 free months of Plus when you refer classmates"}),content:r.jsx(j,{id:"referralUpsellAnnouncementBanner.content",defaultMessage:"Refer a friend to sign up for ChatGPT, and youll both get a $20 credit."}),primaryCtaText:r.jsx(j,{id:"referralUpsellAnnouncementBanner.primaryCtaText",defaultMessage:"Invite"}),onDismiss:()=>{_t(t,We.hasSeenReferralUpsellAnnouncement),ts.logCloseReferralUpsellAnnouncementBanner()},onPrimaryCtaClick:async()=>{_t(t,We.hasSeenReferralUpsellAnnouncement),ts.logClickReferralUpsellButton(),e(oRe(n.program_name))}}):null}const Mlt=t=>{var i,l,c,u,d,f,m,p;const{data:e,isLoading:s}=dt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>Yp.getReferralProgramMetadata(t)}),n=e,o=(c=(l=(i=n==null?void 0:n.metadata)==null?void 0:i.program_name)!=null?l:t)!=null?c:null,a=(n==null?void 0:n.ineligible_reason)&&(n&&!n.is_eligible&&(u=n.ineligible_reason)!=null?u:null);return{isEligible:(d=n==null?void 0:n.is_eligible)!=null?d:!1,referralMetadata:(f=n==null?void 0:n.metadata)!=null?f:null,programName:o,isReferralLoading:s,referralCode:(m=n==null?void 0:n.referral_code)!=null?m:null,transactionId:(p=n==null?void 0:n.transaction_id)!=null?p:null,referralError:a}},aRe=t=>{var a,i,l,c,u,d;const{data:e,isLoading:s}=dt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>t?Yp.getReferralCodeMetadata(t):{metadata:null,is_referrer:!1,ineligible_reason:null,should_forward_to_checkout:!1}}),n=e,o=(i=(a=n==null?void 0:n.metadata)==null?void 0:a.program_name)!=null?i:null;return{shouldForwardToCheckout:(l=n==null?void 0:n.should_forward_to_checkout)!=null?l:!1,isReferrer:(c=n==null?void 0:n.is_referrer)!=null?c:!1,ineligibleReason:(u=n==null?void 0:n.ineligible_reason)!=null?u:null,referralMetadata:(d=n==null?void 0:n.metadata)!=null?d:null,programName:o,isReferralLoading:s}},kS=We.hasDismissedRefereeRedemption,WG=()=>{const{eligible:t}=Ct(kS),{referralCode:e,discountValue:s,discountDuration:n}=rRe();return{shouldShowBanner:t&&e&&s&&n,referralCode:e,discountValue:s,discountDuration:n}},rRe=()=>{const t=ft.getItem(Be.ReferralCode),{referralMetadata:e}=aRe(t);return{referralCode:t,discountValue:e==null?void 0:e.discount,discountDuration:e==null?void 0:e.duration}},Nlt=()=>{const t=G(),e=Ee(t,"727502549"),s=Ee(t,"550432558"),{shouldShowBanner:n}=WG();return e&&s&&n},iRe=20;function Alt(){const t=G(),e=ne(),s=yt(),{shouldShowBanner:n,referralCode:o,discountValue:a,discountDuration:i}=WG();if(x.useEffect(()=>{n&&o&&a&&i&&(ts.logShowRefereeRedemptionBanner(o),B.logUpsellOrModalEvent(ks,{eventId:"referee_redemption_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[n,o,a,i]),!n||!a||!i)return null;const l=lRe(e,a,i);return r.jsx(_s,{onPrimaryCtaClick:()=>{_t(t,kS),ts.logClickRefereeRedeemButton(o),ft.removeItem(Be.ReferralCode),s(nRe(o))},primaryCtaText:r.jsx(j,{id:"refereeRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}),onDismiss:()=>{_t(t,kS),ts.logCloseRefereeRedemptionBanner(o),ft.removeItem(Be.ReferralCode)},title:l,content:r.jsx(j,{id:"xoQacW",defaultMessage:"Verify you are a student to get your first month of Plus for free."})})}function lRe(t,e,s){var i,l;const o=(l=(i=cf(e.currency_code).code.defaultMessage)==null?void 0:i.toString())!=null?l:kp,a=t.formatNumber(e.value,{style:"currency",currency:o,minimumFractionDigits:0,maximumFractionDigits:2});return e.value===iRe?r.jsx(j,{id:"refereeRedemptionFree",defaultMessage:"Finish redeeming your free month of Plus"}):r.jsx(j,{id:"refereeRedemptionDiscount",defaultMessage:"Get ChatGPT Plus for {discount} off for the {months, plural, one {first month} other {first # months}}.",values:{discount:a,months:s.num_periods}})}async function cRe(t){return de.safePost("/payments/checkout",{requestBody:t,additionalHeaders:hk(null,null,null,await tL("chatgpt_checkout").catch(e=>{Ge.addError(e)}))})}async function uRe(t,e,s,n){B.logEvent("Account Pay: Payment Checkout Clicked",e),pt.logEvent("chatgpt_account_payment_modal_upgrade_button_click",tt.PLUS);const o=await cRe(T(T({plan_name:"chatgptplusplan",billing_details:t},s&&{student_verification_id:s}),n&&{veterans_verification_id:n}));B.logEvent("Account Pay: Navigating to Payment Checkout",U(T({},e),{url:o.url})),pt.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",tt.PLUS,{url:o.url}),s&&ft.setItem(Be.CheckoutFrom,"students"),n&&ft.setItem(Be.CheckoutFrom,"veterans"),window.location.href=o.url}const dRe=t=>{var n;const{data:e,isLoading:s}=dt({queryKey:["referralDiscount",t],queryFn:async()=>t?await Yp.getReferralDiscount():{discount:null}});return{discount:(n=e==null?void 0:e.discount)!=null?n:null,isDiscountLoading:s}},TS=We.hasDismissedReferrerRedemption,qG=()=>{const{eligible:t}=Ct(TS),{discount:e,isDiscountLoading:s}=dRe(t);return{shouldShowBanner:t&&e&&!s,discountValue:e==null?void 0:e.value,discountDuration:e==null?void 0:e.duration}},Ilt=()=>{const t=G(),e=Ee(t,"727502549"),s=Ee(t,"550432558"),{shouldShowBanner:n}=qG();return e&&s&&n},p_="month",KG="year";function jlt(){const t=fs(),e=G(),s=ne(),{country:n}=vG(),o=bG({country:n,currentAccount:t,location:"ReferrerRedemptionAvailableAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0}),a=x.useMemo(()=>U(T({},t==null?void 0:t.subscriptionAnalyticsParams),{referrer:document.referrer}),[t]);async function i(){try{if(!o)return;await uRe(o,a)}catch(p){}}const{shouldShowBanner:l,discountValue:c,discountDuration:u}=qG();if(x.useEffect(()=>{l&&c&&u&&(ts.logShowReferrerRedemptionBanner(),B.logUpsellOrModalEvent(ks,{eventId:"referrer_redemption_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[l,c,u]),!l||!c||!u||!o)return null;const d=fRe(s,o,c,u),f=mRe(s,o,c,u),m=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:d}),r.jsx("span",{className:"text-token-text-secondary",children:f})]});return r.jsx(_s,{onPrimaryCtaClick:()=>{_t(e,TS),ts.logClickReferrerRedeemButton(),i()},primaryCtaText:r.jsx(j,T({},Rp(e))),onDismiss:()=>{_t(e,TS),ts.logCloseReferrerRedemptionBanner()},content:m})}function fRe(t,e,s,n){var d,f;const o=cf(e.currency),a=n?n.period:p_,i=n?n.num_periods:1,l=(f=(d=o.code.defaultMessage)==null?void 0:d.toString())!=null?f:kp,c=t.formatNumber(s.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let u;return a===p_?u=i===1?r.jsx(j,{id:"referrerRedemptionBannerTitleForSingleMonth",defaultMessage:"Your {discount} credit is ready",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerTitleForPluralMonths",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):a===KG&&(u=i===1?r.jsx(j,{id:"referrerRedemptionBannerTitleForSingleYear",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerTitleForPluralYears",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}})),u}function mRe(t,e,s,n){var d,f;const o=cf(e.currency),a=n?n.period:p_,i=n?n.num_periods:1,l=(f=(d=o.code.defaultMessage)==null?void 0:d.toString())!=null?f:kp,c=t.formatNumber(s.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let u;return a===p_?u=i===1?r.jsx(j,{id:"referrerRedemptionBannerContentForSingleMonth",defaultMessage:"Your referral link was used  claim your free month of Plus."}):r.jsx(j,{id:"referrerRedemptionBannerContentForPluralMonths",defaultMessage:"Your referral link earned you {discount} off {num_months} months of Plus.",values:{discount:c,num_months:i}}):a===KG&&(u=i===1?r.jsx(j,{id:"referrerRedemptionBannerContentForSingleYear",defaultMessage:"Your referral link earned you {discount} off a year of Plus.",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerContentForPluralYears",defaultMessage:"Your referral link earned you {discount} off {num_years} years of Plus.",values:{discount:c,num_years:i}})),u}const ev={logDisabledAccess(t){$e.count(He.STUDENTS,"students.web.disabled",{reason:t})},logLandingPageImpression(){$e.count(He.STUDENTS,"students.web.landingPageImpression"),B.logEvent("Students: Landing Page Impression")},logClickLoginButton(t){$e.count(He.STUDENTS,"students.web.clickLoginButton",{key:"source",value:t}),B.logEvent("Students: Click Login Button",{source:t})},logClickVerifyButton(t){$e.count(He.STUDENTS,"students.web.clickVerifyButton",{key:"source",value:t}),B.logEvent("Students: Click Verify Button",{source:t})},logClickCheckoutButton(t){$e.count(He.STUDENTS,"students.web.clickCheckoutButton",{key:"source",value:t}),B.logEvent("Students: Click Checkout Button",{source:t})},logShowNeedsVerificationModal(){$e.count(He.STUDENTS,"students.web.showNeedsVerificationModal"),B.logEvent("Students: Show Needs Verification Modal")},logShowVerifiedModal(){$e.count(He.STUDENTS,"students.web.showVerifiedModal"),B.logEvent("Students: Show Verified Modal")},logError(t){$e.count(He.STUDENTS,"students.web.error",{key:"errorType",value:t})},logShowAnnouncementBanner(){$e.count(He.STUDENTS,"students.web.showAnnouncementBanner"),B.logEvent("Students: Show Announcement Banner")},logClickAnnouncementBanner(){$e.count(He.STUDENTS,"students.web.clickAnnouncementBanner"),B.logEvent("Students: Click Announcement Banner")},logCloseAnnouncementBanner(){$e.count(He.STUDENTS,"students.web.closeAnnouncementBanner"),B.logEvent("Students: Close Announcement Banner")}},Plt="redirectedFromAuth",MI="studentsPromotion";function NI(t){return t?"/students?".concat(t,"=true"):"/students"}function Rlt(t=!1){return t?window.location.origin+"/?".concat(MI,"=true"):"/?".concat(MI,"=true")}function Olt(t){const e=t.hasPaidSubscription(),s=t.getLastActiveSubscription(),n=e&&[fy.CHATGPT_IOS,fy.SORA_IOS].includes(s.purchase_origin_platform),o=e&&s.purchase_origin_platform===fy.MOBILE_ANDROID;return n||o}function Llt(){const t=G(),e=yt();return x.useEffect(()=>{ev.logShowAnnouncementBanner(),B.logUpsellOrModalEvent(ks,{eventId:"students_upsell_announcement_banner_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_s,{title:r.jsx(j,{id:"GA5kGX",defaultMessage:"Students can claim 2 months of Plus, free."}),content:r.jsx(j,{id:"WOGB1g",defaultMessage:"Get access to premium features when you verify youre a student in the US or Canada. {learnMoreLink}",values:{learnMoreLink:r.jsx("span",{className:"underline",children:r.jsx(Ia,{to:NI(),children:r.jsx(j,{id:"0cZpUc",defaultMessage:"Learn more"})})})}}),primaryCtaText:r.jsx(j,{id:"uA26i5",defaultMessage:"Learn More"}),onPrimaryCtaClick:()=>{ev.logClickAnnouncementBanner(),_t(t,We.hasSeenStudentsUpsellAnnouncement),e(NI())},onDismiss:()=>{ev.logCloseAnnouncementBanner(),_t(t,We.hasSeenStudentsUpsellAnnouncement)}})}const Dlt=t=>v9([Pt.GizmoMagicCreate,Pt.GizmoTest],t==null?void 0:t.kind),pRe=t=>v9([Pt.GizmoInteraction,Pt.GizmoMagicCreate,Pt.GizmoTest],t==null?void 0:t.kind);function gRe(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:it.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:As.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:it.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:As.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:it.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:As.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:it.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:As.Image}]}const hRe=df(()=>Le(!1)),YG=df(t=>{const e=Le([],{equals:hp}),s=Le([]),n=vt(()=>{const o=hRe(t),a=qZ(Ht(t));return cx(t)&&!o()&&e().length>0&&!(a!=null&&a())},{getServerFallback:()=>!1});return{autocompletions$:e,shouldShowAutocomplete$:n,personalizedAutocompletePool$:s}});function au(){"use forget";const t=F.c(11),e=G(),{store:s}=Mf();let n;t[0]!==e?(n=ct(e),t[0]=e,t[1]=n):n=t[1];const o=n,a=On(),{clearSystemHintModeTrigger:i,getSystemHintModeTrigger:l}=La(),c=!dx.useDisabledGlobally(),u=Si();let d;return t[2]!==o||t[3]!==a||t[4]!==i||t[5]!==e||t[6]!==u||t[7]!==l||t[8]!==c||t[9]!==s?(d=(f,m,p,g)=>{var re,he,fe,pe,le,ve,Te,xe,ce,we,ge,Ae,Ue,Ie,Me,te,Q;const h=s.getSharedProps();if(!h)return;const{clientThreadId:_,onResetState:b,conversationMode:y}=h,v=Et(e,_);tn.hideThreadHeader();const S=a===Ye.Search,C=S?l(Ye.Search):void 0,w=Tt(_),k=gL(m),E=w!=null&&w.selectedHazelnuts?Array.from(w.selectedHazelnuts):[],M=k.length>0?Array.from(new Set([...E,...k])):E;k.length>0&&nt(_,ie=>{var ye;const _e=new Set((ye=ie.selectedHazelnuts)!=null?ye:[]);for(const Re of k)_e.add(Re);ie.selectedHazelnuts=Array.from(_e)});let N;m.type===it.Starter&&(N=(re=m.data)==null?void 0:re.system_hint);const A=N!=null?N:a,I=(fe=(he=w==null?void 0:w.selectedSources)==null?void 0:he.get(A))!=null?fe:new Set;let P,R;if(wk(m))P=m.categoryId!=="ask"?[m.categoryId]:[],R=m.modelOverride?{model:m.modelOverride}:{};else{const ie=mw(A?[A]:[]);P=(pe=ie.systemHints)!=null?pe:[],R=(le=ie.extraStreamParams)!=null?le:{}}c&&(R.enableMessageFollowups=!0);const O=Cs(v),{content:L,attachments:D}=GH(u,Go(m),O,y,A),H=P.includes(Ye.Slurm),V=P.includes(Ye.Glaux),q=Rx(),W=T(T({suggestion_type:m.type,starter_prompt_id:"id"in m?m.id:void 0,selected_sources:H||V?Array.from(I.values()).map(xRe).filter(Boolean):void 0},P.length>0&&{system_hints:P}),M.length>0&&{selected_hazelnuts:M});if(q&&(W.__internal={search_settings:q}),D.length>0&&(W.attachments=D),m.type===it.Starter&&((ve=m.data)!=null&&ve.kaur1br5)){const ie=(Te=m.data)==null?void 0:Te.kaur1br5;W.kaur1br5=ie}const $=cn(L,W),Z=[];(w==null?void 0:w.startedWithByoMcp)===!0&&Z.push(iw("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));let K;if(P!=null&&P.some(_Re)&&S9(e)){const ie=KZ(e,O.id);ie&&(K=ie)}Ao({conversation:v,requestedModelId:K,promptMessage:$,prependMessages:Z,sourceEvent:f,extraStreamParams:R,completionMetadata:{suggestions:p,suggestion:m,suggestionIndex:g,conversationMode:y!=null?y:w==null?void 0:w.mode,systemHints:P,searchSource:C}});const ae=Se.getCurrentNode(w).message.id;b();const se=(xe=o==null?void 0:o.isK12)!=null&&xe.call(o)?"K12 Use Starter Prompt":void 0,ee=m.type===it.Starter&&((ce=m.data)==null?void 0:ce.quorumHealth)===!0;if(Fx(m,g,_,ae,se),ee){const ie=(Ue=(Ae=(ge=(we=m.data)==null?void 0:we.health_use_case)!=null?ge:m.category)!=null?Ae:m.theme)!=null?Ue:"unknown";B.logEvent("Use Quorum Starter Prompt",{id:m.id,client_thread_id:_,message_id:ae,use_case:ie,role:(Ie=m.data)==null?void 0:Ie.health_role,department:(Me=m.data)==null?void 0:Me.health_department,context_id:(te=m.data)==null?void 0:te.health_context_id,context_label:(Q=m.data)==null?void 0:Q.health_context_label})}yw()||kk(),C&&S&&i(Ye.Search)},t[2]=o,t[3]=a,t[4]=i,t[5]=e,t[6]=u,t[7]=l,t[8]=c,t[9]=s,t[10]=d):d=t[10],d}function _Re(t){return tc(t)}function xRe(t){return EC[t]}const QG=df(()=>{const t=Le(!1);let e=null;const s=o=>{e&&(clearTimeout(e),e=null),t.set(o)};return{shouldHighlight$:t,setShouldHighlight:s,flashHighlight:(o=4e3)=>{s(!0),e=setTimeout(()=>{t.set(!1),e=null},o)}}});function JG(){"use forget";const t=F.c(3),{store:e}=Mf(),s=jo();let n;return t[0]!==s||t[1]!==e?(n=(o,a,i,l)=>{const c=e.getSharedProps(),u=c==null?void 0:c.composerController;if(!u)return;const d=Go(a);if(d==null)return;const f="systemHints"in a?a.systemHints:void 0,m=f&&f.length>0?f[0]:void 0;if(m){const b=c!=null&&c.clientThreadId?{clientThreadId:c.clientThreadId}:void 0;s(m,T({},b?{analyticsMetadata:b}:{}))}if((a.type===it.Starter||a.type===it.Autocomplete||a.type===it.Trending)&&a.requires_file_upload===!0){const{flashHighlight:b}=QG(u);b()}const g=gL(a);g.length>0&&(c!=null&&c.clientThreadId)&&nt(c.clientThreadId,b=>{var S;const y=(S=b.selectedHazelnuts)!=null?S:[],v=new Set(y);for(const C of g)v.add(C);b.selectedHazelnuts=Array.from(v)}),o.preventDefault();const h=Ht(u);Co(h,d),h.focus();const _=c==null?void 0:c.clientThreadId;_&&Fx(a,l,_)},t[0]=s,t[1]=e,t[2]=n):n=t[2],n}function kE(){return"virtualKeyboard"in navigator}const yRe=Zt()(()=>({height:0,isKeyboardOpen:!1,scrollOffset:null,composerHeight:null}));function bRe(t){return t?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable:!1}function vRe(){document.documentElement.classList.add("keyboard-open")}function SRe(){document.documentElement.classList.remove("keyboard-open")}const TE=ys(()=>{const t=Le(null),e=Le(!1),s=Le(null),n=Le(0),o=Le(!1),a=new EventTarget,i=f=>{a.dispatchEvent(new CustomEvent(f))},l=(f,m,p)=>{a.addEventListener(f,m,p)},c=(f,m,p)=>{a.removeEventListener(f,m,p)};setTimeout(()=>{o.set(kE())});function u(f){const m=new AbortController,p=t();if(!p)return;p.blur(),l("keyboard-closed",()=>{m.abort(),f==null||f()},{signal:m.signal});const g=window.setTimeout(()=>{f==null||f(),m.abort()},500);m.signal.addEventListener("abort",()=>{window.clearTimeout(g)})}return{closeKeyboard:u,events:{addEventListener:l,dispatch:i,removeEventListener:c},focusedElement:t,isKeyboardOpen:e,keyboardDimensions:s,keyboardHeight:n,reset:()=>{cl(()=>{t.set(null),e.set(!1),s.set(null),n.set(0)})},supportsVirtualKeyboardApi$:o}});function Flt(t){if(!kE())return;const e=TE(t);let s=!1;const n=navigator.virtualKeyboard.overlaysContent;function o(){if(s)return;e.reset(),document.removeEventListener("focusout",a),SRe(),document.body.style.removeProperty("--screen-keyboard-height"),navigator.virtualKeyboard.removeEventListener("geometrychange",i);let c;const u=d=>{d.target.boundingRect.height===0&&setTimeout(()=>{e.events.dispatch("keyboard-closed"),window.clearTimeout(c)},100)};c=window.setTimeout(()=>{navigator.virtualKeyboard.removeEventListener("geometrychange",u),e.events.dispatch("keyboard-closed")},500),navigator.virtualKeyboard.addEventListener("geometrychange",u)}const a=()=>{s=!1,e.isKeyboardOpen.set(!1),requestAnimationFrame(o)},i=c=>{document.body.style.setProperty("--screen-keyboard-height","".concat(c.target.boundingRect.height,"px")),vRe(),e.keyboardDimensions.set(c.target.boundingRect),e.keyboardHeight.set(c.target.boundingRect.height)},l=c=>{const u=c.target;bRe(u)&&(s=!0,e.focusedElement.set(u),e.isKeyboardOpen.set(!0),e.events.dispatch("keyboard-opened"),document.addEventListener("focusout",a),navigator.virtualKeyboard.addEventListener("geometrychange",i))};return navigator.virtualKeyboard.overlaysContent=!0,document.addEventListener("focusin",l),()=>{navigator.virtualKeyboard.overlaysContent=n,document.removeEventListener("focusin",l),o()}}var tv,AI;function CRe(){if(AI)return tv;AI=1;var t=Math.floor,e=Math.random;function s(n,o){return n+t(e()*(o-n+1))}return tv=s,tv}var sv,II;function ZG(){if(II)return sv;II=1;var t=CRe();function e(s,n){var o=-1,a=s.length,i=a-1;for(n=n===void 0?a:n;++o<n;){var l=t(o,i),c=s[l];s[l]=s[o],s[o]=c}return s.length=n,s}return sv=e,sv}var nv,jI;function wRe(){if(jI)return nv;jI=1;var t=M6(),e=ZG();function s(n){return e(t(n))}return nv=s,nv}var ov,PI;function kRe(){if(PI)return ov;PI=1;var t=YZ();function e(s,n){return t(n,function(o){return s[o]})}return ov=e,ov}var av,RI;function TRe(){if(RI)return av;RI=1;var t=kRe(),e=QZ();function s(n){return n==null?[]:t(n,e(n))}return av=s,av}var rv,OI;function ERe(){if(OI)return rv;OI=1;var t=ZG(),e=TRe();function s(n){return t(e(n))}return rv=s,rv}var iv,LI;function MRe(){if(LI)return iv;LI=1;var t=wRe(),e=ERe(),s=YC();function n(o){var a=s(o)?t:e;return a(o)}return iv=n,iv}var NRe=MRe();const ES=en(NRe),_h=4;function Blt(t){"use forget";const e=F.c(14),{canShowAutocomplete$:s,layoutMode:n,composerController:o,clientThreadId:a}=t,i=G(),l=oe(s);let c;e[0]!==i?(c=TE(i),e[0]=i,e[1]=c):c=e[1];const d=oe(c.supportsVirtualKeyboardApi$);let f;e[2]!==o?(f=(y,v,S)=>{v&&Co(Ht(o),S?"".concat(S.title).concat(S.body):"")},e[2]=o,e[3]=f):f=e[3];const m=f;if(!l)return null;const p=n==="center"?"top-full":"bottom-full",g=d&&"keyboard-open:fixed keyboard-open:bottom-[calc(var(--screen-keyboard-height,0px)+var(--composer-height,100px)+12px)] keyboard-open:px-4";let h;e[4]!==p||e[5]!==g?(h=z("absolute start-0 z-[-1] box-border w-full ps-0",p,g),e[4]=p,e[5]=g,e[6]=h):h=e[6];let _;e[7]!==a||e[8]!==o||e[9]!==m?(_=r.jsx(ARe,{composerController:o,onChange:m,clientThreadId:a}),e[7]=a,e[8]=o,e[9]=m,e[10]=_):_=e[10];let b;return e[11]!==h||e[12]!==_?(b=r.jsx("div",{className:h,children:_}),e[11]=h,e[12]=_,e[13]=b):b=e[13],b}const DI=(t,e,s,n)=>{var l,c,u,d,f,m;const o=(u=(c=(l=t.oneliner)!=null?l:t.body)!=null?c:t.prompt)!=null?u:t.title;if(!o)return null;const a=o,i=U(T({},t),{type:it.Autocomplete,title:(d=t.title)!=null?d:a,body:(m=(f=t.body)!=null?f:t.oneliner)!=null?m:"",autocompletionChunks:XG(Zx(e),a)});return Xe(s,"4031588851").get("personalized_prompts_auto_send",!0)||(i.onSelectOverride=(p,g,h,_)=>n(p,g,h,_)),i};function ARe(t){"use forget";const e=F.c(85),{composerController:s,onSelect:n,onChange:o,clientThreadId:a}=t;let i;e[0]!==s?(i=YG(s),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==l?(c=()=>l.autocompletions$(),e[2]=l,e[3]=c):c=e[3];const u=oe(c);let d;e[4]!==l?(d=()=>l.personalizedAutocompletePool$(),e[4]=l,e[5]=d):d=e[5];const f=oe(d),m=au(),p=G(),g=ne(),[h,_]=x.useState(-1),b=JG();let y,v;e[6]!==a||e[7]!==u?(y=()=>{u.length>0&&u.every(DRe)&&yde(u,a)},v=[u,a],e[6]=a,e[7]=u,e[8]=y,e[9]=v):(y=e[8],v=e[9]),x.useEffect(y,v);const S=LRe;let C;e[10]!==l.autocompletions$||e[11]!==s||e[12]!==p||e[13]!==b||e[14]!==o||e[15]!==f||e[16]!==u?(C=ge=>{const Ae=u.filter(ORe),Ue=f.length>0?f:Ae;if(Ue.length===0)return;const Ie=ES(Ue),Me=ge===void 0?Ie:Ie.filter(ie=>S(ie)!==ge),Q=(Me.length>0?Me:Ie).slice(0,_h).map(ie=>DI(ie,s,p,b)).filter(Boolean);l.autocompletions$.set(()=>Q),_(-1),o==null||o(-1,!1)},e[10]=l.autocompletions$,e[11]=s,e[12]=p,e[13]=b,e[14]=o,e[15]=f,e[16]=u,e[17]=C):C=e[17];const w=wn(C);let k;e[18]!==m||e[19]!==p||e[20]!==n||e[21]!==w?(k=(ge,Ae,Ue,Ie)=>{var Me,te;if(Ae.onSelectOverride)return Ae.onSelectOverride(ge,Ae,Ue,Ie);if(Ae.type===it.Templated){const Q={id:(Me=Ae.id)!=null?Me:"dyn-".concat(Date.now()),name:Ae.title,prompt:Ae.prompt,description:(te=Ae.title)!=null?te:null};JZ({ctx:p,prompt:Q,referer:"autocomplete-suggestion"}),n==null||n(Ae,Ue,Ie);return}n==null||n(Ae,Ue,Ie),m(ge,Ae,Ue,Ie),Ae.category==="personalized"&&w(S(Ae))},e[18]=m,e[19]=p,e[20]=n,e[21]=w,e[22]=k):k=e[22];const E=k,M=u.length>0,[N,A]=x.useState(!1);let I;e[23]!==f.length||e[24]!==u?(I=f.length>_h&&u.some(RRe),e[23]=f.length,e[24]=u,e[25]=I):I=e[25];const P=I;let R;e[26]!==o||e[27]!==h||e[28]!==u?(R=()=>{const ge=h===u.length-1?0:h+1;return _(ge),o==null||o(ge,!0,u[ge]),!0},e[26]=o,e[27]=h,e[28]=u,e[29]=R):R=e[29];const O=wn(R);let L;e[30]!==o||e[31]!==h||e[32]!==u?(L=()=>{const ge=h<=0?u.length-1:h-1;return _(ge),o==null||o(ge,!0,u[ge]),!0},e[30]=o,e[31]=h,e[32]=u,e[33]=L):L=e[33];const D=wn(L);let H;e[34]!==E||e[35]!==h||e[36]!==u?(H=ge=>u[h]?(E(ge,u[h],u,h),!0):!1,e[34]=E,e[35]=h,e[36]=u,e[37]=H):H=e[37];const V=wn(H);let q,W;e[38]!==s||e[39]!==O||e[40]!==D||e[41]!==V?(q=()=>C9(Ht(s),{ArrowDown:O,ArrowUp:D,Enter:V}),W=[s,O,D,V],e[38]=s,e[39]=O,e[40]=D,e[41]=V,e[42]=q,e[43]=W):(q=e[42],W=e[43]),x.useEffect(q,W);let $,Z;e[44]!==N?($=()=>{if(!N){const ge=()=>{A(!0),window.removeEventListener("mousemove",ge)};return window.addEventListener("mousemove",ge),()=>{window.removeEventListener("mousemove",ge)}}},Z=[N],e[44]=N,e[45]=$,e[46]=Z):($=e[45],Z=e[46]),x.useEffect($,Z);let K;e[47]!==o?(K=()=>{_(-1),o==null||o(-1,!1),A(!1)},e[47]=o,e[48]=K):K=e[48];let Y;e[49]!==o||e[50]!==u?(Y=[u,o],e[49]=o,e[50]=u,e[51]=Y):Y=e[51],x.useEffect(K,Y);let ae;e[52]!==l.autocompletions$||e[53]!==s||e[54]!==p||e[55]!==b||e[56]!==o||e[57]!==f||e[58]!==u?(ae=()=>{const ge=u.filter(PRe),Ae=f.length>0?f:ge;if(Ae.length===0)return;B.logEventWithStatsig("Click Prompt More Ideas Button","chatgpt_prompt_more_ideas_clicked");const Ue=new Set(ge.map(Q=>S(Q))),Ie=ES(Ae),Me=Ie.filter(Q=>!Ue.has(S(Q))),te=Me.length>=_h?Me:Ie;l.autocompletions$.set(()=>te.slice(0,_h).map(Q=>DI(Q,s,p,b)).filter(Boolean)),_(-1),o==null||o(-1,!1)},e[52]=l.autocompletions$,e[53]=s,e[54]=p,e[55]=b,e[56]=o,e[57]=f,e[58]=u,e[59]=ae):ae=e[59];const se=wn(ae),ee=M?"block":"hidden";let re;e[60]!==ee?(re=z("bg-token-bg-primary w-full",ee),e[60]=ee,e[61]=re):re=e[61];let he;e[62]!==se||e[63]!==g||e[64]!==P?(he=P&&r.jsxs("div",{className:"flex items-center justify-between px-2.5 pt-6 pb-1",children:[r.jsx("span",{className:"text-token-text-secondary text-sm font-medium",children:g.formatMessage(FI.needInspiration)}),r.jsx("button",{type:"button",onClick:se,onMouseDown:jRe,className:"text-sm font-medium text-blue-400 hover:text-blue-500",children:g.formatMessage(FI.moreIdeas)})]}),e[62]=se,e[63]=g,e[64]=P,e[65]=he):he=e[65];let fe,pe,le;e[66]===Symbol.for("react.memo_cache_sentinel")?(fe={opacity:0},pe={opacity:1},le={opacity:0},e[66]=fe,e[67]=pe,e[68]=le):(fe=e[66],pe=e[67],le=e[68]);const ve=M?"flex":"hidden";let Te;e[69]!==ve?(Te=z("divide-token-border-light w-full flex-col divide-y p-2.5 max-sm:px-0",ve),e[69]=ve,e[70]=Te):Te=e[70];let xe;e[71]!==N||e[72]!==s||e[73]!==E||e[74]!==o||e[75]!==h||e[76]!==u?(xe=u.map((ge,Ae)=>{var Ue;return r.jsx(gt.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:Ae*.03},exit:{opacity:0,translateY:4},className:"w-full",children:r.jsxs("button",{className:z("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",h===Ae?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:Ie=>{Ie.preventDefault(),E(Ie,ge,u,Ae),yw()&&Ht(s).dom.blur()},onMouseDown:IRe,onMouseEnter:()=>{N&&(_(Ae),o==null||o(Ae,!1,ge))},onMouseLeave:()=>{_(-1),o==null||o(-1,!1,ge)},children:[ge.source==="CURATED"&&(ge.iconThumbnailUrl||ge.coverThumbnailImageUrl)?r.jsx("img",{className:z("me-2 flex-none rounded-md object-cover",ge.coverThumbnailImageUrl?"h-7 w-7":"h-8 w-8"),src:ge.iconThumbnailUrl||ge.coverThumbnailImageUrl,alt:""}):ge.emoji?r.jsx("span",{"aria-hidden":"true",className:z("bg-primary text-token-text-primary text-md me-4 flex flex-none items-center justify-center"),children:ge.emoji}):ge.icon?r.jsx("span",{className:"text-token-text-secondary icon me-2 flex-none",children:ge.icon}):null,r.jsx("span",{className:z(ge.category==="personalized"?"text-md":"text-sm","whitespace-pre-wrap"),children:ge.autocompletionChunks&&ge.autocompletionChunks.length>0?r.jsx(r.Fragment,{children:ge.autocompletionChunks.map((Ie,Me)=>{var te;return r.jsx("span",{className:z((te=Ie.className)!=null?te:Ie.isMatched?"text-token-text-tertiary":ge.category==="personalized"?"text-token-text-secondary":"text-token-text-primary"),children:Ie.text},Me)})}):ge.source==="CURATED"?r.jsx("span",{className:z("text-pretty",ge.type===it.Starter||ge.type===it.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:ge.title}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:z("text-pretty",ge.type===it.Starter||ge.type===it.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:ge.title}),r.jsx("span",{className:"text-token-text-primary text-pretty",children:ge.body})]})}),ge.trailing?ge.trailing:null]})},(Ue=ge.id)!=null?Ue:Ae)}),e[71]=N,e[72]=s,e[73]=E,e[74]=o,e[75]=h,e[76]=u,e[77]=xe):xe=e[77];let ce;e[78]!==Te||e[79]!==xe?(ce=r.jsx(gt.ul,{initial:fe,animate:pe,exit:le,className:Te,children:xe}),e[78]=Te,e[79]=xe,e[80]=ce):ce=e[80];let we;return e[81]!==re||e[82]!==he||e[83]!==ce?(we=r.jsxs("div",{className:re,children:[he,ce]}),e[81]=re,e[82]=he,e[83]=ce,e[84]=we):we=e[84],we}function IRe(t){t.preventDefault()}function jRe(t){return t.preventDefault()}function PRe(t){return t.category==="personalized"}function RRe(t){return t.category==="personalized"}function ORe(t){return t.category==="personalized"}function LRe(t){var e,s,n;return(n=(s=(e=t.id)!=null?e:t.prompt)!=null?s:t.oneliner)!=null?n:t.title}function DRe(t){return t.type===it.Autocomplete||t.type===it.Trending}function XG(t,e){t=t.toLocaleLowerCase();const s=e;e=e.toLocaleLowerCase();const n=[];let o=0;for(let l=0;l<e.length&&(o<t.length&&t[o]===e[l]&&(n.push(l),o++),o!==t.length);l++);const a=[];let i=0;if(n.forEach(l=>{if(l>i){const c=s.slice(i,l);c&&a.push({text:c,isMatched:!1})}a.push({text:s[l],isMatched:!0}),i=l+1}),i<e.length){const l=s.slice(i);l&&a.push({text:l,isMatched:!1})}return FRe(a)}function FRe(t){if(t.length===0)return t;const e=[t[0]];for(let n=1;n<t.length;n++){const o=e[e.length-1],a=t[n];o.isMatched===a.isMatched?o.text+=a.text:e.push(a)}const s=e.filter(n=>n.isMatched).reduce((n,o)=>n+o.text.trim().length,0);return e.length<=4&&s>=2?e:[{text:e.map(n=>n.text).join(""),isMatched:!1}]}const FI=Ne({moreIdeas:{id:"AutocompleteSuggestions.moreIdeas",defaultMessage:"More ideas"},needInspiration:{id:"AutocompleteSuggestions.needInspiration",defaultMessage:"Need a little inspiration?"}});function BRe(t=8,e=null){return Ps({queryKey:["promptStarters",t,e],queryFn:async()=>{const s=await de.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:e}},authOption:is.SendIfAvailable});return Ge.addFirstTiming("load.promptStarters"),s}})}function MS(t){var e;return(e=$u(t)?t.promptStarters:t.gizmo.display.prompt_starters)==null?void 0:e.map(s=>({type:it.Starter,title:"",body:s,prompt:s}))}function eV(){const t=G(),e=xs(),s=Ax(S8),n=ut(),o=xg(t,!1);return!n&&s<o.get("new-user-message-count",20)||n&&e&&Date.now()/1e3-e.created<o.get("new-user-age-seconds",336*60*60)}const URe=()=>{const t=G(),e=xg(t,!0),s=eV(),n=ct(t),o=Ee(t,"4100765009"),a=xp()&&Ee(t,"4233029563");return n!=null&&n.isK12()||o||a?()=>!0:()=>s&&e.get("web-enable-for-new-users",!1)||!s&&e.get("web_enable_for_existing_users",!1)};function tV({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const s=URe(),n=G(),o=ct(n),a=Qe(e,d=>d==null?void 0:d.mode),i=pRe(a);let l=!(o!=null&&o.isEnterprisey());const c=Ee(n,"4100765009"),u=xp()&&Ee(n,"4233029563");return(o!=null&&o.isK12()||c||u)&&(l=!0),t&&!i&&l&&s()}function Ult({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const s=G(),n=xg(s,!1),o=eV(),[a,i]=yi("homepage_prompt_style","",g=>typeof g=="string"),l=n.get("homepage_prompt_style","chips"),c=n.get("persist_new_user_experience",!1);let u=l;c&&a&&(u=a);const d=ct(s),f=Ee(s,"4100765009"),m=xp()&&Ee(s,"4233029563");return(d&&(d.isK12()||f)||m)&&(u="tiles"),x.useEffect(()=>{a&&!c?i(""):!a&&o&&c&&i(l)},[a,i,n,o,l,c]),tV({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e})?u:"chips"}const $lt=({clientThreadId:t,limit:e,shouldBeEnabledForDefaultAssistant:s,modelSlug:n,surface:o="chips"})=>{var M,N;const a=pf(),{autocompletions$:i}=YG(a),l=ja(),c=ne(),{clearAllSystemHintModeTriggers:u,setThreadSystemHintMode:d}=La(),f=Qe(t,A=>A==null?void 0:A.mode),m=vi((f==null?void 0:f.kind)===Pt.GizmoInteraction?f.gizmo_id:void 0).data,{gizmoEditorData:p,mode:g}=xw(),h=tV({shouldBeEnabledForDefaultAssistant:s,clientThreadId:t}),{data:_,isSuccess:b}=dt(U(T({},BRe(e,n)),{enabled:h}));if(l==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(g==="test"&&p)return{promptStarters:(M=MS(p))!=null?M:[],isLoading:!1,isSuccess:!0};if(m!=null)return{promptStarters:MS(m),isLoading:!1,isSuccess:!0};if(!h)return{promptStarters:[],isLoading:!1,isSuccess:!0};const y=(N=_==null?void 0:_.items.map(A=>({type:it.Starter,id:A.id,title:A.title,body:A.description,prompt:A.prompt,category:A.category,oneliner:A.oneliner,theme:A.theme,requires_file_upload:A.requires_file_upload,emoji:A.emoji})))!=null?N:[],v=(A,I,P,R)=>{const O=Ht(a);if(I.type===it.Starter&&I.category==="dalle"){requestAnimationFrame(()=>{u(),d(Ye.PictureV2,!0,{}),no(O)}),i.set(gRe(c));return}const L=I.title;i.set([]),O.focus(),Co(O,L),requestAnimationFrame(()=>{const D=y.filter(H=>H.theme===I.theme).map(H=>{const V=to(H.oneliner),q=V.startsWith(H.title);return U(T({},H),{title:q?"".concat(H.title," "):"",body:q?H.body:V,autocompletionChunks:XG(L,V),type:it.Autocomplete})});i.set(D),Fx(I,R,t)})},C=xg(jt(),!1).get("prompt_source","");let w=[];if(o==="tiles"&&(C==="curated"||C===""||C==="personalized"))w=y;else{const A=y==null?void 0:y.reduce((I,P)=>(P.theme&&!I[P.theme]&&(I[P.theme]=P),I),{});if(A)for(const I in A)I!=="For you"&&w.push(A[I])}const k=w.length>0,E=s&&b&&k;return s&&(ur.markStart("StarterPromptChips",ur.NS_COMPOSER),E&&ur.markRendered("StarterPromptChips",ur.NS_COMPOSER)),{onSelectStarterPrompt:v,shouldShowStarterPrompts:E,promptStarters:w}};function xg(t,e=!1){const s=xr(t),n=s.getLayer("4031588851",{disableExposureLog:!e}),o=s.getLayer("3533083032",{disableExposureLog:!e});return ut()?n:o}const Fn=Ne({add_picture_do_rest:{id:"india-viral-image-gen-prompts.add_picture_do_rest",defaultMessage:"Just add a picture  ChatGPT will do the rest."},navratri_title:{id:"india-viral-image-gen-prompts.navratri.title",defaultMessage:"Navratri Garba Glow"},navratri_oneliner:{id:"india-viral-image-gen-prompts.navratri.oneliner",defaultMessage:"Garba night photo, styled for you"},navratri_prompt:{id:"india-viral-image-gen-prompts.navratri.prompt",defaultMessage:"Transform us into a Garba dance celebration, wearing colorful chaniya cholis and kediyus, ready to dance under strings of fairy lights in a festive ground."},diwali_title:{id:"india-viral-image-gen-prompts.diwali.title",defaultMessage:"Diwali Family Lights"},diwali_oneliner:{id:"india-viral-image-gen-prompts.diwali.oneliner",defaultMessage:"Create a Diwali card from your photo"},diwali_prompt:{id:"india-viral-image-gen-prompts.diwali.prompt",defaultMessage:"Change the photo to us wearing traditional clothes, participating in a Diwali celebration. Glowing 'Happy Diwali From [Insert Name]' text written in background with shining letters floats in the air. Make it a slightly stylized festive illustration."},childrens_title:{id:"india-viral-image-gen-prompts.childrens.title",defaultMessage:"Children's Day Story"},childrens_oneliner:{id:"india-viral-image-gen-prompts.childrens.oneliner",defaultMessage:"Make a playful Childrens Day card"},childrens_prompt:{id:"india-viral-image-gen-prompts.childrens.prompt",defaultMessage:"Create a Happy Children's Day greeting card in a photo surrealistic style. The photo looks like there is a big open book with the greeting written on it and the children are playing on swings and slides around it. There are rainbows and confetti all around."},christmas_title:{id:"india-viral-image-gen-prompts.christmas.title",defaultMessage:"Christmas Wonderland Card"},christmas_oneliner:{id:"india-viral-image-gen-prompts.christmas.oneliner",defaultMessage:"Make a snowy family Christmas card"},christmas_prompt:{id:"india-viral-image-gen-prompts.christmas.prompt",defaultMessage:'Make the family celebrate Christmas in a detailed snowy winter wonderland Christmas card style with "Merry Christmas from the [Insert Name]" written in the background.'},cricket_title:{id:"india-viral-image-gen-prompts.cricket.title",defaultMessage:"Cricket Festival Street"},cricket_oneliner:{id:"india-viral-image-gen-prompts.cricket.oneliner",defaultMessage:"Get a custom match-day photo"},cricket_prompt:{id:"india-viral-image-gen-prompts.cricket.prompt",defaultMessage:"Generate a vibrant Indian festival street scene with me included in the celebration and fans in blue jerseys dancing Garba and waving flags, colorful gulal (powder) flying in the air, and a glowing banner reading 'Chak De India' in beautiful English calligraphy."}});function Hlt(){"use forget";var p;const t=F.c(16),e=G(),s=ne();let n;if(t[0]!==e){const{country:g}=ef();n=(g!=null?g:"").toUpperCase(),t[0]=e,t[1]=n}else n=t[1];const o=n;let a;if(t[2]!==s||t[3]!==o){const g=s.formatMessage(Fn.add_picture_do_rest),h=GRe,_=S=>{var k;const C=(k=S.trending_target_countries)!=null?k:[];return C.length===0||o===""?!1:new Set(C.map(HRe)).has(o)},y=[{type:it.Trending,id:"india_viral_navratri_garba",title:s.formatMessage(Fn.navratri_title),body:g,oneliner:s.formatMessage(Fn.navratri_oneliner),prompt:s.formatMessage(Fn.navratri_prompt),category:"dalle",systemHints:[Ye.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-21T18:30:00Z",end_time_utc:"2025-10-02T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-2@2x.png"}],theme:As.ImageGenTrending,source:"CURATED"},{type:it.Trending,id:"india_viral_diwali_family_glow",title:s.formatMessage(Fn.diwali_title),body:g,oneliner:s.formatMessage(Fn.diwali_oneliner),prompt:s.formatMessage(Fn.diwali_prompt),category:"dalle",systemHints:[Ye.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-10-14T18:30:00Z",end_time_utc:"2025-10-22T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-2@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-3@2x.png"}],theme:As.ImageGenTrending,source:"CURATED"},{type:it.Trending,id:"india_viral_childrens_day_card",title:s.formatMessage(Fn.childrens_title),body:g,oneliner:s.formatMessage(Fn.childrens_oneliner),prompt:s.formatMessage(Fn.childrens_prompt),category:"dalle",systemHints:[Ye.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-11-11T18:30:00Z",end_time_utc:"2025-11-14T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/childrens-day@2x.png"}],theme:As.ImageGenTrending,source:"CURATED"},{type:it.Trending,id:"india_viral_christmas_card",title:s.formatMessage(Fn.christmas_title),body:g,oneliner:s.formatMessage(Fn.christmas_oneliner),prompt:s.formatMessage(Fn.christmas_prompt),category:"dalle",systemHints:[Ye.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-12-24T18:30:00Z",end_time_utc:"2025-12-25T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/christmas@2x.png"}],theme:As.ImageGenTrending,source:"CURATED"},{type:it.Trending,id:"india_viral_cricket_festival",title:s.formatMessage(Fn.cricket_title),body:g,oneliner:s.formatMessage(Fn.cricket_oneliner),prompt:s.formatMessage(Fn.cricket_prompt),category:"dalle",systemHints:[Ye.PictureV2],requires_dalle:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-08T18:30:00Z",end_time_utc:"2025-09-28T18:29:59Z"},{start_time_utc:"2025-10-18T18:30:00Z",end_time_utc:"2025-10-19T18:29:59Z"},{start_time_utc:"2025-10-22T18:30:00Z",end_time_utc:"2025-10-23T18:29:59Z"},{start_time_utc:"2025-10-24T18:30:00Z",end_time_utc:"2025-10-25T18:29:59Z"},{start_time_utc:"2025-10-28T18:30:00Z",end_time_utc:"2025-10-29T18:29:59Z"},{start_time_utc:"2025-10-30T18:30:00Z",end_time_utc:"2025-10-31T18:29:59Z"},{start_time_utc:"2025-11-01T18:30:00Z",end_time_utc:"2025-11-02T18:29:59Z"},{start_time_utc:"2025-11-05T18:30:00Z",end_time_utc:"2025-11-06T18:29:59Z"},{start_time_utc:"2025-11-07T18:30:00Z",end_time_utc:"2025-11-08T18:29:59Z"},{start_time_utc:"2025-11-29T18:30:00Z",end_time_utc:"2025-11-30T18:29:59Z"},{start_time_utc:"2025-12-02T18:30:00Z",end_time_utc:"2025-12-03T18:29:59Z"},{start_time_utc:"2025-12-05T18:30:00Z",end_time_utc:"2025-12-06T18:29:59Z"},{start_time_utc:"2025-12-08T18:30:00Z",end_time_utc:"2025-12-09T18:29:59Z"},{start_time_utc:"2025-12-10T18:30:00Z",end_time_utc:"2025-12-11T18:29:59Z"},{start_time_utc:"2025-12-13T18:30:00Z",end_time_utc:"2025-12-14T18:29:59Z"},{start_time_utc:"2025-12-16T18:30:00Z",end_time_utc:"2025-12-17T18:29:59Z"},{start_time_utc:"2025-12-18T18:30:00Z",end_time_utc:"2025-12-19T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/cricket@2x.png"}],theme:As.ImageGenTrending,source:"CURATED"}].filter(S=>_(S)&&h(S)),v=$Re;a=y.filter(v),t[2]=s,t[3]=o,t[4]=a}else a=t[4];const i=a,l=i[Math.floor(Math.random()*i.length)];if(!l){let g;return t[5]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[5]=g):g=t[5],g}const c=l.oneliner;let u;t[6]!==c||t[7]!==l?(u=c?U(T({},l),{title:c}):l,t[6]=c,t[7]=l,t[8]=u):u=t[8];const d=u,f=d.example_image_urls;if(Array.isArray(f)&&f.length>0){const g=f[Math.floor(Math.random()*f.length)];let h;t[9]!==g?(h=(p=g==null?void 0:g["320_2x"])!=null?p:g?Object.values(g)[0]:void 0,t[9]=g,t[10]=h):h=t[10];const _=h;if(typeof _=="string"&&_.length>0){let b;return t[11]!==d||t[12]!==_?(b=[U(T({},d),{coverImageUrl:_})],t[11]=d,t[12]=_,t[13]=b):b=t[13],b}}let m;return t[14]!==d?(m=[d],t[14]=d,t[15]=m):m=t[15],m}function $Re(t){var e;return(e=t.systemHints)==null?void 0:e.includes(Ye.PictureV2)}function HRe(t){return t.toUpperCase()}function GRe(t){var n;const e=(n=t.trending_schedule_utc)!=null?n:[];if(e.length===0)return!1;const s=new Date;for(const o of e){const a=o.start_time_utc,i=o.end_time_utc;if(!a||!i)continue;const l=new Date(a),c=new Date(i);if(l<=s&&s<=c)return!0}return!1}const BI=ue(Ce,"77bc5f",20,20);function Glt({label:t,onClick:e,disabled:s=!1,icon:n,rightIcon:o}){return r.jsxs("button",{className:"group border-token-border-default enabled:hover:bg-token-main-surface-secondary relative flex h-[42px] items-center gap-1.5 rounded-full border px-3 py-2 text-start text-[13px] transition disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]",disabled:s,onClick:e,children:[n,r.jsx("span",{className:"group-hover:text-token-text-primary max-w-full whitespace-nowrap text-gray-600 transition select-none dark:text-gray-500",children:t}),o]})}const yg=ue(Ce,"102c34",20,20),VRe="/cdn/assets/image-gen-style-muppet-n2ibo32s.webp",zRe={src:VRe},WRe="/cdn/assets/image-gen-style-prismatic-nfskhy16.webp",qRe={src:WRe},KRe="/cdn/assets/image-gen-style-stencil-o3ei6xcu.webp",YRe={src:KRe},QRe="/cdn/assets/image-gen-style-vintage-b4hknhkn.webp",JRe={src:QRe},ZRe={vintage:{id:"vintage",title:"Vintage",imageUrl:JRe.src,width:640,height:960,label:Je({id:"ydZalp",defaultMessage:"Vintage"}),textToImagePrompt:Je({id:"QLRC2p",defaultMessage:"Create an image with warm film-inspired tones, a subtle grain overlay, and soft contrast reminiscent of a vintage portrait from the 1970s."}),imageToImagePrompt:Je({id:"oVNStw",defaultMessage:"Restyle this image so it feels vintage: warm film-inspired tones, subtle grain, gentle highlights, and a nostalgic analog finish."})},prismatic:{id:"prismatic",title:"Prismatic",imageUrl:qRe.src,width:640,height:960,label:Je({id:"TEbVxP",defaultMessage:"Prismatic"}),textToImagePrompt:Je({id:"7RS+tT",defaultMessage:"Create an image lit by refracted prism light: iridescent rainbows, sharp beams, crystalline highlights, and dark negative space for contrast."}),imageToImagePrompt:Je({id:"1T27lc",defaultMessage:"Restyle this image with prismatic lighting: refracted rainbow beams, crystalline flares, and dramatic contrast between light and shadow."})},muppet:{id:"muppet",title:"Muppet",imageUrl:zRe.src,width:600,height:600,label:Je({id:"tsCLc1",defaultMessage:"Muppet"}),textToImagePrompt:Je({id:"J8Kj1D",defaultMessage:"Create a playful puppet portrait inspired by classic Muppets: felt textures, stitched seams, button-style eyes, and studio lighting that keeps the tone cheerful."}),imageToImagePrompt:Je({id:"0qfchV",defaultMessage:"Restyle this image as a playful felt puppet: visible stitching, button-style eyes, expressive mouth shapes, and brightly lit studio vibes."})},stencil:{id:"stencil",title:"Stencil",imageUrl:YRe.src,width:600,height:900,label:Je({id:"MX4EIB",defaultMessage:"Stencil"}),textToImagePrompt:Je({id:"wIgcaq",defaultMessage:"Create a bold stencil print: high-contrast monochrome layers, cutout shapes, subtle spray-paint texture, and poster-like composition."}),imageToImagePrompt:Je({id:"wHguJk",defaultMessage:"Restyle this image as a stencil print: graphic cutout shapes, sharp edges, layered spray textures, and bold high-contrast color blocking."})}},XRe=1e3*60*60*24,sV=3,e6e=1e3*60*60*24*7,t6e=1e3*60*60*24*14,Im=Cl(Be.ImageGenV2PromoBannerState,()=>({shownAt:null,dismissedAt:null,clickedAt:null,shownCount:null}));function nV(t){if(!t)return!1;let e=!1;t.shownAt&&(e=Date.now()<t.shownAt+XRe);let s=!1;t.shownCount&&t.shownCount>=sV&&(s=!0);let n=!1;t.dismissedAt&&(n=Date.now()<t.dismissedAt+e6e);let o=!1;return t.clickedAt&&(o=Date.now()<t.clickedAt+t6e),e&&s||n||o}const lv=Ne({title:{id:"HA0Vh3",defaultMessage:"Create your first image"},body:{id:"N/ecLg",defaultMessage:"Got an idea? Try one of our new curated styles and filters or imagine something from scratch."},cta:{id:"H39eD5",defaultMessage:"Try now"}});function Vlt(){"use forget";var E,M,N,A;const t=F.c(20),e=G();let s;t[0]!==e?(s=()=>Xx(e),t[0]=e,t[1]=s):s=t[1];const n=oe(s);let o;t[2]!==((E=n.data)==null?void 0:E.styles)?(o=(N=(M=n.data)==null?void 0:M.styles)==null?void 0:N.filter(i6e).map(r6e),t[2]=(A=n.data)==null?void 0:A.styles,t[3]=o):o=t[3];const a=o;let i;t[4]!==a?(i=a!=null?a:Object.values(ZRe),t[4]=a,t[5]=i):i=t[5];const l=i,c=oe(a6e);let u;t[6]!==c?(u=nV(c),t[6]=c,t[7]=u):u=t[7];const d=u,[f,m]=x.useState(d),p=n.status!=="pending"&&l.length>0&&!f;let g,h;if(t[8]!==p?(g=()=>{p&&(Im.set(o6e),B.logStructuredEvent(y1,{type:b1.CHATGPT_IMAGE_HOME_NUX_TYPE_IMPRESSION}))},h=[p],t[8]=p,t[9]=g,t[10]=h):(g=t[9],h=t[10]),x.useEffect(g,h),!p)return null;let _;t[11]!==e?(_=()=>{B.logStructuredEvent(y1,{type:b1.CHATGPT_IMAGE_HOME_NUX_TYPE_CLICK}),Im.set(n6e),Ee(e,"4219931330")?dl("/images",{state:{source:KC.CHATGPT_IMAGE_HOME_NAVIGATION_SOURCE_TYPE_HOME_NUX}}):os(e,{fallbackScreenHint:"login_or_signup",skipLoginModal:!1,callbackUrl:"/images"})},t[11]=e,t[12]=_):_=t[12];const b=_;let y;t[13]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{Im.set(s6e),x.startTransition(()=>{m(!0)})},t[13]=y):y=t[13];const v=y;let S,C,w;t[14]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx(j,T({},lv.title)),w=r.jsx(j,T({},lv.body)),S=r.jsx(j,T({},lv.cta)),t[14]=S,t[15]=C,t[16]=w):(S=t[14],C=t[15],w=t[16]);let k;return t[17]!==l||t[18]!==b?(k=r.jsx(dG,{imageStyles:l,title:C,description:w,ctaText:S,onCtaClick:b,onDismiss:v}),t[17]=l,t[18]=b,t[19]=k):k=t[19],k}function s6e(t){return U(T({},t),{dismissedAt:Date.now()})}function n6e(t){return U(T({},t),{clickedAt:Date.now()})}function o6e(t){let e=1;return t!=null&&t.shownCount&&t.shownCount<sV&&(e=t.shownCount+1),{shownAt:Date.now(),dismissedAt:null,clickedAt:null,shownCount:e}}function a6e(){return Im()}function r6e(t){var e,s,n,o;return{id:t.id,imageUrl:(n=(s=(e=t.variants)==null?void 0:e[0])==null?void 0:s.url)!=null?n:"",title:(o=t.title)!=null?o:""}}function i6e(t){return t.variants&&t.variants.length>0&&t.title}function zlt(){const t=jt();if(ut())return!1;const s=Im();return nV(s)?!1:Xe(t,"10373540").get("images_noauth_homepage_promo_enabled",!1)}const Wlt=()=>Hs().pathname==="/new-tab-page";function qlt({starterPrompt:t,allPrompts:e,index:s,disabled:n,disableDefaultOnClick:o,onClickOverride:a,className:i,source:l}){var S,C,w;const c=au(),u=JG(),d=xg(jt(),!1),f=(w=(C=(S=t.title)!=null?S:t.body)!=null?C:t.theme)!=null?w:t.prompt,m=k=>{var M;((M=t.systemHints)==null?void 0:M.includes(Ye.PictureV2))&&t.requires_file_upload||d.get("personalized_prompts_enabled",!1)&&!d.get("personalized_prompts_auto_send",!0)?u(k,t,e,s):c(k,t,e,s)},p=a!=null?a:o?void 0:m,g=t.iconImageUrl,h=t.coverImageUrl,_=t.accentColor,b=t.icon,y=_&&h?{backgroundColor:_}:void 0,v=t.emoji;return r.jsxs("button",{disabled:n,onClick:p,className:z("group relative flex h-auto flex-col items-start overflow-hidden rounded-2xl border p-4 text-start transition","border-token-border-default enabled:hover:bg-token-interactive-bg-secondary-hover shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] disabled:opacity-60",i),style:y,"aria-label":f,children:[!g&&h&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:h,alt:"","aria-hidden":"true",className:"absolute inset-0 h-full w-full object-cover object-center"}),r.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"})]}),r.jsx("div",{className:"relative z-10",children:b?r.jsx("div",{"aria-hidden":"true",className:"text-token-text-secondary flex h-6 w-6 -translate-x-4 -translate-y-4 items-center justify-center rounded-md sm:h-12 sm:w-12",children:b}):g?r.jsx("img",{src:g,alt:"","aria-hidden":"true",className:"h-6 w-6 rounded-md sm:h-12 sm:w-12"}):v?r.jsx("div",{"aria-hidden":"true",className:"flex h-6 w-6 items-center justify-center rounded-md text-2xl",children:v}):null}),r.jsx("div",{className:z("pointer-events-none relative z-10 flex h-auto w-full items-start select-none",l!=="features"&&"mt-3",l==="features"&&"-mt-4"),children:r.jsx("div",{className:z("line-clamp-3 text-[15px] leading-[22px]",h?"text-white":"text-token-text-secondary"),children:f})})]})}const oV=ue(Ce,"f8aa74",20,20);function aV(t,e=0){return new Promise(s=>{requestAnimationFrame(()=>{setTimeout(()=>{s(t())},e)})})}class EE{constructor(e){X(this,"namespace","Voice");e&&(this.namespace=e.namespace)}log(e,...s){}info(...e){this.log("log",...e)}debug(...e){this.log("debug",...e)}error(...e){this.log("error",...e)}createChild(e){return new EE({namespace:"".concat(this.namespace,":").concat(e)})}}const _l=new EE,ME=Le({},{name:"voiceTaskStatus",equals:()=>!1}),gd=Le([]),NE=(t,e)=>{ME.set(s=>{const n=s[t],o=typeof e=="function"?e(n):e;return o===void 0?delete s[t]:s[t]=o,s})},Klt=()=>oe(()=>{const e=gd()[0];if(e)return ME()[e.id]==="pending"?e:void 0}),Ylt=t=>{let e=!1;return NE(t,s=>s==="pending"?(e=!0,"running"):s),e},Qlt=t=>{const e=xt(()=>gd());e.find(n=>t===n.id)&&(NE(t,"complete"),gd.set(e.filter(n=>n.id!==t)))},AE=t=>{const e=Ds(),s={id:e,command:t,timestamp:Date.now()};return aV(()=>{gd.set([...gd(),s]),_l.debug("Current voice queue",gd()),NE(e,"pending")}),G_(()=>ME()[e]==="complete")},rV=ue(Ce,"e01b66",20,20),l6e=Object.freeze(Object.defineProperty({__proto__:null,default:rV},Symbol.toStringTag,{value:"Module"})),IE=ue(Ce,"455a38",20,20),c6e=ue(Ce,"3cf414",20,20),g_=t=>{"use forget";var h,_,b,y,v;const e=F.c(29);let s,n,o;e[0]!==t?(h=t,{hint:s,isNextToLabel:n}=h,o=De(h,["hint","isNextToLabel"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o):(s=e[1],n=e[2],o=e[3]);let a;e[4]!==s?(a=u6e(s),e[4]=s,e[5]=a):a=e[5];const i=a,l=i&&(_=s.connectorLogoUrl)!=null?_:null,c=i&&(b=s.connectorLogoUrlDark)!=null?b:null,u=s.isConnector&&i;let d;e[6]!==l||e[7]!==c||e[8]!==u?(d={lightLogoUrl:l,darkLogoUrl:c,enabled:u},e[6]=l,e[7]=c,e[8]=u,e[9]=d):d=e[9];const f=Fp(d);if(s.isConnector){if((y=f.data)!=null&&y.url){const w=(v=f.data)==null?void 0:v.url,k=n?"":s.name;let E;return e[10]!==o||e[11]!==w||e[12]!==k?(E=r.jsx("img",T({src:w,alt:k,className:"icon"},o)),e[10]=o,e[11]=w,e[12]=k,e[13]=E):E=e[13],E}if(s.logo&&!f.isLoading&&!f.error){const w=n?"":s.name;let k;return e[14]!==s.logo||e[15]!==o||e[16]!==w?(k=r.jsx(S1,T({svgString:s.logo,className:"icon","aria-label":w},o)),e[14]=s.logo,e[15]=o,e[16]=w,e[17]=k):k=e[17],k}const S=n?"":s.name;let C;return e[18]!==o||e[19]!==S?(C=r.jsx(Na,T({className:"icon","aria-label":S},o)),e[18]=o,e[19]=S,e[20]=C):C=e[20],C}let m;e[21]!==s.systemHint?(m=hd(s.systemHint),e[21]=s.systemHint,e[22]=m):m=e[22];const p=m;let g;return e[23]!==p||e[24]!==s.logo||e[25]!==s.name||e[26]!==n||e[27]!==o?(g=p?r.jsx(p,T({className:"icon","aria-label":n?"":s.name},o)):r.jsx(S1,T({svgString:s.logo,className:"icon","aria-label":n?"":s.name},o)),e[23]=p,e[24]=s.logo,e[25]=s.name,e[26]=n,e[27]=o,e[28]=g):g=e[28],g};function hd(t){switch(t){case Ye.Search:return kr;case Ye.Think:return yf;case Ye.Research:return ul;case Ye.Canvas:return xi;case Ye.Picture:case Ye.PictureV2:return Nf;case Ye.Video:return c6e;case Ye.Slurm:case Ye.ApiTool:return Na;case Ye.Agent:return rV;case Ye.Tatertot:return r0;case Ye.Glaux:return IE;default:return}}function u6e(t){return"connectorLogoUrl"in t||"connectorLogoUrlDark"in t}function Jlt({intl:t,clientThreadId:e,composerController:s,openFileDialog:n,shouldUseFeatureTiles:o,messages:a}){const i=jo(),l=hd(Ye.Search),c=hd(Ye.PictureV2),u=x.useMemo(()=>[{type:it.Starter,id:"starter-prompt-feature-upload-file",title:t.formatMessage(a.featureUploadFile),body:"",prompt:"",icon:r.jsx(Xc,{className:"icon"})},{type:it.Starter,id:"starter-prompt-feature-create-image",title:t.formatMessage(a.featureCreateImage),body:"",prompt:"",icon:c?r.jsx(c,{className:"icon"}):void 0},{type:it.Starter,id:"starter-prompt-feature-web-search",title:t.formatMessage(a.featureWebSearch),body:"",prompt:"",icon:l?r.jsx(l,{className:"icon"}):void 0},{type:it.Starter,id:"starter-prompt-feature-start-voice-chat",title:t.formatMessage(a.featureStartVoiceChat),body:"",prompt:"",icon:r.jsx(oV,{className:"icon"})}],[c,l,t,a]),d=x.useCallback(h=>{h.preventDefault(),h.stopPropagation(),n==null||n()},[n]),f=x.useCallback(h=>{h.preventDefault(),h.stopPropagation(),AE({type:"START"})},[]),m=x.useCallback(h=>{h.preventDefault(),h.stopPropagation(),i(Ye.PictureV2,{analyticsMetadata:{clientThreadId:e}}),s&&no(Ht(s))},[e,s,i]),p=x.useCallback(h=>{h.preventDefault(),h.stopPropagation(),i(Ye.Search,{analyticsMetadata:{clientThreadId:e}}),s&&no(Ht(s))},[e,s,i]),g=x.useMemo(()=>o?{"starter-prompt-feature-upload-file":d,"starter-prompt-feature-create-image":m,"starter-prompt-feature-start-voice-chat":f,"starter-prompt-feature-web-search":p}:{},[m,f,p,d,o]);return{featureTiles:u,featureTileClickOverrides:g}}const ht=window.sessionStorage,iV=4320*60*1e3,lV=1440*60*1e3;function d6e(){const t=(ht==null?void 0:ht.getItem(Be.MemoryFullBannerDismissed))==="true",e=ht==null?void 0:ht.getItem(Be.MemoryFullBannerDismissedTimestamp);if(!t)return e!=null&&(ht==null||ht.removeItem(Be.MemoryFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return ht==null||ht.removeItem(Be.MemoryFullBannerDismissed),{dismissed:!1,timestamp:null};const s=Number.parseInt(e,10),n=Number.isFinite(s)&&s>=0?s:null;return n==null?(ht==null||ht.removeItem(Be.MemoryFullBannerDismissed),ht==null||ht.removeItem(Be.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-n>=lV?(ht==null||ht.removeItem(Be.MemoryFullBannerDismissed),ht==null||ht.removeItem(Be.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:n}}function f6e(){const t=(ht==null?void 0:ht.getItem(Be.MemoryAlmostFullBannerDismissed))==="true",e=ht==null?void 0:ht.getItem(Be.MemoryAlmostFullBannerDismissedTimestamp);if(!t)return e!=null&&(ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissed),{dismissed:!1,timestamp:null};const s=Number.parseInt(e,10),n=Number.isFinite(s)&&s>=0?s:null;return n==null?(ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissed),ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-n>=iV?(ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissed),ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:n}}const Ji=Zt(Vs(()=>{const{dismissed:t,timestamp:e}=d6e(),{dismissed:s,timestamp:n}=f6e();return{memoryFullBannerDismissed:t,memoryFullBannerDismissedTimestamp:e,memoryAlmostFullBannerDismissed:s,memoryAlmostFullBannerDismissedTimestamp:n}})),hc={dismissBanner(){const t=Date.now();Ji.setState(e=>{e.memoryFullBannerDismissed=!0,e.memoryFullBannerDismissedTimestamp=t}),ht==null||ht.setItem(Be.MemoryFullBannerDismissed,"true"),ht==null||ht.setItem(Be.MemoryFullBannerDismissedTimestamp,t.toString())},dismissAlmostFullBanner(){const t=Date.now();Ji.setState(e=>{e.memoryAlmostFullBannerDismissed=!0,e.memoryAlmostFullBannerDismissedTimestamp=t}),ht==null||ht.setItem(Be.MemoryAlmostFullBannerDismissed,"true"),ht==null||ht.setItem(Be.MemoryAlmostFullBannerDismissedTimestamp,t.toString())},clearDismissedBanner(){Ji.setState(t=>{t.memoryFullBannerDismissed=!1,t.memoryFullBannerDismissedTimestamp=null}),ht==null||ht.removeItem(Be.MemoryFullBannerDismissed),ht==null||ht.removeItem(Be.MemoryFullBannerDismissedTimestamp)},clearAlmostFullDismissedBanner(){Ji.setState(t=>{t.memoryAlmostFullBannerDismissed=!1,t.memoryAlmostFullBannerDismissedTimestamp=null}),ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissed),ht==null||ht.removeItem(Be.MemoryAlmostFullBannerDismissedTimestamp)}};function Zlt(t){var O,L;const e=vw(t),s=oo(),n=Sx(),{data:o}=$p(e,!1,n),a=G(),i=Ml(),l=pk(a,o==null?void 0:o.memoryFullPct,!0),c=typeof l=="object"?l.layer:"control",u=typeof l=="object"?l.threshold:sc,d=Qe(t,D=>Se.findNode(D,H=>H.message.author.role===ot.Tool&&H.message.author.name==="bio")),m=Qe(t,D=>!D||D.isLoading)&&!!t,p=(O=d==null?void 0:d.message.metadata)==null?void 0:O.memory_percentage_used,g=x.useRef(void 0),h=x.useRef(!1),[_,b]=x.useState(!1);x.useEffect(()=>{if(m)return;const D=d==null?void 0:d.message.id;if(!h.current){g.current=D!=null?D:null,h.current=!0;return}D&&D!==g.current&&Promise.resolve().then(()=>b(!0))},[m,d==null?void 0:d.message.id]);const y=p!=null?p*100:null,v=(L=o==null?void 0:o.memoryFullPct)!=null?L:null,S=_?y!=null:v!=null,C=_?y!=null?y:0:v!=null?v:0,w=S&&C>=u,[k,E]=x.useState(!w);x.useEffect(()=>{_&&E(!0)},[_]);const[M,N]=x.useState(!1),A=x.useRef(null),I=x.useRef(!1);x.useEffect(()=>{var H;if(!S)return;const D=(H=A.current)!=null?H:-1/0;A.current=C,D<sc&&C>=sc&&(I.current=!0,Promise.resolve().then(()=>N(!0))),C<sc&&I.current&&(I.current=!1,Promise.resolve().then(()=>N(!1)),Promise.resolve().then(()=>E(!0)))},[S,C,M]);const P=Ji(D=>D.memoryAlmostFullBannerDismissed),R=Ji(D=>D.memoryAlmostFullBannerDismissedTimestamp);switch(x.useEffect(()=>{if(!P||R==null)return;const D=Date.now()-R,H=iV-D;if(H<=0){hc.clearAlmostFullDismissedBanner();return}const V=window.setTimeout(()=>{hc.clearAlmostFullDismissedBanner()},H);return()=>{window.clearTimeout(V)}},[P,R]),c){case"control":return{shouldShowMemoryAlmostFull:!1};case"treatment_upsell_on_convo_start":return{shouldShowMemoryAlmostFull:!s&&i&&w&&k&&!P&&C<100};case"treatment_upsell_on_bio_tool":return{shouldShowMemoryAlmostFull:!s&&i&&w&&_&&k&&!P&&C<100};default:return{shouldShowMemoryAlmostFull:!1}}}function Xlt(t){"use forget";var Z,K;const e=F.c(27),s=vw(t),n=G(),o=oo(),a=Sx(),{data:i}=$p(s,!1,a),l=Ml(),c=pk(n,i==null?void 0:i.memoryFullPct),u=Qe(t,_6e),f=Qe(t,h6e)&&!!t,m=(Z=u==null?void 0:u.message.metadata)==null?void 0:Z.memory_percentage_used,p=x.useRef(void 0),g=x.useRef(!1),[h,_]=x.useState(!1),b=m!=null?m*100:null,y=(K=i==null?void 0:i.memoryFullPct)!=null?K:null,v=h?b!=null:y!=null,S=h?b!=null?b:0:y!=null?y:0,C=v&&S>=zg,[w,k]=x.useState(!C),[E,M]=x.useState(!1),N=x.useRef(null),A=x.useRef(!1);let I,P;e[0]!==h?(I=()=>{h&&k(!0)},P=[h],e[0]=h,e[1]=I,e[2]=P):(I=e[1],P=e[2]),x.useEffect(I,P);let R;e[3]!==(u==null?void 0:u.message.id)||e[4]!==f?(R=()=>{if(f)return;const Y=u==null?void 0:u.message.id;if(!g.current){p.current=Y!=null?Y:null,g.current=!0;return}Y&&Y!==p.current&&Promise.resolve().then(()=>_(!0))},e[3]=u==null?void 0:u.message.id,e[4]=f,e[5]=R):R=e[5];const O=u==null?void 0:u.message.id;let L;e[6]!==f||e[7]!==O?(L=[f,O],e[6]=f,e[7]=O,e[8]=L):L=e[8],x.useEffect(R,L);let D;e[9]!==S||e[10]!==v?(D=()=>{var ae;if(!v)return;const Y=(ae=N.current)!=null?ae:-1/0;N.current=S,Y<zg&&S>=zg&&(A.current=!0,Promise.resolve().then(()=>M(!0))),S<zg&&A.current&&(A.current=!1,Promise.resolve().then(()=>M(!1)),Promise.resolve().then(()=>k(!0)))},e[9]=S,e[10]=v,e[11]=D):D=e[11];let H;e[12]!==S||e[13]!==v||e[14]!==E?(H=[v,S,E],e[12]=S,e[13]=v,e[14]=E,e[15]=H):H=e[15],x.useEffect(D,H);const V=Ji(g6e),q=Ji(p6e);let W,$;switch(e[16]!==V||e[17]!==q?(W=()=>{if(!V||q==null)return;const Y=Date.now()-q,ae=lV-Y;if(ae<=0){hc.clearDismissedBanner();return}const se=window.setTimeout(m6e,ae);return()=>{window.clearTimeout(se)}},$=[V,q],e[16]=V,e[17]=q,e[18]=W,e[19]=$):(W=e[18],$=e[19]),x.useEffect(W,$),c){case"control":{const Y=!o&&l?C&&w&&!V:!1;let ae;return e[20]!==Y?(ae={shouldShowMemoryFull:Y},e[20]=Y,e[21]=ae):ae=e[21],ae}case"treatment_upsell_on_convo_start":{const Y=!o&&l?C&&!V:!1;let ae;return e[22]!==Y?(ae={shouldShowMemoryFull:Y},e[22]=Y,e[23]=ae):ae=e[23],ae}case"treatment_upsell_on_bio_tool":{const Y=!o&&l?C&&h&&!V:!1;let ae;return e[24]!==Y?(ae={shouldShowMemoryFull:Y},e[24]=Y,e[25]=ae):ae=e[25],ae}default:{let Y;return e[26]===Symbol.for("react.memo_cache_sentinel")?(Y={shouldShowMemoryFull:!1},e[26]=Y):Y=e[26],Y}}}function m6e(){hc.clearDismissedBanner()}function p6e(t){return t.memoryFullBannerDismissedTimestamp}function g6e(t){return t.memoryFullBannerDismissed}function h6e(t){return!t||t.isLoading}function _6e(t){return Se.findNode(t,x6e)}function x6e(t){return t.message.author.role===ot.Tool&&t.message.author.name==="bio"}function ect({memoryAlmostFullVariant:t}={}){const e=ne(),{openSettings:s}=Lp(),n=yt(),o=G(),a=ct(o),i=(a==null?void 0:a.isFree())||(a==null?void 0:a.isFreeWorkspace()),l=Lce(o,!0),c=l!=="control",u=e.formatMessage(da.getMore),d=()=>{var m;if(typeof window<"u")try{(m=window.sessionStorage)==null||m.setItem(ID,"true")}catch(p){}};x.useEffect(()=>{t?c&&B.logEventWithStatsig("Memory Banner Almost Full Shown","chatgpt_memory_banner_almost_full_shown",{variant:l,threshold:sc}):B.logEventWithStatsig("Memory Banner Full Shown","chatgpt_memory_banner_full_shown",{variant:l})},[c,t,l]);const f=m=>{B.logEventWithStatsig("Memory Banner Upgrade Clicked","chatgpt_memory_banner_upgrade_clicked",{variant:l,surface:m}),an(n,"Memory Full Banner")};if(t){if(!i||!c)return null;const m=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(ke,{color:"secondary",onClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),d(),s(hn.Personalization)},children:e.formatMessage(da.memoryManageButton)}),r.jsx(ke,{color:"primary",onClick:()=>f("almost_full"),children:u})]});return r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(_s,{title:e.formatMessage(da.memoryAlmostFullTitleTreatment),icon:r.jsx(Nm,{className:"h-6 w-6"}),content:e.formatMessage(da.memoryAlmostFullTreatmentBody),customCtas:m,onDismiss:()=>hc.dismissAlmostFullBanner()})})}if(c){const m=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(ke,{color:"secondary",onClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),d(),s(hn.Personalization)},children:e.formatMessage(da.memoryManageButton)}),r.jsx(ke,{color:"primary",onClick:()=>f("almost_full"),children:u})]});return r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(_s,{icon:r.jsx(Nm,{className:"h-6 w-6"}),title:e.formatMessage(da.memoryFullTitleTreatment),content:e.formatMessage(da.memoryFullTreatmentBody),customCtas:m,onDismiss:()=>hc.dismissBanner()})})}return r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(_s,{title:e.formatMessage(da.memoryFullTitleControl),content:e.formatMessage(da.memoryFullTooltipControl,da.memoryFullTooltipControl.values),primaryCtaText:e.formatMessage(da.memoryManageButton),onPrimaryCtaClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"full"}),s(hn.Personalization)},onDismiss:()=>hc.dismissBanner()})})}const da=Ne({memoryFullTitleControl:{id:"xzFgrm",defaultMessage:"ChatGPT's out of space for saved memories"},memoryFullTitleTreatment:{id:"61wRTj",defaultMessage:"Memory full"},memoryFullTreatmentBody:{id:"bGCh/f",defaultMessage:"Responses may feel less personalized. Upgrade to expand memory, or manage existing memories."},getMore:{id:"LdblxY",defaultMessage:"Get more"},getMoreTreatment:{id:"zq5dLI",defaultMessage:"Upgrade"},memoryManageButton:{id:"a5A88o",defaultMessage:"Manage"},memoryAlmostFullTitleTreatment:{id:"2IibCN",defaultMessage:"Memory almost full"},memoryAlmostFullTreatmentBody:{id:"2wtxF6",defaultMessage:"Once memory is full, responses will feel less personalized. Upgrade to expand memory, or manage existing memories."},memoryTooltipVariant:{id:"h72m3Z",defaultMessage:"<link>Manage</link> saved memories or upgrade to {planType} to get more.",values:{link:t=>r.jsx(Ia,{to:tf(hn.Personalization),className:"underline",children:t})}},memoryFullTooltipControl:{id:"I1DjDy",defaultMessage:"New memories wont be added until you make space. <a>Learn more</a>",values:{a:t=>r.jsx("a",{href:Pce,target:"_blank",rel:"noopener noreferrer",className:"underline",children:t})}}});function tct(t){return Xe(t,"3637408529").get("is_secondary_auth_banner_button_enabled",!1)}function sct(t){const e=G(),s=J$(e),n=Qp(Zp.getMaxBannerClientThreadId);return!(!s||n!==t)}let jr="";const UI={setSessionId(t){jr=t},logImpression(){$e.count(He.JAWBONE,"jawbone_notifications_banner.impression"),Ge.addAction("tasks.notification.impression"),B.logEvent("tasks:notification.impression",{logging_session_id:jr})},logNotNow(){$e.count(He.JAWBONE,"jawbone_notifications_banner.not_now"),Ge.addAction("tasks.notification.not_now"),B.logEvent("tasks:notification.not_now",{logging_session_id:jr})},logAllow(){$e.count(He.JAWBONE,"jawbone_notifications_banner.allow"),Ge.addAction("tasks.notification.allow"),B.logEvent("tasks:notification.allow",{logging_session_id:jr})},logSystemDeny(){$e.count(He.JAWBONE,"jawbone_notifications_banner.system_deny"),Ge.addAction("tasks.notification.system_deny"),B.logEvent("tasks:notification.system_deny",{logging_session_id:jr})},logSystemAllow(){$e.count(He.JAWBONE,"jawbone_notifications_banner.system_allow"),Ge.addAction("tasks.notification.system_allow"),B.logEvent("tasks:notification.system_allow",{logging_session_id:jr})},logSystemSuccess(){$e.count(He.JAWBONE,"jawbone_notifications_banner.system_success"),Ge.addAction("tasks.notification.system_success"),B.logEvent("tasks:notification.system_success",{logging_session_id:jr})},logRegistration(){$e.count(He.JAWBONE,"jawbone_notifications_banner.registration"),Ge.addAction("tasks.notification.registration"),B.logEvent("tasks:notification.registration",{logging_session_id:jr})},logErrorDismissed(){$e.count(He.JAWBONE,"jawbone_notifications_banner.error_dismissed"),Ge.addAction("tasks.notification.error_dismissed"),B.logEvent("tasks:notification.error_dismissed",{logging_session_id:jr})}},_d=window.localStorage,jE=Zt(Vs(()=>{var t;return{initialized:!1,requestingClientThreadId:null,previouslyRequestedClientThreadIds:new Set,lastRequestTime:(t=_d==null?void 0:_d.getItem("oai/apps/jawboneNotificationLastRequestTime"))!=null?t:null,permission:typeof window<"u"&&"Notification"in window?Notification.permission:"default"}})),Xh=jE.getState,xh=jE.setState,nct={initIfNeeded:(t=Xh())=>{var e;t.initialized||(xh({initialized:!0}),typeof window<"u"&&"Notification"in window&&((e=navigator.permissions)==null||e.query({name:"notifications"}).then(s=>{s.onchange=()=>{switch(Notification.permission){case"granted":UI.logSystemAllow();break;case"denied":UI.logSystemDeny();break}xh({permission:Notification.permission})}})))},setRequestingClientThreadId:t=>{xh(e=>{e.previouslyRequestedClientThreadIds.has(t)||(e.requestingClientThreadId=t,e.previouslyRequestedClientThreadIds.add(t))})},clearNotificationRequest:()=>{xh(t=>{if(t.requestingClientThreadId){const e=new Date().toISOString();t.lastRequestTime=e,_d==null||_d.setItem("oai/apps/jawboneNotificationLastRequestTime",e)}t.requestingClientThreadId=null})}},y6e={getRequestingClientThreadId:(t=Xh())=>t.requestingClientThreadId,getLastRequestTime:(t=Xh())=>t.lastRequestTime,getPermission:(t=Xh())=>t.permission};function oct(t){const{requestingClientThreadId:e}=jE(o=>({requestingClientThreadId:y6e.getRequestingClientThreadId(o)})),s=G();return!(!J$(s)||t!==e)}const $I=Pe(()=>me(()=>import("./io60ao17mxhhxril.js"),__vite__mapDeps([233,1,3,4])).then(t=>t.BeaconModal));function act(t){"use forget";const e=F.c(19),{clientThreadId:s,composerController:n,openFileDialog:o}=t,a=Bs(s),i=Qe(s,Se.getCurrentLeafId);let l;e[0]!==i||e[1]!==a?(l={serverThreadId:a,leafId:i},e[0]=i,e[1]=a,e[2]=l):l=e[2];const c=vce(l),u=G();let d;e[3]!==s||e[4]!==u?(d=()=>oi(s,u),e[3]=s,e[4]=u,e[5]=d):d=e[5];const f=d,m=gg(f),p=hg(f),g=x.useRef(!1),h=Ko.useStore();let _;e[6]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{g.current=!1},e[6]=_):_=e[6];let b;e[7]!==i?(b=[i],e[7]=i,e[8]=b):b=e[8],x.useEffect(_,b);let y,v;e[9]!==p||e[10]!==m||e[11]!==s||e[12]!==n||e[13]!==u||e[14]!==c||e[15]!==o||e[16]!==h?(y=()=>{if(!c||g.current||qv(u,$I))return;g.current=!0,B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:c.beacon_id,beacon_name:c.beacon_name,beacon_type:"modal"}),m.mutate(c.beacon_id),mt(u,$I,{trackBeaconDismissAndClearBeaconUIState:()=>{B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:c.beacon_id,beacon_name:c.beacon_name,beacon_type:"modal"}),p.mutate(c.beacon_id),No.dismiss(),K5e(u,c)},modalInfo:c,clientThreadId:s,composerController:n,persistedSystemHintsStore:h,openFileDialog:o})},v=[c,u,m,p,s,n,h,o],e[9]=p,e[10]=m,e[11]=s,e[12]=n,e[13]=u,e[14]=c,e[15]=o,e[16]=h,e[17]=y,e[18]=v):(y=e[17],v=e[18]),x.useEffect(y,v)}function rct(){var l;const t=G(),e=Ee(t,"727502549"),s=Ee(t,"550432558"),{eligible:n}=Ct(We.hasSeenReferralUpsellAnnouncement),{data:o}=PD(n),a=Xe(t,"1976075658"),i=((l=o==null?void 0:o.info)==null?void 0:l.program_name)==="colombia"?a.get("show_banner",!1):!0;return e&&s&&i&&n&&!!(o!=null&&o.info)}function ict(){var u;const t=G(),e=Ee(t,"3148583717"),s=Ee(t,"3362382575"),n=js(t,"1087852479").value,{eligible:o}=Ct(We.hasSeenStudentsUpsellAnnouncement),a=xs(),i=a==null?void 0:a.email,l=(u=n==null?void 0:n.blacklist)!=null?u:[];return Array.isArray(l)&&i&&l.some(d=>i.endsWith(d))?!1:(i==null?void 0:i.endsWith(".edu"))&&o&&e&&s}function lct(t){"use forget";const e=F.c(13),[s,n]=x.useState(!1),o=G();let a;e[0]!==t||e[1]!==o?(a=Et(o,t),e[0]=t,e[1]=o,e[2]=a):a=e[2];const i=a;let l;e[3]!==i?(l=()=>{var g;return((g=Sl(i))==null?void 0:g.value)===Xt.REALTIME},e[3]=i,e[4]=l):l=e[4];const c=oe(l);let u;e[5]!==c?(u=()=>{c&&n(!0)},e[5]=c,e[6]=u):u=e[6];const d=u;let f,m;e[7]!==c?(f=()=>{c||n(!1)},m=[c],e[7]=c,e[8]=f,e[9]=m):(f=e[8],m=e[9]),x.useEffect(f,m);let p;return e[10]!==s||e[11]!==d?(p={maybeSetWaitingForRealtimeOnAbort:d,isWatingForRealtimeStatusChange:s},e[10]=s,e[11]=d,e[12]=p):p=e[12],p}function cct(){const t=G(),e=eX(),s=Ee(t,"1416952492");return x.useMemo(()=>{const n=[];for(const o of e){const a=tX(o.name);a&&n.push(a)}return s&&!n.includes(Ye.Research)&&n.push(Ye.Research),n},[e,s])}function b6e(t){const e=G(),s=ne(),n=ct(e),o=(n==null?void 0:n.isSelfServeBusiness())||(n==null?void 0:n.isEnterpriseCBP()),a=Z6(b=>b.bySystemHint(t)),i=ZZ(XZ(t)),l=i&&o,c=t===Ye.Research?v6e(s.locale,a,o):wc(t)?S6e(s.locale,a,o):null,u=c!=null&&!i,d=t===Ye.Research&&Ee(e,"1416952492"),f=wc(t)&&Ee(e,"926440545"),m=d||f,p=m||i!=null,g=m?r.jsx(j,{id:"composer.skills.unavailable",defaultMessage:"Temporarily unavailable"}):i&&!o?r.jsx(j,{id:"composer.skills.rateLimited",defaultMessage:"{limit} more available on {resetDate}",values:{limit:i.limit,resetDate:new Date(i.resets_after).toLocaleDateString(s.locale,{month:"long",day:"numeric"})}}):void 0;let h,_;return(l||u)&&(h=l?i.title:c==null?void 0:c.label,_=l?i.description:c==null?void 0:c.secondaryLabel),{isBlocked:p,blockedLabel:g,remainingLabel:h,remainingLabelSecondary:_}}function cV(t,e){return new Date(e.reset_after).toLocaleDateString(t,{month:"long",day:"numeric"})}function v6e(t,e,s){return s||!e?null:{label:r.jsx(j,{id:"m6JsYD",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(j,{id:"8V98un",defaultMessage:"More available on {resetDate}",values:{resetDate:cV(t,e)}})}}function S6e(t,e,s){return s||!e?null:{label:r.jsx(j,{id:"nD45w8",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(j,{id:"eBZSNV",defaultMessage:"More available on {resetDate}",values:{resetDate:cV(t,e)}})}}function uct(t,e,s){const n=t.slice(),o=n.splice(e,1)[0];return n.splice(s,0,o),n}function PE(t){lt.sidebarUrlTrayOpen$.set(t)}function dct(){const t=G(),e=sn(Ss),s=fx(t),n=oe(lt.sidebarUrlTrayOpen$),o=oe(lt.context$),a=On(),i=jo(),l=x.useRef(a);x.useEffect(()=>{if(!e||!s)return;const u=l.current;l.current=a,a===Ye.Agent&&u!==Ye.Agent&&o&&(n||PE(!0))},[e,s,a,o,n]);const c=x.useRef(n);x.useEffect(()=>{if(!e||!s)return;const u=n,d=c.current;c.current=u,d&&!u&&a===Ye.Agent&&i(null,{ifPrevSystemHint:Ye.Agent})},[e,s,n,a,i])}var C6e=(t=>(t.ConfigureRepos="configure-repos",t.SyncRepos="sync-repos",t.IndexRepos="index-repos",t))(C6e||{});const w6e=Pe(()=>me(()=>import("./kee8jqsrbjdoukr1.js"),__vite__mapDeps([101,3,1,4,102])).then(t=>t.ContextConnectorDocumentParser));function fct({composerController:t,parsedDocumentHandler:e}){const s=G(),{gdriveLinkStatus:n,o365BusinessLinkStatus:o,o365PersonalLinkStatus:a}=sX(s);return n==="false"&&o==="false"&&a==="false"?null:r.jsx(w6e,{composerController:t,parsedDocumentHandler:e})}const RE=ue(Ce,"1685a9",20,20),OE=ue(Ce,"a18c10",20,20),k6e=ue(Ce,"f735f6",20,20),LE=ue(Ce,"712359",20,20),T6e=ue(Ce,"d09e06",20,20),E6e="webp",M6e=222,N6e=160,A6e="srgb",I6e=3,j6e="uchar",P6e=72,R6e=!1,O6e=8,L6e=!1,D6e=!1,F6e="/cdn/assets/example_bg_1-grdr084h.webp",B6e={format:E6e,width:M6e,height:N6e,space:A6e,channels:I6e,depth:j6e,density:P6e,isProgressive:R6e,paletteBitDepth:O6e,hasProfile:L6e,hasAlpha:D6e,src:F6e},U6e="webp",$6e=222,H6e=160,G6e="srgb",V6e=3,z6e="uchar",W6e=72,q6e=!1,K6e=8,Y6e=!1,Q6e=!1,J6e="/cdn/assets/example_bg_2-bh3fby76.webp",Z6e={format:U6e,width:$6e,height:H6e,space:G6e,channels:V6e,depth:z6e,density:W6e,isProgressive:q6e,paletteBitDepth:K6e,hasProfile:Y6e,hasAlpha:Q6e,src:J6e},X6e="webp",e9e=222,t9e=160,s9e="srgb",n9e=3,o9e="uchar",a9e=72,r9e=!1,i9e=8,l9e=!1,c9e=!1,u9e="/cdn/assets/example_bg_3-ogafarpd.webp",d9e={format:X6e,width:e9e,height:t9e,space:s9e,channels:n9e,depth:o9e,density:a9e,isProgressive:r9e,paletteBitDepth:i9e,hasProfile:l9e,hasAlpha:c9e,src:u9e},f9e=t=>x.createElement("svg",T({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),x.createElement("g",{id:"Icon"},x.createElement("path",{id:"vector",fillRule:"evenodd",clipRule:"evenodd",d:"M7.9082 1.33328C7.93833 1.3333 7.96889 1.33332 7.99992 1.33332C8.03094 1.33332 8.06151 1.3333 8.09164 1.33328C8.6219 1.333 9.01567 1.33278 9.35677 1.42418C10.277 1.67076 10.9958 2.38955 11.2424 3.3098C11.2974 3.51505 11.3192 3.73937 11.3278 4.00103C11.6471 4.00317 11.9259 4.00968 12.1678 4.02945C12.5425 4.06006 12.887 4.12577 13.2106 4.29063C13.7123 4.54629 14.1203 4.95424 14.3759 5.45601C14.5408 5.77957 14.6065 6.12403 14.6371 6.49877C14.6666 6.85956 14.6666 7.30246 14.6666 7.8391V10.1609C14.6666 10.6975 14.6666 11.1404 14.6371 11.5012C14.6065 11.8759 14.5408 12.2204 14.3759 12.544C14.1203 13.0457 13.7123 13.4537 13.2106 13.7093C12.887 13.8742 12.5425 13.9399 12.1678 13.9705C11.807 14 11.3641 14 10.8275 14H5.17237C4.63573 14 4.19283 14 3.83204 13.9705C3.4573 13.9399 3.11283 13.8742 2.78928 13.7093C2.28751 13.4537 1.87956 13.0457 1.6239 12.544C1.45904 12.2204 1.39333 11.8759 1.36271 11.5012C1.33324 11.1404 1.33324 10.6975 1.33325 10.1608V7.83912C1.33324 7.30247 1.33324 6.85956 1.36271 6.49877C1.39333 6.12403 1.45904 5.77957 1.6239 5.45601C1.87956 4.95424 2.28751 4.54629 2.78928 4.29063C3.11283 4.12577 3.4573 4.06006 3.83204 4.02945C4.07395 4.00968 4.35278 4.00317 4.67203 4.00103C4.68063 3.73937 4.70245 3.51505 4.75745 3.3098C5.00403 2.38955 5.72282 1.67076 6.64307 1.42418C6.98417 1.33278 7.37794 1.333 7.9082 1.33328ZM6.00649 3.99998H9.99334C9.98722 3.82827 9.97571 3.73408 9.95449 3.65489C9.8312 3.19477 9.4718 2.83537 9.01168 2.71208C8.86349 2.67238 8.66282 2.66665 7.99992 2.66665C7.33702 2.66665 7.13635 2.67238 6.98816 2.71208C6.52804 2.83537 6.16864 3.19477 6.04535 3.65489C6.02413 3.73408 6.01262 3.82827 6.00649 3.99998ZM3.94061 5.35835C3.64833 5.38223 3.49886 5.42551 3.3946 5.47864C3.14372 5.60647 2.93974 5.81045 2.81191 6.06133C2.75878 6.1656 2.7155 6.31506 2.69162 6.60734C2.6671 6.9074 2.66659 7.2956 2.66659 7.86665V10.1333C2.66659 10.7044 2.6671 11.0926 2.69162 11.3926C2.7155 11.6849 2.75878 11.8344 2.81191 11.9386C2.93974 12.1895 3.14372 12.3935 3.3946 12.5213C3.49886 12.5745 3.64833 12.6177 3.94061 12.6416C4.24067 12.6661 4.62887 12.6667 5.19992 12.6667H10.7999C11.371 12.6667 11.7592 12.6661 12.0592 12.6416C12.3515 12.6177 12.501 12.5745 12.6052 12.5213C12.8561 12.3935 13.0601 12.1895 13.1879 11.9386C13.2411 11.8344 13.2843 11.6849 13.3082 11.3926C13.3327 11.0926 13.3333 10.7044 13.3333 10.1333V7.86665C13.3333 7.2956 13.3327 6.9074 13.3082 6.60734C13.2843 6.31506 13.2411 6.1656 13.1879 6.06133C13.0601 5.81045 12.8561 5.60647 12.6052 5.47864C12.501 5.42551 12.3515 5.38223 12.0592 5.35835C11.7592 5.33383 11.371 5.33332 10.7999 5.33332H5.19992C4.62887 5.33332 4.24067 5.33383 3.94061 5.35835Z",fill:"currentcolor"})));function m9e({usage:t}){const e={work:{icon:f9e,color:"#35AE47"},school:{icon:r0,color:"#E937D1"},personalTasks:{icon:A1,color:"#EA8444"},funAndEntertainment:{icon:T6e,color:"#6C71FF"},justCurious:{icon:yf,color:"#FFCC00"}},s=e[t].icon,n=e[t].color;return r.jsx(s,{className:"icon",style:{color:n}})}function mct({clientThreadId:t}){const e=ne(),s=Ok({clientThreadId:t});return x.useEffect(()=>{pt.logEvent("chatgpt_convo_onboarding_usage_chips_shown")},[]),r.jsx(Ms,{mode:"wait",children:r.jsx(gt.div,{className:"-mx-6 mt-2 flex flex-wrap gap-2 px-6",initial:{opacity:0},animate:{opacity:1,transition:{delay:.2,ease:"easeInOut"}},exit:{opacity:0,transition:{ease:"easeInOut"}},children:["school","work","personalTasks","funAndEntertainment","justCurious"].map(n=>r.jsxs("button",{className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary inline-flex h-[42px] items-center justify-start gap-2 rounded-[25px] border px-4 py-3",onClick:o=>{s({sourceEvent:o,stepPrompt:e.formatMessage(Ld["".concat(n,"Prompt")]),messageMetadata:{onboarding:{main_usages:[{usage:n}]},is_starter_prompt:!0,suggestion_type:it.Starter}}),pt.logEvent("chatgpt_convo_onboarding_usage_chip_clicked",null,{usage:n})},children:[r.jsx("div",{"data-svg-wrapper":!0,className:"relative",children:r.jsx(m9e,{usage:n})}),r.jsx("div",{className:"font-['SF Pro'] text-token-text-primary text-[13px] leading-[18px] font-normal opacity-90",children:e.formatMessage(Ld[n])})]},n))})})}function pct({clientThreadId:t,examples:e}){const s=Ok({clientThreadId:t}),n=[B6e,Z6e,d9e],o=ne();return x.useEffect(()=>{pt.logEvent("chatgpt_convo_onboarding_examples_shown")},[]),r.jsx(Ms,{mode:"wait",children:r.jsxs("div",{children:[r.jsx(gt.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeInOut"},className:"text-token-text-primary text-base",children:o.formatMessage(Ld.tryAnExample)}),r.jsx("ul",{className:"-mx-6 flex list-none flex-nowrap gap-6 overflow-auto px-6 py-4",children:e.map((a,i)=>r.jsx(gt.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:(i+1)*.2,duration:.3},children:r.jsxs("button",{className:"bg-token-main-surface-primary outline-token-border-xlight hover:shadow-token-border-default inline-flex h-60 w-[222px] flex-col items-center justify-start overflow-hidden rounded-2xl outline transition-all duration-300 hover:shadow-lg",onClick:l=>{s({sourceEvent:l,stepPrompt:a.example,messageMetadata:{onboarding:{triggered_tools:[a.feature]},is_starter_prompt:!0,suggestion_type:it.Starter}}),pt.logEvent("chatgpt_convo_onboarding_example_clicked",null,{tool:a.feature})},children:[r.jsx("img",{src:n[i%n.length].src,className:"h-[160px] w-full object-cover",alt:o.formatMessage({id:"chatgpt.new-onboarding.example-prompt",defaultMessage:"Example prompt"})}),r.jsx("div",{className:"inline-flex h-20 w-full gap-1 p-4",children:r.jsx("div",{className:"text-token-text-primary line-clamp-2 shrink grow basis-0 text-start text-base leading-normal",title:a.title,children:a.title})})]})},a.feature))})]})})}function p9e({clientThreadId:t,children:e}){const{isEligible:s,markAsViewed:n}=tD(t),o=ne();return x.useEffect(()=>{s&&tn.showAnnouncementTooltipExclusively(We.hasSeenFilePickerNuxTooltip,!0)},[s]),s?r.jsx(nu,{announcementKey:We.hasSeenFilePickerNuxTooltip,show:!0,side:"top",align:"start",theme:"bright",dismissOnOutsideClick:!0,badge:"none",title:o.formatMessage(Ld.tryUploadingAFile),description:o.formatMessage(Ld.uploadFileExample),onDismiss:n,sideOffset:0,children:e}):e}function Ho(t,e,{checkForDefaultPrevented:s=!0}={}){return function(o){if(t==null||t(o),s===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function uV(t,e=[]){let s=[];function n(a,i){const l=x.createContext(i),c=s.length;s=[...s,i];const u=f=>{var y;const b=f,{scope:m,children:p}=b,g=De(b,["scope","children"]),h=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,_=x.useMemo(()=>g,Object.values(g));return r.jsx(h.Provider,{value:_,children:p})};u.displayName=a+"Provider";function d(f,m){var h;const p=((h=m==null?void 0:m[t])==null?void 0:h[c])||l,g=x.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error("`".concat(f,"` must be used within `").concat(a,"`"))}return[u,d]}const o=()=>{const a=s.map(i=>x.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return x.useMemo(()=>({["__scope".concat(t)]:U(T({},l),{[t]:c})}),[l,c])}};return o.scopeName=t,[n,g9e(o,...e)]}function g9e(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)["__scope".concat(u)];return T(T({},l),f)},{});return x.useMemo(()=>({["__scope".concat(e.scopeName)]:i}),[i])}};return s.scopeName=e.scopeName,s}var Ac=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},h9e=sK[" useInsertionEffect ".trim().toString()]||Ac;function _9e({prop:t,defaultProp:e,onChange:s=()=>{},caller:n}){const[o,a,i]=x9e({defaultProp:e,onChange:s}),l=t!==void 0,c=l?t:o;{const d=x.useRef(t!==void 0);x.useEffect(()=>{const f=d.current;if(f!==l){const m=f?"controlled":"uncontrolled",p=l?"controlled":"uncontrolled";console.warn("".concat(n," is changing from ").concat(m," to ").concat(p,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}d.current=l},[l,n])}const u=x.useCallback(d=>{var f;if(l){const m=y9e(d)?d(t):d;m!==t&&((f=i.current)==null||f.call(i,m))}else a(d)},[l,t,a,i]);return[c,u]}function x9e({defaultProp:t,onChange:e}){const[s,n]=x.useState(t),o=x.useRef(s),a=x.useRef(e);return h9e(()=>{a.current=e},[e]),x.useEffect(()=>{var i;o.current!==s&&((i=a.current)==null||i.call(a,s),o.current=s)},[s,o]),[s,n,a]}function y9e(t){return typeof t=="function"}var b9e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ru=b9e.reduce((t,e)=>{const s=nX("Primitive.".concat(e)),n=x.forwardRef((o,a)=>{const u=o,{asChild:i}=u,l=De(u,["asChild"]),c=i?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,U(T({},l),{ref:a}))});return n.displayName="Primitive.".concat(e),U(T({},t),{[e]:n})},{});function v9e(t,e){t&&dr.flushSync(()=>t.dispatchEvent(e))}var S9e="Arrow",dV=x.forwardRef((t,e)=>{const i=t,{children:s,width:n=10,height:o=5}=i,a=De(i,["children","width","height"]);return r.jsx(ru.svg,U(T({},a),{ref:e,width:n,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})}))});dV.displayName=S9e;var C9e=dV;function m0(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...s)=>{var n;return(n=e.current)==null?void 0:n.call(e,...s)},[])}function w9e(t){const[e,s]=x.useState(void 0);return Ac(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;s({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),e}var DE="Popper",[fV,mV]=uV(DE),[k9e,pV]=fV(DE),gV=t=>{const{__scopePopper:e,children:s}=t,[n,o]=x.useState(null);return r.jsx(k9e,{scope:e,anchor:n,onAnchorChange:o,children:s})};gV.displayName=DE;var hV="PopperAnchor",_V=x.forwardRef((t,e)=>{const c=t,{__scopePopper:s,virtualRef:n}=c,o=De(c,["__scopePopper","virtualRef"]),a=pV(hV,s),i=x.useRef(null),l=gf(e,i);return x.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:r.jsx(ru.div,U(T({},o),{ref:l}))});_V.displayName=hV;var FE="PopperContent",[T9e,E9e]=fV(FE),xV=x.forwardRef((t,e)=>{var ee,re,he,fe,pe,le,ve,Te;const se=t,{__scopePopper:s,side:n="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:g}=se,h=De(se,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),_=pV(FE,s),[b,y]=x.useState(null),v=gf(e,xe=>y(xe)),[S,C]=x.useState(null),w=w9e(S),k=(ee=w==null?void 0:w.width)!=null?ee:0,E=(re=w==null?void 0:w.height)!=null?re:0,M=n+(a!=="center"?"-"+a:""),N=typeof d=="number"?d:T({top:0,right:0,bottom:0,left:0},d),A=Array.isArray(u)?u:[u],I=A.length>0,P={padding:N,boundary:A.filter(N9e),altBoundary:I},{refs:R,floatingStyles:O,placement:L,isPositioned:D,middlewareData:H}=oX({strategy:"fixed",placement:M,whileElementsMounted:(...xe)=>fX(...xe,{animationFrame:p==="always"}),elements:{reference:_.anchor},middleware:[aX({mainAxis:o+E,alignmentAxis:i}),c&&rX(T({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dX():void 0},P)),c&&iX(T({},P)),lX(U(T({},P),{apply:({elements:xe,rects:ce,availableWidth:we,availableHeight:ge})=>{const{width:Ae,height:Ue}=ce.reference,Ie=xe.floating.style;Ie.setProperty("--radix-popper-available-width","".concat(we,"px")),Ie.setProperty("--radix-popper-available-height","".concat(ge,"px")),Ie.setProperty("--radix-popper-anchor-width","".concat(Ae,"px")),Ie.setProperty("--radix-popper-anchor-height","".concat(Ue,"px"))}})),S&&cX({element:S,padding:l}),A9e({arrowWidth:k,arrowHeight:E}),m&&uX(T({strategy:"referenceHidden"},P))]}),[V,q]=vV(L),W=m0(g);Ac(()=>{D&&(W==null||W())},[D,W]);const $=(he=H.arrow)==null?void 0:he.x,Z=(fe=H.arrow)==null?void 0:fe.y,K=((pe=H.arrow)==null?void 0:pe.centerOffset)!==0,[Y,ae]=x.useState();return Ac(()=>{b&&ae(window.getComputedStyle(b).zIndex)},[b]),r.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:T(U(T({},O),{transform:D?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(le=H.transformOrigin)==null?void 0:le.x,(ve=H.transformOrigin)==null?void 0:ve.y].join(" ")}),((Te=H.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:r.jsx(T9e,{scope:s,placedSide:V,onArrowChange:C,arrowX:$,arrowY:Z,shouldHideArrow:K,children:r.jsx(ru.div,U(T({"data-side":V,"data-align":q},h),{ref:v,style:U(T({},h.style),{animation:D?void 0:"none"})}))})})});xV.displayName=FE;var yV="PopperArrow",M9e={top:"bottom",right:"left",bottom:"top",left:"right"},bV=x.forwardRef(function(e,s){const l=e,{__scopePopper:n}=l,o=De(l,["__scopePopper"]),a=E9e(yV,n),i=M9e[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(C9e,U(T({},o),{ref:s,style:U(T({},o.style),{display:"block"})}))})});bV.displayName=yV;function N9e(t){return t!==null}var A9e=t=>({name:"transformOrigin",options:t,fn(e){var _,b,y,v,S;const{placement:s,rects:n,middlewareData:o}=e,i=((_=o.arrow)==null?void 0:_.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=vV(s),f={start:"0%",center:"50%",end:"100%"}[d],m=((y=(b=o.arrow)==null?void 0:b.x)!=null?y:0)+l/2,p=((S=(v=o.arrow)==null?void 0:v.y)!=null?S:0)+c/2;let g="",h="";return u==="bottom"?(g=i?f:"".concat(m,"px"),h="".concat(-c,"px")):u==="top"?(g=i?f:"".concat(m,"px"),h="".concat(n.floating.height+c,"px")):u==="right"?(g="".concat(-c,"px"),h=i?f:"".concat(p,"px")):u==="left"&&(g="".concat(n.floating.width+c,"px"),h=i?f:"".concat(p,"px")),{data:{x:g,y:h}}}});function vV(t){const[e,s="center"]=t.split("-");return[e,s]}var I9e=gV,j9e=_V,P9e=xV,R9e=bV,O9e="Portal",SV=x.forwardRef((t,e)=>{var c;const l=t,{container:s}=l,n=De(l,["container"]),[o,a]=x.useState(!1);Ac(()=>a(!0),[]);const i=s||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?nK.createPortal(r.jsx(ru.div,U(T({},n),{ref:e})),i):null});SV.displayName=O9e;function L9e(t,e){return x.useReducer((s,n)=>{const o=e[s][n];return o!=null?o:s},t)}var BE=t=>{const{present:e,children:s}=t,n=D9e(e),o=typeof s=="function"?s({present:n.isPresent}):x.Children.only(s),a=gf(n.ref,F9e(o));return typeof s=="function"||n.isPresent?x.cloneElement(o,{ref:a}):null};BE.displayName="Presence";function D9e(t){const[e,s]=x.useState(),n=x.useRef(null),o=x.useRef(t),a=x.useRef("none"),i=t?"mounted":"unmounted",[l,c]=L9e(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=yh(n.current);a.current=l==="mounted"?u:"none"},[l]),Ac(()=>{const u=n.current,d=o.current;if(d!==t){const m=a.current,p=yh(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,c]),Ac(()=>{var u;if(e){let d;const f=(u=e.ownerDocument.defaultView)!=null?u:window,m=g=>{const _=yh(n.current).includes(g.animationName);if(g.target===e&&_&&(c("ANIMATION_END"),!o.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(a.current=yh(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(u=>{n.current=u?getComputedStyle(u):null,s(u)},[])}}function yh(t){return(t==null?void 0:t.animationName)||"none"}function F9e(t){var n,o;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function B9e(t,e=globalThis==null?void 0:globalThis.document){const s=m0(t);x.useEffect(()=>{const n=o=>{o.key==="Escape"&&s(o)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[s,e])}var U9e="DismissableLayer",NS="dismissableLayer.update",$9e="dismissableLayer.pointerDownOutside",H9e="dismissableLayer.focusOutside",HI,CV=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wV=x.forwardRef((t,e)=>{var E;const k=t,{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:l}=k,c=De(k,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),u=x.useContext(CV),[d,f]=x.useState(null),m=(E=d==null?void 0:d.ownerDocument)!=null?E:globalThis==null?void 0:globalThis.document,[,p]=x.useState({}),g=gf(e,M=>f(M)),h=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=h.indexOf(_),y=d?h.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,S=y>=b,C=z9e(M=>{const N=M.target,A=[...u.branches].some(I=>I.contains(N));!S||A||(o==null||o(M),i==null||i(M),M.defaultPrevented||l==null||l())},m),w=W9e(M=>{const N=M.target;[...u.branches].some(I=>I.contains(N))||(a==null||a(M),i==null||i(M),M.defaultPrevented||l==null||l())},m);return B9e(M=>{y===u.layers.size-1&&(n==null||n(M),!M.defaultPrevented&&l&&(M.preventDefault(),l()))},m),x.useEffect(()=>{if(d)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(HI=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),GI(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=HI)}},[d,m,s,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),GI())},[d,u]),x.useEffect(()=>{const M=()=>p({});return document.addEventListener(NS,M),()=>document.removeEventListener(NS,M)},[]),r.jsx(ru.div,U(T({},c),{ref:g,style:T({pointerEvents:v?S?"auto":"none":void 0},t.style),onFocusCapture:Ho(t.onFocusCapture,w.onFocusCapture),onBlurCapture:Ho(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:Ho(t.onPointerDownCapture,C.onPointerDownCapture)}))});wV.displayName=U9e;var G9e="DismissableLayerBranch",V9e=x.forwardRef((t,e)=>{const s=x.useContext(CV),n=x.useRef(null),o=gf(e,n);return x.useEffect(()=>{const a=n.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),r.jsx(ru.div,U(T({},t),{ref:o}))});V9e.displayName=G9e;function z9e(t,e=globalThis==null?void 0:globalThis.document){const s=m0(t),n=x.useRef(!1),o=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){kV($9e,s,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=c,e.addEventListener("click",o.current,{once:!0})):c()}else e.removeEventListener("click",o.current);n.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,s]),{onPointerDownCapture:()=>n.current=!0}}function W9e(t,e=globalThis==null?void 0:globalThis.document){const s=m0(t),n=x.useRef(!1);return x.useEffect(()=>{const o=a=>{a.target&&!n.current&&kV(H9e,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function GI(){const t=new CustomEvent(NS);document.dispatchEvent(t)}function kV(t,e,s,{discrete:n}){const o=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&o.addEventListener(t,e,{once:!0}),n?v9e(o,a):o.dispatchEvent(a)}var cv,p0="HoverCard",[TV]=uV(p0,[mV]),g0=mV(),[q9e,h0]=TV(p0),EV=t=>{const{__scopeHoverCard:e,children:s,open:n,defaultOpen:o,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=t,c=g0(e),u=x.useRef(0),d=x.useRef(0),f=x.useRef(!1),m=x.useRef(!1),[p,g]=_9e({prop:n,defaultProp:o!=null?o:!1,onChange:a,caller:p0}),h=x.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>g(!0),i)},[i,g]),_=x.useCallback(()=>{clearTimeout(u.current),!f.current&&!m.current&&(d.current=window.setTimeout(()=>g(!1),l))},[l,g]),b=x.useCallback(()=>g(!1),[g]);return x.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),r.jsx(q9e,{scope:e,open:p,onOpenChange:g,onOpen:h,onClose:_,onDismiss:b,hasSelectionRef:f,isPointerDownOnContentRef:m,children:r.jsx(I9e,U(T({},c),{children:s}))})};EV.displayName=p0;var MV="HoverCardTrigger",NV=x.forwardRef((t,e)=>{const i=t,{__scopeHoverCard:s}=i,n=De(i,["__scopeHoverCard"]),o=h0(MV,s),a=g0(s);return r.jsx(j9e,U(T({asChild:!0},a),{children:r.jsx(ru.a,U(T({"data-state":o.open?"open":"closed"},n),{ref:e,onPointerEnter:Ho(t.onPointerEnter,__(o.onOpen)),onPointerLeave:Ho(t.onPointerLeave,__(o.onClose)),onFocus:Ho(t.onFocus,o.onOpen),onBlur:Ho(t.onBlur,o.onClose),onTouchStart:Ho(t.onTouchStart,l=>l.preventDefault())}))}))});NV.displayName=MV;var UE="HoverCardPortal",[K9e,Y9e]=TV(UE,{forceMount:void 0}),AV=t=>{const{__scopeHoverCard:e,forceMount:s,children:n,container:o}=t,a=h0(UE,e);return r.jsx(K9e,{scope:e,forceMount:s,children:r.jsx(BE,{present:s||a.open,children:r.jsx(SV,{asChild:!0,container:o,children:n})})})};AV.displayName=UE;var h_="HoverCardContent",IV=x.forwardRef((t,e)=>{const s=Y9e(h_,t.__scopeHoverCard),i=t,{forceMount:n=s.forceMount}=i,o=De(i,["forceMount"]),a=h0(h_,t.__scopeHoverCard);return r.jsx(BE,{present:n||a.open,children:r.jsx(Q9e,U(T({"data-state":a.open?"open":"closed"},o),{onPointerEnter:Ho(t.onPointerEnter,__(a.onOpen)),onPointerLeave:Ho(t.onPointerLeave,__(a.onClose)),ref:e}))})});IV.displayName=h_;var Q9e=x.forwardRef((t,e)=>{const g=t,{__scopeHoverCard:s,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i}=g,l=De(g,["__scopeHoverCard","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),c=h0(h_,s),u=g0(s),d=x.useRef(null),f=gf(e,d),[m,p]=x.useState(!1);return x.useEffect(()=>{if(m){const h=document.body;return cv=h.style.userSelect||h.style.webkitUserSelect,h.style.userSelect="none",h.style.webkitUserSelect="none",()=>{h.style.userSelect=cv,h.style.webkitUserSelect=cv}}},[m]),x.useEffect(()=>{if(d.current){const h=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var b;((b=document.getSelection())==null?void 0:b.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",h),()=>{document.removeEventListener("pointerup",h),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),x.useEffect(()=>{d.current&&X9e(d.current).forEach(_=>_.setAttribute("tabindex","-1"))}),r.jsx(wV,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:n,onPointerDownOutside:o,onFocusOutside:Ho(a,h=>{h.preventDefault()}),onDismiss:c.onDismiss,children:r.jsx(P9e,U(T(T({},u),l),{onPointerDown:Ho(l.onPointerDown,h=>{h.currentTarget.contains(h.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:U(T({},l.style),{userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"})}))})}),J9e="HoverCardArrow",Z9e=x.forwardRef((t,e)=>{const a=t,{__scopeHoverCard:s}=a,n=De(a,["__scopeHoverCard"]),o=g0(s);return r.jsx(R9e,U(T(T({},o),n),{ref:e}))});Z9e.displayName=J9e;function __(t){return e=>e.pointerType==="touch"?void 0:t()}function X9e(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;s.nextNode();)e.push(s.currentNode);return e}var eOe=EV,tOe=NV,sOe=AV,VI=IV;const jV=({clientThreadId:t,rateLimitPopup:e,children:s,disabled:n,highlightTooltip:o=!1,disabledReason:a,currentModelName:i,label:l,secondaryLabel:c})=>{const u=ne(),d=Qe(t,Se.getIsNewConversation),f=G(),m=ct(f),p=y=>{var v;e!=null&&y&&B.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:(v=m==null?void 0:m.planType)!=null?v:"unknown"})},g=xf(f,$t.signUpButtonText),{isEligible:h}=tD(t),_=!!e,b=!n&&h;return _?r.jsxs(eOe,{openDelay:0,onOpenChange:p,children:[r.jsx(tOe,{asChild:!0,children:s}),r.jsx(sOe,{children:r.jsx(v6,{children:r.jsx(VI,{role:"dialog","aria-labelledby":"rate-limit-popover-title",children:r.jsx(ix,{$as:VI,side:"bottom",sideOffset:6,align:"start",alignOffset:-6,className:"max-w-[300px]",children:r.jsx(nOe,{isNewConversation:d,rateLimitPopup:e,signUpButtonText:g})})})})})]}):b?r.jsx(p9e,{clientThreadId:t,children:s}):r.jsx(It,{label:!n&&l?l:_0(f,u,n,a,i),secondaryLabel:c,labelOrientation:"horizontal",className:"flex",contentClassName:o?void 0:"touch:hidden",open:o?!0:void 0,side:"bottom",children:s})};function _0(t,e,s,n,o){const a=ct(t),i=a!=null,l=E1(t),c=a==null?void 0:a.isFreeWorkspace();return s?n===al.ModelNotSupported&&o!=null?e.formatMessage({id:"xPEzDr",defaultMessage:"Add files disabled for {modelName}"},{modelName:o}):n===al.HasReachedMaxFiles?i?e.formatMessage({id:"TEBczg",defaultMessage:"Cannot add more files"}):e.formatMessage({id:"Y6o+nN",defaultMessage:"Cannot add more photos"}):n===al.RateLimitReached?i?a.hasPaidSubscription()?e.formatMessage({id:"W/ug8Z",defaultMessage:"Upload limit reached"}):l?e.formatMessage({id:"j6nN5P",defaultMessage:"Upgrade to Go for more uploads"}):c?e.formatMessage({id:"y1qZZ9",defaultMessage:"Get Business for more uploads"}):e.formatMessage({id:"GXsPqr",defaultMessage:"Get Plus for more uploads"}):e.formatMessage({id:"RHdQBI",defaultMessage:"Log in to add more photos"}):i?e.formatMessage({id:"MeW0HZ",defaultMessage:"Add files is unavailable"}):e.formatMessage({id:"bvbDsP",defaultMessage:"Add photos is unavailable"}):i?e.formatMessage({id:"composer.add.label",defaultMessage:"Add photos & files"}):e.formatMessage({id:"wNvwwm",defaultMessage:"Add photos"})}const nOe=t=>{"use forget";var D,H,V,q,W;const e=F.c(50),{isNewConversation:s,rateLimitPopup:n,signUpButtonText:o}=t,a=s===void 0?!1:s,i=G();let l;e[0]!==i?(l=Yc(i),e[0]=i,e[1]=l):l=e[1];const c=l,u=bl();if(n==null)return null;const{call_to_action:d,description:f}=n;let m;e[2]!==d?(m=(D=d==null?void 0:d.includes(Yt.UPGRADE_TO_GO))!=null?D:!1,e[2]=d,e[3]=m):m=e[3];const p=m;let g;e[4]!==d?(g=(H=d==null?void 0:d.includes(Yt.GET_GO_TRIAL))!=null?H:!1,e[4]=d,e[5]=g):g=e[5];const h=g;let _;e[6]!==d?(_=(V=d==null?void 0:d.includes(Yt.GET_PLUS))!=null?V:!1,e[6]=d,e[7]=_):_=e[7];const b=_;let y;e[8]!==d?(y=(q=d==null?void 0:d.includes(Yt.GET_BUSINESS))!=null?q:!1,e[8]=d,e[9]=y):y=e[9];const v=y;let S;e[10]!==d?(S=(W=d==null?void 0:d.includes(Yt.AUTHENTICATE))!=null?W:!1,e[10]=d,e[11]=S):S=e[11];const C=S;let w;e[12]!==f||e[13]!==v||e[14]!==h||e[15]!==p?(w=f!=null?f:r.jsx(j,U(T({},oOe.defaultDescription),{values:{upgradePlanType:v?"Business":p||h?"Go":"Plus"}})),e[12]=f,e[13]=v,e[14]=h,e[15]=p,e[16]=w):w=e[16];const k=w,E=C&&u;let M;e[17]!==k?(M=r.jsx("div",{className:"mb-3",id:"rate-limit-popover-title",children:k}),e[17]=k,e[18]=M):M=e[18];let N;e[19]!==a||e[20]!==h?(N=h?r.jsx(bh,{isNewConversation:a,message:$t.tryGoTrial,upgradePlanType:tt.GO}):null,e[19]=a,e[20]=h,e[21]=N):N=e[21];let A;e[22]!==a||e[23]!==p?(A=p?r.jsx(bh,{isNewConversation:a,message:$t.upgradeToGo,upgradePlanType:tt.GO}):null,e[22]=a,e[23]=p,e[24]=A):A=e[24];let I;e[25]!==a||e[26]!==v?(I=v?r.jsx(bh,{isNewConversation:a,message:$t.getBusiness,upgradePlanType:tt.SELF_SERVE_BUSINESS}):null,e[25]=a,e[26]=v,e[27]=I):I=e[27];let P;e[28]!==i||e[29]!==a||e[30]!==b?(P=b?r.jsx(bh,{isNewConversation:a,message:Rp(i),upgradePlanType:tt.PLUS}):null,e[28]=i,e[29]=a,e[30]=b,e[31]=P):P=e[31];let R;e[32]!==i||e[33]!==c||e[34]!==C||e[35]!==o?(R=C?r.jsx(ke,{color:"primary",onClick:()=>{os(i,{fallbackScreenHint:c?"login":"signup",callback:$=>{c?B.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:$},Lt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):B.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:$},Lt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(j,T({},$t.logInButtonText)):r.jsx(j,T({},o))}):null,e[32]=i,e[33]=c,e[34]=C,e[35]=o,e[36]=R):R=e[36];let O;e[37]!==i||e[38]!==c||e[39]!==E||e[40]!==o?(O=E?r.jsx(ke,{color:"secondary",className:"ms-2",onClick:()=>{os(i,{fallbackScreenHint:c?"signup":"login",callback:$=>{c?B.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:$},Lt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):B.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:$},Lt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(j,T({},o)):r.jsx(j,T({},$t.logInButtonText))}):null,e[37]=i,e[38]=c,e[39]=E,e[40]=o,e[41]=O):O=e[41];let L;return e[42]!==N||e[43]!==A||e[44]!==I||e[45]!==P||e[46]!==R||e[47]!==O||e[48]!==M?(L=r.jsxs("div",{className:"text-token-text-primary p-2 text-sm",children:[M,N,A,I,P,R,O]}),e[42]=N,e[43]=A,e[44]=I,e[45]=P,e[46]=R,e[47]=O,e[48]=M,e[49]=L):L=e[49],L},bh=t=>{"use forget";const e=F.c(12),{isNewConversation:s,message:n,upgradePlanType:o}=t,a=G();let i;e[0]!==a?(i=ct(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=yt();let u;e[2]!==(l==null?void 0:l.planType)||e[3]!==s||e[4]!==c||e[5]!==o?(u=()=>{var m,p;an(c,"Rate limited file upload popover"),B.logRateLimitUpgradePlanButtonClicked({hard_block_reason:"",is_hard_block:!1,is_new_conversation:s,location:"popover",plan_type:(m=l==null?void 0:l.planType)!=null?m:"unknown",type:"file_upload",upgrade_plan_tye:o}),B.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"popover",plan_type:(p=l==null?void 0:l.planType)!=null?p:"unknown",is_hard_block:!1,is_new_conversation:s,hard_block_reason:""})},e[2]=l==null?void 0:l.planType,e[3]=s,e[4]=c,e[5]=o,e[6]=u):u=e[6];let d;e[7]!==n?(d=r.jsx(j,T({},n)),e[7]=n,e[8]=d):d=e[8];let f;return e[9]!==u||e[10]!==d?(f=r.jsx(ke,{size:"small",color:"secondary",onClick:u,children:d}),e[9]=u,e[10]=d,e[11]=f):f=e[11],f},oOe=Ne({defaultDescription:{id:"mMIVYZ",defaultMessage:"You've reached your daily upload limit. Get ChatGPT {upgradePlanType} to unlock more."}}),aOe=Bt(()=>{const t=navigator.mediaDevices;let e=t?null:[];return YR(()=>e,s=>{if(!t)return()=>{};const n=()=>{var o;(o=t.enumerateDevices)==null||o.call(t).then(a=>{e=a.filter(i=>i.kind==="videoinput"),s()},a=>{})};return n(),rf(t,{devicechange:n})})}),rOe=Bt(t=>vt(()=>{if(!iOe())return!1;const e=aOe(t);return e!=null&&e.length>0})),iOe=mX(()=>{var t,e,s;return!mf()&&typeof navigator<"u"&&typeof HTMLCanvasElement<"u"&&((t=navigator.mediaDevices)==null?void 0:t.getUserMedia)!=null&&((s=(e=navigator.mediaDevices).getSupportedConstraints)==null?void 0:s.call(e).facingMode)===!0}),lOe=Pe(()=>me(()=>import("./efyjwwqgjkm4ifla.js"),__vite__mapDeps([234,1,3,4,235])).then(t=>t.PhotoBoothModal));function cOe(t){const e=G();return oe(()=>Cs(Et(e,t)).id)}const Br=t=>t===0?null:t+performance.timeOrigin,bg=t=>{const e={};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];e[s]=Br(n!=null?n:0)}return e};var Qr=(t=>(t.StateUpdate="state_update",t.ActionRequest="action_request",t.ConversationUpdate="conversation_update",t.RelayMessage="relay_message",t.Unknown="unknown",t.UsageUpdate="usage_update",t.ToolUpdate="tool_update",t.TurnContext="turn_context",t.Performance="performance",t.StartupTelemetry="startup_telemetry",t.TrackState="track_state",t.FullChatMessage="full_chat_message",t.LiveCaptioningText="live_captioning_text",t.UserTranscriptionText="user_transcription_text",t))(Qr||{}),ar=(t=>(t.SessionCreateStart="session_create.start",t.SessionCreateEnd="session_create.end",t.SessionCreateMeasure="session_create",t.LivekitStart="livekit.start",t.LivekitEnd="livekit.end",t.LivekitMeasure="livekit",t.VisuallyConnectedEnd="time_to_visually_connected.end",t.VisuallyConnectedMeasure="time_to_visually_connected",t.ClickLatencyEnd="click-latency.end",t.ClickLatencyMeasure="click-latency",t.MicrophoneRequestStart="microphone-request.start",t.MicrophoneRequestEnd="microphone-request.end",t.MicrophoneLatencyMeasure="microphone-latency",t))(ar||{}),vg=(t=>(t.Retry="retry",t.LoggedOut="logged-out",t.Composer="composer",t.ModalNewChat="modal-new-chat",t.ModalSwitchToStandard="modal-switch-to-standard",t.DeepLink="deep-link",t.ModalVoicePicker="modal-voice-picker",t.Unknown="unknown",t))(vg||{}),uOe=(t=>(t.StartListeningIntently="start_listening",t.StopListeningIntently="stop_listening",t.HaltAllActivity="stop_speaking",t.ResumeListening="resume_listening",t.RelayMessage="relay_message",t))(uOe||{}),dOe=(t=>(t.Connecting="connecting",t.Idle="idle",t.Connected="connected",t.Halted="halted",t.Listening="listening",t.ListeningIntently="listening_intently",t.Thinking="thinking",t.Speaking="speaking",t))(dOe||{}),AS=(t=>(t.Add="add",t.Remove="remove",t))(AS||{});const PV=Le(void 0),RV=Le(void 0),OV=Le(void 0),LV=Le(void 0),fOe=Le(void 0),DV=Le(void 0),FV=Le(void 0),BV=Le(void 0),UV=Le(void 0),mOe=Le(void 0),$V=Le(void 0),HV=Le(void 0),GV=Le(void 0),Vd=Le(void 0),$E=Le(void 0),pOe=Le(void 0),gOe=Le(void 0),VV=Le("unknown"),hOe=Le(vg.Unknown),gct=()=>{const t=xt(()=>{var s;return(s=Vd())==null?void 0:s.start_time}),e=xt(()=>{var s;return(s=Vd())==null?void 0:s.end_time});return bg({microphone_permissions_start_time:t,microphone_permissions_end_time:e})},hct=()=>{const t=xt(()=>OV()),e=xt(()=>PV()),s=xt(()=>RV()),n=xt(()=>DV()),o=xt(()=>UV());return bg({pre_connection_setup_start_time:t==null?void 0:t.start_time,pre_connection_setup_end_time:t==null?void 0:t.end_time,audio_input_aquisition_start_time:e==null?void 0:e.start_time,audio_input_aquisition_end_time:e==null?void 0:e.end_time,audio_transceiver_setup_start_time:s==null?void 0:s.start_time,audio_transceiver_setup_end_time:s==null?void 0:s.end_time,post_connection_setup_start_time:n==null?void 0:n.start_time,post_connection_setup_end_time:n==null?void 0:n.end_time,quality_monitor_setup_start_time:o==null?void 0:o.start_time,quality_monitor_setup_end_time:o==null?void 0:o.end_time})},_ct=()=>{const t=xt(()=>mOe()),e=xt(()=>$V()),s=xt(()=>HV()),n=xt(()=>GV()),o=xt(()=>LV()),a=xt(()=>fOe());return bg({pre_connect_get_peer_connection_start_time:t==null?void 0:t.start_time,pre_connect_get_peer_connection_end_time:t==null?void 0:t.end_time,pre_connect_data_channel_start_time:e==null?void 0:e.start_time,pre_connect_data_channel_end_time:e==null?void 0:e.end_time,pre_connect_event_handlers_start_time:s==null?void 0:s.start_time,pre_connect_event_handlers_end_time:s==null?void 0:s.end_time,pre_connect_blank_transceiver_start_time:n==null?void 0:n.start_time,pre_connect_blank_transceiver_end_time:n==null?void 0:n.end_time,pre_connect_create_offer_start_time:o==null?void 0:o.start_time,pre_connect_create_offer_end_time:o==null?void 0:o.end_time,pre_connect_create_abort_signal_start_time:a==null?void 0:a.start_time,pre_connect_create_abort_signal_end_time:a==null?void 0:a.end_time})},xct=()=>{const t=xt(()=>FV()),e=xt(()=>BV());return bg({post_connect_set_remote_description_start_time:t==null?void 0:t.start_time,post_connect_set_remote_description_end_time:t==null?void 0:t.end_time,post_connect_get_response_text_start_time:e==null?void 0:e.start_time,post_connect_get_response_text_end_time:e==null?void 0:e.end_time})},HE=Le(void 0),GE=Le(void 0),zV=Le(void 0),yct=()=>{const t=xt(()=>GE()),e=xt(()=>HE());return bg({connect_auth_headers_start_time:t==null?void 0:t.start_time,connect_auth_headers_end_time:t==null?void 0:t.end_time,connect_new_form_start_time:e==null?void 0:e.start_time,connect_new_form_end_time:e==null?void 0:e.end_time})},_Oe=()=>{PV.set(void 0),RV.set(void 0),OV.set(void 0),DV.set(void 0),UV.set(void 0),$V.set(void 0),HV.set(void 0),GV.set(void 0),LV.set(void 0),FV.set(void 0),BV.set(void 0),HE.set(void 0),GE.set(void 0),zV.set(void 0),pOe.set(void 0),gOe.set(void 0),$E.set(void 0),VV.set("unknown"),Vd.set(void 0)},zI=(t,e)=>{const s=performance.now(),n=e(),o=performance.now();return t.set({start_time:s,end_time:o}),n},bct=async(t,e)=>{const s=performance.now(),n=await e(),o=performance.now();return t.set({start_time:s,end_time:o}),n},xOe=ys(t=>Ee(t,"2783249450")),VE=t=>xOe(t),yOe=window.location.origin+"/voice",WV=window.location.origin,qV=window.location.origin,bOe=[/\[abort\]/,/The user aborted a request/,/Fetch is aborted/,/Request signal is aborted/],vOe="v=0\r\no=- 0 0 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=ice-ufrag:foo\r\na=ice-pwd:barbazqux\r\na=fingerprint:sha-256 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00\r\na=setup:actpass\r\na=msid-semantic: WMS\r\nm=audio 9 UDP/TLS/RTP/SAVPF 111\r\nc=IN IP4 0.0.0.0\r\na=rtpmap:111 opus/48000/2\r\na=mid:0\r\na=rtcp-mux\r\n",SOe=t=>{const e=t instanceof Error?t.message:String(t);return bOe.some(s=>s.test(e))},KV=()=>{const t=Io();return Ee(t,"571174949")&&!0},WI=()=>{const t=KV(),e=t?qV:WV,s=t?"/realtime/status":"/v1/vp/status";return"".concat(e).concat(s)},uv=(t=!0)=>{const e=KV(),s=e?qV:WV,n=e?"/realtime/vp":"/v1/vp";return"".concat(s).concat(n).concat(t?"":"s")};async function qI(t,{payload:e,eventSource:s,url:n}){var i;const o={eventSource:s,voice:e.voice,voice_mode:(i=e.voice_mode)!=null?i:"undefined",voice_session_id:e.voice_session_id};performance.clearResourceTimings();const a=performance.now();Jt.getToken.request(o);try{const l=await t();aV(()=>{const u=performance.getEntriesByType("resource").filter(f=>f.name.includes(n))[0],d={domain_lookup_start_time:null,domain_lookup_end_time:null,connect_end_time:null,connect_start_time:null,secure_connection_start_time:null,request_start_time:null,response_start_time:null,response_end_time:null,latency_ms:null};if(u){const{domainLookupEnd:f,domainLookupStart:m,connectEnd:p,connectStart:g,secureConnectionStart:h,requestStart:_,responseStart:b,responseEnd:y,duration:v}=u;d.domain_lookup_start_time=Br(m),d.domain_lookup_end_time=Br(f),d.connect_end_time=Br(p),d.connect_start_time=Br(g),d.secure_connection_start_time=Br(h),d.request_start_time=Br(_),d.response_start_time=Br(b),d.response_end_time=Br(y),d.latency_ms=v||null}_l.debug({timing:d,entry:u}),zV.set(d)});const c=performance.now()-a;return Jt.getToken.success(U(T({},o),{durationMs:c})),l}catch(l){const c=performance.now()-a,u=SOe(l);throw Jt.getToken.failure(U(T({},o),{durationMs:c,error:l instanceof Error?l.message:String(l),voice_session_id:e.voice_session_id,user_aborted:u})),l}}class IS{static startLivekitSession(e,s,n){const o="".concat(yOe,"/get_token");return qI(()=>Sm.post(o,e,{additionalHeaders:n?{[Fu.ProofToken]:n}:{}}),{payload:e,eventSource:s,url:o})}static startTransceiverSession({payload:e,accessToken:s,proofOfWorkAnswer:n,eventSource:o,signal:a,dataChannelId:i=0,offer:l}){const c=e.voice_mode==="advanced",u="".concat(uv(c),"?dcid=").concat(i);return qI(async()=>{const d=zI(GE,()=>i1({accessToken:s}));delete d["cf-timezone"];let f={};const m=zI(HE,()=>{const g=new FormData;return g.append("sdp",l.sdp),g.append("session",JSON.stringify(e)),g}),p=await fetch(u,{method:"POST",body:m,headers:T(T(T({},d),f),n?{[Fu.ProofToken]:n}:{}),signal:a});if(!p.ok)throw new Error("Failed to create session: ".concat(p.statusText));return p},{payload:e,eventSource:o,url:u})}static prewarmRealtimeVoice(){const e={[Fu.ProofToken]:"dummy"},s=T(T({},i1({accessToken:"dummy"})),e),n=()=>{};Sm.post(WI(),{requested_voice_mode:"prewarm"},{additionalHeaders:e}).catch(n);const o=()=>{const a=new FormData;return a.append("sdp",vOe),a.append("session",JSON.stringify({voice_mode:"prewarm"})),a};fetch("".concat(uv(!0),"?dcid=0"),{method:"POST",body:o(),headers:s}).catch(n),fetch("".concat(uv(!1),"?dcid=0"),{method:"POST",body:o(),headers:s}).catch(n)}static async getVoiceStatus(e,s){var a;const n={eventSource:s,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await gi.getRequirementsToken();return Jt.getVoiceStatus.request(n),de.safePost("/conversation/voice/status",{requestBody:e,additionalHeaders:{[Fu.ProofToken]:o}}).then(i=>(Jt.getVoiceStatus.success(n),i)).catch(i=>{throw Jt.getVoiceStatus.failure(U(T({},n),{error:i==null?void 0:i.message})),i})}static async getRealtimeVoiceStatus(e,s){var a;const n={eventSource:s,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await gi.getRequirementsToken();return Jt.getVoiceStatus.request(n),Sm.post(WI(),e,{additionalHeaders:{[Fu.ProofToken]:o}}).then(i=>(Jt.getVoiceStatus.success(n),i)).catch(i=>{throw Jt.getVoiceStatus.failure(U(T({},n),{error:i==null?void 0:i.message})),i})}}const COe=t=>VE(t)?IS.getRealtimeVoiceStatus:IS.getVoiceStatus,YV=()=>[8,4,4,4,12].map(e=>Math.floor(Math.random()*Math.pow(10,e)).toString(16).padStart(e,"0").toUpperCase()).join("-");let dv;const wOe=()=>(dv||(dv=new TextEncoder),dv);async function QV({room:t,event:e,voiceStore:s}){const n=wOe();await t.localParticipant.publishData(n.encode(JSON.stringify(e))),s.setState(o=>{o.server.messages.push(U(T({},e),{timestamp:new Date,source:"local"}))})}function vct(t,e,s,n){QV({room:t,voiceStore:e,event:{type:Qr.TrackState,payload:{type:Qr.TrackState,track_id:s==="camera_front"?"webcam":"screenshare",media_type:"video",media_source:s,state:n}}})}function kOe(t,e,s,n){QV({room:t,voiceStore:e,event:{type:Qr.TrackState,payload:{type:Qr.TrackState,track_id:"microphone",media_type:"audio",media_source:s,state:n}}})}class TOe{constructor(){X(this,"logger",_l.createChild("VoiceTurnContext"));X(this,"publish",async()=>{throw new Error("VoiceTurnContext does not have a set publisher.")});X(this,"store",Zt(vp(Vs(()=>({parts:{},attachments:{}})))))}useState(e){return this.store(e||(s=>s))}setPublisher(e){this.publish=e}async add({parts:e,attachments:s}){if(!e&&!s)return;let n={},o={};s&&(n=Object.fromEntries(s.map(i=>[this.makeId("attachment"),i]))),e&&(o=Object.fromEntries(e.map(i=>[this.makeId("part"),i])));const a={type:Qr.TurnContext,payload:{type:Qr.TurnContext,action:AS.Add,attachments:n,parts:o}};await this.publish(a),this.store.setState(i=>{i.parts=Object.assign(i.parts,o),i.attachments=Object.assign(i.attachments,n)}),this.logger.info("Added",{payload:a})}async remove({parts:e,attachments:s}){if(!e&&!s)return;this.logger.info("Removing turn context attachment",{parts:e,attachments:s});const n={},o={},a=this.store.getState();s&&s.forEach(l=>{a.attachments[l]&&(n[l]=a.attachments[l])}),e&&e.forEach(l=>{a.parts[l]&&(o[l]=a.parts[l])});const i={type:Qr.TurnContext,payload:{type:Qr.TurnContext,action:AS.Remove,attachments:n,parts:o}};this.publish(i),this.store.setState(l=>{Object.keys(o).forEach(c=>{delete l.parts[c]}),Object.keys(n).forEach(c=>{delete l.attachments[c]})}),this.logger.info("Removed",{payload:i})}async clear(){this.store.setState(e=>{e.parts={},e.attachments={}}),this.logger.info("Cleared")}makeId(e){return"client:".concat(e?"".concat(e,":"):"").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15))}}var EOe=(t=>(t.Starting="starting",t.Started="started",t.Stopping="stopping",t.Stopped="stopped",t))(EOe||{});const JV={earlyServerThreadId:null,conversationId:null,voiceSessionId:null,isActivityHalted:!1,isVoiceModeActive:!1,video:"stopped",screenshare:"stopped",dev:{room:null},credentials:{token:null,url:null,e2eeKey:null},server:{actions:null,connectionState:null,remoteState:null,messages:[],usage:null,toolUpdate:null,voiceConnectionQuality:null,turnContext:new TOe,relayReady:!1},disconnectPending:void 0,metrics:{totalLatencyMs:[],currentRttMs:[],numSpeaking:0,numThinking:0,numListening:0,conversationLatency:0},hasConnectedOnce:!1},ZV=t=>{const e=Zt(vp(Vs(()=>JV)));return t&&e.setState(t),e},MOe=ZV(),XV=x.createContext(null),NOe=({children:t,initializer:e})=>{const s=x.useRef(void 0);return s.current||(s.current=ZV(e)),r.jsx(XV.Provider,{value:s.current,children:t})};function Sg(){const t=x.useContext(XV);return t!=null?t:MOe}function xl(t){return Sg()(t)}function Sct(){const t=oe(()=>mx()),e=xl(n=>!!(n.credentials.token&&n.credentials.url&&n.credentials.e2eeKey)),s=xl(n=>n.server.connectionState==="connected");return t==="livekit"?e:s}function AOe(){const{voiceName:t}=i0(),e=G(),s=COe(e);return x.useCallback(async function(o,a){var c;const i=YV(),l=await s(U(T({},o),{timezone_offset_min:new Date().getTimezoneOffset(),nonce:pX(),voice:(c=o.voice)!=null?c:t,voice_status_request_id:i}),a);return l!=null&&l.chatreq&&gi.startEnforcement(l==null?void 0:l.chatreq),U(T({},l),{voice_status_request_id:i})},[t,s])}function Cct(){const[t,e]=x.useState(!1),s=Sg(),n=x.useCallback(async()=>{e(!0);const o=s.getState().dev.room;if(o){const a=o.localParticipant.isMicrophoneEnabled,i=a?"mute":"unmute";Jt.toggleMuteButton.click({toggleTo:i});try{await o.localParticipant.setMicrophoneEnabled(!a),kOe(o,s,"microphone",i==="mute"?"muted":"live")}finally{e(!1)}}},[s]);return{isMuting:t,toggleMute:n}}function wct(t,e){if(t){const{credentials:s,conversationId:n,voiceSessionId:o,voiceMode:a}=t;_l.debug("setting credentials",t),e.setState(i=>{i.conversationId=n,i.credentials=s,i.voiceSessionId=o,i.voiceMode=a});return}_l.debug("clearing credentials"),IOe(e)}function kct(){const t=Sg(),e=xl(o=>o.video),s=x.useCallback(o=>{t.setState(a=>{const i=a.video?"off":"on";Jt.toggleVideoButton.click({eventSource:o,toggleTo:i}),a.video==="stopped"?(a.screenshare==="started"&&(a.screenshare="stopping"),a.video="starting"):a.video="stopping"})},[t]),n=x.useCallback(o=>{t.setState(a=>{a.video=o})},[t]);return{cameraTrackState:e,finalizeCameraState:n,toggleCamera:s}}function Tct(){const t=xl(o=>o.screenshare),e=Sg(),s=x.useCallback(o=>{e.setState(a=>{const i=a.screenshare?"off":"on";Jt.toggleScreenShareButton.click({eventSource:o,toggleTo:i}),a.screenshare==="stopped"?(a.video==="started"&&(a.video="stopping"),a.screenshare="starting"):a.screenshare="stopping"})},[e]),n=x.useCallback(o=>{e.setState(a=>{a.screenshare=o})},[e]);return{screenshareTrackState:t,toggleScreenShare:s,finalizeScreenshareState:n}}function IOe(t){t.setState(e=>U(T({},JV),{isVoiceModeActive:e.isVoiceModeActive,hasConnectedOnce:e.hasConnectedOnce}))}function jOe(t){const e=t.default_voice_mode,s=t.modes.find(n=>n.mode===e);if(!s)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return s}async function ez(){try{return(await navigator.permissions.query({name:"microphone"})).state}catch(t){return _l.info("Failed to check microphone permission state",t),"unknown"}}const Ku=Le(void 0),POe=1e3*60*9,ROe=Le([]),OOe=Le([]),Ect=Le(void 0),KI=Le([]),vh=Le(!1);function LOe(t,e){return t.includes(e)?t:[...t,e]}function DOe(t,e){return t.includes(e)?t.filter(s=>s!==e):t}function x_(...t){_l.debug("[Status Cache]",...t)}function FOe(t){const e=js(t,"2943229081");return{"require-voice-used-recently":e.get("require-voice-used-recently",!1),"voice-used-within-past-days":e.get("voice-used-within-past-days",7),"enable-cache-for-gpts":e.get("enable-cache-for-gpts",!1),"enable-cache-for-new-users":e.get("enable-cache-for-new-users",!1),"new-user-within-past-days":e.get("new-user-within-past-days",7),"voice-status-cache-ttl-ms":e.get("voice-status-cache-ttl-ms",POe),"enable-cache-if-mic-granted":e.get("enable-cache-if-mic-granted",!1)}}function BOe(t,e){var l;const s=t["enable-cache-for-new-users"],n=t["new-user-within-past-days"];if(!s)return!1;const o=((l=e==null?void 0:e.created)!=null?l:0)*1e3,a=Date.now()-o;return Math.floor(a/(1e3*60*60*24))<n}function UOe(t,e){const s=t["require-voice-used-recently"],n=t["voice-used-within-past-days"],o=n*24*60*60*1e3;if(e&&!s)return x_("User using transceiver and recency not required, prefetch OK"),!0;const a=ft.getItem(Be.VoiceLastUsed),i=a?new Date(a):null,l=i?i.getTime()>Date.now()-o:!1;return x_("User ".concat(l?"passes":"fails"," recency requirement, prefetch ").concat(l?"OK":"SKIP"),{voiceUsedWithinDays:n,lastUsedVoiceDate:i}),l}const Mct=({conversationId:t})=>{var k;const e=G(),{voiceName:s}=i0(),n=Bs(t),o=AOe(),a=x.useRef(!1),i=xl(E=>E.isVoiceModeActive),l=Q_(),c=(k=cOe(t))!=null?k:gX,u=VE(e),d=x.useMemo(()=>FOe(e),[e]),f=xs(),m=d["voice-status-cache-ttl-ms"],p=Ee(e,"2209667701"),g=ut(),h=Qe(n,E=>!!(E&&E.isLoading===!1))||wl(t),_=x.useMemo(()=>{const E=d["enable-cache-for-gpts"],M=UOe(d,u),N=BOe(d,f),A=!!l,I=[];return I.push(!p&&"gate-disabled"),!M&&!N&&(I.push("not-voice-used-recently"),I.push("fails-new-user-requirement")),I.push(!E&&A&&"is-custom-gpt"),I.push(!g&&"logged-out"),I.filter(P=>typeof P=="string")},[l,u,d,f,p,g]),[b,y]=x.useState([]);x.useEffect(()=>{const E=d["enable-cache-if-mic-granted"];g&&p&&E?ez().then(M=>{y(M==="granted"?N=>LOe(N,"mic-granted"):N=>DOe(N,"mic-granted"))}):y(M=>M.length>0?[]:M)},[d,p,g]);const v=x.useMemo(()=>({conversation_id:n!=null?n:null,requested_voice_mode:"advanced",gizmo_id:l!=null?l:null,voice:s!=null?s:null,requested_default_model:c}),[n,s,l,c]),S=oe(()=>vh()),C=x.useRef(void 0),w=x.useRef(void 0);return x.useEffect(()=>{vh.set(!0)},[v]),x.useEffect(()=>{if(!h)return;ROe.set(_),OOe.set(b),x_("Eligibility snapshot",{eligibleReasons:b,ineligibleReasons:_}),_.length>0&&b.length===0&&Ku.set(void 0);const E=_.length===0||b.length>0,M=!i&&E&&S,N=a.current;!M||N||(a.current=!0,x_("Prefetching voice status"),o(v,"voice-status-cache").then(A=>{KI.set([]);const{chatreq:I}=A;Ku.set(U(T({},A),{proofOfWorkPromise:new Promise((P,R)=>{I?gi.getEnforcementToken(I).then(P).catch(R):P(null)})})),C.current=Date.now(),vh.set(!1),clearTimeout(w.current),w.current=setTimeout(()=>{var R;const P=(R=C.current)!=null?R:0;Date.now()-P>=m&&(Ku.set(void 0),vh.set(!0),Ge.addAction("voice-status-cache-stale",{conversationId:v.conversation_id,protocol:xt(()=>mx()),ttlMs:m}))},m)}).catch(A=>{var I;A.code==="conversation_not_found"?Ge.addAction("voice-status-cache-conversation-not-found",{conversationId:v.conversation_id}):Jt.voiceStatusCache.error(A),KI.set([(I=A.code)!=null?I:"unknown error"]),Ku.set(void 0)}).finally(()=>{a.current=!1}))},[o,v,_,b,i,S,m,h]),x.useEffect(()=>()=>{clearTimeout(w.current)},[]),null};function $Oe(){"use forget";return oe(HOe)}function HOe(){return Ku()}function GOe(){var s,n,o,a,i,l,c,u;const t=$Oe();if(!t)return{video:!1,screenshare:!1,file_uploads:!1,image_uploads:!1};const e=jOe(t);return{video:(n=(s=e==null?void 0:e.features)==null?void 0:s.video)!=null?n:!1,screenshare:(a=(o=e==null?void 0:e.features)==null?void 0:o.screen_sharing)!=null?a:!1,file_uploads:(l=(i=e==null?void 0:e.features)==null?void 0:i.file_uploads)!=null?l:!1,image_uploads:(u=(c=e==null?void 0:e.features)==null?void 0:c.image_uploads)!=null?u:!1}}const tz=()=>{"use forget";const t=F.c(6),e=G(),s=zc(),n=GOe(),o=Ee(e,"4237780970");if(!s){let d;return t[0]===Symbol.for("react.memo_cache_sentinel")?(d={video:"not_applicable",screenshare:"not_applicable",file_uploads:"not_applicable",image_uploads:"not_applicable"},t[0]=d):d=t[0],d}const a=n.video?"allowed":"blocked",i=n.screenshare?"allowed":"blocked",l=n.file_uploads||o?"allowed":"blocked",c=n.image_uploads?"allowed":"blocked";let u;return t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==c?(u={video:a,screenshare:i,file_uploads:l,image_uploads:c},t[1]=a,t[2]=i,t[3]=l,t[4]=c,t[5]=u):u=t[5],u},zE=ue(Ce,"b7a3ee",20,20),sz=ue(Ce,"8ea31d",20,20),VOe=Object.freeze(Object.defineProperty({__proto__:null,default:sz},Symbol.toStringTag,{value:"Module"})),zOe="3578245547",WOe="2904126195",qOe="persist-files-to-library",KOe="show-recent-files-dropdown",YOe="double-write-files-to-library";function nz(t,e=!1){Xe(t,WOe,{disableExposureLog:e});const s=_o(t,zOe,{disableExposureLog:e});return{persistFilesToLibrary:s.get(qOe,!1),showRecentFilesDropdown:s.get(KOe,!1),doubleWriteFilesToLibrary:s.get(YOe,!1)}}const Of=ys(t=>{const e=Le(!1),s=Le(!1),n=w9(t),o=vt(()=>s()&&n.anySheetOpen$()),a=Cl(Be.ComposerMenuSheetBounced,()=>!1),i=vt(()=>e()||o());return{hasBounced$:a,isSheetVisible$:i,isSheetOpen$:e,keepSheetOpen$:s}}),QOe=t=>{"use forget";const e=F.c(39),{onCloseAutoFocus:s,children:n,items:o,fileUploadRateLimited:a}=t,i=G(),l=oe(ax);let c;e[0]!==i?(c=Of(i),e[0]=i,e[1]=c):c=e[1];const u=c,{isSheetOpen$:d,keepSheetOpen$:f}=u,m=oe(d);let p;e[2]!==i?(p=()=>!fc()&&nd(i),e[2]=i,e[3]=p):p=e[3];const g=oe(p);let h;e[4]!==i?(h=()=>z3(i).get$(),e[4]=i,e[5]=h):h=e[5];const _=oe(h),b=(_||g)&&$i.getIsInExperiment(i)==="treatment"?"sheet":"dropdown";let y;e[6]!==i?(y=$i.getDetentSize(i),e[6]=i,e[7]=y):y=e[7];const v=y;let S;e[8]!==i?(S=$i.getBackClosesSheet(i),e[8]=i,e[9]=S):S=e[9];const C=S;let w;e[10]!==C||e[11]!==b?(w=b==="sheet"&&C?{behavior:"history",sheetName:"composer-plus-menu"}:{},e[10]=C,e[11]=b,e[12]=w):w=e[12];const k=w;let E;e[13]!==u.hasBounced$?(E=()=>di(O=>{O!==0&&(u.hasBounced$.set(!0),B.logEventWithStatsig("Composer: Plus Menu Detent Change","chatgpt_web_composer_plus_menu_detent_change",{detent:O}))},1e3),e[13]=u.hasBounced$,e[14]=E):E=e[14];const[M]=x.useState(E),N=!l;let A;e[15]!==v?(A=v===""?void 0:[v],e[15]=v,e[16]=A):A=e[16];let I;e[17]!==i||e[18]!==a||e[19]!==_||e[20]!==g||e[21]!==f||e[22]!==b||e[23]!==u.isSheetOpen$?(I=O=>{const L=b==="sheet";cl(()=>{const D=!nd||fc();O&&D&&z3(i).recordModeOpened$(b),u.isSheetOpen$.set(O),L&&O&&f.set(!1)}),O?(Ge.addAction("composer.plus_menu.open",{mode:b,isUsingSheet:L,forcedMode:_!=null?_:"auto",isBottomSheetEligible:g}),nz(i,!1),Xe(i,"1092897457").get("is_tatertot_enabled",!0),_===void 0&&nd(i)&&!fc()&&$i.getIsInExperimentWithExpsoure(i),L&&B.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",a?{file_upload_disabled_reason:"rate_limit",mode:b}:{mode:b})):!O&&L&&B.logEventWithStatsig("Composer: Close Plus Menu","chatgpt_web_composer_plus_menu_close",{mode:b})},e[17]=i,e[18]=a,e[19]=_,e[20]=g,e[21]=f,e[22]=b,e[23]=u.isSheetOpen$,e[24]=I):I=e[24];let P;e[25]!==o||e[26]!==s?(P=r.jsx(J.Portal,{children:r.jsx(JOe,{onCloseAutoFocus:s,children:o})}),e[25]=o,e[26]=s,e[27]=P):P=e[27];let R;return e[28]!==n||e[29]!==k||e[30]!==b||e[31]!==M||e[32]!==m||e[33]!==u||e[34]!==I||e[35]!==P||e[36]!==N||e[37]!==A?(R=r.jsxs(J.Root,U(T({mode:b,open:m,store:u},k),{modal:N,detents:A,onActiveDetentChange:M,onOpenChange:I,children:[n,P]})),e[28]=n,e[29]=k,e[30]=b,e[31]=M,e[32]=m,e[33]=u,e[34]=I,e[35]=P,e[36]=N,e[37]=A,e[38]=R):R=e[38],R},JOe=t=>{"use forget";const e=F.c(22),{onCloseAutoFocus:s,children:n}=t,o=G(),{fullyExpanded$:a,mode:i}=x.use(hX),l=oe(a);let c;e[0]!==o?(c=()=>Wc(o),e[0]=o,e[1]=c):c=e[1];const{isCombinedList:u,showModelsInPlusMenu:d}=oe(c);let f;e[2]!==o?(f=Of(o),e[2]=o,e[3]=f):f=e[3];const{hasBounced$:m}=f;let p;e[4]!==o?(p=$i.getCanBounce(o),e[4]=o,e[5]=p):p=e[5];const g=p,_=5.8+(Ee(o,"3814343233")?1:0)+(d?1.2:0),b=l&&"content-sheet-section:scrollable-content-section";let y;e[6]!==o||e[7]!==u||e[8]!==i?(y=i!=="sheet"&&ut()&&u&&"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+var(--min-items,6.8)*var(--menu-item-height))]!",e[6]=o,e[7]=u,e[8]=i,e[9]=y):y=e[9];let v;e[10]!==b||e[11]!==y?(v=z("content-sheet-section:flex content-sheet-section:flex-col content-sheet-section:gap-3",b,y),e[10]=b,e[11]=y,e[12]=v):v=e[12];let S;e[13]!==_?(S={"--min-items":_},e[13]=_,e[14]=S):S=e[14];const C=S;let w;return e[15]!==g||e[16]!==n||e[17]!==m||e[18]!==s||e[19]!==v||e[20]!==C?(w=r.jsx(J.Content,{showHeader:!0,className:v,style:C,canBounce:g,hasBounced$:m,size:"auto",alignOffset:-7,loop:!0,onCloseAutoFocus:s,children:n}),e[15]=g,e[16]=n,e[17]=m,e[18]=s,e[19]=v,e[20]=C,e[21]=w):w=e[21],w},ZOe=t=>{"use forget";const e=F.c(2);let s;return e[0]!==t?(s=r.jsx(J.BasicTrigger,{asChild:!0,children:r.jsx(XOe,T({},t))}),e[0]=t,e[1]=s):s=e[1],s},XOe=t=>{"use forget";var y;const e=F.c(24);let s,n,o;e[0]!==t?(y=t,{className:s,plusButtonIcon:n}=y,o=De(y,["className","plusButtonIcon"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o):(s=e[1],n=e[2],o=e[3]);const a=G();let i;e[4]!==a?(i=()=>Wc(a),e[4]=a,e[5]=i):i=e[5];const{plusButtonLabel:l}=oe(i);let c;e[6]!==a?(c=()=>Ss(a),e[6]=a,e[7]=c):c=e[7];const u=oe(c),d=ne(),f=u&&"composer-btn--desktopSidebar",m=l&&"border-token-border-medium me-1 gap-1.5 border-1 ps-2 pe-3.5";let p;e[8]!==s||e[9]!==f||e[10]!==m?(p=z("composer-btn",s,f,m),e[8]=s,e[9]=f,e[10]=m,e[11]=p):p=e[11];let g;e[12]!==d?(g=d.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}),e[12]=d,e[13]=g):g=e[13];let h;e[14]!==n?(h=n!=null?n:r.jsx(og,{className:"icon"}),e[14]=n,e[15]=h):h=e[15];let _;e[16]!==l?(_=l&&r.jsx("span",{inert:!0,children:r.jsx(j,{id:"uHQYgJ",defaultMessage:"Add"})}),e[16]=l,e[17]=_):_=e[17];let b;return e[18]!==o||e[19]!==p||e[20]!==g||e[21]!==h||e[22]!==_?(b=r.jsxs("button",U(T({type:"button",className:p,"data-testid":"composer-plus-btn","aria-label":g},o),{id:"composer-plus-btn",children:[h,_]})),e[18]=o,e[19]=p,e[20]=g,e[21]=h,e[22]=_,e[23]=b):b=e[23],b},e7e=t=>{"use forget";const e=F.c(4),{layoutMode:s,children:n}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(J.SubMenuTrigger,{icon:ra,label:r.jsx(j,{id:"iORE28",defaultMessage:"More"})}),e[0]=o):o=e[0];const a=s==="bottom"?"end":"start";let i;return e[1]!==n||e[2]!==a?(i=r.jsxs(J.Sub,{children:[o,r.jsx(J.Portal,{children:r.jsx(J.SubContent,{align:a,children:n})})]},"more-tools-menu"),e[1]=n,e[2]=a,e[3]=i):i=e[3],i},t7e=t=>{"use forget";const e=F.c(4),{layoutMode:s,children:n}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(J.SubMenuTrigger,{icon:sz,label:r.jsx(j,{id:"gVFn9L",defaultMessage:"Tools"})}),e[0]=o):o=e[0];const a=s==="bottom"?"end":"start";let i;return e[1]!==n||e[2]!==a?(i=r.jsxs(J.Sub,{children:[o,r.jsx(J.Portal,{children:r.jsx(J.SubContent,{align:a,children:n})})]},"collapsed-tool-menu"),e[1]=n,e[2]=a,e[3]=i):i=e[3],i},s7e=()=>ES([{key:Ye.PictureV2,label:r.jsx(j,{id:"8CBFak",defaultMessage:"Create image"}),icon:hd(Ye.PictureV2)},{key:Ye.Research,label:r.jsx(j,{id:"EGM5w4",defaultMessage:"Deep research"}),icon:hd(Ye.Research)},{key:Ye.Think,label:r.jsx(j,{id:"V/wEA3",defaultMessage:"Think longer"}),icon:hd(Ye.Think)},{key:"gpt-5",label:"GPT-5",icon:zE},{key:"add-flies",label:r.jsx(j,{id:"dUwCPF",defaultMessage:"Add files"}),icon:EG}]).slice(0,3),n7e=()=>{"use forget";const t=F.c(5),e=G();let s;if(t[0]!==e){const n=s7e(),o=o7e,a=c=>{os(e,{fallbackScreenHint:"login_or_signup",callback:u=>{B.logLoginOrSignUpButtonClicked({location:"Plus Menu ".concat(c),provider:u},o(c))},skipLoginModal:!1})};let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(J.Label,{children:r.jsx(j,{id:"2SJWKf",defaultMessage:"Log in to use..."})}),t[2]=i):i=t[2];let l;t[3]!==a?(l=c=>r.jsx(J.Item,{label:c.label,icon:c.icon,"data-disabled":!0,onSelect:()=>{a(c.key)},highlightTrailing:r.jsx(_X,{to:"#",onClick:u=>{u.preventDefault(),a(c.key)},children:r.jsx(j,T({},$t.logInButtonText))})},c.key),t[3]=a,t[4]=l):l=t[4],s=r.jsxs(J.Group,{children:[i,n.map(l)]}),t[0]=e,t[1]=s}else s=t[1];return s};function o7e(t){switch(t.trim().toLowerCase()){case"add_files":return Lt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_ADD_FILES;case"picture_v2":return Lt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_PICTURE_V2;case"gpt_5":return Lt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_GPT_5;case"research":return Lt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_RESEARCH;case"reason":return Lt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_REASON;default:return Lt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION}}function Nct(t){"use forget";const e=F.c(28),{uploadType:s,modelSupportedImageMimeTypes:n,gizmo:o,attachmentsProductFeature:a,contextScopes:i}=t,l=ne(),c=Si(),u=Kt();let d;e[0]!==a||e[1]!==i||e[2]!==c||e[3]!==(o==null?void 0:o.gizmo)||e[4]!==l||e[5]!==n||e[6]!==u||e[7]!==s?(d=(C,w)=>{C&&(Array.from(C).forEach(k=>{fr.uploadFile(c,tl(k),k,s!=null?s:ko.Retrieval,n,l,u,T({gizmoId:o==null?void 0:o.gizmo.id},i&&i.length>0?{contextScopes:i}:{}),a)}),B.logEventWithStatsig("Upload File",w==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:w,source:s,location:s===ko.Retrieval?"retrieval":"context-connector-picker"}))},e[0]=a,e[1]=i,e[2]=c,e[3]=o==null?void 0:o.gizmo,e[4]=l,e[5]=n,e[6]=u,e[7]=s,e[8]=d):d=e[8];const f=d;let m;e[9]!==s?(m=C=>{B.logEvent("Open File Viewer",{intent:C,source:s}),pt.logEvent("chatgpt_web_".concat(C,"_file_viewer_opened"),null,{location:s===ko.Retrieval?"retrieval":"context-connector-picker"})},e[9]=s,e[10]=m):m=e[10];const p=m;let g;e[11]!==p?(g=()=>p("photos"),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==f?(h=C=>{f(C.currentTarget.files,"photos")},e[13]=f,e[14]=h):h=e[14];let _;e[15]!==g||e[16]!==h?(_=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-photos",onClick:g,onChange:h,accept:"image/*",multiple:!0}),e[15]=g,e[16]=h,e[17]=_):_=e[17];let b;e[18]!==p?(b=()=>p("camera"),e[18]=p,e[19]=b):b=e[19];let y;e[20]!==f?(y=C=>{f(C.currentTarget.files,"camera")},e[20]=f,e[21]=y):y=e[21];let v;e[22]!==b||e[23]!==y?(v=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-camera",onClick:b,onChange:y,accept:"image/*",capture:"environment",multiple:!0}),e[22]=b,e[23]=y,e[24]=v):v=e[24];let S;return e[25]!==_||e[26]!==v?(S=r.jsxs(r.Fragment,{children:[_,v]}),e[25]=_,e[26]=v,e[27]=S):S=e[27],S}const YI=t=>{"use forget";const e=F.c(11),{forMobileSheet:s,className:n}=t,o=G(),a=s?J.HeaderItemAs:J.ItemAs;let i;e[0]!==o||e[1]!==s?(i=d=>{s?Of(o).keepSheetOpen$.set(!0):oz(d)},e[0]=o,e[1]=s,e[2]=i):i=e[2];const l=s?"large":void 0;let c;e[3]!==s?(c=s?r.jsx(j,{id:"wWojoI",defaultMessage:"Camera"}):r.jsx(j,{id:"AjuCMV",defaultMessage:"Take photo"}),e[3]=s,e[4]=c):c=e[4];let u;return e[5]!==a||e[6]!==n||e[7]!==i||e[8]!==l||e[9]!==c?(u=r.jsx(a,{as:"label",htmlFor:"upload-camera",onPointerUp:i,className:n,icon:RE,size:l,label:c}),e[5]=a,e[6]=n,e[7]=i,e[8]=l,e[9]=c,e[10]=u):u=e[10],u},QI=t=>{"use forget";const e=F.c(11),{forMobileSheet:s}=t,n=G(),o=s?J.HeaderItemAs:J.ItemAs;let a;e[0]!==n||e[1]!==s?(a=f=>{if(!s){oz(f);return}Of(n).keepSheetOpen$.set(!0)},e[0]=n,e[1]=s,e[2]=a):a=e[2];const i=a,l=s?"large":void 0,c=s?Nf:If;let u;e[3]!==s?(u=s?r.jsx(j,{id:"h453TK",defaultMessage:"Photos"}):r.jsx(j,{id:"kBmJ2X",defaultMessage:"Add photos"}),e[3]=s,e[4]=u):u=e[4];let d;return e[5]!==o||e[6]!==i||e[7]!==l||e[8]!==c||e[9]!==u?(d=r.jsx(o,{as:"label",htmlFor:"upload-photos",onPointerUp:i,size:l,icon:c,label:u}),e[5]=o,e[6]=i,e[7]=l,e[8]=c,e[9]=u,e[10]=d):d=e[10],d};function oz(t){t.currentTarget.click()}const a7e=[et.Mod,"u"];function WE(t,e="en"){if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const n=new Date,o=Math.max(0,s.getTime()-n.getTime()),a=Math.floor(o/(1e3*60)),i=Math.floor(o/(1e3*60*60)),l=Math.floor(o/(1e3*60*60*24));let c,u;return l>0?(c=l,u="day"):i>0?(c=i,u="hour"):(c=a,u="minute"),new Intl.RelativeTimeFormat(e,{numeric:"always"}).format(c,u).replace(/^in\s+/i,"").replace(/\s+ago$/i,"")}function az({openFileDialog:t,showMenuForNoAuth:e,mode:s,modelSupportsImages:n,isDisabled:o,disabledReason:a,rateLimitInfo:i,currentModelName:l,clientThreadId:c,onTakePhotoSave:u}){const d=G(),f=ct(d),{attachfileRateLimitMessageVariant:m,attachfileRateLimitMessageShowIcon:p}=oe(()=>Wc(d)),g=n&&!o&&mf(),h=n&&!o&&ut()&&cC(),_=oe(()=>n&&!o&&!g&&Ee(d,"3814343233")&&rOe(d)),b=o&&a===al.RateLimitReached,y=Qe(c,Se.getIsNewConversation),v=x.useRef(!1);x.useEffect(()=>{var C;b&&!v.current&&(B.logEventWithStatsig("Rate Limit: Show Info","chatgpt_rate_limit_tooltip_shown",{location:"file_upload",type:"rate_limit",plan_type:(C=f==null?void 0:f.planType)!=null?C:"unknown",is_new_conversation:y}),v.current=!0)},[b,y,f==null?void 0:f.planType]);let S;if(o&&a===al.RateLimitReached)if(f!=null&&f.hasPaidSubscription())S=r.jsx(JI,{account:f,forSheet:s==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});else switch(s==="sheet"?"title_and_description":m){case"linked_text":S=r.jsx(l7e,{account:f,rateLimitInfo:i!=null?i:null,showIcon:p});break;case"title_and_description":S=r.jsx(JI,{account:f,forSheet:s==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});break;case"upgrade_button":S=r.jsx(c7e,{account:f,rateLimitInfo:i!=null?i:null});break}else S=r.jsxs(r.Fragment,{children:[r.jsx(r7e,{mode:s,rateLimitInfo:i!=null?i:null,hasAddPhotosItem:h,currentModelName:l,openFileDialog:t,disabled:o,disabledReason:a}),_&&u&&r.jsx(i7e,{onPhotoSave:u})]});return e?r.jsx(u7e,{onClickUploadImages:t,redirectToAuth:()=>os(d,{fallbackScreenHint:"login",skipLoginModal:!1})}):s==="sheet"?r.jsxs(r.Fragment,{children:[g&&r.jsx(YI,{forMobileSheet:!0}),h&&r.jsx(QI,{forMobileSheet:!0}),S]}):r.jsxs(r.Fragment,{children:[h&&r.jsx(QI,{}),g&&r.jsx(YI,{}),S]})}function r7e(t){"use forget";const e=F.c(29),{hasAddPhotosItem:s,currentModelName:n,mode:o,openFileDialog:a,disabled:i,disabledReason:l}=t,c=ne(),u=G(),d=oe(b6),{file_uploads:f,image_uploads:m}=tz(),p=s?"android":o==="sheet"&&ut()?"ios":"default";let g;e:{if(m==="allowed"&&f==="allowed"){let w;e[0]!==c?(w=c.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[0]=c,e[1]=w):w=e[1],g=w;break e}else if(m==="allowed"&&f!=="allowed"){let w;e[2]!==c?(w=c.formatMessage({id:"LocalFileDropdownItem.uploadImagesOnly",defaultMessage:"Add photos"}),e[2]=c,e[3]=w):w=e[3],g=w;break e}switch(p){case"android":{let w;e[4]!==c?(w=c.formatMessage({id:"LocalFileDropdownItem.uploadFilesOnly",defaultMessage:"Add files"}),e[4]=c,e[5]=w):w=e[5],g=w;break e}case"ios":{let w;e[6]!==c?(w=c.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[6]=c,e[7]=w):w=e[7],g=w;break e}case"default":{let w;e[8]!==u||e[9]!==n||e[10]!==i||e[11]!==l||e[12]!==c?(w=_0(u,c,i,l,n),e[8]=u,e[9]=n,e[10]=i,e[11]=l,e[12]=c,e[13]=w):w=e[13],g=w;break e}}g=void 0}const h=g,_=o==="sheet"?J.HeaderItem:J.Item,b=o==="sheet"?"large":void 0;let y;e[14]!==u||e[15]!==o||e[16]!==a?(y=()=>{o==="sheet"?(Of(u).keepSheetOpen$.set(!0),Promise.resolve().then(()=>{a()})):a()},e[14]=u,e[15]=o,e[16]=a,e[17]=y):y=e[17];let v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(LE,{className:"icon"}),e[18]=v):v=e[18];let S;e[19]!==o?(S=o!=="sheet"&&r.jsx(mT,{binding:a7e,className:"touch:hidden"}),e[19]=o,e[20]=S):S=e[20];let C;return e[21]!==_||e[22]!==i||e[23]!==d||e[24]!==h||e[25]!==b||e[26]!==y||e[27]!==S?(C=r.jsx(_,{size:b,onClick:y,icon:v,label:h,disabled:i,highlightTrailing:S,showHighlightTrailing:d},"upload"),e[21]=_,e[22]=i,e[23]=d,e[24]=h,e[25]=b,e[26]=y,e[27]=S,e[28]=C):C=e[28],C}function i7e(t){"use forget";const e=F.c(10),{mode:s,onPhotoSave:n}=t,o=G(),a=ne(),i=s==="sheet"?J.HeaderItem:J.Item;let l;e[0]!==o||e[1]!==n?(l=()=>{mt(o,lOe,{onPhotoSave:n})},e[0]=o,e[1]=n,e[2]=l):l=e[2];const c=s==="sheet"?"large":void 0;let u;e[3]!==a?(u=a.formatMessage({id:"cfxsRv",defaultMessage:"Take photo"}),e[3]=a,e[4]=u):u=e[4];let d;return e[5]!==i||e[6]!==l||e[7]!==c||e[8]!==u?(d=r.jsx(i,{icon:RE,onClick:l,size:c,label:u}),e[5]=i,e[6]=l,e[7]=c,e[8]=u,e[9]=d):d=e[9],d}function JI({account:t,forSheet:e,rateLimitInfo:s,currentModelName:n}){const o=ne(),a=G(),i=yt(),l=WE(s==null?void 0:s.resets_after);let c=r.jsx(LE,{className:"icon"}),u;t!=null&&t.hasPaidSubscription()?u=o.formatMessage({id:"ZBhfvX",defaultMessage:"Wait {time} to upload again"},{time:l}):(c=r.jsx(k6e,{className:"icon"}),u=o.formatMessage({id:"ba5pHI",defaultMessage:"Or wait {time} to upload again"},{time:l}));const d=e?J.HeaderItemRow:J.Item;return r.jsx(d,{onClick:()=>{t?y_(i,t):os(a,{fallbackScreenHint:"login_or_signup",callback:f=>{B.logLogInButtonClicked({provider:f,location:"File picker rate limit tooltip"},Lt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},icon:!e&&c,disabled:(t==null?void 0:t.hasPaidSubscription())&&!e,label:_0(a,o,!0,al.RateLimitReached,n),trailing:e&&!(t!=null&&t.hasPaidSubscription())&&r.jsx(ke,{className:z(e&&"min-h-9"),onClick:()=>{y_(i,t)},children:r.jsx(j,T({},$t.upgrade))}),secondary:u},"upload")}function l7e({account:t,rateLimitInfo:e,showIcon:s}){const n=ne(),o=yt(),a=WE(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"group flex min-w-0 items-center py-2 ".concat(s?"px-2.5":"px-5"),children:[s&&r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center",children:r.jsx(LE,{className:"text-token-text-tertiary"})}),r.jsx("div",{className:"text-token-text-tertiary line-clamp-2 block max-w-[212px] min-w-0 flex-1 text-start text-sm font-light",children:n.formatMessage({id:"egGG9V",defaultMessage:"<link>Upgrade to Plus</link> to attach more files or try again in {time}"},{time:a,link:i=>r.jsx("button",{type:"button",className:"text-token-text-secondary underline",onClick:()=>{y_(o,t)},children:i})})})]},"upload")}function c7e({account:t,rateLimitInfo:e}){const s=ne(),n=yt(),o=WE(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"flex flex-col gap-2 px-5 py-2",children:[r.jsx("div",{className:"text-token-text-tertiary max-w-[212px] text-start text-sm font-light",children:s.formatMessage({id:"/zL/ev",defaultMessage:"Upgrade to Plus to attach more files or try again in {time}"},{time:o})}),r.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded-full bg-[#F1F1FB] px-4 py-2 text-sm font-medium text-[#AF52DE] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClick:()=>{y_(n,t)},children:[r.jsx(yg,{className:"icon-sm text-[#5D5BD0] dark:text-[#DCDBF6]"}),r.jsx(j,T({},$t.upgrade))]})]},"upload")}function y_(t,e){var s;an(t,"Rate limited file upload inline-text"),B.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"inline-text",plan_type:(s=e==null?void 0:e.planType)!=null?s:"unknown",is_hard_block:!1,hard_block_reason:""})}function u7e({onClickUploadImages:t,redirectToAuth:e}){return r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:OE,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(j,T({},em.connectApps)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(j,T({},em.loginRequired))})]})},"connect-apps-no-auth"),r.jsx(J.Item,{icon:Eo,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(j,T({},em.uploadDocuments)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(j,T({},em.loginRequired))})]})},"upload-documents-no-auth"),r.jsx(J.Item,{icon:Nf,onClick:t,children:r.jsx(j,T({},em.uploadImages))},"upload-images-no-auth")]})}const em=Ne({connectApps:{id:"Rna6u2",defaultMessage:"Connect apps"},uploadDocuments:{id:"0BxpM7",defaultMessage:"Documents"},uploadImages:{id:"rdMuNJ",defaultMessage:"Images"},loginRequired:{id:"/1XNys",defaultMessage:"Login required"}});function Act(){"use forget";const t=F.c(8),e=G(),s=ne();let n;t[0]!==s?(n=s.formatMessage({id:"ebFfvg",defaultMessage:"Create image"}),t[0]=s,t[1]=n):n=t[1];const o=n;let a;t[2]!==e?(a=u=>{u.preventDefault(),u.stopPropagation(),B.logEventWithStatsig("Composer Create Image Button Clicked","composer_create_image_button_clicked"),os(e,{fallbackScreenHint:"login_or_signup",skipLoginModal:!1,loginModalSubtitleVariant:"create-image"})},t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(Nf,{className:"icon"}),t[4]=l):l=t[4];let c;return t[5]!==i||t[6]!==o?(c=r.jsx(pE,{pressed:!1,disabled:!1,icon:l,label:o,ariaLabel:o,animatedLabel:!0,showLabel:!0,onClick:i,dataTestid:"composer-button-create-image"}),t[5]=i,t[6]=o,t[7]=c):c=t[7],c}function Ict(t){"use forget";const e=F.c(12),{composerController:s,clientThreadId:n}=t,o=ne(),a=On(),i=jo(),l=a===Ye.Tatertot;let c;e[0]!==o?(c=o.formatMessage({id:"bF9p2/",defaultMessage:"Study"}),e[0]=o,e[1]=c):c=e[1];const u=c;let d;e[2]!==n||e[3]!==s||e[4]!==l||e[5]!==i?(d=g=>{g.stopPropagation(),g.preventDefault(),i(l?null:Ye.Tatertot,{analyticsMetadata:{clientThreadId:n}}),l||no(Ht(s))},e[2]=n,e[3]=s,e[4]=l,e[5]=i,e[6]=d):d=e[6];const f=d;let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(r0,{className:"h-[18px] w-[18px]"}),e[7]=m):m=e[7];let p;return e[8]!==f||e[9]!==l||e[10]!==u?(p=r.jsx(pE,{pressed:l,icon:m,label:u,ariaLabel:u,animatedLabel:!0,showLabel:!0,onClick:f,disabled:!1,dataTestid:"composer-button-study"}),e[8]=f,e[9]=l,e[10]=u,e[11]=p):p=e[11],p}const d7e=Le(!1,{name:"customSourceListEnabled",getServerFallback:()=>!1}),f7e=["deep-research","custom-source-list"];function m7e(t){"use forget";const e=F.c(4);let s;e[0]!==t?(s=t===void 0?{}:t,e[0]=t,e[1]=s):s=e[1];const{enabled:n}=s,o=n===void 0?!1:n;let a;return e[2]!==o?(a={queryKey:f7e,queryFn:p7e,staleTime:3e5,enabled:o},e[2]=o,e[3]=a):a=e[3],dt(a)}function p7e(){return de.safeGet("/custom_source_lists/default")}function jct(t){"use forget";const e=F.c(17),{enabled:s}=t;oe(g7e);const n=!1;let o;e[0]!==n?(o={enabled:n},e[0]=n,e[1]=o):o=e[1];const{data:a}=m7e(o)}function g7e(){return d7e()}var Sh={},ZI;function h7e(){return ZI||(ZI=1,Sh.__esModule=!0,Sh.default=function(t,e){if(t&&e){var s=Array.isArray(e)?e:e.split(",");if(s.length===0)return!0;var n=t.name||"",o=(t.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return s.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?n.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):o===l})}return!0}),Sh}var _7e=h7e();const fv=en(_7e);function XI(t){return b7e(t)||y7e(t)||iz(t)||x7e()}function x7e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y7e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function b7e(t){if(Array.isArray(t))return jS(t)}function ej(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),s.push.apply(s,n)}return s}function tj(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ej(Object(s),!0).forEach(function(n){rz(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ej(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function rz(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function np(t,e){return C7e(t)||S7e(t,e)||iz(t,e)||v7e()}function v7e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iz(t,e){if(t){if(typeof t=="string")return jS(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return jS(t,e)}}function jS(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function S7e(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n=[],o=!0,a=!1,i,l;try{for(s=s.call(t);!(o=(i=s.next()).done)&&(n.push(i.value),!(e&&n.length===e));o=!0);}catch(c){a=!0,l=c}finally{try{!o&&s.return!=null&&s.return()}finally{if(a)throw l}}return n}}function C7e(t){if(Array.isArray(t))return t}var w7e=typeof fv=="function"?fv:fv.default,k7e="file-invalid-type",lz="file-too-large",T7e="file-too-small",cz="too-many-files",Pct={FileTooLarge:lz,TooManyFiles:cz},E7e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=e.split(","),n=s.length>1?"one of ".concat(s.join(", ")):s[0];return{code:k7e,message:"File type must be ".concat(n)}},sj=function(e){return{code:lz,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},nj=function(e){return{code:T7e,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Rct={code:cz,message:"Too many files"};function M7e(t,e){var s=t.type==="application/x-moz-file"||w7e(t,e);return[s,s?null:E7e(e)]}function N7e(t,e,s){if(Zl(t.size))if(Zl(e)&&Zl(s)){if(t.size>s)return[!1,sj(s)];if(t.size<e)return[!1,nj(e)]}else{if(Zl(e)&&t.size<e)return[!1,nj(e)];if(Zl(s)&&t.size>s)return[!1,sj(s)]}return[!0,null]}function Zl(t){return t!=null}function Oct(t){var e=t.files,s=t.accept,n=t.minSize,o=t.maxSize,a=t.multiple,i=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&i>=1&&e.length>i?!1:e.every(function(c){var u=M7e(c,s),d=np(u,1),f=d[0],m=N7e(c,n,o),p=np(m,1),g=p[0],h=l?l(c):null;return f&&g&&!h})}function oj(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Lct(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Dct(t){t.preventDefault()}function A7e(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function I7e(t){return t.indexOf("Edge/")!==-1}function Fct(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return A7e(t)||I7e(t)}function Bct(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return function(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return e.some(function(l){return!oj(n)&&l&&l.apply(void 0,[n].concat(a)),oj(n)})}}function Uct(){return"showOpenFilePicker"in window}function $ct(t){if(Zl(t)){var e=Object.entries(t).filter(function(s){var n=np(s,2),o=n[0],a=n[1],i=!0;return uz(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(a)||!a.every(dz))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(s,n){var o=np(n,2),a=o[0],i=o[1];return tj(tj({},s),{},rz({},a,i))},{});return[{description:"Files",accept:e}]}return t}function Hct(t){if(Zl(t))return Object.entries(t).reduce(function(e,s){var n=np(s,2),o=n[0],a=n[1];return[].concat(XI(e),[o],XI(a))},[]).filter(function(e){return uz(e)||dz(e)}).join(",")}function Gct(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function Vct(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function uz(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function dz(t){return/^.*\.[\w]+$/.test(t)}const zct=({className:t})=>r.jsxs(Jn,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:t,children:[r.jsx("g",{clipPath:"url(#clip0_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),r.jsx("g",{clipPath:"url(#clip1_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),r.jsxs("defs",{children:[r.jsx("clipPath",{id:"clip0_3605_64419",children:r.jsx("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),r.jsx("clipPath",{id:"clip1_3605_64419",children:r.jsx("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]}),Wct=({className:t})=>r.jsxs(Jn,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),r.jsx("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),qct=({className:t})=>r.jsxs(Jn,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),r.jsx("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Kct=({className:t})=>r.jsxs(Jn,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#0088FF"}),r.jsx("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Yct=({className:t})=>r.jsxs(Jn,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),r.jsx("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]});var pP;const Qct=Mt.button(pP||(pP=St(["flex items-center justify-center "," rounded-full "," "," "," "," ",""])),({$isSmall:t})=>t?"h-[34px] focus-visible:-outline-offset-1":"h-9",({$hideBorder:t,$visualTreatment:e})=>e!=="composer-btn"&&!t&&"border border-token-border-default",({$visualTreatment:t})=>t!=="composer-btn"&&"text-token-text-secondary",({$showLabel:t,$isSmall:e})=>t?"min-w-8 w-auto p-2 text-[13px] font-semibold radix-state-open:bg-black/10 hover:bg-token-main-surface-secondary":e?"w-7":"w-9",({disabled:t})=>t?"opacity-50":"hover:bg-token-main-surface-secondary",({$open:t})=>t&&"bg-black/10");function j7e(){const t=ne();return r.jsx("span",{className:"ps-1 pe-1 whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"PromptFilePicker.attachFilesLabel",defaultMessage:"Attach"})})}class PS extends Lc()(()=>({files:[]})){addFile(e){this.setState(s=>U(T({},s),{files:[...s.files,e]}))}updateFile(e,s){this.setState(n=>U(T({},n),{files:n.files.map(o=>o.fileSpec.id===e?T(T({},o),s):o)}))}removeFile(e){this.setState(s=>U(T({},s),{files:s.files.filter(n=>n.fileSpec.id!==e)}))}reset(){this.setState(()=>({files:[]}))}}X(PS,"selectFiles",e=>e.files),X(PS,"selectFile",(e,s)=>e.files.find(n=>n.fileSpec.id===s));const RS=ue(Ce,"b6a09f",20,20);function x0({isFirstParty:t,gizmoId:e,src:s,alt:n,className:o,showLoading:a,simple:i}){const l=G(),c=Hc(l,e),[u,d]=x.useState(!1),[f,m]=x.useState(!0);if(u||!s){const g=t||c;return i?g?r.jsx(Vv,{className:o,"aria-label":""}):r.jsx(RS,{className:o,"aria-label":""}):r.jsx("div",{className:o,children:r.jsx("div",{className:"gizmo-shadow-stroke bg-token-main-surface-primary text-token-text-primary relative flex h-full items-center justify-center rounded-full",children:r.jsx(gt.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},children:g?r.jsx(Vv,{className:"h-2/3 w-2/3"}):r.jsx(RS,{className:"h-2/3 w-2/3 text-gray-400"})})})})}const p=r.jsx("img",{src:s,className:"bg-token-tertiary h-full w-full",alt:n!=null?n:"GPT Icon",width:80,height:80,onError:()=>d(!0),onLoad:()=>m(!1)});return i?r.jsx("div",{className:z("overflow-hidden rounded-full",a&&f&&"animate-pulse",o),children:p}):r.jsx("div",{className:o,children:r.jsx("div",{className:z("gizmo-shadow-stroke overflow-hidden rounded-full",a&&f&&"animate-pulse"),children:p})})}function P7e({gizmoId:t,className:e}){var n,o;const{data:s}=vi(t);return r.jsx(x0,{src:s==null?void 0:s.gizmo.display.profile_picture_url,gizmoId:t,isFirstParty:(o=(n=s==null?void 0:s.gizmo.tags)==null?void 0:n.includes(C1.FirstParty))!=null?o:!1,className:e})}const R7e=Pe(()=>me(()=>import("./jaukcz96ive6l3u7.js"),__vite__mapDeps([236,1,3,4,211,96,212,237,238,239,240,21,22,23,24,25,26,27,28])).then(t=>t.SkillSharingModal)),O7e=(t,e,s,n)=>{"use forget";const o=F.c(11),a=e!=null?e:"";let i;o[0]!==a?(i={hazelnutId:a},o[0]=a,o[1]=i):i=o[1];const{skillData:l,didFailSkillLoad:c}=RIe(i),u=ne();let d,f;o[2]!==t||o[3]!==c||o[4]!==u||o[5]!==s||o[6]!==n||o[7]!==l||o[8]!==e?(d=()=>{e&&(c&&(dp(t).danger(u.formatMessage({id:"H2Bc95",defaultMessage:"Skill not found, please verify you are in the right workspace and that the skill has been shared with you"})),s()),l!=null&&(B.logStructuredEvent(xX,{hazelnutId:e!=null?e:""}),mt(t,R7e,{skill:l,onClose:s,onTryIt:n})))},f=[t,l,s,c,n,u,e],o[2]=t,o[3]=c,o[4]=u,o[5]=s,o[6]=n,o[7]=l,o[8]=e,o[9]=d,o[10]=f):(d=o[9],f=o[10]),x.useEffect(d,f)};function Jct({ctx:t,searchParams:e,setSearchParams:s,conversationId:n}){const o=x.useCallback(()=>{s(i=>{const l=new URLSearchParams(i);return l.delete("hazelnut_id"),l})},[s]),a=x.useCallback(i=>{nt(n,l=>{var u;const c=new Set((u=l.selectedHazelnuts)!=null?u:[]);c.add(i.id),l.selectedHazelnuts=Array.from(c)})},[n]);return O7e(t,e.get("hazelnut_id"),o,a),null}const Zct=Je({id:"PromptTextarea.integratedVoiceModeTypePlaceholder",defaultMessage:"Type"}),L7e=Je({id:"SplashScreenV2.integratedVoiceModeHeadline",defaultMessage:"Start talking"}),D7e=Je({id:"SplashScreenV2.integratedVoiceModeHeadline.connecting",defaultMessage:"Connecting to voice"});function F7e(t){return Ps({queryKey:["shared-prompt",t],queryFn:()=>de.safeGet("/templated_prompts/{prompt_id}/subscribed",{parameters:{path:{prompt_id:t!=null?t:""}}}),enabled:!!t})}const B7e=Pe(()=>me(()=>Promise.resolve().then(()=>sze),void 0).then(t=>t.PromptSharingModal)),Xct=(t,e,s,n)=>{"use forget";const o=F.c(10);let a;o[0]!==e?(a=F7e(e),o[0]=e,o[1]=a):a=o[1];const{data:i,isError:l}=dt(a),c=ne();let u,d;o[2]!==t||o[3]!==i||o[4]!==c||o[5]!==l||o[6]!==s||o[7]!==n?(u=()=>{l&&(dp(t).danger(c.formatMessage({id:"tDSvzy",defaultMessage:"Prompt not found, please verify you are in the right workspace"})),s()),i!=null&&mt(t,B7e,{prompt:i,mode:"sharee",onClose:s,onTryIt:n})},d=[t,i,s,n,l,c],o[2]=t,o[3]=i,o[4]=c,o[5]=l,o[6]=s,o[7]=n,o[8]=u,o[9]=d):(u=o[8],d=o[9]),x.useEffect(u,d)};function eut(t){"use forget";const e=F.c(8),s=G();let n;e[0]!==s?(n=ao(s),e[0]=s,e[1]=n):n=e[1];const o=n,{setTargetedContent:a}=pg();let i,l;e[2]!==t||e[3]!==s||e[4]!==o||e[5]!==a?(i=()=>kl(()=>{var d;if(!(o.isFeedbackViewOpen$()||o.selectedTaskReplyId$()!=null))return;const c=o.populatePrompt$();let u;e:switch(c==null?void 0:c.type){case"sugarboneReply":{u=$7e(c.taskId,c.taskName,o.clearPopulatePrompt,c.composerMessage);break e}case"surveyReply":{u=U7e(c.userMessage,c.targetedReply);break e}case"cardReply":{u=H7e(ln(s).getQueryData(pn.pulseCard(c.cardId)));break e}default:u={userMessage:null,targetedReply:null}}Co(Ht(t),(d=u.userMessage)!=null?d:""),setTimeout(()=>{var f;a((f=u.targetedReply)!=null?f:void 0)},0)}),l=[s,o,t,a],e[2]=t,e[3]=s,e[4]=o,e[5]=a,e[6]=i,e[7]=l):(i=e[6],l=e[7]),x.useEffect(i,l)}const U7e=(t,e)=>({userMessage:t,targetedReply:e?{type:"text",label:e,isFocusedViewContent:!1,createNewCompletionParams:s=>{var o;if(!e)return s;const n=sx(e);return U(T({},s),{promptMessage:ou(s.promptMessage,{metadata:{targeted_reply:e}}),appendMessages:[...(o=s.appendMessages)!=null?o:[],n]})}}:null}),$7e=(t,e,s,n)=>({userMessage:n!=null?n:null,targetedReply:{type:"text",label:e,isFocusedViewContent:!1,onCleared:s,onCreateCompletion:s,shouldPersistAcrossMessages:!1,createNewCompletionParams:o=>U(T({},o),{extraStreamParams:U(T({},o.extraStreamParams),{pulseCompletionParams:{task_id:t,type:"feedback-conversation"}}),promptMessage:ou(o.promptMessage,{metadata:{targeted_reply:e}})})}}),H7e=t=>({userMessage:null,targetedReply:t!=null&&t.title?{type:"text",label:t.title,isFocusedViewContent:!1,createNewCompletionParams:e=>t.title?U(T({},e),{extraStreamParams:U(T({},e.extraStreamParams),{pulseCompletionParams:{feedback_card_id:t.id,type:"feedback-conversation"}}),promptMessage:ou(e.promptMessage,{metadata:{targeted_reply:t.title}})}):e}:null});function tut(){"use forget";const t=Hs();return t.pathname==="/shopping"||t.pathname==="/shopping/preview"}function G7e(t,e,s){return t.get(e,s)}function Yu({globalOverride:t,layer:e,condition:s,paramName:n,defaultValue:o}){const a=x.useRef(s);return zn(()=>{a.current=s},[s]),x.useCallback(i=>!a.current||a.current()?t!==void 0&&!(i!=null&&i.skipOverride)?t:(i!=null&&i.override&&!i.skipOverride&&Ge.addError(new Error("override is not allowed in production")),G7e(e,n,o)):o,[e,n,o,t])}function fz(){const t=G(),e=!ut(),s=Xe(t,"3434623093"),n=e;return{getShowUpsellReason:Yu({layer:s,condition:()=>n,paramName:"with-reason-upsell",defaultValue:!1}),getUpsellLabelType:Yu({layer:s,condition:()=>n,paramName:"labels",defaultValue:void 0}),getShowVoiceUpsell:Yu({layer:s,condition:()=>n,paramName:"with-voice-upsell",defaultValue:!1}),getUpsellShowsAttach:Yu({layer:s,condition:()=>n,paramName:"with-attach-upsell",defaultValue:!1})}}const V7e=(t,e,s=!1)=>t.role===ot.Root?!1:t.role===ot.System||t.role===ot.Developer||e.every(n=>{var o,a;return((o=n.metadata)==null?void 0:o.is_visually_hidden_from_conversation)&&!((a=n.metadata)!=null&&a.targeted_reply_label)})?s:!0,sut=(t,e)=>t.length===1&&t[0].author.name==="n7jupd.metadata"&&!e,mz=t=>t.some(e=>{var n,o;if((n=e.metadata)!=null&&n.is_visually_hidden_from_conversation&&!((o=e.metadata)!=null&&o.targeted_reply_label)||e.author.role===ot.Tool||e.author.role===ot.System||e.recipient!=="all")return!1;const s=e.content;return(s.content_type===bt.Text||s.content_type===bt.MultimodalText)&&s.parts.some(a=>typeof a=="string"&&a.length>0)});function nut(t,e,s){return!(s!=null&&ww(s))&&t.role!==ot.User&&mz(t.messages)&&t.messages.some(o=>{var l,c;const a=!!((c=(l=o.metadata)==null?void 0:l.content_references)!=null&&c.some(u=>u.type==="file"||u.type==="file_navlist")),i=e&&z7e(o);return a||i})}function out(t,e,s){return!(e!=null&&ww(e))&&t.role!==ot.User&&mz(t.messages)&&t.messages.some(o=>{var a,i;return!!((i=(a=o.metadata)==null?void 0:a.content_references)!=null&&i.some(l=>l.type==="file"&&l.medical_file_reference!=null||s&&l.type==="grouped_webpages"))})}function z7e(t){return qE(t)&&t.content.result.length>0&&t.content.result.trim()!=="Visible: 0% - 100%"}function qE(t){return t.author.role===ot.Tool&&t.author.name==="file_search"&&t.content.content_type===bt.TetherBrowsingDisplay}function aut(t){return t.startsWith("ks--")}const rut=/^\[L\d+\] (.+)$/,iut=/"(text|description|content|snippet)":\s*\"(.*)\"/,W7e=df(()=>{let t=aj;function e(o){t=o}function s(){e(aj)}function n(o){return U(T({},t),{dictationEdited:q7e(t,o)})}return{setData:e,resetData:s,getData:n}}),aj={usedDictation:!1,dictationOriginalText:null,dictationAssetPointer:null,dictationAssetTTL:null,dictationAssetFormat:null};function q7e(t,e){return t.usedDictation&&t.dictationOriginalText!=null&&!e.includes(t.dictationOriginalText)}const KE=df(()=>{const t=Le(!1),e=Le(void 0);return{isWhisperActive$:t,waveformData$:e}}),lut=ue(Ce,"c12fa6",24,24),K7e=[];function cut(t){const e=G(),s=ne(),{data:n}=d0({scope:"personal"}),o=zx(e),a=Qe(t,i=>{var l;return(l=i==null?void 0:i.selectedHazelnuts)!=null?l:K7e});return x.useMemo(()=>{var l;if(!o)return[];const i=(l=n==null?void 0:n.hazelnuts)!=null?l:[];return i.length?i.map(c=>{const u=a.includes(c.id);return{command:c.name,title:c.name,aliases:[c.id],icon:r.jsx(_T,{"aria-label":"",className:"icon"}),disabled:u,trailing:u?r.jsx(Cc,{children:s.formatMessage({defaultMessage:"Added",id:"composer.hazelnuts.selected"})}):void 0,onSelect:()=>{nt(t,d=>{var p;const f=(p=d.selectedHazelnuts)!=null?p:[],m=new Set(f);m.add(c.id),d.selectedHazelnuts=Array.from(m)})}}}):[]},[t,n==null?void 0:n.hazelnuts,s,o,a])}function Y7e(t,e){var f;const s=G(),n=oe(()=>na(s)),o=ct(s),a=oe(()=>Cs(Et(s,e))),[i,l]=Qe(e,m=>[m==null?void 0:m.mode,m==null?void 0:m.startedWithByoMcp]),c=oo(),u=oe(()=>gp(s)),d=(f=o==null?void 0:o.isWorkspaceAccount())!=null?f:!1;return x.useMemo(()=>{if(!n)return!0;const m=n.find(p=>p.systemHint===t);return m!=null&&k9({systemHint:m,modelConfig:a,conversationMode:i,isTemporaryChat:c,isDeveloperMode:u,isWorkspaceTenant:d,startedWithByoMcp:l})},[n,t,a,i,c,u,d,l])}const Q7e="https://help.openai.com/en/articles/11752874-chatgpt-agent#h_beedf96566",J7e="composer_system_hint",Pr={segment:{shown:"Agent Nux Modal Shown",continueClicked:"Agent Nux Modal Continue Clicked",dismissed:"Agent Nux Modal Dismissed"},statsig:{shown:"chatgpt_agent_nux_modal_shown",continueClicked:"chatgpt_agent_nux_modal_continue_clicked",dismissed:"chatgpt_agent_nux_modal_dismissed"},datadog:{shown:"agent_nux_modal_shown",continueClicked:"agent_nux_modal_continue_clicked",dismissed:"agent_nux_modal_dismissed"}},Uu={title:r.jsx(j,{id:"jFh1/1",defaultMessage:"Welcome to agent mode"}),description:r.jsx(j,{id:"RJdktl",defaultMessage:"Let ChatGPT handle complex tasks from start to finish, from finding the perfect product to creating spreadsheets."}),privacy:r.jsx(j,{id:"AgLzPZ",defaultMessage:"Agent mode uses a remote browser and takes screenshots. You can take control anytime. Agent mode has privacy risks and is important to monitor. <learnMoreLink>Learn more</learnMoreLink>",values:{learnMoreLink:t=>r.jsx("a",{href:Q7e,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer underline",children:t})}}),buttonText:r.jsx(j,{id:"RW8OC0",defaultMessage:"Get started"})},pz=()=>{const t=G(),{eligible:e,isLoading:s}=Ct(We.hasSeenn7jupdNux),n=xn(t),o=Ee(t,"3014776572"),a=Y7e(Pn,yX);return!o||!a||n?"hide":s?"loading":e?"show":"hide"},Z7e=t=>{"use forget";const e=F.c(38),{onClose:s,clientThreadId:n,source:o}=t,a=o===void 0?J7e:o,i=G();let l,c;if(e[0]!==i){const P=js(i,"2302071098");l=P.get("videoUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.mp4"),c=P.get("posterUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.jpg"),e[0]=i,e[1]=l,e[2]=c}else l=e[1],c=e[2];const u=c,[d,f]=x.useState(!1);let m;e[3]!==n||e[4]!==a?(m={client_thread_id:n,source:a},e[3]=n,e[4]=a,e[5]=m):m=e[5];const p=m;let g;e[6]!==p?(g=()=>{B.logEventWithStatsig(Pr.segment.shown,Pr.statsig.shown,p),Ge.addAction(Pr.datadog.shown,p)},e[6]=p,e[7]=g):g=e[7];let h;e[8]!==p||e[9]!==n||e[10]!==a?(h=[p,n,a],e[8]=p,e[9]=n,e[10]=a,e[11]=h):h=e[11],x.useEffect(g,h);let _;e[12]!==p||e[13]!==i||e[14]!==s?(_=()=>{B.logEventWithStatsig(Pr.segment.dismissed,Pr.statsig.dismissed,p),Ge.addAction(Pr.datadog.dismissed,p),_t(i,We.hasSeenn7jupdNux),s()},e[12]=p,e[13]=i,e[14]=s,e[15]=_):_=e[15];const b=_;let y;e[16]!==p||e[17]!==i||e[18]!==s?(y=()=>{B.logEventWithStatsig(Pr.segment.continueClicked,Pr.statsig.continueClicked,p),Ge.addAction(Pr.datadog.continueClicked,p),_t(i,We.hasSeenn7jupdNux),s()},e[16]=p,e[17]=i,e[18]=s,e[19]=y):y=e[19];const v=y;let S;e[20]!==u||e[21]!==d?(S=!d&&r.jsx("img",{src:u,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e[20]=u,e[21]=d,e[22]=S):S=e[22];let C;e[23]===Symbol.for("react.memo_cache_sentinel")?(C=()=>f(!0),e[23]=C):C=e[23];let w;e[24]!==l?(w=r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"pointer-events-none h-full w-full object-cover object-bottom",onLoadedData:C}),e[24]=l,e[25]=w):w=e[25];let k;e[26]!==w||e[27]!==S?(k=r.jsxs("div",{className:"relative aspect-16/9 w-full",children:[S,w]}),e[26]=w,e[27]=S,e[28]=k):k=e[28];let E,M,N;e[29]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"text-xl font-medium",children:Uu.title}),M=r.jsx("div",{className:"text-token-text-secondary",children:Uu.description}),N=r.jsx("div",{className:"text-token-text-secondary text-xs",children:Uu.privacy}),e[29]=E,e[30]=M,e[31]=N):(E=e[29],M=e[30],N=e[31]);let A;e[32]!==v?(A=r.jsxs("div",{className:"flex flex-col gap-4 px-8 pt-6 pb-8 text-center",children:[E,M,N,r.jsx("div",{className:"mt-4 flex w-full justify-center gap-3",children:r.jsx("div",{className:"mx-auto flex w-fit max-w-full min-w-[260px] justify-center gap-3",children:r.jsx(ke,{color:"primary",onClick:v,className:"min-w-0 flex-1",children:Uu.buttonText})})})]}),e[32]=v,e[33]=A):A=e[33];let I;return e[34]!==b||e[35]!==k||e[36]!==A?(I=r.jsxs(Ft,{testId:"modal-agent-nux",isOpen:!0,noPadding:!0,onClose:b,showCloseButton:!0,size:"custom",type:"success",className:"max-w-md",title:Uu.title,visuallyHiddenHeader:!0,children:[k,A]}),e[34]=b,e[35]=k,e[36]=A,e[37]=I):I=e[37],I},X7e=Object.freeze(Object.defineProperty({__proto__:null,AgentNuxModal:Z7e,agentModeWelcomeCopy:Uu,useAgentNuxModalState:pz},Symbol.toStringTag,{value:"Module"}));var e8e=(t=>(t.Gizmo="gizmo",t.App="app",t))(e8e||{});function uut(t){return typeof t=="object"&&t!=null&&"command"in t}function dut(t){"use forget";const e=F.c(11),{command:s,isHighlighted:n,onHighlight:o,onClick:a}=t;let i;e[0]!==s.title?(i=r.jsx("span",{className:"break-all",children:s.title}),e[0]=s.title,e[1]=i):i=e[1];let l;return e[2]!==s.disabled||e[3]!==s.icon||e[4]!==s.secondary||e[5]!==s.trailing||e[6]!==n||e[7]!==a||e[8]!==o||e[9]!==i?(l=r.jsx(WC,{as:"div",hasManagedFocus:!0,disabled:s.disabled,highlighted:n,icon:s.icon,secondary:s.secondary,trailing:s.trailing,onPointerMove:o,onClick:a,children:i}),e[2]=s.disabled,e[3]=s.icon,e[4]=s.secondary,e[5]=s.trailing,e[6]=n,e[7]=a,e[8]=o,e[9]=i,e[10]=l):l=e[10],l}function fut(t){var e,s;return{targets:[t.command,...(e=t.aliases)!=null?e:[],...(s=t.regexMatches)!=null?s:[],t.secondary?"".concat(t.title," ").concat(t.secondary):t.title],weight:t.matchWeight}}var t8e=bX();const mut=en(t8e);function put({children:t,className:e,showBackground:s}){return r.jsxs("div",{className:"relative",children:[t,s&&r.jsx(gt.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:z("pointer-events-none absolute inset-0 rounded-full",e)})]})}const gz={"app-details":Qa.CHATGPT_APP_PAGE_NAME_APP_DETAILS,"app-directory":Qa.CHATGPT_APP_PAGE_NAME_APP_DIRECTORY,"app-workspace":Qa.CHATGPT_APP_PAGE_NAME_APP_WORKSPACE,"plus-menu":Qa.CHATGPT_APP_PAGE_NAME_PLUS_MENU,"settings-apps":Qa.CHATGPT_APP_PAGE_NAME_SETTINGS_APPS,"settings-browse-apps":Qa.CHATGPT_APP_PAGE_NAME_SETTINGS_APPS,sidebar:Qa.CHATGPT_APP_PAGE_NAME_SIDEBAR},s8e=t=>!!t&&typeof t=="object"&&"source"in t,hz=t=>{if(!s8e(t))return;const{source:e}=t;return e&&e in gz?e:void 0},_z=t=>({source:t});function xz(){"use forget";const t=Hs();let e;e:{const s=hz(t.state);if(!s){e=Qa.CHATGPT_APP_PAGE_NAME_UNSPECIFIED;break e}e=gz[s]}return e}function gut(){"use forget";const t=F.c(6),e=Hs();let s;e:{const u=hz(e.state);if(u==="settings-browse-apps"||u==="settings-apps"){s=Lg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_SETTINGS;break e}if(u==="sidebar"){s=Lg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_SIDEBAR;break e}if(u==="plus-menu"){s=Lg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_PLUS_MENU;break e}s=Lg.CHATGPT_APP_DIRECTORY_ENTRYPOINT_UNSPECIFIED}const n=s;let o,a;t[0]!==n?(o=()=>{B.logStructuredEvent(vX,{entrypoint:n})},a=[n],t[0]=n,t[1]=o,t[2]=a):(o=t[1],a=t[2]),x.useEffect(o,a);const i=xz();let l,c;t[3]!==i?(l=()=>{B.logStructuredEvent(T9,{name:Qa.CHATGPT_APP_PAGE_NAME_APP_DIRECTORY,referrer:i})},c=[i],t[3]=i,t[4]=l,t[5]=c):(l=t[4],c=t[5]),x.useEffect(l,c)}function hut(t,e){"use forget";const s=F.c(5),n=xz();let o,a;s[0]!==e||s[1]!==t||s[2]!==n?(o=()=>{t&&e&&B.logStructuredEvent(T9,{name:Qa.CHATGPT_APP_PAGE_NAME_APP_DETAILS,referrer:n,connectorId:e})},a=[t,e,n],s[0]=e,s[1]=t,s[2]=n,s[3]=o,s[4]=a):(o=s[3],a=s[4]),x.useEffect(o,a)}function _ut(t){B.logStructuredEvent(Tp,{name:Ep.CHATGPT_APP_CLICK_TARGET_CONNECT,connectorId:t})}function xut(t){B.logStructuredEvent(Tp,{name:Ep.CHATGPT_APP_CLICK_TARGET_HEADER,connectorId:t})}function yut(t){B.logStructuredEvent(Tp,{name:Ep.CHATGPT_APP_CLICK_TARGET_FILTER_CATEGORY,categoryId:t!=null?t:void 0})}function n8e(){B.logStructuredEvent(Tp,{name:Ep.CHATGPT_APP_CLICK_TARGET_SUBMIT_SEARCH})}function but(t){B.logStructuredEvent(Tp,{name:Ep.CHATGPT_APP_CLICK_TARGET_START_CHAT,connectorId:t})}function vut(t){"use forget";const e=F.c(5);let s;e[0]!==t?(s=t.trim(),e[0]=t,e[1]=s):s=e[1];const n=s,o=x.useRef(""),a=x.useRef(null);let i,l;e[2]!==n?(i=()=>{if(a.current&&(clearTimeout(a.current),a.current=null),!n){o.current="";return}return a.current=setTimeout(()=>{o.current!==n&&(n8e(),o.current=n),a.current=null},1500),()=>{a.current&&(clearTimeout(a.current),a.current=null)}},l=[n],e[2]=n,e[3]=i,e[4]=l):(i=e[3],l=e[4]),x.useEffect(i,l)}const YE=ue(Ce,"c8839f",20,20);function o8e({shortName:t,includeAction:e,entry:s,onClick:n}){x.useEffect(()=>{if(!open||s.type!==es.GDRIVE)return;const u=s.access_token;u&&aG(u)},[s]);const o=SX(s.type),a=ne(),i=!t&&(s.type===es.O365_BUSINESS||s.type===es.O365_PERSONAL)?x1(es.O365,a,t):x1(s.type,a,t),l=t?void 0:s.type===es.O365_BUSINESS?a.formatMessage(ij.workSchool):s.type===es.O365_PERSONAL?a.formatMessage(ij.personal):void 0,c=!t&&s.type===es.O365_BUSINESS?!0:!!l;return r.jsx(J.Item,{onClick:n,icon:o,label:e?s.access_token?r.jsx(j,U(T({},rj.uploadFromMessage),{values:{connectorName:i}})):r.jsx(j,U(T({},rj.signinWithMessage),{values:{connectorName:i}})):i,secondary:c?[l,s.type===es.O365_BUSINESS?a.formatMessage(CX.includesSharePoint):void 0].filter(Boolean).join(" - "):null},s.id)}const rj=Ne({signinWithMessage:{id:"ContextConnectorPickerDropdownItem.signInWithMessage",defaultMessage:"Connect {connectorName}"},uploadFromMessage:{id:"ContextConnectorPickerDropdownItem.uploadWithMessage",defaultMessage:"Add from {connectorName}"}}),ij=Ne({personal:{id:"ContextConnectorPickerDropdownItem.o365Personal",defaultMessage:"Personal"},workSchool:{id:"ContextConnectorPickerDropdownItem.o365WorkSchool",defaultMessage:"Work/School"}});function a8e({isLoadingConnectors:t,connectorConfig:e,onConnectorClick:s}){const n=!nf(),a=x.useMemo(()=>Array.from(e.values()),[e]).filter(l=>l.access_token!=null),i=jc();return a.length===0&&(!t||i)?null:r.jsxs(J.Sub,{onOpenChange:l=>{l&&B.logEventWithStatsig("Composer: Open Context Connector Picker","chatgpt_composer_open_context_connector_picker")},children:[r.jsx(J.SubMenuTrigger,{icon:OE,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(j,T({},i8e.addFromApps))})}),r.jsx(J.Portal,{children:r.jsxs(J.SubContent,{className:z(n&&"-translate-x-1/2 -translate-y-full"),children:[t&&r.jsxs(r.Fragment,{children:[r.jsx(J.Shimmer,{}),r.jsx(J.Shimmer,{}),r.jsx(J.Shimmer,{})]}),r.jsx(OS,{includeAction:!1,shortName:!1,connectorConfig:e,onConnectorClick:s})]})})]})}const OS=({shortName:t,includeAction:e,connectorConfig:s,onConnectorClick:n})=>{const a=x.useMemo(()=>Array.from(s.values()),[s]).filter(i=>i.access_token!=null);return r.jsx(r.Fragment,{children:a.map(i=>r.jsx(o8e,{shortName:t,includeAction:e,entry:i,onClick:()=>n(i)},i.id))})},r8e=()=>{"use forget";const t=F.c(2);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=_z("plus-menu"),t[0]=e):e=t[0];let s;return t[1]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(J.LinkItem,{icon:YE,to:"/apps",state:e,target:"_blank",rel:"noreferrer",label:r.jsx(j,{id:"6KwN28",defaultMessage:"Explore apps"})}),t[1]=s):s=t[1],s},i8e=Ne({addFromApps:{id:"ContextConnectorPicker.addFromApps",defaultMessage:"Add from apps"}});function yz(){var i;const t=G(),e=sn(Ss),s=fx(t),n=oe(lt.sidebarUrlTrayOpen$),o=oe(lt.context$),a=n&&!!o;return e&&s?r.jsx(J.Item,{icon:r.jsx(r_,{base64:o==null?void 0:o.base64favicon,title:(i=o==null?void 0:o.title)!=null?i:o==null?void 0:o.url,className:"h-4 w-4 rounded-[4px]"}),disabled:a,onClick:()=>{var l;(l=E9())==null||l.triggerProductEvent("addTabContext"),PE(!0)},children:r.jsx("span",{children:r.jsx(j,{id:"+gYTJ0",defaultMessage:"Attach tab"})})},"tab_context"):null}const bz=ue(Ce,"40114f",20,20),l8e={"image/jpeg":".jpg","image/png":".png"};function c8e({entry:t}){return r.jsx(J.Item,{onClick:t.onClick,icon:t.icon,children:r.jsx(j,T({},t.label))},t.key)}function u8e(t){const e=ne(),s=Kt(),n=Si();return x.useCallback(async a=>{const i="".concat(new Date().toISOString().replaceAll(":","-")).concat(l8e[a.mimeType]);Yi.uploadFile(n,new File([l_(a.data)],i,{type:a.mimeType}),t,e,s,void 0,void 0,ko.Multimodal)},[n,e,s,t])}function vz(t){const e=u8e(t),s=d8e(e),n=f8e(e);return{desktopConnectors:x.useMemo(()=>ka?[s,n].filter(a=>a!==void 0):[],[s,n])}}function d8e(t){return x.useMemo(()=>({key:"takeScreenshot",label:Sz.takeScreenshot,icon:bz,onClick:async()=>{const e=await wX();e&&(B.logEvent("Sidetron: Screenshot Attached"),await t(e))}}),[t])}function f8e(t){return x.useMemo(()=>({key:"takePhoto",label:Sz.takePhoto,icon:RE,onClick:async()=>{const e=await kX();e&&(B.logEvent("Sidetron: Photo Attached"),await t(e))}}),[t])}const Sz=Ne({takeScreenshot:{id:"ContextConnectorPickerDropdownItem.takeScreenshotDesktop",defaultMessage:"Take screenshot"},takePhoto:{id:"ContextConnectorPickerDropdownItem.takePhotoDesktop",defaultMessage:"Take photo"}});function Sut({clientThreadId:t,icon:e,modelSupportedImageMimeTypes:s,isLoadingConnectors:n,connectorConfig:o,onSelectConnector:a,openFileDialog:i,isDisabled:l=!1,highlightTooltip:c=!1,showLabel:u,disabledReason:d,currentModelName:f}){const m=ne(),p=M9(),g=x.useRef(!1),h=G(),_=sn(Ss),b=p!=null||d===al.RateLimitReached,y=M=>{M&&(B.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",b?{file_upload_disabled_reason:"rate_limit"}:void 0),g.current=!0,setTimeout(()=>{g.current=!1},250))},{desktopConnectors:v}=vz(s),S=s.length>0,C=r.jsxs(r.Fragment,{children:[_&&r.jsx(yz,{}),r.jsx(a8e,{isLoadingConnectors:n,connectorConfig:o,onConnectorClick:a}),r.jsx(Cz,{modelSupportedImageMimeTypes:s}),r.jsx(az,{openFileDialog:i,showMenuForNoAuth:!1,modelSupportsImages:S,clientThreadId:t})]}),w=l||p!=null,k=x.useRef(!1),E=r.jsxs(J.Root,{onOpenChange:y,children:[r.jsx(jV,{clientThreadId:t,rateLimitPopup:p,highlightTooltip:c,disabled:w,disabledReason:d,currentModelName:f,children:r.jsxs(J.BasicTrigger,{className:"composer-btn",disabled:w,id:"upload-file-btn","aria-label":_0(h,m,w,d,f),children:[e,u&&r.jsx(j7e,{})]})}),r.jsx(J.Portal,{children:r.jsx(J.Content,{alignOffset:-8,onEscapeKeyDown:()=>{k.current=!0},side:"bottom",size:"small",onCloseAutoFocus:M=>{k.current||M.preventDefault()},className:"radix-side-bottom:flex-col-reverse flex flex-col",children:C})})]});return r.jsx("div",{className:"flex flex-col",children:E})}const Cz=({modelSupportedImageMimeTypes:t})=>jc()?r.jsx(m8e,{modelSupportedImageMimeTypes:t}):null,m8e=({modelSupportedImageMimeTypes:t})=>{const{desktopConnectors:e}=vz(t);return r.jsx(r.Fragment,{children:e.map(s=>r.jsx(c8e,{entry:s},s.key))})};function p8e({modelSupportedImageMimeTypes:t}){const e=sn(Ss),s=Si(),n=Kt(),o=ne();return e?r.jsx(J.Item,{icon:bz,onClick:async()=>{const a=await me(()=>import("./i2qk80cf0ci72s9b.js"),__vite__mapDeps([241,3,1,4])).then(i=>i.getTabScreenshot());if(a)try{const i=atob(a.base64image),l=i.length,c=new Uint8Array(l);for(let d=0;d<l;d++)c[d]=i.charCodeAt(d);const u=new File([c],a.filename,{type:a.mimetype});Yi.uploadFile(s,u,t,o,n,void 0,void 0,ko.Multimodal)}catch(i){}},children:r.jsx(j,{id:"HiFPUD",defaultMessage:"Attach screenshot"})},"attach_screenshot"):null}function g8e({onAttachLibraryFile:t,attachedFileIds:e}){const s=ne(),[n,o]=x.useState(null),[a,i]=x.useState(!1),[l,c]=x.useState(null),u=x.useRef(!1),d=x.useMemo(()=>e==null?new Set:e instanceof Set?e:new Set(e),[e]),f=async p=>{i(!0),c(null);try{const h=await de.safePost("/files/library",{requestBody:{limit:5,cursor:p}});o(_=>_?[..._,...h.items]:h.items)}catch(g){c(g.message)}finally{i(!1)}};function m(p){const g=p.lastIndexOf(".");return g>0?p.slice(0,g):p}return x.useEffect(()=>{u.current&&n==null&&!a&&f(null)},[u.current]),r.jsxs(J.Sub,{onOpenChange:p=>{u.current=p,p&&n==null&&!a&&f(null)},children:[r.jsx(J.SubMenuTrigger,{icon:Eo,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(j,T({},lj.addFromLibrary))})}),r.jsx(J.Portal,{children:r.jsxs(J.SubContent,{children:[n==null&&a&&r.jsxs(r.Fragment,{children:[r.jsx(J.Shimmer,{}),r.jsx(J.Shimmer,{}),r.jsx(J.Shimmer,{})]}),l?r.jsx(J.Label,{children:r.jsx(j,{id:"fRTSh4",defaultMessage:"Failed to load library files"})}):(n==null?void 0:n.length)===0&&!a&&r.jsx(J.Label,{children:r.jsx(j,{id:"CalUoF",defaultMessage:"No results"})}),n==null?void 0:n.map(p=>r.jsx(J.Item,{className:"gap-2",size:"large",secondary:p.state==="failed"?"Failed":void 0,disabled:p.state!=="ready"||d.has(p.file_id),onClick:()=>{p.state!=="ready"||d.has(p.file_id)||(t==null||t({id:p.file_id,name:p.file_name,mimeType:p.mime_type,libraryFileId:p.id}),B.logEventWithStatsig("chatgpt_files_user_action","chatgpt_library_file_attached_to_conversation",{mimeType:p.mime_type}))},children:r.jsx(OU,{fileName:m(p.file_name),icon:r.jsx(RT,{filename:p.file_name,contextConnectorInfo:void 0}),fileNameClass:"text-token-text-primary text-sm leading-[18px] font-normal tracking-[-0.3px]",customFileDescription:r.jsx("span",{className:"text-token-text-tertiary text-xs leading-4 font-normal tracking-[-0.1px]",children:r.jsx(j,U(T({},lj.fileDesc),{values:{category:TX(p.library_file_category),sep:"",date:mse(s,new Date(p.file_upload_time))}}))})})},p.id))]})})]})}const lj=Ne({addFromLibrary:{id:"hAUk/T",defaultMessage:"Recent files"},fileDesc:{id:"ContextConnectorLibraryFileDropdownItem.fileDesc",defaultMessage:"{category} {sep} {date}"}});function wz(t){return Ee(t,"2688889402")}const h8e=t=>{"use forget";var K,Y,ae,se;const e=F.c(52),{conversation:s,layoutMode:n,selectedModelId:o,onSelectModelId:a}=t,i=G();let l;e[0]!==s?(l=()=>br(s),e[0]=s,e[1]=l):l=e[1];const c=oe(l);let u;e[2]!==s?(u=()=>EX(s),e[2]=s,e[3]=u):u=e[3];const d=oe(u);let f;e[4]!==c.categories?(f=(K=c.categories)!=null?K:[],e[4]=c.categories,e[5]=f):f=e[5];const m=f;let p;e[6]!==c.categories||e[7]!==c.models||e[8]!==o?(p=(se=(Y=c.categories.find(ee=>{var re;return ee.defaultModel===o||((re=ee.supportedModels)==null?void 0:re.includes(o))}))==null?void 0:Y.label)!=null?se:(ae=c.models.get(o))==null?void 0:ae.title,e[6]=c.categories,e[7]=c.models,e[8]=o,e[9]=p):p=e[9];const g=p;let h;e[10]!==m?(h=m.filter(_8e),e[10]=m,e[11]=h):h=e[11];const _=h;let b;e[12]!==m?(b=$c(m.filter(x8e),"subcategory"),e[12]=m,e[13]=b):b=e[13];const y=b;let v;e[14]!==_||e[15]!==y?(v={primaryGroup:_,subGroups:y},e[14]=_,e[15]=y,e[16]=v):v=e[16];const{primaryGroup:S,subGroups:C}=v;if(!g6(i))return null;let k;e[17]!==i?(k=Ee(i,"3315017149"),e[17]=i,e[18]=k):k=e[18];const E=k,M=3+(E?9:0)+12*S.length+2+9+3;let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(j,{id:"RylQRg",defaultMessage:"Model"}),e[19]=N):N=e[19];let A;e[20]!==g?(A=r.jsx("span",{className:"max-w-40 truncate",children:g}),e[20]=g,e[21]=A):A=e[21];const I=!d;let P;e[22]!==A||e[23]!==I?(P=r.jsx(J.SubMenuTrigger,{icon:zE,label:N,trailing:A,disabled:I}),e[22]=A,e[23]=I,e[24]=P):P=e[24];const R=n==="center"?"start":"end",O="min(var(--radix-dropdown-menu-content-available-height),calc(var(--spacing)*".concat(M,"))");let L;e[25]!==O?(L={maxHeight:O},e[25]=O,e[26]=L):L=e[26];let D;e[27]!==E||e[28]!==c.title?(D=E&&r.jsx(J.Label,{children:c.title}),e[27]=E,e[28]=c.title,e[29]=D):D=e[29];let H;if(e[30]!==S||e[31]!==o){let ee;e[33]!==o?(ee=re=>r.jsx(cj,{category:re,isSelected:o===re.defaultModel},re.defaultModel),e[33]=o,e[34]=ee):ee=e[34],H=S.map(ee),e[30]=S,e[31]=o,e[32]=H}else H=e[32];let V;e[35]!==o||e[36]!==C?(V=Object.entries(C).map(ee=>{const[re,he]=ee;return r.jsxs(J.Group,{children:[r.jsx(J.Label,{children:re}),he.map(fe=>r.jsx(cj,{category:fe,isSelected:o===fe.defaultModel},fe.defaultModel))]},re)}),e[35]=o,e[36]=C,e[37]=V):V=e[37];let q;e[38]!==a||e[39]!==o||e[40]!==D||e[41]!==H||e[42]!==V?(q=r.jsxs(J.RadioGroup,{value:o,onValueChange:a,children:[D,H,V]}),e[38]=a,e[39]=o,e[40]=D,e[41]=H,e[42]=V,e[43]=q):q=e[43];let W;e[44]===Symbol.for("react.memo_cache_sentinel")?(W=!1,e[44]=W):W=e[44];let $;e[45]!==R||e[46]!==L||e[47]!==q?($=r.jsx(J.Portal,{children:r.jsxs(J.SubContent,{align:R,style:L,children:[q,W]})}),e[45]=R,e[46]=L,e[47]=q,e[48]=$):$=e[48];let Z;return e[49]!==P||e[50]!==$?(Z=r.jsxs(J.Sub,{children:[P,$]},"models-menu"),e[49]=P,e[50]=$,e[51]=Z):Z=e[51],Z},cj=t=>{"use forget";const e=F.c(12),{category:s,isSelected:n}=t,o=ne();let a;e[0]!==s.isAlpha||e[1]!==s.isBeta||e[2]!==s.modelBadge||e[3]!==o?(a=s.isBeta?o.formatMessage({id:"Mu+7v6",defaultMessage:"Beta"}):s.isAlpha?o.formatMessage({id:"chDss2",defaultMessage:"Alpha"}):s.modelBadge,e[0]=s.isAlpha,e[1]=s.isBeta,e[2]=s.modelBadge,e[3]=o,e[4]=a):a=e[4];const i=a,l=n?"selected":"default";let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(J.RadioItemCheck,{}),e[5]=c):c=e[5];let u;return e[6]!==i||e[7]!==s.defaultModel||e[8]!==s.description||e[9]!==s.label||e[10]!==l?(u=r.jsx(J.RadioItem,{value:s.defaultModel,color:l,trailing:c,label:s.label,secondary:s.description,badge:i,disabled:!1}),e[6]=i,e[7]=s.defaultModel,e[8]=s.description,e[9]=s.label,e[10]=l,e[11]=u):u=e[11],u};function _8e(t){return t.subcategory==null}function x8e(t){return t.subcategory!=null}function LS(t){"use forget";const e=F.c(7),{systemHint:s}=t;if(!uj(s))return null;const o=s.isDangerous&&"text-token-interactive-label-danger-secondary-default border-token-border-status-error";let a;e[0]!==o?(a=z(o),e[0]=o,e[1]=a):a=e[1];let i;e[2]!==s?(i=uj(s),e[2]=s,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l=r.jsx(Cc,{className:a,children:i}),e[4]=a,e[5]=i,e[6]=l):l=e[6],l}function uj(t){if(t.badgeText!=null)return t.badgeText;switch(t.badgeType){case Y0.DEV:return r.jsx(j,{defaultMessage:"Dev",id:"allConnectors.dev.mcp"});case Y0.BETA:return r.jsx(j,{defaultMessage:"Beta",id:"allConnectors.beta.mcp"});case Y0.CUSTOM:return r.jsx(j,{defaultMessage:"Custom",id:"allConnectors.custom.mcp"})}if(t.isDangerous)return r.jsx(j,{id:"w+mmPI",defaultMessage:"DEV"})}const y8e=[],b8e=Ne({connectOnMobileTooltip:{id:"XrV8h1",defaultMessage:"Connect on your iPhone or iPad"}});function Cut(t){"use forget";const e=F.c(49),{composerController:s,activeSystemHintType:n,systemHints:o,clientThreadId:a,disabled:i}=t,l=i===void 0?!1:i,c=jo(),u=l9(),d=G();let f;e[0]!==a||e[1]!==c?(f=Y=>{c(Y,{analyticsMetadata:{clientThreadId:a}})},e[0]=a,e[1]=c,e[2]=f):f=e[2];const m=f;let p;e[3]!==a?(p={clientThreadId:a},e[3]=a,e[4]=p):p=e[4];const g=p;let h;e[5]!==g?(h=function(){B.logEventWithStatsig("Composer System Hint Button Hovered","composer_system_hint_button_hovered",g)},e[5]=g,e[6]=h):h=e[6];const _=h;let b;e[7]!==g||e[8]!==d?(b=function(){Xe(d,"1092897457").get("is_tatertot_enabled",!0),B.logEventWithStatsig("Composer System Hint Button Clicked","composer_system_hint_button_clicked",g)},e[7]=g,e[8]=d,e[9]=b):b=e[9];const y=b;let v;e[10]!==s?(v=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{no(Ht(s))})})},e[10]=s,e[11]=v):v=e[11];const S=v,C=ne(),[w,k]=x.useState(!1),E=n!=null,M=!E,N=x.useRef(!1),A=x.useRef(!1);let I;e[12]!==y||e[13]!==S?(I=Y=>{k(Y),Y?y==null||y():requestAnimationFrame(()=>{requestAnimationFrame(()=>{N.current&&(N.current=!1,S())})})},e[12]=y,e[13]=S,e[14]=I):I=e[14];let P;e[15]!==w?(P=Gm(w),e[15]=w,e[16]=P):P=e[16];let R;e[17]!==C?(R=C.formatMessage({id:"mJYhKI",defaultMessage:"Choose tool"}),e[17]=C,e[18]=R):R=e[18];let O;e[19]===Symbol.for("react.memo_cache_sentinel")?(O=r.jsx(fB,{"aria-label":"",className:"icon"}),e[19]=O):O=e[19];let L;e[20]!==M?(L=M&&r.jsx("span",{className:"ms-1.5 me-0.5",children:r.jsx(j,{id:"mNL7WC",defaultMessage:"Tools"})}),e[20]=M,e[21]=L):L=e[21];let D;e[22]!==l||e[23]!==_||e[24]!==L||e[25]!==P||e[26]!==R?(D=r.jsxs(J.BasicTrigger,{className:"composer-btn px-2","data-opened":P,"aria-label":R,id:"system-hint-button",disabled:l,onPointerOver:_,onClick:S8e,onFocusCapture:v8e,children:[O,L]}),e[22]=l,e[23]=_,e[24]=L,e[25]=P,e[26]=R,e[27]=D):D=e[27];let H;e[28]!==l||e[29]!==E||e[30]!==D?(H=r.jsx(w8e,{disabled:l,hintSelected:E,children:D}),e[28]=l,e[29]=E,e[30]=D,e[31]=H):H=e[31];let V,q;e[32]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{A.current=!0},q=Y=>{var ae;if(!A.current||N.current){Y.preventDefault();return}(ae=document.querySelector("#system-hint-button"))==null||ae.focus()},e[32]=V,e[33]=q):(V=e[32],q=e[33]);let W;e[34]!==M?(W=!M&&r.jsx(J.Label,{children:r.jsx(j,{id:"KSn3Jr",defaultMessage:"Tools"})}),e[34]=M,e[35]=W):W=e[35];let $;e[36]!==u||e[37]!==n||e[38]!==m||e[39]!==o?($=r.jsx(e1,{systemHints:o,activeConnectorSystemHintTypes:u,selectedHintType:n,onSelectHintType:m,isLoadingConnectorsForSystemHints:!1}),e[36]=u,e[37]=n,e[38]=m,e[39]=o,e[40]=$):$=e[40];let Z;e[41]!==W||e[42]!==$?(Z=r.jsx(J.Portal,{children:r.jsxs(J.Content,{size:"auto",alignOffset:-7,onEscapeKeyDown:V,onCloseAutoFocus:q,children:[W,$]})}),e[41]=W,e[42]=$,e[43]=Z):Z=e[43];let K;return e[44]!==w||e[45]!==H||e[46]!==Z||e[47]!==I?(K=r.jsxs(J.Root,{open:w,onOpenChange:I,children:[H,Z]}),e[44]=w,e[45]=H,e[46]=Z,e[47]=I,e[48]=K):K=e[48],K}function v8e(t){t.stopPropagation()}function S8e(t){t.preventDefault()}const e1=({systemHints:t,activeConnectorSystemHintTypes:e,selectedHintType:s,onSelectHintType:n,isLoadingConnectorsForSystemHints:o,isFirstPartyProject:a=!1,onConnectHint:i})=>{const{connectorLinks:l,isLoading:c}=Ta({fetchValidLinksOnly:!0,skip:!0}),u=!0;return oe(()=>({data:void 0,isLoading:!1,isSuccess:!1,error:void 0})),r.jsx(J.RadioGroup,{value:s!=null?s:void 0,onValueChange:d=>{const f=t==null?void 0:t.find(m=>m.systemHint===d);if(f&&f.hideFromInitialSelection&&f.canConnect&&f.isConnector&&a&&s!==d){i==null||i(f);return}n(d===s?null:d)},children:t?r.jsxs(r.Fragment,{children:[t.map(d=>r.jsx(C8e,{hint:d,isSelected:s===d.systemHint||gw(s)&&(e==null?void 0:e.has(d.systemHint)),isFirstPartyProject:a,connectionStatus:void 0,isStrideConnected:u},d.systemHint)),o&&r.jsxs(r.Fragment,{children:[r.jsx(J.Shimmer,{size:"short"}),r.jsx(J.Shimmer,{size:"short"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(J.Shimmer,{size:"short"}),r.jsx(J.Shimmer,{size:"short"})]})})},C8e=t=>{"use forget";var N;const e=F.c(32),{hint:s,isSelected:n,isFirstPartyProject:o,isStrideConnected:a,connectionStatus:i}=t,l=ne(),c=b6e(s.systemHint);let u;e[0]!==s.systemHint?(u=y8e.includes(s.systemHint),e[0]=s.systemHint,e[1]=u):u=e[1];const d=u;let f;e[2]!==s.systemHint?(f=!1,e[2]=s.systemHint,e[3]=f):f=e[3];const p=f&&!a,g=o&&s.isConnector&&s.canConnect&&s.hideFromInitialSelection&&!n&&!p;if(s.hideFromInitialSelection&&!n&&!g&&!p)return null;let h;e[4]!==i||e[5]!==l||e[6]!==p||e[7]!==c.remainingLabel?(h=p?i||l.formatMessage(b8e.connectOnMobileTooltip):c.remainingLabel,e[4]=i,e[5]=l,e[6]=p,e[7]=c.remainingLabel,e[8]=h):h=e[8];const _=h,b=p?void 0:c.remainingLabelSecondary,y=c.isBlocked||p,v=n?"selected":"default";let S;e[9]!==s?(S=r.jsx(g_,{hint:s,isNextToLabel:!0}),e[9]=s,e[10]=S):S=e[10];let C;e[11]!==i||e[12]!==g?(C=g?r.jsx("span",{className:"text-token-text-tertiary",children:r.jsx(j,{id:"4eq5DT",defaultMessage:"Connect"})}):i?r.jsx("span",{className:"text-token-text-tertiary",children:r.jsx(j,{id:"fY1/Mw",defaultMessage:"Partially synced"})}):r.jsx(J.RadioItemCheck,{}),e[11]=i,e[12]=g,e[13]=C):C=e[13];const w=(N=s.actionLabel)!=null?N:s.name;let k;e[14]!==s||e[15]!==d?(k=d?r.jsx(Cc,{children:r.jsx(j,{id:"composer.skills.new",defaultMessage:"New"})}):r.jsx(LS,{systemHint:s}),e[14]=s,e[15]=d,e[16]=k):k=e[16];let E;e[17]!==s.systemHint||e[18]!==c.blockedLabel||e[19]!==y||e[20]!==v||e[21]!==S||e[22]!==C||e[23]!==w||e[24]!==k?(E=r.jsx(J.RadioItem,{value:s.systemHint,disabled:y,color:v,icon:S,trailing:C,label:w,secondary:c.blockedLabel,children:k}),e[17]=s.systemHint,e[18]=c.blockedLabel,e[19]=y,e[20]=v,e[21]=S,e[22]=C,e[23]=w,e[24]=k,e[25]=E):E=e[25];const M=E;if(_){const A=c.isBlocked?"left":"center",I=c.isBlocked?void 0:null;let P;return e[26]!==M||e[27]!==A||e[28]!==I||e[29]!==_||e[30]!==b?(P=r.jsx(It,{side:"right",labelTextAlign:A,label:_,secondaryLabel:b,contentClassName:"cant-hover:hidden",triggerAs:I,children:M}),e[26]=M,e[27]=A,e[28]=I,e[29]=_,e[30]=b,e[31]=P):P=e[31],P}return M},w8e=({disabled:t,children:e,hintSelected:s})=>{const n=G(),o=Ct(We.hasSeenComposerSystemHintButtonTooltip),a=k8e(),i=!t&&!a.isLoading&&a.eligible,l=!t&&!o.isLoading&&o.eligible,c=x.useMemo(()=>{if(i)return{announcementKey:We.hasSeenConnectorsSourcesPillTooltip,title:r.jsx(j,{id:"qgvuHg",defaultMessage:"Search connected apps"}),onDismiss:()=>_t(n,We.hasSeenConnectorsSourcesPillTooltip),description:r.jsx(j,{id:"bJE6uS",defaultMessage:"Get insights across Google Drive, SharePoint, Dropbox, and more."})};if(l)return{announcementKey:We.hasSeenComposerSystemHintButtonTooltip,title:r.jsx(j,{id:"tTydhk",defaultMessage:"All your tools, in one handy place"}),onDismiss:()=>_t(n,We.hasSeenComposerSystemHintButtonTooltip),description:r.jsx(j,{id:"Kgb5fv",defaultMessage:"Create an image, research report, and more."})}},[n,l,i]);if(x.useEffect(()=>{c&&(c.announcementKey===We.hasSeenComposerSystemHintButtonTooltip?B.logUpsellOrModalEvent(ks,{eventId:"composer_system_hint_button_tooltip_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}):c.announcementKey===We.hasSeenConnectorsSourcesPillTooltip&&B.logUpsellOrModalEvent(ks,{eventId:"connectors_sources_pill_tooltip_shown",type:Ts.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[c]),!s&&!i)return e;if(c)return r.jsx(nu,U(T({show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!"},c),{children:e}));let u;return t?u=r.jsx(j,{id:"uw9x80",defaultMessage:"Tools unavailable"}):u=r.jsx(j,{id:"Yr1zf1",defaultMessage:"Choose tool"}),r.jsx(It,{side:"bottom",label:u,children:e})},k8e=()=>{var d;const t=G(),e=oe(()=>na(t)),{data:s,isLoading:n}=Jd(),{eligible:o,markAsViewedDontInvalidateCache:a,isLoading:i}=Ct(We.hasSeenConnectorsSourcesPillTooltip),l=(d=s==null?void 0:s.announcements)==null?void 0:d[We.hasSeenConnectorsNuxModal],c=!!(l&&t6(new Date,new Date(l))>=1);return{eligible:o&&c&&e!=null&&e.some(f=>f.systemHint===Ye.Slurm),isLoading:n||i,markAsViewedDontInvalidateCache:a}},T8e=Pe(()=>me(()=>Promise.resolve().then(()=>X7e),void 0).then(t=>t.AgentNuxModal));function wut(t){"use forget";var C3;const e=F.c(160),{conversation:s,composerController:n,composerDisabled:o,layoutMode:a,openFileDialog:i,modelSupportedImageMimeTypes:l,isFileUploadEnabled:c,fileUploadDisabledReason:u,currentModelId:d,currentModelConfig:f,selectModelId:m,connectorConfig:p,onSelectConnector:g,availableSystemHints:h,activeConnectorSystemHintTypes:_,activeSystemHintType:b,isFirstPartyProject:y,onTakePhotoSave:v}=t,S=G(),C=ne();let w;e[0]!==S?(w=N9(S),e[0]=S,e[1]=w):w=e[1];const k=w,E=M9(),M=E!=null,N=l.length>0,A=Si(),I=kw(N8e),P=zc();let R;e[2]!==n?(R=KE(n),e[2]=n,e[3]=R):R=e[3];const O=oe(R.isWhisperActive$);let L;e[4]!==n?(L=QG(n),e[4]=n,e[5]=L):L=e[5];const{shouldHighlight$:D}=L;let H;e[6]!==D?(H=()=>D(),e[6]=D,e[7]=H):H=e[7];const V=oe(H);let q;e[8]!==S?(q=()=>NX(S),e[8]=S,e[9]=q):q=e[9];const W=oe(q);let $;e[10]!==S?($=()=>xn(S),e[10]=S,e[11]=$):$=e[11];const Z=oe($),K=pz();let Y;e[12]!==K||e[13]!==s.id||e[14]!==S?(Y=()=>{K==="show"&&mt(S,T8e,{clientThreadId:s.id,source:"composer_system_hint"})},e[12]=K,e[13]=s.id,e[14]=S,e[15]=Y):Y=e[15];const ae=Y,se=jo(),ee=i9();let re;e[16]!==ee||e[17]!==n||e[18]!==s.id||e[19]!==S||e[20]!==ae||e[21]!==se||e[22]!==k.composer?(re=yn=>{if(yn==null)return;v1(yn)?ee(yn,{analyticsMetadata:{clientThreadId:s.id}}):se(yn,{analyticsMetadata:{clientThreadId:s.id}}),yn===Ye.Agent&&ae(),nd(S)&&!fc()&&$i.getIsInExperiment(S)==="treatment"&&!k.composer.autofocusDisabled$()&&no(Ht(n))},e[16]=ee,e[17]=n,e[18]=s.id,e[19]=S,e[20]=ae,e[21]=se,e[22]=k.composer,e[23]=re):re=e[23];const he=re,fe=x9();let pe;e[24]!==fe?(pe=yn=>{if(!v1(yn.systemHint))return;const Ff=AX(yn.systemHint);let w3;if(typeof window<"u"){const k3=new URL(window.location.href);k3.searchParams.set("system_hints",yn.systemHint),w3=k3.toString()}fe({connectorId:Ff,systemHintType:yn.systemHint,redirectAfter:w3})},e[24]=fe,e[25]=pe):pe=e[25];const le=pe;let ve;e[26]!==S?(ve=nz(S,!0),e[26]=S,e[27]=ve):ve=e[27];const{showRecentFilesDropdown:Te}=ve;let xe;e[28]!==S?(xe=ut(),e[28]=S,e[29]=xe):xe=e[29];const ce=xe;let we;e[30]!==S?(we=()=>Wc(S),e[30]=S,e[31]=we):we=e[31];const ge=oe(we),{isCombinedList:Ae,fullyCollapsedToolMenu:Ue,showSlashHint:Ie,showModelsInPlusMenu:Me}=ge;let te;e[32]!==S?(te=()=>nd(S)&&!fc(),e[32]=S,e[33]=te):te=e[33];const Q=oe(te),ie=Ue&&!Q,_e=Me&&!Q;let ye;e[34]!==h||e[35]!==Z?(ye=MX(h,Z),e[34]=h,e[35]=Z,e[36]=ye):ye=e[36];const Re=ye,Ve=Re==null||Re.length>0,ze=!Ae&&!Q&&Ve&&((C3=Re==null?void 0:Re.length)!=null?C3:0)>5,Fe=Array.from(p.values()).some(M8e);let be;e[37]!==S?(be=wz(S),e[37]=S,e[38]=be):be=e[38];const qe=be&&!y;let Ze;e[39]!==S||e[40]!==Q?(Ze=Q&&$i.getNoExplicitAddFromSocial(S),e[39]=S,e[40]=Q,e[41]=Ze):Ze=e[41];const rt=P||Ze;let wt;e[42]!==p||e[43]!==Fe||e[44]!==rt||e[45]!==c||e[46]!==ce||e[47]!==Q||e[48]!==g?(wt=ce&&c&&Q&&!rt&&Fe?r.jsx(J.Group,{children:r.jsx(OS,{includeAction:!0,shortName:!0,connectorConfig:p,onConnectorClick:g})},"connect-apps"):null,e[42]=p,e[43]=Fe,e[44]=rt,e[45]=c,e[46]=ce,e[47]=Q,e[48]=g,e[49]=wt):wt=e[49];const at=wt;let kt;e[50]!==_||e[51]!==b||e[52]!==Re||e[53]!==at||e[54]!==ie||e[55]!==Ve||e[56]!==y||e[57]!==W||e[58]!==ce||e[59]!==a||e[60]!==le||e[61]!==he?(kt=ie&&ce&&(Ve||at)?r.jsxs(t7e,{layoutMode:a,children:[r.jsx(J.Group,{children:r.jsx(e1,{systemHints:Re,activeConnectorSystemHintTypes:_,selectedHintType:b,onSelectHintType:he,isLoadingConnectorsForSystemHints:W,isFirstPartyProject:y,onConnectHint:le})}),at]},"tools-menu"):null,e[50]=_,e[51]=b,e[52]=Re,e[53]=at,e[54]=ie,e[55]=Ve,e[56]=y,e[57]=W,e[58]=ce,e[59]=a,e[60]=le,e[61]=he,e[62]=kt):kt=e[62];let Nt;e[63]!==s||e[64]!==d||e[65]!==a||e[66]!==m||e[67]!==_e?(Nt=_e?r.jsx(h8e,{conversation:s,layoutMode:a,selectedModelId:d!=null?d:"",onSelectModelId:yn=>{m(yn,"plus menu")}},"models-menu"):null,e[63]=s,e[64]=d,e[65]=a,e[66]=m,e[67]=_e,e[68]=Nt):Nt=e[68];let Ot;e[69]!==kt||e[70]!==Nt?(Ot=[kt,Nt].filter(E8e),e[69]=kt,e[70]=Nt,e[71]=Ot):Ot=e[71];const At=Ot;let Wt;e[72]!==Re||e[73]!==ze?(Wt=Re&&(ze?Re.slice(0,4):Re),e[72]=Re,e[73]=ze,e[74]=Wt):Wt=e[74];const hs=Wt;let ls;e[75]!==P||e[76]!==At?(ls=At.length>0&&!P?r.jsx(J.Group,{children:At},"submenus"):null,e[75]=P,e[76]=At,e[77]=ls):ls=e[77];const Ua=ls;let $a;e[78]!==S?($a=()=>nd(S)&&!fc()&&$i.getIsInExperiment(S)==="treatment",e[78]=S,e[79]=$a):$a=e[79];const Ro=oe($a),{file_uploads:lu}=tz(),cu=Ro?"sheet":void 0,uu=!c,Ws=f==null?void 0:f.title;let Ha;e[80]!==s.id||e[81]!==u||e[82]!==N||e[83]!==v||e[84]!==i||e[85]!==E||e[86]!==cu||e[87]!==uu||e[88]!==Ws?(Ha=r.jsx(az,{openFileDialog:i,modelSupportsImages:N,mode:cu,showMenuForNoAuth:!1,onTakePhotoSave:v,isDisabled:uu,disabledReason:u,currentModelName:Ws,rateLimitInfo:E,clientThreadId:s.id}),e[80]=s.id,e[81]=u,e[82]=N,e[83]=v,e[84]=i,e[85]=E,e[86]=cu,e[87]=uu,e[88]=Ws,e[89]=Ha):Ha=e[89];let du;e[90]!==I||e[91]!==p||e[92]!==A||e[93]!==Ro||e[94]!==c||e[95]!==ce||e[96]!==l||e[97]!==N||e[98]!==g||e[99]!==Te?(du=ce&&r.jsxs(r.Fragment,{children:[c&&N&&r.jsx(Cz,{modelSupportedImageMimeTypes:l}),!Ro&&c&&r.jsx(OS,{includeAction:!0,shortName:!0,connectorConfig:p,onConnectorClick:g}),Te&&r.jsx(g8e,{attachedFileIds:I,onAttachLibraryFile:yn=>fr.attachLibraryFile(A,yn)}),r.jsx(yz,{}),r.jsx(p8e,{modelSupportedImageMimeTypes:l})]}),e[90]=I,e[91]=p,e[92]=A,e[93]=Ro,e[94]=c,e[95]=ce,e[96]=l,e[97]=N,e[98]=g,e[99]=Te,e[100]=du):du=e[100];let fu;e[101]!==Ha||e[102]!==du?(fu=r.jsxs(J.Group,{className:"content-sheet:content-sheet-inset-section",children:[Ha,du]},"add-files"),e[101]=Ha,e[102]=du,e[103]=fu):fu=e[103];const I0=Ae&&Ua;let mu;e[104]!==_||e[105]!==b||e[106]!==hs||e[107]!==Re||e[108]!==at||e[109]!==ie||e[110]!==Ve||e[111]!==y||e[112]!==P||e[113]!==W||e[114]!==ce||e[115]!==a||e[116]!==le||e[117]!==he||e[118]!==ze||e[119]!==qe?(mu=(!ie||!ce)&&Ve&&!P&&r.jsxs(J.Group,{children:[r.jsx(e1,{systemHints:hs,activeConnectorSystemHintTypes:_,selectedHintType:b,onSelectHintType:he,isLoadingConnectorsForSystemHints:ze?!1:W,isFirstPartyProject:y,onConnectHint:le}),ze&&r.jsxs(e7e,{layoutMode:a,children:[r.jsx(J.Group,{children:r.jsx(e1,{systemHints:Re==null?void 0:Re.slice(4),activeConnectorSystemHintTypes:_,selectedHintType:b,onSelectHintType:he,isLoadingConnectorsForSystemHints:W,isFirstPartyProject:y,onConnectHint:le})}),at,qe&&r.jsx(r8e,{})]})]},"system-hints"),e[104]=_,e[105]=b,e[106]=hs,e[107]=Re,e[108]=at,e[109]=ie,e[110]=Ve,e[111]=y,e[112]=P,e[113]=W,e[114]=ce,e[115]=a,e[116]=le,e[117]=he,e[118]=ze,e[119]=qe,e[120]=mu):mu=e[120];const j0=(!ie||!ce)&&!P&&at&&(!ze||!Ve||Q)&&at,P0=!Ae&&Ua;let pu;e[121]!==ce?(pu=!ce&&r.jsx(n7e,{},"upsell"),e[121]=ce,e[122]=pu):pu=e[122];let gu;e[123]!==C||e[124]!==P||e[125]!==Ie?(gu=Ie&&!P&&r.jsx(J.Group,{children:r.jsx("div",{className:"text-token-text-tertiary p-2 text-center text-sm",children:C.formatMessage({id:"composer.plusMenu.typeSlashForQuickAccess",defaultMessage:"Type '/' for quick access"})})},"slash-hint"),e[123]=C,e[124]=P,e[125]=Ie,e[126]=gu):gu=e[126];let kg;e[127]!==fu||e[128]!==I0||e[129]!==mu||e[130]!==j0||e[131]!==P0||e[132]!==pu||e[133]!==gu?(kg=r.jsxs(r.Fragment,{children:[fu,I0,mu,j0,P0,pu,gu]}),e[127]=fu,e[128]=I0,e[129]=mu,e[130]=j0,e[131]=P0,e[132]=pu,e[133]=gu,e[134]=kg):kg=e[134];const R0=kg;let hu;e[135]!==n||e[136]!==k.composer?(hu=yn=>{k.composer.autofocusDisabled$()||(yn.preventDefault(),no(Ht(n)))},e[135]=n,e[136]=k.composer,e[137]=hu):hu=e[137];let _u;e[138]!==lu||e[139]!==C||e[140]!==ce?(_u=ce&&lu!=="blocked"?C.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}):C.formatMessage({id:"composer.plusMenu.label.loggedOut",defaultMessage:"Add photos and more"}),e[138]=lu,e[139]=C,e[140]=ce,e[141]=_u):_u=e[141];let Tg;e[142]===Symbol.for("react.memo_cache_sentinel")?(Tg=r.jsx("kbd",{className:"bg-token-bg-tertiary -me-1 inline-grid aspect-square w-4 items-center justify-center rounded-sm text-[11px]",children:r.jsx("span",{children:"/"})}),e[142]=Tg):Tg=e[142];const O0=c?i:void 0;let xu;e[143]!==S?(xu=yn=>{if(ax())return;const Ff=TE(S);Ff.isKeyboardOpen()&&(yn.preventDefault(),Ff.closeKeyboard(()=>{Of(S).isSheetOpen$.set(!0)}))},e[143]=S,e[144]=xu):xu=e[144];let yu;e[145]!==O||e[146]!==O0||e[147]!==xu?(yu=r.jsx(ZOe,{onDoubleClick:O0,onPointerDown:xu,disabled:O}),e[145]=O,e[146]=O0,e[147]=xu,e[148]=yu):yu=e[148];let bu;e[149]!==o||e[150]!==s.id||e[151]!==V||e[152]!==_u||e[153]!==yu?(bu=r.jsx(jV,{disabled:o,clientThreadId:s.id,rateLimitPopup:null,highlightTooltip:V,label:_u,secondaryLabel:Tg,children:yu}),e[149]=o,e[150]=s.id,e[151]=V,e[152]=_u,e[153]=yu,e[154]=bu):bu=e[154];let Eg;return e[155]!==M||e[156]!==R0||e[157]!==hu||e[158]!==bu?(Eg=r.jsx(QOe,{onCloseAutoFocus:hu,items:R0,fileUploadRateLimited:M,children:bu}),e[155]=M,e[156]=R0,e[157]=hu,e[158]=bu,e[159]=Eg):Eg=e[159],Eg}function E8e(t){return t!=null}function M8e(t){return t.access_token!=null}function N8e(t){return t.files.map(I8e).filter(A8e)}function A8e(t){return t!=null}function I8e(t){return t.fileId}const j8e=350,P8e=150;function kz({favicon:t,heading:e,title:s,quoteHeading:n,quoteText:o,snippet:a,isContentBlocked:i,contentContainerClassName:l,theme:c,children:u}){const[d,f]=x.useState(!1),m=x.useRef(null),p=x.useRef(null),g=x.useRef(!1),h=n!=null||o!=null,_=x.useCallback(()=>{m.current&&clearTimeout(m.current)},[]),b=x.useCallback(()=>{p.current&&clearTimeout(p.current)},[]),y=x.useCallback(()=>{f(!1)},[]),v=x.useCallback(w=>{w.stopPropagation(),g.current=!0,b(),m.current=setTimeout(()=>{g.current&&f(!0)},j8e)},[b]),S=x.useCallback(w=>{w.stopPropagation(),g.current=!1,_(),p.current=setTimeout(()=>{y()},P8e)},[_,y]);x.useEffect(()=>{d&&b()},[d,b]);const C=x.useMemo(()=>({onBlur:S,onMouseLeave:S,onMouseEnter:v,onFocus:v}),[S,v]);return r.jsxs(eu,{open:d,children:[r.jsx(hi,U(T({asChild:!0},C),{children:u})),r.jsx(tu,{children:r.jsx(su,U(T({side:"top",align:"start",sideOffset:4},C),{onOpenAutoFocus:w=>w.preventDefault(),onCloseAutoFocus:w=>w.preventDefault(),className:z(IX,c==="grey"&&"bg-token-bg-primary!","relative w-64 text-sm focus:outline-none",l),collisionPadding:8,onPointerDown:w=>w.stopPropagation(),children:r.jsxs("div",{className:"rounded-xl px-3 py-1.5 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t,r.jsx("span",{className:"text-token-text-secondary truncate text-xs",children:e})]}),i?r.jsx("div",{className:"mt-2",children:r.jsx(j,{id:"iGylAw",defaultMessage:"ChatGPT is unable to access the contents of this website."})}):r.jsxs(r.Fragment,{children:[s&&r.jsx("div",{className:"mt-2 line-clamp-2 leading-snug font-semibold text-ellipsis",children:s}),h&&r.jsxs("div",{className:"border-token-border-default mt-2 flex flex-col gap-1 border-s-2 ps-2 text-xs",children:[n&&r.jsx("div",{className:"text-token-link text-xs font-semibold",children:n}),o&&r.jsx("div",{className:"text-token-text-secondary line-clamp-2 overflow-hidden text-xs leading-snug text-ellipsis",children:o})]}),a&&r.jsx("div",{className:"mt-2 line-clamp-4 text-sm select-text",children:a})]})]})}))})]})}function kut(){"use forget";var re,he,fe;const t=F.c(55),e=G(),s=oe(lt.context$),n=oe(lt.sidebarUrlTrayOpen$),o=fx(e),a=ne(),c=On()===Ye.Agent||s==null?void 0:s.selection,u=O8e(c),d=u>0,f=x.useRef(null),[m,p]=x.useState(!1);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const pe=f.current;pe&&p(pe.scrollWidth>pe.clientWidth)},t[0]=g):g=t[0];const h=s==null?void 0:s.title,_=s==null?void 0:s.url;let b;if(t[1]!==c||t[2]!==h||t[3]!==_?(b=[h,_,c],t[1]=c,t[2]=h,t[3]=_,t[4]=b):b=t[4],x.useEffect(g,b),!o||!s)return null;let y,v;if(s!=null&&s.url){let pe;if(t[5]!==s.url){let le;t[7]===Symbol.for("react.memo_cache_sentinel")?(le=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,t[7]=le):le=t[7],pe=s.url.replace(le,""),t[5]=s.url,t[6]=pe}else pe=t[6];v=pe;try{let le;t[8]!==s.url?(le=new URL(s.url),t[8]=s.url,t[9]=le):le=t[9],y=le.host}catch(le){}}let S;t[10]!==s.title?(S=(re=s.title)==null?void 0:re.trim(),t[10]=s.title,t[11]=S):S=t[11];const C=S,w=(he=v&&v.length>0?v:s.url)!=null?he:void 0,k=C&&C.length>0?C:w,E=!!(s!=null&&s.blocked);if(!n)return null;const N=k!=null?k:s.url;let A;t[12]!==s.base64favicon||t[13]!==N?(A=r.jsx(r_,{base64:s.base64favicon,title:N,className:"h-4 w-4 flex-shrink-0 rounded-[4px]"}),t[12]=s.base64favicon,t[13]=N,t[14]=A):A=t[14];const I=(fe=y!=null?y:w)!=null?fe:s.url,P=k!=null?k:s.url;let R;t[15]!==d||t[16]!==u?(R=d?r.jsx(j,{id:"EwD8lK",defaultMessage:"Selected text ({count} words)",values:{count:u}}):null,t[15]=d,t[16]=u,t[17]=R):R=t[17];const O=d&&c!=null?c:null,L=E?"bg-[rgba(255,214,10,0.1)]":d?"bg-token-interactive-bg-accent-default":"bg-[rgba(0,0,0,0.03)] hover:bg-[rgba(0,0,0,0.08)] dark:bg-[rgba(255,255,255,0.05)] dark:hover:bg-[rgba(255,255,255,0.1)]";let D;t[18]!==L?(D=z("group flex h-[36px] w-fit max-w-[150px] min-w-0 cursor-default items-center gap-[6px] rounded-xl px-2 pe-3 transition-all",L),t[18]=L,t[19]=D):D=t[19];let H;t[20]!==s.base64favicon||t[21]!==s.url||t[22]!==k||t[23]!==E?(H=E?r.jsx(A9,{className:"text-token-icon-status-warning block h-4 w-4 group-hover:hidden"}):r.jsx(r_,{base64:s.base64favicon,title:k!=null?k:s.url,className:"block h-4 w-4 rounded-[4px] group-hover:hidden"}),t[20]=s.base64favicon,t[21]=s.url,t[22]=k,t[23]=E,t[24]=H):H=t[24];let V;t[25]!==a?(V=a.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),t[25]=a,t[26]=V):V=t[26];let q;t[27]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx(Rn,{className:"h-4 w-4 text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]"}),t[27]=q):q=t[27];let W;t[28]!==V?(W=r.jsx("button",{onClick:R8e,className:"absolute start-0 top-0 hidden group-hover:block","aria-label":V,children:q}),t[28]=V,t[29]=W):W=t[29];let $;t[30]!==H||t[31]!==W?($=r.jsxs("div",{className:"relative h-4 w-4 flex-shrink-0",children:[H,W]}),t[30]=H,t[31]=W,t[32]=$):$=t[32];const Z=m&&!d&&"[mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]";let K;t[33]!==Z?(K=z("overflow-hidden text-xs whitespace-nowrap select-none",Z),t[33]=Z,t[34]=K):K=t[34];let Y;t[35]!==s.url||t[36]!==k||t[37]!==d||t[38]!==E?(Y=d&&!E?r.jsx(j,{id:"DaC6ra",defaultMessage:"Selected text"}):k?r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:k}):r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:s.url}),t[35]=s.url,t[36]=k,t[37]=d,t[38]=E,t[39]=Y):Y=t[39];let ae;t[40]!==K||t[41]!==Y?(ae=r.jsx("span",{ref:f,className:K,children:Y}),t[40]=K,t[41]=Y,t[42]=ae):ae=t[42];let se;t[43]!==D||t[44]!==$||t[45]!==ae?(se=r.jsxs("div",{className:D,children:[$,ae]}),t[43]=D,t[44]=$,t[45]=ae,t[46]=se):se=t[46];let ee;return t[47]!==E||t[48]!==O||t[49]!==se||t[50]!==A||t[51]!==I||t[52]!==P||t[53]!==R?(ee=r.jsx("div",{className:"relative px-3 pt-3",children:r.jsx(kz,{favicon:A,heading:I,title:P,quoteHeading:R,quoteText:O,snippet:null,isContentBlocked:E,theme:"grey",children:se})}),t[47]=E,t[48]=O,t[49]=se,t[50]=A,t[51]=I,t[52]=P,t[53]=R,t[54]=ee):ee=t[54],ee}function R8e(){var t;(t=E9())==null||t.triggerProductEvent("removeTabContext"),PE(!1)}function O8e(t){if(!t)return 0;const e=t.trim();if(!e)return 0;if(typeof Intl.Segmenter=="function")try{const s=new Intl.Segmenter(void 0,{granularity:"word"}).segment(e);return Array.from(s).reduce((n,o)=>n+(o.isWordLike?1:0),0)}catch(s){}return e.split(/\s+/).filter(Boolean).length}const y0=t=>{"use forget";const e=F.c(41),{icon:s,removable:n,label:o,content:a,dropdownContent:i,onRemove:l,onOpenChange:c,onCloseAutoFocus:u}=t,d=ne();let f;e[0]!==d||e[1]!==o?(f=d.formatMessage({id:"giCR14",defaultMessage:"{selectedMode}, click to remove"},{selectedMode:o}),e[0]=d,e[1]=o,e[2]=f):f=e[2];const m=f,p=L8e;let g;e[3]!==l?(g=E=>{const M=E.changedTouches[0];E.target===E.currentTarget&&E.currentTarget.contains(document.elementFromPoint(M.clientX,M.clientY))&&(E.preventDefault(),l==null||l(E))},e[3]=l,e[4]=g):g=e[4];let h;e[5]!==l||e[6]!==g?(h={onClick:l,onTouchStart:D8e,onTouchEnd:g},e[5]=l,e[6]=g,e[7]=h):h=e[7];const _=h;let b;e[8]!==s?(b=typeof s=="function"?r.jsx(s,{}):s,e[8]=s,e[9]=b):b=e[9];let y;e[10]!==b?(y=r.jsx("div",{className:"__composer-pill-icon",inert:!0,children:b}),e[10]=b,e[11]=y):y=e[11];const v=y,S=a!=null?a:o;let C;e[12]!==S?(C=r.jsx("span",{className:"max-w-40 truncate [[data-collapse-labels]_&]:sr-only",ref:p,children:S}),e[12]=S,e[13]=C):C=e[13];const w=C;if(i){let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx(zo,{className:"icon-sm -me-0.5 h-3.5 w-3.5",inert:!0}),e[14]=E):E=e[14];let M;e[15]!==v||e[16]!==w?(M=r.jsxs(J.BasicTrigger,{className:"__composer-pill group/pill",children:[v,w,E]}),e[15]=v,e[16]=w,e[17]=M):M=e[17];let N;e[18]!==i||e[19]!==u?(N=r.jsx(J.Portal,{children:r.jsx(J.Content,{size:"auto",align:"start",alignOffset:-8,onCloseAutoFocus:u,children:i})}),e[18]=i,e[19]=u,e[20]=N):N=e[20];let A;e[21]!==c||e[22]!==N||e[23]!==M?(A=r.jsxs(J.Root,{modal:!1,onOpenChange:c,children:[M,N]}),e[21]=c,e[22]=N,e[23]=M,e[24]=A):A=e[24];const I=A;if(n){let P;e[25]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx(f1,{className:"icon-sm",inert:!0}),e[25]=P):P=e[25];let R;e[26]!==_||e[27]!==m?(R=r.jsx("button",U(T({type:"button",className:"__composer-pill-remove","aria-label":m},_),{children:P})),e[26]=_,e[27]=m,e[28]=R):R=e[28];let O;return e[29]!==I||e[30]!==R?(O=r.jsxs("div",{className:"__composer-pill-composite group relative",children:[R,I]}),e[29]=I,e[30]=R,e[31]=O):O=e[31],O}return I}if(n){let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"__composer-pill-remove",inert:!0,children:r.jsx(f1,{className:"icon-sm"})}),e[32]=E):E=e[32];let M;return e[33]!==v||e[34]!==_||e[35]!==m||e[36]!==w?(M=r.jsxs("button",U(T({type:"button",className:"__composer-pill group","aria-label":m},_),{children:[v,w,E]})),e[33]=v,e[34]=_,e[35]=m,e[36]=w,e[37]=M):M=e[37],M}let k;return e[38]!==v||e[39]!==w?(k=r.jsxs("div",{className:"__composer-pill",children:[v,w]}),e[38]=v,e[39]=w,e[40]=k):k=e[40],k};function L8e(t){t!=null&&t.parentElement&&t.textContent&&t.scrollWidth>t.clientWidth&&(t.parentElement.title=t.textContent)}function D8e(t){t.preventDefault()}const Tut=t=>{"use forget";const e=F.c(7),{label:s,tooltipLabel:n,onRemoveModel:o}=t,a=n==null;let i;e[0]!==s||e[1]!==o?(i=r.jsx(y0,{icon:zE,label:s,removable:!0,onRemove:o}),e[0]=s,e[1]=o,e[2]=i):i=e[2];let l;return e[3]!==a||e[4]!==i||e[5]!==n?(l=r.jsx(It,{label:n,disabled:a,children:i}),e[3]=a,e[4]=i,e[5]=n,e[6]=l):l=e[6],l};function Tz({repoName:t,onClose:e}){const s=ne();return r.jsxs(Ft,{isOpen:!0,onClose:e,shouldIgnoreClickOutside:!0,testId:"modal-github-indexing",type:"success",size:"custom",className:"max-w-[420px]",headerClassName:"pt-0 pb-0 pe-2",showCloseButton:!0,hideSeparator:!0,title:r.jsx("span",{}),children:[r.jsx("div",{className:"mt-0 mb-4 flex justify-center",children:r.jsx("div",{className:"bg-tertiary border-token-border-subtle rounded-lg border p-3",children:r.jsx(ff,{className:"h-10 w-10"})})}),r.jsx("h2",{className:"mb-4 px-4 text-center text-xl font-semibold",children:s.formatMessage({id:"ejqREp",defaultMessage:"{repoName} is not indexed yet"},{repoName:t})}),r.jsx("p",{className:"text-token-text-secondary mb-6 px-6 text-center text-sm leading-relaxed",children:s.formatMessage({id:"KkmieM",defaultMessage:"This repository can't be accessed by ChatGPT until it's indexed by GitHub. You can trigger indexing by searching the repository's code on GitHub. After about 510 minutes, you can use it in ChatGPT."})}),r.jsxs(ke,{className:"w-full",size:"large",onClick:()=>{const n="https://github.com/search?q=repo:".concat(t,"&type=code");window.open(n,"_blank"),e()},children:[s.formatMessage({id:"yUeuLL",defaultMessage:"Trigger indexing on GitHub"}),r.jsx(wr,{className:"icon-sm ms-2 inline-block"})]})]})}const Ez=({items:t,searchTerm:e,setSearchTerm:s,selectedItems:n,searchPlaceholder:o,handleSelectItem:a,showSelectAllRepos:i,loading:l,onEndScroll:c,maxRepos:u,contentRef:d,subContentRef:f})=>{var C;const m=jX("installations/select_target"),p=x.useRef(null),g=x.useRef(null),h=x.useRef(null),_=x.useCallback(w=>{if(!c)return;const k=w.currentTarget;k.scrollHeight-k.scrollTop-k.clientHeight<=24&&c()},[c]),b=i&&(n==null?void 0:n.includes("$all_accessible_repos")),y=(C=n==null?void 0:n.filter(w=>w!=="$all_accessible_repos").length)!=null?C:0,v=u!==void 0&&y>=u,S=u===1;return x.useEffect(()=>{requestAnimationFrame(()=>{var w;(w=p.current)==null||w.focus()})},[]),x.useEffect(()=>{const w=N=>{p.current&&document.activeElement!==p.current&&(I9(N)||N.key==="Enter"||N.ctrlKey||N.metaKey||N.key.length!==1&&!j9(N)||(N.stopPropagation(),p.current.focus()))},k=N=>{if(N)return N.addEventListener("keydown",w),()=>{N.removeEventListener("keydown",w)}},E=d&&k(d==null?void 0:d.current),M=f&&k(f==null?void 0:f.current);return()=>{E==null||E(),M==null||M()}},[]),x.useEffect(()=>{var M,N,A;const w=g.current;if(!w)return;const k=(A=(N=(M=h.current)!=null?M:f==null?void 0:f.current)!=null?N:d==null?void 0:d.current)!=null?A:null,E=new IntersectionObserver(I=>{I[0].isIntersecting&&(c==null||c())},k?{root:k}:void 0);return E.observe(w),()=>E.disconnect()},[d,f,c]),r.jsxs(r.Fragment,{children:[r.jsx(J.InputItem,{selectAllOnFocus:!1,border:!1,ref:p,value:e,onChange:w=>s(w.target.value),placeholder:o,name:"github-submenu-dropdown-input"}),r.jsxs("div",{className:"max-h-60 overflow-y-auto",ref:h,onScroll:_,children:[t==null?void 0:t.map(w=>{const k=n==null?void 0:n.includes(w.name),E=u!==void 0&&!k&&v&&!S;return r.jsx(J.Item,{onClick:N=>{N.preventDefault(),a(w)},secondary:r.jsx("span",{className:"line-clamp-2",children:w.description}),trailing:k&&hl,className:z((E||!w.indexed)&&"text-token-text-tertiary opacity-50"),disabled:E,children:r.jsx("div",{className:"truncate",children:w.name})},w.name)}),r.jsx("div",{className:"w-auto",ref:g}),!l&&t.length===0&&r.jsx(J.Item,{className:"text-token-text-tertiary pointer-events-none",children:r.jsx(j,{id:"LRA3gT",defaultMessage:"No repositories found"})}),l&&r.jsx("div",{className:"text-token-text-tertiary mx-1.5 px-2 py-2.5 text-sm",role:"alert","aria-busy":"true",children:r.jsx(j,{id:"HvTGRC",defaultMessage:"Loading..."})})]}),i&&u===void 0&&r.jsx(J.Item,{onClick:w=>{w.preventDefault(),a({name:"$all_accessible_repos"}),b&&!e&&F8e(w.currentTarget)},secondary:r.jsx(j,{id:"EhTGqu",defaultMessage:"Select all repositories accessible to ChatGPT"}),trailing:b&&hl,children:r.jsx(j,{id:"pJnTxe",defaultMessage:"All Repositories"})}),r.jsx(J.Separator,{}),r.jsx(J.Item,{onClick:()=>{window.open(m,"_blank")},trailing:r.jsx(wr,{className:"icon-sm"}),children:r.jsx(j,{id:"ICVOEb",defaultMessage:"Configure Repositories"})}),r.jsx(J.Separator,{}),r.jsxs("div",{className:"text-token-text-tertiary mx-1.5 px-2.5 py-2 text-xs",children:[u&&r.jsx(j,{id:"k/9Fjt",defaultMessage:"Choose up to {maxRepos} {maxRepos, plural, one {repository} other {repositories}}. To search more, use deep research.",values:{maxRepos:u}}),r.jsx(j,{id:"XVk/l2",defaultMessage:"Not indexed or not seeing a repository? {helpLink}",values:{helpLink:r.jsx(r.Fragment,{children:r.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:r.jsx(j,{id:"sVuhcw",defaultMessage:"Learn more"})})})}})]})]})};function F8e(t){const e=t.closest("[role=menuitem]");if(!e)return;let s=e.nextElementSibling;for(;s&&s.getAttribute("role")!=="menuitem";)s=s.nextElementSibling;if(!s)for(s=e.previousElementSibling;s&&s.getAttribute("role")!=="menuitem";)s=s.previousElementSibling;s instanceof HTMLElement&&s.focus()}const B8e=30,U8e=25;function Mz(t){"use forget";var Re,Ve,ze;const e=F.c(71),{clientThreadId:s,allowSelectAllRepos:n,linkId:o,syncConnectionId:a,githubSyncEnabled:i,enabled:l,onSelectAllRepos:c,selectionScope:u}=t,d=n===void 0?!1:n,f=i===void 0?!1:i,m=l===void 0?!0:l,{selectedRepos:p,setSelectedRepos:g}=nT(s,u);let h;e[0]!==p?(h=oT(p),e[0]=p,e[1]=h):h=e[1];const _=h,[b]=x.useState(p),[y,v]=x.useState(""),S=i$(y,300),{maxRepos:C}=sT(),[w,k]=x.useState(null),E=C!=null?C:20,M=y.length>0?S:"";let N;e[2]!==E||e[3]!==o||e[4]!==M?(N=["github-repos-unified",o,E,M],e[2]=E,e[3]=o,e[4]=M,e[5]=N):N=e[5];const A=m&&!!o;let I;e[6]!==S||e[7]!==E||e[8]!==o||e[9]!==y.length?(I=async Fe=>{const{pageParam:be}=Fe,Oe=be===void 0?1:be;return y.length>0?await de.safePost("/aip/connectors/github/search_repos_v2",{requestBody:{query:S,limit:E,page:Oe,link_id:o!=null?o:"",include_search_index_status:!0}}):await de.safePost("/aip/connectors/github/list_repos",{requestBody:{link_id:o!=null?o:"",limit:E,page:Oe,include_search_index_status:!0}})},e[6]=S,e[7]=E,e[8]=o,e[9]=y.length,e[10]=I):I=e[10];let P;e[11]!==E?(P=(Fe,be)=>{if(Fe.next_token!==null&&Fe.next_token!==void 0||Fe.repos.length===E)return be.length+1},e[11]=E,e[12]=P):P=e[12];let R;e[13]!==N||e[14]!==A||e[15]!==I||e[16]!==P?(R={queryKey:N,enabled:A,initialPageParam:1,queryFn:I,getNextPageParam:P,retry:1},e[13]=N,e[14]=A,e[15]=I,e[16]=P,e[17]=R):R=e[17];const O=ip(R),L=O.data,D=O.isFetching,H=O.isFetchingNextPage,V=(Re=O.isError)!=null?Re:!1,q=O.fetchNextPage,W=O.hasNextPage,$=m&&f&&!!(a!=null&&a.length),Z=a!=null?a:"";let K;e[18]!==$||e[19]!==Z?(K={enabled:$,connectionInstanceId:Z},e[18]=$,e[19]=Z,e[20]=K):K=e[20];const{data:Y,isFetching:ae}=tT(K);let se;e:{if(!(Y!=null&&Y.sync_enabled_objects)){let be;e[21]===Symbol.for("react.memo_cache_sentinel")?(be=[],e[21]=be):be=e[21],se=be;break e}let Fe;e[22]!==Y.sync_enabled_objects?(Fe=Y.sync_enabled_objects.filter(H8e).map($8e),e[22]=Y.sync_enabled_objects,e[23]=Fe):Fe=e[23],se=Fe}const ee=se;let re;if(e[24]!==S||e[25]!==f||e[26]!==b||e[27]!==L||e[28]!==ee){const Fe=new Map;S.length===0&&((Ve=b.selectedRepos)==null||Ve.forEach(be=>{Fe.set(be,{repository_full_name:be,description:null,is_code_search_indexed:!0,synced:!1})})),f&&ee&&ee.forEach(be=>{var Oe;Fe.set(be.repository_full_name,{repository_full_name:be.repository_full_name,description:(Oe=be.description)!=null?Oe:null,is_code_search_indexed:!0,synced:!0})}),L&&L.pages.forEach(be=>{be.repos.forEach(Oe=>{var Ze,st,rt;const qe=Fe.get(Oe.repository_full_name);Fe.set(Oe.repository_full_name,{repository_full_name:Oe.repository_full_name,description:(Ze=Oe.description)!=null?Ze:null,is_code_search_indexed:(st=Oe.is_code_search_indexed)!=null?st:void 0,synced:(rt=qe==null?void 0:qe.synced)!=null?rt:!1})})}),S.length>0&&Fe.forEach(be=>{var Oe;!be.repository_full_name.toLowerCase().includes(S.toLowerCase())&&!((Oe=be.description)!=null&&Oe.toLowerCase().includes(S.toLowerCase()))&&Fe.delete(be.repository_full_name)}),re=Array.from(Fe.values()),e[24]=S,e[25]=f,e[26]=b,e[27]=L,e[28]=ee,e[29]=re}else re=e[29];const he=re;let fe;e[30]!==f||e[31]!==he?(fe=he.map(Fe=>{const be=!!Fe.is_code_search_indexed||Fe.synced&&f;return{name:Fe.repository_full_name,description:Fe.description,indexed:be,synced:Fe.synced}}),e[30]=f,e[31]=he,e[32]=fe):fe=e[32];const pe=fe;let le;e[33]!==C||e[34]!==c||e[35]!==p.selectedAllRepos||e[36]!==p.selectedRepos||e[37]!==g?(le=Fe=>{var st,rt,wt,at,kt;const be=Fe.name;if(!Fe.indexed&&!Fe.synced){k(Fe.name);return}if(be==="$all_accessible_repos"){const Nt=!p.selectedAllRepos;g({selectedRepos:[],selectedAllRepos:Nt}),Nt&&(c==null||c());return}const Oe=(st=p.selectedRepos)==null?void 0:st.includes(be),qe=(wt=(rt=p.selectedRepos)==null?void 0:rt.length)!=null?wt:0;if(C!==void 0&&C>1&&!Oe&&qe>=C)return;if(C!==void 0&&C===1&&!Oe){g({selectedRepos:[be],selectedAllRepos:!1});return}const Ze=Oe?((at=p.selectedRepos)!=null?at:[]).filter(Nt=>Nt!==be):[...(kt=p.selectedRepos)!=null?kt:[],be];g({selectedRepos:Ze,selectedAllRepos:!1})},e[33]=C,e[34]=c,e[35]=p.selectedAllRepos,e[36]=p.selectedRepos,e[37]=g,e[38]=le):le=e[38];const ve=le;let Te;e[39]!==p.selectedRepos?(Te=(ze=p.selectedRepos)!=null?ze:[],e[39]=p.selectedRepos,e[40]=Te):Te=e[40];let xe;e[41]!==p.selectedAllRepos?(xe=p.selectedAllRepos?["$all_accessible_repos"]:[],e[41]=p.selectedAllRepos,e[42]=xe):xe=e[42];let ce;e[43]!==Te||e[44]!==xe?(ce=[...Te,...xe],e[43]=Te,e[44]=xe,e[45]=ce):ce=e[45];const we=ce,ge=x.useRef(0);let Ae;e[46]!==m||e[47]!==q||e[48]!==W||e[49]!==H?(Ae=()=>{m&&W&&(H||ge.current<1&&q())},e[46]=m,e[47]=q,e[48]=W,e[49]=H,e[50]=Ae):Ae=e[50];const Ue=Ae;let Ie;e[51]===Symbol.for("react.memo_cache_sentinel")?(Ie=()=>{ge.current=0},e[51]=Ie):Ie=e[51];let Me;e[52]!==S?(Me=[S],e[52]=S,e[53]=Me):Me=e[53],x.useEffect(Ie,Me);let te,Q;e[54]!==H||e[55]!==V?(te=()=>{V?ge.current=ge.current+1:!H&&!V&&(ge.current=0)},Q=[H,V],e[54]=H,e[55]=V,e[56]=te,e[57]=Q):(te=e[56],Q=e[57]),x.useEffect(te,Q);const ie=m&&D||H||ae,_e=m&&(f||!!o);let ye;return e[58]!==d||e[59]!==pe||e[60]!==ve||e[61]!==_||e[62]!==w||e[63]!==ie||e[64]!==C||e[65]!==Ue||e[66]!==y||e[67]!==we||e[68]!==p||e[69]!==_e?(ye={isAvailable:_e,allowSelectAllRepos:d,dropdownItems:pe,handleSelectItem:ve,indexModalRepo:w,setIndexModalRepo:k,loading:ie,maxRepos:C,onEndScroll:Ue,searchTerm:y,setSearchTerm:v,selectedItemNames:we,selectedRepos:p,hasRepos:_},e[58]=d,e[59]=pe,e[60]=ve,e[61]=_,e[62]=w,e[63]=ie,e[64]=C,e[65]=Ue,e[66]=y,e[67]=we,e[68]=p,e[69]=_e,e[70]=ye):ye=e[70],ye}function $8e(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function H8e(t){return t.object_type==="repository"&&t.object_name}function G8e(t){"use forget";const e=F.c(23),{state:s,searchPlaceholder:n,notIndexedLabel:o,contentRef:a,subContentRef:i}=t;let l;if(e[0]!==o||e[1]!==s.dropdownItems){let m;e[3]!==o?(m=p=>U(T({},p),{description:!p.indexed&&!p.synced?o:p.description}),e[3]=o,e[4]=m):m=e[4],l=s.dropdownItems.map(m),e[0]=o,e[1]=s.dropdownItems,e[2]=l}else l=e[2];const c=l;let u;e[5]!==s?(u=s.indexModalRepo&&r.jsx(Tz,{repoName:s.indexModalRepo,onClose:()=>s.setIndexModalRepo(null)}),e[5]=s,e[6]=u):u=e[6];let d;e[7]!==a||e[8]!==c||e[9]!==n||e[10]!==s.allowSelectAllRepos||e[11]!==s.handleSelectItem||e[12]!==s.loading||e[13]!==s.maxRepos||e[14]!==s.onEndScroll||e[15]!==s.searchTerm||e[16]!==s.selectedItemNames||e[17]!==s.setSearchTerm||e[18]!==i?(d=r.jsx(Ez,{items:c,searchTerm:s.searchTerm,setSearchTerm:s.setSearchTerm,selectedItems:s.selectedItemNames,searchPlaceholder:n,handleSelectItem:s.handleSelectItem,showSelectAllRepos:s.allowSelectAllRepos,loading:s.loading,onEndScroll:s.onEndScroll,maxRepos:s.maxRepos,contentRef:a,subContentRef:i}),e[7]=a,e[8]=c,e[9]=n,e[10]=s.allowSelectAllRepos,e[11]=s.handleSelectItem,e[12]=s.loading,e[13]=s.maxRepos,e[14]=s.onEndScroll,e[15]=s.searchTerm,e[16]=s.selectedItemNames,e[17]=s.setSearchTerm,e[18]=i,e[19]=d):d=e[19];let f;return e[20]!==u||e[21]!==d?(f=r.jsxs(r.Fragment,{children:[u,d]}),e[20]=u,e[21]=d,e[22]=f):f=e[22],f}function V8e(t){"use forget";var L,D,H,V;const e=F.c(34),{clientThreadId:s,allowSelectAllRepos:n,linkId:o,syncConnectionId:a,githubSyncEnabled:i,contentRef:l,selectionScope:c}=t,u=n===void 0?!1:n,d=i===void 0?!1:i,f=ne(),m=x.useRef(null),{addSource:p}=Da(s);let g;e[0]!==p?(g=()=>{p(je.GITHUB_CONNECTOR)},e[0]=p,e[1]=g):g=e[1];let h;e[2]!==u||e[3]!==s||e[4]!==d||e[5]!==o||e[6]!==c||e[7]!==a||e[8]!==g?(h={clientThreadId:s,allowSelectAllRepos:u,linkId:o,syncConnectionId:a,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:g,selectionScope:c},e[2]=u,e[3]=s,e[4]=d,e[5]=o,e[6]=c,e[7]=a,e[8]=g,e[9]=h):h=e[9];const _=Mz(h),b=_.hasRepos,[y,v]=x.useState(!b);let S,C;e[10]!==b?(S=()=>{b||v(!0)},C=[b],e[10]=b,e[11]=S,e[12]=C):(S=e[11],C=e[12]),x.useEffect(S,C);let w;e:{if((D=(L=_.selectedRepos)==null?void 0:L.selectedRepos)!=null&&D.length&&((V=(H=_.selectedRepos)==null?void 0:H.selectedRepos)==null?void 0:V.length)>=1){const q=_.selectedRepos.selectedRepos;let W=q[0];if(W.length>B8e){const Z=(U8e-3)/2;W=W.slice(0,Math.floor(Z))+"..."+W.slice(Math.floor(-Z))}const $=q.length-1;w=$>0?"".concat(W," +").concat($):W;break e}w=void 0}const k=w;if(!_.isAvailable)return null;const E=!b||y;let M;e[13]!==b?(M=q=>{b&&v(q)},e[13]=b,e[14]=M):M=e[14];let N;e[15]!==f||e[16]!==k?(N=k!=null?k:f.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[15]=f,e[16]=k,e[17]=N):N=e[17];let A;e[18]!==N?(A=r.jsx(J.SubMenuTrigger,{className:"ps-4",icon:Vn,children:N}),e[18]=N,e[19]=A):A=e[19];let I;e[20]!==f?(I=f.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[20]=f,e[21]=I):I=e[21];let P;e[22]!==f?(P=f.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[22]=f,e[23]=P):P=e[23];let R;e[24]!==l||e[25]!==_||e[26]!==I||e[27]!==P?(R=r.jsx(J.Portal,{children:r.jsx(J.SubContent,{ref:m,children:r.jsx(G8e,{state:_,searchPlaceholder:I,notIndexedLabel:P,contentRef:l,subContentRef:m})})}),e[24]=l,e[25]=_,e[26]=I,e[27]=P,e[28]=R):R=e[28];let O;return e[29]!==A||e[30]!==R||e[31]!==E||e[32]!==M?(O=r.jsxs(J.Sub,{open:E,onOpenChange:M,children:[A,R]}),e[29]=A,e[30]=R,e[31]=E,e[32]=M,e[33]=O):O=e[33],O}const z8e=30,W8e=25,q8e=t=>{"use forget";const e=F.c(11),{enabled:s,debouncedSearchTerm:n,linkId:o,limit:a}=t,i=s===void 0?!0:s,l=a===void 0?20:a;let c;e[0]!==n||e[1]!==o?(c=["github-repos",n,o],e[0]=n,e[1]=o,e[2]=c):c=e[2];let u;e[3]!==n||e[4]!==l||e[5]!==o?(u=async f=>{const{pageParam:m}=f,p=m===void 0?void 0:m;return await de.safePost("/aip/connectors/github/search_repos",{requestBody:{query:n,limit:l,next_token:p,link_id:o}})},e[3]=n,e[4]=l,e[5]=o,e[6]=u):u=e[6];let d;return e[7]!==i||e[8]!==c||e[9]!==u?(d={queryKey:c,enabled:i,queryFn:u,getNextPageParam:J8e,initialPageParam:null,retry:1},e[7]=i,e[8]=c,e[9]=u,e[10]=d):d=e[10],ip(d)};function Nz(t){"use forget";var te,Q;const e=F.c(59),{clientThreadId:s,allowSelectAllRepos:n,linkId:o,syncConnectionId:a,githubSyncEnabled:i,enabled:l,onSelectAllRepos:c,selectionScope:u}=t,d=n===void 0?!1:n,f=i===void 0?!1:i,m=l===void 0?!0:l,{selectedRepos:p,setSelectedRepos:g}=nT(s,u);let h;e[0]!==p?(h=oT(p),e[0]=p,e[1]=h):h=e[1];const _=h,[b]=x.useState(p),[y,v]=x.useState(""),S=i$(y,300),{maxRepos:C}=sT(),[w,k]=x.useState(null),E=m&&!!o,M=o!=null?o:"";let N;e[2]!==S||e[3]!==E||e[4]!==M?(N={enabled:E,debouncedSearchTerm:S,linkId:M},e[2]=S,e[3]=E,e[4]=M,e[5]=N):N=e[5];const{data:A,isFetching:I,isFetchingNextPage:P,isError:R,hasNextPage:O,fetchNextPage:L}=q8e(N),D=m&&f&&!!(a!=null&&a.length),H=a!=null?a:"";let V;e[6]!==D||e[7]!==H?(V={enabled:D,connectionInstanceId:H},e[6]=D,e[7]=H,e[8]=V):V=e[8];const{data:q,isFetching:W}=tT(V);let $;e:{if(!(q!=null&&q.sync_enabled_objects)){let _e;e[9]===Symbol.for("react.memo_cache_sentinel")?(_e=[],e[9]=_e):_e=e[9],$=_e;break e}let ie;e[10]!==q.sync_enabled_objects?(ie=q.sync_enabled_objects.filter(Y8e).map(K8e),e[10]=q.sync_enabled_objects,e[11]=ie):ie=e[11],$=ie}const Z=$;let K;if(e[12]!==S||e[13]!==f||e[14]!==b||e[15]!==A||e[16]!==Z){const ie=new Map;S.length===0&&((te=b.selectedRepos)==null||te.forEach(_e=>{ie.set(_e,{repository_full_name:_e,description:null,is_code_search_indexed:!0,synced:!1})})),f&&Z&&Z.forEach(_e=>{var ye;ie.set(_e.repository_full_name,{repository_full_name:_e.repository_full_name,description:(ye=_e.description)!=null?ye:null,is_code_search_indexed:!0,synced:!0})}),A&&A.pages.forEach(_e=>{_e.repos.forEach(ye=>{var Ve,ze,Fe;const Re=ie.get(ye.repository_full_name);ie.set(ye.repository_full_name,{repository_full_name:ye.repository_full_name,description:(Ve=ye.description)!=null?Ve:null,is_code_search_indexed:(ze=ye.is_code_search_indexed)!=null?ze:void 0,synced:(Fe=Re==null?void 0:Re.synced)!=null?Fe:!1})})}),S.length>0&&ie.forEach(_e=>{var ye;!_e.repository_full_name.toLowerCase().includes(S.toLowerCase())&&!((ye=_e.description)!=null&&ye.toLowerCase().includes(S.toLowerCase()))&&ie.delete(_e.repository_full_name)}),K=Array.from(ie.values()),e[12]=S,e[13]=f,e[14]=b,e[15]=A,e[16]=Z,e[17]=K}else K=e[17];const Y=K;let ae;e[18]!==f||e[19]!==Y?(ae=Y.map(ie=>{const _e=!!ie.is_code_search_indexed||ie.synced&&f;return{name:ie.repository_full_name,description:ie.description,indexed:_e,synced:ie.synced}}),e[18]=f,e[19]=Y,e[20]=ae):ae=e[20];const se=ae;let ee;e[21]!==C||e[22]!==c||e[23]!==p.selectedAllRepos||e[24]!==p.selectedRepos||e[25]!==g?(ee=ie=>{var ze,Fe,be,Oe,qe;const _e=ie.name;if(!ie.indexed&&!ie.synced){k(ie.name);return}if(_e==="$all_accessible_repos"){const Ze=!p.selectedAllRepos;g({selectedRepos:[],selectedAllRepos:Ze}),Ze&&(c==null||c());return}const ye=(ze=p.selectedRepos)==null?void 0:ze.includes(_e),Re=(be=(Fe=p.selectedRepos)==null?void 0:Fe.length)!=null?be:0;if(C!==void 0&&C>1&&!ye&&Re>=C)return;if(C!==void 0&&C===1&&!ye){g({selectedRepos:[_e],selectedAllRepos:!1});return}const Ve=ye?((Oe=p.selectedRepos)!=null?Oe:[]).filter(Ze=>Ze!==_e):[...(qe=p.selectedRepos)!=null?qe:[],_e];g({selectedRepos:Ve,selectedAllRepos:!1})},e[21]=C,e[22]=c,e[23]=p.selectedAllRepos,e[24]=p.selectedRepos,e[25]=g,e[26]=ee):ee=e[26];const re=ee;let he;e[27]!==p.selectedRepos?(he=(Q=p.selectedRepos)!=null?Q:[],e[27]=p.selectedRepos,e[28]=he):he=e[28];let fe;e[29]!==p.selectedAllRepos?(fe=p.selectedAllRepos?["$all_accessible_repos"]:[],e[29]=p.selectedAllRepos,e[30]=fe):fe=e[30];let pe;e[31]!==he||e[32]!==fe?(pe=[...he,...fe],e[31]=he,e[32]=fe,e[33]=pe):pe=e[33];const le=pe,ve=x.useRef(0);let Te;e[34]!==m||e[35]!==L||e[36]!==O||e[37]!==P?(Te=()=>{!m||!O||P||ve.current<1&&L()},e[34]=m,e[35]=L,e[36]=O,e[37]=P,e[38]=Te):Te=e[38];const xe=Te;let ce;e[39]===Symbol.for("react.memo_cache_sentinel")?(ce=()=>{ve.current=0},e[39]=ce):ce=e[39];let we;e[40]!==S?(we=[S],e[40]=S,e[41]=we):we=e[41],x.useEffect(ce,we);let ge,Ae;e[42]!==P||e[43]!==R?(ge=()=>{R?ve.current=ve.current+1:!P&&!R&&(ve.current=0)},Ae=[P,R],e[42]=P,e[43]=R,e[44]=ge,e[45]=Ae):(ge=e[44],Ae=e[45]),x.useEffect(ge,Ae);const Ue=m&&I||P||W,Ie=m&&(f||!!o);let Me;return e[46]!==d||e[47]!==se||e[48]!==re||e[49]!==_||e[50]!==w||e[51]!==Ue||e[52]!==C||e[53]!==xe||e[54]!==y||e[55]!==le||e[56]!==p||e[57]!==Ie?(Me={isAvailable:Ie,allowSelectAllRepos:d,dropdownItems:se,handleSelectItem:re,indexModalRepo:w,setIndexModalRepo:k,loading:Ue,maxRepos:C,onEndScroll:xe,searchTerm:y,setSearchTerm:v,selectedItemNames:le,selectedRepos:p,hasRepos:_},e[46]=d,e[47]=se,e[48]=re,e[49]=_,e[50]=w,e[51]=Ue,e[52]=C,e[53]=xe,e[54]=y,e[55]=le,e[56]=p,e[57]=Ie,e[58]=Me):Me=e[58],Me}function K8e(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function Y8e(t){return t.object_type==="repository"&&t.object_name}function b_(t){"use forget";const e=F.c(23),{state:s,searchPlaceholder:n,notIndexedLabel:o,contentRef:a,subContentRef:i}=t;let l;if(e[0]!==o||e[1]!==s.dropdownItems){let m;e[3]!==o?(m=p=>U(T({},p),{description:!p.indexed&&!p.synced?o:p.description}),e[3]=o,e[4]=m):m=e[4],l=s.dropdownItems.map(m),e[0]=o,e[1]=s.dropdownItems,e[2]=l}else l=e[2];const c=l;let u;e[5]!==s?(u=s.indexModalRepo&&r.jsx(Tz,{repoName:s.indexModalRepo,onClose:()=>s.setIndexModalRepo(null)}),e[5]=s,e[6]=u):u=e[6];let d;e[7]!==a||e[8]!==c||e[9]!==n||e[10]!==s.allowSelectAllRepos||e[11]!==s.handleSelectItem||e[12]!==s.loading||e[13]!==s.maxRepos||e[14]!==s.onEndScroll||e[15]!==s.searchTerm||e[16]!==s.selectedItemNames||e[17]!==s.setSearchTerm||e[18]!==i?(d=r.jsx(Ez,{items:c,searchTerm:s.searchTerm,setSearchTerm:s.setSearchTerm,selectedItems:s.selectedItemNames,searchPlaceholder:n,handleSelectItem:s.handleSelectItem,showSelectAllRepos:s.allowSelectAllRepos,loading:s.loading,onEndScroll:s.onEndScroll,maxRepos:s.maxRepos,contentRef:a,subContentRef:i}),e[7]=a,e[8]=c,e[9]=n,e[10]=s.allowSelectAllRepos,e[11]=s.handleSelectItem,e[12]=s.loading,e[13]=s.maxRepos,e[14]=s.onEndScroll,e[15]=s.searchTerm,e[16]=s.selectedItemNames,e[17]=s.setSearchTerm,e[18]=i,e[19]=d):d=e[19];let f;return e[20]!==u||e[21]!==d?(f=r.jsxs(r.Fragment,{children:[u,d]}),e[20]=u,e[21]=d,e[22]=f):f=e[22],f}function Eut(t){"use forget";const e=F.c(16),{clientThreadId:s,allowSelectAllRepos:n,linkId:o,syncConnectionId:a,githubSyncEnabled:i,contentRef:l,selectionScope:c}=t,u=n===void 0?!1:n,d=i===void 0?!1:i;if(Ee(jt(),"4290909311")){let p;return e[0]!==u||e[1]!==s||e[2]!==l||e[3]!==d||e[4]!==o||e[5]!==c||e[6]!==a?(p=r.jsx(V8e,{clientThreadId:s,allowSelectAllRepos:u,linkId:o,syncConnectionId:a,githubSyncEnabled:d,contentRef:l,selectionScope:c}),e[0]=u,e[1]=s,e[2]=l,e[3]=d,e[4]=o,e[5]=c,e[6]=a,e[7]=p):p=e[7],p}let m;return e[8]!==u||e[9]!==s||e[10]!==l||e[11]!==d||e[12]!==o||e[13]!==c||e[14]!==a?(m=r.jsx(Q8e,{clientThreadId:s,allowSelectAllRepos:u,linkId:o,syncConnectionId:a,githubSyncEnabled:d,contentRef:l,selectionScope:c}),e[8]=u,e[9]=s,e[10]=l,e[11]=d,e[12]=o,e[13]=c,e[14]=a,e[15]=m):m=e[15],m}function Q8e(t){"use forget";var L,D,H,V;const e=F.c(34),{clientThreadId:s,allowSelectAllRepos:n,linkId:o,syncConnectionId:a,githubSyncEnabled:i,contentRef:l,selectionScope:c}=t,u=n===void 0?!1:n,d=i===void 0?!1:i,f=ne(),m=x.useRef(null),{addSource:p}=Da(s);let g;e[0]!==p?(g=()=>{p(je.GITHUB_CONNECTOR)},e[0]=p,e[1]=g):g=e[1];let h;e[2]!==u||e[3]!==s||e[4]!==d||e[5]!==o||e[6]!==c||e[7]!==a||e[8]!==g?(h={clientThreadId:s,allowSelectAllRepos:u,linkId:o,syncConnectionId:a,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:g,selectionScope:c},e[2]=u,e[3]=s,e[4]=d,e[5]=o,e[6]=c,e[7]=a,e[8]=g,e[9]=h):h=e[9];const _=Nz(h),b=_.hasRepos,[y,v]=x.useState(!b);let S,C;e[10]!==b?(S=()=>{b||v(!0)},C=[b],e[10]=b,e[11]=S,e[12]=C):(S=e[11],C=e[12]),x.useEffect(S,C);let w;e:{if((D=(L=_.selectedRepos)==null?void 0:L.selectedRepos)!=null&&D.length&&((V=(H=_.selectedRepos)==null?void 0:H.selectedRepos)==null?void 0:V.length)>=1){const q=_.selectedRepos.selectedRepos;let W=q[0];if(W.length>z8e){const Z=(W8e-3)/2;W=W.slice(0,Math.floor(Z))+"..."+W.slice(Math.floor(-Z))}const $=q.length-1;w=$>0?"".concat(W," +").concat($):W;break e}w=void 0}const k=w;if(!_.isAvailable)return null;const E=!b||y;let M;e[13]!==b?(M=q=>{b&&v(q)},e[13]=b,e[14]=M):M=e[14];let N;e[15]!==f||e[16]!==k?(N=k!=null?k:f.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[15]=f,e[16]=k,e[17]=N):N=e[17];let A;e[18]!==N?(A=r.jsx(J.SubMenuTrigger,{className:"ps-4",icon:Vn,children:N}),e[18]=N,e[19]=A):A=e[19];let I;e[20]!==f?(I=f.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[20]=f,e[21]=I):I=e[21];let P;e[22]!==f?(P=f.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[22]=f,e[23]=P):P=e[23];let R;e[24]!==l||e[25]!==_||e[26]!==I||e[27]!==P?(R=r.jsx(J.Portal,{children:r.jsx(J.SubContent,{ref:m,children:r.jsx(b_,{state:_,searchPlaceholder:I,notIndexedLabel:P,contentRef:l,subContentRef:m})})}),e[24]=l,e[25]=_,e[26]=I,e[27]=P,e[28]=R):R=e[28];let O;return e[29]!==A||e[30]!==R||e[31]!==E||e[32]!==M?(O=r.jsxs(J.Sub,{open:E,onOpenChange:M,children:[A,R]}),e[29]=A,e[30]=R,e[31]=E,e[32]=M,e[33]=O):O=e[33],O}function J8e(t){var e;return(e=t.next_token)!=null?e:void 0}const xd="connector:".concat(P9),Z8e=t=>{"use forget";const e=F.c(16),{clientThreadId:s,activeConnectorSystemHints:n,githubMenuState:o,githubLabels:a}=t,i=ne(),l=pw(),c=x.useRef(null),u=x.useRef(null);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(Na,{}),e[0]=d):d=e[0];let f;e[1]!==n.length||e[2]!==i?(f=i.formatMessage({id:"composer.apps.multiple",defaultMessage:"{count} apps"},{count:n.length}),e[1]=n.length,e[2]=i,e[3]=f):f=e[3];let m;e[4]!==n||e[5]!==s||e[6]!==a||e[7]!==o||e[8]!==i||e[9]!==l?(m=n.map(h=>{var b,y,v,S;return h.systemHint===xd&&(o!=null&&o.isAvailable)?r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{icon:r.jsx(g_,{hint:h,isNextToLabel:!0}),label:(b=h.actionLabel)!=null?b:h.name,trailing:r.jsx(J.RadioItemCheck,{}),highlightTrailing:r.jsx("button",{type:"button",className:"text-token-text-tertiary hover:bg-tertiary hover:text-token-text-secondary flex h-6 w-6 items-center justify-center rounded transition","aria-label":i.formatMessage({id:"wpLHSw",defaultMessage:"Remove {connector}"},{connector:(y=h.actionLabel)!=null?y:h.name}),onClick:C=>{C.preventDefault(),C.stopPropagation(),l(xd,{analyticsMetadata:{clientThreadId:s}})}}),onSelect:X8e,children:r.jsx(LS,{systemHint:h})}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{ref:u,children:r.jsx(b_,{state:o,searchPlaceholder:a.searchPlaceholder,notIndexedLabel:a.notIndexedLabel,contentRef:c,subContentRef:u})})})]},h.systemHint):r.jsx(J.RadioGroup,{value:(v=h.systemHint)!=null?v:void 0,onValueChange:C=>{l(C,{analyticsMetadata:{clientThreadId:s}})},children:r.jsx(J.RadioItem,{value:h.systemHint,color:"default",icon:r.jsx(g_,{hint:h,isNextToLabel:!0}),label:(S=h.actionLabel)!=null?S:h.name,trailing:r.jsx(J.RadioItemCheck,{}),onSelect:eLe,children:r.jsx(LS,{systemHint:h})},h.systemHint)},h.systemHint)}),e[4]=n,e[5]=s,e[6]=a,e[7]=o,e[8]=i,e[9]=l,e[10]=m):m=e[10];let p;e[11]!==m?(p=r.jsx("div",{className:"min-w-48",ref:c,children:m}),e[11]=m,e[12]=p):p=e[12];let g;return e[13]!==f||e[14]!==p?(g=r.jsx(y0,{icon:d,label:f,removable:!1,dropdownContent:p}),e[13]=f,e[14]=p,e[15]=g):g=e[15],g},Mut=t=>{"use forget";var Te,xe,ce,we;const e=F.c(60),{clientThreadId:s,activeSystemHint:n,activeSystemHintType:o,activeConnectorSystemHints:a,locked:i,onRemoveSystemHint:l,deepResearchModelVariant:c,onChangeDeepResearchModelVariant:u}=t,d=G(),f=ne(),m=pw(),{connectorLinks:p}=Ta(),g=xC();let h;e[0]!==d||e[1]!==g?(h=()=>{if(g)return o6(d).data},e[0]=d,e[1]=g,e[2]=h):h=e[2];const _=oe(h);let b;e[3]!==(_==null?void 0:_.connection_statuses)?(b=_==null?void 0:_.connection_statuses.find(tLe),e[3]=_==null?void 0:_.connection_statuses,e[4]=b):b=e[4];const y=b;let v;e[5]!==p?(v=(xe=(Te=p.get(P9))==null?void 0:Te[0])==null?void 0:xe.id,e[5]=p,e[6]=v):v=e[6];const S=v,C=y==null?void 0:y.user_connection_details.connection_instance_id,w=!!(g&&C);let k;e[7]!==a?(k=a.some(sLe),e[7]=a,e[8]=k):k=e[8];const M=k||(n==null?void 0:n.systemHint)===xd;let N;e[9]!==d?(N=Ee(d,"4290909311"),e[9]=d,e[10]=N):N=e[10];const A=N,I=w?C:void 0;let P;e[11]!==s||e[12]!==S||e[13]!==w||e[14]!==I?(P={clientThreadId:s,allowSelectAllRepos:!1,linkId:S,syncConnectionId:I,githubSyncEnabled:w,selectionScope:Kx},e[11]=s,e[12]=S,e[13]=w,e[14]=I,e[15]=P):P=e[15];const R=P,O=M&&A;let L;e[16]!==R||e[17]!==O?(L=U(T({},R),{enabled:O}),e[16]=R,e[17]=O,e[18]=L):L=e[18];const D=Mz(L),H=M&&!A;let V;e[19]!==R||e[20]!==H?(V=U(T({},R),{enabled:H}),e[19]=R,e[20]=H,e[21]=V):V=e[21];const q=Nz(V),W=A?D:q;let $;e[22]!==f?($=f.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[22]=f,e[23]=$):$=e[23];let Z;e[24]!==f?(Z=f.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[24]=f,e[25]=Z):Z=e[25];let K;e[26]!==$||e[27]!==Z?(K={searchPlaceholder:$,notIndexedLabel:Z},e[26]=$,e[27]=Z,e[28]=K):K=e[28];const Y=K,ae=x.useRef(null);let se,ee=n,re=l;const he=x.useRef(null);if(o&&gw(o))if((a==null?void 0:a.length)===0)ee=n;else if((a==null?void 0:a.length)===1){ee=a[0];let ge;if(e[29]!==a[0]||e[30]!==s||e[31]!==m?(ge=()=>m(a[0].systemHint,{analyticsMetadata:{clientThreadId:s}}),e[29]=a[0],e[30]=s,e[31]=m,e[32]=ge):ge=e[32],re=ge,ee.systemHint===xd&&W.isAvailable){let Ae;e[33]!==Y.notIndexedLabel||e[34]!==Y.searchPlaceholder||e[35]!==W?(Ae=r.jsx("div",{ref:ae,children:r.jsx(b_,{state:W,searchPlaceholder:Y.searchPlaceholder,notIndexedLabel:Y.notIndexedLabel,contentRef:ae})}),e[33]=Y.notIndexedLabel,e[34]=Y.searchPlaceholder,e[35]=W,e[36]=Ae):Ae=e[36],se=Ae}}else{let ge;return e[37]!==a||e[38]!==s||e[39]!==Y||e[40]!==W?(ge=r.jsx(Z8e,{activeConnectorSystemHints:a,clientThreadId:s,githubMenuState:W,githubLabels:Y}),e[37]=a,e[38]=s,e[39]=Y,e[40]=W,e[41]=ge):ge=e[41],ge}if(!se&&(ee==null?void 0:ee.systemHint)===xd&&W.isAvailable){let ge;e[42]!==Y.notIndexedLabel||e[43]!==Y.searchPlaceholder||e[44]!==W?(ge=r.jsx("div",{ref:he,children:r.jsx(b_,{state:W,searchPlaceholder:Y.searchPlaceholder,notIndexedLabel:Y.notIndexedLabel,contentRef:he})}),e[42]=Y.notIndexedLabel,e[43]=Y.searchPlaceholder,e[44]=W,e[45]=ge):ge=e[45],se=ge}if(!ee)return null;let fe=(we=(ce=ee.shortLabel)!=null?ce:ee.name)!=null?we:"",pe;e[52]!==ee?(pe=r.jsx(g_,{hint:ee,isNextToLabel:!0}),e[52]=ee,e[53]=pe):pe=e[53];const le=!i;let ve;return e[54]!==se||e[55]!==re||e[56]!==fe||e[57]!==pe||e[58]!==le?(ve=r.jsx(y0,{icon:pe,label:fe,removable:le,onRemove:re,dropdownContent:se}),e[54]=se,e[55]=re,e[56]=fe,e[57]=pe,e[58]=le,e[59]=ve):ve=e[59],ve};function X8e(t){t.preventDefault()}function eLe(t){t.preventDefault()}function tLe(t){return t.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(t.user_connection_details.activation_status)&&!!t.user_connection_details.connection_instance_id&&!!t.user_connection_details.backing_link_id}function sLe(t){return t.systemHint===xd}function Nut(t){"use forget";const e=F.c(60),{disabled:s,showLeadingDivider:n}=t,o=s===void 0?!1:s,a=n===void 0?!1:n,i=ne(),l=oe(lt.agentSessionMode$),c=l!=null?l:"signedInAccounts";let u;e[0]!==i?(u=i.formatMessage(Hn.signedInMenuLabel),e[0]=i,e[1]=u):u=e[1];const d=u;let f;e[2]!==i?(f=i.formatMessage(Hn.incognitoMenuLabel),e[2]=i,e[3]=f):f=e[3];const m=f,p=c==="signedInAccounts"?d:m;let g;e[4]!==c?(g=c==="signedInAccounts"?r.jsx(nG,{className:"icon"}):r.jsx(uH,{className:"icon"}),e[4]=c,e[5]=g):g=e[5];const h=g;let _;e[6]!==o||e[7]!==c?(_=K=>{o||K!==c&&sG(K)},e[6]=o,e[7]=c,e[8]=_):_=e[8];const b=_,y=a&&"group/trigger";let v;e[9]!==y?(v=z("composer-btn -ms-2 ps-3.5 pe-2 disabled:cursor-not-allowed disabled:opacity-60",y),e[9]=y,e[10]=v):v=e[10];const S=v;let C;e[11]!==a?(C=a?r.jsx("span",{className:"bg-token-border-medium -me-3 hidden h-6 w-px min-[420px]:inline-block"}):null,e[11]=a,e[12]=C):C=e[12];let w;e[13]!==h?(w=r.jsx("span",{className:"hidden items-center [[data-collapse-labels]_&]:me-1.5 [[data-collapse-labels]_&]:inline-flex",children:h}),e[13]=h,e[14]=w):w=e[14];let k;e[15]!==d?(k=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:d}),e[15]=d,e[16]=k):k=e[16];let E;e[17]!==m?(E=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:m}),e[17]=m,e[18]=E):E=e[18];let M;e[19]!==p?(M=r.jsx("span",{className:"col-start-1 row-start-1 whitespace-nowrap",children:p}),e[19]=p,e[20]=M):M=e[20];let N;e[21]!==k||e[22]!==E||e[23]!==M?(N=r.jsxs("span",{className:"relative grid [[data-collapse-labels]_&]:sr-only",children:[k,E,M]}),e[21]=k,e[22]=E,e[23]=M,e[24]=N):N=e[24];let A;e[25]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(zo,{className:"icon-sm ms-1"}),e[25]=A):A=e[25];let I;e[26]!==o||e[27]!==w||e[28]!==N||e[29]!==S?(I=r.jsxs("button",{type:"button",className:S,disabled:o,children:[w,N,A]}),e[26]=o,e[27]=w,e[28]=N,e[29]=S,e[30]=I):I=e[30];let P;e[31]!==o||e[32]!==I?(P=r.jsx(J.BasicTrigger,{asChild:!0,disabled:o,children:I}),e[31]=o,e[32]=I,e[33]=P):P=e[33];let R;e[34]!==o||e[35]!==b?(R=K=>{o||(K==="incognito"||K==="signedInAccounts")&&b(K)},e[34]=o,e[35]=b,e[36]=R):R=e[36];let O;e[37]!==i?(O=i.formatMessage(Hn.signedInMenuLabel),e[37]=i,e[38]=O):O=e[38];let L;e[39]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(j,T({},Hn.signedInDescription)),e[39]=L):L=e[39];let D;e[40]!==o||e[41]!==O?(D=r.jsx(J.RadioItem,{value:"signedInAccounts",disabled:o,label:O,secondary:L}),e[40]=o,e[41]=O,e[42]=D):D=e[42];let H;e[43]!==i?(H=i.formatMessage(Hn.incognitoMenuLabel),e[43]=i,e[44]=H):H=e[44];let V;e[45]===Symbol.for("react.memo_cache_sentinel")?(V=r.jsx(j,T({},Hn.incognitoDescription)),e[45]=V):V=e[45];let q;e[46]!==o||e[47]!==H?(q=r.jsx(J.RadioItem,{value:"incognito",disabled:o,label:H,secondary:V}),e[46]=o,e[47]=H,e[48]=q):q=e[48];let W;e[49]!==c||e[50]!==R||e[51]!==D||e[52]!==q?(W=r.jsx(J.Portal,{children:r.jsx(J.Content,{size:"auto",alignOffset:-7,children:r.jsxs(J.RadioGroup,{value:c,onValueChange:R,children:[D,q]})})}),e[49]=c,e[50]=R,e[51]=D,e[52]=q,e[53]=W):W=e[53];let $;e[54]!==P||e[55]!==W?($=r.jsxs(J.Root,{children:[P,W]}),e[54]=P,e[55]=W,e[56]=$):$=e[56];let Z;return e[57]!==$||e[58]!==C?(Z=r.jsxs(r.Fragment,{children:[C,$]}),e[57]=$,e[58]=C,e[59]=Z):Z=e[59],Z}function Aut(){return r.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{id:"mP0mrm",defaultMessage:"Beta"})})}const Iut=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:s}),e[0]=s,e[1]=n):n=e[1],n};function nLe(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"text-token-interactive-label-danger-secondary-default border-token-border-status-error items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{id:"w+mmPI",defaultMessage:"DEV"})}),t[0]=e):e=t[0],e}const oLe=()=>{"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{defaultMessage:"Custom",id:"allConnectors.custom"})}),t[0]=e):e=t[0],e},aLe=()=>{"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{defaultMessage:"Beta",id:"allConnectors.beta"})}),t[0]=e):e=t[0],e};function jut(t){"use forget";const e=F.c(3),{connector:s}=t;if(s.connector_type!=="MCP"||s.developer_type==="TRUSTED_PARTNER")return null;if(s.status==="ONLY_ME"){let n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(nLe,{}),e[0]=n):n=e[0],n}else if(s.supports_full_actions&&s.status==="ENABLED"){let n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(aLe,{}),e[1]=n):n=e[1],n}else{let n;return e[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(oLe,{}),e[2]=n):n=e[2],n}}const rLe=ue(Ce,"b6e0e5",20,20),dj=ue(Ce,"39dcc8",20,20),Put=({connection:t,onClose:e})=>{var l;const s=ne(),n=t.user_connection_details.activation_status,o=n==="activating"?[{icon:Ec,label:s.formatMessage(qa.initialTime)},{icon:dj,label:s.formatMessage(qa.response)},{icon:Pd,label:s.formatMessage(qa.future)}]:[{icon:rLe,label:s.formatMessage(qa.search)},{icon:Ec,label:s.formatMessage(qa.fullSyncTime)},{icon:dj,label:s.formatMessage(qa.response)},{icon:Pd,label:s.formatMessage(qa.future)}],a=n==="activating"?s.formatMessage(qa.titleSyncing):s.formatMessage(qa.titlePartialSyncing),i=t.connection_display_info.display_name;return r.jsx(iLe,{iconUrl:(l=t.connection_display_info.icon_url)!=null?l:void 0,iconAlt:t.connection_display_info.display_name,footerLogo:n==="activating"?r.jsx(W3,{sizeOverride:18,percentage:40,className:"text-token-text-tertiary"}):r.jsx(W3,{sizeOverride:18,percentage:60,className:"text-blue-400"}),bulletPoints:o,onClose:e,title:a,description:i})},iLe=({title:t,iconUrl:e,iconAlt:s,footerLogo:n,description:o,bulletPoints:a,onClose:i})=>{const l=ne();return r.jsxs(Ft,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:i,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"z-[10000] max-w-sm",children:[r.jsx("div",{className:"relative h-12",children:r.jsx(Es,{onClick:i,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"})}),r.jsxs("div",{className:"flex flex-col p-6 pb-5 text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e,alt:s,className:"h-12 w-12 rounded-full"}),r.jsx("div",{className:"bg-token-bg-primary absolute end-0 bottom-0 z-10 flex items-center justify-center rounded-full",children:n})]})}),r.jsx("div",{className:"text-md mt-6 font-medium",children:t}),r.jsx("div",{className:"text-token-text-tertiary text-sm",children:o}),r.jsx("div",{className:"mt-5 mb-9 flex flex-col justify-center gap-3",children:a.map(c=>r.jsxs("div",{className:"text-token-text-secondary flex items-start gap-2",children:[r.jsx(c.icon,{className:"icon"}),r.jsx("span",{className:"text-body-small-regular text-start",children:c.label})]},c.label))}),r.jsx("div",{children:r.jsx(ke,{color:"secondary",onClick:i,children:r.jsx("span",{className:"px-4",children:l.formatMessage(qa.gotIt)})})})]})]})},qa=Ne({titleSyncing:{id:"contextual-answers.status-modal.title-syncing",defaultMessage:"Sync in progress..."},titlePartialSyncing:{id:"contextual-answers.status-modal.title-partial-syncing",defaultMessage:"Last 30 days synced. Still syncing..."},search:{id:"contextual-answers.status-modal.search",defaultMessage:"The last 30 days are ready to search."},initialTime:{id:"contextual-answers.status-modal.initial-time",defaultMessage:"The initial sync may take 8 hours or longer, based on workspace size."},fullSyncTime:{id:"contextual-answers.status-modal.full-time",defaultMessage:"Full sync may take up to 16 hours or longer, based on workspace size."},response:{id:"contextual-answers.status-modal.response",defaultMessage:"Syncing enables instant ChatGPT responses about your data."},future:{id:"contextual-answers.status-modal.future",defaultMessage:"Future changes are available in real-time."},gotIt:{id:"contextual-answers.status-modal.got-it",defaultMessage:"Got it"}}),Rut=ue(Ce,"0ccbd9",20,20),Out="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M3.51105%2018.4269L4.39307%2019.9615C4.57634%2020.2846%204.8398%2020.5384%205.14908%2020.723L8.29914%2015.2307H1.99902C1.99902%2015.5884%202.09066%2015.9461%202.27394%2016.2692L3.51105%2018.4269Z'%20fill='%230066DA'%20/%3e%3cpath%20d='M11.999%208.76916L8.84897%203.27686C8.53969%203.46147%208.27623%203.71532%208.09295%204.03839L2.27394%2014.1922C2.09403%2014.5083%201.99926%2014.8663%201.99902%2015.2307H8.29914L11.999%208.76916Z'%20fill='%2300AC47'%20/%3e%3cpath%20d='M18.8492%2020.723C19.1585%2020.5384%2019.422%2020.2846%2019.6053%2019.9615L19.9718%2019.3269L21.7244%2016.2692C21.9077%2015.9461%2021.9993%2015.5884%2021.9993%2015.2307H15.6987L17.0394%2017.8846L18.8492%2020.723Z'%20fill='%23EA4335'%20/%3e%3cpath%20d='M11.9982%208.76923L15.1483%203.27692C14.839%203.09231%2014.4839%203%2014.1173%203H9.87907C9.51252%203%209.15742%203.10385%208.84814%203.27692L11.9982%208.76923Z'%20fill='%2300832D'%20/%3e%3cpath%20d='M15.6983%2015.2307H8.29849L5.14844%2020.723C5.45772%2020.9076%205.81281%2020.9999%206.17937%2020.9999H17.8174C18.1839%2020.9999%2018.539%2020.8961%2018.8483%2020.723L15.6983%2015.2307Z'%20fill='%232684FC'%20/%3e%3cpath%20d='M18.8146%209.11532L15.9051%204.03839C15.7218%203.71532%2015.4584%203.46147%2015.1491%203.27686L11.999%208.76916L15.6989%2015.2307H21.9876C21.9876%2014.873%2021.8959%2014.5153%2021.7127%2014.1922L18.8146%209.11532Z'%20fill='%23FFBA00'%20/%3e%3c/svg%3e",lLe=ue(Ce,"9254a2",20,20),cLe=ue(Ce,"7a0ff2",16,16),uLe=Pe(()=>me(()=>import("./uhs7hvx53wnv2crm.js"),__vite__mapDeps([242,1,3,4])).then(t=>t.AgentConnectorsSafetyModal));function dLe({ctx:t,connector:e,clientThreadId:s,activeSystemHintType:n,account:o}){mt(t,uLe,{connector:e,alreadyViewed:!0,onClose:()=>{},onConfirm:()=>{},onTurnOffConnectors:()=>{nt(s,a=>{var i,l;(i=a.selectedSources)!=null||(a.selectedSources=new Map),a.selectedSources.set(n,new Set(["web"])),(l=a.selectedMCPSources)!=null||(a.selectedMCPSources=new Map),a.selectedMCPSources.set(n,new Set),a.mentionedSources=new Set,l6({selectedSourcesMap:a.selectedSources,selectedMCPSourcesMap:a.selectedMCPSources,scope:{userId:o==null?void 0:o.authUserId,workspaceId:o==null?void 0:o.id}})})}})}function Lut(t){"use forget";var C;const e=F.c(23),{clientThreadId:s,activeSystemHintType:n,layoutMode:o}=t,a=ne(),i=G();let l;e[0]!==i?(l=ct(i),e[0]=i,e[1]=l):l=e[1];const c=l,u=Ct(We.hasSeenOdysseyConnectorsModal),{platformConnectors:d}=_p(),{selectedSources:f}=Da(s);if(u.isLoading||u.eligible)return null;let m,p;if(e[2]!==d||e[3]!==f){p=Symbol.for("react.early_return_sentinel");e:{const w=Array.from(f!=null?f:[]).find(fLe);if(!(w!=null)){p=null;break e}if(w){const E=(C=us[w])!=null?C:w;m=d.get(E)}if(!m&&d.size>0){let E;e[6]!==d?(E=Array.from(d.values()),e[6]=d,e[7]=E):E=e[7],m=E[0]}}e[2]=d,e[3]=f,e[4]=m,e[5]=p}else m=e[4],p=e[5];if(p!==Symbol.for("react.early_return_sentinel"))return p;if(!m)return null;let g;e[8]!==c||e[9]!==n||e[10]!==s||e[11]!==m||e[12]!==i?(g=()=>{dLe({ctx:i,connector:m,clientThreadId:s,activeSystemHintType:n,account:c})},e[8]=c,e[9]=n,e[10]=s,e[11]=m,e[12]=i,e[13]=g):g=e[13];const h=g;let _;e[14]!==a?(_=a.formatMessage(mLe.tooltip),e[14]=a,e[15]=_):_=e[15];const b=o==="center"?"bottom":"top";let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(cLe,{className:"icon-sm text-[#E25507] dark:text-[#FF9E6C]"}),e[16]=y):y=e[16];let v;e[17]!==h?(v=r.jsx("button",{type:"button",onClick:h,className:"-ms-1 flex h-9 items-center justify-center p-1.5",children:y}),e[17]=h,e[18]=v):v=e[18];let S;return e[19]!==_||e[20]!==b||e[21]!==v?(S=r.jsx(It,{label:_,side:b,delayDuration:300,children:v}),e[19]=_,e[20]=b,e[21]=v,e[22]=S):S=e[22],S}function fLe(t){return t!=="web"&&t!=="cloud"}const mLe=Ne({tooltip:{id:"IK9l6I",defaultMessage:"Learn more about privacy risks with connectors"}}),Dut=t=>{"use forget";var P,R;const e=F.c(18),{modelLabel:s,modelSlug:n,modelConfig:o,thinkingEffort:a,onChangeThinkingEffort:i,onRemoveModel:l,onCloseAutoFocus:c}=t,u=ne(),d=G(),f=rce(d,n,o!=null?o:void 0),m=ice(o!=null?o:void 0),p=f.map(O=>T({effort:O},F8(u,O,m))),g=p.length>0,h=(P=p.find(O=>{const{effort:L}=O;return L===a}))!=null?P:p[0],_=(R=h==null?void 0:h.effort)!=null?R:a;if(gn.useEffect(()=>{g&&_!==a&&i(_)},[g,_,a,i]),!g||!h)return null;const{filledIcon:b,fullLabel:y}=h,v=y0,S=_==="standard"?s:y,C=!0,w=gLe,k=J;let E;e[0]!==n||e[1]!==i?(E=O=>{const L=O;lce(n,L),i(L)},e[0]=n,e[1]=i,e[2]=E):E=e[2];let M;e[3]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(J.Label,{children:r.jsx(j,{id:"YhWabo",defaultMessage:"Thinking time"})}),e[3]=M):M=e[3];const N=p.map(hLe);let A;e[4]!==_||e[5]!==k.RadioGroup||e[6]!==E||e[7]!==M||e[8]!==N?(A=r.jsxs(k.RadioGroup,{value:_,onValueChange:E,children:[M,N]}),e[4]=_,e[5]=k.RadioGroup,e[6]=E,e[7]=M,e[8]=N,e[9]=A):A=e[9];let I;return e[10]!==v||e[11]!==b||e[12]!==c||e[13]!==l||e[14]!==S||e[15]!==w||e[16]!==A?(I=r.jsx(v,{icon:b,label:S,removable:C,onRemove:l,onCloseAutoFocus:c,onOpenChange:w,dropdownContent:A}),e[10]=v,e[11]=b,e[12]=c,e[13]=l,e[14]=S,e[15]=w,e[16]=A,e[17]=I):I=e[17],I};function pLe({config:t}){return r.jsx(It,{side:"right",labelTextAlign:"left",contentClassName:"cant-hover:hidden",labelClassName:"[text-wrap:pretty]",label:t.description,triggerAs:null,children:r.jsx(J.RadioItem,{value:t.effort,icon:t.progressIcon,label:t.shortLabel})})}function gLe(t){t&&B.logEventWithStatsig("ChatGPT Composer Thinking Effort Opened","chatgpt_composer_thinking_effort_opened")}function hLe(t){return r.jsx(pLe,{config:t},t.effort)}const Fut=({selectedHazelnutIds:t,conversationId:e})=>{const s=ne(),{data:n}=d0({scope:"personal"}),o=x.useMemo(()=>t.map(c=>n==null?void 0:n.hazelnuts.find(u=>u.id===c)).filter(c=>!!c),[n==null?void 0:n.hazelnuts,t]),a=o.length>0,i=x.useMemo(()=>o.length===1?o[0].name:s.formatMessage({defaultMessage:"{count} skills",id:"composer.hazelnuts.pillCount"},{count:o.length}),[s,o]),l=x.useCallback(()=>{nt(e,c=>{c.selectedHazelnuts=[]})},[e]);return{hasSelectedHazelnuts:a,hazelnutPillLabel:i,clearSelectedHazelnuts:l}},_Le=ue(Ce,"8072f6",20,20);function QE(t,{allowOverride:e=!0}={}){const s=performance.getEntriesByName(ar.SessionCreateStart).length>0;if(e||!s){_Oe(),performance.clearMarks(),ez().then(o=>{VV.set(o)}),performance.mark(ar.SessionCreateStart),$E.set(new Date),hOe.set(t);const n=YV();PX.set(n)}}function But(){performance.clearMarks(ar.SessionCreateStart),$E.set(void 0)}const xLe=({clientThreadId:t})=>{"use no forget";const e=G(),s=Et(e,t),n=Mp(),o=oe(()=>Cs(s).id),{setValue:a}=Rf(Qt.VoiceName),i=ut(),l=Bs(t),c=l!=null?l:t;return x.useEffect(()=>{const u=sessionStorage.getItem("selectedVoiceName");if(u&&i){a(u),QE(vg.LoggedOut);try{sessionStorage.removeItem("selectedVoiceName");const d={voice:u,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:RX(),gizmo_id:Se.getGizmoId(Tt(c)),requested_default_model:o!=null?o:void 0,skipCacheReason:"login-direct-to-voice-mode"};AE({type:"START",args:d})}catch(d){Ge.addError("Failed to start voice mode after voice picker: ".concat(d),{protocol:n})}}},[c,i,o,n,a]),null};function Az(){"use forget";const t=Ct(We.hasSeenAdvancedVoiceNuxFullPage);return!t.isLoading&&t.eligible}function Iz(){Jt.voiceAdvancedDisclosureShown.success(),R9({showVoiceNuxFullPage:!0})}const jz=t=>{"use forget";const e=F.c(11),{disabled:s}=t,n=s===void 0?!1:s,o=Az(),a=ne();let i;e[0]!==a?(i=a.formatMessage(yLe.startVoiceMode),e[0]=a,e[1]=i):i=e[1];const l=i,c=Mp();let u;e[2]!==c||e[3]!==o?(u=()=>{B.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:c,integratedMode:!0}),o?Iz():(QE(vg.Composer),AE({type:"START"}))},e[2]=c,e[3]=o,e[4]=u):u=e[4];let d,f;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={viewTransitionName:"var(--vt-composer-speech-button)"},f=r.jsx(oV,{className:"h-5 w-5"}),e[5]=d,e[6]=f):(d=e[5],f=e[6]);let m;return e[7]!==n||e[8]!==l||e[9]!==u?(m=r.jsx("div",{className:"relative",children:r.jsx("button",{type:"button",disabled:n,onClick:u,"aria-label":l,className:"composer-submit-button-color text-submit-btn-text flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:opacity-70 focus-visible:outline-black focus-visible:outline-none disabled:text-[#f4f4f4] disabled:opacity-30 dark:focus-visible:outline-white",style:d,children:f})}),e[7]=n,e[8]=l,e[9]=u,e[10]=m):m=e[10],m},yLe=Ne({startVoiceMode:{id:"integratedux.startVoiceMode",defaultMessage:"Start voice mode"}}),bLe=Pe(()=>me(()=>import("./nqz1hrry86ykmk4a.js"),__vite__mapDeps([243,1,244,245,3,4,246,44,247,248,249,250,251,21,22,23,24,25,26,252,253,254])).then(t=>t.SpeechActiveContainer)),vLe=t=>{"use forget";const e=F.c(9),{clientThreadId:s,isFocused:n,onComposerSubmit:o}=t,a=n===void 0?!1:n,i=xl(SLe);let l;e[0]!==s||e[1]!==a||e[2]!==o?(l=r.jsx(bLe,{clientThreadId:s,isFocused:a,onComposerSubmit:o}),e[0]=s,e[1]=a,e[2]=o,e[3]=l):l=e[3];let c;e[4]!==i?(c=!i&&r.jsx(jz,{}),e[4]=i,e[5]=c):c=e[5];let u;return e[6]!==l||e[7]!==c?(u=r.jsxs(r.Fragment,{children:[l,c]}),e[6]=l,e[7]=c,e[8]=u):u=e[8],u};function SLe(t){return t.isVoiceModeActive}const CLe=t=>{"use forget";const e=F.c(10),{clientThreadId:s,isFocused:n,onComposerSubmit:o,isWebRTCSupported:a}=t;if(!a){let d;return e[0]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(jz,{disabled:!0}),e[0]=d):d=e[0],d}const i=wLe;let l;e[1]!==s?(l=r.jsx(xLe,{clientThreadId:s}),e[1]=s,e[2]=l):l=e[2];let c;e[3]!==s||e[4]!==n||e[5]!==o?(c=r.jsx(vLe,{clientThreadId:s,isFocused:n,onComposerSubmit:o}),e[3]=s,e[4]=n,e[5]=o,e[6]=c):c=e[6];let u;return e[7]!==l||e[8]!==c?(u=r.jsx("div",{onMouseDown:i,onClick:i,children:r.jsxs(NOe,{children:[l,c]})}),e[7]=l,e[8]=c,e[9]=u):u=e[9],u};function wLe(t){t.preventDefault(),t.stopPropagation()}const kLe=Pe(()=>me(()=>import("./fq92frbbgarrlrqs.js"),__vite__mapDeps([255,1,249,246,3,4,244,245,44,247,248,250,251,21,22,23,24,25,26,256,254])).then(t=>t.VoiceModeLayout)),TLe=Pe(()=>me(()=>import("./pbfouyxndczy7od4.js"),__vite__mapDeps([257,1,3,4,258])).then(t=>t.VoiceConversationRating));function ELe(){const t=G(),e=Mp();return Ee(t,"482976135")&&e==="transceiver"}function JE(){const t=ELe();return!yE()||mf()?!1:O9()?t:!0}function Uut(t){return JE()?r.jsx(kLe,T({},t)):null}function MLe(t){return JE()?r.jsx(TLe,T({},t)):null}const NLe="/cdn/assets/pcm-player-processor-Bnki682T.js";var Za,Xa,rp,Sd,ha,ql,Pz;class fj extends OX.EventEmitter{constructor({sampleRate:s=24e3,channels:n=1}={}){super();Oo(this,ha);Oo(this,Za);Oo(this,Xa,null);Oo(this,rp);Oo(this,Sd);wi(this,Za,new AudioContext({sampleRate:s,latencyHint:"playback"})),wi(this,rp,n),wi(this,Xa,null),wi(this,Sd,!1)}async preload(){return await ms(this,ha,ql).call(this),this}async stream(s){const n=await ms(this,ha,ql).call(this);let o=0,a=await s.read();for(;!a.done;)this.emit("ready"),n.port.postMessage({type:"push",payload:{chunk:a.value}}),o+=a.value.byteLength,a=await s.read();wi(this,Sd,!0),o===0&&this.emit("error")}async play(){Us(this,Za).state==="suspended"&&await Us(this,Za).resume(),(await ms(this,ha,ql).call(this)).port.postMessage({type:"play"})}async pause(){(await ms(this,ha,ql).call(this)).port.postMessage({type:"pause"})}async seek(s){(await ms(this,ha,ql).call(this)).port.postMessage({type:"seek",payload:{seconds:s}})}async reset(){(await ms(this,ha,ql).call(this)).port.postMessage({type:"reset"})}destroy(){this.removeAllListeners(),Us(this,Xa)&&(Us(this,Xa).disconnect(),wi(this,Xa,null)),Us(this,Za).close()}}Za=new WeakMap,Xa=new WeakMap,rp=new WeakMap,Sd=new WeakMap,ha=new WeakSet,ql=async function(){if(Us(this,Xa))return Us(this,Xa);await Us(this,Za).audioWorklet.addModule(NLe);const s=new AudioWorkletNode(Us(this,Za),"pcm-player");return s.connect(Us(this,Za).destination),s.port.postMessage({type:"init",payload:{channels:Us(this,rp)}}),s.port.onmessage=ms(this,ha,Pz).bind(this),wi(this,Xa,s),s},Pz=function(s){switch(s.data.type){case"timeupdate":{this.emit("timeupdate",{seconds:s.data.payload.seconds,totalSeconds:s.data.payload.totalSeconds}),Us(this,Sd)&&s.data.payload.seconds>=s.data.payload.totalSeconds&&this.emit("ended");break}}};const v_=Symbol("both-are-bad"),ALe=({serverThreadId:t})=>TC(Vs((e,s)=>{const n=(o,a)=>e(i=>{const l=i.paragens.find(c=>c.id===o);l&&a(l)});return{serverThreadId:t,paragens:[],playingId:null,selectedId:null,shouldShowAudioParagenPrompt:!1,shouldShowThankYouTooltip:!1,actions:{createAudioParagen:async o=>{var v,S,C;const{serverThreadId:a}=s();if(!a){const w=new Error("thread id is not set");throw Ge.addError(w),w}const i=Ds(),l=Ds();e(w=>{w.paragens[0]={id:i},w.paragens[1]={id:l}});const{forceParagen:c,forceParagenModel:u}=of(),[d,f,m]=await Promise.all([de.safePost("/generate_audio_paragen",{requestBody:T({conversation_id:a,message_id:o,paragen_ids:[i,l]},c?{force_paragen:!0,force_paragen_model_slug:u.value}:{}),skipJsonTransform:!0}),new fj().preload(),new fj().preload()]),p=(v=d.body)==null?void 0:v.getReader();if(!d.ok||!p){for(const w of[i,l])n(w,k=>{k.error=new Error("Failed to create audio paragen: ".concat(d.statusText))});return}const g={},h=w=>new ReadableStream({start(k){g[w]=k}}),_=(w,k)=>{w.on("ready",()=>n(k,E=>{E.player=w})).on("error",()=>n(k,E=>{E.error=!0}))};_(f,i),_(m,l),f.stream(h(i).getReader()),m.stream(h(l).getReader());const b=new TextDecoder;let y="";for(;;){const{value:w,done:k}=await p.read();if(k)break;y+=b.decode(w,{stream:!0});let E=y.indexOf("\n");for(;E!==-1;){const M=y.slice(0,E).trim();if(y=y.slice(E+1),M)try{const N=JSON.parse(M),A=N.paragen_id;if(N.chunk){const I=Uint8Array.from(atob(N.chunk),P=>P.charCodeAt(0));(S=g[A])==null||S.enqueue(I)}N.done&&((C=g[A])==null||C.close())}catch(N){}E=y.indexOf("\n")}}},playParagen:o=>{B.logEventWithStatsig("Audio Paragen: Play","chatgpt_audio_paragen_play",{paragen_id:o}),e(a=>{a.playingId=o})},pauseParagen:(o,a=!1)=>{a&&B.logEventWithStatsig("Audio Paragen: Pause","chatgpt_audio_paragen_pause",{paragen_id:o}),e(i=>{i.playingId===o&&(i.playingId=null)})},selectParagen:o=>{B.logEventWithStatsig("Audio Paragen: Select Option","chatgpt_audio_paragen_select_option",{paragen_id:o}),e(a=>{a.playingId=null,a.selectedId=o})},submitParagenResults:async(o,a,i)=>{const{paragens:l,selectedId:c,serverThreadId:u}=s();if(!u){const f=new Error("thread id is not set");throw Ge.addError(f),f}B.logEventWithStatsig("Audio Paragen: Submit Results","chatgpt_audio_paragen_submit_results");const d=await de.safePost("/paragen_audio_submission",{requestBody:{conversation_id:u,user_prompt_message_id:o,displayed_paragen_ids:l.map(f=>f.id),selected_paragen_id:c===v_?null:c,reviews:a,stream_type:"stream",freeform_feedback:i},skipJsonTransform:!0});if(!d.ok){const f=new Error("Failed to create audio paragen: ".concat(d.statusText));throw Ge.addError(f,{conversationId:u,messageId:o}),f}},setShouldShowThankYouTooltip:o=>{e(a=>{a.shouldShowThankYouTooltip=o})},resetStore:()=>{e(o=>{var a;for(const i of o.paragens)(a=i.player)==null||a.destroy();o.paragens=[],o.playingId=null,o.selectedId=null})}}}}),fi),b0=x.createContext(null);b0.displayName="AudioParagenStore";function ILe(){const t=x.useContext(b0);if(!t)throw new Error("useAudioParagenState must be used within a AudioParagenStoreProvider");return t}function jLe(t,e){const s=x.useContext(b0);if(s)return s(t,e)}function zd(t,e){const s=ILe(),n=LX(s,t,e);if(n===s.getState())throw new Error("Selector cannot return the entire state. Please select a specific part of the state.");return n}function v0(){return zd(t=>t.actions)}function $ut(t,e){const{createAudioParagen:s,resetStore:n}=v0(),{paragens:o}=zd(a=>({paragens:a.paragens}));return x.useEffect(()=>{if(!(!e||!t))return s(t),()=>{n()}},[s,e,t,n]),o.every(a=>a.player&&!a.error)}function Hut({children:t,serverThreadId:e}){const s=x.useRef(null);return s.current==null&&(s.current=ALe({serverThreadId:e})),x.useEffect(()=>{const n=s.current;n&&!n.getState().serverThreadId&&e&&n.setState(o=>{o.serverThreadId=e})},[e]),r.jsx(b0.Provider,{value:s.current,children:t})}const Rz=new Set;function Gut(t){return t?Rz.has(t):!1}function PLe(t){Rz.add(t)}const RLe=1e3,OLe=t=>{"use forget";const e=F.c(11),{children:s}=t,n=x.useRef(!0),o=x.useRef(void 0),a=G();let i;e[0]!==a?(i=Ee(a,"2921139901"),e[0]=a,e[1]=i):i=e[1];const l=i,c=xl(LLe),u=zc(),d=c||u;let f;e[2]!==l||e[3]!==d?(f=()=>{!d&&n.current&&l&&(n.current=!1,IS.prewarmRealtimeVoice())},e[2]=l,e[3]=d,e[4]=f):f=e[4];const m=f;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{o.current||(o.current=window.setTimeout(()=>{n.current=!0,o.current=void 0},RLe))},e[5]=p):p=e[5];const g=p;let h,_;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{window.clearTimeout(o.current)},_=[],e[6]=h,e[7]=_):(h=e[6],_=e[7]),x.useEffect(h,_);let b;return e[8]!==s||e[9]!==m?(b=r.jsx("div",{onMouseEnter:m,onMouseLeave:g,children:s}),e[8]=s,e[9]=m,e[10]=b):b=e[10],b};function LLe(t){return t.isVoiceModeActive}const DLe=Pe(()=>me(()=>import("./d8we44sbia10np3x.js").then(t=>t.a),__vite__mapDeps([259,1,3,4,260,256,245,246,254])).then(t=>t.AdvancedVoiceWebNuxFullPage)),FLe=Pe(()=>me(()=>import("./lr21obht9kc0zkh3.js"),__vite__mapDeps([261,1,3,4,250,259,260,256,245,246,254])).then(t=>t.VoiceModals)),mj=t=>{"use forget";const e=F.c(25),{disableTooltip:s,children:n,isWebRTCSupported:o,clientThreadId:a,type:i}=t,l=s===void 0?!1:s,c=jLe(ULe),u=ne(),d=Mp(),f=Sc($Le);if(c){let v;e[0]!==n?(v=r.jsx(BLe,{children:n}),e[0]=n,e[1]=v):v=e[1];let S;return e[2]!==o||e[3]!==v?(S=r.jsx(pj,{isWebRTCSupported:o,children:v}),e[2]=o,e[3]=v,e[4]=S):S=e[4],S}const m=l?!1:void 0;let p;e[5]!==u||e[6]!==o?(p=o?u.formatMessage(S_.defaultTooltipLabel):u.formatMessage(S_.webRTCNotSupportedLabel),e[5]=u,e[6]=o,e[7]=p):p=e[7];let g;e[8]!==d?(g=v=>{v&&(B.logEvent("Composer Speech Button Hovered",{protocol:d}),Jt.composerSpeechButton.hover())},e[8]=d,e[9]=g):g=e[9];let h;e[10]!==n||e[11]!==m||e[12]!==p||e[13]!==g?(h=r.jsx(It,{open:m,label:p,side:"bottom",onOpenChange:g,children:n}),e[10]=n,e[11]=m,e[12]=p,e[13]=g,e[14]=h):h=e[14];let _;e[15]!==o||e[16]!==h?(_=r.jsx(pj,{isWebRTCSupported:o,children:h}),e[15]=o,e[16]=h,e[17]=_):_=e[17];let b;e[18]!==a||e[19]!==f||e[20]!==i?(b=i==="integrated"&&f?r.jsx(DLe,{conversationId:a}):r.jsx(FLe,{clientThreadId:a}),e[18]=a,e[19]=f,e[20]=i,e[21]=b):b=e[21];let y;return e[22]!==_||e[23]!==b?(y=r.jsxs(r.Fragment,{children:[_,b]}),e[22]=_,e[23]=b,e[24]=y):y=e[24],y};function pj(t){"use forget";const e=F.c(3),{children:s,isWebRTCSupported:n}=t;let o;return e[0]!==s||e[1]!==n?(o=n?r.jsx(OLe,{children:s}):s,e[0]=s,e[1]=n,e[2]=o):o=e[2],o}function BLe(t){"use forget";const e=F.c(7),{children:s}=t,{setShouldShowThankYouTooltip:n}=v0();let o,a;e[0]!==n?(o=()=>{const u=setTimeout(()=>{n(!1)},5e3);return()=>clearTimeout(u)},a=[n],e[0]=n,e[1]=o,e[2]=a):(o=e[1],a=e[2]),x.useEffect(o,a);let i,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(j,T({},S_.audioParagenThankYouLabelHeader)),l=r.jsx(j,T({},S_.audioParagenThankYouLabelSubheader)),e[3]=i,e[4]=l):(i=e[3],l=e[4]);let c;return e[5]!==s?(c=r.jsx(It,{open:!0,label:i,secondaryLabel:l,side:"top",withArrow:!0,children:s}),e[5]=s,e[6]=c):c=e[6],c}const S_=Ne({audioParagenThankYouLabelHeader:{id:"ComposerSpeechButton.audioParagenThankYouLabelHeader",defaultMessage:"Thank you for your feedback!"},audioParagenThankYouLabelSubheader:{id:"ComposerSpeechButton.audioParagenThankYouLabelSubheader",defaultMessage:"Continue chatting with voice mode"},defaultTooltipLabel:{id:"ComposerSpeechButton.defaultTooltipLabel",defaultMessage:"Use voice mode"},webRTCNotSupportedLabel:{id:"ComposerSpeechButton.webRTCNotSupportedLabel",defaultMessage:"Voice mode unsupported"}});function ULe(t){return t.shouldShowThankYouTooltip}function $Le(t){return t.showVoiceNuxFullPage}function HLe(t,e,s){return z("relative flex h-9 items-center justify-center rounded-full",t?"min-w-8 p-2":e?"w-7":"w-9",e&&"h-7!",s?"btn-primary border border-transparent disabled:cursor-not-allowed disabled:opacity-50":"composer-secondary-button-color hover:opacity-80 disabled:text-gray-50 disabled:opacity-30")}function GLe(){"use forget";const t=F.c(4),e=ne();let s;t[0]!==e?(s=e.formatMessage({id:"composerSpeechUpsell.voiceLabel",defaultMessage:"Voice"}),t[0]=e,t[1]=s):s=t[1];let n;return t[2]!==s?(n=r.jsx("span",{className:"ps-1 pe-1 text-[13px] font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:s}),t[2]=s,t[3]=n):n=t[3],n}const VLe=()=>{"use forget";const t=F.c(7),e=G(),s=Sg();let n;t[0]!==e?(n=ut(),t[0]=e,t[1]=n):n=t[1];const o=!n,a=Az(),i=Mp();let l;return t[2]!==o||t[3]!==i||t[4]!==a||t[5]!==s?(l=()=>{if(B.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:i}),o){Jt.voiceSelectionShown.click(o?{isUnauthenticated:!0,eventSource:"composerSpeechButton"}:{}),R9({showVoicePicker:!0});return}if(a)return Iz();QE(vg.Composer),s.setState(WLe)},t[2]=o,t[3]=i,t[4]=a,t[5]=s,t[6]=l):l=t[6],l},zLe=t=>{"use forget";const e=F.c(22),{isSmall:s,isWebRTCSupported:n}=t,o=s===void 0?!1:s,a=G(),i=ne();let l;e[0]!==i?(l=i.formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),e[0]=i,e[1]=l):l=e[1];const c=l,u=xl(qLe);let d;e[2]!==a?(d=()=>Wc(a),e[2]=a,e[3]=d):d=e[3];const{loggedOutVoiceLabel:f,voiceButtonUsesPrimaryStyle:m}=oe(d),{getUpsellLabelType:p}=fz();let g;e[4]!==a||e[5]!==p||e[6]!==f?(g=ut()?p()==="all":f,e[4]=a,e[5]=p,e[6]=f,e[7]=g):g=e[7];const h=g,_=VLe(),b=!n||u;let y;e[8]!==o||e[9]!==h||e[10]!==m?(y=HLe(h,o,m),e[8]=o,e[9]=h,e[10]=m,e[11]=y):y=e[11];let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v={viewTransitionName:"var(--vt-composer-speech-button)"},e[12]=v):v=e[12];let S;e[13]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(w$,{className:"icon"})}),e[13]=S):S=e[13];let C;e[14]!==h?(C=h&&r.jsx(GLe,{}),e[14]=h,e[15]=C):C=e[15];let w;return e[16]!==_||e[17]!==c||e[18]!==b||e[19]!==y||e[20]!==C?(w=r.jsxs("button",{"data-testid":"composer-speech-button",onClick:_,"aria-label":c,disabled:b,className:y,style:v,children:[S,C]}),e[16]=_,e[17]=c,e[18]=b,e[19]=y,e[20]=C,e[21]=w):w=e[21],w};function WLe(t){t.isVoiceModeActive=!0}function qLe(t){return t.isVoiceModeActive}function KLe(){return typeof RTCPeerConnection<"u"&&typeof RTCPeerConnection.generateCertificate=="function"}function YLe(t){"use forget";var L;const e=F.c(4),s=G(),n=!ut(),a=kw(QLe).length>0;let i;e[0]!==t.composerController?(i=()=>!Cd(t.composerController),e[0]=t.composerController,e[1]=i):i=e[1];const l=oe(i),c=!a&&!l,{browseMode:u}=Sc(),d=jc(),f=mf()&&!d,m=oo(),p=Ee(s,"2360528850"),g=m&&!p,h=zc(),_=t.disableAdvancedVoiceMode?!1:h,b=Ee(s,"3728856343"),y=ct(s),v=ja(),S=xn(s),C=FX(s),w=sn(Ss);let k;e[2]!==s?(k=()=>Wc(s),e[2]=s,e[3]=k):k=e[3];const{isSingleLine:E}=oe(k),{getShowVoiceUpsell:M}=fz(),N=Bs(t.clientThreadId),A=Tw(N),I=ZS(),P=Ww(I,"images-app");if(_)return"speech";if(t.inputState==="disabled"&&t.disableReason!=="pimBlock")return"disabled";const R=y!=null&&(!S||C)&&((L=v==null?void 0:v.includes(kn.AllowVoiceUse))!=null?L:!1);return(!n&&R||n&&(b||M()))&&c&&(t.state==="disabled"||t.state==="streaming"&&A.length>0)&&t.clientThreadId&&u!=="gizmo-editor"&&!f&&!g&&!P?"speech":w&&E&&c&&t.state!=="streaming"?C&&!g&&t.clientThreadId?"speech":"disabled":"submit"}function QLe(t){return t.files}function Vut(t){"use forget";const e=F.c(24),s=G(),n=DX(s),o=zc(),a=Qe(t.clientThreadId,JLe),i=YLe(t),l=JE();let c;e[0]!==t.composerController?(c=()=>cx(t.composerController),e[0]=t.composerController,e[1]=c):c=e[1];const u=oe(c),d=_w()?KLe():!0,f=t.disableAdvancedVoiceMode?!1:n,m=t.disableAdvancedVoiceMode?!1:o;if(i==="disabled"&&!a)return null;const p=t.state==="disabled",g=t.state==="streaming";let h;e[2]!==t.clientThreadId||e[3]!==t.composerController||e[4]!==t.disableReason||e[5]!==t.excessFileCount||e[6]!==t.forceStopButton||e[7]!==t.isSmall||e[8]!==t.onSubmit||e[9]!==t.remainingFileUploads||e[10]!==t.useStartButtonText||e[11]!==a||e[12]!==p||e[13]!==g?(h=r.jsx(ZLe,{isSmall:t.isSmall,isDisabled:p,isStreaming:g,showSpinner:a,onSubmit:t.onSubmit,disableReason:t.disableReason,useStartButtonText:t.useStartButtonText,composerController:t.composerController,clientThreadId:t.clientThreadId,forceStopButton:t.forceStopButton,excessFileCount:t.excessFileCount,remainingFileUploads:t.remainingFileUploads}),e[2]=t.clientThreadId,e[3]=t.composerController,e[4]=t.disableReason,e[5]=t.excessFileCount,e[6]=t.forceStopButton,e[7]=t.isSmall,e[8]=t.onSubmit,e[9]=t.remainingFileUploads,e[10]=t.useStartButtonText,e[11]=a,e[12]=p,e[13]=g,e[14]=h):h=e[14];const _=h,b=i==="speech"&&l;if(t.clientThreadId&&(m||b&&!0)){const v=!!(m||t.disableTooltip);let S;return e[15]!==f||e[16]!==v||e[17]!==u||e[18]!==d||e[19]!==t.clientThreadId||e[20]!==t.disableTooltip||e[21]!==t.isSmall||e[22]!==t.onSubmit?(S=f?r.jsx(mj,{disableTooltip:v,isWebRTCSupported:d,clientThreadId:t.clientThreadId,type:"integrated",children:r.jsx(CLe,{clientThreadId:t.clientThreadId,isFocused:u,onComposerSubmit:t.onSubmit,isWebRTCSupported:d})}):r.jsx("div",{className:t.isSmall?"min-w-7":"min-w-9","data-testid":"composer-speech-button-container",children:r.jsx(mj,{disableTooltip:t.disableTooltip,isWebRTCSupported:d,clientThreadId:t.clientThreadId,type:"separate",children:r.jsx(zLe,{isSmall:t.isSmall,isWebRTCSupported:d})})}),e[15]=f,e[16]=v,e[17]=u,e[18]=d,e[19]=t.clientThreadId,e[20]=t.disableTooltip,e[21]=t.isSmall,e[22]=t.onSubmit,e[23]=S):S=e[23],S}return _}function JLe(t){var e,s,n,o,a,i;return!!(t!=null&&t.interruptionInProgress)&&(!!((s=(e=Se.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&s.n7jupd_message)||!!((i=(a=(o=(n=Se.getCurrentNode(t))==null?void 0:n.message.metadata)==null?void 0:o.invoked_resource)==null?void 0:a.resource_uri)!=null&&i.includes("connector_openai_shopping")))}function ZLe(t){"use forget";var Z;const e=F.c(31),{onSubmit:s,isStreaming:n,isDisabled:o,showSpinner:a,disableReason:i,useStartButtonText:l,composerController:c,isSmall:u,clientThreadId:d,forceStopButton:f,excessFileCount:m,remainingFileUploads:p}=t,g=G();let h;e[0]!==c?(h=()=>Cd(c),e[0]=c,e[1]=h):h=e[1];const _=oe(h),b=che(d),y=Bs(d),S=Tw(y).length===0&&n&&(!b||_||f);let C;e[2]!==g?(C=()=>Wc(g),e[2]=g,e[3]=C):C=e[3];const k=oe(C).sendButtonUsesPaperplaneIcon?_Le:v$,E=a?Wn:S?VT:k,M=ne(),N=E$(),A=o||a;let I;e[4]!==M||e[5]!==S?(I=S?M.formatMessage(Wa.stopStreamingLabel):M.formatMessage(Wa.sendPromptLabel),e[4]=M,e[5]=S,e[6]=I):I=e[6];const P=S?"stop-button":"send-button",R=S?"composer-secondary-button-color":"composer-submit-button-color",O=u?"h-7":"h-9",L=l&&!S?"w-fit px-3":u?"w-7":"w-9";let D;e[7]!==R||e[8]!==O||e[9]!==L?(D=z("composer-submit-btn",R,O,L),e[7]=R,e[8]=O,e[9]=L,e[10]=D):D=e[10];let H;e[11]!==E||e[12]!==S||e[13]!==l?(H=l&&!S?r.jsx("p",{className:"text-md font-medium",children:r.jsx(j,{id:"q2Rxh8",defaultMessage:"Start"})}):r.jsx(E,{className:"icon"}),e[11]=E,e[12]=S,e[13]=l,e[14]=H):H=e[14];let V;e[15]!==s||e[16]!==H||e[17]!==A||e[18]!==I||e[19]!==P||e[20]!==D?(V=r.jsx("button",{onClick:s,disabled:A,id:"composer-submit-button","aria-label":I,"data-testid":P,className:D,children:H}),e[15]=s,e[16]=H,e[17]=A,e[18]=I,e[19]=P,e[20]=D,e[21]=V):V=e[21];const q=V;let W;if(e[22]!==N||e[23]!==i||e[24]!==m||e[25]!==M||e[26]!==p){e:{if(!i){W=void 0;break e}const K=i==="file_upload_pending"?M.formatMessage(Wa.fileUploadPendingLabel):i==="rate_limit_hard_block"?M.formatMessage(Wa.rateLimitHardBlockLabel):i==="exceeds_remaining_file_uploads"?p===0?M.formatMessage(Wa.exceedsRemainingUploadsLabelNone):p===1?M.formatMessage(Wa.exceedsRemainingUploadsLabelSingle,{excessFileCount:m!=null?m:0}):M.formatMessage(Wa.exceedsRemainingUploadsLabelPlural,{excessFileCount:m!=null?m:0,remainingFileUploads:p!=null?p:0}):i==="empty_text_content"?M.formatMessage(Wa.emptyTextContentLabel):i==="async_task_pending"?M.formatMessage(Wa.asyncTaskInProgressLabel):i==="no_source_selected_dr"?N.caterpillarNoneSelectedMessage:i==="text_content_too_long"?M.formatMessage(Wa.textContentTooLongLabel):void 0;if(K){W=K;break e}const Y=(Z=bde(i))==null?void 0:Z.placeholder;if(Y){W=M.formatMessage(Y);break e}W=void 0}e[22]=N,e[23]=i,e[24]=m,e[25]=M,e[26]=p,e[27]=W}else W=e[27];const $=W;if(i&&o){let K;return e[28]!==q||e[29]!==$?(K=$?r.jsx(It,{sideOffset:14,label:$,side:"bottom",children:q}):q,e[28]=q,e[29]=$,e[30]=K):K=e[30],K}return q}const Wa=Ne({stopStreamingLabel:{id:"+yfm/p",defaultMessage:"Stop streaming"},sendPromptLabel:{id:"xfIykB",defaultMessage:"Send prompt"},emptyTextContentLabel:{id:"LCVL2q",defaultMessage:"Message is empty"},textContentTooLongLabel:{id:"kDrqDJ",defaultMessage:"Message is too long"},fileUploadPendingLabel:{id:"Qv7jQN",defaultMessage:"File upload pending"},exceedsRemainingUploadsLabelPlural:{id:"DNR9+U",defaultMessage:"You can send up to {remainingFileUploads} files. Remove {excessFileCount} to continue."},exceedsRemainingUploadsLabelSingle:{id:"4xXbQa",defaultMessage:"You can send up to 1 file. Remove {excessFileCount} to continue."},exceedsRemainingUploadsLabelNone:{id:"NDddsV",defaultMessage:"You've reached your upload limit. Remove all files to continue."},rateLimitHardBlockLabel:{id:"YhP4bh",defaultMessage:"Messages limit reached"},asyncTaskInProgressLabel:{id:"a959Km",defaultMessage:"Disabled"},bigBoxSubmitShortcutWindows:{id:"v8kTwt",defaultMessage:"Ctrl + Enter to send"},bigBoxSubmitShortcutMac:{id:"DC5el0",defaultMessage:" Enter to send"}}),XLe=ue(Ce,"5bb75d",20,20),eDe=({textdocId:t,userCreatedTextdoc:e,isCanvasOpen:s=!1,isFocused:n=!1})=>r.jsxs("div",{className:"group/file-tile relative",children:[r.jsx("button",{onClick:()=>{d$.removeTempTextdoc(t),Uk()},className:"dark:border-token-main-surface-secondary absolute -start-1 -top-1 z-10 hidden rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white group-hover/file-tile:block dark:bg-white dark:text-black",children:r.jsx(Rn,{className:"icon-xs"})}),r.jsx(P2e,{textdocId:t,clientThreadId:void 0,name:e.title,tag:e.type,icon:r.jsx(XLe,{className:"icon"}),size:"small",isCanvasOpen:s,isFocused:n,isInlinePreview:!0,isInferring:e.status===Do.INFERRING,onClick:()=>pl(t),children:r.jsx("div",{className:z("px-4 whitespace-pre",J1(e.type)&&"font-mono"),children:e.content})})]}),tDe=({textdocId:t,userCreatedTextdoc:e})=>{const s=Hk(t),n=Kp();return r.jsx(eDe,{textdocId:t,userCreatedTextdoc:e,isFocused:s,isCanvasOpen:n})};function sDe({selectedApp:t}){const e=ne(),s=Ne({removeItem:{id:"WorkWithAppsTile.removeItem",defaultMessage:"Remove"}});return r.jsxs("div",{className:"group border-token-border-default bg-token-main-surface-primary text-token-text-primary relative inline-block rounded-xl border p-2 text-sm",children:[r.jsxs("div",{className:"grid h-full grid-cols-[auto_1fr] items-center gap-2",children:[r.jsx("div",{className:"icon relative overflow-hidden",children:r.jsx(oDe,{app:t,className:"h-full w-full"})}),r.jsx("div",{className:"truncate font-semibold",children:aDe(t.name)})]}),r.jsx("button",{className:"dark:border-token-main-surface-secondary absolute end-1 top-1 translate-x-1/2 -translate-y-1/2 rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white transition-colors dark:bg-white dark:text-black",children:r.jsx(It,{label:e.formatMessage(s.removeItem),side:"top",children:r.jsx(Rn,{className:"icon-xs"})})})]})}const nDe=r.jsx("span",{className:"pe-2 text-2xl",children:r.jsx(j,{id:"WorkWithAppsTile.defaultIcon",defaultMessage:""})});function oDe({app:t,className:e}){const[s,n]=x.useState(null);return x.useEffect(()=>{if(!t||!t.icon){n(null);return}const o=new Blob([l_(t.icon.data)],{type:t.icon.mimeType}),a=URL.createObjectURL(o);return n(a),()=>{URL.revokeObjectURL(a)}},[t]),s?r.jsx("img",{src:s,alt:"",className:e}):nDe}function aDe(t){if(!t)return"";if(t.length<=32)return t;const s=t.substring(0,20),n=t.substring(t.length-9);return"".concat(s,"...").concat(n)}function rDe(t){if(t.length!==1)return!1;const{file:e,fileId:s}=t[0],n=nl(e)&&!!(e!=null&&e.type)&&e.type.startsWith("image/"),o=s!=null&&!!e&&Vc(e.name);return n||o}function zut(t){"use forget";const e=F.c(38),{files:s,selectedApps:n,className:o,activeSystemHintType:a,disableEditButton:i,forceSmallView:l}=t;let c;e[0]!==n?(c=n===void 0?[]:n,e[0]=n,e[1]=c):c=e[1];const u=c,d=i===void 0?!1:i,f=l===void 0?!1:l,m=Pa(),p=Si(),g=PS.useStore(),{updateSystemHint:h}=La(),_=aa(),b=sn(Ss),y=ZS();let v;e[2]!==y?(v=Ww(y,"images-app"),e[2]=y,e[3]=v):v=e[3];const S=v;let C;e[4]!==s?(C=rDe(s),e[4]=s,e[5]=C):C=e[5];const w=C,k=!d&&w&&a!==Ye.PictureV2,E=eTe();let M;e[6]!==E?(M=E.map(lDe),e[6]=E,e[7]=M):M=e[7];let N;e[8]!==u?(N=u.map(iDe),e[8]=u,e[9]=N):N=e[9];let A;if(e[10]!==_||e[11]!==s||e[12]!==f||e[13]!==b||e[14]!==S||e[15]!==m||e[16]!==g||e[17]!==k||e[18]!==w||e[19]!==p||e[20]!==h){let P;e[22]!==_||e[23]!==f||e[24]!==b||e[25]!==S||e[26]!==m||e[27]!==g||e[28]!==k||e[29]!==w||e[30]!==p||e[31]!==h?(P=R=>{var O;return r.jsx(BU,{borderRadius:"2xl",width:m?"normal":"wide",disableEditButton:S,onRemoveFileClick:()=>{fr.remove(p,R.tempId,"none"),g.removeFile(R.tempId)},useLargeImageThumbnailStyle:w&&!b&&!f,onImageEditClick:k?()=>{_&&h(Ye.PictureV2,{clientThreadId:_.id})}:void 0,file:R.file,fileId:(O=R.fileId)!=null?O:void 0,contextConnectorInfo:R.contextConnectorInfo,loadingPercentage:R.status===fw.Uploading?R.progress:void 0},R.tempId)},e[22]=_,e[23]=f,e[24]=b,e[25]=S,e[26]=m,e[27]=g,e[28]=k,e[29]=w,e[30]=p,e[31]=h,e[32]=P):P=e[32],A=s.map(P),e[10]=_,e[11]=s,e[12]=f,e[13]=b,e[14]=S,e[15]=m,e[16]=g,e[17]=k,e[18]=w,e[19]=p,e[20]=h,e[21]=A}else A=e[21];let I;return e[33]!==o||e[34]!==M||e[35]!==N||e[36]!==A?(I=r.jsxs("div",{className:o,children:[M,N,A]}),e[33]=o,e[34]=M,e[35]=N,e[36]=A,e[37]=I):I=e[37],I}function iDe(t){return r.jsx(sDe,{selectedApp:t},t.id)}function lDe(t){return r.jsx(tDe,{textdocId:t.tempTextdocId,userCreatedTextdoc:t},t.tempTextdocId)}const Wut=t=>{"use forget";const e=F.c(4),{replyRegions:s}=t;let n;e[0]!==s?(n=s.map(pDe),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n?(o=r.jsx("div",{className:"divide-token-border-default bg-token-main-surface-primary mx-1 mt-1 flex cursor-auto flex-col divide-y overflow-hidden rounded-t-[24px] rounded-b-lg",children:n}),e[2]=n,e[3]=o):o=e[3],o};function cDe(t){"use forget";const e=F.c(9),{value:s,hideQuotes:n,onRemoveRegion:o,onLabelClick:a}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(t3,{children:r.jsx(Vn,{className:"icon"})}),e[0]=i):i=e[0];const l=n?s:"".concat(s,"");let c;e[1]!==a||e[2]!==l?(c=r.jsx(XE,{onLabelClick:a,children:l}),e[1]=a,e[2]=l,e[3]=c):c=e[3];let u;e[4]!==o?(u=o&&r.jsx(ZE,{onClick:o}),e[4]=o,e[5]=u):u=e[5];let d;return e[6]!==c||e[7]!==u?(d=r.jsxs(e3,{className:"text-token-text-secondary",children:[i,c,u]}),e[6]=c,e[7]=u,e[8]=d):d=e[8],d}function uDe(t){"use forget";const e=F.c(9),{value:s,onRemoveRegion:n,onLabelClick:o}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(t3,{children:r.jsx(Vn,{className:"icon"})}),e[0]=a):a=e[0];let i;e[1]!==o||e[2]!==s?(i=r.jsx(XE,{className:"font-semibold",onLabelClick:o,children:s}),e[1]=o,e[2]=s,e[3]=i):i=e[3];let l;e[4]!==n?(l=r.jsx(ZE,{onClick:n}),e[4]=n,e[5]=l):l=e[5];let c;return e[6]!==i||e[7]!==l?(c=r.jsxs(e3,{className:"text-blue-400",children:[a,i,l]}),e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function dDe(t){"use forget";const e=F.c(11),{value:s,icon:n,onRemoveRegion:o,onLabelClick:a}=t;let i;e[0]!==n?(i=r.jsx(t3,{className:"mt-0",children:n}),e[0]=n,e[1]=i):i=e[1];let l;e[2]!==a||e[3]!==s?(l=r.jsx(XE,{className:"text-token-text-primary font-semibold",onLabelClick:a,children:s}),e[2]=a,e[3]=s,e[4]=l):l=e[4];let c;e[5]!==o?(c=r.jsx(ZE,{onClick:o}),e[5]=o,e[6]=c):c=e[6];let u;return e[7]!==i||e[8]!==l||e[9]!==c?(u=r.jsxs(e3,{children:[i,l,c]}),e[7]=i,e[8]=l,e[9]=c,e[10]=u):u=e[10],u}function ZE(t){"use forget";const e=F.c(6),{onClick:s}=t,n=ne();let o;e[0]!==n?(o=n.formatMessage({id:"PlVqJ1",defaultMessage:"Remove"}),e[0]=n,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(Rn,{className:"icon"}),e[2]=a):a=e[2];let i;return e[3]!==s||e[4]!==o?(i=r.jsx("button",{onClick:s,type:"button",className:"text-token-text-secondary flex h-9 w-9 shrink-0 items-center justify-center","aria-label":o,children:a}),e[3]=s,e[4]=o,e[5]=i):i=e[5],i}var gP;const fDe=Mt.span(gP||(gP=St(["flex-1 line-clamp-3 py-2"])));var hP;const mDe=Mt.button(hP||(hP=St(["flex-1 line-clamp-3 py-2 text-start focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-border-brand rounded bg-transparent cursor-pointer"])));function XE(t){"use forget";const e=F.c(10),{children:s,className:n,onLabelClick:o}=t,a=ne();if(o){let l;e[0]!==a?(l=a.formatMessage({id:"YVD9GV",defaultMessage:"More about replied content"}),e[0]=a,e[1]=l):l=e[1];let c;return e[2]!==s||e[3]!==n||e[4]!==o||e[5]!==l?(c=r.jsx(mDe,{type:"button",onClick:o,className:n,"aria-label":l,children:s}),e[2]=s,e[3]=n,e[4]=o,e[5]=l,e[6]=c):c=e[6],c}let i;return e[7]!==s||e[8]!==n?(i=r.jsx(fDe,{className:n,children:s}),e[7]=s,e[8]=n,e[9]=i):i=e[9],i}var _P;const e3=Mt.div(_P||(_P=St(["bg-token-main-surface-secondary dark:bg-token-main-surface-tertiary flex items-start py-1 gap-1.5 px-1.5 text-sm"])));var xP;const t3=Mt.span(xP||(xP=St(["shrink-0 w-9 h-9 flex justify-center items-center"])));function pDe(t,e){switch(t.type){case"text":return r.jsx(cDe,{value:t.value,hideQuotes:t.hideQuotes,onRemoveRegion:t.onRemoveRegion,onLabelClick:t.onLabelClick},e);case"object":return r.jsx(uDe,{value:t.value,onRemoveRegion:t.onRemoveRegion,onLabelClick:t.onLabelClick},e);case"mention":case"system_hint":return r.jsx(dDe,{value:t.value,icon:t.icon,onRemoveRegion:t.onRemoveRegion,onLabelClick:t.onLabelClick},e)}return null}const gDe="wcDTda_fallbackTextarea",gj={fallbackTextarea:gDe,"prosemirror-parent":"wcDTda_prosemirror-parent"},qut=({composerController:t,placeholder:e,disableAutoFocus:s=!1,textareaMaxHeightClassName:n="max-h-[max(30svh,5rem)]",fontSize:o="base"})=>{"use no forget";const a=x.useRef(null),i=x.useRef(null),l=x.useRef(!1),c=G(),u=N9(c),d=oe(u.composer.autofocusDisabled$),f=x.useRef(s||d);return zn(()=>{if(l.current||!a.current)return;const m=Ht(t);l.current=!0;const p=i.current;if(p!=null){const{value:g,selectionStart:h,selectionEnd:_}=p;m.dispatch(m.state.tr.insertText(g)),m.dispatch(m.state.tr.setSelection(L9.create(m.state.doc,h+1,_+1))),p.style.display="none",p.value=""}a.current.appendChild(m.dom),m.dom.id=F1,m.dom.dataset.virtualkeyboard="true",Cde(m.dom),f.current||no(Ht(t))},[t]),x.useEffect(()=>{const m=a.current;if(!m)return;const p=Ht(t);return lg({target:p.dom,axis:"height",onChange:({height:g,previousHeight:h})=>{if(xt(()=>q3(t))&&h!=null&&g>h)return;const _=document.createElement("span");_.textContent="",_.inert=!0;const b=getComputedStyle(p.dom);for(const v of["font-size","line-height","padding-top","padding-bottom"])_.style.setProperty(v,b.getPropertyValue(v));_.style.position="absolute",m.appendChild(_);const y=_.offsetHeight;m.removeChild(_),q3.set(t,g>y)}})},[t]),x.useEffect(()=>{BX(Ht(t),e)},[e,t]),x.useEffect(()=>{Ge.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted",{serialTimingGroup:"pageLoad"})},[]),r.jsxs("div",{ref:a,onKeyDown:()=>{Nd.postTask(()=>{go.prefetch()},{priority:"background"})},className:z([gj["prosemirror-parent"],"text-token-text-primary",n,"max-h-52","min-h-[var(--deep-research-composer-extra-height,unset)]","flex-1 overflow-auto [scrollbar-width:thin]",O9()?"firefox":"default-browser"],"vertical-scroll-fade-mask"),"data-size":o!=="base"?o:void 0,children:[r.jsx("textarea",{className:gj.fallbackTextarea,name:F1,autoFocus:!f.current,placeholder:e,ref:i,"data-virtualkeyboard":!0}),r.jsx(A2e,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})},hDe=4,Oz=.0025;function Kut(s){var n=s,{composerController:t}=n,e=De(n,["composerController"]);const{waveformData$:o}=KE(t),a=oe(o);return a?r.jsx(_De,T({waveform:a},e)):null}function _De({waveform:t,progressPercentage:e,barWidth:s=hDe,normalize:n=!1,scaleFactor:o=10,initialValue:a=Oz,silentColor:i,activeColor:l,className:c}){const u=x.useRef(null),d=sa(),f=i!=null?i:d?"#000":"#CCC",m=l!=null?l:d?"#CCC":"#000",[p,g]=x.useState(300);x.useEffect(()=>{u.current&&g(u.current.clientWidth)},[]);const{soundBars:h,firstAudioBarIndex:_}=x.useMemo(()=>{const b=t.length,y=Math.floor(p/s),v=b/y;let S=-1;const C=[];for(let k=0;k<y;k++){const E=Math.floor(k*v),M=Math.min(Math.floor((k+1)*v),b);if(E>=M){C.push(0);continue}let N=0;for(let I=E;I<M;I++)N+=Math.abs(t[I]);const A=N/(M-E);S===-1&&A>a&&(S=k),C.push(A)}let w=C;if(n){const E=1/(Math.max(...w)||1);w=w.map(M=>{const N=M*E;return Math.max(Math.min(N,.92),.08)})}return{soundBars:w,firstAudioBarIndex:S}},[t,p,s,n,a]);return x.useEffect(()=>{const b=u.current,y=b==null?void 0:b.getContext("2d");if(!b||!y)return;const v=window.devicePixelRatio,{clientHeight:S,clientWidth:C}=b;b.width=C*v,b.height=S*v,y.clearRect(0,0,b.width,b.height);const w=S*v*.5;y.translate(0,w);const k=b.width/h.length;for(let E=0;E<h.length;E++){let M=h[E];n||(M*=o);const N=M*w,A=E*k;if(typeof e=="number"){const P=(h.length-E)/h.length<e;y.fillStyle=P?m:f}else{const I=_===-1||E<_?f:m;y.fillStyle=I}y.fillRect(A,-N,k/2,N*2)}},[h,p,f,m,n,o,_,e]),r.jsx("canvas",{ref:u,className:z("h-8 w-full",c)})}const Yut=300,Qut=async(t=1)=>{let e=0,s;return new Promise(n=>{const o=a=>(s||(s=a),a-s<t*1e3?(e+=1,requestAnimationFrame(o)):n(Math.floor(e/t)));requestAnimationFrame(o)})},Jut=t=>{const e=x.useRef(t),s=x.useCallback(n=>{(e.current[0]!==n.width||e.current[1]!==n.height)&&(e.current=[n.width,n.height])},[]);return{canvasSizeRef:e,handleCanvasSizeUpdate:s}},Zut=t=>{var i,l,c,u,d,f,m,p,g;const{voiceSessionId:e,server:s,voiceMode:n,audioInputDevice:o}=t,a=xt(()=>Ku());return{voice_session_id:e!=null?e:"(none)",server_messages:s.messages.map(h=>h.type).join(","),rate_limit_message:(l=JSON.stringify((i=s.usage)==null?void 0:i.rate_limit_message))!=null?l:"(none)",audio_s:(u=(c=s.usage)==null?void 0:c.audio_s)!=null?u:"(none)",tool_update:(f=(d=s.toolUpdate)==null?void 0:d.type)!=null?f:"(none)",voice_connection_quality:(m=s.voiceConnectionQuality)!=null?m:"(none)",voice_mode:n!=null?n:"(none)",audio_input_device:(p=o==null?void 0:o.label)!=null?p:"(none)",voice_status:(g=JSON.stringify(a))!=null?g:"(none)"}};function Lz(t){return t instanceof DOMException&&t.name==="NotAllowedError"?(Jt.permissions.denied({message:t.message}),!0):!1}class s3{static getUserMedia(...e){const s=navigator.mediaDevices.getUserMedia(...e);return this.mediaDevicesPromises.push(s),s}static getDisplayMedia(...e){const s=navigator.mediaDevices.getDisplayMedia(...e);return this.mediaDevicesPromises.push(s),s}static closeAllStreams(){const e=this.mediaDevicesPromises.map(s=>s.then(n=>{n.getTracks().forEach(o=>{o.readyState==="live"&&o.stop()})}));return this.mediaDevicesPromises=[],Promise.all(e)}}X(s3,"mediaDevicesPromises",[]);const Rm=class Rm{constructor(){X(this,"userMediaPromiseMap",new Map)}static getLocalDevices(e,s=!0){return Rm.instance.getDevices(e,s)}async getDevices(e,s=!0){if(this.userMediaPromiseMap.size>0)try{e?await this.userMediaPromiseMap.get(e):await Promise.all(Array.from(this.userMediaPromiseMap.values()))}catch(o){console.warn("error waiting for media permissions",o)}let n=await navigator.mediaDevices.enumerateDevices();if(s&&!(D9()&&this.hasDeviceInUse(e))&&(n.filter(a=>a.kind===e).length===0||n.some(a=>{const i=a.label==="",l=e?a.kind===e:!0;return i&&l}))){const a={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},i=await s3.getUserMedia(a);n=await navigator.mediaDevices.enumerateDevices(),i.getTracks().forEach(l=>{l.stop()})}return e&&(n=n.filter(o=>o.kind===e)),n}hasDeviceInUse(e){return e?this.userMediaPromiseMap.has(e):this.userMediaPromiseMap.size>0}};X(Rm,"instance",new Rm);let DS=Rm;async function xDe(t){let e;try{e=await DS.getLocalDevices(t)}catch(o){Lz(o),_l.debug("Error fetching local devices",o);return}const s={};for(const o of e)o.kind===t&&(s[o.groupId]||(s[o.groupId]=[]),s[o.groupId].push(o));for(const o in s){const a=s[o];if(a.length>1&&a.find(l=>l.deviceId==="default")){const l=a.find(c=>c.deviceId!=="default");if(l)return l}}let n;for(const o of e)if(o.kind===t){if(o.deviceId==="default")return o;n||(n=o)}return n}async function yDe(){var a,i;const e=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="audioinput"),s=e.find(l=>l.deviceId==="default"),n=e.find(l=>l.label.toLowerCase().includes("iphone")),o=e.find(l=>{const c=!!(n&&n.label!==l.label),u=!!(s&&l.deviceId===s.deviceId);return c||u});return(i=o==null?void 0:o.deviceId)!=null?i:(a=e[0])==null?void 0:a.deviceId}function bDe(){performance.mark(ar.MicrophoneRequestStart),Vd.set({start_time:performance.now(),end_time:-1})}function vDe(){if(performance.getEntriesByName(ar.MicrophoneRequestStart).length>0){performance.mark(ar.MicrophoneRequestEnd);const e=performance.measure(ar.MicrophoneLatencyMeasure,ar.MicrophoneRequestStart,ar.MicrophoneRequestEnd);Jt.voiceMode.microphoneLatency({durationMs:e.duration});const s=xt(()=>{var n;return(n=Vd())==null?void 0:n.start_time});s&&Vd.set({start_time:s,end_time:performance.now()})}}const SDe=()=>{const t=F9()&&ka;return async()=>{try{if(bDe(),t)return await UX();try{const e=await yDe(),s=await s3.getUserMedia({audio:e!==""?{deviceId:{exact:e}}:!0,video:!1}),n=await navigator.mediaDevices.enumerateDevices();return s.getTracks().forEach(a=>a.stop()),n.some(a=>a.kind==="audioinput"&&a.label!=="")}catch(e){if(!Lz(e))throw e;return!1}}finally{vDe()}}};function CDe(t){const e=x.useRef(void 0);x.useEffect(()=>{if(!(F9()&&ka||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(n=>{e.current=n,n.onchange=()=>{t(n.state==="granted")}}).catch(()=>{}),()=>{e.current&&(e.current.onchange=null)}},[t])}const wDe=()=>{const[t,e]=x.useState(!1),[s,n]=x.useState(!1),[o,a]=x.useState(),i=x.useCallback(d=>{e(d)},[]);CDe(i);const l=SDe(),c=x.useCallback(async()=>s?t:l().then(d=>(e(d),d)).finally(()=>{n(!0)}),[l,s,t]);return x.useEffect(()=>{t&&kDe().then(d=>{a(d)})},[t]),{permissionsRequested:s,requestMicrophonePermissions:c,userDeclinedMicrophonePermissions:s&&!t,microphoneAvailable:t,microphoneLabel:o}},kDe=async()=>{var t;try{const e=await xDe("audioinput");return(t=e==null?void 0:e.label)!=null?t:""}catch(e){const s=mx();return Ge.addError("Failed to fetch default media device",{error:e,protocol:s}),"Error accessing microphone devices"}},TDe={status:"idle"},EDe=Zt()(vp(Vs(()=>T({},TDe)))),Dz=z("flex items-center justify-center rounded-full"),Fz=z(Dz,"border border-token-border-default p-1 text-token-text-secondary","focus-visible:outline-black dark:text-token-text-secondary dark:focus-visible:outline-white","bg-transparent dark:bg-transparent"),Bz=z("hover:bg-token-main-surface-tertiary"),Uz=z(Dz,"bg-transparent text-token-text-secondary transition-colors","hover:bg-token-main-surface-tertiary focus-visible:outline-black","disabled:text-[#f4f4f4] disabled:opacity-30","dark:bg-transparent dark:text-token-text-secondary dark:hover:bg-token-main-surface-tertiary dark:focus-visible:outline-white","h-8 w-8"),MDe=t=>{const{requestMicrophonePermissions:e}=wDe(),n=ne().formatMessage({id:"vONrv3",defaultMessage:"Enable mic access to dictate"}),o=Kt();return async()=>{if(B.logEvent("Whisper on Web/Windows: Clicked to start dictation"),pt.logEvent("chatgpt_composer_whisper_button_clicked_start"),!await e())return o.danger(n,{toastId:"whisper_icon_button_click_failure"});t()}},NDe=c=>{var u=c,{size:t="medium",disabled:e,onExit:s,buttonClassName:n,invertColor:o,disableTooltip:a=!1,visualTreatment:i}=u,l=De(u,["size","disabled","onExit","buttonClassName","invertColor","disableTooltip","visualTreatment"]);const d=ne(),f=EDe(h=>h.status),m=MDe(s);f==="error"&&(B.logEvent("Whisper on Web/Windows: Error"),pt.logEvent("chatgpt_composer_whisper_button_error"));const p=r.jsx(pH,{"aria-label":"",className:"icon",fontSize:"inherit"}),g=sn(Ss);return r.jsx(ADe,{disabled:a,children:i==="composer-btn"||i==="codex"?r.jsx("button",U(T({},l),{"aria-label":d.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),type:"button",onClick:m,disabled:e,className:z("composer-btn",g&&"composer-btn--desktopSidebar"),children:p})):r.jsx(ke,U(T({},l),{"aria-label":d.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),size:t,type:"button",onClick:m,disabled:e,className:z(o?Uz:Fz,"[view-transition-name:var(--vt-composer-whisper-button)]",e?"opacity-30":!o&&Bz,"dark:hover:bg-transparent dark:hover:opacity-100",n),children:p}))})};function ADe({children:t,disabled:e=!1}){const s=ne();return r.jsx(It,{open:e?!1:void 0,label:s.formatMessage({id:"abw2XH",defaultMessage:"Dictate"}),side:"bottom",onOpenChange:n=>{n&&(B.logEvent("Whisper on Web/Windows: Button hover to see tooltip"),pt.logEvent("chatgpt_composer_whisper_button_hovered"))},children:t})}function IDe(t){return ut()?r.jsx(NDe,T({},t)):null}function jDe(t){return t.visualTreatment==="codex"?r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx(ke,{type:"button",color:"ghost",size:"small",icon:Rn,children:r.jsx(j,{id:"wham.whisperModeControlsLoading.cancel",defaultMessage:"Cancel"})}),r.jsx(ke,{type:"button",color:"secondary",size:"small",icon:hl,children:r.jsx(j,{id:"wham.whisperModeControlsLoading.done",defaultMessage:"Done"})})]}):r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx("div",{className:z(Fz,Bz,t.buttonClassName),children:r.jsx(Rn,{className:"icon"})}),r.jsx("div",{className:z(Uz,t.buttonClassName),children:r.jsx(hl,{className:"icon-lg"})})]})}const PDe=Pe(()=>me(()=>import("./ne3xqzlpqw6avp2c.js"),__vite__mapDeps([262,1,3,4])).then(t=>t.WhisperModeControls),{loading:t=>r.jsx(jDe,T({},t))});function RDe(t){return r.jsx(PDe,T({},t))}function Xut({composerController:t,composerType:e}){const{waveformData$:s,isWhisperActive$:n}=KE(t),o=oe(n),a=x.useCallback((i,l,c,u)=>{const d=Ht(t),f=d.state.selection.ranges[0].$from.pos;n.set(!1),requestAnimationFrame(()=>{d.focus(),d.dispatch(d.state.tr.insertText(i,f,f)),d.dispatch(d.state.tr.setSelection(L9.create(d.state.doc,f+i.length)).scrollIntoView()),W7e(t).setData({usedDictation:!0,dictationOriginalText:i!=null?i:null,dictationAssetPointer:l!=null?l:null,dictationAssetTTL:c!=null?c:null,dictationAssetFormat:u!=null?u:null})})},[t,n]);return o?r.jsx(RDe,{initialValue:Oz,onSuccess:a,onWaveformDataUpdate:s.set,onExit:()=>{n.set(!1)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):r.jsx(IDe,{size:"small",onExit:()=>{n.set(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"})}const ODe=ue(Ce,"308fea",20,20),$z={cyberpunk:{id:"cyberpunk",title:"Cyberpunk",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/cyberpunk.webp",label:Je({id:"EoebyJ",defaultMessage:"Cyberpunk"}),textToImagePrompt:Je({id:"Deq9he",defaultMessage:"Create an image in a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."}),imageToImagePrompt:Je({id:"omZTK1",defaultMessage:"Restyle this image with a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."})},"coloring-book":{id:"coloring-book",title:"Coloring Book",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/coloring-book.webp",label:Je({id:"Ma5v0R",defaultMessage:"Coloring Book"}),textToImagePrompt:Je({id:"PWjYK/",defaultMessage:"Create an image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."}),imageToImagePrompt:Je({id:"U6fwpJ",defaultMessage:"Restyle this image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."})},anime:{id:"anime",title:"Anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/anime.webp",label:Je({id:"U/Qrsc",defaultMessage:"Anime"}),textToImagePrompt:Je({id:"gCogZd",defaultMessage:"Create an image in a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."}),imageToImagePrompt:Je({id:"jZIKG9",defaultMessage:"Restyle this image with a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."})},"classic-anime":{id:"classic-anime",title:"Classic Anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/classic-anime.webp",label:Je({id:"jLkVYJ",defaultMessage:"Classic Anime"}),textToImagePrompt:Je({id:"7SgRKH",defaultMessage:"Create an image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."}),imageToImagePrompt:Je({id:"r6UnyO",defaultMessage:"Restyle this image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."})},"dramatic-headshot":{id:"dramatic-headshot",title:"Dramatic Headshot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/dramatic-headshot.webp",label:Je({id:"p4IJX5",defaultMessage:"Dramatic Headshot"}),textToImagePrompt:Je({id:"L2OTSr",defaultMessage:"Create an ultra-realistic high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."}),imageToImagePrompt:Je({id:"HwR32X",defaultMessage:"Restyle this photo into a high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."})},"photo-shoot":{id:"photo-shoot",title:"Photo Shoot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/photo-shoot.webp",label:Je({id:"ZmdPZ5",defaultMessage:"Photo Shoot"}),textToImagePrompt:Je({id:"APWtsI",defaultMessage:"Create an ultra-realistic professional photo shoot with soft lighting."}),imageToImagePrompt:Je({id:"ugvh1K",defaultMessage:"Make a professional photo shoot with soft lighting based on this photo."})},"retro-cartoon":{id:"retro-cartoon",title:"Retro Cartoon",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/retro-cartoon.webp",label:Je({id:"GAjF4n",defaultMessage:"Retro Cartoon"}),textToImagePrompt:Je({id:"46xB6P",defaultMessage:"Create a retro 1950s cartoon style image, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."}),imageToImagePrompt:Je({id:"ozicEm",defaultMessage:"Restyle this photo in a retro 1950s cartoon style, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."})},"80s-glam":{id:"80s-glam",title:"80s Glam",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/80s-glam.webp",label:Je({id:"fDejVt",defaultMessage:"80s Glam"}),textToImagePrompt:Je({id:"W7Od8r",defaultMessage:"Create a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."}),imageToImagePrompt:Je({id:"sL7kY5",defaultMessage:"Turn this photo into a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."})},"art-nouveau":{id:"art-nouveau",title:"Art Nouveau",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/art-nouveau.webp",label:Je({id:"JNecL3",defaultMessage:"Art Nouveau"}),textToImagePrompt:Je({id:"Kdl/EG",defaultMessage:"Create an image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."}),imageToImagePrompt:Je({id:"IicReU",defaultMessage:"Restyle this image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."})},synthwave:{id:"synthwave",title:"Synthwave",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/synthwave.webp",label:Je({id:"Db9V0o",defaultMessage:"Synthwave"}),textToImagePrompt:Je({id:"t8FH1X",defaultMessage:"Create an image in a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."}),imageToImagePrompt:Je({id:"CnZDU9",defaultMessage:"Restyle this image with a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."})},"tiranga-portrait-2025":{id:"tiranga-portrait-2025",title:"Tiranga Portrait",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/tiranga-portrait-2025.webp",label:Je({id:"eHhV1D",defaultMessage:"Tiranga Portrait"}),textToImagePrompt:Je({id:"V7BzQx",defaultMessage:"Create a photorealistic photo on a clean background with soft key lighting. Add saffron-white-green rim light and a subtle Ashoka Chakra halo behind the head. Blend one soft overlay  Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette  into the shoulders/background. Include light tricolor bokeh or smoke and a gentle khadi/paper micro-texture. Crisp detail, no text, no flag as clothing."}),imageToImagePrompt:Je({id:"AJ1btA",defaultMessage:'Restyle this photo in a "Tiranga double-exposure" look: preserve identity and pose, add saffron-white-green rim light and a subtle Ashoka Chakra halo. Blend one overlay - Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette - plus soft tricolor bokeh/smoke and gentle khadi/paper micro-texture. Photo real, balanced saturation. No text, don\'t use the flag as clothing'})}},Hz=Object.values($z);function edt({composerController:t}){const e=kw(d=>d.files.some(f=>Vc(f.file.name))),{targetedContent:s}=pg(),n=e||(s==null?void 0:s.subtype)===oS,o=ne(),a=G(),c=js(a,"3961845717").get("styles",Hz.map(d=>d.id)).map(d=>$z[d]).filter(Boolean);x.useEffect(()=>{B.logEventWithStatsig("chatgpt_imagegen_style_picker_shown","chatgpt_imagegen_style_picker_shown")},[]);const u=x.useCallback(d=>{const f=n?o.formatMessage(d.imageToImagePrompt):o.formatMessage(d.textToImagePrompt);DDe(f,t,o),B.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:d.id})},[t,o,n]);return r.jsxs(eu,{onOpenChange:d=>{d&&B.logEventWithStatsig("chatgpt_imagegen_style_picker_opened","chatgpt_imagegen_style_picker_opened")},children:[r.jsx(hi,{asChild:!0,children:r.jsxs("button",{type:"button",className:"composer-btn px-2",children:[r.jsx(ODe,{className:"icon"}),r.jsx("span",{className:"ms-1.5 [[data-collapse-labels]_&]:sr-only",children:r.jsx(j,{id:"X850uz",defaultMessage:"Styles"})}),r.jsx(zo,{className:"icon-sm xs:ms-1.5 ms-1"})]})}),r.jsx(tu,{children:r.jsx(ix,{className:"z-[51] max-h-[294px] w-[345px] overflow-y-auto bg-clip-border px-3 py-4",$as:su,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:r.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-4",children:c.map(d=>r.jsx(LDe,{style:d,onClick:()=>u(d)},d.id))})})})]})}function LDe({style:t,onClick:e}){const s=ne();return r.jsxs("button",{onClick:e,className:"hover:bg-token-bg-secondary focus-visible:ring-ring flex flex-col items-center gap-2.5 rounded-md p-1 text-xs focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none",children:[r.jsx("img",{src:t.imageUrl,alt:s.formatMessage(t.label),className:"aspect-square w-4/5 rounded-full object-cover"}),r.jsx("span",{children:s.formatMessage(t.label)})]})}function DDe(t,e,s){const n=Ht(e),o=Zx(e);if(o.trim()===""){w6(n,t);return}const a=o.toLowerCase();for(const{textToImagePrompt:i,imageToImagePrompt:l}of Hz){const u=[s.formatMessage(i),s.formatMessage(l)].map(d=>{const f=a.indexOf(d.toLowerCase());return f===-1?null:{start:f,end:f+d.length}}).filter(Boolean);if(u.length){const d=Math.min(...u.map(p=>p.start)),f=Math.max(...u.map(p=>p.end)),m=o.substring(d,f).trimEnd();k6(n,m,t);return}}T6(n,t)}function FDe(){const t=_w(),e=oe($X);return t&&e&&cC()&&kE()}function BDe(t){const i=t,{ref:e,children:s,className:n}=i,o=De(i,["ref","children","className"]),a=FDe();return r.jsx("div",U(T({},o),{className:z(a&&"keyboard-open:fixed keyboard-open:bottom-[var(--screen-keyboard-height,0)] keyboard-open:start-3 keyboard-open:end-3 keyboard-open:z-50 keyboard-open:w-auto! keyboard-open:-translate-y-2",n),ref:l=>{if(typeof e=="function"?e(l):e!=null&&(e.current=l),!!a)return lg({axis:"height",target:l,onChange:({height:c})=>{yRe.setState(u=>U(T({},u),{composerHeight:c}))}})},children:s}))}const UDe=t=>{"use forget";const e=F.c(91),{viewTransitionName:s,isTemporaryChat:n,isDeveloperMode:o,isNewConversation:a,composerController:i,children:l,expanded:c,onSubmit:u,shouldUseRelaxedRadius:d,shouldUseTightRadius:f,canCollapseWithInput:m,canCollapseWithFooterActions:p,expandOnMultilineInput:g,backgroundClassName:h,ariaLabel:_,ref:b,disableMotion:y}=t,v=s===void 0?"var(--vt-composer)":s,S=d===void 0?!1:d,C=f===void 0?!1:f;let w=m===void 0?!1:m,k=p===void 0?!0:p;const E=g===void 0?!1:g,M=y===void 0?!1:y,N=sn(Ss);let A,I,P,R,O,L,D;e[0]!==l?(O=null,L=null,R=null,A=[],D=[],I=[],P=[],x.Children.forEach(l,ls=>{if(x.isValidElement(ls)){if(ls.type===Gz){if(O!=null)throw new Error("PromptTextareaComposer only accepts a single primary content");O=ls}if(ls.type===Vz){if(L!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");L=ls}else if(ls.type===zz){if(R!=null)throw new Error("PromptTextareaComposer only accepts a single leading action");R=ls}else ls.type===qz||ls.type===Wz?A.push(ls):ls.type===Kz?D.push(ls):ls.type===Yz?I.push(ls):ls.type===Qz&&P.push(ls)}}),e[0]=l,e[1]=A,e[2]=I,e[3]=P,e[4]=R,e[5]=O,e[6]=L,e[7]=D):(A=e[1],I=e[2],P=e[3],R=e[4],O=e[5],L=e[6],D=e[7]),E&&(w=!0,k=!1);const H=A.length>0,V=D.length>0,q=V||L!=null,W=NC(),$=G(),Z=!ut(),K=oe(()=>!H&&!q?!1:c!=null?c:E&&HX(i)||!E&&GX(i)||!w&&!Cd(i)||!k&&H),Y=$De;let ae;e[8]!==u?(ae=ls=>{ls.preventDefault(),u(ls)},e[8]=u,e[9]=ae):ae=e[9];const se=ae,[ee,re]=x.useState(!1);let he;e[10]===Symbol.for("react.memo_cache_sentinel")?(he=()=>{re(!0),setTimeout(()=>{re(!1)},250)},e[10]=he):he=e[10];const fe=he;let pe;e[11]!==ee||e[12]!==W?(pe=ee?{duration:0}:W?IB:Hye,e[11]=ee,e[12]=W,e[13]=pe):pe=e[13];const le=pe,ve=ne();let Te;e[14]!==ve?(Te=ve.formatMessage({id:"U6PwZd",defaultMessage:"Developer mode"}).toLocaleUpperCase(),e[14]=ve,e[15]=Te):Te=e[15];const xe=Te,ce=o&&!a&&"relative";let we;e[16]!==ce?(we=z("group/composer w-full",ce),e[16]=ce,e[17]=we):we=e[17];const ge=v!=null?v:void 0;let Ae;e[18]!==ge?(Ae={viewTransitionName:ge},e[18]=ge,e[19]=Ae):Ae=e[19];const Ue=Ae;let Ie;e[20]!==K?(Ie=Gm(K),e[20]=K,e[21]=Ie):Ie=e[21];const Me="unified-composer";let te;e[22]!==i?(te=VX(i),e[22]=i,e[23]=te):te=e[23];const Q=Lke(te,b);let ie;e[24]!==xe||e[25]!==o||e[26]!==a?(ie=o&&!a&&r.jsx(pr,{href:"#settings/Connectors/Advanced",underline:!1,className:"absolute end-12 top-0 -translate-y-full rounded-t-xl bg-orange-400 px-2 text-xs font-medium text-white transition-colors hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:xe}),e[24]=xe,e[25]=o,e[26]=a,e[27]=ie):ie=e[27];let _e;e[28]!==P?(_e=P.length>0&&r.jsx("div",{className:"hidden",children:P}),e[28]=P,e[29]=_e):_e=e[29];const ye=BDe;let Re;e[30]!==i||e[31]!==$?(Re=ls=>{!cx(i)&&!ls.defaultPrevented&&(w9($).anySheetOpen$()||no(Ht(i)))},e[30]=i,e[31]=$,e[32]=Re):Re=e[32];const Ve=Ou,ze=!0,Fe=N&&"dark:bg-token-bg-primary",be=n&&"dark",Oe=!o&&"shadow-short",qe=o&&"relative shadow-sm outline-2 outline-orange-400";let Ze;e[33]!==h||e[34]!==Fe||e[35]!==be||e[36]!==Oe||e[37]!==qe?(Ze=z("bg-token-bg-primary corner-superellipse/1.1 cursor-text overflow-clip bg-clip-padding p-2.5 contain-inline-size dark:bg-[#303030]","grid grid-cols-[auto_1fr_auto] [grid-template-areas:'header_header_header'_'leading_primary_trailing'_'._footer_.'] group-data-expanded/composer:[grid-template-areas:'header_header_header'_'primary_primary_primary'_'leading_footer_trailing']",Fe,be,Oe,qe,h),e[33]=h,e[34]=Fe,e[35]=be,e[36]=Oe,e[37]=qe,e[38]=Ze):Ze=e[38];const st=N?"0":C?"var(--radius-xl)":S?"20px":"28px";let rt;e[39]!==st?(rt={borderRadius:st},e[39]=st,e[40]=rt):rt=e[40];let wt;e[41]!==M||e[42]!==K||e[43]!==O||e[44]!==le?(wt=r.jsx(Ou,{disableMotion:M,layout:"position",layoutDependency:K,transition:le,className:"-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5",children:O}),e[41]=M,e[42]=K,e[43]=O,e[44]=le,e[45]=wt):wt=e[45];let at;e[46]!==M||e[47]!==K||e[48]!==R||e[49]!==le?(at=R&&r.jsx(Ou,{disableMotion:M,layout:"position",layoutDependency:K,transition:le,className:"[grid-area:leading]",children:R}),e[46]=M,e[47]=K,e[48]=R,e[49]=le,e[50]=at):at=e[50];const kt=H&&r.jsx(Ou,{disableMotion:M,layout:"position",layoutDependency:K,transition:le,"data-testid":"composer-footer-actions",className:z("-m-1 max-w-full overflow-x-auto p-1 [grid-area:footer] [scrollbar-width:none]",k&&"group-not-data-expanded/composer:-mb-12"),inert:!K,initial:{translateY:K?0:"calc(-6*var(--spacing))"},animate:{translateY:0},children:r.jsx("div",{className:z("flex min-w-fit items-center",Z?"gap-1.5 ps-0 pe-1.5":"cant-hover:px-1.5 cant-hover:gap-1.5"),ref:Y,children:A})});let Nt;e[51]!==M||e[52]!==q||e[53]!==V||e[54]!==K||e[55]!==L||e[56]!==D||e[57]!==le?(Nt=q&&r.jsxs(Ou,{disableMotion:M,layout:"position",layoutDependency:K,transition:le,className:"flex items-center gap-2 [grid-area:trailing]",children:[V&&r.jsx("div",{className:"relative ms-1",children:D}),L]}),e[51]=M,e[52]=q,e[53]=V,e[54]=K,e[55]=L,e[56]=D,e[57]=le,e[58]=Nt):Nt=e[58];let Ot;e[59]!==M||e[60]!==I||e[61]!==K||e[62]!==le?(Ot=I.length>0&&r.jsx(Ou,{disableMotion:M,layout:"position",layoutDependency:K,transition:le,className:"-mx-2.5 -mt-2.5 mb-2.5 flex flex-col [grid-area:header]",children:I}),e[59]=M,e[60]=I,e[61]=K,e[62]=le,e[63]=Ot):Ot=e[63];let At;e[64]!==Ve||e[65]!==M||e[66]!==K||e[67]!==Ze||e[68]!==rt||e[69]!==wt||e[70]!==at||e[71]!==kt||e[72]!==Nt||e[73]!==Ot||e[74]!==le?(At=r.jsxs(Ve,{disableMotion:M,layout:ze,layoutDependency:K,transition:le,className:Ze,style:rt,children:[wt,at,kt,Nt,Ot]}),e[64]=Ve,e[65]=M,e[66]=K,e[67]=Ze,e[68]=rt,e[69]=wt,e[70]=at,e[71]=kt,e[72]=Nt,e[73]=Ot,e[74]=le,e[75]=At):At=e[75];let Wt;e[76]!==ye||e[77]!==Re||e[78]!==At?(Wt=r.jsx(ye,{onClick:Re,children:At}),e[76]=ye,e[77]=Re,e[78]=At,e[79]=Wt):Wt=e[79];let hs;return e[80]!==_||e[81]!==fe||e[82]!==se||e[83]!==we||e[84]!==Ue||e[85]!==Ie||e[86]!==Q||e[87]!==ie||e[88]!==_e||e[89]!==Wt?(hs=r.jsxs("form",{onPaste:fe,className:we,style:Ue,"data-expanded":Ie,onSubmit:se,"data-type":Me,"aria-label":_,ref:Q,children:[ie,_e,Wt]}),e[80]=_,e[81]=fe,e[82]=se,e[83]=we,e[84]=Ue,e[85]=Ie,e[86]=Q,e[87]=ie,e[88]=_e,e[89]=Wt,e[90]=hs):hs=e[90],hs},Ou=t=>{"use forget";var f;const e=F.c(20);let s,n,o,a,i,l,c,u;if(e[0]!==t?(f=t,{disableMotion:o,layout:i,layoutDependency:l,transition:u,initial:a,animate:s,children:n}=f,c=De(f,["disableMotion","layout","layoutDependency","transition","initial","animate","children"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=u):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],u=e[8]),o){let m;return e[9]!==n||e[10]!==c?(m=r.jsx("div",U(T({},c),{children:n})),e[9]=n,e[10]=c,e[11]=m):m=e[11],m}let d;return e[12]!==s||e[13]!==n||e[14]!==a||e[15]!==i||e[16]!==l||e[17]!==c||e[18]!==u?(d=r.jsx(gt.div,U(T({layout:i,layoutDependency:l,transition:u,initial:a,animate:s},c),{children:n})),e[12]=s,e[13]=n,e[14]=a,e[15]=i,e[16]=l,e[17]=c,e[18]=u,e[19]=d):d=e[19],d},Gz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx(r.Fragment,{children:s}),e[0]=s,e[1]=n):n=e[1],n},Vz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:HDe,children:s}),e[0]=s,e[1]=n):n=e[1],n},zz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx(r.Fragment,{children:s}),e[0]=s,e[1]=n):n=e[1],n},Wz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=s?r.jsx(r.Fragment,{children:s}):null,e[0]=s,e[1]=n):n=e[1],n},qz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx("div",{onPointerDown:GDe,children:s}),e[0]=s,e[1]=n):n=e[1],n},Kz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx("div",{onPointerDown:VDe,children:s}),e[0]=s,e[1]=n):n=e[1],n},Yz=t=>{"use forget";const e=F.c(5),{children:s,width:n}=t,a=(n===void 0?"full":n)==="fit"?"w-fit":"w-full";let i;e[0]!==a?(i=z(a),e[0]=a,e[1]=i):i=e[1];let l;return e[2]!==s||e[3]!==i?(l=r.jsx("div",{className:i,onPointerDown:zDe,children:s}),e[2]=s,e[3]=i,e[4]=l):l=e[4],l},Qz=t=>{"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx(r.Fragment,{children:s}),e[0]=s,e[1]=n):n=e[1],n};function $De(t){const e=t==null?void 0:t.parentElement;if(!t||!e)return;const s=()=>{const o=B9(t,"data-collapse-labels"),a=t.scrollWidth>(o?0:e.clientWidth);dc(t,"data-collapse-labels",a)},n=new ResizeObserver(s);return n.observe(t),n.observe(e),()=>n.disconnect()}function HDe(t){return t.stopPropagation()}function GDe(t){return t.stopPropagation()}function VDe(t){return t.stopPropagation()}function zDe(t){return t.stopPropagation()}const tdt=Object.freeze(Object.defineProperty({__proto__:null,BaseFooterAction:Wz,Composer:UDe,FooterAction:qz,HeaderSlot:Yz,HiddenFormInput:Qz,LeadingAction:zz,PrimaryContent:Gz,SubmitButton:Vz,TrailingFooterAction:Kz},Symbol.toStringTag,{value:"Module"})),sdt=oa(t=>vt(()=>{var d,f;if(!WDe(t))return[];const e=Cs(t),s=c0(t),n=s!=null?uw(s):void 0,a=zX(t.ctx)?WX(t.ctx,n):na(t.ctx),i=pp(t.ctx),l=gp(t.ctx),c=(f=(d=ct(t.ctx))==null?void 0:d.isWorkspaceAccount())!=null?f:!1,u=qX(t);return a==null?void 0:a.filter(m=>!(!k9({systemHint:m,modelConfig:e,conversationMode:s,isTemporaryChat:i,isDeveloperMode:l,isWorkspaceTenant:c,startedWithByoMcp:u})||m.systemHint===Ye.Agent&&!qDe(t)||m.systemHint===Ye.Slurm&&!KDe(t)))},{equals:fi})),WDe=oa(t=>vt(()=>{const e=c0(t);return e==null||e.kind===Pt.PrimaryAssistant||e.kind===Pt.GizmoInteraction&&Hc(t.ctx,uw(e))})),qDe=oa(t=>vt(()=>{var o,a,i;if(!Ee(t.ctx,"3084799213")||Ew(t))return!0;const s=U9(t,l=>y9(l.message));return(i=(a=(o=s==null?void 0:s.message.metadata)==null?void 0:o.system_hints)==null?void 0:a.includes(Ye.Agent))!=null?i:!1})),KDe=oa(t=>vt(()=>{const e=c0(t);return(e==null?void 0:e.kind)!==Pt.GizmoInteraction||!e.gizmo||KX(e.gizmo)&&!wd(e.gizmo)})),ndt=({clientThreadId:t,accountUserId:e})=>{var o;const s=Qe(t,a=>a==null?void 0:a.sharedProjectConversationOwner);return(s==null?void 0:s.id)!=null&&s.id!==e?r.jsx("p",{className:"text-token-text-secondary mb-2 text-center text-xs",children:r.jsx(j,{id:"thread.sharedProjectConversationOwnerNotice",defaultMessage:"This is a conversation between ChatGPT and {name}. Responding will create a branch.",values:{name:(o=s==null?void 0:s.name)!=null?o:"the owner"}})}):null};function odt(){const t=ne();return r.jsx(ke,{onClick:()=>{tn.openModal(Lm.SharedConversationModeration)},className:"w-1/3",children:t.formatMessage({id:"thread.sharedConversation.moderate",defaultMessage:"Moderate conversation"})})}function adt(){const[t,e]=x.useState({undoStack:[],currentIndex:-1});function s(i){e(l=>({undoStack:[...l.undoStack.slice(0,l.currentIndex+1),i],currentIndex:l.currentIndex+1}))}function n(){e(i=>({undoStack:i.undoStack,currentIndex:Math.max(i.currentIndex-1,-1)}))}function o(){e(i=>({undoStack:i.undoStack,currentIndex:Math.min(i.currentIndex+1,i.undoStack.length-1)}))}function a(){e({undoStack:[],currentIndex:-1})}return{currentDrawnShape:t.undoStack.length>0?t.undoStack[t.currentIndex]:null,onNewDrawnShape:s,canUndoDrawing:t.currentIndex>=0,undoDrawing:n,canRedoDrawing:t.currentIndex<t.undoStack.length-1,redoDrawing:o,clearAllDrawings:a}}const YDe=Pe(()=>me(()=>import("./g6zoy6d6yr7gl0wr.js"),__vite__mapDeps([263,1,3,4,264,265])).then(t=>t.DynamicDrawingCanvas)),QDe=136;function rdt({image:t,drawingState:e,drawingCanvasRef:s}){return r.jsx("div",{className:"pointer-events-none absolute inset-0 z-[60] overflow-visible",children:r.jsx("div",{className:"pointer-events-auto absolute inset-0",children:r.jsx(YDe,{drawingCanvasRef:s,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:QDe,canvasWidth:t.width,canvasHeight:t.height,currentDrawnShape:e.currentDrawnShape,onNewDrawnShape:e.onNewDrawnShape})})})}function JDe(n){var o=n,{className:t,children:e}=o,s=De(o,["className","children"]);return r.jsx(P7,U(T({className:t},s),{children:e}))}const ZDe=o=>{var a=o,{value:t,className:e,label:s}=a,n=De(a,["value","className","label"]);return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cx,T({id:t,value:t,className:z("border-token-text-tertiary hover:bg-token-main-surface-tertiary h-4 w-4 shrink-0 gap-2 rounded-full border bg-transparent shadow-sm outline-hidden",e)},n)),r.jsx("label",{htmlFor:t,className:"w-full cursor-pointer",children:s})]})},XDe=s=>{var n=s,{className:t}=n,e=De(n,["className"]);return r.jsx(wx,T({className:z("after:bg-token-text-primary relative flex h-full w-full items-center justify-center after:block after:h-2 after:w-2 after:rounded-[50%] after:content-['']",t)},e))},mv={Root:JDe,Item:ZDe,Indicator:XDe};function Jz(s){var n=s,{className:t}=n,e=De(n,["className"]);return r.jsx("textarea",T({className:z("form-textarea border-token-border-default bg-token-main-surface-secondary text-token-text-primary focus:border-token-text-primary focus:ring-token-text-primary w-full rounded-lg border text-sm focus:shadow-none focus:outline-hidden",t)},e))}function eFe(t){var e,s;return((s=(e=t.sub_reasons)==null?void 0:e.length)!=null?s:0)===0&&t.details_placeholder==null&&t.link_attachment==null&&t.subtext==null}function idt(t,e,s,n,o,a={},i,l,c){const u=Kt(),d={};return i&&jn(i)&&l&&(d["chatgpt-project-id"]=i,d["chatgpt-conv-owner-id"]=l),c&&(d["chatgpt-conv-message-id"]=c),ds({mutationFn:f=>{var p,g;return ut()?de.safePost("/report_flow/report",{requestBody:U(T({},f),{entity_type:n,entity_id:s,additional_fields_values:T(T({},(p=f.additional_fields_values)!=null?p:{}),a!=null?a:{}),product_area:o}),additionalHeaders:d,authOption:is.SendIfAvailable}):BC.safePost("/report_flow/report",{requestBody:U(T({},f),{entity_type:n,entity_id:s,additional_fields_values:T(T({},(g=f.additional_fields_values)!=null?g:{}),a!=null?a:{}),product_area:o}),authOption:is.Anonymous})},onError:f=>{var m;Ge.addError(new Error("Error occurred while reporting",{cause:f}),{entityType:n,id:s}),u.danger(e.formatMessage({id:"report.submitError",defaultMessage:"Error reporting: {detail}"},{detail:f.message}),{toastId:"report_mutation_failed_to_report",loggingTitle:String((m=f==null?void 0:f.message)!=null?m:""),loggingDescription:"Error message when submitting a report fails"})}})}function ldt(t,e){return dt({queryKey:["reportReasons",{entityType:e}],queryFn:()=>ut()?de.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:is.SendIfAvailable}):BC.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:is.Anonymous})})}var yP;Mt.div(yP||(yP=St(["divide-y overflow-hidden rounded-md border border-token-border-medium"])));var bP;Mt.button(bP||(bP=St(["w-full border-token-border-medium p-2 text-start text-sm hover:bg-token-main-surface-secondary"])));var vP;const tFe=Mt.div(vP||(vP=St(["text-base font-medium"])));var SP;const sFe=Mt.div(SP||(SP=St(["text-sm text-token-text-secondary"])));function tm({header:t,subHeader:e}){return t==null&&e==null?null:r.jsxs("div",{className:"mb-4",children:[t!=null&&r.jsx(tFe,{children:t}),e!=null&&r.jsx(sFe,{children:e})]})}function nFe({reasons:t,setSelectedReason:e,selectedReason:s}){var n;return r.jsx(mv.Root,{value:(n=s==null?void 0:s.id)!=null?n:"",onValueChange:o=>e(t.find(a=>a.id===o)),className:"flex flex-col gap-3",children:t.map(o=>r.jsx(mv.Item,{value:o.id,label:o.cta,children:r.jsx(mv.Indicator,{})},o.id))})}function oFe({reason:t,details:e,setDetails:s,name:n,setName:o,email:a,setEmail:i,showName:l,showEmail:c}){const u=l||c,d=ne(),f=d.formatMessage({id:"report.loggedOut.name",defaultMessage:"Your name"}),m=d.formatMessage({id:"report.loggedOut.email",defaultMessage:"Your email address"}),p=d.formatMessage({id:"report.loggedOut.details",defaultMessage:"Add details"});return r.jsxs("div",{className:"flex flex-col gap-4",children:[u&&r.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[l&&r.jsxs("div",{className:"flex flex-col gap-1",children:[f,r.jsx(Wm,{ariaLabel:f,name:"name",type:"text",value:n,onChange:g=>o(g.target.value)})]}),c&&r.jsxs("div",{className:"flex flex-col gap-1",children:[m,r.jsx(Wm,{ariaLabel:m,name:"email",type:"email",value:a,onChange:g=>i(g.target.value)})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[u&&p,r.jsx(Jz,{"aria-label":u?p:void 0,value:e,onChange:g=>s(g.target.value),placeholder:!u&&t.details_placeholder?t.details_placeholder:void 0,autoFocus:!0,className:"bg-token-main-surface-primary!"})]}),t.subtext!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:t.subtext})]})}function aFe({reason:t}){return r.jsx("div",{className:"text-sm",children:r.jsx("div",{className:"mb-2",children:t.link_explanation})})}function cdt(t){"use forget";var q,W;const e=F.c(55),{reasons:s,submitReport:n,title:o,onClose:a,header:i,footerSecondaryButton:l}=t,c=ne();let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0];const[d,f]=x.useState(u);let m=s,p;for(const $ of d)p=m.find(Z=>Z.id===$.id),m=(q=p==null?void 0:p.sub_reasons)!=null?q:[];const[g,h]=x.useState(),_=g!=null&&eFe(g),[b,y]=x.useState(""),[v,S]=x.useState(""),[C,w]=x.useState(""),k=(W=p==null?void 0:p.additional_fields)==null?void 0:W.map(iFe),E=k==null?void 0:k.includes(K3.UserName),M=k==null?void 0:k.includes(K3.UserEmail);let N;if(_){let $;e[1]!==g.id||e[2]!==n?($=()=>{n.mutateAsync({reason:{id:g.id}})},e[1]=g.id,e[2]=n,e[3]=$):$=e[3];const Z=!g||n.isPending;let K;e[4]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(j,{id:"report.submitReport",defaultMessage:"Submit"}),e[4]=K):K=e[4];let Y;e[5]!==n.isPending||e[6]!==$||e[7]!==Z?(Y=r.jsx(ke,{color:"primary",onClick:$,disabled:Z,loading:n.isPending,children:K}),e[5]=n.isPending,e[6]=$,e[7]=Z,e[8]=Y):Y=e[8],N=Y}else{let $;e[9]!==g?($=()=>{g&&(f(ae=>[...ae,g]),h(void 0))},e[9]=g,e[10]=$):$=e[10];const Z=!g;let K;e[11]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(j,{id:"z5fExR",defaultMessage:"Next"}),e[11]=K):K=e[11];let Y;e[12]!==$||e[13]!==Z?(Y=r.jsx(ke,{color:"primary",onClick:$,disabled:Z,children:K}),e[12]=$,e[13]=Z,e[14]=Y):Y=e[14],N=Y}let A=p!=null?r.jsx(ke,{onClick:()=>{if(d.length>0){const $=d[d.length-1];f(rFe),h($)}},color:"secondary",children:r.jsx(j,{id:"xJnONr",defaultMessage:"Back"})}):l;const I=(p==null?void 0:p.subtext)!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:p.subtext});let P;e[15]!==c?(P=c.formatMessage({id:"report.submittedModal.header.2",defaultMessage:"Thanks for your report"}),e[15]=c,e[16]=P):P=e[16];const R=P;let O;e[17]!==c?(O=c.formatMessage({id:"report.submittedModal.subHeader.2",defaultMessage:"We appreciate you taking the time to share this. Our team will review the content to determine if it violates our policies."}),e[17]=c,e[18]=O):O=e[18];const L=O;let D;if(n.isSuccess){A=void 0;let $;e[19]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(j,{id:"Y+ALYr",defaultMessage:"Close"}),e[19]=$):$=e[19];let Z;e[20]!==a?(Z=r.jsx(ke,{color:"primary",onClick:a,children:$}),e[20]=a,e[21]=Z):Z=e[21],N=Z;let K,Y;e[22]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx("br",{}),Y=r.jsx("br",{}),e[22]=K,e[23]=Y):(K=e[22],Y=e[23]);let ae;e[24]===Symbol.for("react.memo_cache_sentinel")?(ae=r.jsx("a",{href:"https://openai.com/transparency-and-content-moderation/",target:"_blank",rel:"noreferrer",className:"break-words underline",children:r.jsx(j,{id:"report.submittedModal.link.2",defaultMessage:"Learn how reports are handled"})}),e[24]=ae):ae=e[24];let se;e[25]!==L?(se=r.jsx(r.Fragment,{children:r.jsxs("div",{className:"text-sm",children:[L,K,Y,ae]})}),e[25]=L,e[26]=se):se=e[26],D=se}else if((p==null?void 0:p.details_placeholder)!=null){let $;e[27]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(j,{id:"report.submitReport",defaultMessage:"Submit"}),e[27]=$):$=e[27],N=r.jsx(ke,{color:"primary",onClick:()=>{let ee;(E||M)&&(ee={},E&&(ee.user_name=v),M&&(ee.user_email=C)),n.mutateAsync({reason:{id:p.id,details:b},additional_fields_values:ee})},disabled:n.isPending,loading:n.isPending,children:$});let Z;e[28]===Symbol.for("react.memo_cache_sentinel")?(Z=r.jsx(tm,{header:r.jsx(j,{id:"CGoWjT",defaultMessage:"Please tell us more"})}),e[28]=Z):Z=e[28];const K=p,Y=E!=null?E:!1,ae=M!=null?M:!1;let se;e[29]!==b||e[30]!==C||e[31]!==v||e[32]!==K||e[33]!==Y||e[34]!==ae?(se=r.jsxs(r.Fragment,{children:[Z,r.jsx(oFe,{reason:K,showName:Y,showEmail:ae,details:b,setDetails:y,name:v,setName:S,email:C,setEmail:w})]}),e[29]=b,e[30]=C,e[31]=v,e[32]=K,e[33]=Y,e[34]=ae,e[35]=se):se=e[35],D=se}else if((p==null?void 0:p.link_attachment)!=null){const $=p.link_attachment;let Z;e[36]===Symbol.for("react.memo_cache_sentinel")?(Z=r.jsx(j,{id:"report.goToForm",defaultMessage:"Go to Form"}),e[36]=Z):Z=e[36],N=r.jsx(ke,{color:"primary",onClick:()=>{window.open($,"_blank")},children:Z});let K;e[37]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(tm,{}),e[37]=K):K=e[37],D=r.jsxs(r.Fragment,{children:[K,r.jsx(aFe,{reason:p}),I]})}else if(m.length>0){let $;e[38]!==i?($=r.jsx(tm,{header:i}),e[38]=i,e[39]=$):$=e[39];const Z=m.length>0&&r.jsx(nFe,{reasons:m,selectedReason:g,setSelectedReason:h});let K;e[40]!==I||e[41]!==$||e[42]!==Z?(K=r.jsxs(r.Fragment,{children:[$,Z,I]}),e[40]=I,e[41]=$,e[42]=Z,e[43]=K):K=e[43],D=K}else if((p==null?void 0:p.subtext)!=null){N=void 0;let $;e[44]!==i?($=r.jsx(tm,{header:i}),e[44]=i,e[45]=$):$=e[45],D=r.jsxs(r.Fragment,{children:[$,r.jsx("div",{className:"text-sm",children:p==null?void 0:p.subtext})]})}else{Ge.addError("Reporting: arrived at empty leaf reason",p),N=void 0,A=void 0;let $;e[46]!==R||e[47]!==L?($=r.jsx(tm,{header:R,subHeader:L}),e[46]=R,e[47]=L,e[48]=$):$=e[48],D=$}const H=n.isSuccess?R:o;let V;return e[49]!==D||e[50]!==a||e[51]!==N||e[52]!==A||e[53]!==H?(V=r.jsx(Ft,{testId:"modal-report-reason-selection",title:H,onClose:a,isOpen:!0,showCloseButton:!0,type:"success",secondaryButton:A,primaryButton:N,children:D}),e[49]=D,e[50]=a,e[51]=N,e[52]=A,e[53]=H,e[54]=V):V=e[54],V}function rFe(t){return t.slice(0,-1)}function iFe(t){return t.id}const lFe="https://openai.com/form/report-content/",udt=({areButtonsFullWidth:t,post:e,setIsReportModalOpen:s})=>{const n=!ut(),o=ne(),a=e.attachments.every(i=>i.kind==="media_generation");return r.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-2 sm:px-6",children:r.jsx("div",{className:z("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:r.jsxs("div",{children:[r.jsx(It,{align:"start",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",label:o.formatMessage({id:"rZHri8",defaultMessage:"The content youre seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesnt reflect the views of OpenAI."}),children:r.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:e.text})}),r.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[!a&&r.jsx("div",{className:"cursor-default",children:o.formatMessage(pv.madeWithCanvas)}),r.jsx("div",{children:n?r.jsx("a",{className:"underline",href:lFe,target:"_blank",rel:"noreferrer",onClick:()=>{},children:o.formatMessage(pv.report)}):r.jsx("button",{className:"underline",onClick:()=>{s(!0)},children:o.formatMessage(pv.report)})})]})]})})})},pv=Ne({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"Youre viewing user-generated content that may be unverified or unsafe."}}),cFe=t=>x.createElement("svg",T({width:357,height:62,viewBox:"0 0 357 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),x.createElement("path",{d:"M30.8694 50.7428C19.9894 50.7428 12.4244 42.4978 12.4244 31.1078C12.4244 19.7178 19.9894 11.4728 30.6994 11.4728C38.5194 11.4728 44.5544 16.0628 46.3394 21.6728H58.4944C56.3694 9.43281 44.8944 0.507812 30.5294 0.507812C13.2744 0.507812 0.609375 14.1928 0.609375 31.1078C0.609375 48.0228 12.9344 61.7078 30.6144 61.7078C45.2344 61.7078 56.4544 52.9528 58.7494 40.5428H46.6794C44.6394 46.2378 38.6894 50.7428 30.8694 50.7428Z",fill:"currentColor"}),x.createElement("path",{d:"M88.586 17.5094C82.976 17.5094 78.556 19.9744 76.091 23.3744V1.35938H65.041V60.8594H76.091V37.9944C76.091 31.3644 79.661 27.0294 85.441 27.0294C90.711 27.0294 93.686 31.1094 93.686 36.8044V60.8594H104.736V35.0194C104.736 24.4794 98.276 17.5094 88.586 17.5094Z",fill:"currentColor"}),x.createElement("path",{d:"M150.04 33.1478C150.04 23.4578 143.41 17.5078 131.17 17.5078C121.14 17.5078 113.15 23.1178 111.79 31.2778H122.925C123.775 28.4728 126.835 26.2628 131.085 26.2628C136.61 26.2628 139.245 29.1528 139.245 34.1678V34.4228L128.45 35.3578C117.145 36.2928 110.855 40.8828 110.855 49.5528C110.855 56.8628 117.145 61.7078 125.9 61.7078C131.765 61.7078 137.46 59.4128 139.84 55.5878C139.84 57.4578 140.01 59.1578 140.35 60.8578H150.635C150.21 58.1378 150.04 54.9928 150.04 51.3378V33.1478ZM139.245 43.2628C139.245 48.2778 135.505 53.3778 127.94 53.3778C123.86 53.3778 121.65 51.4228 121.65 48.5328C121.65 45.3878 123.775 43.4328 128.535 43.0078L139.245 42.0728V43.2628Z",fill:"currentColor"}),x.createElement("path",{d:"M173.245 4.58984H162.195V18.3598H153.355V27.2848H162.195V48.1948C162.195 56.2698 166.36 60.8598 175.285 60.8598H184.125V51.6798H178.515C174.775 51.6798 173.245 50.4048 173.245 46.9198V27.2848H184.125V18.3598H173.245V4.58984Z",fill:"currentColor"}),x.createElement("path",{d:"M239.033 29.0678H219.993V38.5878H236.228C235.123 46.4928 227.728 51.2528 219.483 51.2528C207.583 51.2528 200.613 42.4978 200.613 31.1078C200.613 19.7178 208.433 11.3878 219.143 11.3878C226.453 11.3878 232.403 15.6378 233.933 20.3978H246.088C243.793 8.58281 232.913 0.507812 218.973 0.507812C201.803 0.507812 189.053 14.3628 189.053 31.1928C189.053 48.0228 200.783 61.7078 218.293 61.7078C226.283 61.7078 233.508 58.1378 236.738 53.2928V60.8578H246.598V36.6328C246.598 31.7878 243.878 29.0678 239.033 29.0678Z",fill:"currentColor"}),x.createElement("path",{d:"M281.703 1.35938H255.354V60.8594H266.573V38.5044H281.789C293.519 38.5044 301.849 31.6194 301.849 20.0594C301.849 8.49937 293.518 1.35938 281.703 1.35938ZM280.939 28.6444H266.573V11.5594H280.939C286.719 11.5594 290.458 14.8744 290.458 20.0594C290.458 25.2444 286.719 28.6444 280.939 28.6444Z",fill:"currentColor"}),x.createElement("path",{d:"M304.652 1.35938V11.5594H324.967V60.8594H336.187V11.5594H356.587V1.35938H304.652Z",fill:"currentColor"}));function Zz({className:t}){const e=ne();return r.jsx(cFe,{className:z("h-6 w-24",t),"aria-label":e.formatMessage({id:"VJmCc9",defaultMessage:"ChatGPT logo"}),role:"img"})}const Xz=Pe(()=>me(()=>import("./lxmmbf3g329d7x3l.js"),__vite__mapDeps([266,1,3,4,267,268,269,270,271,96,202,272,90,273,274,89,275,33,276,277,88,91,46,47,25,26,24,27,22,28,92,50,87,93,23,74,32,34,35,278,203,204,279,280,281,282,79,80,140,136,39,127])).then(t=>t.AttachmentContent));function uFe(){Xz.prefetch()}function eW({attachments:t,variant:e,className:s,clientThreadId:n}){return r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsx("div",{className:s,children:r.jsx(Xz,{attachment:o,caption:"",variant:e,hasActiveRequest:!1,clientThreadId:n})},a))})}function dFe({attachments:t,clientThreadId:e,className:s}){var a;const n=G(),o=((a=t[0])==null?void 0:a.kind)==="media_generation";return r.jsx(YX,{conversation:Et(n,e),children:r.jsxs("div",{className:z("bg-token-primary relative m-0 box-border w-full overflow-hidden",s),"data-testid":"sharing-post-unfurl-view",children:[r.jsx(eW,{attachments:t,variant:"unfurl",className:"h-full w-full",clientThreadId:e}),r.jsx("div",{className:z("absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent",o?"from-black/35":"from-token-main-surface-primary")}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(Zz,{className:z("inline h-4 w-24 text-end",o&&"text-white")})})]})})}const fFe=Object.freeze(Object.defineProperty({__proto__:null,PostListPreview:eW,PostUnfurlPreview:dFe,prefetchPostPreviewContentComponent:uFe},Symbol.toStringTag,{value:"Module"}));function mFe(t){"use forget";var N;const e=F.c(32),{action:s,ChatsIcon:n,FileBlankIcon:o,hintIcons:a,onItemClick:i,starter:l,index:c,hint:u}=t;let d,f,m,p=!1;e:switch(s.action_type){case"chat":{d=s.title,f=s.message,m=(N=s.system_hint)!=null?N:void 0,p=m==="agent";break e}case"navigation":d=s.title,f=s.subtitle||s.url}let g;e[0]!==n||e[1]!==a?(g=function(I){"use forget";const{hint:P}=I;if(P){const R=a==null?void 0:a[P];if(R){const O=R;return r.jsx(O,{className:"block h-4 w-4 text-token-text-primary","aria-hidden":!0})}}return r.jsx(n,{className:"block h-4 w-4 text-token-text-primary"})},e[0]=n,e[1]=a,e[2]=g):g=e[2];const h=g;if(!d)return null;let _;e[3]!==u||e[4]!==c||e[5]!==i||e[6]!==l?(_=A=>i(A,l,c,u),e[3]=u,e[4]=c,e[5]=i,e[6]=l,e[7]=_):_=e[7];let b;e[8]!==h||e[9]!==o||e[10]!==s.action_type||e[11]!==s.system_hint?(b=r.jsx("div",{className:"mt-[2px] shrink-0 self-start","aria-hidden":!0,children:s.action_type==="chat"?r.jsx(h,{hint:s.system_hint}):r.jsx(o,{className:"text-token-text-primary block h-4 w-4"})}),e[8]=h,e[9]=o,e[10]=s.action_type,e[11]=s.system_hint,e[12]=b):b=e[12];let y;e[13]===Symbol.for("react.memo_cache_sentinel")?(y=z("min-w-0 flex-1 overflow-hidden [mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]"),e[13]=y):y=e[13];let v;e[14]!==d?(v=r.jsx("div",{className:"text-token-text-primary text-sm leading-5 whitespace-nowrap",children:d}),e[14]=d,e[15]=v):v=e[15];let S;e[16]!==p?(S=p&&r.jsx("span",{className:"ms-1 inline-flex shrink-0 items-center rounded-full px-1.5 py-px text-xs",style:{color:"var(--colors-fills-accented-fill-a-prominent, #007AFD)",background:"var(--colors-fills-accented-fill-a-subtle, rgba(0, 122, 253, 0.10))"},children:r.jsx(j,{id:"4ufBv1",defaultMessage:"NEW"})}),e[16]=p,e[17]=S):S=e[17];let C;e[18]!==v||e[19]!==S?(C=r.jsxs("div",{className:"flex items-center gap-2",children:[v,S]}),e[18]=v,e[19]=S,e[20]=C):C=e[20];let w;e[21]!==f?(w=f?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm whitespace-nowrap",children:f}):null,e[21]=f,e[22]=w):w=e[22];let k;e[23]!==C||e[24]!==w?(k=r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx("div",{className:"flex min-w-0 items-start gap-2",children:r.jsxs("div",{className:y,children:[C,w]})})}),e[23]=C,e[24]=w,e[25]=k):k=e[25];let E;e[26]!==b||e[27]!==k?(E=r.jsxs("div",{className:"flex items-start gap-2 overflow-hidden",children:[b,k]}),e[26]=b,e[27]=k,e[28]=E):E=e[28];let M;return e[29]!==E||e[30]!==_?(M=r.jsx("li",{className:"w-full",children:r.jsx("button",{type:"button",onClick:_,className:"relative w-full rounded-xl py-3 ps-3.5 pe-3 text-start transition-colors hover:bg-black/5 dark:hover:bg-white/5",children:E})}),e[29]=E,e[30]=_,e[31]=M):M=e[31],M}const tW={agent:()=>me(()=>Promise.resolve().then(()=>l6e),void 0),tatertot:()=>me(()=>Promise.resolve().then(()=>qTe),void 0),search:()=>me(()=>Promise.resolve().then(()=>fD),void 0),picture_v2:()=>me(()=>Promise.resolve().then(()=>Ube),void 0),reason:()=>me(()=>Promise.resolve().then(()=>ule),void 0),canvas:()=>me(()=>Promise.resolve().then(()=>KTe),void 0),research:()=>me(()=>Promise.resolve().then(()=>rae),void 0)},pFe=Promise.all([me(()=>Promise.resolve().then(()=>aae),void 0),me(()=>Promise.resolve().then(()=>ahe),void 0)]).then(([t,e])=>({ChatsIcon:t.default,FileBlankIcon:e.default})),xm=new Map,gv=new Map;function gFe(t){var s;const e=new Set;for(const n of t){if(n.action_type!=="chat")continue;const o=(s=n.system_hint)!=null?s:void 0;o&&(xm.has(o)||tW[o]&&e.add(o))}return Array.from(e)}async function hFe(t){if(t.length===0)return{};await Promise.all(t.map(s=>{if(xm.has(s))return Promise.resolve();const n=tW[s];if(!n)return Promise.resolve();let o=gv.get(s);return o||(o=n().then(a=>{xm.set(s,a.default)}).catch(()=>{xm.delete(s)}).finally(()=>{gv.delete(s)}),gv.set(s,o)),o}));const e=t.map(s=>{const n=xm.get(s);return n?[s,n]:null}).filter(Boolean);return Object.fromEntries(e)}function _Fe(t,e){const[s,n]=x.useState(null),[o,a]=x.useState({}),[i,l]=x.useState(t),[c,u]=x.useState(e);return x.useEffect(()=>{const d=gFe(t);if(s&&d.length===0){l(t),u(e);return}let f=!1;async function m(){const[p,g]=await Promise.all([s?Promise.resolve(s):pFe,hFe(d)]);f||(n(p),Object.keys(g).length>0&&a(h=>T(T({},h),g)),l(t),u(e))}return m(),()=>{f=!0}},[s,t,e]),{icons:s,hintIcons:o,items:i,suggestions:c}}function xFe(t){"use forget";const e=F.c(13),{items:s,suggestions:n,onItemClick:o}=t,{icons:a,hintIcons:i,items:l,suggestions:c}=_Fe(s,n);if(!a)return null;let u;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==l||e[4]!==c){let f;e[6]!==i||e[7]!==a||e[8]!==o||e[9]!==c?(f=(m,p)=>{var _,b;const g=c[p];if(!g)return null;const h=m.action_type==="chat"&&(_=m.system_hint)!=null?_:null;return r.jsx(mFe,{action:m,ChatsIcon:a.ChatsIcon,FileBlankIcon:a.FileBlankIcon,hintIcons:i,onItemClick:o,starter:g,index:p,hint:h},(b=m.id)!=null?b:m.title)},e[6]=i,e[7]=a,e[8]=o,e[9]=c,e[10]=f):f=e[10],u=l.map(f),e[0]=i,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=u}else u=e[5];let d;return e[11]!==u?(d=r.jsx("ul",{className:"flex w-full flex-col gap-2",children:u}),e[11]=u,e[12]=d):d=e[12],d}class yFe{static async getOnPageSuggestions({current_page:e}){return await de.safePost("/aura/suggestions/sidechat",{requestBody:{current_page:e}})}}const sW=300*1e3,nW=1800*1e3,bFe=ys(t=>{const e=js(t,"2712016364"),s=e.get("staleTimeMs",sW),n=e.get("gcTimeMs",nW);return{staleTime:s,gcTime:n}}),vFe=(t,e,s,n)=>T({queryKey:["aura","sidechatSuggestions",s!=null?s:"anon",t],enabled:!!t&&!!e,staleTime:sW,gcTime:nW,refetchOnWindowFocus:!1,queryFn:async()=>{if(!t||!e)throw new Error("Missing url or title for on-page suggestions request.");return await yFe.getOnPageSuggestions({current_page:{url:t,title:e}})}},n!=null?n:{});function SFe(t,e,s){"use forget";var l;const n=F.c(8),o=G();let a,i;if(n[0]!==o||n[1]!==s||n[2]!==e||n[3]!==t){const c=ct(o),u=(l=c==null?void 0:c.id)!=null?l:void 0,{staleTime:d,gcTime:f}=bFe(o);let m;n[6]!==o?(m=Ee(o,"3830740688"),n[6]=o,n[7]=m):m=n[7];const p=m;a=dt,i=vFe(t,e,u,{enabled:!!(t&&e&&!s&&p),staleTime:d,gcTime:f}),n[0]=o,n[1]=s,n[2]=e,n[3]=t,n[4]=a,n[5]=i}else a=n[4],i=n[5];return a(i)}function CFe(t,e,s){B.logEventWithStatsig("kaur1br5: Suggested Action Displayed","chatgpt_suggested_action_displayed",n3(t,e,s))}function wFe(t,e,s){B.logEventWithStatsig("kaur1br5: Suggested Action Selected","chatgpt_suggested_action_selected",n3(t,e,s))}function kFe(t,e){B.logEventWithStatsig("kaur1br5: Suggested Actions Panel Displayed","chatgpt_suggested_actions_panel_displayed",EFe(t,e))}function TFe(t,e,s){B.logEventWithStatsig("kaur1br5: Suggested Actions Panel Clicked","chatgpt_suggested_actions_panel_clicked",n3(t,e,s))}function oW(t){const e={location:t.location,impression_id:t.impression_id};return t.page_classification_domain&&(e.page_classification_domain=t.page_classification_domain),t.page_classification_type&&(e.page_classification_type=t.page_classification_type),e}function n3(t,e,s){var o;const n=U(T({},oW(s)),{suggestion_index:e,suggestion_id:(o=t.id)!=null?o:null,suggestion_type:t.action_type});return t.action_type==="chat"&&t.system_hint&&(n.system_hint=t.system_hint),n}function EFe(t,e){return U(T({},oW(e)),{suggestions_count:t})}const hj="default_agent_suggestion",MFe=[{reason:"Default suggestion",action_type:"chat",id:Ds(),title:"Summarize",message:"Summarize this content"},{reason:"Default suggestion",action_type:"chat",id:Ds(),title:"Learn more",message:"Find related information and links to this content",system_hint:"search"},{reason:"Default suggestion",action_type:"chat",id:Ds(),title:"What can I do here?",message:"Suggest useful actions for this content"}];function NFe(t){var n,o;let e="";switch(t.action_type){case"chat":e=t.message;break;case"navigation":e=t.title;break}const s=t.action_type==="chat"&&t.system_hint?ux(String(t.system_hint)):void 0;return{type:it.Starter,title:(n=t.title)!=null?n:"",body:"",prompt:String(e!=null?e:""),id:(o=t.id)!=null?o:void 0,data:T({},s?{system_hint:s}:{})}}function AFe(){"use no forget";var H,V,q;const t=G(),e=oe(lt.context$),s=e==null?void 0:e.url,n=e==null?void 0:e.title,o=(H=e==null?void 0:e.blocked)!=null?H:!1,a=oe(()=>$9(t)),i=Ee(t,"292680291"),l=o||a||!i,{data:c,isLoading:u}=SFe(s,n,l),d=au(),f=Ko.useStore(),{activeSystemHintType:m,activeConnectorSystemTypes:p}=Ko.useState(W=>({activeSystemHintType:W.activeSystemHintType,activeConnectorSystemTypes:W.activeConnectorSystemTypes})),{store:g}=Mf(),h=x.useRef(void 0),[_,b]=x.useState(null);x.useEffect(()=>{let W=!1;async function $(){if(e&&e.url&&e.title){const Z=await wp(e,tG,"user");W||b(Z)}}return $(),()=>{W=!0}},[e]),x.useEffect(()=>{if(l){h.current=void 0;return}c&&(h.current=c)},[c,l]);const y=!e||!e.url||!e.title,v=l?void 0:c!=null?c:h.current,C=!(v!==void 0)&&(u||y)||!_||l,w=v==null?void 0:v.actions,k=x.useMemo(()=>{if(l)return[];const W=w!=null?w:[],$=3,Z=new Set;m&&Z.add(m);for(const ee of p)Z.add(ee);const K=Z.size>0,Y=ee=>{if(!K)return!0;if(ee.action_type!=="chat"||!ee.system_hint)return!1;const re=ux(ee.system_hint);return re?Z.has(re):!1},ae=W.filter(ee=>K&&ee.id===hj?!1:Y(ee));if(K)return ae.slice(0,$);const se=W.slice(0,$);return se.length>0?se:MFe.slice(0,$)},[p,m,l,w]),E=x.useMemo(()=>k.map(W=>{var K;const $=NFe(W),Z=T(T({},(K=$.data)!=null?K:{}),_!=null&&_.kaur1br5?{kaur1br5:_.kaur1br5}:{});return U(T({},$),{data:Z})}),[k,_]),M=x.useMemo(()=>k.map((W,$)=>{var Z,K;return"".concat((K=(Z=W.id)!=null?Z:W.title)!=null?K:"","-").concat($)}).join("|"),[k]),N=x.useRef(Ds());x.useEffect(()=>{N.current=Ds()},[M]);const A=(V=v==null?void 0:v.id)!=null?V:N.current,I=x.useMemo(()=>{var W,$;return{location:"sidebar",impression_id:A,page_classification_domain:(W=v==null?void 0:v.page_classification)==null?void 0:W.domain,page_classification_type:($=v==null?void 0:v.page_classification)==null?void 0:$.page_type}},[v,A]),P=x.useRef(null);x.useEffect(()=>{C||k.length===0||P.current!==A&&(P.current=A!=null?A:null,kFe(k.length,I),k.forEach((W,$)=>{CFe(W,$,I)}))},[I,A,C,k]);const R=oe(()=>na(t)),O=(q=ct(t))==null?void 0:q.isWorkspaceAccount(),L=(W,$,Z,K)=>{var Y;if(k[Z]&&(TFe(k[Z],Z,I),wFe(k[Z],Z,I)),f.setActiveSystemHint(K,R,{locked:!1},O),((Y=$.data)==null?void 0:Y.system_hint)==="agent"){const ae=g.getSharedProps();if(ae!=null&&ae.composerController){const se=Ht(ae.composerController);if($.id===hj)return;Co(se,$.prompt)}return}d(W,$,E,Z)};return{shouldShowSuggestions:!C&&k.length>0,items:k,suggestions:E,handleItemClick:L}}const IFe="sidechat_ipc";function jFe(t,e){const s=t.trim(),n=s.length>0?s.slice(0,80):"Atlas On Page Suggestion";return{type:it.Starter,title:n,body:"",prompt:t,id:"".concat(IFe,"-").concat(Ds()),data:T({},e?{system_hint:e}:{})}}function _j(t){var o,a,i;if(!t||!t.url)return null;const e=(o=t.selection)!=null?o:"",s=t.blocked?"blocked":"unblocked",n=(a=t.base64favicon)!=null?a:"";return[(i=t.id)!=null?i:"unknown",t.url,e,s,n].join("|")}function PFe(t){return t!==void 0}function RFe(){"use forget";var N,A;const t=F.c(26),e=G();let s;t[0]!==e?(s=()=>$9(e),t[0]=e,t[1]=s):s=t[1];const n=oe(s),o=oe(lt.context$);let a;t[2]!==e?(a=Ee(e,"292680291"),t[2]=e,t[3]=a):a=t[3];const i=a,l=(N=o==null?void 0:o.blocked)!=null?N:!1,c=n||l||!i,u=!c,[d,f]=x.useState(null);let m,p;t[4]!==u||t[5]!==o?(m=()=>{if(!u){f(null);return}const I=_j(o);if(!o||!I){f(null);return}const P=I;let R=!1;return async function(){const D=await wp(o,tG,"user");R||f({signature:P,metadata:D})}(),()=>{R=!0}},p=[u,o],t[4]=u,t[5]=o,t[6]=m,t[7]=p):(m=t[6],p=t[7]),x.useEffect(m,p);const g=oe(lt.wantsSideChatCompletion$),{store:h}=Mf(),_=au(),b=Ko.useStore();let y;t[8]!==e?(y=()=>na(e),t[8]=e,t[9]=y):y=t[9];const v=oe(y);let S;t[10]!==e?(S=(A=ct(e))==null?void 0:A.isWorkspaceAccount(),t[10]=e,t[11]=S):S=t[11];const C=S;let w;t[12]!==o?(w=_j(o),t[12]=o,t[13]=w):w=t[13];const k=w;let E,M;t[14]!==d||t[15]!==u||t[16]!==c||t[17]!==C||t[18]!==b||t[19]!==_||t[20]!==v||t[21]!==k||t[22]!==h||t[23]!==g?(E=()=>{var H,V,q;if(!u||!g)return;const I=h.getSharedProps();if(c||!I){lt.wantsSideChatCompletion$.set(!1),lt.sideChatCompletionDetails=void 0;return}if(!k||!d||d.signature!==k)return;lt.wantsSideChatCompletion$.set(!1);const P=lt.sideChatCompletionDetails;if(lt.sideChatCompletionDetails=void 0,!P)return;const R=P.prompt,O=(V=((H=P.systemHints)!=null?H:[]).map(OFe).filter(PFe))==null?void 0:V[0];O&&b.setActiveSystemHint(O,v,{locked:!1},C);const L=jFe(R,O),D=d.metadata.kaur1br5?U(T({},L),{data:U(T({},(q=L.data)!=null?q:{}),{kaur1br5:d.metadata.kaur1br5})}):L;_(new CustomEvent("aura-on-page-suggestion"),D,[D],0)},M=[u,g,h,d,c,_,b,v,C,k],t[14]=d,t[15]=u,t[16]=c,t[17]=C,t[18]=b,t[19]=_,t[20]=v,t[21]=k,t[22]=h,t[23]=g,t[24]=E,t[25]=M):(E=t[24],M=t[25]),x.useEffect(E,M)}function OFe(t){return ux(t)}const LFe=Pe(()=>me(()=>import("./mtk1qztvnb31pw5r.js").then(t=>t.CH),__vite__mapDeps([3,1,4])).then(t=>t.OpenaiLogo));function DFe(){return r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx(LFe,{className:"h-11 w-11 opacity-40"})})}function ddt(t){"use forget";const e=F.c(5),{showEmptyState:s}=t;RFe();const{shouldShowSuggestions:n,items:o,suggestions:a,handleItemClick:i}=AFe();if(!s)return null;if(!n){let c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("div",{className:"flex flex-1 items-center justify-center",children:r.jsx(DFe,{})}),e[0]=c):c=e[0],c}let l;return e[1]!==i||e[2]!==o||e[3]!==a?(l=r.jsx("div",{className:"mt-auto w-full ps-2.5 pe-3 pt-4 pb-3",children:r.jsx(xFe,{items:o,suggestions:a,onItemClick:i})}),e[1]=i,e[2]=o,e[3]=a,e[4]=l):l=e[4],l}function fdt(){const t=G(),e=xn(t),s=oe(lt.wantsAttachUserFile$),n=ne(),o=Kt(),a=Si();x.useEffect(()=>{if(!e||!s)return;lt.wantsAttachUserFile$.set(!1);const i=lt.attachUserFileRequest;if(lt.attachUserFileRequest=void 0,!!i)try{const l=new Uint8Array(i.bytes),c=new File([l],i.name,{type:i.mimeType}),u=tl(c),d=(c.type||i.mimeType).startsWith("image/"),f=d?ko.Multimodal:ko.Retrieval;fr.uploadFile(a,u,c,f,d?[i.mimeType]:[],n,o)}catch(l){Ls.error("failed to attach file",{error:l})}},[e,s,n,o,a])}function mdt(){const t=bs(),e=sn(Ss);x.useEffect(()=>{if(!t||!e)return;const s=a=>{var f,m;const i=a.target;if(!i)return;const l=i.closest("a");if(!l||l.closest("[data-desktop-skip-link-handler]"))return;const c=l.getAttribute("href");if(!c)return;const u=(f=l.getAttribute("target"))!=null?f:"",d=Y3(c,document.baseURI);d&&(QX(a)||(a.preventDefault(),(m=Xv())==null||m.handleLink(d.href,u)))};document.addEventListener("click",s,{capture:!0});const n=window.open,o=(a,i,l)=>{var d;const c=typeof a=="string"?a:a==null?void 0:a.toString();if(!c)return n.call(window,a,i,l);const u=Y3(c,document.baseURI);return u?((d=Xv())==null||d.handleLink(u.href,i!=null?i:""),null):n.call(window,a,i,l)};return window.open=o,()=>{document.removeEventListener("click",s,{capture:!0}),window.open=n}},[t,e])}const FFe=wL.getTracer("aura"),xj=1e4,BFe="aura.request_completion.span.timeout_waiting_for_server_thread_id",UFe="aura.request_completion.router_navigation";function $Fe({conversation:t}){let e=null,s=null,n=null,o=null;function a(){s&&(s(),s=null)}function i(){n&&(n(),n=null)}function l(){o!=null&&(globalThis.clearTimeout(o),o=null)}function c(g){l(),o=globalThis.setTimeout(()=>{(e==null?void 0:e.span)===g&&(g.addEvent("aura.request_completion.timeout_server_thread_id",{timeoutMs:xj}),u({code:Em.ERROR,message:BFe}))},xj)}function u(g){if(!e){a(),i(),l();return}const{span:h,disposeServerWatcher:_}=e;e=null,g&&h.setStatus(g),h.end(),_(),a(),i(),l()}function d(g){a();let h=0,_=0;const b=v=>{(e==null?void 0:e.span)===g&&(h+=1,g.addEvent("window.error",{message:v.message,filename:v.filename,lineno:v.lineno,colno:v.colno}),g.setAttribute("aura.window_error_count",h),v.error instanceof Error?g.recordException(v.error):g.recordException({name:"WindowError",message:v.message}))},y=v=>{if((e==null?void 0:e.span)!==g)return;_+=1;const S=v.reason instanceof Error?v.reason:{name:"UnhandledRejection",message:String(v.reason)};g.addEvent("window.unhandled_rejection",{message:S instanceof Error?S.message:String(v.reason)}),g.setAttribute("aura.window_unhandled_rejection_count",_),g.recordException(S)};window.addEventListener("error",b),window.addEventListener("unhandledrejection",y),s=()=>{window.removeEventListener("error",b),window.removeEventListener("unhandledrejection",y)}}function f(g){var C;i();const h=window.__reactRouterDataRouter;if(!h||typeof h.subscribe!="function")return;let _=(C=h.state.location)==null?void 0:C.key,b=h.state.location,y=0;const v=w=>{var N;if((e==null?void 0:e.span)!==g)return;const k=(N=w.location)==null?void 0:N.key;if(!k)return;if(_===void 0){_=k,b=w.location;return}if(k===_){b=w.location;return}const E=w.location,M=b;_=k,b=E,y+=1,g.addEvent(UFe,{pathname:E.pathname,search:E.search,hash:E.hash,previousPathname:M==null?void 0:M.pathname,previousSearch:M==null?void 0:M.search,previousHash:M==null?void 0:M.hash,historyAction:w.historyAction}),g.setAttribute("aura.router_navigation_count",y)},S=h.subscribe(v);n=()=>{S()}}function m({promptOrigin:g,systemHints:h,modelSlug:_,hasAttachments:b,hasTabContext:y,conduitToken:v,n7jupdLocalSafeMode:S}={}){if(xt(()=>t.serverId$())!=null){u();return}u({code:Em.ERROR,message:"aura.request_completion.span_replaced_before_completion"});const w={"aura.prompt_origin":g!=null?g:"unknown"};h!=null&&h.length&&(w["aura.system_hints"]=h),_&&(w["aura.model_slug"]=_),typeof b=="boolean"&&(w["aura.has_attachments"]=b),typeof y=="boolean"&&(w["aura.has_tab_context"]=y),typeof v=="string"&&v&&(w["aura.conduit_token"]=v),typeof S=="boolean"&&(w["aura.n7jupd_local_safe_mode"]=S);const k=FFe.startSpan("aura.request_completion",{attributes:w});e={span:k,disposeServerWatcher:()=>{}};const E=kl(()=>{const M=t.serverId$();M&&(e==null?void 0:e.span)===k&&(k.setAttribute("aura.server_thread_id",M),u())});(e==null?void 0:e.span)===k?(e.disposeServerWatcher=()=>{E()},d(k),f(k),c(k)):E()}function p(){u({code:Em.ERROR,message:"aura.request_completion.span.cleanup_without_server_thread_id"})}return{start:m,dispose:p}}function HFe(t){return t.width!==void 0&&t.height!==void 0}function GFe(t,e){var i;const s=(i=e==null?void 0:e.filter(HFe))!=null?i:[];if(s.length===0)return{content_type:bt.Text,parts:[t]};const n=s.map(l=>{var c,u;return{content_type:Yo.ImageAssetPointer,asset_pointer:Jv((c=l.id)!=null?c:""),size_bytes:(u=l.size)!=null?u:0,width:l.width,height:l.height}}),o=t,a=[...n,o];return{content_type:bt.MultimodalText,parts:a}}function pdt(t,e){"use forget";const s=F.c(24),n=G();let o;s[0]!==t||s[1]!==n?(o=Et(n,t),s[0]=t,s[1]=n,s[2]=o):o=s[2];const a=o;let i;s[3]!==n?(i=()=>xn(n),s[3]=n,s[4]=i):i=s[4];const l=oe(i),c=oe(lt.wantsRequestCompletion$),u=oe(lt.sidebarUrlTrayOpen$),d=yt(),f=Hs();let m;s[5]!==n?(m=fx(n),s[5]=n,s[6]=m):m=s[6];const p=m;let g;s[7]!==a?(g=$Fe({conversation:a}),s[7]=a,s[8]=g):g=s[8];const h=g;let _,b;s[9]!==h?(_=()=>()=>{h.dispose()},b=[h],s[9]=h,s[10]=_,s[11]=b):(_=s[10],b=s[11]),x.useEffect(_,b);let y,v;s[12]!==h||s[13]!==p||s[14]!==t||s[15]!==n||s[16]!==l||s[17]!==f.search||s[18]!==d||s[19]!==e||s[20]!==u||s[21]!==c?(y=()=>{var I,P,R,O;if(!l||!c)return;lt.wantsRequestCompletion$.set(!1);const S=lt.requestCompletion;if(!S)return;lt.requestCompletionId&&(lt.requestCompletionAckId=lt.requestCompletionId,lt.requestCompletionAckId$.set(lt.requestCompletionId));const C=!!((I=lt.attachments)!=null&&I.length),w=!!((P=lt.tabContext)!=null&&P.length);h.start({promptOrigin:lt.promptOrigin,systemHints:S.systemHints,modelSlug:S.modelSlug,hasAttachments:C,hasTabContext:w,conduitToken:(R=lt.prepareConversationDetails)==null?void 0:R.conduitToken,n7jupdLocalSafeMode:(O=S.n7jupdLocalSafeMode)!=null?O:void 0});const k=GT({namespace:cg.CompletionRequest,opts:{debug:!1}});k.reset();const E=function(D){D&&kd(Et(n,t),D)},M=function(D){if(!D)return;const{prepareState:H,lastPrepareTimestamp:V,conduitToken:q}=D;nt(t,W=>{W.prepareState=H,W.lastPrepareTimestamp=V,W.conduitToken=q!=null?q:null})},N=async function(D,H,V,q,W){var fe,pe,le,ve;const $=(fe=lt.tabContext)==null?void 0:fe[0],Z=u&&p,K=GFe(D,lt.attachments),Y=T(T(T(T({},H.length>0&&{system_hints:H}),((pe=lt.attachments)==null?void 0:pe.length)&&{attachments:lt.attachments}),await wp(Z?$:void 0,(le=lt.promptOrigin)!=null?le:"unknown","user",H)),q!==void 0&&{n7jupd_local_safe_mode:q}),ae=cn(K,Y),se=Z?await XX($,(ve=lt.promptOrigin)!=null?ve:"unknown",H,t):void 0,ee={kind:Pt.PrimaryAssistant},re=T({conversationMode:ee},H.length>0&&{systemHints:H});return{promptMessage:ae,prependMessages:se&&se.length>0?se:void 0,requestedModelId:V!==""?V:void 0,completionMetadata:re,eventSource:"url",conduitToken:W}},A=function(){lt.requestCompletion=void 0,lt.attachments=void 0,lt.prepareConversationDetails=void 0,lt.whisperContent=void 0,lt.tabContext=void 0,lt.promptOrigin=void 0};E(S.modelSlug),M(lt.prepareConversationDetails),(async()=>{var H;const L=await N(S.prompt,S.systemHints,S.modelSlug,S.n7jupdLocalSafeMode,(H=lt.prepareConversationDetails)==null?void 0:H.conduitToken);L.profiler=k;const D=bc(n)&&lt.promptOrigin!=="ntp"?!0:void 0;if(A(),bc(n)){const V=new URLSearchParams(f.search);V.set(JX,ZX.value),d({pathname:"/",search:V.toString()},{replace:D})}e(L)})()},v=[n,l,c,t,e,u,p,f.search,d,h],s[12]=h,s[13]=p,s[14]=t,s[15]=n,s[16]=l,s[17]=f.search,s[18]=d,s[19]=e,s[20]=u,s[21]=c,s[22]=y,s[23]=v):(y=s[22],v=s[23]),x.useEffect(y,v)}function gdt(t){"use forget";const e=F.c(36),s=G();let n;e[0]!==s?(n=xn(s),e[0]=s,e[1]=n):n=e[1];const o=n,a=Hs(),i=yt(),l=oe(t.serverId$),c=Gt(),u=oe(lt.wantsModelSlug$),d=oe(lt.selectedConversationId$),f=oe(lt.wantsNewConversation$),m=oe(lt.newConversationGizmoId$),p=MD();let g;e[2]!==a.pathname||e[3]!==i?(g=E=>{Pl(i,{replace:a.pathname==="/",config:E})},e[2]=a.pathname,e[3]=i,e[4]=g):g=e[4];const h=wn(g);let _,b;e[5]!==o||e[6]!==m||e[7]!==h||e[8]!==f?(_=()=>{if(!o||!f)return;lt.wantsNewConversation$.set(!1),h(m?{urlGizmoId:m}:void 0)},b=[o,f,m,h],e[5]=o,e[6]=m,e[7]=h,e[8]=f,e[9]=_,e[10]=b):(_=e[9],b=e[10]),x.useEffect(_,b);let y;e[11]!==o||e[12]!==p?(y=()=>{!o||!p||lt.selectedConversationId$.set(void 0)},e[11]=o,e[12]=p,e[13]=y):y=e[13];let v;e[14]!==o||e[15]!==p||e[16]!==h?(v=[o,p,h],e[14]=o,e[15]=p,e[16]=h,e[17]=v):v=e[17],x.useEffect(y,v);let S,C;e[18]!==s||e[19]!==o||e[20]!==i||e[21]!==p||e[22]!==c||e[23]!==d||e[24]!==l?(S=()=>{o&&d&&(bc(s)&&p||d!==l&&ak(i,c,d))},C=[o,d,p,i,c,l,s],e[18]=s,e[19]=o,e[20]=i,e[21]=p,e[22]=c,e[23]=d,e[24]=l,e[25]=S,e[26]=C):(S=e[25],C=e[26]),x.useEffect(S,C);let w;e[27]!==t||e[28]!==o||e[29]!==u?(w=()=>{o&&u&&(lt.wantsModelSlug$.set(void 0),kd(t,u))},e[27]=t,e[28]=o,e[29]=u,e[30]=w):w=e[30];let k;e[31]!==t||e[32]!==s||e[33]!==o||e[34]!==u?(k=[o,u,t,s],e[31]=t,e[32]=s,e[33]=o,e[34]=u,e[35]=k):k=e[35],x.useEffect(w,k)}const Lf=t=>Ee(t,"1424158285"),Df=t=>js(t,"1535193150"),hdt=t=>{const e=Df(t);return Lf(t)&&e.get("journal_homepage_url_icon_enabled",!1)},_dt=t=>{const e=Df(t);return Lf(t)&&e.get("show_web_page_file_refs",!1)},xdt=t=>{const e=Df(t);return Lf(t)&&!e.get("show_turn_search_sources",!0)},ydt=t=>{const e=Df(t);return Lf(t)?e.get("file_ref_type_order",[]):[]},bdt=t=>{const e=Df(t);return!!(Lf(t)&&e.get("render_web_results_like_files",!1))},vdt=t=>{const e=Df(t);return Lf(t)?e.get("custom_thread_classes",""):""};function hv(t){Fc().then(e=>{t(e.getHost())}).catch(()=>{})}function VFe(t,e){const s=Et(t,e),n=vt(()=>{const i=Bi(s);return i?i.filter(l=>l.role===ot.User).length:0}),o=vt(()=>{var l,c;const i=Bi(s);if(!i)return!1;for(const u of i)if(u.role===ot.User)for(const d of u.messages){if((l=d.metadata)!=null&&l.is_visually_hidden_from_conversation)continue;const f=(c=d.metadata)==null?void 0:c.system_hints;if(f!=null&&f.length&&f.some(m=>m!=null&&m!==Ye.Search))return!0}return!1});let a;return kl(()=>{if(!yr(t)){a=void 0;return}if(!wl(e)){a=void 0;return}const i=s.serverId$();if(!i){a=void 0;return}(a==null?void 0:a.conversationId)!==i&&(a=void 0);const l=n(),c=o();if(l>0&&c){if((a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){const d=i;hv(f=>f.cancelConversationArchive(d))}else(a==null?void 0:a.status)!=="cancelled"||a.conversationId;a={conversationId:i,status:"cancelled"};return}if(l===1){if((a==null?void 0:a.status)==="enqueued")return;a={conversationId:i,status:"enqueued"};const u=i;hv(d=>d.enqueueConversationArchive(u));return}if(l>1&&(a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){a={conversationId:i,status:"cancelled"};const u=i;hv(d=>d.cancelConversationArchive(u))}})}function zFe(t){return Ps({queryKey:["conversation",t,"stream-status"],queryFn:async()=>t?await de.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}}):null})}function WFe(t,e){return Qn(t,()=>zFe(e))}function qFe(t,e){const s=Et(t,e),n=vt(()=>{const o=s.serverId$();return o==null?null:WFe(t,o)()});return G_(()=>{var c;const o=Ew(s),a=n(),i=s.serverId$();return i==null||o||((c=a==null?void 0:a.data)==null?void 0:c.status)!=="IS_STREAMING"?!1:km.get(i)!=null},()=>{if(!Xe(t,"2489999880").get("is_resume_over_reloads_enabled",!1))return;const o=to(xt(s.serverId$)),a=to(km.get(o));Mme({ctx:t,conversation:s,completionType:Fi.Continue,serverThreadId:o,token:a})})}function Sdt(t,e){const s=[VFe(t,e),qFe(t,e)];return()=>{s.forEach(n=>n==null?void 0:n())}}const aW=ue(vr,"d7c1fd",14,14),rW=ue(vr,"f6f554",12,12),KFe=Pe(()=>me(()=>import("./8pjkblaxyj23u8dw.js"),__vite__mapDeps([283,1,3,4,284,78])));function Cdt({selectedDomain:t,verifiedDomains:e,domains:s,onChangeDomain:n}){const[o,a]=x.useState(!1),i=e.length>0,l=G(),c=ct(l),u=c==null?void 0:c.id,d=c==null?void 0:c.isEnterprisey(),{mutateAsync:f}=use(u);return r.jsxs("div",{className:"font-normal",children:[r.jsxs(J.Root,{children:[r.jsx(eee,{children:r.jsxs("span",{className:"flex items-center gap-2 py-2",children:[t!=null?t:r.jsx(j,T({},FS.selectADomain)),r.jsx(Xp,{className:"icon"})]})}),r.jsx(J.Portal,{children:r.jsxs(J.Content,{children:[r.jsx(J.RadioGroup,{value:t,onValueChange:m=>{m!==t&&n(m)},children:e.map(({id:m,hostname:p})=>r.jsx(J.RadioItem,{value:p,children:r.jsxs("div",{className:"flex flex-row",children:[r.jsx("span",{children:p}),r.jsx("span",{onClick:()=>{f({domainId:m}),n("")},children:r.jsx(Rl,{className:"icon-sm fixed end-4"})})]})},m))}),i&&r.jsx(J.Separator,{}),r.jsx(J.Item,{onClick:()=>{a(!0)},icon:og,children:r.jsx(j,T({},FS.addDomain))})]})})]}),u&&!d&&r.jsx(KFe,{domains:s,isOpen:o,onClose:()=>a(!1),workspaceId:u,showUnverifiedDomains:!0,onVerifyDomain:m=>{n(m.hostname)}})]})}function YFe(){const t=Gt();return ds({mutationFn:({verifierType:e})=>GC.unverifySocialAuth(e),onSuccess:()=>{t.refetchQueries({queryKey:["builderProfile"]})}})}function QFe({socialData:t}){const{type:e,display_name:s,verified_data:n}=t,o=e==="linkedin"?rW:e==="github"?aW:null;return o?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[o({className:"icon"}),r.jsx("span",{children:s})]}),(n==null?void 0:n.link_to)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:n.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:r.jsx(wr,{className:"icon-sm"})})]}):null}function wdt({socialData:t,icon:e}){const{id:s,type:n,display_name:o,verified:a,verified_data:i}=t,[l,c]=x.useState(!1),u=YFe();return r.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[r.jsxs("div",{className:z("flex items-center space-x-2"),children:[r.jsx(e,{className:"icon-sm"}),r.jsx("span",{children:o}),a&&(i==null?void 0:i.username)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:i.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:i==null?void 0:i.username})]}),a?r.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{u.mutate({verifierType:n})},children:u.isPending?r.jsx(Wn,{}):r.jsx(Rn,{className:"icon-sm text-token-text-tertiary"})}):r.jsx(ke,{size:"small",color:"secondary",loading:l,onClick:async()=>{c(!0),await tee({id:s},"#settings/".concat(hn.Account)),c(!1)},children:r.jsx(j,T({},FS.verify))})]})}const FS=Ne({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}});var CP;const JFe=Mt.div(CP||(CP=St(["text-sm text-token-text-tertiary"]))),ZFe="community builder";function XFe(t){const[e,s]=x.useState(t),n=x.useRef(null),o=(a,i)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{s(a),n.current=null},i)};return x.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),[e,o]}function eBe(t){return"gizmo"in t}function yj({gizmo:t,builderName:e,builderUrl:s,className:n,socials:o,hideLink:a=!1}){const i=G(),l=Ee(i,"2256850471");let c,u;t&&eBe(t)?(c=t.gizmo.author.display_name,u=t.gizmo.author.link_to):(c=e,u=s),(c===""||c==null)&&(c=ZFe);const d=o==null?void 0:o.filter(m=>m.verified),f=r.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[u&&r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[r.jsx(kr,{className:"icon"}),r.jsx("span",{children:r.jsx(j,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:u,className:"text-token-text-tertiary hover:cursor-pointer",children:r.jsx(wr,{className:"icon-sm"})})]}),l&&(d==null?void 0:d.map((m,p)=>m.verified?r.jsx(QFe,{socialData:m},p):null)),r.jsxs("div",{className:"text-token-text-tertiary text-xs",children:[(u||d&&d.length>0)&&r.jsx("hr",{className:"border-token-border-default my-2"}),r.jsx(j,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return r.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[r.jsx(JFe,{className:n,children:r.jsx(j,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:c}})}),!a&&r.jsx(tBe,{socials:o,website:u,children:f})]})}function tBe({website:t,socials:e,children:s}){const[n,o]=XFe(!1);let a=[];t&&a.push(r.jsx(kr,{className:"icon-xs text-token-text-secondary"})),e&&e.forEach(l=>{l.verified&&(l.type==="linkedin"?a.push(r.jsx(rW,{className:"icon-xs text-token-text-secondary"})):l.type==="github"&&a.push(r.jsx(aW,{className:"icon-xs text-token-text-secondary"})))});const i=a.length-2;return a=a.slice(0,2),i>0&&a.push(r.jsxs("span",{className:"text-token-text-secondary text-xs font-semibold",children:["+",i]},"overflow")),r.jsx(eu,{open:n,onOpenChange:l=>o(l,0),children:r.jsxs("div",{onPointerLeave:()=>o(!1,300),children:[r.jsx(hi,{asChild:!0,children:r.jsx("div",{onPointerEnter:()=>o(!0,0),className:"cursor-pointer",children:a.length>0?r.jsx("div",{className:"bg-token-main-surface-secondary flex items-center gap-1 rounded-xl px-2 py-1",children:a}):r.jsx(see,{className:"icon-xs text-token-text-secondary"})})}),r.jsx(tu,{children:r.jsx(su,{side:"top",sideOffset:8,align:"center",className:"bg-token-main-surface-primary z-10 rounded-lg p-4 drop-shadow-md",children:r.jsx("div",{onPointerEnter:()=>o(!0,0),children:s})})})]})})}const sBe=Pe(()=>me(()=>import("./o0e5tlgxm1k8ubzl.js"),__vite__mapDeps([285,1,3,4,129,130,131,132,133,134])).then(t=>t.SnorlaxSplashScreen)),kdt=({conversation:t,currentModelId:e,onRequestCompletion:s,gizmoId:n})=>{const o=G(),{data:a}=vi(n),i=Hc(o,n),l=ree();return a==null?null:i?r.jsx(sBe,{conversation:t,gizmoId:n,currentModelId:e,onRequestCompletion:s}):r.jsx(nBe,{gizmo:a,showStarterPrompts:!0,disableStarterPrompts:l,clientThreadId:t.id,currentModelId:e})};function nBe({gizmo:t,hideOwner:e=!1,children:s,className:n,avatarClassName:o,showStarterPrompts:a=!1,disableStarterPrompts:i=!1,clientThreadId:l,currentModelId:c}){return t==null?null:r.jsx(r.Fragment,{children:r.jsxs("div",{className:z("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",n),children:[r.jsx(oBe,{gizmo:t,avatarClassName:o}),r.jsx(rBe,{gizmo:t,hideOwner:e,showStarterPrompts:a,disableStarterPrompts:i,clientThreadId:l,currentModelId:c}),s]})})}function oBe({gizmo:t,avatarClassName:e}){var n;const s=!!(t!=null&&nee(t)&&((n=t==null?void 0:t.gizmo.tags)!=null&&n.includes(C1.FirstParty)));return r.jsx("div",{className:"relative",children:r.jsx(x0,{isFirstParty:s||!t,src:t!=null&&$u(t)?t.profilePictureUrl:t==null?void 0:t.gizmo.display.profile_picture_url,className:z("mb-3 h-12 w-12",e)})})}function aBe({gizmo:t,disabled:e}){const s=MS(t),n=au(),o=Pa();if(s==null||s.length===0)return null;const a=s.slice(0,o?2:4);return r.jsx(lBe,{starterPrompts:a,onSelectStarterPrompt:n,disabled:e})}function rBe({gizmo:t,hideOwner:e,showStarterPrompts:s,disableStarterPrompts:n,clientThreadId:o,currentModelId:a}){var b;const i=G(),l=oe(()=>m6(i,{isGizmo:!0})),{data:c,isLoading:u}=oe(()=>h6(i)),d=t!=null&&$u(t)?t.name:t==null?void 0:t.gizmo.display.name,f=t!=null&&$u(t)?t.description:t==null?void 0:t.gizmo.display.description,m=c==null?void 0:c.model_override,p=t!=null&&$u(t)?t.defaultModel:t==null?void 0:t.gizmo.default_model,g=p?m!=null&&m[p]?l.models.get(m==null?void 0:m[p]):l.models.get(p):null,h=(b=ct(i))==null?void 0:b.hasPaidFeatures(),_=x.useCallback(()=>{!o||!g||(B.logEvent("GPTs: Landing Preferred Model Switch",{from:a,to:g.id}),pt.logEvent("chatgpt_gpts_landing_preferred_model_switch",g.id,{from:String(a!=null?a:""),to:g.id}),kd(Et(i,o),g.id))},[o,g,a,i]);return r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"text-center text-2xl font-semibold",children:d}),!e&&r.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:r.jsx(r.Fragment,{children:t&&$u(t)?r.jsx(yj,{gizmo:t}):r.jsx(yj,{gizmo:t,socials:t.gizmo.author.display_socials})})}),!u&&h&&g&&(a&&a!==g.id?r.jsxs("button",{onClick:_,className:"btn btn-blue btn-small flex items-center gap-1",children:[r.jsx(oee,{className:"icon-sm"}),r.jsx(j,{id:"6uu9eh",defaultMessage:"Switch to {modelTitle} (creator's recommended model)",values:{modelTitle:"".concat(g.title)}})]}):r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[r.jsx(hl,{style:{color:"gray",width:16,height:16}}),r.jsx(j,{id:"mcxm8w",defaultMessage:"Using the creator's recommended model: {modelTitle}",values:{modelTitle:"".concat(g.title)}})]})),f&&r.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:f}),s&&r.jsx(aBe,{gizmo:t,disabled:n})]})}const iBe=/\s/;function lBe({starterPrompts:t,onSelectStarterPrompt:e,disabled:s,cssMobileDisplayLimit:n,marginOverride:o}){let a=t.map((i,l)=>{var d,f;let c=(d=i.oneliner)!=null?d:i.title;c===""&&(c=i.body);const u=iBe.test(c);return r.jsxs("button",{className:z(n!==void 0&&l>=n&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:s,onClick:m=>e(m,i,t,l),children:[r.jsx(aee,{category:i.category}),r.jsx("div",{className:z("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",u?"break-word":"break-all"),children:c})]},(f=i.id)!=null?f:l)});if(a.length>2){const i=Math.floor(a.length/2);a=[a.slice(0,i),a.slice(i)].map((l,c)=>r.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:l},c))}return r.jsx("div",{className:z("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o!=null?o:"mt-12"),children:a})}function cBe(t){var s,n,o,a;const e=Se.getTree(t).findNode(i=>{var l;return((l=i.message.metadata)==null?void 0:l.greenwich)!==void 0},Se.getCurrentLeafId(t));return[(n=(s=e==null?void 0:e.message.metadata)==null?void 0:s.greenwich)==null?void 0:n.text,(a=(o=e==null?void 0:e.message.metadata)==null?void 0:o.greenwich)==null?void 0:a.link]}function Tdt({clientThreadId:t}){const[e,s]=Qe(t,cBe);return!e||!s?null:r.jsx("div",{className:"flex w-full items-center justify-center p-2 text-center text-xs",children:r.jsx("a",{href:s,target:"_blank",rel:"noreferrer",className:"hover:text-token-text-primary text-token-text-tertiary hover:underline",children:e})})}function Edt(t){"use forget";const e=F.c(8),s=Hs(),[,n]=Yn();let o;e[0]!==s.search||e[1]!==s.state||e[2]!==n?(o=c=>{const u=new URLSearchParams(s.search),d=u.get(Dg);!c&&!u.has(Dg)||c&&d===c||n(p=>(c?p.set(Dg,c):p.delete(Dg),p),{replace:!0,state:s.state})},e[0]=s.search,e[1]=s.state,e[2]=n,e[3]=o):o=e[3];const a=wn(o);let i,l;e[4]!==t||e[5]!==a?(i=()=>Zo(()=>{if(Ew(t)){const c=Cs(t);if(br(t).groups.some(d=>d.modelIds.includes(c.id)))return c.id}},a),l=[t,a],e[4]=t,e[5]=a,e[6]=i,e[7]=l):(i=e[6],l=e[7]),x.useEffect(i,l)}function Mdt(){const t=iee(Lm.NoAuthNewChat),e=D_();return t&&!e?r.jsx(uBe,{onClose:()=>{tn.closeModal(Lm.NoAuthNewChat)}}):null}function uBe({onClose:t}){const e=G(),s=yt(),n=i=>{i.preventDefault(),os(e,{fallbackScreenHint:"signup",callback:l=>{pt.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),B.logSignUpButtonClicked({location:"New chat modal",provider:l},Lt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!zr(e)})},o=i=>{i.preventDefault(),os(e,{fallbackScreenHint:"login",callback:l=>{pt.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),B.logLogInButtonClicked({location:"New chat modal",provider:l},Lt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!zr(e)})},a=()=>{pt.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),B.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Pl(s),t()};return x.useEffect(()=>{pt.logEvent("chatgpt_new_chat_modal_shown"),B.logEvent("New Chat Modal Shown")},[]),r.jsx(Ft,{testId:"modal-no-auth-new-chat",isOpen:!0,type:"success",onClose:t,noPadding:!0,size:"custom",className:"max-w-sm",children:r.jsxs("div",{className:"flex flex-col justify-center p-6",children:[r.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[r.jsx("div",{}),r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(Es,{onClick:t})})]}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(j,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:n,children:i}),login:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:o,children:i})}})}),r.jsx(ke,{className:"mb-3",color:"primary",size:"large",onClick:a,children:r.jsx(j,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r.jsx(ke,{size:"large",onClick:()=>{os(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({location:"New chat modal",provider:i},Lt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!zr(e)})},color:"secondary",children:r.jsx(j,T({},$t.logInButtonText))})]})})}const BS=(t,e,s,n=!1)=>{const o=jt(),a=ao(o);Gn(o).logEventWithStatsig("(Web) FYP Feed Survey Tapped","chatgpt_web_fyp_feed_survey_tapped",{isAutoSend:n,type:e}),n?cl(()=>{a.autoSendCompletion={userMessage:b2(t),targetedReply:s!=null?s:null},a.shouldAutoSendCompletion$.set(!0),a.openFeedbackView({type:qs.Conversation})}):a.openFeedbackView({type:qs.Preview,populatePrompt:{type:"surveyReply",userMessage:b2(t),targetedReply:s!=null?s:null}})},dBe=t=>{"use forget";const e=F.c(16),{question:s,suggestions:n}=t;let o;e[0]!==n?(o=n.every(fBe),e[0]=n,e[1]=o):o=e[1];const a=o;let i;e[2]!==n?(i=n.every(mBe),e[2]=n,e[3]=i):i=e[3];const l=i;let c;if(e[4]!==s||e[5]!==n){let f;e[7]!==s?(f=(m,p)=>{const{text:g,is_auto_send:h,prompt:_,type:b}=m,y=b==="sugar_task";return r.jsx(ke,{icon:y?mg:h?null:xi,color:"secondary",contentWrapperClassName:"justify-start px-2 py-3 gap-4",iconClassName:"text-token-text-secondary",onClick:()=>BS(_!=null?_:g,b,y?null:s!=null?s:null,h),children:g},p)},e[7]=s,e[8]=f):f=e[8],c=n.map(f),e[4]=s,e[5]=n,e[6]=c}else c=e[6];let u;e[9]!==a||e[10]!==l||e[11]!==s?(u=!a&&!l&&r.jsx(ke,{icon:xi,color:"secondary",className:"text-token-text-secondary",contentWrapperClassName:"justify-start px-2 gap-4",onClick:()=>BS("",void 0,s!=null?s:null),children:r.jsx(j,{id:"FKKl/d",defaultMessage:"Share anything..."})}),e[9]=a,e[10]=l,e[11]=s,e[12]=u):u=e[12];let d;return e[13]!==c||e[14]!==u?(d=r.jsx("div",{className:"flex w-full flex-col gap-4 pt-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c,u]})}),e[13]=c,e[14]=u,e[15]=d):d=e[15],d};function fBe(t){return t.is_auto_send}function mBe(t){return t.type==="sugar_task"}function iW(t){"use forget";const e=F.c(41),{item:s,overrideManageAllAction:n,fullWidth:o,includeHeader:a}=t,i=a===void 0?!0:a,l=G();let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[0]=c):c=e[0],x.useEffect(pBe,c);const{id:u,is_enabled:d,display_title:f,display_emoji:m}=s,p=s.next_run_times.length===0;let g;e[1]!==l?(g=ao(l),e[1]=l,e[2]=g):g=e[2];const h=g;let _;e[3]!==u||e[4]!==l||e[5]!==h?(_=()=>{Gn(l).logEventWithStatsig("(Web) FYP Task Attachment Tapped","chatgpt_web_fyp_task_attachment_tapped",{task_id:u}),xt(h.isFeedbackViewOpen$)?h.openTaskView(u):h.prefillTaskReply(u)},e[3]=u,e[4]=l,e[5]=h,e[6]=_):_=e[6];const b=_;let y;e[7]!==u||e[8]!==b||e[9]!==i||e[10]!==p||e[11]!==d||e[12]!==s||e[13]!==n?(y=i&&r.jsx("div",{className:"border-token-border-default border-b",children:r.jsxs("div",{className:"flex w-full items-center justify-between px-4 py-2",children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[r.jsx(yT,{className:"size-4"}),r.jsx("span",{className:"text-sm",children:r.jsx(j,{id:"n1Alsn",defaultMessage:"Pulse"})})]}),r.jsx(JD,{automation_id:u,is_enabled:d,item:s,isFinished:p,onEditModalOpen:b,overrideManageAllAction:n,className:"h-6 w-6"})]})}),e[7]=u,e[8]=b,e[9]=i,e[10]=p,e[11]=d,e[12]=s,e[13]=n,e[14]=y):y=e[14];const v=!d&&"grayscale";let S;e[15]!==v?(S=z(v),e[15]=v,e[16]=S):S=e[16];let C;e[17]!==m||e[18]!==S?(C=r.jsx(o3,{displayEmoji:m,className:S}),e[17]=m,e[18]=S,e[19]=C):C=e[19];const w=!d&&"text-token-text-tertiary";let k;e[20]!==w?(k=z("line-clamp-1 w-full text-base font-medium",w),e[20]=w,e[21]=k):k=e[21];let E;e[22]!==f||e[23]!==k?(E=r.jsx("div",{className:k,children:f}),e[22]=f,e[23]=k,e[24]=E):E=e[24];let M;e[25]!==d||e[26]!==s?(M=d?r.jsx(a3,{automation:s}):r.jsx("div",{className:"text-token-text-tertiary text-sm",children:r.jsx(j,T({},qt.paused))}),e[25]=d,e[26]=s,e[27]=M):M=e[27];let N;e[28]!==E||e[29]!==M?(N=r.jsxs("div",{className:"flex min-w-0 flex-col items-start gap-0.5 text-start",children:[E,M]}),e[28]=E,e[29]=M,e[30]=N):N=e[30];let A;e[31]!==N||e[32]!==C?(A=r.jsxs("div",{className:"flex items-center gap-3 px-4 py-4",children:[C,N]}),e[31]=N,e[32]=C,e[33]=A):A=e[33];let I;e[34]!==b||e[35]!==A?(I=r.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:b,children:A}),e[34]=b,e[35]=A,e[36]=I):I=e[36];let P;return e[37]!==o||e[38]!==I||e[39]!==y?(P=r.jsx(r.Fragment,{children:r.jsxs(eT,{fullWidth:o,className:"rounded-3xl! shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",children:[y,I]})}),e[37]=o,e[38]=I,e[39]=y,e[40]=P):P=e[40],P}function pBe(){$e.count(He.JAWBONE,"sugarbone_message_attachment.open")}function gBe(t){"use forget";const e=F.c(3),{taskId:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(j,{id:"xd59EZ",defaultMessage:"View Pulse"}),e[0]=n):n=e[0];let o;return e[1]!==s?(o=r.jsx(J.Item,{label:n,onClick:()=>window.open(QD(s),"_blank")}),e[1]=s,e[2]=o):o=e[2],o}function o3(t){"use forget";const e=F.c(5),{displayEmoji:s,className:n}=t;let o;e[0]!==n?(o=z("bg-token-bg-tertiary flex h-12 w-12 items-center justify-center rounded-lg text-2xl",n),e[0]=n,e[1]=o):o=e[1];let a;return e[2]!==s||e[3]!==o?(a=r.jsx("div",{className:o,children:s}),e[2]=s,e[3]=o,e[4]=a):a=e[4],a}function a3(t){"use forget";var l;const e=F.c(9),{automation:s}=t;if(!s)return null;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(NB,{className:"size-4"}),e[0]=n):n=e[0];let o;e[1]!==s.next_run_times?(o=(l=s.next_run_times)!=null?l:[],e[1]=s.next_run_times,e[2]=o):o=e[2];let a;e[3]!==s?(a=r.jsx(zD,{item:s}),e[3]=s,e[4]=a):a=e[4];let i;return e[5]!==s.schedule_components||e[6]!==o||e[7]!==a?(i=r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-1 text-start text-sm",children:[n,r.jsx(ep,{initialScheduleComponents:s.schedule_components,nextRunTimes:o,children:a})]}),e[5]=s.schedule_components,e[6]=o,e[7]=a,e[8]=i):i=e[8],i}const lW=Object.freeze(Object.defineProperty({__proto__:null,SugarboneEmoji:o3,SugarboneMessageAttachmentInner:iW,SugarboneSchedule:a3,ViewPulseAutomationDropdownItem:gBe},Symbol.toStringTag,{value:"Module"}));function hBe(t){"use forget";const e=F.c(4),{automations:s}=t;let n;e[0]!==s?(n=s.map(_Be),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n?(o=r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"flex flex-col",children:n})}),e[2]=n,e[3]=o):o=e[3],o}function _Be(t){const{automation:e}=t;return r.jsx(iW,{item:e,fullWidth:!0,includeHeader:!1},e.id)}function bj(t){return t.toSorted((e,s)=>{var a,i;const n=new Date((a=e.next_run_times[0])!=null?a:1/0).getTime(),o=new Date((i=s.next_run_times[0])!=null?i:1/0).getTime();return n-o})}function xBe(){"use forget";const t=F.c(11),e=G();let s;t[0]!==e?(s=Cf(e),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==n?(o={enabled:n},t[2]=n,t[3]=o):o=t[3];const{scheduledAutomations:a,pausedAutomations:i,isLoading:l}=XD(o);let c;e:{if(!n){let p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[4]=p):p=t[4],c=p;break e}let m;if(t[5]!==i||t[6]!==a){const p=bj(a).map(bBe),g=bj(i).map(yBe);m=[...p,...g],t[5]=i,t[6]=a,t[7]=m}else m=t[7];c=m}const u=c,d=n?l:!1;let f;return t[8]!==u||t[9]!==d?(f={automations:u,isLoading:d},t[8]=u,t[9]=d,t[10]=f):f=t[10],f}function yBe(t){return{automation:t,isPaused:!0}}function bBe(t){return{automation:t,isPaused:!1}}const _v=Ne({scheduledByYou:{id:"pulse.new.curateOverlay.scheduledByYou",defaultMessage:"Scheduled by you"},giveFeedback:{id:"pulse.new.curateOverlay.giveFeedback",defaultMessage:"Give feedback"},scheduleATask:{id:"pulse.new.curateOverlay.scheduleATask",defaultMessage:"Schedule a task"}}),vBe=t=>{"use forget";const e=F.c(22),{title:s,body:n,suggestions:o}=t;let a;e[0]!==o?(a=ek(o,SBe),e[0]=o,e[1]=a):a=e[1];const[i,l]=a,{automations:c}=xBe();let u;e[2]!==s?(u=r.jsx("div",{className:"text-[34px]",children:s}),e[2]=s,e[3]=u):u=e[3];let d;e[4]!==n?(d=r.jsx("span",{className:"text-base",children:n}),e[4]=n,e[5]=d):d=e[5];let f;e[6]!==u||e[7]!==d?(f=r.jsxs("div",{className:"flex flex-col gap-2",children:[u,d]}),e[6]=u,e[7]=d,e[8]=f):f=e[8];let m;e[9]!==c?(m=c.length>0&&r.jsx(xv,{title:r.jsx(j,T({},_v.scheduledByYou)),children:r.jsx(hBe,{automations:c})}),e[9]=c,e[10]=m):m=e[10];let p;e[11]!==l?(p=l.length>0&&r.jsx(xv,{title:r.jsx(j,T({},_v.giveFeedback)),children:r.jsx(vj,{suggestions:l})}),e[11]=l,e[12]=p):p=e[12];let g;e[13]!==i?(g=i.length>0&&r.jsx(xv,{title:r.jsx(j,T({},_v.scheduleATask)),children:r.jsx(vj,{suggestions:i})}),e[13]=i,e[14]=g):g=e[14];let h;e[15]!==m||e[16]!==p||e[17]!==g?(h=r.jsxs("div",{className:"flex flex-col gap-8",children:[m,p,g]}),e[15]=m,e[16]=p,e[17]=g,e[18]=h):h=e[18];let _;return e[19]!==f||e[20]!==h?(_=r.jsxs("div",{className:"flex min-h-0 flex-col gap-6 px-6 pt-12 pb-16",children:[f,h]}),e[19]=f,e[20]=h,e[21]=_):_=e[21],_},xv=t=>{"use forget";const e=F.c(5),{title:s,children:n}=t;let o;e[0]!==s?(o=r.jsx("div",{className:"text-token-text-secondary text-sm",children:s}),e[0]=s,e[1]=o):o=e[1];let a;return e[2]!==n||e[3]!==o?(a=r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[o,n]}),e[2]=n,e[3]=o,e[4]=a):a=e[4],a},vj=t=>{"use forget";const e=F.c(4),{suggestions:s}=t;let n;e[0]!==s?(n=s.map(CBe),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n?(o=r.jsx("div",{className:"flex w-full flex-col py-2",children:n}),e[2]=n,e[3]=o):o=e[3],o};function SBe(t){return t.type==="sugar_task"}function CBe(t,e){return r.jsx(r.Fragment,{children:r.jsx(ke,{icon:t.type==="sugar_task"?mg:xi,color:"secondary",className:"rounded-none border-0 border-t text-base font-normal",contentWrapperClassName:"justify-start px-2 gap-4 py-3.5",iconClassName:"text-token-text-tertiary",onClick:()=>BS(t.text,t.type,null,t.is_auto_send),children:t.text},e)})}const wBe=t=>{"use forget";const e=F.c(14),{taskId:s}=t,{automation:n}=vT(s);if(!n)return null;const{display_emoji:o,display_title:a,prompt:i}=n;let l;e[0]!==o?(l=r.jsx(o3,{displayEmoji:o,className:"mb-4"}),e[0]=o,e[1]=l):l=e[1];let c;e[2]!==a?(c=r.jsx("div",{className:"pb-4 text-[34px]",children:a}),e[2]=a,e[3]=c):c=e[3];let u;e[4]!==n?(u=r.jsx(a3,{automation:n}),e[4]=n,e[5]=u):u=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("hr",{className:"border-token-border-heavy my-6 border-t"}),e[6]=d):d=e[6];let f;e[7]!==i?(f=r.jsx("div",{children:i}),e[7]=i,e[8]=f):f=e[8];let m;return e[9]!==l||e[10]!==c||e[11]!==u||e[12]!==f?(m=r.jsxs("div",{className:"flex h-full w-full flex-col px-6 pt-16",children:[l,c,u,d,f]}),e[9]=l,e[10]=c,e[11]=u,e[12]=f,e[13]=m):m=e[13],m},Ndt=()=>{"use forget";var d,f,m,p,g,h,_,b,y,v,S,C,w,k,E,M,N,A,I,P,R,O,L,D,H,V,q,W,$,Z,K,Y,ae,se,ee,re,he,fe,pe,le,ve;const t=F.c(16),e=G();let s;t[0]!==e?(s=Cf(e),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=()=>ao(e).feedbackViewState$(),t[2]=e,t[3]=o):o=t[3];const a=oe(o);let i;t[4]!==e?(i=()=>ig(e),t[4]=e,t[5]=i):i=t[5];const{data:l}=oe(i);let c;t[6]!==a||t[7]!==n||t[8]!==((d=l==null?void 0:l.feedback)==null?void 0:d.suggestions)||t[9]!==((f=l==null?void 0:l.onboarding)==null?void 0:f.image_urls)||t[10]!==((g=(p=(m=l==null?void 0:l.survey)==null?void 0:m.survey_config)==null?void 0:p.overlay_content)==null?void 0:g.body)||t[11]!==((b=(_=(h=l==null?void 0:l.survey)==null?void 0:h.survey_config)==null?void 0:_.overlay_content)==null?void 0:b.title)||t[12]!==((S=(v=(y=l==null?void 0:l.survey)==null?void 0:y.survey_config)==null?void 0:v.prompt)==null?void 0:S.suggestions)?(c=((a==null?void 0:a.type)===qs.Preview||(a==null?void 0:a.type)===qs.OnCard||(a==null?void 0:a.type)===qs.TaskEdit)&&r.jsxs(gt.div,{className:"h-full",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:[(a==null?void 0:a.type)===qs.Preview&&(n?r.jsx(vBe,{title:(k=(w=(C=l==null?void 0:l.survey)==null?void 0:C.survey_config)==null?void 0:w.overlay_content)==null?void 0:k.title,body:(N=(M=(E=l==null?void 0:l.survey)==null?void 0:E.survey_config)==null?void 0:M.overlay_content)==null?void 0:N.body,suggestions:(R=(P=(I=(A=l==null?void 0:l.survey)==null?void 0:A.survey_config)==null?void 0:I.prompt)==null?void 0:P.suggestions)!=null?R:[]}):r.jsx(kBe,{title:(D=(L=(O=l==null?void 0:l.survey)==null?void 0:O.survey_config)==null?void 0:L.overlay_content)==null?void 0:D.title,body:(q=(V=(H=l==null?void 0:l.survey)==null?void 0:H.survey_config)==null?void 0:V.overlay_content)==null?void 0:q.body,suggestions:(W=l==null?void 0:l.feedback)==null?void 0:W.suggestions,images:(Z=($=l==null?void 0:l.onboarding)==null?void 0:$.image_urls)==null?void 0:Z.map(L1)})),(a==null?void 0:a.type)===qs.OnCard&&r.jsx(TBe,{cardId:a.cardId}),(a==null?void 0:a.type)===qs.TaskEdit&&n&&r.jsx(wBe,{taskId:a.taskId})]}),t[6]=a,t[7]=n,t[8]=(K=l==null?void 0:l.feedback)==null?void 0:K.suggestions,t[9]=(Y=l==null?void 0:l.onboarding)==null?void 0:Y.image_urls,t[10]=(ee=(se=(ae=l==null?void 0:l.survey)==null?void 0:ae.survey_config)==null?void 0:se.overlay_content)==null?void 0:ee.body,t[11]=(fe=(he=(re=l==null?void 0:l.survey)==null?void 0:re.survey_config)==null?void 0:he.overlay_content)==null?void 0:fe.title,t[12]=(ve=(le=(pe=l==null?void 0:l.survey)==null?void 0:pe.survey_config)==null?void 0:le.prompt)==null?void 0:ve.suggestions,t[13]=c):c=t[13];let u;return t[14]!==c?(u=r.jsx(Ms,{mode:"wait",children:c}),t[14]=c,t[15]=u):u=t[15],u},kBe=t=>{"use forget";const e=F.c(25),{title:s,body:n,suggestions:o,images:a}=t,i=x.useRef(null),l=x.useRef(null),c=x.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={firstRef:l,secondRef:i,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},e[0]=u):u=e[0];const d=CS(u);let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f={firstRef:c,secondRef:l,firstSide:"top",secondSide:"bottom",threshold:30,absolute:!1},e[1]=f):f=e[1];const m=CS(f),p=d&&"sticky top-0",g=m&&"opacity-10 transition-opacity duration-300";let h;e[2]!==p||e[3]!==g?(h=z("flex h-45 w-full items-center justify-center",p,g),e[2]=p,e[3]=g,e[4]=h):h=e[4];let _;e[5]!==a?(_=a!=null?a:[],e[5]=a,e[6]=_):_=e[6];let b;e[7]!==_?(b=r.jsx(HG,{images:_}),e[7]=_,e[8]=b):b=e[8];let y;e[9]!==h||e[10]!==b?(y=r.jsx("div",{className:h,ref:l,children:b}),e[9]=h,e[10]=b,e[11]=y):y=e[11];let v;e[12]!==s?(v=s&&r.jsx("div",{className:"text-xl font-medium",children:s}),e[12]=s,e[13]=v):v=e[13];let S;e[14]!==n?(S=n&&r.jsx("div",{className:"text-token-text-secondary whitespace-pre-line",children:n}),e[14]=n,e[15]=S):S=e[15];let C;e[16]!==o?(C=o&&r.jsx(dBe,{suggestions:o.map(EBe)}),e[16]=o,e[17]=C):C=e[17];let w;e[18]!==S||e[19]!==C||e[20]!==v?(w=r.jsxs("div",{className:"z-10 flex w-full flex-col gap-4 pb-16",ref:c,children:[v,S,C]}),e[18]=S,e[19]=C,e[20]=v,e[21]=w):w=e[21];let k;return e[22]!==w||e[23]!==y?(k=r.jsxs("div",{className:"relative mx-auto flex h-full w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-visible px-4 py-6",ref:i,children:[y,w]}),e[22]=w,e[23]=y,e[24]=k):k=e[24],k},TBe=t=>{"use forget";var u,d;const e=F.c(6),{cardId:s}=t,{data:n}=$B(s);if(!n)return null;const o=(u=n.image)==null?void 0:u.url,a=(d=n.image)==null?void 0:d.fallback_url;let i;e[0]!==o||e[1]!==a?(i=r.jsx(Mc,{src:o,fallbackSrc:a,className:"h-32 w-32",shadow:!0}),e[0]=o,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs("div",{className:"flex w-full flex-col items-center gap-4",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"TXCx5u",defaultMessage:"Share what you're thinking"})}),r.jsx("div",{children:r.jsx(j,{id:"bZrGT3",defaultMessage:"Every bit of feedback shapes what shows up next."})})]}),e[3]=l):l=e[3];let c;return e[4]!==i?(c=r.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-8",children:[i,l]}),e[4]=i,e[5]=c):c=e[5],c};function EBe(t){return{text:t,prompt:t,is_auto_send:!1}}function Adt(t){"use forget";const e=F.c(6),s=G();let n;e[0]!==s?(n=ao(s),e[0]=s,e[1]=n):n=e[1];const o=n;let a,i;e[2]!==t||e[3]!==o?(a=()=>Zo(()=>o.isFeedbackViewOpen$()&&o.shouldAutoSendCompletion$(),l=>{if(!l)return;o.shouldAutoSendCompletion$.set(!1);const c=o.autoSendCompletion;setTimeout(()=>{var u;c&&c.targetedReply&&t({eventSource:"mouse",promptMessage:cn(c.userMessage,{targeted_reply:(u=c.targetedReply)!=null?u:void 0}),appendMessages:[sx(c.targetedReply)]})},250)},{fireImmediately:!0}),i=[o,t],e[2]=t,e[3]=o,e[4]=a,e[5]=i):(a=e[4],i=e[5]),x.useEffect(a,i)}const Idt=()=>{"use forget";const t=F.c(3),e=aa();let s,n;t[0]!==e?(s=()=>{if(e)return Zo(()=>{var l;const o=_i(e);if(!o||lee(e))return;const a=(l=Qo(Bi(e)))==null?void 0:l.messages.find(MBe),i="messageId"in o&&U9(e,c=>c.id===o.messageId)==null;return[a,i]},o=>{if(!o)return;const[a,i]=o,l=_i(e);if((ss(l,"searchSources")||ss(l,"retrievalResults"))&&a&&l.messageId!==a.id){const c=Bi(e).length-1,u=a.id,f=rx(a).some(NBe)?{type:"retrievalResults",turnIndex:c,messageId:u}:{type:"searchSources",turnIndex:c,messageId:u,scrollToHeader:ss(l,"searchSources")?l.scrollToHeader:void 0};$d(e,f)}else i&&!ss(l,"entity")&&fd(e)},{equals:fi})},n=[e],t[0]=e,t[1]=s,t[2]=n):(s=t[1],n=t[2]),x.useEffect(s,n)};function MBe(t){return t.status!=="in_progress"&&rx(t).length>0}function NBe(t){return t.type==="file"||t.type==="file_navlist"}const cW="ChatGPT";function ABe(t,e){const[s]=Qe(t,n=>{var o;return[(o=n==null?void 0:n.title)!=null?o:null]});return x.useMemo(()=>IBe(t,s,e),[t,e,s])}function IBe(t,e,s){const n=wl(t);return s&&s.kind===Pt.GizmoInteraction&&s.gizmo?n?"ChatGPT - ".concat(s.gizmo.gizmo.display.name):e&&"".concat(s.gizmo.gizmo.display.name," - ").concat(e):e||cW}function jdt(t){const e=G();x.useEffect(()=>K_(e).addAction({key:"prev-message",group:Js.Chat,keyboardBinding:[et.Shift,et.ArrowUp],actionMessageDescriptor:Je({id:"N8H1CM",defaultMessage:"Previous message"}),action:s=>Sj(s,"up"),enabled:!t},{key:"next-message",group:Js.Chat,keyboardBinding:[et.Shift,et.ArrowDown],actionMessageDescriptor:Je({id:"d69Yjj",defaultMessage:"Next message"}),action:s=>Sj(s,"down"),enabled:!t}),[e,t])}function Sj(t,e){if(t.target instanceof HTMLDivElement&&t.target.isContentEditable&&t.target.textContent)return!1;const s=[...document.querySelectorAll("article[data-turn=assistant]")];let n;if(document.activeElement instanceof HTMLElement&&s.includes(document.activeElement)&&Cj(document.activeElement))n=s.indexOf(document.activeElement)+(e==="down"?1:-1);else{const o=s.findIndex(jBe);if(o===-1)return!1;n=e==="down"?o+1:Cj(s[o])?o-1:o}if(n===-1||n>=s.length)return!1;s[n].focus({preventScroll:!0}),s[n].scrollIntoView({behavior:"smooth",block:"start"})}function jBe(t){const e=t.getBoundingClientRect();return e.bottom>uW()&&e.top<window.innerHeight}function Cj(t){const e=t.getBoundingClientRect();return e.top>=uW()&&e.top<window.innerHeight}function uW(){return Math.min(200,Math.max(70,window.innerHeight*.2))}function Pdt(t,e){"use forget";const s=F.c(3);let n;s[0]!==t||s[1]!==e?(n=()=>Le(t,e),s[0]=t,s[1]=e,s[2]=n):n=s[2];const[o]=x.useState(n);return o}const Rdt=Pe(()=>me(()=>import("./evsh0yx8km5o6z99.js"),__vite__mapDeps([286,1,3,4,129,130,131,132,133,134,285,287,180])).then(t=>t.ProjectHomePage));var Dt=(t=>(t.Chat="chat",t.Search="search",t.Images="images",t.Videos="videos",t.News="news",t))(Dt||{});const wj="chat";function PBe(t){var e;return t&&(e=Object.values(Dt).find(s=>s===t))!=null?e:wj}function Cg(){"use forget";const t=F.c(8),[e,s]=Yn();let n;if(t[0]!==e){const c=e.get(zv);n=PBe(c),t[0]=e,t[1]=n}else n=t[1];const o=n;let a;t[2]!==o||t[3]!==s?(a=c=>{const{tabType:u,options:d,extraQueryParams:f}=c,m=d===void 0?{}:d;o!==u&&s(p=>{const g=f!=null?f:new URLSearchParams,h=new URLSearchParams([...g,...p]);return h.set(zv,u),h},m)},t[2]=o,t[3]=s,t[4]=a):a=t[4];const i=a;let l;return t[5]!==i||t[6]!==o?(l=[o,i],t[5]=i,t[6]=o,t[7]=l):l=t[7],l}function Odt(t){"use forget";const e=F.c(11),s=G();let n;e[0]!==s?(n=xn(s),e[0]=s,e[1]=n):n=e[1];const o=n,a=oe(lt.wantsInitialTab$),[,i]=Cg();let l;e[2]!==o||e[3]!==i||e[4]!==a?(l=()=>{o&&a&&a!=="chat"&&(i({tabType:a,options:{replace:!0}}),lt.wantsInitialTab$.set(void 0))},e[2]=o,e[3]=i,e[4]=a,e[5]=l):l=e[5];let c;e[6]!==t||e[7]!==o||e[8]!==i||e[9]!==a?(c=[a,i,o,t],e[6]=t,e[7]=o,e[8]=i,e[9]=a,e[10]=c):c=e[10],x.useEffect(l,c)}function Ldt(t){switch(t){case"answer":return"chat";case"web":return"search";case"images":return"images";case"videos":return"videos"}}function dW(t){switch(t){case"chat":return So.ATLAS_SUPER_WIDGET_TAB_HOME;case"search":return So.ATLAS_SUPER_WIDGET_TAB_SEARCH;case"images":return So.ATLAS_SUPER_WIDGET_TAB_IMAGES;case"videos":return So.ATLAS_SUPER_WIDGET_TAB_VIDEOS;case"news":return So.ATLAS_SUPER_WIDGET_TAB_NEWS}}const RBe=10,OBe=15,kj=20,Tj=5,LBe=10;let yv=null;const ri=t=>{var e,s,n,o,a,i,l;if(yv==null){const c=js(t,"3317473948").value,u={convoPollingFreshnessMaxMins:((e=c.default_max_polling_duration)!=null?e:RBe*60)/60,imageGenPollingFreshnessMaxMins:((s=c.model_slug_max_polling_durations.image_gen)!=null?s:OBe*60)/60,o1ProConvoPollingFreshnessMaxMins:((n=c.model_slug_max_polling_durations.o1_pro)!=null?n:kj*60)/60,o3ProConvoPollingFreshnessMaxMins:((o=c.model_slug_max_polling_durations.o3_pro)!=null?o:kj*60)/60,gpt4oConvoPollingIntervalMs:((a=c.model_slug_intervals.gpt_4o)!=null?a:Tj)*1e3,defaultConvoPollingIntervalMs:((i=c.default_interval)!=null?i:Tj)*1e3,imageGenPollingIntervalMs:((l=c.model_slug_intervals.image_gen)!=null?l:LBe)*1e3,errorCountThreshold:30};return yv=u,u}return yv};var fW=(t=>(t[t.Standard=0]="Standard",t[t.ImageGen=1]="ImageGen",t))(fW||{});function ic(t){var e;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?1:0}function DBe(t){var s,n;const e=(n=(s=t==null?void 0:t.metadata)==null?void 0:s.poll_on_websocket_inactivity_ms)!=null?n:0;return e>0?e:0}function US(t,e){var o,a,i;const s=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_interval_ms)!=null?a:0;return s>0?s:ic(t)===1?ri(e).imageGenPollingIntervalMs:FBe((i=t==null?void 0:t.metadata)==null?void 0:i.model_slug)?ri(e).gpt4oConvoPollingIntervalMs:ri(e).defaultConvoPollingIntervalMs}function r3(t,e){var o,a,i;const s=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_freshness_max_mins)!=null?a:0;if(s>0)return s;const n=(i=t==null?void 0:t.metadata)==null?void 0:i.model_slug;return pW(n)?ri(e).o1ProConvoPollingFreshnessMaxMins:gW(n)?ri(e).o3ProConvoPollingFreshnessMaxMins:ic(t)===1?ri(e).imageGenPollingFreshnessMaxMins:mW(ic(t),e)}function mW(t,e){switch(t){case 1:return ri(e).imageGenPollingFreshnessMaxMins;case 0:return ri(e).convoPollingFreshnessMaxMins}}function pW(t){return t?ui(3010482349,"".concat(t,"-AAAA")):!1}function gW(t){return t?ui(3240390095,"".concat(t,"-AAAA")):!1}function FBe(t){return t?t==="gpt-4o":!1}function Ej(t,e){nt(t,s=>{as.updateTree(s,(n,o)=>{var i,l,c;if(!(((c=(l=(i=n.getNodeIfExists(o))==null?void 0:i.message)==null?void 0:l.content)==null?void 0:c.content_type)===bt.Text)){const u=l1("");return u.clientMetadata=T(T({},u.clientMetadata),e),n.addMessageNode(o,u)}n.updateNodeMetadata(o,e)})})}function hW({threadId:t}){const e=G(),s=Gt(),n=x.useRef(!1),o=x.useRef(null),a=x.useRef(0),i=x.useRef(null);return x.useEffect(()=>{let l=!1;function c(){var f;return(f=Se.getCurrentNode(Tt(t)))==null?void 0:f.message}let u=0;async function d(){var g,h,_;i.current==null&&(i.current=Date.now()),n.current=!0;let f=null;try{const b=c();if(ic(b)!==1&&!pW((g=b==null?void 0:b.metadata)==null?void 0:g.model_slug)&&!gW((h=b==null?void 0:b.metadata)==null?void 0:h.model_slug))try{const y=Date.now()/1e3,{status:v}=await de.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}});v!=="COMPLETE"&&(u++,B.logEvent("ChatGPT Convo Stream: Polling Attempted",{conversationId:t,retryCount:u}),f={async_status:Xt.STREAMING,update_time:y})}catch(y){}f==null&&(u++,B.logEventWithStatsig("ChatGPT Convo Stream: Polling Attempted","chatgpt_convo_stream_polling_attempted",{conversationId:t,retryCount:u}),f=await hr(t,{skipIfExisting:!1})),a.current=0}catch(b){a.current+=1;const y=c();if(a.current>=ri(e).errorCountThreshold){B.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:ic(y)}),B.logNetworkError({source:"pending_thread_poller",type:"error"});const v="A network error occurred. Please check your connection and try again. ".concat(FR);Ej(t,{err:v,errType:"danger"})}else l||(o.current=window.setTimeout(d,US(y,e)));return}if(f.async_status===Xt.UNREAD){const b=c(),y=i.current?Date.now()-i.current:0;B.logEventWithStatsig("chatgpt_web_network_error_poller_success","chatgpt_web_network_error_poller_success",{duration_ms:y,poll_type:ic(b)}),so(t,{source:Cn.SERVER,value:Xt.UNREAD}),Ea(s,f.gizmo_id),To.updateThreadFromServer(t,f);return}if(f.async_status!==Xt.STREAMING)return;const m=(_=f.update_time)!=null?_:0,p=Mw(new Date,new Date(m*1e3));if(!l){const b=c();if(p<r3(b,e))o.current=window.setTimeout(d,US(b,e));else{const y=c();B.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:ic(y)}),Ej(t,{err:ll,errType:"danger",canRetry:!0}),de.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:t}},requestBody:{status:null}})}}B.logEventWithStatsig("ChatGPT Convo Stream: Polling Complete","chatgpt_convo_stream_polling_complete",{conversationId:t,retryCount:u})}return n.current||(B.logEvent("Conversation Polling Started"),d()),()=>{l=!0,o.current&&window.clearTimeout(o.current),n.current=!1}},[s,t,e]),null}function _W(t){const e=G(),s=jx(t),{value:n=null,source:o=null}=s!=null?s:{};return Qe(t,a=>{var m,p,g;const i=(m=Se.getCurrentNode(a))==null?void 0:m.message,l=r3(i,e),c=Se.getUpdateTime(a),u=Math.max(c!=null?c:0,(p=i==null?void 0:i.create_time)!=null?p:0,(g=i==null?void 0:i.update_time)!=null?g:0),d=Mw(new Date,new Date(u*1e3))<l;return Ee(e,"3922476776")&&d&&n===Xt.STREAMING&&o===Cn.SERVER})}function Ddt(){const t=G();x.useEffect(()=>{const e=s=>{var c,u,d,f,m,p,g,h;const n=s.payload.conversation_id,o=s.payload.update_content,a=s.payload.update_type;if(a==="refetch-conversation"){hr(n,{skipIfExisting:!1});return}if(a==="async-task-update-message"){const _=o.message;if(!_)return;nt(n,b=>{as.updateTree(b,y=>{y.updateNodeMessage(_.id,_)})}),(c=_.metadata)!=null&&c.async_task_id&&((u=_.metadata)!=null&&u.async_task_title)&&Bn.setTaskTitle(_.metadata.async_task_id,_.metadata.async_task_title),((d=_.metadata)==null?void 0:d.async_task_type)===on.IMAGE_GEN&&((f=_.metadata)!=null&&f.async_task_id)&&(Bn.setTaskImageGenMessage(_.metadata.async_task_id,_),_.status==="finished_successfully"&&(Bn.setTaskCompleted(_.metadata.async_task_id,_),h4e(_,n)))}if(a==="async-task-insert-message"){const _=o.message,b=o.insert_before_message_id;if(!_)return;nt(n,y=>{as.updateTree(y,v=>{v.prependNode(b,_)})})}const i=Et(t,n);if(yW(i).set(Date.now()),a==="add-messages"){let _=o.messages;if(!(_!=null&&_.length))return;const b=_.filter(v=>{var S;return(S=v.metadata)==null?void 0:S.async_completion_id});if(b.length>0){for(const v of b)(m=v.metadata)!=null&&m.async_completion_id&&Bn.setTaskCompleted((p=v.metadata)==null?void 0:p.async_completion_id,v);d1(t)&&(nt(n,v=>{as.setShouldRefetchConvoOnFinalize(v,!0)}),_=_.filter(v=>{var S;return!((S=v.metadata)!=null&&S.async_completion_id)}))}xW(i).set(v=>{if(!_.length)return v;const S=new Map(v.map(M=>[M.id,M]));for(const M of _)S.set(M.id,M);const C=v.map(M=>M.id),w=C.map(M=>S.get(M)).filter(Boolean),k=_.filter(M=>!C.includes(M.id));return[...w,...k]})}if(a==="async-task-start"&&Bn.setTask(o.async_task_id,{originalConversationId:n,taskId:o.async_task_id,title:o.title,prompt:o.prompt,status:Is.CREATED,createdAt:o.created_at,updatedAt:o.created_at,originalConversationUserMessageId:o.original_conversation_user_message_id}),a==="async-task-title"&&Bn.setTaskTitle(o.async_task_id,o.title),a==="async-task-completed"){const _=o.message;if(!_)return;(g=_.metadata)!=null&&g.async_completion_id&&Bn.setTaskCompleted((h=_.metadata)==null?void 0:h.async_completion_id,_),nt(n,b=>{d1(t)?as.setShouldRefetchConvoOnFinalize(b,!0):as.updateTree(b,(y,v)=>{if(y.getNodeIfExists(_.id))y.updateNodeMessage(_.id,_);else return y.addMessageNode(v,_),_.id})})}if(a==="title-update"){const _=o.title;if(!_)return;ok(t,n,_,$_.Server)}if(a==="set-conversation-async-status"&&"conversation_async_status"in o){const _=o.conversation_async_status,b=_?{value:_,source:Cn.SERVER}:null;so(n,b);const y=LC(n);y!==n&&so(y,b)}if(a==="moderation-response")try{const _=o.moderation_event,b=ML(_);if((b==null?void 0:b.type)!=="moderation")throw new Error("Expected moderation type but got ".concat(b==null?void 0:b.type));P8(b,n)}catch(_){}};return H9.on("conversation-update",e)},[t])}const BBe=Object.freeze([]),bv=10*1e3,UBe=200*1e3,xW=Gc(()=>Le([])),yW=Gc(()=>Le(null));function Fdt(t){"use forget";var re;const e=F.c(52),s=G(),n=oe(t.serverId$),o=(re=jx(n))==null?void 0:re.value;let a;e[0]!==o?(a=o&&[Xt.REALTIME,Xt.REALTIME_BUSY].includes(o),e[0]=o,e[1]=a):a=e[1];const i=a;let l;e[2]!==s?(l=he=>{var pe,le,ve,Te;const fe=(pe=Se.getCurrentNode(he))==null?void 0:pe.message;return[fe!=null?DBe(fe):0,fe!=null?US(fe,s):0,fe!=null?r3(fe,s):null,fe!=null?"".concat(fe.id,":").concat(fe.create_time):null,fe!=null?(le=fe.author)==null?void 0:le.role:null,fe!=null?fe.channel:null,(ve=Se.lastUserMessage(he))==null?void 0:ve.id,fe!=null?((Te=fe.metadata)==null?void 0:Te.async_task_type)===on.PRO_MODE:!1]},e[2]=s,e[3]=l):l=e[3];const[c,u,d,f,m,p,g,h]=Qe(n,l);let _;e[4]!==t?(_=()=>t?yW(t)():null,e[4]=t,e[5]=_):_=e[5];const b=oe(_),y=d!=null?d*60*1e3:UBe,[v,S]=x.useState(!1),[C,w]=x.useState(!1),[k,E]=x.useState(!1),M=x.useRef(null);let N;e[6]!==n?(N=()=>{if(S(!1),!n)return;const he=setTimeout(()=>{w(!0)},bv);return()=>{clearTimeout(he),w(!1)}},e[6]=n,e[7]=N):N=e[7];let A;e[8]!==g||e[9]!==n?(A=[n,g],e[8]=g,e[9]=n,e[10]=A):A=e[10],x.useEffect(N,A);let I;e[11]!==h||e[12]!==i||e[13]!==y||e[14]!==c||e[15]!==n?(I=()=>{if(n==null||!(i||h)||!c){E(!1);return}E(!1);let he=null;const fe=window.setTimeout(()=>{E(!0),$e.count(He.DEFAULT,"chatgpt_web_websocket_timeout_reached"),he=window.setTimeout(()=>{E(!1),$e.count(He.DEFAULT,"chatgpt_web_websocket_timeout_max_duration")},y)},c);return()=>{window.clearTimeout(fe),he&&window.clearTimeout(he)}},e[11]=h,e[12]=i,e[13]=y,e[14]=c,e[15]=n,e[16]=I):I=e[16];let P;e[17]!==h||e[18]!==i||e[19]!==b||e[20]!==y||e[21]!==c||e[22]!==n?(P=[n,i,h,c,b,y],e[17]=h,e[18]=i,e[19]=b,e[20]=y,e[21]=c,e[22]=n,e[23]=P):P=e[23],x.useEffect(I,P);const R=n!==void 0&&n!=null&&(i||h)&&(v&&C||k);let O;e[24]!==t?(O=()=>t?xW(t)():BBe,e[24]=t,e[25]=O):O=e[25];const L=oe(O),D=u&&u>0?u:bv,H=k?D:bv,V=n!=null?n:"missing";let q;e[26]!==V?(q=Up({clientThreadId:V,alwaysForceUpdate:!0}),e[26]=V,e[27]=q):q=e[27];let W;e[28]!==R||e[29]!==H||e[30]!==q?(W=U(T({},q),{enabled:R,refetchInterval:H,staleTime:H}),e[28]=R,e[29]=H,e[30]=q,e[31]=W):W=e[31];const{data:$}=dt(W);let Z,K;e[32]!==$?(Z=()=>{$&&S(!1)},K=[$],e[32]=$,e[33]=Z,e[34]=K):(Z=e[33],K=e[34]),x.useEffect(Z,K);let Y;e[35]!==m||e[36]!==p||e[37]!==f||e[38]!==n||e[39]!==k?(Y=()=>{if(!n){M.current=null;return}k&&m==="assistant"&&p==="final"&&f&&f!==M.current&&(B.logEventWithStatsig("chatgpt_web_polled_for_final_assistant_message","chatgpt_web_polled_for_final_assistant_message",{conversationId:n}),$e.count(He.DEFAULT,"chatgpt_web_polled_for_final_assistant_message")),M.current=f},e[35]=m,e[36]=p,e[37]=f,e[38]=n,e[39]=k,e[40]=Y):Y=e[40];let ae;e[41]!==D||e[42]!==m||e[43]!==p||e[44]!==f||e[45]!==n||e[46]!==k?(ae=[f,m,p,k,n,D],e[41]=D,e[42]=m,e[43]=p,e[44]=f,e[45]=n,e[46]=k,e[47]=ae):ae=e[47],x.useEffect(Y,ae);let se,ee;e[48]!==L||e[49]!==n?(se=()=>{if(!L.length||!n)return;const he=L;he.length&&nt(n,fe=>{as.updateTree(fe,(pe,le)=>{let ve=le;const Te=xe=>{var ce;if(xe.id!==le){if((ce=xe.metadata)!=null&&ce.append_to_end&&pe.getNodeIfExists(le)){ve=pe.addMessageNode(le,xe);return}S(!0)}};if(he.forEach(xe=>{var Ae,Ue;const ce=Ya(xe),we=pe.getNodeIfExists(ce.id);let ge=(Ae=ce.metadata)==null?void 0:Ae.parent_id;if(we&&we.id===le&&we.parentId&&(ge=we.parentId),ge)if(pe.getNodeIfExists(ce.id)){const Ie=pe.getNodeByIdOrMessageId(ce.id);if(Ie.message.create_time&&ce.create_time&&Ie.message.create_time>ce.create_time)return;if(Ie.parentId!==ge){if(!pe.getNodeIfExists(ge)){S(!0);return}pe.moveNode(ge,Ie.id),ve=pe.getLeafFromNodeAvoidingPlaceholders(Ie.id).id;const te=pe.getNodeByIdOrMessageId(ge).children.map(Q=>pe.getNodeIfExists(Q)).filter(Q=>(Q==null?void 0:Q.id)!==Ie.id).find(HBe);te&&(pe.moveNode(ve,te.id),ve=pe.getLeafFromNodeAvoidingPlaceholders(te.id).id)}pe.updateNodeMessage(ce.id,ce)}else if(pe.getNodeIfExists(ge)){const Ie=pe.getNodeByIdOrMessageId(ge);(Ue=Ie.message.clientMetadata)!=null&&Ue.isOptimistic&&Ie.children.forEach(te=>{var ie;const Q=pe.getNodeIfExists(te);(ie=Q==null?void 0:Q.message.clientMetadata)!=null&&ie.isPlaceholder&&pe.deleteNode(Q.id)}),ve=pe.addMessageNode(ge,ce);const Me=Ie.children.map(te=>pe.getNodeIfExists(te)).find($Be);Me&&(pe.moveNode(ve,Me.id),ve=pe.getLeafFromNodeAvoidingPlaceholders(Me.id).id)}else Te(ce);else{Te(ce);return}}),ve!==le)return ve})})},ee=[L,n],e[48]=L,e[49]=n,e[50]=se,e[51]=ee):(se=e[50],ee=e[51]),x.useEffect(se,ee)}function $Be(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function HBe(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function Bdt(){const t=G();x.useEffect(()=>{const e=s=>{const n=s.payload.conversation_id,o=s.payload.update_content,a=s.payload.update_type;if(a==="chime-start-task"){const i=o.task_id,l=o.initiating_message_id;nt(n,c=>{c&&(c.asyncTurns||(c.asyncTurns={}),c.asyncTurns[i]?(c.asyncTurns[i].status="streaming_cot_messages",c.asyncTurns[i].initiatingMessageId=l):c.asyncTurns[i]={turnId:i,messages:{},title:o.title,status:"streaming_cot_messages",initiatingMessageId:l})})}if(a==="chime-update-title"){const i=o.task_id,l=o.title;nt(n,c=>{var d;if(!c)return;const u=(d=c.asyncTurns)==null?void 0:d[i];u&&(u.title=l)})}if(a==="chime-cot-message-add"||a==="chime-final-message-add"){const i=o.task_id,l=o.message;nt(n,c=>{var d;if(!c)return;const u=(d=c.asyncTurns)==null?void 0:d[i];u&&(u.status="streaming_cot_messages",u.messages[l.id]=l,a==="chime-final-message-add"&&(u.status="streaming_final_message",c.tree.getNodeIfExists(l.id)?as.updateTree(c,m=>{l.metadata||(l.metadata={}),m.updateNodeMessage(l.id,l)}):as.appendMessage(c,l),l.status==="finished_successfully"&&(u.status="done")))})}};return H9.on("conversation-update",e)},[t])}const Udt=()=>{"use forget";const t=F.c(2),e=G();let s;return t[0]!==e?(s=()=>Np()&&ax()&&_o(e,"43324078").get("enabled",!1),t[0]=e,t[1]=s):s=t[1],oe(s)},GBe=Pe(()=>{const t=me(()=>import("./i5unukvhln08phr2.js"),__vite__mapDeps([288,1,3,4,289,290,75,291,292,293,35])).then(e=>e.NewUserPersonalityOnboarding);return t.catch(e=>{Ge.addAction("chatgpt_personality_upsell_load_error",{cause:e.message}),B.logEventWithStatsig("Web: Personality Upsell: Load Error","chatgpt_personality_upsell_load_error",{cause:e.message})}),t});function VBe(t){const e={openedAt:Date.now(),closedAt:null,hasLoggedImpression:!1,increment:(s,n,o)=>{var a,i;s==="personality"?(e.selectionCounts[n]=((a=e.selectionCounts[n])!=null?a:0)+1,B.logEventWithStatsig("Web: Personality Selection: Personality Selected","chatgpt_personality_onboarding_personality_selection",{personality:n}),Ge.addAction("chatgpt_personality_onboarding_personality_selection",{personality:n,platform:"web"})):(e.selectionCounts[n]=((i=e.selectionCounts[n])!=null?i:0)+1,B.logEventWithStatsig("Web: Personality Selection: Trait Selected","chatgpt_personality_onboarding_trait_selection",{trait:n,level:o}),Ge.addAction("chatgpt_personality_onboarding_trait_selection",{trait:n,level:o,platform:"web"}))},log:s=>{switch(s){case"impression":{if(e.hasLoggedImpression)return;e.hasLoggedImpression=!0,e.openedAt=Date.now(),B.logEventWithStatsig("Web: Personality Selection: Onboarding Shown","chatgpt_personality_onboarding_modal_impression"),Ge.addAction("chatgpt_personality_onboarding_modal_impression",{platform:"web"});break}case"skip":{B.logEventWithStatsig("Web: Personality Selection: Skip","chatgpt_personality_onboarding_skip"),Ge.addAction("chatgpt_personality_onboarding_skip",{platform:"web"});break}}},mode:t,selectionCounts:{},finalSelection:null,wasSubmitted:!1};return e}function $dt(t,e,s){t.closedAt=Date.now(),t.wasSubmitted=e,s&&(t.finalSelection=s)}function zBe(t){if(!t.closedAt||!t.openedAt)return null;const e=t.closedAt-t.openedAt;return e<3e4?"under_30_seconds":e<6e4?"30_60_seconds":e<5*6e4?"1_5_minutes":"5_plus_minutes"}async function Hdt(t){var l;await Nd.yield();const{mode:e,finalSelection:s,wasSubmitted:n}=t,o=(l=zBe(t))!=null?l:null,a=n?"success":"failure";if(!n)return;const i=e==="personality"?"Web: Personality Selection: Continue":"Web: Traits Selection: Continue";B.logEventWithStatsig(i,"chatgpt_personality_onboarding_submit",{outcome:a,mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:s,selection_counts:t.selectionCounts}),Ge.addAction("chatgpt_personality_onboarding_continue",{mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:s,selection_counts:t.selectionCounts})}function i3(){return Ps({queryKey:["personalityOnboarding"],queryFn:()=>de.safeGet("/personality_onboarding")})}Bt(t=>Qn(t,()=>i3()));class WBe{constructor(e,s,n,o={}){X(this,"selectedPersonality$");X(this,"selectedTraits$");X(this,"serverData$");X(this,"logging");X(this,"mode");X(this,"mockData$");X(this,"serverDataPromise");X(this,"intervalSec$",vt(()=>{var s,n;return(n=(s=this.serverData$().data)==null?void 0:s.interval_sec)!=null?n:4}));X(this,"personalities$",vt(()=>{var i,l,c;let e=[],s=this.selectedPersonality$();const n=this.mockData$(),o=n?{data:n}:null,a=o!=null?o:this.serverData$();return(i=a.data)!=null&&i.default_personality_key&&(s=a.data.default_personality_key),e=(c=(l=a.data)==null?void 0:l.personalities)!=null?c:[],e.map(u=>U(T({},u),{selected$:Le(s===u.key)}))}));X(this,"traits$",vt(()=>{const e=this.mockData$(),s=e?{data:e}:null,n=s!=null?s:this.serverData$();return!n||!n.data||!n.data.traits?[]:n.data.traits.map(o=>U(T({},o),{selected$:Le(this.selectedTraits$().includes(o.key))}))}));var a,i,l;this.ctx=e,this.flow=s,this.selectedPersonality$=Le((a=o.selectedPersonality$)!=null?a:null),this.selectedTraits$=Le((i=o.selectedTraits$)!=null?i:[]),this.mode=n,this.logging=VBe(n),this.mockData$=Le((l=o.mockData$)!=null?l:null),this.serverData$=Qn(e,()=>i3()),this.serverDataPromise=this.watchServerData()}watchServerData(){let e,s;const n=new Promise((o,a)=>{e=o,s=a});return kl(()=>{const o=this.serverData$();o.status==="success"?e(o.data):o.status==="error"&&s(o.error)}),n}}function qBe(t,e,s,n){return new WBe(t,e,s,n)}const Gdt=cee(qBe),KBe=ys(t=>Qn(t,()=>i3())),bW=ys(t=>vt(()=>{const e=KBe(t)();return e.status==="success"?e.data:null},{getServerFallback(){return null}}));function YBe(){return Ps({queryKey:["personalityTypeList"],queryFn:()=>de.safeGet("/personality_types")})}function QBe(){return Ps({queryKey:["traitsList"],queryFn:()=>de.safeGet("/personality_trait_types")})}const vW=ys(t=>Qn(t,()=>YBe())),JBe=ys(t=>Qn(t,()=>QBe()));Bt(t=>vt(()=>{var s;const e=bW(t)();return e?(s=e==null?void 0:e.can_close_onboarding)!=null?s:!0:null}));const Vdt=ys(t=>vt(()=>{var n;const e=JBe(t)(),s=[];return!e||!e.data||!e.data.trait_types?s:(n=e.data)==null?void 0:n.trait_types})),zdt=ys(t=>vt(()=>{var s;const e=vW(t)();return e?(s=e.data)!=null?s:[]:[]})),Wdt=Bt(t=>vt(()=>{var o;const e=vW(t)();if(!e)return null;const s=uee(t);return(o=e.data)==null?void 0:o.find(a=>a.key===s)}));function qdt(t){"use forget";var h;const e=F.c(11),{conversation:s}=t,n=G(),{hash:o}=Hs(),a=o==="#personality-onboarding";let i;e[0]!==s?(i=()=>s.serverId$(),e[0]=s,e[1]=i):i=e[1];const l=oe(i),c=Qe(s.id,ZBe),{eligible:u}=Ct(We.hasSeenExistingUserPersonalityOnboarding);let d,f;e[2]!==n||e[3]!==u||e[4]!==a?(d=()=>{!u&&!a&&bW(n)()},f=[u,n,a],e[2]=n,e[3]=u,e[4]=a,e[5]=d,e[6]=f):(d=e[5],f=e[6]),x.useEffect(d,f);const m=l!=null?l:null,p=(h=c==null?void 0:c.id)!=null?h:null;let g;return e[7]!==a||e[8]!==m||e[9]!==p?(g=r.jsx(GBe,{conversationId:m,messageId:p,isPersonalityOnboardingRoute:a}),e[7]=a,e[8]=m,e[9]=p,e[10]=g):g=e[10],g}function ZBe(t){return Se.getLastAssistantMessage(t)}class Zi extends Lc()(s=>s){constructor(){super(...arguments);X(this,"startReplay",s=>{this.setState(()=>({isReplayEnabled:!0,finalMessageId:s}))});X(this,"endReplay",()=>{this.setState(()=>({isPlaying:!1,isReplayEnabled:!1,finalMessageId:null}))});X(this,"setIsReplayEnabled",s=>{this.setState(n=>U(T({},n),{isReplayEnabled:s}))});X(this,"toggleIsPlaying",()=>{this.setState(s=>U(T({},s),{isPlaying:!s.isPlaying}))});X(this,"setPlaying",s=>{this.setState(n=>U(T({},n),{isPlaying:s}))});X(this,"setSpeed",s=>{this.setState(n=>U(T({},n),{playbackSpeed:s}))})}}X(Zi,"getFinalMessageId",({finalMessageId:s})=>s),X(Zi,"isReplayInProgress",(s,n)=>s.isReplayEnabled&&s.finalMessageId!==n);function Kdt({children:t,clientThreadId:e}){const s=Qe(e,d=>!!(d!=null&&d.tree.getBranchFromLeaf(d.currentLeafId).some(f=>{var m;return(m=f.message.metadata)==null?void 0:m.n7jupd_message}))),n=Qe(e,d=>d==null?void 0:d.currentLeafId),o=!!n,l=Z_()&&s&&!!n,c=l?n:null,[u]=x.useState(()=>new Zi({finalMessageId:c,isReplayEnabled:l,isPlaying:!1,playbackSpeed:1}));return x.useEffect(()=>{o&&l&&u.setState({isReplayEnabled:l,finalMessageId:c})},[o]),r.jsx(Zi.Provider,{store:u,children:t})}function Ydt(t){return xr(t).getExperiment("3438591328").get("use_scroll_v3",!1)}const XBe=ue(Ce,"14ac53",20,20),eUe=({onClick:t})=>{const e=ne();return r.jsx("div",{className:z("sticky top-6 z-10 flex h-0 items-start justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-top])]/thread:scale-50","group-[:not([data-scroll-from-top])]/thread:opacity-0","group-[:not([data-scroll-from-top])]/thread:pointer-events-none","group-[:not([data-scroll-from-top])]/thread:duration-100","group-[:not([data-scroll-from-top])]/thread:delay-0"),children:r.jsx(SW,{label:e.formatMessage({id:"dZQBu/",defaultMessage:"Scroll to beginning"}),onClick:t,children:r.jsx(XBe,{className:"icon text-token-text-primary min-w-8"})})})},tUe=({streamingState:t,onClick:e})=>{const s=ne();return r.jsx("div",{className:z("sticky bottom-[calc(var(--composer-overlap-px)+--spacing(6))] z-10 flex h-0 items-end justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-end])]/thread:scale-50","group-[:not([data-scroll-from-end])]/thread:opacity-0","group-[:not([data-scroll-from-end])]/thread:pointer-events-none","group-[:not([data-scroll-from-end])]/thread:duration-100","group-[:not([data-scroll-from-end])]/thread:delay-0"),children:r.jsx(SW,{label:s.formatMessage({id:"JDdG2F",defaultMessage:"Scroll to end"}),onClick:e,contentKey:t,children:r.jsxs("div",{className:"absolute end-0 flex items-center pe-1 text-nowrap",children:[t==="streaming"?r.jsx("span",{className:"loading-shimmer-pure-text ps-2.5",children:r.jsx(j,{id:"lMu1TV",defaultMessage:"Responding"})}):t==="unseen"?r.jsx("span",{className:"ps-2.5",children:r.jsx(j,{id:"mX2yAS",defaultMessage:"Done"})}):null,r.jsx(y$,{className:"icon text-token-text-primary min-w-6"})]})})})},SW=({children:t,label:e,onClick:s,contentKey:n})=>{const o=x.useRef(null),a=x.useCallback(()=>{const i=o.current,l=i==null?void 0:i.firstElementChild;l&&(i.style.width="".concat(l.clientWidth,"px"))},[]);return x.useEffect(()=>{n!=null&&a()},[a,n]),r.jsx("button",{tabIndex:-1,onClick:s,"aria-label":e,onTransitionEnd:a,className:z("absolute flex h-8 min-w-8 cursor-pointer items-center justify-end overflow-hidden rounded-full outline-hidden select-none","motion-safe:transition-width motion-safe:duration-300","btn-secondary box-content shadow-sm sm:shadow-md dark:shadow-none!"),ref:o,children:t})},sUe="R6Vx5W_threadGutter",nUe="R6Vx5W_threadRoot",oUe={threadGutter:sUe,threadRoot:nUe},Qdt=s=>{var n=s,{clientThreadId:t}=n,e=De(n,["clientThreadId"]);const o=pwe(),[a,i,l]=Qe(t,f=>{var m,p;return[Se.isMessageTurnEnded(f),Se.getRequestId(f),(p=(m=Se.getConversationLastTurn(f))==null?void 0:m.messages.some(g=>o.has(g.id)))!=null?p:!1]}),u=Sr(i)&&!a||l,d=r.jsx(aUe,T({isStreaming:u},e));return e.initScrolledToEnd?r.jsx(lf,{children:r.jsxs(x.Suspense,{fallback:null,children:[r.jsx(Kie,{}),d]})}):d},aUe=({allowScrollToEnd:t,allowScrollToTop:e,children:s,initScrolledToEnd:n,isStreaming:o,threadFooterRef:a,threadRootRef:i})=>{const l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),[f,m]=x.useState("seen");zn(()=>{const h=l.current;!n||!h||(h.scrollTop=h.scrollHeight,requestAnimationFrame(()=>{h.scrollTop=h.scrollHeight,requestAnimationFrame(()=>{h.scrollTop=h.scrollHeight})}))},[]),e0(()=>{const h=i.current,_=a.current,b=l.current,y=u.current,v=c.current;if(!h||!b||!y||!v)return;const S=Mj(y,{root:b,threshold:0},E=>{tn.setIsConversationScrolledFromTop(!E.isIntersecting),dc(h,"data-scroll-from-top",!E.isIntersecting)}),C=Array.from({length:101},(E,M)=>M/100),w=Mj(v,{root:b,threshold:C,rootMargin:"1px"},E=>{iUe(b,v),!E.isIntersecting&&CW(d)?vv(h,b):dc(h,"data-scroll-from-end",!E.isIntersecting)}),k=_&&uUe(_,E=>{h.style.setProperty("--thread-footer-height","".concat(E,"px"))});return()=>{S==null||S(),w==null||w(),k==null||k()}}),x.useEffect(()=>{const h=i.current,_=c.current,b=l.current;!t||!h||!_||!b||(dc(h,"data-stream-active",o),o&&vv(h,b),m(o?"streaming":B9(h,"data-scroll-from-end")?"unseen":"seen"),o||cUe(d))},[o]);const p=x.useCallback(()=>{const h=i.current,_=l.current;!h||!_||rUe(h,_)},[i]),g=x.useCallback(()=>{pt.logEvent("chatgpt_thread_scroll_to_bottom");const h=i.current,_=l.current,b=c.current;!h||!_||!b||(vv(h,_),o?lUe(h,d):m("seen"))},[o,i]);return r.jsxs("div",{className:"@container h-full overflow-y-auto [scrollbar-gutter:stable_both-edges] group-data-stream-active/thread:[overflow-anchor:none]",ref:l,children:[e&&r.jsx(eUe,{onClick:p}),r.jsx("div",{ref:u,className:"pointer-events-none w-px"}),s,r.jsx("div",{ref:c,className:z("pointer-events-none w-px",oUe.threadGutter,"min-h-[max(var(--gutter-min-height,0px),var(--gutter-remaining-height,0px))] md:[--gutter-min-height:2.25rem]","group-data-stream-active/thread:h-(--thread-end-gutter-active-height)")}),t&&r.jsx(tUe,{streamingState:f,onClick:g})]})};function rUe(t,e){dc(t,"data-scroll-from-top",!1),e==null||e.scrollTo({top:0,behavior:"smooth"})}function vv(t,e){dc(t,"data-scroll-from-end",!1),e==null||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function iUe(t,e){const s=t.getBoundingClientRect().bottom-e.getBoundingClientRect().top;s>0?e.style.setProperty("--gutter-remaining-height","".concat(s,"px")):e.style.removeProperty("--gutter-remaining-height")}function CW(t){return t.current!=null}function lUe(t,e){if(!CW(e)&&t){const s=()=>{e.current=null,t.removeEventListener("wheel",s),t.removeEventListener("pointerdown",s)};e.current=s,t.addEventListener("wheel",s,{passive:!0}),t.addEventListener("pointerdown",s)}}function cUe(t){var e;(e=t.current)==null||e.call(t)}function Mj(t,e,s){const n=new IntersectionObserver(o=>{s(o[o.length-1])},e);return n.observe(t),()=>n.disconnect()}function uUe(t,e){const s=()=>e(t.getBoundingClientRect().height);s();const n=new ResizeObserver(s);return n.observe(t),()=>n.disconnect()}function Jdt({message:t,className:e}){return r.jsxs("div",{className:z("bg-token-bg-status-warning text-token-text-status-warning border-token-border-status-warning flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm font-medium",e),children:[r.jsx(bR,{className:"icon-sm text-token-text-status-warning shrink-0"}),r.jsx("span",{className:"text-pretty",children:t})]})}const dUe="listening",fUe="connecting",Zdt=()=>{"use forget";const{layerParam:t,statsigEnabled:e}=dee(),s=t&&e,n=fee();let o;e:{if(s){if(n===dUe){o=L7e;break e}else if(n===fUe){o=D7e;break e}}else{o=void 0;break e}o=void 0}return o};function mUe({id:t,name:e,checked:s,onChange:n=Tn}){return r.jsx("input",{className:"sr-only",checked:s,id:t,name:e,type:"checkbox",readOnly:!0,onChange:n})}function Xdt(t){"use forget";const e=F.c(8),{gizmo:s}=t;let n;e[0]!==s?(n=s?x6(s.tools):!1,e[0]=s,e[1]=n):n=e[1];const o=n;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsxs("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]","data-testid":"temporary-chat-label",children:[r.jsx(mUe,{id:"temporary-chat-checkbox",name:"temporary-chat-checkbox",checked:!0}),r.jsx(j,T({},Qu.temporaryChat))]}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(gUe,{}),e[3]=i):i=e[3];let l;e[4]!==o?(l=o&&r.jsx("div",{className:"mt-3",children:r.jsx(j,U(T({},Qu.temporaryChatDescriptionGptActions),{values:{link:pUe}}))}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a,r.jsxs("div",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-[24rem] text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:[i,l]})]}),e[6]=l,e[7]=c):c=e[7],c}function pUe(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/8914046-temporary-chat-faq",target:"_blank",className:"underline",rel:"noreferrer",children:t})}function gUe(){"use forget";const t=F.c(2),e=G(),s=ct(e),n=s==null?void 0:s.isWorkspaceAccount(),o=Dp(),a=n?o?Qu.temporaryChatBizMemoryAvailable:Qu.temporaryChatBizMemoryUnavailable:o?Qu.temporaryChatDescriptionMemoryAvailable:Qu.temporaryChatDescriptionMemoryUnavailable;let i;return t[0]!==a?(i=r.jsx(j,T({},a)),t[0]=a,t[1]=i):i=t[1],i}const Qu=Ne({temporaryChat:{id:"GizmoLanding.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatBizMemoryAvailable:{id:"otDmKh",defaultMessage:"Memory is disabled for this chat, and it wont appear in your history."},temporaryChatBizMemoryUnavailable:{id:"fQmbtG",defaultMessage:"This chat won't appear your conversation history."},temporaryChatDescriptionMemoryAvailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryAvailable",defaultMessage:"This chat won't appear in history, use or update ChatGPT's memory, or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionMemoryUnavailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryUnavailable",defaultMessage:"This chat won't appear in history or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionGptActions:{id:"GizmoLanding.temporaryChatDescriptionGptActions",defaultMessage:"Any data shared with a third party through GPT actions are subject to the third party's privacy policy. <link>Learn more</link>"}});function eft(t){return Ee(t,"2429530106")}function hUe(t){return Ee(t,"330297645")}const wW=ys(()=>{const t=Le("loading");return{auraAnnouncementBannerState$:t,setAuraAnnouncementBannerState:s=>{t.set(s)}}});function _Ue(){const t=localStorage.getItem(Be.AuraAnnouncementBannerImpressions),e=t?parseInt(t):null;e==null||isNaN(e)?localStorage.setItem(Be.AuraAnnouncementBannerImpressions,JSON.stringify(1)):localStorage.setItem(Be.AuraAnnouncementBannerImpressions,JSON.stringify(e+1)),localStorage.setItem(Be.LastSeenAuraAnnouncementBannerAt,JSON.stringify(Wo(new Date))),localStorage.getItem(Be.FirstSeenAuraAnnouncementBannerAt)==null&&localStorage.setItem(Be.FirstSeenAuraAnnouncementBannerAt,JSON.stringify(Wo(new Date)))}function xUe(t){const e=localStorage.getItem(Be.FirstSeenAuraAnnouncementBannerAt);if(!e)return!1;const s=parseInt(e);if(isNaN(s))return!1;const n=ta(s);return mo(new Date,n)>t}function yUe(t){const e=localStorage.getItem(Be.AuraAnnouncementBannerImpressions);if(!e)return!1;const s=parseInt(e);return isNaN(s)?!1:s>=t}function bUe(t){const e=js(t,"619645130"),s=e.get("max_days_visible",-1);if(s>=0&&xUe(s))return!0;const n=e.get("max_impressions",-1);if(n>=0&&yUe(n))return!0;if(e.get("limit_one_impression_per_day",!1)){const a=localStorage.getItem(Be.LastSeenAuraAnnouncementBannerAt),i=a?parseInt(a):null;if(i!=null&&!isNaN(i)){const l=ta(i);if(mo(new Date,l)<1)return!0}}return!1}function vUe(){return localStorage.getItem(Be.HasDismissedAuraAnnouncementBanner)!=null}function kW(){localStorage.setItem(Be.HasDismissedAuraAnnouncementBanner,"true")}const SUe=t=>x.createElement("svg",T({viewBox:"0 0 468 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),x.createElement("style",null,"\n  .path1 { fill: var(--bg-primary, currentColor); }\n  .path2 { fill: var(--tab-color, rgba(0,0,0,1)); }\n"),x.createElement("g",{clipPath:"url(#clip0_3_20)"},x.createElement("mask",{id:"path-1-outside-1_3_20",maskUnits:"userSpaceOnUse",x:-1,y:7.19714,width:777,height:50,fill:"black"},x.createElement("rect",{fill:"currentColor",x:-1,y:7.19714,width:777,height:50}),x.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z"})),x.createElement("path",{className:"path1",fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z",fill:"currentColor"}),x.createElement("path",{className:"path2",d:"M34.3496 11.2608L33.4586 10.8068L33.4586 10.8068L34.3496 11.2608ZM36.8017 8.80871L37.2557 9.69972L37.2557 9.69972L36.8017 8.80871ZM129.429 8.80871L129.883 7.9177L129.883 7.9177L129.429 8.80871ZM131.881 11.2608L130.99 11.7148L130.99 11.7148L131.881 11.2608ZM132.492 26.2161H131.492L131.492 26.23L132.492 26.2161ZM132.492 30.6417H131.492V31.6417H132.492V30.6417ZM132.492 30.6413H133.492V29.6413H132.492V30.6413ZM33.7385 30.6413V29.6413H32.7385V30.6413H33.7385ZM33.7385 30.6417V31.6417H34.7385V30.6417H33.7385ZM33.738 26.2153L34.738 26.229V26.2153H33.738ZM0 30.6421V29.6421H-1V30.6421H0ZM774.322 30.6421H775.322V29.6421H774.322V30.6421ZM0 55.3306H-1V56.3306H0V55.3306ZM774.322 55.3306V56.3306H775.322V55.3306H774.322ZM34.3496 11.2608L33.4586 10.8068C33.069 11.5714 32.8993 12.4106 32.8178 13.408C32.7372 14.3939 32.738 15.6201 32.738 17.1748H33.738H34.738C34.738 15.5871 34.7388 14.4564 34.8111 13.5709C34.8825 12.6971 35.0186 12.1505 35.2406 11.7148L34.3496 11.2608ZM36.8017 8.80871L36.3477 7.9177C35.1038 8.55152 34.0924 9.56288 33.4586 10.8068L34.3496 11.2608L35.2406 11.7148C35.6827 10.8472 36.3881 10.1418 37.2557 9.69972L36.8017 8.80871ZM42.7157 8.19714V7.19714C41.1609 7.19714 39.9347 7.19637 38.9489 7.27691C37.9514 7.35841 37.1123 7.52812 36.3477 7.9177L36.8017 8.80871L37.2557 9.69972C37.6914 9.47773 38.238 9.34166 39.1118 9.27027C39.9973 9.19792 41.1279 9.19714 42.7157 9.19714V8.19714ZM123.515 8.19714V7.19714H42.7157V8.19714V9.19714H123.515V8.19714ZM129.429 8.80871L129.883 7.9177C129.118 7.52812 128.279 7.35841 127.281 7.27691C126.295 7.19637 125.069 7.19714 123.515 7.19714V8.19714V9.19714C125.102 9.19714 126.233 9.19792 127.118 9.27027C127.992 9.34166 128.539 9.47773 128.975 9.69972L129.429 8.80871ZM131.881 11.2608L132.772 10.8068C132.138 9.56289 131.126 8.55153 129.883 7.9177L129.429 8.80871L128.975 9.69972C129.842 10.1418 130.548 10.8472 130.99 11.7148L131.881 11.2608ZM132.492 17.1748H133.492C133.492 15.6201 133.493 14.3939 133.412 13.408C133.331 12.4106 133.161 11.5714 132.772 10.8068L131.881 11.2608L130.99 11.7148C131.212 12.1505 131.348 12.6971 131.419 13.5709C131.491 14.4564 131.492 15.5871 131.492 17.1748H132.492ZM132.492 26.2161H133.492V17.1748H132.492H131.492V26.2161H132.492ZM136.981 30.6417V29.6417C135.071 29.6417 133.519 28.1059 133.492 26.2022L132.492 26.2161L131.492 26.23C131.534 29.2258 133.976 31.6417 136.981 31.6417V30.6417ZM132.492 30.6417V31.6417H136.981V30.6417V29.6417H132.492V30.6417ZM132.492 30.6413H131.492V30.6417H132.492H133.492V30.6413H132.492ZM33.7385 30.6413V31.6413H132.492V30.6413V29.6413H33.7385V30.6413ZM33.7385 30.6417H34.7385V30.6413H33.7385H32.7385V30.6417H33.7385ZM29.2492 30.6417V31.6417H33.7385V30.6417V29.6417H29.2492V30.6417ZM33.738 26.2153L32.7381 26.2016C32.712 28.1056 31.1596 29.6417 29.2492 29.6417V30.6417V31.6417C32.255 31.6417 34.6968 29.2253 34.7379 26.229L33.738 26.2153ZM33.738 17.1748H32.738V26.2153H33.738H34.738V17.1748H33.738ZM0 30.6421V31.6421H774.322V30.6421V29.6421H0V30.6421ZM0 55.3306H1V30.6421H0H-1V55.3306H0ZM774.322 55.3306V54.3306H0V55.3306V56.3306H774.322V55.3306ZM774.322 30.6421H773.322V55.3306H774.322H775.322V30.6421H774.322Z",mask:"url(#path-1-outside-1_3_20)"})),x.createElement("defs",null,x.createElement("clipPath",{id:"clip0_3_20"},x.createElement("rect",{width:468,height:55.3307,fill:"currentColor"})))),TW="https://persistent.oaistatic.com/sandwich/26e83b2ac5b9e29e1.webp",EW="https://persistent.oaistatic.com/sandwich/2cf24dba5fb0a30e.webp",CUe="https://persistent.oaistatic.com/atlas/public/ChatGPT_Atlas.dmg",wUe="https://persistent.oaistatic.com/atlas/public/Install_ChatGPT_Atlas.dmg";function kUe(t){B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Download Clicked","chatgpt_web_aura_announcement_banner_download_clicked",{download_type:t}),$e.count(He.ATLAS,"chatgpt_web_aura_announcement_banner_download_clicked")}const $S=468,HS=520,tft=t=>{"use forget";const e=F.c(39),{shouldShowDisclaimer:s,clientThreadId:n}=t,o=G(),a=Bs(n),i=Qe(n,Se.getCurrentLeafId);let l;e[0]!==i||e[1]!==a?(l={serverThreadId:a,leafId:i},e[0]=i,e[1]=a,e[2]=l):l=e[2];const c=dk(l);let u;e[3]!==n||e[4]!==o?(u=()=>oi(n,o),e[3]=n,e[4]=o,e[5]=u):u=e[5];const d=u,{mutate:f}=gg(d),{mutate:m}=hg(d),{mutate:p}=xE(d),g=(c==null?void 0:c.beacon_id)==="atlas_launch_announcement_banner",h=f0("(max-height: 660px)"),_=x.useRef(!1);let b,y;e[6]!==c||e[7]!==h||e[8]!==f||e[9]!==g?(b=()=>{!g||h||_.current||(Gd(c,"show"),f(c.beacon_id),_.current=!0)},y=[c,f,g,h],e[6]=c,e[7]=h,e[8]=f,e[9]=g,e[10]=b,e[11]=y):(b=e[10],y=e[11]),x.useEffect(b,y);let v;e[12]!==c||e[13]!==m?(v=()=>{c&&(Gd(c,"dismiss"),m(c.beacon_id),No.dismiss())},e[12]=c,e[13]=m,e[14]=v):v=e[14];const S=v;let C;e[15]!==S?(C=()=>{S(),B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),$e.count(He.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[15]=S,e[16]=C):C=e[16];const w=C;let k;e[17]!==c||e[18]!==p?(k=()=>{c&&(p({beaconId:c.beacon_id,eventCtaId:"atlas_launch_announcement_banner_download_click"}),B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:c.beacon_id,beacon_name:c.beacon_name}))},e[17]=c,e[18]=p,e[19]=k):k=e[19];const E=k;let M;e[20]!==o?(M=wW(o),e[20]=o,e[21]=M):M=e[21];const{setAuraAnnouncementBannerState:N}=M;let A,I;e[22]!==N||e[23]!==g?(I=()=>{N(g?"shown":"not-shown")},A=[g,N],e[22]=N,e[23]=g,e[24]=A,e[25]=I):(A=e[24],I=e[25]),x.useEffect(I,A);let P;e[26]!==o?(P=bUe(o)||vUe(),e[26]=o,e[27]=P):P=e[27];const R=P,O=!!c;let L,D;if(e[28]!==R||e[29]!==O||e[30]!==S||e[31]!==g?(L=()=>{!R||!O||!g||S()},D=[R,O,S,g],e[28]=R,e[29]=O,e[30]=S,e[31]=g,e[32]=L,e[33]=D):(L=e[32],D=e[33]),x.useEffect(L,D),!g||h||R)return null;let H;return e[34]!==n||e[35]!==w||e[36]!==E||e[37]!==s?(H=r.jsx(MW,{shouldShowDisclaimer:s,onDismiss:w,onClicked:E,type:"beacon",clientThreadId:n,className:"fixed"}),e[34]=n,e[35]=w,e[36]=E,e[37]=s,e[38]=H):H=e[38],H},sft=t=>{"use forget";const e=F.c(16),{shouldShowDisclaimer:s,clientThreadId:n}=t,o=G();let a;e[0]!==o?(a=()=>mee(o).data,e[0]=o,e[1]=a):a=e[1];const i=oe(a),l=Bs(n),[c,u]=x.useState(!1);let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{u(!0),kW(),B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),$e.count(He.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[2]=d):d=e[2];const f=d,m=Date.now()/1e3-604800,p=i&&i.created<m,{data:g,isLoading:h}=qo(Qt.BrowserReferenceWebHistoryInChat),_=g!==void 0;let b;e[3]!==l?(b={serverThreadId:l},e[3]=l,e[4]=b):b=e[4];const y=!!Sce(b),v=!p||_||y,S=PUe;let C;e[5]!==o?(C=wW(o),e[5]=o,e[6]=C):C=e[6];const{setAuraAnnouncementBannerState:w}=C;let k,E;if(e[7]!==i||e[8]!==v||e[9]!==h||e[10]!==w?(k=()=>{h||!i||w(v?"not-shown":"shown")},E=[i,v,h,w],e[7]=i,e[8]=v,e[9]=h,e[10]=w,e[11]=k,e[12]=E):(k=e[11],E=e[12]),x.useEffect(k,E),f0("(max-height: 660px)")||c||v||h)return null;let N;return e[13]!==n||e[14]!==s?(N=r.jsx(MW,{shouldShowDisclaimer:s,onDismiss:f,onClicked:S,type:"manual",clientThreadId:n,className:"fixed"}),e[13]=n,e[14]=s,e[15]=N):N=e[15],N};function MW(t){"use forget";const e=F.c(33),{shouldShowDisclaimer:s,onDismiss:n,onClicked:o,type:a,className:i,clientThreadId:l}=t,c=oe(pee),u=oe(MUe),[d,f]=x.useState(0);let m,p;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const D=new Image;D.src=TW,D.onload=()=>f(EUe)},p=[],e[0]=m,e[1]=p):(m=e[0],p=e[1]),x.useEffect(m,p);let g,h;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const D=new Image;D.src=EW,D.onload=()=>f(TUe)},h=[],e[2]=g,e[3]=h):(g=e[2],h=e[3]),x.useEffect(g,h);const _=d>=2;let b,y;if(e[4]!==_||e[5]!==a?(b=()=>{_&&(B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Shown","chatgpt_web_aura_announcement_banner_shown"),$e.count(He.ATLAS,"chatgpt_aura_announcement_banner_shown"),a==="manual"&&_Ue())},y=[_,a],e[4]=_,e[5]=a,e[6]=b,e[7]=y):(b=e[6],y=e[7]),x.useEffect(b,y),!_)return null;let v,S,C;e[8]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,y:"100%"},S={opacity:1,y:0},C={opacity:0,y:"100%"},e[8]=v,e[9]=S,e[10]=C):(v=e[8],S=e[9],C=e[10]);const w=c?0:.75;let k;e[11]!==c?(k=c?void 0:[.33,0,.05,1],e[11]=c,e[12]=k):k=e[12];let E;e[13]!==w||e[14]!==k?(E={duration:w,ease:k},e[13]=w,e[14]=k,e[15]=E):E=e[15];const M=E;let N;e[16]!==i?(N=z("pointer-events-none start-1/2 bottom-0 z-[70] -translate-x-1/2",i),e[16]=i,e[17]=N):N=e[17];const A=u?HS:$S;let I;e[18]!==A?(I={minWidth:A},e[18]=A,e[19]=I):I=e[19];let P;e[20]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx(AUe,{className:"col-span-full row-span-full justify-self-center"}),e[20]=P):P=e[20];let R;e[21]!==o||e[22]!==n?(R=r.jsxs("div",{className:"grid w-full grid-cols-1 grid-rows-1 overflow-hidden",children:[P,r.jsx(NUe,{onDismiss:n,onClicked:o,className:"col-span-full row-span-full self-end justify-self-center"})]}),e[21]=o,e[22]=n,e[23]=R):R=e[23];let O;e[24]!==l||e[25]!==s?(O=s&&r.jsx("div",{className:z("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center text-center text-xs whitespace-nowrap [view-transition-name:var(--vt-disclaimer)] md:px-[60px]"),children:r.jsx(g5e,{clientThreadId:l})}),e[24]=l,e[25]=s,e[26]=O):O=e[26];let L;return e[27]!==M||e[28]!==N||e[29]!==I||e[30]!==R||e[31]!==O?(L=r.jsx(Ms,{children:r.jsxs(gt.div,{initial:v,animate:S,exit:C,transition:M,className:N,style:I,children:[R,O]})}),e[27]=M,e[28]=N,e[29]=I,e[30]=R,e[31]=O,e[32]=L):L=e[32],L}function TUe(t){return t+1}function EUe(t){return t+1}function MUe(){return Np()}const NUe=t=>{"use forget";const e=F.c(40),{onDismiss:s,onClicked:n,className:o}=t,a=G(),i=sa(),l=ne(),c=oe(RUe),u=_o(a,"1545803083");let d;e:switch(u.get("Variant",1)){case 1:default:{let L;e[0]===Symbol.for("react.memo_cache_sentinel")?(L=[Rr.atlasBannerTitleVariantOne,Rr.atlasBannerBodyVariantOne,Rr.atlasBannerCtaVariantOne],e[0]=L):L=e[0],d=L;break e}case 2:{let L;e[1]===Symbol.for("react.memo_cache_sentinel")?(L=[Rr.atlasBannerTitleVariantTwo,Rr.atlasBannerBodyVariantTwo,Rr.atlasBannerCtaVariantOne],e[1]=L):L=e[1],d=L;break e}case 3:{let L;e[2]===Symbol.for("react.memo_cache_sentinel")?(L=[Rr.atlasBannerTitleVariantThree,Rr.atlasBannerBodyVariantThree,Rr.atlasBannerCtaVariantTwo],e[2]=L):L=e[2],d=L}}const[f,m,p]=d;let g;e[3]!==o?(g=z("border-token-border-heavy grid grid-cols-1 grid-rows-[auto_1fr_24px]","bg-token-bg-primary/60","rounded-ss-xl rounded-se-xl border","[mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)]","[mask-size:100%_100%] [mask-repeat:no-repeat]","pointer-events-auto relative z-10",o),e[3]=o,e[4]=g):g=e[4];const h=c?HS:$S;let _;e[5]!==h?(_={boxShadow:"0px 4.1px 24px rgba(0, 0, 0, 0.08)",width:h},e[5]=h,e[6]=_):_=e[6];const b=i?"white":"var(--border-heavy)",y=c?HS-2:$S-2;let v;e[7]!==b||e[8]!==y?(v=r.jsx(SUe,{"aria-hidden":"true",className:"pointer-events-none col-span-full col-start-1 row-span-1 row-start-1 w-full text-[var(--bg-primary)]",style:{"--tab-color":b,width:y}}),e[7]=b,e[8]=y,e[9]=v):v=e[9];let S;e[10]!==o?(S=z("text-token-text-tertiary hover:text-token-text-secondary flex h-9 w-9 cursor-pointer items-center justify-center bg-transparent",o),e[10]=o,e[11]=S):S=e[11];let C;e[12]!==l?(C=l.formatMessage($t.close),e[12]=l,e[13]=C):C=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=r.jsx(Rn,{className:"icon-sm"}),e[14]=w):w=e[14];let k;e[15]!==s||e[16]!==S||e[17]!==C?(k=r.jsx("div",{className:"absolute end-0 top-0",children:r.jsx("button",{"data-testid":"close-button",onClick:s,className:S,"aria-label":C,children:w})}),e[15]=s,e[16]=S,e[17]=C,e[18]=k):k=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"bg-token-bg-primary col-span-full col-start-1 row-span-2 row-start-2 -mt-1"}),e[19]=E):E=e[19];let M;e[20]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(IUe,{}),e[20]=M):M=e[20];let N;e[21]!==f?(N=r.jsx("h2",{className:"text-token-text-primary text-sm font-medium",children:r.jsx(j,T({},f))}),e[21]=f,e[22]=N):N=e[22];let A;e[23]!==m?(A=r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,T({},m))}),e[23]=m,e[24]=A):A=e[24];let I;e[25]!==N||e[26]!==A?(I=r.jsxs("div",{className:"flex max-w-[340px] flex-col gap-0.5",children:[N,A]}),e[25]=N,e[26]=A,e[27]=I):I=e[27];let P;e[28]!==p.defaultMessage||e[29]!==n?(P=r.jsx(jUe,{ctaLabel:p.defaultMessage,onClicked:n}),e[28]=p.defaultMessage,e[29]=n,e[30]=P):P=e[30];let R;e[31]!==I||e[32]!==P?(R=r.jsxs("div",{className:"col-span-full col-start-1 row-start-2 -mt-2 flex min-h-[74px] flex-1 items-start gap-4 px-5",children:[M,I,P]}),e[31]=I,e[32]=P,e[33]=R):R=e[33];let O;return e[34]!==k||e[35]!==R||e[36]!==g||e[37]!==_||e[38]!==v?(O=r.jsxs("div",{className:g,style:_,children:[v,k,E,R]}),e[34]=k,e[35]=R,e[36]=g,e[37]=_,e[38]=v,e[39]=O):O=e[39],O};function AUe(t){"use forget";const e=F.c(4),{className:s}=t;let n;e[0]!==s?(n=z("pointer-events-none z-0 aspect-[752/244] h-[244px] opacity-50",s),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n?(o=r.jsx("img",{alt:"","aria-hidden":"true",src:EW,className:n}),e[2]=n,e[3]=o):o=e[3],o}function IUe(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("img",{alt:"","aria-hidden":"true",src:TW,className:"pointer-events-none size-10"}),t[0]=e):e=t[0],e}function jUe(t){"use forget";const e=F.c(5),{ctaLabel:s,onClicked:n}=t,o=jt(),a=hUe(o)?"installer":"app",i=a==="installer"?wUe:CUe;let l;e[0]!==n?(l=()=>{n==null||n(),kUe(a)},e[0]=n,e[1]=l):l=e[1];const c=l;let u;return e[2]!==s||e[3]!==c?(u=r.jsx("a",{href:i,onClick:c,className:"btn btn-secondary mt-2 min-h-9 rounded-full px-3 text-sm",children:s}),e[2]=s,e[3]=c,e[4]=u):u=e[4],u}const Rr=Ne({atlasBannerTitleVariantOne:{id:"Zr7mYe",defaultMessage:"Try Atlas - ChatGPTs new browser"},atlasBannerBodyVariantOne:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantTwo:{id:"TMWFFD",defaultMessage:"Try Atlas - a browser powered by ChatGPT"},atlasBannerBodyVariantTwo:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantThree:{id:"D5LkgH",defaultMessage:"ChatGPT Atlas - a smarter web browser"},atlasBannerBodyVariantThree:{id:"iwqNw3",defaultMessage:"Take ChatGPT with you across the web for instant answers, smarter suggestions, and your own personal agent."},atlasBannerCtaVariantOne:{id:"IupvSa",defaultMessage:"Download"},atlasBannerCtaVariantTwo:{id:"58Al3e",defaultMessage:"Try now"}});function PUe(){kW()}function RUe(){return Np()}const OUe=ue(vr,"247087",24,24),LUe=ue(vr,"a8e19f",24,24),DUe=ue(vr,"2e1a7c",24,24),FUe=ue(vr,"2e99e2",24,24),BUe=ue(vr,"202a6d",24,24),UUe={"/apps/spotify/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/atlas/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/atlas/get-started/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/ai-for-data-science-analytics/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/ai-for-engineering/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/ai-for-finance/":{"ja-JP":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/ai-for-product-management/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/ai-for-sales-marketing/":{"ja-JP":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/ai-for-sales-marketing-v3/":{"ja-JP":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/business-plan/":{"bn-BD":!1,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!1,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/education/":{"bn-BD":!1,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!1,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/business/enterprise/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/college-students/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/contact-sales/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/download/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/agent/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/apps/":{"am-ET":!0,ar:!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fa-IR":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"ur-IN":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/chatgpt-in-whatsapp/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/chat-with-pdfs/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/codex/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/deep-research/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/desktop/":{"bn-BD":!1,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!1,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/group-chats/":{"bn-BD":!1,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!1,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/image-generation/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/images/":{"am-ET":!0,ar:!0,"bg-BG":!0,"bn-BD":!0,"bs-BA":!0,"cs-CZ":!0,"da-DK":!0,"de-DE":!0,"el-GR":!0,"es-419":!0,"es-ES":!0,"et-EE":!0,"fa-IR":!0,"fi-FI":!0,"fil-PH":!0,"fr-CA":!0,"fr-FR":!0,"hi-IN":!0,"hr-HR":!0,"hu-HU":!0,"hy-AM":!0,"id-ID":!0,"is-IS":!0,"it-IT":!0,"ja-JP":!0,"kn-IN":!0,"ko-KR":!0,"lt-LT":!0,"lv-LV":!0,"mk-MK":!0,"ml-IN":!0,"mr-IN":!0,"ms-BN":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"pt-PT":!0,"ro-RO":!0,"ru-RU":!0,"sk-SK":!0,"sl-SI":!0,"sq-AL":!0,"sv-SE":!0,"sw-KE":!0,"ta-IN":!0,"te-IN":!0,"th-TH":!0,"tr-TR":!0,"uk-UA":!0,"ur-IN":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant":!0,"zh-Hant-HK":!0},"/features/shopping-research/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/study-mode/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/voice/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/features/voice-with-video/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/first-party-gpts/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/learn/cover-letter/":{"bn-BD":!1,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!1,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/merchants/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/overview/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/parent-resources/":{"bn-BD":!1,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/plans/free/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/plans/go/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/plans/k12-teachers/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/plans/plus/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/plans/pro/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/pricing/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-hindi/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-urdu/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-tamil/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-tagalog/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-marathi/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-french/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/english-to-portuguese/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/tagalog-to-english/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/spanish-to-english/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/translate/hindi-to-english/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/chat-with-presentations/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/chat-with-spreadsheets/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/high-school-teachers/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/inspiration-image-creation/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/recipes-cooking/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/scientists/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/student-writing-guide/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/students-india/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0},"/use-cases/veterans/":{"bn-BD":!0,"es-ES":!0,"es-419":!0,"de-DE":!0,"da-DK":!0,"fi-FI":!0,"fr-FR":!0,"hi-IN":!0,"id-ID":!0,"it-IT":!0,"ja-JP":!0,"ko-KR":!0,"nb-NO":!0,"nl-NL":!0,"pl-PL":!0,"pt-BR":!0,"sv-SE":!0,"te-IN":!0,"tr-TR":!0,"vi-VN":!0,"zh-Hans-CN":!0,"zh-Hant-HK":!0,"zh-Hant":!0}},l3=["en-US","bn-BD","da-DK","de-DE","es-ES","es-419","fi-FI","fr-FR","hi-IN","id-ID","it-IT","ja-JP","ko-KR","nb-NO","nl-NL","pl-PL","pt-BR","sv-SE","te-IN","tr-TR","vi-VN","zh-Hans-CN","zh-Hant","zh-Hant-HK"],rl="en-US";function $Ue(t){return l3.includes(t)}function nft(t,e=!1){const s=window.location.origin,n=G9(t),o=UUe[n];return e?[...gee.map(a=>({tagName:"link",rel:"alternate",hrefLang:a,href:a===rl?"".concat(s).concat(n):"".concat(s,"/").concat(a).concat(n)})),{tagName:"link",rel:"alternate",hrefLang:"x-default",href:"".concat(s).concat(n)}]:[...l3.filter(a=>a===rl||(o==null?void 0:o[a])).map(a=>({tagName:"link",rel:"alternate",hrefLang:a,href:a===rl?"".concat(s).concat(n):"".concat(s,"/").concat(a).concat(n)})),{tagName:"link",rel:"alternate",hrefLang:"x-default",href:"".concat(s).concat(n)}]}const NW=(t,e)=>{if(!t||t.includes("use-cases/students")||t.includes("use-cases/university-educators")||t.includes("features/connectors")||t.includes("features/study-mode")||t.includes("team-sign-up")||e===rl)return t;if(t.startsWith("https://openai.com")||t.startsWith(window.location.origin)){const s=new URL(t),n=s.pathname.slice(1),o="/".concat(e,"/").concat(n);return s.pathname=o,s.toString()}else return t.startsWith("/")?"/".concat(e).concat(t):t};function HUe(t,e){const s=G9(t),n=s.split("/"),a=n.filter(Boolean)[0];let i="".concat(s);if(a&&$Ue(a))if(e===rl){const l=n.slice(2).join("/");i="/"+(l!=null?l:""),(i==="//"||i==="")&&(i="/")}else n[1]=e,i=n.join("/");else e!==rl&&(i="/".concat(e).concat(s));return i=i.replace(/\/{2,}/g,"/"),i.startsWith("/")||(i="/"+i),i}function GUe(){return"".concat(window.location.pathname).concat(window.location.search).concat(window.location.hash)}const yl={logPageView(t={}){B.logEventWithStatsig("Contentful: Page Viewed","chatgpt_web_contentful_page_viewed",{slug:t.slug}),t.slug},logClick(t={}){B.logEventWithStatsig("Contentful: Link Button Clicked","chatgpt_web_contentful_link_button_clicked",{analytics_identifier:t.analytics_identifier,destination_url:t.destination_url}),t.analytics_identifier},logNavigation(t={}){var s;const e=(s=t.from)!=null?s:GUe();B.logEventWithStatsig("Contentful: Navigation Clicked","chatgpt_web_contentful_navigation_clicked",{analytics_identifier:t.analytics_identifier,from:e,navigation_surface:t.navigation_surface,to:t.to}),t.analytics_identifier,t.navigation_surface,t.to},logLocaleChanged(t){B.logEventWithStatsig("Contentful: Locale Changed","chatgpt_web_contentful_locale_changed",{locale:t.locale}),t.locale}},VUe={effectiveLocale:rl,slug:"/",theme:0,setTheme:()=>{}},AW=x.createContext(VUe);function oft(t){"use forget";const e=F.c(7),{children:s,slug:n,effectiveLocale:o}=t,[a,i]=x.useState(0);let l;e[0]!==o||e[1]!==n||e[2]!==a?(l={effectiveLocale:o,slug:n,theme:a,setTheme:i},e[0]=o,e[1]=n,e[2]=a,e[3]=l):l=e[3];let c;return e[4]!==s||e[5]!==l?(c=r.jsx(AW.Provider,{value:l,children:s}),e[4]=s,e[5]=l,e[6]=c):c=e[6],c}function S0(){"use forget";const t=x.useContext(AW);if(t==null)throw new Error("useContentfulPageContext hook must be used within ContentfulPageProvider");return t}const zUe=t=>{"use forget";const e=F.c(36),{tryNowLink:s}=t,n=ne(),[o,a]=x.useState("idle"),{theme:i}=S0();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=["en","en-US"],e[0]=l):l=e[0];const c=l.includes(n.locale),u="ChatGPT",d=i===1?"https://cdn.openai.com/chatgpt/ctf-cdn/image-gen/logo_crayon.png":i===2?"https://cdn.openai.com/chatgpt/ctf-cdn/image-gen/logo_plushie.png":"https://cdn.openai.com/chatgpt/ctf-cdn/image-gen/logo_cookie.png",f=s!=null?s:"/",m=o==="hover"&&"-translate-y-full duration-300",p=o==="off"&&"-translate-y-[200%] transition-transform duration-300";let g;e[1]!==m||e[2]!==p?(g=z("font-oai! relative select-none",m,p),e[1]=m,e[2]=p,e[3]=g):g=e[3];let h;e[4]!==o?(h=()=>{o==="off"&&a("idle")},e[4]=o,e[5]=h):h=e[5];let _;e[6]!==s?(_=()=>{yl.logClick({analytics_identifier:"footer-try-now-clicked",destination_url:s!=null?s:"/"})},e[6]=s,e[7]=_):_=e[7];let b,y;e[8]!==c?(b=()=>c&&a("hover"),y=()=>c&&a("off"),e[8]=c,e[9]=b,e[10]=y):(b=e[9],y=e[10]);let v;e[11]!==n?(v=n.formatMessage({id:"pdtQnk",defaultMessage:"Try ChatGPT now"}),e[11]=n,e[12]=v):v=e[12];const S=i===0&&u;let C;e[13]!==d||e[14]!==i?(C=i!==0&&r.jsx("img",{src:d,alt:u,className:"w-full"}),e[13]=d,e[14]=i,e[15]=C):C=e[15];let w;e[16]!==S||e[17]!==C?(w=r.jsxs("div",{className:"text-[min(calc((100vw-16px)*0.231),343px)] leading-none font-bold tracking-[-0.02em]",children:[S,C]}),e[16]=S,e[17]=C,e[18]=w):w=e[18];let k;e[19]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsxs("div",{className:"absolute start-0 top-full text-[min(calc((100vw-32px)*0.215),318px)] leading-none font-bold tracking-[-0.015em]",children:["Try now"," ",r.jsx("span",{className:"relative top-[0.08em]",children:""})]}),e[19]=k):k=e[19];const E=i===0&&u;let M;e[20]!==d||e[21]!==i?(M=i!==0&&r.jsx("img",{src:d,alt:u,className:"w-full"}),e[20]=d,e[21]=i,e[22]=M):M=e[22];let N;e[23]!==E||e[24]!==M?(N=r.jsxs("div",{className:"absolute start-0 top-[200%] text-[min(calc((100vw-16px)*0.231),343px)] leading-none font-bold tracking-[-0.02em]",children:[E,M]}),e[23]=E,e[24]=M,e[25]=N):N=e[25];let A;return e[26]!==v||e[27]!==w||e[28]!==N||e[29]!==f||e[30]!==g||e[31]!==h||e[32]!==_||e[33]!==b||e[34]!==y?(A=r.jsx("div",{className:"mt-12 flex flex-col overflow-hidden",children:r.jsxs(pr,{href:f,className:g,onTransitionEnd:h,onClick:_,onMouseEnter:b,onMouseLeave:y,underline:!1,"aria-label":v,children:[w,k,N]})}),e[26]=v,e[27]=w,e[28]=N,e[29]=f,e[30]=g,e[31]=h,e[32]=_,e[33]=b,e[34]=y,e[35]=A):A=e[35],A},WUe=t=>{"use forget";var H;const e=F.c(37),{disableDarkMode:s,className:n}=t,o=s===void 0?!1:s,a=ne(),{effectiveLocale:i}=S0(),[l,c]=x.useState(!1);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=l3.map(qUe),e[0]=u):u=e[0];const d=u;let f;e[1]!==i?(f=d.find(V=>V.contentfulLocale===i),e[1]=i,e[2]=f):f=e[2];const m=f;let p;e[3]!==a?(p=a.formatMessage({id:"LanguageSwitcher.ariaLabel",defaultMessage:"Select language"}),e[3]=a,e[4]=p):p=e[4];const g=p,h=x.useRef(null);let _,b;e[5]!==l?(_=()=>{if(!l)return;const V=q=>{var W;(W=h.current)!=null&&W.contains(q.target)||c(!1)};return document.addEventListener("pointerdown",V),()=>{document.removeEventListener("pointerdown",V)}},b=[l],e[5]=l,e[6]=_,e[7]=b):(_=e[6],b=e[7]),x.useEffect(_,b);let y;e[8]!==n?(y=z("relative",n),e[8]=n,e[9]=y):y=e[9];const v=!o,S=!l,C=l&&o,w=l&&!o;let k;e[10]!==o||e[11]!==l||e[12]!==C||e[13]!==w||e[14]!==v||e[15]!==S?(k=z("text-mkt-p2 inline-flex items-center gap-2 rounded-lg px-2.5 py-1.5 transition-colors",{"hover:bg-token-bg-primary/80":o,"hover:bg-token-bg-secondary/50":v,"text-token-text-secondary":S,"text-token-text-primary backdrop-blur-xl":l,"bg-token-bg-primary/80":C,"bg-token-bg-secondary/50":w}),e[10]=o,e[11]=l,e[12]=C,e[13]=w,e[14]=v,e[15]=S,e[16]=k):k=e[16];let E,M;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{yl.logClick({analytics_identifier:"language-switcher-trigger"}),c(KUe)},M=r.jsx(kr,{}),e[17]=E,e[18]=M):(E=e[17],M=e[18]);const N=(H=m==null?void 0:m.label)!=null?H:i;let A;e[19]!==g||e[20]!==l||e[21]!==k||e[22]!==N?(A=r.jsxs("button",{id:"lang-button",className:k,"aria-haspopup":"menu","aria-expanded":l,"aria-controls":"language-switcher-menu","aria-label":g,onClick:E,children:[M,N]}),e[19]=g,e[20]=l,e[21]=k,e[22]=N,e[23]=A):A=e[23];const I=l?"block":"hidden";let P;e[24]!==I?(P=z("bg-token-bg-secondary/50 absolute start-1/2 bottom-full z-50 mb-2 -translate-x-1/2 rounded-lg p-4 shadow-lg backdrop-blur-xl md:start-auto md:end-0 md:translate-x-0",I),e[24]=I,e[25]=P):P=e[25];let R;e[26]!==i?(R=d.map(V=>{const q=V.contentfulLocale===i;return r.jsx("li",{children:r.jsxs("button",{className:z("text-mkt-p2 flex w-full items-center justify-between px-2.5 py-2 text-start","hover:bg-token-interactive-bg-primary-hover/10 rounded-md",q&&"opacity-70"),onClick:()=>{yl.logLocaleChanged({locale:V.productLocale}),En.setCookie(Mn.PreferredLocale,V.productLocale);const W=new URL(window.location.href),$=HUe(W.pathname,V.contentfulLocale);W.pathname=$,window.location.assign(W.toString())},children:[r.jsx("span",{children:V.label}),q&&r.jsx("span",{className:"text-mkt-p2 ms-3 opacity-60",children:r.jsx(j,{id:"LanguageSwitcher.current",defaultMessage:"Current"})})]})},V.contentfulLocale)}),e[26]=i,e[27]=R):R=e[27];let O;e[28]!==R?(O=r.jsx("ul",{className:"flex max-h-86 min-w-[14rem] flex-col overflow-auto",children:R}),e[28]=R,e[29]=O):O=e[29];let L;e[30]!==P||e[31]!==O?(L=r.jsx("div",{id:"language-switcher-menu","aria-labelledby":"lang-button",className:P,children:O}),e[30]=P,e[31]=O,e[32]=L):L=e[32];let D;return e[33]!==A||e[34]!==L||e[35]!==y?(D=r.jsxs("div",{ref:h,className:y,children:[A,L]}),e[33]=A,e[34]=L,e[35]=y,e[36]=D):D=e[36],D};function qUe(t){var n;const e=(n=hee(t))!=null?n:KR,s=_ee[e];return{contentfulLocale:t,productLocale:e,label:s}}function KUe(t){return!t}const YUe=Pe(()=>me(()=>import("./bedanvzowato9b5m.js"),__vite__mapDeps([294,1,3,4])).then(t=>t.ManageCookiesModal)),QUe=[{href:"https://x.com/ChatGPTapp",label:"X",icon:r.jsx(FUe,{className:"h-5 w-5"})},{href:"https://www.youtube.com/OpenAI",label:"YouTube",icon:r.jsx(BUe,{className:"h-5 w-5"})},{href:"https://www.linkedin.com/company/openai/",label:"LinkedIn",icon:r.jsx(LUe,{className:"h-5 w-5"})},{href:"https://github.com/openai",label:"GitHub",icon:r.jsx(ff,{className:"h-5 w-5"})},{href:"https://www.instagram.com/chatgpt/",label:"Instagram",icon:r.jsx(OUe,{className:"h-5 w-5"})},{href:"https://www.tiktok.com/@chatgpt",label:"TikTok",icon:r.jsx(DUe,{className:"h-5 w-5"})}],JUe=Ne({cookies:{id:"Footer.cookies",defaultMessage:"Manage cookies"}});function ZUe(t,e){var n,o,a,i;const s=e!==rl?"/".concat(e):"";if((n=t.url)!=null&&n.startsWith(window.location.origin)){const l=new URL(t.url);return"".concat(s).concat(l.pathname)}return(o=t.page)!=null&&o.slug?"https://openai.com".concat(s,"/").concat(t.page.slug):(a=t.url)!=null&&a.startsWith("/")?"https://openai.com".concat(s).concat(t.url):(i=t.url)!=null&&i.startsWith("https://openai.com")?"https://openai.com".concat(s).concat(t.url.substring(18)):t.url}const XUe=t=>{"use forget";var c;const e=F.c(10),{item:s}=t,{effectiveLocale:n}=S0();let o;e[0]!==s.label?(o=r.jsx("span",{className:"text-token-text-primary/44 text-mkt-p2 font-medium",role:"heading","aria-level":2,children:s.label}),e[0]=s.label,e[1]=o):o=e[1];let a;e[2]!==n||e[3]!==s.items?(a=(c=s.items)==null?void 0:c.map(u=>{const d=ZUe(u,n);return d?r.jsx("li",{children:r.jsx(pr,{href:d,underline:!1,openNewTab:u.external,className:"text-mkt-p2 font-medium hover:opacity-70",onClick:()=>{var f;yl.logClick({analytics_identifier:(f=u.analyticsIdentifier)!=null?f:"footer-navigation-clicked",destination_url:d})},children:u.label})},u.id):null}),e[2]=n,e[3]=s.items,e[4]=a):a=e[4];let i;e[5]!==a?(i=r.jsx("ul",{className:"mt-4 flex flex-col gap-3",children:a}),e[5]=a,e[6]=i):i=e[6];let l;return e[7]!==o||e[8]!==i?(l=r.jsxs("div",{children:[o,i]}),e[7]=o,e[8]=i,e[9]=l):l=e[9],l},aft=t=>{"use forget";var A,I,P,R;const e=F.c(43),{footer:s,header:n,disableHugeChatLogo:o}=t,a=o===void 0?!1:o,i=ne(),l=G(),c=(I=(A=n==null?void 0:n.cta)==null?void 0:A.url)!=null?I:"/";let u,d,f,m,p,g;if(e[0]!==s.items){const L=((R=(P=s.items)==null?void 0:P.filter(e$e))!=null?R:[]).slice(0,4);let D;e[7]===Symbol.for("react.memo_cache_sentinel")?(D=["lg:col-start-2","lg:col-start-3","lg:col-start-4","lg:col-start-5"],e[7]=D):D=e[7];const H=D,V=Math.max(0,H.length-L.length);let q;e[8]!==V?(q=H.slice(V),e[8]=V,e[9]=q):q=e[9];const W=q;g="bg-token-bg-primary",p="max-w-9xl border-token-border-primary mx-auto mb-8 border-t",m="px-4 py-8 md:py-10",u="grid grid-cols-2 gap-6 lg:grid-cols-5",e[10]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"col-span-full mb-8 flex items-start justify-start md:col-span-1 md:mb-0",children:r.jsx(pr,{href:"/",className:"group block",onClick:t$e,children:r.jsx(xee,{className:"h-10 w-10 group-hover:rotate-[60deg] group-hover:opacity-70 group-hover:transition-transform group-hover:duration-300"})})}),e[10]=d):d=e[10];let $;e[11]!==W?($=(Z,K)=>{var Y;return r.jsx("div",{className:"col-span-1 ".concat((Y=W[K])!=null?Y:"lg:col-start-2"),children:r.jsx(XUe,{item:Z})},Z.id)},e[11]=W,e[12]=$):$=e[12],f=L.map($),e[0]=s.items,e[1]=u,e[2]=d,e[3]=f,e[4]=m,e[5]=p,e[6]=g}else u=e[1],d=e[2],f=e[3],m=e[4],p=e[5],g=e[6];let h;e[13]!==u||e[14]!==d||e[15]!==f?(h=r.jsxs("div",{className:u,children:[d,f]}),e[13]=u,e[14]=d,e[15]=f,e[16]=h):h=e[16];let _;e[17]!==a||e[18]!==c?(_=!a&&r.jsx(zUe,{tryNowLink:c}),e[17]=a,e[18]=c,e[19]=_):_=e[19];let b;e[20]!==m||e[21]!==h||e[22]!==_?(b=r.jsxs("div",{className:m,children:[h,_]}),e[20]=m,e[21]=h,e[22]=_,e[23]=b):b=e[23];let y;e[24]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsxs("span",{children:["OpenAI  2015",new Date().getFullYear()]}),e[24]=y):y=e[24];let v;e[25]!==l?(v=()=>mt(l,YUe),e[25]=l,e[26]=v):v=e[26];let S;e[27]!==i?(S=i.formatMessage(JUe.cookies),e[27]=i,e[28]=S):S=e[28];let C;e[29]!==v||e[30]!==S?(C=r.jsxs("div",{children:[y,r.jsx(pr,{className:"text-mkt-p2 ms-1 font-medium underline decoration-gray-300 underline-offset-2",onClick:v,children:S})]}),e[29]=v,e[30]=S,e[31]=C):C=e[31];let w;e[32]===Symbol.for("react.memo_cache_sentinel")?(w=r.jsx("div",{className:"flex items-center gap-7",children:QUe.map(s$e)}),e[32]=w):w=e[32];let k;e[33]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsxs("div",{className:"mt-4 flex flex-col md:mt-0 md:flex-row md:justify-end",children:[w,r.jsx("div",{className:"mt-4 md:ms-4 md:mt-0",children:r.jsx(WUe,{})})]}),e[33]=k):k=e[33];let E;e[34]!==C?(E=r.jsx("div",{className:"border-token-border-primary border-t",children:r.jsxs("div",{className:"text-mkt-p2 flex flex-col px-4 py-5 md:flex-row md:items-center md:justify-between md:py-4",children:[C,k]})}),e[34]=C,e[35]=E):E=e[35];let M;e[36]!==b||e[37]!==E||e[38]!==p?(M=r.jsxs("div",{className:p,children:[b,E]}),e[36]=b,e[37]=E,e[38]=p,e[39]=M):M=e[39];let N;return e[40]!==M||e[41]!==g?(N=r.jsx("footer",{className:g,children:M}),e[40]=M,e[41]=g,e[42]=N):N=e[42],N};function e$e(t){return!!t}function t$e(){yl.logClick({analytics_identifier:"footer-blossom-clicked",destination_url:"/"})}function s$e(t){return r.jsx(qn,{href:t.href,"aria-label":t.label,children:t.icon},t.label)}function rft({clientThreadId:t}){const e=Gt(),s=Bs(t),n=Qe(t,Se.getGizmoId),o=async()=>{s&&(await de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s}},requestBody:{is_archived:!1}}),e.invalidateQueries(Up({clientThreadId:t})),nt(s,a=>{a.isArchived=!1}),Ea(e,n))};return r.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:r.jsx(j,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),r.jsx("div",{children:r.jsx(ke,{disabled:!s,onClick:o,icon:Pke,children:r.jsx(j,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const ift=Gc(()=>({marginBottom$:Le(null),height$:Le(null)})),n$e={componentAutoAnimatingCarousel:x.lazy(()=>me(()=>import("./jvbyfg5l2vswda1p.js"),__vite__mapDeps([295,1,3,4,296]))),componentConversation:x.lazy(()=>me(()=>import("./j2jsiaaopkm7zc3g.js"),__vite__mapDeps([297,1,298,3,4,287,299,300]))),componentMultipleAutoAnimatingCarousels:x.lazy(()=>me(()=>import("./i4b1eltdmw1o5g9r.js"),__vite__mapDeps([301,1,295,3,4,296]))),componentSectionHeader:x.lazy(()=>me(()=>import("./je4pof9bv0m34g7e.js"),__vite__mapDeps([302,1,3,4,303,304,305,306,307]))),componentMediaGrid:x.lazy(()=>me(()=>import("./daytrgtfcpim7uvd.js"),__vite__mapDeps([308,1,298,3,4,287]))),componentMediaItem:x.lazy(()=>me(()=>import("./e9enqs750h1b62v1.js"),__vite__mapDeps([298,1,3,4,287]))),componentTwoUpTextMedia:x.lazy(()=>me(()=>import("./ljdohdh31ragpxfx.js"),__vite__mapDeps([309,1,3,4,299,300,306,298,287,302,303,304,305,307]))),componentPricingPlan:x.lazy(()=>me(()=>import("./mycxacfsvwrlubxo.js"),__vite__mapDeps([310,1,3,4,299,300,303,304,305,306,307,302]))),componentGroup:x.lazy(()=>me(()=>import("./ftuikkddjsgurupr.js"),__vite__mapDeps([311,1,3,4]))),componentContentHeading:x.lazy(()=>me(()=>import("./ei4t1lsj7m7pqaok.js"),__vite__mapDeps([312,1,313,3,4]))),componentText:x.lazy(()=>me(()=>import("./cktyynovp70rynd3.js"),__vite__mapDeps([314,1,299,3,4,300,313]))),componentHero:x.lazy(()=>me(()=>import("./h279c0bz5piacjvd.js"),__vite__mapDeps([315,1,3,4,298,287,302,303,304,305,306,307]))),componentMedia:x.lazy(()=>me(()=>import("./drsnsnrqd2p7vost.js"),__vite__mapDeps([316,1,298,3,4,287]))),componentAccordion:x.lazy(()=>me(()=>import("./ezskgg8lvon5962m.js"),__vite__mapDeps([317,1,3,4,298,287,299,300]))),componentPrefooter:x.lazy(()=>me(()=>import("./kpmvfos0alw47r7o.js"),__vite__mapDeps([318,1,307,3,4,304,305,306,303]))),componentTabs:x.lazy(()=>me(()=>import("./hiuxskq4ab6g9g54.js"),__vite__mapDeps([319,1,300,3,4]))),componentLinks:x.lazy(()=>me(()=>import("./lcoqhbg3b2xkj1h1.js"),__vite__mapDeps([320,1,3,4,307,304,305,306]))),componentInternalLinks:x.lazy(()=>me(()=>import("./gjcywb7kh0c92ojn.js"),__vite__mapDeps([321,1]))),componentCardCarousel:x.lazy(()=>me(()=>import("./7n59nfdxk4fqm193.js"),__vite__mapDeps([322,1,3,4,298,287,299,300]))),componentCardWithModalGrid:x.lazy(()=>me(()=>import("./bbrwlv36uza6ac6m.js"),__vite__mapDeps([323,1,298,3,4,287]))),componentFeatureList:x.lazy(()=>me(()=>import("./o1go7egndvclirym.js"),__vite__mapDeps([324,1,325,326,3,4,327,328,329,330,331,72,332,333,334,335,17,336,337,338,146,339,94,147,340,341,272,237,342,343,197,344,253,51,345,216,148,346,179,149,347,217,348,150,349,151,152,350,351,41,8,86,9,15,352,353,153,354,355,154,356,357,155,293,156,105,358,359,247,248,360,260,157,361,362,158,363,159,160,364,161,365,366,367,162,368,369,370,31,20,371,372,373,163,374,375,376,377,378,21,22,23,24,25,26]))),componentLogoFeature:x.lazy(()=>me(()=>import("./db4wqqv1ngf0nc4k.js"),__vite__mapDeps([379,1,3,4,287,380]))),componentLogoFeatureCardGrid:x.lazy(()=>me(()=>import("./k0rf2l3x2nyibgei.js"),__vite__mapDeps([381,1,3,4]))),componentPullQuote:x.lazy(()=>me(()=>import("./78mbq5lnj7jdstgp.js"),__vite__mapDeps([382,1,299,3,4,300]))),featureCarousel:x.lazy(()=>me(()=>import("./hcnbq3awt2aw4lv0.js"),__vite__mapDeps([383,1,3,4,298,287,333,334]))),componentList:x.lazy(()=>me(()=>import("./cujccmvnwkfsplwg.js"),__vite__mapDeps([384,1,302,3,4,303,304,305,306,307]))),componentExperimentCondition:x.lazy(()=>me(()=>import("./e5an8viec9j8j3xk.js"),__vite__mapDeps([385,1,3,4]))),componentCondition:x.lazy(()=>me(()=>import("./jg7ess7vq49kid4v.js"),__vite__mapDeps([386,1,3,4]))),componentPricingTable:x.lazy(()=>me(()=>import("./elqss4q6rfsugi45.js"),__vite__mapDeps([387,1,302,3,4,303,304,305,306,307,300]))),componentStatistics:x.lazy(()=>me(()=>import("./hlkyi1r61jnqir35.js"),__vite__mapDeps([388,1,299,3,4,300]))),componentChatGPTPricingCardRow:x.lazy(()=>me(()=>import("./e2xddkt6719ftni9.js"),__vite__mapDeps([389,1,3,4,299,300,303,304,305,306,307,347,355,390,310,302]))),componentFeatureSection:x.lazy(()=>me(()=>import("./oajumef5sxivtsws.js"),__vite__mapDeps([391,1,380,392,299,3,4,300,304,305,306,393,21,22,23,24,25,26]))),componentGenericAnimatingCarousel:x.lazy(()=>me(()=>import("./jxvniuj747nhdelu.js"),__vite__mapDeps([394,1,296,3,4]))),componentFeatureFlagOrExperimentCondition:x.lazy(()=>me(()=>import("./jg7ess7vq49kid4v.js"),__vite__mapDeps([386,1,3,4]))),componentImageGenExample:x.lazy(()=>me(()=>import("./bqf9bep9y90rou2l.js"),__vite__mapDeps([395,1,299,3,4,300,298,287]))),componentItemGrid:x.lazy(()=>me(()=>import("./ktg1askpfkhatzxx.js"),__vite__mapDeps([396,1,397,3,4]))),componentValueProp:x.lazy(()=>me(()=>import("./j8gqb3mp6tl90wej.js"),__vite__mapDeps([398,1,325,326,3,4,327,328,329,330,331,72,332,333,334,335,17,336,337,338,146,339,94,147,340,341,272,237,342,343,197,344,253,51,345,216,148,346,179,149,347,217,348,150,349,151,152,350,351,41,8,86,9,15,352,353,153,354,355,154,356,357,155,293,156,105,358,359,247,248,360,260,157,361,362,158,363,159,160,364,161,365,366,367,162,368,369,370,31,20,371,372,373,163,374,375,376,377,313,392,378,21,22,23,24,25,26]))),componentGuideSection:x.lazy(()=>me(()=>import("./xhjlzyzko764o5h6.js"),__vite__mapDeps([399,1,3,4,393,297,298,287,299,300,319,313,378,304,305,306,21,22,23,24,25,26,303]))),mediaItem:x.lazy(()=>me(()=>import("./e9enqs750h1b62v1.js"),__vite__mapDeps([298,1,3,4,287]))),componentPromptCard:x.lazy(()=>me(()=>import("./ktjmjpe332xc49mf.js"),__vite__mapDeps([400,1,401,298,3,4,287,336]))),componentTestimonials:x.lazy(()=>me(()=>import("./g3yzuoprqu64tnnt.js"),__vite__mapDeps([402,1,333,3,4,334,17,361,304,305,306,298,287]))),componentFeatureHero:x.lazy(()=>me(()=>import("./csrck1dms8gwmy8t.js"),__vite__mapDeps([403,1,3,4,303,304,305,306,307,298,287]))),componentTutorialSteps:x.lazy(()=>me(()=>import("./cc9h4wkwy2uzsgw4.js"),__vite__mapDeps([404,1,313,298,3,4,287,392,378,21,22,23,24,25,26]))),componentSplashBanner:x.lazy(()=>me(()=>import("./id752fqq0krrv1ua.js"),__vite__mapDeps([405,1,3,4,304,305,306,303,307]))),useCasePrompt:x.lazy(()=>me(()=>import("./ha7dcp4svp0haryn.js"),__vite__mapDeps([406,1,401,298,3,4,287,336]))),componentVariant:x.lazy(()=>me(()=>import("./nh6ldt5g2n6qq4b1.js"),__vite__mapDeps([407,1,3,4])))},IW={FeatureCardGraphic:x.lazy(()=>me(()=>import("./dcbcxz0ax8be7w9z.js"),__vite__mapDeps([408,1,3,4,299,300]))),FormContactSales:x.lazy(()=>me(()=>import("./n88l1mn5huzloeoj.js"),__vite__mapDeps([409,1,305,3,4,380,410,306]))),FormMerchantInterest:x.lazy(()=>me(()=>import("./e0jldceyrhax1vey.js"),__vite__mapDeps([411,1,410,306,3,4,305]))),MerchantsFormSection:x.lazy(()=>me(()=>import("./hphbo1ofuspeudsz.js"),__vite__mapDeps([412,1,3,4,410,306,305]))),TrustFeatures:x.lazy(()=>me(()=>import("./iulkd34cs1g1otm2.js"),__vite__mapDeps([413,1,397,3,4,325,326,327,328,329,330,331,72,332,333,334,335,17,336,337,338,146,339,94,147,340,341,272,237,342,343,197,344,253,51,345,216,148,346,179,149,347,217,348,150,349,151,152,350,351,41,8,86,9,15,352,353,153,354,355,154,356,357,155,293,156,105,358,359,247,248,360,260,157,361,362,158,363,159,160,364,161,365,366,367,162,368,369,370,31,20,371,372,373,163,374,375,376,377,398,313,392,378,21,22,23,24,25,26]))),ValueProp:x.lazy(()=>me(()=>import("./b78p73h19cl1b8j2.js"),__vite__mapDeps([414,1,325,326,3,4,327,328,329,330,331,72,332,333,334,335,17,336,337,338,146,339,94,147,340,341,272,237,342,343,197,344,253,51,345,216,148,346,179,149,347,217,348,150,349,151,152,350,351,41,8,86,9,15,352,353,153,354,355,154,356,357,155,293,156,105,358,359,247,248,360,260,157,361,362,158,363,159,160,364,161,365,366,367,162,368,369,370,31,20,371,372,373,163,374,375,376,377,398,313,392,378,21,22,23,24,25,26]))),AtlasHero:x.lazy(()=>me(()=>import("./b97th5bsx7hon5av.js"),__vite__mapDeps([415,1,298,3,4,287,416,306,305,417]))),AtlasFooter:x.lazy(()=>me(()=>import("./ij9tdrl4wnslfw8v.js"),__vite__mapDeps([418,1,298,3,4,287,416,306,305,417]))),ConnectorsAvailable:x.lazy(()=>me(()=>import("./bskpu01nj98v4rn0.js"),__vite__mapDeps([419,1,325,326,3,4,327,328,329,330,331,72,332,333,334,335,17,336,337,338,146,339,94,147,340,341,272,237,342,343,197,344,253,51,345,216,148,346,179,149,347,217,348,150,349,151,152,350,351,41,8,86,9,15,352,353,153,354,355,154,356,357,155,293,156,105,358,359,247,248,360,260,157,361,362,158,363,159,160,364,161,365,366,367,162,368,369,370,31,20,371,372,373,163,374,375,376,377]))),ImageGenCollage:x.lazy(()=>me(()=>import("./j7yn4e44sbxfsz2u.js"),__vite__mapDeps([420,1,298,3,4,287]))),ImageGenThemeSetter:x.lazy(()=>me(()=>import("./h7pepcf81oh74vqo.js"),__vite__mapDeps([421,1,332,3,4])))},o$e=(t,e)=>{if(!e||e.length===0)return t;try{let s=JSON.stringify(t);return e.forEach(n=>{s=s.replaceAll("{".concat(n.key,"}"),n.value)}),JSON.parse(s)}catch(s){return Ls.error("Error interpolating localized strings for custom component",{error:s}),t}},a$e=(t,e)=>{const i=e,{localizedStrings:s,data:n}=i,o=De(i,["localizedStrings","data"]),a=o$e(n,s);return gn.createElement(IW[t],T({key:e.id,id:e.id,data:a},o))},jW=(t,e)=>{var s;if(t&&(t.__typename in e||t.reactComponent in IW))return t.__typename==="componentCustom"?a$e(t.reactComponent,t):gn.createElement(e[t.__typename],T({key:t.id,id:t.id},t),(s=t.components)==null?void 0:s.map(n=>jW(n,e)))};function lft(t){"use forget";const e=F.c(4),{sections:s}=t;if(s.length===0)return null;let n;e[0]!==s?(n=s.map(r$e),e[0]=s,e[1]=n):n=e[1];let o;return e[2]!==n?(o=r.jsx("section",{className:"bg-token-bg-primary font-oai overflow-hidden px-4 py-12 md:px-8",children:r.jsx("div",{className:"mx-auto flex w-full flex-col gap-8",children:n})}),e[2]=n,e[3]=o):o=e[3],o}function r$e(t){return jW(t,n$e)}const i$e=ue(Ce,"d66a94",20,20),PW={spreadsheets:YTe,presentations:i$e,actions:sE,deep_research:Eo,suggested:_T};function cft({clientThreadId:t}){const{isOdysseyMode:e}=mE(t),s=d$e(e),{keywords:n}=eG({clientThreadId:t});return!e||!s?null:r.jsx(l$e,{groups:s,mentionKeywords:n})}function l$e({groups:t,mentionKeywords:e}){const[s,n]=x.useState(null),o=pf(),[a,i]=x.useState(null),[l,c]=x.useState("suggested"),u=v=>{c(v),i(null)},d=x.useMemo(()=>{var S;const v=t.find(C=>C.category.name===l);return(S=v==null?void 0:v.prompts)!=null?S:[]},[t,l]);x.useEffect(()=>{d&&a!=null&&Co(Ht(o),d[a].prompt_string)},[o,d,a]),x.useEffect(()=>{e&&e.length>0&&c9(e,Ht(o))},[o,e]);const[f,m]=x.useState(()=>xt(()=>Cd(o)));x.useEffect(()=>kl(()=>{Cd(o)&&m(!0)}),[o]);const p=wn(()=>{const v=a==null?0:Math.min(a+1,d.length-1);return i(v),!0}),g=wn(()=>{const v=a===0||a==null?null:a-1;return i(v),!0}),h=d.length>0;x.useEffect(()=>{if(!(!f||!h))return C9(Ht(o),{ArrowDown:p,ArrowUp:g})},[f,h,o,p,g]),x.useEffect(()=>{const v=()=>{m(!1),i(null)};return rf(Ht(o).dom,{click:v,input:v})},[o]);const _=x.useRef(null),[b,y]=x.useState(void 0);return zn(()=>{_.current&&y(_.current.offsetWidth)},[l]),r.jsx(W2,{horizontalPadding:"standard",horizontalMargin:"none",verticalMargin:"none",verticalPadding:"none",overflowY:"auto",children:r.jsx(Aa,{className:"h-full overflow-y-hidden",children:r.jsx(gt.div,{className:"flex size-full flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.jsxs("div",{className:"mt-5 flex flex-col items-center overflow-y-auto",children:[r.jsx("div",{className:"py-2",ref:_,children:r.jsx("div",{className:"flex flex-row flex-nowrap gap-2 overflow-x-auto",children:t.map(v=>r.jsx(c$e,{category:v.category.name,displayName:v.category_display_name,selected:l===v.category.name,onSelect:()=>u(v.category.name)},v.category.name))})}),r.jsx("div",{className:"overflow-y-auto",children:r.jsx(gt.ul,{className:"mt-1 flex flex-col",style:b?{width:b}:{},children:d.map((v,S)=>r.jsx(u$e,{prompt:v,rowIdx:S,selected:a===S,onSelect:()=>{B.logEvent("Agent Suggested Prompt Selected",{prompt_title:v.title,prompt_category:v.categories[0].name}),i(S),no(Ht(o))},hoveredPromptIndex:s,setHoveredPromptIndex:n,totalRows:d.length},"".concat(l,"-").concat(S)))})})]})})})})}function c$e({category:t,displayName:e,selected:s,onSelect:n}){const o=PW[t],a=s?"text-token-text-primary":"text-token-text-secondary",i=s?"text-token-icon-primary":"text-token-icon-secondary";return r.jsx(ke,{color:"secondary",onClick:n,icon:()=>r.jsx(o,{className:i}),className:z("border-token-bg-tertiary",s&&"bg-token-bg-tertiary","font-normal",a),children:e})}function u$e({prompt:t,rowIdx:e,selected:s,onSelect:n,hoveredPromptIndex:o,setHoveredPromptIndex:a,totalRows:i}){const l=x.useRef(null);x.useEffect(()=>{var d;s&&((d=l.current)==null||d.scrollIntoView({behavior:"auto"}))},[s]);function c(){const d=f$e(t),f=d?PW[d]:kr;return r.jsx(f,{className:"text-token-icon-secondary size-5"})}const u=o===e||o===e+1;return r.jsxs(gt.li,{ref:l,initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:e*.03},exit:{opacity:0,translateY:4},onMouseEnter:()=>a(e),onMouseLeave:()=>a(null),children:[r.jsxs("button",{className:z("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),onClick:n,type:"button",children:[r.jsx("div",{className:"flex flex-col items-center justify-center p-1",children:c()}),r.jsx("div",{className:"text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",children:t.title}),t.example_url?r.jsx("div",{className:"flex flex-col items-center justify-center pe-1",onClick:d=>{d.stopPropagation(),B.logEvent("Agent Suggested Prompt Example Clicked",{prompt_title:t.title,prompt_category:t.categories[0].name}),t.example_url&&(window.location.href=t.example_url)},children:r.jsx(Zk,{className:"text-token-icon-tertiary size-6.5 shrink-0"})}):null]}),e<i-1&&!u&&r.jsx("div",{className:"bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"})]})}function d$e(t){var s;return(s=dt({queryKey:["odyssey_suggested_prompts_all"],queryFn:async()=>await de.safeGet("/n7jupd_suggested_prompts_all"),enabled:t}).data)==null?void 0:s.prompt_groups}function f$e(t){const e=t.categories;if(e.length!==0)return e[0].name}const m$e=t=>{"use forget";var y;const e=F.c(23);let s,n,o,a,i;e[0]!==t?(y=t,{open:i,containerClassName:n,onDismiss:o,onShow:a}=y,s=De(y,["open","containerClassName","onDismiss","onShow"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5]);const l=i===void 0?!0:i,c=ne(),[u,d]=x.useState(l);let f,m;if(e[6]!==u||e[7]!==a?(f=()=>{u&&(a==null||a())},m=[u,a],e[6]=u,e[7]=a,e[8]=f,e[9]=m):(f=e[8],m=e[9]),x.useEffect(f,m),!u)return null;let p;e[10]!==n?(p=z("pointer-events-none fixed start-1/2 bottom-8 z-50 w-full -translate-x-1/2 px-4",n),e[10]=n,e[11]=p):p=e[11];let g;e[12]!==c?(g=c.formatMessage({id:"b675aO",defaultMessage:"Banner"}),e[12]=c,e[13]=g):g=e[13];let h;e[14]!==o?(h=()=>{o==null||o(),d(!1)},e[14]=o,e[15]=h):h=e[15];let _;e[16]!==s||e[17]!==h?(_=r.jsx("div",{className:"pointer-events-auto mx-auto w-full max-w-[768px]",children:r.jsx(sp,U(T({},s),{onDismiss:h}))}),e[16]=s,e[17]=h,e[18]=_):_=e[18];let b;return e[19]!==p||e[20]!==g||e[21]!==_?(b=r.jsx("div",{className:p,"aria-live":"polite",role:"region","aria-label":g,children:_}),e[19]=p,e[20]=g,e[21]=_,e[22]=b):b=e[22],b},p$e=Pe(()=>me(()=>Promise.resolve().then(()=>PB),void 0).then(t=>t.AdminInviteModal)),Sv=Ne({title:{id:"4LuIsp",defaultMessage:"Invite your districts teachers for free"},description:{id:"KeZ0qh",defaultMessage:"ChatGPT for Teachers is free for verified educators and staff in your district. Send invites so fellow teachers can collaborateonly colleagues from your district can join."},cta:{id:"FBIXg9",defaultMessage:"Invite fellow teachers"}});function Nj(t){t&&ft.setItem(Be.K12InviteBannerDismissed,!0,{workspaceId:t})}function uft(){"use forget";const t=F.c(23),e=G(),s=ne(),n=fs();let o;t[0]!==n?(o=n==null?void 0:n.getWorkspaceId(),t[0]=n,t[1]=o):o=t[1];const a=o;if(!n||!a)return null;let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-primary flex size-12 items-center justify-center rounded-full",children:r.jsx(yg,{className:"icon-md text-[#5D5BD0]","aria-hidden":!0})}),t[2]=i):i=t[2];let l;t[3]!==s?(l=s.formatMessage(Sv.title),t[3]=s,t[4]=l):l=t[4];let c;t[5]!==s?(c=s.formatMessage(Sv.description),t[5]=s,t[6]=c):c=t[6];let u;t[7]!==s?(u=s.formatMessage(Sv.cta),t[7]=s,t[8]=u):u=t[8];let d;t[9]!==n||t[10]!==e||t[11]!==a?(d=()=>{B.logEventWithStatsig("K12 Invite Banner: CTA Clicked","chatgpt_k12_invite_banner_cta_clicked"),Nj(a),mt(e,p$e,{workspace:n})},t[9]=n,t[10]=e,t[11]=a,t[12]=d):d=t[12];let f;t[13]!==u||t[14]!==d?(f={primaryAction:{text:u,onClick:d}},t[13]=u,t[14]=d,t[15]=f):f=t[15];let m;t[16]!==a?(m=()=>{B.logEventWithStatsig("K12 Invite Banner: Dismissed","chatgpt_k12_invite_banner_dismissed"),Nj(a)},t[16]=a,t[17]=m):m=t[17];let p;return t[18]!==l||t[19]!==c||t[20]!==f||t[21]!==m?(p=r.jsx(m$e,{icon:i,title:l,description:c,actions:f,onShow:g$e,onDismiss:m}),t[18]=l,t[19]=c,t[20]=f,t[21]=m,t[22]=p):p=t[22],p}function g$e(){B.logEventWithStatsig("K12 Invite Banner: Shown","chatgpt_k12_invite_banner_shown")}function dft(t){"use forget";var p,g,h,_;const e=F.c(9),{skip:s}=t,n=s===void 0?!1:s,o=fs();let a,i,l,c,u;e[0]!==o?(u=o==null?void 0:o.getWorkspaceId(),i=o===void 0,a=(g=(p=o==null?void 0:o.canInviteMembers)==null?void 0:p.call(o))!=null?g:!1,l=(_=(h=o==null?void 0:o.isK12)==null?void 0:h.call(o))!=null?_:!1,c=u!=null&&ft.getItem(Be.K12InviteBannerDismissed,{workspaceId:u})===!0,e[0]=o,e[1]=a,e[2]=i,e[3]=l,e[4]=c,e[5]=u):(a=e[1],i=e[2],l=e[3],c=e[4],u=e[5]);const f=!n&&!i&&!!u&&l&&a&&!c;let m;return e[6]!==i||e[7]!==f?(m={shouldShow:f,isLoading:i},e[6]=i,e[7]=f,e[8]=m):m=e[8],m}class fft{constructor(e){X(this,"config");X(this,"localStorageKey");this.config=e,this.localStorageKey=e.localStorageKey}getState(){const e=ft.getItem(this.localStorageKey)||{lastShown:null,showCount:0,shownTimestamps:[]};return Array.isArray(e.shownTimestamps)||(e.shownTimestamps=[]),e}setState(e){ft.setItem(this.localStorageKey,e)}getShownTimes(){return this.getState().showCount}shouldShow(){const e=this.getState(),s=Date.now();if(this.config.termination.maxShows!==void 0&&e.showCount>=this.config.termination.maxShows||this.config.termination.customCondition&&this.config.termination.customCondition())return!1;const n=this.config.schedule.maxShowsPerInterval;if(n!==void 0){const o=s-this.config.schedule.intervalMs;if((e.shownTimestamps||[]).filter(i=>i>=o).length>=n)return!1}else if(e.lastShown!=null&&s-e.lastShown<this.config.schedule.intervalMs)return!1;return!0}recordShown(){const e=this.getState(),s=Date.now();let n=Array.isArray(e.shownTimestamps)?e.shownTimestamps:[];const o=s-this.config.schedule.intervalMs;n=n.filter(a=>a>=o),n.push(s),this.setState({lastShown:s,showCount:e.showCount+1,shownTimestamps:n})}reset(){ft.setItem(this.localStorageKey,{lastShown:null,showCount:0,shownTimestamps:[]})}}const mft=ue(Ce,"8f3ef6",20,20);function pft(){"use forget";const t=F.c(111),e=G(),s=ne(),n=O_();let o;t[0]!==e?(o=()=>dC(e,{includeAutoConnectors:!0}),t[0]=e,t[1]=o):o=t[1];const a=oe(o),i=!a;let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={includeAutoConnectors:!0},t[2]=l):l=t[2];const{connectedTypes:c,isLoading:u}=jC(l),{isLoading:d,internalKnowledgeConfigs:f}=sR();let m;t[3]!==f||t[4]!==n?(m=n&&(f==null?void 0:f.some(E$e)),t[3]=f,t[4]=n,t[5]=m):m=t[5];const p=!!m;let g;t[6]!==f||t[7]!==n?(g=n&&(f==null?void 0:f.some(T$e)),t[6]=f,t[7]=n,t[8]=g):g=t[8];const h=!!g,_=On(),b=k$e,y=C$e,v=v$e,S=b$e;let C;t[9]!==s?(C=s.formatMessage({id:"9jtvbx",defaultMessage:"Describe and suggest improvements to my email style"}),t[9]=s,t[10]=C):C=t[10];let w;t[11]!==s?(w=s.formatMessage({id:"PjZmLV",defaultMessage:"Describe and suggest improvements to my email style"}),t[11]=s,t[12]=w):w=t[12];let k;t[13]===Symbol.for("react.memo_cache_sentinel")?(k={connectors:{[je.GMAIL_CONNECTOR]:Gr,[je.OUTLOOK_EMAIL_CONNECTOR]:Dl}},t[13]=k):k=t[13];let E;t[14]!==C||t[15]!==w?(E={type:it.Starter,title:C,prompt:w,theme:As.Slurm,data:k,body:""},t[14]=C,t[15]=w,t[16]=E):E=t[16];let M;t[17]!==s?(M=s.formatMessage({id:"gmFv/2",defaultMessage:"Summarize my unread emails"}),t[17]=s,t[18]=M):M=t[18];let N;t[19]!==s?(N=s.formatMessage({id:"/lt8RC",defaultMessage:"Summarize my unread emails"}),t[19]=s,t[20]=N):N=t[20];let A;t[21]===Symbol.for("react.memo_cache_sentinel")?(A={connectors:{[je.GMAIL_CONNECTOR]:Gr,[je.OUTLOOK_EMAIL_CONNECTOR]:Dl}},t[21]=A):A=t[21];let I;t[22]!==M||t[23]!==N?(I={type:it.Starter,title:M,prompt:N,theme:As.Slurm,data:A,body:""},t[22]=M,t[23]=N,t[24]=I):I=t[24];let P;t[25]!==s?(P=s.formatMessage({id:"rMKyX2",defaultMessage:"Give me an overview of a project or customer"}),t[25]=s,t[26]=P):P=t[26];let R;t[27]!==s?(R=s.formatMessage({id:"5hS/7U",defaultMessage:"Give me an overview of a project or customer"}),t[27]=s,t[28]=R):R=t[28];let O;t[29]===Symbol.for("react.memo_cache_sentinel")?(O={connectors:{[je.GDRIVE_ACTION_CONNECTOR]:$n,[je.GMAIL_CONNECTOR]:Gr,[je.OUTLOOK_EMAIL_CONNECTOR]:Dl,[je.HUBSPOT_CONNECTOR]:sd,[je.DROPBOX_CONNECTOR]:uc,[je.NOTION_CONNECTOR]:cc,[je.SHAREPOINT_CONNECTOR]:Q0,[je.TEAMS_CONNECTOR]:Rh},syncConnectors:{[Yl.gdrive_sync_connector]:$n}},t[29]=O):O=t[29];let L;t[30]!==P||t[31]!==R?(L={type:it.Starter,title:P,prompt:R,theme:As.Slurm,data:O,body:""},t[30]=P,t[31]=R,t[32]=L):L=t[32];let D;t[33]!==s?(D=s.formatMessage({id:"c9CBw8",defaultMessage:"Find me the top three most relevant documents on a project"}),t[33]=s,t[34]=D):D=t[34];let H;t[35]!==s?(H=s.formatMessage({id:"NYPKci",defaultMessage:"Find me the top three most relevant documents on a project"}),t[35]=s,t[36]=H):H=t[36];let V;t[37]===Symbol.for("react.memo_cache_sentinel")?(V={connectors:{[je.GDRIVE_ACTION_CONNECTOR]:$n,[je.GMAIL_CONNECTOR]:Gr,[je.OUTLOOK_EMAIL_CONNECTOR]:Dl,[je.HUBSPOT_CONNECTOR]:sd,[je.DROPBOX_CONNECTOR]:uc,[je.NOTION_CONNECTOR]:cc,[je.SHAREPOINT_CONNECTOR]:Q0,[je.TEAMS_CONNECTOR]:Rh},syncConnectors:{[Yl.gdrive_sync_connector]:$n}},t[37]=V):V=t[37];let q;t[38]!==D||t[39]!==H?(q={type:it.Starter,title:D,prompt:H,theme:As.Slurm,data:V,body:""},t[38]=D,t[39]=H,t[40]=q):q=t[40];let W;t[41]!==s?(W=s.formatMessage({id:"bh3D+B",defaultMessage:"Review my most recent PR"}),t[41]=s,t[42]=W):W=t[42];let $;t[43]!==s?($=s.formatMessage({id:"MQvW9m",defaultMessage:"Review my most recent PR"}),t[43]=s,t[44]=$):$=t[44];let Z;t[45]===Symbol.for("react.memo_cache_sentinel")?(Z={connectors:{[je.GITHUB_CONNECTOR]:ff}},t[45]=Z):Z=t[45];let K;t[46]!==W||t[47]!==$?(K={type:it.Starter,title:W,prompt:$,theme:As.Slurm,data:Z,body:""},t[46]=W,t[47]=$,t[48]=K):K=t[48];let Y;t[49]!==s?(Y=s.formatMessage({id:"eb79eJ",defaultMessage:"What changed in the projects that Im working on"}),t[49]=s,t[50]=Y):Y=t[50];let ae;t[51]!==s?(ae=s.formatMessage({id:"Q+eKmx",defaultMessage:"What changed in the projects that Im working on"}),t[51]=s,t[52]=ae):ae=t[52];let se;t[53]===Symbol.for("react.memo_cache_sentinel")?(se={connectors:{[je.GDRIVE_ACTION_CONNECTOR]:$n,[je.GMAIL_CONNECTOR]:Gr,[je.OUTLOOK_EMAIL_CONNECTOR]:Dl,[je.HUBSPOT_CONNECTOR]:sd,[je.DROPBOX_CONNECTOR]:uc,[je.NOTION_CONNECTOR]:cc,[je.SHAREPOINT_CONNECTOR]:Q0,[je.TEAMS_CONNECTOR]:Rh},syncConnectors:{[Yl.gdrive_sync_connector]:$n}},t[53]=se):se=t[53];let ee;t[54]!==Y||t[55]!==ae?(ee={type:it.Starter,title:Y,prompt:ae,theme:As.Slurm,data:se,body:""},t[54]=Y,t[55]=ae,t[56]=ee):ee=t[56];let re;t[57]!==s?(re=s.formatMessage({id:"BZuK5N",defaultMessage:"Find all emails about a project or customer"}),t[57]=s,t[58]=re):re=t[58];let he;t[59]!==s?(he=s.formatMessage({id:"S/AOrO",defaultMessage:"Find all emails about a project or customer"}),t[59]=s,t[60]=he):he=t[60];let fe;t[61]===Symbol.for("react.memo_cache_sentinel")?(fe={connectors:{[je.GMAIL_CONNECTOR]:Gr,[je.OUTLOOK_EMAIL_CONNECTOR]:Dl}},t[61]=fe):fe=t[61];let pe;t[62]!==re||t[63]!==he?(pe={type:it.Starter,title:re,prompt:he,theme:As.Slurm,data:fe,body:""},t[62]=re,t[63]=he,t[64]=pe):pe=t[64];let le;t[65]!==s?(le=s.formatMessage({id:"DtUTpV",defaultMessage:"Brief me on this weeks meetings"}),t[65]=s,t[66]=le):le=t[66];let ve;t[67]!==s?(ve=s.formatMessage({id:"NoHU2S",defaultMessage:"Brief me on this weeks meetings"}),t[67]=s,t[68]=ve):ve=t[68];let Te;t[69]===Symbol.for("react.memo_cache_sentinel")?(Te={connectors:{[je.GOOGLE_CONTACTS_CONNECTOR]:U6,[je.OUTLOOK_CALENDAR_CONNECTOR]:Dl}},t[69]=Te):Te=t[69];let xe;t[70]!==le||t[71]!==ve?(xe={type:it.Starter,title:le,prompt:ve,theme:As.Slurm,data:Te,body:""},t[70]=le,t[71]=ve,t[72]=xe):xe=t[72];let ce;t[73]!==I||t[74]!==L||t[75]!==q||t[76]!==K||t[77]!==ee||t[78]!==pe||t[79]!==xe||t[80]!==E?(ce=[E,I,L,q,K,ee,pe,xe],t[73]=I,t[74]=L,t[75]=q,t[76]=K,t[77]=ee,t[78]=pe,t[79]=xe,t[80]=E,t[81]=ce):ce=t[81];const we=ce,ge=i||u||d;if(ge){let te;t[82]===Symbol.for("react.memo_cache_sentinel")?(te=[],t[82]=te):te=t[82];let Q;return t[83]!==ge?(Q={prompts:te,isLoading:ge},t[83]=ge,t[84]=Q):Q=t[84],Q}if(_===Ye.Slurm){let te,Q,ie;if(t[85]!==we||t[86]!==c||t[87]!==h||t[88]!==ge){ie=Symbol.for("react.early_return_sentinel");e:{if(te=we.filter(ye=>{const{connectors:Re,syncConnectors:Ve}=b(ye),ze=Object.keys(Re).some(be=>[...c].some(Oe=>Oe===be)),Fe=!!Ve[Yl.gdrive_sync_connector];return ze||Fe&&h}),te.length<3){let ye;t[92]===Symbol.for("react.memo_cache_sentinel")?(ye=[],t[92]=ye):ye=t[92];let Re;t[93]!==ge?(Re={prompts:ye,isLoading:ge},t[93]=ge,t[94]=Re):Re=t[94],ie=Re;break e}te.sort(y$e),Q=te.slice(0,4).map(ye=>{const{connectors:Re,syncConnectors:Ve}=b(ye),ze=v(Re,Ve,{mode:"connected",connectedTypes:new Set([...c]),hasGdriveSync:h});return U(T({},ye),{trailing:y(ze)})})}t[85]=we,t[86]=c,t[87]=h,t[88]=ge,t[89]=te,t[90]=Q,t[91]=ie}else te=t[89],Q=t[90],ie=t[91];if(ie!==Symbol.for("react.early_return_sentinel"))return ie;te=Q;let _e;return t[95]!==ge||t[96]!==te?(_e={prompts:te,isLoading:ge},t[95]=ge,t[96]=te,t[97]=_e):_e=t[97],_e}let Ae,Ue,Ie;if(t[98]!==we||t[99]!==a||t[100]!==p||t[101]!==ge){Ie=Symbol.for("react.early_return_sentinel");e:{if(Ae=we.filter(te=>{const{connectors:Q,syncConnectors:ie}=b(te),_e=new Set(a.map(x$e)),ye=Object.keys(Q).some(Ve=>_e.has(Ve)),Re=!!ie[Yl.gdrive_sync_connector];return ye||Re&&p}),Ae.length<3){let te;t[105]===Symbol.for("react.memo_cache_sentinel")?(te=[],t[105]=te):te=t[105];let Q;t[106]!==ge?(Q={prompts:te,isLoading:ge},t[106]=ge,t[107]=Q):Q=t[107],Ie=Q;break e}Ae.sort(_$e),Ue=Ae.slice(0,4).map((te,Q)=>{var Ve;const ie="#settings/".concat(hn.Connectors,"?referrer=").concat(eo.SuggestedPrompts),{connectors:_e,syncConnectors:ye}=b(te),Re=v(_e,ye,{mode:"available",availableTypes:new Set(a.map(h$e)),hasGdriveSync:p});return U(T({},te),{theme:As.ContextualAnswersNUX,trailing:y(Re),data:{link:ie,id:(Ve=te.data)==null?void 0:Ve.id,position:Q.toString()},onSelectOverride:S})})}t[98]=we,t[99]=a,t[100]=p,t[101]=ge,t[102]=Ae,t[103]=Ue,t[104]=Ie}else Ae=t[102],Ue=t[103],Ie=t[104];if(Ie!==Symbol.for("react.early_return_sentinel"))return Ie;Ae=Ue;let Me;return t[108]!==ge||t[109]!==Ae?(Me={prompts:Ae,isLoading:ge},t[108]=ge,t[109]=Ae,t[110]=Me):Me=t[110],Me}function h$e(t){return t.type}function _$e(){return Math.random()-.5}function x$e(t){return t.type}function y$e(){return Math.random()-.5}function b$e(t,e){var s,n;if(e.type===it.Starter&&(e.theme===As.ContextualAnswersNUX||e.theme===As.Slurm)){const{data:o}=e,{link:a}=o;window.location.hash=a+"&suggestedPromptsText=".concat(encodeURIComponent(e.prompt)),B.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected","chatgpt_contextual_answers_recommended_prompt_selected",{prompt_id:(s=e.data)==null?void 0:s.id,prompt_position:(n=e.data)==null?void 0:n.position}),t.preventDefault();return}}function v$e(t,e,s){const n=[],o=!!(e!=null&&e[Yl.gdrive_sync_connector]);o&&s.hasGdriveSync&&n.push(e[Yl.gdrive_sync_connector]);const a=i=>s.mode==="connected"?s.connectedTypes.has(i):s.availableTypes.has(i);for(const i of Object.keys(t))o&&s.hasGdriveSync&&i===je.GDRIVE_ACTION_CONNECTOR||a(i)&&n.push(t[i]);return n.sort(S$e),n}function S$e(){return Math.random()-.5}function C$e(t){return r.jsx("div",{className:"flex flex-1 items-center justify-end gap-1",children:t.filter(Boolean).slice(0,3).map(w$e)})}function w$e(t,e){return r.jsx("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center rounded-full",children:r.jsx(t,{className:"h-full w-full"})},e)}function k$e(t){var s,n,o;const e=(s=t.data)!=null?s:{};return{connectors:(n=e.connectors)!=null?n:{},syncConnectors:(o=e.syncConnectors)!=null?o:{}}}function T$e(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function E$e(t){return t.user_connection_details.auth_status==="not_connected"}const RW=()=>{"use forget";const t=F.c(13),e=G();let s;t[0]!==e?(s=S9(e),t[0]=e,t[1]=s):s=t[1];const n=s;let o;t[2]!==e?(o=()=>i6(e),t[2]=e,t[3]=o):o=t[3];const a=oe(o);let i;t[4]!==e?(i=()=>OC(e),t[4]=e,t[5]=i):i=t[5];const l=oe(i),c=!l;let u;t[6]!==e?(u=()=>na(e),t[6]=e,t[7]=u):u=t[7];const d=oe(u);let f;t[8]!==d?(f=d==null?void 0:d.some(M$e),t[8]=d,t[9]=f):f=t[9];const m=f;let p;e:{if(a!=null&&a.some(N$e)){p=!0;break e}if(l&&l.length>0){p=!0;break e}p=!1}const h=n&&m&&p,_=c||!d;let b;return t[10]!==h||t[11]!==_?(b={available:h,isLoading:_},t[10]=h,t[11]=_,t[12]=b):b=t[12],b};function M$e(t){return t.systemHint==="glaux"}function N$e(t){return t.status&&t.status!=="DISABLED_BY_ADMIN"}async function A$e(t,e=4){if(e<1)return[];try{const s=c3(t),n=j$e(t);return(await de.safeGet("/templated_prompts/suggestions",{parameters:{query:{limit:e,mode:n,bypass_cache:s.get("bypass_cache",!1)}}})).suggestions.filter(a=>typeof a.prompt=="string"&&a.prompt.length>0).slice(0,e).map(a=>{var i;return{type:it.Templated,title:(i=a.description)!=null?i:"Dynamic Prompt",body:a.prompt,prompt:a.prompt,id:a.id,oneliner:a.name,theme:As.TemplatedPrompts,source:"CURATED"}})}catch(s){return[]}}function gft(t,e){"use forget";const s=F.c(9),n=G();let o;s[0]!==t?(o=["dynamic-prompt-suggestions",t],s[0]=t,s[1]=o):o=s[1];let a;s[2]!==n||s[3]!==t?(a=()=>A$e(n,t),s[2]=n,s[3]=t,s[4]=a):a=s[4];let i;return s[5]!==e||s[6]!==o||s[7]!==a?(i={queryKey:o,enabled:e,staleTime:3e5,queryFn:a},s[5]=e,s[6]=o,s[7]=a,s[8]=i):i=s[8],dt(i)}const hft=()=>{const t=G(),e=fs(),{available:s,isLoading:n}=RW();return!!(e!=null&&e.isWorkspacePlan())&&!s&&!n&&I$e(t)},c3=t=>_o(t,"2538364663");function I$e(t){return c3(t).get("enabled",!1)}function j$e(t){const s=c3(t).get("mode","static");return s==="dynamic"||s==="static"?s:"static"}var wP;const P$e=Mt.button(wP||(wP=St(["cursor-pointer absolute z-30 rounded-full bg-clip-padding border text-token-text-secondary border-token-border-default end-1/2 translate-x-1/2 bg-token-main-surface-primary w-8 h-8 flex items-center justify-center print:hidden"])));function R$e({show:t,onClick:e,className:s}){return r.jsx(Ms,{children:t&&r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},children:r.jsx(P$e,{className:s,onClick:e,children:r.jsx(y$,{className:"icon text-token-text-primary"})})})})}const _ft=oa(t=>vt(()=>ZH(t).hasFullscreenWidget$()||Qh(t).isOpen$()));function iu(t){const{data:e}=Ic(),s=V9(e);x.useEffect(()=>{!e||s||Ls.warn("Unable to resolve current account for promo eligibility",{planType:t,currentAccountId:e.currentAccountId,availableAccountIds:e.accountItems.map(({id:o})=>o)})},[e,s,t]);const n=s==null?void 0:s.getEligiblePromoCampaignId(t);return t===tt.PLUS&&((s==null?void 0:s.planType)==null||s.planType!==tt.FREE)?{eligible:!1}:n?{eligible:!0,campaignId:n}:{eligible:!1}}function xft(){return iu(tt.PLUS).eligible}function yft(){return iu(tt.GO).eligible}function O$e(){return iu(tt.SELF_SERVE_BUSINESS).eligible}function L$e(){return iu(tt.PLUS)}function D$e(){return iu(tt.GO)}function F$e(){return iu(tt.SELF_SERVE_BUSINESS)}function bft(){return iu(tt.PLUS)}const B$e=2e3,U$e=Ps({queryKey:["user_segments"],queryFn:async()=>{const t=new Promise(e=>{setTimeout(()=>e({segments:{}}),B$e)});try{return await Promise.race([de.safeGet("/user_segments"),t])}catch(e){return{segments:{}}}},staleTime:0,gcTime:0,refetchOnMount:"always"}),Cv=Ne({bannerTitle:{id:"threadClaimBusinessBanner.bannerTitle",defaultMessage:"Using ChatGPT for work? Claim your free Business trial"},bannerBody:{id:"threadClaimBusinessBanner.bannerBody",defaultMessage:"Keep work organized and protected in ChatGPTbuilt for teams and trusted by companies."},cta:{id:"threadClaimBusinessBanner.cta",defaultMessage:"Claim for free"}});function vft(t){"use forget";var y;const e=F.c(11),{canShowBanner:s}=t,n=s===void 0?!1:s,o=G();let a;e[0]!==o?(a=ut(),e[0]=o,e[1]=a):a=e[1];const i=a,l=O$e();let c;e[2]!==o?(c=Ee(o,"624542021"),e[2]=o,e[3]=c):c=e[3];const u=c,d=i&&n&&l&&!u;let f;e[4]!==d?(f=U(T({},U$e),{enabled:d}),e[4]=d,e[5]=f):f=e[5];const{data:m}=dt(f),p=((y=m==null?void 0:m.segments)==null?void 0:y.professional_user)===!0;if(!!!(n&&i&&l&&!u&&p)){let v;return e[6]===Symbol.for("react.memo_cache_sentinel")?(v={shouldShow:!1},e[6]=v):v=e[6],v}let h;e[7]!==o?(h=_o(o,"320080795").get("enabled",!1),e[7]=o,e[8]=h):h=e[8];const _=h;let b;return e[9]!==_?(b={shouldShow:_},e[9]=_,e[10]=b):b=e[10],b}function Sft(){"use forget";const t=F.c(9),e=G();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[0]=s):s=t[0],x.useEffect($$e,s);let n;t[1]!==e?(n=()=>{B.logEventWithStatsig("Thread Claim Business Banner Clicked","chatgpt_thread_claim_business_banner_clicked"),mt(e,LG)},t[1]=e,t[2]=n):n=t[2];const o=n;let a,i,l,c;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(Fxe,{}),i=r.jsx(j,T({},Cv.bannerTitle)),l=r.jsx(j,T({},Cv.bannerBody)),c=r.jsx(j,T({},Cv.cta)),t[3]=a,t[4]=i,t[5]=l,t[6]=c):(a=t[3],i=t[4],l=t[5],c=t[6]);let u;return t[7]!==o?(u=r.jsx(_s,{icon:a,title:i,content:l,primaryCtaText:c,onPrimaryCtaClick:o}),t[7]=o,t[8]=u):u=t[8],u}function $$e(){B.logEventWithStatsig("Thread Claim Business Banner Shown","chatgpt_thread_claim_business_banner_shown")}function H$e(t){"use forget";const e=F.c(5),{safetyLimited:s}=t,n=G(),o=ND(),a=yt();if(s){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(j,{id:"5QWLgm",defaultMessage:"<heading>We've limited access to this content for safety reasons.</heading>This type of information may be used to benefit or to harm people. We are continuously refining our work in this area, and you can read more about our approach in our <blogLink>blog post</blogLink> and <modelSpecLink>Model Spec</modelSpecLink>.",values:{heading:W$e,blogLink:z$e,modelSpecLink:V$e}}),e[0]=l):l=e[0],l}let i;return e[1]!==n||e[2]!==a||e[3]!==o?(i=r.jsx(j,{id:"4vDLZ8",defaultMessage:"This chat may violate our <contentPolicyLink>usage policies</contentPolicyLink> and has been closed. <startNewChatLink>Start a new chat</startNewChatLink>.",values:{contentPolicyLink:G$e,startNewChatLink:l=>xn(n)?r.jsx("button",{type:"button",onClick:()=>{Pl(a,{replace:location.pathname==="/"})},className:"underline hover:no-underline",children:l}):r.jsx(Ia,{to:"/",state:o,onClick:c=>{Lxe(n,c,{location:"Content violation"})},className:"underline hover:no-underline",children:l})}}),e[1]=n,e[2]=a,e[3]=o,e[4]=i):i=e[4],i}function G$e(t){return r.jsx("a",{href:"https://openai.com/policies/usage-policies",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function V$e(t){return r.jsx("a",{href:"https://openai.com/index/introducing-the-model-spec/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function z$e(t){return r.jsx("a",{href:"https://openai.com/index/preparing-for-future-ai-capabilities-in-biology/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function W$e(t){return r.jsx("h4",{className:"text-base font-bold",children:t})}function Cft({safetyLimited:t}){return r.jsx("div",{className:"flex flex-col items-center justify-center gap-4 pt-8",children:r.jsx(Aa,{children:r.jsx(jT,{type:"danger",className:"mb-2 w-fit self-start",children:r.jsx(H$e,{safetyLimited:t})})})})}const q$e=ue(Ce,"5979fc",20,20);function K$e(t,e){var n;const s=(n=t!=null?t:e)!=null?n:0;return z(t!=null&&t!=e&&"opacity-50 dark:opacity-60",s>4?"text-brand-purple":s>3?"text-green-500":s>2?"text-yellow-500":s>1?"text-orange-500":"text-red-500")}function Y$e(t){switch(t){case 1:return co.hoverRating1;case 2:return co.hoverRating2;case 3:return co.hoverRating3;case 4:return co.hoverRating4;case 5:return co.hoverRating5}}function Q$e(t){return dt({queryFn:async()=>GC.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:t!=null})}const u3=({rating:t,onRating:e,className:s})=>{const[n,o]=x.useState(),a=ne();return r.jsx("div",{className:z("flex flex-row",s),children:[1,2,3,4,5].map(i=>{var d;const l=r.jsx(q$e,{className:z("icon-2xl cursor-pointer",((d=n!=null?n:t)!=null?d:0)>=i?K$e(n,t):"text-token-main-surface-tertiary")}),c=Y$e(n!=null?n:0),u=c&&a.formatMessage(c);return r.jsx("div",{onClick:()=>{e(i)},onMouseEnter:()=>{o(i)},onMouseLeave:()=>{o(void 0)},className:"p-1",children:c?r.jsx(It,{label:u,side:"top",children:l}):l},i)})})},J$e=({gizmo:t,onClose:e})=>{var b,y,v;const s=xs(),n=ne(),o=Kt(),[a,i]=x.useState(""),[l,c]=x.useState(!1),[u,d]=x.useState(),f=Q$e(t.gizmo.id),m=z9(t.gizmo.id),p=u===((b=f.data)==null?void 0:b.rating);x.useEffect(()=>{f.data!=null&&u==null&&d(f.data.rating)},[f.data,u]),x.useEffect(()=>{B.logEvent("Show Rating Modal",{gizmo_id:t.gizmo.id})},[t.gizmo.id]);const g=f.data!=null,h=!((y=t.gizmo.tags)!=null&&y.includes(C1.FirstParty))&&t.gizmo.author.will_receive_support_emails,_=(v=t.gizmo.tags)==null?void 0:v.includes(C1.Workspace);return r.jsx(Ft,{testId:"modal-gizmo-review",type:"success",title:r.jsxs("div",{children:[r.jsx(j,T({},co.title)),r.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[g?r.jsx(j,T({},co.subtitleChange)):r.jsx(j,T({},co.subtitle)),r.jsx(It,{label:n.formatMessage(_?co.subtitleTooltipPrivate:co.subtitleTooltip),className:"ms-1 flex cursor-pointer items-center ps-1",children:r.jsx("div",{className:"icon-xs border-token-text-tertiary text-token-text-tertiary flex items-center justify-center rounded-full border text-[8px] font-bold",children:"i"})})]})]}),isOpen:!0,onClose:e,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:r.jsxs("div",{className:"flex grow flex-col space-y-8",children:[r.jsx(u3,{rating:u,onRating:d,className:"mx-auto flex flex-row items-center"}),h&&r.jsxs("div",{children:[r.jsx(Jz,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:n.formatMessage(co.messagePlaceholder),value:a,rows:1,onChange:S=>i(S.target.value)}),r.jsxs("div",{className:z("flex flex-row items-center space-x-2 self-start",a.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[r.jsx("input",{type:"checkbox",className:"rounded-sm",checked:l,onChange:S=>c(S.target.checked)}),s&&r.jsx("span",{className:"text-sm",children:r.jsx(j,U(T({},co.includeFrom),{values:{email:r.jsx("strong",{children:s.email})}}))})]})]}),r.jsx(ke,{color:"primary",disabled:p,onClick:async()=>{if(u==null){o.warning("Please select a rating");return}B.logEvent("Submit Rating Modal",{gizmo_id:t.gizmo.id,rating:u}),await m.mutateAsync({rating:u,message:a.length>0?a:void 0,includeFrom:a.length>0?l:void 0}),o.success(n.formatMessage(co.successToast),{duration:3}),e()},children:r.jsx(j,T({},co.submit))})]})})},co=Ne({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},subtitleTooltipPrivate:{id:"GizmoReviewModal.subtitleTooltipPrivate",defaultMessage:"Stars are anonymous and will only be visible to your workspace"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}}),Z$e=Object.freeze(Object.defineProperty({__proto__:null,GizmoReviewSelectRating:u3,default:J$e},Symbol.toStringTag,{value:"Module"}));var kP;const Aj=Mt.div(kP||(kP=St(["m-8 flex flex-col items-center"])));function Ij(t){return r.jsx(gt.div,T({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0,transition:{duration:.5,ease:"easeIn"}}},t))}function wft({clientThreadId:t}){const e=Qe(t,o=>o==null?void 0:o.promptGptRating),s=e==null?void 0:e.gizmoId,{data:n}=vi(s);return s==null||n==null||!_6(n)?null:r.jsx(X$e,{gizmoId:s})}function X$e({gizmoId:t}){const[e,s]=x.useState(!1),[n,o]=x.useState(!1),a=z9(t),i=async c=>{s(!0),setTimeout(()=>{o(!0)},5e3),B.logEvent("Submit Inline Rating",{gizmo_id:t,rating:c}),await a.mutateAsync({rating:c})},l=async()=>{o(!0),B.logEvent("Dismiss Inline Rating",{gizmo_id:t}),await a.mutateAsync({})};return x.useEffect(()=>{n||B.logEvent("Show Inline Rating",{gizmo_id:t})},[n,t]),n?null:e?r.jsx(Aj,{children:r.jsxs(Ij,{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"border-token-border-heavy rounded-lg border p-4",children:r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(j,{id:"gizmo.inlineReview.reviewLeft",defaultMessage:"Feedback sent"}),r.jsx(Es,{onClick:()=>{o(!0)}})]})}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,{id:"gizmo.inlineReview.reviewLeftSubtext",defaultMessage:'To update your rating, click "Send Feedback" in the GPT Menu'})})]})}):r.jsx(Aj,{children:r.jsxs(Ij,{className:"border-token-border-heavy flex flex-col items-center gap-4 rounded-lg border p-4",children:[r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(j,{id:"gizmo.inlineReview.prompt",defaultMessage:"How would you rate this GPT so far?"}),r.jsx(Es,{onClick:l})]}),r.jsx(u3,{rating:void 0,onRating:i})]})})}const kft=Pe(()=>me(()=>import("./mftxtwm418nurv0b.js").then(t=>t.i),__vite__mapDeps([422,1,3,4])).then(t=>t.ImageGenPromptItemCardRow),{fallback:()=>r.jsx("div",{className:"h-[168px] w-full"})}),eHe=ue(Ce,"69c970",20,20);function Tft(t){"use forget";const e=F.c(11),{inline:s,isRejected:n}=t,o=n?eHe:If,a=s?"absolute":"fixed",i=n?"text-token-text-error cursor-not-allowed":"";let l;e[0]!==a||e[1]!==i?(l=z("text-token-text-primary/80 pointer-events-none inset-0 z-50 flex flex-col items-center justify-center gap-2 backdrop-blur-xs transition-[opacity,display,backdrop-filter] transition-discrete starting:opacity-0 starting:backdrop-blur-none",a,i),e[0]=a,e[1]=i,e[2]=l):l=e[2];let c;e[3]!==o?(c=r.jsx(o,{className:"icon h-[max(20cqw,100px)] w-[max(20cqw,100px)]"}),e[3]=o,e[4]=c):c=e[4];let u;e[5]!==n?(u=r.jsx("h3",{className:"text-heading-app text-token-text-primary text-center",children:n?r.jsx(j,{id:"imagesApp.dropTarget.rejectedTitle",defaultMessage:"Unsupported file type"}):r.jsx(j,{id:"imagesApp.dropTarget.title",defaultMessage:"Drop images to upload"})}),e[5]=n,e[6]=u):u=e[6];let d;return e[7]!==l||e[8]!==c||e[9]!==u?(d=r.jsxs("div",{inert:!0,className:l,children:[c,u]}),e[7]=l,e[8]=c,e[9]=u,e[10]=d):d=e[10],d}function tHe(t){var n,o,a,i;const e=Array.from((o=(n=t.clipboardData)==null?void 0:n.files)!=null?o:[]);return e.length>0?e:Array.from((i=(a=t.clipboardData)==null?void 0:a.items)!=null?i:[]).filter(l=>l.kind==="file").map(l=>l.getAsFile()).filter(l=>l!=null)}function Eft({onFilesUploaded:t,isFocusTarget:e,conversation:s}){const n=e!=null?e:(o=>o===document.body);return rf(document,{paste:o=>{const a=document.activeElement;if(!n(a)||o.defaultPrevented)return;const i=tHe(o).filter(l=>l.type.startsWith("image/"));cl(()=>{const{tempIds:l}=i4e(jt())({files:i,type:"drag",conversation:s});l&&(o.preventDefault(),t==null||t(l))})}})}const sHe='defaults write com.google.Chrome NewTabPageLocation "'.concat(atob("aHR0cHM6Ly93d3cuY2hhdGdwdC5jb20vbmV3LXRhYi1wYWdl"),'"'),OW="defaults delete com.google.Chrome NewTabPageLocation 2>/dev/null || true",GS=({content:t})=>{const[e,s]=x.useState(!1),n=Kt(),o=ne();return r.jsxs("div",{className:"bg-token-bg-tertiary relative min-w-0 rounded-sm",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[r.jsx("div",{className:"overflow-x-auto px-2 py-1",children:r.jsx("code",{className:"block min-w-0 whitespace-nowrap",children:t})}),e&&r.jsx(ke,{color:"secondary",className:"absolute! sticky end-1 top-1/2 -translate-y-1/2",size:"small",onClick:async()=>{try{await navigator.clipboard.writeText(t),n.success(o.formatMessage({id:"laoJM9",defaultMessage:"Command copied to clipboard"}))}catch(a){}},children:r.jsx(j,{id:"fmeSBG",defaultMessage:"Copy"})})]})},d3=()=>r.jsxs("div",{className:"bg-token-bg-secondary w-full flex-none animate-pulse rounded-md p-3",children:[r.jsx("div",{className:"mb-3 h-32 w-full rounded-md bg-gray-200"}),r.jsx("div",{className:"mb-2 h-4 w-3/4 rounded bg-gray-200"}),r.jsx("div",{className:"h-3 w-2/3 rounded bg-gray-200"})]}),Mft=()=>ft.getItem(Be.HomeDiscoveryDismissed)?null:r.jsx(Aa,{children:r.jsxs(jT,{isDismissible:!0,className:"w-full",onDismiss:()=>ft.setItem(Be.HomeDiscoveryDismissed,!0),children:[r.jsx(j,{id:"ool//w",tagName:"p",defaultMessage:"Thanks for finding this page. You can set the default chrome new tab to this page by:"}),r.jsx(GS,{content:sHe}),r.jsx(j,{id:"8+SRpS",tagName:"p",defaultMessage:"You can revert by:"}),r.jsx(GS,{content:OW})]})});function nHe({limit:t=3}={}){const{data:e,isLoading:s,isError:n}=yee({cutId:"popular_in_my_workspace",limit:t});return{gizmos:x.useMemo(()=>{var i;return((i=e==null?void 0:e.pages)!=null?i:[]).flatMap(l=>{var c;return(c=l.list)!=null?c:[]}).flatMap(l=>{var c;return(c=l.items)!=null?c:[]}).flatMap(l=>l.resource)},[e]),isLoading:s,isError:n}}function oHe(){const{gizmos:t,isLoading:e,isError:s}=nHe();return s?null:r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:r.jsx(j,{id:"/XUia9",defaultMessage:"Trending GPTs"})}),e&&r.jsx(r.Fragment,{children:Array.from({length:3}).map((n,o)=>r.jsx(d3,{},o))}),t.map(n=>r.jsx(aHe,{gizmo:n},n.gizmo.id))]})}function aHe({gizmo:t}){var l;const e=G(),s=yt(),n=t.gizmo.display.name,o=t.gizmo.display.description,a=(l=t.gizmo.display.profile_picture_url)!=null?l:void 0,i=()=>{const c=$m(e,t);s(c)};return r.jsx("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:i,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(x0,{src:a,isFirstParty:!1,className:"h-10 w-10 shrink-0 rounded-md border border-gray-200 dark:border-gray-700"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"mb-0.5 line-clamp-1 text-sm font-medium",children:n}),o&&r.jsx("p",{className:"text-token-text-secondary line-clamp-2 text-xs",children:o})]})]})})}const rHe=Pe(()=>me(()=>import("./7dm499xgn0r9rz6v.js"),__vite__mapDeps([423,1,3,4])).then(t=>t.ItemDisplayModal));function LW(){"use forget";var l,c,u,d;const t=F.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["mixed-feed"],queryFn:lHe},t[0]=e):e=t[0];const s=dt(e);let n;t[1]!==((l=s.data)==null?void 0:l.items)?(n=(u=(c=s.data)==null?void 0:c.items)!=null?u:[],t[1]=(d=s.data)==null?void 0:d.items,t[2]=n):n=t[2];let o;t[3]!==n?(o=n.filter(iHe),t[3]=n,t[4]=o):o=t[4];const a=o;let i;return t[5]!==a||t[6]!==s?(i=U(T({},s),{items:a}),t[5]=a,t[6]=s,t[7]=i):i=t[7],i}function iHe(t){return t.content_type!=="survey"&&t.content_type!=="card_set"&&t.content_type!=="footer"}function lHe(){return de.safeGet("/feed/mixed")}function Nft(){"use forget";const t=F.c(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(mHe,{})}),t[0]=e):e=t[0];let s;t[1]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(cHe,{})}),t[1]=s):s=t[1];let n;return t[2]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsxs("div",{className:"flex w-full justify-center gap-4",children:[e,s,r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(oHe,{})})]}),t[2]=n):n=t[2],n}function cHe(){"use forget";const t=F.c(13),{items:e,isLoading:s,isError:n}=LW();let o,a,i,l;if(t[0]!==n||t[1]!==s||t[2]!==e){l=Symbol.for("react.early_return_sentinel");e:{const u=e.filter(fHe);if(n){l=null;break e}o="flex flex-col gap-3 pe-1",t[7]!==s?(a=s&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(dHe)}),t[7]=s,t[8]=a):a=t[8],i=u.map(uHe)}t[0]=n,t[1]=s,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=l}else o=t[3],a=t[4],i=t[5],l=t[6];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return t[9]!==o||t[10]!==a||t[11]!==i?(c=r.jsxs("div",{className:o,children:[a,i]}),t[9]=o,t[10]=a,t[11]=i,t[12]=c):c=t[12],c}function uHe(t,e){return r.jsx("div",{children:r.jsx(DW,{item:t})},"".concat(t.content_type,"-").concat(e))}function dHe(t,e){return r.jsx(d3,{},e)}function fHe(t){var e,s;return t.content_type==="card"&&(((e=t.title)==null?void 0:e.toLowerCase().includes("inbox"))||((s=t.title)==null?void 0:s.toLowerCase().includes("calendar")))}function mHe(){"use forget";const t=F.c(7),{items:e,isLoading:s,isError:n}=LW();if(n)return null;let o;t[0]!==s?(o=s&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(gHe)}),t[0]=s,t[1]=o):o=t[1];let a;t[2]!==e?(a=e.map(pHe),t[2]=e,t[3]=a):a=t[3];let i;return t[4]!==o||t[5]!==a?(i=r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[o,a]}),t[4]=o,t[5]=a,t[6]=i):i=t[6],i}function pHe(t,e){return r.jsx("div",{children:r.jsx(DW,{item:t})},"".concat(t.content_type,"-").concat(e))}function gHe(t,e){return r.jsx(d3,{},e)}const DW=t=>{"use forget";var l,c;const e=F.c(37),{item:s}=t,n=ne();let o;e[0]!==n?(o=n.formatMessage(jj.newsImageAlt),e[0]=n,e[1]=o):o=e[1];const a=o,i=G();switch(s.content_type){case"card":{const u=(l=s.image)==null?void 0:l.url,d=(c=s.image)==null?void 0:c.fallback_url,f=s.title,m=s.preview_markdown_text;let p;e[2]!==i||e[3]!==a||e[4]!==s?(p=()=>mt(i,rHe,{selectedCard:s,fallbackAltText:a}),e[2]=i,e[3]=a,e[4]=s,e[5]=p):p=e[5];let g;e[6]!==d||e[7]!==u||e[8]!==n||e[9]!==f?(g=u&&r.jsx("img",{src:u,onError:y=>{d&&y.target.src!==d&&(y.target.src=d)},alt:f!=null?f:n.formatMessage(jj.newsImageAlt),className:"mb-3 h-32 w-full rounded-md object-cover"}),e[6]=d,e[7]=u,e[8]=n,e[9]=f,e[10]=g):g=e[10];let h;e[11]!==f?(h=f&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:f}),e[11]=f,e[12]=h):h=e[12];let _;e[13]!==m?(_=m&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:m}),e[13]=m,e[14]=_):_=e[14];let b;return e[15]!==p||e[16]!==g||e[17]!==h||e[18]!==_?(b=r.jsxs("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:p,children:[g,h,_]}),e[15]=p,e[16]=g,e[17]=h,e[18]=_,e[19]=b):b=e[19],b}case"header_with_date":{let u;e[20]!==s.date?(u=s.date!=null?new Date(Number(s.date)*1e3):null,e[20]=s.date,e[21]=u):u=e[21];const d=u,f=s.body;let m;e[22]!==d?(m=d&&r.jsx("h3",{className:"mb-0.5 line-clamp-2 text-sm font-medium",children:r.jsx(oK,{value:d,month:"long",day:"numeric"})}),e[22]=d,e[23]=m):m=e[23];let p;e[24]!==f?(p=f&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:f}),e[24]=f,e[25]=p):p=e[25];let g;return e[26]!==m||e[27]!==p?(g=r.jsxs("div",{children:[m,p]}),e[26]=m,e[27]=p,e[28]=g):g=e[28],g}case"commentary":{const u=s.title,d=s.body;let f;e[29]!==u?(f=u&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:u}),e[29]=u,e[30]=f):f=e[30];let m;e[31]!==d?(m=d&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:d}),e[31]=d,e[32]=m):m=e[32];let p;return e[33]!==f||e[34]!==m?(p=r.jsxs("div",{children:[f,m]}),e[33]=f,e[34]=m,e[35]=p):p=e[35],p}case"divider":{let u;return e[36]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("div",{className:"border-token-border-muted my-1 border-t"}),e[36]=u):u=e[36],u}default:return null}},jj=Ne({newsImageAlt:{id:"+EPy7B",defaultMessage:"News image"}}),hHe=ue(Ce,"2a29bc",20,20),Pj=Pe(()=>me(()=>import("./njiajg2n9ig24agb.js"),__vite__mapDeps([424,1,3,4])).then(t=>t.AddShortcutModal)),_He=t=>Array.isArray(t)?t.map(e=>typeof e=="object"&&e!=null?{name:String(e.name),url:String(e.url)}:null).filter(e=>e!=null):[];function Aft(){"use forget";var S;const t=F.c(31),e=G(),s=ne();let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=_He((S=ft.getItem(Be.ShortcutLinks))!=null?S:[]),t[0]=n):n=t[0];const[o,a]=x.useState(n);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=C=>{a(C),ft.setItem(Be.ShortcutLinks,C)},t[1]=i):i=t[1];const l=i;let c;t[2]!==e||t[3]!==s||t[4]!==o?(c=C=>{mt(e,Pj,{title:s.formatMessage(jm.editShortcut),defaultName:o[C].name,defaultUrl:o[C].url,onSave:(w,k)=>{l(o.map((E,M)=>M===C?{name:w,url:k}:E))}})},t[2]=e,t[3]=s,t[4]=o,t[5]=c):c=t[5];const u=c;let d;t[6]!==o?(d=C=>{l(o.filter((w,k)=>k!==C))},t[6]=o,t[7]=d):d=t[7];const f=d;let m;if(t[8]!==u||t[9]!==f||t[10]!==o){let C;t[12]!==u||t[13]!==f?(C=(w,k)=>r.jsx(Rj,{onClick:()=>window.location.href=w.url,img:r.jsx("img",{src:"https://www.google.com/s2/favicons?domain=".concat(w.url,"&sz=64"),alt:w.name,className:"h-6 w-6"}),name:w.name,showMenu:!0,onEdit:()=>u(k),onRemove:()=>f(k)},w.name),t[12]=u,t[13]=f,t[14]=C):C=t[14],m=o.map(C),t[8]=u,t[9]=f,t[10]=o,t[11]=m}else m=t[11];let p;t[15]!==e||t[16]!==s||t[17]!==o?(p=()=>mt(e,Pj,{title:s.formatMessage(jm.addShortcut),onSave:(C,w)=>{l([...o,{name:C,url:w}])}}),t[15]=e,t[16]=s,t[17]=o,t[18]=p):p=t[18];let g;t[19]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(og,{className:"h-6 w-6"}),t[19]=g):g=t[19];let h;t[20]!==s?(h=s.formatMessage(jm.addShortcut),t[20]=s,t[21]=h):h=t[21];let _;t[22]!==p||t[23]!==h?(_=r.jsx(Rj,{onClick:p,img:g,name:h}),t[22]=p,t[23]=h,t[24]=_):_=t[24];let b;t[25]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("div",{className:"absolute! end-0 top-0 translate-x-full rtl:-translate-x-full",children:r.jsx(xHe,{})}),t[25]=b):b=t[25];let y;t[26]!==_?(y=r.jsxs("div",{className:"relative",children:[_,b]}),t[26]=_,t[27]=y):y=t[27];let v;return t[28]!==y||t[29]!==m?(v=r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"flex flex-wrap justify-center",children:[m,y]})}),t[28]=y,t[29]=m,t[30]=v):v=t[30],v}const xHe=()=>{"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(iE,{triggerIcon:ci,side:"right",sideOffset:4,children:r.jsxs("div",{className:"text-sm",children:[r.jsx(j,{id:"RUf4sV",tagName:"p",defaultMessage:"You can revert to chrome original by:"}),r.jsx(GS,{content:OW})]})}),t[0]=e):e=t[0],e},Rj=({onClick:t,img:e,name:s,showMenu:n,onEdit:o,onRemove:a})=>{const i=ne();return r.jsxs(ke,{color:"ghost",className:"group relative rounded-sm",onClick:t,children:[n&&o&&a&&r.jsxs(J.Root,{children:[r.jsx(J.Trigger,{asChild:!0,onClick:l=>{l.stopPropagation()},children:r.jsx(yHe,{})}),r.jsx(J.Portal,{children:r.jsxs(J.Content,{size:"auto",children:[r.jsx(J.Item,{onClick:l=>{l.stopPropagation(),o()},label:i.formatMessage(jm.edit)}),r.jsx(J.Item,{onClick:l=>{l.stopPropagation(),a()},label:i.formatMessage(jm.remove)})]})})]}),r.jsxs("div",{className:"flex flex-col items-center gap-3 py-3",children:[r.jsx("div",{className:"bg-token-bg-secondary mx-3 rounded-full p-3",children:e}),r.jsx("span",{className:"text-xs text-gray-700",children:s})]})]})},yHe=s=>{var n=s,{ref:t}=n,e=De(n,["ref"]);return r.jsx(ke,U(T({ref:t},e),{as:"button",onClick:o=>{var a;return(a=e.onClick)==null?void 0:a.call(e,o)},icon:hHe,color:"ghost",className:"absolute! end-0 top-0 opacity-0 transition-opacity group-hover:opacity-100",size:"small"}))},jm=Ne({addShortcut:{id:"TK0jxS",defaultMessage:"Add shortcut"},editShortcut:{id:"OLI43T",defaultMessage:"Edit shortcut"},edit:{id:"PUtE2c",defaultMessage:"Edit"},remove:{id:"lCYLCS",defaultMessage:"Remove"}}),bHe=Pe(()=>me(()=>import("./fnvr7bu6ngy60ar9.js"),__vite__mapDeps([231,1,3,4,10,232])).then(t=>t.ConnectorsOnboardingModal)),Oj=Pe(()=>me(()=>import("./lm2fngo6qkh6l0ci.js"),__vite__mapDeps([425,1,3,4])).then(t=>t.GlauxNuxModal));function Ift({clientThreadId:t}){var w;const e=G(),s=ne(),n=pf(),o=On(),a=jo(),[i,l]=Yn(),c=bee(e),u=fs(),d=(w=u==null?void 0:u.name)!=null?w:"",m=vee(u==null?void 0:u.planType)?r.jsx(j,{id:"2mP3gw",defaultMessage:"Organization knowledge"}):r.jsx(j,{id:"eMtjgF",defaultMessage:"Company knowledge"}),p=oe(()=>RC(e)),g=oe(()=>OC(e)),h=x.useMemo(()=>{var E;if(p===void 0||g===void 0)return!0;const k=g==null?void 0:g.some(M=>["partially_activated","activated","activating"].includes(M.user_connection_details.activation_status));return((E=p==null?void 0:p.size)!=null?E:0)>0||k},[p,g]),_=oe(()=>na(e)),b=_==null?void 0:_.some(k=>k.systemHint==="glaux"),{available:y}=RW(),v=x.useMemo(()=>y&&o==null,[y,o]),S=x.useCallback(()=>{const k=ft.getItem("oai/apps/connectors/glauxOnboarding"),E=()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),setTimeout(()=>{no(Ht(n))},100),B.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})};if(c==="restricted"&&k||!c){E();return}c==="restricted"?mt(e,Oj,{onContinue:E}):c==="external"&&(h?E():mt(e,bHe,{onContinue:E}))},[e,t,a,n,c,h]);x.useEffect(()=>{b&&i.get("glaux-onboarding")==="true"&&(mt(e,Oj,{onContinue:()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),no(Ht(n))}}),l(E=>(E.delete("glaux-onboarding"),E)))},[b,i,l,e,t,a,n]);const C=({onClick:k,Icon:E,label:M,tooltip:N})=>{const A=r.jsx(ke,{className:"py-2",color:"secondary",onClick:k,size:"medium",children:r.jsx("div",{className:"flex gap-2",children:r.jsxs(r.Fragment,{children:[E,M]})})});return r.jsx("div",{className:"mx-1.5 mt-11 flex justify-center max-md:hidden",children:N?r.jsx(It,{label:N,children:A}):A})};return v?r.jsx(C,{onClick:S,Icon:r.jsx(IE,{className:"icon"}),label:m,tooltip:s.formatMessage({id:"TfieoZ",defaultMessage:"Search {name}'s knowledge"},{name:d})}):null}function vHe(t){return t!=null&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||!!t.getAttribute("contenteditable"))}function jft(t){"use forget";const e=F.c(3);let s,n;e[0]!==t?(s=()=>{const o=Ht(t).dom.ownerDocument,a=o.defaultView;if(!a)return;const i=l=>{l.code!=="Space"&&l.key!=="Enter"&&(!l.metaKey||l.key==="v")&&!vHe(o.activeElement)&&no(Ht(t))};return a.addEventListener("keypress",i),()=>{a.removeEventListener("keypress",i)}},n=[t],e[0]=t,e[1]=s,e[2]=n):(s=e[1],n=e[2]),x.useEffect(s,n)}const Ch=Ne({focusOn:{id:"jawbone.focusOn",defaultMessage:"Focus on..."},rescheduleTo:{id:"jawbone.rescheduleTo",defaultMessage:"Reschedule to..."}});function Pft(t){"use forget";const e=F.c(34),{taskId:s}=t,{automation:n}=vT(s),o=G();let a;e[0]!==s?(a={automation_id:s},e[0]=s,e[1]=a):a=e[1];const{mutate:i,isPending:l}=LD(a);if(!n)return null;let c;e[2]!==o||e[3]!==s?(c=A=>{ao(o).prefillTaskReply(s,b2(A))},e[2]=o,e[3]=s,e[4]=c):c=e[4];const u=c,{is_enabled:d}=n;let f,m,p,g;e[5]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:0,y:10},m={opacity:1,y:0},p={opacity:0,y:10},g={duration:.15},e[5]=f,e[6]=m,e[7]=p,e[8]=g):(f=e[5],m=e[6],p=e[7],g=e[8]);const h=d?Wk:Zk,_=d?"danger-outline":"secondary";let b;e[9]!==d||e[10]!==i?(b=()=>i({is_enabled:!d}),e[9]=d,e[10]=i,e[11]=b):b=e[11];let y;e[12]!==d?(y=d?r.jsx(j,T({},nr.messages.pause)):r.jsx(j,T({},nr.messages.resume)),e[12]=d,e[13]=y):y=e[13];let v;e[14]!==l||e[15]!==y||e[16]!==h||e[17]!==_||e[18]!==b?(v=r.jsx(ke,{icon:h,color:_,size:"large",disabled:l,onClick:b,children:y}),e[14]=l,e[15]=y,e[16]=h,e[17]=_,e[18]=b,e[19]=v):v=e[19];let S;e[20]!==u?(S=()=>u(Ch.focusOn.defaultMessage),e[20]=u,e[21]=S):S=e[21];let C;e[22]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx(j,T({},Ch.focusOn)),e[22]=C):C=e[22];let w;e[23]!==S?(w=r.jsx(ke,{icon:xi,color:"secondary",onClick:S,children:C}),e[23]=S,e[24]=w):w=e[24];let k;e[25]!==u?(k=()=>u(Ch.rescheduleTo.defaultMessage),e[25]=u,e[26]=k):k=e[26];let E;e[27]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx(j,T({},Ch.rescheduleTo)),e[27]=E):E=e[27];let M;e[28]!==k?(M=r.jsx(ke,{icon:mg,color:"secondary",onClick:k,children:E}),e[28]=k,e[29]=M):M=e[29];let N;return e[30]!==v||e[31]!==w||e[32]!==M?(N=r.jsxs(gt.div,{initial:f,animate:m,exit:p,transition:g,className:"flex gap-2 overflow-x-scroll bg-transparent px-1 pb-4",children:[v,w,M]}),e[30]=v,e[31]=w,e[32]=M,e[33]=N):N=e[33],N}const FW=ue(Ce,"0c21a8",20,20),SHe=ue(Ce,"658007",20,20);function CHe({currentIndex:t,numEntries:e,onChange:s,onMouseDown:n,onMouseUp:o}){return r.jsx("div",{className:"w-full",children:r.jsxs(cE,{className:"relative m-2 flex w-full items-center",min:0,max:e,step:1,value:[t],onValueChange:a=>{s(a[0]),n()},onValueCommit:()=>{o()},children:[r.jsx(uE,{className:"bg-token-text-quaternary relative h-[9px] grow rounded-full",children:r.jsx(HH,{className:"bg-token-text-primary absolute h-full rounded-full"})}),r.jsx(dE,{className:"bg-token-bg-primary border-token-bg-secondary block h-[15px] w-[15px] cursor-pointer rounded-full border focus:outline-none"})]})})}function wHe(t,e){const s=[];if(!e)return s;let n=t.getNodeIfExists(e);for(;n;)s.push(n.message),n=t.getNodeIfExists(n.parentId);return s.reverse()}const kHe=400,THe=4e3,EHe=3e3,MHe=2e3;function NHe(t,e){const s=t.author.name,n=t.recipient;return s!=null&&s.startsWith("browser")||n!=null&&n.startsWith("browser")?THe/e:Fg(s,724319625)||Fg(n,724319625)?EHe/e:Fg(s,3405121681)||Fg(n,3405121681)?MHe/e:kHe/e}const BW="inline-block min-h-[unset]",Lj=z(BW,"p-0 h-fit py-1 px-4");function Rft({clientThreadId:t}){var M;const e=yt(),s=Zi.useState(N=>N.finalMessageId),n=Zi.useStore(),o=Zi.useState(N=>N.isPlaying),a=Zi.useState(N=>N.playbackSpeed),i=n.setPlaying,l=n.endReplay,c=x.useRef(!1),u=x.useCallback(N=>{i(N),c.current=N},[i]),d=x.useCallback(()=>{i(!1)},[i]),f=x.useCallback(()=>{i(c.current)},[i]);x.useCallback(()=>{if(!s)throw Error("Missing finalMessageId");nt(t,N=>{N.currentLeafId=s}),l()},[l,s,t]),x.useEffect(()=>()=>{s&&nt(t,N=>{N.currentLeafId=s})},[s,t]);const m=Qe(t,N=>N==null?void 0:N.tree),p=x.useMemo(()=>m?wHe(m,s).filter(I=>!(I.author.role==="root"||I.author.role==="system"||I.author.role==="assistant"&&I.recipient!=="all"||I.author.name&&ui(111655449,I.author.name))):[],[m,s]),g=((M=p==null?void 0:p.length)!=null?M:1)-1,h=!ut(),_=x.useCallback(()=>{u(!1),v(g)},[u,g]),b=x.useMemo(()=>{var L,D,H;const N=p.findLastIndex(V=>V.author.role==ot.User),A=p[N],I=N===-1?p:p.slice(N),P=I.findLast(V=>{var q;return V.channel==="final"&&((q=V.metadata)==null?void 0:q.n7jupd_summary)})||I.findLast(V=>{var q;return(q=V.metadata)==null?void 0:q.n7jupd_summary}),R=(D=(L=A.metadata)==null?void 0:L.system_hints)!=null?D:[],O=(H=P==null?void 0:P.metadata)==null?void 0:H.n7jupd_summary;return O?{systemHints:R,summarizedPrompt:O}:null},[p]),[y,v]=x.useState(1);x.useEffect(()=>{const N=p==null?void 0:p[y].id;N&&nt(t,A=>{A.currentLeafId=N})},[y,p,t]);const S=g===y;x.useEffect(()=>{S&&u(!1)},[S,u]);const C=n.toggleIsPlaying,w=x.useCallback(()=>{S&&!o&&v(1),C()},[S,o,C]);x.useEffect(()=>{if(!o||y>=g)return;const N=NHe(p[y],a),A=setTimeout(()=>{v(I=>I+1)},N);return()=>clearTimeout(A)},[o,a,y,p,g]),x.useEffect(()=>(u(!0),()=>u(!1)),[u]);const k=x.useCallback(()=>{u(!0),v(1)},[u]);return r.jsxs("div",{className:"shadow-long bg-token-main-surface-primary flex w-full items-center gap-2 rounded-[20px] p-4",children:[r.jsx(ke,{icon:S?zU:o?FW:Rke,onClick:S?k:w,className:z(BW,"border-none p-2"),color:"secondary"}),r.jsx("div",{className:"flex flex-1 flex-col items-center justify-center pe-6",children:r.jsx(CHe,{onChange:v,numEntries:g,currentIndex:y,onMouseDown:d,onMouseUp:f})}),r.jsxs("div",{className:"flex max-w-[200px] items-center justify-center",children:[S&&r.jsxs(r.Fragment,{children:[!1,!h&&!!b&&r.jsx(ke,{icon:Ix,onClick:()=>{const N=new URLSearchParams({prompt:b.summarizedPrompt});for(const A of b.systemHints)N.append(Sw,A);Pl(e,{params:N})},className:Lj,children:r.jsx("span",{className:"truncate",children:r.jsx(j,{id:"if6xD7",defaultMessage:"Try this prompt"})})})]}),!S&&r.jsx(r.Fragment,{children:r.jsx(ke,{icon:SHe,onClick:_,className:Lj,color:"secondary",children:r.jsx(j,{id:"Cxho9p",defaultMessage:"Skip"})})})]})]})}const UW={renderExtent:"complete",surface:"thread"},$W=x.createContext(UW);function Oft(t){"use forget";var l;const e=F.c(8);let s,n;e[0]!==t?(l=t,{children:s}=l,n=De(l,["children"]),e[0]=t,e[1]=s,e[2]=n):(s=e[1],n=e[2]);let o;e[3]!==n?(o=T(T({},UW),n),e[3]=n,e[4]=o):o=e[4];const a=o;let i;return e[5]!==s||e[6]!==a?(i=r.jsx($W.Provider,{value:a,children:s}),e[5]=s,e[6]=a,e[7]=i):i=e[7],i}function Lft(){"use forget";return x.useContext($W)}const AHe="_69lA8a_main",Dft={main:AHe},Fft=()=>r.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 -z-10 h-24",children:r.jsx(Aa,{children:r.jsx("div",{className:"relative -mx-8 h-24 [mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)] [mask-composite:intersect] backdrop-blur-2xl [-webkit-mask-composite:source-in] [-webkit-mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)]"})})}),Bft=t=>{"use forget";const e=F.c(22),{clientThreadId:s,bottom:n,pinnedWidgetType:o,onClick:a}=t;let i;e[0]!==s?(i=()=>Se.getBranch(Tt(s)),e[0]=s,e[1]=i):i=e[1];const[l]=x.useState(i);let c;e[2]!==l||e[3]!==o?(c=y=>{var v,S,C;return[(C=(S=(v=Se.getBranch(y))==null?void 0:v.slice(l.length).findLast(w=>{const{message:k}=w,{metadata:E}=k;return(E==null?void 0:E.chatgpt_sdk)&&u0(E.chatgpt_sdk)===o}))==null?void 0:S.message.metadata)==null?void 0:C.tool_invoking_message]},e[2]=l,e[3]=o,e[4]=c):c=e[4];const[u]=Qe(s,c);let d;e[5]!==n?(d={bottom:n},e[5]=n,e[6]=d):d=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f={viewTransitionName:"var(--vt-composer)"},e[7]=f):f=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(Fd,{sizeOverride:28,className:"text-token-border-default ms-2 flex-shrink-0 animate-spin",thickness:.08333333333333333,backgroundStrokeClassName:z("stroke-[rgba(0,0,0,0)]"),percentage:33.333333333333336}),e[8]=m):m=e[8];let p;e[9]!==u?(p=u!=null?u:r.jsx(j,{id:"z6ez+H",defaultMessage:"Thinking"}),e[9]=u,e[10]=p):p=e[10];let g;e[11]!==p?(g=r.jsx("span",{className:"loading-shimmer truncate px-4",children:p}),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==s?(h=r.jsx(ke,{icon:VT,size:"medium",className:"aspect-square p-0",onClick:y=>{y.stopPropagation(),Px(s)}}),e[13]=s,e[14]=h):h=e[14];let _;e[15]!==a||e[16]!==g||e[17]!==h?(_=r.jsxs("div",{role:"button",onClick:a,className:"bg-token-bg-primary shadow-short pointer-events-auto mx-auto flex h-12 w-full max-w-md cursor-pointer items-center justify-between gap-2 rounded-full px-1.5 dark:bg-[#303030]",style:f,children:[m,g,h]}),e[15]=a,e[16]=g,e[17]=h,e[18]=_):_=e[18];let b;return e[19]!==d||e[20]!==_?(b=r.jsx(Aa,{className:"fixed start-0 end-0 bottom-0 z-[100] py-1",style:d,children:_}),e[19]=d,e[20]=_,e[21]=b):b=e[21],b},HW=x.createContext(!1);function Uft(){return x.useContext(HW)}function $ft({children:t}){return r.jsx(HW.Provider,{value:!0,children:t})}function IHe(t){return t.nodeType===Node.ELEMENT_NODE}function GW(t){var e;if(IHe(t)){if(["THEAD","TR","TD","TH"].includes(t.nodeName.toUpperCase())){let s=t.parentNode;for(;s&&s.nodeName!=="TABLE";)s=s.parentNode;if(!s){Ls.debug("Found table element without a parent <table>");const n=document.createElement("table");(e=t.parentNode)==null||e.insertBefore(n,t),n.appendChild(t)}}t.attributes&&[...t.attributes].forEach(s=>{["style"].includes(s.name)&&t.removeAttribute(s.name)})}t.childNodes.forEach(GW)}function jHe(t){t.childNodes.forEach(GW)}function PHe(t){var o;const e=t.currentTarget.ownerDocument,s=e.defaultView;t.preventDefault();const n=s==null?void 0:s.getSelection();if(n&&n.rangeCount>0){const a=e.createDocumentFragment();for(let u=0;u<n.rangeCount;u+=1){const d=n.getRangeAt(u);a.appendChild(d.cloneContents())}jHe(a),a.querySelectorAll("script, [class*='select-none'], [class*='sr-only']").forEach(u=>{u.remove()});const i=e.createElement("div");i.appendChild(a),e.body.appendChild(i);const l=i.innerHTML;let c=i.innerText;c!=null&&c.trim()||(c=(o=i.textContent)!=null?o:""),c=c.replace(/\u00a0/g," "),e.body.removeChild(i),t.clipboardData.setData("text/html",l),t.clipboardData.setData("text/plain",c)}}function Dj(t){return t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement}function RHe(t){const e=t.nativeEvent;if(typeof e.composedPath=="function"){for(const s of e.composedPath())if(Dj(s))return!0}return Dj(t.target)}const Hft=t=>{"use forget";const e=F.c(4),s=G(),n=oo();let o;return e[0]!==t||e[1]!==s||e[2]!==n?(o=a=>{var d,f;RHe(a)||PHe(a);const{currentTarget:i}=a,l=(d=i.closest("[data-message-id]"))==null?void 0:d.getAttribute("data-message-id"),c=(f=document.getSelection())==null?void 0:f.toString(),u=Rt(t);!l||!c||!u||n||t0(s,{source:"keyboard",type:"copy",messageId:l,serverThreadId:u,selectedText:c,location:"selection",contentType:"text"})},e[0]=t,e[1]=s,e[2]=n,e[3]=o):o=e[3],o};function Fj(){return{finished:Promise.resolve(),ready:Promise.resolve(),skipTransition:()=>{},types:new Set,updateCallbackDone:Promise.resolve()}}function OHe(){return"ViewTransitionTypeSet"in document}function Gft({forceFlushSync:t,update:e,className:s,types:n}){var o,a;if(typeof document<"u"&&document.visibilityState==="hidden")return t?dr.flushSync(e):e(),Fj();if("startViewTransition"in document){let i;const l=OHe();n&&document.documentElement.setAttribute("active-view-transition-type",n.join(","));const c=["active-view-transition"];s&&(Array.isArray(s)?c.push(...s):c.push(s)),document.documentElement.classList.add(...c),l?i=document.startViewTransition({update:()=>{if(document.documentElement.classList.add("update-callback-done"),t)dr.flushSync(e);else return e()},types:n}):i=document.startViewTransition(()=>{if(document.documentElement.classList.add("update-callback-done"),t)dr.flushSync(e);else return e()});let u=!1;const d=()=>{u||(u=!0,document.documentElement.classList.remove(...c,"update-callback-done"),document.documentElement.removeAttribute("active-view-transition-type"))};return(o=i.finished)==null||o.then(async()=>{await Nd.yield(),d()}).catch(f=>{d()}),(a=i.ready)==null||a.catch(f=>{d()}),i}else{const i=Fj();return setTimeout(()=>{e()},0),i}}const Vft={"becoming-inline":"sR_mOW_becoming-inline","becoming-pinned":"sR_mOW_becoming-pinned","composer-slide":"sR_mOW_composer-slide","fullscreen-popover-thread-closing-transition":"sR_mOW_fullscreen-popover-thread-closing-transition","fullscreen-popover-thread-opening-transition":"sR_mOW_fullscreen-popover-thread-opening-transition","fullscreen-widget-composer-transition":"sR_mOW_fullscreen-widget-composer-transition","pinned-widget":"sR_mOW_pinned-widget"};function LHe(t,e=hp){const s=x.useRef(void 0);return n=>{const o=t(n);return e(s.current,o)?s.current:s.current=o}}function VW(t){if(t&&t.messages.length>0){const e=t.messages[0].create_time;if(e)return new Date(e*1e3)}return null}function C_(t,e){return!t||!e?!1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function zft(t){const e=Qe(t,LHe(c=>Se.getConversationTurns(c).map(d=>{const f=VW(d),m=V7e(d,d.messages);return{turnDate:f,isRenderable:m}}))),s=jx(t),n=(s==null?void 0:s.value)===Xt.UNREAD&&s.source===Cn.SERVER,[o,a]=x.useState(null),{results:i,lastRenderableTurnIndex:l}=x.useMemo(()=>{const c=new Array(e.length).fill(void 0),u=new Date;let d=null;for(const g of e){const h=g.turnDate;h&&(!d||h<d)&&(d=h)}let f=null,m=!0,p=null;for(let g=0;g<e.length;g++){const h=e[g];if(h.isRenderable){p=g;const _=h.turnDate;m?(m=!1,d&&!C_(d,u)&&(c[g]=0)):f&&!C_(_,f)&&(c[g]=0),f=_}}return{results:c,lastRenderableTurnIndex:p}},[e]);return x.useEffect(()=>{n&&l!=null&&l!==o&&a(l)},[n,l,o]),x.useMemo(()=>{const c=[...i];return n&&l!=null?c[l]=1:!n&&o!=null&&(c[o]=1),u=>c[u]},[i,n,l,o])}function DHe(t,e){const s=VW(e);if(s){const n=new Date,o=new Date;o.setDate(n.getDate()-1);let a;if(C_(s,n))a=t.formatMessage({id:"ConversationTurn.todayHeader",defaultMessage:"Today"});else if(C_(s,o))a=t.formatMessage({id:"ConversationTurn.yesterdayHeader",defaultMessage:"Yesterday"});else{const i=n.getFullYear(),l=s.getFullYear();i===l?a=t.formatDate(s,{month:"short",day:"numeric"}):a=t.formatDate(s,{month:"short",day:"numeric",year:"numeric"})}return a}else return null}const Wft=t=>{"use forget";const e=F.c(12),{turn:s,dateHeaderType:n}=t,o=G(),a=ne();if(n===void 0||!Ee(o,"1847911009"))return null;let i;e[0]!==a||e[1]!==s?(i=DHe(a,s),e[0]=a,e[1]=s,e[2]=i):i=e[2];const l=i;if(!l)return null;if(n===1){let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"me-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[3]=d):d=e[3];let f;e[4]!==l?(f=r.jsx("span",{className:"text-sm leading-5 font-normal text-[#0088FF]",children:l}),e[4]=l,e[5]=f):f=e[5];let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("div",{className:"ms-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[6]=m):m=e[6];let p;return e[7]!==f?(p=r.jsxs("div",{className:"mx-auto my-4 flex h-[20px] w-full items-center md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",children:[d,f,m]}),e[7]=f,e[8]=p):p=e[8],p}let c;e[9]===Symbol.for("react.memo_cache_sentinel")?(c={height:"20px"},e[9]=c):c=e[9];let u;return e[10]!==l?(u=r.jsx("div",{className:"my-4 flex justify-center",style:c,children:r.jsx("span",{className:"text-token-text-secondary text-sm leading-5 font-normal",children:l})}),e[10]=l,e[11]=u):u=e[11],u},qft=({role:t,gizmo:e})=>{const s=ne();function n(){switch(t){case ot.User:return s.formatMessage({id:"3DStaP",defaultMessage:"You said:"});case ot.Assistant:return e?s.formatMessage({id:"ptfwNc",defaultMessage:"{author} said:"},{author:e.gizmo.display.name}):s.formatMessage({id:"LDIn6l",defaultMessage:"ChatGPT said:"});default:return""}}const o=t===ot.Assistant?"h6":"h5";return r.jsx(o,{className:"sr-only",children:n()})},FHe=ue(Ce,"e91ac9",20,20),BHe="https://help.openai.com/en/articles/8400625-voice-mode-faq";function UHe({onSubmit:t}){const e=Dc(),s=tk(),n=(s==null?void 0:s[Qt.TrainingAllowed])===!0||(s==null?void 0:s[Qt.VoiceTrainingAllowed])===!0;x.useEffect(()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Shown","chatgpt_audio_paragen_opt_in_shown")},[]);const o=x.useCallback(async()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Accepted","chatgpt_audio_paragen_opt_in_accepted"),await Promise.all([e.mutateAsync({setting:Qt.TrainingAllowed,value:!0}),e.mutateAsync({setting:Qt.VoiceTrainingAllowed,value:!0})]),t()},[e,t]);return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("section",{children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,T({},Or.header))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,T({},Or.subheader))})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(FHe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(j,T({},Or.privacyHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(j,T({},Or.privacyDescription))})]})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(yp,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(j,T({},Or.controlHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(j,U(T({},Or.controlDescription),{values:{learnMoreTextAndLink:r.jsx(qn,{href:BHe,target:"_blank",className:"underline underline-offset-2",children:r.jsx(j,T({},Or.controlLearnMoreLink))})}}))})]})]}),r.jsxs("section",{className:"flex justify-center gap-2",children:[r.jsx(ke,{size:"medium",onClick:()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Actively Declined","chatgpt_audio_paragen_opt_in_actively_declined"),t()},color:"primary-inverse",className:"flex-1",children:r.jsx(j,T({},Or.buttonNotNow))}),r.jsx(ke,{size:"medium",onClick:()=>o(),disabled:n,className:"flex-1",children:r.jsx(j,T({},Or.buttonEnableDataSharing))})]})]})}const Or=Ne({header:{id:"AudioParagenOptIn.header",defaultMessage:"Thank you for making Voice Mode better!"},subheader:{id:"AudioParagenOptIn.subheader",defaultMessage:"Use voice chats to improve our models?"},privacyHeader:{id:"AudioParagenOptIn.privacyHeader",defaultMessage:"Taking steps to protect privacy"},privacyDescription:{id:"AudioParagenOptIn.privacyDescription",defaultMessage:"To improve our models, our team may review your audio. We take steps to reduce the amount of personal information used to train our models."},controlHeader:{id:"AudioParagenOptIn.controlHeader",defaultMessage:"Youre in control"},controlDescription:{id:"AudioParagenOptIn.controlDescription",defaultMessage:"You can stop sharing any time in settings. {learnMoreTextAndLink} about how to disable training on other content from voice mode."},controlLearnMoreLink:{id:"VoiceTrainingModal.controlLearnMoreLink",defaultMessage:"Learn more"},buttonNotNow:{id:"AudioParagenOptIn.buttonNotNow",defaultMessage:"Not now"},buttonEnableDataSharing:{id:"AudioParagenOptIn.buttonEnableDataSharing",defaultMessage:"Enable data sharing"}}),Bj=ue(Ce,"24f206",20,20),Uj=ue(Ce,"fa90cf",20,20);function $He({player:t,isPlaying:e,onPlay:s,onPause:n,onRewind:o,onForward:a}){const i=e&&!t,[l,c]=x.useState(0),[u,d]=x.useState(0);x.useEffect(()=>{t==null||t.on("ended",n);const g=h=>{c(h.seconds),d(h.totalSeconds)};return t==null||t.on("timeupdate",g),()=>{t==null||t.off("ended",n),t==null||t.off("timeupdate",g)}},[n,c,d,t]),x.useEffect(()=>{e||t==null||t.pause()},[e,t]);function f(){l>=u-.2&&(t==null||t.reset()),t==null||t.play(),s()}function m(){t==null||t.seek(-5),o==null||o()}function p(){t==null||t.seek(5),a==null||a()}return r.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[r.jsxs("button",{className:"ms-auto disabled:opacity-50",onClick:m,disabled:l<=.05,children:[r.jsx(Bj,{className:"size-6 rtl:hidden"}),r.jsx(Uj,{className:"size-6 ltr:hidden"})]}),r.jsx("button",{className:z("rounded-full p-4 transition-all duration-200",e?"bg-token-bg-secondary":"bg-token-bg-tertiary"),onClick:e?()=>n(!0):f,children:i?r.jsx(Wn,{className:"m-3 size-6 opacity-50"}):e?r.jsx(FW,{className:"size-10"}):r.jsx(bH,{className:"size-10"})}),r.jsxs("button",{className:"me-auto disabled:opacity-50",onClick:p,disabled:l>=u-.05,children:[r.jsx(Uj,{className:"size-6 rtl:hidden"}),r.jsx(Bj,{className:"size-6 ltr:hidden"})]})]})}function HHe({paragen:t,onSelect:e}){const s=zd(i=>i.playingId===t.id),n=zd(i=>i.selectedId),{playParagen:o,pauseParagen:a}=v0();return r.jsxs("div",{className:z("flex flex-1 flex-col gap-4 rounded-2xl border p-4 [transition:opacity_500ms_ease-out,border-color_200ms_ease-in-out,background-color_200ms_ease-in-out]",{"bg-token-interactive-bg-tertiary-hover border-token-border-heavy":s,"bg-token-interactive-bg-tertiary-press border-token-border-focus border-1":n===t.id,"opacity-40":n&&n!==t.id}),children:[r.jsx($He,{player:t.player,isPlaying:s,onPlay:()=>o(t.id),onPause:i=>a(t.id,i),onRewind:()=>{B.logEventWithStatsig("Audio Paragen: Rewind","chatgpt_audio_paragen_rewind",{paragen_id:t.id})},onForward:()=>{B.logEventWithStatsig("Audio Paragen: Forward","chatgpt_audio_paragen_forward",{paragen_id:t.id})}}),r.jsx(ke,{size:"medium",onClick:()=>e(t.id),children:r.jsx(j,T({},t1.paragenOptionButton))})]})}function GHe({selectedId:t,onSelect:e,onMount:s}){const n=zd(o=>o.paragens);return e0(()=>{s(n.length)}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,T({},t1.feedbackDescription))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,T({},t1.feedbackHeader))})]}),r.jsx("div",{className:"flex flex-row gap-4 md:justify-center",children:n.map(o=>r.jsx(HHe,{paragen:o,onSelect:e},o.id))}),r.jsx(ke,{className:z("self-center transition-opacity duration-300",{"opacity-40":t!=null&&t!==v_}),size:"medium",color:"ghost",onClick:()=>e(v_),children:r.jsx(j,T({},t1.paragenOptionBothBad))})]})}const t1=Ne({feedbackHeader:{id:"audioParagen.feedbackHeader",defaultMessage:"Help improve voice mode in your region"},feedbackDescription:{id:"audioParagen.feedbackDescription",defaultMessage:"Which audio response do you prefer?"},paragenOptionButton:{id:"audioParagen.paragenOptionButton",defaultMessage:"I prefer this audio"},paragenOptionBothBad:{id:"audioParagen.paragenOptionBothBad",defaultMessage:"Both are bad"}}),zW=ue(Ce,"b81341",20,20),WW=1500,Kft={aboutUserMessage:void 0,aboutModelMessage:void 0,nameUserMessage:void 0,roleUserMessage:void 0,traitsModelMessage:void 0,otherUserMessage:void 0,disabledTools:void 0,enabled:void 0,personalityTypeMessage:void 0},Yft=["engineeringStudent","gastroenterologist","sourdoughBaker","interiorDesigner","daycareManager","familyLawAttorney","excelWizard","level10Mage","pharmaSales","freelanceCopywriter","weddingPhotographer","catHerder","cdlDriver","thirdGradeTeacher"],Qft={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-8,transition:{duration:.2}}};function Jft(t){var e,s,n,o,a;return{nameUserMessage:(e=t==null?void 0:t.nameUserMessage)!=null?e:"",roleUserMessage:(s=t==null?void 0:t.roleUserMessage)!=null?s:"",traitsModelMessage:(n=t==null?void 0:t.traitsModelMessage)!=null?n:"",otherUserMessage:(o=t==null?void 0:t.otherUserMessage)!=null?o:"",disabledTools:(a=t==null?void 0:t.disabledTools)!=null?a:[],enabled:t==null?void 0:t.enabled}}function Zft({userContextData:t,updates:e,localUserContext:s,setLocalUserContext:n}){var g;const{aboutUserMessage:o="",aboutModelMessage:a="",nameUserMessage:i="",roleUserMessage:l="",traitsModelMessage:c="",otherUserMessage:u="",disabledTools:d=[],enabled:f}=t!=null?t:{},m=(g=s.enabled)!=null?g:!!f,p=(h,_,b)=>h!==void 0?h:_!=null?_:b;n(h=>U(T(T({},h),e),{aboutUserMessage:p(e.aboutUserMessage,h.aboutUserMessage,o),aboutModelMessage:p(e.aboutModelMessage,h.aboutModelMessage,a),nameUserMessage:p(e.nameUserMessage,h.nameUserMessage,i),roleUserMessage:p(e.roleUserMessage,h.roleUserMessage,l),traitsModelMessage:p(e.traitsModelMessage,h.traitsModelMessage,c),otherUserMessage:p(e.otherUserMessage,h.otherUserMessage,u),enabled:p(e.enabled,h.enabled,m),disabledTools:p(e.disabledTools,h.disabledTools,d)}))}const VHe=(t,e=WW)=>t.length>e,sm=Ne({traitsReset:{id:"userContextModal.traitsReset",defaultMessage:"Refresh traits"},tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},profileSubtitle:{id:"userContextModal.profileSubtitle",defaultMessage:"Introduce yourself to get better, more personalized responses"},profileSubtitleTooltip:{id:"userContextModal.profileSubtitleTooltip",defaultMessage:"ChatGPT will use the information you provide to tailor its responses to you. <link>Learn more</link> about how we use your data.",link:"https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt"},customizeName:{id:"userContextModal.customizeName",defaultMessage:"What should ChatGPT call you?"},customizeNamePlaceholder:{id:"userContextModal.customizeNamePlaceholder",defaultMessage:"Nickname"},occupationInputTitle:{id:"userContextModal.occupationInputTitle",defaultMessage:"Occupation"},moreDetailsInputTitle:{id:"userContextModal.moreDetailsInputTitle",defaultMessage:"More about you"},customizeRole:{id:"userContextModal.customizeRole",defaultMessage:"What do you do?"},customizeRolePlaceholder:{id:"userContextModal.customizeRolePlaceholder",defaultMessage:"Engineer, student, etc."},customizePersonality:{id:"userContextModal.customizePersonality",defaultMessage:"What personality should ChatGPT have?"},customizeTraits:{id:"userContextModal.customizeTraits",defaultMessage:"What traits should ChatGPT have?"},customizeTraitsPlaceholder:{id:"userContextModal.customizeTraitsPlaceholder",defaultMessage:"Describe or select traits"},customInstructionsPlaceholder:{id:"userContextModal.customInstructionsPlaceholder",defaultMessage:"Additional behavior, style, and tone preferences"},customizeOther:{id:"userContextModal.customizeOther",defaultMessage:"Anything else ChatGPT should know about you?"},customizeOtherPlaceholder:{id:"userContextModal.customizeOtherPlaceholder",defaultMessage:"Interests, values, or preferences to keep in mind"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they're used to help ChatGPT provide better responses."},traitsTooltipTitle:{id:"userContextModal.traitsTooltipTitle",defaultMessage:"You can tune ChatGPT's behavior by..."},traitsTooltipBodyItem1:{id:"userContextModal.traitsTooltipBodyItem1",defaultMessage:"Use a formal, professional tone."},traitsTooltipBodyItem2:{id:"userContextModal.traitsTooltipBodyItem2",defaultMessage:"Be casual and chatty."},traitsTooltipBodyItem3:{id:"userContextModal.traitsTooltipBodyItem3",defaultMessage:"Be opinionated. If a question could have multiple answers, try to give only the best one."},otherTooltipTitle:{id:"userContextModal.otherTooltipTitle",defaultMessage:"You can share things like..."},otherTooltipBodyItem1:{id:"userContextModal.otherTooltipBodyItem1",defaultMessage:"I love hiking and jazz."},otherTooltipBodyItem2:{id:"userContextModal.otherTooltipBodyItem2",defaultMessage:"I'm vegetarian."},otherTooltipBodyItem3:{id:"userContextModal.otherTooltipBodyItem3",defaultMessage:"I'm trying to learn French."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink>  your input will aid our research in this area."},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALLE"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"},advanced:{id:"userContextModal.advanced",defaultMessage:"Advanced"},advancedOpen:{id:"userContextModal.advancedOpen",defaultMessage:"Open advanced settings"},advancedClose:{id:"userContextModal.advancedClose",defaultMessage:"Close advanced settings"},customizeTitle:{id:"personalizationSettings.customizeTitle",defaultMessage:"Personalization"},aboutYouSectionTitle:{id:"personalizationSettings.aboutYouSectionTitle",defaultMessage:"About you"},memoryTitle:{id:"personalizationSettings.memoryTitle",defaultMessage:"Memory"},toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Reference saved memories"},exampleDescription:{id:"settingsModal.exampleDescription",defaultMessage:"Let ChatGPT save and use memories when responding."},manageMemoriesLink:{id:"settingsModal.manageMemoriesLink",defaultMessage:"Manage memories"},manageButton:{id:"settingsModal.manageMemoriesLink.button",defaultMessage:"Manage"},upgradeButton:{id:"settingsModal.upgradeButtonLink.button",defaultMessage:"Upgrade"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},enablePersonalizationRowLabel:{id:"personalizationSettings.enablePersonalizationRowLabel",defaultMessage:"Enable customization"},enablePersonalizationRowDescription:{id:"personalizationSettings.enablePersonalizationRowDescription",defaultMessage:"Customize how ChatGPT responds to you. {learnMoreLink}",values:{learnMoreLink:r.jsx(qn,{href:"https://help.openai.com/en/articles/8096356-chatgpt-custom-instructions-faq",className:"underline",children:r.jsx(j,{id:"dyoG1M",defaultMessage:"Learn more"})})}},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage memories"},RecordModeTitle:{id:"personalizationSettings.recordModeTitle",defaultMessage:"Record mode"},recordModeToggleLabel:{id:"personalizationSettings.recordModeToggleLabel",defaultMessage:"Reference record history"},recordModeDescription:{id:"personalizationSettings.recordModeDescription",defaultMessage:"Let ChatGPT reference all previous recording transcripts and notes when responding."},connectorSearchToggleLabel:{id:"personalizationSettings.connectorSearchToggleLabel",defaultMessage:"Connector search"},connectorSearchDescription:{id:"personalizationSettings.connectorSearchDescription",defaultMessage:"Let ChatGPT automatically search connected sources for answers."},pulseSettingTitle:{id:"personalizationSettings.pulseSettingTitle",defaultMessage:"Pulse"},pulseReferenceMemoriesToggleLabel:{id:"personalizationSettings.pulseReferenceMemoriesToggleLabel",defaultMessage:"Reference Memory in suggestions"},pulseReferenceMemoriesDescription:{id:"personalizationSettings.pulseReferenceMemoriesDescription",defaultMessage:'Let ChatGPT use memories proactively in suggestions. Turning this off will disable "Pulse". {learnMoreLink}',values:{learnMoreLink:r.jsx(qn,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",className:"underline",children:r.jsx(j,{id:"lFx4tz",defaultMessage:"Learn more"})})}},pulseEntrypointToggleLabel:{id:"personalizationSettings.pulseEntrypointToggleLabel",defaultMessage:'Show "Pulse" in new chats'},settingsPersonalitySelectionRowTitle:{id:"personalizationSettings.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},settingsPersonalitySelectionRowDescription:{id:"personalizationSettings.settingsPersonalitySelectionRowDescription",defaultMessage:"Set the style and tone ChatGPT uses when responding."}}),Xft=Ne({engineeringStudent:{id:"userContextModal.rolePlaceholder.engineeringStudent",defaultMessage:"Engineering student at University of Waterloo"},gastroenterologist:{id:"userContextModal.rolePlaceholder.gastroenterologist",defaultMessage:"Gastroenterologist"},sourdoughBaker:{id:"userContextModal.rolePlaceholder.sourdoughBaker",defaultMessage:"Small-batch home sourdough baker"},interiorDesigner:{id:"userContextModal.rolePlaceholder.interiorDesigner",defaultMessage:"Interior designer"},daycareManager:{id:"userContextModal.rolePlaceholder.daycareManager",defaultMessage:"Home daycare manager"},familyLawAttorney:{id:"userContextModal.rolePlaceholder.familyLawAttorney",defaultMessage:"Family law attorney"},excelWizard:{id:"userContextModal.rolePlaceholder.excelWizard",defaultMessage:"Excel wizard"},level10Mage:{id:"userContextModal.rolePlaceholder.level10Mage",defaultMessage:"Level 10 mage"},pharmaSales:{id:"userContextModal.rolePlaceholder.pharmaSales",defaultMessage:"Pharma sales"},freelanceCopywriter:{id:"userContextModal.rolePlaceholder.freelanceCopywriter",defaultMessage:"Freelance copywriter"},weddingPhotographer:{id:"userContextModal.rolePlaceholder.weddingPhotographer",defaultMessage:"Wedding photographer"},catHerder:{id:"userContextModal.rolePlaceholder.catHerder",defaultMessage:"Professional cat herder"},cdlDriver:{id:"userContextModal.rolePlaceholder.cdlDriver",defaultMessage:"CDL driver"},thirdGradeTeacher:{id:"userContextModal.rolePlaceholder.thirdGradeTeacher",defaultMessage:"Third-grade teacher"}}),zHe=({disabled:t=!1,onChange:e,onFocus:s,onSubmit:n,placeholder:o,value:a,name:i,tip:l,hasModError:c,className:u,size:d="md",showCharacterCount:f=!0,autoHighlight:m=!1,isNewCustomInstructionsUIEnabled:p=!1,maxLength:g=WW,scrollObscuringHeight:h=0,scrollOnFocus:_=!1,scrollOnChange:b=!1,dynamicHeight:y=!1,rows:v,textareaClassName:S})=>{var Z;const C=ne(),w=x.useRef(null),k=x.useRef(!0);x.useEffect(()=>{m&&w.current&&requestAnimationFrame(()=>{var K;(K=w.current)==null||K.select(),tn.setAutoHighlightNicknameInput(!1)})},[m]);const E=wn(()=>{!k.current||!w.current||iU({node:w.current,axis:"y",obscuringHeight:h,onScrollIntoView:()=>{k.current=!1}})}),M=wn(K=>{e(K),b&&E()}),N=wn(()=>{s==null||s(),_&&E()});x.useEffect(()=>{if(!y||!w.current)return;const K=w.current,Y=()=>{K.style.height="auto",K.style.height=Math.min(K.scrollHeight+2,120)+"px"};return Y(),K.addEventListener("input",Y),()=>{K.removeEventListener("input",Y)}},[y,a]);const A=oe(See),I=oe(Cee),P=!A,[R,O]=x.useState(!1),[L,D]=x.useState(P),H=!P&&R&&!L,V=P&&!L,q=VHe(a,g);x.useEffect(()=>{if(!w.current||!_&&!b)return;const K=rU(w.current,"y");if(!K)return;const Y=di(()=>{k.current=!0},100);return K.addEventListener("scroll",Y,{passive:!0}),()=>{K.removeEventListener("scroll",Y)}},[_,b]);const W=K=>{K.nativeEvent.isComposing||!t&&K.key==="Enter"&&K.metaKey&&!K.shiftKey&&!K.nativeEvent.isComposing&&(K.preventDefault(),n())},$=x.useRef(null);return r.jsxs(r.Fragment,{children:[l&&r.jsx(Ft,{testId:"modal-user-context-tip",isOpen:V,type:"success",size:"custom",className:"max-w-lg",title:C.formatMessage(sm.tipsHeader),showCloseButton:!0,onClose:()=>{D(!0)},children:l}),r.jsxs(eu,{open:H,children:[r.jsxs("div",{className:u,ref:$,children:[r.jsx(hi,{asChild:!0,children:r.jsx("textarea",{ref:w,className:z("bg-token-main-surface-primary w-full resize-none focus:ring-transparent",S,{"rounded-sm p-4":d!=="sm"&&!p,"rounded-lg border text-sm":d==="sm"||p,"border-orange-400 focus:border-orange-400":c,"border-red-500 focus:border-red-500":q&&!c,"focus-token-border-heavy border-token-border-default":!q&&!c,"opacity-30":t,"placeholder:text-gray-400":d==="sm"||p,"placeholder:text-gray-300":!p,"overflow-y-auto":y}),name:i,disabled:t,placeholder:o,onKeyDown:W,rows:v!=null?v:d==="sm"?1:A&&!I?6:5,value:a,onChange:M,onBlur:()=>{O(!1)},onFocus:()=>{N==null||N(),O(!0)},style:{maxHeight:y?"120px":void 0,verticalAlign:"top"}})}),r.jsx("div",{className:z("flex items-center justify-between px-1 text-xs tabular-nums",q?"text-red-600":"text-token-text-tertiary"),children:c?r.jsx("div",{className:"visible mt-2 text-start text-xs text-orange-400",children:r.jsx(j,U(T({},sm.modApiVoilation),{values:{policyLink:K=>r.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:K}),feedbackLink:K=>r.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:K})}}))}):r.jsxs(r.Fragment,{children:[f&&r.jsx("div",{children:"".concat(a.length,"/").concat(g)}),l&&r.jsx("button",{className:"flex items-center gap-1",onClick:()=>{var K;(K=w.current)==null||K.focus(),D(!L)},tabIndex:-1,children:r.jsx(Ms,{initial:!1,children:R&&r.jsx(gt.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:L?r.jsxs(r.Fragment,{children:[r.jsx(j,T({},sm.showTips)),r.jsx(HC,{className:"icon-xs"})]}):r.jsxs(r.Fragment,{children:[r.jsx(j,T({},sm.hideTips)),r.jsx(zW,{className:"icon-xs"})]})},"show-hide")})})]})})]}),l&&r.jsx(tu,{container:(Z=$.current)==null?void 0:Z.ownerDocument.body,children:r.jsx(su,{side:"right",align:"start",sideOffset:12,className:"popover animate-slideLeftAndFade border-token-border-default bg-token-main-surface-primary text-token-text-primary relative z-50 max-w-[220px] rounded-xl border p-4 text-sm shadow-[0px_4px_14px_rgba(0,0,0,0.06)] select-none xl:max-w-xs",onOpenAutoFocus:K=>{K.preventDefault()},onCloseAutoFocus:K=>{K.preventDefault()},children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("strong",{children:r.jsx(j,T({},sm.tipsHeader))}),l]})})})]})]})};function WHe({children:t,className:e,footer:s,title:n}){return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:z("flex flex-col gap-2",e),children:[r.jsx("div",{children:n}),t]}),s]})}const $o=Ne({formResponseSound:{id:"audioParagen.formResponseSound",defaultMessage:"Clearer sound"},formResponseAccent:{id:"audioParagen.formResponseAccent",defaultMessage:"Better accent"},formResponseMoreExpressive:{id:"audioParagen.formResponseMoreExpressive",defaultMessage:"More expressive"},formResponseNotExpressive:{id:"audioParagen.formResponseNotExpressive",defaultMessage:"Not expressive"},formResponseDistortedAudio:{id:"audioParagen.formResponseDistortedAudio",defaultMessage:"Distorted audio"},formResponsePoorAccent:{id:"audioParagen.formResponsePoorAccent",defaultMessage:"Poor accent"},formThankYou:{id:"audioParagen.formThankYou",defaultMessage:"Thank you for making Voice Mode better!"},formWhyChoose:{id:"audioParagen.formWhyChoose",defaultMessage:"Why did you choose your response?"},formOptionalFeedback:{id:"audioParagen.formOptionalFeedback",defaultMessage:"Other feedback (Optional)"},formOptionalFeedbackPlaceholder:{id:"audioParagen.formOptionalFeedbackPlaceholder",defaultMessage:"Anything you'd like to share?"},formBack:{id:"audioParagen.formBack",defaultMessage:"Back"},formSubmit:{id:"audioParagen.formSubmit",defaultMessage:"Submit"}}),$j={clearer_sound:$o.formResponseSound,better_accent:$o.formResponseAccent,more_expressive:$o.formResponseMoreExpressive,not_expressive:$o.formResponseNotExpressive,distorted_audio:$o.formResponseDistortedAudio,poor_accent:$o.formResponsePoorAccent};function qHe({option:t,reviews:e,onSelect:s}){const n=t in $j?$j[t]:null;if(!n)return null;const o=e.includes(t);return r.jsx(ke,{icon:o?hl:og,color:o?"primary":"secondary",className:"py-2 ps-2 pe-3 text-xs font-normal",onClick:()=>s(t),children:r.jsx(j,T({},n))})}function KHe({reviewOptions:t,feedback:e,selectedReviewOptions:s,onReviewOptionsChanged:n,onOptionalFeedbackChanged:o,onBack:a,onSubmit:i}){const l=x.useRef(null),c=ne();x.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[]);function u(f){s.includes(f)?n(s.filter(m=>m!==f)):n([...s,f])}function d(f){o(f.target.value)}return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,T({},$o.formThankYou))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,T({},$o.formWhyChoose))})]}),r.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:t.map(f=>r.jsx(qHe,{option:f,reviews:s,onSelect:u},f))}),r.jsx(WHe,{title:r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(j,T({},$o.formOptionalFeedback))}),children:r.jsx(zHe,{disabled:!1,onChange:d,onSubmit:Tn,value:e,name:"audio_paragen_optional_feedback",placeholder:c.formatMessage($o.formOptionalFeedbackPlaceholder),showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,size:"md"})}),r.jsxs("div",{className:"flex flex-row gap-2 self-end",children:[r.jsx(ke,{color:"ghost",onClick:a,children:r.jsx(j,T({},$o.formBack))}),r.jsx(ke,{onClick:i,children:r.jsx(j,T({},$o.formSubmit))})]})]})}const YHe=["clearer_sound","better_accent","more_expressive"],QHe=["not_expressive","distorted_audio","poor_accent"];function emt({lastUserMessageId:t,setIsDismissed:e}){const s=G(),[n,o]=x.useState("options"),[a,i]=x.useState([]),[l,c]=x.useState(""),u=x.useRef(null),d=x.useRef(!1),f=zd(w=>w.selectedId),{data:m}=qo(Qt.TrainingAllowed),{data:p}=qo(Qt.VoiceTrainingAllowed),{selectParagen:g,submitParagenResults:h,setShouldShowThankYouTooltip:_}=v0();x.useEffect(()=>{B.logUpsellOrModalEvent(ks,{eventId:"audio_paragen_prompt_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);function b(){g(null),i([]),o("options")}function y(w){u.current&&window.clearTimeout(u.current),g(w),u.current=window.setTimeout(()=>{o("review")},1e3)}function v(){e(!0),PLe(t),_(!0)}function S(){if(h(t,a,l),!m||!p){o("opt-in");return}v()}const C=x.useCallback(w=>{d.current||(d.current=!0,B.logEventWithStatsig("Audio Paragen: View","chatgpt_audio_paragen_view",{count:w}))},[]);return r.jsx(gt.div,{className:"relative max-w-[548px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,delay:.75}},exit:{opacity:0},children:r.jsxs(wee,{children:[r.jsx(gt.div,{layout:"size",className:"shadow-xxs overflow-hidden rounded-2xl border p-6 text-sm focus:outline-hidden",children:r.jsx(Ms,{mode:"wait",initial:!1,children:r.jsx(gt.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},exit:{opacity:0},children:n==="options"?r.jsx(GHe,{selectedId:f,onSelect:y,onMount:C}):n==="review"?r.jsx(KHe,{reviewOptions:f!==v_?YHe:QHe,feedback:l,selectedReviewOptions:a,onReviewOptionsChanged:i,onOptionalFeedbackChanged:c,onBack:b,onSubmit:S}):n==="opt-in"?r.jsx(UHe,{onSubmit:v}):null},n)})}),r.jsx(Es,{className:"absolute end-6 top-6",onClick:()=>{B.logEventWithStatsig("Audio Paragen: Dismissed Modal","chatgpt_audio_paragen_dismissed_modal"),_t(s,We.hasSeenAudioParagenPrompt),e(!0)}})]})})}function JHe(t,e){var a;if(!t)return!1;if(e)return!0;const n=["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124","gpt-4o-gdrive-1124-citation","gpt-4o-gdrive-0212","gpt-4o-gdrive-0314","o1_ca_0226","o3_mini_ca_0226"].includes(t.id),o=!!((a=t.product_features.contextual_answers)!=null&&a.is_eligible_for_contextual_answers);return n||o}function f3(t){const e=G(),s=O_(),n=mp(t!=null?t:null,e);return s&&JHe(t,n)}function ZHe(t,e){const s=f3(t!=null?t:null),n=G(),o=kee(n);return!s||!o?!1:o===Tee.DOGFOODING?!!e:!0}function XHe(t,e,s,n){if(e)return t?s&&s!==n?"/g/".concat(t,"/shared/c/").concat(e,"?project_id=").concat(t,"&owner_user_id=").concat(s):"/g/".concat(t,"/c/").concat(e):"/c/".concat(e)}function tmt({clientThreadId:t,turn:e,isFinalTurn:s}){return Qe(t,o=>!s&&e.messages.some(a=>(o==null?void 0:o.continuingSharedConversationLastMessageId)===a.id))?r.jsx("div",{className:"mx-auto mt-8 -mb-2 flex justify-center pb-2",children:r.jsxs("p",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(gx,{className:"icon-xs me-2"}),r.jsx(j,{id:"threadLayout.sharedConversationPrivateDisclaimer",defaultMessage:"Messages beyond this point are only visible to you"})]})}):null}function smt({clientThreadId:t,turn:e}){var d,f,m,p,g,h,_,b;const s=Rt(t),n=G(),o=ct(n),a=(f=(d=e.messages.find(y=>{var v;return(v=y.metadata)==null?void 0:v.branching_from_conversation_title}))==null?void 0:d.metadata)==null?void 0:f.branching_from_conversation_title,i=(p=(m=e.messages.find(y=>{var v;return(v=y.metadata)==null?void 0:v.branching_from_conversation_id}))==null?void 0:m.metadata)==null?void 0:p.branching_from_conversation_id,l=(h=(g=e.messages.find(y=>{var v;return(v=y.metadata)==null?void 0:v.branching_from_conversation_owner}))==null?void 0:g.metadata)==null?void 0:h.branching_from_conversation_owner,c=(b=(_=e.messages.find(y=>{var v;return(v=y.metadata)==null?void 0:v.gizmo_id}))==null?void 0:_.metadata)==null?void 0:b.gizmo_id,u=XHe(c,i,l,o==null?void 0:o.normalizedAccountUserId);return a?r.jsx(Aa,{children:r.jsxs("div",{className:"mx-auto mt-8 flex w-full items-center justify-center",children:[r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),r.jsx("p",{className:"mx-3 shrink text-xs whitespace-nowrap text-gray-500",children:r.jsx(j,{id:"threadLayout.branchConversationDisclaimer",defaultMessage:"Branched from {conversationTitle}",values:{conversationTitle:(s||l)&&u?r.jsx(pr,{className:"font-semibold",href:u,children:a}):r.jsx("span",{className:"font-semibold",children:a})}})}),r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]})}):null}const qW=t=>{var e,s;return((s=(e=t==null?void 0:t.suggested_connector_ids)==null?void 0:e.length)!=null?s:0)>0},KW=t=>!!(t!=null&&t.suggested_context_scope),nmt=t=>{const e=t.metadata;return qW(e)||KW(e)},omt=t=>t.recipient==="api_tool.call_tool",amt=t=>t.recipient===nL,eGe=t=>{var e;t=Array.isArray(t)?t:[t];for(let s=t.length-1;s>=0;s--){const{metadata:n}=t[s];if((e=n==null?void 0:n.suggested_connector_ids)!=null&&e.length)return n.suggested_connector_ids}return[]},YW=lx(eGe),QW="connector_openai_",JW=()=>["connector_5f3c8c41a1e54ad7a76272c89e2554fa","connector_1e4f6a44acf14e3ca1d96672f8c945bc"],tGe=t=>YW(t).filter(e=>e.startsWith(QW)||JW().includes(e)),sGe=lx(tGe),nGe=t=>YW(t).filter(e=>!e.startsWith(QW)&&!JW().includes(e)),oGe=lx(nGe),ZW=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{id:s,metadata:n}=t[e];if(qW(n)||KW(n))return s}},aGe=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:s}=t[e];if(s!=null&&s.suggested_context_scope)return s.suggested_context_scope}},rGe=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:s}=t[e];if(s!=null&&s.suggested_context_scope_action_label)return s.suggested_context_scope_action_label}},iGe=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:s}=t[e];if(s!=null&&s.cta_by_suggested_connector_id)return s.cta_by_suggested_connector_id}return{}},lGe=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:s}=t[e];if(s!=null&&s.cta_subtitle_by_suggested_connector_id)return s.cta_subtitle_by_suggested_connector_id}return{}},XW=({intl:t,conversation:e,systemHint:s,targetedReplyLabel:n})=>{var f,m;const o=s.systemHint,a=Tt(e.id),i=Se.getParentPromptNode(a);if(!i)return;const l=(f=s==null?void 0:s.actionLabel)!=null?f:s==null?void 0:s.name;$e.count(He.ECOSYSTEM,"suggestion_hint_followup_turn_triggered"),B.logEventWithStatsig("Ecosystem app: Suggestion hint followup turn triggered","chatgpt_web_ecosystem_suggestion_hint_followup_turn_triggered",T({system_hint:o},l?{system_hint_label:l}:{}));const c=[o],u=l?t.formatMessage(Hj.usedSystemHint,{systemHint:l}):t.formatMessage(Hj.usedSystemHintGeneric),d=cn(i.message.content,U(T({},i.message.metadata),{system_hints:c,is_visually_hidden_from_conversation:!0,triggered_by_system_hint_suggestion:!0,targeted_reply_label:n!=null?n:u}));i&&Ao({promptMessage:d,completionMetadata:{systemHints:c,conversationMode:(m=a==null?void 0:a.mode)!=null?m:{kind:Pt.PrimaryAssistant}},eventSource:"mouse",conversation:e}),o&&v1(o)&&Td(o,Ed.SuggestionAccept,Fs({clientThreadId:e.id}))},Hj=Ne({usedSystemHint:{id:"pwHqiX",defaultMessage:"Used {systemHint}"},usedSystemHintGeneric:{id:"wbs4BT",defaultMessage:"Used tool"}}),eq=({conversation:t,connectorIds:e})=>{"use no forget";const s=ne(),n=jt(),o=oe(()=>W9(n)),a=wn(p=>{var g,h;m.current||(m.current=!0,XW({intl:s,conversation:t,systemHint:{name:p.name,systemHint:Vm(p.id)},targetedReplyLabel:(h=(g=p.suggestion_config)==null?void 0:g.targeted_reply_label)!=null?h:null}))}),[i,l]=Yn(),c=i.get(Eee)==="true",u=i.get("oauth_success"),d=i.get("connector_id"),f=HNe(xR()).current,m=x.useRef(!1);x.useEffect(()=>{if(!u||!d||!e.includes(d))return;const p=o==null?void 0:o.get(d);p&&(a(p),l(g=>(g.delete("oauth_success"),g.delete("system_hint"),g.delete("connector_id"),g)))},[u,l,a,e,d,o]),x.useEffect(()=>{if(!c||!f||!e.includes(f))return;const p=o==null?void 0:o.get(f);p&&a(p)},[c,e,f,a,o])},tq=({connector:t,conversation:e,suggestionMessageId:s,hasLink:n,targetedReplyLabel:o,persistedSystemHintsStore:a,navigate:i,intl:l})=>{const c=t.id;$e.count(He.ECOSYSTEM,"suggestion_hint_clicked"),Td(Vm(c),Ed.SuggestionClick,Fs({clientThreadId:e.serverId$(),messageId:s}));const u=e.serverId$();if(u&&jPe({conversationId:u,messageId:s,connectorId:c,eventType:"click"}),n)XW({intl:l,conversation:e,systemHint:{name:t.name,systemHint:Vm(c)},targetedReplyLabel:o});else{$e.count(He.ECOSYSTEM,"inline_message_suggestion_connect_modal_opened"),B.logEventWithStatsig("Ecosystem app: Inline message suggestion connect modal opened","chatgpt_web_ecosystem_inline_message_suggestion_connect_modal_opened");const d=e.serverId$(),f=d?new URL(ya(d),window.location.origin):new URL(window.location.href);f.searchParams.set("connector_id",c),f.searchParams.set("oauth_success","true");const m=a.getActiveSystemHintType();m&&f.searchParams.set("system_hint",m);const p=t.supported_auth.length===1&&t.supported_auth[0].type==="OAUTH"?"OAUTH":void 0;i(Mee({connectorId:c,authTypeOverride:p,redirectAfter:f.toString(),referrer:eo.MessageSuggestion,showSettingsBehindConnectorLink:!1}),{replace:!0})}},cGe=({conversation:t,connector:e,suggestionMessageId:s,hasLink:n,callToAction:o,callToActionSubtitle:a,imageUrl:i,targetedReplyLabel:l})=>{x.useEffect(()=>{Td(Vm(e.id),Ed.SuggestionTrigger,Fs({clientThreadId:t.serverId$(),messageId:s})),Di.logEntryPointShown({referrer:eo.MessageSuggestion})},[]),eq({conversation:t,connectorIds:x.useMemo(()=>[e.id],[e.id])});const c=ne(),u=yt(),d=Ko.useStore(),f=wn(()=>{tq({connector:e,conversation:t,suggestionMessageId:s,hasLink:n,targetedReplyLabel:l,persistedSystemHintsStore:d,intl:c,navigate:u})}),{logo_url:m,logo_url_dark:p}=e,{data:g}=Fp({lightLogoUrl:m,darkLogoUrl:p}),h=i!=null?i:g==null?void 0:g.url,[_,b]=x.useState(!1);return r.jsxs(gt.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1,duration:.5,type:"spring"},type:"button",className:"group after:bg-token-bg-secondary relative z-10 flex items-center gap-4 after:absolute after:-inset-2 after:z-[-1] after:hidden after:rounded-xl after:opacity-50 after:content-[''] hover:after:block",onClick:f,children:[h&&r.jsx("div",{className:z("flex items-center justify-center overflow-hidden",!_&&"shimmer",i?"h-12 w-12 rounded-lg":z("bg-token-bg-primary h-10 w-10 rounded-xl","shadow-[0_0_0_0.5px_rgba(0,0,0,0.05),0_0.5px_1px_0_rgba(0,0,0,0.09),0_5px_8px_-3px_rgba(0,0,0,0.05)]","dark:shadow-[0_0_0_0.5px_rgba(255,255,255,0.05),0_0.5px_1px_0_rgba(255,255,255,0.09),0_5px_8px_-3px_rgba(255,255,255,0.05)]")),children:r.jsx("img",{className:z("object-contain",i?"h-full w-full":"h-8 w-8 overflow-hidden rounded-lg"),src:h,"aria-hidden":"true",onLoad:()=>{b(!0)}})}),r.jsxs("div",{className:"flex flex-col items-start gap-1 pe-2",children:[r.jsxs("span",{className:"text-token-text-primary inline-flex items-center text-base",children:[r.jsx("span",{className:"truncate",children:o}),r.jsx(Zr,{className:"icon-sm ms-1 shrink-0","aria-hidden":!0})]}),r.jsxs("div",{className:"flex flex-1 items-start gap-2",children:[i&&!a&&r.jsx("span",{className:"h-4.5 w-4.5 shrink-0 overflow-hidden rounded-md",children:(g==null?void 0:g.url)&&r.jsx("img",{src:g.url,className:"h-full w-full",alt:e.name})}),r.jsx("span",{className:"text-token-text-tertiary group-hover:text-token-text-secondary truncate text-sm",children:a||(n?r.jsx(j,{id:"6RY8V3",defaultMessage:"Use {connectorName}",values:{connectorName:e.name}}):r.jsx(j,{id:"tbpdYd",defaultMessage:"Connect {connectorName}",values:{connectorName:e.name}}))})]})]})]})},uGe=t=>{"use forget";const e=F.c(27),{conversation:s,connectorIds:n,messages:o,suggestionMessageId:a,suggestedContextScope:i,suggestedContextScopeActionLabel:l}=t,{platformConnectors:c}=_p(),{connectorLinks:u}=Ta();let d;e[0]!==o?(d=iGe(o),e[0]=o,e[1]=d):d=e[1];const f=d;let m;e[2]!==o?(m=lGe(o),e[2]=o,e[3]=m):m=e[3];const p=m;if(!a||!n.length)return null;const g=n.length>1;let h;if(e[8]!==n||e[9]!==u||e[10]!==s||e[11]!==p||e[12]!==f||e[13]!==g||e[14]!==c||e[15]!==a){let b;e[17]!==u||e[18]!==s||e[19]!==p||e[20]!==f||e[21]!==g||e[22]!==c||e[23]!==a?(b=y=>{var k,E,M,N;const v=c.get(y);if(!v||!y)return null;const S=v.suggestion_config,C=(k=f[y])!=null?k:S==null?void 0:S.call_to_action,w=(E=p[y])!=null?E:S==null?void 0:S.call_to_action_subtitle;return!S||!C?null:r.jsx(cGe,{conversation:s,connector:v,hasLink:u.has(y),callToAction:C,callToActionSubtitle:w!=null?w:null,targetedReplyLabel:(M=S.targeted_reply_label)!=null?M:null,imageUrl:g?null:(N=S.image_url)!=null?N:null,suggestionMessageId:a},y)},e[17]=u,e[18]=s,e[19]=p,e[20]=f,e[21]=g,e[22]=c,e[23]=a,e[24]=b):b=e[24],h=n.map(b),e[8]=n,e[9]=u,e[10]=s,e[11]=p,e[12]=f,e[13]=g,e[14]=c,e[15]=a,e[16]=h}else h=e[16];let _;return e[25]!==h?(_=r.jsx("div",{className:"border-token-border-light my-2 flex gap-10 border-t pt-4",children:h}),e[25]=h,e[26]=_):_=e[26],_},rmt=t=>{"use forget";const e=F.c(18),{isCompletionRequestInProgress:s,conversation:n,messages:o}=t;let a;e[0]!==o?(a=sGe(o),e[0]=o,e[1]=a):a=e[1];const i=a;let l;e[2]!==o?(l=ZW(o),e[2]=o,e[3]=l):l=e[3];const c=l;let u;e[4]!==o?(u=aGe(o),e[4]=o,e[5]=u):u=e[5];const d=u;let f;e[6]!==o?(f=rGe(o),e[6]=o,e[7]=f):f=e[7];const m=f;let p;e[8]!==i||e[9]!==n||e[10]!==s||e[11]!==o||e[12]!==d||e[13]!==m||e[14]!==c?(p=!s&&c&&r.jsx(uGe,{conversation:n,connectorIds:i,suggestionMessageId:c,messages:o,suggestedContextScope:d,suggestedContextScopeActionLabel:m},"message-suggestion"),e[8]=i,e[9]=n,e[10]=s,e[11]=o,e[12]=d,e[13]=m,e[14]=c,e[15]=p):p=e[15];let g;return e[16]!==p?(g=r.jsx(W_,{name:"EcosystemMessageSuggestion",children:r.jsx(Ms,{children:p})}),e[16]=p,e[17]=g):g=e[17],g},dGe=t=>{"use forget";const e=F.c(32),{connectorIds:s,suggestionMessageId:n,conversation:o}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=jt(),e[0]=a):a=e[0];const i=a;let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>W9(i),e[1]=l):l=e[1];const c=oe(l);let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=()=>ZP(i),e[2]=u):u=e[2];const{data:d}=oe(u);let f;e[3]!==s||e[4]!==o?(f={conversation:o,connectorIds:s},e[3]=s,e[4]=o,e[5]=f):f=e[5],eq(f);const m=Ko.useStore(),p=ne(),g=yt();let h;e[6]!==d||e[7]!==o||e[8]!==p||e[9]!==g||e[10]!==m||e[11]!==n?(h=k=>{var E,M;return tq({connector:k,conversation:o,suggestionMessageId:n!=null?n:"",hasLink:!!(d!=null&&d.has(k.id)),targetedReplyLabel:(M=(E=k.suggestion_config)==null?void 0:E.targeted_reply_label)!=null?M:null,persistedSystemHintsStore:m,intl:p,navigate:g})},e[6]=d,e[7]=o,e[8]=p,e[9]=g,e[10]=m,e[11]=n,e[12]=h):h=e[12];const _=h;if(!n||s.length===0)return null;let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(OE,{className:"icon-md"}),e[13]=b):b=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(J.Trigger,{asChild:!0,children:r.jsxs("button",{className:"bg-token-bg-primary hover:bg-token-bg-secondary text-token-text-secondary flex w-fit items-center gap-1.5 py-1 ps-2 pe-3",children:[b,r.jsx("span",{className:"text-sm font-medium",children:r.jsx(j,{id:"t32e+H",defaultMessage:"Apps"})})]})}),e[14]=y):y=e[14];let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(J.Label,{children:r.jsx(j,{id:"XN9uZU",defaultMessage:"ChatGPT Apps relevant to your chat"})}),e[15]=v):v=e[15];let S;if(e[16]!==s||e[17]!==d||e[18]!==o||e[19]!==_||e[20]!==c||e[21]!==n){let k;e[23]!==d||e[24]!==o||e[25]!==_||e[26]!==c||e[27]!==n?(k=E=>{const M=c==null?void 0:c.get(E);return!M||!M.suggestion_config?null:r.jsx(fGe,{connector:M,conversation:o,suggestionMessageId:n,hasLink:!!(d!=null&&d.has(E)),onClick:()=>_(M)},E)},e[23]=d,e[24]=o,e[25]=_,e[26]=c,e[27]=n,e[28]=k):k=e[28],S=s.map(k),e[16]=s,e[17]=d,e[18]=o,e[19]=_,e[20]=c,e[21]=n,e[22]=S}else S=e[22];let C;e[29]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx(J.Group,{children:r.jsx(J.LinkItem,{external:!0,to:"/apps",children:r.jsx(j,{id:"wZW8OW",defaultMessage:"Explore more apps"})})}),e[29]=C):C=e[29];let w;return e[30]!==S?(w=r.jsxs(J.Root,{children:[y,r.jsx(J.Portal,{children:r.jsxs(J.Content,{align:"start",side:"top",className:"w-[345px]",children:[v,S,C]})})]}),e[30]=S,e[31]=w):w=e[31],w},fGe=({conversation:t,suggestionMessageId:e,connector:s,hasLink:n,onClick:o})=>{"use no forget";const{logo_url:a,logo_url_dark:i}=s,{data:l}=Fp({lightLogoUrl:a,darkLogoUrl:i}),[c,u]=x.useState(!1);return x.useEffect(()=>{Td(Vm(s.id),Ed.SuggestionTrigger,Fs({clientThreadId:t.serverId$(),messageId:e})),Di.logEntryPointShown({referrer:eo.MessageSuggestion})},[]),r.jsxs(J.Item,{className:"group relative z-10 flex items-center gap-2 pe-2!",onClick:o,children:[r.jsx("div",{className:z("flex h-6 w-6 items-center justify-center overflow-hidden rounded-md","shadow-[0_0_0_0.5px_rgba(0,0,0,0.05),0_0.5px_1px_0_rgba(0,0,0,0.09),0_5px_8px_-3px_rgba(0,0,0,0.05)]","dark:shadow-[0_0_0_0.5px_rgba(255,255,255,0.05),0_0.5px_1px_0_rgba(255,255,255,0.09),0_5px_8px_-3px_rgba(255,255,255,0.05)]",c?"bg-token-bg-primary":"bg-token-bg-tertiary"),children:(l==null?void 0:l.url)&&r.jsx("img",{className:"h-full w-full object-contain",src:l.url,"aria-hidden":"true",onLoad:()=>{u(!0)}})}),r.jsx("div",{className:"text-token-text-primary inline-flex items-center text-base",children:r.jsx("span",{className:"truncate",children:s.name})}),r.jsx("div",{className:"ms-auto hidden group-hover:block",children:r.jsx("div",{className:"text-token-text-secondary pe-1 text-sm font-medium",children:n?r.jsx(j,{id:"2rjxSK",defaultMessage:"Use"}):r.jsx(j,{id:"C2p7lo",defaultMessage:"Connect"})})})]})},imt=t=>{"use forget";const e=F.c(10),{messages:s,conversation:n}=t;let o;e[0]!==s?(o=oGe(s),e[0]=s,e[1]=o):o=e[1];const a=o;let i;e[2]!==s?(i=ZW(s),e[2]=s,e[3]=i):i=e[3];const l=i;let c;e[4]!==a||e[5]!==n||e[6]!==l?(c=a.length&&l&&r.jsx(dGe,{connectorIds:a,suggestionMessageId:l,conversation:n}),e[4]=a,e[5]=n,e[6]=l,e[7]=c):c=e[7];let u;return e[8]!==c?(u=r.jsx(W_,{name:"EcosystemMessageSuggestionPill",children:c}),e[8]=c,e[9]=u):u=e[9],u},mGe="bg-token-main-surface-primary text-token-text-primary",pGe="openai",Gj=["bg-blue-300 text-white"];function gGe(t){var e;return Gj[((e=t==null?void 0:t.charCodeAt(0))!=null?e:0)%Gj.length]}const wh=({children:t})=>r.jsx("div",{className:"pt-0",children:r.jsx("div",{className:z(x.isValidElement(t)&&t.type===w1?"gizmo-bot-avatar":"gizmo-shadow-stroke","flex h-8 w-8 items-center justify-center overflow-hidden rounded-full"),children:t})});function lmt(t){var m;const{messages:e,isUserTurn:s,avatarClassName:n,gizmo:o}=t,a=e[0],i=(m=a==null?void 0:a.metadata)==null?void 0:m.shared_conversation_id,l=i!=null,c=xs(),{gizmoEditorData:u,mode:d}=xw();let f=r.jsx(wh,{children:r.jsx(w1,{className:n!=null?n:mGe,iconName:pGe})});return o?f=r.jsx(wh,{children:r.jsx(P7e,{gizmoId:o.gizmo.id,className:"h-full w-full"})}):u!=null&&d==="test"&&(f=r.jsx(x0,{isFirstParty:!1,src:u.profilePictureUrl,className:"h-8 w-8 first:pt-[3px]"})),r.jsx("div",{children:s?l?r.jsx(wh,{children:r.jsx(w1,{className:gGe(i),iconName:"user"})}):r.jsx(wh,{children:r.jsx(zC,{user:c})}):f})}const hGe=Zt(()=>({displayingSideBySideFeedback:!1}));function _Ge({messages:t,isRequestActive:e,isLastMessageInTurn:s,isRetrieval:n,isUsingGizmo:o,isUsingProject:a}){var _,b;const i=oq({messages:t}),l=xGe(t),c=l.filter(y=>EGe(y,!1)&&!MGe(y)),u=(_=c[c.length-1])!=null?_:void 0,d=ne();if(NGe(t).some(({content:y})=>y.content_type===bt.SystemError))return null;let f=_n.Running;const m=c.filter(y=>y.type===ns.Search).length,p={count:c.length-m,domain:u?q9((b=C0(u))!=null?b:""):void 0,query:u?sq(u):void 0};let g=n?o?a?d.formatMessage(cs.searchingProjectContext):d.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):d.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):d.formatMessage({id:"message.tools.browse.running",defaultMessage:"Searching the web"});return t.some(ume)?(f=_n.Stopped,g=n?o?d.formatMessage({id:"browsingMessage.searchingKnowledgeStopped",defaultMessage:"Stopped searching knowledge"}):d.formatMessage({id:"browsingMessage.retrievalStopped",defaultMessage:"Stopped reading documents"}):d.formatMessage({id:"message.tools.browse.stopped",defaultMessage:"Search stopped"})):!s||!e?l.length>0&&l.every(y=>y.didError)?(f=_n.Error,g=n?o?d.formatMessage({id:"browsingMessage.searchingKnowledgeFailed",defaultMessage:"Error searching knowledge"}):d.formatMessage({id:"browsingMessage.retrievalFailed",defaultMessage:"Error reading documents"}):d.formatMessage({id:"message.tools.browse.failed",defaultMessage:"Search failed"})):(f=_n.Finished,g=n?null:p.count===0?d.formatMessage({id:"message.tools.browse.started",defaultMessage:"Searching the web..."}):d.formatMessage({id:"message.tools.browse.finished",defaultMessage:"Searched {count, plural, =0 {0 sites} one {# site} other {# sites}}"},p)):i.length>0?g=aq({contextualAnswerSources:i,intl:d}):c.length>0&&(g=kGe(d,p,n,o,c[c.length-1])),(c.length>0||n&&s)&&f!==_n.Error?r.jsx(s_,{highlightedCommand:g,showWorkUserSetting:!1,status:f,children:c.length===0?null:r.jsx(yGe,{commands:c})}):r.jsx(AGe,{$isError:f===_n.Error,children:g})}function Vj(t){var e,s,n;return((e=t.metadata)==null?void 0:e.command)==="quote"||((s=t.metadata)==null?void 0:s.command)==="quote_full"||((n=t.metadata)==null?void 0:n.command)==="quote_lines"}function xGe(t){return t.map((e,s)=>{if(e.author.role!==ot.Tool||s>0&&Vj(e)&&Vj(t[s-1]))return null;const n=e.metadata;if(!n)return null;const{command:o,status:a}=n;return o?{type:o,status:a,didError:e.content.content_type===bt.SystemError,message:e}:null}).filter(ex)}function yGe({commands:t}){const e=ne();return r.jsx("div",{className:"divide-token-border-default border-token-border-default mb-4 divide-y rounded-xl border text-sm",children:r.jsx(Ms,{initial:!1,children:t.map((s,n)=>{const o=SGe(s);if(o==null)return null;const{icon:a,url:i,title:l,externalLink:c}=o,u=i?q9(i):void 0,d=l?typeof l=="string"?l:e.formatMessage(l):null,f=i&&JT(i);return r.jsx(gt.div,{initial:"collapsed",animate:"open",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:r.jsxs(bGe,{url:c!=null?c:i,className:z("flex items-start gap-3 px-4 py-3",l?"text-token-text-secondary":"text-token-text-primary",n===0&&"rounded-t-xl",n===t.length-1&&"rounded-b-xl"),children:[a?r.jsx(a,{className:"icon-sm text-token-text-secondary mt-0.5 shrink-0"}):i?r.jsx(Kn,{url:i,className:"mt-1"}):null,r.jsxs("div",{children:[d&&r.jsxs("div",{className:"text-token-text-primary line-clamp-1",children:[f&&"".concat(f,"  "),d]}),r.jsx("div",{children:u})]})]})},n)})})})}function bGe({url:t,children:e,className:s}){return t?r.jsxs("a",{href:t,target:"_blank",className:z(s,"group hover:bg-token-main-surface-secondary relative"),rel:"noreferrer",children:[e,r.jsx("div",{className:"from-token-main-surface-secondary invisible absolute end-3 bg-linear-to-l to-transparent ps-4 group-hover:visible",children:r.jsx(wr,{className:"icon text-token-text-secondary"})})]}):r.jsx("div",{className:s,children:e})}function vGe(t){var s,n;const e=(n=(s=t.message.metadata)==null?void 0:s._cite_metadata)==null?void 0:n.metadata_list[0];return e!=null&&e.type!=="file"?e.title:null}function sq(t){var e,s;return(s=(e=t.message.metadata)==null?void 0:e.args)==null?void 0:s[0]}function SGe(t){var e,s,n;switch(t.type){case ns.Search:{const o=(e=t.message.metadata)==null?void 0:e.search_engine;if(o&&o!==Dee.Bing)return null;const a=sq(t);return{icon:d6,url:((s=t.message.metadata)==null?void 0:s.message_source)==="apple"?null:"bing.com",externalLink:wGe(t),title:a?"".concat(a,""):Je({id:"message.tools.browse.querying",defaultMessage:"Querying"})}}case ns.Click:case ns.MultiClick:case ns.Lookup:case ns.OpenUrl:case ns.Open:case ns.Quote:case ns.QuoteFull:case ns.QuoteLines:case ns.Scroll:return{url:C0(t),title:(n=vGe(t))!=null?n:void 0};case ns.Spinner:case ns.Back:return null}}function CGe(t){const e=new URLSearchParams({query:t.query});return"".concat(vc,"/bing/redirect?").concat(e.toString())}function wGe(t){var s,n;const e=(n=(s=t.message.metadata)==null?void 0:s.args)==null?void 0:n[0];return e===void 0?null:CGe({query:e})}function kGe(t,e,s,n,o){switch(o==null?void 0:o.type){case ns.Click:case ns.MultiClick:case ns.Lookup:case ns.OpenUrl:case ns.Quote:case ns.QuoteFull:case ns.QuoteLines:case ns.Scroll:case ns.Open:case ns.Back:return t.formatMessage({id:"message.tools.browse.reading",defaultMessage:"Browsing {domain}"},e);case ns.Search:case void 0:return s?n?t.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):t.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):t.formatMessage({id:"message.tools.browse.searching",defaultMessage:'Searching "{query}"'},e);case ns.Spinner:return null}}function TGe(t){var s,n;const e=(n=(s=t.message.metadata)==null?void 0:s._cite_metadata)==null?void 0:n.metadata_list[0];return e!=null&&e.type==="file"?e.name:null}function EGe(t,e){switch(t.type){case ns.Search:return!0;case ns.Click:case ns.Lookup:case ns.MultiClick:case ns.OpenUrl:case ns.Quote:case ns.QuoteFull:case ns.QuoteLines:return e?TGe(t)!=null:C0(t)!=null;case ns.Open:case ns.Back:case ns.Scroll:case ns.Spinner:return!1}}function MGe(t){var e;return((e=t.message.metadata)==null?void 0:e.message_source)==="apple"}function C0(t){var s,n;const e=(n=(s=t.message.metadata)==null?void 0:s._cite_metadata)==null?void 0:n.metadata_list[0];return e!=null&&e.type!=="file"?e.url:null}function NGe(t){return t.filter(e=>e.author.role===ot.Tool)}var TP;const AGe=Mt.p(TP||(TP=St(["first:mt-0 my-1.5 h-8 flex items-center ltr:me-auto rtl:ms-auto empty:hidden\n",""])),({$isError:t})=>t?"text-token-text-error":"text-token-text-secondary"),m3={aha_sync_connector:"Aha!",asana_sync_connector:"Asana",azure_devops_sync_connector:"Azure Boards",basecamp_sync_connector:"Basecamp",google_drive:"Google Drive",sharepoint:"SharePoint",slack:"Slack",github:"GitHub",clickup_sync_connector:"ClickUp",dropbox_sync_connector:"Dropbox",box_sync_connector:"Box",linear_sync_connector:"Linear",intercom_sync_connector:"Intercom",notion_sync_connector:"Notion",confluence_sync_connector:"Confluence",jira_sync_connector:"Jira",jira_servicemanagement_sync_connector:"Jira Service",hubspot_sync_connector:"HubSpot",salesforce_sync_connector:"Salesforce",front_sync_connector:"Front",gitlab_sync_connector:"GitLab Issues",gorgias_sync_connector:"Gorgias",helpscout_sync_connector:"Help Scout",ironclad_sync_connector:"Ironclad",pipedrive_sync_connector:"Pipedrive",shortcut_sync_connector:"Shortcut",teamwork_sync_connector:"Teamwork.com",zendesk_sync_connector:"Zendesk",zoho_sync_connector:"Zoho",zoho_desk_sync_connector:"Zoho Desk",slurm_sharepoint:"SharePoint",slurm_linear:"Linear",slurm_box:"Box",slurm_dropbox:"Dropbox",slurm_gmail:"Gmail",slurm_google_drive:"Google Drive",slurm_notion:"Notion",slurm_hubspot:"HubSpot"},nq={aha_sync_connector:F6,asana_sync_connector:D6,azure_devops_sync_connector:L6,basecamp_sync_connector:A6,google_drive:$n,sharepoint:xc,slack:nx,github:ff,clickup_sync_connector:O6,dropbox_sync_connector:uc,box_sync_connector:Kv,linear_sync_connector:Yv,intercom_sync_connector:B6,notion_sync_connector:cc,confluence_sync_connector:p9,jira_sync_connector:m9,jira_servicemanagement_sync_connector:Oee,hubspot_sync_connector:sd,salesforce_sync_connector:Ree,front_sync_connector:Pee,gitlab_sync_connector:R6,gorgias_sync_connector:jee,helpscout_sync_connector:P6,ironclad_sync_connector:Iee,pipedrive_sync_connector:Aee,shortcut_sync_connector:Nee,teamwork_sync_connector:j6,zendesk_sync_connector:I6,zoho_sync_connector:Q3,zoho_desk_sync_connector:Q3,slurm_sharepoint:xc,slurm_linear:Yv,slurm_box:Kv,slurm_dropbox:uc,slurm_gmail:Gr,slurm_google_drive:$n,slurm_notion:cc,slurm_hubspot:sd},oq=({messages:t})=>[...t.filter(Lee).reduce((n,o)=>{var a,i;return(i=(a=o.metadata)==null?void 0:a.retrieval_search_sources)==null||i.forEach(l=>{(l.product_type==="contextual_answers"||l.product_type==="slurm")&&l.source_name in m3&&n.add(l.source_name)}),n},new Set)],aq=({contextualAnswerSources:t,intl:e})=>{const s=t.map(a=>{var i;return(i=m3[a])!=null?i:a}).filter(Boolean),n=t.map(a=>{var l;const i=(l=nq[a])!=null?l:IE;return r.jsx(i,{className:"icon-sm"},a)}).filter(Boolean),o=t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:s[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:s[0],source2:s[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:s[0],source2:s[1]});return t.length>0?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center gap-1",children:n}),o]}):void 0},cmt=Object.freeze(Object.defineProperty({__proto__:null,BrowsingMessage:_Ge,CA_SOURCE_TO_ICON_MAP:nq,CA_SOURCE_TO_TEXT_MAP:m3,getCASources:oq,getContextualAnswerDisplayText:aq,getVisitedUrl:C0},Symbol.toStringTag,{value:"Module"})),IGe=/^(\d+)([^]*)([^]+)?$/,jGe=["Citation Marker","Content Snippet","Content source","File created at","File last modified at","Mclick Target","Title"];function umt(t){const e=[];if(!t||typeof t!="object")return null;if(!Object.hasOwn(t,"results"))return null;const s=t.results;if(!Array.isArray(s))return null;const n=s.map(zj);for(const a of n){if(a==null)return null;e.push(a)}let o;if(Object.hasOwn(t,"debug_info")){const a=t.debug_info;if(!a||typeof a!="object"||!Object.hasOwn(a,"retrieval_results")||!Array.isArray(a.retrieval_results))return null;const i=a.retrieval_results;o={retrieval_results:[]};for(const l of i){if(!l||typeof l!="object"||typeof l.query!="string"||!Array.isArray(l.results))return null;const c=l.query,u=l.results.map(zj),d=[];for(const f of u){if(!f)return null;d.push(f)}o.retrieval_results.push({query:c,results:d})}}return{results:e,debug_info:o}}function zj(t){const e={};if(!t||typeof t!="object")return null;for(const[s,n]of Object.entries(t))s==="score"&&typeof n=="number"?e.score=n:["document_id","content","title","created_at","updated_at","file_created_at","file_modified_at","document_chunk_id","cloud_doc_url","document_source"].includes(s)&&(n==null||typeof n=="string")&&(e[s]=n!=null?n:void 0);return e.document_id==null||e.content==null?null:U(T({},e),{document_id:e.document_id,content:e.content})}function PGe(t){var i;if(!t.startsWith("# "))return null;const e=t.slice(2),s=IGe.exec(e);if(!s||s.length<3)return null;const n=parseInt(s[1],10),o=s[2],a=((i=s[3])==null?void 0:i.slice(1))||void 0;return{resultNum:n,title:o,documentId:a}}function rq(t,e){var i,l;const s=[];let n=null,o="";const a=t.split("\n");a.length>0&&a[a.length-1].startsWith("Visible: ")&&(o=(i=a.pop())!=null?i:"");for(const c of a){const u=c.trim(),d=PGe(u);if(d){const{resultNum:f,documentId:m,title:p}=d;n&&s.push(n),n={resultNum:f,title:(l=p||m)!=null?l:"",documentId:m,contents:"",metadata:{}}}else if(n)if(n.contents)n.contents+="\n".concat(c);else{let f=!1;for(const m of jGe){const p="".concat(m,":");if(u.startsWith(p)){n.metadata[m]=u.slice(p.length),f=!0;break}}f||(n.contents=c)}}if(n&&s.push(n),e)for(let c=0;c<s.length;c++)s[c].metadata.cloud_doc_url?s[c].cloudDocUrl=String(s[c].metadata.cloud_doc_url):c<e.length&&(s[c].cloudDocUrl=e[c]);return{visibilityLine:o,chunks:s}}function dmt(t){const e=t.content;switch(e.content_type){case bt.Text:return e.parts.join();case bt.ExecutionOutput:case bt.SystemError:case bt.Code:case bt.SystemMessage:case bt.TetherQuote:case bt.TetherBrowsingCode:return e.text;case bt.TetherBrowsingDisplay:return e.result;case bt.SonicWebpage:return e.text;case bt.UserEditableContext:case bt.ModelEditableContext:case bt.Error:return null;case bt.MultimodalText:return Wj(e.parts);case bt.SystemContent:case bt.DeveloperContent:return e.instructions==null?null:typeof e.instructions=="string"?e.instructions:Wj(e.instructions);case bt.StructuredThoughts:case bt.ReasoningRecap:return null;case bt.ComputerOutput:return null;case bt.SuperWidget:return null;case bt.CitableCodeOutput:return e.output_str}}function Wj(t){return t.filter(e=>typeof e=="string").join()}function fmt(t){var n;const e=t.trim().split("/").filter(o=>o.length>0);if(!e.length)return null;const s=e[0].trim();return s?{connectorName:s==="uploaded_files:"?"uploaded files":s,Icon:(n=ET(s))!=null?n:Na}:null}const RGe=250,OGe=700;function mmt(t){"use forget";var xe,ce,we,ge;const e=F.c(61),{handleShowRetrievalResults:s,clientThreadId:n,turnIndex:o,className:a,responseComplete:i}=t,l=G();let c;e[0]!==o?(c=Ae=>Se.getConversationTurnAtIndex(Ae,o).messages,e[0]=o,e[1]=c):c=e[1];const u=Qe(n,c);let d;e[2]!==n||e[3]!==l?(d=()=>Cs(Et(l,n)),e[2]=n,e[3]=l,e[4]=d):d=e[4];const f=oe(d),m=f3(f);let p;e[5]!==n||e[6]!==i||e[7]!==o?(p={clientThreadId:n,turnIndex:o,responseComplete:i},e[5]=n,e[6]=i,e[7]=o,e[8]=p):p=e[8];const g=p;let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=function(Ue){var Me;const Ie=new Map;for(const te of Ue){const Q=((Me=te.name)!=null?Me:"").trim().toLowerCase();Ie.set(Q,te)}return Ie.size<3?Ue:Array.from(Ie.values())},e[9]=h):h=e[9];const _=h;let b;e[10]!==l||e[11]!==m?(b=()=>{if(m)return j_(l,{skipLogos:!1})},e[10]=l,e[11]=m,e[12]=b):b=e[12];const y=oe(b);let v;e:{if(!m){let Ue;e[13]===Symbol.for("react.memo_cache_sentinel")?(Ue=[],e[13]=Ue):Ue=e[13],v=Ue;break e}let Ae;if(e[14]!==y||e[15]!==u){const Ue=new Map,Ie=new Set;for(const Me of u)if(Me.author.role===ot.Tool&&Me.author.name==="api_tool.call_tool"&&Me.content.content_type===bt.MultimodalText&&((xe=Me.metadata)==null?void 0:xe.api_tool_type)==="glaux"){const te=(ce=Me.metadata)==null?void 0:ce.citation_metadata,Q=te==null?void 0:te.id;if(!te||!Q||!te.url)continue;const ie=typeof(te==null?void 0:te.__connector_id)=="string"?te.__connector_id:void 0,{Icon:_e,appName:ye}=U2({connectorId:ie,cloud_doc_url:te.url,availableConnectors:y}),Re={id:Q,Icon:_e,appName:ye,name:te.title,cloud_doc_url:te.url,connectorId:ie};Ue.set(Q,Re)}else if(qE(Me)){const te=rq(Me.content.result),Q=(ge=(we=Me.metadata)==null?void 0:we.cloud_doc_urls)!=null?ge:[];te.chunks.forEach((ie,_e)=>{if(!ie.documentId||Ie.has(ie.documentId))return;let ye;if(ie.metadata.cloud_doc_url)ye=ie.metadata.cloud_doc_url.toString();else if(_e<Q.length)ye=Q[_e];else if(ie.documentId.endsWith("--google")){const ze=ie.documentId.split("--")[1];ye="https://drive.google.com/file/d/".concat(ze)}if(!ye)return;Ie.add(ie.documentId);const{Icon:Re,appName:Ve}=U2({cloud_doc_url:ye});Ue.set(ie.documentId,{id:ie.documentId,name:ie.title,cloud_doc_url:ye,Icon:Re,appName:Ve})})}Ae=Array.from(Ue.values()).filter(UGe),e[14]=y,e[15]=u,e[16]=Ae}else Ae=e[16];v=Ae}const S=v;let C;if(e[17]!==S){const Ae=new Map;for(const Ue of S)Ue.Icon&&Ae.set(Ue.appName,Ue.Icon);C=Array.from(Ae.values()).slice(0,3),e[17]=S,e[18]=C}else C=e[18];const w=C,k=x.useRef(!1);let E;e[19]!==g||e[20]!==S.length?(E=()=>{k.current||S.length>0&&(k.current=!0,B.logEvent("File Sources Carousel Shown",g))},e[19]=g,e[20]=S.length,e[21]=E):E=e[21];let M;e[22]!==g||e[23]!==S?(M=[S,g],e[22]=g,e[23]=S,e[24]=M):M=e[24],x.useEffect(E,M);let N;e[25]!==S?(N=_(S),e[25]=S,e[26]=N):N=e[26];const A=N,[I,P]=x.useState(0),[R,O]=x.useState(!1);let L;e[27]===Symbol.for("react.memo_cache_sentinel")?(L=[],e[27]=L):L=e[27];const D=x.useRef(L);let H;e[28]!==A?(H=A.map(BGe).join("|"),e[28]=A,e[29]=H):H=e[29];const V=H,q=x.useRef(0);let W,$;e[30]!==I?(W=()=>{q.current=I},$=[I],e[30]=I,e[31]=W,e[32]=$):(W=e[31],$=e[32]),x.useEffect(W,$);const Z=x.useRef(!1);let K,Y;e[33]!==R?(K=()=>{Z.current=R},Y=[R],e[33]=R,e[34]=K,e[35]=Y):(K=e[34],Y=e[35]),x.useEffect(K,Y);let ae;e[36]!==A.length||e[37]!==S.length?(ae=()=>{if(D.current.forEach(FGe),D.current=[],A.length===0){x.startTransition(()=>{O(!1),P(0)});return}const Ae=Math.min(q.current,A.length,3),Ue=Ae>0?Ae:Math.min(1,A.length);x.startTransition(()=>{P(Ue),S.length<=3&&O(!1)});const Ie=Math.min(3,A.length);for(let Me=Ue;Me<Ie;Me=Me+1,Me){const te=window.setTimeout(()=>{P(Q=>Math.max(Q,Me+1))},RGe*Me);D.current.push(te)}if(S.length>3&&!Z.current){const Me=window.setTimeout(()=>O(!0),OGe);D.current.push(Me)}return()=>{D.current.forEach(DGe),D.current=[]}},e[36]=A.length,e[37]=S.length,e[38]=ae):ae=e[38];let se;e[39]!==V||e[40]!==A.length||e[41]!==S.length?(se=[V,A.length,S.length],e[39]=V,e[40]=A.length,e[41]=S.length,e[42]=se):se=e[42],x.useEffect(ae,se);const ee=Math.min(I,A.length),re=R&&S.length>3;if(S.length===0)return null;let he;e[43]!==a?(he=z("flex w-full flex-row gap-2",a),e[43]=a,e[44]=he):he=e[44];let fe;e[45]===Symbol.for("react.memo_cache_sentinel")?(fe=z("flex w-full flex-1 transform-gpu flex-row justify-start gap-2"),e[45]=fe):fe=e[45];let pe;e[46]!==A||e[47]!==ee?(pe=A.slice(0,ee).map(LGe),e[46]=A,e[47]=ee,e[48]=pe):pe=e[48];let le;e[49]!==g||e[50]!==s||e[51]!==w||e[52]!==S.length||e[53]!==re?(le=re&&r.jsx(HGe,{overflowIcons:w,count:S.length,onClick:()=>{B.logEvent("File Sources Carousel Clicked",g),s()}}),e[49]=g,e[50]=s,e[51]=w,e[52]=S.length,e[53]=re,e[54]=le):le=e[54];let ve;e[55]!==pe||e[56]!==le?(ve=r.jsxs("div",{className:fe,children:[pe,le]}),e[55]=pe,e[56]=le,e[57]=ve):ve=e[57];let Te;return e[58]!==he||e[59]!==ve?(Te=r.jsx("div",{className:he,children:ve}),e[58]=he,e[59]=ve,e[60]=Te):Te=e[60],Te}function LGe(t){return r.jsx($Ge,{item:t},t.id)}function DGe(t){return window.clearTimeout(t)}function FGe(t){return window.clearTimeout(t)}function BGe(t){return t.id}function UGe(t){return!!t.cloud_doc_url}const $Ge=x.memo(function(e){"use forget";const s=F.c(15),{item:n}=e;if(!n)return null;let o,a,i;s[0]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:0,x:6},a={opacity:1,x:0},i={type:"spring",stiffness:180,damping:26,mass:.8},s[0]=o,s[1]=a,s[2]=i):(o=s[0],a=s[1],i=s[2]);const l=n.cloud_doc_url;let c;s[3]===Symbol.for("react.memo_cache_sentinel")?(c=z("block h-[64px] min-w-0 flex-1 basis-0","corner-superellipse/1.1 relative flex flex-col gap-1 rounded-2xl px-4 py-3","border-token-border-default border","bg-token-bg-primary","hover:bg-token-bg-tertiary cursor-pointer"),s[3]=c):c=s[3];const u=n.Icon?n.Icon:null;let d;s[4]!==n.appName?(d=r.jsx("div",{className:"text-token-text-secondary line-clamp-1 text-xs",children:n.appName}),s[4]=n.appName,s[5]=d):d=s[5];let f;s[6]!==u||s[7]!==d?(f=r.jsxs("div",{className:"flex items-center gap-1",children:[u,d]}),s[6]=u,s[7]=d,s[8]=f):f=s[8];let m;s[9]!==n.name?(m=r.jsx("div",{className:"text-token-text-primary line-clamp-1 truncate text-sm",children:n.name}),s[9]=n.name,s[10]=m):m=s[10];let p;return s[11]!==n.cloud_doc_url||s[12]!==f||s[13]!==m?(p=r.jsxs(gt.a,{initial:o,animate:a,transition:i,href:l,target:"_blank",rel:"noreferrer",className:c,children:[f,m]}),s[11]=n.cloud_doc_url,s[12]=f,s[13]=m,s[14]=p):p=s[14],p}),HGe=x.memo(function(e){"use forget";const s=F.c(15),{overflowIcons:n,count:o,onClick:a}=e;let i,l,c,u;s[0]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:0,x:6},l={opacity:1,x:0},c={type:"spring",stiffness:180,damping:26,mass:.8},u={willChange:"transform, opacity"},s[0]=i,s[1]=l,s[2]=c,s[3]=u):(i=s[0],l=s[1],c=s[2],u=s[3]);let d;s[4]===Symbol.for("react.memo_cache_sentinel")?(d=Array.from({length:3}),s[4]=d):d=s[4];let f;s[5]!==n?(f=r.jsx("div",{className:"flex flex-row gap-1",children:d.map((h,_)=>{const b=n[_];return r.jsx("div",{children:b||r.jsx("div",{className:"icon-sm rounded-full object-cover"})},_)})}),s[5]=n,s[6]=f):f=s[6];let m;s[7]!==o?(m=r.jsx("div",{className:"text-token-text-primary text-start text-sm",children:r.jsx(j,{id:"aQJYKd",defaultMessage:"{count} {count, plural, one {source} other {sources}}",values:{count:o}})}),s[7]=o,s[8]=m):m=s[8];let p;s[9]!==f||s[10]!==m?(p=r.jsxs("div",{className:"flex h-full flex-col justify-between",children:[f,m]}),s[9]=f,s[10]=m,s[11]=p):p=s[11];let g;return s[12]!==a||s[13]!==p?(g=r.jsx(gt.button,{initial:i,animate:l,transition:c,style:u,className:"bg-token-bg-primary hover:bg-token-bg-tertiary border-token-border-default flex h-[64px] min-w-[110px] shrink-0 flex-col justify-between rounded-2xl border px-4 py-3",onClick:a,children:p}),s[12]=a,s[13]=p,s[14]=g):g=s[14],g}),GGe=new Map,Pm=(t,e,s)=>{!e||t.has(e)||t.set(e,{url:e,connectorId:s})},VGe=t=>{const e=new Map;return t.forEach(s=>{var n,o;if(s.type==="file"){Pm(e,(o=s.cloud_doc_url)!=null?o:(n=s.extra)==null?void 0:n.cloud_doc_url);return}s.type==="file_navlist"&&s.items.forEach(a=>{Pm(e,a.cloud_doc_url)})}),e},zGe=t=>{var s,n,o,a,i,l;const e=new Map;for(const c of t){if(qE(c)){const u=rq(c.content.result),d=(n=(s=c.metadata)==null?void 0:s.cloud_doc_urls)!=null?n:[],f=u.chunks;for(let m=0;m<f.length;m++){const p=f[m];if(!p.documentId)continue;if(m<d.length){Pm(e,d[m]);continue}const g=p.documentId.endsWith("--google")?p.documentId.split("--")[1]:void 0,h=(o=p.metadata.cloud_doc_url)!=null?o:g?"https://drive.google.com/file/d/".concat(g):void 0;Pm(e,h==null?void 0:h.toString())}break}if(c.author.role===ot.Tool&&c.author.name==="api_tool.call_tool"&&c.content.content_type===bt.MultimodalText&&((a=c.metadata)==null?void 0:a.api_tool_type)==="glaux"){const u=(i=c.metadata)==null?void 0:i.citation_metadata;if(!(u!=null&&u.url))continue;Pm(e,u.url,(l=u.__connector_id)!=null?l:"")}}return e},WGe=(t,e)=>{if(e.size===0)return t;if(t.size===0)return e;const s=new Map(t);for(const[n,o]of e.entries())s.has(n)||s.set(n,o);return s},qGe=({urls:t,availableConnectors:e,isBetaMedicalRetrieval:s})=>{if(t.size===0)return new Set;const n=new Map;for(const[o,{connectorId:a}]of t.entries()){const{appName:i,Icon:l}=U2({connectorId:a,cloud_doc_url:o,availableConnectors:e});if(l?n.set(i,r.jsx("div",{className:"icon-sm",children:l})):s&&o.length>0?n.set(o,r.jsx(Kn,{url:o,className:"icon-sm object-cover",size:32,minSize:20,fallback:r.jsx(Na,{className:"icon-sm"})})):n.set("connected-apps",r.jsx(Na,{className:"icon-sm"})),n.size>2)break}return new Set(Array.from(n.values()))};function pmt(t){"use forget";const e=F.c(41),{handleShowRetrievalResults:s,clientThreadId:n,turnIndex:o,responseComplete:a}=t,i=a===void 0?!1:a,l=G(),c=h_e();let u;e[0]!==o?(u=se=>[Se.getTurnContentReferences(se,o),Se.getConversationTurnAtIndex(se,o).messages],e[0]=o,e[1]=u):u=e[1];const[d,f]=Qe(n,u);let m;e[2]!==n||e[3]!==i||e[4]!==o?(m={turnIndex:o,clientThreadId:n,responseComplete:i},e[2]=n,e[3]=i,e[4]=o,e[5]=m):m=e[5];const p=m,g=x.useRef(!1);let h,_;e[6]!==p?(h=()=>{g.current||(g.current=!0,B.logEvent("File Sources Footer Shown",p))},_=[p],e[6]=p,e[7]=h,e[8]=_):(h=e[7],_=e[8]),x.useEffect(h,_);let b;e[9]!==p||e[10]!==s?(b=()=>{B.logEvent("File Sources Footer Clicked",p),s()},e[9]=p,e[10]=s,e[11]=b):b=e[11];const y=b;let v;e[12]!==n||e[13]!==l?(v=()=>Cs(Et(l,n)),e[12]=n,e[13]=l,e[14]=v):v=e[14];const S=oe(v),C=f3(S);let w;e[15]!==l||e[16]!==C?(w=()=>{if(C)return j_(l,{skipLogos:!1})},e[15]=l,e[16]=C,e[17]=w):w=e[17];const k=oe(w);let E;e[18]!==d?(E=VGe(d),e[18]=d,e[19]=E):E=e[19];const M=E;let N;e[20]!==f||e[21]!==i?(N=i?zGe(f):GGe,e[20]=f,e[21]=i,e[22]=N):N=e[22];const A=N;let I;e[23]!==M||e[24]!==A?(I=WGe(M,A),e[23]=M,e[24]=A,e[25]=I):I=e[25];const P=I;let R;e[26]!==l?(R=Ee(l,"1424158285"),e[26]=l,e[27]=R):R=e[27];const D=R===!0||!!c;let H;e[28]!==k||e[29]!==P||e[30]!==D?(H=qGe({urls:P,availableConnectors:k,isBetaMedicalRetrieval:D}),e[28]=k,e[29]=P,e[30]=D,e[31]=H):H=e[31];const V=H,q=sn(Ss);if(V.size===0&&!i||q)return null;let W,$,Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(W={opacity:0},$={opacity:1},Z=z("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary corner-superellipse/1.1 mt-3 mb-2 flex w-fit items-center gap-1.5 rounded-xl border py-2","ps-3 pe-2.5"),e[32]=W,e[33]=$,e[34]=Z):(W=e[32],$=e[33],Z=e[34]);let K;e[35]!==V?(K=V.size>0&&r.jsx("div",{className:"flex flex-row-reverse gap-1",children:Array.from(V).reverse().map(KGe)}),e[35]=V,e[36]=K):K=e[36];let Y;e[37]===Symbol.for("react.memo_cache_sentinel")?(Y=r.jsx("div",{className:"text-token-text-secondary flex items-center gap-0.5 text-xs font-semibold",children:r.jsx(j,{id:"/48IOP",defaultMessage:"Sources"})}),e[37]=Y):Y=e[37];let ae;return e[38]!==y||e[39]!==K?(ae=r.jsx("div",{className:"relative h-[60px]",children:r.jsx(gt.div,{className:"absolute h-[60px]",initial:W,animate:$,children:r.jsxs("button",{className:Z,onClick:y,children:[K,Y]})})}),e[38]=y,e[39]=K,e[40]=ae):ae=e[40],ae}function KGe(t,e){return r.jsx(gt.div,{className:z("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden","group-hover/footnote:border-token-main-surface-secondary","relative"),initial:{opacity:0},animate:{opacity:1},children:t},e)}var EP;const gmt=Mt.header(EP||(EP=St(["draggable no-draggable-children sticky top-0 p-2 touch:p-2.5 flex items-center justify-between z-20 h-header-height bg-token-main-surface-primary"]))),hmt=128;function _mt(t){var l;const i=t,{tooltip:e,className:s,testId:n}=i,o=De(i,["tooltip","className","testId"]),a=r.jsx(ke,U(T({color:(l=t.color)!=null?l:"secondary",size:"medium"},o),{className:s,"data-testid":n}));return e!=null?r.jsx(It,{label:e,children:a}):a}function xmt({label:t,disabled:e=!1,tooltipText:s,value:n}){const o=x.useId();return r.jsx("div",{className:z("flex items-center gap-2",e?"opacity-50":""),children:r.jsx(It,{disabled:s==null,label:s,side:"right",triggerAs:null,children:r.jsxs("label",{htmlFor:o,className:"flex cursor-pointer items-center gap-1",children:[r.jsx(Cx,{id:o,value:n,disabled:e,className:"me-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:r.jsx(wx,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function ymt(t){return r.jsx(Lh,U(T({},t),{className:z("rounded-sm! checked:border-black! checked:bg-black! dark:border-gray-600 dark:bg-gray-700",t.className)}))}const bmt=({gizmo:t})=>r.jsx("div",{className:"text-token-text-tertiary pointer-events-none text-sm select-none","aria-hidden":!0,inert:!0,children:t.gizmo.display.name}),YGe=ue(Ce,"83d212",20,20);function w0(t){"use forget";const e=F.c(39),{domain:s,url:n,title:o,thumbnail_url:a,description:i,pub_date:l,subscript:c,theme:u,thumbnailOverlay:d,ThumbnailErrorIcon:f,descriptionClassName:m,onLogClick:p}=t,g=u===void 0?"default":u,h=f===void 0?A9:f,_=m===void 0?"line-clamp-2":m,b=ne(),y=x.useRef(null),[v,S]=x.useState("loading"),[C,w]=x.useState("loading");let k,E;e[0]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{setTimeout(()=>{w(QGe)},5e3)},E=[],e[0]=k,e[1]=E):(k=e[0],E=e[1]),x.useEffect(k,E);const M=!i&&"min-h-[96px]";let N;e[2]!==M?(N=z("hover:bg-token-interactive-bg-secondary-hover @w-sm/main:px-4 flex w-full justify-between gap-6 rounded-xl px-2 py-2.5",M),e[2]=M,e[3]=N):N=e[3];let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=q=>{y.current={x:q.clientX,y:q.clientY}},e[4]=A):A=e[4];let I;e[5]!==p?(I=q=>{if(y.current){const W=q.clientX-y.current.x,$=q.clientY-y.current.y;if(Math.abs(W)>=4||Math.abs($)>=4){q.preventDefault(),y.current=null;return}}y.current=null,p==null||p()},e[5]=p,e[6]=I):I=e[6];let P;e[7]!==s||e[8]!==C||e[9]!==g||e[10]!==n?(P=g==="default"&&r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:z("border-token-border-light border-thin relative h-[28px] w-[28px] shrink-0 self-center overflow-hidden rounded-lg p-1.25",C==="loading"&&"loading-results-shimmer"),children:[r.jsx("div",{className:z("absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat opacity-30 dark:opacity-20",C==="loaded"&&"blur-md",C==="error"&&"bg-token-bg-tertiary"),children:r.jsx(Kn,{url:n,size:256,minSize:32,containerClassName:z(C!=="loaded"&&"hidden"),className:"h-10 w-10"})}),r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[r.jsx(Kn,{url:n,size:128,minSize:32,containerClassName:z("overflow-hidden rounded-md",C!=="loaded"&&"hidden"),className:"icon-sm h-4 w-4",onLoad:()=>w("loaded"),onError:()=>w("error")}),C==="error"&&r.jsx(YGe,{className:"icon-md text-token-text-tertiary"})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"line-clamp-1 text-sm [overflow-wrap:anywhere] select-text",children:s}),r.jsx("span",{className:"text-token-text-secondary mt-0.5 line-clamp-1 align-top text-xs [overflow-wrap:anywhere] select-text",children:JGe(n)})]})]}),e[7]=s,e[8]=C,e[9]=g,e[10]=n,e[11]=P):P=e[11];let R;e[12]!==g||e[13]!==o?(R=o&&r.jsx("span",{className:z("mt-2.5 text-base font-medium [overflow-wrap:anywhere] text-[var(--interactive-label-accent-default)] select-text",g==="default"&&"line-clamp-2",g==="sub-result"&&"line-clamp-1"),children:o}),e[12]=g,e[13]=o,e[14]=R):R=e[14];let O;e[15]!==i||e[16]!==_||e[17]!==b||e[18]!==l?(O=(i!=null?i:l)&&r.jsxs("div",{className:z("text-token-text-secondary mt-1 line-clamp-2 w-full text-sm font-normal [overflow-wrap:anywhere] select-text",_),children:[r.jsx("span",{className:"text-token-text-tertiary",children:l&&r.jsxs(r.Fragment,{children:[gO(b,new Date(l)),i&&r.jsxs(r.Fragment,{children:[r.jsx(U4,{}),"",r.jsx(U4,{})]})]})}),i]}),e[15]=i,e[16]=_,e[17]=b,e[18]=l,e[19]=O):O=e[19];let L;e[20]!==c?(L=c&&r.jsx("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 text-sm select-text",children:c}),e[20]=c,e[21]=L):L=e[21];let D;e[22]!==P||e[23]!==R||e[24]!==O||e[25]!==L?(D=r.jsxs("div",{className:"flex flex-col overflow-hidden",children:[P,R,O,L]}),e[22]=P,e[23]=R,e[24]=O,e[25]=L,e[26]=D):D=e[26];let H;e[27]!==h||e[28]!==g||e[29]!==d||e[30]!==v||e[31]!==a?(H=a&&g==="default"&&r.jsx("div",{className:"self-center",children:r.jsxs("div",{className:"relative ms-auto block aspect-video min-h-[144px] w-[222px] min-w-0 overflow-hidden rounded-xl",children:[a&&r.jsx("img",{src:a,alt:"",className:z("absolute inset-0 h-full w-full object-cover opacity-0",v==="loaded"&&"opacity-100"),loading:"lazy",onLoad:()=>S("loaded"),onError:()=>S("error")}),r.jsx("div",{className:z("loading-results-shimmer absolute inset-0",{hidden:v!=="loading"})}),r.jsx("div",{className:z("bg-token-bg-secondary absolute inset-0 flex items-center justify-center",{hidden:v!=="error"}),children:r.jsx(h,{className:"icon-2xl opacity-15"})}),d]})}),e[27]=h,e[28]=g,e[29]=d,e[30]=v,e[31]=a,e[32]=H):H=e[32];let V;return e[33]!==D||e[34]!==H||e[35]!==N||e[36]!==I||e[37]!==n?(V=r.jsxs(qn,{href:n,target:"_self",className:N,draggable:!1,onMouseDown:A,onClick:I,children:[D,H]}),e[33]=D,e[34]=H,e[35]=N,e[36]=I,e[37]=n,e[38]=V):V=e[38],V}function QGe(t){return t==="loading"?"error":t}function JGe(t){let e;try{e=decodeURIComponent(t)}catch(o){console.warn("Unable to decode URL",{url:t,error:o}),e=t}const s=e.replace(/\/$/,"");return s.match("youtube.com/watch")?s:s.replace(/\?.*$/,"")}function ZGe(t){return t.find(e=>{var s;return!!((s=e.metadata)!=null&&s.crisis_helpline_message)})}function XGe(t){"use forget";const e=F.c(11),{message:s,className:n}=t,o=s.metadata.crisis_helpline_message;let a;e[0]!==n?(a=z("shadow-short flex flex-col rounded-lg p-4",n),e[0]=n,e[1]=a):a=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i={a:tVe},e[2]=i):i=e[2];let l;e[3]!==o.text?(l=r.jsx(go,{className:"text-sm",componentOverrides:i,children:o.text}),e[3]=o.text,e[4]=l):l=e[4];let c;e[5]!==o.links?(c=o.links.length>0&&r.jsx("div",{className:"flex flex-col gap-2",children:o.links.map(eVe)}),e[5]=o.links,e[6]=c):c=e[6];let u;return e[7]!==a||e[8]!==l||e[9]!==c?(u=r.jsxs("div",{className:a,children:[l,c]}),e[7]=a,e[8]=l,e[9]=c,e[10]=u):u=e[10],u}function eVe(t){return r.jsx("div",{className:"rounded-lg bg-[var(--bg-quaternary)] py-1",children:r.jsx(w0,{url:t.url,domain:t.domain,title:t.title,description:t.description})},t.url)}function tVe(t){const o=t,{node:e,children:s}=o,n=De(o,["node","children"]);return r.jsx("a",U(T({},n),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:s}))}const vmt=({message:t,clientThreadId:e,isUserTurn:s})=>{var i,l,c,u;const n=Qe(e,d=>{var f,m;return t&&((f=t.metadata)==null?void 0:f.async_task_id)&&Se.hasContinuedFromAsyncTask(d,t==null?void 0:t.id,(m=t==null?void 0:t.metadata)==null?void 0:m.async_task_id)});if(!t||!(n||s&&((i=t.metadata)!=null&&i.async_task_title)))return null;const o=(l=t.metadata)==null?void 0:l.async_task_original_message_id,a=()=>{o&&(nt(e,d=>{d.scrollToMessageId=o}),requestAnimationFrame(()=>{nt(e,d=>{d.scrollToMessageId=void 0})}))};return r.jsx(bCe,{icon:r.jsx(Vn,{className:"icon"}),label:(u=(c=t.metadata)==null?void 0:c.async_task_title)!=null?u:"",as:"button",onClick:a,isUserTurn:s,className:"mb-3"})},sVe=({icons:t,size:e,stackOrder:s="bottom"})=>r.jsx("div",{className:"flex items-center",children:t.map((n,o)=>r.jsx("div",{className:"border-token-border-default box-content rounded-full border border-1 bg-white",style:{marginInlineStart:o===0?0:-e/2,zIndex:s==="bottom"?t.length-o:void 0,width:e,height:e,padding:e/4-1},children:n},o))});function Smt({clientThreadId:t,connectorToUpsell:e,analyticsMetadata:s}){const n=G(),o=xn(n),a=dx.useIsEnabled(t)&&!o,i=fs(),l=!!(i!=null&&i.isAdminOfAccount()||i!=null&&i.isOwnerOfAccount()),c=!!(i!=null&&i.isPersonalAccount()),u=l&&!c,d=()=>{u&&e===es.GDRIVE?window.location.href="/admin/ca":e==="general"?window.location.hash="#settings/".concat(hn.Connectors):window.location.hash="#settings/".concat(hn.Connectors,"?connector=").concat(us[e===es.GDRIVE?je.GDRIVE_ACTION_CONNECTOR:je.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(eo.ConversationFollowup)};let f;if(e==="general")f=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(sVe,{size:16,icons:[r.jsx($n,{width:16,height:16},"gdrive"),r.jsx(uc,{width:16,height:16},"dropbox"),r.jsx(ff,{width:16,height:16},"github")]}),r.jsx("div",{children:r.jsx(j,{id:"k3bYdS",defaultMessage:"<b>Connect apps</b> to find answers, summarize info, and get things done",values:{b:m=>r.jsx("span",{className:"font-medium",children:m})}})})]});else{const m=e===es.GDRIVE?$n:xc;f=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(m,{className:"icon-sm inline"}),r.jsx("div",{children:r.jsx(j,{id:"m1IPsN",defaultMessage:"<b>Connect {app}</b> to ask questions about all your files",values:{b:p=>r.jsx("span",{className:"font-medium",children:p}),app:e===es.GDRIVE?"Google Drive":"SharePoint"}})})]})}return a?r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:r.jsx(gt.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:0*.03},exit:{opacity:0,translateY:4},children:r.jsxs(gt.button,{whileHover:"hover",className:z("bg-primary hover:bg-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:m=>{d(),B.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",U(T({},Fs(s)),{action:"click",connectorToUpsell:e}))},onMouseEnter:()=>{B.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",U(T({},Fs(s)),{action:"hover",connectorToUpsell:e}))},children:[r.jsx(gt.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(Vn,{className:"text-token-text-secondary icon"})}),f]})})})]}):null}const nVe=4;function iq({followups:t,analyticsMetadata:e}){const s=x.useRef(!1),n=au();x.useEffect(()=>{s.current||(s.current=!0,t.forEach((a,i)=>{B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(T({},Fs(e)),{action:"show",position:(i+1).toString(),followup_text:Go(a)}))}))},[t,e]);const o=t.slice(0,nVe);return r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:o.map((a,i,l)=>r.jsx(gt.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:i*.03},exit:{opacity:0,translateY:4},children:r.jsx(oVe,{followUp:a,onSelectingSuggestedReply:n,analyticsMetadata:e,position:i,visibleFollowups:l})},i))})}var MP;const lq=Mt.div(MP||(MP=St(["\n  h-[1px] opacity-45\n  ","\n"])),({$isSelected:t})=>t?"mx-2 bg-token-main-surface-secondary":"bg-token-border-default");function oVe({followUp:t,onSelectingSuggestedReply:e,analyticsMetadata:s,position:n,visibleFollowups:o}){const a=l=>{e(l,t,o,n),B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(T({},Fs(s)),{action:"click",position:(n+1).toString(),followup_text:Go(t)}))},i=()=>{B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(T({},Fs(s)),{action:"hover",position:(n+1).toString(),followup_text:Go(t)}))};return r.jsxs(gt.button,{whileHover:"hover",className:z("bg-token-main-surface-primary hover:bg-token-main-surface-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:a,onMouseEnter:i,children:[r.jsx(gt.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(Vn,{className:"text-token-text-secondary icon"})}),r.jsx("div",{className:"text-token-text-secondary pe-2 text-start text-sm",children:Go(t)})]})}const aVe=()=>r.jsx(vC,{size:"lg",lines:3,width:35,widthVariance:10,className:"w-full"}),rVe=19,iVe=4,lVe=8,cVe=2,uVe=f=>{var m=f,{as:t="div",logo:e,size:s="default",label:n,isBadge:o,isNew:a,isLauncher:i,isSelected:l=!1,tooltip:c,className:u}=m,d=De(m,["as","logo","size","label","isBadge","isNew","isLauncher","isSelected","tooltip","className"]);const p=ne(),g=s==="large"?rVe:lVe,h=s==="large"?iVe:cVe,_=r.jsx("div",{className:z("w-".concat(g," h-").concat(g," flex aspect-square items-center justify-center rounded-full border p-").concat(h),"border-transparent bg-white","dark:bg-token-main-surface-secondary"),children:r.jsx("div",{className:z("transition-[transform_--shadow-color] duration-[0.24s]",i&&!l&&"drop-shadow-[0_6px_4px_var(--shadow-color)] [--shadow-color:transparent] group-hover/app-icon:motion-safe:scale-[1.025] group-hover/app-icon:motion-safe:[--shadow-color:rgba(0,0,0,0.1)]"),children:e})}),b=t;return r.jsxs(b,U(T(T({className:z("group/app-icon can-hover:active:scale-[0.98] flex flex-col items-center gap-3 transition-transform duration-100 w-".concat(g),o?"scale-[0.9]":"",i?"cursor-pointer":"cursor-default","opacity-80 group-hover:opacity-100",u),onClick:async y=>{var v;y.persist(),await Promise.race([new Promise(S=>{y.target.addEventListener("transitionend",()=>{S()},{once:!0})}),new Promise(S=>{setTimeout(()=>S(),200)})]),(v=d.onClick)==null||v.call(d,y)}},t==="button"?{type:"button"}:{}),d),{children:[r.jsxs("div",{className:z("relative rounded-full transition-[transform_--shadow-color] duration-[0.24s]",o&&"border-token-border-default border",i&&"dark:border-token-border-default scale-[0.9] border border-black/[0.12] shadow-none group-hover/app-icon:motion-safe:shadow-[0px_4px_12px_rgba(0,0,0,0.08)]",i&&"group-hover/app-icon:motion-safe:scale-[0.91]"),children:[!i&&_,i&&r.jsx(It,{label:c,side:"top",children:_}),a&&r.jsx("div",{className:"text-token-text-primary absolute -start-1 -top-1 z-10 rounded-full bg-blue-500 px-1.5 py-1 text-[10px] font-bold uppercase",children:p.formatMessage({id:"kEZrwC",defaultMessage:"New"})})]}),n&&r.jsx("div",{className:z("text-token-text-secondary text-center text-[12px] leading-[17px]",l&&"text-blue-400",!i&&"w-20"),children:n})]}))},dVe=t=>{var s;return(s={[Ye.Search]:"Web Search",[Ye.Research]:"Research",[Ye.PictureV2]:"Draw Image",[Ye.Think]:"Think Harder"}[t])!=null?s:"Title"},VS=(t,e,s,n,o)=>{B.logEventWithStatsig("Capabilities Suggestion Action","chatgpt_capabilities_suggestion_action",U(T({},Fs(s)),{categoryId:e.categoryId,suggestionId:e.id,position:n,action:t,numSuggestions:String(o)}))},fVe=(t,e)=>{const s=x.useRef(!1);x.useEffect(()=>{s.current||(s.current=!0,t.forEach((n,o)=>{VS("show",n,e,o+1,t.length)}))},[t,e])},cq=({suggestions:t,analyticsMetadata:e,style:s="default"})=>{const n=au();return fVe(t,e),r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsxs(gt.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:a*.03},className:z("w-full flex-1",s==="compact"&&"flex-col"),children:[s==="compact"&&a>0&&r.jsx(lq,{$isSelected:!1}),r.jsx(mVe,{suggestion:o,onSelectingSuggestedReply:n,position:a+1,numSuggestions:t.length,analyticsMetadata:e,style:s})]},o.prompt))})},mVe=({suggestion:t,onSelectingSuggestedReply:e,analyticsMetadata:s,position:n,numSuggestions:o,style:a="default"})=>{const{setThreadSystemHintMode:i}=La(),l=G(),c=ct(l),u=yt();return r.jsx(gt.button,{onClick:d=>{if(VS("click",t,s,n,o),t.categoryId===Ye.Research)if(c!=null&&c.isFree()){an(u,"Suggested Capabilities Upsell");return}else i(t.categoryId,!0,s);e(d,t,[],0)},onMouseEnter:()=>{VS("hover",t,s,n,o)},className:z("hover:bg-token-main-surface-secondary flex w-full flex-1 items-start rounded-xl text-start transition-colors duration-300 ease-in-out",a==="default"&&"gap-4 p-2"),children:a==="compact"?r.jsx(pVe,{suggestion:t}):r.jsx(gVe,{suggestion:t})})},pVe=({suggestion:t})=>{var o;const e=G(),s=oe(()=>na(e)),n=x.useMemo(()=>t.categoryId==="ask"||s==null?void 0:s.find(a=>a.systemHint===t.categoryId),[s,t.categoryId]);return r.jsxs("div",{className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-5deg] group-hover:opacity-100",children:t.categoryId==="ask"?r.jsx(Vn,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"}):r.jsx(S1,{svgString:(o=n==null?void 0:n.logo)!=null?o:"",className:"text-token-text-secondary icon group-hover:text-token-interactive-label-accent-default"})}),r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:Go(t)})]})},gVe=({suggestion:{categoryId:t,imageUrl:e,description:s,title:n,ctaLabel:o,prompt:a}})=>{var u;const i=G(),l=oe(()=>na(i)),c=x.useMemo(()=>t==="ask"||l==null?void 0:l.find(d=>d.systemHint===t),[l,t]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-token-border-default bg-primary relative h-16 w-14 flex-shrink-0 rounded-lg border drop-shadow-xs transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-2deg]",children:[t===Ye.PictureV2?r.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-lg bg-cover",style:{backgroundImage:"url(".concat(e,")")},children:r.jsx(If,{className:"icon-xl mb-2 text-white"})}):r.jsxs("div",{className:"flex flex-col gap-1.5 p-2",children:[r.jsx("div",{className:"text-token-text-primary text-[5px] leading-tight font-semibold tracking-tighter",children:n!=null?n:dVe(t)}),r.jsx("div",{className:"flex flex-col gap-0.5",children:Array.from({length:10}).map((d,f)=>r.jsx("div",{className:"bg-token-border-heavy h-[1px] w-full rounded-full"},f))})]}),r.jsx("div",{className:"absolute -end-2 -bottom-2",children:r.jsx(uVe,{isBadge:!0,className:"opacity-100",logo:r.jsx(S1,{svgString:(u=c==null?void 0:c.logo)!=null?u:"",className:"icon"})})})]}),r.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[r.jsx("div",{className:"text-token-text-primary flex-grow",children:s!=null?s:a}),o&&r.jsxs("div",{className:"text-token-text-secondary flex items-center font-medium",children:[o,r.jsx(gt.div,{variants:{hover:{x:2}},initial:{x:0},transition:{duration:.1},children:r.jsx(Zr,{className:"icon-sm"})})]})]})]})},p3=t=>{var e,s,n,o,a,i;return{id:t.id,prompt:t.prompt,title:(e=t.title)!=null?e:void 0,description:(s=t.description)!=null?s:void 0,categoryId:(n=t.system_hint)!=null?n:t.category_id,type:it.Capabilities,imageUrl:(o=t.image_url)!=null?o:void 0,ctaLabel:(a=t.cta_label)!=null?a:void 0,modelOverride:(i=t.model_override)!=null?i:void 0}},hVe=({categoryId:t,shouldFetch:e,serverThreadId:s,lastMessageId:n})=>{var c;const{data:o,isLoading:a,error:i}=dt({queryKey:["capability_suggestions",t,n],queryFn:()=>{if(!s||!n)throw new Error("Server thread ID and last user message ID are required");return de.safePost("/conversation/experimental/suggest_capabilities",{requestBody:{conversation_id:s,message_id:n,system_hint:t,category_id:t}})},enabled:e&&!!s&&!!n});return{suggestions:(c=o==null?void 0:o.suggestions.map(p3))!=null?c:[],isLoading:a,error:i}},zS=(t,e,s,n)=>{B.logEventWithStatsig("Capabilities Tab Action","chatgpt_capabilities_tab_action",U(T({},Fs(s)),{tabId:e,position:n,action:t}))},_Ve=(t,e)=>{const s=x.useRef(!1);x.useEffect(()=>{s.current||(s.current=!0,t.forEach((n,o)=>{zS("show",n.value,e,o+1)}))},[t,e])},xVe=({clientThreadId:t,categorySuggestions:e,lastMessageId:s,analyticsMetadata:n,style:o="default"})=>{const a=e.map(({category_id:c,title:u,suggestions:d})=>{var f;return{value:c,message:u,suggestions:(f=d==null?void 0:d.map(p3))!=null?f:[]}}),[i,l]=x.useState(a[0].value);return _Ve(a,n),r.jsxs(Fee,{value:i,onValueChange:l,orientation:"horizontal",className:"flex w-full flex-col",children:[r.jsx(Bee,{className:"border-token-border-default relative flex w-full flex-row gap-6 border-b",children:a.map((c,u)=>r.jsx(bVe,{value:c.value,message:c.message,isActive:i===c.value,analyticsMetadata:n,position:u+1},c.value))}),a.map(c=>r.jsx(Uee,{value:c.value,children:r.jsx(yVe,{initialSuggestions:c.suggestions,clientThreadId:t,categoryId:c.value,isActive:i===c.value,lastMessageId:s,analyticsMetadata:n,style:o})},c.value))]})},yVe=({initialSuggestions:t,clientThreadId:e,categoryId:s,isActive:n,lastMessageId:o,analyticsMetadata:a,style:i="default"})=>{const l=Rt(e),c=n&&t.length===0,{suggestions:u,isLoading:d}=hVe({categoryId:s,shouldFetch:c,serverThreadId:l,lastMessageId:o}),f=c?u:t;return s==="ask"?d?r.jsx(aVe,{}):r.jsx(iq,{followups:f.map(m=>({type:it.Reply,text:m.prompt})),analyticsMetadata:a}):r.jsx("div",{className:"flex w-full flex-col gap-y-4 py-3 md:flex-row md:gap-x-4",children:d?r.jsxs(r.Fragment,{children:[r.jsx(qj,{}),r.jsx(qj,{})]}):r.jsx(cq,{suggestions:f,analyticsMetadata:a,style:i})})},bVe=({value:t,message:e,isActive:s,analyticsMetadata:n,position:o})=>r.jsxs($ee,{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-active:text-token-text-primary relative flex min-w-10 justify-center py-4 text-sm font-medium",value:t,onClick:()=>{zS("click",t,n,o)},onMouseEnter:()=>{zS("hover",t,n,o)},children:[r.jsx("div",{className:"truncate",children:e}),r.jsx(Ms,{children:s&&r.jsx(gt.div,{layoutId:"tab-underline",className:"bg-token-text-primary absolute start-0 end-0 bottom-0 h-0.5",transition:{type:"spring",stiffness:500,damping:30}})})]}),qj=()=>r.jsxs("div",{className:"flex flex-1 items-center gap-4 rounded-xl p-2",children:[r.jsx("div",{className:"bg-token-sidebar-surface-secondary dark:bg-token-border-default h-16 w-14 flex-shrink-0 rounded-lg"}),r.jsx("div",{className:"w-full flex-grow",children:r.jsx(vC,{lines:3,size:"sm"})})]}),vVe=({clientThreadId:t,categorySuggestions:e,lastMessageId:s,analyticsMetadata:n})=>{if(!e||e.length===0)return null;const o=e.length===1,a=e[0],i=a.suggestions.length>0?a.suggestions:void 0;return o&&i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-1 text-sm font-semibold",children:r.jsx(j,{id:"3UFIQc",defaultMessage:"Follow up"})}),r.jsx(cq,{suggestions:i.map(p3),analyticsMetadata:n,style:a.style})]}):r.jsx(xVe,{clientThreadId:t,categorySuggestions:e!=null?e:[],lastMessageId:s,analyticsMetadata:n})};function SVe(t=!1){const e=G(),s=Xe(e,"3692302894"),n={getCapabilitySuggestionsEnabled:Yu({layer:s,paramName:"capability_suggestions",defaultValue:!1}),getPrefetchCapabilitySuggestions:Yu({layer:s,paramName:"prefetch_capability_suggestions",defaultValue:!1})};return{capabilitySuggestionsEnabled:!t&&n.getCapabilitySuggestionsEnabled(),prefetchCapabilitySuggestions:!t&&n.getPrefetchCapabilitySuggestions()}}const CVe=(t,e,s,n,o)=>{B.logEventWithStatsig("Agent Suggestion Action","chatgpt_agent_suggestion_action",U(T({},Fs(s)),{capability:e.capability,position:n,action:t,numSuggestions:o}))},wVe=(t,e)=>{const s=x.useRef(!1);x.useEffect(()=>{s.current||(s.current=!0,t.forEach((n,o)=>{CVe("show",n,e,o+1,t.length)}))},[t,e])},kVe=({agentSuggestions:t,analyticsMetadata:e})=>(wVe(t,e),r.jsx(r.Fragment,{children:t.map((s,n)=>r.jsxs(gt.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:n*.03},className:z("w-full flex-1","flex-col"),children:[n>0&&r.jsx(lq,{$isSelected:!1}),r.jsx(TVe,{agentSuggestion:s,analyticsMetadata:e})]},s.prompt))})),TVe=t=>{"use forget";const e=F.c(14),{agentSuggestion:s}=t,n=pf();let o;e[0]!==s.capability?(o=EVe(s.capability),e[0]=s.capability,e[1]=o):o=e[1];const a=o,i=jo();let l;e[2]!==s.prompt||e[3]!==n||e[4]!==i?(l=()=>{const m=Ht(n);m.focus(),Co(m,s.prompt),i(Ye.Agent)},e[2]=s.prompt,e[3]=n,e[4]=i,e[5]=l):l=e[5];const c=l;let u;e[6]!==a?(u=r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:opacity-100",children:r.jsx(a,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"})}),e[6]=a,e[7]=u):u=e[7];let d;e[8]!==s.title?(d=r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:s.title}),e[8]=s.title,e[9]=d):d=e[9];let f;return e[10]!==c||e[11]!==u||e[12]!==d?(f=r.jsxs("div",{onClick:c,className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[u,d]}),e[10]=c,e[11]=u,e[12]=d,e[13]=f):f=e[13],f},Kj={action:sE,research:Vn,spreadsheet:Vn,presentation:Vn,default:Vn},EVe=t=>{var e;return(e=Kj[t])!=null?e:Kj.default};function Cmt({clientThreadId:t,followups:e,categorySuggestions:s,actionSuggestions:n,lastMessageId:o,analyticsMetadata:a,isTatertotFollowupsEnabled:i}){const l=G(),c=xn(l),u=dx.useIsEnabled(t)&&!c,{capabilitySuggestionsEnabled:d}=SVe(i),f=s&&s.length>0;return n&&n.length>0?r.jsx(kVe,{agentSuggestions:n,analyticsMetadata:a}):r.jsx(r.Fragment,{children:u&&(d?f&&r.jsx(vVe,{clientThreadId:t,lastMessageId:o,categorySuggestions:s,analyticsMetadata:a}):e.length>0&&r.jsx(MVe,{followups:e,analyticsMetadata:a}))})}function MVe({followups:t,analyticsMetadata:e}){return r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(iq,{followups:t,analyticsMetadata:e})]})}class wmt extends Lc()(()=>({isMultigenParagenVotingActive:!1})){setIsMultigenParagenVotingActive(e){this.setState({isMultigenParagenVotingActive:e})}static useIsMultigenParagenVotingActive(){return this.useState(e=>e.isMultigenParagenVotingActive)}}class uq extends Lc()(()=>({selectedIndex:0})){setSelectedIndex(e){this.setState({selectedIndex:e})}static useSelectedIndex(){return this.useState(e=>e.selectedIndex)}}function kmt(t){"use forget";const e=F.c(2),{children:s}=t;let n;return e[0]!==s?(n=r.jsx(uq.Provider,{store:NVe,children:s}),e[0]=s,e[1]=n):n=e[1],n}function NVe(){return new uq}const Tmt=t=>fE(t).some(e=>{var s;return!!((s=e.metadata)!=null&&s.chatgpt_sdk)}),AVe=ue(Ce,"b11823",20,20),dq=ue(Ce,"2126ae",20,20),IVe=ue(Ce,"cdfe73",20,20),fq=ue(Ce,"51753c",20,20),Wd=({icon:t,label:e,iconClassName:s,className:n,size:o="med",onClick:a,onSelect:i,onBeforeClick:l,selected:c=!1,disabled:u=!1,asMenuItem:d=!1,style:f,testId:m,trailing:p})=>{const g=d?J.Item:"button";return r.jsx(It,{label:e,disabled:!e||d,triggerAs:null,children:r.jsx(g,{className:z(!d&&"text-token-text-secondary hover:bg-token-bg-secondary rounded-lg",!d&&c&&"bg-token-bg-tertiary",n),"aria-label":e,"aria-pressed":c,onClick:a,onSelect:i,onPointerEnter:l,onTouchStart:l,onFocus:l,disabled:u,style:f,"data-testid":m,label:d?e:void 0,icon:d?t:void 0,trailing:d?p:void 0,children:typeof t=="function"&&!d&&r.jsx("span",{className:z("flex items-center justify-center","touch:w-10 h-8 w-8"),children:r.jsx(t,{className:s!=null?s:o==="small"?"icon-sm":"icon"})})})})};async function jVe(t,e,s,{unprocessed:n=!1}={}){var c;const o=[],a=[],i={},l=new Map;for(const u of t.messages){if(pq(u)){const d=(c=u.metadata)==null?void 0:c.content_references,f=xo(u,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(n)o.push(f);else{const{messageTextToClipboardContent:m}=await me(async()=>{const{messageTextToClipboardContent:g}=await import("./l9but48wvxtwnlrx.js");return{messageTextToClipboardContent:g}},__vite__mapDeps([81,3,1,4,73,46,47,25,26,24,27,22,28,49,23,50,21,74])),p=m(f,d);p["text/plain"]&&o.push(p["text/plain"]),p["text/html"]&&a.push(p["text/html"])}if(!n&&d)for(const m of d)m.type==="file"&&PVe(m)&&!l.has(m.id)&&l.set(m.id,m)}if(Hee(u)){const d=gr.getImageAssetPointers(u);if(d.length>0){const f=d[0];try{const m=Rt(s),{url:p}=await jl.fetch(e,{asset:f,conversationId:m!=null?m:void 0}),h=await(await fetch(p)).blob();["image/png","image/jpeg","image/webp"].includes(h.type)&&(i[h.type]=h)}catch(m){return Promise.reject()}}}}if(!n&&l.size>0){const u=Array.from(l.values()),d=u.map(RVe).filter(m=>!!m);if(d.length>0){const m=d.map((p,g)=>"".concat(g+1,". ").concat(p));o.push(["Medical References:",...m].join("\n"))}const f=u.map(OVe).filter(m=>!!m);f.length>0&&a.push("<section><p><strong>Medical References</strong></p><ol>".concat(f.join(""),"</ol></section>"))}return o.length>0&&(i["text/plain"]=o.join("\n\n")),a.length>0&&(i["text/html"]=a.join("\n\n")),i}function PVe(t){const e=t.medical_file_reference;return e!=null&&["journal_name","authors_display","publication_year","doi","journal_homepage_url"].some(s=>{const n=e==null?void 0:e[s];return n!=null&&String(n).trim()!==""&&String(n).toLowerCase()!=="none"})}function RVe(t){const e=mq(t);if(!e)return null;const{journalName:s,authorsDisplay:n,publicationYear:o,doi:a,url:i}=e,l=[];s&&l.push(s);const c=[];return n&&c.push(n),o&&c.push(o),c.length>0&&l.push(c.join(", ")),a&&l.push("DOI: ".concat(a)),i&&l.push("URL: ".concat(i)),l.join("  ")}function OVe(t){const e=mq(t);if(!e)return null;const{journalName:s,authorsDisplay:n,publicationYear:o,doi:a,url:i}=e,l=[];if(s&&l.push("<span>".concat(nm(s),"</span>")),n||o){const c=[];n&&c.push("<em>".concat(nm(n),"</em>")),o&&c.push("<span>".concat(nm(o),"</span>")),l.push(c.join(" "))}return a&&l.push("<span>DOI: ".concat(nm(a),"</span>")),i&&l.push("<span>URL: ".concat(nm(i),"</span>")),l.length===0?null:"<li>".concat(l.join("<br/>"),"</li>")}function mq(t){var s,n,o,a,i,l,c;const e=t.medical_file_reference;return!e||!e.journal_name&&!e.authors_display&&!e.publication_year&&!((s=e.doi)!=null?s:t.id)?null:{journalName:(n=e.journal_name)!=null?n:void 0,authorsDisplay:(o=e.authors_display)!=null?o:void 0,publicationYear:(a=e.publication_year)!=null?a:void 0,doi:(l=(i=e.doi)!=null?i:t.id)!=null?l:void 0,url:(c=t.cloud_doc_url)!=null?c:void 0}}function nm(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function pq(t){var e,s;return!((e=t.clientMetadata)!=null&&e.err)&&(t.author.role===ot.Assistant||t.author.role===ot.User)&&(t.author.role===ot.User||t.recipient==="all")&&!((s=t.metadata)!=null&&s.reasoning_status)}const LVe=({turn:t,clientThreadId:e})=>{const s=tH(e),n=ne();function o(){Zc.logButtonClick(Gx.EDIT_IN_CANVAS_MESSAGE);const a=DVe(t);s({textdocType:ni.DOCUMENT,content:a,createSource:tp.MESSAGE})}return r.jsx(Wd,{icon:xi,onClick:o,label:n.formatMessage({id:"EditInCanvas.tooltip",defaultMessage:"Edit in canvas"}),asMenuItem:!0})};function DVe(t){return t.messages.filter(e=>pq(e)&&e.author.role===ot.Assistant).map(e=>xo(e,{shouldGetTextFromContentReferences:!0,shouldGetVisibleText:!1})).filter(Boolean).join("\n\n")}const FVe=ue(Ce,"03583c",20,20);function BVe({clientThreadId:t,lastMessage:e,asMenuItem:s}){const[n,o]=x.useState(!1),a=ne(),i=x.useCallback(()=>{const c=Rt(t);if(!c)return;o(!0);const u="/branch/".concat(c,"/").concat(e.id);window.open(u,"_blank","noreferrer")},[t,e.id]),l=n?Yj.loading:Yj.branch;return r.jsx(Wd,{icon:n?Wn:FVe,label:a.formatMessage(l),onClick:i,disabled:n,asMenuItem:s,onSelect:c=>{c.preventDefault()}})}const Yj=Ne({branch:{id:"BranchTurnActionButton.branch",defaultMessage:"Branch in new chat"},loading:{id:"BranchTurnActionButton.loading",defaultMessage:"Loading"}}),gq=Pe(()=>me(()=>import("./ek2o44h7u21ea4tp.js"),__vite__mapDeps([426,1,3,4,373])).then(t=>t.VoicePlayButton));function Emt(t){"use forget";const e=F.c(24),{showPlayButton:s,showCanvasButton:n,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,messages:l,lastMessage:c,imageGenMessageId:u,turn:d,turnIndex:f,requestId:m,parentPromptId:p,showReportMessageButton:g,onReportMessage:h}=t,_=ne();let b;e[0]!==_?(b=_.formatMessage({id:"e/27r7",defaultMessage:"More actions"}),e[0]=_,e[1]=b):b=e[1];const y=b;if(!ut()||!(o&&!!c||s&&!!c||n||a||g||!1||!1))return null;let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(ra,{className:"icon"}),e[2]=S):S=e[2];let C;e[3]!==y?(C=r.jsx("button",{className:"text-token-text-secondary hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",onMouseOver:UVe,"aria-label":y,children:S}),e[3]=y,e[4]=C):C=e[4];let w;e[5]!==a||e[6]!==i||e[7]!==u||e[8]!==c||e[9]!==l||e[10]!==h||e[11]!==p||e[12]!==m||e[13]!==o||e[14]!==n||e[15]!==s||e[16]!==g||e[17]!==d||e[18]!==f?(w=r.jsx($Ve,{showPlayButton:s,showCanvasButton:n,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,messages:l,lastMessage:c,imageGenMessageId:u,turn:d,turnIndex:f,requestId:m,parentPromptId:p,showReportMessageButton:g,onReportMessage:h}),e[5]=a,e[6]=i,e[7]=u,e[8]=c,e[9]=l,e[10]=h,e[11]=p,e[12]=m,e[13]=o,e[14]=n,e[15]=s,e[16]=g,e[17]=d,e[18]=f,e[19]=w):w=e[19];let k;return e[20]!==y||e[21]!==C||e[22]!==w?(k=r.jsx(ia,{triggerButton:C,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:y,children:w}),e[20]=y,e[21]=C,e[22]=w,e[23]=k):k=e[23],k}function UVe(){gq.prefetch()}function $Ve(t){"use forget";const e=F.c(28),{showPlayButton:s,showCanvasButton:n,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,lastMessage:l,turn:c,showReportMessageButton:u,onReportMessage:d}=t,f=ne();let m;e[0]!==i||e[1]!==l||e[2]!==o?(m=o&&l&&r.jsx(BVe,{clientThreadId:i,lastMessage:l,asMenuItem:!0}),e[0]=i,e[1]=l,e[2]=o,e[3]=m):m=e[3];let p;e[4]!==i||e[5]!==l||e[6]!==s?(p=s&&l&&r.jsx(gq,{conversationId:i,message:l,asMenuItem:!0}),e[4]=i,e[5]=l,e[6]=s,e[7]=p):p=e[7];let g;e[8]!==i||e[9]!==n||e[10]!==c?(g=n&&r.jsx(LVe,{clientThreadId:i,turn:c}),e[8]=i,e[9]=n,e[10]=c,e[11]=g):g=e[11];let h;e[12]!==a||e[13]!==f?(h=a&&r.jsx(rT,{children:v=>{const{openScheduleModal:S,isScheduled:C,isSchedulable:w}=v;return!C&&w?r.jsx(Wd,{icon:Ec,label:f.formatMessage({id:"l12ujd",defaultMessage:"Schedule"}),onClick:S,asMenuItem:!0}):null}}),e[12]=a,e[13]=f,e[14]=h):h=e[14];let _;e[15]!==f||e[16]!==d||e[17]!==u?(_=u&&d&&r.jsx(Wd,{icon:Tf,label:f.formatMessage({id:"ConversationTurn.reportMessageMenuItem",defaultMessage:"Report message"}),asMenuItem:!0,onSelect:()=>d()}),e[15]=f,e[16]=d,e[17]=u,e[18]=_):_=e[18];let b;e[19]!==l?(b=!1,e[19]=l,e[20]=b):b=e[20];let y;return e[21]!==m||e[22]!==p||e[23]!==g||e[24]!==h||e[25]!==_||e[26]!==b?(y=r.jsxs(r.Fragment,{children:[m,p,g,h,_,b]}),e[21]=m,e[22]=p,e[23]=g,e[24]=h,e[25]=_,e[26]=b,e[27]=y):y=e[27],y}function Mmt({currentPage:t,length:e,onChangeIndex:s}){const n=a=>{s(pT(t+a,0,e-1))},o=ne();return r.jsxs("div",{className:z("text-token-text-secondary flex items-center justify-center"),children:[r.jsx("button",{onClick:()=>n(-1),disabled:t===0,className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent","aria-label":o.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:r.jsx(od,{className:"icon"})}),r.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:"".concat(t+1,"/").concat(e)}),r.jsx("button",{onClick:()=>n(1),disabled:t===e-1,"aria-label":o.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent",children:r.jsx(a0,{className:"icon"})})]})}function Nmt({currentPage:t,onChangeIndex:e,length:s}){const n=o=>{e(pT(t+o,0,s-1))};return s===0?null:r.jsxs(HVe,{children:[r.jsx(Qj,{onClick:()=>n(-1),disabled:t===0,children:r.jsx(Wx,{className:"icon-sm"})}),r.jsx(GVe,{children:"".concat(t+1,"/").concat(s)}),r.jsx(Qj,{onClick:()=>n(1),disabled:t===s-1,children:r.jsx(Zr,{className:"icon-sm"})})]})}var NP;const HVe=Mt.div(NP||(NP=St(["text-sm inline-flex border rounded-full border-token-border-medium overflow-hidden"])));var AP;const Qj=Mt.button(AP||(AP=St(["text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary"])));var IP;const GVe=Mt.span(IP||(IP=St(["text-token-text-tertiary px-2 flex items-center font-mono tracking-widest py-1.5"])));function hq(t=!1){const e=Gk(kn.WorkspaceShareLinks),s=G(),n=Xe(s,"2382399797",{disableExposureLog:t}),o=oe(()=>Gee(PC(s)));return x.useCallback(()=>e&&!o&&n.get("is_enabled",!1),[o,n,e])}function VVe(t){return Xe(t,"3243846918").get("enable_message_slice",!1)}function Amt(t){const e=oo(),s=hq(),n=G(),{imageGenMessages:o,canvasMessage:a,gizmoMessage:i,hasErrorInTurn:l,isIncomplete:c}=x.useMemo(()=>{const f=[];let m,p,g=!1,h=!1;return t.forEach(_=>{var y,v;Fm(_)&&f.push(_),EU(_)&&(m=_),(y=_.metadata)!=null&&y.gizmo_id&&(p=_);const b=(v=_.clientMetadata)==null?void 0:v.errType;b!=null&&b!=="info"&&(g=!0),Vee(_)&&(h=!0)}),{imageGenMessages:f,canvasMessage:m,gizmoMessage:p,hasErrorInTurn:g,isIncomplete:h}},[t]),u=!e&&!i&&o.length>0&&o.every(f=>f.status==="finished_successfully")&&s(),d=!e&&o.length===0&&!a&&!i&&VVe(n);return{enableImageGenPostSharing:u,enableMessageSliceSharing:d,imageGenMessages:o,canvasMessage:a,hasErrorInTurn:l,isIncomplete:c}}function Imt(t=!1){const e=oo(),s=hq(t);return x.useMemo(()=>!e&&s(),[e,s])}const zVe=ue(Ce,"823ad8",20,20,!0),jmt=ue(Ce,"327631",20,20),Pmt=ue(Ce,"6deb96",20,20),WVe=ue(Ce,"13c505",20,20),qVe=Object.freeze(Object.defineProperty({__proto__:null,default:WVe},Symbol.toStringTag,{value:"Module"})),Rmt=t=>{"use forget";const e=F.c(18),{onShowHidden:s}=t,n=ne();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=eU(jt()),e[0]=o):o=e[0];const{isShowingHiddenImages$:a}=o,i=oe(a);let l;e[1]!==s?(l=()=>{s?s():rve()},e[1]=s,e[2]=l):l=e[2];const c=wn(l);let u;e[3]!==n?(u=n.formatMessage({id:"NaTncQ",defaultMessage:"Library menu"}),e[3]=n,e[4]=u):u=e[4];let d;e[5]!==u?(d=r.jsx(tB,{"aria-label":u}),e[5]=u,e[6]=d):d=e[6];let f;e[7]!==i?(f=i?r.jsx(HC,{className:"h-4 w-4"}):r.jsx(zW,{className:"h-4 w-4"}),e[7]=i,e[8]=f):f=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(j,{id:"H788Jv",defaultMessage:"Show hidden images"}),e[9]=m):m=e[9];let p;e[10]!==f?(p=r.jsxs("div",{className:"flex items-center gap-2",children:[f,m]}),e[10]=f,e[11]=p):p=e[11];let g;e[12]!==c||e[13]!==p?(g=r.jsx(J.Item,{onClick:c,children:p}),e[12]=c,e[13]=p,e[14]=g):g=e[14];let h;return e[15]!==d||e[16]!==g?(h=r.jsx(ia,{triggerButton:d,contentAlign:"end",children:g}),e[15]=d,e[16]=g,e[17]=h):h=e[17],h};function KVe({className:t,children:e,position:s="center",size:n,removePopoverStyling:o=!1,shadow:a="normal"}){const i=zee(),l=ne(),c=Math.random()*40-20;return x.useEffect(()=>{i.start({x:0,y:0,rotate:0,opacity:1,transition:{type:"spring",duration:.6,bounce:.15}})},[i]),r.jsx(gt.div,{initial:{x:0,y:"100%",rotate:0,opacity:1},animate:i,exit:{x:0,y:"100%",rotate:c,opacity:1},transition:{type:"spring",duration:.6,bounce:.15},className:z("z-50 h-full w-full overflow-y-auto",n!=="fullscreen"&&"grid grid-cols-[10px_1fr_10px]",n!=="fullscreen"&&s==="center"&&"grid-rows-[minmax(10px,1fr)_auto_minmax(10px,1fr)] md:grid-rows-[minmax(20px,1fr)_auto_minmax(20px,1fr)]",n!=="fullscreen"&&s==="bottom"&&"grid-rows-[minmax(10px,1fr)_auto_10px] md:grid-rows-[minmax(20px,1fr)_auto_20px]"),children:r.jsx(Zd,{className:z(!o&&"popover","bg-token-sidebar-surface relative start-1/2 col-auto col-start-2 row-auto row-start-2 h-full w-full min-w-0 gap-4 p-4 text-start ltr:-translate-x-1/2 rtl:translate-x-1/2 dark:bg-[#171717]",n!=="fullscreen"&&"rounded-[36px]",a==="normal"&&"shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(0,0,0,0.2)] dark:shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(255,255,255,0.4)]",t),"aria-description":l.formatMessage({id:"slide-up-modal.share-sheet.description",defaultMessage:"Share sheet"}),"aria-describedby":"",children:e})})}function YVe({isOpen:t,onClose:e,children:s,shouldIgnoreClickOutside:n=!1,className:o}){var a;return r.jsx(Pc,{open:t,onOpenChange:i=>{n||i===!1&&e(!1)},children:r.jsx(Rc,{container:(a=AR())==null?void 0:a.document.body,children:r.jsx("div",{className:z("absolute inset-0",o),children:s})})})}function QVe({className:t,children:e,showBackground:s=!0}){const n=sa(),o=s?n?"rgba(0, 0, 0, 0.8)":"rgba(249,249,249,0.8)":"rgba(0, 0, 0, 0)";return r.jsx(cp,{asChild:!0,children:r.jsx(gt.div,{initial:{backdropFilter:"blur(0px)",backgroundColor:n?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},animate:{backdropFilter:s?"blur(4px)":"blur(0px)",backgroundColor:o},exit:{backdropFilter:"blur(0px)",backgroundColor:n?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},className:z("fixed inset-0 z-50",t),children:e})})}function JVe({title:t,description:e,icon:s,type:n}){return r.jsxs("div",{className:"flex max-w-full min-w-0 items-center",children:[r.jsx(XVe,{icon:s,type:n}),r.jsxs("div",{className:"flex max-w-full min-w-0 grow flex-col gap-1",children:[t!=null&&r.jsx(nC,{className:"text-token-text-primary text-3xl leading-6 font-semibold tracking-tight max-sm:text-xl",children:t}),e!=null&&r.jsx(oC,{className:"text-token-text-tertiary text-sm",children:e})]})]})}function ZVe({title:t,accessory:e,description:s,withSeparator:n=!0,icon:o,type:a,closeButton:i,textCenter:l}){return!t&&!s?null:r.jsxs(eze,{$hasSeparator:n,children:[r.jsx("div",{className:z("flex max-w-full",l&&"flex-1 justify-center text-center"),children:r.jsx(JVe,{title:t,description:s,icon:o,type:a})}),r.jsxs("div",{className:"flex items-center gap-5",children:[e,i!=null&&r.jsx(Xd,{asChild:!0,className:"sm:mt-0",children:i})]})]})}const XVe=({type:t,icon:e})=>e==null?null:r.jsx("div",{className:z("me-4 flex h-12 w-12 shrink-0 items-center justify-center rounded-full sm:h-10 sm:w-10",t==="danger"&&"bg-red-100",t==="warning"&&"bg-yellow-100",t==="success"&&"bg-green-100"),children:r.jsx(e,{className:z("icon-lg",t==="danger"&&"text-red-600",t==="warning"&&"text-yellow-700",t==="success"&&"text-green-700"),"aria-hidden":"true"})});var jP;const eze=Mt.div(jP||(jP=St(["px-4 pb-2 sm:p-6 flex items-center justify-between ",""])),({$hasSeparator:t})=>t&&"border-b border-black/10 dark:border-white/10"),wv={Root:YVe,Overlay:QVe,Content:KVe,Header:ZVe};function tze(t){"use forget";const e=F.c(47),{prompt:s,mode:n,onClose:o,onTryIt:a}=t,i=n===void 0?"sharer":n,l=ne(),c=Gt(),u=Kt(),[d,f]=x.useState(null),[m,p]=x.useState(!0);let g;e[0]!==l||e[1]!==u?(g=()=>{u.danger(l.formatMessage({id:"O6MPEA",defaultMessage:"Failed to create sharing link"}))},e[0]=l,e[1]=u,e[2]=g):g=e[2];let h;e[3]!==c?(h=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1})},e[3]=c,e[4]=h):h=e[4];let _;e[5]!==g||e[6]!==h?(_={share:!0,onError:g,onSuccess:h},e[5]=g,e[6]=h,e[7]=_):_=e[7];const{mutateAsync:b,isPending:y}=Wee(_);let v;e[8]!==l||e[9]!==d||e[10]!==u?(v=async()=>{if(d)try{await Jo("".concat(window.location.origin,"/?share_prompt=").concat(d)),u.success(l.formatMessage({id:"WpnjbL",defaultMessage:"Link copied to clipboard"}))}catch(L){u.danger(l.formatMessage({id:"gCy731",defaultMessage:"Failed to copy link"}))}},e[8]=l,e[9]=d,e[10]=u,e[11]=v):v=e[11];const S=v;let C;e[12]!==l||e[13]!==u?(C=()=>{u.danger(l.formatMessage({id:"xdHQb2",defaultMessage:"Failed to add to My library"}))},e[12]=l,e[13]=u,e[14]=C):C=e[14];let w;e[15]!==l||e[16]!==c||e[17]!==u?(w=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),u.success(l.formatMessage({id:"b4SFiB",defaultMessage:"Success"}))},e[15]=l,e[16]=c,e[17]=u,e[18]=w):w=e[18];let k;e[19]!==C||e[20]!==w?(k={onError:C,onSuccess:w},e[19]=C,e[20]=w,e[21]=k):k=e[21];const{mutateAsync:E}=qee(k);let M;e[22]!==s||e[23]!==E?(M=async()=>{s&&await E({promptId:String(s.id),relationship:"subscribed"})},e[22]=s,e[23]=E,e[24]=M):M=e[24];const N=M;let A,I;if(e[25]!==b||e[26]!==i||e[27]!==s||e[28]!==d||e[29]!==m?(A=()=>{m&&!d&&s&&i==="sharer"&&b(s.id).then(L=>{var H,V,q,W,$,Z;const{shared_id:D}=L;f(D),B.logEventWithStatsig("chatgpt_web_prompt_shared","chatgpt_web_prompt_shared",{hint:(H=s.system_hint)!=null?H:"none",hasSources:((q=(V=s.sources)==null?void 0:V.length)!=null?q:0)>0,sources:((W=s.sources)!=null?W:[]).join(","),sourceCount:(Z=($=s.sources)==null?void 0:$.length)!=null?Z:0})})},I=[m,d,s,b,i],e[25]=b,e[26]=i,e[27]=s,e[28]=d,e[29]=m,e[30]=A,e[31]=I):(A=e[30],I=e[31]),x.useEffect(A,I),!s){let L;return e[32]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(Wn,{}),e[32]=L):L=e[32],L}let P;e[33]!==o?(P=()=>o(!1),e[33]=o,e[34]=P):P=e[34];let R;e[35]!==y||e[36]!==i||e[37]!==S||e[38]!==N||e[39]!==a||e[40]!==s||e[41]!==d||e[42]!==m?(R=m&&r.jsx(wv.Root,{isOpen:!0,onClose:()=>{p(!1)},className:"max-w-[640px]",children:r.jsx(wv.Overlay,{showBackground:!0,children:r.jsx(wv.Content,{size:"normal",position:"center",className:"flex max-w-[640px] flex-col p-6 focus:outline-hidden",removePopoverStyling:!1,shadow:"normal",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"border-token-border-secondary flex gap-2 border-b-1 pb-4",children:[r.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[r.jsx("div",{className:"text-token-text-primary text-3xl font-bold max-sm:text-xl",children:s.name}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:s.description})]}),r.jsx(Es,{onClick:()=>p(!1),className:"end-0 top-0 z-10 px-1.5 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"})]}),r.jsxs("div",{className:"outline-token-border-light relative flex w-full flex-col justify-center gap-2 overflow-hidden rounded-xl shadow-sm outline outline-1",children:[r.jsx("div",{className:"text-token-text-primary p-4 pb-20 text-sm",children:s.prompt}),r.jsx("div",{className:"from-token-bg-primary absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent"}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(Zz,{className:"inline h-4 w-24 text-end"})})]}),r.jsx("div",{className:"flex flex-row justify-center gap-4",children:i==="sharer"?r.jsxs("button",{disabled:y||!d,onClick:()=>{S==null||S()},className:"relative flex flex-col gap-y-4 disabled:opacity-50 max-sm:gap-y-2",children:[r.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full shadow-lg max-sm:h-12 max-sm:w-12 max-sm:shadow-md dark:shadow-md",children:r.jsx("div",{className:"pointer-events-none flex h-8 w-8 items-center justify-center max-sm:h-6 max-sm:w-6",children:y||!d?r.jsx(Wn,{className:"h-4 w-4"}):r.jsx(lT,{})})}),r.jsx("div",{className:"w-full text-center text-xs",children:r.jsx(j,{id:"DFXg8z",defaultMessage:"Copy link"})})]}):r.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[r.jsx(ke,{color:"secondary",disabled:s.relationship!==null,onClick:()=>{N()},children:s.relationship==null?r.jsx(j,{id:"nfx0dD",defaultMessage:"Save to library"}):r.jsx(j,{id:"3Fx9p6",defaultMessage:"Already saved"})}),r.jsx(ke,{onClick:()=>{var L,D,H,V,q,W;p(!1),B.logEventWithStatsig("chatgpt_web_prompt_used","chatgpt_web_prompt_used",{referer:"shared",hint:(L=s.system_hint)!=null?L:"none",sources:((D=s.sources)!=null?D:[]).join(","),hasSources:((V=(H=s.sources)==null?void 0:H.length)!=null?V:0)>0,sourceCount:(W=(q=s.sources)==null?void 0:q.length)!=null?W:0}),a==null||a(s)},children:r.jsx(j,{id:"D+lWJu",defaultMessage:"Try it out"})})]})}),r.jsx("div",{className:"text-token-text-tertiary text-center text-sm sm:mt-2",children:r.jsx(j,{id:"I8F6LL",defaultMessage:"The share links are visible to workspace members only."})})]})})})}),e[35]=y,e[36]=i,e[37]=S,e[38]=N,e[39]=a,e[40]=s,e[41]=d,e[42]=m,e[43]=R):R=e[43];let O;return e[44]!==P||e[45]!==R?(O=r.jsx(Ms,{onExitComplete:P,children:R}),e[44]=P,e[45]=R,e[46]=O):O=e[46],O}const sze=Object.freeze(Object.defineProperty({__proto__:null,PromptSharingModal:tze},Symbol.toStringTag,{value:"Module"})),nze=ue(Ce,"36d8fa",20,20),oze=ue(Ce,"0623c1",20,20),aze=ue(Ce,"a9cb45",20,20),rze=ue(Ce,"155a34",20,20,!0),g3=({modelSwitcherDeny:t,value:e,label:s,subtitle:n,icon:o,onMouseEnter:a,onMouseLeave:i,onSelect:l,shouldShowUpsell:c=!1,className:u,clientThreadId:d})=>{const f=G(),m=ct(f),p=cT({clientThreadId:d}),g=WF({modelSlug:e,modelSwitcherDenialsBySlug:p}),h=!g&&!c,_=yt(),b=y=>{var v;if(!c){l==null||l(y);return}B.logEvent("Account Pay: Open Payment from Message Model Picker"),B.logRateLimitGetPlusButtonClicked({type:Y_.RATE_LIMIT,location:"message_model_switcher_dropdown",plan_type:(v=m==null?void 0:m.planType)!=null?v:"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:!1}),an(_,"Message model switcher dropdown")};return r.jsx(It,{label:t&&r.jsx(zF,{modelSwitcherDeny:t}),children:r.jsx(J.Item,{onSelect:b,onMouseEnter:()=>g&&(a==null?void 0:a()),onMouseLeave:()=>g&&(i==null?void 0:i()),disabled:h,className:u,icon:o,trailing:c?r.jsx(ize,{}):void 0,label:s,secondary:n})})};function ize(){const t=G();return r.jsx(ke,{color:"secondary",size:"small",children:r.jsx(j,T({},Rp(t)))})}const Omt=3600*24*30;function lze(t){var e;return((e=t.author.metadata)==null?void 0:e.real_author)===MC.ToolWeb}function Lmt(t,e){returnwindow.location.origin+"/search/evals/permalink/".concat(t,"/").concat(e)}function Dmt(t){return ox(t.flatMap(e=>e.type==="image_v2"?e.images:[]))}function Fmt(t){const e={};return t.forEach(s=>{var n,o,a,i,l,c,u;if(s.type==="grouped_webpages")s.items.forEach(d=>{var m,p;if(!d.url)return;const f=e[d.url];f?"attribution_segments"in d&&"attribution_segments"in f&&(e[d.url]=U(T({},f),{attribution_segments:[...(m=f.attribution_segments)!=null?m:[],...(p=d.attribution_segments)!=null?p:[]]})):e[d.url]=T({},d)});else if(s.type==="webpage"||s.type==="webpage_extended")s.url&&(e[s.url]||(e[s.url]=s));else if(s.type==="image_inline"){const d=(o=s.clicked_from_url)!=null?o:(n=s.asset_pointer_links)==null?void 0:n[0];if(d){const f={type:"image_inline",url:d,title:(a=s.clicked_from_title)!=null?a:"Screenshot",snippet:"",attribution:"screenshot",asset_pointer_links:s.asset_pointer_links,clicked_from_url:s.clicked_from_url,clicked_from_title:s.clicked_from_title};e[d]=f}}else if(s.type==="file"){const d="file://".concat(s.source,"/").concat(s.id),f=(i=s.name)!=null?i:s.id,m=(c=(l=s.snippet)!=null?l:s.text)!=null?c:"",p=(u=s.source)!=null?u:"file";e[d]||(e[d]=U(T({},s),{title:f,url:d,snippet:m,attribution:p}))}else"cite_map"in s&&Object.values(s.cite_map).forEach(d=>{d&&d.url&&(e[d.url]||(e[d.url]=d))})}),Object.values(e)}function _q(t,e){const{modelSwitcherDeny:s,subscriptionLevel:n}=t;return!!s&&s.reason===Y_.RATE_LIMIT&&n===e2.PLUS&&!e}function cze({messageModelEnabledTools:t,message:e,intl:s}){const n=t.includes(Ye.Search),o=lze(e);return[{key:"use-search",extraStreamParams:{forceUseSearch:!0},label:s.formatMessage({id:"eTV6j1",defaultMessage:"Search the web"}),icon:kr,condition:n&&!o,eventName:"chatgpt_regenerate_with_search_button_clicked"},{key:"use-no-search",extraStreamParams:{forceUseSearch:!1},label:s.formatMessage({id:"k/SdXa",defaultMessage:"Don't search the web"}),icon:lLe,condition:n&&o,eventName:"chatgpt_regenerate_without_search_button_clicked"}]}function uze({clientThreadId:t,message:e,intl:s}){const n=Se.isReasoningResponseMessage(Tt(t),e.id);return[{key:"use-reason",extraStreamParams:{forceUseReason:!0},label:s.formatMessage({id:"4VX35n",defaultMessage:"Think longer"}),icon:yf,condition:!n,eventName:"chatgpt_regenerate_with_reason_button_clicked"}]}function kv(t){"use forget";var m;const e=F.c(17),{clientThreadId:s,messageId:n,onModelSelect:o,modelRetryOption:a,hasPlusFeatures:i}=t;let l,c;e[0]!==a?(m=a,{value:c}=m,l=De(m,["value"]),e[0]=a,e[1]=l,e[2]=c):(l=e[1],c=e[2]);let u;e[3]!==s||e[4]!==n||e[5]!==o||e[6]!==c?(u=p=>{pt.logEvent("chatgpt_regenerate_switch_model_button_clicked",c,T({requestedModelId:c},Fs({clientThreadId:s,messageId:n}))),o({sourceEvent:p,requestedModelId:c})},e[3]=s,e[4]=n,e[5]=o,e[6]=c,e[7]=u):u=e[7];let d;e[8]!==i||e[9]!==a?(d=_q(a,i),e[8]=i,e[9]=a,e[10]=d):d=e[10];let f;return e[11]!==s||e[12]!==l||e[13]!==u||e[14]!==d||e[15]!==c?(f=r.jsx(g3,U(T({value:c,onSelect:u,shouldShowUpsell:d},l),{clientThreadId:s})),e[11]=s,e[12]=l,e[13]=u,e[14]=d,e[15]=c,e[16]=f):f=e[16],f}function dze(t){"use forget";const e=F.c(16),{clientThreadId:s,messageId:n,onModelSelect:o,modelRetryOption:a,parentPrompt:i,hasImageGenMessage:l}=t,c=ne(),u=G(),d=a.value;let f;e[0]!==s||e[1]!==u||e[2]!==l||e[3]!==n||e[4]!==a.value||e[5]!==o||e[6]!==(i==null?void 0:i.id)?(f=h=>{var _;B.logEventWithStatsig("chatgpt_regenerate_try_again_button_clicked","chatgpt_regenerate_try_again_button_clicked",T({requestedModelId:a.value},Fs({clientThreadId:s,messageId:n}))),l&&B.logEventWithStatsig("ChatGPT Turn Action Imagegen Regenerate (Not Dropdown) Clicked","chatgpt_turn_action_imagegen_regenerate"),Ee(u,"3247947701")&&wE({retry_option:"try_again",parent_prompt_id:(_=i==null?void 0:i.id)!=null?_:""},Rt(s),a.value),o({sourceEvent:h,requestedModelId:a.value})},e[0]=s,e[1]=u,e[2]=l,e[3]=n,e[4]=a.value,e[5]=o,e[6]=i==null?void 0:i.id,e[7]=f):f=e[7];let m;e[8]!==c?(m=c.formatMessage({id:"VbsBGW",defaultMessage:"Try again"}),e[8]=c,e[9]=m):m=e[9];let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(Pd,{className:"icon"}),e[10]=p):p=e[10];let g;return e[11]!==s||e[12]!==a||e[13]!==f||e[14]!==m?(g=r.jsx(g3,U(T({onSelect:f},a),{label:m,subtitle:void 0,icon:p,clientThreadId:s}),d),e[11]=s,e[12]=a,e[13]=f,e[14]=m,e[15]=g):g=e[15],g}function Jj(t){"use forget";const e=F.c(11),{clientThreadId:s,messageId:n,onModelSelect:o,modelRetryOption:a,systemHintRetryOptions:i}=t;let l;if(e[0]!==s||e[1]!==n||e[2]!==a||e[3]!==o||e[4]!==i){let c;e[6]!==s||e[7]!==n||e[8]!==a||e[9]!==o?(c=u=>{const d=u.icon;return r.jsx(g3,U(T({onSelect:f=>{B.logEventWithStatsig(u.eventName,u.eventName,T({requestedModelId:a.value},Fs({clientThreadId:s,messageId:n}))),o({sourceEvent:f,requestedModelId:a.value,extraStreamParams:u.extraStreamParams})}},a),{label:u.label,subtitle:"",icon:r.jsx(d,{className:"icon"}),clientThreadId:s}),u.key)},e[6]=s,e[7]=n,e[8]=a,e[9]=o,e[10]=c):c=e[10],l=i.filter(fze).map(c),e[0]=s,e[1]=n,e[2]=a,e[3]=o,e[4]=i,e[5]=l}else l=e[5];return l}function fze(t){return t.condition}const Zj="freeform_feedback",mze="The user provided feedback on a previous completion. Use it to generate a new completion. The output should be a standalone response that reflects the feedback without acknowledging it. Do not mention, suggest, or imply that this is a revision, improvement, or result of feedback. Respond in the same language as the original completion, even if the feedback is in another language. Only switch if the feedback explicitly asks you to translate the completion. Here is the feedback:\n",Xj=Ne({retryWithFeedback:{id:"HW5O9Q",defaultMessage:"Ask to change response"},makeLonger:{id:"s7cVzc",defaultMessage:"Add details"},makeShorter:{id:"uWyhEy",defaultMessage:"More concise"},squareAspect:{id:"kk6dTP",defaultMessage:"Square"},portraitAspect:{id:"yEJA9Q",defaultMessage:"Portrait"},landscapeAspect:{id:"bXtb1o",defaultMessage:"Landscape"}}),pze=(t,e)=>{var s,n,o,a,i;return t?[{key:"square_aspect",messageKey:"squareAspect",prompt:(s=e.square_aspect)!=null?s:"Please regenerate the image in a square aspect ratio.",icon:r.jsx(nze,{})},{key:"portrait_aspect",messageKey:"portraitAspect",prompt:(n=e.portrait_aspect)!=null?n:"Please regenerate the image in a portrait (vertical) aspect ratio.",icon:r.jsx(oze,{})},{key:"landscape_aspect",messageKey:"landscapeAspect",prompt:(o=e.landscape_aspect)!=null?o:"Please regenerate the image in a landscape (horizontal) aspect ratio.",icon:r.jsx(aze,{})}]:[{key:"make_longer",messageKey:"makeLonger",prompt:(a=e.make_longer)!=null?a:"Please make this response longer and more detailed.",icon:r.jsx(WTe,{})},{key:"make_shorter",messageKey:"makeShorter",prompt:(i=e.make_shorter)!=null?i:"Please make this response more concise and brief.",icon:r.jsx(rze,{})}]};function gze({lastMessage:t,messages:e,hasImageGenMessage:s,canRegenerateResponse:n,onModelSelect:o,clientThreadId:a,retryOption:i,contentRef:l,parentPrompt:c}){var C,w,k,E;const u=ne(),d=G(),[f,m]=x.useState(""),p=x.useRef(null),g=js(d,"3586972587").get("prompt",mze),h=js(d,"2881703223").get("prompts",{}),_=pze(s,h),b=(E=(C=t.metadata)==null?void 0:C.model_slug)!=null?E:(k=(w=[...e].reverse().find(M=>{var N;return(N=M.metadata)==null?void 0:N.model_slug}))==null?void 0:w.metadata)==null?void 0:k.model_slug;x.useEffect(()=>{requestAnimationFrame(()=>{var M;(M=p.current)==null||M.focus()})},[]),x.useEffect(()=>{const M=l==null?void 0:l.current;if(!M)return;function N(A){p.current&&document.activeElement!==p.current&&(I9(A)||A.key==="Enter"||A.ctrlKey||A.metaKey||A.key.length!==1&&!j9(A)||(A.stopPropagation(),p.current.focus()))}return M.addEventListener("keydown",N),()=>{M.removeEventListener("keydown",N)}},[]);const y=x.useCallback((M,N,A,I,P)=>{var O;Ee(P,"3247947701")&&wE({retry_option:I,parent_prompt_id:(O=c==null?void 0:c.id)!=null?O:"",freeform_feedback:I===Zj?N:void 0},Rt(a),b);const R="".concat(M).concat(N);o({sourceEvent:A,requestedModelId:b||"",appendMessages:[cn(R,{is_visually_hidden_from_conversation:!0,is_contextual_retry_user_message:!0})]})},[o,b,a,c==null?void 0:c.id]),v=M=>{f.trim()&&(y(g,f.trim(),M,Zj,d),m(""))},S=(M,N)=>{const A="".concat(M.prompt);y(g,A,N,M.key,d)};return n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(J.InputItem,{selectAllOnFocus:!1,ref:p,value:f,onChange:M=>m(M.target.value),placeholder:u.formatMessage(Xj.retryWithFeedback),onSubmit:v,border:!1,className:"min-w-[210px] ps-2.5 pe-9",name:"contextual-retry-dropdown-input"}),r.jsx("div",{className:"absolute end-4 top-1/2 flex -translate-y-1/2 items-center justify-center",children:r.jsx("button",{className:"icon composer-submit-btn",disabled:f.trim()==="",onClick:v,"aria-label":u.formatMessage({defaultMessage:"Submit",id:"aria.submit"}),"data-in-menu":Gm(!0),children:r.jsx(v$,{className:"icon-xs"})})})]}),r.jsx(J.Separator,{}),!!i&&r.jsx(dze,{clientThreadId:a,messageId:t.id,onModelSelect:o,modelRetryOption:i,parentPrompt:c,hasImageGenMessage:s}),_.map(M=>r.jsx(J.Item,{onSelect:N=>S(M,N),label:u.formatMessage(Xj[M.messageKey]),icon:M.icon},M.key))]}):null}const hze=({clientThreadId:t,message:e})=>{var m,p,g,h,_,b,y,v;const s=G(),n=Et(s,t),o=oe(()=>br(n)),a=cT({clientThreadId:t}),i=[];for(const S of(m=o.categories)!=null?m:[]){if(V_e(S))continue;const{defaultModel:C,label:w,tagline:k,subscriptionLevel:E,subcategory:M}=S,N=(g=(p=a[C])==null?void 0:p.regenerate)==null?void 0:g[0];i.push({label:w,value:C,subtitle:k,modelSwitcherDeny:N,subscriptionLevel:E,subcategory:M})}const l=(h=e.metadata)==null?void 0:h.model_slug,c=Kee(o,l),u=(c==null?void 0:c.enabledTools)||[],d=oe(()=>Cs(n));let f;return c&&l?f={label:c==null?void 0:c.title,value:l,subtitle:c==null?void 0:c.description,subscriptionLevel:e2.FREE,modelSwitcherDeny:l?(b=(_=a[l])==null?void 0:_.regenerate)==null?void 0:b[0]:void 0}:d&&(f={label:d.title,value:d.id,subtitle:d.description,subscriptionLevel:e2.FREE,modelSwitcherDeny:(v=(y=a[d.id])==null?void 0:y.regenerate)==null?void 0:v[0]}),{modelOptions:i,messageModelConfig:c,messageModelEnabledTools:u,defaultModelSlug:K9(o),modelPickerVersion:o.modelPickerVersion,fallbackModelOption:f}};function _ze(t){"use forget";var Nt,Ot,At,Wt,hs,ls,Ua,$a,Ro,lu,cu,uu;const e=F.c(75),{className:s,clientThreadId:n,lastMessage:o,messages:a,hasImageGenMessage:i,onModelSelect:l,canRegenerateResponse:c,parentPrompt:u,size:d}=t,f=d===void 0?"med":d,[m,p]=x.useState(!1),g=G(),h=!!((Nt=o.metadata)!=null&&Nt.image_gen_async);let _;e[0]!==((Ot=o.metadata)==null?void 0:Ot.model_slug)||e[1]!==a?(_=(ls=(At=o.metadata)==null?void 0:At.model_slug)!=null?ls:(hs=(Wt=[...a].reverse().find(xze))==null?void 0:Wt.metadata)==null?void 0:hs.model_slug,e[0]=(Ua=o.metadata)==null?void 0:Ua.model_slug,e[1]=a,e[2]=_):_=e[2];const b=_,y=o.id,v=ne(),S=ct(g),C=S==null?void 0:S.planType,w=x.useRef(null),k=x.useRef(null);Ml();const[E,M]=x.useState(!1);Ee(g,"880513586");let N;e[3]!==n||e[4]!==o?(N={clientThreadId:n,message:o},e[3]=n,e[4]=o,e[5]=N):N=e[5];const{modelOptions:A,messageModelConfig:I,messageModelEnabledTools:P,defaultModelSlug:R,modelPickerVersion:O,fallbackModelOption:L}=hze(N);let D;if(e[6]!==b||e[7]!==A){let Ws;e[9]!==b?(Ws=Ha=>Ha.value===b,e[9]=b,e[10]=Ws):Ws=e[10],D=A.find(Ws),e[6]=b,e[7]=A,e[8]=D}else D=e[8];const H=D;let V;if(e[11]!==(R==null?void 0:R.id)||e[12]!==A){let Ws;e[14]!==(R==null?void 0:R.id)?(Ws=Ha=>Ha.value===(R==null?void 0:R.id),e[14]=R==null?void 0:R.id,e[15]=Ws):Ws=e[15],V=A.find(Ws),e[11]=R==null?void 0:R.id,e[12]=A,e[13]=V}else V=e[13];const q=V,W=O===2;let $;e[16]!==n||e[17]!==y||e[18]!==A||e[19]!==l||e[20]!==W?($=r.jsx(yze,{clientThreadId:n,messageId:y,onModelSelect:l,modelOptions:A,isModelPickerV2:W}),e[16]=n,e[17]=y,e[18]=A,e[19]=l,e[20]=W,e[21]=$):$=e[21];const Z=$,K=H!=null?H:L;let Y;e[22]===Symbol.for("react.memo_cache_sentinel")?(Y=Ws=>{Ws||setTimeout(()=>{w.current&&w.current.blur()},10)},e[22]=Y):Y=e[22];const ae=Y;let se,ee;e[23]!==m?(ee=()=>{ae(m)},se=[m],e[23]=m,e[24]=se,e[25]=ee):(se=e[24],ee=e[25]),x.useEffect(ee,se);let re,he;e[26]!==m?(re=()=>{m||M(!1)},he=[m],e[26]=m,e[27]=re,e[28]=he):(re=e[27],he=e[28]),x.useEffect(re,he);let fe;e[29]!==n?(fe={clientThreadId:n},e[29]=n,e[30]=fe):fe=e[30];const pe=q$(fe),le=x.useRef(pe);let ve,Te;e[31]!==pe?(ve=()=>{le.current=pe},Te=[pe],e[31]=pe,e[32]=ve,e[33]=Te):(ve=e[32],Te=e[33]),x.useEffect(ve,Te);const xe=vU(),ce=($a=o.metadata)==null?void 0:$a.model_slug,we=cze({messageModelEnabledTools:P,message:o,intl:v});let ge;e[34]!==n||e[35]!==v||e[36]!==o?(ge=uze({clientThreadId:n,message:o,intl:v}),e[34]=n,e[35]=v,e[36]=o,e[37]=ge):ge=e[37];const Ae=ge;if(!c||h)return null;const Ue=(Ro=o.metadata)==null?void 0:Ro.show_safety_switch_ui,Ie=J;let Me;e[38]===Symbol.for("react.memo_cache_sentinel")?(Me=Ws=>{p(Ws),ae(Ws),Ws&&B.logEventWithStatsig("Contextual Retry Dropdown Menu Opened","chatgpt_contextual_retry_dropdown_opened")},e[38]=Me):Me=e[38];let te;e[39]!==(I==null?void 0:I.title)||e[40]!==ce||e[41]!==Ue?(te=Ue?r.jsx(j,U(T({},Lu.modelUsedDescription),{values:{modelName:(lu=I==null?void 0:I.title)!=null?lu:ce}})):r.jsx(j,{id:"gW2N97",defaultMessage:"Try again..."}),e[39]=I==null?void 0:I.title,e[40]=ce,e[41]=Ue,e[42]=te):te=e[42];let Q;e[43]!==i||e[44]!==(I==null?void 0:I.title)||e[45]!==ce||e[46]!==Ue?(Q=Ue||i?null:r.jsx(j,{id:"yAiiEg",defaultMessage:"Used {modelName}",values:{modelName:(cu=I==null?void 0:I.title)!=null?cu:ce}}),e[43]=i,e[44]=I==null?void 0:I.title,e[45]=ce,e[46]=Ue,e[47]=Q):Q=e[47];let ie;e[48]!==s?(ie=z("cursor-pointer",s),e[48]=s,e[49]=ie):ie=e[49];let _e;e[50]!==v?(_e=v.formatMessage({id:"42qUcL",defaultMessage:"Switch model"}),e[50]=v,e[51]=_e):_e=e[51];let ye;e[52]!==Ue||e[53]!==f?(ye=r.jsx("div",{className:"flex items-center",children:Ue?r.jsx(ci,{color:"var(--tag-blue)",className:f==="small"?"icon-sm":"icon"}):r.jsx(Pd,{className:f==="small"?"icon-sm":"icon"})}),e[52]=Ue,e[53]=f,e[54]=ye):ye=e[54];let Re;e[55]!==ie||e[56]!==_e||e[57]!==ye?(Re=r.jsx(J.BasicTrigger,{ref:w,className:ie,"aria-label":_e,children:ye}),e[55]=ie,e[56]=_e,e[57]=ye,e[58]=Re):Re=e[58];let Ve;e[59]!==te||e[60]!==Q||e[61]!==Re?(Ve=r.jsx(It,{label:te,secondaryLabel:Q,children:Re}),e[59]=te,e[60]=Q,e[61]=Re,e[62]=Ve):Ve=e[62];const ze=J,Fe=J,be="top",Oe=4,qe=-10,Ze="start",st="auto",rt=E?r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:r.jsx(od,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:Ws=>{Ws.preventDefault(),M(!1)},children:r.jsx(j,T({},Lu.back))}),r.jsx(J.Separator,{}),Z]}):r.jsxs(r.Fragment,{children:[r.jsx(gze,{lastMessage:o,messages:a,hasImageGenMessage:i,canRegenerateResponse:c,onModelSelect:l,clientThreadId:n,retryOption:K,contentRef:k,parentPrompt:u}),K&&r.jsxs(r.Fragment,{children:[r.jsx(J.Separator,{}),r.jsx(Jj,{clientThreadId:n,messageId:y,onModelSelect:l,modelRetryOption:K,systemHintRetryOptions:[...we]})]}),!!q&&!i&&(C===tt.FREE||C===tt.GO)&&r.jsx(Jj,{clientThreadId:n,messageId:y,onModelSelect:l,modelRetryOption:q,systemHintRetryOptions:Ae}),!i&&C&&Yee(C)&&C!==tt.GO&&!Ue&&r.jsxs(J.Sub,{children:[!xe&&r.jsxs(r.Fragment,{children:[r.jsx(J.SubMenuTrigger,{icon:BI,children:r.jsx(j,T({},Lu.switchModel))}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{children:Z})})]}),xe&&r.jsx(J.SubMenuTrigger,{icon:BI,onClick:Ws=>{Ws.preventDefault(),M(!0)},children:r.jsx(j,T({},Lu.switchModel))})]}),Ue&&r.jsxs(r.Fragment,{children:[r.jsx(J.Separator,{}),r.jsxs("div",{className:"px-4 py-2",children:[r.jsx("div",{className:"text-sm",children:r.jsx(j,U(T({},Lu.modelUsedDescription),{values:{modelName:(uu=I==null?void 0:I.title)!=null?uu:ce}}))}),r.jsx("div",{className:"text-token-text-tertiary max-w-64 py-1 text-xs",children:r.jsx(j,U(T({},Lu.safetySwitchWarning),{values:{learnMoreLink:r.jsx("a",{href:"https://help.openai.com/en/articles/12454167",target:"_blank",className:"text-token-text-accent hover:text-token-text-accent/80 underline",rel:"noreferrer",children:r.jsx(j,{id:"dyuBaD",defaultMessage:"Learn more"})})}}))})]})]})]});let wt;e[63]!==Fe.Content||e[64]!==rt?(wt=r.jsx(Fe.Content,{side:be,sideOffset:Oe,alignOffset:qe,align:Ze,size:st,ref:k,children:rt}),e[63]=Fe.Content,e[64]=rt,e[65]=wt):wt=e[65];let at;e[66]!==ze.Portal||e[67]!==wt?(at=r.jsx(ze.Portal,{children:wt}),e[66]=ze.Portal,e[67]=wt,e[68]=at):at=e[68];let kt;return e[69]!==m||e[70]!==Ie.Root||e[71]!==Me||e[72]!==Ve||e[73]!==at?(kt=r.jsxs(Ie.Root,{open:m,onOpenChange:Me,children:[Ve,at]}),e[69]=m,e[70]=Ie.Root,e[71]=Me,e[72]=Ve,e[73]=at,e[74]=kt):kt=e[74],kt}function xze(t){var e;return(e=t.metadata)==null?void 0:e.model_slug}function yze(t){"use forget";const e=F.c(41),{clientThreadId:s,messageId:n,onModelSelect:o,modelOptions:a,isModelPickerV2:i}=t,{data:l}=Ic(),c=l===void 0?null:l;let u;e[0]!==c?(u=c&&UC(c),e[0]=c,e[1]=u):u=e[1];const d=u;let f;e[2]!==a?(f=ek(a,bze),e[2]=a,e[3]=f):f=e[3];const[m,p]=f;let g;e[4]!==d||e[5]!==a?(g=()=>{const E=a.some(M=>_q(M,d));B.logEvent("Conversation Open Message Model Selector",{has_get_plus_button:E,is_new_regen_dropdown:!0})},e[4]=d,e[5]=a,e[6]=g):g=e[6];const h=x.useEffectEvent(g);let _;e[7]!==h?(_=()=>{h()},e[7]=h,e[8]=_):_=e[8];let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[9]=b):b=e[9],x.useEffect(_,b);let y;e[10]!==m?(y=new Map,m.forEach(E=>{var N;const M=E.subcategory;M&&(y.has(M)||y.set(M,[]),(N=y.get(M))==null||N.push(E))}),e[10]=m,e[11]=y):y=e[11];const v=y;let S;if(e[12]!==s||e[13]!==d||e[14]!==n||e[15]!==o||e[16]!==p){let E;e[18]!==s||e[19]!==d||e[20]!==n||e[21]!==o?(E=M=>r.jsx(kv,{clientThreadId:s,messageId:n,onModelSelect:o,modelRetryOption:M,hasPlusFeatures:d},M.value),e[18]=s,e[19]=d,e[20]=n,e[21]=o,e[22]=E):E=e[22],S=p.map(E),e[12]=s,e[13]=d,e[14]=n,e[15]=o,e[16]=p,e[17]=S}else S=e[17];let C;e[23]!==s||e[24]!==d||e[25]!==i||e[26]!==n||e[27]!==o||e[28]!==v?(C=i&&[...v.entries()].map(E=>{const[M,N]=E;return N.map(A=>r.jsx(kv,{clientThreadId:s,messageId:n,onModelSelect:o,modelRetryOption:A,hasPlusFeatures:d},M+"-"+A.value))}),e[23]=s,e[24]=d,e[25]=i,e[26]=n,e[27]=o,e[28]=v,e[29]=C):C=e[29];let w;e[30]!==s||e[31]!==d||e[32]!==i||e[33]!==n||e[34]!==o||e[35]!==v?(w=!i&&[...v.entries()].map(E=>{const[M,N]=E;return r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{children:r.jsx("div",{className:"flex grow justify-between gap-2 overflow-hidden",children:M})}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{className:"min-w-fit",children:N.map(A=>r.jsx(kv,{clientThreadId:s,messageId:n,onModelSelect:o,modelRetryOption:A,hasPlusFeatures:d},M+"-"+A.value))})})]},M)}),e[30]=s,e[31]=d,e[32]=i,e[33]=n,e[34]=o,e[35]=v,e[36]=w):w=e[36];let k;return e[37]!==S||e[38]!==C||e[39]!==w?(k=r.jsxs(r.Fragment,{children:[S,C,w]}),e[37]=S,e[38]=C,e[39]=w,e[40]=k):k=e[40],k}function bze(t){return t.subcategory}const Bmt=x.memo(_ze),Lu=Ne({switchModel:{id:"RegenerateWithModelDropdown.switchModel",defaultMessage:"Switch model"},back:{id:"RegenerateWithModelDropdown.back",defaultMessage:"Back"},modelUsedDescription:{id:"RegenerateWithModelDropdown.modelUsedDescription",defaultMessage:"Used {modelName}"},safetySwitchWarning:{id:"RegenerateWithModelDropdown.safetySwitchWarning",defaultMessage:"ChatGPT routes some sensitive conversations to models that handle these topics with extra care. {learnMoreLink}"}});function h3(t){returnwindow.location.origin+"/s/".concat(t)}const Tv={GenerateFailed:"generate_failed",CopyFailed:"copy_failed"};class s1 extends Error{constructor(s,n){super(s);X(this,"code");this.code=n}}const Ju=new Map,WS=new Set,xq=()=>{WS.forEach(t=>t())},vze=(t,e)=>{var n,o;if(t instanceof s1){const a=(n=t.code)!=null?n:e;return new s1((o=t.message)!=null?o:"Failed to share",a)}const s=t instanceof Error?t.message:"Failed to share";return new s1(s,e)},n1=t=>(Ju.set(t.shareTargetId,t),xq(),t),Sze=t=>{if(t)return t.status==="succeeded",t.link},Cze=(t,e,s)=>{const n=Date.now(),o=Ju.get(t),a=Sze(o);let i,l;const c=new Promise((d,f)=>{i=d,l=f});return(async()=>{var d,f;try{const m=await s();if(!m)throw new s1("Share link not generated",Tv.GenerateFailed);const p={shareTargetId:t,shareType:e,status:"succeeded",promise:c,link:m,lastUpdated:Date.now(),succeededAt:Date.now()};n1(p),i({link:m,status:"succeeded"})}catch(m){const p=vze(m,Tv.GenerateFailed),g={shareTargetId:t,shareType:e,status:"failed",promise:c,link:a,error:{code:(d=p.code)!=null?d:Tv.GenerateFailed,message:(f=p.message)!=null?f:"Failed to share"},lastUpdated:Date.now(),failedAt:Date.now()};n1(g),l(p)}})(),n1({shareTargetId:t,shareType:e,status:"processing",startedAt:n,promise:c,link:a,lastUpdated:n}),c},qS={get:t=>Ju.get(t),start:(t,e,s)=>{const n=Ju.get(t);return(n==null?void 0:n.status)==="processing"?n.promise:(n==null?void 0:n.status)==="succeeded"?Promise.resolve(n):Cze(t,e,s)},setCopied:t=>{const e=Ju.get(t);e&&n1(U(T({},e),{copiedAt:Date.now(),lastUpdated:Date.now()}))},subscribe:t=>(WS.add(t),()=>{WS.delete(t)}),clearAll:()=>{Ju.clear(),xq()}},om=(t,e,s)=>[t,e,...s].join(":"),kh=(t,e)=>{if(!t)throw new Error(e)},Vl=t=>encodeURIComponent(t),k0=t=>{const{shareType:e,clientThreadId:s}=t;switch(kh(s,"Missing clientThreadId for conversation"),e){case"conversation":return om(e,s,[]);case"message-slice":{const{messageSliceIds:n,parentPromptId:o}=t;kh(Array.isArray(n)&&n.length,"Missing messageSliceIds for message slice share target");const a=n.filter(Boolean).map(l=>Vl(l)),i=o?[Vl(o)]:[];return om(e,s,[...a,...i])}case"image-gen":{const{imageGenMessageId:n,assetPointer:o}=t;kh(n,"Missing fields for image generation share target");const a=[Vl(n)];return o&&a.push(Vl(o)),om(e,s,a)}case"odyssey":{const{odysseyShareIntent:n}=t;return kh((n==null?void 0:n.messageId)&&(n==null?void 0:n.fileId)&&(n==null?void 0:n.serverThreadId),"Missing fields for odyssey share target"),om(e,s,[Vl(n.serverThreadId),Vl(n.messageId),Vl(n.fileId)])}default:return om(e,s,[])}},Jr=Ne({copyLink:{id:"postSharingModal.copyLink",defaultMessage:"Copy link"},linkCopied:{id:"postSharingModal.linkCopied",defaultMessage:"Link copied!"},failedToGenerateShareLink:{id:"postSharingModal.failedToGenerateShareLink",defaultMessage:"Failed to generate share link"},failedToCopyShareLink:{id:"postSharingModal.failedToCopyShareLink",defaultMessage:"Copy failed. Try again."},fromChatGPT:{id:"postSharingModal.fromChatGPT",defaultMessage:"From ChatGPT"},contentUnavailable:{id:"postSharingModal.contentUnavailable",defaultMessage:"Content Unavailable"},unavailableReasonGeneral:{id:"postSharingModal.unavailableReasonGeneral",defaultMessage:"This share link is not available because it doesnt exist or you dont have access to it."},unavailableReasonWorkspace:{id:"postSharingModal.unavailableReasonWorkspace",defaultMessage:"This content was shared from a workspace you dont have access to. Ask the owner to invite you if youd like to view it."},ok:{id:"postSharingModal.ok",defaultMessage:"OK"},shareLinkVisibleToWorkspaceOnly:{id:"postSharingModal.shareLinkVisibleToWorkspaceOnly",defaultMessage:"The share links are visible to workspace members only."},download:{id:"postSharingModal.download",defaultMessage:"Download"},downloadPdfButtonMenu:{id:"postSharingModal.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"},downloadDocxButtonMenu:{id:"postSharingModal.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"},downloadPptxButtonMenu:{id:"postSharingModal.download-pptx-button.menu",defaultMessage:"Microsoft PowerPoint Document (.pptx)"},downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},imageLicenseDisclaimer:{id:"postSharingModal.imageLicenseDisclaimer",defaultMessage:"Only share images you have a license to use. <link>Learn{nbsp}more</link>"},screenshotDisclaimer:{id:"postSharingModal.screenshotDisclaimer",defaultMessage:"Screenshots may contain sensitive information."}}),e5=3,wze=async({shareRequestPromise:t,shareTargetId:e,shareType:s,shareVariant:n,toaster:o,intl:a})=>{const i=t.then(p=>p.link),l="share_variant=".concat(n,";share_type=").concat(s),c=p=>{const g=p==="success"?"Share Post: Copy Link Success":"Share Post: Copy Link Failure",h=p==="success"?"chatgpt_post_share_copy_success":"chatgpt_post_share_copy_failure";B.logEventWithStatsig(g,h,{share_type:s,share_variant:n})},u=typeof navigator<"u"?navigator.clipboard:null,d=typeof ClipboardItem<"u"&&!!(u!=null&&u.write),f=p=>p instanceof DOMException&&p.name==="NotAllowedError";if(d){const p="text/plain",g=new ClipboardItem({[p]:(async()=>{const h=await i;return new Blob([h],{type:p})})()});try{return await u.write([g]),await Nd.yield(),qS.setCopied(e),c("success"),o.success(a.formatMessage(Jr.linkCopied),{duration:e5,hasCloseButton:!0}),!0}catch(h){return c("failure"),Ge.addAction("share_request_auto_copy_failed",{error:h,share_target_id:e,share_type:s,share_variant:n}),f(h)||o.danger(a.formatMessage(Jr.failedToCopyShareLink),{toastId:"failed_to_copy_share_link",loggingDescription:l,hasCloseButton:!0}),!1}}if(!(u!=null&&u.writeText))return!1;let m;try{m=await i}catch(p){return!1}try{return await u.writeText(m),qS.setCopied(e),c("success"),o.success(a.formatMessage(Jr.linkCopied),{duration:e5,hasCloseButton:!0}),!0}catch(p){return c("failure"),Ge.addAction("share_request_auto_copy_failed",{error:p,share_target_id:e,share_type:s,share_variant:n}),f(p)||o.danger(a.formatMessage(Jr.failedToCopyShareLink),{toastId:"failed_to_copy_share_link",loggingDescription:l,hasCloseButton:!0}),!1}};function T0({shareType:t,shareTargetId:e,shareVariant:s,generateShareLinkFn:n,toaster:o,intl:a,shouldPrewarm:i=!0}){let l=null;const c=()=>(l!=null||(l=qS.start(e,t,n)),l);i&&c();const u=()=>c().then(m=>m.link);let d=!1;return{ensureShareLink:u,autoCopyShareLink:()=>d?Promise.resolve(!1):(d=!0,wze({shareRequestPromise:c(),shareTargetId:e,shareType:t,shareVariant:s,toaster:o,intl:a}))}}function _3(t){var e,s;return{shareVariant:(e=t==null?void 0:t.shareVariant)!=null?e:"control",shouldAutoCopyShareLink:(s=t==null?void 0:t.shouldAutoCopyShareLink)!=null?s:!1}}const E0=Pe(()=>me(()=>import("./kwbusk11a4k5oqj9.js"),__vite__mapDeps([427,1,3,4,428,185,99,100,45])).then(t=>t.PostSharingModal)),qd=Pe(()=>me(()=>import("./nehkolpks6e9k3o9.js"),__vite__mapDeps([429,1,3,4])).then(t=>t.MobilePostPreview));function kze(){me(()=>Promise.resolve().then(()=>fFe),void 0)}function Tze(t){const e=Uc(t,s=>gr.getImageAssetPointers(s).length>0);return e?gr.getImageAssetPointers(e)[0]:null}async function Eze(t,e,s){return Ma(e.asset_pointer)?(await $Ae(t,[e],null,void 0,s))[0]:null}const Mze=async(t,e,s)=>{var i;const n=()=>Se.findNode(Tt(e),({message:l})=>l.id===s||!!gr.getImageAssetPointers(l).find(c=>c.asset_pointer===t));let o=n();if(!(o!=null&&o.message)&&(await hr(e),o=n(),!(o!=null&&o.message)))return null;const a=Rt(e);return{postText:(i=o.message.metadata)==null?void 0:i.image_gen_title,imageAssetPointer:Tze([o.message]),serverThreadId:a}};async function yq(t,e,s,n,o=!1){const a=Ma(e.asset_pointer);if(!a)throw new Error("Missing image asset to generate share link");if(o){const{permalink:l}=await de.safePost("/share/post/link",{requestBody:{post_text:s,attachments_to_create:[{kind:"image_share",file_id:a,conversation_id:t,width:n==null?void 0:n.width,height:n==null?void 0:n.height}]}});return l}const i=await de.safePost("/share/post",{requestBody:{post_text:s,attachments_to_create:[{kind:"image_share",file_id:a,conversation_id:t,width:n==null?void 0:n.width,height:n==null?void 0:n.height}]}});return h3(i.post.id)}async function bq(t,e,s){const n=await de.safePost("/share/post",{requestBody:{post_text:s,attachments_to_create:[{kind:"message_slice",conversation_id:t,message_ids:e}]}});return h3(n.post.id)}async function M0({postText:t,postTitle:e,clientThreadId:s,generateShareLinkFn:n,renderPreviewFn:o,usePostText:a,useShareLink:i,useShareTitle:l}){if(!Rt(s))return!1;try{const u=await n();return u?(o&&o(),await navigator.share({text:a?t:void 0,url:i?u:void 0,title:l?e:void 0}),!0):!1}catch(u){return!1}}const vq="3278106051";function Nze(t){return t?Xe(t,vq).get("image_share_minimal_endpoint",!1):!1}function x3(t){return t&&Xe(t,vq).get("auto_copy_share_link",!1)?"auto_copy_share_link":"control"}async function Aze(t,e,s,n,o,a,i,l,c){const{shareVariant:u,shouldAutoCopyShareLink:d}=_3(c),f=await Mze(t,e,s);if(!(f!=null&&f.imageAssetPointer)||!(f!=null&&f.serverThreadId))return;const{postText:m,imageAssetPointer:p,serverThreadId:g}=f,h=await Eze(n,p,g);if(!h)return;const _="image-gen",b=k0({shareType:_,clientThreadId:e,imageGenMessageId:s,assetPointer:t}),y=Nze(o),S=T0({shareType:_,shareTargetId:b,shareVariant:u,generateShareLinkFn:()=>yq(g,p,m,h,y),toaster:i,intl:l,shouldPrewarm:d});if(a&&Ee(o,"1138231213")){const C=Xe(o,"2382399797"),w=await M0({clientThreadId:e,postText:m,shareTargetId:b,shareType:_,generateShareLinkFn:S.ensureShareLink,usePostText:C.get("navigator_share_text",!1),useShareLink:C.get("navigator_share_link",!1)});if(d&&await S.autoCopyShareLink(),w)return}mt(o,E0,{postSharingData:{clientThreadId:e,postText:m,generateShareLinkFn:S.ensureShareLink,coverImageUrl:h==null?void 0:h.url,shareTargetId:b,shareType:_}}),d&&await S.autoCopyShareLink()}async function Ize(t,e,s,n,o,a,i,l,c){const{shareVariant:u,shouldAutoCopyShareLink:d}=_3(c),f=Rt(t);if(!f)return;const m=()=>bq(f,e,i),p="message-slice",g=k0({shareType:p,clientThreadId:t,messageSliceIds:e,parentPromptId:l}),h=T0({shareType:p,shareTargetId:g,shareVariant:u,generateShareLinkFn:m,toaster:o,intl:a,shouldPrewarm:d});if(n&&Ee(s,"1138231213")){await M0({clientThreadId:t,shareTargetId:g,shareType:p,generateShareLinkFn:h.ensureShareLink,renderPreviewFn:()=>{mt(s,qd,{clientThreadId:t,coverImageUrl:void 0,messageSliceIds:e})},useShareLink:!0,useShareTitle:!0,postTitle:i}),Un(s,qd),d&&await h.autoCopyShareLink();return}mt(s,E0,{postSharingData:{clientThreadId:t,generateShareLinkFn:h.ensureShareLink,postText:i,messageSliceIds:e,messageSliceAttachment:void 0,shareTargetId:g,shareType:p}}),d&&await h.autoCopyShareLink()}const Ev=async(t,e,s,n,o,a,i)=>{const{shareVariant:l,shouldAutoCopyShareLink:c}=_3(i);if(!Rt(e))return;const d=async()=>{const g=await de.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"odyssey_artifact",file_id:t.fileId,message_id:t.messageId,conversation_id:t.serverThreadId}]}});return h3(g.post.id)},f="odyssey",m=k0({shareType:f,clientThreadId:e,odysseyShareIntent:t}),p=T0({shareType:f,shareTargetId:m,shareVariant:l,generateShareLinkFn:d,toaster:o,intl:a,shouldPrewarm:c});if(n&&Ee(s,"1138231213")){const g=await M0({clientThreadId:e,shareTargetId:m,shareType:f,generateShareLinkFn:p.ensureShareLink,renderPreviewFn:()=>{mt(s,qd,{clientThreadId:e,generateShareLinkFn:d,coverImageUrl:void 0,messageSliceIds:void 0,odysseyShareIntent:t})},useShareLink:!0,useShareTitle:!1});if(Un(s,qd),c&&await p.autoCopyShareLink(),g)return}mt(s,E0,{postSharingData:{clientThreadId:e,generateShareLinkFn:p.ensureShareLink,odysseyShareIntent:t,messageSliceIds:void 0,shareTargetId:m,shareType:f}}),c&&await p.autoCopyShareLink()};async function jze({ctx:t,serverThreadId:e,existingShareLinkUrl:s,piiDetected:n,toaster:o,intl:a}){var b,y,v;if(!t)return!1;const i=x3(t),l=i==="auto_copy_share_link",c=LC(e);let u=Tt(c);if(u||(await hr(c),u=Tt(c)),!u)return!1;const d=Se.getConversationTurns(u).flatMap(S=>S.messages.map(C=>C.id)).filter(S=>!!S);if(d.length===0)return!1;const f=!Y9();((b=Se.getCurrentNode(u))==null?void 0:b.message.id)||await hr(c);const p="conversation",g=k0({shareType:p,clientThreadId:c}),_=T0({shareType:p,shareTargetId:g,shareVariant:i,generateShareLinkFn:()=>{var S;return s?Promise.resolve(s):bq(e,d,(S=u.title)!=null?S:void 0)},toaster:o,intl:a,shouldPrewarm:l});return f&&Ee(t,"1138231213")?(await M0({clientThreadId:c,postTitle:(y=u.title)!=null?y:void 0,shareTargetId:g,shareType:p,generateShareLinkFn:_.ensureShareLink,renderPreviewFn:()=>{mt(t,qd,{clientThreadId:c,coverImageUrl:void 0,messageSliceIds:d})},useShareLink:!0,useShareTitle:!0}),Un(t,qd),l&&await _.autoCopyShareLink(),!0):(mt(t,E0,{postSharingData:{clientThreadId:c,generateShareLinkFn:_.ensureShareLink,postText:(v=u.title)!=null?v:void 0,messageSliceIds:d,messageSliceAttachment:void 0,shareTargetId:g,shareType:p,piiDetected:n}}),l&&await _.autoCopyShareLink(),!0)}function Pze(t){"use forget";const e=F.c(14),{assetPointer:s,clientThreadId:n,imageGenMessageId:o,messageSliceIds:a,odysseyShareIntent:i,parentPromptId:l}=t,c=s===void 0?null:s,u=Gt(),d=G(),f=Pa(),m=Qe(n,Oze),p=Kt(),g=ne();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],e[0]=h):h=e[0],x.useEffect(Rze,h);let _;return e[1]!==c||e[2]!==n||e[3]!==d||e[4]!==o||e[5]!==g||e[6]!==f||e[7]!==a||e[8]!==i||e[9]!==l||e[10]!==u||e[11]!==m||e[12]!==p?(_=async()=>{const b=x3(d),y=b==="auto_copy_share_link";if(o)await Aze(c,n,o,u,d,f,p,g,{shareVariant:b,shouldAutoCopyShareLink:y});else if(a){const S=l!=null&&Xe(d,"1547743984").get("is_message_prompt_enabled",!1)&&l?[l,...a.filter(C=>C!==l)]:a;await Ize(n,S,d,f,p,g,m!=null?m:void 0,l,{shareVariant:b,shouldAutoCopyShareLink:y})}else i&&await(Ev==null?void 0:Ev(i,n,d,f,p,g,{shareVariant:b,shouldAutoCopyShareLink:y}))},e[1]=c,e[2]=n,e[3]=d,e[4]=o,e[5]=g,e[6]=f,e[7]=a,e[8]=i,e[9]=l,e[10]=u,e[11]=m,e[12]=p,e[13]=_):_=e[13],_}function Rze(){kze()}function Oze(t){return t==null?void 0:t.title}function Sq(t){"use forget";const e=F.c(6),s=ne();switch(t){case"general":{let n;return e[0]!==s?(n=s.formatMessage(Jr.unavailableReasonGeneral),e[0]=s,e[1]=n):n=e[1],n}case"workspace":{let n;return e[2]!==s?(n=s.formatMessage(Jr.unavailableReasonWorkspace),e[2]=s,e[3]=n):n=e[3],n}default:{let n;return e[4]!==s?(n=s.formatMessage(Jr.unavailableReasonGeneral),e[4]=s,e[5]=n):n=e[5],n}}}function Lze(t){"use forget";const e=F.c(15),{onClose:s,reason:n}=t,o=ne(),a=yt();let i;e[0]!==a||e[1]!==s?(i=()=>{s(),a("/")},e[0]=a,e[1]=s,e[2]=i):i=e[2];const l=i,c=Sq(n);let u;e[3]!==o?(u=o.formatMessage(Jr.contentUnavailable),e[3]=o,e[4]=u):u=e[4];let d;e[5]!==o?(d=o.formatMessage(Jr.ok),e[5]=o,e[6]=d):d=e[6];let f;e[7]!==l||e[8]!==d?(f=r.jsx(ke,{size:"large",color:"primary",className:"w-full",onClick:l,children:d}),e[7]=l,e[8]=d,e[9]=f):f=e[9];let m;return e[10]!==c||e[11]!==l||e[12]!==u||e[13]!==f?(m=r.jsx(Ft,{testId:"modal-post-sharing-error",isOpen:!0,type:"danger",textCenter:!0,title:u,description:c,onClose:l,footerContent:f}),e[10]=c,e[11]=l,e[12]=u,e[13]=f,e[14]=m):m=e[14],m}const Umt=Object.freeze(Object.defineProperty({__proto__:null,PostSharingErrorModal:Lze,generateImageGenShareLink:yq,getShareClickBehaviorVariant:x3,shareConversationPost:jze,useOpenPostSharingModal:Pze,usePostSharingErrorMessage:Sq},Symbol.toStringTag,{value:"Module"})),$mt=async(t,e,s,n,o,a="mouse",i)=>{var v,S;const l=Se.getConversationTurns(Tt(e)),c=l[s];if(!c)return Promise.reject();const u=c.role===ot.User?c.userContinuationRootTurnId:void 0,d=u!=null?l.filter(C=>C.role===ot.User&&C.userContinuationRootTurnId===u):[c],f=(v=d[0])!=null?v:c,m=d.length>1?U(T({},f),{messages:d.flatMap(C=>C.messages)}):c,{messages:p}=m,g=o,h=((S=p[0])==null?void 0:S.author.role)===ot.User,_=g.metaKey||g.altKey,b=await jVe(m,i,e,{unprocessed:_||h});await Jo(b,n,o);const y=Rt(e);y&&(t0(t,{messageId:p[0].id,type:"copy",serverThreadId:y,selectedText:xo(p[0]),source:a,location:"message",contentType:"text"}),B.logStructuredEvent(Qee,{conversationId:y,messageId:p[0].id}))};function Hmt(t,e){var m,p,g,h;const[s,n,o]=Qe(t,_=>[Se.getIsNewConversation(_),Se.getRequestId(_),wD(_)]),a=Sr(n),i=hGe(),l=!ut(),c=((m=e==null?void 0:e.metadata)==null?void 0:m.b1de6e2_s)||((p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_rm),u=!!((g=e==null?void 0:e.metadata)!=null&&g.n7jupd_message),d=!!((h=e==null?void 0:e.metadata)!=null&&h.image_gen_async);return!s&&!a&&!i.displayingSideBySideFeedback&&!l&&!o&&!u&&!d&&!c}async function Gmt(t,e,s){try{await t()}catch(n){e(n)}finally{s()}}function Dze({audioAssetPointer:t,conversationId:e}){const s=Gt(),[n,o]=x.useState(!1),a=x.useRef(!0),[i,l]=x.useState(void 0),c=x.useRef(null),u=lw(),d=cw(g=>g.isPlaying&&g.sourceUrl===i),f=x.useCallback(()=>{const g=Qv();if(g)c.current?c.current.then(()=>{g.stop(),c.current=null}):g.stop();else return},[]);x.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),x.useEffect(()=>()=>{e9().isPlaying&&f()},[f]);const m=x.useCallback(async()=>{if(!u||!a.current)return;o(!0);const{url:g}=await jl.fetch(s,{asset:t,conversationId:e});o(!1),l(g),u.changeSource(g),c.current=u.play()},[t,e,u,s]);return{togglePlayback:x.useCallback(()=>{if(u)d?f():(Jt.messagePlayback.click(),m());else return},[d,m,u,f]),isPlaying:d,isLoading:n}}const Cq=x.createContext({isLoading:!1,isPlaying:!1,togglePlayback:()=>{throw new Error("Invalid usage outside of VoicePlaybackContext")},mode:"readAloud"});function Fze({children:t,audioAssetPointer:e,conversationId:s}){const{isLoading:n,isPlaying:o,togglePlayback:a}=Dze({audioAssetPointer:e,conversationId:s});return r.jsx(Cq.Provider,{value:x.useMemo(()=>({isLoading:n,isPlaying:o,togglePlayback:a,mode:"audioAsset"}),[n,o,a]),children:t})}function Bze({children:t,conversationId:e,messageId:s}){const{isLoading:n,isPlaying:o,togglePlayback:a}=NNe({conversationId:e,messageId:s});return r.jsx(Cq.Provider,{value:x.useMemo(()=>({isLoading:n,isPlaying:o,togglePlayback:a,mode:"readAloud"}),[n,o,a]),children:t})}function Vmt({children:t,enable:e,lastMessage:s,serverThreadId:n}){if(!e||!s||!n)return t;const o=gr.getAudioAssetPointers(s)[0];return o?r.jsx(Fze,{conversationId:n,audioAssetPointer:o,children:t}):r.jsx(Bze,{conversationId:n,messageId:s.id,children:t})}function zmt({onAnticipateEdit:t,onEnterEdit:e}){const s=ne();return r.jsx(Wd,{label:s.formatMessage({id:"gG9rea",defaultMessage:"Edit message"}),icon:Qc,onClick:e,onBeforeClick:t})}function Wmt({message:t,clientThreadId:e,turnIndex:s,referenceMessageId:n,responseComplete:o}){var p,g;const a=G(),i=Et(a,e),l=dg("n7jupdSources"),c=Cp(),u=(p=t==null?void 0:t.metadata)==null?void 0:p.async_task_id,d=t&&((g=t.metadata)==null?void 0:g.open_tabs)&&t.metadata.open_tabs.length>0,f=(()=>{var b,y,v;if(!t)return[];const h=(b=t.metadata)!=null?b:{},_=[...(y=h.content_references)!=null?y:[],...Object.values((v=h.content_references_by_file)!=null?v:{}).flat()];return _.length===0?[]:_.flatMap(S=>{var C,w,k,E;switch(S.type){case"webpage":case"webpage_extended":return S.url?[S.url]:[];case"grouped_webpages":return(w=(C=S.items)==null?void 0:C.map(M=>M.url).filter(Boolean))!=null?w:[];case"file":return S.cloud_doc_url?[S.cloud_doc_url]:[];case"image_inline":{const M=(E=S.clicked_from_url)!=null?E:(k=S.asset_pointer_links)==null?void 0:k[0];return M?[M]:[]}default:return[]}})})();x.useEffect(()=>{if(u)return Bn.retainTaskStream(u),()=>{Bn.releaseTaskStream(u)}},[u]);const m=x.useCallback(()=>{GB(i,{type:"n7jupdSources",turnIndex:s||1,messageId:n},l)},[i,l,s,n]);return!o||f.length===0||d?null:r.jsx(V$,{sourcesUrls:f,onClick:()=>{m()},className:z("mt-0! mb-0!",c&&"cursor-default")})}const qmt=({clientThreadId:t})=>{const e=Rt(t),s=Qe(t,n=>Se.findNode(n,o=>{var a;return!!((a=o.message.metadata)!=null&&a.visited_risky_domain)}));return x.useEffect(()=>{if(!e||!s)return;const n=setInterval(()=>{document.visibilityState==="visible"&&de.safePost("/conversation/{conversation_id}/agent/notify_viewing",{parameters:{path:{conversation_id:e}}})},1e3);return()=>clearInterval(n)},[e,s]),null},Uze="Continue",Kmt=({clientThreadId:t,messages:e})=>{const s=G(),n=Et(s,t),o=x.useMemo(()=>e.some(u=>{var d;return((d=u.metadata)==null?void 0:d.stop_reason)===Jee.RiskyDomainNotWatching}),[e]),a=z3e(n.id),{selectedSources:i}=Da(n.id),[l,c]=x.useState(!1);return r.jsx(Ft,{testId:"modal-watch-mode-stopped",isOpen:o&&!l,type:"success",size:"normal",onClose:Tn,className:"p-1",title:r.jsx("div",{className:"font-semibold",children:r.jsx(j,{id:"8FmSDC",defaultMessage:"Task paused while you were away"})}),primaryButton:r.jsx(ke,{onClick:()=>{Ao({conversation:n,eventSource:"mouse",promptMessage:cn(Uze,T({system_hints:[Pn]},i&&{selected_sources:fl(i)})),completionMetadata:{systemHints:[Pn],conversationMode:{kind:Pt.PrimaryAssistant}}})},children:r.jsx(j,{id:"4rrYz9",defaultMessage:"Resume"})}),secondaryButton:r.jsx(ke,{color:"secondary",onClick:()=>c(!0),children:r.jsx(j,{id:"yg+V5e",defaultMessage:"Stay paused"})}),children:r.jsx(j,{id:"Wdb/cy",defaultMessage:"ChatGPT is working with {riskyDomain}, which contains sensitive data. To resume, keep your browser's tab open and monitor actions.",values:{riskyDomain:r.jsx("span",{className:"font-medium",children:a})}})})},wq=ue(ws,"6b0d8c",20,20);var er=(t=>(t[t.Classifier=0]="Classifier",t[t.Conversation=1]="Conversation",t[t.ShortQuery=2]="ShortQuery",t))(er||{});function $ze(t){switch(t){case 0:return"navlinks_shown_cl";case 1:return"navlinks_shown_co";case 2:return"navlinks_shown_sq"}}function Hze(t,e,s,n,o,a){var m,p;if(!s)return;const i=t,l=e,c=s.getStartTime(),u={initialWindowStyle:a};if(s.logTimingOnce("navlinks_shown",{overrideDurationMs:i-c,context:u}),o!==void 0){const g=$ze(o);s.logTimingOnce(g,{overrideDurationMs:i-c,context:u}),$e.count(He.DEFAULT,"navlinks_show_decision_counter",[{key:"source",value:g}])}if(!n)return;let d=0;n.requestedTimeUnixEpochMs!==void 0&&(d=l-(n==null?void 0:n.requestedTimeUnixEpochMs)-(i-c),s.logTimingOnce("navlinks_before_js",{overrideDurationMs:d,context:u}),s.logTimingOnce("navlinks_shown_total",{overrideDurationMs:l-(n==null?void 0:n.requestedTimeUnixEpochMs),context:u}));const f=o===er.Classifier;if(n.lastStartFetch!==void 0&&n.firstStartFetch!==void 0&&n.firstNavlinkFetched!==void 0){const g=Math.max(f&&n.firstClassifierFetched!==void 0?n.firstClassifierFetched-n.lastStartFetch:0,0);let h=Math.max(Math.min(n.lastStartFetch-n.firstStartFetch,n.firstNavlinkFetched-n.firstStartFetch),0);o===er.Conversation&&(h=0),s.logTimingOnce("navlinks_typeahead_savings",{overrideDurationMs:h,context:u}),s.logTimingOnce("navlinks_typeahead_savings_adj",{overrideDurationMs:Math.max(h-g,0),context:u})}if(n.firstRoundtripTime!==void 0&&n.firstStartFetch!==void 0&&s.logTimingOnce("navlinks_roundtrip_latency",{overrideDurationMs:n.firstRoundtripTime-n.firstStartFetch,context:u}),n.firstNavlinkFetched!==void 0&&n.firstStartFetch!==void 0&&s.logTimingOnce("navlinks_first_fetch_latency",{overrideDurationMs:n.firstNavlinkFetched-n.firstStartFetch,context:u}),n.firstClassifierFetched!==void 0&&n.lastStartFetch!==void 0&&s.logTimingOnce("navlinks_classifier_latency",{overrideDurationMs:n.firstClassifierFetched-n.lastStartFetch,context:u}),n.requestedTimeUnixEpochMs){const g=Math.max((m=n.firstNavlinksFetchedTS)!=null?m:0,f&&(p=n.firstClassifierFetchedTS)!=null?p:0,n.requestedTimeUnixEpochMs);let h=l-g;o===er.Conversation&&(h=d),s.logTimingOnce("navlinks_wait_for_ui",{overrideDurationMs:h,context:u})}}function Gze(t){const e=/^(\S+\s+followers  )\S+\s+following  \S+\s+posts  @[A-Za-z0-9._]+:\s*(.+)$/,s=t.match(e);return s?r.jsxs("span",{children:[r.jsx("span",{className:"text-token-text-tertiary",children:s[1]}),s[2]]}):t}function Vze(t){return Object.values(t.reduce((e,s)=>{const n=s.domain;return e[n]||(e[n]=[]),e[n].push(s),e},{}))}const t5=new Set,Mv=new Map;function zze(t){"use forget";const e=F.c(35),{content:s,clientThreadId:n,navlinksShowDecisionSource:o,analytics:a,query:i}=t,l=G(),{navlinks:c,navlinks_ready:u}=s.widgets;let d;e[0]!==n?(d={namespace:cg.SuperWidget,clientThreadId:n},e[0]=n,e[1]=d):d=e[1];const{profiler:f,isRequestActive:m}=o$(d),p=ne();let g;e[2]!==l?(g=()=>yr(l),e[2]=l,e[3]=g):g=e[3];const h=oe(g),_=x.useRef(!1);let b;e[4]!==l?(b=Q9(l),e[4]=l,e[5]=b):b=e[5];const v=b&&c&&c.length>0;if(v&&i!=null){const D="".concat(n,"_").concat(i);Mv.has(D)||Mv.set(D,{perf:performance.now(),unix:Date.now()})}let S,C;e[6]!==a||e[7]!==v||e[8]!==n||e[9]!==l||e[10]!==m||e[11]!==o||e[12]!==f||e[13]!==i?(S=()=>{if(v&&f&&m&&!_.current&&i!=null){const D="".concat(n,"_").concat(i),H=Mv.get(D);!t5.has(D)&&H&&(t5.add(D),_.current=!0,Hze(H.perf,H.unix,f,a,o,Zee()))}},C=[v,f,m,o,a,i,n,l],e[6]=a,e[7]=v,e[8]=n,e[9]=l,e[10]=m,e[11]=o,e[12]=f,e[13]=i,e[14]=S,e[15]=C):(S=e[14],C=e[15]),x.useEffect(S,C);let w,k;e[16]!==v?(w=()=>{v&&B.logStructuredEvent(Ad,{step:Id.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:mi.ATLAS_NAVLINKS_SOURCE_CHAT_LIST})},k=[v],e[16]=v,e[17]=w,e[18]=k):(w=e[17],k=e[18]),x.useEffect(w,k);const[,E]=Cg();let M;e[19]!==E?(M=()=>{B.logStructuredEvent(Ad,{step:Id.ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE,source:mi.ATLAS_NAVLINKS_SOURCE_CHAT_LIST}),E({tabType:Dt.Search})},e[19]=E,e[20]=M):M=e[20];const N=M;if(!v)return null;const A=c.length>0?c[0]:null;let I;e[21]!==A?(I=r.jsx(s5,{index:0,navlink:A}),e[21]=A,e[22]=I):I=e[22];const P=c.length>1?c[1]:null;let R;e[23]!==P?(R=r.jsx(s5,{index:1,navlink:P}),e[23]=P,e[24]=R):R=e[24];let O;e[25]!==N||e[26]!==p||e[27]!==h||e[28]!==c.length||e[29]!==u?(O=h&&r.jsxs("button",{onClick:N,"aria-label":p.formatMessage({id:"cwfmIN",defaultMessage:"See more links"}),className:z("text-token-text-tertiary flex flex-col items-center justify-center gap-1 self-stretch rounded-xl",h?"hover:bg-token-bg-tertiary bg-(--bg-quaternary) px-6":"bg-token-bg-tertiary hover:bg-token-bg-secondary px-4"),children:[r.jsx(wq,{}),r.jsx("span",{className:"min-h-[20px] text-sm",children:u?c.length:null})]}),e[25]=N,e[26]=p,e[27]=h,e[28]=c.length,e[29]=u,e[30]=O):O=e[30];let L;return e[31]!==I||e[32]!==R||e[33]!==O?(L=r.jsxs("div",{className:"flex gap-2 pt-1",children:[I,R,O]}),e[31]=I,e[32]=R,e[33]=O,e[34]=L):L=e[34],L}function s5({index:t,navlink:e,linkTarget:s="_self"}){var l;const n=G(),o=oe(()=>yr(n)),a=()=>{B.logStructuredEvent(Ad,{step:Id.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:mi.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL,navlinkIndex:t})},i=["flex-1 rounded-xl",o?"hover:bg-token-bg-tertiary min-h-[76px] bg-(--bg-quaternary)":"bg-token-bg-tertiary hover:bg-token-bg-secondary min-h-[64px]"];return e?r.jsx(kz,{favicon:r.jsx(Kn,{url:e.url,size:32,minSize:16,applySizeToImg:!1,showLoadingAnimation:!0,className:"h-4 w-4 shrink-0 rounded-full border-1 border-gray-200"}),heading:e.title,title:null,quoteHeading:null,quoteText:null,snippet:(l=e.snippet)!=null?l:null,isContentBlocked:!1,contentContainerClassName:"rounded-xl!",theme:"white",children:r.jsxs(qn,{href:e.url,target:s,onClick:a,className:z(i,"flex flex-col gap-1 px-4 py-3 select-none"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kn,{url:e.url,size:32,minSize:16,applySizeToImg:!1,className:"bg-token-bg-secondary! h-4 w-4 shrink-0 rounded-full",showLoadingAnimation:!0}),r.jsx("span",{className:"text-token-text-tertiary line-clamp-1 text-sm",children:r.jsxs("span",{children:[e.domain,"  ",e.title]})})]}),r.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:e.snippet?Gze(e.snippet):e.title})]})}):r.jsx("div",{className:z(i,"loading-results-shimmer")})}const Wze=new Set(["lynx","cache"]),KS=new Set(["ocelot","caracal"]),n5=10,qze=2,Kze=t=>{var s;return t.source&&KS.has(t.source)?!0:((s=t.sources)!=null?s:[]).some(n=>KS.has(n))};function ym(t,e,s=!1){var l,c,u;const n=T({},e),o=[],a=[],i=[];for(const d of t){let f=!1;for(let m=0;m<1+((c=(l=d.sources)==null?void 0:l.length)!=null?c:0);m++){const p=m===0?d.source:(u=d.sources)==null?void 0:u[m-1],g=p!=="fast"?p:"cache",h=g!==void 0?[g]:[];if(g!==void 0&&Wze.has(g)&&h.push("fast"),g!==void 0&&KS.has(g)&&h.push("high-quality"),!h.some(_=>n[_]!==void 0&&n[_]<=0)){h.forEach(_=>{n[_]!==void 0&&n[_]--}),o.push(d),f=!0;break}}f||(Kze(d)?a:i).push(d)}if(s&&o.length<n5){const d=n5-o.length,f=new Set(o.map(g=>g.url)),m=(g,h)=>{let _=0;for(const b of g){if(_>=h)break;f.has(b.url)||(o.push(b),f.add(b.url),_++)}return _},p=m(a,d);p<d&&m(i,d-p)}return o}const kq=ys(t=>{const s=js(t,"3205212221").get("max_navlinks",void 0);let n;if(s&&typeof s=="object"&&!Array.isArray(s)){n={};for(const[o,a]of Object.entries(s))typeof a=="number"&&(n[o]=a)}return(!n||Object.keys(n).length===0)&&(n={fast:qze}),n}),Tq=ue(Ce,"0c7b3e",20,20),Yze=ue(ws,"b0fc5a",20,20),Qze=ue(ws,"b15d71",20,20),Jze=ue(ws,"3be169",20,20);function wg(t){switch(t){case Dt.Search:return wq;case Dt.Images:return Yze;case Dt.Videos:return Jze;case Dt.News:return Qze;case Dt.Chat:return null}}function Kd({IconComponent:t=Tq,className:e,children:s}){return r.jsxs("div",{className:z("bg-token-bg-tertiary flex min-h-[160px] flex-col items-center justify-center gap-3 rounded-3xl",e),children:[r.jsx(t,{className:"icon-xl text-token-text-tertiary"}),r.jsx("div",{className:"text-token-text-tertiary text-center",children:s})]})}function Eq(t){"use forget";const e=F.c(22),{content:s,isAdultSearchEnabled:n,turnIndex:o,isLatestTurn:a,descriptionClassName:i,source:l,className:c}=t,u=l===void 0?"searchTab":l,{navlinks:d,navlinks_ready:f,safe_search_off:m,safety:p}=s.widgets,g=G();let h;e[0]!==g?(h=kq(g),e[0]=g,e[1]=h):h=e[1];const _=h,b=d&&d.length>0,v=b&&(p!=="adult"||!!m==!!n||!m&&!a||m===void 0)?zi([],ym(d,_,f),!1):[],S=v.length>0;let C,w;if(e[2]!==S||e[3]!==u||e[4]!==o?(C=()=>{S&&(B.logStructuredEvent(Ad,{step:Id.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:u==="navlinks"?mi.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:mi.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB}),u==="searchTab"&&B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:So.ATLAS_SUPER_WIDGET_TAB_SEARCH,turnIndex:o}))},w=[S,u,o],e[2]=S,e[3]=u,e[4]=o,e[5]=C,e[6]=w):(C=e[5],w=e[6]),x.useEffect(C,w),!S){let I;e[7]===Symbol.for("react.memo_cache_sentinel")?(I=wg(Dt.Search),e[7]=I):I=e[7];const P=I,R=b,O=R?"min-h-[120px]!":"";let L;e[8]!==R?(L=R?r.jsx(j,{id:"MFLPAn",defaultMessage:"No links to show"}):r.jsx(j,{id:"dOHukr",defaultMessage:"No links found"}),e[8]=R,e[9]=L):L=e[9];let D;return e[10]!==O||e[11]!==L?(D=r.jsx(Kd,{IconComponent:P,className:O,children:L}),e[10]=O,e[11]=L,e[12]=D):D=e[12],D}const k=tWe(v);let E;e[13]!==c?(E=z("@w-sm/main:-mx-4 -mx-2 flex flex-col gap-3",c),e[13]=c,e[14]=E):E=e[14];let M;e[15]!==i||e[16]!==u||e[17]!==o?(M=(I,P)=>r.jsx(Zze,{groupIndex:P,navlinks:I,source:u,turnIndex:o,descriptionClassName:i},P),e[15]=i,e[16]=u,e[17]=o,e[18]=M):M=e[18];const N=k.map(M);let A;return e[19]!==E||e[20]!==N?(A=r.jsx("div",{className:E,children:N}),e[19]=E,e[20]=N,e[21]=A):A=e[21],A}function Zze(t){"use forget";const e=F.c(13),{groupIndex:s,navlinks:n,source:o,turnIndex:a,descriptionClassName:i}=t,l=n[0];let c;if(e[0]!==i||e[1]!==s||e[2]!==l||e[3]!==n||e[4]!==o||e[5]!==a){const u=n.slice(1);let d;e[7]!==i||e[8]!==s||e[9]!==l||e[10]!==o||e[11]!==a?(d=r.jsx(Xze,{navlinkIndex:s,mainNavlink:l,source:o,turnIndex:a,descriptionClassName:i}),e[7]=i,e[8]=s,e[9]=l,e[10]=o,e[11]=a,e[12]=d):d=e[12],c=r.jsxs("div",{className:"flex flex-col",children:[d,u.length>0&&r.jsx("div",{className:"ms-4 flex flex-col",children:u.map((f,m)=>r.jsx(eWe,{navlinkIndex:s+1+m,navlink:f,source:o,descriptionClassName:i},f.url))})]}),e[0]=i,e[1]=s,e[2]=l,e[3]=n,e[4]=o,e[5]=a,e[6]=c}else c=e[6];return c}function Xze(t){"use forget";const e=F.c(11),{mainNavlink:s,navlinkIndex:n,source:o,turnIndex:a,descriptionClassName:i}=t;let l;e[0]!==n||e[1]!==o||e[2]!==a?(l=()=>{B.logStructuredEvent(Ad,{step:Id.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:o==="navlinks"?mi.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:mi.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:n}),o==="searchTab"&&B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:So.ATLAS_SUPER_WIDGET_TAB_SEARCH,turnIndex:a})},e[0]=n,e[1]=o,e[2]=a,e[3]=l):l=e[3];const c=l;let u;return e[4]!==i||e[5]!==c||e[6]!==s.domain||e[7]!==s.snippet||e[8]!==s.title||e[9]!==s.url?(u=r.jsx(w0,{url:s.url,domain:s.domain,title:s.title,description:s.snippet,descriptionClassName:i,onLogClick:c}),e[4]=i,e[5]=c,e[6]=s.domain,e[7]=s.snippet,e[8]=s.title,e[9]=s.url,e[10]=u):u=e[10],u}function eWe(t){"use forget";const e=F.c(19),{navlink:s,navlinkIndex:n,source:o,descriptionClassName:a}=t,i=x.useRef(!1);let l;e[0]!==n||e[1]!==o?(l=()=>{B.logStructuredEvent(Ad,{step:Id.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:o==="navlinks"?mi.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:mi.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:n})},e[0]=n,e[1]=o,e[2]=l):l=e[2];const c=l;let u,d;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=()=>i.current=!1,d=()=>i.current=!0,e[3]=u,e[4]=d):(u=e[3],d=e[4]);let f;e[5]!==c?(f=_=>i.current?(i.current=!1,_.preventDefault()):c(),e[5]=c,e[6]=f):f=e[6];let m;e[7]!==s.title?(m=r.jsx("div",{className:"mb-1 truncate text-base font-medium text-[var(--interactive-label-accent-default)]",children:s.title}),e[7]=s.title,e[8]=m):m=e[8];let p;e[9]!==a||e[10]!==s.snippet?(p=s.snippet&&r.jsx("div",{className:z("text-token-text-secondary mb-1 truncate text-sm font-normal",a),children:s.snippet}),e[9]=a,e[10]=s.snippet,e[11]=p):p=e[11];let g;e[12]!==m||e[13]!==p?(g=r.jsxs("div",{className:"flex flex-col",children:[m,p]}),e[12]=m,e[13]=p,e[14]=g):g=e[14];let h;return e[15]!==s.url||e[16]!==f||e[17]!==g?(h=r.jsx(qn,{href:s.url,target:"_self",className:"hover:bg-token-interactive-bg-secondary-hover ms-2.5 flex flex-col rounded-xl px-4 py-2.5",draggable:!1,onMouseDown:u,onMouseMove:d,onClick:f,children:g},s.url),e[15]=s.url,e[16]=f,e[17]=g,e[18]=h):h=e[18],h}function tWe(t){return Object.values(t.reduce((e,s)=>{const n=s.domain;return e[n]||(e[n]=[]),e[n].push(s),e},{}))}const sWe=4,Ymt=t=>{"use forget";const e=F.c(19),{clientThreadId:s,query:n,className:o,state:a,isAssistantResponseSuppressed:i}=t,[,l]=Cg(),{showNavlinksWidget:c,showLongList:u,navlinksOptimistic:d,navlinksReady:f,imagesOptimistic:m,videosOptimistic:p,newsOptimistic:g,showReason:h,analytics:_}=a;if(!c)return null;const b=!i&&"mb-8";let y;e[0]!==o||e[1]!==b?(y=z(b,o),e[0]=o,e[1]=b,e[2]=y):y=e[2];let v;e[3]!==_||e[4]!==s||e[5]!==m||e[6]!==i||e[7]!==l||e[8]!==d||e[9]!==f||e[10]!==g||e[11]!==n||e[12]!==u||e[13]!==h||e[14]!==p?(v=u?r.jsxs(r.Fragment,{children:[r.jsx(Eq,{content:{content_type:bt.SuperWidget,widgets:{navlinks:d.slice(0,sWe),images:m,videos:p,news:g,navlinks_ready:f}},className:"pt-1",descriptionClassName:"line-clamp-1",source:"navlinks",turnIndex:0}),r.jsxs("div",{className:"@w-sm/main:-mx-4 -mx-2",children:[r.jsx("div",{className:"mt-3 mb-6 flex w-full items-center justify-between px-4",children:r.jsx("button",{type:"button",onClick:()=>l({tabType:Dt.Search}),className:"text-token-text-primary text-sm hover:underline",children:r.jsx(j,{id:"navlinks.showAllSearchResults",defaultMessage:"Show all search results"})})}),!i&&r.jsx("hr",{className:"mx-4"})]})]}):r.jsx(zze,{content:{content_type:bt.SuperWidget,widgets:{navlinks:d,images:m,videos:p,news:g,navlinks_ready:f}},clientThreadId:s,navlinksShowDecisionSource:h,analytics:_,query:n}),e[3]=_,e[4]=s,e[5]=m,e[6]=i,e[7]=l,e[8]=d,e[9]=f,e[10]=g,e[11]=n,e[12]=u,e[13]=h,e[14]=p,e[15]=v):v=e[15];let S;return e[16]!==y||e[17]!==v?(S=r.jsx("div",{id:"navlinks-content",className:y,children:v}),e[16]=y,e[17]=v,e[18]=S):S=e[18],S};function nWe(t){return t.split(new RegExp("[^\\p{L}\\p{N}]+","u")).filter(Boolean).length}const oWe=ys(t=>{let s=js(t,"3205212221").get("numWords",3);const n=_o(t,"999809785").get("numWordsShowNavlinks",-1);return n!==-1&&(s=n),s});function aWe(t){return oWe(t)}function Qmt({conversation:t,threadContent:e,query:s,triggeredSearch:n,messageGroups:o,allMessages:a,isAdultSearchEnabled:i}){"use no forget";var ae,se,ee,re,he,fe,pe,le,ve,Te,xe,ce,we,ge,Ae,Ue,Ie;const l=G(),c=aWe(l),u=nWe(s!=null?s:""),d=yme(s!=null?s:"",i),f=d.safety===Wi.ADULT||((ae=e==null?void 0:e.widgets)==null?void 0:ae.safety)==="adult",m=!!d.safeSearchOff||!!((se=e==null?void 0:e.widgets)!=null&&se.safe_search_off),p=i===void 0||((ee=e==null?void 0:e.widgets)==null?void 0:ee.safe_search_off)===void 0||((re=e==null?void 0:e.widgets)==null?void 0:re.safe_search_off)===i,g=x.useMemo(()=>{var Me;return p?(Me=e==null?void 0:e.widgets)==null?void 0:Me.navlinks:[]},[p,(he=e==null?void 0:e.widgets)==null?void 0:he.navlinks]),h=(fe=Qo(a))==null?void 0:fe.id,_=x.useEffectEvent(()=>{Xee.set(t,{messageId:h!=null?h:"",safeSearchOff:m!=null?m:!1})});x.useEffect(()=>{!f||!h||_()},[f,h]);const b=u>0&&u<=c&&!d.isNoForceSearch&&d.navlinks.length>0,y=d.isNavlinkIntent===!0||d.safety===Wi.ADULT||!!((pe=e==null?void 0:e.widgets)!=null&&pe.is_navlinks_emphasize)||((le=e==null?void 0:e.widgets)==null?void 0:le.safety)==="adult",v=x.useMemo(()=>kq(l),[l]),[S,C]=x.useState(ym(zi([],g&&g.length>0?g:d.navlinks,!0),v)),[w,k]=x.useState((ve=e==null?void 0:e.widgets)!=null&&ve.images&&e.widgets.images.length>0?e.widgets.images:d.images),[E,M]=x.useState((Te=e==null?void 0:e.widgets)!=null&&Te.videos&&e.widgets.videos.length>0?e.widgets.videos:d.videos),[N,A]=x.useState((xe=e==null?void 0:e.widgets)!=null&&xe.news&&e.widgets.news.length>0?e.widgets.news:d.news),[I,P]=x.useState({show:!d.isForceHide&&(b||d.isSearchLikely===!0||y||n),showReason:b?er.ShortQuery:d.isSearchLikely===!0?er.Classifier:n?er.Conversation:void 0}),R=x.useRef({navlinks:g&&g.length>0?"thread":d.navlinks.length>0?"prefetched":null,images:(ce=e==null?void 0:e.widgets)!=null&&ce.images&&e.widgets.images.length>0?"thread":d.images.length>0?"prefetched":null,videos:(we=e==null?void 0:e.widgets)!=null&&we.videos&&e.widgets.videos.length>0?"thread":d.videos.length>0?"prefetched":null,news:(ge=e==null?void 0:e.widgets)!=null&&ge.news&&e.widgets.news.length>0?"thread":d.news.length>0?"prefetched":null}),O=R.current.navlinks==="prefetched"?((Ue=(Ae=d.fetchingStatus)==null?void 0:Ae.navlinks)==null?void 0:Ue.status)===si.DONE:((Ie=e==null?void 0:e.widgets)==null?void 0:Ie.navlinks_ready)===!0,L=S.length>0?S:ym(d.navlinks,v),D=w.length>0?w:d.images,H=E.length>0?E:d.videos,V=N.length>0?N:d.news,q=!d.isForceHide&&(I.show||d.isSearchLikely===!0||y||n),W=(Me,te)=>{const Q=ym(zi(S,Me,!0),v,te);C(Q)};x.useEffect(()=>{var Q,ie,_e,ye,Re;if(!d)return;function Me({prefetchedData:Ve,threadData:ze,sourceType:Fe,setData:be,isFinalPrefetched:Oe,isFinalThread:qe}){const Ze=R.current[Fe];function st(rt){return Array.isArray(rt)&&rt.length>0}st(ze)&&(!Ze||Ze==="thread")?(R.current[Fe]="thread",be(ze,qe)):st(Ve)&&(!Ze||Ze==="prefetched")&&(R.current[Fe]="prefetched",be(Ve,Oe))}Me({prefetchedData:d.navlinks,threadData:g,sourceType:"navlinks",setData:W,isFinalPrefetched:((ie=(Q=d.fetchingStatus)==null?void 0:Q.navlinks)==null?void 0:ie.status)===si.DONE,isFinalThread:((_e=e==null?void 0:e.widgets)==null?void 0:_e.navlinks_ready)===!0}),Me({prefetchedData:d.images,threadData:(ye=e==null?void 0:e.widgets)==null?void 0:ye.images,sourceType:"images",setData:k}),Me({prefetchedData:d.videos,threadData:(Re=e==null?void 0:e.widgets)==null?void 0:Re.videos,sourceType:"videos",setData:M}),Me({prefetchedData:d.news,threadData:e==null?void 0:e.widgets.news,sourceType:"news",setData:A}),(d.isSearchLikely||n||b)&&!I.show&&!d.isForceHide&&P({show:!0,showReason:b?er.ShortQuery:d.isSearchLikely?er.Classifier:er.Conversation})},[d,e,n,b]),x.useEffect(()=>{var ie;const Me=R.current.navlinks,te=Me==="prefetched"&&d.safeSearchOff!==i,Q=Me==="thread"&&((ie=e==null?void 0:e.widgets)==null?void 0:ie.safe_search_off)!==i;if(S.length===0&&!d||te||Q){const _e=g&&g.length>0,ye=_e?g:d.safeSearchOff===i?d.navlinks:[];if(ye.length===0)return;R.current.navlinks=_e?"thread":"prefetched",C(ym(zi([],ye,!0),v))}},[d,e,i,g,v,S.length]);const $=q&&L.length>0,Z=ABe(t.id,void 0),K=Z!==cW?Z:null,Y=x.useMemo(()=>rWe(n,o,a),[n,o,a]);return{showNavlinksWidget:$,showLongList:y,showReason:I.showReason,isClassifiedAdult:f,isSafeSearchOff:m,navlinksOptimistic:L,navlinksReady:O,imagesOptimistic:D,videosOptimistic:H,newsOptimistic:V,analytics:d.analytics,title:K,header:Y}}function rWe(t,e,s){const n=s.findLast(u=>J3(u).length>0),o=J3(n);let a=!1,i,l=-1;for(let u=0;u<e.length;u++)if(e[u].type===ei.SearchGPTQuery){l=u,a=!0;break}if(a)for(let u=e.length-1;u>l;u--){const d=e[u];if(d.type===ei.Text||d.type===ei.CoTSearchTool){i=d.messages[0];break}}return{showSearchGPTQuery:t&&a&&(!i||!sw(i)),nextMessage:i,searchResultGroups:o}}const o5=[1,2,3,4,10,20,30],iWe=1,lWe=["g-67e595af0a408191b84ee532fca12cd1","g-67ec3b78892481918c89067962526695","g-67ec3b4988f8819184c5454e18f5e84b","g-67ec3ad40750819181ccffa6a6f050d5","g-67edaaa3d3a081918205d0c470f00a32","g-67edab030ac881918ce8fa5c75a8e1b3","g-67edab2fc0f48191881a20ac98fedf6f","g-67edab4a24fc8191b975acaa8da2dcef"];function cWe({clientThreadId:t,isInline:e=!1}){var Y,ae;const s=G(),n=Et(s,t),o=Sa(mr.isBusinessWorkspace),a=ete(s),i=x.useRef(!1),l=Bs(t),[c,u,d,f]=Qe(t,se=>[se==null?void 0:se.mode,Se.getRequestId(se),Se.getConversationLastTurn(se),Se.getConversationTurns(se).filter(ee=>ee.role===ot.Assistant).length]),m=oe(()=>{var se;return((se=Sl(n))==null?void 0:se.value)===Xt.STREAMING}),p=!ut(),g=x.useMemo(()=>{if(!l)return-1;const se=tte(l);return se()>iWe?-1:o5[Math.floor(se()*o5.length)]},[l]),h=Sr(u),_=((Y=jx(t))==null?void 0:Y.value)===Xt.STREAMING,b=m||h||_,y=function(){return Math.random()<.6?"default":"personality_v1"},[v,S]=x.useState(null),[C,w]=x.useState(!1),[k,E]=x.useState(!1),[M,N]=x.useState(!1),[A,I]=x.useState(y),P=(se,ee,re)=>{var fe;const he=(fe=d==null?void 0:d.messages[0])==null?void 0:fe.id;S(se),I(ee),V(he,se,ee,re)},R=(d==null?void 0:d.role)===ot.Assistant,O=d==null?void 0:d.messages.find(se=>{var ee;return(ee=se.metadata)==null?void 0:ee.async_task_id}),L=(ae=O==null?void 0:O.metadata)==null?void 0:ae.async_task_id,D=bi(se=>Um.getTask(L!=null?L:"",se)),H=!!(D&&$C(D)),V=x.useMemo(()=>di((se,ee,re,he)=>{l&&se&&(o&&a?EPe({rating:CE(ee),shown_at_assistant_turn:g,prompt:re},l,se):o||de.safePost("/conversation/{conversation_id}/rating",{parameters:{path:{conversation_id:l}},requestBody:{message_id:se,rating:ee,shown_at_assistant_turn:g,prompt:re,popup_ui_message:he},authOption:is.SendIfAvailable})),B.logEvent("Conversation Rating Submitted",{rating:ee,showAtAssistantTurn:g,conversationId:l,prompt:re,popupUiMessage:he}),w(!0),setTimeout(()=>{E(!0)},1500)},2e3),[o,a,l,g]),q=xn(s),W=ne(),$=x.useMemo(()=>A==="personality_v1"?W.formatMessage({id:"rating.instructions.personality_v1",defaultMessage:"Do you like this personality?"}):e?"Is this helpful so far?":"Is this conversation helpful so far?",[W,A,e]),Z=f!==g||b||H||!R||!!o&&!a||(c==null?void 0:c.kind)!==Pt.PrimaryAssistant&&(c==null?void 0:c.kind)!==Pt.FlyingCircusCustomization&&(c==null?void 0:c.gizmo_id)!==void 0&&!lWe.includes(c==null?void 0:c.gizmo_id)||M||p||q;x.useEffect(()=>{!Z&&!i.current&&(B.logEvent("Conversation Rating Shown",{showAtAssistantTurn:g,conversationId:l}),i.current=!0)},[Z]);const K=of();return M||!K.forceShowConvoRating&&Z?null:r.jsxs(r.Fragment,{children:[r.jsx(Ms,{children:C&&!k&&r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:r.jsx(a5,{$padded:!0,$fullRounded:e,children:r.jsx("span",{className:"text-token-text-tertiary text-sm",children:r.jsx(j,{id:"rating.thanks",defaultMessage:"Thanks for your feedback!"})})})},"submitted")}),!C&&r.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},children:r.jsxs(a5,{$padded:!1,$fullRounded:e,children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-4 px-4 py-2.5 text-sm whitespace-nowrap",children:[r.jsx("span",{children:$}),r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsx(Nv,{$selected:v==="thumbsUp",onClick:()=>P("thumbsUp",A,$),children:r.jsx(fq,{className:"icon"})}),r.jsx(Nv,{$selected:v==="thumbsDown",onClick:()=>P("thumbsDown",A,$),children:r.jsx(dq,{className:"icon"})})]})]}),!e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-token-main-surface-tertiary w-px flex-1 self-stretch"}),r.jsx(Nv,{className:"p-3",$selected:!1,onClick:()=>N(!0),children:r.jsx(Rn,{className:"icon text-token-text-secondary hover:text-token-text-primary"})})]})]})},"rating")]})}var PP;const Nv=Mt.button(PP||(PP=St(["\n  ","\n  hover:text-token-text-primary\n"])),t=>t.$selected?"text-token-text-primary":"text-token-text-secondary");var RP;const a5=Mt.div(RP||(RP=St(["inline-flex border border-gray-100 dark:border-gray-700\n","\n","\n"])),t=>t.$padded&&"py-2.5 px-4",t=>t.$fullRounded?"rounded-full":"rounded-xl"),uWe=Pe(()=>me(()=>import("./jma9zspxcel79hob.js"),__vite__mapDeps([430,1,3,4,258]))),dWe=Pe(()=>me(()=>import("./k9ksyvbl0xm4dv1o.js"),__vite__mapDeps([431,1,3,4,258])));function fWe(t){"use forget";var f,m;const{clientThreadId:e,canShowInlineMessageFeedback:s,messageForRating:n}=t,o=G(),a=ct(o),i=(f=a==null?void 0:a.isWorkspacePlan())!=null?f:!1,l=Qe(e,pWe),c=Bs(e),u=Sc(mWe),d=c===u;return l?"none":d&&c&&!i?"voice":(m=n.clientMetadata)!=null&&m.rating&&s?"inline":"conversation"}function mWe(t){return t.voiceFeedbackThread}function pWe(t){const e=Se.getConversationTurns(t);let s=0;for(let n=e.length-1;n>=0;n--){const o=e[n];if(o.messages.some(hWe))return!0;if(o.messages.some(gWe)&&s++,s>=3)break}return!1}function gWe(t){return t.author.role===ot.Assistant}function hWe(t){var e;return(e=t.metadata)==null?void 0:e.is_indepth_feedback}function Jmt(t){"use forget";const e=F.c(16),{clientThreadId:s,canShowInlineMessageFeedback:n,messageForRating:o,allGroupedMessages:a,currentModelId:i}=t,l=G(),c=zc(),u=Xe(l,"1030729005").get("chatgpt_message_feedback_consolidation_enabled",!1);let d;e[0]!==n||e[1]!==s||e[2]!==o?(d={clientThreadId:s,canShowInlineMessageFeedback:n,messageForRating:o},e[0]=n,e[1]=s,e[2]=o,e[3]=d):d=e[3];const f=fWe(d),m=Bs(s),{voiceName:p}=i0();if(f==="none")return null;let g=null;if(f==="voice"&&m&&!c){Jt.feedbackShown.success({voice:p});let _;e[4]!==m?(_=r.jsx("div",{className:"text-center",children:r.jsx(MLe,{serverThreadId:m})}),e[4]=m,e[5]=_):_=e[5],g=_}else if(f==="inline"){const _=u?dWe:uWe;let b;e[6]!==_||e[7]!==a||e[8]!==s||e[9]!==i||e[10]!==o?(b=r.jsx(_,{clientThreadId:s,conversationMessage:o,allGroupedMessages:a,currentModelId:i}),e[6]=_,e[7]=a,e[8]=s,e[9]=i,e[10]=o,e[11]=b):b=e[11],g=b}else if(f==="conversation"){let _;e[12]!==s?(_=r.jsx("div",{className:"text-center",children:r.jsx(cWe,{clientThreadId:s})}),e[12]=s,e[13]=_):_=e[13],g=_}let h;return e[14]!==g?(h=r.jsx("div",{className:"mt-3 w-full empty:hidden",children:g}),e[14]=g,e[15]=h):h=e[15],h}const _We=Pe(()=>me(()=>import("./dvm6s4g4zrws5ita.js"),__vite__mapDeps([432,1,3,4,433,258,136,39])).then(t=>t.CAFeedbackModal));function Zmt({clientThreadId:t,currentModelConfig:e}){const s=G(),n=ste(t),o=ZHe(e,n),a=Sa(mr.isBusinessWorkspace),i=oe(()=>Cs(Et(s,t))),l=mp(i,s);return{onChangeRating:x.useCallback(({nodeId:u,messageId:d,rating:f})=>{var h,_;const m=Rt(t);f&&B.logEvent("Rated Result",{id:d,threadId:m,rating:f,model:e==null?void 0:e.id});const p=Se.getTree(Tt(t)),g=p.getNodeByIdOrMessageId(u);if(m!==void 0&&(a&&Ee(s,"4147309512")?f&&TPe({rating:CE(f)},m,d):a||(f?de.safePost("/conversation/message_feedback",{requestBody:{message_id:d,conversation_id:m,rating:f},authOption:is.SendIfAvailable}):de.safeDelete("/conversation/message_feedback",{requestBody:{message_id:d,conversation_id:m},authOption:is.SendIfAvailable}))),nt(t,b=>{as.updateTree(b,y=>{y.updateNodeMetadata(u,{rating:f!=null?f:void 0})})}),f&&(o||l)){mt(s,_We,{citations:(_=(h=g.message.metadata)==null?void 0:h.citations)!=null?_:[],rating:f,conversationId:m!=null?m:"",messageId:d,conversationTree:p,nodeId:u,isGlaux:l});return}},[s,t,e==null?void 0:e.id,a,o,l])}}function Xmt(t){const{isCompletionRequestInProgress:e,isUserTurn:s,message:n}=t,o=ne(),a=x.useRef(e);x.useEffect(()=>{if(!e)return;let i;Bg.setLiveRegionAssertive(o.formatMessage({id:"0LFLpz",defaultMessage:"ChatGPT is generating a response..."}));const l=o.formatMessage({id:"uqqkLX",defaultMessage:"ChatGPT is still generating a response..."}),c=5e3;function u(){Bg.setLiveRegionAssertive(""),i=window.setTimeout(()=>{Bg.setLiveRegionAssertive(l),i=window.setTimeout(()=>u(),c)},1e3)}return i=window.setTimeout(u,c),()=>{window.clearTimeout(i)}},[e,o]),x.useEffect(()=>{var u,d,f;if(e||s||!n||!a.current){a.current=e;return}const{content:i}=n,l=(i.content_type===bt.Text,i),c=o.formatMessage({id:"lZ4dVJ",defaultMessage:"ChatGPT says: {message}"},{message:(f=(d=(u=l==null?void 0:l.parts)==null?void 0:u.join)==null?void 0:d.call(u,"\n"))!=null?f:""});Bg.setLiveRegionAssertive(c),a.current=!1},[s,e,o,n])}var Av,r5;function xWe(){if(r5)return Av;r5=1;function t(e,s){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!s(e[n],n,e))return!1;return!0}return Av=t,Av}var Iv,i5;function yWe(){if(i5)return Iv;i5=1;var t=nte();function e(s,n){var o=!0;return t(s,function(a,i,l){return o=!!n(a,i,l),o}),o}return Iv=e,Iv}var jv,l5;function bWe(){if(l5)return jv;l5=1;var t=xWe(),e=yWe(),s=VR(),n=YC(),o=QC();function a(i,l,c){var u=n(i)?t:e;return c&&o(i,l,c)&&(l=void 0),u(i,s(l,3))}return jv=a,jv}var vWe=bWe();const ept=en(vWe);var Pv,c5;function SWe(){if(c5)return Pv;c5=1;function t(e){return e&&e.length?e[0]:void 0}return Pv=t,Pv}var Rv,u5;function CWe(){return u5||(u5=1,Rv=SWe()),Rv}var wWe=CWe();const tpt=en(wWe);function kWe(t,e,s=!1){return Xe(t,"4170052905").get(e,s)}const TWe=t=>{const e=[];let s=null;const n={};Zo(()=>VB(t),d=>{d==null||d.forEach(f=>{var m;n[f.id]=(m=f.conversation_id)!=null?m:void 0})},{fireImmediately:!0});const o=d=>{de.safePost("/feed/interactions",{requestBody:{events:d}})},a=()=>{if(!s)return;const{cardId:d,openTimestamp:f}=s,m=(Date.now()-f)/1e3;e.push({type:"read_expanded",card_id:d,dwell_time_seconds:m,timestamp:new Date().toISOString()}),Gn(t).logEventWithStatsig("(Web) FYP Card Closed","chatgpt_web_fyp_card_closed",{card_id:d,dwell_time_seconds:m,conversation_id:n[d]}),s=null};return{trackCardOpen:d=>{(s==null?void 0:s.cardId)!==d&&(s&&a(),s={cardId:d,openTimestamp:Date.now()},Gn(t).logEventWithStatsig("(Web) FYP Card Opened","chatgpt_web_fyp_card_opened",{card_id:d,conversation_id:n[d]}),$e.count(He.PULSE,"chatgpt_web_fyp_card_opened"))},trackCardClose:a,trackCardImpression:d=>{e.push({type:"impression",card_id:d,dwell_time_seconds:0,timestamp:new Date().toISOString()}),Gn(t).logEventWithStatsig("(Web) FYP Card Viewed","chatgpt_web_fyp_card_viewed",{card_id:d,conversation_id:n[d]}),$e.count(He.PULSE,"chatgpt_web_fyp_card_viewed")},trackAndFlushInteractions:()=>{e.length!==0&&(o(e),e.length=0)},trackTaskPauseSurveyView:d=>{e.push({type:"task_pause_survey_impression",task_id:d,timestamp:new Date().toISOString()}),Gn(t).logEventWithStatsig("(Web) FYP Task Pause Survey Viewed","chatgpt_web_fyp_task_pause_survey_viewed",{task_id:d}),$e.count(He.PULSE,"chatgpt_web_fyp_task_pause_survey_viewed")}}},EWe=ys(t=>TWe(t)),MWe=3e3,NWe=()=>{"use forget";const t=F.c(10),e=G();let s;t[0]!==e?(s=EWe(e),t[0]=e,t[1]=s):s=t[1];const n=s;tw(n.trackAndFlushInteractions,MWe);let o,a;t[2]!==n.trackAndFlushInteractions?(o=()=>{const l=rf(window,{pagehide:n.trackAndFlushInteractions,beforeunload:n.trackAndFlushInteractions,visibilitychange:n.trackAndFlushInteractions});return()=>{l()}},a=[n.trackAndFlushInteractions],t[2]=n.trackAndFlushInteractions,t[3]=o,t[4]=a):(o=t[3],a=t[4]),x.useEffect(o,a);let i;return t[5]!==n.trackCardClose||t[6]!==n.trackCardImpression||t[7]!==n.trackCardOpen||t[8]!==n.trackTaskPauseSurveyView?(i={trackCardOpen:n.trackCardOpen,trackCardClose:n.trackCardClose,trackCardImpression:n.trackCardImpression,trackTaskPauseSurveyView:n.trackTaskPauseSurveyView},t[5]=n.trackCardClose,t[6]=n.trackCardImpression,t[7]=n.trackCardOpen,t[8]=n.trackTaskPauseSurveyView,t[9]=i):i=t[9],i};function y3(){"use forget";const t=F.c(12),e=G();let s;t[0]!==e?(s=ao(e),t[0]=e,t[1]=s):s=t[1];const{_openCardView:n,_closeCardView:o}=s,{trackCardOpen:a,trackCardClose:i}=NWe();let l;t[2]!==o||t[3]!==i?(l=()=>{o(),i()},t[2]=o,t[3]=i,t[4]=l):l=t[4];const c=l;let u;t[5]!==n||t[6]!==c||t[7]!==a?(u=m=>{a(m),n(m,c)},t[5]=n,t[6]=c,t[7]=a,t[8]=u):u=t[8];const d=u;let f;return t[9]!==c||t[10]!==d?(f={openView:d,closeView:c},t[9]=c,t[10]=d,t[11]=f):f=t[11],f}const AWe=Bt(t=>vt(()=>{var s;const e=(s=ig(t).data)==null?void 0:s.items;if(e){const n=ao(t).activeCardId$();if(n)return ode(e,n)}}));function spt(t){"use forget";const e=F.c(9),{show:s}=t,n=G(),{openView:o}=y3();let a;e[0]!==n?(a=()=>AWe(n),e[0]=n,e[1]=a):a=e[1];const i=oe(a);let l;e[2]!==n||e[3]!==i||e[4]!==o||e[5]!==s?(l=s&&i&&r.jsx(IWe,{onClick:()=>{Gn(n).logEventWithStatsig("(Web) FYP Next Card Pill Tapped","chatgpt_web_fyp_next_card_pill_tapped",{card_id:i.id}),o(i.id)},image:i.image,title:i.title}),e[2]=n,e[3]=i,e[4]=o,e[5]=s,e[6]=l):l=e[6];let c;return e[7]!==l?(c=r.jsx(Ms,{children:l}),e[7]=l,e[8]=c):c=e[8],c}const IWe=t=>{"use forget";const e=F.c(13),{image:s,title:n,onClick:o}=t;let a,i,l,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0},i={opacity:1},l={opacity:0},c={duration:.15,ease:"easeInOut"},e[0]=a,e[1]=i,e[2]=l,e[3]=c):(a=e[0],i=e[1],l=e[2],c=e[3]);const u=s==null?void 0:s.url,d=s==null?void 0:s.fallback_url;let f;e[4]!==u||e[5]!==d?(f=r.jsx(Mc,{src:u,fallbackSrc:d,className:"h-6 w-6 rounded-sm"}),e[4]=u,e[5]=d,e[6]=f):f=e[6];let m;e[7]!==n?(m=r.jsx("div",{className:"text-sm",children:n}),e[7]=n,e[8]=m):m=e[8];let p;return e[9]!==o||e[10]!==f||e[11]!==m?(p=r.jsxs(gt.button,{initial:a,animate:i,exit:l,transition:c,className:"border-token-border-heavy bg-token-bg-elevated-primary absolute end-1/2 bottom-[calc(var(--composer-overlap-px)+--spacing(6))] flex translate-x-1/2 items-center justify-center gap-2 rounded-4xl border bg-clip-padding px-4 py-2 shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",onClick:o,children:[f,m]}),e[9]=o,e[10]=f,e[11]=m,e[12]=p):p=e[12],p},jWe=ue(Ce,"3df56a",18,18);function PWe(t){"use forget";var N;const e=F.c(15),{cardId:s}=t,n=jt(),o=ne(),{mutate:a}=Mbe(s),{mutate:i}=Nbe(s),{data:l}=$B(s),c=ao(n),{closeView:u}=y3(),d=(N=l==null?void 0:l.card_actions)!=null?N:[],f=(l==null?void 0:l.reaction)==="like",m=(l==null?void 0:l.reaction)==="dislike",p=l==null?void 0:l.conversation_id,g=p?Rt(p):void 0,h=A=>{A==="remove"?Gn(n).logEventWithStatsig("(Web) FYP Card Reaction Undone","chatgpt_web_fyp_card_reaction_undo",{card_id:s,conversation_id:g}):Gn(n).logEventWithStatsig("(Web) FYP Card Reaction Added","chatgpt_web_fyp_card_reaction",{card_id:s,reaction:A,conversation_id:g})},_=A=>{A==="save"?Gn(n).logEventWithStatsig("(Web) FYP Card Saved","chatgpt_web_fyp_card_saved",{card_id:s,conversation_id:g}):Gn(n).logEventWithStatsig("(Web) FYP Card Saved Undone","chatgpt_web_fyp_card_saved_undo",{card_id:s,conversation_id:g})},y=[{type:"thumbs_up",icon:f?IVe:fq,label:o.formatMessage({id:"wN6PjH",defaultMessage:"Like"}),onClick:()=>{const A=f?"remove":"like";a(A),h(A)}},{type:"thumbs_down",icon:m?AVe:dq,label:o.formatMessage({id:"FMxx3D",defaultMessage:"Dislike"}),onClick:()=>{const A=m?"remove":"dislike";a(A),h(A)}},{type:"share",icon:Xc,label:o.formatMessage({id:"BNIqUa",defaultMessage:"Share"}),disabled:!g,onClick:()=>{Gn(n).logEventWithStatsig("(Web) FYP Card Shared","chatgpt_web_fyp_card_shared",{card_id:s,conversation_id:g}),g&&tn.openSharingModal(g)}},{type:"save",icon:l!=null&&l.is_saved?jWe:zVe,label:o.formatMessage({id:"Fy5DRu",defaultMessage:"Save"}),onClick:()=>{const A=l!=null&&l.is_saved?"unsave":"save";i(A),_(A),g&&ln(n).invalidateQueries({queryKey:ote().queryKey})},additionalText:l!=null&&l.is_saved?o.formatMessage({id:"5bP9LT",defaultMessage:"Saved as chat"}):void 0}].filter(A=>d.includes(A.type));if(y.length===0)return null;let v;e[0]!==y?(v=r.jsx("div",{className:"text-token-text-secondary flex",children:y.map(RWe)}),e[0]=y,e[1]=v):v=e[1];const S=!m&&"invisible";let C;e[2]!==S?(C=z(S),e[2]=S,e[3]=C):C=e[3];const w=!m;let k;e[4]!==s||e[5]!==u||e[6]!==c?(k=r.jsx(OWe,{onClick:A=>{u(),c.openFeedbackView({type:qs.OnCard,cardId:s}),A.stopPropagation()}}),e[4]=s,e[5]=u,e[6]=c,e[7]=k):k=e[7];let E;e[8]!==C||e[9]!==w||e[10]!==k?(E=r.jsx("div",{className:C,"aria-hidden":w,children:k}),e[8]=C,e[9]=w,e[10]=k,e[11]=E):E=e[11];let M;return e[12]!==v||e[13]!==E?(M=r.jsxs("div",{className:"flex justify-between",children:[v,E]}),e[12]=v,e[13]=E,e[14]=M):M=e[14],M}function RWe(t){return r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsx(Wd,{icon:t.icon,label:t.label,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()}},t.type),t.additionalText&&r.jsx("span",{className:"text-token-text-secondary text-sm",children:t.additionalText})]},t.type)}const OWe=t=>{"use forget";const e=F.c(3),{onClick:s}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(j,{id:"xh3p31",defaultMessage:"Share your thoughts"}),e[0]=n):n=e[0];let o;return e[1]!==s?(o=r.jsx(ke,{onClick:s,color:"secondary",children:n}),e[1]=s,e[2]=o):o=e[2],o};function npt(t){"use forget";const e=F.c(22),{imageSrc:s,fallbackSrc:n,title:o,cardId:a,hideImage:i}=t;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=jt(),e[0]=l):l=e[0];const c=l;let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>ao(c).isCardViewOpen$()&&pm(c),e[1]=u):u=e[1];const d=oe(u),f=!i&&d;let m;e[2]!==o?(m=r.jsx("div",{className:"text-3xl",children:o}),e[2]=o,e[3]=m):m=e[3];let p;e[4]!==a?(p=a&&r.jsx(PWe,{cardId:a}),e[4]=a,e[5]=p):p=e[5];let g;e[6]!==m||e[7]!==p?(g=r.jsx("div",{className:"flex flex-col gap-6 pb-4",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[m,p]})}),e[6]=m,e[7]=p,e[8]=g):g=e[8];const h=g;let _;e[9]!==n||e[10]!==f||e[11]!==i||e[12]!==s?(_=i?r.jsx("div",{className:"h-12"}):r.jsx("div",{className:z("relative aspect-[2/1] overflow-hidden rounded-2xl",f&&"aspect-video w-full rounded-none"),children:r.jsx(Mc,{src:s,fallbackSrc:n,className:z("h-full w-full object-cover",f&&"rounded-none")})}),e[9]=n,e[10]=f,e[11]=i,e[12]=s,e[13]=_):_=e[13];const b=_;if(f){let y;e[17]!==h?(y=r.jsx(W2,{horizontalPadding:"standard",horizontalMargin:"none",children:r.jsx(Aa,{children:h})}),e[17]=h,e[18]=y):y=e[18];let v;return e[19]!==b||e[20]!==y?(v=r.jsxs("div",{className:"relative flex flex-col gap-2",children:[b,y]}),e[19]=b,e[20]=y,e[21]=v):v=e[21],v}else{let y;return e[14]!==h||e[15]!==b?(y=r.jsx(W2,{horizontalPadding:"standard",horizontalMargin:"none",children:r.jsxs(Aa,{className:"flex flex-col gap-2",children:[b,h]})}),e[14]=h,e[15]=b,e[16]=y):y=e[16],y}}function LWe(t){"use forget";const e=F.c(15),{content:s,turnIndex:n}=t,{news:o}=s.widgets,a=s.widgets.news_tab_enabled,i=a&&o.length>0;let l,c;if(e[0]!==n||e[1]!==i?(l=()=>{i&&B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:So.ATLAS_SUPER_WIDGET_TAB_NEWS,turnIndex:n})},c=[i,n],e[0]=n,e[1]=i,e[2]=l,e[3]=c):(l=e[2],c=e[3]),x.useEffect(l,c),!a)return null;if(!o||o.length===0){let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=wg(Dt.News),e[4]=m):m=e[4];const p=m;let g;return e[5]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(Kd,{IconComponent:p,children:r.jsx(j,{id:"sM5f1q",defaultMessage:"No news results found"})}),e[5]=g):g=e[5],g}let u,d;if(e[6]!==o||e[7]!==n){const m=Vze(o);u="@w-sm/main:-mx-4 flex flex-col";let p;e[10]!==n?(p=(g,h)=>r.jsx(DWe,{news:g,turnIndex:n},h),e[10]=n,e[11]=p):p=e[11],d=m.map(p),e[6]=o,e[7]=n,e[8]=u,e[9]=d}else u=e[8],d=e[9];let f;return e[12]!==u||e[13]!==d?(f=r.jsx("div",{className:u,children:d}),e[12]=u,e[13]=d,e[14]=f):f=e[14],f}const DWe=x.memo(function(e){"use forget";const s=F.c(19),{news:n,turnIndex:o}=e,a=n[0];let i,l,c,u;if(s[0]!==a||s[1]!==n||s[2]!==o){const m=n.slice(1);c="flex flex-col gap-1",s[7]!==a||s[8]!==o?(u=r.jsx(d5,{news:a,turnIndex:o},a.url),s[7]=a,s[8]=o,s[9]=u):u=s[9],i="ms-4 flex flex-col gap-1";let p;s[10]!==o?(p=g=>r.jsx(d5,{news:g,showDomain:!1,turnIndex:o},g.url),s[10]=o,s[11]=p):p=s[11],l=m.map(p),s[0]=a,s[1]=n,s[2]=o,s[3]=i,s[4]=l,s[5]=c,s[6]=u}else i=s[3],l=s[4],c=s[5],u=s[6];let d;s[12]!==i||s[13]!==l?(d=r.jsx("div",{className:i,children:l}),s[12]=i,s[13]=l,s[14]=d):d=s[14];let f;return s[15]!==c||s[16]!==u||s[17]!==d?(f=r.jsxs("div",{className:c,children:[u,d]}),s[15]=c,s[16]=u,s[17]=d,s[18]=f):f=s[18],f});function d5(t){"use forget";const e=F.c(16),{news:s,showDomain:n,turnIndex:o}=t,a=n===void 0?!0:n,i=ne();let l;e[0]!==s.pub_date?(l=s.pub_date?new Date(s.pub_date).getTime()/1e3:null,e[0]=s.pub_date,e[1]=l):l=e[1];const c=l;let u;e[2]!==c||e[3]!==i?(u=ate(i,c),e[2]=c,e[3]=i,e[4]=u):u=e[4];const d=u;let f;e[5]!==o?(f=()=>{B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:So.ATLAS_SUPER_WIDGET_TAB_NEWS,turnIndex:o})},e[5]=o,e[6]=f):f=e[6];const m=f,p=a?"default":"sub-result";let g;return e[7]!==d||e[8]!==m||e[9]!==s.domain||e[10]!==s.snippet||e[11]!==s.thumbnail_url||e[12]!==s.title||e[13]!==s.url||e[14]!==p?(g=r.jsx(w0,{url:s.url,domain:s.domain,title:s.title,description:s.snippet,theme:p,subscript:d,thumbnail_url:s.thumbnail_url,onLogClick:m}),e[7]=d,e[8]=m,e[9]=s.domain,e[10]=s.snippet,e[11]=s.thumbnail_url,e[12]=s.title,e[13]=s.url,e[14]=p,e[15]=g):g=e[15],g}const FWe=ue(Ce,"0f21eb",20,20);function BWe(t){"use forget";const e=F.c(14),{content:s,turnIndex:n}=t,{videos:o,safety:a}=s.widgets,i=a!=="adult"&&o.length>0;let l,c;if(e[0]!==n||e[1]!==i?(l=()=>{i&&B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:So.ATLAS_SUPER_WIDGET_TAB_VIDEOS,turnIndex:n})},c=[i,n],e[0]=n,e[1]=i,e[2]=l,e[3]=c):(l=e[2],c=e[3]),x.useEffect(l,c),a==="adult"){let f;return e[4]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(Kd,{IconComponent:zk,className:"min-h-[240px]!",children:r.jsx(j,{id:"8j9OLb",defaultMessage:"Video results not available"})}),e[4]=f):f=e[4],f}if(!o||o.length===0){let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=wg(Dt.Videos),e[5]=f):f=e[5];const m=f;let p;return e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(Kd,{IconComponent:m,children:r.jsx(j,{id:"YgdAWv",defaultMessage:"No videos found"})}),e[6]=p):p=e[6],p}let u;if(e[7]!==n||e[8]!==o){let f;e[10]!==n?(f=m=>r.jsx(x.Fragment,{children:r.jsx(UWe,{video:m,turnIndex:n})},m.url),e[10]=n,e[11]=f):f=e[11],u=o.map(f),e[7]=n,e[8]=o,e[9]=u}else u=e[9];let d;return e[12]!==u?(d=r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"@w-sm/main:-mx-4 -mx-2 flex flex-col gap-1",children:u})}),e[12]=u,e[13]=d):d=e[13],d}function UWe(t){"use forget";const e=F.c(13),{video:s,turnIndex:n}=t;let o;e[0]!==n?(o=()=>{B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:So.ATLAS_SUPER_WIDGET_TAB_VIDEOS,turnIndex:n})},e[0]=n,e[1]=o):o=e[1];const a=o;let i;e[2]!==s.duration?(i=s.duration&&r.jsxs("div",{className:"absolute start-1.5 bottom-1.5 inline-flex items-center gap-1.5 rounded-full border-[0.5px] border-white/20 bg-black/20 bg-clip-padding px-1 py-1 text-sm font-normal text-white backdrop-blur-2xl",children:[r.jsx(FWe,{className:"size-4"}),r.jsx("span",{className:"pe-1.5",children:$We(s.duration)})]}),e[2]=s.duration,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i||e[6]!==s.description||e[7]!==s.domain||e[8]!==s.pub_date||e[9]!==s.thumbnail_url||e[10]!==s.title||e[11]!==s.url?(l=r.jsx(w0,{url:s.url,domain:s.domain,title:s.title,description:s.description,pub_date:s.pub_date,thumbnail_url:s.thumbnail_url,thumbnailOverlay:i,ThumbnailErrorIcon:Tq,onLogClick:a}),e[4]=a,e[5]=i,e[6]=s.description,e[7]=s.domain,e[8]=s.pub_date,e[9]=s.thumbnail_url,e[10]=s.title,e[11]=s.url,e[12]=l):l=e[12],l}function $We(t){const e=t.split(":");if(e.length===0)return t;const s=e[0],n=/^(\d+)$/.test(s)?String(Number(s)):s;return e[0]=n,e.join(":")}const f5=2048;function HWe(t,e){const s=encodeURIComponent(t),n=(()=>{switch(e){case Dt.Search:return"https://www.google.com/search?q=";case Dt.Images:return"https://www.google.com/search?udm=2&q=";case Dt.Videos:return"https://www.google.com/search?udm=7&q=";case Dt.News:return"https://www.google.com/search?tbm=nws&q=";default:throw new Error("Unsupported tab type: ".concat(e))}})(),o=n+s;if(o.length<=f5)return o;const a=Math.max(0,f5-n.length);let i=s.slice(0,a);if(/%%?$/.test(i))for(;i.endsWith("%");)i=i.slice(0,-1);return/%[0-9A-Fa-f]$/.test(i)&&(i=i.slice(0,-1)),n+i}function GWe({className:t,direction:e="horizontal",isMasked:s=!0,children:n,style:o}){return s?r.jsx("div",{className:z(e==="horizontal"?"[mask-image:linear-gradient(to_right,black_calc(100%_-_2rem),transparent_100%)]":"[mask-image:linear-gradient(to_bottom,black_calc(100%_-_2rem),transparent_100%)]","[mask-size:100%_100%]","[mask-repeat:no-repeat]",t),style:o,children:n}):r.jsx("div",{className:t,style:o,children:n})}const m5=180,Ov=8,VWe=130;function zWe(t){"use forget";const e=F.c(32),{content:s,turnIndex:n}=t,{images:o,safety:a}=s.widgets,i=x.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[c,u]=x.useState(l);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[1]=d):d=e[1];const[f,m]=x.useState(d);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=A=>m(I=>{const P=new Set(I);return P.add(A),P}),e[2]=p):p=e[2];const g=p;let h;if(e[3]!==f||e[4]!==o){let A;e[6]!==f?(A=I=>!f.has(I.content_url),e[6]=f,e[7]=A):A=e[7],h=o.filter(A),e[3]=f,e[4]=o,e[5]=h}else h=e[5];const _=h;let b;e[8]!==_?(b=()=>{if(!i.current)return;const A=i.current.getBoundingClientRect().width,I=[];let P=[],R=0;_.forEach((O,L)=>{const{width:D,height:H}=O.content_size,q=(H?D/H:1)*m5,W=A-R;let $=Math.min(q,W);const Z=W-$;let K=Z<=0;Z>0&&Z<VWe&&($=$+Z,K=!0),P.push({img:O,displayWidth:$}),R=R+($+Ov),K?(I.push(P),P=[],R=0):L===_.length-1&&I.push(P)}),u(I)},e[8]=_,e[9]=b):b=e[9];const y=b;let v;e[10]!==_?(v=[_],e[10]=_,e[11]=v):v=e[11],zn(y,v);let S;e[12]!==y?(S=()=>{if(!i.current)return;const A=new ResizeObserver(y);return A.observe(i.current),()=>A.disconnect()},e[12]=y,e[13]=S):S=e[13];let C;e[14]!==_?(C=[_],e[14]=_,e[15]=C):C=e[15],zn(S,C);const w=a!=="adult"&&_.length>0;let k,E;if(e[16]!==n||e[17]!==w?(E=()=>{w&&B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_SHOW,tab:So.ATLAS_SUPER_WIDGET_TAB_IMAGES,turnIndex:n})},k=[w,n],e[16]=n,e[17]=w,e[18]=k,e[19]=E):(k=e[18],E=e[19]),x.useEffect(E,k),a==="adult"){let A;return e[20]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(Kd,{IconComponent:zk,className:"min-h-[240px]!",children:r.jsx(j,{id:"H+Ty5b",defaultMessage:"Image results not available"})}),e[20]=A):A=e[20],A}if(!_||_.length===0){let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=wg(Dt.Images),e[21]=A):A=e[21];const I=A;let P;return e[22]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx(Kd,{IconComponent:I,children:r.jsx(j,{id:"jtAYXl",defaultMessage:"No images found"})}),e[22]=P):P=e[22],P}let M;if(e[23]!==c||e[24]!==n||e[25]!==_){let A;e[27]!==n||e[28]!==_?(A=(I,P)=>r.jsx("div",{className:"flex",style:{gap:Ov,marginBottom:Ov},children:I.map(R=>{const{img:O,displayWidth:L}=R;return r.jsx("div",{className:"object-cover",style:{width:L,height:m5},children:r.jsx(QWe,{image:O,allImages:_,turnIndex:n,onError:()=>g(O.content_url)})},O.url)})},P),e[27]=n,e[28]=_,e[29]=A):A=e[29],M=c.map(A),e[23]=c,e[24]=n,e[25]=_,e[26]=M}else M=e[26];let N;return e[30]!==M?(N=r.jsx("div",{ref:i,className:"w-full",children:M}),e[30]=M,e[31]=N):N=e[31],N}var OP;const WWe=Mt.div(OP||(OP=St(["\n  pointer-events-none absolute inset-0 z-10 bg-gradient-to-t\n  from-black/70 via-black/20 to-transparent\n  opacity-0 transition-opacity duration-200\n  group-hover:opacity-100 group-focus-visible:opacity-100\n  select-none flex flex-col justify-end\n"])));var LP;const qWe=Mt.div(LP||(LP=St(["\n  flex items-center gap-2 text-xs text-white/90 text-clip whitespace-nowrap\n"])));var DP;const KWe=Mt.div(DP||(DP=St(["\n  text-start text-sm font-medium text-white text-clip whitespace-nowrap\n"])));function YWe(t){"use forget";const e=F.c(16),{image:s}=t,[n,o]=x.useState(!1),a=s.content_url,i=!n&&"loading-results-shimmer";let l;e[0]!==i?(l=z("bg-token-bg-primary rounded-sm overflow-hidden",i),e[0]=i,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>o(!0),e[2]=c):c=e[2];let u;e[3]!==s.content_url||e[4]!==l?(u=r.jsx(Kn,{url:a,className:"icon-sm",containerClassName:l,size:32,minSize:16,applySizeToImg:!0,onLoad:c}),e[3]=s.content_url,e[4]=l,e[5]=u):u=e[5];let d;e[6]!==s.domain?(d=r.jsx("span",{className:"text-clip whitespace-nowrap",children:s.domain}),e[6]=s.domain,e[7]=d):d=e[7];let f;e[8]!==u||e[9]!==d?(f=r.jsxs(qWe,{children:[u,d]}),e[8]=u,e[9]=d,e[10]=f):f=e[10];let m;e[11]!==s.title?(m=r.jsx(KWe,{children:s.title}),e[11]=s.title,e[12]=m):m=e[12];let p;return e[13]!==f||e[14]!==m?(p=r.jsx(WWe,{children:r.jsxs(GWe,{className:"flex flex-col gap-1 px-2.5 pb-2.5",children:[f,m]})}),e[13]=f,e[14]=m,e[15]=p):p=e[15],p}function QWe(t){"use forget";const e=F.c(28),{image:s,allImages:n,turnIndex:o,onError:a}=t,[i,l]=x.useState(!1),c=fg.useStore(),u=!i;let d;e[0]!==n||e[1]!==s||e[2]!==c||e[3]!==o?(d=()=>{B.logStructuredEvent(Tl,{step:El.ATLAS_SUPER_WIDGET_RESULTS_ACTION_STEP_CLICK,tab:So.ATLAS_SUPER_WIDGET_TAB_IMAGES,turnIndex:o}),c.setCurrentImage({image:s,source:XT.SuperWidget,imageResults:n,analyticsMetadata:{turnIndex:o}})},e[0]=n,e[1]=s,e[2]=c,e[3]=o,e[4]=d):d=e[4];const f=i?"pointer-events-none opacity-0":"animate-pulse opacity-100";let m;e[5]!==f?(m=z("bg-token-bg-tertiary absolute inset-0 transition-opacity duration-300",f),e[5]=f,e[6]=m):m=e[6];let p;e[7]!==m?(p=r.jsx("div",{className:m}),e[7]=m,e[8]=p):p=e[8];const g=s.content_url,h=s.title;let _;e[9]===Symbol.for("react.memo_cache_sentinel")?(_=()=>l(!0),e[9]=_):_=e[9];const b=i?"opacity-100":"opacity-0";let y;e[10]!==b?(y=z("block h-full w-full transform-gpu object-cover object-[0%_25%] transition-transform duration-300 hover:scale-103",b),e[10]=b,e[11]=y):y=e[11];let v;e[12]!==s.content_size.height||e[13]!==s.content_size.width||e[14]!==s.content_url||e[15]!==s.title||e[16]!==a||e[17]!==y?(v=r.jsx("img",{src:g,alt:h,onLoad:_,onError:a,className:y,width:s.content_size.width,height:s.content_size.height}),e[12]=s.content_size.height,e[13]=s.content_size.width,e[14]=s.content_url,e[15]=s.title,e[16]=a,e[17]=y,e[18]=v):v=e[18];let S;e[19]!==s||e[20]!==i?(S=i&&r.jsx(YWe,{image:s}),e[19]=s,e[20]=i,e[21]=S):S=e[21];let C;return e[22]!==u||e[23]!==v||e[24]!==S||e[25]!==d||e[26]!==p?(C=r.jsxs("button",{className:"border-token-border-light group relative block h-full w-full overflow-hidden rounded-lg border",disabled:u,onClick:d,children:[p,v,S]}),e[22]=u,e[23]=v,e[24]=S,e[25]=d,e[26]=p,e[27]=C):C=e[27],C}function JWe(t){"use forget";const e=F.c(15),{href:s,turnIndex:n,tabType:o}=t;let a;e[0]!==o?(a=o&&dW(o),e[0]=o,e[1]=a):a=e[1];const i=a;let l;e[2]!==i||e[3]!==n?(l=()=>{B.logStructuredEvent(Z3,{step:X3.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK,turnIndex:n,fromTab:i})},e[2]=i,e[3]=n,e[4]=l):l=e[4];const c=l;let u,d;e[5]!==i||e[6]!==n?(u=()=>{B.logStructuredEvent(Z3,{step:X3.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW,turnIndex:n,fromTab:i})},d=[n,i],e[5]=i,e[6]=n,e[7]=u,e[8]=d):(u=e[7],d=e[8]),x.useEffect(u,d);let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f={"--super-widget-link-color-hover":"oklch(from var(--interactive-label-accent-default) calc(l - 0.2) clamp(0, calc(c + 0.03), 1.0) h)"},e[9]=f):f=e[9];let m,p;e[10]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(j,T({},ZWe.googleIt)),p=r.jsx(bp,{}),e[10]=m,e[11]=p):(m=e[10],p=e[11]);let g;return e[12]!==s||e[13]!==c?(g=r.jsxs(qn,{target:"_self",href:s,onClick:c,className:"flex items-center gap-2 text-sm text-[var(--interactive-label-accent-default)] select-none hover:text-(--super-widget-link-color-hover)",style:f,children:[m,p]}),e[12]=s,e[13]=c,e[14]=g):g=e[14],g}const ZWe=Ne({googleIt:{id:"ZOaw3K",defaultMessage:"Google"}});Le("contentOnly");const Mq=Le(void 0),XWe=ue(ws,"1b63d3",20,20),eqe=ue(ws,"fddb3f",20,20),tqe=ue(ws,"f2d864",20,20),sqe=ue(ws,"587865",20,20),nqe=ue(ws,"d5e9d0",20,20),oqe=ue(ws,"1a53ca",20,20),aqe=ue(ws,"765d14",20,20),rqe=ue(ws,"7c427b",20,20),iqe=ue(ws,"24c34b",20,20),lqe=ue(ws,"af6561",20,20);function cqe(n){var o=n,{selected:t,label:e}=o,s=De(o,["selected","label"]);const a=z(t?"text-[var(--interactive-label-accent-default)]":"text-token-text-tertiary hover:text-token-text-secondary",s.className);return r.jsx(It,{label:e,className:a,children:r.jsx("button",U(T({},s),{className:z("rounded-lg px-6 py-2.5",t&&"bg-[var(--theme-user-msg-bg)]")}))})}function uqe({selectedTab:t,selectTab:e,className:s,textClassName:n,showNewsTab:o=!0}){const a=[{key:Dt.Chat,label:r.jsx(j,T({},am.homeTab)),icon:r.jsx(eqe,{className:"icon justify-self-center"}),selectedIcon:r.jsx(XWe,{className:"icon justify-self-center"})},{key:Dt.Search,label:r.jsx(j,T({},am.searchTab)),icon:r.jsx(rqe,{className:"icon justify-self-center"}),selectedIcon:r.jsx(aqe,{className:"icon justify-self-center"})},{key:Dt.Images,label:r.jsx(j,T({},am.imagesTab)),icon:r.jsx(sqe,{className:"icon justify-self-center"}),selectedIcon:r.jsx(tqe,{className:"icon justify-self-center"})},{key:Dt.Videos,label:r.jsx(j,T({},am.videosTab)),icon:r.jsx(lqe,{className:"icon justify-self-center"}),selectedIcon:r.jsx(iqe,{className:"icon justify-self-center"})}];return o&&a.push({key:Dt.News,label:r.jsx(j,T({},am.newsTab)),icon:r.jsx(oqe,{className:"icon justify-self-center"}),selectedIcon:r.jsx(nqe,{className:"icon justify-self-center"})}),r.jsx("div",{className:z("mx-px flex h-full items-center gap-0.5",s),id:"super-widget-tab-buttons",children:a.map(({key:i,label:l,icon:c,selectedIcon:u})=>r.jsx(cqe,{label:l,className:z("relative flex-1 sm:flex-none",t===i?"font-medium":"font-normal",n),selected:t===i,onClick:()=>e(i),children:t===i?u:c},i))})}const am=Ne({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}});function dqe({queryText:t,tabType:e,searchIt:s}){const n=wg(e);return r.jsxs("div",{className:"flex w-full items-center text-start text-sm",children:[r.jsxs("span",{className:"text-token-text-tertiary flex max-w-[var(--user-chat-width,70%)] min-w-0 items-center",children:[r.jsx(n,{className:"me-2.5 h-4 w-4 shrink-0"}),r.jsx(j,U(T({},fqe(e)),{values:{prefix:o=>r.jsx("span",{className:"shrink-0",children:o}),query:r.jsx("span",{className:"min-w-0 flex-initial truncate",children:t}),trailingQuote:o=>r.jsx("span",{"aria-hidden":"true",className:"shrink-0",children:o})}}))]}),r.jsx("span",{className:"ms-auto flex-shrink-0",children:s})]})}function fqe(t){switch(t){case Dt.Images:return Th.imageResultsFor;case Dt.Videos:return Th.videoResultsFor;case Dt.News:return Th.newsResultsFor;case Dt.Search:default:return Th.searchResultsFor}}const Th=Ne({searchResultsFor:{id:"xeT484",defaultMessage:"<prefix>Search results for </prefix>{query}<trailingQuote></trailingQuote>"},imageResultsFor:{id:"OsLjmT",defaultMessage:"<prefix>Image results for </prefix>{query}<trailingQuote></trailingQuote>"},videoResultsFor:{id:"Egf3CB",defaultMessage:"<prefix>Video results for </prefix>{query}<trailingQuote></trailingQuote>"},newsResultsFor:{id:"MtgcpS",defaultMessage:"<prefix>News results for </prefix>{query}<trailingQuote></trailingQuote>"}});function b3(t,e,s){var n,o,a;return t===0?e[0]?xo(e[0]):null:(a=(o=(n=s[t])==null?void 0:n.widgets)==null?void 0:o.query)!=null?a:xo(e[t])}function Eh(t,e,s,n){var i,l,c,u,d;const o=((c=(l=(i=t==null?void 0:t.widgets)==null?void 0:i[s])==null?void 0:l.length)!=null?c:0)>0&&((t==null?void 0:t.widgets.safety)!=="adult"||(t==null?void 0:t.widgets.safe_search_off)!==!0||n===!0),a=((d=(u=e==null?void 0:e[s])==null?void 0:u.length)!=null?d:0)>0&&((e==null?void 0:e.safeSearchOff)!==!0||n===!0);return o||a?0:e&&JL(e,s)?1:2}function mqe(t,e,s,n,o,a){const i=n[t],l=b3(t,s,n),c=l?o[l]:void 0;switch(e){case Dt.Search:return Eh(i,c,"navlinks",a);case Dt.Images:return Eh(i,c,"images");case Dt.Videos:return Eh(i,c,"videos");case Dt.News:return Eh(i,c,"news");default:return 2}}function pqe(t){switch(t.safety){case Wi.SAFE:return"safe";case Wi.ADULT:return"adult";case Wi.FLAGGED:return"flagged";case Wi.NOT_RUN:return"not_run";case void 0:return}}function gqe(t,e,s,n,o,a){var d,f,m,p,g,h;const i={content_type:bt.SuperWidget,widgets:T({},(f=(d=s[t])==null?void 0:d.widgets)!=null?f:{navlinks:[],images:[],videos:[],news:[],news_tab_enabled:!0})},l=b3(t,o,s),c=l?n[l]:void 0;c&&(c.navlinks.length>0&&(i.widgets.navlinks=c.navlinks,i.widgets.navlinks_ready=((p=(m=c.fetchingStatus)==null?void 0:m.navlinks)==null?void 0:p.status)===si.DONE||((h=(g=s[t])==null?void 0:g.widgets)==null?void 0:h.navlinks_ready)===!0,i.widgets.safe_search_off=c.safeSearchOff,i.widgets.safety=pqe(c)),c.images.length>0&&(i.widgets.images=c.images),c.videos.length>0&&(i.widgets.videos=c.videos),c.news.length>0&&(i.widgets.news=c.news));let u=!1;switch(e){case Dt.Search:{const _=t===s.length-1;u=i.widgets.navlinks.length>0&&(i.widgets.safety!=="adult"||i.widgets.safe_search_off!==!0||a===!0||!_)?!1:Yg(l,"navlinks");break}case Dt.Images:u=i.widgets.images.length>0?!1:Yg(l,"images");break;case Dt.Videos:u=i.widgets.videos.length>0?!1:Yg(l,"videos");break;case Dt.News:u=i.widgets.news.length>0?!1:Yg(l,"news");break;case Dt.Chat:break}return[i,u]}function opt(){const t=G(),e=xn(t),s=sn(Ss),n=Kp(),o=Cge();return e&&!s&&!n&&!o}function Nq(){const t=G(),e=oe(()=>Mq());return typeof e=="boolean"?e:js(t,"694761886").get("news_tab_enabled",!0)}function apt({className:t,textClassName:e}){const s=G(),[n,o]=Cg(),a=Nq(),i=Ko.useStore(),l=jo(),c=oe(()=>J9(s));x.useEffect(()=>{!a&&n===Dt.News&&o({tabType:Dt.Chat})},[a,o,n]);function u(d){if(o({tabType:d}),d!==Dt.Chat){const f=i.getActiveSystemHintType();f&&f!==Ye.Search&&l(null)}B.logStructuredEvent(rte,{tab:dW(n)})}return c?r.jsx(uqe,{selectedTab:n,selectTab:u,className:t,textClassName:e,showNewsTab:a}):null}const hqe={[Dt.Chat]:()=>null,[Dt.Search]:Eq,[Dt.Images]:zWe,[Dt.Videos]:BWe,[Dt.News]:LWe};function _qe({userMessages:t,superWidgetMessageContents:e,tab:s,scrollToMessageId:n,isNewsTabEnabled:o,isAdultSearchEnabled:a}){"use no forget";const i=x.useRef({});function l(f,m="smooth"){const p=i.current[f];p&&p.scrollIntoView({behavior:m,block:"start"})}x.useEffect(()=>{requestAnimationFrame(()=>{if(t.length>0){const f=t[t.length-1];f&&l(f.id,"instant")}})},[]),x.useEffect(()=>{setTimeout(()=>{n&&l(n)},50)},[n]);const c=Kr(f=>f.entries);if(s===Dt.News&&!o)return null;const u=hqe[s],d=t.map((f,m)=>mqe(m,s,t,e,c,a));return r.jsx("div",{className:"@w-sm/main:px-2 flex w-full flex-col gap-4 px-4 pt-2",children:VTe(t.length,f=>{if(d[f]!==0&&f!==t.length-1)return null;const m=b3(f,t,e),p=f>0&&d[f-1]===0,g=ZGe([t[f]]);return r.jsxs("div",{className:"w-full",children:[p&&r.jsx("hr",{className:"border-heavy w-full pb-3.5"}),r.jsxs("div",{className:z("mb-4 flex scroll-mt-6 flex-col gap-4 text-base",p&&"mt-2.5"),ref:h=>{i.current[t[f].id]=h},children:[r.jsx(xqe,{queryText:m,tab:s,turnIndex:f}),g&&r.jsx(XGe,{message:g}),!g&&r.jsx(LSe,{message:t[f]})]}),(()=>{var y,v;const[h,_]=gqe(f,s,e,c,t,a),b=(f===0||((v=(y=e[f])==null?void 0:y.widgets)==null?void 0:v.query)!==void 0)&&!_;return h&&b?r.jsx(u,{content:h,isAdultSearchEnabled:a,isLatestTurn:f===e.length-1,turnIndex:f,source:"searchTab"}):r.jsx("div",{className:"min-h-[calc(100dvh_-_var(--header-height)_".concat(g?"+_330":"-_120","px)]"),children:d[f]!==2&&r.jsx("div",{className:"result-streaming pulse",children:r.jsx("span",{})})})})()]},f)})})}function xqe(t){"use forget";const e=F.c(11),{queryText:s,turnIndex:n,tab:o}=t;if(!s)return null;let a;e[0]!==s||e[1]!==o?(a=HWe(s,o),e[0]=s,e[1]=o,e[2]=a):a=e[2];let i;e[3]!==a||e[4]!==o||e[5]!==n?(i=r.jsx(JWe,{href:a,turnIndex:n,tabType:o}),e[3]=a,e[4]=o,e[5]=n,e[6]=i):i=e[6];let l;return e[7]!==s||e[8]!==i||e[9]!==o?(l=r.jsx(dqe,{queryText:s,tabType:o,searchIt:i}),e[7]=s,e[8]=i,e[9]=o,e[10]=l):l=e[10],l}function rpt(t){"use forget";var q,W,$,Z,K,Y;const e=F.c(56),{conversation:s,children:n}=t,o=G(),a=Nq(),[i,l]=Cg();let c;e[0]!==o?(c=()=>U_(o),e[0]=o,e[1]=c):c=e[1];const u=oe(c);let d;e[2]!==s?(d=()=>yc(s),e[2]=s,e[3]=d):d=e[3];const f=oe(d),{data:m,isLoading:p}=vi(f);let g;e[4]!==o||e[5]!==m?(g=S6(),e[4]=o,e[5]=m,e[6]=g):g=e[6];const h=g;let _,b;e[7]!==o||e[8]!==m||e[9]!==l||e[10]!==i?(_=()=>{},b=[o,m,l,i],e[7]=o,e[8]=m,e[9]=l,e[10]=i,e[11]=_,e[12]=b):(_=e[11],b=e[12]),x.useEffect(_,b);const[y,v,S]=Qe(s.id,bqe),C=v[v.length-1],w=(W=(q=C==null?void 0:C.content)==null?void 0:q.widgets)==null?void 0:W.news_tab_enabled;let k,E;e[13]!==w?(k=()=>{Mq.set(typeof w=="boolean"?w:void 0)},E=[w],e[13]=w,e[14]=k,e[15]=E):(k=e[14],E=e[15]),x.useEffect(k,E);let M,N;e[16]!==a||e[17]!==l||e[18]!==i?(M=()=>{!a&&i===Dt.News&&l({tabType:Dt.Chat})},N=[a,l,i],e[16]=a,e[17]=l,e[18]=i,e[19]=M,e[20]=N):(M=e[19],N=e[20]),x.useEffect(M,N);let A;e[21]!==o||e[22]!==u||e[23]!==p||e[24]!==a||e[25]!==h||e[26]!==((Z=($=C==null?void 0:C.content)==null?void 0:$.widgets)==null?void 0:Z.query)||e[27]!==i||e[28]!==y?(A=()=>{var he,fe,pe,le,ve;if(p||h)return;const ae=y[0],se=ae?xo(ae):null,ee=(pe=(fe=(he=C==null?void 0:C.content)==null?void 0:he.widgets)==null?void 0:fe.query)!=null?pe:"",re=((ve=(le=ee==null?void 0:ee.trim())==null?void 0:le.length)!=null?ve:0)>0?ee:se;re&&(i==="search"?gm(o,re,"navlinks",u):i==="images"?gm(o,re,"images"):i==="videos"?gm(o,re,"videos"):i==="news"&&a&&gm(o,re,"news"))},e[21]=o,e[22]=u,e[23]=p,e[24]=a,e[25]=h,e[26]=(Y=(K=C==null?void 0:C.content)==null?void 0:K.widgets)==null?void 0:Y.query,e[27]=i,e[28]=y,e[29]=A):A=e[29];let I;e[30]!==o||e[31]!==u||e[32]!==p||e[33]!==a||e[34]!==h||e[35]!==C||e[36]!==i||e[37]!==y?(I=[o,i,y,a,C,u,h,p],e[30]=o,e[31]=u,e[32]=p,e[33]=a,e[34]=h,e[35]=C,e[36]=i,e[37]=y,e[38]=I):I=e[38],x.useEffect(A,I);let P;if(e[39]!==o?(P=()=>J9(o),e[39]=o,e[40]=P):P=e[40],!oe(P))return n;const O=i===Dt.Chat?"block":"hidden";let L;e[41]!==n||e[42]!==O?(L=r.jsx("div",{id:"mini-chat-content",className:O,children:n}),e[41]=n,e[42]=O,e[43]=L):L=e[43];let D;e[44]!==u||e[45]!==a||e[46]!==S||e[47]!==i||e[48]!==v||e[49]!==y?(D=i!==Dt.Chat&&(i!==Dt.News||a)&&r.jsx(_qe,{userMessages:y,superWidgetMessageContents:v.map(yqe),tab:i,scrollToMessageId:S,isNewsTabEnabled:a,isAdultSearchEnabled:u},i),e[44]=u,e[45]=a,e[46]=S,e[47]=i,e[48]=v,e[49]=y,e[50]=D):D=e[50];let H;e[51]!==D?(H=r.jsx(Aa,{children:D}),e[51]=D,e[52]=H):H=e[52];let V;return e[53]!==L||e[54]!==H?(V=r.jsxs("div",{children:[L,H]}),e[53]=L,e[54]=H,e[55]=V):V=e[55],V}function yqe(t){return t.content}function bqe(t){return[Se.getUserMessages(t).filter(vqe),Se.getSuperWidgetMessages(t),t==null?void 0:t.scrollToMessageId]}function vqe(t){var e;return!((e=t.metadata)!=null&&e.is_visually_hidden_from_conversation)}function ipt({isSharedConversation:t,clientThreadId:e}){const s=G(),n=Ee(s,"2287071194"),o=x.useRef(!1),{clearAllSystemHintModeTriggers:a,setThreadSystemHintMode:i}=La(),c=Qe(e,d=>Se.getLastMessageSystemHints(d)).includes(Ye.Tatertot),u=n&&t&&MR(s)&&c;x.useEffect(()=>{!u||o.current||(a(),i(Ye.Tatertot,!0,{clientThreadId:e}),o.current=!0)},[u,o,e,a,i,c])}const Mh="m",Sqe=2e3,Cqe="skip_instant_query",wqe="client_reported_search_source",kqe=ite;function lpt(t){var N;const{clientThreadId:e,handleRequestCompletion:s}=t,n=G(),o=Et(n,e),a=x.useRef(!1),i=x.useRef(null),l=oe(()=>br(o)),c=dx.useIsEnabled(e),{isLoading:u,data:d}=Ic(),f=Qe(e,Se.hasUserMessage),m=V9(d),[p,g]=Yn(),h=Kt(),_=oe(()=>na(n)),b=p.get(Uf),y=p.get(eM)==="ipl";x.useEffect(()=>{M(!0),a.current=!1,i.current=null},[b]);const v=x.useCallback(({content:A,attachments:I},P,R)=>{const O=Rx(),L=I.length>0?{attachments:I}:{};L.system_hints=P.systemHints,Object.keys(O).length>0&&(L.__internal={search_settings:O});const{extraStreamParams:D}=mw(P.systemHints?P.systemHints:[],{enableMessageFollowups:c});s({promptMessage:cn(A,L,y?{real_author:MC.IPL}:void 0),requestedModelId:R,eventSource:"url",completionMetadata:P,extraStreamParams:D})},[s,c,y]),S=(N=G6(()=>window.location.pathname))!=null?N:null,C=kqe(),w=!u&&S!=null,k=X6(),[E,M]=x.useState(!0);return x.useEffect(()=>{var fe,pe,le,ve,Te;if(!E||a.current)return;const A=(fe=Tt(e))==null?void 0:fe.mode;if(!w||A==null||(p.has(Sw)||p.has(lte))&&_==null)return;if(!Eqe(S)||Tqe(S)&&C===void 0||Rt(e)!=null){M(!1);return}const P=(()=>{try{return Object.fromEntries(new URLSearchParams(location.hash.slice(1)).entries())}catch(xe){return{}}})(),R=T(T({},Object.fromEntries(p)),P),{[Uf]:O,[Mh]:L,model:D,[Cqe]:H,[wqe]:V,[J0]:q}=R,W=(pe=typeof O=="string"?O:null)!=null?pe:typeof L=="string"?L:null,$=Object.values(Zv).includes(V)?V:void 0,Z=q!==void 0;if(!W||!W.trim()){M(!1);return}else i.current=Date.now();const K=cte(p,{availableHints:_});a.current=!0;const Y=K.find(wc),ae=XH(D!=null?D:null,Y);let ee=k.secFetchSite==="same-site"||k.secFetchSite==="none"&&(((ve=(le=document==null?void 0:document.documentElement)==null?void 0:le.dataset)==null?void 0:ve.searchExtension)==="1"||D9());if(ut()||(ee=!0),Z&&(ee=!1),ae&&(ee=!1),bs()&&(ee=!1),!ee){g(xe=>{const ce=new URLSearchParams(xe);return ce.delete(Uf),ce.delete(Mh),ce.delete(eM),ce.delete(J0),ce.append("prompt",W),ce}),M(!1),Z||Ge.addAction("pageload-completion.disallowed",{secFetchSite:k.secFetchSite,referrer:document.referrer});return}const re=K.includes(Ye.Search);let he=K9(l);re&&l&&(he=Array.from(l.models.values()).find(xe=>{var ce;return(ce=xe.enabledTools)==null?void 0:ce.includes(Sp.Search)})),((Te=t.prefetchSearchThreadIdPromise)!=null?Te:Promise.resolve(null)).then(xe=>{var we;g(ge=>{const Ae=new URLSearchParams(ge);return Ae.delete(Uf),Ae.delete(Mh),Ae.delete("skip_instant_query"),Ae.delete(J0),he&&Ae.append("model",he.id),Ae});const ce=$!=null?$:re?Zv.URL_SEARCH_HINT:void 0;v({content:W,attachments:[]},{conversationMode:A,source:H?void 0:"instant-query",systemHints:K,prefetchIds:xe!=null?[xe]:void 0,searchSource:ce},(we=he==null?void 0:he.id)!=null?we:void 0),xe!=null&&Ge.addFirstTiming("createCompletion.prefetchSearch")})},[u,w,S,l,m,n,v,E,e,C,k.secFetchSite,h,t.prefetchSearchThreadIdPromise,p,g,_]),E&&(t.prefetchSearchThreadIdPromise!=null||p.has(Uf)||p.has(Mh)?!0:i.current?f||Date.now()-i.current>Sqe?(i.current=null,M(!1),!1):!0:!1)}function Tqe(t){return Aq(t)}function Aq(t){return t==null?!1:/^\/g\/[\w-]+$/.test(t)}function Eqe(t){return t==null?!1:t==="/"||Aq(t)}const Mqe="webrtc-cert-db",Nqe=1,Yd="certs",p5="ecdsa-p256:v1",Aqe={name:"ECDSA",namedCurve:"P-256",expires:365*24*60*60*1e3};function Iqe(){return new Promise((t,e)=>{const s=indexedDB.open(Mqe,Nqe);s.onupgradeneeded=()=>{const n=s.result;n.objectStoreNames.contains(Yd)||n.createObjectStore(Yd)},s.onsuccess=()=>t(s.result),s.onerror=()=>e(s.error)})}function jqe(t,e){return new Promise((s,n)=>{const a=t.transaction(Yd,"readonly").objectStore(Yd).get(e);a.onsuccess=()=>s(a.result),a.onerror=()=>n(a.error)})}function Pqe(t,e,s){return new Promise((n,o)=>{const i=t.transaction(Yd,"readwrite").objectStore(Yd).put(s,e);i.onsuccess=()=>n(),i.onerror=()=>o(i.error)})}function Iq(t){const e=Date.now();return t.expires<=e}async function Rqe(){try{"storage"in navigator&&"persist"in navigator.storage&&await navigator.storage.persist()}catch(t){Jt.certificateLocalDb.saveFailed(t)}}async function g5(t){const e=await RTCPeerConnection.generateCertificate(t);return Jt.certificateLocalDb.generated(),e}async function Oqe(t={}){const{generationParams:e=Aqe,disablePersistence:s=!1}=t;if(!s&&"indexedDB"in window)try{await Rqe();const n=await Iqe(),o=await jqe(n,p5);if(o&&!Iq(o))return Jt.certificateLocalDb.hit(),o;const a=await g5(e);return Pqe(n,p5,a).catch(i=>{Jt.certificateLocalDb.saveFailed(i)}),a}catch(n){Jt.certificateLocalDb.loadFailed(n)}return g5(e)}let bm,$r;const w_=Le(!0);function h5(t,e){Oqe({generationParams:{name:"ECDSA",namedCurve:"P-256"}}).then(s=>{$r=s}).catch(s=>{t.current||(t.current=!0,Jt.certificateCache.unsupported(s))}).finally(()=>{e.current=!1})}function _5(){try{bm=jq.createPeerConnection("cache"),w_.set(!1)}catch(t){Jt.peerConnectionCache.unsupported(t)}}const cpt=()=>{const t=G(),e=x.useRef(!1),s=x.useRef(!1),n=ut(),o=oe(w_),a=Ee(t,"1863841549"),i=Ee(t,"2777663391");return x.useEffect(()=>{n&&(a&&!e.current&&$r===void 0?(e.current=!0,tM(t,"defer-pc")?Nd.postTask(()=>h5(s,e)):h5(s,e)):a||Jt.certificateCache.disabled())},[t,a,n]),x.useEffect(()=>{n&&i&&o&&(tM(t,"defer-pc")?Nd.postTask(()=>_5()):_5())},[t,i,o,n]),null};function Lqe(t){return!(!t||t.signalingState==="closed"||t.connectionState!=="new"||t.iceConnectionState!=="new")}const jq={createPeerConnection:t=>($r&&Iq($r)&&(Jt.certificateCache.expired({expires:$r.expires}),$r=void 0),$r===void 0?(Jt.certificateCache.miss({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle"})):(Jt.certificateCache.hit({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle",certificates:[$r]}))),getFreshPeerConnection:t=>{try{return Lqe(bm)?(Jt.peerConnectionCache.hit(),bm):(Jt.peerConnectionCache.miss(),jq.createPeerConnection(t))}finally{w_.set(!0),bm=void 0}},resetAll:()=>{bm=void 0,$r=void 0,w_.set(!0)}},upt=()=>{const t=G(),e=VE(t);return x.useEffect(()=>{mx.set(e?"transceiver":"livekit")},[e]),null};function dpt({children:t}){let e;return x.Children.forEach(t,s=>{if(x.isValidElement(s)&&s.type==="title"){const n=x.Children.toArray(s.props.children)[0];typeof n=="string"&&(e=n)}}),x.useEffect(()=>{if(e!=null){const s=document.title;return document.title=e,()=>{document.title=s}}},[e]),null}var Dqe=(t=>(t[t.ADAVisualization=0]="ADAVisualization",t[t.Image=1]="Image",t))(Dqe||{});function Fqe({clientThreadId:t}){return fg.useCurrentImage()?r.jsx(Bqe,{clientThreadId:t}):null}const Bqe=Pe(()=>me(()=>import("./gywqobhbbetkdxnd.js"),__vite__mapDeps([434,1,3,4,435,47,436,437])).then(t=>t.ImageLightbox));function fpt(){const t=sM(s=>s.liveRegionAssertive),e=sM(s=>s.liveRegionPolite);return r.jsxs(r.Fragment,{children:[r.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"live-region-assertive",children:t}),r.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"live-region-polite",children:e})]})}const Uqe=Pe(()=>me(()=>import("./bxuojq83y4bx9433.js"),__vite__mapDeps([438,1,3,4,439,440,14,8,9,15,441,374,442,327,355,366,443,444,326,328,369,445,446,133,134,447,448,305,449,450,451,452,453,454,455,128,129,130,131,132,135,39,136,137,138,139,140,141,142]))),$qe=Pe(()=>me(()=>import("./v3j6i5k80tkozper.js"),__vite__mapDeps([456,1,3,4,133,134,340,353,438,439,440,14,8,9,15,441,374,442,327,355,366,443,444,326,328,369,445,446,447,448,305,449,450,451,452,453,454,455,128,129,130,131,132,135,39,136,137,138,139,140,141,142,457,147,149,154]))),Hqe=Pe(()=>me(()=>import("./fcbjc746ye74nyx9.js"),__vite__mapDeps([458,1,3,4,441,374,442,457,147,149,154,232])));Pe(async()=>()=>null);const Gqe=Pe(()=>me(()=>import("./ew4cv767jtkwgim6.js"),__vite__mapDeps([459,1,3,4,336,131,132,133,134,129,130,455,442]))),Vqe=Pe(()=>me(()=>import("./lapgtggsr1dhf7lh.js"),__vite__mapDeps([460,1,3,4,455,441,374,442,131,132,133,134,129,130,336])));function mpt(t){"use forget";const e=F.c(13),{clientThreadId:s}=t,{isWorkspaceUser:n,workspaceOnboardingVariant:o,isWorkspaceOnboardingVariantLoading:a,isOpen:i,isLoading:l}=XL(),{isOpen:c,isLoading:u}=Vme(),{isOpen:d,isLoading:f,closeModal:m}=$me(),[p]=Yn();if(p.get("from_webview")==="ios")return null;if(!l&&i){if(n){if(a)return null;if(o==="k12"){let b;return e[0]!==s?(b=r.jsx($qe,{clientThreadId:s}),e[0]=s,e[1]=b):b=e[1],b}let _;return e[4]!==s?(_=r.jsx(Hqe,{clientThreadId:s}),e[4]=s,e[5]=_):_=e[5],_}let h;return e[6]!==s?(h=r.jsx(Uqe,{clientThreadId:s}),e[6]=s,e[7]=h):h=e[7],h}if(!u&&c){let h;return e[8]!==s?(h=r.jsx(Gqe,{clientThreadId:s}),e[8]=s,e[9]=h):h=e[9],h}if(!f&&d){let h;return e[10]!==s||e[11]!==m?(h=r.jsx(iye,{children:r.jsx(Vqe,{clientThreadId:s,onClose:m})}),e[10]=s,e[11]=m,e[12]=h):h=e[12],h}return null}function ppt({clientThreadId:t}){const e=ik(o=>o.notifications),s=x.useRef(new Set),n=z("pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse px-2 py-4",e.length>3&&"overflow-y-auto");return x.useEffect(()=>{e.filter(a=>a.clientThreadId===void 0||t===a.clientThreadId).map(a=>a.id).filter(a=>a!==void 0).forEach(a=>lk(a)),e.forEach(a=>{a.id&&!s.current.has(a.id)&&(pt.logEvent("chatgpt_notification_shown"),B.logEvent("Notifications: Notification Shown to User"),s.current.add(a.id))})},[t,e]),e.length===0||ka?null:r.jsx("div",{className:n,children:r.jsx(Ms,{children:e.map(o=>r.jsx(Wqe,T({},o),o.id))})})}function zqe({notification:t}){return t.userAvatar!=null?r.jsx(zC,{user:t.userAvatar}):t.icon?r.jsx(ute,{className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:t.icon}):r.jsx(w1,{iconName:"openai",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function Wqe(e){var t=De(e,[]);var l,c;const s=yt(),n=Gt(),o=ne(),a=Bs(t.clientThreadId),i=()=>{pt.logEvent("chatgpt_notification_clicked"),B.logEvent("Notifications: User Clicked Notification"),t.onClick!=null?t.onClick():a&&ak(s,n,a),t.id&&lk(t.id)};return r.jsxs(gt.div,{onClick:i,className:"border-token-border-default bg-token-bg-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-3 rounded-[1.25rem] border p-4 align-middle shadow-lg","data-ignore-for-page-load":!0,initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[t.thumbnail?t.thumbnail:r.jsx(zqe,{notification:t}),r.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[r.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:(l=t.title)!=null?l:o.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),t.subtitle&&r.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:t.subtitle}),((c=t.payload)==null?void 0:c.display_image_url)&&r.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:t.payload.display_image_url,alt:t.payload.image_alt})]})]})}function gpt(){const t=Gt(),e=x.useCallback(function(n){var l,c;const o=n.data.conversation_id;if(!o)return;const a=(c=(l=Tt(o))==null?void 0:l.title)!=null?c:void 0,i=Se.getGizmoId(Tt(o));qm({title:a,subtitle:n.title,clientThreadId:o}),Ea(t,i),hr(o)},[t]),s=x.useCallback(function(n){var i,l;const o=n.data.conversation_id;if(!o)return;const a=(l=(i=Tt(o))==null?void 0:i.title)!=null?l:void 0;qm({title:a,subtitle:n.body,clientThreadId:o})},[]);return x.useEffect(()=>{const n={"new-message":e,"automation-error":s},o=a=>{if(a.data.type in n){const i=a.data.type;n[i](a.data)}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",o)}},[e,s,t]),null}function hpt(){"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("a",{"data-skip-to-content":"",className:"bg-token-main-surface-primary fixed start-1/2 top-1 z-50 mx-auto w-fit -translate-x-1/2 translate-y-[-100lvh] rounded-full px-3 py-2 focus-visible:translate-y-0 print:hidden",href:"#main",children:r.jsx(j,{id:"thread.skipToContent",defaultMessage:"Skip to content"})}),t[0]=e):e=t[0],e}function _pt(){"use forget";const t=F.c(7),e=Hs();let s,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=tx("/apps"),n=_z("sidebar"),t[0]=s,t[1]=n):(s=t[0],n=t[1]);let o;t[2]!==e.pathname?(o=e.pathname.startsWith("/apps"),t[2]=e.pathname,t[3]=o):o=t[3];let a;t[4]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(j,{id:"N6Qn+a",defaultMessage:"Apps"}),t[4]=a):a=t[4];let i;return t[5]!==o?(i=r.jsx(la,{icon:YE,"data-testid":"apps-button",to:s,state:n,active:o,label:a}),t[5]=o,t[6]=i):i=t[6],i}function xpt(t){"use forget";const e=F.c(8),{inExpandoSidebarSection:s}=t,n=s===void 0?!1:s;let o;if(e[0]===Symbol.for("react.memo_cache_sentinel")){const p=jt();o=wz(p),e[0]=o}else o=e[0];const a=o,i=ne(),l=Hs();let c;e[1]!==n||e[2]!==i?(c=n?a?i.formatMessage({id:"gizmo.exploreGPTsEnabled.short.expando",defaultMessage:"Explore GPTs"}):i.formatMessage({id:"gizmo.exploreStoreEnabled.short.expando",defaultMessage:"Explore"}):i.formatMessage({id:"gizmo.exploreStoreEnabled.short",defaultMessage:"GPTs"}),e[1]=n,e[2]=i,e[3]=c):c=e[3];const u=c;let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=tx(dte()),e[4]=d):d=e[4];const f=l.pathname==="/gpts";let m;return e[5]!==u||e[6]!==f?(m=r.jsx(la,{icon:a?RS:YE,"data-testid":"explore-gpts-button",to:d,active:f,onClick:qqe,label:u}),e[5]=u,e[6]=f,e[7]=m):m=e[7],m}function qqe(){B.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_explore_gpts",{gizmo_id:"explore_gpts"})}const Kqe=t=>x.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:"900.000000pt",height:"900.000000pt",viewBox:"0 0 900.000000 900.000000",preserveAspectRatio:"xMidYMid meet"},t),x.createElement("metadata",null,"\n    Created by potrace 1.10, written by Peter Selinger 2001-2011\n  "),x.createElement("g",{transform:"translate(0.000000,900.000000) scale(0.100000,-0.100000)",fill:"currentColor",stroke:"none"},x.createElement("path",{d:"M1844 8225 c-10 -8 -31 -15 -46 -15 -23 0 -100 -49 -133 -84 -29 -31 -65 -97 -81 -146 -9 -30 -22 -61 -28 -69 -12 -15 -14 -547 -3 -631 12 -91 25 -156 41 -205 9 -27 14 -56 11 -63 -3 -7 1 -25 9 -40 15 -29 45 -129 51 -171 2 -13 8 -28 14 -34 6 -6 11 -25 11 -43 0 -17 7 -37 14 -44 8 -6 20 -28 27 -48 35 -112 261 -524 319 -582 7 -7 83 -102 95 -119 5 -8 60 -64 120 -125 108 -109 188 -177 272 -229 24 -15 45 -38 49 -51 6 -25 -12 -67 -43 -101 -40 -45 -112 -134 -161 -200 -28 -38 -55 -74 -59 -80 -5 -5 -16 -22 -25 -36 -9 -14 -23 -32 -30 -40 -8 -8 -26 -34 -41 -59 -14 -25 -34 -54 -44 -65 -18 -21 -44 -57 -127 -178 -43 -64 -68 -105 -121 -202 -12 -22 -31 -56 -43 -75 -33 -52 -104 -200 -157 -325 -26 -60 -53 -123 -60 -140 -7 -16 -21 -57 -30 -90 -10 -33 -22 -66 -28 -73 -5 -7 -11 -27 -13 -45 -2 -17 -10 -50 -18 -72 -30 -89 -36 -113 -36 -149 0 -20 -9 -55 -20 -77 -12 -22 -18 -44 -15 -49 3 -5 0 -75 -7 -157 -13 -171 4 -540 27 -577 7 -12 15 -43 19 -70 3 -27 10 -54 14 -60 4 -6 16 -38 26 -71 24 -80 33 -101 96 -230 52 -106 107 -204 120 -215 3 -3 17 -23 30 -45 37 -61 127 -181 199 -265 127 -149 507 -514 626 -602 6 -4 37 -30 70 -56 33 -27 83 -64 110 -83 28 -19 52 -37 55 -40 3 -4 24 -17 48 -29 23 -12 44 -26 47 -30 3 -5 19 -11 35 -15 16 -4 51 -17 77 -31 27 -13 55 -24 64 -24 9 0 34 -8 55 -17 59 -26 404 -26 489 0 128 40 228 76 235 86 3 5 22 16 42 25 l37 18 48 -34 c26 -18 57 -41 68 -52 30 -27 165 -116 177 -116 5 0 24 -6 41 -14 18 -7 46 -19 62 -26 92 -39 315 -59 435 -40 158 25 173 29 295 74 134 49 315 165 455 290 95 85 363 361 554 570 49 53 104 109 123 123 l34 26 62 -15 c34 -9 105 -28 156 -42 52 -14 105 -26 117 -26 13 0 25 -4 28 -8 6 -10 273 -33 401 -35 97 -2 294 20 310 34 5 5 17 9 27 9 49 0 240 86 330 148 99 70 146 115 236 227 67 82 67 81 130 210 63 128 80 171 88 220 4 22 11 45 16 52 14 18 21 308 10 378 -19 113 -33 159 -69 230 -42 82 -59 112 -78 135 -41 52 -243 246 -290 280 -27 19 -56 42 -64 50 -9 9 -38 33 -66 55 -84 67 -317 305 -386 395 -83 107 -212 298 -260 385 -9 17 -27 50 -41 75 -14 25 -42 77 -63 115 -21 39 -50 93 -65 120 -16 28 -36 66 -46 85 -11 19 -22 37 -25 40 -3 3 -14 21 -25 40 -10 19 -38 62 -60 95 -43 62 -60 111 -50 143 3 10 30 35 59 57 28 21 57 44 62 49 6 6 30 25 55 41 60 40 312 291 386 385 48 62 119 165 201 296 60 94 182 380 203 474 4 19 13 48 19 63 6 16 11 40 11 54 0 15 6 49 14 77 15 52 30 135 45 241 5 33 14 78 20 100 17 63 14 431 -4 491 -8 27 -15 65 -15 84 0 19 -7 57 -15 84 -8 27 -15 64 -15 82 0 18 -4 35 -9 38 -5 4 -14 29 -20 57 -22 102 -109 250 -181 309 -81 66 -120 80 -229 80 -75 0 -101 -4 -111 -15 -7 -8 -23 -15 -36 -15 -12 0 -29 -7 -38 -15 -8 -8 -18 -15 -21 -15 -4 0 -27 -13 -52 -30 -24 -16 -47 -30 -50 -30 -3 0 -22 -13 -43 -30 -21 -16 -41 -30 -45 -30 -7 0 -85 -58 -95 -71 -3 -3 -34 -30 -70 -59 -76 -62 -213 -202 -308 -314 -37 -43 -87 -103 -112 -132 -25 -29 -58 -71 -75 -94 -16 -22 -55 -72 -85 -110 -73 -91 -202 -292 -255 -395 -8 -16 -28 -52 -44 -80 -17 -27 -39 -70 -51 -95 -12 -25 -26 -52 -31 -60 -5 -8 -12 -22 -15 -30 -3 -8 -12 -31 -21 -50 -16 -38 -36 -85 -60 -140 -38 -90 -50 -105 -84 -108 -22 -2 -50 6 -79 22 -51 28 -185 94 -215 107 -11 4 -41 17 -67 28 -26 12 -53 21 -60 21 -8 0 -18 4 -24 9 -12 11 -142 51 -166 51 -11 0 -28 5 -40 11 -23 13 -221 32 -323 32 -95 -1 -257 -18 -281 -31 -10 -5 -38 -13 -62 -17 -40 -6 -44 -5 -77 31 -19 21 -35 42 -35 47 0 13 -72 131 -82 135 -4 2 -8 12 -8 22 0 10 -4 21 -9 24 -5 4 -30 38 -56 77 -117 177 -372 459 -565 623 -77 66 -314 246 -323 246 -2 0 -44 26 -93 58 -49 33 -118 75 -154 94 -36 19 -81 45 -100 57 -19 11 -42 23 -50 26 -8 4 -41 19 -72 36 -32 16 -66 29 -77 29 -10 0 -24 7 -31 15 -7 8 -20 15 -29 15 -9 0 -25 7 -35 15 -11 8 -27 15 -37 15 -9 0 -22 7 -29 15 -7 8 -24 15 -39 15 -14 1 -37 7 -51 15 -14 8 -35 14 -46 15 -12 0 -27 7 -34 15 -7 9 -30 15 -54 15 -22 0 -50 7 -60 15 -14 11 -46 15 -111 15 -65 0 -97 -4 -111 -15z m340 -630 c11 -8 29 -15 40 -15 24 0 126 -37 141 -51 5 -5 16 -9 24 -9 8 0 22 -6 30 -14 14 -12 65 -42 166 -96 17 -8 83 -52 148 -95 65 -44 126 -84 135 -90 18 -11 65 -50 91 -76 9 -9 31 -26 49 -37 31 -18 226 -204 282 -268 43 -50 150 -184 150 -189 0 -2 26 -39 58 -82 69 -92 90 -127 173 -293 58 -117 114 -256 144 -360 7 -25 18 -57 24 -73 6 -15 15 -58 21 -95 6 -37 16 -82 22 -99 11 -29 9 -35 -12 -58 -20 -21 -32 -25 -84 -25 -34 1 -72 7 -86 15 -14 8 -42 14 -62 15 -34 0 -120 27 -160 50 -10 6 -28 10 -42 10 -22 0 -173 73 -253 123 -21 13 -45 26 -53 30 -36 16 -200 129 -295 202 -186 145 -366 371 -496 623 -28 53 -55 101 -60 107 -5 5 -9 18 -9 28 0 10 -6 31 -13 45 -8 15 -21 42 -30 60 -9 19 -17 41 -17 51 0 9 -6 25 -14 36 -7 11 -16 41 -20 67 -4 26 -11 50 -17 53 -5 4 -9 18 -9 32 0 14 -7 39 -15 56 -22 49 -37 373 -18 410 15 30 38 34 67 12z m4964 2 c11 -13 27 -139 39 -298 3 -48 1 -129 -5 -180 -7 -52 -15 -146 -18 -209 -4 -72 -12 -122 -20 -135 -8 -11 -14 -36 -14 -57 0 -20 -4 -39 -9 -42 -5 -3 -12 -27 -16 -53 -4 -26 -13 -56 -21 -67 -8 -11 -14 -29 -14 -40 0 -16 -45 -116 -80 -176 -5 -8 -11 -22 -14 -30 -6 -16 -9 -21 -76 -125 -25 -38 -47 -72 -50 -75 -3 -3 -37 -45 -75 -95 -94 -121 -324 -351 -402 -402 -36 -24 -63 -9 -133 69 -36 39 -107 114 -157 165 -77 77 -93 98 -93 124 0 28 147 339 212 449 20 34 58 102 102 185 12 22 41 68 64 103 23 35 42 66 42 70 0 4 14 25 30 46 17 22 30 43 30 48 0 4 8 16 18 26 9 11 45 59 79 108 34 49 71 99 83 112 11 12 42 50 68 85 70 90 382 407 402 407 10 0 22 -6 28 -13z m-2448 -1557 c25 -5 79 -14 120 -20 66 -9 119 -23 185 -50 11 -5 43 -16 70 -26 119 -43 287 -144 424 -257 150 -122 293 -274 412 -436 95 -129 299 -441 299 -456 0 -7 9 -20 20 -30 11 -10 20 -25 20 -33 0 -7 8 -26 19 -40 10 -15 31 -49 46 -77 15 -27 41 -72 57 -100 16 -27 36 -63 44 -80 8 -16 21 -39 27 -50 7 -11 39 -65 71 -120 81 -137 174 -283 208 -325 33 -41 38 -47 59 -80 9 -14 26 -36 38 -50 11 -14 24 -29 28 -35 40 -51 216 -244 272 -297 46 -44 71 -75 71 -90 0 -22 -36 -68 -52 -68 -9 0 -83 -55 -103 -76 -5 -6 -30 -26 -55 -45 -97 -74 -317 -319 -358 -399 -108 -210 -105 -201 -112 -380 l-5 -155 -29 -3 c-18 -2 -40 4 -57 17 -16 12 -34 21 -40 21 -7 0 -27 11 -45 25 -18 14 -37 25 -42 25 -5 0 -20 10 -33 21 -13 12 -35 28 -49 37 -54 34 -166 107 -175 115 -70 56 -160 125 -200 152 -27 19 -68 47 -90 63 -61 42 -211 124 -295 161 -41 18 -83 37 -93 42 -10 5 -54 21 -97 35 -44 14 -83 30 -86 35 -3 5 -17 9 -32 9 -15 0 -37 7 -48 15 -12 8 -39 19 -60 24 -22 5 -56 14 -78 20 -21 5 -43 14 -49 20 -6 6 -22 11 -35 11 -13 0 -36 6 -50 14 -15 8 -54 22 -87 31 -33 9 -75 23 -93 31 -18 8 -39 14 -46 14 -7 0 -25 9 -39 20 -14 11 -32 18 -40 15 -7 -3 -20 1 -27 10 -7 8 -27 15 -46 15 -23 0 -37 6 -44 20 -6 11 -20 20 -32 20 -25 0 -137 64 -223 128 -84 62 -250 234 -323 333 -34 46 -73 98 -87 114 -13 17 -25 38 -25 48 0 10 -7 20 -15 23 -8 4 -15 12 -15 19 0 6 -13 31 -30 53 -16 23 -30 46 -30 51 0 5 -6 16 -13 23 -24 26 -77 96 -77 103 0 17 -130 139 -181 171 -52 31 -63 34 -136 34 -73 0 -84 -3 -124 -31 -64 -46 -71 -54 -170 -200 -49 -72 -48 -71 -119 -185 -27 -45 -57 -87 -65 -94 -8 -7 -15 -21 -15 -31 0 -10 -4 -20 -10 -24 -14 -8 -133 -211 -165 -280 -90 -197 -106 -264 -112 -465 -5 -148 10 -255 44 -320 7 -14 13 -31 13 -37 0 -19 110 -194 161 -258 5 -5 25 -30 44 -55 35 -44 85 -103 155 -184 19 -22 67 -72 105 -112 39 -39 165 -170 280 -290 116 -120 252 -259 303 -309 77 -77 92 -97 92 -123 0 -48 -29 -62 -128 -62 -86 0 -184 21 -213 46 -8 8 -23 14 -32 14 -10 0 -36 14 -59 30 -22 17 -47 30 -54 30 -7 0 -14 3 -16 8 -1 4 -25 25 -53 47 -27 22 -72 61 -100 86 -27 26 -82 75 -120 110 -63 57 -137 132 -307 310 -78 82 -136 152 -252 304 -115 152 -143 201 -221 390 -45 107 -68 387 -44 525 5 30 16 98 23 150 16 107 34 190 46 205 5 6 11 28 16 49 4 22 13 51 20 65 8 14 14 34 14 43 0 9 5 20 10 23 6 3 10 13 10 22 0 9 10 37 22 62 60 129 115 240 134 271 11 19 25 46 29 59 9 28 63 119 82 139 7 7 13 18 13 24 0 6 11 26 25 44 14 18 25 35 25 38 0 3 22 38 49 78 26 40 78 118 115 173 37 55 107 159 157 230 49 72 102 148 117 170 76 115 113 155 141 155 16 0 81 -27 145 -60 65 -33 124 -60 132 -60 9 0 48 -11 87 -25 40 -13 113 -30 162 -37 112 -16 432 -16 499 0 60 15 126 43 126 54 0 4 7 8 16 8 25 0 119 97 149 154 30 55 47 150 47 256 0 106 -17 283 -29 305 -20 37 -34 162 -21 190 11 25 12 25 137 25 69 -1 146 -5 171 -10z m-1436 -2361 c14 -11 26 -24 26 -29 0 -15 150 -232 225 -325 81 -101 236 -257 287 -289 18 -11 39 -26 46 -33 8 -8 28 -21 45 -30 18 -9 46 -26 62 -38 40 -29 158 -90 218 -111 26 -9 47 -21 47 -25 0 -5 5 -9 11 -9 11 0 47 -15 125 -51 23 -10 48 -19 57 -19 9 0 18 -4 22 -9 3 -6 26 -13 50 -17 25 -3 48 -10 51 -15 3 -5 13 -9 22 -9 9 0 30 -7 46 -15 16 -8 47 -18 69 -22 23 -3 52 -12 66 -20 14 -7 30 -13 34 -13 15 0 46 -44 47 -64 0 -12 -87 -105 -227 -246 -126 -124 -280 -280 -343 -346 -102 -108 -119 -122 -155 -126 -90 -12 -91 -11 -318 217 -117 116 -244 245 -282 286 -338 358 -460 498 -501 573 -39 71 -46 211 -15 303 12 34 21 70 21 78 0 9 11 40 24 68 13 29 34 75 46 102 66 147 95 203 118 228 31 32 41 33 76 6z m4373 -715 c13 -4 32 -21 43 -40 19 -30 21 -45 17 -176 -3 -136 -19 -238 -37 -238 -4 0 -11 -12 -14 -26 -4 -14 -18 -44 -33 -67 -29 -48 -160 -177 -179 -177 -7 0 -19 -7 -27 -14 -18 -19 -134 -46 -193 -46 -59 0 -137 26 -164 55 -20 21 -22 31 -18 132 3 94 7 116 32 168 16 33 45 80 64 105 83 106 279 263 397 319 23 11 80 13 112 5z m-2192 -632 c17 -10 87 -61 156 -113 70 -52 149 -108 175 -124 68 -43 65 -64 -24 -157 -38 -40 -82 -87 -98 -105 -89 -98 -159 -176 -217 -244 -97 -111 -258 -249 -292 -249 -8 0 -18 -7 -21 -15 -4 -8 -14 -15 -24 -15 -10 0 -25 -7 -34 -15 -8 -8 -22 -15 -32 -15 -10 0 -25 -7 -34 -15 -10 -9 -43 -16 -84 -18 -37 -2 -72 -9 -79 -16 -14 -14 -121 -15 -147 -1 -11 6 -41 12 -68 15 -28 3 -63 12 -78 20 -16 8 -35 15 -41 15 -7 0 -13 4 -13 9 0 5 -13 14 -30 20 -30 10 -36 24 -30 76 1 11 117 135 263 281 254 253 296 297 531 544 142 150 159 159 221 122z"})));function Pq(t){return Ee(t,"2459568560")}function Yqe(t){return Ee(t,"833571076")}function Qqe(t){return Pq(t)}function ypt(t){return Pq(t)&&Yqe(t)}const Jqe=({as:t=la})=>{const e=G(),s=ne();return Qqe(e)?r.jsx(t,{to:"/aardvark",icon:Kqe,external:!mf(),label:s.formatMessage({id:"AardvarkSidebarListItem.aardvark",defaultMessage:"Aardvark"})}):null},bpt=ue(Ce,"730668",20,20),Zqe=ue(Ce,"481f90",25,25),Xqe=({as:t=la})=>r.jsx(t,{to:"/atlas",external:!0,onClick:()=>{B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"atlas"}),B.logEventWithStatsig("Sidebar Click Atlas","chatgpt_sidebar_click_atlas",{gizmo_id:"atlas"})},icon:Zqe,label:r.jsx(j,{id:"n0YPrC",defaultMessage:"Atlas"})});function eKe(){"use forget";const t=F.c(1),e=G(),s=Ee(e,"733205176"),n=Ee(e,"1767304360");if(!(s&&n))return null;let a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(tKe,{}),t[0]=a):a=t[0],a}function tKe(){const{scheduledAutomations:t}=XD({enabled:!0,staleTimeMs:1/0}),e=ne(),s=Hs(),n=fte();return t.length>0?r.jsx(la,{icon:Ec,"data-testid":"schedule-sidebar-button",to:n,active:s.pathname===n,label:e.formatMessage({id:"sidebar.schedulesItem",defaultMessage:"Schedules"})}):null}const sKe=t=>{"use forget";const e=F.c(6),{as:s}=t,n=s===void 0?la:s,o=G(),a=mte(o),i=ope();if(!a||i==="DISABLED")return null;let l;e[0]!==o?(l=f=>{var m;if(B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"codex"}),B.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_codex",{gizmo_id:"codex"}),xt(()=>yr(o))){const p=new URL("/codex",window.location.origin);(m=Xv())==null||m.handleLink(p.toString(),"_blank"),f.preventDefault()}},e[0]=o,e[1]=l):l=e[1];const c=l;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,{id:"EFFUeE",defaultMessage:"Codex"}),e[2]=u):u=e[2];let d;return e[3]!==n||e[4]!==c?(d=r.jsx(nKe,{children:r.jsx(n,{to:"/codex",external:!0,onClick:c,icon:ipe,label:u})}),e[3]=n,e[4]=c,e[5]=d):d=e[5],d};function nKe(t){"use forget";const e=F.c(4),{children:s}=t,n=G();if(kWe(n,"is_codex_sidebar_tooltip_migrated")){let i;return e[0]!==s?(i=r.jsx(oKe,{children:s}),e[0]=s,e[1]=i):i=e[1],i}let a;return e[2]!==s?(a=r.jsx(aKe,{children:s}),e[2]=s,e[3]=a):a=e[3],a}function oKe(t){"use forget";const e=F.c(18),{children:s}=t,n=G(),o=aa();let a;e[0]!==o?(a=()=>o==null?void 0:o.serverId$(),e[0]=o,e[1]=a):a=e[1];const i=oe(a),l=Qe(o==null?void 0:o.id,Se.getCurrentLeafId),c=o?l:void 0;let u;e[2]!==i||e[3]!==c?(u={serverThreadId:i,leafId:c},e[2]=i,e[3]=c,e[4]=u):u=e[4];const d=dk(u),{mutate:f}=gg(),{mutate:m}=hg(),p=(d==null?void 0:d.beacon_id)==="codex_sidebar_tooltip";let g,h;e[5]!==d||e[6]!==f||e[7]!==p?(g=()=>{!p||!d||(Gd(d,"show"),f(d.beacon_id))},h=[d,f,p],e[5]=d,e[6]=f,e[7]=p,e[8]=g,e[9]=h):(g=e[8],h=e[9]),x.useEffect(g,h);let _;e[10]!==d||e[11]!==n||e[12]!==m?(_=()=>{d&&(Gd(d,"dismiss"),m(d.beacon_id),_t(n,px),No.dismiss())},e[10]=d,e[11]=n,e[12]=m,e[13]=_):_=e[13];const b=_;let y;return e[14]!==s||e[15]!==b||e[16]!==p?(y=r.jsx(Rq,{show:p,onDismiss:b,children:s}),e[14]=s,e[15]=b,e[16]=p,e[17]=y):y=e[17],y}function aKe(t){"use forget";const e=F.c(6),{children:s}=t,n=G(),o=Yte(),a=!o.isLoading&&o.eligible;let i;e[0]!==n?(i=()=>_t(n,px),e[0]=n,e[1]=i):i=e[1];let l;return e[2]!==s||e[3]!==a||e[4]!==i?(l=r.jsx(Rq,{show:a,onDismiss:i,children:s}),e[2]=s,e[3]=a,e[4]=i,e[5]=l):l=e[5],l}function Rq(t){"use forget";const e=F.c(9),{children:s,onDismiss:n,show:o}=t,a=ne();if(!o)return s;let i;e[0]!==a?(i=a.formatMessage({id:"wham.sidebarListItem.nuxTooltip.title",defaultMessage:"Software engineering agent"}),e[0]=a,e[1]=i):i=e[1];let l;e[2]!==a?(l=a.formatMessage({id:"wham.whamSidebarListItem.writeInCodebase",defaultMessage:"Answers questions, runs code, and drafts PRs."}),e[2]=a,e[3]=l):l=e[3];let c;return e[4]!==s||e[5]!==n||e[6]!==i||e[7]!==l?(c=r.jsx(nu,{show:!0,side:"right",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",childrenWrapperClassName:"!w-full",announcementKey:px,title:i,description:l,onDismiss:n,children:s}),e[4]=s,e[5]=n,e[6]=i,e[7]=l,e[8]=c):c=e[8],c}const vpt=t=>{"use forget";var O,L,D,H;const e=F.c(50),{as:s,ptnSidebarProps:n,jobsSidebarProps:o}=t,a=G();let i,l;e[0]!==a?(i=ct(a),l=i==null?void 0:i.hasPaidSubscription(),e[0]=a,e[1]=i,e[2]=l):(i=e[1],l=e[2]);const c=l;let u;e[3]!==a?(u=!bs()&&pte(a),e[3]=a,e[4]=u):u=e[4];const d=u,f=!!(n!=null&&n.isPtnEnabled&&((O=n==null?void 0:n.isFirstPartySnorlaxLoading)!=null&&O||((L=n==null?void 0:n.ptnSnorlax)!=null?L:null)!=null)),m=!!(o!=null&&o.isJobsEnabled&&((D=o==null?void 0:o.isFirstPartySnorlaxLoading)!=null&&D||((H=o==null?void 0:o.jobsSnorlax)!=null?H:null)!=null));if(!i)return null;let p;e[5]!==a?(p=Ee(a,"713974087"),e[5]=a,e[6]=p):p=e[6];const g=p;let h;e[7]!==a?(h=Ee(a,"3194776735"),e[7]=a,e[8]=h):h=e[8];const _=h;let b,y,v;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=!1,y=!1,v=!1,e[9]=b,e[10]=y,e[11]=v):(b=e[9],y=e[10],v=e[11]);let S;e[12]!==s?(S=!1,e[12]=s,e[13]=S):S=e[13];let C;e[14]!==_?(C=!1,e[14]=_,e[15]=C):C=e[15];let w;e[16]!==g?(w=!1,e[16]=g,e[17]=w):w=e[17];let k;e[18]!==(n==null?void 0:n.activeThreadId)||e[19]!==(n==null?void 0:n.currentGizmoId)||e[20]!==(n==null?void 0:n.isFirstPartySnorlaxLoading)||e[21]!==(n==null?void 0:n.ptnSnorlax)||e[22]!==f?(k=!1,e[18]=n==null?void 0:n.activeThreadId,e[19]=n==null?void 0:n.currentGizmoId,e[20]=n==null?void 0:n.isFirstPartySnorlaxLoading,e[21]=n==null?void 0:n.ptnSnorlax,e[22]=f,e[23]=k):k=e[23];let E;e[24]!==(o==null?void 0:o.activeThreadId)||e[25]!==(o==null?void 0:o.currentGizmoId)||e[26]!==(o==null?void 0:o.isFirstPartySnorlaxLoading)||e[27]!==(o==null?void 0:o.jobsSnorlax)||e[28]!==m?(E=!1,e[24]=o==null?void 0:o.activeThreadId,e[25]=o==null?void 0:o.currentGizmoId,e[26]=o==null?void 0:o.isFirstPartySnorlaxLoading,e[27]=o==null?void 0:o.jobsSnorlax,e[28]=m,e[29]=E):E=e[29];let M;e[30]!==s||e[31]!==c?(M=c&&r.jsx(sKe,{as:s}),e[30]=s,e[31]=c,e[32]=M):M=e[32];let N;e[33]!==s||e[34]!==d?(N=d&&r.jsx(Xqe,{as:s}),e[33]=s,e[34]=d,e[35]=N):N=e[35];let A,I;e[36]!==s?(A=r.jsx(Jqe,{as:s}),I=!1,e[36]=s,e[37]=A,e[38]=I):(A=e[37],I=e[38]);let P;e[39]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx(eKe,{}),e[39]=P):P=e[39];let R;return e[40]!==w||e[41]!==k||e[42]!==E||e[43]!==M||e[44]!==N||e[45]!==A||e[46]!==I||e[47]!==S||e[48]!==C?(R=r.jsxs(r.Fragment,{children:[b,y,v,S,C,w,k,E,M,N,A,I,P]}),e[40]=w,e[41]=k,e[42]=E,e[43]=M,e[44]=N,e[45]=A,e[46]=I,e[47]=S,e[48]=C,e[49]=R):R=e[49],R},Oq=Bt(()=>Le({}));function Spt(t,e){var s;return(s=Oq(t)[e])!=null?s:null}function Cpt(t,e,s){Oq.set(t,n=>U(T({},n),{[e]:s}))}function rKe({task:t}){const e=ZF(t);return t.status===Is.UNDETERMINED?r.jsx(Fd,{percentage:0,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):gte(t)?r.jsx(LNe,{className:"text-token-text-secondary"}):r.jsx(Fd,{percentage:e,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"".concat((100-e)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})}const x5=ue(Ce,"946e20",20,20),Qd=Zt(Vs(()=>({dragData:null,conversationDropTargetCount:0}))),iKe=()=>{"use forget";return Qd(dKe)},lKe=t=>{Qd.setState({dragData:t})},cKe=()=>{Qd.setState(t=>{t.dragData=null})},wpt=()=>(Qd.setState(t=>{t.conversationDropTargetCount+=1}),()=>{Qd.setState(t=>{t.conversationDropTargetCount=Math.max(0,t.conversationDropTargetCount-1)})}),uKe=()=>{"use forget";return Qd(fKe)};function dKe(t){return t.dragData}function fKe(t){return t.conversationDropTargetCount>0}function mKe({text:t}){const e=GU(),[s,n]=x.useState({finalText:t,pos:0,isTyping:!!t});x.useEffect(()=>{n(t?{finalText:t,pos:0,isTyping:!0}:{finalText:"",pos:0,isTyping:!1})},[t]);const o=x.useMemo(()=>Array.from(s.finalText),[s.finalText]),a=x.useMemo(()=>s.finalText?new pKe().humanTypingDelaysQuertyDistance(o):[],[o,s.finalText]);return x.useEffect(()=>{if(!s.isTyping)return;const i=a.map((l,c)=>setTimeout(()=>{e()&&n(u=>U(T({},u),{pos:c+1,isTyping:c+1<o.length}))},l));return()=>i.forEach(clearTimeout)},[s.isTyping,a,o,e]),r.jsx(r.Fragment,{children:s.finalText.slice(0,s.pos)})}class pKe{qwertyDistance(e,s){var c,u;const n={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[o,a]=(c=n[e.toLowerCase()])!=null?c:[0,0],[i,l]=(u=n[s.toLowerCase()])!=null?u:[0,0];return Math.abs(o-i)+Math.abs(a-l)}humanTypingDelaysQuertyDistance(e,s=10,n=100){let o=0;const a=[];for(let i=0;i<e.length;++i){let l;if(i>0){const c=this.qwertyDistance(e[i-1],e[i]);c===0?l=this.getRandomInt(s,Math.floor(n/2)):c===1?l=this.getRandomInt(s,Math.floor(n*2/3)):l=this.getRandomInt(s,n)}else l=this.getRandomInt(s,n);a.push(l+o),o+=l}return a}getRandomInt(e,s){return Math.floor(Math.random()*(s-e+1))+e}}function gKe(t){const e=G(),[s,n]=x.useState(()=>xt(()=>hte(e)().some(a=>a.conversationId===t)));return x.useEffect(()=>{var a;let o=(a=Tt(t))==null?void 0:a.title;return PR.subscribe(i=>{const l=Tt(t,i),c=l==null?void 0:l.title;c!==o&&((l==null?void 0:l.titleSource)===$_.Generated&&Y9()?n(!0):n(!1),o=c)})},[t]),s}function hKe(t){"use forget";const e=F.c(9),{clientThreadId:s,historyConversationResponse:n,shouldShowLoadingShimmer$:o}=t,a=oe(o);let i;e[0]!==n.is_do_not_remember||e[1]!==a?(i=z({"loading-shimmer":a,"opacity-60":n.is_do_not_remember}),e[0]=n.is_do_not_remember,e[1]=a,e[2]=i):i=e[2];let l;e[3]!==s||e[4]!==n?(l=r.jsx(_Ke,{clientThreadId:s,historyConversationResponse:n}),e[3]=s,e[4]=n,e[5]=l):l=e[5];let c;return e[6]!==i||e[7]!==l?(c=r.jsx("span",{className:i,dir:"auto",children:l}),e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function _Ke(t){"use forget";const e=F.c(2),{clientThreadId:s,historyConversationResponse:n}=t,o=Qe(s,xKe),a=gKe(s),i=o!=null?o:n.title;if(a){const l=i!=null?i:"";let c;return e[0]!==l?(c=r.jsx(mKe,{text:l}),e[0]=l,e[1]=c):c=e[1],c}return i}function xKe(t){return t==null?void 0:t.title}function yKe(t){"use forget";const e=F.c(19),{conversationId:s,historyConversationResponse:n,onClose:o}=t;let a;e[0]!==s||e[1]!==n?(a=()=>{var h,_,b;return(b=(_=(h=Tt(s))==null?void 0:h.title)!=null?_:n.title)!=null?b:""},e[0]=s,e[1]=n,e[2]=a):a=e[2];const[i]=x.useState(a),l=x.useRef(null),c=G(),u=Gt();let d;e[3]!==s||e[4]!==c||e[5]!==n||e[6]!==i||e[7]!==u?(d=function(){var v,S;const _=(S=(v=l.current)==null?void 0:v.value)!=null?S:"";if(_===i)return;ok(c,s,_,$_.User),B.logEvent("Rename Thread",{threadId:s,content:_}),(Ee(c,"3195513281")?de.safePost("/conversation/id/{conversation_id}/rename",{parameters:{path:{conversation_id:s}},requestBody:{title:_}}):de.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s}},requestBody:{title:_}})).then(()=>{Ea(u,n.gizmo_id)})},e[3]=s,e[4]=c,e[5]=n,e[6]=i,e[7]=u,e[8]=d):d=e[8];const f=d;let m;e[9]!==o||e[10]!==f?(m=h=>{if(!h.nativeEvent.isComposing){h.key===" "&&h.stopPropagation();e:switch(h.key){case"Escape":{o();break e}case"Enter":f(),o()}}},e[9]=o,e[10]=f,e[11]=m):m=e[11];let p;e[12]!==o||e[13]!==f?(p=()=>{f(),o()},e[12]=o,e[13]=f,e[14]=p):p=e[14];let g;return e[15]!==i||e[16]!==m||e[17]!==p?(g=r.jsx("input",{type:"text",defaultValue:i,ref:l,onClick:vKe,onKeyDown:m,onFocus:bKe,onBlur:p,autoFocus:!0,className:"w-full border-none bg-transparent p-0 text-sm focus:ring-0"}),e[15]=i,e[16]=m,e[17]=p,e[18]=g):g=e[18],g}function bKe(t){var e;(e=t.currentTarget)==null||e.select()}function vKe(t){t.preventDefault()}const Lq=Pe(()=>me(()=>Promise.resolve().then(()=>Pxe),void 0).then(t=>t.GizmoConversationOptionsDropdown)),SKe=new Date(2024,9,11,0);function CKe(t){B.logEvent("Load Thread",{threadId:t})}function kpt(t){"use forget";const e=F.c(11),{conversation:s,onOpenChange:n,testId:o,inMainScreen:a,isActiveConversation:i}=t,l=a===void 0?!1:a,c=ne();if(!ut())return null;let d;e[0]!==c?(d=c.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),e[0]=c,e[1]=d):d=e[1];let f;e[2]!==d||e[3]!==o?(f=r.jsx(Ap,{"data-testid":o,className:"m-0","data-prevent-default":!0,"aria-label":d,icon:ra}),e[2]=d,e[3]=o,e[4]=f):f=e[4];let m;return e[5]!==s||e[6]!==l||e[7]!==i||e[8]!==n||e[9]!==f?(m=r.jsx(Lq,{conversation:s,onOpenChange:n,inMainScreen:l,isActiveConversation:i,children:f}),e[5]=s,e[6]=l,e[7]=i,e[8]=n,e[9]=f,e[10]=m):m=e[10],m}const N0=x.memo(wKe);function wKe(t){"use forget";var at,kt,Nt,Ot;const e=F.c(118),{conversation:s,className:n,hideOverflowMenu:o,isActive:a,elementRef:i,testId:l,onSelect:c,icon:u,isStarred:d}=t,f=o===void 0?!1:o,m=ne(),p=G(),[g,h]=x.useState(!1),_=fs(),b="owner"in s?(at=s.owner)==null?void 0:at.user_id:null,y=b==null||b===(_==null?void 0:_.normalizedAccountUserId);let v;e[0]!==p?(v=Ee(p,"232791851"),e[0]=p,e[1]=v):v=e[1];const S=v;let C,w;e[2]!==s.async_status||e[3]!==s.id||e[4]!==p?(C=()=>{if(s.id!=null&&s.async_status!=null){const At=Et(p,s.id);jR(At,{source:Cn.SERVER,value:s.async_status})}},w=[p,s.id,s.async_status],e[2]=s.async_status,e[3]=s.id,e[4]=p,e[5]=C,e[6]=w):(C=e[5],w=e[6]),x.useEffect(C,w);let k;e[7]!==s.id||e[8]!==p?(k=()=>{if(s.id===void 0)return null;const At=Et(p,s.id);return Sl(At)},e[7]=s.id,e[8]=p,e[9]=k):k=e[9];const E=k;let M;e[10]!==E?(M=()=>{var At,Wt;return(Wt=(At=E())==null?void 0:At.value)!=null?Wt:null},e[10]=E,e[11]=M):M=e[11];const N=M;let A;e[12]!==E?(A=()=>{var At,Wt;return(Wt=(At=E())==null?void 0:At.source)!=null?Wt:null},e[12]=E,e[13]=A):A=e[13];const I=A,P=Qe(s.id,Se.getRequestId);let R;e[14]!==p||e[15]!==P?(R=()=>xte(p,P),e[14]=p,e[15]=P,e[16]=R):R=e[16];const O=R;let L;e[17]!==s.update_time?(L=Mw(new Date,new Date((kt=s.update_time)!=null?kt:0)),e[17]=s.update_time,e[18]=L):L=e[18];const D=L<mW(fW.Standard,p);let H;e[19]!==s.update_time?(H=s.update_time&&_te(new Date(s.update_time),SKe),e[19]=s.update_time,e[20]=H):H=e[20];const V=H;let q;e[21]!==N||e[22]!==D?(q=()=>(N()===Xt.STREAMING||N()===Xt.REALTIME)&&D,e[21]=N,e[22]=D,e[23]=q):q=e[23];const W=q;let $;e[24]!==N||e[25]!==V||e[26]!==p||e[27]!==a||e[28]!==O||e[29]!==S?($=()=>!!(S&&!a&&!O()&&V&&N()===Xt.UNREAD&&!Ss(p)),e[24]=N,e[25]=V,e[26]=p,e[27]=a,e[28]=O,e[29]=S,e[30]=$):$=e[30];const Z=$;let K;e[31]!==N||e[32]!==W||e[33]!==a||e[34]!==O||e[35]!==S?(K=()=>S&&!a&&(O()||W()||N()===Xt.REALTIME_BUSY),e[31]=N,e[32]=W,e[33]=a,e[34]=O,e[35]=S,e[36]=K):K=e[36];const Y=K,ae=S&&!a;let se;e[37]!==W||e[38]!==a||e[39]!==O||e[40]!==Y||e[41]!==S?(se=()=>!Y()&&S&&!a&&(O()||W()),e[37]=W,e[38]=a,e[39]=O,e[40]=Y,e[41]=S,e[42]=se):se=e[42];const ee=se,re=_W(s.id)&&!a,he=x.useRef(!1);let fe,pe;e[43]!==I||e[44]!==N||e[45]!==s.id||e[46]!==p||e[47]!==a||e[48]!==O?(fe=()=>{if(!he.current&&Ee(p,"3922476776"))return a?Zo(()=>(O(),N()===Xt.UNREAD),async At=>{At&&(I()===Cn.SERVER&&(he.current=!0,await de.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:s.id}},requestBody:{status:null}})),so(s.id,null),he.current=!1)},{fireImmediately:!0}):Zo(()=>(O(),I()===Cn.CLIENT&&N()===Xt.UNREAD),async At=>{At&&(he.current=!0,await de.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:s.id}},requestBody:{status:N()}}),so(s.id,{value:Xt.UNREAD,source:Cn.SERVER}),he.current=!1)})},pe=[p,a,s.id,N,I,O],e[43]=I,e[44]=N,e[45]=s.id,e[46]=p,e[47]=a,e[48]=O,e[49]=fe,e[50]=pe):(fe=e[49],pe=e[50]),x.useEffect(fe,pe);let le,ve;e[51]!==s.id||e[52]!==a||e[53]!==y?(le=()=>Z9(HF,{editTitle:At=>{const{serverThreadId:Wt}=At;y&&(Wt?Wt===s.id:a)&&h(!0)}}),ve=[s.id,a,y],e[51]=s.id,e[52]=a,e[53]=y,e[54]=le,e[55]=ve):(le=e[54],ve=e[55]),x.useEffect(le,ve);let Te;e[56]!==s.conversation_template_id||e[57]!==p?(Te=()=>{var At,Wt;if(s.conversation_template_id!=null)return(Wt=(At=yte(p).data)==null?void 0:At.gizmos.find(hs=>hs.resource.gizmo.id===s.conversation_template_id))==null?void 0:Wt.resource},e[56]=s.conversation_template_id,e[57]=p,e[58]=Te):Te=e[58];const xe=oe(Te),ce=x.useRef(null);let we;e[59]!==xe||e[60]!==s.gizmo_id?(we=ww(s.gizmo_id)&&xe?xe.gizmo:void 0,e[59]=xe,e[60]=s.gizmo_id,e[61]=we):we=e[61];const ge=we,Ae=s.gizmo_id&&jn(s.gizmo_id)&&"owner"in s?{id:s.gizmo_id}:void 0,Ue="owner"in s?(Nt=s.owner)==null?void 0:Nt.user_id:void 0,Ie=(Ot=ct(p))==null?void 0:Ot.normalizedAccountUserId,Me=uKe(),te=x.useRef(null),Q=la;let ie;e[62]!==s.gizmo_id||e[63]!==Me||e[64]!==g||e[65]!==d?(ie=!g&&Me&&Wv(s.gizmo_id,d),e[62]=s.gizmo_id,e[63]=Me,e[64]=g,e[65]=d,e[66]=ie):ie=e[66];let _e;e[67]!==s||e[68]!==d?(_e=At=>{var ls;if(!Wv(s.gizmo_id,d))return;const Wt=At.currentTarget,hs=ce.current;hs&&(hs.style.display="none"),Wt.style.opacity="0.99",hs&&requestAnimationFrame(()=>{hs.style.display="",Wt.style.opacity="0"}),At.dataTransfer.effectAllowed="move",lKe({kind:"conversation",conversation:s,gizmoId:(ls=s.gizmo_id)!=null?ls:null})},e[67]=s,e[68]=d,e[69]=_e):_e=e[69];const ye=kKe;let Re;e[70]!==i?(Re=zT(i,te),e[70]=i,e[71]=Re):Re=e[71];const Ve=ya(s.id,{gizmo:ge?{gizmo:ge}:void 0,project:Ae||void 0,ownerUserId:Ue,accountUserId:Ie});let ze;e[72]!==s.id||e[73]!==a||e[74]!==c?(ze=At=>{At.metaKey||At.ctrlKey||!a&&!At.defaultPrevented&&(CKe(s.id),c==null||c())},e[72]=s.id,e[73]=a,e[74]=c,e[75]=ze):ze=e[75];let Fe;e[76]===Symbol.for("react.memo_cache_sentinel")?(Fe=()=>{h(!0)},e[76]=Fe):Fe=e[76];const be=!!d;let Oe;e[77]!==ae||e[78]!==s.id||e[79]!==a||e[80]!==g||e[81]!==Y||e[82]!==Z||e[83]!==be?(Oe=r.jsx(TKe,{conversationId:s.id,isActive:a,isEditingTitle:g,isStarred:be,canShowAsyncTaskProgressCircle:ae,shouldShowUnreadNotification$:Z,shouldShowLoadingSpinner$:Y}),e[77]=ae,e[78]=s.id,e[79]=a,e[80]=g,e[81]=Y,e[82]=Z,e[83]=be,e[84]=Oe):Oe=e[84];let qe;e[85]!==s||e[86]!==f||e[87]!==m||e[88]!==a||e[89]!==g||e[90]!==l?(qe=!f&&!g&&r.jsx(Lq,{conversation:s,isActiveConversation:a,onOpenChange:At=>{At&&B.logEvent("Conversation History Item Open Menu",{conversationId:s.id})},children:r.jsx(Ap,{ref:ce,"data-testid":"".concat(l,"-options"),"aria-label":m.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),icon:ra})}),e[85]=s,e[86]=f,e[87]=m,e[88]=a,e[89]=g,e[90]=l,e[91]=qe):qe=e[91];let Ze;e[92]!==s||e[93]!==g||e[94]!==ee?(Ze=!g&&r.jsx(hKe,{clientThreadId:s.id,historyConversationResponse:s,shouldShowLoadingShimmer$:ee}),e[92]=s,e[93]=g,e[94]=ee,e[95]=Ze):Ze=e[95];let st;e[96]!==s.id||e[97]!==re?(st=re&&r.jsx(hW,{threadId:s.id}),e[96]=s.id,e[97]=re,e[98]=st):st=e[98];let rt;e[99]!==s||e[100]!==g?(rt=g?r.jsx(yKe,{conversationId:s.id,historyConversationResponse:s,onClose:()=>{h(!1)}}):null,e[99]=s,e[100]=g,e[101]=rt):rt=e[101];let wt;return e[102]!==Q||e[103]!==n||e[104]!==u||e[105]!==a||e[106]!==ie||e[107]!==_e||e[108]!==ye||e[109]!==Re||e[110]!==Ve||e[111]!==ze||e[112]!==Oe||e[113]!==qe||e[114]!==Ze||e[115]!==st||e[116]!==rt?(wt=r.jsxs(Q,{icon:u,draggable:ie,onDragStart:_e,onDragEnd:ye,ref:Re,active:a,className:n,to:Ve,onClick:ze,onDoubleClick:Fe,trailing:Oe,highlightTrailing:qe,label:Ze,children:[st,rt]}),e[102]=Q,e[103]=n,e[104]=u,e[105]=a,e[106]=ie,e[107]=_e,e[108]=ye,e[109]=Re,e[110]=Ve,e[111]=ze,e[112]=Oe,e[113]=qe,e[114]=Ze,e[115]=st,e[116]=rt,e[117]=wt):wt=e[117],wt}function kKe(t){t.currentTarget.style.opacity="",cKe()}function TKe(t){"use forget";const e=F.c(8),{conversationId:s,isActive:n,isEditingTitle:o,isStarred:a,shouldShowUnreadNotification$:i,canShowAsyncTaskProgressCircle:l,shouldShowLoadingSpinner$:c}=t,u=Tw(s),d=oe(i),f=oe(c);let m;return e[0]!==l||e[1]!==u||e[2]!==n||e[3]!==o||e[4]!==a||e[5]!==f||e[6]!==d?(m=!o&&((!n&&d?a?r.jsx(x5,{className:"icon-xs text-blue-500"}):r.jsx(cD,{color:"blue"}):l&&u.length>0?r.jsx(rKe,{task:u[0]}):!n&&f?r.jsx(mhe,{size:16,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"}):null)||(a?r.jsx(x5,{className:"icon-xs text-token-icon-tertiary opacity-50"}):null)),e[0]=l,e[1]=u,e[2]=n,e[3]=o,e[4]=a,e[5]=f,e[6]=d,e[7]=m):m=e[7],m}function EKe({className:t,file:e,fileName:s,fileId:n,gizmoId:o}){const a=Vc(s)&&n!=null,i=ne(),l=$U(e&&nl(e)?e:null,s,n,o,void 0);return a?r.jsx("div",{className:z("flex h-full w-full items-center justify-center bg-[#8F8F8F] bg-cover bg-center text-white",t),"aria-label":i.formatMessage({id:"snorlax.imageThumbnail",defaultMessage:"Image thumbnail for {fileName}"},{fileName:s}),style:{backgroundImage:"url(".concat(l,")")},children:!l&&r.jsx(If,{className:"icon-lg"})}):null}const MKe=Pe(()=>me(()=>import("./k5tpue93by1z42la.js"),__vite__mapDeps([461,1,3,4,181,129,130,182,183])).then(t=>t.ProjectFileModal)),y5=Pe(()=>me(()=>import("./mbkrlljiwhbkwjre.js"),__vite__mapDeps([177,1,3,4])).then(t=>t.CustomInstructionsModal));function Tpt({gizmo:t}){return r.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:t?r.jsxs(r.Fragment,{children:[r.jsx(NKe,{gizmo:t,className:"rounded-s-[20px] rounded-e-[0] border-[1px] border-e-[0.5px]"}),r.jsx(IKe,{gizmo:t,className:"rounded-s-[0] rounded-e-[20px] border-[1px] border-s-[0.5px]"})]}):r.jsxs(r.Fragment,{children:[r.jsx(b5,{}),r.jsx(b5,{})]})})}const v3=({className:t,header:e,context:s,contextClassName:n="",icon:o,onClick:a,disabled:i=!1})=>r.jsx("button",{onClick:a,disabled:i,className:z("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",t),children:r.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[r.jsxs("div",{className:"w-full grow text-start",children:[r.jsx("div",{className:"text-sm font-medium",children:e}),r.jsx("div",{className:z("text-token-text-secondary text-xs",n),children:s})]}),o]})}),b5=()=>{"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(v3,{disabled:!0,header:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})}),t[0]=e):e=t[0],e};function NKe(t){"use forget";const e=F.c(28),{className:s,gizmo:n}=t,{files:o}=n,a=!o.length,i=G();let l;e[0]!==i||e[1]!==n?(l=()=>mt(i,MKe,{gizmo:n}),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let u,d,f;const{canEdit:m}=qC(n);if(a){const h=m?cs.addFilesButtonLabel:cs.viewFilesButtonLabel;let _;e[3]!==h?(_=r.jsx(j,T({},h)),e[3]=h,e[4]=_):_=e[4],u=_;const b=m?cs.filesControlDescription:cs.noFilesReadOnlyDescription;let y;e[5]!==b?(y=r.jsx(j,T({},b)),e[5]=b,e[6]=y):y=e[6],d=y,f=null}else{let h,_;if(e[7]!==o||e[8]!==n.gizmo){const y=o.slice(0,3);let v;e[13]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(j,T({},cs.projectFilesModalTitle)),e[13]=v):v=e[13],u=v;let S;e[14]!==o.length?(S=r.jsx(j,U(T({},cs.filesCount),{values:{count:o.length}})),e[14]=o.length,e[15]=S):S=e[15],d=S,h="relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only";let C;e[16]!==n.gizmo?(C=(w,k)=>r.jsx(AKe,{file:w,index:k,gizmoId:n.gizmo.id},w.id),e[16]=n.gizmo,e[17]=C):C=e[17],_=y.toReversed().map(C),e[7]=o,e[8]=n.gizmo,e[9]=h,e[10]=_,e[11]=u,e[12]=d}else h=e[9],_=e[10],u=e[11],d=e[12];let b;e[18]!==h||e[19]!==_?(b=r.jsx("div",{className:h,children:_}),e[18]=h,e[19]=_,e[20]=b):b=e[20],f=b}const p=a&&!m;let g;return e[21]!==s||e[22]!==d||e[23]!==u||e[24]!==f||e[25]!==c||e[26]!==p?(g=r.jsx(v3,{className:s,onClick:c,header:u,context:d,icon:f,disabled:p}),e[21]=s,e[22]=d,e[23]=u,e[24]=f,e[25]=c,e[26]=p,e[27]=g):g=e[27],g}function AKe(t){"use forget";const e=F.c(16),{file:s,index:n,gizmoId:o}=t,a=s.name;let i;e[0]!==s.file_id||e[1]!==a?(i=Vc(a)&&s.file_id!=null,e[0]=s.file_id,e[1]=a,e[2]=i):i=e[2];const l=i;let c;e[3]!==s.file_id||e[4]!==a||e[5]!==o||e[6]!==l?(c=l&&r.jsx(EKe,{fileName:a,fileId:s.file_id,gizmoId:o,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"}),e[3]=s.file_id,e[4]=a,e[5]=o,e[6]=l,e[7]=c):c=e[7];const u=c,d="translateX(".concat(n*-20,"px)");let f;e[8]!==d?(f={transform:d},e[8]=d,e[9]=f):f=e[9];let m;e[10]!==s.name||e[11]!==u?(m=u||r.jsx(RT,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:s.name,contextConnectorInfo:void 0}),e[10]=s.name,e[11]=u,e[12]=m):m=e[12];let p;return e[13]!==f||e[14]!==m?(p=r.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:f,children:m}),e[13]=f,e[14]=m,e[15]=p):p=e[15],p}function IKe(t){"use forget";const e=F.c(15),{gizmo:s,className:n}=t,{instructions:o}=s.gizmo,a=!o.length,i=G();let l;e[0]!==i||e[1]!==s?(l=()=>mt(i,y5,{gizmo:s,onClose:()=>Un(i,y5)}),e[0]=i,e[1]=s,e[2]=l):l=e[2];const c=l;let u,d,f;const{canEdit:m}=qC(s);if(a){const h=m?cs.customInstructionsTitle:cs.customInstructionsReadOnlyTitle;let _;e[3]!==h?(_=r.jsx(j,T({},h)),e[3]=h,e[4]=_):_=e[4],u=_;const b=m?cs.customInstructionsDescription:cs.customInstructionsReadOnlyDescription;let y;e[5]!==b?(y=r.jsx(j,T({},b)),e[5]=b,e[6]=y):y=e[6],d=y}else{let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(j,T({},cs.editCustomInstructionsTitle)),e[7]=h):h=e[7],u=h,f="overflow-hidden text-ellipsis whitespace-nowrap",d=o}const p=a&&!m;let g;return e[8]!==n||e[9]!==d||e[10]!==f||e[11]!==u||e[12]!==c||e[13]!==p?(g=r.jsx(v3,{className:n,onClick:c,header:u,context:d,contextClassName:f,disabled:p}),e[8]=n,e[9]=d,e[10]=f,e[11]=u,e[12]=c,e[13]=p,e[14]=g):g=e[14],g}function zl(t){"use forget";const e=F.c(10),{data:s,className:n,size:o,style:a}=t,i=s.avatarUrl,l=s.name;let c;e[0]!==n?(c=z("rounded-full object-cover",n),e[0]=n,e[1]=c):c=e[1];let u;e[2]!==o||e[3]!==a?(u=T({width:o,height:o},a),e[2]=o,e[3]=a,e[4]=u):u=e[4];let d;return e[5]!==s.avatarUrl||e[6]!==s.name||e[7]!==c||e[8]!==u?(d=r.jsx("img",{src:i,alt:l,className:c,style:u}),e[5]=s.avatarUrl,e[6]=s.name,e[7]=c,e[8]=u,e[9]=d):d=e[9],d}function jKe({list:t,baseSize:e=40,variant:s="compact",excludeViewer:n=!0}){var c;const o=G(),a=(c=ct(o))==null?void 0:c.normalizedAccountUserId,i=t.filter(u=>n?u.id!==a:!0);if(s==="horizontal-stack"){const d=i.slice(0,3),f=Math.round(e*.33),m=i.length<=3?0:i.length-2;return r.jsx("div",{className:"relative flex shrink-0 items-center",children:d.length>=2?r.jsxs(r.Fragment,{children:[d.map((p,g)=>r.jsx(zl,{data:p,className:"bg-token-bg-primary gizmo-shadow-stroke relative box-content rounded-full",size:e,style:{padding:2,marginLeft:g===0?0:-f,zIndex:100+(g+1)*10}},p.id)),m===0?null:r.jsx("div",{className:"absolute box-content flex items-center justify-center rounded-full bg-black/60 text-white",style:{width:e,height:e,left:(e+4-f)*2+2,zIndex:100+(d.length+1)*10,fontSize:Math.min(16,Math.round(e*.5-2))},children:m},"overlay")]}):i.length===1?r.jsx(zl,{data:i[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):t.length>=1?r.jsx(zl,{data:t[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):null})}const l=Math.round(e*.7);return r.jsx("div",{className:"relative shrink-0",style:{width:e,height:e},children:i.length>=2?r.jsxs(r.Fragment,{children:[r.jsx(zl,{data:i[0],className:"absolute start-0 top-0",size:l}),r.jsx("div",{className:"bg-token-bg-primary absolute -end-0.5 -bottom-0.5 rounded-full p-0.5",children:r.jsx(zl,{data:i[1],size:l})})]}):i.length===1?r.jsx(zl,{data:i[0],className:"gizmo-shadow-stroke",size:e}):t.length>=1?r.jsx(zl,{data:t[0],className:"gizmo-shadow-stroke",size:e}):null})}function PKe({room:t,baseSize:e=40,variant:s="compact"}){const n=oe(()=>t.members$().map(o=>({id:o.accountUserId,avatarUrl:o.avatarUrl,name:o.name})));return r.jsx(jKe,{list:n,baseSize:e,variant:s})}const RKe=ue(Ce,"115ad0",20,20);function OKe(t,e){return t in YS&&typeof e=="boolean"}const YS={apps:!1,projects:!0,gpts:!0,chats:!0,favorites:!1,groupChats:!0},LKe=ys(()=>{const t=DKe(),e={apps:Le(t.sectionStates.apps),projects:Le(t.sectionStates.projects),gpts:Le(t.sectionStates.gpts),chats:Le(t.sectionStates.chats),favorites:Le(t.sectionStates.favorites),groupChats:Le(t.sectionStates.groupChats)};return{sidebarSectionState:e,expandSection:n=>{e[n].set(!0),v5(e)},collapseSection:n=>{e[n].set(!1),v5(e)}}});function v5(t){const e={apps:t.apps(),projects:t.projects(),gpts:t.gpts(),chats:t.chats(),favorites:t.favorites(),groupChats:t.groupChats()};FKe({sectionStates:e})}function DKe(){try{const t=jt(),e=Xe(t,"923802675"),s=U(T({},YS),{gpts:!e.get("are_gpts_collapsed",!1),projects:!e.get("are_projects_collapsed",!1),apps:!e.get("are_apps_collapsed",!1),groupChats:!e.get("are_group_chats_collapsed",!1),chats:!e.get("are_chats_collapsed",!1)}),n=En.getCookie(Mn.SidebarSections);if(n){const o=JSON.parse(n);if(o&&typeof o.sectionStates=="object"){for(const[a,i]of Object.entries(o.sectionStates))OKe(a,i)&&(e.get("override_cookie_open",!1)?s[a]&&(s[a]=i):s[a]=i);return{sectionStates:s}}}return{sectionStates:s}}catch(t){return Ge.addError(new Error("Failed to load sidebar section state",{cause:t})),{sectionStates:YS}}}function FKe(t){try{En.setCookie(Mn.SidebarSections,JSON.stringify({sectionStates:t.sectionStates}))}catch(e){Ge.addError(new Error("Failed to save sidebar section state",{cause:e}))}}function BKe(t){"use forget";const e=F.c(21),{title:s,id:n,children:o}=t,a=G();let i;e[0]!==a?(i=LKe(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=oe(l.sidebarSectionState[n]);let u;e[2]!==n||e[3]!==l||e[4]!==c?(u=()=>{c?l.collapseSection(n):l.expandSection(n)},e[2]=n,e[3]=l,e[4]=c,e[5]=u):u=e[5];const d=u,f=c?"mb-[var(--sidebar-expanded-section-margin-bottom)]":"mb-[var(--sidebar-collapsed-section-margin-bottom)]";let m;e[6]!==f?(m=z("group/sidebar-expando-section",f),e[6]=f,e[7]=m):m=e[7];let p;e[8]!==s?(p=r.jsx(lB,{"data-no-spacing":!0,children:s}),e[8]=s,e[9]=p):p=e[9];let g;e[10]!==c?(g=c?r.jsx(zo,{className:"hidden h-3 w-3 group-hover/sidebar-expando-section:block"}):r.jsx(Zr,{className:"h-3 w-3 group-hover/sidebar-expando-section:block"}),e[10]=c,e[11]=g):g=e[11];let h;e[12]!==d||e[13]!==c||e[14]!==p||e[15]!==g?(h=r.jsxs("button",{onClick:d,"aria-expanded":c,className:"text-token-text-tertiary flex w-full items-center justify-start gap-0.5 px-4 py-1.5",children:[p,g]}),e[12]=d,e[13]=c,e[14]=p,e[15]=g,e[16]=h):h=e[16];const _=c&&o;let b;return e[17]!==m||e[18]!==h||e[19]!==_?(b=r.jsxs("div",{className:m,children:[h,_]}),e[17]=m,e[18]=h,e[19]=_,e[20]=b):b=e[20],b}function Ept(){const t=G();return qp(t).hasAccess?r.jsx(UKe,{}):null}function UKe(){const t=G(),e=qp(t),s=oe(()=>e.sortedRooms$()),n=oe(()=>e.hasFetchedRooms$()),o=oe(()=>e.isFetchingMoreRooms$()),a=oe(()=>e.roomsPaginationCursor$()!=null);return s.length===0?null:r.jsxs(BKe,{id:"groupChats",title:r.jsx(j,{id:"Job6E6",defaultMessage:"Group chats"}),children:[s.map(i=>r.jsx($Ke,{room:i},i.id)),n&&a?r.jsx(P0e,{disabled:o,onClick:i=>{i.preventDefault(),e.fetchMoreRooms$()},children:r.jsx(j,{id:"79QD5f",defaultMessage:"See more"})}):null]})}function $Ke({room:t}){const e=G(),n=ige()===t.id,o=qp(e),a=oe(()=>t.name$()),i=oe(()=>t.unreadMessageCount$()>0),l=oe(()=>t.members$().length===1),c=x.useRef(null),u=r.jsxs("div",{className:"flex items-center space-x-3",children:[i?r.jsx(S5,{}):null,l?r.jsx(RKe,{className:"icon-lg text-token-icon-primary -m-0.5 opacity-[0.15]"}):r.jsx(PKe,{room:t,baseSize:20})]}),d=r.jsxs("div",{className:"flex items-center space-x-2",children:[i?r.jsx(S5,{}):null,r.jsx(HKe,{room:t})]});return r.jsx(la,{to:"/gg/".concat(t.id),draggable:!1,label:a,trailing:u,active:n,highlightTrailing:d,onMouseOver:()=>{c.current!==t.id&&(c.current=t.id,o.fetchMessages$({roomId:t.id}))}})}function HKe({room:t}){const e=G(),s=ne(),n=x.useRef(null),[o,a]=x.useState(!1),i=oe(()=>t.members$().length===1);return r.jsx(ia,{open:o,onOpenChange:l=>{a(l)},side:"bottom",contentAlign:"start",alignOffset:-8,sideOffset:-4,triggerButton:r.jsx(Ap,{ref:n,"aria-label":s.formatMessage({id:"oUP76h",defaultMessage:"Open group chat options"}),icon:ra}),size:"auto",children:o?r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{onClick:()=>{mt(e,nge,{room:t})},icon:Qc,children:r.jsx(j,{id:"2O0yli",defaultMessage:"Rename"})}),r.jsx(J.Item,{onClick:()=>{mt(e,sge,{room:t})},icon:lT,children:r.jsx(j,{id:"qShpjO",defaultMessage:"Add people via group link"})}),i?r.jsx(J.Item,{onClick:()=>{mt(e,tge,{room:t})},icon:Rl,color:"danger",children:r.jsx(j,{id:"wkwt0O",defaultMessage:"Delete"})}):r.jsx(J.Item,{onClick:()=>{mt(e,ege,{room:t})},icon:uD,color:"danger",children:r.jsx(j,{id:"HxAKnp",defaultMessage:"Leave"})})]}):null})}function S5(){return r.jsx(It,{label:r.jsx(j,{id:"ruB6tr",defaultMessage:"Unread"}),triggerAs:null,side:"top",children:r.jsx("span",{className:"bg-token-interactive-icon-accent-default inline-block h-2 w-2 flex-shrink-0 rounded-full"})})}function Mpt({gizmoResource:t,serverThreadId:e,isOnProjectPage:s,conversations:n,hasNextPage:o=!1}){const a=G(),i=n!=null?n:[],l=i.findIndex(d=>d.id===e),c=i.slice(0,Ug);l!=null&&l>=Ug&&(c[Ug-1]=i[l]);const u=o||i.length>Ug;return r.jsxs(r.Fragment,{children:[c.map(d=>r.jsx(N0,{className:"ps-9",conversation:d,isActive:d.id===e},d.id)),u&&!s&&r.jsx(la,{to:$m(a,t),className:"ps-9",label:r.jsx(j,T({},cs.seeAllChats))})]})}function Npt(t){"use forget";const e=F.c(21),{className:s,autoFocus:n,initialValue:o,onCommit:a,onCancel:i}=t,l=n===void 0?!0:n,[c,u]=x.useState(o),d=x.useRef(null);let f;e[0]!==o||e[1]!==i||e[2]!==a||e[3]!==c?(f=function(){c!==o?a(c):i()},e[0]=o,e[1]=i,e[2]=a,e[3]=c,e[4]=f):f=e[4];const m=f;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=y=>u(y.target.value),e[5]=p):p=e[5];let g;e[6]!==m||e[7]!==i?(g=y=>{if(h9(y)){y.key===" "&&y.stopPropagation();e:switch(y.key){case"Escape":{i();break e}case"Enter":m()}}},e[6]=m,e[7]=i,e[8]=g):g=e[8];let h;e[9]!==m||e[10]!==i||e[11]!==c.length?(h=()=>{c.length?m():i()},e[9]=m,e[10]=i,e[11]=c.length,e[12]=h):h=e[12];let _;e[13]!==s?(_=z("w-full border-none bg-transparent p-0 text-sm focus:ring-0",s),e[13]=s,e[14]=_):_=e[14];let b;return e[15]!==l||e[16]!==g||e[17]!==h||e[18]!==_||e[19]!==c?(b=r.jsx("input",{ref:d,type:"text",name:"title-editor",value:c,onFocus:VKe,autoFocus:l,onChange:p,onClick:GKe,onKeyDown:g,onBlur:h,className:_}),e[15]=l,e[16]=g,e[17]=h,e[18]=_,e[19]=c,e[20]=b):b=e[20],b}function GKe(t){t.preventDefault()}function VKe(t){var e;(e=t.currentTarget)==null||e.select()}const Apt=Ne({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),C5=2,w5=3;function Ipt(t,e){var d,f,m,p,g,h,_;const s=$c(t,b=>b.flair.kind);let n=[],o=[];const a=(d=s[Fl.Recent])==null?void 0:d.slice(0,C5),i=(f=s[Fl.Recent])==null?void 0:f.slice(C5),l=(m=s[Fl.Workspace])==null?void 0:m.slice(0,w5),c=(p=s[Fl.Workspace])==null?void 0:p.slice(w5),u=(g=s[Fl.Mine])!=null?g:[];return n=[...l!=null?l:[],...(h=s[Fl.FirstParty])!=null?h:[],...(_=s[Fl.SidebarKeep])!=null?_:[],...a!=null?a:[],...e?u:[]],o=[...i!=null?i:[],...c!=null?c:[]],{topGizmos:n,remainingGizmos:o}}function zKe(t){"use forget";const e=F.c(4),{activeId:s}=t,{conversations:n,isLoading:o}=UF();if(!o&&n.length===0)return null;let a;return e[0]!==s||e[1]!==n||e[2]!==o?(a=o?r.jsxs(lf,{children:[r.jsx(Vo,{}),r.jsx(Vo,{})]}):n.map(i=>r.jsx(N0,{conversation:i,isActive:s===i.id,isStarred:!0},i.id)),e[0]=s,e[1]=n,e[2]=o,e[3]=a):a=e[3],a}const WKe=5;function Dq(t){"use forget";const e=F.c(9),{activeId:s,items:n,hasNextPage:o,infiniteScrollTriggerElementRef:a,hideOverflowMenu:i,onSelect:l}=t;let c;e[0]!==s||e[1]!==o||e[2]!==i||e[3]!==a||e[4]!==n||e[5]!==l?(c=n.map((f,m)=>{var g;const p=o&&((g=n[n.length-WKe-1])==null?void 0:g.id)===f.id?a:void 0;return r.jsx(N0,{conversation:f,hideOverflowMenu:i,isActive:s===f.id,elementRef:p,testId:"history-item-".concat(m),onSelect:l},f.id)}),e[0]=s,e[1]=o,e[2]=i,e[3]=a,e[4]=n,e[5]=l,e[6]=c):c=e[6];let u;return e[7]!==c?(u=r.jsx(r.Fragment,{children:c}),e[7]=c,e[8]=u):u=e[8],u}const k5=Ne({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function qKe(t){"use forget";const e=F.c(60),{activeId:s,hideOverflowMenu:n}=t,o=G(),a=Gt(),[i,l]=x.useState(!1),[c,u]=x.useState(0),d=Dte(),[f,m]=x.useState(!1),p=iKe(),g=OD(),{conversations:h,hasNextPage:_,fetchNextPage:b,isLoading:y,isFetchingNextPage:v,isError:S}=Nw(),C=FF(h),{conversations:w}=UF();let k;e[0]!==_||e[1]!==y||e[2]!==b?(k=ce=>{if(y||ce==null)return;const we=new IntersectionObserver(ge=>{ge[0].isIntersecting&&_&&b()});return we.observe(ce),()=>{we.disconnect()}},e[0]=_,e[1]=y,e[2]=b,e[3]=k):k=e[3];const E=k;let M,N;e[4]!==C?(M=()=>{lc.publish({kind:"refreshHistory",conversations:C})},N=[C],e[4]=C,e[5]=M,e[6]=N):(M=e[5],N=e[6]),x.useEffect(M,N);let A,I;e[7]!==o||e[8]!==a?(A=()=>UR(o,"conversations").onMessage(we=>{we.type==="conversation-created"&&Ee(o,"1163864876")&&Ea(a,we.payload.conversation_id)}),I=[o,a],e[7]=o,e[8]=a,e[9]=A,e[10]=I):(A=e[9],I=e[10]),x.useEffect(A,I);const P=C;let R,O;e[11]!==c||e[12]!==d?(R=()=>{const ce=bte(vte(),Date.now());d(()=>{u(c+1)},ce+1e3)},O=[c,d],e[11]=c,e[12]=d,e[13]=R,e[14]=O):(R=e[13],O=e[14]),x.useEffect(R,O);const L=P.length===0&&w.length===0;ur.markStart("History",ur.NS_SIDEBAR);const D=ct(o);let H;e[15]!==o?(H=Ee(o,"2560369700"),e[15]=o,e[16]=H):H=e[16];const V=H;D!=null&&!y&&ur.markRendered("History",ur.NS_SIDEBAR);let W;e[17]!==p?(W=p!=null&&p.kind==="conversation"&&p.gizmoId!=null&&jn(p.gizmoId),e[17]=p,e[18]=W):W=e[18];const $=W,Z=y||S||L,K=x.useRef(0),Y=Z&&"h-full items-center justify-center empty:hidden",ae=f&&"opacity-50";let se;e[19]!==Y||e[20]!==ae?(se=z(Y,ae),e[19]=Y,e[20]=ae,e[21]=se):se=e[21];let ee;e[22]!==$?(ee=ce=>{ce.preventDefault(),$&&m(!0)},e[22]=$,e[23]=ee):ee=e[23];let re;e[24]!==$||e[25]!==p||e[26]!==g?(re=ce=>{var we;ce.preventDefault(),$&&(K.current=0,m(!1),g({newGizmoId:null,conversation:p.conversation,previousGizmoId:(we=p.gizmoId)!=null?we:null}))},e[24]=$,e[25]=p,e[26]=g,e[27]=re):re=e[27];let he,fe;e[28]!==$?(he=ce=>{ce.preventDefault(),$&&(K.current=K.current+1)},fe=ce=>{ce.preventDefault(),$&&(K.current=K.current-1,K.current===0&&m(!1))},e[28]=$,e[29]=he,e[30]=fe):(he=e[29],fe=e[30]);let pe;e[31]!==L||e[32]!==y?(pe=L&&y&&r.jsx(lf,{children:r.jsx(Wn,{className:"m-auto"})}),e[31]=L,e[32]=y,e[33]=pe):pe=e[33];let le;e[34]!==i||e[35]!==L||e[36]!==S||e[37]!==a?(le=L&&S&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[r.jsx(j,T({},k5.unableToLoadHistory)),!i&&r.jsx("div",{className:"mt-1",children:r.jsx(ke,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{l(!0),Ea(a)},children:r.jsx(j,T({},k5.retryButton))})})]}),e[34]=i,e[35]=L,e[36]=S,e[37]=a,e[38]=le):le=e[38];let ve;e[39]!==s||e[40]!==_||e[41]!==n||e[42]!==E||e[43]!==L||e[44]!==y||e[45]!==P||e[46]!==V?(ve=!y&&!L&&r.jsxs(r.Fragment,{children:[V&&r.jsx(zKe,{activeId:s}),r.jsx(Dq,{activeId:s,hasNextPage:_,items:P,infiniteScrollTriggerElementRef:E,hideOverflowMenu:n})]}),e[39]=s,e[40]=_,e[41]=n,e[42]=E,e[43]=L,e[44]=y,e[45]=P,e[46]=V,e[47]=ve):ve=e[47];let Te;e[48]!==v?(Te=v&&r.jsxs("div",{className:"mb-5",children:[r.jsx(Vo,{}),r.jsx(Vo,{}),r.jsx(Vo,{})]}),e[48]=v,e[49]=Te):Te=e[49];let xe;return e[50]!==se||e[51]!==ee||e[52]!==re||e[53]!==he||e[54]!==fe||e[55]!==pe||e[56]!==le||e[57]!==ve||e[58]!==Te?(xe=r.jsxs("div",{id:"history",className:se,onDragOver:ee,onDrop:re,onDragEnter:he,onDragLeave:fe,children:[pe,le,ve,Te]}),e[50]=se,e[51]=ee,e[52]=re,e[53]=he,e[54]=fe,e[55]=pe,e[56]=le,e[57]=ve,e[58]=Te,e[59]=xe):xe=e[59],xe}const jpt=gn.memo(qKe);function Ppt({showRetry:t,refetch:e}){return r.jsxs("div",{className:"text-token-text-tertiary mt-5 p-3 text-center italic",children:[r.jsx(j,T({},cs.unableToLoadHistory)),t&&r.jsx("div",{className:"mt-1",children:r.jsx(ke,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{e(!0)},children:r.jsx(j,T({},cs.retryLoadingHistory))})})]})}function KKe(t){return r.jsx(ia,{side:"right",sideOffset:-4,alignOffset:-7,size:"auto",triggerButton:r.jsx(WC,{as:"div",icon:t.icon,label:t.label,highlightTrailing:t.highlightTrailing}),children:r.jsx("div",{className:"max-h-[50dvh] max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:r.jsx(lf,{children:t.children})})})}function Rpt({currentGizmoId:t}){return r.jsx(KKe,{label:r.jsx(j,T({},cs.seeMoreProjectItems)),icon:ra,children:r.jsx(j2,{currentGizmoId:t,inSidebarFlyout:!0})})}const YKe=768,QKe=320,JKe=140,Nh=8,ZKe=12;function XKe(t,e,s){const[n,o]=x.useState(null),[a,i]=x.useState(!1),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=()=>{var g,h,_,b,y;const f=e.current;if(!f)return;let m=null;if(t){const v='nav a[href*="/c/'.concat(t,'"]'),S=document.querySelector(v);if(S&&(m=S.getBoundingClientRect()),m&&(m.bottom<=0||m.top>=window.innerHeight)){o(null);return}}if(m||(m=((g=document.querySelector("nav"))!=null?g:f).getBoundingClientRect()),window.matchMedia("(max-width: ".concat(YKe,"px)")).matches){const v=(_=(h=s.current)==null?void 0:h.getBoundingClientRect().width)!=null?_:QKe,S=(y=(b=s.current)==null?void 0:b.getBoundingClientRect().height)!=null?y:JKe,C=m.left+m.width/2-v/2,w=Math.max(Nh,Math.min(C,window.innerWidth-v-Nh)),k=m.top-S-Nh,E=Math.max(Nh,k);i(!0),o({top:E,left:w})}else{const v=m.top+m.height/2,S=m.right+ZKe;i(!1),o({top:v,left:S})}};return zn(()=>{d();const f=()=>{l.current&&cancelAnimationFrame(l.current),l.current=requestAnimationFrame(d)},m=()=>{f()};window.addEventListener("resize",m),window.addEventListener("scroll",m,!0);const p=document.querySelector("nav");if(p&&typeof MutationObserver<"u"){const g=new MutationObserver(()=>f());g.observe(p,{childList:!0,subtree:!0}),c.current=g}if(typeof ResizeObserver<"u"){const g=new ResizeObserver(()=>f());p&&g.observe(p),s.current&&g.observe(s.current),u.current=g}return()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",m,!0),l.current&&cancelAnimationFrame(l.current),c.current&&(c.current.disconnect(),c.current=null),u.current&&(u.current.disconnect(),u.current=null)}},[t]),{pos:n,isMobileAbove:a,remeasure:d}}function eYe({conversationId:t,children:e,onClose:s,clickOutsideToClose:n=!1,onVisibilityChange:o=()=>{}}){const[a,i]=x.useState(!1),l=ne(),c=x.useRef(null),u=x.useRef(null),d=Ste(),{pos:f,isMobileAbove:m}=XKe(t,c,u);zn(()=>{d||tn.setSidebarOpen(!0)},[d]),zn(()=>{if(!n)return;const _=b=>{const y=u.current;y&&b.target instanceof Node&&!y.contains(b.target)&&s()};return document.addEventListener("mousedown",_,!0),()=>document.removeEventListener("mousedown",_,!0)},[s,n]),zn(()=>{if(!f)return;i(!1);const _=requestAnimationFrame(()=>i(!0));return()=>cancelAnimationFrame(_)},[f]);const p=wn(o);x.useEffect(()=>{const _=!!f;p==null||p(_)},[f,p]);const g=r.jsx("span",{ref:c,role:"presentation",style:{display:"none"}});if(!f)return g;const h=r.jsxs("div",{ref:u,style:{position:"fixed",top:f.top,left:f.left,zIndex:1e3},className:"border-token-border-light relative max-h-[60vh] max-w-md transform rounded-lg border bg-blue-500 p-4 text-sm text-white shadow-2xl transition-opacity duration-200 "+(m?"":"-translate-y-1/2")+(a?" opacity-100":" opacity-0"),children:[r.jsx(Es,{onClick:s,className:"absolute end-2 top-2 text-white hover:bg-blue-400/20! hover:text-white",bg:"transparent","aria-label":l.formatMessage({id:"n7Yh10",defaultMessage:"Close survey"})}),m?r.jsx("div",{className:"border-token-border-light absolute start-4 -bottom-2 h-4 w-4 rotate-45 border bg-blue-500"}):r.jsx("div",{className:"border-token-border-light absolute -start-2 top-1/2 h-4 w-4 -translate-y-1/2 rotate-45 border bg-blue-500"}),e]});return r.jsxs(r.Fragment,{children:[g,dr.createPortal(h,document.body)]})}const tYe=5;function Opt(){"use forget";const t=F.c(6),e=G();let s;t[0]!==e?(s=Ee(e,"3324471394"),t[0]=e,t[1]=s):s=t[1];const n=s;let o,a;if(t[2]!==n?(o=()=>{n||sL()},a=[n],t[2]=n,t[3]=o,t[4]=a):(o=t[3],a=t[4]),x.useEffect(o,a),!n)return null;let i;return t[5]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(sYe,{}),t[5]=i):i=t[5],i}function sYe(){"use forget";const t=F.c(48),{survey:e,finishSurvey:s}=Hue(),{conversations:n}=Nw(),o=G();Gue();const a=!oe(nYe),i=x.useRef(null);let l,c;if(t[0]!==n||t[1]!==e){const H=(Array.isArray(n)?n:[]).slice(0,tYe);l=Boolean,c=e&&H.some(V=>(V==null?void 0:V.id)===(e==null?void 0:e.conversation_id)),t[0]=n,t[1]=e,t[2]=l,t[3]=c}else l=t[2],c=t[3];const u=l(c),d=!(e!=null&&e.survey_display_type)||e.survey_display_type==="CONVERSATION_COACHMARK",f=!(e!=null&&e.trigger_event_type)||e.trigger_event_type==="NEW_CHAT_CLICK",m=!!(e!=null&&e.content),p=!!(e&&u&&m&&d&&f&&!a);let g;t[4]!==p||t[5]!==e?(g=()=>{if(!p||!(e!=null&&e.conversation_id))return;const D='nav a[href*="/c/'.concat(e.conversation_id,'"]'),H=document.querySelector(D);if(H)return H.classList.add("ring-2","ring-blue-500","rounded-md"),()=>{H.classList.remove("ring-2","ring-blue-500","rounded-md")}},t[4]=p,t[5]=e,t[6]=g):g=t[6];const h=e==null?void 0:e.conversation_id;let _;t[7]!==p||t[8]!==h?(_=[p,h],t[7]=p,t[8]=h,t[9]=_):_=t[9],zn(g,_);let b;t[10]!==o||t[11]!==e?(b=D=>{var q;if(!D||!e)return;const H=e.conversation_id,V=e.survey_election_id;!H||!V||i.current!==V&&(APe({survey_campaign_name:e.survey_campaign_name,survey_election_id:V},H),wa(o,"chatgpt_survey_seen",void 0,{survey_campaign_name:String((q=e.survey_campaign_name)!=null?q:""),survey_election_id:V,conversation_id:H}),i.current=V)},t[10]=o,t[11]=e,t[12]=b):b=t[12];const y=b;if(!p||!e)return null;const{conversation_id:v}=e,S=e.content;let C;t[13]!==S.answers?(C=Array.isArray(S==null?void 0:S.answers)?S.answers:[],t[13]=S.answers,t[14]=C):C=t[14];const w=C;let k;t[15]!==o?(k=D=>{var H,V,q,W;NPe({survey_campaign_name:D.campaign_name,survey_election_id:D.election_id,question_id:void 0,question_text:(H=D.question)!=null?H:null,answer_id:D.answer_id,answer_text:(V=D.answer_text)!=null?V:null,tags:null},D.conversation_id),wa(o,"chatgpt_survey_response",void 0,{survey_campaign_name:D.campaign_name,survey_election_id:D.election_id,conversation_id:D.conversation_id,question_text:(q=D.question)!=null?q:"",answer_id:D.answer_id,answer_text:(W=D.answer_text)!=null?W:""})},t[15]=o,t[16]=k):k=t[16];const E=k;let M;t[17]!==o?(M=D=>{var H,V;IPe({survey_campaign_name:D.campaign_name,survey_election_id:D.election_id},D.conversation_id),wa(o,"chatgpt_survey_dismissed",void 0,{survey_campaign_name:String((H=D.campaign_name)!=null?H:""),survey_election_id:String((V=D.election_id)!=null?V:""),conversation_id:D.conversation_id})},t[17]=o,t[18]=M):M=t[18];const N=M,A=e.conversation_id;let I;t[19]!==N||t[20]!==s||t[21]!==e?(I=()=>{e&&N({conversation_id:e.conversation_id,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name}),s()},t[19]=N,t[20]=s,t[21]=e,t[22]=I):I=t[22];let P;t[23]!==S.question?(P=r.jsx("div",{className:"mb-3 pe-8 font-medium break-words",children:S.question}),t[23]=S.question,t[24]=P):P=t[24];let R;if(t[25]!==w||t[26]!==S.question||t[27]!==v||t[28]!==s||t[29]!==E||t[30]!==e.survey_campaign_name||t[31]!==e.survey_election_id){let D;t[33]!==S.question||t[34]!==v||t[35]!==s||t[36]!==E||t[37]!==e.survey_campaign_name||t[38]!==e.survey_election_id?(D=H=>r.jsx("button",{className:"rounded-full border border-gray-300 bg-white px-4 py-2 font-medium whitespace-nowrap text-black hover:bg-gray-100",onClick:()=>{E({conversation_id:v,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name,question:S.question,answer_id:H.answer_id,answer_text:H.text}),s()},children:H.text},H.answer_id),t[33]=S.question,t[34]=v,t[35]=s,t[36]=E,t[37]=e.survey_campaign_name,t[38]=e.survey_election_id,t[39]=D):D=t[39],R=w.map(D),t[25]=w,t[26]=S.question,t[27]=v,t[28]=s,t[29]=E,t[30]=e.survey_campaign_name,t[31]=e.survey_election_id,t[32]=R}else R=t[32];let O;t[40]!==R?(O=r.jsx("div",{className:"flex gap-2",children:R}),t[40]=R,t[41]=O):O=t[41];let L;return t[42]!==y||t[43]!==e.conversation_id||t[44]!==I||t[45]!==P||t[46]!==O?(L=r.jsxs(eYe,{conversationId:A,onClose:I,onVisibilityChange:y,children:[P,O]}),t[42]=y,t[43]=e.conversation_id,t[44]=I,t[45]=P,t[46]=O,t[47]=L):L=t[47],L}function nYe(){return Np()}const oYe=Pe(()=>me(()=>import("./odzcgakek6i0wbjp.js"),__vite__mapDeps([462,463,3,1,4])).then(t=>t.FannyPackInitializer));function Lpt(){const t=G(),{isFannyPackEnabled:e,isFannyPackInitializerEnabled:s}=$F(t);return e||!s?null:r.jsx(oYe,{})}const aYe="sPZ93q_leadingBar",rYe="sPZ93q_leadingBarScrollAnimation",iYe="sPZ93q_primary",lYe="sPZ93q_trailingBar",cYe="sPZ93q_trailingBarScrollAnimation",rm={leadingBar:aYe,leadingBarScrollAnimation:rYe,primary:iYe,trailingBar:lYe,trailingBarScrollAnimation:cYe};function uYe({disabled:t=!1,track:e}={}){const[s,n]=x.useState(null),o=x.useRef(null),a=x.useRef(null),i=x.useCallback(l=>{if(a.current&&(a.current.disconnect(),a.current=null),o.current=l,t||!l)return;const c=new ResizeObserver(u=>{if(!u.length)return;const d=u[0],{width:f,height:m}=dYe(d);x.startTransition(()=>{n(p=>{const g={width:f,height:m};return!p||e==="width"&&p.width!==f||e==="height"&&p.height!==m||p.width!==f||p.height!==m?g:p})})});c.observe(l),a.current=c},[t,e]);return[s,i]}function dYe(t){let e,s;if(t.borderBoxSize){const n=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=n.inlineSize,s=n.blockSize}else e=t.contentRect.width,s=t.contentRect.height;return{width:e,height:s}}function o1({disableSizeTracking:t,name:e,track:s}){const[n,o]=uYe({disabled:s===void 0||t,track:s});let a={};return e&&!t&&s&&n&&(a={["--".concat(e,"-").concat(s)]:"".concat(n[s==="width"?"width":"height"],"px")}),[a,o,n]}function fYe(t){var g;const p=t,{axis:e="horizontal",children:s,className:n,hidden:o,leading:a,trailing:i,ref:l,style:c,type:u}=p,d=De(p,["axis","children","className","hidden","leading","trailing","ref","style","type"]),[f,m]=o1(d);return r.jsx("div",{"bar-type":u,hidden:o,"data-testid":"bar-".concat((g=d.name)!=null?g:"default"),className:z("gap-bar grid",e==="vertical"&&"flex-col",a&&[rm.leadingBar,rm.leadingBarScrollAnimation],i&&[rm.trailingBar,rm.trailingBarScrollAnimation],u==="primary"&&rm.primary,n),ref:l!=null?l:m,style:T(T({},c),f),children:s})}const mYe="_56rfYG_screen",pYe={screen:mYe};function gYe(t){const w=t,{anchor:e,children:s,className:n,contentClassName:o,leading:a,leadingClassName:i,primaryScrollContainer:l,ref:c,style:u,trailing:d,trackLeading:f,trackTrailing:m}=w,p=De(w,["anchor","children","className","contentClassName","leading","leadingClassName","primaryScrollContainer","ref","style","trailing","trackLeading","trackTrailing"]),{name:g}=p,[h,_]=o1(p),[b,y]=o1({disableSizeTracking:!f,name:"".concat(g,"-leading"),track:"height"}),[v,S]=o1({disableSizeTracking:!m,name:"".concat(g,"-trailing"),track:"height"}),C=g!=null?g:"default";return r.jsxs("section",{className:z(pYe.screen,"h-[var(--screen-height-override,calc(var(--cqh-full)-var(--screen-height-offset,0px)))]","keyboard-open:h-[var(--screen-height-override,calc(var(--cqh-full)-env(keyboard-inset-height,0px)-var(--screen-height-offset,0px)-var(--force-redraw,0px)))]",n),"data-testid":"screen-".concat(C),"data-primary-scroller":l,"screen-anchor":e,ref:zT(_,c),style:U(T(T(T(T({},u),h),b),v),{container:g?"".concat(g," / inline-size"):void 0,minWidth:"min(var(--screen-".concat(C,"_min-width), 100cqw)")}),children:[r.jsx("div",{slot:"leading",ref:y,className:i,children:a}),r.jsx("div",{slot:"content",className:o,children:s}),r.jsx("div",{slot:"trailing",ref:k=>{S(k)},children:d})]})}function Dpt(m){var p=m,{ariaLabel:t,className:e,leadingFullBleed:s,headerActions:n,trailing:o,handleClose:a,showScrollToBottomButton:i=!1,children:l,onScroll:c,restoreScrollTop:u,scrollMode:d="full-screen"}=p,f=De(p,["ariaLabel","className","leadingFullBleed","headerActions","trailing","handleClose","showScrollToBottomButton","children","onScroll","restoreScrollTop","scrollMode"]);const g=G(),h=xn(g),_=x.useRef(null),[b,y]=x.useState(!0);return x.useEffect(()=>{const v=_.current;if(!v||typeof c!="function")return;function S(){v&&c&&c(v.scrollTop)}return v.addEventListener("scroll",S,{passive:!0}),()=>{v.removeEventListener("scroll",S)}},[c]),x.useEffect(()=>{const v=_.current;!v||u==null||requestAnimationFrame(()=>{v.scrollTop=u})},[u]),r.jsxs(r.Fragment,{children:[r.jsxs(gYe,{ref:_,anchor:"top",className:z("relative flex-1",h?"border-s-thin border-(--bento-border-color)":"border-s-token-border-sharp dark:border-token-main-surface-secondary border-s",e),style:d==="content-only"?{overflow:"hidden"}:void 0,name:"threadFlyOut",ariaLabel:t,primaryScrollContainer:!0,trackLeading:!0,trailing:o,contentClassName:z("bg-token-bg-primary",d==="content-only"&&"overflow-y-auto"),leading:(()=>{if("renderLeading"in f)return f.renderLeading({handleClose:a});const{leading:v}=f;return r.jsx(fYe,{name:"search-sources-header",type:"primary",className:z("flex items-center ".concat(v?"":"justify-end p-1.5"," bg-transparent!"),s&&"pointer-events-none",h?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:v?r.jsxs("div",{className:z("flex items-center justify-between px-4 py-3",h?"h-[var(--header-height,3.5rem)] border-(--bento-border-color)":"border-token-border-sharp h-[calc(var(--header-height,3.5rem)+1px)]",s?"pointer-events-none bg-transparent":h?"bg-token-main-surface-primary border-b-thin border-(--bento-border-color)":"bg-token-main-surface-primary border-b"),children:[v,r.jsxs("div",{className:z("flex items-center gap-1",s&&"pointer-events-auto"),children:[n,r.jsx(Es,{className:z("bg-token-main-surface-primary pointer-events-auto -me-2.5",s&&"opacity-80"),bg:s?"primary":"transparent",onClick:a})]})]}):n?r.jsxs("div",{className:"me-3 flex items-center gap-1",children:[n,r.jsx(Es,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! p-1",onClick:a})]}):r.jsx(Es,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! me-3 p-1",onClick:a})})})(),leadingClassName:s?"pointer-events-none":void 0,children:[l,i&&r.jsx(Cte,{setIsScrolledToEdge:v=>{y(!v)},options:{rootMargin:"0px 0px 80px 0px"}})]}),i&&r.jsx(R$e,{show:!b,className:"bottom-8",onClick:()=>{var v,S;(S=_==null?void 0:_.current)==null||S.scrollTo({top:(v=_==null?void 0:_.current)==null?void 0:v.scrollHeight,behavior:"smooth"})}})]})}const hYe=Pe(()=>me(()=>import("./j413w2y09mrdcb4m.js"),__vite__mapDeps([143,1,3,4,144,128,129,130,131,132,133,134,135,39,136,137,138,139,140,141,142])).then(t=>t.ThreadModal)),Fpt=t=>{"use forget";const e=F.c(25),{clientThreadId:s,shouldScrollToBottom:n,threadContent:o}=t,a=n===void 0?!1:n,i=G();let l;e[0]!==s||e[1]!==i?(l=Et(i,s),e[0]=s,e[1]=i,e[2]=l):l=e[2];const c=l;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u={kind:Pt.PrimaryAssistant},e[3]=u):u=e[3];let d;e[4]!==a?(d={shouldScrollToBottom:a,disableConversationNavigation:!0},e[4]=a,e[5]=d):d=e[5],vH(s,u,d);let f,m;if(e[6]!==s||e[7]!==i?(f=()=>(To.retainThread(s),()=>{setTimeout(()=>{ln(i).invalidateQueries(Up({clientThreadId:s}))},0),To.releaseThread(s)}),m=[s,i],e[6]=s,e[7]=i,e[8]=f,e[9]=m):(f=e[8],m=e[9]),x.useEffect(f,m),!s)return null;let p;e[10]!==c?(p=r.jsx(hYe,{conversation:c,allowAnyScreenSize:!0}),e[10]=c,e[11]=p):p=e[11];let g;e[12]!==c.id?(g=r.jsx(Fqe,{clientThreadId:c.id}),e[12]=c.id,e[13]=g):g=e[13];let h;e[14]!==c||e[15]!==p||e[16]!==g||e[17]!==o?(h=r.jsx(kte,{children:r.jsxs(Tte,{conversation:c,children:[o,p,g]})}),e[14]=c,e[15]=p,e[16]=g,e[17]=o,e[18]=h):h=e[18];let _;e[19]!==s||e[20]!==h?(_=r.jsx(e3e,{clientThreadId:s,children:h}),e[19]=s,e[20]=h,e[21]=_):_=e[21];let b;return e[22]!==c||e[23]!==_?(b=r.jsx(wte.Provider,{value:c,children:_}),e[22]=c,e[23]=_,e[24]=b):b=e[24],b},_Ye=Pe(()=>me(()=>import("./c5og9r81gzk0nhum.js"),__vite__mapDeps([175,1,3,4])).then(t=>t.ThreadReportConversationModal)),Ah=Ne({actions:{id:"pulse.conversation.actions",defaultMessage:"Actions"},report:{id:"pulse.conversation.report",defaultMessage:"Report"},leaveFeedback:{id:"pulse.conversation.giveFeedback",defaultMessage:"Give feedback"},share:{id:"pulse.conversation.share",defaultMessage:"Share"}});function xYe(t){"use forget";const e=F.c(33),{className:s,card:n}=t,o=G(),a=ne(),{closeView:i}=y3(),l=n.conversation_id;let c;e[0]!==l?(c=l?Rt(l):void 0,e[0]=l,e[1]=c):c=e[1];const u=c;let d;e[2]!==n.id||e[3]!==i||e[4]!==o?(d=()=>{const M=ao(o);i(),M.openFeedbackView({type:qs.OnCard,cardId:n.id})},e[2]=n.id,e[3]=i,e[4]=o,e[5]=d):d=e[5];const f=d;let m;e[6]!==s?(m=z("hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",s),e[6]=s,e[7]=m):m=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(ra,{className:"icon"}),e[8]=p):p=e[8];let g;e[9]!==m?(g=r.jsx("button",{className:m,onMouseOver:yYe,children:p}),e[9]=m,e[10]=g):g=e[10];let h;e[11]!==a?(h=a.formatMessage(Ah.actions),e[11]=a,e[12]=h):h=e[12];let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(j,T({},Ah.leaveFeedback)),e[13]=_):_=e[13];let b;e[14]!==f?(b=r.jsx(J.Item,{icon:xi,onClick:f,children:_}),e[14]=f,e[15]=b):b=e[15];let y;e[16]!==l||e[17]!==o?(y=()=>{mt(o,_Ye,{clientThreadId:l,isSharedConversation:!1,isStaticSharedThread:!1})},e[16]=l,e[17]=o,e[18]=y):y=e[18];let v;e[19]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(j,T({},Ah.report)),e[19]=v):v=e[19];let S;e[20]!==y?(S=r.jsx(J.Item,{icon:Tf,onClick:y,children:v}),e[20]=y,e[21]=S):S=e[21];let C;e[22]!==u?(C=()=>u&&tn.openSharingModal(u),e[22]=u,e[23]=C):C=e[23];let w;e[24]===Symbol.for("react.memo_cache_sentinel")?(w=r.jsx(j,T({},Ah.share)),e[24]=w):w=e[24];let k;e[25]!==C?(k=r.jsx(J.Item,{icon:Xc,onClick:C,children:w}),e[25]=C,e[26]=k):k=e[26];let E;return e[27]!==S||e[28]!==k||e[29]!==g||e[30]!==h||e[31]!==b?(E=r.jsxs(ia,{triggerButton:g,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:h,children:[b,S,k]}),e[27]=S,e[28]=k,e[29]=g,e[30]=h,e[31]=b,e[32]=E):E=e[32],E}function yYe(){}const Bpt=t=>{"use forget";const e=F.c(5),{className:s}=t,n=G();let o;e[0]!==n?(o=()=>Fbe(n),e[0]=n,e[1]=o):o=e[1];const a=oe(o);let i;return e[2]!==s||e[3]!==a?(i=a&&r.jsx(xYe,{className:s,card:a}),e[2]=s,e[3]=a,e[4]=i):i=e[4],i},bYe=Pe(()=>me(()=>import("./fl4ha52uwxfs3yp2.js"),__vite__mapDeps([168,1,3,4])).then(t=>t.DeleteConversationConfirmationModal)),Lv=Ne({actions:{id:"pulse.conversation.actions",defaultMessage:"Actions"},deleteFeedback:{id:"pulse.conversation.deleteHistory",defaultMessage:"Delete history"},pulseConversationTitle:{id:"pulse.conversation.title",defaultMessage:"Pulse Feedback Conversation"}});function vYe(t){"use forget";const e=F.c(27),{clientThreadId:s,className:n}=t,o=G(),a=ne();let i;e[0]!==o?(i=()=>Ebe(o),e[0]=o,e[1]=i):i=e[1];const{mutate:l}=oe(i);let c;e[2]!==s?(c=s?Rt(s):void 0,e[2]=s,e[3]=c):c=e[3];const u=c;let d;e[4]!==s||e[5]!==o||e[6]!==l?(d=()=>{l(),ao(o).closeFeedbackView(),Gn(o).logEventWithStatsig("(Web) FYP Feedback Conversation Deletion","chatgpt_web_fyp_feedback_conversation_deletion",{feedback_conversation_id:s})},e[4]=s,e[5]=o,e[6]=l,e[7]=d):d=e[7];const f=d;let m;e[8]!==n?(m=z("hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",n),e[8]=n,e[9]=m):m=e[9];let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(ra,{className:"icon"}),e[10]=p):p=e[10];let g;e[11]!==m?(g=r.jsx("button",{className:m,onMouseOver:CYe,children:p}),e[11]=m,e[12]=g):g=e[12];let h;e[13]!==a?(h=a.formatMessage(Lv.actions),e[13]=a,e[14]=h):h=e[14];let _;e[15]!==o||e[16]!==f||e[17]!==a||e[18]!==u?(_=()=>{u&&mt(o,bYe,{title:a.formatMessage(Lv.pulseConversationTitle),handleDelete:f,onClose:SYe})},e[15]=o,e[16]=f,e[17]=a,e[18]=u,e[19]=_):_=e[19];let b;e[20]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(j,T({},Lv.deleteFeedback)),e[20]=b):b=e[20];let y;e[21]!==_?(y=r.jsx(J.Item,{color:"danger",icon:Rl,onClick:_,children:b}),e[21]=_,e[22]=y):y=e[22];let v;return e[23]!==y||e[24]!==g||e[25]!==h?(v=r.jsx(ia,{triggerButton:g,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:h,children:y}),e[23]=y,e[24]=g,e[25]=h,e[26]=v):v=e[26],v}function SYe(){}function CYe(){}function wYe(t){"use forget";const e=F.c(25),{taskId:s,className:n}=t,o=G(),{automation:a}=vT(s);let i;e[0]!==a?(i=()=>{a!=null&&a.conversation_id&&window.open(ya(a.conversation_id),"_blank")},e[0]=a,e[1]=i):i=e[1];const l=i;let c;e[2]!==a||e[3]!==o?(c=()=>mt(o,Kk,{item:a,onConfirm:()=>ao(o).openFeedbackView()}),e[2]=a,e[3]=o,e[4]=c):c=e[4];let u;e[5]!==n?(u=z("text-token-icon-status-error rounded-md",n),e[5]=n,e[6]=u):u=e[6];let d;e[7]!==c||e[8]!==u?(d=r.jsx(ke,{color:"ghost",icon:Rl,onClick:c,className:u}),e[7]=c,e[8]=u,e[9]=d):d=e[9];let f;e[10]!==n?(f=z("hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",n),e[10]=n,e[11]=f):f=e[11];let m;e[12]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(ra,{className:"icon"}),e[12]=m):m=e[12];let p;e[13]!==f?(p=r.jsx("button",{className:f,onMouseOver:kYe,children:m}),e[13]=f,e[14]=p):p=e[14];const g=!(a!=null&&a.conversation_id);let h;e[15]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(j,{id:"gF3w1N",defaultMessage:"Open Conversation"}),e[15]=h):h=e[15];let _;e[16]!==l||e[17]!==g?(_=r.jsx(J.Item,{icon:mg,disabled:g,onClick:l,children:h}),e[16]=l,e[17]=g,e[18]=_):_=e[18];let b;e[19]!==_||e[20]!==p?(b=r.jsx(ia,{triggerButton:p,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,children:_}),e[19]=_,e[20]=p,e[21]=b):b=e[21];let y;return e[22]!==b||e[23]!==d?(y=r.jsxs(r.Fragment,{children:[d,b]}),e[22]=b,e[23]=d,e[24]=y):y=e[24],y}function kYe(){}const Upt=t=>{"use forget";const e=F.c(16),{feedbackState:s,className:n}=t,o=G(),a=Cf(o);let i;e[0]!==o?(i=()=>Tbe(o),e[0]=o,e[1]=i):i=e[1];const l=oe(i),c=Qe(l,Se.hasUserMessage);if(!l)return null;if((s==null?void 0:s.type)===qs.Preview&&c){let u;e[2]!==n?(u=z("text-token-text-secondary rounded-md",n),e[2]=n,e[3]=u):u=e[3];let d;e[4]!==o?(d=()=>ao(o).openFeedbackView({type:qs.Conversation}),e[4]=o,e[5]=d):d=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(j,{id:"E03X7s",defaultMessage:"Feedback history"}),e[6]=f):f=e[6];let m;return e[7]!==u||e[8]!==d?(m=r.jsx(ke,{color:"ghost",className:u,icon:mg,onClick:d,children:f}),e[7]=u,e[8]=d,e[9]=m):m=e[9],m}else if((s==null?void 0:s.type)===qs.Conversation){let u;return e[10]!==n||e[11]!==l?(u=r.jsx(vYe,{className:n,clientThreadId:l}),e[10]=n,e[11]=l,e[12]=u):u=e[12],u}else if((s==null?void 0:s.type)===qs.TaskEdit&&a){let u;return e[13]!==n||e[14]!==s.taskId?(u=r.jsx(wYe,{taskId:s.taskId,className:n}),e[13]=n,e[14]=s.taskId,e[15]=u):u=e[15],u}return null};function $pt({clientThreadId:t,urlThreadId:e}){const s=G(),n=ne(),o=yt(),a=oo();return r.jsx(lf,{children:a&&t&&!!e&&r.jsx(qk,{isOpen:!0,title:r.jsx(j,{id:"HistoryGizmoItem.leaveTempChatTitle",defaultMessage:"Leave Temporary Chat?"}),description:r.jsx(j,{id:"HistoryGizmoItem.leaveTempChatDescription",defaultMessage:"Temporary Chats don't appear in your history, so you won't be able to come back to it."}),confirmText:n.formatMessage({id:"HistoryGizmoItem.leaveTempChatConfirm",defaultMessage:"Leave Temporary Chat"}),onClose:()=>{o("/")},onConfirm:()=>{pp.set(s,!1)}})})}const TYe=ue(Ce,"59f270",20,20,!0);function EYe(t){"use forget";var v,S;const e=F.c(16),{conversation:s,isRootVisible:n,isPanelVisible:o,onOpenPanel:a,onClosePanel:i,backMessage:l}=t;let c;e[0]!==s?(c=()=>Cs(s),e[0]=s,e[1]=c):c=e[1];const u=oe(c),d=uT(),f=fT(s,d,!1),m=(S=(v=u==null?void 0:u.title)!=null?v:u==null?void 0:u.id)!=null?S:null;let p;e[2]!==m?(p={primaryModelLabel:m},e[2]=m,e[3]=p):p=e[3];const{primaryModelLabel:g}=p,h=n&&g;let _;e[4]!==a||e[5]!==g||e[6]!==h?(_=h?r.jsx(r.Fragment,{children:r.jsx(J.Item,{fillContainer:!0,onSelect:C=>{C.preventDefault(),a()},subMenu:!0,children:r.jsx("div",{className:"flex w-full items-baseline gap-2 text-sm",children:r.jsx("span",{className:"text-token-text-primary",children:g})})})}):null,e[4]=a,e[5]=g,e[6]=h,e[7]=_):_=e[7];let b;e[8]!==l||e[9]!==f||e[10]!==o||e[11]!==i?(b=o?r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:r.jsx(od,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:C=>{C.preventDefault(),i()},fillContainer:!0,children:r.jsx(j,T({},l))}),r.jsx(J.Separator,{}),r.jsx(J.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(dT,{sections:f})})]}):null,e[8]=l,e[9]=f,e[10]=o,e[11]=i,e[12]=b):b=e[12];let y;return e[13]!==_||e[14]!==b?(y=r.jsxs(r.Fragment,{children:[_,b]}),e[13]=_,e[14]=b,e[15]=y):y=e[15],y}function T5(t){"use forget";const e=F.c(31),{activeId:s,hideOverflowMenu:n,onSelect:o}=t,{conversations:a,hasNextPage:i,fetchNextPage:l,isLoading:c,isFetchingNextPage:u,refetch:d}=Nw();let f,m;e[0]!==d?(f=()=>{d()},m=[d],e[0]=d,e[1]=f,e[2]=m):(f=e[1],m=e[2]),x.useEffect(f,m);let p;e[3]!==l||e[4]!==i?(p=w=>{if(w==null)return;const k=new IntersectionObserver(E=>{E[0].isIntersecting&&i&&l()});return k.observe(w),()=>{k.disconnect()}},e[3]=l,e[4]=i,e[5]=p):p=e[5];const g=p;let h;if(e[6]!==s||e[7]!==a){let w;e[9]!==s?(w=k=>k.id!==s,e[9]=s,e[10]=w):w=e[10],h=a.filter(w),e[6]=s,e[7]=a,e[8]=h}else h=e[8];const _=h;let b;e[11]!==g||e[12]!==c?(b=c?MYe:g,e[11]=g,e[12]=c,e[13]=b):b=e[13];let y;e[14]!==s||e[15]!==i||e[16]!==n||e[17]!==_||e[18]!==o||e[19]!==b?(y=r.jsx(Dq,{activeId:s,hasNextPage:i,items:_,infiniteScrollTriggerElementRef:b,hideOverflowMenu:n,onSelect:o}),e[14]=s,e[15]=i,e[16]=n,e[17]=_,e[18]=o,e[19]=b,e[20]=y):y=e[20];let v;e[21]!==c||e[22]!==_.length?(v=_.length===0&&!c&&r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:r.jsx(j,T({},NYe.noConversations))}),e[21]=c,e[22]=_.length,e[23]=v):v=e[23];let S;e[24]!==u||e[25]!==c?(S=(c||u)&&r.jsxs("div",{children:[r.jsx(Vo,{}),r.jsx(Vo,{}),r.jsx(Vo,{})]}),e[24]=u,e[25]=c,e[26]=S):S=e[26];let C;return e[27]!==y||e[28]!==v||e[29]!==S?(C=r.jsxs(r.Fragment,{children:[y,v,S]}),e[27]=y,e[28]=v,e[29]=S,e[30]=C):C=e[30],C}function MYe(){}const NYe=Ne({noConversations:{id:"SidebarHistory.noConversations",defaultMessage:"No previous chats"}}),yd=Ne({projects:{id:"SidebarHeader.projects",defaultMessage:"Projects"},noProjects:{id:"SidebarHeader.noProjects",defaultMessage:"No projects yet"},noProjectChats:{id:"SidebarHeader.noProjectChats",defaultMessage:"No chats in this project"},startProjectChat:{id:"SidebarHeader.startProjectChat",defaultMessage:"Start a new chat in this project"}}),AYe=20;function IYe(){"use forget";const t=F.c(9),{snorlaxes:e,isLoading:s,refetch:n}=DC();let o;t[0]!==e?(o=e!=null?e:[],t[0]=e,t[1]=o):o=t[1];let a;t[2]!==o?(a=o.slice(0,c6),t[2]=o,t[3]=a):a=t[3];const i=a,l=i.length>0;let c;return t[4]!==s||t[5]!==i||t[6]!==n||t[7]!==l?(c={projects:i,areProjectsLoading:s,hasProjects:l,refetchProjects:n},t[4]=s,t[5]=i,t[6]=n,t[7]=l,t[8]=c):c=t[8],c}function Fq(t){"use forget";const e=F.c(3),s=G();let n;return e[0]!==s||e[1]!==t?(n=()=>{var u,d,f,m;if(!t)return"";const o=t.gizmo,a=o.gizmo.id,i=(d=(u=o.gizmo.display.name)==null?void 0:u.trim())!=null?d:a,l=VC(s,a);if(l.isSkeleton$()){const p=(f=Ete(s,o))==null?void 0:f.trim();return p&&p.length>0?p:i}const c=(m=l.title$())==null?void 0:m.trim();return c&&c.length>0?c:i},e[0]=s,e[1]=t,e[2]=n):n=e[2],oe(n)}function QS(t){"use forget";const e=F.c(2),{project:s}=t,n=Fq(s);let o;return e[0]!==n?(o=r.jsx("span",{className:"text-token-text-primary truncate text-sm",children:n}),e[0]=n,e[1]=o):o=e[1],o}function jYe(t){"use forget";const e=F.c(19),{projects:s,hasProjects:n,serverThreadId:o,onClose:a,onStartProjectChat:i,startProjectChatLabel:l,onOpenProjects:c}=t;if(!n)return null;let u;e[0]!==c?(u=g=>{g&&(c==null||c())},e[0]=c,e[1]=u):u=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(J.SubMenuTrigger,{fillContainer:!0,children:r.jsx(j,T({},yd.projects))}),e[2]=d):d=e[2];let f;if(e[3]!==a||e[4]!==i||e[5]!==s||e[6]!==o||e[7]!==l){let g;e[9]!==a||e[10]!==i||e[11]!==o||e[12]!==l?(g=h=>{const _=h.gizmo.gizmo.id;return r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{fillContainer:!0,children:r.jsx("span",{className:"flex w-full items-center justify-between gap-2",children:r.jsx(QS,{project:h})})}),r.jsx(J.Portal,{children:r.jsx(J.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsxs(J.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[r.jsx(J.Item,{fillContainer:!0,className:"mb-1 ps-1",onSelect:PYe,trailing:r.jsx(Ap,{"aria-label":l,onPointerDown:b=>{i(b,_)},onClick:b=>{i(b,_)},icon:Ip}),children:r.jsx(QS,{project:h})}),r.jsx(J.Separator,{}),r.jsx(Bq,{project:h,serverThreadId:o,onSelectConversation:a})]})})})]},_)},e[9]=a,e[10]=i,e[11]=o,e[12]=l,e[13]=g):g=e[13],f=s.map(g),e[3]=a,e[4]=i,e[5]=s,e[6]=o,e[7]=l,e[8]=f}else f=e[8];let m;e[14]!==f?(m=r.jsx(J.Portal,{children:r.jsx(J.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsx(J.Group,{separator:!1,children:f})})}),e[14]=f,e[15]=m):m=e[15];let p;return e[16]!==u||e[17]!==m?(p=r.jsxs(J.Sub,{onOpenChange:u,children:[d,m]}),e[16]=u,e[17]=m,e[18]=p):p=e[18],p}function PYe(t){t.preventDefault()}function RYe(t){"use forget";const e=F.c(9),{projects:s,areProjectsLoading:n,onSelectProject:o}=t;if(n&&s.length===0){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs(r.Fragment,{children:[r.jsx(Vo,{}),r.jsx(Vo,{})]}),e[0]=l):l=e[0],l}if(s.length===0){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(j,T({},yd.noProjects))}),e[1]=l):l=e[1],l}let a;if(e[2]!==o||e[3]!==s){let l;e[5]!==o?(l=c=>{const u=c.gizmo.gizmo.id;return r.jsx(J.Item,{fillContainer:!0,onSelect:d=>{d.preventDefault(),o(u)},subMenu:!0,children:r.jsx(QS,{project:c})},u)},e[5]=o,e[6]=l):l=e[6],a=s.map(l),e[2]=o,e[3]=s,e[4]=a}else a=e[4];let i;return e[7]!==a?(i=r.jsx(r.Fragment,{children:a}),e[7]=a,e[8]=i):i=e[8],i}function OYe(t){"use forget";const e=F.c(4),{project:s,serverThreadId:n,onSelectConversation:o}=t;if(!s)return null;let a;return e[0]!==o||e[1]!==s||e[2]!==n?(a=r.jsx(Bq,{project:s,serverThreadId:n,onSelectConversation:o}),e[0]=o,e[1]=s,e[2]=n,e[3]=a):a=e[3],a}function Bq(t){"use forget";const e=F.c(18),{project:s,serverThreadId:n,onSelectConversation:o}=t,a=s.gizmo.gizmo.id,{items:i,isLoading:l,refetch:c}=Mte(a);let u;e[0]!==c?(u=()=>{c()},e[0]=c,e[1]=u):u=e[1];let d;e[2]!==a||e[3]!==c?(d=[a,c],e[2]=a,e[3]=c,e[4]=d):d=e[4],x.useEffect(u,d);let f,m;if(e[5]!==l||e[6]!==i||e[7]!==o||e[8]!==n){m=Symbol.for("react.early_return_sentinel");e:{const g=i.slice(0,AYe);if(l&&g.length===0){let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsxs(r.Fragment,{children:[r.jsx(Vo,{}),r.jsx(Vo,{})]}),e[11]=_):_=e[11],m=_;break e}if(!l&&g.length===0){let _;e[12]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(j,T({},yd.noProjectChats))}),e[12]=_):_=e[12],m=_;break e}let h;e[13]!==o||e[14]!==n?(h=_=>r.jsx(N0,{className:"ps-2",conversation:_,hideOverflowMenu:!0,isActive:_.id===n,onSelect:o},_.id),e[13]=o,e[14]=n,e[15]=h):h=e[15],f=g.map(h)}e[5]=l,e[6]=i,e[7]=o,e[8]=n,e[9]=f,e[10]=m}else f=e[9],m=e[10];if(m!==Symbol.for("react.early_return_sentinel"))return m;let p;return e[16]!==f?(p=r.jsx(r.Fragment,{children:f}),e[16]=f,e[17]=p):p=e[17],p}function LYe(t){"use forget";var pe;const e=F.c(63),{serverThreadId:s,isAuth:n,isNarrowSidebar:o,isRootMenuVisible:a,onActiveStateChange:i,onClose:l,backMessage:c,switchChatMessage:u}=t,d=ne(),{projects:f,areProjectsLoading:m,hasProjects:p,refetchProjects:g}=IYe(),[h,_]=x.useState("root"),[b,y]=x.useState(null);let v;e:{if(!b){v=null;break e}let le;e[0]!==b||e[1]!==f?(le=(pe=f.find(ve=>{const{gizmo:Te}=ve;return Te.gizmo.id===b}))!=null?pe:null,e[0]=b,e[1]=f,e[2]=le):le=e[2],v=le}const S=v;let C=h;!o&&C!=="root"&&(C="root"),!p&&(C==="projectsList"||C==="projectChats")&&(C="history"),C==="projectChats"&&!S&&(C="projectsList");const w=C,k=w==="projectChats"?S:null,E=Fq(k);let M;e[3]!==d?(M=d.formatMessage(yd.startProjectChat),e[3]=d,e[4]=M):M=e[4];const N=M;let A;e[5]!==o||e[6]!==l?(A=(le,ve)=>{le.preventDefault(),le.stopPropagation(),lt.newConversationGizmoId$.set(ve),lt.wantsNewConversation$.set(!0),lt.selectedConversationId$.set(void 0),o&&(y(null),_("root")),l()},e[5]=o,e[6]=l,e[7]=A):A=e[7];const I=A;let P,R;e[8]!==a||e[9]!==g?(P=()=>{a&&g()},R=[a,g],e[8]=a,e[9]=g,e[10]=P,e[11]=R):(P=e[10],R=e[11]),x.useEffect(P,R);let O,L;e[12]!==g||e[13]!==w?(O=()=>{w==="projectsList"&&g()},L=[w,g],e[12]=g,e[13]=w,e[14]=O,e[15]=L):(O=e[14],L=e[15]),x.useEffect(O,L);let D,H;if(e[16]!==i||e[17]!==w?(D=()=>{i(w!=="root")},H=[i,w],e[16]=i,e[17]=w,e[18]=D,e[19]=H):(D=e[18],H=e[19]),x.useEffect(D,H),!n)return null;let V;e[20]!==I||e[21]!==p||e[22]!==o||e[23]!==a||e[24]!==l||e[25]!==f||e[26]!==g||e[27]!==w||e[28]!==s||e[29]!==N||e[30]!==u?(V=()=>!a||w!=="root"?null:r.jsx(r.Fragment,{children:r.jsxs(J.Sub,{children:[r.jsx(J.SubMenuTrigger,{fillContainer:!0,onClick:le=>{o&&(le.preventDefault(),_("history"))},children:r.jsx(j,T({},u))}),o?null:r.jsx(J.Portal,{children:r.jsxs(J.SubContent,{"data-desktop-skip-link-handler":!0,className:"max-h-[50dvh] w-72 overflow-y-auto",children:[p?r.jsx(jYe,{projects:f,hasProjects:p,serverThreadId:s,onClose:l,onStartProjectChat:(le,ve)=>I(le,ve),startProjectChatLabel:N,onOpenProjects:g}):null,r.jsx(T5,{activeId:s,hideOverflowMenu:!0,onSelect:l})]})})]})}),e[20]=I,e[21]=p,e[22]=o,e[23]=a,e[24]=l,e[25]=f,e[26]=g,e[27]=w,e[28]=s,e[29]=N,e[30]=u,e[31]=V):V=e[31];const q=V;let W;e[32]!==c||e[33]!==p||e[34]!==l||e[35]!==w||e[36]!==s?(W=()=>w!=="history"?null:r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:r.jsx(od,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:le=>{le.preventDefault(),_("root")},fillContainer:!0,children:r.jsx(j,T({},c))}),r.jsx(J.Separator,{}),r.jsxs(J.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[p?r.jsx(J.Item,{fillContainer:!0,onSelect:le=>{le.preventDefault(),y(null),_("projectsList")},subMenu:!0,children:r.jsx(j,T({},yd.projects))}):null,r.jsx(T5,{activeId:s,hideOverflowMenu:!0,onSelect:()=>{_("root"),l()}})]})]}),e[32]=c,e[33]=p,e[34]=l,e[35]=w,e[36]=s,e[37]=W):W=e[37];const $=W;let Z;e[38]!==m||e[39]!==f||e[40]!==w?(Z=()=>w!=="projectsList"?null:r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:r.jsx(od,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:le=>{le.preventDefault(),_("history")},fillContainer:!0,children:r.jsx(j,T({},yd.projects))}),r.jsx(J.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(RYe,{projects:f,areProjectsLoading:m,onSelectProject:le=>{y(le),_("projectChats")}})})]}),e[38]=m,e[39]=f,e[40]=w,e[41]=Z):Z=e[41];const K=Z;let Y;e[42]!==k||e[43]!==E||e[44]!==I||e[45]!==l||e[46]!==w||e[47]!==s||e[48]!==N?(Y=()=>w!=="projectChats"||!k?null:r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:r.jsx(od,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:le=>{le.preventDefault(),_("projectsList")},fillContainer:!0,trailing:r.jsx(Ap,{"aria-label":N,onPointerUp:le=>I(le,k.gizmo.gizmo.id),onClick:le=>I(le,k.gizmo.gizmo.id),icon:Ip}),children:E}),r.jsx(J.Separator,{}),r.jsx(J.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(OYe,{project:k,serverThreadId:s,onSelectConversation:()=>{_("root"),y(null),l()}})})]}),e[42]=k,e[43]=E,e[44]=I,e[45]=l,e[46]=w,e[47]=s,e[48]=N,e[49]=Y):Y=e[49];const ae=Y;let se;e[50]!==q?(se=q(),e[50]=q,e[51]=se):se=e[51];let ee;e[52]!==$?(ee=$(),e[52]=$,e[53]=ee):ee=e[53];let re;e[54]!==K?(re=K(),e[54]=K,e[55]=re):re=e[55];let he;e[56]!==ae?(he=ae(),e[56]=ae,e[57]=he):he=e[57];let fe;return e[58]!==se||e[59]!==ee||e[60]!==re||e[61]!==he?(fe=r.jsxs(r.Fragment,{children:[se,ee,re,he]}),e[58]=se,e[59]=ee,e[60]=re,e[61]=he,e[62]=fe):fe=e[62],fe}const DYe=Pe(()=>me(()=>import("./fl4ha52uwxfs3yp2.js"),__vite__mapDeps([168,1,3,4])).then(t=>t.DeleteConversationConfirmationModalContainer));Pe(()=>me(()=>import("./c7d3fpgj9nqway0g.js"),__vite__mapDeps([176,1,3,4])).then(t=>t.default));function FYe(t){"use forget";const e=F.c(29),{clientThreadId:s,onClose:n}=t,o=G(),a=Bs(s),i=X9();let l;e[0]!==s||e[1]!==o?(l=Et(o,s),e[0]=s,e[1]=o,e[2]=l):l=e[2];const c=l;let u;e[3]!==o?(u=ut(),e[3]=o,e[4]=u):u=e[4];const d=u;let f;e[5]!==i?(f=()=>{i==null||i.openInNewTab()},e[5]=i,e[6]=f):f=e[6];const m=f,p=vU(),[g,h]=x.useState(!1),[_,b]=x.useState(!1),y=!g&&!_;let v,S;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=()=>h(!0),S=()=>h(!1),e[7]=v,e[8]=S):(v=e[7],S=e[8]);let C;e[9]!==c||e[10]!==g||e[11]!==y?(C=r.jsx(EYe,{conversation:c,isRootVisible:y,isPanelVisible:g,onOpenPanel:v,onClosePanel:S,backMessage:im.back}),e[9]=c,e[10]=g,e[11]=y,e[12]=C):C=e[12];let w;e[13]!==d||e[14]!==p||e[15]!==y||e[16]!==n||e[17]!==a?(w=r.jsx(LYe,{serverThreadId:a,isAuth:d,isNarrowSidebar:p,isRootMenuVisible:y,onActiveStateChange:b,onClose:n,backMessage:im.back,switchChatMessage:im.switchChat}),e[13]=d,e[14]=p,e[15]=y,e[16]=n,e[17]=a,e[18]=w):w=e[18];let k;e[19]!==o||e[20]!==m||e[21]!==y||e[22]!==n||e[23]!==a?(k=y?r.jsxs(r.Fragment,{children:[a?r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{icon:wr,onClick:m,fillContainer:!0,children:r.jsx(j,T({},im.openChatInTab))}),r.jsx(J.Item,{icon:Rl,color:"danger",onClick:()=>{a&&(mt(o,DYe,{serverThreadId:a,isActiveConversation:!0}),n())},fillContainer:!0,children:r.jsx(j,T({},im.deleteChat))})]}):null,null]}):null,e[19]=o,e[20]=m,e[21]=y,e[22]=n,e[23]=a,e[24]=k):k=e[24];let E;return e[25]!==C||e[26]!==w||e[27]!==k?(E=r.jsxs(r.Fragment,{children:[C,w,k]}),e[25]=C,e[26]=w,e[27]=k,e[28]=E):E=e[28],E}const im=Ne({switchChat:{id:"SidebarHeader.switchChat",defaultMessage:"Switch Chat"},openChatInTab:{id:"SidebarHeader.openChatInTab",defaultMessage:"Open Chat in Tab"},deleteChat:{id:"SidebarHeader.deleteChat",defaultMessage:"Delete Chat"},openFeedbackModal:{id:"SidebarHeader.openFeedbackModal",defaultMessage:"Share Feedback"},back:{id:"SidebarHeader.back",defaultMessage:"Back"}});var FP;const Ih=Mt.button(FP||(FP=St(["\n  hover:bg-token-interactive-bg-secondary-hover\n  focus-visible:bg-token-interactive-bg-secondary-hover\n  radix-state-open:bg-token-interactive-bg-secondary-hover\n  flex h-[34px] w-[34px] items-center justify-center rounded-[8px]\n  focus-visible:outline-0\n"])));function Hpt(t){"use forget";const e=F.c(44),{clientThreadId:s}=t,n=G(),o=ne(),[a,i]=x.useState(!1),l=X9();let c;e[0]!==n?(c=Q9(n),e[0]=n,e[1]=c):c=e[1];const u=c;let d;e[2]!==l||e[3]!==n?(d=()=>{bc(n)&&d9.set(n,"new_page_view"),l==null||l.becomeMainPage()},e[2]=l,e[3]=n,e[4]=d):d=e[4];const f=d,m=BYe;let p;e[5]!==l?(p=()=>{var D;(D=l==null?void 0:l.closeSideChat)==null||D.call(l)},e[5]=l,e[6]=p):p=e[6];const g=p;let h;e[7]!==f||e[8]!==o||e[9]!==u?(h=u&&r.jsx(It,{triggerAs:null,label:r.jsx(j,T({},Ni.expandSidebar)),children:r.jsx(Ih,{"aria-label":o.formatMessage(Ni.expandSidebar),onClick:f,children:r.jsx(TYe,{className:"icon -scale-x-100"})})}),e[7]=f,e[8]=o,e[9]=u,e[10]=h):h=e[10];let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx(j,T({},Ni.openChatMenu)),e[11]=_):_=e[11];let b;e[12]!==o?(b=o.formatMessage(Ni.openChatMenu),e[12]=o,e[13]=b):b=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(ra,{className:"icon"}),e[14]=y):y=e[14];let v;e[15]!==b?(v=r.jsx(It,{triggerAs:null,label:_,children:r.jsx(J.BasicTrigger,{asChild:!0,children:r.jsx(Ih,{"aria-label":b,children:y})})}),e[15]=b,e[16]=v):v=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=()=>i(!1),e[17]=S):S=e[17];let C;e[18]!==s?(C=r.jsx(J.Portal,{children:r.jsx(J.Content,{children:r.jsx(FYe,{clientThreadId:s,onClose:S})})}),e[18]=s,e[19]=C):C=e[19];let w;e[20]!==a||e[21]!==C||e[22]!==v?(w=r.jsxs(J.Root,{open:a,onOpenChange:i,children:[v,C]}),e[20]=a,e[21]=C,e[22]=v,e[23]=w):w=e[23];let k;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(j,T({},Ni.newChat)),e[24]=k):k=e[24];let E;e[25]!==o?(E=o.formatMessage(Ni.newChat),e[25]=o,e[26]=E):E=e[26];let M;e[27]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(Ip,{className:"icon"}),e[27]=M):M=e[27];let N;e[28]!==E?(N=r.jsx(It,{triggerAs:null,label:k,children:r.jsx(Ih,{"aria-label":E,onClick:m,children:M})}),e[28]=E,e[29]=N):N=e[29];let A;e[30]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(j,T({},Ni.closeSidebar)),e[30]=A):A=e[30];let I;e[31]!==o?(I=o.formatMessage(Ni.closeSidebar),e[31]=o,e[32]=I):I=e[32];let P;e[33]===Symbol.for("react.memo_cache_sentinel")?(P=r.jsx(mO,{className:"icon"}),e[33]=P):P=e[33];let R;e[34]!==g||e[35]!==I?(R=r.jsx(It,{triggerAs:null,label:A,children:r.jsx(Ih,{"aria-label":I,onClick:g,children:P})}),e[34]=g,e[35]=I,e[36]=R):R=e[36];let O;e[37]!==w||e[38]!==N||e[39]!==R?(O=r.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[w,N,R]}),e[37]=w,e[38]=N,e[39]=R,e[40]=O):O=e[40];let L;return e[41]!==O||e[42]!==h?(L=r.jsxs("div",{className:"flex w-full items-center justify-between",children:[h,O]}),e[41]=O,e[42]=h,e[43]=L):L=e[43],L}function BYe(){lt.newConversationGizmoId$.set(void 0),lt.wantsNewConversation$.set(!0),lt.selectedConversationId$.set(void 0)}const Ni=Ne({expandSidebar:{id:"SidebarHeader.expandSidebar",defaultMessage:"Back to ChatGPT"},openChatMenu:{id:"SidebarHeader.openChatMenu",defaultMessage:"Open chat menu"},newChat:{id:"SidebarHeader.startNewChat",defaultMessage:"New chat"},closeSidebar:{id:"SidebarHeader.closeSidebar",defaultMessage:"Close side chat"}});function Uq(t){return r.jsx("span",{className:z({"bg-linear-to-r from-[#ED5EB4] to-[#8086F9] bg-clip-text text-transparent dark:from-[#F472B6] dark:via-[#C084FC] dark:to-[#818CF8]":t.labelGradientEnabled}),children:t.label})}function Gpt(t){"use forget";const e=F.c(11),{navData:s,disableDarkMode:n}=t,o=n===void 0?!1:n,{effectiveLocale:a}=S0(),[i,l]=x.useState(null);let c;if(e[0]!==o||e[1]!==a||e[2]!==s.items||e[3]!==i){let d;e[5]!==o||e[6]!==a||e[7]!==i?(d=f=>{var m;return r.jsx("li",{children:(m=f.items)!=null&&m.length?r.jsx(UYe,{item:f,effectiveLocale:a,disableDarkMode:o,openDropdownId:i,setOpenDropdownId:l}):r.jsx(JS,{item:f,effectiveLocale:a,isTopLevel:!0,disableDarkMode:o})},f.id)},e[5]=o,e[6]=a,e[7]=i,e[8]=d):d=e[8],c=s.items.map(d),e[0]=o,e[1]=a,e[2]=s.items,e[3]=i,e[4]=c}else c=e[4];let u;return e[9]!==c?(u=r.jsx("nav",{className:"hidden items-center lg:flex",children:r.jsx("ul",{className:"flex items-center gap-2 lg:gap-4",children:c})}),e[9]=c,e[10]=u):u=e[10],u}function JS(t){"use forget";const e=F.c(22),{item:s,effectiveLocale:n,isTopLevel:o,disableDarkMode:a}=t,i=a===void 0?!1:a,{external:l}=s;let c;e[0]!==n||e[1]!==s.url?(c=NW(s.url,n),e[0]=n,e[1]=s.url,e[2]=c):c=e[2];const u=c,d=o&&i,f=o&&!i,m=!o;let p;e[3]!==o||e[4]!==d||e[5]!==f||e[6]!==m?(p=z("text-mkt-p2 flex items-center gap-0.5 rounded-lg px-2.5 whitespace-nowrap",{"text-token-text-secondary hover:text-token-text-primary py-1.5":o,"hover:bg-token-bg-primary/80":d,"hover:bg-token-bg-secondary/50":f,"hover:bg-token-interactive-bg-primary-hover/10 py-2":m}),e[3]=o,e[4]=d,e[5]=f,e[6]=m,e[7]=p):p=e[7];let g;e[8]!==s.analyticsIdentifier||e[9]!==u?(g=()=>{yl.logNavigation({analytics_identifier:s.analyticsIdentifier,navigation_surface:"header_desktop",to:u})},e[8]=s.analyticsIdentifier,e[9]=u,e[10]=g):g=e[10];let h;e[11]!==s?(h=Uq(s),e[11]=s,e[12]=h):h=e[12];let _;e[13]!==l?(_=l&&r.jsx(bp,{className:"h-3 w-3"}),e[13]=l,e[14]=_):_=e[14];let b;return e[15]!==l||e[16]!==p||e[17]!==g||e[18]!==h||e[19]!==_||e[20]!==u?(b=r.jsxs(pr,{href:u,openNewTab:l,className:p,underline:!1,onClick:g,children:[h,_]}),e[15]=l,e[16]=p,e[17]=g,e[18]=h,e[19]=_,e[20]=u,e[21]=b):b=e[21],b}function UYe(t){"use forget";var se;const e=F.c(75),{item:s,effectiveLocale:n,disableDarkMode:o,openDropdownId:a,setOpenDropdownId:i}=t,l=o===void 0?!1:o,c=a===s.id,u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),m="header-nav-".concat(s.id);let p;e[0]!==n||e[1]!==s.url?(p=NW(s.url,n),e[0]=n,e[1]=s.url,e[2]=p):p=e[2];const g=p,h=!!s.url,_=h?pr:"button",b=!c,y=c&&l,v=c&&!l;let S;e[3]!==c||e[4]!==b||e[5]!==y||e[6]!==v?(S=z("inline-flex items-center px-2.5 py-1.5 text-mkt-p2",{"text-token-text-secondary":b,"text-token-text-primary rounded-lg backdrop-blur-xl":c,"bg-token-bg-primary/80":y,"bg-token-bg-secondary/50":v}),e[3]=c,e[4]=b,e[5]=y,e[6]=v,e[7]=S):S=e[7];const C=S;let w;e[8]!==h||e[9]!==s.analyticsIdentifier||e[10]!==s.external||e[11]!==s.id||e[12]!==i||e[13]!==g?(w=h?{href:g,openNewTab:s.external,underline:!1,onClick:()=>{yl.logNavigation({analytics_identifier:s.analyticsIdentifier,navigation_surface:"header_desktop",to:g})}}:{ref:u,type:"button",onClick:()=>{yl.logNavigation({analytics_identifier:s.analyticsIdentifier,navigation_surface:"header_desktop"}),i(s.id)}},e[8]=h,e[9]=s.analyticsIdentifier,e[10]=s.external,e[11]=s.id,e[12]=i,e[13]=g,e[14]=w):w=e[14];const k=w;let E;e[15]!==h||e[16]!==s.id||e[17]!==i?(E=ee=>{ee.preventDefault(),ee.key==="ArrowDown"&&i(s.id),!h&&(ee.key==="Enter"||ee.key===" ")&&i(s.id),ee.key==="Escape"&&i(null)},e[15]=h,e[16]=s.id,e[17]=i,e[18]=E):E=e[18];const M=E;let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{f.current&&(clearTimeout(f.current),f.current=null)},e[19]=N):N=e[19];const A=N;let I;e[20]!==s.id||e[21]!==i?(I=()=>{A(),f.current=setTimeout(()=>{i(ee=>ee===s.id?null:ee)},150)},e[20]=s.id,e[21]=i,e[22]=I):I=e[22];const P=I;let R;e[23]!==i?(R=ee=>{const re=ee.relatedTarget;(!(re instanceof Node)||!ee.currentTarget.contains(re))&&i(null)},e[23]=i,e[24]=R):R=e[24];let O,L;e[25]!==s.id||e[26]!==i?(O=()=>i(s.id),L=()=>i(s.id),e[25]=s.id,e[26]=i,e[27]=O,e[28]=L):(O=e[27],L=e[28]);const D=s.analyticsIdentifier;let H;e[29]!==s?(H=Uq(s),e[29]=s,e[30]=H):H=e[30];let V;e[31]!==_||e[32]!==C||e[33]!==M||e[34]!==m||e[35]!==s.analyticsIdentifier||e[36]!==c||e[37]!==O||e[38]!==L||e[39]!==H||e[40]!==k?(V=r.jsx(_,U(T({className:C,"aria-haspopup":"menu","aria-expanded":c,"aria-controls":m,onMouseEnter:O,onFocus:L,onKeyDown:M,"data-analytics-id":D},k),{children:H})),e[31]=_,e[32]=C,e[33]=M,e[34]=m,e[35]=s.analyticsIdentifier,e[36]=c,e[37]=O,e[38]=L,e[39]=H,e[40]=k,e[41]=V):V=e[41];const q=s.label,W=l?"bg-token-bg-primary/80":"bg-token-bg-secondary/50",$=c?"block":"hidden";let Z;e[42]!==W||e[43]!==$?(Z=z("absolute start-1/2 z-50 mt-2 -translate-x-1/2 rounded-lg p-4 shadow-lg backdrop-blur-xl rtl:translate-x-1/2",W,$),e[42]=W,e[43]=$,e[44]=Z):Z=e[44];let K;e:{let ee;e[45]!==s.items?(ee=(se=s.items)!=null?se:[],e[45]=s.items,e[46]=ee):ee=e[46];const re=ee,he=re.some($Ye),fe=re.length>1;if(he){let ve;if(e[47]!==re||e[48]!==n||e[49]!==fe){let xe;e[51]!==re.length||e[52]!==n||e[53]!==fe?(xe=(ce,we)=>{var ge;return r.jsxs("div",{className:z(fe&&we===0&&"pe-4",fe&&we===re.length-1&&"ps-4",fe&&we>0&&we<re.length-1&&"px-4"),children:[r.jsx("div",{className:"text-mkt-p2 my-2.5 px-2.5 opacity-50",children:ce.label}),r.jsx("ul",{className:"flex flex-col",children:(ge=ce.items)==null?void 0:ge.map(Ae=>r.jsx("li",{children:r.jsx(JS,{item:Ae,effectiveLocale:n,isTopLevel:!1})},Ae.id))})]},ce.id)},e[51]=re.length,e[52]=n,e[53]=fe,e[54]=xe):xe=e[54],ve=re.map(xe),e[47]=re,e[48]=n,e[49]=fe,e[50]=ve}else ve=e[50];let Te;e[55]!==ve?(Te=r.jsx("div",{className:"divide-token-border-light grid min-w-max auto-cols-fr grid-flow-col items-stretch divide-x",children:ve}),e[55]=ve,e[56]=Te):Te=e[56],K=Te;break e}let pe;if(e[57]!==re||e[58]!==n){let ve;e[60]!==n?(ve=Te=>r.jsx("li",{children:r.jsx(JS,{item:Te,effectiveLocale:n,isTopLevel:!1})},Te.id),e[60]=n,e[61]=ve):ve=e[61],pe=re.map(ve),e[57]=re,e[58]=n,e[59]=pe}else pe=e[59];let le;e[62]!==pe?(le=r.jsx("ul",{className:"flex flex-col",children:pe}),e[62]=pe,e[63]=le):le=e[63],K=le}let Y;e[64]!==m||e[65]!==s.label||e[66]!==P||e[67]!==Z||e[68]!==K?(Y=r.jsx("div",{ref:d,id:m,"aria-label":q,className:Z,onMouseEnter:A,onMouseLeave:P,children:K}),e[64]=m,e[65]=s.label,e[66]=P,e[67]=Z,e[68]=K,e[69]=Y):Y=e[69];let ae;return e[70]!==P||e[71]!==R||e[72]!==V||e[73]!==Y?(ae=r.jsxs("div",{className:"relative",onBlurCapture:R,onMouseLeave:P,onMouseEnter:A,children:[V,Y]}),e[70]=P,e[71]=R,e[72]=V,e[73]=Y,e[74]=ae):ae=e[74],ae}function $Ye(t){var e,s;return((s=(e=t.items)==null?void 0:e.length)!=null?s:0)>0}const HYe="https://openai.com/news/";function GYe(t){return r.jsx(j,{id:"5-2-nux-description",defaultMessage:"Our latest model with improvements in writing, coding, and reasoning. {learnMore}",values:{learnMore:r.jsx(qn,{href:t,className:"underline",children:r.jsx(j,{id:"S50a4f",defaultMessage:"Learn more"})})}})}function Vpt(t){"use forget";var R;const e=F.c(27),{conversation:s,children:n}=t,o=jt();let a;e[0]!==s?(a=()=>s.serverId$(),e[0]=s,e[1]=a):a=e[1];const i=oe(a),l=Qe(s.id,Se.getCurrentLeafId);let c;e[2]!==l||e[3]!==i?(c={serverThreadId:i,leafId:l},e[2]=l,e[3]=i,e[4]=c):c=e[4];const u=dk(c),{mutate:d}=gg(),{mutate:f}=hg(),m=js(o,"1760795888").value,p=oe(zYe);let g;e[5]!==s?(g=()=>br(s),e[5]=s,e[6]=g):g=e[6];const h=oe(g),_=String((R=m==null?void 0:m.blog_post_link)!=null?R:HYe);let b;e[7]!==h.categories?(b=h.categories.some(VYe),e[7]=h.categories,e[8]=b):b=e[8];const y=b,v=(u==null?void 0:u.beacon_id)==="purple_rain_nux"&&y,S=x.useRef(!1),C=x.useRef(!1);let w,k;e[9]!==u||e[10]!==d||e[11]!==v?(w=()=>{!v||!u||S.current||(Gd(u,"show"),d(u.beacon_id),S.current=!0)},k=[u,d,v],e[9]=u,e[10]=d,e[11]=v,e[12]=w,e[13]=k):(w=e[12],k=e[13]),x.useEffect(w,k);let E;e[14]!==u||e[15]!==o||e[16]!==f||e[17]!==v?(E=()=>{!v||!u||C.current||(Gd(u,"dismiss"),f(u.beacon_id),_t(o,We.hasSeenPurpleRainNux),No.dismiss(),C.current=!0)},e[14]=u,e[15]=o,e[16]=f,e[17]=v,e[18]=E):E=e[18];const M=E;if(!v){let O;return e[19]!==n?(O=r.jsx(r.Fragment,{children:n}),e[19]=n,e[20]=O):O=e[20],O}let N,A;e[21]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(j,{id:"5-2-nux-title",defaultMessage:"GPT 5.2"}),A=GYe(_),e[21]=N,e[22]=A):(N=e[21],A=e[22]);const I=p?"start":"center";let P;return e[23]!==n||e[24]!==M||e[25]!==I?(P=r.jsx(nu,{announcementKey:We.hasSeenPurpleRainNux,show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:N,description:A,onDismiss:M,sideOffset:0,align:I,alignOffset:0,children:n}),e[23]=n,e[24]=M,e[25]=I,e[26]=P):P=e[26],P}function VYe(t){return t.defaultModel==="gpt-5-2"}function zYe(){return Np()}const $q=We.TemporaryChatOnboarding;function zpt(){const t=oo(),{eligible:e}=Ct($q);return e&&t}function lm({icon:t,title:e,description:s}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"mt-1 h-5 w-5 shrink-0",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:s})]})]})}const WYe=({className:t})=>r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[r.jsx("rect",{x:"2",y:"6",width:"5",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M2 12H1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M22 12H23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("rect",{x:"17",y:"6",width:"5",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),r.jsx("path",{d:"M7 12L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M16 12H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M9 3L15 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});function Wpt({onClose:t}){const[e,s]=x.useState(!0),n=G(),o=ct(n),a=ne(),i=Dp(),l=x.useCallback(()=>{_t(n,$q),s(!1),t==null||t()},[n,t]);return x.useEffect(()=>{B.logUpsellOrModalEvent(ks,{eventId:"temporary_chat_onboarding_modal_shown",type:Ts.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),o!=null&&o.isWorkspaceAccount()?r.jsx(Ft,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:Tn,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(Nn.title),primaryButton:r.jsx(mn.Button,{onClick:l,title:a.formatMessage(Nn.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(lm,{icon:r.jsx(Bd,{className:"h-full w-full"}),title:a.formatMessage(Nn.bulletTitle1),description:a.formatMessage({id:"nSGhxr",defaultMessage:"Temporary chats won't appear in your history."})}),r.jsx(lm,{icon:i?r.jsx(ea,{className:"h-full w-full"}):r.jsx(iN,{className:"h-full w-full"}),title:a.formatMessage(i?Nn.bulletTitle2MemoryAvailable:Nn.bulletTitle2MemoryUnavailable),description:a.formatMessage(i?Nn.bulletDescription2MemoryAvailable:Nn.bulletDescription2MemoryUnavailable)})]})}):r.jsx(Ft,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:Tn,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(Nn.title),primaryButton:r.jsx(mn.Button,{onClick:l,title:a.formatMessage(Nn.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(lm,{icon:r.jsx(Bd,{className:"h-full w-full"}),title:a.formatMessage(Nn.bulletTitle1),description:a.formatMessage(Nn.bulletDescription1)}),r.jsx(lm,{icon:r.jsx(WYe,{className:"h-full w-full"}),title:a.formatMessage(Nn.bulletTitle3),description:a.formatMessage(Nn.bulletDescription3)}),r.jsx(lm,{icon:i?r.jsx(ea,{className:"h-full w-full"}):r.jsx(iN,{className:"h-full w-full"}),title:a.formatMessage(i?Nn.bulletTitle2MemoryAvailable:Nn.bulletTitle2MemoryUnavailable),description:a.formatMessage(i?Nn.bulletDescription2MemoryAvailable:Nn.bulletDescription2MemoryUnavailable)})]})})}const Nn=Ne({title:{id:"TemporaryChatOnboardingModal.title",defaultMessage:"Temporary Chat"},bulletTitle1:{Icon:r.jsx(Bd,{className:"h-full w-full"}),id:"TemporaryChatOnboardingModal.bulletTitle1",defaultMessage:"Not in history"},bulletDescription1:{id:"TemporaryChatOnboardingModal.bulletDescription1.1",defaultMessage:"Temporary chats won't appear in your history. For safety purposes, we may keep a copy of your chat for up to 30 days."},bulletTitle2MemoryAvailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryAvailable",defaultMessage:"Memory off"},bulletDescription2MemoryAvailable:{id:"rmWwWN",defaultMessage:"While in a temporary chat, ChatGPT won't use or update its memory. Custom instructions will still be followed if you have them enabled."},bulletTitle2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryUnavailable",defaultMessage:"Follows Custom Instructions"},bulletDescription2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletDescription2MemoryUnavailable",defaultMessage:"Custom Instructions will still be followed if you have them enabled."},bulletTitle3:{id:"TemporaryChatOnboardingModal.bulletTitle3",defaultMessage:"No model training"},bulletDescription3:{id:"TemporaryChatOnboardingModal.bulletDescription3",defaultMessage:"Temporary chats won't be used to improve our models."},continue:{id:"TemporaryChatOnboardingModal.continue",defaultMessage:"Continue"}}),qYe=ue(Ce,"5f66c3",20,20);var Hq=(t=>(t.GENERIC="generic",t.GENERIC_FREE_TRIAL="generic_free_trial",t.GO="go",t.PLUS="plus",t.FREE_WORKSPACE="free_workspace",t))(Hq||{});const Dv="thread_header_upgrade_pill_dismissed_event",KYe=1440*60*1e3;function YYe(t){switch(t){case tt.PLUS:return"Plus";case tt.GO:return"Go";case tt.SELF_SERVE_BUSINESS:return"Business";default:return t}}function QYe(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}return null}function qpt(t){"use forget";var H,V,q,W,$,Z,K;const e=F.c(21),{clientThreadId:s,fromHeader:n}=t,o=G(),a=sB(),{enableThreadHeaderUpgradePill:i}=Dxe();let l;e[0]!==s?(l=wl(s),e[0]=s,e[1]=l):l=e[1];const c=l,u=Qe(s,JYe),d=Qe(s,Se.getCurrentLeafId),f=Cw(),m=Bs(s);let p;e[2]!==d||e[3]!==m?(p={serverThreadId:m,leafId:d},e[2]=d,e[3]=m,e[4]=p):p=e[4];const g=uk(p);let h;e[5]!==(f==null?void 0:f.call_to_action)?(h=((H=f==null?void 0:f.call_to_action)==null?void 0:H.includes(Yt.GET_PLUS))||((V=f==null?void 0:f.call_to_action)==null?void 0:V.includes(Yt.UPGRADE_TO_GO))||((q=f==null?void 0:f.call_to_action)==null?void 0:q.includes(Yt.GET_BUSINESS_TRIAL))||((W=f==null?void 0:f.call_to_action)==null?void 0:W.includes(Yt.GET_GO_TRIAL))||(($=f==null?void 0:f.call_to_action)==null?void 0:$.includes(Yt.GET_PLUS_TRIAL))||((Z=f==null?void 0:f.call_to_action)==null?void 0:Z.includes(Yt.GET_PRO))||((K=f==null?void 0:f.call_to_action)==null?void 0:K.includes(Yt.GET_BUSINESS)),e[5]=f==null?void 0:f.call_to_action,e[6]=h):h=e[6];const _=h,b=c&&!u,[y,v]=x.useState(null),S=y!==null;let C,w;e[7]!==s||e[8]!==m?(C=()=>{if(typeof window>"u")return;const Y=QYe(ft.getItem(Be.ThreadHeaderUpgradePillDismissals));Y!=null&&Date.now()-Y<KYe?v(Y):Y!=null&&ft.setItem(Be.ThreadHeaderUpgradePillDismissals,null);const ae=se=>{const ee=se.detail;(ee===s||m&&ee===m)&&v(Date.now())};return window.addEventListener(Dv,ae),()=>{window.removeEventListener(Dv,ae)}},w=[s,m],e[7]=s,e[8]=m,e[9]=C,e[10]=w):(C=e[9],w=e[10]),x.useEffect(C,w);const k=a&&i&&!_,E=k&&b;let M;e[11]!==o?(M=Xe(o,iQe,{disableExposureLog:!0}).get(lQe,!1),e[11]=o,e[12]=M):M=e[12];const N=M,I=(g==null?void 0:g.beacon_id)===DG&&N;let P=!1;if(!I&&n&&k&&s){let Y;e[13]!==o?(Y=Xe(o,"684023316").get("show_persistent_generic_upsell",!1),e[13]=o,e[14]=Y):Y=e[14],P=Y}let R;e[15]!==s||e[16]!==m?(R=()=>{const Y=m!=null?m:s,ae=Date.now();if(ft.setItem(Be.ThreadHeaderUpgradePillDismissals,ae),v(ae),typeof window<"u"){const se=new Set([Y]);m&&m!==s&&se.add(s);for(const ee of se)window.dispatchEvent(new CustomEvent(Dv,{detail:ee}))}},e[15]=s,e[16]=m,e[17]=R):R=e[17];const O=R,L=!I&&(E||P&&!S);let D;return e[18]!==O||e[19]!==L?(D={shouldShow:L,showCloseButton:!0,handleClose:O},e[18]=O,e[19]=L,e[20]=D):D=e[20],D}function JYe(t){return Se.hasUserMessage(t)}function Kpt(t){"use forget";var P,R;const e=F.c(21),{clientThreadId:s,onClose:n,showCloseButton:o}=t,a=o===void 0?!0:o,i=G(),l=fs(),c=L$e(),u=F$e(),d=D$e();let f;e[0]!==s?(f=wl(s),e[0]=s,e[1]=f):f=e[1];const m=f,p=Qe(s,XYe),g=a&&(!m||p),h=oe(ZYe);let _=null,b,y;u.eligible?(_=tt.SELF_SERVE_BUSINESS,b=u.campaignId):c.eligible?(_=tt.PLUS,b=c.campaignId):d.eligible&&(_=tt.GO,b=d.campaignId);const v=_!==null,S=Sx(),{isLoading:C}=qo(Qt.Sunshine),{data:w,isLoading:k}=$p(void 0,!1,S),E=S&&((P=w==null?void 0:w.memoryFullPct)!=null?P:0)>=100,M=k&&(C||E),N=(R=l==null?void 0:l.isPro())!=null?R:!1;if(!l||M||N)return null;const A=l.isFreeWorkspace();let I;if(v)I="generic_free_trial";else if(A)I="free_workspace";else if(h)E1(i)?I="go":I="plus";else if(E1(i))I="go";else{const L=Xe(i,"497415788").get("upgrade_pill_type","plus");if(nQe(L))I=L;else return null}switch(I){case"generic":{let O;return e[2]!==n||e[3]!==g?(O=r.jsx(E5,{onClose:n,showCloseButton:g}),e[2]=n,e[3]=g,e[4]=O):O=e[4],O}case"generic_free_trial":{if(!_)return null;let O;return e[5]!==_||e[6]!==b||e[7]!==n||e[8]!==g?(O=r.jsx(sQe,{onClose:n,planType:_,promoCampaign:b,promoCode:y,showCloseButton:g}),e[5]=_,e[6]=b,e[7]=n,e[8]=g,e[9]=O):O=e[9],O}case"plus":{let O;return e[10]!==h||e[11]!==n||e[12]!==g?(O=r.jsx(eQe,{isMobileWeb:h,onClose:n,showCloseButton:g}),e[10]=h,e[11]=n,e[12]=g,e[13]=O):O=e[13],O}case"go":{let O;return e[14]!==h||e[15]!==n||e[16]!==g?(O=r.jsx(tQe,{isMobileWeb:h,onClose:n,showCloseButton:g}),e[14]=h,e[15]=n,e[16]=g,e[17]=O):O=e[17],O}case"free_workspace":{let O;return e[18]!==n||e[19]!==g?(O=r.jsx(E5,{onClose:n,showCloseButton:g}),e[18]=n,e[19]=g,e[20]=O):O=e[20],O}}}function ZYe(){return RR()}function XYe(t){return Se.hasUserMessage(t)}function eQe(t){"use forget";const e=F.c(13),{isMobileWeb:s,onClose:n,showCloseButton:o}=t,a=yt(),i=G();let l;e[0]!==a?(l=()=>{an(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(yg,{className:"icon-sm"}),e[2]=u):u=e[2];let d;e[3]!==i||e[4]!==s?(d=oQe(i,s),e[3]=i,e[4]=s,e[5]=d):d=e[5];let f;e[6]!==d?(f=r.jsx(j,T({},d)),e[6]=d,e[7]=f):f=e[7];let m;return e[8]!==c||e[9]!==n||e[10]!==o||e[11]!==f?(m=r.jsxs(A0,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:o,type:"plus",children:[u,f]}),e[8]=c,e[9]=n,e[10]=o,e[11]=f,e[12]=m):m=e[12],m}function tQe(t){"use forget";const e=F.c(13),{isMobileWeb:s,onClose:n,showCloseButton:o}=t,a=yt(),i=G();let l;e[0]!==a?(l=()=>{an(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(qYe,{className:"icon-sm"}),e[2]=u):u=e[2];let d;e[3]!==i||e[4]!==s?(d=aQe(i,s),e[3]=i,e[4]=s,e[5]=d):d=e[5];let f;e[6]!==d?(f=r.jsx(j,T({},d)),e[6]=d,e[7]=f):f=e[7];let m;return e[8]!==c||e[9]!==n||e[10]!==o||e[11]!==f?(m=r.jsxs(A0,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:o,type:"go",children:[u,f]}),e[8]=c,e[9]=n,e[10]=o,e[11]=f,e[12]=m):m=e[12],m}function E5(t){"use forget";const e=F.c(8),{onClose:s,showCloseButton:n}=t,o=yt();let a;e[0]!==o?(a=()=>{an(o,"thread_header_generic_upgrade_pill_button")},e[0]=o,e[1]=a):a=e[1];const i=a;let l,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(yg,{className:"icon-sm"}),c=r.jsx(j,T({},$t.upgrade)),e[2]=l,e[3]=c):(l=e[2],c=e[3]);let u;return e[4]!==i||e[5]!==s||e[6]!==n?(u=r.jsxs(A0,{onClick:i,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:n,type:"generic",children:[l,c]}),e[4]=i,e[5]=s,e[6]=n,e[7]=u):u=e[7],u}function sQe(t){"use forget";const e=F.c(29),{onClose:s,planType:n,promoCampaign:o,promoCode:a,showCloseButton:i}=t,l=G(),c=yt();let u;e[0]!==l||e[1]!==n?(u=n&&Xe(l,"1288455623").get("enabled",!1),e[0]=l,e[1]=n,e[2]=u):u=e[2];const d=u,f=d?Xe(l,"1288455623",{disableExposureLog:!0}).get("message_type","upgrade_for_free"):null;let m;e[3]!==l||e[4]!==d?(m=d&&Xe(l,"1288455623",{disableExposureLog:!0}).get("icon_type","sparkle_icon"),e[3]=l,e[4]=d,e[5]=m):m=e[5];const p=m,g=f?rQe[f]:$t.upgradeForFree;let h;if(e[6]!==o||e[7]!==a){const M=new URLSearchParams;a&&M.set(SG,a),o&&M.set(IO,o),h=M.toString(),e[6]=o,e[7]=a,e[8]=h}else h=e[8];const _=h,b=_?"/buy/".concat(n,"?").concat(_):"/buy/".concat(n);let y;e[9]!==b||e[10]!==l||e[11]!==c||e[12]!==n?(y=()=>{n!==tt.SELF_SERVE_BUSINESS&&Xe(l,"1417507197").get("redirect_personal_to_checkout",!1)?c(b):an(c,"thread_header_generic_free_trial_upgrade_pill_button")},e[9]=b,e[10]=l,e[11]=c,e[12]=n,e[13]=y):y=e[13];const v=y;let S;e[14]!==p?(S=p==="gift_icon"?r.jsx(dD,{className:"icon-sm"}):r.jsx(yg,{className:"icon-sm"}),e[14]=p,e[15]=S):S=e[15];let C;e[16]!==n?(C=YYe(n),e[16]=n,e[17]=C):C=e[17];let w;e[18]!==C?(w={planName:C},e[18]=C,e[19]=w):w=e[19];let k;e[20]!==g||e[21]!==w?(k=r.jsx(j,U(T({},g),{values:w})),e[20]=g,e[21]=w,e[22]=k):k=e[22];let E;return e[23]!==v||e[24]!==s||e[25]!==i||e[26]!==S||e[27]!==k?(E=r.jsxs(A0,{onClick:v,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:i,type:"generic_free_trial",children:[S,k]}),e[23]=v,e[24]=s,e[25]=i,e[26]=S,e[27]=k,e[28]=E):E=e[28],E}function A0(t){"use forget";const e=F.c(33),{children:s,className:n,onClick:o,onClose:a,showCloseButton:i,type:l}=t,c=ne(),[u,d]=x.useState(!1);let f,m,p;if(e[0]===Symbol.for("react.memo_cache_sentinel")){const O=jt();f="py-2",m="",p=Xe(O,"3204206607").get("padding_enabled",!1),e[0]=f,e[1]=m,e[2]=p}else f=e[0],m=e[1],p=e[2];p&&(f="",m="py-2");const g=i?"pe-2":"";let h;e[3]!==n||e[4]!==g?(h=z("inline-flex items-center gap-1 rounded-full text-sm font-medium",g,f,n),e[3]=n,e[4]=g,e[5]=h):h=e[5];const _=h,b=i?"pe-0":"pe-3";let y;e[6]!==b?(y=z("flex items-center gap-1 bg-transparent ps-2.5 text-current focus:outline-none",m,b),e[6]=b,e[7]=y):y=e[7];const v=y;let S,C;e[8]!==l?(S=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Shown","chatgpt_thread_header_upgrade_pill_button_shown",{type:l})},C=[l],e[8]=l,e[9]=S,e[10]=C):(S=e[9],C=e[10]),x.useEffect(S,C);let w;e[11]!==o||e[12]!==l?(w=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Clicked","chatgpt_thread_header_upgrade_pill_button_clicked",{type:l}),o==null||o()},e[11]=o,e[12]=l,e[13]=w):w=e[13];const k=w;let E;e[14]!==a||e[15]!==l?(E=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Dismissed","chatgpt_thread_header_upgrade_pill_button_dismissed",{type:l}),a()},e[14]=a,e[15]=l,e[16]=E):E=e[16];const M=E;let N,A;e[17]!==i?(N=()=>{if(!i){d(!1);return}if(typeof window>"u"){d(!0);return}const O=window.requestAnimationFrame(()=>{d(!0)});return()=>{window.cancelAnimationFrame(O)}},A=[i],e[17]=i,e[18]=N,e[19]=A):(N=e[18],A=e[19]),x.useEffect(N,A);let I;e[20]!==s||e[21]!==v||e[22]!==k?(I=r.jsx("button",{type:"button",onClick:k,className:v,children:s}),e[20]=s,e[21]=v,e[22]=k,e[23]=I):I=e[23];let P;e[24]!==M||e[25]!==c||e[26]!==u||e[27]!==i?(P=i?r.jsx("button",{type:"button",onClick:M,className:z("ms-0 flex h-4 w-4 items-center justify-center rounded-full text-[black] hover:bg-[#E4E4F6] dark:text-[white] dark:hover:bg-[#414071]","transform transition-all duration-200 ease-out",u?"pointer-events-auto visible translate-x-0 opacity-100":"pointer-events-none invisible -translate-x-1 opacity-0"),"aria-label":c.formatMessage($t.dismissUpgradeReminder),tabIndex:u?0:-1,children:r.jsx(npe,{height:20,width:20,color:"text-token-text-primary"})}):null,e[24]=M,e[25]=c,e[26]=u,e[27]=i,e[28]=P):P=e[28];let R;return e[29]!==_||e[30]!==I||e[31]!==P?(R=r.jsxs("div",{className:_,children:[I,P]}),e[29]=_,e[30]=I,e[31]=P,e[32]=R):R=e[32],R}function nQe(t){return Object.values(Hq).includes(t)}function oQe(t,e){const s=Xe(t,"497415788");return e&&s.get("should_show_upgrade_cta_mobile_web",!1)?$t.upgrade:$t.getPlus}function aQe(t,e){const s=Xe(t,"497415788");return e&&s.get("should_show_upgrade_cta_mobile_web",!1)?$t.upgrade:$t.upgradeToGo}const jh=Ne({freeTrial:{id:"2LxsIm",defaultMessage:"Free trial"},freeOffer:{id:"1B7DRo",defaultMessage:"Free offer"},startTrial:{id:"aivnYo",defaultMessage:"Start trial"},tryPlanNameFree:{id:"TOyll+",defaultMessage:"Try {planName} free"}}),rQe={free_trial:jh.freeTrial,free_offer:jh.freeOffer,start_trial:jh.startTrial,try_plan_name_free:jh.tryPlanNameFree,upgrade_for_free:$t.upgradeForFree},iQe="2850117686",lQe="hide_thread_header_upgrade_pill_button";var BP;const cQe=Mt.button(BP||(BP=St(["group flex cursor-pointer justify-center items-center gap-1 rounded-lg min-h-9 touch:min-h-10 px-2.5 text-lg hover:bg-token-surface-hover focus-visible:bg-token-surface-hover font-normal whitespace-nowrap focus-visible:outline-none"]))),uQe=t=>{"use forget";const e=F.c(4),{headerTextClassName:s}=t,n=s!=null?s:"px-2.5 text-lg";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(j,{id:"mhGPZ6",defaultMessage:"ChatGPT"}),e[0]=o):o=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("span",{className:"text-token-text-tertiary ms-1",children:r.jsx(j,{id:"0GIpXd",defaultMessage:"Voice"})}),e[1]=a):a=e[1];let i;return e[2]!==n?(i=r.jsxs("div",{className:n,children:[o,a]}),e[2]=n,e[3]=i):i=e[3],i};function dQe(t,e){var n;const s=e.categories.find(({defaultModel:o,supportedModels:a})=>o===t||(a==null?void 0:a.includes(t)));return(n=s==null?void 0:s.renderHeaderType)!=null?n:t2.SHORT_LABEL}function fQe(t,e){const s=e.groups.find(({modelIds:n})=>n.includes(t));return(s==null?void 0:s.group)!=null}const mQe=Pe(()=>me(()=>import("./d1iu8sbvybkq8a6n.js"),__vite__mapDeps([464,1,3,4])).then(t=>t.GizmoModelPicker)),pQe=Ne({k12AssistantName:{id:"threadHeaderDropdown.k12AssistantName",defaultMessage:"ChatGPT for Teachers"}}),gQe=t=>{"use forget";const e=F.c(2),{conversation:s,shouldShowFinchSection:n,preferredModelId:o}=t,a=uT(),i=fT(s,a,n,void 0,o);let l;return e[0]!==i?(l=r.jsx(dT,{sections:i}),e[0]=i,e[1]=l):l=e[1],l};function hQe({conversation:t,preferredModelId:e,headerTextClassName:s,chevronClassName:n}){var A,I,P;const o=G(),a=ne();Ko.useStoreWithInit({});const i=On(),l=tc(i),c=wc(i),u=J_(),d=ct(o),f=(I=(A=d==null?void 0:d.isK12)==null?void 0:A.call(d))!=null?I:!1,m=Sc(R=>R.shouldShowThreadModelPickerDot),p=Nte((P=Ate(o))==null?void 0:P.user,d),g=oe(()=>Cs(t).id),h=oe(()=>br(t)),{modelLabel:_}=W1(l?null:g,h),b=f?a.formatMessage(pQe.k12AssistantName):Ite,y=l?t2.SHORT_LABEL:dQe(g,h),S=!!ut()&&!(d!=null&&d.isFree()||d!=null&&d.isFreeWorkspace())||p,C=x.useMemo(()=>!ut()||!z_e(o,d,u,h)?!1:(K_e()&&!m&&tn.setThreadModelPickerAlertDot(!0),!0),[o,d,h,u,m]);if(zc())return r.jsx(uQe,{headerTextClassName:s});if(c)return r.jsx("div",{className:z("text-token-text-primary px-3",s!=null?s:"text-lg"),children:b});S&&(ur.markStart("ThreadModelSelector"),_!=null&&ur.markRendered("ThreadModelSelector"));const k=y===t2.TITLE?r.jsx(r.Fragment,{children:_}):r.jsxs(r.Fragment,{children:[b," ",r.jsx("span",{className:"text-token-text-tertiary",children:_})]}),E=r.jsx("div",{className:s,children:S&&_!=null?k:b}),M=!l&&fQe(g,h),N=r.jsxs(cQe,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":_?a.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:_}):a.formatMessage({id:"/D1dJC",defaultMessage:"Model selector"}),children:[M?r.jsx(It,{label:g,side:"right",children:E}):E,r.jsx(zo,{className:z(n!=null?n:"icon-sm","text-token-text-tertiary")}),m&&r.jsx(cD,{color:"blue",className:"ms-1"})]});return h===void 0?N:r.jsx(ia,{alignOffset:-4,size:"small",triggerButton:N,onOpenChange:R=>{B.logEvent("Toggle Model Switcher",{isOpen:R}),pt.logEvent("toggle_model_switcher",null,{isOpen:String(R)})},testId:"model-switcher-dropdown",children:r.jsx(gQe,{conversation:t,shouldShowFinchSection:C,preferredModelId:e})})}function Ypt(t){"use forget";var u;const e=F.c(12),{conversation:s,textClassName:n,chevronClassName:o}=t,a=G();let i;e[0]!==s?(i=()=>yc(s),e[0]=s,e[1]=i):i=e[1];const l=oe(i),{data:c}=vi(l);if(l==null||Hc(a,l)){const d=(u=c==null?void 0:c.gizmo.default_model)!=null?u:void 0;let f;return e[2]!==o||e[3]!==s||e[4]!==d||e[5]!==n?(f=r.jsx(hQe,{conversation:s,preferredModelId:d,headerTextClassName:n,chevronClassName:o}),e[2]=o,e[3]=s,e[4]=d,e[5]=n,e[6]=f):f=e[6],f}else{let d;return e[7]!==o||e[8]!==s||e[9]!==l||e[10]!==n?(d=r.jsx(mQe,{gizmoId:l,conversation:s,textClassName:n,chevronClassName:o}),e[7]=o,e[8]=s,e[9]=l,e[10]=n,e[11]=d):d=e[11],d}}async function _Qe(){try{return await(await Fc()).getHost().getClientCapabilityVersion()}catch(t){return}}async function xQe(){const t=await _Qe();return t!=null&&t>=2}function yQe(t){"use forget";var D,H,V,q,W,$,Z,K,Y,ae;const e=F.c(31),s=oe(lt.wantsHandleAgentRequest$),n=G(),{selectedSources:o}=Da(t),a=Bs(t),[i,l]=x.useState(!1),c=Qe(t,wQe),u=((D=c==null?void 0:c.metadata)==null?void 0:D.is_takeover_ended_message)===!0,d=Qe(t,SQe),f=Qe(t,vQe);let m;e[0]!==f?(m=ow(f)===aw.n7jupd_m&&((H=f.metadata)==null?void 0:H.kaur1br5_mode)===!0,e[0]=f,e[1]=m):m=e[1];const p=m,g=(V=f.metadata)==null?void 0:V.agent_preinitialize_request_id,h=((q=f.metadata)==null?void 0:q.n7jupd_local_safe_mode)===!0;let _;e[2]!==t||e[3]!==n?(_=()=>{var ee;const se=Et(n,t);return(ee=Sl(se))==null?void 0:ee.value},e[2]=t,e[3]=n,e[4]=_):_=e[4];const b=oe(_),y=b===Xt.STREAMING||b===Xt.REALTIME,v=c&&c.create_time&&d&&d.create_time&&c.create_time<d.create_time&&y,S=x.useRef(void 0),C=(f==null?void 0:f.author.role)===ot.Assistant?f:void 0,w=!!(C&&((($=(W=C.metadata)==null?void 0:W.finish_details)==null?void 0:$.type)==="interrupted"&&((K=(Z=C.metadata)==null?void 0:Z.finish_details)==null?void 0:K.reason)==="server_error"||((Y=C.clientMetadata)==null?void 0:Y.err)!=null||((ae=C.clientMetadata)==null?void 0:ae.errType)!=null)),k=(C==null?void 0:C.end_turn)===!0;let E,M;e[5]!==o||e[6]!==a||e[7]!==n||e[8]!==s?(E=()=>{if(!s)return;lt.wantsHandleAgentRequest$.set(!1);const se=lt.agentRequest;if(se&&a)e:switch(se){case"startTakeoverFromAgent":{fH({showPlaceholderMessage:!0});break e}case"endTakeoverFromAgent":{(async()=>{const ee=await wp(void 0,"side_chat","user",[Ye.Agent]);await mH(n,o,{startNewTurn:!0,skipTakeoverAfterAbort:async()=>await gle(a)!=="running"},ee)})();break e}case"stopAgent":{l(!0);break e}}},M=[s,o,n,a],e[5]=o,e[6]=a,e[7]=n,e[8]=s,e[9]=E,e[10]=M):(E=e[9],M=e[10]),x.useEffect(E,M);let N,A;e[11]!==t||e[12]!==v||e[13]!==i?(N=()=>{!i||!v||(l(!1),Px(t,void 0,{clientInitiated:!0,reason:"stop_button",isLastTurnAgent:!0}))},A=[i,v,t],e[11]=t,e[12]=v,e[13]=i,e[14]=N,e[15]=A):(N=e[14],A=e[15]),x.useEffect(N,A);const I=Qe(t,bQe);let P,R;e[16]!==t||e[17]!==p||e[18]!==g||e[19]!==h||e[20]!==u||e[21]!==a||e[22]!==I?(P=()=>{if(!p||!a)return;let se=!1;return(async()=>{if(!(await xQe()||!u)||se)return;l(!1);const he=kQe(t);mle(a,he,I,h,u,g)})(),()=>{se=!0}},R=[a,p,g,h,u,I,t,l],e[16]=t,e[17]=p,e[18]=g,e[19]=h,e[20]=u,e[21]=a,e[22]=I,e[23]=P,e[24]=R):(P=e[23],R=e[24]),x.useEffect(P,R);let O,L;e[25]!==b||e[26]!==w||e[27]!==k||e[28]!==a?(O=()=>{const se=S.current;S.current=b;const ee=se===Xt.REALTIME&&b!==Xt.REALTIME;a&&(k||ee)&&ple(a,w)},L=[a,b,S,k,w],e[25]=b,e[26]=w,e[27]=k,e[28]=a,e[29]=O,e[30]=L):(O=e[29],L=e[30]),x.useEffect(O,L)}function bQe(t){return Se.getUserMessages(t)}function vQe(t){return Se.getCurrentNode(t).message}function SQe(t){var e;return(e=Se.findNode(t,CQe))==null?void 0:e.message}function CQe(t){var e;return ow(t.message)===aw.n7jupd_m&&((e=t.message.metadata)==null?void 0:e.kaur1br5_mode)===!0}function wQe(t){return Se.getUserMessages(t).at(-1)}function kQe(t){if(!t)return!1;const e=Tt(t);if(!e)return!1;const s=Se.getConversationTurns(e).flatMap(a=>a.messages);let n=-1,o=-1;for(let a=s.length-1;a>=0;a--)if(s[a].author.role===ot.User)if(o===-1)o=a;else{n=a;break}if(n===-1||o===-1)return!1;for(let a=n+1;a<o;a++)if(s[a].recipient==="kaur1br5.suggest_agent")return!0;return!1}const Qpt=t=>{"use forget";const{clientThreadId:e}=t;return yQe(e),null};var Oi=(t=>(t.Running="running",t.Finished="finished",t.Error="error",t))(Oi||{});const Fv=(t,e)=>"".concat(t,":").concat(e),Kl=Zt((t,e)=>({toolStates:new Map,setToolState:(s,n,o,a)=>{const i=Fv(s,n),l=e().toolStates.get(i);t(c=>{var d;const u=new Map(c.toolStates);return u.set(i,{status:a,toolName:o,messageId:n,startTime:(d=l==null?void 0:l.startTime)!=null?d:Date.now()}),{toolStates:u}})},getToolState:(s,n)=>{const o=Fv(s,n);return e().toolStates.get(o)},removeToolState:(s,n)=>{const o=Fv(s,n);t(a=>{const i=new Map(a.toolStates);return i.delete(o),{toolStates:i}})},getRunningToolsForThread:s=>{const n=e().toolStates,o=[];for(const[a,i]of n.entries())a.startsWith("".concat(s,":"))&&i.status==="running"&&o.push(i);return o}})),TQe=Pe(()=>me(()=>import("./lmxrqj0hsuhj3cho.js"),__vite__mapDeps([465,1,3,4])).then(t=>t.SafeLinkWarningModal)),EQe=15e3,Gq="TimeoutError",MQe="opening link failed";function Jpt(t){const e=x.useRef(new Set),s=Qe(t,Se.getConversationTurns,{disablePerfDetector:!0});x.useEffect(()=>{bs()&&xk().catch(()=>{})},[]);const n=Qe(t,o=>Se.getRequestId(o));x.useEffect(()=>{if(!bs()||!s.length)return;s.flatMap(a=>a.messages).filter(a=>{var i;return!!a.recipient&&Fh(a.recipient)&&(a.status==="in_progress"||a.status==="finished_successfully")&&!e.current.has(a.id)&&((i=a.clientMetadata)==null?void 0:i.requestId)===n}).forEach(a=>{a.recipient&&Fh(a.recipient)&&Kl.getState().setToolState(t,a.id,a.recipient,Oi.Running)})},[t,s,n]),x.useEffect(()=>{if(bs())return Z9(lc,{completionFinished:async()=>{const o=Tt(t);if(!o)return;const a=Se.getConversationTurns(o);if(!a.length)return;const i=Se.getRequestId(o),l=a.flatMap(c=>c.messages).filter(c=>{var u;return!!c.recipient&&Fh(c.recipient)&&c.status==="finished_successfully"&&!e.current.has(c.id)&&((u=c.clientMetadata)==null?void 0:u.requestId)===i});if(l.length!==0)for(const c of l)e.current.add(c.id),await NQe(c,t)}})},[t,n])}async function NQe(t,e){const s=t.recipient;if(!s||!Fh(s))return;let n;if(t.content.content_type===bt.Text?n=t.content.parts&&t.content.parts.length?t.content.parts[0]:"":t.content.content_type===bt.Code?n=t.content.text:n="",!await AQe(s,n,e)){Kl.getState().setToolState(e,t.id,s,Oi.Finished);return}if(!await PQe(s,n,e)){Kl.getState().setToolState(e,t.id,s,Oi.Finished);return}if(!await OQe(s,n,e)){Kl.getState().setToolState(e,t.id,s,Oi.Finished);return}if(s===nL){Kl.getState().setToolState(e,t.id,s,Oi.Finished);return}const l=()=>{Kl.getState().setToolState(e,t.id,s,Oi.Error)},c=()=>{l(),M5(e,s,"Tool host unavailable","host_unavailable")};let u;try{u=(await Fc()).getHost()}catch(m){c();return}if(!u||!u.callLocalTool){c();return}let d,f;try{d=await DQe(u.callLocalTool(s,n),EQe)}catch(m){f=m.name===Gq?"timeout":"exception",l(),M5(e,s,f,f);return}Kl.getState().setToolState(e,t.id,s,Oi.Finished);for(const m of d)await Vq(e,m.author,m.message)}async function Vq(t,e,s){const n={id:Ds(),author:{role:ot.Tool,name:e},create_time:Date.now()/1e3,content:{content_type:bt.Text,parts:[s]},recipient:"all",status:"finished_successfully",weight:0};try{const o=Io();await Ao({conversation:Et(o,t),promptMessage:n,eventSource:"keyboard"})}catch(o){nt(t,a=>{as.appendMessage(a,n)})}}function M5(t,e,s,n){const o={id:Ds(),author:{role:ot.Assistant,name:e},create_time:Date.now()/1e3,content:{content_type:bt.Text,parts:["Error: "+s]},status:"finished_successfully",weight:0,metadata:{local_function_error:!0,local_function_error_type:n}};nt(t,a=>{as.appendMessage(a,o)})}function AQe(t,e,s){return t!=="kaur1br5.navigate_current_tab"?Promise.resolve(!0):S3(t,e,s,n=>{const o=jQe(n);return o?[o]:void 0})}function IQe(t){return Aw(t)&&(t.url===void 0||typeof t.url=="string")}function jQe(t){try{const e=JSON.parse(t||"{}");if(IQe(e))return e.url}catch(e){}}function PQe(t,e,s){return t!=="kaur1br5.open_tabs"?Promise.resolve(!0):S3(t,e,s,RQe)}function RQe(t){try{const e=JSON.parse(t||"{}"),s=Aw(e)?e:{};if(Array.isArray(s.urls))return s.urls.filter(n=>typeof n=="string")}catch(e){}}function OQe(t,e,s){return t!=="kaur1br5.add_bookmark"?Promise.resolve(!0):S3(t,e,s,LQe)}function LQe(t){try{const e=JSON.parse(t||"{}"),s=Aw(e)?e:{};if(typeof s.url=="string")return[s.url]}catch(e){}}function DQe(t,e){return new Promise((s,n)=>{const o=setTimeout(()=>{const a=new Error("Local function invocation timed out");a.name=Gq,n(a)},e);t.then(a=>{clearTimeout(o),s(a)}).catch(a=>{clearTimeout(o),n(a)})})}async function Bv(t,e,s,n){const o=await FQe(t,n);return o||await Vq(e,s,MQe),o}function FQe(t,e){return new Promise(s=>{let n=!1;const o=a=>{n||(n=!0,s(a))};mt(t,TQe,{urls:e,suppressNavigation:!0,onAction:a=>o(a==="open"),onActionAborted:()=>o(!1)})})}async function S3(t,e,s,n){const o=Io();try{const a=n(e);if(!a||a.length===0)return Bv(o,s,t,e);const i=a.filter(c=>!BQe(c));if(i.length===0)return!0;const l=await $Ne(o,s,i);return l.length===0?!0:Bv(o,s,t,l.length===1?l[0]:l)}catch(a){return Bv(o,s,t,e)}}function BQe(t){try{return new URL(t).protocol.toLowerCase()==="atlas:"}catch(e){return!1}}function Zpt(){const t=G(),e=D_();x.useEffect(()=>{bs()&&e&&jte.set(t,!1)},[t,e])}const N5="hazelnuts",Xpt=({clientThreadId:t})=>{const[e,s]=Yn(),{data:n,isLoading:o}=d0({scope:"personal"});x.useEffect(()=>{const a=e.get(N5);if(!a||o||!n)return;const i=a.split(",").map(u=>u.trim()).filter(Boolean),l=new Set(n.hazelnuts.map(u=>u.id)),c=i.filter(u=>l.has(u));c.length!==0&&nt(t,u=>{var m;const d=(m=u.selectedHazelnuts)!=null?m:[],f=new Set(d);c.forEach(p=>f.add(p)),u.selectedHazelnuts=Array.from(f)}),s(u=>(u.delete(N5),u),{replace:!0})},[t,n,o,e,s])},egt=t=>{"use forget";var v;const e=F.c(23);let s,n,o,a,i;e[0]!==t?(v=t,{className:n,children:s,isScrolledFromTopEdge$:a,isScrolledFromBottomEdge$:o}=v,i=De(v,["className","children","isScrolledFromTopEdge$","isScrolledFromBottomEdge$"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=i):(s=e[1],n=e[2],o=e[3],a=e[4],i=e[5]);let l;e[6]===Symbol.for("react.memo_cache_sentinel")?(l=jt(),e[6]=l):l=e[6];const c=l;let u;e[7]!==a?(u=()=>{var S;return(S=a==null?void 0:a(c))!=null?S:!1},e[7]=a,e[8]=u):u=e[8];const d=oe(u);let f;e[9]!==o?(f=()=>{var S;return(S=o==null?void 0:o(c))!=null?S:!1},e[9]=o,e[10]=f):f=e[10];const m=oe(f),p=x.useDeferredValue(d),g=x.useDeferredValue(m);let h;e[11]!==n?(h=z("group/scrollport",n),e[11]=n,e[12]=h):h=e[12];let _;e[13]!==p?(_=Gm(p),e[13]=p,e[14]=_):_=e[14];let b;e[15]!==g?(b=Gm(g),e[15]=g,e[16]=b):b=e[16];let y;return e[17]!==s||e[18]!==i||e[19]!==h||e[20]!==_||e[21]!==b?(y=r.jsx("nav",U(T({className:h},i),{"data-scrolled-from-top":_,"data-scrolled-from-end":b,children:s})),e[17]=s,e[18]=i,e[19]=h,e[20]=_,e[21]=b,e[22]=y):y=e[22],y},UQe=Pe(()=>me(()=>Promise.resolve().then(()=>PB),void 0).then(t=>t.AdminInviteModal));function tgt(){"use forget";const t=F.c(11),e=G(),s=fs();let n;t[0]!==e||t[1]!==s?(n=()=>{s&&(B.logEvent("Account: Invite Member Button Clicked",{eventSource:"mouse",location:"sidebar, below user menu"}),xr(e).logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"sidebar, below user menu",text:"AddTeammates",step:"OpenModal"}),mt(e,UQe,{workspace:s}))},t[0]=e,t[1]=s,t[2]=n):n=t[2];const o=n;let a;t[3]!==o?(a=d=>{(d.key==="Enter"||d.key===" ")&&o()},t[3]=o,t[4]=a):a=t[4];let i,l,c;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=z("border-token-interactive-border-secondary-default flex w-full items-center justify-center gap-1","bg-token-main-surface-primary rounded-full border px-3 py-2","text-xs font-medium","hover:bg-token-interactive-bg-secondary-hover","focus-visible:ring-2 focus-visible:ring-[#5856D6] focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150 motion-safe:ease-out"),l=r.jsx(jD,{className:"icon-sm","aria-hidden":"true"}),c=r.jsx("span",{children:r.jsx(j,{id:"inviteMemberButton.inviteMemberSidebarFooterCap",defaultMessage:"Invite team members"})}),t[5]=i,t[6]=l,t[7]=c):(i=t[5],l=t[6],c=t[7]);let u;return t[8]!==o||t[9]!==a?(u=r.jsx("div",{className:"px-3.5 pt-1 pb-3",children:r.jsxs("button",{type:"button",onClick:o,onKeyDown:a,className:i,children:[l,c]})}),t[8]=o,t[9]=a,t[10]=u):u=t[10],u}const $Qe=()=>dt({queryKey:["userSurvey"],queryFn:()=>de.safeGet("/user_surveys/active")}),HQe=()=>{const t=Gt();return ds({mutationFn:({surveyId:e,reason:s})=>de.safePost("/user_surveys/{survey_id}/complete",{parameters:{path:{survey_id:e}},requestBody:{reason:s}}),onSuccess:()=>{t.invalidateQueries({queryKey:["userSurvey"]})}})};function sgt(){const t=ne(),[e,s]=x.useState(!1),{mutate:n}=HQe(),{data:o}=$Qe(),a=o==null?void 0:o.survey,i=c=>{s(!0),a!=null&&n({surveyId:a.id,reason:c})};return!e&&a!=null?r.jsx("div",{className:"bg-brand-blue-800 mx-1.5 rounded-lg",children:r.jsxs("div",{className:"flex flex-col gap-3 p-3 text-sm text-white",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"font-bold text-wrap",children:r.jsx(j,{id:"navigation.survey.title",defaultMessage:"We are asking a small group of people for their opinion"})}),r.jsx("button",{className:"text-white/25 hover:text-white/40",onClick:()=>i("dismissed"),"aria-label":t.formatMessage({id:"navigation.survey.dismiss",defaultMessage:"Dismiss survey"}),children:r.jsx(Rn,{className:"icon"})})]}),r.jsx("div",{className:"text-wrap",children:r.jsx(j,{id:"navigation.survey.description",defaultMessage:"Could you spare few minutes to take a short survey?"})}),r.jsxs("a",{href:a.link,target:"_blank",className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-sm bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:()=>i("link_clicked"),children:[r.jsx(wr,{className:"icon-sm"}),r.jsx(j,{id:"navigation.survey.takeSurvey",defaultMessage:"Take survey"})]})]})}):null}function GQe(t,e){return"/checkout/".concat(t,"/").concat(e)}class VQe{static async getCheckoutLink(e,s){return de.safePost("/payments/checkout",{requestBody:e,additionalHeaders:hk(null,null,null,s!=null&&s.skipSentinelCheckout?void 0:await tL("chatgpt_checkout",{sdkVariant:s!=null&&s.fromiOSWebview?"openai":"chatgpt"}).catch(n=>{Ge.addError(n)}))})}static async fetchExistingCheckoutSession(e,s){return await de.safeGet("/payments/checkout/{processor_entity}/{checkout_session_id}",{parameters:{path:{processor_entity:e,checkout_session_id:s}}})}}const zQe="3950229590",WQe="enabled_custom_checkout_for_plus",qQe="enabled_custom_checkout_for_go",KQe="enabled_custom_checkout_for_pro",YQe="enabled_custom_checkout_for_team",QQe="is_checkout_redesign",JQe="checkoutRedesignExposureLogged",ZQe="checkoutPromoCode",XQe="checkoutPromoCampaignId",A5="chatgpt_web_checkout_navigate_to_checkout",eJe="chatgpt_web_checkout_prepare_checkout_session";function zq(t,{shouldLogExposure:e=!0}={}){return Xe(t,zQe,{disableExposureLog:!e})}function tJe({ctx:t,shouldLogExposure:e=!0}){return zq(t,{shouldLogExposure:e}).get(QQe,!1)}function sJe(t){switch(t){case $g.PLUS:return WQe;case $g.GO:return qQe;case $g.PRO:return KQe;case $g.SELF_SERVE_BUSINESS:return YQe;default:return null}}function nJe(t,e){if(Ee(t,"3990391703"))return"redirect";const s=sJe(e);return s==null?"redirect":zq(t).get(s,!1)?"custom":"redirect"}function ngt(){"use forget";const t=F.c(8),e=yt(),s=G(),n=oJe;let o;t[0]!==s?(o=async function(d,f){var m;return d.checkout_ui_mode=(m=d.checkout_ui_mode)!=null?m:(f==null?void 0:f.fromiOSWebview)===!0?"redirect":nJe(s,d.plan_name),wa(s,{eventName:eJe,metadata:{ui_mode:d.checkout_ui_mode}}),await VQe.getCheckoutLink(d,{skipSentinelCheckout:f==null?void 0:f.skipSentinelCheckout,fromiOSWebview:f==null?void 0:f.fromiOSWebview})},t[0]=s,t[1]=o):o=t[1];const a=o;let i;t[2]!==s||t[3]!==e?(i=async function(d,f){var m;if("tag"in d){wa(s,{eventName:A5,metadata:{tag:d.tag}}),await nM(s);e:switch(d.tag){case"hosted_checkout_session":case"redirect_to_portal":{window.location.href=d.url;break e}case"custom_checkout_session":{const p=d.processor_entity,g=d.checkout_session_id,{promoCode:h,promoCampaignId:_}=n(f==null?void 0:f.checkoutPayload);await e({pathname:GQe(p,g),search:(m=f==null?void 0:f.searchParams)!=null?m:"",hash:""},{state:U(T(T(T({},f==null?void 0:f.state),h?{[ZQe]:h}:{}),_?{[XQe]:_}:{}),{[JQe]:!0})})}}}else if(d.url)wa(s,{eventName:A5,metadata:{tag:"missing_tag"}}),await nM(s),window.location.href=d.url;else throw new Error("Received invalid response from /checkout")},t[2]=s,t[3]=e,t[4]=i):i=t[4];const l=i;let c;return t[5]!==l||t[6]!==a?(c={prepareCheckoutSession:a,navigateToCheckout:l},t[5]=l,t[6]=a,t[7]=c):c=t[7],c}function oJe(t){var l,c,u;const e=t==null?void 0:t.discount_code,s=e&&"promo_code"in e?e.promo_code:void 0,n=e&&"referral_code"in e?e.referral_code:void 0,o=(l=t==null?void 0:t.promo_code)!=null?l:void 0,a=t==null?void 0:t.promo_campaign,i=a&&typeof a=="object"?a.promo_campaign_id:typeof a=="string"?a:void 0;return{promoCode:(u=(c=s!=null?s:n)!=null?c:o)!=null?u:void 0,promoCampaignId:i}}const aJe=({onDismiss:t})=>{const e=ne();x.useEffect(()=>{pt.logEvent("chatgpt_web_mobile_app_upsell_banner_shown"),B.logEvent("Mobile App Upsell Banner Shown")},[]);const s=()=>{localStorage.setItem(Be.HasDismissedMobileAppUpsellBanner,"true"),t==null||t(),pt.logEvent("chatgpt_web_mobile_app_upsell_banner_dismissed"),B.logEvent("Mobile App Upsell Banner Dismissed")},n=()=>{window.open("https://apps.apple.com/us/app/chatgpt/id6448311069","_blank"),pt.logEvent("chatgpt_web_mobile_app_upsell_banner_clicked"),B.logEvent("Mobile App Upsell Banner Clicked")};return r.jsx(e$,{title:e.formatMessage({id:"mobileTopBanner.title",defaultMessage:"ChatGPT"}),content:e.formatMessage({id:"mobileTopBanner.content",defaultMessage:"The official app by OpenAI"}),secondaryCtaText:e.formatMessage({id:"mobileTopBanner.secondaryCtaText",defaultMessage:"Open"}),onDismiss:s,onSecondaryCtaClick:n})};function rJe(t){const e=encodeURIComponent(t);return"https://wa.me/18002428478?text=".concat(e)}function iJe({onDismiss:t}){const e=ne(),s=e.formatMessage({id:"moodengUpsellBanner.prefilledMessage",defaultMessage:"Hey ChatGPT, can you tell me a little bit more about what you can do?"}),n=()=>{B.logEventWithStatsig("Moodeng Upsell Banner Clicked","chatgpt_web_moodeng_upsell_banner_clicked"),window.open(rJe(s),"_blank")},o=()=>{localStorage.setItem(Be.HasDismissedMoodengUpsellBanner,"true"),t==null||t(),B.logEventWithStatsig("Moodeng Upsell Banner Dismissed","chatgpt_web_moodeng_upsell_banner_dismissed")};return x.useEffect(()=>{B.logEventWithStatsig("Moodeng Upsell Banner Shown","chatgpt_web_moodeng_upsell_banner_shown")},[]),r.jsx(e$,{title:e.formatMessage({id:"moodengUpsellBanner.title",defaultMessage:"Chat on WhatsApp"}),content:e.formatMessage({id:"moodengUpsellBanner.content",defaultMessage:"Supported by OpenAI"}),secondaryCtaText:e.formatMessage({id:"moodengUpsellBanner.secondaryCtaText",defaultMessage:"Try Now"}),onSecondaryCtaClick:n,onDismiss:o})}function ogt(){var b;const t=G(),e=Hs(),s=Pa(),n=Pte(),[o,a]=x.useState(!1),[i,l]=x.useState(()=>localStorage.getItem(Be.HasDismissedMobileAppUpsellBanner)==="true"),[c,u]=x.useState(()=>localStorage.getItem(Be.HasDismissedMoodengUpsellBanner)==="true"),d=Xe(t,"3927927759"),f=e.pathname.split("/").filter(Boolean),m=f.length===3&&f[0]==="checkout";x.useEffect(()=>{if(!(typeof window>"u"))try{const y=sessionStorage.getItem(i5e);a(!!y)}catch(y){a(!1)}},[e.search]);const p=x.useMemo(()=>(()=>{if(!e.search)return!1;try{return!!new URLSearchParams(e.search).get(SG)}catch(S){return!1}})()||o?!0:!m||!tJe({ctx:t,shouldLogExposure:!1})?!1:Xe(t,"3950229590").get("suppress_native_download_banner",!1),[t,o,m,e.search]),h=x.useMemo(()=>[{Component:()=>r.jsx(aJe,{onDismiss:()=>{l(!0)}}),isVisible:()=>s&&n&&!i&&!p&&d.get("enable_mobile_app_upsell_banner",!1)},{Component:()=>r.jsx(iJe,{onDismiss:()=>{u(!0)}}),isVisible:()=>s&&!p&&!c&&d.get("enable_moodeng_upsell_banner",!1)}],[s,n,i,c,p,d]).find(y=>y.isVisible()),_=(b=h==null?void 0:h.Component)!=null?b:(()=>null);return r.jsx(_,{})}function agt(t){"use forget";const e=F.c(2);if(_W(t)&&t){let n;return e[0]!==t?(n=r.jsx(hW,{threadId:t}),e[0]=t,e[1]=n):n=e[1],n}return null}function rgt(t){"use forget";const e=F.c(8),{clientThreadId:s,messageId:n}=t;let o,a;e[0]!==s||e[1]!==n?(o=()=>{tn.closeSharingModal(),nt(s,u=>{n!=null?(u.scrollToMessageId=n,u.scrollToMessageIsAssistant=!0):(u.scrollToMessageId="finalAgentTurn",u.scrollToMessageIsAssistant=void 0),Rte("messageId")})},a=[s,n],e[0]=s,e[1]=n,e[2]=o,e[3]=a):(o=e[2],a=e[3]),x.useEffect(o,a);const i=Gt();let l,c;e[4]!==i||e[5]!==s?(l=()=>(To.retainThread(s),()=>{setTimeout(()=>{i.invalidateQueries(Up({clientThreadId:s}))},0),To.releaseThread(s)}),c=[s,i],e[4]=i,e[5]=s,e[6]=l,e[7]=c):(l=e[6],c=e[7]),x.useEffect(l,c)}function igt(t,e){"use forget";const s=F.c(4),n=e===void 0?!0:e,o=Q_();let a;s[0]!==o?(a=o?{kind:Pt.GizmoInteraction,gizmo_id:o}:{kind:Pt.PrimaryAssistant},s[0]=o,s[1]=a):a=s[1];const i=a;let l;s[2]!==n?(l={shouldScrollToBottom:n},s[2]=n,s[3]=l):l=s[3],vH(t,i,l)}function lgt(t){"use forget";var S;const e=F.c(26),{clientThreadId:s}=t,n=G(),o=Hs(),a=yt(),[i,l]=Qe(s,lJe),c=Bs(s);let u;e[0]!==l?(u=l!=null&&jn(l),e[0]=l,e[1]=u):u=e[1];const d=u,{data:f}=u6(d?l:void 0),m=f==null?void 0:f.gizmo;let p;e[2]!==n?(p=(S=ct(n))==null?void 0:S.normalizedAccountUserId,e[2]=n,e[3]=p):p=e[3];const g=p;let h;e[4]!==o.pathname?(h=o.pathname.includes("/shared/"),e[4]=o.pathname,e[5]=h):h=e[5];const _=h;let b;e[6]!==g||e[7]!==_||e[8]!==d||e[9]!==o.pathname||e[10]!==o.search||e[11]!==a||e[12]!==m||e[13]!==c||e[14]!==i?(b=()=>{if(!d||_||!c||!m||(i==null?void 0:i.id)==null||g==null||i.id===g)return;const C=ya(c,{project:m,ownerUserId:i.id,accountUserId:g}),w="".concat(o.pathname).concat(o.search);C!==w&&a(C,{replace:!0})},e[6]=g,e[7]=_,e[8]=d,e[9]=o.pathname,e[10]=o.search,e[11]=a,e[12]=m,e[13]=c,e[14]=i,e[15]=b):b=e[15];const y=i==null?void 0:i.id;let v;return e[16]!==g||e[17]!==_||e[18]!==d||e[19]!==o.pathname||e[20]!==o.search||e[21]!==a||e[22]!==m||e[23]!==c||e[24]!==y?(v=[g,_,d,o.pathname,o.search,a,m,c,y],e[16]=g,e[17]=_,e[18]=d,e[19]=o.pathname,e[20]=o.search,e[21]=a,e[22]=m,e[23]=c,e[24]=y,e[25]=v):v=e[25],x.useEffect(b,v),null}function lJe(t){return[t==null?void 0:t.sharedProjectConversationOwner,Se.getGizmoId(t)]}function cgt(){"use forget";const t=F.c(6),e=G();let s;t[0]!==e?(s=ut(),t[0]=e,t[1]=s):s=t[1];const n=s;let o,a;t[2]!==e||t[3]!==n?(o=()=>{if(!n)return;const i=En.getCookie(Mn.AuthSessionLoggingId);if(i==null)return;const{flowType:l,connectionType:c}=cJe(e);B.logStructuredEvent(Ote,{authSessionLoggingId:i,flowType:l,connectionType:c}),En.deleteCookie(Mn.AuthSessionLoggingId)},a=[n,e],t[2]=e,t[3]=n,t[4]=o,t[5]=a):(o=t[4],a=t[5]),x.useEffect(o,a)}function cJe(t){const{isSignup:e,connectionType:s}=eO(t);return{flowType:e?oM.ACCESS_FLOW_TYPE_SIGNUP:oM.ACCESS_FLOW_TYPE_LOGIN,connectionType:uJe(s)}}function uJe(t){switch(t){case Su.Google:return Bl.ACCESS_FLOW_CONNECTION_TYPE_GOOGLE;case Su.Password:return Bl.ACCESS_FLOW_CONNECTION_TYPE_PASSWORD;case Su.Apple:return Bl.ACCESS_FLOW_CONNECTION_TYPE_APPLE;case Su.Microsoft:return Bl.ACCESS_FLOW_CONNECTION_TYPE_MICROSOFT;case Su.Samlp:return Bl.ACCESS_FLOW_CONNECTION_TYPE_SAMLP;case Su.Oidc:return Bl.ACCESS_FLOW_CONNECTION_TYPE_OIDC;default:return Bl.ACCESS_FLOW_CONNECTION_TYPE_UNSPECIFIED}}function ugt(){"use forget";const t=F.c(12),e=G();let s;t[0]!==e?(s=ut(),t[0]=e,t[1]=s):s=t[1];const n=s,o=xs(),{accountInfo:a}=dJe();let i;t[2]!==(a==null?void 0:a.isOptedOut)||t[3]!==e||t[4]!==n||t[5]!==o?(i=()=>{var d;if(!o||!n)return;if(!o.email&&!o.phone_number){Ge.addError(new Error("User should have either email or phone number, but none are present: ".concat(JSON.stringify(o))));return}if(a!=null&&a.isOptedOut)return;const c=o.email?{email:o.email}:{phoneNumber:(d=o.phone_number)!=null?d:""},u={user:U(T({name:o.name},c),{picture:o.picture,connectionType:eO(e).connectionType,timestamp:Date.now()}),isOptedOut:!1};Wq(u)},t[2]=a==null?void 0:a.isOptedOut,t[3]=e,t[4]=n,t[5]=o,t[6]=i):i=t[6];let l;t[7]!==a||t[8]!==e||t[9]!==n||t[10]!==o?(l=[o,n,a,e],t[7]=a,t[8]=e,t[9]=n,t[10]=o,t[11]=l):l=t[11],x.useEffect(i,l)}function dJe(){"use no forget";const[t,e]=x.useState(()=>En.getCookie(Mn.AccountInfo)),s=x.useMemo(()=>{if(!t)return null;try{return JSON.parse(t)}catch(o){return null}},[t]),n=x.useCallback(()=>{s&&(s.isOptedOut=!0,s.user=void 0,Wq(s),e(void 0))},[s]);return{accountInfo:s,removeAccount:n}}function Wq(t){En.setCookie(Mn.AccountInfo,JSON.stringify(t),{maxAge:720*60*60})}const fJe=["recent","images","bootstrap"],mJe=10,pJe=25,gJe=20,hJe=(t,e)=>({queryKey:["recent","images",t,e],initialPageParam:null,staleTime:120*1e3,queryFn:({pageParam:s})=>{const o=xr(jt()).checkGate("1057463568"),a=o?"/my/recent/v2/image_gen":"/my/recent/image_gen",i=s==null?t?mJe:pJe:gJe,l=T({limit:i,after:s},o?{retrieve_archived:e||void 0}:{include_archived:e||void 0});return de.safeGet(a,{parameters:{query:l}})},getNextPageParam:({cursor:s})=>s}),qq=t=>({queryKey:fJe,refetchOnMount:"always",enabled:()=>ut(),queryFn:()=>de.safeGet("/images/bootstrap",{})}),dgt=t=>t.fetchQuery(qq()),fgt=()=>{"use forget";const t=F.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=qq(),t[0]=e):e=t[0],dt(e)};function I5({queryClient:t,includeArchived:e,isMobile:s,imageId:n,operation:o}){t.setQueryData(["recent","images",s,e],a=>a&&U(T({},a),{pages:a.pages.map(i=>{let l=i.items.map(c=>c.id===n?U(T({},c),{is_archived:o==="archive"}):c);return o==="archive"&&!e&&(l=l.filter(c=>c.id!==n)),U(T({},i),{items:l})})}))}const mgt=()=>{"use forget";const t=F.c(7),e=G(),s=!bl();let n;t[0]!==e?(n=ln(e),t[0]=e,t[1]=n):n=t[1];const o=n;let a;t[2]!==s||t[3]!==o?(a={mutationFn:_Je,onMutate:async c=>{const{imageId:u,operation:d}=c;await Promise.all([o.cancelQueries({queryKey:["recent","images",s,!1]}),o.cancelQueries({queryKey:["recent","images",s,!0]})]);const f=o.getQueryData(["recent","images",s,!1]),m=o.getQueryData(["recent","images",s,!0]);return I5({queryClient:o,includeArchived:!1,isMobile:s,imageId:u,operation:d}),I5({queryClient:o,includeArchived:!0,isMobile:s,imageId:u,operation:d}),{recentImagesUnarchived:f,recentImagesArchived:m}},onError:(c,u,d)=>{const{recentImagesUnarchived:f,recentImagesArchived:m}=d!=null?d:{};o.setQueryData(["recent","images",s,!1],f),o.setQueryData(["recent","images",s,!0],m)},onSuccess:(c,u)=>{const{operation:d}=u;d==="unarchive"&&o.invalidateQueries({queryKey:["recent","images",s,!1]})}},t[2]=s,t[3]=o,t[4]=a):a=t[4];const i=ds(a);let l;return t[5]!==i?(l={archiveMutation:i},t[5]=i,t[6]=l):l=t[6],l},pgt=(t,e)=>{"use forget";var y;const s=F.c(13),n=t===void 0?!1:t,o=e===void 0?"all":e,a=!bl(),i=n||o!=="unarchived";let l;s[0]!==a||s[1]!==i?(l=hJe(a,i),s[0]=a,s[1]=i,s[2]=l):l=s[2];const c=l,{data:u,refetch:d,fetchNextPage:f,hasNextPage:m,isLoading:p,isFetchingNextPage:g}=ip(c);let h;if(s[3]!==(u==null?void 0:u.pages)||s[4]!==o){e:{const v=(y=u==null?void 0:u.pages.flatMap(xJe).map(yJe))!=null?y:[];if(o==="archived"){h=v.filter(bJe);break e}if(o==="unarchived"){h=v.filter(vJe);break e}h=v}s[3]=u==null?void 0:u.pages,s[4]=o,s[5]=h}else h=s[5];const _=h;let b;return s[6]!==f||s[7]!==m||s[8]!==_||s[9]!==g||s[10]!==p||s[11]!==d?(b={refetch:d,images:_,isLoading:p,isFetchingNextPage:g,hasNextPage:m,fetchNextPage:f},s[6]=f,s[7]=m,s[8]=_,s[9]=g,s[10]=p,s[11]=d,s[12]=b):b=s[12],b};function _Je(t){const{imageId:e,operation:s}=t;return de.safePatch("/my/image/{gen_id}/".concat(s),{parameters:{path:{gen_id:e}}})}function xJe(t){return t.items}function yJe(t){var e,s,n,o,a,i,l,c;return U(T({},t),{archived:(e=t.is_archived)!=null?e:!1,id:t.id,messageId:(s=t.message_id)!=null?s:null,transformationId:(n=t.transformation_id)!=null?n:null,assetPointer:(o=t.asset_pointer)!=null?o:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0,conversationId:(a=t.conversation_id)!=null?a:void 0,thumbnail:(c=(l=(i=t.encodings)==null?void 0:i.thumbnail)==null?void 0:l.path)!=null?c:null})}function bJe(t){return t.archived}function vJe(t){return!t.archived}function ggt(t,e,s,n){"use no forget";return x.useMemo(()=>e?Et(t,e,{urlGizmoId:s}):dw(t,T({urlGizmoId:s},n)),[t,e,s,n])}function hgt(t,e,s){var a;if(((a=t.getQueryState(e))==null?void 0:a.status)==="success")return s(),()=>{};const n=Lte(e),o=t.getQueryCache().subscribe(i=>{i.query.queryHash===n&&i.query.state.status==="success"&&(s(),o())});return o}export{ist as $,Vse as A,got as A$,Jse as A0,TZe as A1,yft as A2,xft as A3,ene as A4,dy as A5,AO as A6,xx as A7,Qw as A8,Jw as A9,pOe as AA,But as AB,_Oe as AC,wDe as AD,NJe as AE,qte as AF,AJe as AG,Wte as AH,VF as AI,eXe as AJ,IJe as AK,Kte as AL,EJe as AM,Vte as AN,MJe as AO,zte as AP,zot as AQ,fo as AR,uat as AS,sl as AT,fat as AU,Do as AV,Hke as AW,BSe as AX,dot as AY,Yr as AZ,pot as A_,R7 as Aa,Qut as Ab,hH as Ac,Eje as Ad,nst as Ae,U4 as Af,IOe as Ag,GOe as Ah,vct as Ai,aV as Aj,JV as Ak,ak as Al,kOe as Am,uOe as An,hOe as Ao,VV as Ap,Tle as Aq,zV as Ar,hct as As,_ct as At,xct as Au,yct as Av,gct as Aw,Cct as Ax,vh as Ay,gOe as Az,qr as B,cE as B$,Ynt as B0,fot as B1,mot as B2,H2 as B3,Nc as B4,cat as B5,Uge as B6,XTe as B7,hot as B8,Att as B9,ZLe as BA,zTe as BB,VO as BC,sI as BD,pS as BE,Lit as BF,i5e as BG,Yp as BH,aRe as BI,oRe as BJ,nRe as BK,klt as BL,wlt as BM,Mlt as BN,MI as BO,l5e as BP,gst as BQ,Rit as BR,Omt as BS,yEe as BT,Zge as BU,Got as BV,k4 as BW,Lat as BX,YMe as BY,hye as BZ,FW as B_,Xat as Ba,_ot as Bb,Ntt as Bc,Qnt as Bd,NU as Be,SU as Bf,O2e as Bg,wge as Bh,Mtt as Bi,qm as Bj,Nx as Bk,tet as Bl,vle as Bm,vf as Bn,XXe as Bo,eet as Bp,set as Bq,ZXe as Br,JXe as Bs,QV as Bt,N2 as Bu,so as Bv,Klt as Bw,Ylt as Bx,Qlt as By,cOe as Bz,pc as C,qZe as C$,uE as C0,HH as C1,dE as C2,z3e as C3,Z$ as C4,Z2 as C5,eH as C6,Pat as C7,kCe as C8,sbe as C9,nG as CA,Moe as CB,FXe as CC,LXe as CD,bz as CE,fv as CF,Ac as CG,uV as CH,ru as CI,m0 as CJ,zZe as CK,VZe as CL,tT as CM,Vye as CN,rnt as CO,mae as CP,Cdt as CQ,wdt as CR,rW as CS,aW as CT,cce as CU,Tlt as CV,mT as CW,Lst as CX,tk as CY,KZe as CZ,foe as C_,_N as Ca,hCe as Cb,UT as Cc,qpe as Cd,Sot as Ce,Uat as Cf,Xet as Cg,ett as Ch,rtt as Ci,Ri as Cj,Mot as Ck,Not as Cl,hne as Cm,yne as Cn,xM as Co,xne as Cp,_ne as Cq,mne as Cr,pne as Cs,gne as Ct,UJe as Cu,tot as Cv,eot as Cw,Kct as Cx,$Je as Cy,cXe as Cz,vZe as D,tce as D$,YZe as D0,QZe as D1,Kft as D2,ID as D3,Jft as D4,VHe as D5,sm as D6,WW as D7,bk as D8,Zft as D9,XM as DA,ZM as DB,Hde as DC,oV as DD,brt as DE,vrt as DF,Srt as DG,yrt as DH,Rve as DI,Ove as DJ,U_e as DK,VN as DL,cEe as DM,lEe as DN,BUe as DO,FUe as DP,DUe as DQ,H2e as DR,LUe as DS,OUe as DT,WVe as DU,Uh as DV,J0e as DW,ace as DX,oce as DY,nce as DZ,sce as D_,Qft as Da,Xft as Db,Yft as Dc,Tit as Dd,zdt as De,Wdt as Df,Vdt as Dg,WHe as Dh,aze as Di,vW as Dj,JBe as Dk,N8 as Dl,kit as Dm,_L as Dn,Cet as Do,Eet as Dp,ket as Dq,bo as Dr,wL as Ds,vL as Dt,v2 as Du,Tet as Dv,Em as Dw,_fe as Dx,wet as Dy,dfe as Dz,Jc as E,r_ as E$,ece as E0,Xle as E1,Zle as E2,FVe as E3,c6e as E4,rze as E5,vhe as E6,bve as E7,rIe as E8,FWe as E9,att as EA,ott as EB,ntt as EC,_m as ED,b$ as EE,dTe as EF,uYe as EG,Lft as EH,o$ as EI,lge as EJ,P3e as EK,iot as EL,rot as EM,DXe as EN,qCe as EO,nat as EP,rat as EQ,iat as ER,lat as ES,Qot as ET,Jot as EU,Zot as EV,Xot as EW,eat as EX,tat as EY,sat as EZ,mlt as E_,x5 as Ea,Q0e as Eb,XLe as Ec,k6e as Ed,iS as Ee,uH as Ef,B_e as Eg,qYe as Eh,Uj as Ei,uEe as Ej,cLe as Ek,eHe as El,Bd as Em,Oxe as En,F_e as Eo,zVe as Ep,jWe as Eq,Iye as Er,Bj as Es,RKe as Et,zE as Eu,Zqe as Ev,oze as Ew,nze as Ex,xO as Ey,Zat as Ez,Hot as F,oat as F0,aat as F1,Uet as F2,Flt as F3,hgt as F4,kb as F5,gXe as F6,zie as F7,Pxe as F8,PB as F9,Mat as Fa,X7e as Fb,cmt as Fc,Umt as Fd,xf as G,yZe as H,xZe as I,CXe as J,Ixe as K,bZe as L,m_e as M,qp as N,age as O,ur as P,utt as Q,_Ze as R,Btt as S,Kot as T,Ott as U,jJe as V,CZe as W,Jst as X,Xc as Y,Wp as Z,btt as _,vH as a,ITe as a$,Dtt as a0,rst as a1,Ptt as a2,jxe as a3,tB as a4,mhe as a5,ND as a6,_he as a7,wD as a8,Lxe as a9,J$ as aA,Jme as aB,Er as aC,_at as aD,$ot as aE,xat as aF,Vat as aG,A3e as aH,Hat as aI,Gat as aJ,gat as aK,Cat as aL,Tat as aM,Eat as aN,hat as aO,w4 as aP,zat as aQ,$at as aR,Kat as aS,Jat as aT,Qat as aU,Iat as aV,Aat as aW,Nat as aX,uot as aY,Yat as aZ,cot as a_,Ip as aa,tu as ab,su as ac,IB as ad,ont as ae,W2 as af,Aa as ag,Hnt as ah,Pot as ai,Gnt as aj,PSe as ak,r4 as al,A2e as am,rs as an,og as ao,xhe as ap,Yot as aq,iN as ar,xi as as,r0 as at,WTe as au,YTe as av,lT as aw,CU as ax,Ftt as ay,gx as az,vD as b,wpt as b$,jT as b0,F3e as b1,VU as b2,MD as b3,ggt as b4,MB as b5,ort as b6,rrt as b7,irt as b8,lrt as b9,Qh as bA,ZH as bB,ogt as bC,Lpt as bD,igt as bE,rgt as bF,sst as bG,agt as bH,Ddt as bI,Jpt as bJ,Zpt as bK,Xpt as bL,Pl as bM,_i as bN,fd as bO,Dpt as bP,Rrt as bQ,iye as bR,Ja as bS,Urt as bT,$rt as bU,DF as bV,Gh as bW,yKe as bX,iKe as bY,OD as bZ,a_e as b_,trt as ba,nrt as bb,frt as bc,prt as bd,urt as be,drt as bf,grt as bg,_rt as bh,Aet as bi,xrt as bj,ugt as bk,cgt as bl,lgt as bm,X8 as bn,NAe as bo,_t as bp,We as bq,dgt as br,Ym as bs,gi as bt,dve as bu,Ww as bv,Qpt as bw,$pt as bx,qc as by,Uut as bz,Itt as c,Vk as c$,HF as c0,kpt as c1,FN as c2,Tpt as c3,Cpt as c4,Fk as c5,Dst as c6,Nl as c7,Nf as c8,ipe as c9,iit as cA,rit as cB,oit as cC,et as cD,Js as cE,xit as cF,zT as cG,_s as cH,dpt as cI,sZe as cJ,EG as cK,Rl as cL,pT as cM,qJe as cN,WJe as cO,o0e as cP,Oit as cQ,dFe as cR,Get as cS,Het as cT,Vet as cU,an as cV,dj as cW,Na as cX,dXe as cY,g8 as cZ,rie as c_,hl as ca,Ec as cb,w$ as cc,TNe as cd,_T as ce,ul as cf,mst as cg,FHe as ch,Ix as ci,If as cj,Xm as ck,art as cl,srt as cm,mrt as cn,crt as co,hrt as cp,ca as cq,Xp as cr,AIe as cs,nit as ct,ait as cu,SZe as cv,zo as cw,Qc as cx,zW as cy,jmt as cz,Zst as d,Dw as d$,ldt as d0,idt as d1,cdt as d2,gYe as d3,pXe as d4,Ml as d5,$p as d6,z8 as d7,W8 as d8,qk as d9,lse as dA,RS as dB,aZe as dC,u7 as dD,Brt as dE,xk as dF,Lp as dG,y$ as dH,T6e as dI,vIe as dJ,Yi as dK,Jz as dL,zHe as dM,Xpe as dN,gtt as dO,Tf as dP,uD as dQ,sge as dR,Bk as dS,RE as dT,fg as dU,Fqe as dV,e3e as dW,Pdt as dX,Qtt as dY,Ztt as dZ,LF as d_,x0 as da,vG as db,bG as dc,ztt as dd,wr as de,O8 as df,vse as dg,RZe as dh,tne as di,VQe as dj,GQe as dk,ige as dl,ppt as dm,Rot as dn,X$ as dp,jl as dq,Ct as dr,Zw as ds,Pke as dt,$F as du,oZe as dv,nZe as dw,Pd as dx,ise as dy,rse as dz,zNe as e,h_e as e$,ao as e0,Tbe as e1,Gn as e2,qs as e3,mg as e4,vYe as e5,ngt as e6,rB as e7,i$ as e8,eA as e9,fit as eA,AE as eB,ez as eC,Lrt as eD,Bnt as eE,Dqe as eF,Ld as eG,A1 as eH,bye as eI,XL as eJ,Ok as eK,Det as eL,ac as eM,Fxe as eN,uo as eO,Ble as eP,i$e as eQ,bpt as eR,HT as eS,JT as eT,k$ as eU,bEe as eV,BA as eW,Oat as eX,AB as eY,MEe as eZ,Fmt as e_,dEe as ea,fmt as eb,_n as ec,s_ as ed,Af as ee,ea as ef,ume as eg,pme as eh,vCe as ei,Kn as ej,Da as ek,nT as el,Tmt as em,fl as en,Kx as eo,FSe as ep,go as eq,fn as er,Bat as es,Fat as et,Dat as eu,Q3e as ev,oq as ew,uce as ex,UI as ey,dit as ez,aet as f,pgt as f$,Lf as f0,_dt as f1,ydt as f2,f3,U2 as f4,wot as f5,rq as f6,rut as f7,iut as f8,hdt as f9,qt as fA,NB as fB,pH as fC,TPe as fD,CE as fE,wv as fF,uit as fG,lit as fH,Cq as fI,Wd as fJ,Oke as fK,est as fL,Cx as fM,wx as fN,P7 as fO,lZe as fP,uZe as fQ,iZe as fR,mO as fS,Dp as fT,fy as fU,kx as fV,XU as fW,Ltt as fX,Pze as fY,hq as fZ,mgt as f_,KMe as fa,X2 as fb,B4 as fc,g_e as fd,JU as fe,Pet as ff,$me as fg,QPe as fh,l7 as fi,FZe as fj,Wne as fk,Hne as fl,rV as fm,Kc as fn,QJe as fo,GU as fp,use as fq,bit as fr,S0 as fs,NW as ft,RU as fu,jW as fv,n$e as fw,a0 as fx,XBe as fy,nct as fz,Up as g,kot as g$,qH as g0,Gft as g1,jrt as g2,g4e as g3,jst as g4,N0e as g5,gS as g6,ps as g7,S5e as g8,nb as g9,ust as gA,fst as gB,jD as gC,nne as gD,Dxe as gE,qst as gF,k8 as gG,Rxe as gH,Ost as gI,cst as gJ,itt as gK,Yx as gL,$Xe as gM,P0e as gN,Dx as gO,Kst as gP,zU as gQ,Aot as gR,oxe as gS,YL as gT,znt as gU,bCe as gV,Mve as gW,Vn as gX,oot as gY,Jnt as gZ,sot as g_,Ist as ga,Ast as gb,fq as gc,Oye as gd,dq as ge,plt as gf,D1 as gg,cL as gh,W1 as gi,Lmt as gj,nO as gk,tL as gl,hk as gm,Lpe as gn,hst as go,M0e as gp,ltt as gq,Qst as gr,ctt as gs,nB as gt,zx as gu,lst as gv,pst as gw,$xe as gx,dst as gy,Bst as gz,mXe as h,Pst as h$,xot as h0,yot as h1,LSe as h2,Iot as h3,jot as h4,j2e as h5,lot as h6,Eot as h7,not as h8,Cot as h9,rdt as hA,eW as hB,Ur as hC,EAe as hD,Trt as hE,udt as hF,Pct as hG,Qct as hH,_0 as hI,j7e as hJ,jV as hK,az as hL,sxe as hM,nz as hN,$8 as hO,tz as hP,zct as hQ,zp as hR,Rlt as hS,b5e as hT,Tst as hU,Est as hV,Nst as hW,wst as hX,kst as hY,F$e as hZ,Mst as h_,bot as ha,vot as hb,Xnt as hc,Z2e as hd,Tot as he,IT as hf,Wnt as hg,qnt as hh,Knt as hi,J1 as hj,ni as hk,nD as hl,tp as hm,QF as hn,M2 as ho,qot as hp,a_ as hq,p4 as hr,e4 as hs,jat as ht,ast as hu,adt as hv,Prt as hw,IAe as hx,jAe as hy,Irt as hz,hr as i,sE as i$,Rst as i0,vI as i1,Sle as i2,Ive as i3,oft as i4,aft as i5,$Ze as i6,GZe as i7,J5e as i8,Pmt as i9,SG as iA,IO as iB,sz as iC,dJe as iD,OXe as iE,mMe as iF,X3e as iG,kr as iH,Ule as iI,bhe as iJ,PS as iK,$U as iL,OT as iM,Rat as iN,PU as iO,HU as iP,Mc as iQ,y3 as iR,VB as iS,Fbe as iT,xYe as iU,Uot as iV,Bot as iW,V3e as iX,Fot as iY,iNe as iZ,ent as i_,pye as ia,eu as ib,Gk as ic,ymt as id,yj as ie,nBe as ig,D_e as ih,q$e as ii,lg as ij,e0 as ik,ol as il,J4 as im,Olt as io,ts as ip,cZe as iq,L2 as ir,q1 as is,m0e as it,p0e as iu,xst as iv,Cst as iw,UN as ix,b_e as iy,Uw as iz,nft as j,Fpt as j$,Px as j0,VT as j1,EEe as j2,jx as j3,vT as j4,gl as j5,Jp as j6,E1e as j7,Htt as j8,oet as j9,Kse as jA,C6e as jB,q8e as jC,g_ as jD,fB as jE,$5e as jF,F5e as jG,z5e as jH,q5e as jI,K5e as jJ,nPe as jK,No as jL,Yut as jM,Sg as jN,Rf as jO,h3 as jP,mv as jQ,Wx as jR,Rke as jS,YXe as jT,r_e as jU,RJe as jV,OJe as jW,wie as jX,bH as jY,I2 as jZ,VTe as j_,y6e as ja,Ao as jb,oU as jc,swe as jd,vSe as je,QE as jf,vg as jg,ODe as jh,Bw as ji,o2 as jj,Yse as jk,_7 as jl,qXe as jm,q$ as jn,vx as jo,nu as jp,iE as jq,mE as jr,ng as js,Ktt as jt,rT as ju,X1e as jv,ep as jw,Jk as jx,Rx as jy,BU as jz,yl as k,wrt as k$,Fr as k0,Upt as k1,Bpt as k2,Hct as k3,$ct as k4,Uct as k5,Dct as k6,Lct as k7,oj as k8,Oct as k9,npe as kA,gmt as kB,XD as kC,Gtt as kD,iT as kE,Kk as kF,vk as kG,YD as kH,Doe as kI,Loe as kJ,Ehe as kK,Qp as kL,Zp as kM,Glt as kN,jKe as kO,xtt as kP,_tt as kQ,hZe as kR,hi as kS,OU as kT,EKe as kU,nl as kV,pO as kW,egt as kX,R2 as kY,Fd as kZ,pwe as k_,M7e as ka,N7e as kb,Rct as kc,Gct as kd,Vct as ke,Fct as kf,Bct as kg,pRe as kh,wU as ki,aot as kj,bdt as kk,ttt as kl,gEe as km,YE as kn,yg as ko,ZN as kp,v0e as kq,yst as kr,EZe as ks,u0e as kt,_mt as ku,RIe as kv,cit as kw,N5 as kx,GF as ky,hHe as kz,Dte as l,SXe as l$,MH as l0,Cge as l1,Crt as l2,DAe as l3,$Ae as l4,pg as l5,FAe as l6,UAe as l7,krt as l8,wat as l9,Uie as lA,Die as lB,Tie as lC,Oie as lD,Qme as lE,UXe as lF,uie as lG,wXe as lH,vXe as lI,tXe as lJ,hXe as lK,yXe as lL,ZZe as lM,PXe as lN,HXe as lO,dZe as lP,MXe as lQ,Vme as lR,sD as lS,jXe as lT,IXe as lU,xXe as lV,fZe as lW,Qet as lX,Yet as lY,EXe as lZ,TXe as l_,iEe as la,vat as lb,DEe as lc,jEe as ld,$d as le,stt as lf,qS as lg,Jr as lh,jze as li,She as lj,oO as lk,Bet as ll,Fet as lm,Let as ln,Oet as lo,WXe as lp,$et as lq,Kme as lr,zet as ls,Wet as lt,VXe as lu,zXe as lv,BZe as lw,Ket as lx,Zet as ly,Jet as lz,pZe as m,bst as m$,kXe as m0,AXe as m1,NXe as m2,HZe as m3,rZe as m4,qet as m5,WZe as m6,KXe as m7,UZe as m8,sXe as m9,Uxe as mA,tnt as mB,nnt as mC,ZSe as mD,mpt as mE,hpt as mF,fpt as mG,gpt as mH,Gst as mI,apt as mJ,Ydt as mK,zpt as mL,opt as mM,qpt as mN,Ypt as mO,Hpt as mP,Vpt as mQ,Kpt as mR,rl as mS,Gpt as mT,_ft as mU,Wpt as mV,tit as mW,Ave as mX,Hst as mY,_st as mZ,Sst as m_,RXe as ma,_Xe as mb,XZe as mc,bXe as md,GXe as me,gce as mf,Sf as mg,get as mh,Bbe as mi,Jx as mj,cD as mk,ST as ml,zB as mm,la as mn,yT as mo,Fnt as mp,Lnt as mq,Dnt as mr,Fst as ms,tst as mt,A_e as mu,sB as mv,jB as mw,ant as mx,Bye as my,Xst as mz,dl as n,gnt as n$,_0e as n0,uwe as n1,cg as n2,uL as n3,oL as n4,GT as n5,XT as n6,mJe as n7,pJe as n8,sU as n9,Fz as nA,Bz as nB,$Oe as nC,JE as nD,xl as nE,cQe as nF,LMe as nG,$E as nH,Qr as nI,vke as nJ,DS as nK,Ust as nL,Kye as nM,ynt as nN,zst as nO,fnt as nP,xnt as nQ,Qye as nR,Cnt as nS,lnt as nT,int as nU,cnt as nV,dnt as nW,unt as nX,RB as nY,mnt as nZ,pnt as n_,WH as na,G3e as nb,Zz as nc,Nmt as nd,Gse as ne,IVe as nf,AVe as ng,dmt as nh,umt as ni,Bge as nj,IE as nk,D2e as nl,nq as nm,uXe as nn,Wrt as no,ost as np,Gfe as nq,eIe as nr,nL as ns,Nut as nt,Fh as nu,Kl as nv,Oi as nw,aOe as nx,EDe as ny,s3 as nz,gZe as o,Sat as o$,_nt as o0,tde as o1,Sx as o2,net as o3,lmt as o4,Ike as o5,hGe as o6,jke as o7,Amt as o8,uq as o9,sut as oA,GB as oB,nut as oC,out as oD,it as oE,ZGe as oF,aGe as oG,sGe as oH,oGe as oI,nmt as oJ,omt as oK,amt as oL,FCe as oM,kmt as oN,Wft as oO,qft as oP,Vnt as oQ,SHe as oR,bmt as oS,Ymt as oT,mmt as oU,vmt as oV,pmt as oW,Wmt as oX,mct as oY,pct as oZ,XGe as o_,Emt as oa,Mmt as ob,$mt as oc,Vmt as od,zmt as oe,Hmt as of,Gmt as og,Bmt as oh,xdt as oi,SVe as oj,zCe as ok,ZHe as ol,Zmt as om,Zi as on,pat as oo,Qmt as op,Xmt as oq,Dlt as or,tpt as os,ept as ot,wmt as ou,jet as ov,Gut as ow,$ut as ox,flt as oy,V7e as oz,Sn as p,Aut as p$,imt as p0,rmt as p1,qmt as p2,Kmt as p3,Jmt as p4,emt as p5,Smt as p6,Cmt as p7,tmt as p8,smt as p9,m1e as pA,h1e as pB,LEe as pC,YGe as pD,_W as pE,Rtt as pF,kat as pG,Dmt as pH,Tq as pI,Ret as pJ,Iet as pK,yde as pL,_l as pM,lLe as pN,RT as pO,Ytt as pP,oA as pQ,hRe as pR,g5e as pS,yit as pT,dxe as pU,dT as pV,LE as pW,sit as pX,Xme as pY,ypt as pZ,Kqe as p_,Udt as pa,hmt as pb,zft as pc,Hft as pd,FDe as pe,Mf as pf,Cg as pg,mB as ph,Dt as pi,rpt as pj,$B as pk,ipt as pl,npt as pm,pet as pn,Oft as po,spt as pp,dat as pq,Lke as pr,Rmt as ps,rve as pt,eU as pu,fgt as pv,LD as pw,nr as px,Wk as py,Zk as pz,DZe as q,Rpt as q$,ES as q0,LJe as q1,FJe as q2,BJe as q3,xae as q4,yae as q5,Fp as q6,_ae as q7,wZe as q8,_oe as q9,pl as qA,o0 as qB,ou as qC,$ge as qD,gSe as qE,dg as qF,Ett as qG,K2 as qH,h$ as qI,dn as qJ,Ut as qK,kge as qL,Ort as qM,Uk as qN,T4 as qO,jtt as qP,gD as qQ,DJe as qR,_pt as qS,vpt as qT,xpt as qU,Spt as qV,Apt as qW,Mpt as qX,Npt as qY,Xtt as qZ,Ipt as q_,yoe as qa,Jtt as qb,yf as qc,L$e as qd,I8 as qe,JZe as qf,SE as qg,xmt as qh,Rp as qi,dlt as qj,Imt as qk,Yu as ql,_z as qm,_ut as qn,p8 as qo,$oe as qp,Foe as qq,but as qr,aXe as qs,oXe as qt,hut as qu,CRe as qv,Zc as qw,Gx as qx,J3e as qy,d$ as qz,ert as r,SEe as r$,Ppt as r0,Ept as r1,BKe as r2,jpt as r3,xT as r4,UF as r5,wz as r6,Opt as r7,snt as r8,sgt as r9,kE as rA,PJe as rB,m3 as rC,Obe as rD,TCe as rE,E4 as rF,RCe as rG,xMe as rH,g4 as rI,kie as rJ,HNe as rK,aTe as rL,R2e as rM,qEe as rN,yut as rO,rXe as rP,lXe as rQ,Iut as rR,xut as rS,iXe as rT,vut as rU,gut as rV,mat as rW,ZPe as rX,fYe as rY,z1 as rZ,REe as r_,tgt as ra,Yc as rb,pL as rc,i0 as rd,ANe as re,BI as rf,nE as rg,ktt as rh,Ttt as ri,htt as rj,Ctt as rk,uge as rl,vtt as rm,Stt as rn,hd as ro,Hye as rp,Wut as rq,QOe as rr,ZOe as rs,gj as rt,v$ as ru,y0 as rv,qct as rw,Met as rx,W3e as ry,Net as rz,gc as s,DI as s$,jVe as s0,TYe as s1,Ni as s2,fEe as s3,yat as s4,bat as s5,kf as s6,E$ as s7,hEe as s8,TEe as s9,KI as sA,ROe as sB,OOe as sC,Ect as sD,ret as sE,SOe as sF,Zut as sG,Yct as sH,Wct as sI,OE as sJ,Ult as sK,Zdt as sL,Jdt as sM,Xdt as sN,YG as sO,tV as sP,JG as sQ,URe as sR,BRe as sS,_h as sT,Zx as sU,hft as sV,gft as sW,As as sX,pft as sY,fft as sZ,xg as s_,jq as sa,yDe as sb,zI as sc,mOe as sd,$V as se,HV as sf,GV as sg,bct as sh,OV as si,PV as sj,UV as sk,FV as sl,DV as sm,fOe as sn,IS as so,wct as sp,LV as sq,RV as sr,BV as ss,ar as st,Sct as su,AOe as sv,SDe as sw,dOe as sx,xDe as sy,Ku as sz,LZe as t,Fdt as t$,gRe as t0,C8 as t1,mft as t2,i4e as t3,Tft as t4,a4e as t5,rOe as t6,Qbe as t7,Eft as t8,Ert as t9,Ift as tA,vlt as tB,L1 as tC,Sft as tD,Vlt as tE,Mft as tF,Aft as tG,Nft as tH,tG as tI,Cft as tJ,Pft as tK,vdt as tL,kce as tM,dft as tN,kWe as tO,bUe as tP,eft as tQ,vUe as tR,wW as tS,rft as tT,cft as tU,sft as tV,tft as tW,lft as tX,kbe as tY,uft as tZ,R$e as t_,Art as ta,Mrt as tb,Nrt as tc,Mnt as td,ave as te,Nnt as tf,Ont as tg,tU as th,lOe as ti,kft as tj,Dft as tk,Vft as tl,$ft as tm,ift as tn,Fft as to,Bft as tp,jft as tq,tut as tr,QXe as ts,Rnt as tt,wft as tu,Rft as tv,zlt as tw,Int as tx,Wlt as ty,vft as tz,bD as u,TJe as u$,Bdt as u0,mdt as u1,gdt as u2,Idt as u3,Edt as u4,ABe as u5,pdt as u6,fdt as u7,Odt as u8,Adt as u9,zJe as uA,eZe as uB,XJe as uC,LNe as uD,KJe as uE,YJe as uF,kct as uG,Tct as uH,EOe as uI,Jut as uJ,Gdt as uK,$dt as uL,Hdt as uM,nMe as uN,Qqe as uO,ev as uP,uRe as uQ,Plt as uR,NI as uS,BXe as uT,p2 as uU,l_ as uV,Ldt as uW,Kr as uX,Z4e as uY,X4e as uZ,PE as u_,jdt as ua,lpt as ub,yRe as uc,oUe as ud,Tdt as ue,Mct as uf,Kdt as ug,Hut as uh,Rdt as ui,kdt as uj,Qdt as uk,Kie as ul,Sdt as um,rU as un,qdt as uo,ddt as up,Ndt as uq,Mdt as ur,upt as us,cpt as ut,hB as uu,WSe as uv,ek as uw,tZe as ux,VJe as uy,GJe as uz,JJe as v,Uit as v$,Gte as v0,dD as v1,ope as v2,RD as v3,B2 as v4,Xo as v5,t0 as v6,PMe as v7,f0 as v8,_lt as v9,w5e as vA,Wit as vB,Vit as vC,Zit as vD,Llt as vE,Elt as vF,Alt as vG,jlt as vH,elt as vI,slt as vJ,tlt as vK,Fit as vL,Mit as vM,ect as vN,Oot as vO,Zrt as vP,rwe as vQ,Pit as vR,Iit as vS,Eit as vT,alt as vU,ilt as vV,olt as vW,Hit as vX,Bit as vY,tct as vZ,$it as v_,hlt as va,ylt as vb,xlt as vc,VG as vd,au as ve,Hlt as vf,mZe as vg,Yst as vh,Jlt as vi,$lt as vj,rlt as vk,dk as vl,qlt as vm,het as vn,_et as vo,Od as vp,oye as vq,Cit as vr,clt as vs,Kit as vt,ult as vu,aye as vv,wit as vw,Sit as vx,Clt as vy,Yit as vz,ZJe as w,zut as w$,glt as w0,sp as w1,act as w2,llt as w3,jit as w4,Lot as w5,NIe as w6,Dot as w7,Xlt as w8,Zlt as w9,cct as wA,La as wB,nXe as wC,mut as wD,uut as wE,dut as wF,b6e as wG,Sut as wH,put as wI,oT as wJ,Wtt as wK,Rut as wL,Out as wM,Put as wN,fXe as wO,jut as wP,Vtt as wQ,Eut as wR,XH as wS,L7 as wT,$1e as wU,rce as wV,j1 as wW,KE as wX,Frt as wY,Fut as wZ,Yz as w_,Ait as wa,oct as wb,sct as wc,Dit as wd,kI as we,Ilt as wf,Nlt as wg,rct as wh,ict as wi,Jit as wj,zit as wk,nlt as wl,Xit as wm,Qit as wn,qit as wo,Tje as wp,vit as wq,Slt as wr,Jh as ws,bI as wt,die as wu,cut as wv,lut as ww,$st as wx,e8e as wy,pz as wz,HJe as x,Vrt as x$,qz as x0,Dut as x1,Tut as x2,Mut as x3,qtt as x4,Wz as x5,Lut as x6,edt as x7,Vut as x8,tdt as x9,dct as xA,lct as xB,bde as xC,pit as xD,Zct as xE,QG as xF,Qrt as xG,Jrt as xH,al as xI,XOe as xJ,wut as xK,r4e as xL,Unt as xM,$nt as xN,Nct as xO,eit as xP,Cut as xQ,Ict as xR,FEe as xS,mit as xT,Jct as xU,Blt as xV,cIe as xW,c0 as xX,xet as xY,W7e as xZ,Grt as x_,Drt as xa,Gz as xb,Kut as xc,qut as xd,Qz as xe,kut as xf,zz as xg,Xut as xh,Vz as xi,iet as xj,Krt as xk,qrt as xl,zrt as xm,uct as xn,eut as xo,jct as xp,q1e as xq,Xrt as xr,Nit as xs,che as xt,aut as xu,Wot as xv,Znt as xw,fz as xx,Xct as xy,Of as xz,Lh as y,hbe as y$,GH as y0,jf as y1,hit as y2,_it as y3,git as y4,kk as y5,vet as y6,a7e as y7,yet as y8,fct as y9,ytt as yA,gye as yB,ptt as yC,mtt as yD,ftt as yE,nge as yF,dtt as yG,ege as yH,tge as yI,PKe as yJ,bN as yK,wtt as yL,V4e as yM,Vot as yN,Gke as yO,R3e as yP,jnt as yQ,ZB as yR,Ant as yS,Gbe as yT,Ent as yU,tve as yV,Xx as yW,uet as yX,det as yY,Snt as yZ,wnt as y_,Act as ya,Yrt as yb,iIe as yc,bet as yd,Wat as ye,qat as yf,Hrt as yg,ndt as yh,sdt as yi,odt as yj,_O as yk,pse as yl,_se as ym,x7 as yn,coe as yo,cet as yp,Nm as yq,pk as yr,Utt as ys,Vst as yt,Wst as yu,kJe as yv,Hte as yw,fut as yx,UDe as yy,Sge as yz,Wm as z,o5e as z$,NWe as z0,knt as z1,HB as z2,fet as z3,Cf as z4,Tnt as z5,PWe as z6,dBe as z7,Sk as z8,bnt as z9,QH as zA,Uft as zB,N4e as zC,kme as zD,jPe as zE,vst as zF,O$e as zG,nme as zH,aB as zI,Zse as zJ,kZe as zK,tJe as zL,ZQe as zM,XQe as zN,JQe as zO,MZe as zP,bft as zQ,IZe as zR,NZe as zS,AZe as zT,PZe as zU,Pp as zV,OZe as zW,D$e as zX,jZe as zY,r5e as zZ,a5e as z_,met as za,ig as zb,KD as zc,$tt as zd,Xk as ze,qD as zf,hnt as zg,CS as zh,vbe as zi,vnt as zj,pn as zk,HG as zl,GG as zm,blt as zn,sde as zo,Ibe as zp,iD as zq,Kpe as zr,XN as zs,Git as zt,Xse as zu,rLe as zv,E1 as zw,rk as zx,L8 as zy,Pnt as zz};
//# sourceMappingURL=k65njl5wlgspihfr.js.map
