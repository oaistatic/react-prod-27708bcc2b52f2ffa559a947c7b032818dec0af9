var An=Object.defineProperty,Ln=Object.defineProperties;var On=Object.getOwnPropertyDescriptors;var rn=Object.getOwnPropertySymbols;var Fn=Object.prototype.hasOwnProperty,$n=Object.prototype.propertyIsEnumerable;var an=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var on=(t,e,n)=>e in t?An(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e)=>{for(var n in e||(e={}))Fn.call(e,n)&&on(t,n,e[n]);if(rn)for(var n of rn(e))$n.call(e,n)&&on(t,n,e[n]);return t},Se=(t,e)=>Ln(t,On(e));var ln=(t,e,n)=>(e=t[an("asyncIterator")])?e.call(t):(t=t[an("iterator")](),e={},n=(r,o)=>(o=t[r])&&(e[r]=a=>new Promise((c,d,i)=>(a=o.call(t,a),i=a.done,Promise.resolve(a.value).then(l=>c({value:l,done:i}),d)))),n("next"),n("return"),e);import{e as Ee,r as p,j as s,M as Bs,c as Ce,k as Bn,a as Un}from"./fg33krlcm0qyi6yw.js";import{i as bn,b as ys,l as me,gK as zn,g2 as Hn,i9 as Wn,uX as qn,tc as bs,eM as Hs,fA as hn,eD as _s,da as Jn,ba as Gn,k as Vn,P as hs,xk as Qn,a9 as Kn,qD as Yn,dI as xn,ee as Xn,e2 as yn,dP as _n,eX as Zn,ag as er,xl as tr,kM as sr,o as Sn,e4 as xs,hv as nr,pL as rr,T as ar,e$ as or,m1 as ir,dN as lr,aY as cn,C as cr}from"./mtk1qztvnb31pw5r.js";import{jc as vn,rY as dr,l5 as ur,aC as mr,qC as fr,n4 as gr,gm as pr,gg as br,n3 as hr,gh as xr,rZ as yr,hn as _r,fJ as Us,nf as Sr,gc as vr,ng as jr,ge as Cr,eT as kr,kS as Mr,r_ as Er,ab as wr,ac as Nr,ib as Tr,r$ as Ir,dx as Dr,s0 as Rr,fD as Pr,fE as Ar,s1 as Lr,s2 as dn,dg as Or,bP as Fr}from"./k65njl5wlgspihfr.js";import{A as $r}from"./cnrdqaihcmlb57i1.js";import{P as Br}from"./nwqhxo974az4xh1l.js";import{D as Ur}from"./krwszi9u3lj63i9v.js";import{C as zr}from"./mce0eiesimdmeqmr.js";import{C as jn}from"./ir7nzwbolrsm3ds2.js";import{A as Hr}from"./i3rty9twuhjkv8ax.js";import{E as As}from"./u9jpwxvw30u3h6nc.js";import"./hgk4djqrlco056z6.js";import"./l6gg4oal15ycpbhj.js";import"./27egyxvdbhiyko0z.js";import"./he7oe7s4xa3cph5y.js";import"./gy1lpvuoewmzh42c.js";import"./jed1ux7qibe55pmj.js";import"./h1em0bjkpkjv8ykw.js";import"./nfccle6oyncifphl.js";import"./hu1bt0oauegdhua6.js";import"./ojve869uwykk95at.js";import"./ly75bs3d14n5v622.js";import"./b7abh8aw9icifmym.js";import"./odbvdbv7o06jw7ls.js";import"./l8g4nijn9ow7argx.js";import"./njh1hro7jxhbut4d.js";import"./l09h2qppleubii6l.js";import"./cu0ig3jox4ha1bc5.js";import"./i1g2kxfbotvbgq93.js";import"./qcr0k45a8ay8c0b9.js";import"./ifrwee0bgh9e2but.js";import"./gqx9i5tb3deqoo5z.js";import"./dg5jraediw4l39ow.js";import"./hb1mva1gmw4bcs8w.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";import"./kgrrqncjl71482vi.js";import"./i5jw6wfkpao2rx5t.js";import"./ohquqctluwabmb5i.js";import"./c2cj1dlcffke3f7m.js";import"./mivow98b53y1taf8.js";function Wr({title:t,isTransparent:e,onClose:n}){const r=ys(),o=bn(r),a=Ee(),[c,d]=p.useState(!1),{canGoBack:i,goBack:l,goToHistoryIndex:m,backHistory:x}=vn(),f=me("pointer-events-auto keyboard-focused:focus-ring relative -ms-2 me-1 flex h-9 w-9 items-center justify-center rounded-lg",e?"bg-token-main-surface-primary/60 backdrop-blur-xl backdrop-filter hover:bg-token-main-surface-primary/70":"bg-token-main-surface-primary hover:bg-token-surface-hover ");return s.jsx(dr,{name:"entity-header",type:"primary",className:me("flex items-center bg-transparent!",e?"pointer-events-none":"pointer-events-auto",o?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:s.jsxs("div",{className:me("flex items-center justify-between px-6 py-2 transition-colors duration-200 ease-out",e?"pointer-events-none border-transparent bg-transparent":"bg-token-main-surface-primary",o?"border-b-thin min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)] border-b",!e&&(o?"border-(--bento-border-color)":"border-light")),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i&&s.jsx(zn,{open:c,onOpenChange:d,size:"small",triggerButton:s.jsx("button",{type:"button",onClick:l,onPointerDown:k=>{k.preventDefault()},onContextMenu:k=>{k.preventDefault(),i&&d(!0)},className:f,"aria-label":a.formatMessage({id:"entity.sidebar.back",defaultMessage:"Back"}),children:s.jsx($r,{className:"icon"})}),children:x.map((k,y)=>({s:k,absoluteIndex:y})).reverse().map(({s:k,absoluteIndex:y})=>s.jsx(Hn.Item,{label:k.query,onSelect:()=>{d(!1),m(y)}},"".concat(y,"-").concat(k.type)))}),t&&!e&&s.jsx("div",{className:"text-token-text-primary pointer-events-auto line-clamp-1 text-lg font-normal",children:t})]}),s.jsx("div",{className:"pointer-events-auto -me-3",children:s.jsx("button",{"data-testid":"close-button",onClick:n,className:f,"aria-label":a.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),children:s.jsx(Wn,{className:"icon"})})})]})})}const qr=800,Jr=1200;function Gr({searchModelQueries:t=[]}){const e=p.useMemo(()=>t.map(i=>i.trim()).filter(i=>i.length>0),[t]),[n,r]=p.useState(!0),[o,a]=p.useState(0);p.useEffect(()=>{let i=null,l=null;return r(!0),a(0),e.length>0&&(i=setTimeout(()=>{r(!1),l=setInterval(()=>{a(m=>m+1>=e.length?e.length-1:m+1)},Jr)},qr)),()=>{i&&clearTimeout(i),l&&clearInterval(l)}},[e]);const c=()=>{"use forget";const i=Ce.c(1);let l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("div",{className:"bg-token-bg-secondary -mx-6 mt-[calc(var(--header-height,52px)*-1)] aspect-[5/4] animate-pulse pb-2"}),i[0]=l):l=i[0],l};if(!e.length)return s.jsxs(s.Fragment,{children:[s.jsx(c,{}),s.jsx("div",{className:"mt-6 flex min-h-[60vh] flex-col gap-12 pb-6",children:s.jsxs(qn,{children:[s.jsx(bs,{index:0,width:60,heightSize:"sm"}),s.jsx(bs,{index:1,width:100,heightSize:"sm"}),s.jsx(bs,{index:2,width:90,heightSize:"sm"}),s.jsx(bs,{index:3,width:50,heightSize:"sm"})]})})]});const d=n?s.jsx(Bs,{id:"CfufpV",defaultMessage:"Searching the web"}):s.jsx(Bs,{id:"DeF0zE",defaultMessage:"Searching for {query}",values:{query:e[o]}});return s.jsxs(s.Fragment,{children:[s.jsx(c,{}),s.jsx("div",{className:"mt-5 flex min-h-[60vh] w-full flex-col items-start gap-4 pb-6",children:s.jsx("span",{className:"loading-shimmer text-token-text-secondary line-clamp-1 w-full truncate font-medium select-none",children:d})})]})}const Ws="".concat(hn,"/sidebar/debug");async function Vr(t){var n;return(n=(await Hs.post("".concat(Ws,"/prompts/load"),t,{additionalHeaders:q({"Content-Type":"application/json"},_s({isAuthOptional:!0}))})).prompts)!=null?n:{}}async function Qr(t){const e=await Hs.post("".concat(Ws,"/jobs"),t,{additionalHeaders:q({"Content-Type":"application/json"},_s({isAuthOptional:!0}))});return{jobId:e.job_id,workflowId:e.workflow_id}}function Kr(t){var e,n,r,o;return{id:t.id,workflowId:t.workflow_id,status:t.status,startedAt:new Date(t.started_at),completedAt:t.completed_at?new Date(t.completed_at):null,error:(e=t.error)!=null?e:null,generator:t.generator,dataLoader:t.data_loader,processed:(n=t.processed)!=null?n:null,succeeded:(r=t.succeeded)!=null?r:null,failed:(o=t.failed)!=null?o:null,entity:t.entity}}async function Yr(t){var n;return t.length===0?[]:((n=(await Hs.get("".concat(Ws,"/jobs"),{params:{ids:t.join(",")},additionalHeaders:q({},_s({isAuthOptional:!0}))})).jobs)!=null?n:[]).map(Kr)}const un="sidebar-generation-debugger:toggle",Xr="sidebar-generation-debugger-launch",Ls=["user_prompt","system_prompt","sonic_inject_system_message"],Zr="knowledge-generator",mn="file-data-loader",fn=5e3,Os=25;function gt(t){return JSON.stringify(zs(t))}function zs(t){return Array.isArray(t)?t.map(e=>zs(e)):t&&typeof t=="object"?Object.keys(t).sort().reduce((e,n)=>{const r=zs(t[n]);return r!==void 0&&(e[n]=r),e},{}):t}function ea(t){"use forget";var Vs,Qs,Ks,Ys,Xs,Zs,en,tn,sn,nn;const e=Ce.c(241),{containerRef:n,query:r,category:o,extraParams:a,locale:c,refreshFromCache:d,onEntityContextChange:i}=t,l=Ee(),[m,x]=p.useState(!1),[f,k]=p.useState(Zr),[y,N]=p.useState(""),[L,J]=p.useState(null),[M,H]=p.useState(null);let E;e[0]===Symbol.for("react.memo_cache_sentinel")?(E={system_prompt:{path:null,content:""},user_prompt:{path:null,content:""},sonic_inject_system_message:{path:null,content:""}},e[0]=E):E=e[0];const[C,G]=p.useState(E),[U,V]=p.useState(!1),[Q,O]=p.useState(null);let z;e[1]===Symbol.for("react.memo_cache_sentinel")?(z=[],e[1]=z):z=e[1];const[$,fe]=p.useState(z),[B,W]=p.useState(null),[X,oe]=p.useState(!1);let Z;e[2]===Symbol.for("react.memo_cache_sentinel")?(Z={},e[2]=Z):Z=e[2];const[K,xe]=p.useState(Z);let F;e[3]===Symbol.for("react.memo_cache_sentinel")?(F=[],e[3]=F):F=e[3];const[te,ge]=p.useState(F),[ee,b]=p.useState(0),[w,S]=p.useState(0);let j;e[4]===Symbol.for("react.memo_cache_sentinel")?(j={system_prompt:"",user_prompt:"",sonic_inject_system_message:""},e[4]=j):j=e[4];const P=p.useRef(j);let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=new Set,e[5]=T):T=e[5];const D=p.useRef(T),A=p.useRef(null),ne=p.useRef(null);let se;e[6]===Symbol.for("react.memo_cache_sentinel")?(se={sidebarLeft:0,viewportWidth:0,debugSidebarRight:0},e[6]=se):se=e[6];const[pe,re]=p.useState(se);M==null||M.tags;const ie=M==null?void 0:M.tags;let ve;e[7]!==ie?(ve=Array.isArray(ie)?ie:[],e[7]=ie,e[8]=ve):ve=e[8];const le=ve;let Pe;e[9]!==le?(Pe=le.join("|"),e[9]=le,e[10]=Pe):Pe=e[10];const Ae=Pe;let ae;e[11]!==a?(ae=a!=null?a:{},e[11]=a,e[12]=ae):ae=e[12];let Le;e[13]!==ae?(Le=gt(ae),e[13]=ae,e[14]=Le):Le=e[14];const ct=Le;let Oe;e[15]!==o||e[16]!==a||e[17]!==c||e[18]!==r?(Oe=u=>{if(u==="entity_name")return r!=null?r:"";if(u==="category")return o!=null?o:"";if(u==="locale")return c!=null?c:"";if(u==="disambiguation"){const g=a==null?void 0:a.disambiguation;return typeof g=="string"?g:""}const h=a==null?void 0:a[u];return typeof h=="string"?h:""},e[15]=o,e[16]=a,e[17]=c,e[18]=r,e[19]=Oe):Oe=e[19];const we=Oe;let Ne;e[20]===Symbol.for("react.memo_cache_sentinel")?(Ne=()=>{b(ia)},e[20]=Ne):Ne=e[20];const ye=Ne,Ss=oa;let bt;e[21]===Symbol.for("react.memo_cache_sentinel")?(bt=()=>{A.current!==null&&(typeof window<"u"&&window.clearTimeout(A.current),A.current=null)},e[21]=bt):bt=e[21];const be=bt;let ht;e[22]!==o||e[23]!==ct||e[24]!==c||e[25]!==r||e[26]!==Ae?(ht=gt({tags:Ae,query:r,category:o,locale:c,extraParams:ct}),e[22]=o,e[23]=ct,e[24]=c,e[25]=r,e[26]=Ae,e[27]=ht):ht=e[27];const dt=ht,qs=p.useRef(null),vs=p.useRef(null);let xt,yt;e[28]!==le||e[29]!==dt||e[30]!==we||e[31]!==a?(xt=()=>{if(qs.current===dt)return;qs.current=dt;const u={};le.forEach(g=>{u[g]=we(g)}),xe(u);const h=Object.entries(a!=null?a:{}).map(g=>{const[v,I]=g;return{id:Ss(),key:v,value:typeof I=="string"?I:JSON.stringify(I!=null?I:"")}});ge(h),b(0),S(0),ne.current=null,be()},yt=[le,dt,we,a,Ss,be],e[28]=le,e[29]=dt,e[30]=we,e[31]=a,e[32]=xt,e[33]=yt):(xt=e[32],yt=e[33]),p.useEffect(xt,yt);let _t;e[34]!==n?(_t=()=>{var v,I;if(typeof window>"u"||typeof document>"u")return;const u=(v=n.current)==null?void 0:v.getBoundingClientRect();if(!u)return;const h=(I=document.getElementById(Xr))==null?void 0:I.getBoundingClientRect(),g=h?h.right+16:0;re({sidebarLeft:u.left,viewportWidth:window.innerWidth,debugSidebarRight:g})},e[34]=n,e[35]=_t):_t=e[35];const ce=_t;let St,vt;e[36]!==n||e[37]!==m||e[38]!==ce?(St=()=>{if(!m)return;ce();const u=()=>ce();window.addEventListener("resize",u);const h=n.current,g=h?new ResizeObserver(ce):null;return g&&h&&g.observe(h),()=>{window.removeEventListener("resize",u),g==null||g.disconnect()}},vt=[n,m,ce],e[36]=n,e[37]=m,e[38]=ce,e[39]=St,e[40]=vt):(St=e[39],vt=e[40]),Jn(St,vt);let jt;e[41]!==ce?(jt=()=>{ce(),x(!0)},e[41]=ce,e[42]=jt):jt=e[42];const Ct=jt;let kt,Mt;e[43]!==Ct||e[44]!==ce?(kt=()=>{if(typeof window>"u")return;const u=h=>{var I,de;const v=(de=(I=h.detail)==null?void 0:I.action)!=null?de:"toggle";if(v==="open"){Ct();return}if(v==="close"){x(!1);return}x(ue=>ue?!1:(ce(),!0))};return window.addEventListener(un,u),()=>{window.removeEventListener(un,u)}},Mt=[Ct,ce],e[43]=Ct,e[44]=ce,e[45]=kt,e[46]=Mt):(kt=e[45],Mt=e[46]),p.useEffect(kt,Mt);let Et,wt;e[47]!==y?(Et=()=>{if(!y.trim()){H(null),J(null);return}try{const u=JSON.parse(y);H(u),J(null)}catch(u){const h=u;H(null),J(h.message)}},wt=[y],e[47]=y,e[48]=Et,e[49]=wt):(Et=e[48],wt=e[49]),p.useEffect(Et,wt);const Te=aa;let Nt;e[50]===Symbol.for("react.memo_cache_sentinel")?(Nt=u=>{var ms,mt,ft;const{entityName:h,entityCategory:g,entityLocale:v,disambiguation:I,extraParams:de}=u,ue=Te(I);let _e;return de&&Object.keys(de).length>0&&(_e=Object.fromEntries(Object.entries(de).map(fs=>{var he;const[gs,Re]=fs;return[gs,typeof Re=="string"&&(he=Te(Re))!=null?he:Re]}))),ue&&(_e=Se(q({},_e!=null?_e:{}),{disambiguation:ue})),{entity_name:(ms=Te(h))!=null?ms:h,category:(mt=Te(g))!=null?mt:g,user_locale:(ft=Te(v))!=null?ft:v,disambiguation:ue,extra_params:_e}},e[50]=Nt):Nt=e[50];const Js=Nt;let js;e:{if(!M){let I;e[51]===Symbol.for("react.memo_cache_sentinel")?(I={system_prompt:null,user_prompt:null,sonic_inject_system_message:null},e[51]=I):I=e[51],js=I;break e}const u=(Ks=(Qs=M.sonic_inject_system_message)!=null?Qs:(Vs=M.search_settings)==null?void 0:Vs.sonic_inject_system_message)!=null?Ks:null,h=(Ys=M.system_prompt)!=null?Ys:null,g=(Xs=M.user_prompt)!=null?Xs:null;let v;e[52]!==u||e[53]!==h||e[54]!==g?(v={system_prompt:h,user_prompt:g,sonic_inject_system_message:u},e[52]=u,e[53]=h,e[54]=g,e[55]=v):v=e[55],js=v}const Y=js;let Tt;e[56]!==Y?(Tt=Ls.filter(u=>u==="user_prompt"?!0:!!Y[u]),e[56]=Y,e[57]=Tt):Tt=e[57];const Cs=Tt,Cn=Ls.filter(u=>u==="user_prompt"?!!Y.user_prompt:!!Y[u]);let It;e[58]!==Y.user_prompt||e[59]!==C.user_prompt.content?(It=!!Y.user_prompt||C.user_prompt.content.trim().length>0,e[58]=Y.user_prompt,e[59]=C.user_prompt.content,e[60]=It):It=e[60];const ks=It;let Dt,Rt;e[61]!==Y||e[62]!==M||e[63]!==C?(Dt=()=>{if(!M)return;const u={};if(Ls.forEach(g=>{const v=Y[g];v&&C[g].path!==v&&P.current[g]!==v&&(P.current[g]=v,u[g]=v)}),Object.keys(u).length===0)return;const h=Object.keys(u);V(!0),Vr(u).then(g=>{const v=q({},C);Object.entries(g).forEach(I=>{const[de,ue]=I;if(!ue)return;const _e=de;v[_e]={path:ue.path,content:ue.content}}),G(v)}).catch(g=>{O(g instanceof Error?g.message:String(g))}).finally(()=>{h.forEach(g=>{P.current[g]=""}),V(!1)})},Rt=[M,Y,C],e[61]=Y,e[62]=M,e[63]=C,e[64]=Dt,e[65]=Rt):(Dt=e[64],Rt=e[65]),p.useEffect(Dt,Rt);const kn=Cn.every(u=>C[u].content.trim().length>0);let Ie;e[66]!==Y.sonic_inject_system_message||e[67]!==Y.system_prompt||e[68]!==C.sonic_inject_system_message||e[69]!==C.system_prompt||e[70]!==C.user_prompt||e[71]!==ks?(Ie={},Y.system_prompt&&(Ie.system_prompt=C.system_prompt),ks&&(Ie.user_prompt=C.user_prompt),Y.sonic_inject_system_message&&(Ie.sonic_inject_system_message=C.sonic_inject_system_message),e[66]=Y.sonic_inject_system_message,e[67]=Y.system_prompt,e[68]=C.sonic_inject_system_message,e[69]=C.system_prompt,e[70]=C.user_prompt,e[71]=ks,e[72]=Ie):Ie=e[72];const Ms=Ie;let ut;e[73]!==te?(ut={},te.forEach(u=>{const{key:h,value:g}=u,v=h.trim();v&&(ut[v]=g)}),e[73]=te,e[74]=ut):ut=e[74];const Fe=ut,$e=typeof(a==null?void 0:a.disambiguation)=="string"?a.disambiguation:void 0;let Pt;e[75]!==K?(Pt=(u,h)=>{const g=K[u],v=Te(g);return v&&v.length>0?v:Te(h)},e[75]=K,e[76]=Pt):Pt=e[76];const Be=Pt;let At;if(e[77]!==$e||e[78]!==o||e[79]!==Fe||e[80]!==c||e[81]!==Be||e[82]!==r){const u=(Zs=Be("entity_name",r))!=null?Zs:r,h=(en=Be("category",o))!=null?en:o,g=(tn=Be("locale",c))!=null?tn:c,v=Be("disambiguation",$e);let I;e[84]!==Fe?(I=Object.keys(Fe).length>0?Fe:void 0,e[84]=Fe,e[85]=I):I=e[85],At=Js({entityName:u,entityCategory:h,entityLocale:g,disambiguation:v,extraParams:I}),e[77]=$e,e[78]=o,e[79]=Fe,e[80]=c,e[81]=Be,e[82]=r,e[83]=At}else At=e[83];const _=At;let Lt;e[86]!==$e||e[87]!==o||e[88]!==a||e[89]!==c||e[90]!==r?(Lt=Js({entityName:r,entityCategory:o,entityLocale:c,disambiguation:$e,extraParams:a}),e[86]=$e,e[87]=o,e[88]=a,e[89]=c,e[90]=r,e[91]=Lt):Lt=e[91];const R=Lt;let Ot;e[92]!==_.category||e[93]!==_.disambiguation||e[94]!==_.entity_name||e[95]!==_.extra_params||e[96]!==_.user_locale?(Ot=gt({entity_name:_.entity_name,category:_.category,user_locale:_.user_locale,disambiguation:_.disambiguation,extra_params:(sn=_.extra_params)!=null?sn:{}}),e[92]=_.category,e[93]=_.disambiguation,e[94]=_.entity_name,e[95]=_.extra_params,e[96]=_.user_locale,e[97]=Ot):Ot=e[97];const ke=Ot;let Ft;e[98]!==R.category||e[99]!==R.disambiguation||e[100]!==R.entity_name||e[101]!==R.extra_params||e[102]!==R.user_locale?(Ft=gt({entity_name:R.entity_name,category:R.category,user_locale:R.user_locale,disambiguation:R.disambiguation,extra_params:(nn=R.extra_params)!=null?nn:{}}),e[98]=R.category,e[99]=R.disambiguation,e[100]=R.entity_name,e[101]=R.extra_params,e[102]=R.user_locale,e[103]=Ft):Ft=e[103];const Me=Ft;let $t;e[104]!==R.category||e[105]!==R.disambiguation||e[106]!==R.entity_name||e[107]!==R.extra_params||e[108]!==R.user_locale||e[109]!==ke||e[110]!==_.category||e[111]!==_.disambiguation||e[112]!==_.entity_name||e[113]!==_.extra_params||e[114]!==_.user_locale||e[115]!==Me||e[116]!==m||e[117]!==i?($t=()=>{var h,g;if(!m||!i)return;const u=ke===Me?Me:ke;if(vs.current!==u){if(vs.current=u,ke===Me){i({query:R.entity_name,category:R.category,extraParams:R.extra_params,locale:R.user_locale,disambiguation:(h=R.disambiguation)!=null?h:void 0});return}i({query:_.entity_name,category:_.category,extraParams:_.extra_params,locale:_.user_locale,disambiguation:(g=_.disambiguation)!=null?g:void 0})}},e[104]=R.category,e[105]=R.disambiguation,e[106]=R.entity_name,e[107]=R.extra_params,e[108]=R.user_locale,e[109]=ke,e[110]=_.category,e[111]=_.disambiguation,e[112]=_.entity_name,e[113]=_.extra_params,e[114]=_.user_locale,e[115]=Me,e[116]=m,e[117]=i,e[118]=$t):$t=e[118];let Bt;e[119]!==R||e[120]!==ke||e[121]!==_||e[122]!==Me||e[123]!==m||e[124]!==i?(Bt=[R,ke,_,Me,m,i],e[119]=R,e[120]=ke,e[121]=_,e[122]=Me,e[123]=m,e[124]=i,e[125]=Bt):Bt=e[125],p.useEffect($t,Bt);let Ut,zt;e[126]!==m?(Ut=()=>{m||(vs.current=null)},zt=[m],e[126]=m,e[127]=Ut,e[128]=zt):(Ut=e[127],zt=e[128]),p.useEffect(Ut,zt);let Es;e:{if(!M||!kn){Es=null;break e}let u;e[129]!==_||e[130]!==f||e[131]!==M||e[132]!==Ms?(u={generator:f,data_loader:mn,settings:M,prompts:Ms,entity:_},e[129]=_,e[130]=f,e[131]=M,e[132]=Ms,e[133]=u):u=e[133],Es=u}const je=Es;let Ht;e[134]!==je?(Ht=je?gt(je):null,e[134]=je,e[135]=Ht):Ht=e[135];const Ue=Ht;let Wt;e[136]!==ee||e[137]!==_||e[138]!==f||e[139]!==m||e[140]!==w||e[141]!==B||e[142]!==je||e[143]!==Ue?(Wt=u=>{var ft,fs,gs,Re;const h=(ft=u==null?void 0:u.force)!=null?ft:!1;if(!m){be(),ne.current=null;return}if(!je||!Ue){be();return}if(!h&&Ue===B){be();return}if(!h&&((fs=ne.current)==null?void 0:fs.signature)===Ue){be();return}const g=(Re=(gs=ne.current)==null?void 0:gs.editCount)!=null?Re:w;let v=ee-g;if(h&&(v=Math.max(v,Os)),v<=0){be();return}const I=je,de=Ue,ue=ee,_e=f,ms=_,mt=()=>{be(),ne.current={signature:de,editCount:ue},O(null),oe(!0),Qr(I).then(he=>{const{jobId:ps,workflowId:Rn}=he;W(de),S(ue),fe(Pn=>[{id:ps,workflowId:Rn,status:"running",startedAt:new Date,completedAt:null,generator:_e,dataLoader:mn,entity:ms,error:null,processed:null,succeeded:null,failed:null},...Pn])}).catch(he=>{O(he instanceof Error?he.message:String(he))}).finally(()=>{var he,ps;((he=ne.current)==null?void 0:he.signature)===de&&((ps=ne.current)==null?void 0:ps.editCount)===ue&&(ne.current=null),oe(!1)})};if(h||v>=Os){mt();return}be(),A.current=window.setTimeout(mt,fn)},e[136]=ee,e[137]=_,e[138]=f,e[139]=m,e[140]=w,e[141]=B,e[142]=je,e[143]=Ue,e[144]=Wt):Wt=e[144];const De=Wt;let qt,Jt;e[145]!==De?(qt=()=>(De(),()=>{be()}),Jt=[be,De],e[145]=De,e[146]=qt,e[147]=Jt):(qt=e[146],Jt=e[147]),p.useEffect(qt,Jt);let Gt;e[148]!==De?(Gt=()=>{De({force:!0})},e[148]=De,e[149]=Gt):Gt=e[149];const ws=Gt;let Vt;e[150]!==$?(Vt=$.filter(ra).map(na),e[150]=$,e[151]=Vt):Vt=e[151];const ze=Vt;let Qt,Kt;e[152]!==ze?(Qt=()=>{if(ze.length===0)return;const u=window.setInterval(()=>{Yr(ze).then(h=>{fe(g=>{const v=new Map(g.map(sa));return h.forEach(I=>{v.set(I.id,I)}),Array.from(v.values()).sort(ta)})}).catch(h=>O(h instanceof Error?h.message:String(h)))},2500);return()=>window.clearInterval(u)},Kt=[ze],e[152]=ze,e[153]=Qt,e[154]=Kt):(Qt=e[153],Kt=e[154]),p.useEffect(Qt,Kt);let Yt;e[155]===Symbol.for("react.memo_cache_sentinel")?(Yt=(u,h)=>{ye(),G(g=>Se(q({},g),{[u]:Se(q({},g[u]),{content:h})}))},e[155]=Yt):Yt=e[155];const Mn=Yt;let Xt;e[156]===Symbol.for("react.memo_cache_sentinel")?(Xt=u=>{ye(),k(u)},e[156]=Xt):Xt=e[156];const En=Xt;let Zt;e[157]===Symbol.for("react.memo_cache_sentinel")?(Zt=u=>{ye(),N(u)},e[157]=Zt):Zt=e[157];const wn=Zt;let es;e[158]===Symbol.for("react.memo_cache_sentinel")?(es=(u,h)=>{ye(),xe(g=>Se(q({},g),{[u]:h}))},e[158]=es):es=e[158];const Nn=es;let ts;e[159]===Symbol.for("react.memo_cache_sentinel")?(ts=(u,h,g)=>{ye(),ge(v=>v.map(I=>I.id===u?Se(q({},I),{[h]:g}):I))},e[159]=ts):ts=e[159];const Tn=ts;let ss;e[160]===Symbol.for("react.memo_cache_sentinel")?(ss=u=>{ye(),ge(h=>h.filter(g=>g.id!==u))},e[160]=ss):ss=e[160];const In=ss;let ns;e[161]===Symbol.for("react.memo_cache_sentinel")?(ns=()=>{ye(),ge(u=>[...u,{id:Ss(),key:"",value:""}])},e[161]=ns):ns=e[161];const Dn=ns;let rs,as;if(e[162]!==$||e[163]!==d?(rs=()=>{$.forEach(u=>{u.status==="succeeded"&&!D.current.has(u.id)&&(D.current.add(u.id),d())})},as=[$,d],e[162]=$,e[163]=d,e[164]=rs,e[165]=as):(rs=e[164],as=e[165]),p.useEffect(rs,as),!m)return null;const Ns=X||ze.length>0,{sidebarLeft:Ts,viewportWidth:Is,debugSidebarRight:Gs}=pe;if(Ts<=Gs||Is<=0)return null;const os=Math.max(Gs,0),is=Ts>0&&Is>0?Math.max(Is-Ts,0):0;let ls;e[166]!==os||e[167]!==is?(ls=is>0?{insetInlineStart:"".concat(os,"px"),insetInlineEnd:"".concat(is,"px")}:{insetInlineStart:"".concat(os,"px")},e[166]=os,e[167]=is,e[168]=ls):ls=e[168];const Ds=ls;let He;e[169]!==l?(He=l.formatMessage({id:"sidebarDebugger.panelTitle",defaultMessage:"Sidebar Generation Debugger"}),e[169]=l,e[170]=He):He=e[170];let We;e[171]!==He?(We=s.jsx("h2",{className:"text-base font-semibold",children:He}),e[171]=He,e[172]=We):We=e[172];let qe;e[173]!==l||e[174]!==Ns?(qe=Ns&&s.jsxs("div",{className:"text-token-text-secondary flex items-center gap-1 text-xs font-medium",children:[s.jsx(jn,{size:14}),s.jsx("span",{children:l.formatMessage({id:"sidebarDebugger.generationRunning",defaultMessage:"Generation running…"})})]}),e[173]=l,e[174]=Ns,e[175]=qe):qe=e[175];let Je;e[176]!==We||e[177]!==qe?(Je=s.jsxs("div",{className:"flex items-center gap-3",children:[We,qe]}),e[176]=We,e[177]=qe,e[178]=Je):Je=e[178];let cs;e[179]===Symbol.for("react.memo_cache_sentinel")?(cs=()=>x(!1),e[179]=cs):cs=e[179];let Ge;e[180]!==l?(Ge=l.formatMessage({id:"sidebarDebugger.close",defaultMessage:"Close"}),e[180]=l,e[181]=Ge):Ge=e[181];let Ve;e[182]!==Ge?(Ve=s.jsx("button",{className:"border-token-border-light hover:bg-token-bg-tertiary rounded-md border px-3 py-1 text-xs font-semibold",onClick:cs,children:Ge}),e[182]=Ge,e[183]=Ve):Ve=e[183];let Qe;e[184]!==Je||e[185]!==Ve?(Qe=s.jsxs("div",{className:"border-token-border-light flex items-center justify-between border-b pb-2",children:[Je,Ve]}),e[184]=Je,e[185]=Ve,e[186]=Qe):Qe=e[186];let Ke;e[187]!==Q?(Ke=Q&&s.jsx("div",{className:"border-token-border-light bg-token-bg-critical-subtle text-token-text-error mt-3 rounded-md border px-3 py-2 text-xs",children:Q}),e[187]=Q,e[188]=Ke):Ke=e[188];const Rs=!!je;let Ye;e[189]!==f||e[190]!==ws||e[191]!==l||e[192]!==X||e[193]!==L||e[194]!==y||e[195]!==Rs?(Ye=s.jsx(la,{intl:l,generator:f,settingsText:y,settingsError:L,onGeneratorChange:En,onSettingsTextChange:wn,onManualGenerate:ws,canManualGenerate:Rs,isSubmitting:X}),e[189]=f,e[190]=ws,e[191]=l,e[192]=X,e[193]=L,e[194]=y,e[195]=Rs,e[196]=Ye):Ye=e[196];let Xe;e[197]!==l||e[198]!==U||e[199]!==C||e[200]!==Cs?(Xe=s.jsx(ca,{intl:l,visiblePromptKeys:Cs,promptEditors:C,loadingPrompts:U,onPromptChange:Mn}),e[197]=l,e[198]=U,e[199]=C,e[200]=Cs,e[201]=Xe):Xe=e[201];let Ze;e[202]!==Ye||e[203]!==Xe?(Ze=s.jsxs("div",{className:"flex flex-col gap-4",children:[Ye,Xe]}),e[202]=Ye,e[203]=Xe,e[204]=Ze):Ze=e[204];let et;e[205]!==le||e[206]!==te||e[207]!==l||e[208]!==K?(et=s.jsx(da,{intl:l,availableTags:le,tagOverrides:K,extraParamEntries:te,onTagChange:Nn,onExtraParamChange:Tn,onRemoveExtraParam:In,onAddExtraParam:Dn}),e[205]=le,e[206]=te,e[207]=l,e[208]=K,e[209]=et):et=e[209];let tt;e[210]!==l||e[211]!==$||e[212]!==c?(tt=s.jsx(ua,{intl:l,jobs:$,locale:c}),e[210]=l,e[211]=$,e[212]=c,e[213]=tt):tt=e[213];let st;e[214]!==_.category||e[215]!==_.user_locale||e[216]!==l?(st=l.formatMessage({id:"sidebarDebugger.autoQueueDescription",defaultMessage:"We automatically enqueue a new job ~{seconds}s after you pause typing or every {edits} edits. Each job uses the current entity context ({category}, locale {locale})."},{seconds:fn/1e3,edits:Os,category:_.category,locale:_.user_locale}),e[214]=_.category,e[215]=_.user_locale,e[216]=l,e[217]=st):st=e[217];let nt;e[218]!==st?(nt=s.jsx("p",{children:st}),e[218]=st,e[219]=nt):nt=e[219];let rt;e[220]!==l?(rt=l.formatMessage({id:"sidebarDebugger.completedJobDescription",defaultMessage:"Completed jobs trigger a sidebar refresh so you can inspect the newest cached response inline."}),e[220]=l,e[221]=rt):rt=e[221];let at;e[222]!==rt?(at=s.jsx("p",{className:"mt-2",children:rt}),e[222]=rt,e[223]=at):at=e[223];let ot;e[224]!==nt||e[225]!==at?(ot=s.jsxs("div",{className:"border-token-border-light text-token-text-secondary rounded-xl border p-3 text-xs",children:[nt,at]}),e[224]=nt,e[225]=at,e[226]=ot):ot=e[226];let it;e[227]!==et||e[228]!==tt||e[229]!==ot?(it=s.jsxs("div",{className:"flex flex-col gap-4",children:[et,tt,ot]}),e[227]=et,e[228]=tt,e[229]=ot,e[230]=it):it=e[230];let lt;e[231]!==Ze||e[232]!==it?(lt=s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-[3fr_1fr]",children:[Ze,it]}),e[231]=Ze,e[232]=it,e[233]=lt):lt=e[233];let ds;e[234]!==Ds||e[235]!==Qe||e[236]!==Ke||e[237]!==lt?(ds=s.jsxs("div",{className:"bg-token-bg-primary text-token-text-primary fixed inset-y-0 start-0 z-30 overflow-y-auto p-4 text-sm",style:Ds,children:[Qe,Ke,lt]}),e[234]=Ds,e[235]=Qe,e[236]=Ke,e[237]=lt,e[238]=ds):ds=e[238];const Ps=ds;if(typeof document>"u")return null;let us;return e[239]!==Ps?(us=Bn.createPortal(Ps,document.body),e[239]=Ps,e[240]=us):us=e[240],us}function ta(t,e){return e.startedAt.getTime()-t.startedAt.getTime()}function sa(t){return[t.id,t]}function na(t){return t.id}function ra(t){return t.status==="running"}function aa(t){return typeof t=="string"?t.replace(/[\u00A0\u202F]/g," "):t!=null?t:void 0}function oa(){return typeof globalThis.crypto<"u"&&typeof globalThis.crypto.randomUUID=="function"?globalThis.crypto.randomUUID():"extra-".concat(Math.random().toString(36).slice(2))}function ia(t){return t+1}function la({intl:t,generator:e,settingsText:n,settingsError:r,onGeneratorChange:o,onSettingsTextChange:a,onManualGenerate:c,canManualGenerate:d,isSubmitting:i}){return s.jsxs("div",{className:"border-token-border-light rounded-xl border p-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:t.formatMessage({id:"sidebarDebugger.jobSettingsTitle",defaultMessage:"Job Settings"})}),s.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:s.jsxs("label",{className:"text-xxs text-token-text-secondary font-medium tracking-wide uppercase",children:[t.formatMessage({id:"sidebarDebugger.generatorLabel",defaultMessage:"Generator"}),s.jsx("input",{className:"border-token-border-light bg-token-bg-primary mt-1 w-full rounded-md border px-2 py-1 text-sm",value:e,onChange:l=>o(l.target.value)})]})}),s.jsxs("label",{className:"text-xxs text-token-text-secondary mt-3 block font-medium tracking-wide uppercase",children:[t.formatMessage({id:"sidebarDebugger.rawSettingsLabel",defaultMessage:"Raw Settings JSON"}),s.jsx("textarea",{className:me("bg-token-bg-primary mt-1 h-48 w-full rounded-md border px-2 py-2 font-mono text-xs",r?"border-token-border-critical text-token-text-error":"border-token-border-light"),placeholder:t.formatMessage({id:"sidebarDebugger.rawSettingsPlaceholder",defaultMessage:"Paste settings JSON here"}),value:n,onChange:l=>a(l.target.value)})]}),r&&s.jsx("div",{className:"text-token-text-error mt-1 text-xs",children:r}),s.jsx("button",{type:"button",className:me("mt-3 inline-flex items-center justify-center rounded-md border px-3 py-1 text-xs font-semibold",d&&!i?"border-token-border-light hover:bg-token-bg-tertiary":"border-token-border-subtle text-token-text-tertiary cursor-not-allowed"),disabled:!d||i,onClick:c,children:i?t.formatMessage({id:"sidebarDebugger.submittingLabel",defaultMessage:"Submitting…"}):t.formatMessage({id:"sidebarDebugger.generateNow",defaultMessage:"Generate now"})})]})}function ca({intl:t,visiblePromptKeys:e,promptEditors:n,loadingPrompts:r,onPromptChange:o}){return s.jsxs("div",{className:"border-token-border-light rounded-xl border p-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:t.formatMessage({id:"sidebarDebugger.promptEditorsTitle",defaultMessage:"Prompt Editors"})}),r&&s.jsxs("div",{className:"text-token-text-secondary mb-2 flex items-center gap-2 text-xs",children:[s.jsx(jn,{size:12}),s.jsx("span",{children:t.formatMessage({id:"sidebarDebugger.loadingPrompts",defaultMessage:"Loading prompt files…"})})]}),e.map(a=>{const c=a==="user_prompt"?"h-12":a==="system_prompt"?"h-88":"h-32";return s.jsx("div",{className:"mt-3",children:s.jsxs("label",{className:"text-xxs text-token-text-secondary font-medium tracking-wide uppercase",children:[a.replace(/_/g," "),n[a].path&&s.jsx("span",{className:"text-token-text-tertiary ms-1",children:t.formatMessage({id:"sidebarDebugger.promptPathLabel",defaultMessage:"({path})"},{path:n[a].path})}),s.jsx("textarea",{className:me("border-token-border-light bg-token-bg-primary mt-1 w-full rounded-md border px-2 py-2 font-mono text-xs",c),value:n[a].content,onChange:d=>o(a,d.target.value)})]})},a)})]})}function da({intl:t,availableTags:e,tagOverrides:n,extraParamEntries:r,onTagChange:o,onExtraParamChange:a,onRemoveExtraParam:c,onAddExtraParam:d}){return s.jsxs("div",{className:"border-token-border-light rounded-xl border p-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:t.formatMessage({id:"sidebarDebugger.entityOverridesTitle",defaultMessage:"Entity Context Overrides"})}),e.length===0?s.jsx("p",{className:"text-xxs text-token-text-secondary mt-2",children:t.formatMessage({id:"sidebarDebugger.addTagsHelper",defaultMessage:"Add tags to your settings JSON to enable overrides."})}):s.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:e.map(i=>{var l;return s.jsxs("label",{className:"text-xxs text-token-text-secondary font-medium tracking-wide uppercase",children:[i.replace(/_/g," "),s.jsx("input",{className:"border-token-border-light bg-token-bg-secondary mt-1 w-full rounded-md border px-2 py-1 text-[11px]",value:(l=n[i])!=null?l:"",onChange:m=>o(i,m.target.value)})]},i)})}),s.jsx("div",{className:"text-xxs text-token-text-secondary mt-3 font-medium tracking-wide uppercase",children:t.formatMessage({id:"sidebarDebugger.extraParamsLabel",defaultMessage:"Extra Params"})}),r.length===0?s.jsx("p",{className:"text-xxs text-token-text-tertiary mt-1",children:t.formatMessage({id:"sidebarDebugger.noExtraParams",defaultMessage:"No extra params set for this entity."})}):s.jsx("div",{className:"mt-1 flex flex-col gap-2",children:r.map(i=>s.jsxs("div",{className:"grid grid-cols-[1fr,1fr,auto] items-center gap-2",children:[s.jsx("input",{className:"border-token-border-light bg-token-bg-secondary rounded-md border px-2 py-1 text-[11px]",placeholder:t.formatMessage({id:"sidebarDebugger.keyPlaceholder",defaultMessage:"key"}),value:i.key,onChange:l=>a(i.id,"key",l.target.value)}),s.jsx("input",{className:"border-token-border-light bg-token-bg-secondary rounded-md border px-2 py-1 text-[11px]",placeholder:t.formatMessage({id:"sidebarDebugger.valuePlaceholder",defaultMessage:"value"}),value:i.value,onChange:l=>a(i.id,"value",l.target.value)}),s.jsx("button",{type:"button",className:"text-token-text-critical text-[11px] font-semibold hover:underline",onClick:()=>c(i.id),children:t.formatMessage({id:"sidebarDebugger.removeExtraParam",defaultMessage:"Remove"})})]},i.id))}),s.jsx("button",{type:"button",className:"text-token-text-brand mt-2 text-start text-[11px] font-semibold hover:underline",onClick:d,children:t.formatMessage({id:"sidebarDebugger.addParam",defaultMessage:"+ Add param"})})]})}function ua({intl:t,jobs:e,locale:n}){const r=p.useCallback(o=>{const a={running:{id:"sidebarDebugger.jobStatusRunning",defaultMessage:"Running",description:"Status badge label for running jobs"},succeeded:{id:"sidebarDebugger.jobStatusSucceeded",defaultMessage:"Succeeded",description:"Status badge label for successful jobs"},failed:{id:"sidebarDebugger.jobStatusFailed",defaultMessage:"Failed",description:"Status badge label for failed jobs"}};return t.formatMessage(a[o])},[t]);return s.jsxs("div",{className:"border-token-border-light rounded-xl border p-3",children:[s.jsx("h3",{className:"text-sm font-semibold",children:t.formatMessage({id:"sidebarDebugger.queuedJobsTitle",defaultMessage:"Queued Jobs"})}),e.length===0?s.jsx("p",{className:"text-token-text-secondary mt-2 text-xs",children:t.formatMessage({id:"sidebarDebugger.queuedJobsEmpty",defaultMessage:"Jobs appear here once you paste settings and prompts."})}):s.jsx("div",{className:"mt-2 flex max-h-[420px] flex-col gap-2 overflow-y-auto",children:e.map(o=>{var d,i;const a=o.failed&&o.failed>0?"failed":o.status,c=me("rounded-full px-2 py-0.5 text-xxs uppercase tracking-wide",a==="running"&&"bg-token-bg-tertiary",a==="succeeded"&&"bg-token-bg-success-subtle",a==="failed"&&"bg-token-bg-critical-subtle");return s.jsxs("div",{className:"border-token-border-light bg-token-bg-secondary rounded-lg border p-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold",children:[s.jsx("span",{children:o.entity.entity_name}),s.jsx("span",{className:c,children:r(a)})]}),s.jsx("div",{className:"text-token-text-secondary mt-1 text-[11px]",children:t.formatMessage({id:"sidebarDebugger.jobStartedAt",defaultMessage:"Started at {time}"},{time:o.startedAt.toLocaleTimeString(n!=null?n:"en-US")})}),typeof o.processed=="number"&&s.jsxs("div",{className:"mt-1 text-[11px]",children:[s.jsx("span",{className:"text-token-text-secondary me-1",children:t.formatMessage({id:"sidebarDebugger.jobProcessedCount",defaultMessage:"Processed: {count} ·"},{count:o.processed})}),s.jsx("span",{className:"text-token-text-secondary me-1",children:t.formatMessage({id:"sidebarDebugger.jobSucceededCount",defaultMessage:"Succeeded: {count} ·"},{count:(d=o.succeeded)!=null?d:0})}),s.jsx("span",{className:me("text-token-text-secondary",o.failed&&o.failed>0&&"text-token-text-error"),children:t.formatMessage({id:"sidebarDebugger.jobFailedCount",defaultMessage:"Failed: {count}"},{count:(i=o.failed)!=null?i:0})})]}),o.error&&s.jsx("div",{className:"text-token-text-error mt-1 text-[11px]",children:o.error})]},o.id)})})]})}const ma="sidebar-follow-up-button";function fa(t){"use forget";const e=Ce.c(35),{query:n,messageIds:r,category:o,conversationId:a,originatingConversationId:c,conversationContext:d,sidebar:i,isModal:l}=t,m=Ee(),[x]=Gn(ga),{setTargetedContent:f}=ur(),{openThreadSidebar:k,closeThreadSidebar:y}=mr();if(x)return null;let N;e[0]!==m?(N=m.formatMessage({id:"entities.sidebarFollowUpFloatingButton.label",defaultMessage:"Follow up"}),e[0]=m,e[1]=N):N=e[1];const L=N;let J;e[2]!==o||e[3]!==d||e[4]!==a||e[5]!==r||e[6]!==c||e[7]!==n?(J=O=>{if(hs.logEventWithStatsig("Sidebar Follow Up Button Clicked","chatgpt_sidebar_follow_up_button_clicked",{messageIds:r,conversationId:a,originatingConversationId:c,category:o}),!n)return O;const z=Qn(n,d);return Se(q({},O),{promptMessage:fr(O.promptMessage,{metadata:{targeted_reply:n}}),appendMessages:O.appendMessages==null?[z]:[...O.appendMessages,z]})},e[2]=o,e[3]=d,e[4]=a,e[5]=r,e[6]=c,e[7]=n,e[8]=J):J=e[8];let M,H;e[9]!==o||e[10]!==r||e[11]!==c?(M=O=>{const{serverThreadId:z,currentLeafId:$}=O;hs.logEventWithStatsig("Sidebar Follow Up Submitted","chatgpt_sidebar_follow_up_submitted",{conversationId:z,currentLeafId:$,messageIds:r,originatingConversationId:c,category:o})},H=O=>{const{serverThreadId:z,currentLeafId:$}=O;hs.logEventWithStatsig("Sidebar Follow Up Cleared","chatgpt_sidebar_follow_up_cleared",{conversationId:z,currentLeafId:$,messageIds:r,originatingConversationId:c,category:o})},e[9]=o,e[10]=r,e[11]=c,e[12]=M,e[13]=H):(M=e[12],H=e[13]);let E;e[14]!==l||e[15]!==k||e[16]!==i?(E=l?()=>k(i):void 0,e[14]=l,e[15]=k,e[16]=i,e[17]=E):E=e[17];let C;e[18]!==n||e[19]!==J||e[20]!==M||e[21]!==H||e[22]!==E?(C={type:"text",label:n,createNewCompletionParams:J,onCreateCompletion:M,onCleared:H,onLabelClick:E},e[18]=n,e[19]=J,e[20]=M,e[21]=H,e[22]=E,e[23]=C):C=e[23];const G=C;let U;e[24]!==y||e[25]!==l||e[26]!==f||e[27]!==G?(U=()=>{l&&y(),f(G)},e[24]=y,e[25]=l,e[26]=f,e[27]=G,e[28]=U):U=e[28];let V;e[29]!==L?(V=s.jsx("span",{className:"flex items-center select-none",children:L}),e[29]=L,e[30]=V):V=e[30];let Q;return e[31]!==L||e[32]!==U||e[33]!==V?(Q=s.jsx("div",{id:ma,className:"fixed end-7 bottom-10 z-[50] md:bottom-8",children:s.jsx(Kn,{size:"large",color:"secondary",icon:Hr,label:L,contentWrapperClassName:"gap-2",className:"corner-superellipse/1.1 text-token-text-primary bg-token-bg-primary shadow-short h-12 cursor-pointer overflow-clip rounded-[28px] border-none bg-clip-padding px-6 py-7 font-medium active:opacity-100! dark:bg-[#303030]",onClick:U,children:V})}),e[31]=L,e[32]=U,e[33]=V,e[34]=Q):Q=e[34],Q}function ga(t){return[Vn(t)]}const pt={};function Fs(t){return!t||t.length===0?null:t[t.length-1]}function pa(t){var o,a,c,d,i,l,m,x,f,k;const e=(i=(d=(o=t.metadata)==null?void 0:o.debug_sonic_thread_id)!=null?d:(c=(a=t.metadata)==null?void 0:a.__internal)==null?void 0:c.sonic_thread_id)!=null?i:null,n=(x=(m=(l=t.metadata)==null?void 0:l.__internal)==null?void 0:m.sonic_user_id)!=null?x:null;let r=t;if(e||n){const y=q({},(f=t.metadata)!=null?f:{});e&&y.debug_sonic_thread_id==null&&(y.debug_sonic_thread_id=e);const N=q({},(k=y.__internal)!=null?k:{});e&&N.sonic_thread_id==null&&(N.sonic_thread_id=e),n&&N.sonic_user_id==null&&(N.sonic_user_id=n),y.__internal=N,r=Se(q({},t),{metadata:y})}return r}const ba=()=>{};function ha({clientThreadId:t,debugThreadId:e,messageId:n,query:r,category:o,extraParams:a}){"use no forget";var z,$,fe;const c=ys(),d=Yn(c),i=Ee(),l=(z=xn(t))!=null?z:t,m=ba(),x=p.useMemo(()=>"entity-".concat(o,"-").concat(r,"-").concat(JSON.stringify(a!=null?a:{}),"-").concat(l,"-").concat(n,"-").concat(e),[o,r,a,l,n,e]),f=pt[x],[k,y]=p.useState(($=f==null?void 0:f.messages)!=null?$:[]),[N,L]=p.useState((fe=f==null?void 0:f.sidebarConversationId)!=null?fe:null),[J,M]=p.useState({}),[H,E]=p.useState(null),[C,G]=p.useState(()=>{var B;return $s(Fs((B=f==null?void 0:f.messages)!=null?B:null))}),[U,V]=p.useState(!1);p.useEffect(()=>{E(null)},[r,o]);const Q=p.useRef(null),O=p.useCallback(async B=>{var X;Q.current&&Q.current.abort();const W=new AbortController;Q.current=W,y([]),pt[x]=null,G([]),V(!0);try{const{chatReq:F,turnstileToken:te,proofToken:ge}=await gr(c,void 0),ee=pr(F,te,ge,null);E(null);const b=br("".concat(hn,"/sidebar/conversation"),{method:"POST",headers:q(Se(q({},_s({isAuthOptional:!0})),{"Content-Type":"application/json"}),ee),body:q(q({conversation_id:l,message_id:n,supported_encodings:[hr.V1],is_client_thread:l===t},B!=null?B:{}),o==="ask_sidebar"?{category:"ask_sidebar",locale:i.locale,ask_sidebar_params:{query:r,additional_context:a==null?void 0:a.context}}:{category:"generic_entity",locale:i.locale,generic_entity_params:{name:r,category:o,extra_params:a,multi_message_mode:!0}}),signal:W.signal});let w=null,S=null;try{for(var oe=ln(xr(b)),Z,K,xe;Z=!(K=await oe.next()).done;Z=!1){const j=K.value;if(W.signal.aborted)break;if(!("data"in j))continue;const P=j.data,{type:T,data:D}=P;if(T==="message"&&D){const A=$s(D);A.length>0&&G(A)}if(T==="message"&&D&&D.author.role===yn.Assistant&&_n(D)&&(!D.channel||D.channel==="final")){const A=pa(D),ne=(X=S!=null?S:P.conversation_id)!=null?X:null;y(se=>{const pe=se.findIndex(ie=>ie.id===A.id);let re;return pe===-1?re=[...se,A]:(re=[...se],re[pe]=A),A.status==="finished_successfully"&&(pt[x]={messages:re,sidebarConversationId:ne}),re}),!S&&P.conversation_id&&(L(P.conversation_id),S=P.conversation_id,Zn(t)&&Xn.setServerIdForNewThread(t,S))}T==="__debug"&&D&&M(A=>q(q({},A),D))}}catch(K){xe=[K]}finally{try{Z&&(K=oe.return)&&await K.call(oe)}finally{if(xe)throw xe[0]}}V(!1)}catch(F){W.abort(),pt[x]=null,E(F),V(!1)}},[x,l,t,e,n,r,o,a,c,d,i.locale,m]);return p.useEffect(()=>{const B=pt[x];if(B){y(B.messages),L(B.sidebarConversationId),G($s(Fs(B.messages)));return}return O(),()=>{var W;(W=Q.current)==null||W.abort(),y([]),G([]),V(!1)}},[x,l,t,e,n,r,o,a,c,d,i.locale]),{messages:k,latestMessage:Fs(k),sidebarConversationId:N,error:H,searchModelQueries:C,isStreaming:U,debugData:J,regenerate:()=>O({force_regenerate:!0}),refreshFromCache:()=>O({force_regenerate:!1})}}function $s(t){var n,r;const e=(r=(n=t==null?void 0:t.metadata)==null?void 0:n.search_model_queries)==null?void 0:r.queries;return Array.isArray(e)?e:[]}function xa(t){if(!(!t||Object.keys(t).length===0))return t}function gn(t){if(!t||Object.keys(t).length===0)return"{}";const e={};return Object.keys(t).sort().forEach(n=>{e[n]=t[n]}),JSON.stringify(e)}function ya({initialQuery:t,initialCategory:e,initialExtraParams:n}){var m,x,f;const[r,o]=p.useState(null),a=(m=r==null?void 0:r.query)!=null?m:t,c=(x=r==null?void 0:r.category)!=null?x:e,d=(f=r==null?void 0:r.hasExtraParamsOverride)!=null&&f?r==null?void 0:r.extraParams:n,i=p.useMemo(()=>gn(n),[n]);p.useEffect(()=>{o(null)},[e,i,t]);const l=p.useCallback(k=>{const y=xa(k.extraParams),N=gn(y);if(k.query===t&&k.category===e&&N===i){o(null);return}o({query:k.query,category:k.category,extraParams:y,hasExtraParamsOverride:!0})},[e,i,t]);return{query:a,category:c,extraParams:d,handleEntityContextChange:l}}const _a="";function Sa(t){"use forget";var le;const e=Ce.c(58),{conversation:n,debugThreadId:r,messageId:o,query:a,category:c,extraParams:d,offsetTopMargin:i,isModal:l,sidebar:m}=t,x=ys(),f=Ee(),k=er();let y;e[0]!==c||e[1]!==d||e[2]!==a?(y={initialQuery:a,initialCategory:c,initialExtraParams:d},e[0]=c,e[1]=d,e[2]=a,e[3]=y):y=e[3];const{query:N,category:L,extraParams:J,handleEntityContextChange:M}=ya(y);let H;e[4]!==L||e[5]!==n.id||e[6]!==r||e[7]!==J||e[8]!==o||e[9]!==N?(H={clientThreadId:n.id,debugThreadId:r,messageId:o,query:N,category:L,extraParams:J},e[4]=L,e[5]=n.id,e[6]=r,e[7]=J,e[8]=o,e[9]=N,e[10]=H):H=e[10];const{messages:E,latestMessage:C,sidebarConversationId:G,error:U,searchModelQueries:V,regenerate:Q,refreshFromCache:O,isStreaming:z,debugData:$}=ha(H),fe=bn(x),B=tr(),{showDebugConversationTurns:W}=sr();let X;e[11]!==n.id||e[12]!==B?(X=(le=xn(n.id))!=null?le:B,e[11]=n.id,e[12]=B,e[13]=X):X=e[13];const oe=X,Z=Sn(x,"1290093942");let K;e[14]!==k?(K=!1,e[14]=k,e[15]=K):K=e[15];const xe=!!K,F=E.flatMap(Ma);let te;e[16]!==E?(te=E.filter(_n).map(ka),e[16]=E,e[17]=te):te=e[17];const ge=te;let ee;e[18]!==E?(ee=yr(E.flatMap(Ca)),e[18]=E,e[19]=ee):ee=e[19];const b=ee,w=F.length>0,S=p.useRef(null),j=me("bg-token-bg-primary flex min-h-screen w-full flex-col",i?fe?"mt-[calc(var(--threadFlyOut-leading-height,var(--header-height))*-1)] min-h-screen":"mt-[calc(var(--threadFlyOut-leading-height,53px)*-1)] min-h-screen":"mt-[-1px]",Z&&"mb-10"),P=w&&"border-t";let T;e[20]!==P?(T=me("border-token-border-light mb-[60px] flex flex-col px-6",P),e[20]=P,e[21]=T):T=e[21];const D=w?F.map((Pe,Ae)=>{var we,Ne,ye;const{message:ae,textContent:Le,isEmpty:ct,displayParts:Oe}=Pe;return s.jsx("div",{className:me("text-sm",Ae===0&&"mt-4"),"data-message-author-role":ae.author.role,"data-message-id":ae.id,children:s.jsx(Ur,{parts:Le.parts||[],isUserTurn:!1,isCompletionInProgress:!1,turnIndex:Ae,displayParts:Oe,isActivelyStreaming:!1,shouldHideContent:!1,conversation:n,id:ae.id,isEmpty:ct,messages:[ae],citations:(we=ae.metadata)==null?void 0:we.citations,contentReferences:(ye=(Ne=ae.metadata)==null?void 0:Ne.content_references)==null?void 0:ye.filter(ja),size:"small",flagSeverity:void 0})},ae.id)}):!U&&s.jsx(Gr,{searchModelQueries:V});let A;e[22]!==U?(A=U&&s.jsx("div",{className:"bg-token-bg-status-error border-token-surface-error/15 text-token-text-error my-4 border p-2 text-sm whitespace-pre-wrap",children:U.message}),e[22]=U,e[23]=A):A=e[23];const ne=!z&&s.jsxs("div",{className:"flex items-center justify-start pt-2 select-none",children:[F&&F.length>0&&s.jsx(Aa,{messages:F.map(va),clientThreadId:n.id}),C&&G&&oe&&s.jsx(La,{messageId:C.id,category:L,conversationId:G,metadata:{originatingConversationId:oe}}),s.jsx(Pa,{onClick:Q}),C&&s.jsx(Na,{message:C})]});let se;e[24]!==ge||e[25]!==L||e[26]!==b||e[27]!==Z||e[28]!==l||e[29]!==C||e[30]!==oe||e[31]!==N||e[32]!==m||e[33]!==G?(se=Z&&C&&G&&oe&&b&&s.jsx(fa,{query:N,messageIds:ge,category:L,conversationId:G,originatingConversationId:oe,conversationContext:b,isModal:l,sidebar:m}),e[24]=ge,e[25]=L,e[26]=b,e[27]=Z,e[28]=l,e[29]=C,e[30]=oe,e[31]=N,e[32]=m,e[33]=G,e[34]=se):se=e[34];let pe;e[35]!==D||e[36]!==A||e[37]!==ne||e[38]!==se||e[39]!==T?(pe=s.jsxs("div",{className:T,children:[D,A,ne,se]}),e[35]=D,e[36]=A,e[37]=ne,e[38]=se,e[39]=T,e[40]=pe):pe=e[40];let re;e[41]!==$||e[42]!==z||e[43]!==W?(re=!1,e[41]=$,e[42]=z,e[43]=W,e[44]=re):re=e[44];let ie;e[45]!==M||e[46]!==c||e[47]!==d||e[48]!==a||e[49]!==f||e[50]!==O||e[51]!==xe?(ie=xe&&s.jsx(ea,{containerRef:S,query:a,category:c,extraParams:d,locale:f.locale,refreshFromCache:O,onEntityContextChange:M}),e[45]=M,e[46]=c,e[47]=d,e[48]=a,e[49]=f,e[50]=O,e[51]=xe,e[52]=ie):ie=e[52];let ve;return e[53]!==pe||e[54]!==re||e[55]!==ie||e[56]!==j?(ve=s.jsxs("div",{ref:S,className:j,children:[pe,re,ie]}),e[53]=pe,e[54]=re,e[55]=ie,e[56]=j,e[57]=ve):ve=e[57],ve}function va(t){return t.message}function ja(t){return t.type!=="product_entity"}function Ca(t){var n;const e=t.content;return!e||e.content_type!==xs.Text&&e.content_type!==xs.MultimodalText?[]:(n=e.parts)!=null?n:[]}function ka(t){return t.id}function Ma(t,e){var c,d,i;const n=e===0;if(!t.content||t.content.content_type!==xs.Text&&t.content.content_type!==xs.MultimodalText)return[];const r=t.content,o=(d=(c=t.metadata)==null?void 0:c.content_references)==null?void 0:d.some(wa);if(n&&r.parts[0]&&typeof r.parts[0]=="string"&&r.parts[0].startsWith(_a)&&!o)return[];const a=!r.parts.some(Ea)&&!o;return[{message:t,textContent:r,isEmpty:a,displayParts:_r((i=r.parts)!=null?i:[])}]}function Ea(t){return t!==""}function wa(t){return t.type!=="hidden"}function Na(t){"use forget";var m;const e=Ce.c(11),{message:n}=t;let r,o,a;if(e[0]!==n){a=Symbol.for("react.early_return_sentinel");e:{if(r=Da(n!=null?n:null),!r){a=null;break e}o=(m=r==null?void 0:r.map(Ia).filter(Ta))!=null?m:[]}e[0]=n,e[1]=r,e[2]=o,e[3]=a}else r=e[1],o=e[2],a=e[3];if(a!==Symbol.for("react.early_return_sentinel"))return a;const c=o;let d;e[4]!==c?(d=s.jsx(Mr,{children:s.jsx(Er,{sourcesUrls:c,className:"hover:bg-token-bg-secondary rounded-lg"})}),e[4]=c,e[5]=d):d=e[5];let i;e[6]!==r?(i=s.jsx(wr,{children:s.jsx(Nr,{className:"bg-token-bg-primary border-token-border-default xs:max-w-[400px] max-h-[50vh] max-w-[90vw] overflow-y-auto rounded-[20px] border-1 bg-clip-padding px-4 py-3 shadow-md",side:"top",sideOffset:4,align:"center",collisionPadding:28,avoidCollisions:!0,children:s.jsx(Ra,{items:r})})}),e[6]=r,e[7]=i):i=e[7];let l;return e[8]!==d||e[9]!==i?(l=s.jsxs(Tr,{children:[d,i]}),e[8]=d,e[9]=i,e[10]=l):l=e[10],l}function Ta(t){return!!t}function Ia(t){return t.url}function Da(t){var o,a;if(!t)return;const e=(a=(o=t.metadata)==null?void 0:o.search_result_groups)!=null?a:[];if(!e.length)return;const n=new Map;e.forEach(c=>{var d;((d=c.entries)!=null?d:[]).forEach(i=>{var m,x;if(!(i!=null&&i.url)||n.has(i.url))return;const l=Se(q({},i),{attribution:(x=(m=i.attribution)!=null?m:c.domain)!=null?x:kr(i.url,"short")});n.set(i.url,l)})});const r=Array.from(n.values()).sort((c,d)=>{var i,l;return((i=d.pub_date)!=null?i:0)-((l=c.pub_date)!=null?l:0)});if(r.length)return r}function Ra({items:t}){return t.length===0?null:s.jsx("div",{className:"flex flex-col gap-3",children:s.jsx("ul",{className:"-mx-2 flex flex-col gap-1",children:t.map((e,n)=>{var r;return s.jsx("li",{children:s.jsx(Ir,{item:e})},"".concat((r=e.url)!=null?r:"source","-").concat(n))})})})}const Pa=t=>{"use forget";const e=Ce.c(5),{onClick:n}=t,r=Ee();let o;e[0]!==r?(o=r.formatMessage({id:"gW2N97",defaultMessage:"Try again..."}),e[0]=r,e[1]=o):o=e[1];let a;return e[2]!==n||e[3]!==o?(a=s.jsx(Us,{icon:Dr,onClick:n,label:o,size:"med"}),e[2]=n,e[3]=o,e[4]=a):a=e[4],a},Aa=t=>{"use forget";const e=Ce.c(4),{messages:n,clientThreadId:r}=t,o=Un();let a;return e[0]!==r||e[1]!==n||e[2]!==o?(a=s.jsx(zr,{size:"med",onClick:async c=>{const d=await Rr({role:yn.Assistant,messages:n},o,r);await nr(d,void 0,c)}}),e[0]=r,e[1]=n,e[2]=o,e[3]=a):a=e[3],a},La=t=>{"use forget";const e=Ce.c(17),{messageId:n,category:r,conversationId:o,metadata:a}=t,c=Ee(),[d,i]=p.useState(null);let l;e[0]!==r||e[1]!==o||e[2]!==d||e[3]!==n||e[4]!==a?(l=y=>{d!==y&&(Pr({rating:Ar(y)},o,n,"CHAT",a),hs.logEventWithStatsig(y==="thumbsDown"?"Sidebar Message Feedback Thumbs Down Clicked":"Sidebar Message Feedback Thumbs Up Clicked","chatgpt_sidebar_thumb_feedback",{message_id:n,conversation_id:o,originating_conversation_id:a.originatingConversationId,rating:y,category:r,surface:"web"})),i(N=>N===y?null:y)},e[0]=r,e[1]=o,e[2]=d,e[3]=n,e[4]=a,e[5]=l):l=e[5];const m=l;let x;e[6]!==d||e[7]!==m||e[8]!==c?(x=d!=="thumbsDown"&&s.jsx(Us,{size:"med",onClick:()=>{m("thumbsUp")},selected:d==="thumbsUp",icon:d==="thumbsUp"?Sr:vr,label:c.formatMessage({id:"ConversationTurn.goodResponseTooltip",defaultMessage:"Good response"}),testId:"good-response-turn-action-button"}),e[6]=d,e[7]=m,e[8]=c,e[9]=x):x=e[9];let f;e[10]!==d||e[11]!==m||e[12]!==c?(f=d!=="thumbsUp"&&s.jsx(Us,{size:"med",onClick:()=>{m("thumbsDown")},selected:d==="thumbsDown",icon:d==="thumbsDown"?jr:Cr,label:c.formatMessage({id:"ConversationTurn.badResponseTooltip",defaultMessage:"Bad response"}),testId:"bad-response-turn-action-button"}),e[10]=d,e[11]=m,e[12]=c,e[13]=f):f=e[13];let k;return e[14]!==x||e[15]!==f?(k=s.jsxs(s.Fragment,{children:[x,f]}),e[14]=x,e[15]=f,e[16]=k):k=e[16],k};function pn(t){return t.length>0&&t[0]===t[0].toLocaleUpperCase()?t:t.split(" ").map(e=>Or(e)).join(" ")}function Io(t){"use forget";const e=Ce.c(99),{conversation:n,sidebar:r,setWidth:o,type:a}=t,c=a===void 0?"sidebar":a,d=ys(),i=Ee(),{contentReferenceStartIndex:l,messageId:m,query:x,category:f,debugThreadId:k,extraParams:y}=r,{setScrollTopForActive:N,currentHistoryScrollTop:L,setFullWidthImageHeightForIndex:J,currentHistoryFullWidthImageHeight:M,activeHistoryIndex:H,closeThreadSidebarAndResetHistory:E}=vn();let C;e[0]!==d?(C=Sn(d,"1225428216"),e[0]=d,e[1]=C):C=e[1];const G=C;let U;e[2]!==n.id||e[3]!==m?(U={clientThreadId:n.id,messageId:m},e[2]=n.id,e[3]=m,e[4]=U):U=e[4];const V=U,Q=p.useRef(null);let O,z;e[5]!==o||e[6]!==c?(O=()=>{if(c!=="sidebar"||!o)return;const b=()=>{const w=typeof window<"u"?window.innerWidth:0,S=w>0?Math.min(Math.max(w/4,400),500):400;o("".concat(S,"px"))};return b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},z=[o,c],e[5]=o,e[6]=c,e[7]=O,e[8]=z):(O=e[7],z=e[8]),p.useEffect(O,z);let $,fe;e[9]!==N?($=()=>{const b=Q.current;if(!b)return;const w=function(){b&&N&&N(b.scrollTop)};return b.addEventListener("scroll",w,{passive:!0}),()=>{b.removeEventListener("scroll",w)}},fe=[Q,N],e[9]=N,e[10]=$,e[11]=fe):($=e[10],fe=e[11]),p.useEffect($,fe);let B;e[12]!==H||e[13]!==J?(B=b=>{H<0||J(H,b)},e[12]=H,e[13]=J,e[14]=B):B=e[14];const W=B;let X;e[15]!==d?(X=()=>{var b;or(d)&&ir.set(d,"new_page_view"),(b=lr())==null||b.becomeMainPage()},e[15]=d,e[16]=X):X=e[16];const oe=X;let Z;e[17]!==f||e[18]!==i||e[19]!==x?(Z=pn(x),f==="ask_sidebar"&&(Z=i.formatMessage({id:"region.sidebar.entity.moreDetails",defaultMessage:"More Details"})),e[17]=f,e[18]=i,e[19]=x,e[20]=Z):Z=e[20];const K="".concat(m,"-category-").concat(f,"-query-").concat(x),xe=f==="product"&&!G||f==="product_link";let F;if(xe){let b;e[21]!==x?(b={query:x,title:x,provider:"",id:"",url:""},e[21]=x,e[22]=b):b=e[22];const w=b,S=c==="sidebar";let j;e[23]!==V||e[24]!==l||e[25]!==n.id||e[26]!==m||e[27]!==w||e[28]!==S?(j=s.jsx(Br,{product:w,setUpdatedProduct:Oa,clientThreadId:n.id,messageId:m,contentReferenceStartIndex:l,productIndex:-1,analyticsMetadata:V,offsetTopMargin:S}),e[23]=V,e[24]=l,e[25]=n.id,e[26]=m,e[27]=w,e[28]=S,e[29]=j):j=e[29],F=j}else{const b=f!=null?f:"other",w=c==="sidebar"&&M!==null,S=c==="modal";let j;e[30]!==n||e[31]!==k||e[32]!==y||e[33]!==m||e[34]!==x||e[35]!==r||e[36]!==b||e[37]!==w||e[38]!==S?(j=s.jsx(Sa,{conversation:n,debugThreadId:k,messageId:m,query:x,category:b,extraParams:y,offsetTopMargin:w,sidebar:r,isModal:S}),e[30]=n,e[31]=k,e[32]=y,e[33]=m,e[34]=x,e[35]=r,e[36]=b,e[37]=w,e[38]=S,e[39]=j):j=e[39],F=j}const te=L,ge=M!=null?M:0,ee=te<=ge||xe||M===-1;switch(c){case"sidebar":{let b;e[40]!==N?(b=D=>N(D),e[40]=N,e[41]=b):b=e[41];let w;e[42]!==ee||e[43]!==Z?(w=D=>{const{handleClose:A}=D;return s.jsx(Wr,{title:Z,isTransparent:ee,onClose:A})},e[42]=ee,e[43]=Z,e[44]=w):w=e[44];let S;e[45]!==i?(S=i.formatMessage({id:"region.sidebar.entity",defaultMessage:"Entity details"}),e[45]=i,e[46]=S):S=e[46];let j;e[47]!==f||e[48]!==W?(j={category:f,onFullWidthImageHeightChange:W},e[47]=f,e[48]=W,e[49]=j):j=e[49];let P;e[50]!==F||e[51]!==j?(P=s.jsx(As,{value:j,children:F}),e[50]=F,e[51]=j,e[52]=P):P=e[52];let T;return e[53]!==E||e[54]!==L||e[55]!==K||e[56]!==b||e[57]!==w||e[58]!==S||e[59]!==P?(T=s.jsx(Fr,{handleClose:E,onScroll:b,restoreScrollTop:L,className:"bg-token-bg-primary",leadingFullBleed:!0,renderLeading:w,ariaLabel:S,children:P},K),e[53]=E,e[54]=L,e[55]=K,e[56]=b,e[57]=w,e[58]=S,e[59]=P,e[60]=T):T=e[60],T}case"modal":{let b;e[61]!==x?(b=pn(x),e[61]=x,e[62]=b):b=e[62];const w=xe||ee;let S;e[63]!==f||e[64]!==W?(S={category:f,onFullWidthImageHeightChange:W},e[63]=f,e[64]=W,e[65]=S):S=e[65];let j;e[66]!==F||e[67]!==S?(j=s.jsx(As,{value:S,children:F}),e[66]=F,e[67]=S,e[68]=j):j=e[68];const P=ee?"bg-token-bg-primary/60 hover:bg-token-bg-primary/70 backdrop-blur-xl backdrop-filter":"bg-token-bg-primary hover:bg-token-interactive-bg-secondary-hover";let T;e[69]!==P?(T=me("absolute end-[30px] top-2 z-10",P),e[69]=P,e[70]=T):T=e[70];let D;e[71]!==E||e[72]!==T?(D=s.jsx(cn,{className:T,onClick:E}),e[71]=E,e[72]=T,e[73]=D):D=e[73];let A;return e[74]!==E||e[75]!==K||e[76]!==b||e[77]!==w||e[78]!==j||e[79]!==D?(A=s.jsxs(cr,{testId:"modal-chat-screen-entity-flyout",className:"relative max-w-[500px]",size:"custom",type:"success",position:"end",noPadding:!0,title:b,contentRef:Q,visuallyHiddenHeader:w,headerClassName:"ps-6 border-b border-light fixed min-w-full bg-token-bg-primary z-1",isOpen:!0,onClose:E,rootClassName:"z-0",children:[j,D]},K),e[74]=E,e[75]=K,e[76]=b,e[77]=w,e[78]=j,e[79]=D,e[80]=A):A=e[80],A}case"fullscreen":{let b;e[81]!==d?(b=rr(d),e[81]=d,e[82]=b):b=e[82];const w=b;let S;e[83]!==f||e[84]!==W?(S={category:f,onFullWidthImageHeightChange:W},e[83]=f,e[84]=W,e[85]=S):S=e[85];let j;e[86]!==F||e[87]!==S?(j=s.jsx(As,{value:S,children:F}),e[86]=F,e[87]=S,e[88]=j):j=e[88];let P;e[89]!==oe||e[90]!==i||e[91]!==w?(P=w&&s.jsx(ar,{triggerAs:null,label:s.jsx(Bs,q({},dn.expandSidebar)),children:s.jsx("button",{className:me("absolute start-3 top-3 flex h-9 w-9 items-center justify-center rounded-lg","bg-token-bg-primary hover:bg-token-bg-primary/80 dark:hover:bg-tertiary keyboard-focused:bg-token-bg-primary/80"),onClick:oe,children:s.jsx(Lr,{className:"icon -scale-x-100","aria-label":i.formatMessage(dn.expandSidebar)})})}),e[89]=oe,e[90]=i,e[91]=w,e[92]=P):P=e[92];let T;e[93]!==E?(T=s.jsx(cn,{className:"absolute end-3 top-3",bg:"primary",onClick:E}),e[93]=E,e[94]=T):T=e[94];let D;return e[95]!==j||e[96]!==P||e[97]!==T?(D=s.jsxs("div",{className:"absolute inset-0",children:[j,P,T]}),e[95]=j,e[96]=P,e[97]=T,e[98]=D):D=e[98],D}}}function Oa(t){}export{Io as ChatScreenEntityFlyout};
//# sourceMappingURL=ophsix84ef3o1fq5.js.map
