var w=Object.defineProperty,C=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var g=(e,t,o)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,n=(e,t)=>{for(var o in t||(t={}))N.call(t,o)&&g(e,o,t[o]);if(h)for(var o of h(t))S.call(t,o)&&g(e,o,t[o]);return e},j=(e,t)=>C(e,b(t));import{j as s,e as z,r as v,M as c}from"./fg33krlcm0qyi6yw.js";import{C as I,aY as P,ck as k,b as B,tS as J,tT as T,gC as d,tU as L,a9 as p}from"./mtk1qztvnb31pw5r.js";import{jU as O}from"./k65njl5wlgspihfr.js";async function U(e){const{action:t,minDelayMs:o=1e3,onOptimistic:m,setUiLoading:i,onError:r,onFinally:l}=e;i==null||i(!0);const u=new Promise(a=>setTimeout(a,o)),x=t();await u,m();try{return await x}catch(a){throw r==null||r(a),a}finally{i==null||i(!1),l==null||l()}}const _=({onClose:e,onJoinProjectSuccess:t,projectData:o})=>s.jsx(I,{testId:"modal-project-join",isOpen:!0,onClose:e,type:"success",showCloseButton:!0,hasSeparator:!1,size:"custom",className:"max-w-fit",contentClassName:"p-8",title:s.jsx(s.Fragment,{}),closeButton:s.jsxs(s.Fragment,{children:[s.jsx("span",{tabIndex:0,"aria-hidden":!0,className:"h-0 w-0 opacity-0 focus:outline-hidden"}),s.jsx(P,{onClick:()=>e()})]}),children:s.jsx(E,{projectData:o,onJoinProjectSuccess:t,onClose:e})});function E({projectData:e,onJoinProjectSuccess:t,onClose:o}){const m=z(),i=B(),r=k(i),[l,u]=v.useState(!1),{mutateAsync:x,isPending:a}=J(),{mutateAsync:f,isPending:y}=T();return s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx("div",{className:"border-token-border-default mb-4 w-fit rounded-xl border p-2",children:s.jsx(O,{className:"h-8 w-8"})}),s.jsx("div",{className:"text-token-text-secondary",children:e.gizmo.author.display_name?s.jsx(c,j(n({},d.projectJoinModalWithCreatorTitle),{values:{projectCreator:e.gizmo.author.display_name}})):s.jsx(c,n({},d.projectJoinModalWithoutCreatorTitle))}),s.jsx("div",{className:"text-base font-medium",children:e.gizmo.display.name}),s.jsx("div",{className:"text-token-text-tertiary text-xs",children:s.jsx(c,j(n({},d.membersCount),{values:{count:e.gizmo.sharing.subjects.filter(M=>M.type===L.USER).length+1}}))}),s.jsxs("div",{className:"mt-8 flex w-full gap-3",children:[s.jsx(p,{color:"secondary",className:"flex-1 py-3",loading:y||l,onClick:async()=>{await U({action:()=>f({gizmoId:e.gizmo.id}),minDelayMs:1e3,onOptimistic:o,setUiLoading:u,onError:()=>{r.danger(m.formatMessage({id:"fsc7l8",defaultMessage:"Something went wrong. If this issue persists please contact us through our help center at help.openai.com."}),{id:"snorlax-decline-failed"})}})},children:s.jsx(c,n({},d.declineInviteButtonLabel))}),s.jsx(p,{color:"primary",className:"flex-1 py-3",loading:a,onClick:async()=>{await x({gizmoId:e.gizmo.id}),t()},children:s.jsx(c,n({},d.joinProjectButtonLabel))})]})]})}export{_ as ProjectJoinModal};
//# sourceMappingURL=m5vf7f4s5gmjwecq.js.map
