import{e as $,r as B,j as s,M as t,c as Z,a0 as ee}from"./fg33krlcm0qyi6yw.js";import{bO as X,dm as se,o as te,b as ae,bX as ie,a9 as oe,jR as le,ag as re,H as ne,l as y,c0 as ce}from"./mtk1qztvnb31pw5r.js";import{W as de}from"./gp2ycmyaevvj2458.js";import{cH as me,B as T,z as xe}from"./k65njl5wlgspihfr.js";import{g as ue}from"./n0qmvbt3dffalvvl.js";import{t as Y,C as fe,v as pe}from"./n0ab5m1z76n8mazm.js";import{c as K,u as ge,a as J}from"./ek8ypz08ir47cco2.js";import{T as o}from"./hcn3kohxpjzaoxwc.js";import{I as he}from"./blmsijdyv0yxybpw.js";import{u as we,o as je,T as ve,g as be}from"./eymwc79qm1xcdho6.js";import{u as Ne}from"./c5rp1fxyhb31ofwg.js";import"./eb2ntjcgqhqizd13.js";import"./hots192vdjsjmkwr.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./f9jzes5xr4mq3zrh.js";import"./j6htuwwuulo7h0p6.js";import"./czn39vd97sciq42g.js";import"./sy1xvqwioh9ks4z8.js";import"./kzbknm4lxuyoq9wi.js";import"./jed1ux7qibe55pmj.js";import"./h1em0bjkpkjv8ykw.js";import"./f5ep9o7usovyn4vf.js";import"./ly75bs3d14n5v622.js";import"./hu1bt0oauegdhua6.js";import"./l9v3ntkj34comb67.js";import"./cmaobpdpreyiep8p.js";import"./eqi3xjytwhmszqqa.js";import"./bhm7utdivrybcfbl.js";import"./ohquqctluwabmb5i.js";import"./c2cj1dlcffke3f7m.js";import"./hb1mva1gmw4bcs8w.js";import"./mivow98b53y1taf8.js";import"./krwszi9u3lj63i9v.js";import"./kpobiwwkg2o2u14w.js";import"./ir7nzwbolrsm3ds2.js";import"./mmn9462oogkapcg8.js";import"./ck1u9icgxosmytry.js";import"./bes67zhi4fr5gq8i.js";import"./btdpwmi6j9nv6qc2.js";import"./keo7wnl5i52xco98.js";import"./nvdi5lzwa8dbv05v.js";function Pe({isSaving:l,initialScope:e,onChange:r}){const i=$(),[n,a]=B.useState(e);return s.jsx("section",{className:"flex flex-col gap-2",children:s.jsxs("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-medium",children:s.jsx(t,{id:"wham.codeReviewPage.autoReviewMyPRs.titleV2",defaultMessage:"Personal auto review preferences"})}),s.jsx("p",{className:"text-token-text-secondary text-xs",children:s.jsx(t,{id:"wham.codeReviewPage.autoReviewMyPRs.descriptionV2",defaultMessage:"All your pull requests in a Codex enabled repository will be automatically reviewed."})})]}),s.jsx("div",{className:"flex h-full items-center pe-2 sm:w-auto",children:s.jsx(X,{"aria-label":i.formatMessage({id:"wham.codeReviewPage.personalPreferences.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for personal preferences"}),checked:n==="always",disabled:l,onCheckedChange:m=>{const d=m?"always":"repo_default";a(d),r(d)}})})]})})}function Re(){return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:s.jsx("div",{className:"flex w-full flex-col gap-2",children:s.jsx(me,{type:"info",className:"bg-token-bg-tertiary! rounded-2xl!",icon:s.jsx(se,{className:"icon-md text-token-text-tertiary"}),isElevated:!1,content:s.jsx("p",{className:"text-token-text-secondary text-sm leading-tight font-normal",children:s.jsx(t,{id:"wham.codeReviewPage.infoBannerV2.bannertext",defaultMessage:"When code review is turned on, Codex automatically suggests improvements to the pull request, or react with üëç.{br}Mention @<b>codex</b> in your pull request to start a task or manually request a review.",values:{br:s.jsx("br",{}),b:l=>s.jsx("span",{className:"font-medium",children:l})}})})})})}),s.jsx("div",{className:"bg-token-border-default h-px"})]})}function ye(){const l=ae(),e=te(l,"2782825951"),{data:r}=Y(),i=B.useMemo(()=>{var a;return(a=r==null?void 0:r.installations_without_events)!=null?a:[]},[r]);if(i.length===0)return null;const n=ue(i,e);return s.jsx("div",{className:"pt-2",children:s.jsxs("div",{className:"bg-token-bg-status-warning outline-token-border-status-warning flex items-start justify-start gap-3 self-stretch rounded-2xl p-4 outline outline-offset-[-1px]",children:[s.jsx("div",{className:"text-token-text-status-warning relative h-5 w-5",children:s.jsx(ie,{className:"icon-md"})}),s.jsxs("div",{className:"inline-flex flex-1 flex-col items-start justify-start gap-1",children:[s.jsx("div",{className:"text-token-text-status-warning text-sm leading-tight font-medium",children:s.jsx(t,{id:"wham.codeReviewPage.permissionsBanner.title",defaultMessage:"Action required"})}),s.jsx("div",{className:"justify-start self-stretch",children:s.jsx("p",{className:"text-token-text-status-warning text-sm leading-tight font-normal",children:i.length>1?s.jsx(t,{id:"wham.codeReviewPage.permissionsBanner.description.multiple",defaultMessage:"Some repos require updated GitHub permissions for code reviews to work"}):s.jsx(t,{id:"wham.codeReviewPage.permissionsBanner.description.single",defaultMessage:"Update your GitHub permissions to enable code reviews for <u>{installationName}</u>",values:{u:a=>s.jsx("span",{className:"underline",children:a}),installationName:i[0].account_login}})})})]}),s.jsx("div",{className:"inline-flex flex-col items-start justify-center gap-2 self-stretch",children:s.jsx(oe,{color:"secondary",icon:le,onClick:()=>{window.open(n,"_blank")},children:s.jsx("div",{className:"text-token-interactive-label-secondary-default justify-start text-sm leading-tight",children:s.jsx(t,{id:"wham.codeReviewPage.permissionsBanner.updateButton",defaultMessage:"Update"})})})})]})})}function Ce({isSaving:l,creditUseEnabled:e,onChange:r}){const i=$(),n=K(),[a,m]=B.useState(e);return s.jsx("section",{className:"flex flex-col gap-2",children:s.jsxs("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-medium",children:s.jsx(t,{id:"wham.codeReviewPage.creditPreferences.title",defaultMessage:"Enable credits use"})}),s.jsxs("p",{className:"text-token-text-secondary text-xs",children:[s.jsx(t,{id:"wham.codeReviewPage.creditPreferences.description",defaultMessage:"Allow credits to be consumed for code reviews after rate limits."}),n&&s.jsx(t,{id:"wham.codeReviewPage.creditPreferences.proDescription",defaultMessage:"{space}Also applies to 'Review Everyone' you've enabled.",values:{space:" "}})]})]}),s.jsx("div",{className:"flex h-full items-center pe-2 sm:w-auto",children:s.jsx(X,{"aria-label":i.formatMessage({id:"wham.codeReviewPage.toggleCreditUseAria",defaultMessage:"Toggle code review for credit use preferences"}),checked:a,disabled:l,onCheckedChange:d=>{m(d),r(d)}})})]})})}const f=["w-[50%] sm:w-[40%]","w-[30%] sm:w-[35%]","w-[20%] sm:w-[25%] lg:w-[30%]"];function Me(l){"use forget";const e=Z.c(48),{disabledInstallations:r}=l;let i;e[0]!==r?(i=r===void 0?[]:r,e[0]=r,e[1]=i):i=e[1];const n=i,a=$(),{queryInput:m,setQueryInput:d,filteredSettings:x,isLoading:C,isFetching:c,fetchNextPage:H,hasNextPage:L,isFetchingNextPage:U,shouldShowInfiniteScrollRow:V,shouldShowMaxSuggestionsNote:W,updateCodeReviewRepositories:q,isLegacyEnterprisey:F}=we(),p=ge(),O=J(),G=K(),u=re(),D=ne();let M;e[2]!==D?(M=je(D),e[2]=D,e[3]=M):M=e[3];const z=M;let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("p",{className:"text-sm font-medium",children:s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.repoPreferences",defaultMessage:"Repository preferences"})}),e[4]=A):A=e[4];let g;e[5]!==p?(g=s.jsxs("div",{className:"hidden flex-col gap-2 sm:flex",children:[A,s.jsx("p",{className:"text-token-text-secondary text-xs",children:p?s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.team",defaultMessage:"Configure code review for all contributors to a repository."}):s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.individual",defaultMessage:"Configure code review preferences for each repository."})})]}),e[5]=p,e[6]=g):g=e[6];let h;e[7]!==a?(h=a.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoAria",defaultMessage:"Search repos or enter a GitHub org/repo"}),e[7]=a,e[8]=h):h=e[8];let w;e[9]!==a?(w=a.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoPlaceholder",defaultMessage:"Search repos or enter a GitHub org/repo"}),e[9]=a,e[10]=w):w=e[10];let j;e[11]!==d?(j=E=>d(E.target.value),e[11]=d,e[12]=j):j=e[12];let v;e[13]!==m||e[14]!==h||e[15]!==w||e[16]!==j?(v=s.jsx("div",{className:"flex items-center justify-between gap-4",children:s.jsx("div",{className:"w-84",children:s.jsx(xe,{name:"team-automations-search",containerInputClassName:"w-full",className:"text-token-text-primary flex h-8 w-full items-center rounded-md!",ariaLabel:h,placeholder:w,type:"search",color:"search",value:m,onChange:j})})}),e[13]=m,e[14]=h,e[15]=w,e[16]=j,e[17]=v):v=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(o.HeaderCell,{textAlign:"left",className:f[0],children:s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.table.repository",defaultMessage:"Repository"})}),e[18]=S):S=e[18];let _;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(o.HeaderCell,{textAlign:"left",className:y(f[1],"ps-3"),children:s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.table.codeReview",defaultMessage:"Auto code review"})}),e[19]=_):_=e[19];let k;e[20]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs(o.Header,{children:[S,_,s.jsx(o.HeaderCell,{textAlign:"left",className:y(f[2],"table-cell"),children:s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.table.lastUpdated",defaultMessage:"Last updated by"})})]}),e[20]=k):k=e[20];let b;e[21]!==z||e[22]!==n||e[23]!==x||e[24]!==c||e[25]!==F||e[26]!==C||e[27]!==O||e[28]!==G||e[29]!==p||e[30]!==q||e[31]!==(u==null?void 0:u.email)?(b=C?Array.from({length:6}).map(Ae):x.length===0&&!c?s.jsx(o.Row,{children:s.jsx(o.Cell,{colSpan:3,className:"text-token-text-tertiary",textAlign:"left",children:s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.noRepositories",defaultMessage:"No repositories"})})}):x.map(E=>{var Q;return s.jsx(ve,{repo:E,isTeamOrEnterprise:p,isLegacyEnterprisey:F,isPlus:!!O,isPro:!!G,disabledInstallations:n,updateCodeReviewRepositories:q,currentAccountOwnerId:z,currentUserEmail:(Q=u==null?void 0:u.email)!=null?Q:null,columnWidths:f,layout:"table"},be(E))}),e[21]=z,e[22]=n,e[23]=x,e[24]=c,e[25]=F,e[26]=C,e[27]=O,e[28]=G,e[29]=p,e[30]=q,e[31]=u==null?void 0:u.email,e[32]=b):b=e[32];let N;e[33]!==W?(N=W&&s.jsx(o.Row,{children:s.jsx(o.Cell,{colSpan:4,className:"!border-b-0!",textAlign:"left",children:s.jsx("p",{className:"text-token-text-secondary text-xs",children:s.jsx(t,{id:"wham.codeReviewPage.teamAutomations.maxSuggestionsNote",defaultMessage:"Displaying maximum {count} suggestions",values:{count:fe}})})})}),e[33]=W,e[34]=N):N=e[34];let P;e[35]!==H||e[36]!==L||e[37]!==U||e[38]!==V?(P=V&&s.jsx(o.Row,{children:s.jsx(o.Cell,{colSpan:3,className:"!border-b-0!",textAlign:"left",children:s.jsx(he,{isFetchingNextPage:!!U,hasNextPage:!!L,fetchNextPage:()=>H(),bgColor:"bg-transparent"})})}),e[35]=H,e[36]=L,e[37]=U,e[38]=V,e[39]=P):P=e[39];let R;e[40]!==b||e[41]!==N||e[42]!==P?(R=s.jsx("div",{children:s.jsxs(o.Root,{size:"compact",disableScroll:!0,fixed:!0,children:[k,s.jsxs(o.Body,{children:[b,N,P]})]})}),e[40]=b,e[41]=N,e[42]=P,e[43]=R):R=e[43];let I;return e[44]!==R||e[45]!==g||e[46]!==v?(I=s.jsxs("section",{className:"flex flex-col gap-4",children:[g,v,R]}),e[44]=R,e[45]=g,e[46]=v,e[47]=I):I=e[47],I}function Ae(l,e){return s.jsxs(o.Row,{children:[s.jsx(o.Cell,{className:y(f[0],"min-w-0"),children:s.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[s.jsx(T,{className:"h-4 w-4 rounded"}),s.jsx(T,{className:"h-4 w-48"})]})}),s.jsx(o.Cell,{textAlign:"left",className:y(f[1],"min-w-0"),children:s.jsx(T,{className:"h-6 w-40 rounded-md"})}),s.jsx(o.Cell,{textAlign:"left",className:y(f[2],"min-w-0"),children:s.jsx(T,{className:"h-4 w-32"})})]},"skeleton-".concat(e))}function Se(){const{data:l,isLoading:e,isError:r}=pe(),{mutate:i,isPending:n}=Ne({showToast:!1}),a=K(),m=J(),d=e||r||!l,{data:x}=Y(),C=B.useMemo(()=>{var c;return(c=x==null?void 0:x.installations_without_events)!=null?c:[]},[x]);return s.jsx(de,{topPadding:!0,children:s.jsxs("div",{className:"mx-auto flex h-full max-w-screen-xl flex-1 flex-col gap-2 ps-4 pe-12",children:[s.jsx("div",{className:y("border-token-border-heavy flex items-center justify-between border-b"),children:s.jsx("p",{className:"flex items-center gap-2 py-2 align-middle text-xl leading-7 font-medium",children:s.jsx(t,{id:"wham.codeReviewPage.header",defaultMessage:"Code review"})})}),s.jsx("p",{className:"text-token-text-secondary w-max text-sm",children:s.jsx(t,{id:"wham.codeReviewPage.infoBannerV2.subtitle",defaultMessage:"Set up Codex to automatically review pull requests"})}),s.jsx(ye,{}),s.jsx(Re,{}),d?s.jsx("div",{className:"flex items-center justify-center pt-2",children:s.jsx(ce,{className:"icon me-1.5"})}):s.jsxs("div",{className:"flex flex-col gap-4 pt-2 pb-4",children:[s.jsx(Pe,{isSaving:n,initialScope:l.code_review_preference,onChange:c=>{i({codeReviewPreference:c})}}),s.jsx("div",{className:"bg-token-border-default h-px"}),(m||a)&&s.jsxs(s.Fragment,{children:[s.jsx(Ce,{isSaving:n,creditUseEnabled:l.allow_credits_for_code_reviews,onChange:c=>{i({allowCreditsForCodeReviews:c})}}),s.jsx("div",{className:"bg-token-border-default h-px"})]}),s.jsx(Me,{disabledInstallations:C.map(c=>c.account_login)})]})]})})}const ws=()=>[{title:"Codex"}],js=ee(function(){return s.jsx(Se,{})});export{js as default,ws as meta};
//# sourceMappingURL=gblces2rfp78ydkb.js.map
