var R=Object.defineProperty,A=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var w=(t,e,a)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,T=(t,e)=>{for(var a in e||(e={}))N.call(e,a)&&w(t,a,e[a]);if(E)for(var a of E(e))O.call(e,a)&&w(t,a,e[a]);return t},I=(t,e)=>A(t,F(e));import{c as q,u as L,e as _,j as g,M as z,f as G,L as Z,a as $,i as V}from"./fg33krlcm0qyi6yw.js";import{ix as S,iy as W,fT as J,bM as U}from"./k65njl5wlgspihfr.js";import{o as X,b as Y,R as B,pZ as K,tj as Q,P as ee,dZ as te,e_ as se,C as ae,b1 as re,b3 as ie,M as x,dH as H,qq as oe,dF as ne}from"./mtk1qztvnb31pw5r.js";function le(t){"use forget";const e=q.c(13),a=Y();let r;e[0]!==a?(r=X(a,"4177111012"),e[0]=a,e[1]=r):r=e[1];const v=r;let l;e[2]!==v?(l=async y=>{const{serverThreadId:o}=y;return v?await B.safeDelete("/conversation/id/{conversation_id}",{parameters:{path:{conversation_id:o}}}):await B.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:o}},requestBody:{is_visible:!1}})},e[2]=v,e[3]=l):l=e[3];let d,h,u;e[4]!==t?(d=async y=>{const{serverThreadId:o,gizmoId:s}=y;await t.cancelQueries({queryKey:K().queryKey}),await t.cancelQueries({queryKey:S().queryKey}),s&&await t.cancelQueries({queryKey:Q(s).queryKey});const p=t.getQueryData(K().queryKey),C=t.getQueryData(S().queryKey);t.setQueryData(K().queryKey,n=>{var M;return n&&I(T({},n),{pages:(M=n.pages)==null?void 0:M.map(i=>{const D=i.items.some(c=>c.id===o)?i.items.filter(c=>c.id!==o):i.items;return I(T({},i),{items:D})})})}),t.setQueryData(S().queryKey,W(o));let f=null;return s&&(f=t.getQueryData(Q(s).queryKey),t.setQueryData(Q(s).queryKey,n=>{var M;return n&&I(T({},n),{pages:(M=n==null?void 0:n.pages)==null?void 0:M.map(i=>{var D;return I(T({},i),{items:(D=i==null?void 0:i.items)!=null&&D.some(c=>c.id===o)?i.items.filter(c=>c.id!==o):i.items})})})})),{prevData:p,prevStarredConversations:C,prevSnorlaxConversations:f}},h=(y,o,s)=>{const{gizmoId:p}=o;s!=null&&s.prevData&&t.setQueryData(K().queryKey,s.prevData),s!=null&&s.prevStarredConversations&&t.setQueryData(S().queryKey,s.prevStarredConversations),s!=null&&s.prevSnorlaxConversations&&p&&t.setQueryData(Q(p).queryKey,s.prevSnorlaxConversations)},u=(y,o,s,p)=>{const{serverThreadId:C,gizmoId:f}=s;ee.logEventWithStatsig("Conversation Deleted","chatgpt_conversation_deleted"),te.publish({kind:"deleteConversation",serverThreadId:C}),se(t,f)},e[4]=t,e[5]=d,e[6]=h,e[7]=u):(d=e[5],h=e[6],u=e[7]);let m;return e[8]!==l||e[9]!==d||e[10]!==h||e[11]!==u?(m={mutationFn:l,onMutate:d,onError:h,onSettled:u},e[8]=l,e[9]=d,e[10]=h,e[11]=u,e[12]=m):m=e[12],L(m)}function de({title:t,handleDelete:e,onClose:a}){const r=_(),v=J();return g.jsxs(ae,{testId:"modal-delete-conversation-confirmation",isOpen:!0,onClose:()=>a(),type:"success",title:r.formatMessage(j.deleteModalTitle),primaryButton:g.jsx(x.Button,{title:r.formatMessage(j.deleteModalConfirm),color:"danger",onClick:()=>{e(),a()},"data-testid":"delete-conversation-confirm-button"}),secondaryButton:g.jsx(x.Button,{title:r.formatMessage(j.deleteModalCancel),color:"secondary",onClick:()=>a()}),children:[g.jsx(z,I(T({},j.deleteModalBody),{values:{title:g.jsx("strong",{children:t})}})),v&&g.jsx("div",{className:"text-token-text-tertiary mt-2 text-sm",children:g.jsx(z,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"Visit <link>settings</link> to delete any memories saved during this chat.",values:{link:l=>g.jsx(Z,{to:re(ie.Personalization),className:"underline",onClick:()=>{setTimeout(()=>{a({closeParentModal:!0})},100)},children:l})}})})]})}const ye=t=>{"use forget";var D,c,b,k;const e=q.c(15),{conversationTitle:a,serverThreadId:r,onClose:v,isActiveConversation:l,gizmoId:d}=t,h=$(),u=V();let m;e[0]!==r?(m=H(r),e[0]=r,e[1]=m):m=e[1];const y=m,o=oe();let s;e[2]!==o.conversations||e[3]!==r?(s=(D=o.conversations.find(P=>P.id===r))==null?void 0:D.title,e[2]=o.conversations,e[3]=r,e[4]=s):s=e[4];const p=s,C=le(h);let f;e[5]!==C||e[6]!==d||e[7]!==l||e[8]!==u||e[9]!==r?(f=()=>{C.mutate({serverThreadId:r,gizmoId:d!=null?d:ne.getGizmoId(H(r))}),l&&U(u,{replace:!0})},e[5]=C,e[6]=d,e[7]=l,e[8]=u,e[9]=r,e[10]=f):f=e[10];const n=f,M=(k=(b=(c=y==null?void 0:y.title)!=null?c:p)!=null?b:a)!=null?k:"";let i;return e[11]!==n||e[12]!==v||e[13]!==M?(i=g.jsx(de,{title:M,handleDelete:n,onClose:v}),e[11]=n,e[12]=v,e[13]=M,e[14]=i):i=e[14],i},j=G({deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}});export{de as DeleteConversationConfirmationModal,ye as DeleteConversationConfirmationModalContainer};
//# sourceMappingURL=fl4ha52uwxfs3yp2.js.map
