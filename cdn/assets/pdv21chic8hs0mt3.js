var Ce=Object.defineProperty,Le=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var xe=(h,e,t)=>e in h?Ce(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t,pe=(h,e)=>{for(var t in e||(e={}))Ne.call(e,t)&&xe(h,t,e[t]);if(me)for(var t of me(e))Pe.call(e,t)&&xe(h,t,e[t]);return h},ge=(h,e)=>Le(h,Me(e));import{r as w,j as r,c as Z,e as Ie}from"./fg33krlcm0qyi6yw.js";import{td as ae,bg as ce,l as ke,da as oe,te as Ae,tf as Oe,sz as ze,aP as De,P as He,tg as Fe,th as Ve,i9 as We,M as ie}from"./mtk1qztvnb31pw5r.js";import{g as Be}from"./haneze5lyzwaewf8.js";import{cM as q,ik as Ye,hA as $e,Z as Ke}from"./k65njl5wlgspihfr.js";const ve=1.2,be=.95,Ge=80,Ue=56,we=.34,ye="linear-gradient(180deg, rgba(0,0,0,0) 0%, #000 20%, #000 80%, rgba(0,0,0,0) 100%)",je="linear-gradient(90deg, rgba(0,0,0,0) 0%, #000 20%, #000 80%, rgba(0,0,0,0) 100%)",Se=w.memo(function({img:e,size:t,active:i,onClick:l,axis:n,index:o,indexMv:f}){var R,d;const S=w.useCallback(m=>{const a=Math.abs(m-o);return a<1?ve-(ve-be)*a:be},[o]),b=w.useCallback(m=>{const a=Math.abs(m-o);return a<1?1-(1-we)*a:we},[o]),g=ae(f,S),L=ae(f,b);return r.jsx(ce.button,{"aria-selected":i,role:"option",onClick:l,style:{height:t,width:t,scale:g,opacity:L},className:ke("border-thin focus-visible:ring-ring overflow-hidden rounded-lg border-black/10 bg-gray-200 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none dark:border-white/10",n==="vertical"?"mx-auto mb-2 block":"flex-shrink-0"),children:r.jsx("img",{src:(R=e.thumbnail)!=null?R:e.url,alt:(d=e.title)!=null?d:"",loading:"lazy",decoding:"async",className:"h-full w-full rounded-lg object-cover"})})});function Ee(h){"use forget";const e=Z.c(51),{axis:t,itemSize:i,gap:l,imagesLen:n,index:o,setIndex:f,externalSyncRef:S,wheelHostRef:b}=h,g=w.useRef(null),[L,R]=w.useState(0),d=i+l,m=d*(n-1);let a;e[0]!==t||e[1]!==o||e[2]!==d||e[3]!==m?(a=()=>{const u=g.current;if(!u)return;const c=Math.round(o*d);t==="vertical"?u.scrollTop=q(c,0,m):u.scrollLeft=q(c,0,m)},e[0]=t,e[1]=o,e[2]=d,e[3]=m,e[4]=a):a=e[4];let E;e[5]===Symbol.for("react.memo_cache_sentinel")?(E=[],e[5]=E):E=e[5],oe(a,E);let s,y;e[6]!==t||e[7]!==d?(s=()=>{const u=()=>{const v=t==="vertical"?window.innerHeight-Ue:window.innerWidth,k=Math.max(1,Math.floor(v/d)),C=k%2===0?k-1:k,A=t==="vertical"?Ge:0;R(C*d-A)};u();let c=null;return typeof ResizeObserver<"u"&&(c=new ResizeObserver(()=>u()),c.observe(document.documentElement)),()=>{c&&c.disconnect()}},y=[t,d],e[6]=t,e[7]=d,e[8]=s,e[9]=y):(s=e[8],y=e[9]),oe(s,y);let j;e[10]===Symbol.for("react.memo_cache_sentinel")?(j={container:g},e[10]=j):j=e[10];const{scrollX:M,scrollY:x}=Ae(j),p=t==="vertical"?x:M;let _;e[11]!==d?(_=u=>u/d,e[11]=d,e[12]=_):_=e[12];const T=ae(p,_);let O;e[13]!==n||e[14]!==o||e[15]!==d||e[16]!==f?(O=u=>{const c=Math.round(u/d);c!==o&&c>=0&&c<n&&f(c)},e[13]=n,e[14]=o,e[15]=d,e[16]=f,e[17]=O):O=e[17],Oe(p,"change",O);let X;e[18]!==t||e[19]!==d||e[20]!==m?(X=(u,c)=>{const v=c===void 0?!1:c,k=g.current;if(!k)return;const C=Math.round(u*d),A=t==="vertical"?{top:q(C,0,m)}:{left:q(C,0,m)};v?k.scrollTo(ge(pe({},A),{behavior:"smooth"})):t==="vertical"?k.scrollTop=A.top:k.scrollLeft=A.left},e[18]=t,e[19]=d,e[20]=m,e[21]=X):X=e[21];const I=X,$=w.useRef(null);let D;e[22]!==n||e[23]!==I||e[24]!==f?(D=u=>{$.current||($.current=requestAnimationFrame(()=>{f(c=>{const v=q(c+u,0,n-1);return v!==c&&I(v),v}),$.current=null}))},e[22]=n,e[23]=I,e[24]=f,e[25]=D):D=e[25];const K=D;let F;e[26]!==t||e[27]!==K||e[28]!==n||e[29]!==o||e[30]!==I?(F=u=>{if(t!=="vertical")return;const c=u.key==="ArrowUp"?-1:u.key==="ArrowDown"?1:0;if(c){if(u.repeat)K(c);else{const v=q(o+c,0,n-1);I(v,!0)}u.preventDefault()}},e[26]=t,e[27]=K,e[28]=n,e[29]=o,e[30]=I,e[31]=F):F=e[31];const H=F;let V,W;e[32]!==t||e[33]!==H?(V=()=>{if(t==="vertical")return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},W=[t,H],e[32]=t,e[33]=H,e[34]=V,e[35]=W):(V=e[34],W=e[35]),w.useEffect(V,W);let N,B;e[36]!==t||e[37]!==m||e[38]!==b?(N=()=>{if(!(b!=null&&b.current)||t!=="vertical")return;const u=b.current,c=g.current;if(!c)return;const v=k=>{k.preventDefault();let C=c.scrollTop+k.deltaY;const A=c.scrollTop<=0&&k.deltaY<0,U=c.scrollTop>=m&&k.deltaY>0;(A||U)&&(C=c.scrollTop+k.deltaY*.2),C=q(C,0,m),C!==c.scrollTop&&(c.scrollTop=C)};return u.addEventListener("wheel",v,{passive:!1}),()=>u.removeEventListener("wheel",v)},B=[t,b,m],e[36]=t,e[37]=m,e[38]=b,e[39]=N,e[40]=B):(N=e[39],B=e[40]),w.useEffect(N,B);let J,z;e[41]!==S||e[42]!==n||e[43]!==o||e[44]!==f?(J=()=>{if(!(S!=null&&S.current))return;const u=S.current,c=()=>{const v=Math.round(u.scrollLeft/u.clientWidth);v!==o&&v>=0&&v<n&&f(v)};return u.addEventListener("scroll",c,{passive:!0}),()=>u.removeEventListener("scroll",c)},z=[S,n,o,f],e[41]=S,e[42]=n,e[43]=o,e[44]=f,e[45]=J,e[46]=z):(J=e[45],z=e[46]),w.useEffect(J,z);let G;return e[47]!==T||e[48]!==L||e[49]!==I?(G={railRef:g,railHeight:L,indexMv:T,scrollToIndex:I},e[47]=T,e[48]=L,e[49]=I,e[50]=G):G=e[50],G}const Xe=w.memo(function(e){"use forget";const t=Z.c(30),{images:i,index:l,setIndex:n,wheelHostRef:o}=e;let f;t[0]!==i.length||t[1]!==l||t[2]!==n||t[3]!==o?(f={axis:"vertical",itemSize:46,gap:8,imagesLen:i.length,index:l,setIndex:n,wheelHostRef:o},t[0]=i.length,t[1]=l,t[2]=n,t[3]=o,t[4]=f):f=t[4];const{railRef:S,railHeight:b,indexMv:g,scrollToIndex:L}=Ee(f);let R;t[5]!==L||t[6]!==n?(R=x=>{n(x),L(x)},t[5]=L,t[6]=n,t[7]=R):R=t[7];const d=R;let m;if(t[8]!==d||t[9]!==i){let x;t[11]!==d?(x=(p,_)=>()=>d(_),t[11]=d,t[12]=x):x=t[12],m=i.map(x),t[8]=d,t[9]=i,t[10]=m}else m=t[10];const a=m;let E;t[13]!==b?(E={height:b,contain:"layout size style",maskImage:ye,WebkitMaskImage:ye,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},t[13]=b,t[14]=E):E=t[14];let s;t[15]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx("div",{style:{height:"calc(50% - 23px)"}}),t[15]=s):s=t[15];let y;if(t[16]!==a||t[17]!==i||t[18]!==l||t[19]!==g){let x;t[21]!==a||t[22]!==l||t[23]!==g?(x=(p,_)=>{var T;return r.jsx(Se,{img:p,size:46,active:_===l,onClick:a[_],axis:"vertical",index:_,indexMv:g},(T=p.id)!=null?T:p.url)},t[21]=a,t[22]=l,t[23]=g,t[24]=x):x=t[24],y=i.map(x),t[16]=a,t[17]=i,t[18]=l,t[19]=g,t[20]=y}else y=t[20];let j;t[25]===Symbol.for("react.memo_cache_sentinel")?(j=r.jsx("div",{style:{height:"calc(50% - 23px)"}}),t[25]=j):j=t[25];let M;return t[26]!==S||t[27]!==E||t[28]!==y?(M=r.jsx("div",{className:"relative mt-4 w-24 self-start",role:"listbox","aria-orientation":"vertical",children:r.jsxs(ce.div,{ref:S,style:E,className:"no-scrollbar overflow-y-scroll",children:[s,y,j]})}),t[26]=S,t[27]=E,t[28]=y,t[29]=M):M=t[29],M}),qe=w.memo(function(e){"use forget";const t=Z.c(33),{images:i,index:l,setIndex:n,carouselRef:o}=e;let f;t[0]!==o||t[1]!==i.length||t[2]!==l||t[3]!==n?(f={axis:"horizontal",itemSize:32,gap:6,imagesLen:i.length,index:l,setIndex:n,externalSyncRef:o},t[0]=o,t[1]=i.length,t[2]=l,t[3]=n,t[4]=f):f=t[4];const{railRef:S,indexMv:b,scrollToIndex:g}=Ee(f);let L,R;t[5]!==l||t[6]!==g?(L=()=>{g(l)},R=[l,g],t[5]=l,t[6]=g,t[7]=L,t[8]=R):(L=t[7],R=t[8]),oe(L,R);let d;t[9]!==o||t[10]!==g||t[11]!==n?(d=p=>{n(p),g(p),o.current&&o.current.scrollTo({behavior:"instant",left:o.current.clientWidth*p})},t[9]=o,t[10]=g,t[11]=n,t[12]=d):d=t[12];const m=d;let a;if(t[13]!==m||t[14]!==i){let p;t[16]!==m?(p=(_,T)=>()=>m(T),t[16]=m,t[17]=p):p=t[17],a=i.map(p),t[13]=m,t[14]=i,t[15]=a}else a=t[15];const E=a;let s,y;t[18]===Symbol.for("react.memo_cache_sentinel")?(s={contain:"layout size style",contentVisibility:"auto",maskImage:je,WebkitMaskImage:je,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},y=r.jsx("div",{style:{width:"max(calc(50% - 32px + 6px), 0px)",flexShrink:0}}),t[18]=s,t[19]=y):(s=t[18],y=t[19]);let j;if(t[20]!==E||t[21]!==i||t[22]!==l||t[23]!==b){let p;t[25]!==E||t[26]!==l||t[27]!==b?(p=(_,T)=>{var O;return r.jsx(Se,{img:_,size:32,active:T===l,onClick:E[T],axis:"horizontal",index:T,indexMv:b},(O=_.id)!=null?O:_.url)},t[25]=E,t[26]=l,t[27]=b,t[28]=p):p=t[28],j=i.map(p),t[20]=E,t[21]=i,t[22]=l,t[23]=b,t[24]=j}else j=t[24];let M;t[29]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx("div",{style:{width:"max(calc(50% - 32px + 6px), 0px)",flexShrink:0}}),t[29]=M):M=t[29];let x;return t[30]!==S||t[31]!==j?(x=r.jsx("div",{className:"relative flex min-h-[48px] w-full overflow-hidden",role:"listbox","aria-orientation":"horizontal",children:r.jsxs(ce.div,{ref:S,className:"flex flex-1 gap-1.5 overflow-x-hidden px-4 py-2",style:s,children:[y,j,M]})}),t[30]=S,t[31]=j,t[32]=x):x=t[32],x}),re=w.createContext({activeImage:void 0,index:0});function Ze(h){"use forget";var fe,de,ue;const e=Z.c(67),{images:t,initialIndex:i,onClose:l,onIndexChange:n,children:o,inpaintingProps:f,translucentBackground:S,closeOnPointerDownInside:b,source:g}=h,L=i===void 0?0:i,R=S===void 0?!1:S,d=b===void 0?!1:b,m=g===void 0?ze.CHATGPT_IMAGE_LIGHTBOX_SOURCE_TYPE_UNSPECIFIED:g,[a,E]=w.useState(L),s=t[a];let y,j;e[0]!==a||e[1]!==n?(y=()=>{n==null||n(a)},j=[a,n],e[0]=a,e[1]=n,e[2]=y,e[3]=j):(y=e[2],j=e[3]),w.useEffect(y,j);const M=Ie(),x=De()===!1,p=w.useRef(null);let _;e[4]!==o?(_=Be(o,{footerSlot:Re,headerActionsSlot:Te}),e[4]=o,e[5]=_):_=e[5];const{footerSlot:T,headerActionsSlot:O}=_,X=w.useRef(null),I=t.length>1;let $;e[6]!==l?($=P=>{P.key==="Escape"&&(l(),P.preventDefault())},e[6]=l,e[7]=$):$=e[7];const D=$;let K;e[8]!==(s==null?void 0:s.assetPointer)||e[9]!==(s==null?void 0:s.conversationId)||e[10]!==(s==null?void 0:s.id)||e[11]!==(s==null?void 0:s.messageId)||e[12]!==(s==null?void 0:s.transformationId)||e[13]!==m?(K=()=>{var P,Y,se,le,he;He.logStructuredEvent(Fe,{metadata:{sessionId:Ve(),generationId:(P=s==null?void 0:s.transformationId)!=null?P:void 0,fileId:(se=(Y=s==null?void 0:s.assetPointer)!=null?Y:s==null?void 0:s.id)!=null?se:void 0,conversationId:(le=s==null?void 0:s.conversationId)!=null?le:void 0,messageId:(he=s==null?void 0:s.messageId)!=null?he:void 0},source:m})},e[8]=s==null?void 0:s.assetPointer,e[9]=s==null?void 0:s.conversationId,e[10]=s==null?void 0:s.id,e[11]=s==null?void 0:s.messageId,e[12]=s==null?void 0:s.transformationId,e[13]=m,e[14]=K):K=e[14],Ye(K);let F,H;e[15]!==D?(F=()=>(document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}),H=[D],e[15]=D,e[16]=F,e[17]=H):(F=e[16],H=e[17]),w.useEffect(F,H);let V;e[18]!==a||e[19]!==x?(V=()=>{var Y;if(!x||!p.current)return;const P=(Y=p.current)==null?void 0:Y.querySelector('[data-position="'.concat(a,'"]'));P&&p.current.scrollTo({behavior:"instant",left:P.offsetLeft})},e[18]=a,e[19]=x,e[20]=V):V=e[20];let W;e[21]!==x?(W=[x],e[21]=x,e[22]=W):W=e[22],oe(V,W);const N=f&&(f==null?void 0:f.mode)==="inpaint";let B;e[23]!==N||e[24]!==x||e[25]!==l?(B=P=>{N||P.button!==0||x||l()},e[23]=N,e[24]=x,e[25]=l,e[26]=B):B=e[26];const J=B;let z;e[27]!==s||e[28]!==a?(z={activeImage:s,index:a},e[27]=s,e[28]=a,e[29]=z):z=e[29];const G=R&&"bg-token-bg-primary/50 dark:bg-token-bg-primary/75 starting:backdrop-blur-0 backdrop-blur-lg ease-out motion-safe:transition-[filter,background-color] starting:opacity-0";let u;e[30]!==G?(u=ke("grid min-h-0 grid-rows-[auto_minmax(0,1fr)] overflow-hidden",G),e[30]=G,e[31]=u):u=e[31];const c=d?J:void 0;let v;e[32]!==M?(v=M.formatMessage({id:"EYLKSm",defaultMessage:"Close"}),e[32]=M,e[33]=v):v=e[33];let k;e[34]!==l||e[35]!==v?(k=r.jsx(Ke,{icon:We,onClick:l,"aria-label":v}),e[34]=l,e[35]=v,e[36]=k):k=e[36];let C;e[37]!==s?(C=(s==null?void 0:s.title)&&r.jsx("h2",{className:"line-clamp-1 self-center text-base font-medium md:line-clamp-none",children:s.title}),e[37]=s,e[38]=C):C=e[38];let A;e[39]!==k||e[40]!==C?(A=r.jsxs("div",{className:"grid w-full grid-cols-[auto_1fr] items-start justify-between gap-1 md:gap-2",children:[k,C]}),e[39]=k,e[40]=C,e[41]=A):A=e[41];let U;e[42]!==O||e[43]!==A?(U=r.jsx("div",{onPointerDown:tt,children:r.jsxs(_e,{children:[A,O]})}),e[42]=O,e[43]=A,e[44]=U):U=e[44];let Q;e[45]!==s||e[46]!==T||e[47]!==I||e[48]!==t||e[49]!==N||e[50]!==a||e[51]!==f||e[52]!==x?(Q=x?r.jsxs("div",{className:"grid h-full min-h-0 w-full grid-rows-[minmax(0,1fr)_auto] overflow-hidden",children:[r.jsx("ol",{ref:p,className:"no-scrollbar flex h-full snap-x snap-mandatory overflow-x-auto scroll-smooth",children:t.map((P,Y)=>{var se,le;return r.jsx("li",{"data-position":Y,className:"flex w-full flex-shrink-0 snap-start snap-always items-center justify-center px-4",children:r.jsx("img",{src:P.url,alt:(se=P.title)!=null?se:"",className:"max-h-full max-w-full rounded object-contain",fetchPriority:Y===a?"high":"auto",loading:Y===a?"eager":"lazy",decoding:"async"})},(le=P.id)!=null?le:P.url)})}),r.jsxs("div",{className:"no-scrollbar flex flex-col gap-2 overflow-hidden py-4",children:[I&&r.jsx(qe,{images:t,index:a,setIndex:E,carouselRef:p}),r.jsx("div",{className:"px-4",children:T})]})]}):r.jsxs("div",{ref:X,className:"grid h-full w-full grid-cols-[1fr_auto] items-center overflow-y-auto overscroll-contain",children:[r.jsxs("div",{className:"grid h-full min-h-0 w-full grid-rows-[minmax(0,1fr)_auto] justify-items-center px-4 pb-9",children:[s&&r.jsxs("div",{onPointerDown:et,className:"relative mt-12 mb-12 flex items-center justify-center rounded bg-neutral-100",children:[r.jsx("img",{src:s.url,alt:(fe=s.title)!=null?fe:"",className:"h-full max-h-full w-auto max-w-full rounded object-contain",fetchPriority:"high",loading:"eager",decoding:"async"},(de=s.id)!=null?de:s.url),N&&r.jsx($e,{image:s,drawingState:f.drawingState,drawingCanvasRef:f.drawingCanvasRef})]},(ue=s.id)!=null?ue:s.url),r.jsx("div",{className:"flex w-full justify-center",onPointerDown:Qe,children:T})]}),!N&&I?r.jsx("div",{onPointerDown:Je,children:r.jsx(Xe,{images:t,index:a,setIndex:E,wheelHostRef:X})}):r.jsx("div",{className:"h-full w-24"})]}),e[45]=s,e[46]=T,e[47]=I,e[48]=t,e[49]=N,e[50]=a,e[51]=f,e[52]=x,e[53]=Q):Q=e[53];let ee;e[54]!==u||e[55]!==c||e[56]!==U||e[57]!==Q||e[58]!==R?(ee=r.jsx(ie.Overlay,{children:r.jsxs(ie.Content,{size:"fullscreen",removePopoverStyling:!0,removeBackground:R,className:u,onPointerDownInside:c,children:[U,Q]})}),e[54]=u,e[55]=c,e[56]=U,e[57]=Q,e[58]=R,e[59]=ee):ee=e[59];let te;e[60]!==N||e[61]!==l||e[62]!==ee?(te=r.jsx(ie.Root,{isOpen:!0,onClose:l,testId:"modal-lightbox-new",shouldIgnoreClickOutside:N,children:ee}),e[60]=N,e[61]=l,e[62]=ee,e[63]=te):te=e[63];let ne;return e[64]!==z||e[65]!==te?(ne=r.jsx(re.Provider,{value:z,children:te}),e[64]=z,e[65]=te,e[66]=ne):ne=e[66],ne}function Je(h){return h.stopPropagation()}function Qe(h){return h.stopPropagation()}function et(h){return h.stopPropagation()}function tt(h){return h.stopPropagation()}function _e(h){"use forget";const e=Z.c(2),{children:t}=h;let i;return e[0]!==t?(i=r.jsx("header",{className:"grid w-full grid-cols-[auto_1fr] gap-1 p-2",children:t}),e[0]=t,e[1]=i):i=e[1],i}function Re(h){"use forget";const e=Z.c(5),{children:t}=h,{activeImage:i}=w.useContext(re);let l;e[0]!==i||e[1]!==t?(l=typeof t=="function"?t({activeImage:i}):t,e[0]=i,e[1]=t,e[2]=l):l=e[2];const n=l;let o;return e[3]!==n?(o=r.jsx("footer",{className:"pointer-events-auto w-full max-w-[768px]",children:n}),e[3]=n,e[4]=o):o=e[4],o}function Te(h){"use forget";const e=Z.c(5),{children:t}=h,{activeImage:i}=w.useContext(re);let l;if(e[0]!==i||e[1]!==t){const o=typeof t=="function"?t({activeImage:i}):t;l=[],w.Children.forEach(o,f=>{w.isValidElement(f)&&l.push(f)}),e[0]=i,e[1]=t,e[2]=l}else l=e[2];let n;return e[3]!==l?(n=r.jsx("div",{className:"flex items-baseline justify-end gap-2",children:l.map(st)}),e[3]=l,e[4]=n):n=e[4],n}function st(h,e){return r.jsx(w.Fragment,{children:h},e)}const at={Root:Ze,Header:_e,Footer:Re,LightboxHeaderActions:Te,Context:re};export{Re as Footer,_e as Header,Te as LightboxHeaderActions,at as LightboxNew,Ze as Root};
//# sourceMappingURL=pdv21chic8hs0mt3.js.map
