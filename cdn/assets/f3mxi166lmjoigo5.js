var x=(o,e)=>(e=Symbol[o])?e:Symbol.for("Symbol."+o);var g=(o,e,r)=>(e=o[x("asyncIterator")])?e.call(o):(o=o[x("iterator")](),e={},r=(i,d)=>(d=o[i])&&(e[i]=n=>new Promise((a,u,m)=>(n=d.call(o,n),m=n.done,Promise.resolve(n.value).then(l=>a({value:l,done:m}),u)))),r("next"),r("return"),e);import{a0 as E,a9 as F,n as B,i as k,r as c,a as q,j as t}from"./fg33krlcm0qyi6yw.js";import{c3 as T,kt as f,hq as A,mv as D,dB as y,b as H,eh as N,ee as j,qv as Q,qx as _,ot as L,hg as O,gd as $,fe as G}from"./mtk1qztvnb31pw5r.js";import{r as K,u as V,s as W,C as P,a as z,g as J,b as w,T as U,c as X}from"./k65njl5wlgspihfr.js";import{T as Y,C as Z}from"./cca0236s2s07nwln.js";import{g as ee}from"./kimw6epkq1t36pow.js";import{C as I,T as te}from"./ba5jyp7qj5r8tn2y.js";import{C as oe}from"./jz17uc4ytadugnwg.js";import"./nk8claqige01rjll.js";import"./m5btqmw2ud0umdwr.js";import"./ce3hgmw4iyyhicud.js";import"./mstl8wgfzorpgdoe.js";import"./f2sn8zvpzei2915e.js";import"./kfdkis1zwf4ccfgg.js";import"./ol9d5wxhynx9q2is.js";import"./mbmcx8v24u1ao1ke.js";import"./ieglwgr2zyuektzv.js";import"./exqqo21frem4no6f.js";import"./l09h2qppleubii6l.js";import"./deakbbf27g8e7ba0.js";import"./j1qri9ykgswuwttk.js";import"./g3lybt7hj0s143gw.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./nwdwrv5b1h68xdm5.js";import"./b2l059fz4znz94nm.js";import"./ns51nblw8ziscsgd.js";import"./nkg72cggx811q5rc.js";import"./kkpvfco69f4rm4dl.js";import"./eoxo2x2yyluwv164.js";import"./f76gy0b8ieo4s693.js";import"./fjbpw3a0vshjd395.js";import"./kz9vfmj7e59u487z.js";import"./fdmssuqzpk9905my.js";import"./e509ngenyrgcehf5.js";import"./hx3pmvu9yrya5xfj.js";import"./m2li92t79w0k884q.js";import"./f1xfp952knkxhcnw.js";import"./gfro8vshyz92jyup.js";import"./kgrrqncjl71482vi.js";import"./i5jw6wfkpao2rx5t.js";import"./krwszi9u3lj63i9v.js";import"./irqko7c1s7qpl41n.js";import"./j7vr3wxxnh5g6uxz.js";import"./bhm7utdivrybcfbl.js";import"./ohquqctluwabmb5i.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./c2cj1dlcffke3f7m.js";import"./hb1mva1gmw4bcs8w.js";import"./mivow98b53y1taf8.js";import"./e7t9iekjqjn15qm6.js";import"./bkm8et9bp0kf1c7y.js";import"./gk1ydinzmvc3mi3f.js";import"./ktlrbeajo849nxci.js";const nt=()=>(K(),null),at=E(function(){const e=H(),r=F(),[i]=B(),d=k(),n=T(r.conversationId),a=f(i.get("readonly"),!1),u=f(i.get("isFullScreen"),!1),m=f(i.get("header"),!0),l=f(i.get("appPreview"),!1),C=A(),S=D(),b=f(i.get("hideBottomComposer"),!!a),v=T(r.canmoreId),s=c.useMemo(()=>y(e,n),[e,n]),p=V();c.useEffect(()=>{W({type:P.Textdoc,textdocId:v})},[v]),z(s.id,{kind:N.PrimaryAssistant});const h=q();if(c.useEffect(()=>(j.retainThread(s.id),()=>{setTimeout(()=>{h.invalidateQueries(J({clientThreadId:s.id}))},0),j.releaseThread(s.id)}),[s.id,h]),c.useEffect(()=>{v||d("/")},[v,d]),c.useEffect(()=>{w().sendMessage({type:I.Loaded})},[v]),!v||(p==null?void 0:p.type)!==P.Textdoc)return null;const M=()=>{w().sendMessage({type:I.Close})},R=a&&!m;return t.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),t.jsx(Q.Provider,{value:y(e,s.id),children:t.jsx(_,{conversation:s,children:t.jsx(L,{conversation:s,children:t.jsx(U,{clientThreadId:s.id,children:l?t.jsx(O,{children:t.jsx(se,{textdocId:p.textdocId})}):R?t.jsxs(t.Fragment,{children:[t.jsx(Y,{clientThreadId:s.id,disableScroll:!C,textdocId:p.textdocId}),t.jsx(Z,{})]}):t.jsx(te,{isEmbedded:!0,hideRunCode:!C,isFullScreen:u,hideHeader:!m,hideBottomComposer:b,isReadonlyFromQueryParam:a,hideRenameButton:S,clientThreadId:s.id,focusedTextdoc:p,onClose:M},"textdocContent")})})})})]})}),se=({textdocId:o})=>{var m;const e=c.useRef(null),r=X(o),[i,d]=c.useState(!1),n=(m=r==null?void 0:r.versions)!=null?m:[],a=$(n),u=c.useCallback(G(async l=>{const C=ee(l.type,l.content);if(e.current&&(C==="react"||C==="html")){d(!0);const s=e.current.evalAsync({language:C,code:l.content});try{for(var re=g(s),S,b,v;S=!(b=await re.next()).done;S=!1){const p=b.value;console.debug(p)}}catch(b){v=[b]}finally{try{S&&(b=re.return)&&await b.call(re)}finally{if(v)throw v[0]}}}d(!1)},100),[]);return c.useEffect(()=>{a&&u(a)},[a,u]),t.jsx(oe,{id:o,visuallyHidden:!i,ref:e,enableTransition:!0,title:""})};export{nt as clientLoader,at as default};
//# sourceMappingURL=f3mxi166lmjoigo5.js.map
