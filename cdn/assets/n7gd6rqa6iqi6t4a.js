var me=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var le=(i,e,t)=>e in i?me(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Y=(i,e)=>{for(var t in e||(e={}))ue.call(e,t)&&le(i,t,e[t]);if(ie)for(var t of ie(e))fe.call(e,t)&&le(i,t,e[t]);return i};import{c as k,e as V,f as ne,j as o,M as te,r as A,l as he,v as Ie}from"./fg33krlcm0qyi6yw.js";import{hz as pe,g2 as xe,hw as _e,fu as we,nf as be,gc as ve,ng as Se,ge as Ce,Z as W,g1 as Me,n as De,ci as je,hx as Re,hy as Te,hv as Ee,bv as Ae,g0 as ke,fZ as ye,g3 as Ge}from"./k65njl5wlgspihfr.js";import{LightboxNew as ee}from"./pdv21chic8hs0mt3.js";import{a9 as re,P as ce,sz as se,g2 as ae,gJ as Pe,hg as Le,gK as Ne,e as Oe,eW as Be}from"./mtk1qztvnb31pw5r.js";import{I as Ue}from"./gqx9i5tb3deqoo5z.js";import{a as He,b as $e,c as Fe}from"./engbryqfkwtfab1c.js";import{u as ze}from"./d6c194b8r37zigga.js";import{S as Ye}from"./fj25p15jq4efcoma.js";import"./haneze5lyzwaewf8.js";import"./dg5jraediw4l39ow.js";import"./hb1mva1gmw4bcs8w.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";import"./m3nchqrpfl8vs80b.js";const We=ne({editImage:{id:"fHzUiJ",defaultMessage:"Select area"}}),qe=i=>{"use forget";const e=k.c(5),{onClick:t}=i,n=V();let l;e[0]!==n?(l=n.formatMessage(We.editImage),e[0]=n,e[1]=l):l=e[1];const s=l;let a;return e[2]!==s||e[3]!==t?(a=o.jsx(re,{className:"max-md:hidden",color:"secondary",icon:pe,onClick:t,children:s}),e[2]=s,e[3]=t,e[4]=a):a=e[4],a},Ve=ne({saveImage:{id:"vfRAfY",defaultMessage:"Save"}}),Ze=i=>{"use forget";const e=k.c(8),{imageUrl:t}=i,n=V();let l;e[0]!==t||e[1]!==n?(l=()=>{xe({url:t,fileName:_e(n)}),ce.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked")},e[0]=t,e[1]=n,e[2]=l):l=e[2];const s=l;let a;e[3]!==n?(a=n.formatMessage(Ve.saveImage),e[3]=n,e[4]=a):a=e[4];const r=a;let d;return e[5]!==r||e[6]!==s?(d=o.jsx(re,{color:"secondary",icon:we,onClick:s,children:r}),e[5]=r,e[6]=s,e[7]=d):d=e[7],d},q=ne({thumbsUp:{id:"Qz8Wa6",defaultMessage:"Like this image"},thumbsDown:{id:"sUGtRy",defaultMessage:"Dislike this image"},showMore:{id:"/NGHt9",defaultMessage:"Show more"},selectArea:{id:"V0wnMb",defaultMessage:"Select area"},openInChat:{id:"uTzW7Z",defaultMessage:"Open in chat"}});function Xe(i){"use forget";const e=k.c(30),{activeImage:t,source:n,noRatings:l,rateImage:s,rating:a,onEditImageClick:r,closeLightbox:d,canShowShareButton:w}=i;let I;e[0]!==t||e[1]!==s?(I=()=>{s(!0,t)},e[0]=t,e[1]=s,e[2]=I):I=e[2];const p=I;let g;e[3]!==t||e[4]!==s?(g=()=>{s(!1,t)},e[3]=t,e[4]=s,e[5]=g):g=e[5];const f=g,m=t.conversationId,u=t.messageId,c=m&&u;let x;e[6]!==d||e[7]!==m||e[8]!==f||e[9]!==p||e[10]!==u||e[11]!==l||e[12]!==a||e[13]!==c||e[14]!==n?(x=c&&o.jsx(Je,{conversationId:m,messageId:u,closeLightbox:d,showOpenInChat:n===se.CHATGPT_IMAGE_LIGHTBOX_SOURCE_TYPE_IMAGE_HOME_LIBRARY,noRatings:l,rating:a,handleThumbsUp:p,handleThumbsDown:f}),e[6]=d,e[7]=m,e[8]=f,e[9]=p,e[10]=u,e[11]=l,e[12]=a,e[13]=c,e[14]=n,e[15]=x):x=e[15];let S;e[16]!==r?(S=o.jsx(qe,{onClick:r}),e[16]=r,e[17]=S):S=e[17];let b;e[18]!==t.url?(b=o.jsx(Ze,{imageUrl:t.url}),e[18]=t.url,e[19]=b):b=e[19];let h;e[20]!==t.assetPointer||e[21]!==t.conversationId||e[22]!==t.messageId||e[23]!==w?(h=w&&(t==null?void 0:t.messageId)&&o.jsx(Ye,{assetPointer:t.assetPointer,serverThreadId:t.conversationId,messageId:t.messageId}),e[20]=t.assetPointer,e[21]=t.conversationId,e[22]=t.messageId,e[23]=w,e[24]=h):h=e[24];let j;return e[25]!==x||e[26]!==S||e[27]!==b||e[28]!==h?(j=o.jsxs("div",{className:"flex gap-1 md:gap-2",children:[x,S,b,h]}),e[25]=x,e[26]=S,e[27]=b,e[28]=h,e[29]=j):j=e[29],j}function Je(i){"use forget";const e=k.c(24),{conversationId:t,messageId:n,closeLightbox:l,showOpenInChat:s,noRatings:a,rating:r,handleThumbsUp:d,handleThumbsDown:w}=i,I=V();let p;e[0]!==I?(p=I.formatMessage(q.showMore),e[0]=I,e[1]=p):p=e[1];let g;e[2]!==p?(g=o.jsx(W,{className:"aspect-square",icon:Pe,"aria-label":p}),e[2]=p,e[3]=g):g=e[3];let f;e[4]!==d||e[5]!==a||e[6]!==r?(f=!a&&r!==!1&&o.jsx(ae.Item,{icon:r===!0?be:ve,onClick:d,children:o.jsx(te,Y({},q.thumbsUp))}),e[4]=d,e[5]=a,e[6]=r,e[7]=f):f=e[7];let m;e[8]!==w||e[9]!==a||e[10]!==r?(m=!a&&r!==!0&&o.jsx(ae.Item,{icon:r===!1?Se:Ce,onClick:w,children:o.jsx(te,Y({},q.thumbsDown))}),e[8]=w,e[9]=a,e[10]=r,e[11]=m):m=e[11];let u;e[12]!==l||e[13]!==t||e[14]!==n||e[15]!==s?(u=s&&o.jsx(Ke,{conversationId:t,messageId:n,closeLightbox:l}),e[12]=l,e[13]=t,e[14]=n,e[15]=s,e[16]=u):u=e[16];let c;e[17]!==f||e[18]!==m||e[19]!==u?(c=o.jsx("div",{className:"max-h-[50dvh] max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:o.jsxs(Le,{children:[f,m,u]})}),e[17]=f,e[18]=m,e[19]=u,e[20]=c):c=e[20];let x;return e[21]!==g||e[22]!==c?(x=o.jsx(Ne,{side:"bottom",sideOffset:10,size:"auto",triggerButton:g,children:c}),e[21]=g,e[22]=c,e[23]=x):x=e[23],x}function Ke(i){"use forget";const e=k.c(7),{conversationId:t,messageId:n,closeLightbox:l}=i;let s;e[0]!==l||e[1]!==t||e[2]!==n?(s=d=>{d.preventDefault(),ce.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),Me({className:"from-lightbox",update:()=>{l(),De("/c/".concat(t,"?message=").concat(n),{preventScrollReset:!0})}})},e[0]=l,e[1]=t,e[2]=n,e[3]=s):s=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx(te,Y({},q.openInChat)),e[4]=a):a=e[4];let r;return e[5]!==s?(r=o.jsx(ae.Item,{icon:je,onClick:s,children:a}),e[5]=s,e[6]=r):r=e[6],r}function Qe(i){"use forget";const e=k.c(37),{activeImage:t,source:n,mode:l,handleCancelInpaint:s,handleEnterInpaint:a,noRatings:r,rateImage:d,rating:w,onClose:I,canShowShareButton:p}=i,g=V(),f=ze();if(l==="inpaint"){let u;e[0]!==g?(u=g.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"}),e[0]=g,e[1]=u):u=e[1];let c;e[2]!==u?(c=o.jsx("div",{className:"text-center font-semibold",children:u}),e[2]=u,e[3]=c):c=e[3];const x=f.undoDrawing,S=!f.canUndoDrawing;let b;e[4]!==g?(b=g.formatMessage({id:"OmaTPx",defaultMessage:"Undo"}),e[4]=g,e[5]=b):b=e[5];let h;e[6]!==f.undoDrawing||e[7]!==S||e[8]!==b?(h=o.jsx(W,{className:"aspect-square",icon:Re,onClick:x,disabled:S,"aria-label":b}),e[6]=f.undoDrawing,e[7]=S,e[8]=b,e[9]=h):h=e[9];const j=f.redoDrawing,R=!f.canRedoDrawing;let C;e[10]!==g?(C=g.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"}),e[10]=g,e[11]=C):C=e[11];let M;e[12]!==f.redoDrawing||e[13]!==R||e[14]!==C?(M=o.jsx(W,{className:"aspect-square",icon:Te,onClick:j,disabled:R,"aria-label":C}),e[12]=f.redoDrawing,e[13]=R,e[14]=C,e[15]=M):M=e[15];let T;e[16]!==g?(T=g.formatMessage({id:"D9xvar",defaultMessage:"Cancel"}),e[16]=g,e[17]=T):T=e[17];let _;e[18]!==s||e[19]!==T?(_=o.jsx(W,{className:"w-auto px-3",onClick:s,children:T}),e[18]=s,e[19]=T,e[20]=_):_=e[20];let D;e[21]!==M||e[22]!==_||e[23]!==h?(D=o.jsxs("div",{className:"flex gap-1 justify-self-end md:gap-2",children:[h,M,_]}),e[21]=M,e[22]=_,e[23]=h,e[24]=D):D=e[24];let E;return e[25]!==D||e[26]!==c?(E=o.jsxs("div",{className:"grid grow grid-cols-[1fr_auto] items-center gap-2",children:[c,D]}),e[25]=D,e[26]=c,e[27]=E):E=e[27],E}let m;return e[28]!==t||e[29]!==p||e[30]!==a||e[31]!==r||e[32]!==I||e[33]!==d||e[34]!==w||e[35]!==n?(m=o.jsx(Xe,{activeImage:t,source:n,noRatings:r,rateImage:d,rating:w,onEditImageClick:a,closeLightbox:I,canShowShareButton:p}),e[28]=t,e[29]=p,e[30]=a,e[31]=r,e[32]=I,e[33]=d,e[34]=w,e[35]=n,e[36]=m):m=e[36],m}const xt=i=>{"use forget";var oe;const e=k.c(49),{images:t,initialIndex:n,noRatings:l,onClose:s,conversation:a,currentModelId:r}=i,[d,w]=A.useState(null),[I,p]=A.useState(null),[g,f]=A.useState(n),[m,u]=A.useState("default"),c=Ee(),x=A.useRef(null),S=he(),h=Ae(S,"images-app")?se.CHATGPT_IMAGE_LIGHTBOX_SOURCE_TYPE_IMAGE_HOME_LIBRARY:se.CHATGPT_IMAGE_LIGHTBOX_SOURCE_TYPE_CONVERSATION,j=A.useRef(c);let R,C;e[0]!==c?(R=()=>{j.current=c},C=[c],e[0]=c,e[1]=R,e[2]=C):(R=e[1],C=e[2]),A.useEffect(R,C);let M;e[3]===Symbol.for("react.memo_cache_sentinel")?(M=v=>{p(null),w(null),f(v),u("default"),j.current.clearAllDrawings()},e[3]=M):M=e[3];const T=M,_=t[g];let D;e[4]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{u("default"),j.current.clearAllDrawings()},e[4]=D):D=e[4];const E=D;let B;e[5]!==_?(B=()=>{_&&u("inpaint")},e[5]=_,e[6]=B):B=e[6];const Z=B;let U;e[7]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{var v;return(v=x.current)==null?void 0:v.getImageData()},e[7]=U):U=e[7];const de=U;let H;if(e[8]===Symbol.for("react.memo_cache_sentinel")){const v=Oe();H=ke(v),e[8]=H}else H=e[8];const ge=H;let $;e[9]!==a?($=v=>{v.promptMessage&&ge(Ie(),{conversation:a,model:Be(a),optimisticMessages:[v.promptMessage,Ge("Analyzing")],asyncWork:()=>Promise.resolve(v)})},e[9]=a,e[10]=$):$=e[10];const X=$;let F;e[11]!==d?(F=(v,Q)=>{!Q||d!=null||($e.imageRated({liked:v,analyticsContext:et(Q)}),w(v),v||p(Q))},e[11]=d,e[12]=F):F=e[12];const J=F,K=ye();let y;e[13]!==c||e[14]!==m?(y={mode:m,drawingState:c,drawingCanvasRef:x},e[13]=c,e[14]=m,e[15]=y):y=e[15];let G;e[16]!==K?(G=K(),e[16]=K,e[17]=G):G=e[17];let P;e[18]!==_||e[19]!==Z||e[20]!==m||e[21]!==l||e[22]!==s||e[23]!==J||e[24]!==d||e[25]!==h||e[26]!==G?(P=o.jsx(ee.LightboxHeaderActions,{children:o.jsx(Qe,{activeImage:_,mode:m,source:h,handleCancelInpaint:E,handleEnterInpaint:Z,noRatings:l,rateImage:J,rating:d,canShowShareButton:G,onClose:s})}),e[18]=_,e[19]=Z,e[20]=m,e[21]=l,e[22]=s,e[23]=J,e[24]=d,e[25]=h,e[26]=G,e[27]=P):P=e[27];let L;e[28]!==_||e[29]!==a.id||e[30]!==r||e[31]!==c.currentDrawnShape||e[32]!==s||e[33]!==X?(L=o.jsx(ee.Footer,{children:o.jsx(Ue,{clientThreadId:a.id,currentModelId:r,onRequestCompletion:X,onClose:s,activeImage:_,currentDrawnShape:c.currentDrawnShape,getImageData:de,onCancelInpaint:E})}),e[28]=_,e[29]=a.id,e[30]=r,e[31]=c.currentDrawnShape,e[32]=s,e[33]=X,e[34]=L):L=e[34];let N;e[35]!==t||e[36]!==n||e[37]!==s||e[38]!==h||e[39]!==y||e[40]!==P||e[41]!==L?(N=o.jsxs(ee.Root,{source:h,images:t,initialIndex:n,onClose:s,onIndexChange:T,translucentBackground:!0,closeOnPointerDownInside:!0,inpaintingProps:y,children:[P,L]}),e[35]=t,e[36]=n,e[37]=s,e[38]=h,e[39]=y,e[40]=P,e[41]=L,e[42]=N):N=e[42];let O;e[43]!==I||e[44]!==d?(O=I&&o.jsx(He,{messageId:(oe=I.messageId)!=null?oe:"",serverThreadId:I.conversationId,rating:d,onClose:()=>p(null)}),e[43]=I,e[44]=d,e[45]=O):O=e[45];let z;return e[46]!==N||e[47]!==O?(z=o.jsxs(o.Fragment,{children:[N,O]}),e[46]=N,e[47]=O,e[48]=z):z=e[48],z},et=i=>{var e,t,n,l;return Fe({pointer:{url:i.url,asset_pointer:(e=i.assetPointer)!=null?e:"",metadata:{dalle:{gen_id:(t=i.transformationId)!=null?t:void 0},generation:{gen_id:(n=i.transformationId)!=null?n:void 0}},width:i.width,height:i.height},conversationId:i.conversationId,messageId:(l=i.messageId)!=null?l:"",source:"chat"})};export{xt as ImageGenConversationLightboxNew};
//# sourceMappingURL=n7gd6rqa6iqi6t4a.js.map
