var Ja=Object.defineProperty,Ka=Object.defineProperties;var Qa=Object.getOwnPropertyDescriptors;var Nr=Object.getOwnPropertySymbols;var th=Object.prototype.hasOwnProperty,eh=Object.prototype.propertyIsEnumerable;var zr=(n,t,e)=>t in n?Ja(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,pe=(n,t)=>{for(var e in t||(t={}))th.call(t,e)&&zr(n,e,t[e]);if(Nr)for(var e of Nr(t))eh.call(t,e)&&zr(n,e,t[e]);return n},Te=(n,t)=>Ka(n,Qa(t));import{h as Pr,V as ih,i as ti,A as Qn,j as nh,n as yt,o as rs,p as os,q as We,r as Dt,E as mr,D as Ko,M as xi,R as Ts,s as ts,t as Rr,u as Ui,H as es,v as Qo,w as sh}from"./f96c6fguu1kcw0go.js";import{w as rh,p as Fr,c as hi,s as ze,a as Kt,h as Lr,e as te,t as is,b as Yi,m as Ss,d as Br,f as Vt,g as Or,i as oh,j as ah,k as hh,l as hr,n as lh,q as ch,r as uh,u as fh,v as qi,x as si,y as _i,z as ri,o as ta,A as pr,B as gr,C as yr,D as ea,E as lr,F as dh,G as mh,H as ph,I as gh,J as yh}from"./hwa6pbq6i57ntwuh.js";import{h as ia}from"./fg33krlcm0qyi6yw.js";import{DI as xh,DJ as bh}from"./k65njl5wlgspihfr.js";function Mh(n){return n.innerRadius}function wh(n){return n.outerRadius}function _h(n){return n.startAngle}function Th(n){return n.endAngle}function Sh(n){return n&&n.padAngle}function Ah(n,t,e,i,s,r,o,a){var h=e-n,l=i-t,c=o-s,f=a-r,u=f*h-c*l;if(!(u*u<te))return u=(c*(t-r)-f*(n-s))/u,[n+u*h,t+u*l]}function In(n,t,e,i,s,r,o){var a=n-e,h=t-i,l=(o?r:-r)/Yi(a*a+h*h),c=l*h,f=-l*a,u=n+c,d=t+f,p=e+c,m=i+f,g=(u+p)/2,y=(d+m)/2,b=p-u,w=m-d,x=b*b+w*w,M=s-r,v=u*m-p*d,A=(w<0?-1:1)*Yi(oh(0,M*M*x-v*v)),N=(v*w-b*A)/x,z=(-v*b-w*A)/x,P=(v*w+b*A)/x,E=(-v*b+w*A)/x,B=N-g,I=z-y,L=P-g,q=E-y;return B*B+I*I>L*L+q*q&&(N=P,z=E),{cx:N,cy:z,x01:-c,y01:-f,x11:N*(s/M-1),y11:z*(s/M-1)}}function na(){var n=Mh,t=wh,e=Kt(0),i=null,s=_h,r=Th,o=Sh,a=null,h=rh(l);function l(){var c,f,u=+n.apply(this,arguments),d=+t.apply(this,arguments),p=s.apply(this,arguments)-Lr,m=r.apply(this,arguments)-Lr,g=Br(m-p),y=m>p;if(a||(a=c=h()),d<u&&(f=d,d=u,u=f),!(d>te))a.moveTo(0,0);else if(g>is-te)a.moveTo(d*hi(p),d*ze(p)),a.arc(0,0,d,p,m,!y),u>te&&(a.moveTo(u*hi(m),u*ze(m)),a.arc(0,0,u,m,p,y));else{var b=p,w=m,x=p,M=m,v=g,A=g,N=o.apply(this,arguments)/2,z=N>te&&(i?+i.apply(this,arguments):Yi(u*u+d*d)),P=Ss(Br(d-u)/2,+e.apply(this,arguments)),E=P,B=P,I,L;if(z>te){var q=Or(z/u*ze(N)),J=Or(z/d*ze(N));(v-=q*2)>te?(q*=y?1:-1,x+=q,M-=q):(v=0,x=M=(p+m)/2),(A-=J*2)>te?(J*=y?1:-1,b+=J,w-=J):(A=0,b=w=(p+m)/2)}var V=d*hi(b),R=d*ze(b),D=u*hi(M),H=u*ze(M);if(P>te){var Z=d*hi(w),X=d*ze(w),it=u*hi(x),ct=u*ze(x),nt;if(g<Fr)if(nt=Ah(V,R,it,ct,Z,X,D,H)){var rt=V-nt[0],mt=R-nt[1],Y=Z-nt[0],_=X-nt[1],S=1/ze(ah((rt*Y+mt*_)/(Yi(rt*rt+mt*mt)*Yi(Y*Y+_*_)))/2),T=Yi(nt[0]*nt[0]+nt[1]*nt[1]);E=Ss(P,(u-T)/(S-1)),B=Ss(P,(d-T)/(S+1))}else E=B=0}A>te?B>te?(I=In(it,ct,V,R,d,B,y),L=In(Z,X,D,H,d,B,y),a.moveTo(I.cx+I.x01,I.cy+I.y01),B<P?a.arc(I.cx,I.cy,B,Vt(I.y01,I.x01),Vt(L.y01,L.x01),!y):(a.arc(I.cx,I.cy,B,Vt(I.y01,I.x01),Vt(I.y11,I.x11),!y),a.arc(0,0,d,Vt(I.cy+I.y11,I.cx+I.x11),Vt(L.cy+L.y11,L.cx+L.x11),!y),a.arc(L.cx,L.cy,B,Vt(L.y11,L.x11),Vt(L.y01,L.x01),!y))):(a.moveTo(V,R),a.arc(0,0,d,b,w,!y)):a.moveTo(V,R),!(u>te)||!(v>te)?a.lineTo(D,H):E>te?(I=In(D,H,Z,X,u,-E,y),L=In(V,R,it,ct,u,-E,y),a.lineTo(I.cx+I.x01,I.cy+I.y01),E<P?a.arc(I.cx,I.cy,E,Vt(I.y01,I.x01),Vt(L.y01,L.x01),!y):(a.arc(I.cx,I.cy,E,Vt(I.y01,I.x01),Vt(I.y11,I.x11),!y),a.arc(0,0,u,Vt(I.cy+I.y11,I.cx+I.x11),Vt(L.cy+L.y11,L.cx+L.x11),y),a.arc(L.cx,L.cy,E,Vt(L.y11,L.x11),Vt(L.y01,L.x01),!y))):a.arc(0,0,u,M,x,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+n.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+s.apply(this,arguments)+ +r.apply(this,arguments))/2-Fr/2;return[hi(f)*c,ze(f)*c]},l.innerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Kt(+c),l):n},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Kt(+c),l):t},l.cornerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Kt(+c),l):e},l.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Kt(+c),l):i},l.startAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Kt(+c),l):s},l.endAngle=function(c){return arguments.length?(r=typeof c=="function"?c:Kt(+c),l):r},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Kt(+c),l):o},l.context=function(c){return arguments.length?(a=c==null?null:c,l):a},l}function Eh(n,t){return t<n?-1:t>n?1:t>=n?0:NaN}function vh(n){return n}function sa(){var n=vh,t=Eh,e=null,i=Kt(0),s=Kt(is),r=Kt(0);function o(a){var h,l=(a=hh(a)).length,c,f,u=0,d=new Array(l),p=new Array(l),m=+i.apply(this,arguments),g=Math.min(is,Math.max(-is,s.apply(this,arguments)-m)),y,b=Math.min(Math.abs(g)/l,r.apply(this,arguments)),w=b*(g<0?-1:1),x;for(h=0;h<l;++h)(x=p[d[h]=h]=+n(a[h],h,a))>0&&(u+=x);for(t!=null?d.sort(function(M,v){return t(p[M],p[v])}):e!=null&&d.sort(function(M,v){return e(a[M],a[v])}),h=0,f=u?(g-l*w)/u:0;h<l;++h,m=y)c=d[h],x=p[c],y=m+(x>0?x*f:0)+w,p[c]={data:a[c],index:h,value:x,startAngle:m,endAngle:y,padAngle:b};return p}return o.value=function(a){return arguments.length?(n=typeof a=="function"?a:Kt(+a),o):n},o.sortValues=function(a){return arguments.length?(t=a,e=null,o):t},o.sort=function(a){return arguments.length?(e=a,t=null,o):e},o.startAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Kt(+a),o):i},o.endAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Kt(+a),o):s},o.padAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Kt(+a),o):r},o}function xr(n,t){if((h=n.length)>0)for(var e,i=0,s,r,o,a,h,l=n[t[0]].length;i<l;++i)for(o=a=0,e=0;e<h;++e)(r=(s=n[t[e]][i])[1]-s[0])>0?(s[0]=o,s[1]=o+=r):r<0?(s[1]=a,s[0]=a+=r):(s[0]=0,s[1]=r)}function Ih(n,t){let e=0;for(let i of n)i!=null&&(i=+i)>=i&&++e;return e}function ke(n,t){let e,i;if(t===void 0)for(const s of n)s!=null&&(e===void 0?s>=s&&(e=i=s):(e>s&&(e=s),i<s&&(i=s)));else{let s=-1;for(let r of n)(r=t(r,++s,n))!=null&&(e===void 0?r>=r&&(e=i=r):(e>r&&(e=r),i<r&&(i=r)))}return[e,i]}function Ch(n){return n}var kh=Array.prototype,Nh=kh.slice;function As(n){return()=>n}function zh(n,t,e){let i;for(;;){const s=hr(n,t,e);if(s===i||s===0||!isFinite(s))return[n,t];s>0?(n=Math.floor(n/s)*s,t=Math.ceil(t/s)*s):s<0&&(n=Math.ceil(n*s)/s,t=Math.floor(t*s)/s),i=s}}function Ph(n){return Math.max(1,Math.ceil(Math.log(Ih(n))/Math.LN2)+1)}function Rh(){var n=Ch,t=ke,e=Ph;function i(s){Array.isArray(s)||(s=Array.from(s));var r,o=s.length,a,h,l=new Array(o);for(r=0;r<o;++r)l[r]=n(s[r],r,s);var c=t(l),f=c[0],u=c[1],d=e(l,f,u);if(!Array.isArray(d)){const w=u,x=+d;if(t===ke&&([f,u]=zh(f,u,x)),d=lh(f,u,x),d[0]<=f&&(h=hr(f,u,x)),d[d.length-1]>=u)if(w>=u&&t===ke){const M=hr(f,u,x);isFinite(M)&&(M>0?u=(Math.floor(u/M)+1)*M:M<0&&(u=(Math.ceil(u*-M)+1)/-M))}else d.pop()}for(var p=d.length,m=0,g=p;d[m]<=f;)++m;for(;d[g-1]>u;)--g;(m||g<p)&&(d=d.slice(m,g),p=g-m);var y=new Array(p+1),b;for(r=0;r<=p;++r)b=y[r]=[],b.x0=r>0?d[r-1]:f,b.x1=r<p?d[r]:u;if(isFinite(h)){if(h>0)for(r=0;r<o;++r)(a=l[r])!=null&&f<=a&&a<=u&&y[Math.min(p,Math.floor((a-f)/h))].push(s[r]);else if(h<0){for(r=0;r<o;++r)if((a=l[r])!=null&&f<=a&&a<=u){const w=Math.floor((f-a)*h);y[Math.min(p,w+(d[w]<=a))].push(s[r])}}}else for(r=0;r<o;++r)(a=l[r])!=null&&f<=a&&a<=u&&y[ch(d,a,0,p)].push(s[r]);return y}return i.value=function(s){return arguments.length?(n=typeof s=="function"?s:As(s),i):n},i.domain=function(s){return arguments.length?(t=typeof s=="function"?s:As([s[0],s[1]]),i):t},i.thresholds=function(s){return arguments.length?(e=typeof s=="function"?s:As(Array.isArray(s)?Nh.call(s):s),i):e},i}function Fh(n,t){let e=0,i=0;for(let s of n)s!=null&&(s=+s)>=s&&(++e,i+=s);if(e)return i/e}function as(n,t){let e=0;if(t===void 0)for(let i of n)(i=+i)&&(e+=i);else{let i=-1;for(let s of n)(s=+t(s,++i,n))&&(e+=s)}return e}function li(n,t,e){return Math.min(Math.max(n,t),e)}function Lh(n){const t=n.replace("#",""),e=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),s=parseInt(t.slice(4,6),16);return{r:e,g:i,b:s}}function Dr(n,t,e){n/=255,t/=255,e/=255;const i=Math.max(n,t,e),s=Math.min(n,t,e);let r=0,o=0;const a=(i+s)/2;if(i!==s){const h=i-s;switch(o=a>.5?h/(2-i-s):h/(i+s),i){case n:r=(t-e)/h+(t<e?6:0);break;case t:r=(e-n)/h+2;break;case e:r=(n-t)/h+4;break}r/=6}return{h:r,s:o,l:a}}function Hr(n,t,e){let i,s,r;if(t===0)i=s=r=e;else{const o=(l,c,f)=>(f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?l+(c-l)*6*f:f<.5?c:f<.6666666666666666?l+(c-l)*(.6666666666666666-f)*6:l),a=e<.5?e*(1+t):e+t-e*t,h=2*e-a;i=o(h,a,n+1/3),s=o(h,a,n),r=o(h,a,n-1/3)}return[Math.round(i*255),Math.round(s*255),Math.round(r*255)]}function Bh(n,t){var h;if(!n)return"rgba(0,0,0,1)";let e="#000000",i=1;if(n.type===Pr.COLOR_TYPE_RGB){const l=String(n.value).replace(/^#/,"");l.length===8?e="#".concat(l.slice(2)):l.length===6?e="#".concat(l):e="#000000"}else if(n.type===Pr.COLOR_TYPE_SCHEME){const l=String(n.value);let c=t.colorMap[l];if(!c&&l.startsWith("theme:")){const f=parseInt((h=l.split(":")[1])!=null?h:"",10);if(!Number.isNaN(f)){const d=["lt1","dk1","lt2","dk2","accent1","accent2","accent3","accent4","accent5","accent6","hlink","folHlink"][f];d&&(c=t.colorMap[d])}}e=c||"#000000"}else e="#000000";let{r:s,g:r,b:o}=Lh(e);const a=n.transform;if(a){if(a.alpha&&(i=li(a.alpha/1e5,0,1)),a.satMod){const l=Dr(s,r,o);l.s=li(l.s*(a.satMod/1e5),0,1),[s,r,o]=Hr(l.h,l.s,l.l)}if(a.lumMod||a.lumOff){const l=Dr(s,r,o);a.lumMod&&(l.l*=a.lumMod/1e5),a.lumOff&&(l.l+=a.lumOff/1e5),l.l=li(l.l,0,1),[s,r,o]=Hr(l.h,l.s,l.l)}if(a.tint){const l=li(a.tint/1e5,-1,1),c=f=>l>0?f+(255-f)*l:l<0?f*(1+l):f;s=c(s),r=c(r),o=c(o)}a.shade&&(s*=1-a.shade/1e5,r*=1-a.shade/1e5,o*=1-a.shade/1e5)}return s=li(Math.round(s),0,255),r=li(Math.round(r),0,255),o=li(Math.round(o),0,255),"rgba(".concat(s,",").concat(r,",").concat(o,",").concat(i,")")}function zt(n,t,e){var i,s;return n?(s=(i=Bh(n,t))!=null?i:e)!=null?s:"transparent":e!=null?e:"transparent"}var Es,Wr;function Oh(){if(Wr)return Es;Wr=1;var n=xh(),t=bh(),e=t(function(i,s,r,o){n(i,s,r,o)});return Es=e,Es}var Dh=Oh();const Hh=ia(Dh);function ra(n){switch(n){case"title":case"ctrTitle":return"titleStyle";case"body":case void 0:case"obj":case"content":case"subTitle":case"":return"bodyStyle";default:return"otherStyle"}}const Ft=1/9525;function Wh(n){return n.xEmu!==0||n.yEmu!==0||n.widthEmu!==0||n.heightEmu!==0}const oa=(n,...t)=>Hh({},n,...t,(e,i)=>e||i);function Xf(n,t,e){var v,A,N,z,P,E,B,I,L,q,J,V,R,D,H,Z;const s=(v=n.placeholderIndex)!=null?v:0,r=X=>{switch(X){case"subTitle":return["subTitle","body"];case"ctrTitle":case"centeredTitle":return["ctrTitle","title"];default:return[X!=null?X:"other"]}},o=(X,it,ct)=>{var rt,mt;return(rt=X==null?void 0:X.elements)!=null&&rt.length?(mt=X.elements.find(Y=>{var _;return it.includes(Y.placeholderType)&&((_=Y.placeholderIndex)!=null?_:0)===ct}))!=null?mt:X.elements.find(Y=>it.includes(Y.placeholderType)):void 0};let h=n.placeholderType!==void 0||n.placeholderIndex!==void 0?ra(n.placeholderType):"otherStyle";n.placeholderType==="subTitle"&&h==="titleStyle"&&(h="bodyStyle");const l=e.useLayoutId,c=t.layouts.find(X=>X.id===l),f=(A=n.textStyle)!=null?A:{anchor:Qn.ANCHOR_TYPE_UNSPECIFIED,vertical:ih.VERTICAL_TYPE_UNSPECIFIED,bold:!1,italic:!1,fontSize:1400,fill:void 0,alignment:ti.ALIGNMENT_TYPE_UNSPECIFIED,underline:"none",bottomInset:0,leftInset:0,rightInset:0,topInset:0,useParagraphSpacing:!1},u=(z=(N=n.levelsStyles)==null?void 0:N[0])==null?void 0:z.textStyle;let d,p,m,g,y;const b=r(n.placeholderType),w=o(c,b,s);w!=null&&w.textStyle&&(d=w.textStyle),(E=(P=w==null?void 0:w.levelsStyles)==null?void 0:P[0])!=null&&E.textStyle&&(p=w.levelsStyles[0].textStyle);const x=c!=null&&c.parentLayoutId?(B=t.layouts.find(X=>X.id===c.parentLayoutId))!=null?B:t.layouts.find(X=>X.type==="master"):t.layouts.find(X=>X.type==="master");if(x){const X=r(n.placeholderType),it=o(x,X,s);it!=null&&it.textStyle&&(m=it.textStyle),(L=(I=it==null?void 0:it.levelsStyles)==null?void 0:I[0])!=null&&L.textStyle&&(g=it.levelsStyles[0].textStyle),h==="titleStyle"&&((J=(q=x==null?void 0:x.titleLevelStyles)==null?void 0:q[0])!=null&&J.textStyle)?y=x.titleLevelStyles[0].textStyle:h==="bodyStyle"&&((R=(V=x==null?void 0:x.bodyLevelStyles)==null?void 0:V[0])!=null&&R.textStyle)?y=x.bodyLevelStyles[0].textStyle:(H=(D=x==null?void 0:x.otherLevelStyles)==null?void 0:D[0])!=null&&H.textStyle&&(y=x.otherLevelStyles[0].textStyle)}const M=(Z=n.fontReference)!=null&&Z.color?{fill:{type:nh.FILL_TYPE_SOLID,color:n.fontReference.color,gradientStops:[]}}:void 0;return oa(f,M,u,d,p,m,g,y)}function $r(n){if(!n)return;const t=String(n).trim();if(t){if(/[^A-Za-z0-9_-]/.test(t)){const e=t.replace(/'/g,"\\'");return"'".concat(e,"'")}return t}}function $h(n,t){var h,l,c,f,u,d,p,m,g,y,b,w,x,M,v,A,N,z,P;if(!n)return{colorMap:{},lineStyleMap:{},effectMap:{}};const e={};if(n.colorScheme)for(const E of n.colorScheme.colors){if(!(E!=null&&E.color))continue;const B=E.color.lastColor?"#".concat(E.color.lastColor):"#".concat(E.color.value);e[E.name]=B}const i={};if(t&&Object.keys(t).length){for(const[E,B]of Object.entries(t)){const I=(h=e[B])!=null?h:e[E];I&&(i[E]=I)}for(const[E,B]of Object.entries(e))i[E]||(i[E]=B);i.bg1||(i.bg1=(c=(l=e.lt1)!=null?l:i.bg1)!=null?c:""),i.bg2||(i.bg2=(u=(f=e.lt2)!=null?f:i.bg2)!=null?u:""),i.tx1||(i.tx1=(p=(d=e.dk1)!=null?d:i.tx1)!=null?p:""),i.tx2||(i.tx2=(g=(m=e.lt2)!=null?m:i.tx2)!=null?g:"")}else{for(const[E,B]of Object.entries(e))i[E]=B;i.bg1=(b=(y=i.lt1)!=null?y:i.bg1)!=null?b:"",i.bg2=(x=(w=i.lt2)!=null?w:i.bg2)!=null?x:"",i.tx1=(v=(M=i.dk1)!=null?M:i.tx1)!=null?v:"",i.tx2=(N=(A=i.lt2)!=null?A:i.tx2)!=null?N:""}const s={},r=(z=n.lineStyleList)!=null?z:[];for(const[E,B]of r.entries())s[E+1]=B;const o={},a=(P=n.effectStyleList)!=null?P:[];for(const[E,B]of a.entries())o[E+1]=B;return{colorMap:i,lineStyleMap:s,effectMap:o}}function Gr(n){return typeof n=="number"&&!Number.isNaN(n)}function ci(n,t){return n!=null?n:t!=null?t:void 0}function aa(n,t){var s,r,o,a;if(!n||!((s=n.levelsStyles)!=null&&s.length))return;const e=n.levelsStyles,i=(r=t==null?void 0:t.paragraphStyle)==null?void 0:r.marginLeft;if(Gr(i)){let h,l=Number.POSITIVE_INFINITY;for(const c of e){const f=(o=c.paragraphStyle)==null?void 0:o.marginLeft;if(!Gr(f))continue;const u=Math.abs(f-i);u<l&&(h=c,l=u)}if(h)return h}return(a=e.find(h=>h.level===1))!=null?a:e[0]}function Gh(n,t){var i;const e=(i=n==null?void 0:n.paragraphStyle)!=null?i:{};return{bulletCharacter:ci(t==null?void 0:t.bulletCharacter,e.bulletCharacter),marginLeft:ci(t==null?void 0:t.marginLeft,e.marginLeft),indent:ci(t==null?void 0:t.indent,e.indent),lineSpacingPercent:ci(t==null?void 0:t.lineSpacingPercent,e.lineSpacingPercent),lineSpacingPoints:ci(t==null?void 0:t.lineSpacingPoints,e.lineSpacingPoints),autoNumberType:ci(t==null?void 0:t.autoNumberType,e.autoNumberType),autoNumberStartAt:ci(t==null?void 0:t.autoNumberStartAt,e.autoNumberStartAt)}}function Yh(n,t){const e=aa(n,t),i=t==null?void 0:t.spaceBefore,s=t==null?void 0:t.spaceAfter;return{spaceBefore:i!==void 0?i:e==null?void 0:e.spaceBefore,spaceAfter:s!==void 0?s:e==null?void 0:e.spaceAfter}}function qf(n,t,e){var c,f,u,d,p;const i=e.useLayoutId,s=t.layouts.find(m=>m.id===i),r=s!=null&&s.parentLayoutId?(c=t.layouts.find(m=>m.id===s.parentLayoutId))!=null?c:t.layouts.find(m=>m.type==="master"):t.layouts.find(m=>m.type==="master");if(!r)return{};const a=n.placeholderType!==void 0||n.placeholderIndex!==void 0?ra(n.placeholderType):"otherStyle",h=0,l=a==="titleStyle"?(f=r.titleLevelStyles)==null?void 0:f[h]:a==="bodyStyle"?(u=r.bodyLevelStyles)==null?void 0:u[h]:(d=r.otherLevelStyles)==null?void 0:d[h];return{lineSpacingPercent:(p=l==null?void 0:l.paragraphStyle)==null?void 0:p.lineSpacingPercent,spaceBefore:l==null?void 0:l.spaceBefore,spaceAfter:l==null?void 0:l.spaceAfter}}const ui=14,Uh=1;function vs(n){return n?n*(96/914400):0}const Yr=.1*96,Ur=.05*96;function Vr(n){return n?n/100*(96/72):0}function Ge(n,t=1){return n/100*(96/72)*t}function Cn(n,t){let e=Math.max(1,Math.floor(n)),i="";for(;e>0;)e--,i=String.fromCharCode(97+e%26)+i,e=Math.floor(e/26);return t?i.toUpperCase():i}function Xr(n,t){let e=Math.max(1,Math.min(3999,Math.floor(n)));const i=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let s="";for(const[r,o]of i)for(;e>=r;)s+=o,e-=r;return t?s:s.toLowerCase()}function Vh(n,t){switch(t){case"arabicPeriod":return"".concat(n,".");case"arabicPlain":return"".concat(n);case"alphaLcPeriod":return"".concat(Cn(n,!1),".");case"alphaUcPeriod":return"".concat(Cn(n,!0),".");case"alphaLcParenR":return"".concat(Cn(n,!1),")");case"alphaUcParenR":return"".concat(Cn(n,!0),")");case"romanLcPeriod":return"".concat(Xr(n,!1),".");case"romanUcPeriod":return"".concat(Xr(n,!0),".");default:return"".concat(n,".")}}function br(n,t,e,i,s){var q,J,V,R,D,H,Z,X,it,ct,nt,rt,mt,Y,_,S,T,U,C,tt,k,K,ht;if(!n.paragraphs)return;let r=0,o=0,a=0,h=0;if(s!=null&&s.bboxPx)({x:r,y:o,width:a,height:h}=s.bboxPx);else if(n.bbox){const $=(q=n.bbox.xEmu)!=null?q:0,et=(J=n.bbox.yEmu)!=null?J:0,st=(V=n.bbox.widthEmu)!=null?V:0,at=(R=n.bbox.heightEmu)!=null?R:0;r=$*Ft,o=et*Ft,a=st*Ft,h=at*Ft}r+=Yr,o+=Ur,a-=Yr*2,h-=Ur*2;const l=(D=s==null?void 0:s.resolvedStyle)!=null?D:n.textStyle,c=(Z=(H=e.colorMap)==null?void 0:H.tx1)!=null?Z:"#000000",f=(X=s==null?void 0:s.textScale)!=null?X:1,u=(it=s==null?void 0:s.wrap)!=null?it:!0,d=u?a:1e9;function p($,et,st,at,ft,Et,_t){et.length!==0&&($.push({segments:et.slice(),widthPx:st,heightPx:at,align:ft,maxPx:Et,offsetPx:_t}),et.length=0)}function m($,et){t.font=$;const st=new Float32Array(et.length+1);let at=0;st[0]=0;for(let ft=0;ft<et.length;ft++){const Et=et[ft];Et&&(at+=t.measureText(Et).width,st[ft+1]=at)}return st}const g=[],y={};for(let $=0;$<n.paragraphs.length;$++){const et=n.paragraphs[$];if(!et)continue;const st=et.textStyle,at=aa(n,et),ft=Gh(at,et.paragraphStyle),Et=Yh(n,et),_t={spaceBefore:Et.spaceBefore!==void 0?Et.spaceBefore:(ct=s==null?void 0:s.masterDefaults)==null?void 0:ct.spaceBefore,spaceAfter:Et.spaceAfter!==void 0?Et.spaceAfter:(nt=s==null?void 0:s.masterDefaults)==null?void 0:nt.spaceAfter},ut=(rt=ft.marginLeft)!=null?rt:0,jt=(mt=ft.indent)!=null?mt:0,de=!!ft.bulletCharacter&&(ut>0||jt<0),Ht=!!ft.autoNumberType&&(ut>0||jt<0),dt=de||Ht;let Q=dt?vs(ut+jt):0;const F=dt?vs(ut):0,O=((S=(_=ft.lineSpacingPercent)!=null?_:(Y=s==null?void 0:s.masterDefaults)==null?void 0:Y.lineSpacingPercent)!=null?S:Math.round(Uh*1e5))/1e5,ot=_t.spaceBefore?Vr(_t.spaceBefore):0;ot>0&&g.push({segments:[],widthPx:0,heightPx:ot,align:"left",maxPx:0,offsetPx:0});const G=[];let j=0,pt="left",gt=0,xt=!0,vt=!1;const bt=Ht?"".concat(ft.autoNumberType,"|").concat(ut,"|").concat(jt):"";let ne=0;if(Ht){const Ct=ft.autoNumberStartAt;y[bt]===void 0&&(y[bt]=typeof Ct=="number"&&Ct>0?Ct:1),ne=y[bt]}for(let Ct=0;Ct<et.runs.length;Ct++){const At=et.runs[Ct];if(!At)continue;const Mt=oa({},At.textStyle,st,l),Rt=Mt!=null&&Mt.fontSize?Ge(Mt.fontSize,f):ui*(96/72)*f,Ye=$r(Mt==null?void 0:Mt.name),Qi=Ye?"".concat(Ye,", Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif"):"Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif",En=Mt!=null&&Mt.bold?"500":"normal",ws=Mt!=null&&Mt.italic?"italic ":"",se="".concat(ws).concat(En," ").concat(Rt,"px ").concat(Qi);t.font=se;const Ue=zt((T=Mt==null?void 0:Mt.fill)==null?void 0:T.color,e,c);if(pt=(Mt==null?void 0:Mt.alignment)===ti.ALIGNMENT_TYPE_CENTER?"center":(Mt==null?void 0:Mt.alignment)===ti.ALIGNMENT_TYPE_RIGHT?"right":"left",gt=Math.max(gt,Rt),dt&&!vt){const Yt=Ht?"".concat(Vh(ne,ft.autoNumberType)," "):"".concat(ft.bulletCharacter," "),me=m(se,Yt),Ne=me[Yt.length]||t.measureText(Yt).width,oe={text:Yt,widthPx:Ne,font:se,fill:Ue,px:Rt,run:At,paraIndex:$,runIndex:Ct,charStart:0,charEnd:Yt.length,advance:me};if(G.push(oe),j+=Ne,gt=Math.max(gt,Rt),vt=!0,xt){const ae=vs(ut);Q=Math.max(0,ae-Ne)}Ht&&(y[bt]=ne+1)}if(!At.text||At.text.length===0){const Yt={text:"",widthPx:0,font:se,fill:Ue,px:Rt,run:At,paraIndex:$,runIndex:Ct,charStart:0,charEnd:0,advance:new Float32Array(1)};G.push(Yt),gt=Math.max(gt,Rt);continue}let re=0;const tn=At.text.split("\n");for(let Yt=0;Yt<tn.length;Yt++){const me=tn[Yt];if(!me)continue;const Ne=Array.from(me.matchAll(/(\s+|\S+)/g)).map(oe=>oe[0]);for(let oe=0;oe<Ne.length;oe++){const ae=Ne[oe];if(!ae)continue;let Ut=ae;const _s=/^\s+$/.test(ae);for(;Ut.length>0;){const Si=d-j;if(u&&Si<=0&&G.length){const lt=gt||ui*1.3333333333333333*f;p(g,G,j,lt*O,pt,lt,xt?Q:F),j=0,gt=0,xt=!1;continue}t.font=se;const en=t.measureText(Ut).width;if(en<=Si){const lt=m(se,Ut),Tt={text:Ut,widthPx:en,font:se,fill:Ue,px:Rt,run:At,paraIndex:$,runIndex:Ct,charStart:re,charEnd:re+Ut.length,advance:lt};G.push(Tt),j+=en,gt=Math.max(gt,Rt),re+=Ut.length,Ut="";break}if(u&&!_s&&j>0){const lt=gt||ui*1.3333333333333333*f;p(g,G,j,lt*O,pt,lt,xt?Q:F),j=0,gt=0,xt=!1;continue}const Ai=m(se,Ut);let ai=0,Ei=Ut.length;for(;ai<Ei;){const lt=Math.ceil((ai+Ei)/2);Ai[lt]&&Ai[lt]<=Si?ai=lt:Ei=lt-1}let Ve=ai;Ve===0&&(Ve=1);const Xe=Ut.slice(0,Ve),nn=Ai[Ve]||t.measureText(Xe).width,vn={text:Xe,widthPx:nn,font:se,fill:Ue,px:Rt,run:At,paraIndex:$,runIndex:Ct,charStart:re,charEnd:re+Xe.length,advance:m(se,Xe)};if(G.push(vn),j+=nn,gt=Math.max(gt,Rt),re+=Xe.length,Ut=Ut.slice(Ve),Ut.length>0){const lt=gt||ui*1.3333333333333333*f;p(g,G,j,lt*O,pt,lt,xt?Q:F),j=0,gt=0,xt=!1}}}if(Yt<tn.length-1){if(G.length===0){const ae={text:"",widthPx:0,font:se,fill:Ue,px:Rt,run:At,paraIndex:$,runIndex:Ct,charStart:re,charEnd:re,advance:new Float32Array(1)};G.push(ae)}const oe=gt||ui*(96/72)*f;p(g,G,j,oe*O,pt,oe,xt?Q:F),j=0,gt=0,xt=!1}}}const Pt=gt||ui*(96/72)*f;if(G.length===0){const Ct=$r((U=l==null?void 0:l.name)!=null?U:l==null?void 0:l.typeface),At=Ct?"".concat(Ct,", Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif"):"Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif",Mt=ui*(96/72)*f,Qi={text:"",widthPx:0,font:"".concat(Mt,"px ").concat(At),fill:c,px:Mt,run:{text:"",citations:[]},paraIndex:$,runIndex:0,charStart:0,charEnd:0,advance:new Float32Array(1)};G.push(Qi)}p(g,G,j,Pt*O+(_t.spaceAfter?Vr(_t.spaceAfter):0),pt,Pt,xt?Q:F)}if(!g.length)return;const b=(C=l==null?void 0:l.anchor)!=null?C:Qn.ANCHOR_TYPE_TOP,w=g.reduce(($,et)=>$+et.heightPx,0);let x=b===Qn.ANCHOR_TYPE_BOTTOM?o+(h-w):b===Qn.ANCHOR_TYPE_MIDDLE?o+(h-w)/2:o;const M=(s==null?void 0:s.mode)==="layout";M||(t.textBaseline="top");const A=((tt=l==null?void 0:l.rotation)!=null?tt:0)*Math.PI/180,N=[],z=x;!M&&A!==0&&(t.save(),t.translate(r,z),t.rotate(A));for(const $ of g){let et=$.align==="center"?r+(a-$.widthPx)/2:$.align==="right"?r+a-$.widthPx:r+((k=$.offsetPx)!=null?k:0);for(const st of $.segments){if(!M){t.font=st.font,t.fillStyle=st.fill;const at=$.maxPx-st.px;if((ht=(K=st.run)==null?void 0:K.hyperlink)!=null&&ht.uri){const ft={x:et,y:x+($.maxPx-st.px),width:st.widthPx,height:st.px,url:st.run.hyperlink.uri};N.push(ft),i==null||i.push(ft)}A!==0?t.fillText(st.text,et-r,x+at-z):t.fillText(st.text,et,x+at)}et+=st.widthPx}x+=$.heightPx}!M&&A!==0&&t.restore();const P=g.reduce(($,et)=>$+et.heightPx,0),E=a,B=P,I=Math.abs(E*Math.cos(A))+Math.abs(B*Math.sin(A)),L=Math.abs(E*Math.sin(A))+Math.abs(B*Math.cos(A));return{x:r,y:x-P,width:A!==0?I:a,height:A!==0?L:P,lines:g.map($=>{var et;return{segments:$.segments,widthPx:$.widthPx,heightPx:$.heightPx,align:$.align,maxPx:$.maxPx,offsetPx:(et=$.offsetPx)!=null?et:0}}),linkRects:N}}function Xh(n){var e;const t=n.layouts.find(i=>i.type==="master");return(e=t==null?void 0:t.colorMap)!=null?e:void 0}function qh(n,t,e){var s;const i=e.useLayoutId;if(n.bbox&&Wh(n.bbox)&&t){const{xEmu:r,yEmu:o,widthEmu:a,heightEmu:h}=n.bbox;return{x:(r!=null?r:0)*Ft,y:(o!=null?o:0)*Ft,width:(a!=null?a:0)*Ft,height:(h!=null?h:0)*Ft}}if(n.placeholderIndex!==void 0){const r=(s=n.placeholderIndex)!=null?s:0,o=t.layouts.find(h=>h.id===i),a=o==null?void 0:o.elements.find(h=>{var l;return((l=h.placeholderIndex)!=null?l:0)===r});if(a!=null&&a.bbox){const{xEmu:h,yEmu:l,widthEmu:c,heightEmu:f}=a.bbox;return{x:(h!=null?h:0)*Ft,y:(l!=null?l:0)*Ft,width:(c!=null?c:0)*Ft,height:(f!=null?f:0)*Ft}}if((o==null?void 0:o.parentLayoutId)!==i){const h=t.layouts.find(c=>c.type==="master"),l=h==null?void 0:h.elements.find(c=>{var f;return((f=c.placeholderIndex)!=null?f:0)===r});if(l!=null&&l.bbox){const{xEmu:c,yEmu:f,widthEmu:u,heightEmu:d}=l.bbox;return{x:(c!=null?c:0)*Ft,y:(f!=null?f:0)*Ft,width:(u!=null?u:0)*Ft,height:(d!=null?d:0)*Ft}}}}return{x:0,y:0,width:0,height:0}}function Zh(n){for(var t=n.length/6|0,e=new Array(t),i=0;i<t;)e[i]="#"+n.slice(i*6,++i*6);return e}const jh=Zh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),St="Segoe UI, Helvetica, Arial, sans-serif",ji=10,Mr=11,hs=10,Zt="#666",ye=jh,ha=.6,wr=2,la={top:12,right:12,bottom:12,left:12},ca=uh({decimal:".",thousands:",",grouping:[3],currency:["","$"],percent:" %"});function Jh(n){return n.categories.length>0?n.categories.length:n.series.reduce((t,e)=>Math.max(t,e.values.length),0)}function ua(n){var d,p,m;const t=n.type===yt.CHART_TYPE_AREA||n.type===yt.CHART_TYPE_AREA_3D,e=n.type===yt.CHART_TYPE_LINE||n.type===yt.CHART_TYPE_LINE_3D,i=(d=n.barOptions)==null?void 0:d.grouping,s=(p=n.areaOptions)==null?void 0:p.grouping,r=(m=n.lineOptions)==null?void 0:m.grouping;let o=!1,a=!1;if(t?(o=s===rs.AREA_GROUPING_STACKED,a=s===rs.AREA_GROUPING_PERCENT_STACKED):e?(o=r===os.LINE_GROUPING_STACKED,a=r===os.LINE_GROUPING_PERCENT_STACKED):(o=i===We.BAR_GROUPING_STACKED,a=i===We.BAR_GROUPING_PERCENT_STACKED),o){const g=Jh(n);let y=0,b=0;for(let w=0;w<g;w++){let x=0,M=0;n.series.forEach(v=>{var N;const A=(N=v.values[w])!=null?N:0;A>=0?x+=A:M+=A}),x>y&&(y=x),M<b&&(b=M)}return{min:Math.min(0,b),max:Math.max(0,y)}}if(a){const g=n.series.some(b=>b.values.some(w=>(w!=null?w:0)<0)),y=n.series.some(b=>b.values.some(w=>(w!=null?w:0)>0));return{min:g?-1:0,max:y?1:0}}const h=n.series.flatMap(g=>g.values),[l,c]=ke(h),f=Number.isFinite(l)?l:0,u=Number.isFinite(c)?c:0;return{min:f,max:u}}function Kh(n,t){var i,s;if(n.categories.length>0)return n.categories;const e=(s=(i=n.series[t])==null?void 0:i.categories)!=null?s:[];return e.length>0?e:[]}function fa(n,t){var d,p,m,g,y,b,w;const e=t!=null?t:new Set,i=n.series.findIndex((x,M)=>!e.has(M));if(i===-1)return{categories:[],seriesIndex:-1,segments:[],extents:{min:0,max:0}};const s=n.series[i],r=(d=s==null?void 0:s.values)!=null?d:[],o=Kh(n,i),a=new Set((m=(p=n.waterfallOptions)==null?void 0:p.subtotalIndices)!=null?m:[]),h=Math.max(r.length,o.length);let l=0,c=0,f=0;const u=[];for(let x=0;x<h;x++){const M=(g=r[x])!=null?g:0,v=a.has(x),A=(w=(b=o[x])!=null?b:(y=s==null?void 0:s.categories)==null?void 0:y[x])!=null?w:"Item ".concat(x+1),N=l;let z,P,E,B;v?(z=0,P=M,E=M,B="total"):(z=l,E=l+M,P=E,B=M>=0?"increase":"decrease"),l=E,c=Math.min(c,z,P),f=Math.max(f,z,P),u.push({index:x,category:A,value:M,start:z,end:P,cumulativeBefore:N,cumulativeAfter:E,isSubtotal:v,kind:B,labelValue:v?E:M})}return c=Math.min(c,0),f=Math.max(f,0),{categories:o,seriesIndex:i,segments:u,extents:{min:c,max:f}}}function qr(n,t){var d,p,m;const e=n.categories.length>0?n.categories:(p=(d=n.series[0])==null?void 0:d.categories)!=null?p:[];let i,s;if(n.type===yt.CHART_TYPE_WATERFALL){const g=fa(n);i=g.extents.min,s=g.extents.max}else{const g=ua(n);i=g.min,s=g.max}const r=Math.min(0,i),o=Math.max(0,s),a=(m=n.barOptions)==null?void 0:m.gapWidth,h=typeof a=="number"&&isFinite(a)?1-1/(1+a/100):ha,l=n.type===yt.CHART_TYPE_LINE||n.type===yt.CHART_TYPE_LINE_3D,c=n.type===yt.CHART_TYPE_AREA||n.type===yt.CHART_TYPE_AREA_3D,f=l||c?fh().domain(e).range([t.x,t.x+t.width]).padding(l?.5:0):qi().domain(e).range([t.x,t.x+t.width]).paddingInner(h).paddingOuter(.5),u=si().domain([Math.min(0,r),o]).nice().range([t.y+t.height,t.y]);return{x:f,y:u}}function Sn(n){return typeof n.bandwidth=="function"}function xn(n,t){if(t!==void 0){if(Sn(n)){const e=n(t);return e!==void 0?e+n.bandwidth()/2:void 0}return n(t)}}function Qh(n){return n===yt.CHART_TYPE_PIE||n===yt.CHART_TYPE_PIE_3D||n===yt.CHART_TYPE_DOUGHNUT}function da(n,t,e){if(n.measureText(t).width<=e)return t;const i="…";let s=0,r=t.length;for(;s<r;){const o=Math.ceil((s+r)/2);n.measureText(t.slice(0,o)+i).width<=e?s=o:r=o-1}return t.slice(0,s)+i}function Qt(n,t){var o,a,h,l,c,f,u;const e=(a=(o=n==null?void 0:n.line)==null?void 0:o.fill)!=null&&a.color?zt(n.line.fill.color,t):Zt,i=(l=(h=n==null?void 0:n.textStyle)==null?void 0:h.fill)!=null&&l.color?zt(n.textStyle.fill.color,t):e,s=(c=n==null?void 0:n.textStyle)!=null&&c.fontSize?Ge(n.textStyle.fontSize):ji,r=(u=(f=n==null?void 0:n.majorGridlines)==null?void 0:f.fill)!=null&&u.color?zt(n.majorGridlines.fill.color,t):void 0;return{lineColor:e,textColor:i,fontSize:s,gridLineColor:r}}function ma(n){var i;const t=(i=n==null?void 0:n.textStyle)==null?void 0:i.rotation;if(typeof t!="number"||Number.isNaN(t)||t===-1e3)return 0;let e=t;if(Math.abs(e)>360){const s=e/6e4;Number.isFinite(s)&&Math.abs(s)<=360?e=s:Number.isFinite(e)&&(e=e%360)}return!Number.isFinite(e)||(Math.abs(e)>=360&&(e=e%360),Math.abs(e)<.001)?0:e}var Is={exports:{}},Zr;function tl(){return Zr||(Zr=1,(function(n){var t={},e=function(s){s.version="0.11.2";function r(_){for(var S="",T=_.length-1;T>=0;)S+=_.charAt(T--);return S}function o(_,S){for(var T="";T.length<S;)T+=_;return T}function a(_,S){var T=""+_;return T.length>=S?T:o("0",S-T.length)+T}function h(_,S){var T=""+_;return T.length>=S?T:o(" ",S-T.length)+T}function l(_,S){var T=""+_;return T.length>=S?T:T+o(" ",S-T.length)}function c(_,S){var T=""+Math.round(_);return T.length>=S?T:o("0",S-T.length)+T}function f(_,S){var T=""+_;return T.length>=S?T:o("0",S-T.length)+T}var u=Math.pow(2,32);function d(_,S){if(_>u||_<-u)return c(_,S);var T=Math.round(_);return f(T,S)}function p(_,S){return S=S||0,_.length>=7+S&&(_.charCodeAt(S)|32)===103&&(_.charCodeAt(S+1)|32)===101&&(_.charCodeAt(S+2)|32)===110&&(_.charCodeAt(S+3)|32)===101&&(_.charCodeAt(S+4)|32)===114&&(_.charCodeAt(S+5)|32)===97&&(_.charCodeAt(S+6)|32)===108}var m=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],g=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function y(_){_[0]="General",_[1]="0",_[2]="0.00",_[3]="#,##0",_[4]="#,##0.00",_[9]="0%",_[10]="0.00%",_[11]="0.00E+00",_[12]="# ?/?",_[13]="# ??/??",_[14]="m/d/yy",_[15]="d-mmm-yy",_[16]="d-mmm",_[17]="mmm-yy",_[18]="h:mm AM/PM",_[19]="h:mm:ss AM/PM",_[20]="h:mm",_[21]="h:mm:ss",_[22]="m/d/yy h:mm",_[37]="#,##0 ;(#,##0)",_[38]="#,##0 ;[Red](#,##0)",_[39]="#,##0.00;(#,##0.00)",_[40]="#,##0.00;[Red](#,##0.00)",_[45]="mm:ss",_[46]="[h]:mm:ss",_[47]="mmss.0",_[48]="##0.0E+0",_[49]="@",_[56]='"上午/下午 "hh"時"mm"分"ss"秒 "'}var b={};y(b);var w=[],x=0;for(x=5;x<=8;++x)w[x]=32+x;for(x=23;x<=26;++x)w[x]=0;for(x=27;x<=31;++x)w[x]=14;for(x=50;x<=58;++x)w[x]=14;for(x=59;x<=62;++x)w[x]=x-58;for(x=67;x<=68;++x)w[x]=x-58;for(x=72;x<=75;++x)w[x]=x-58;for(x=67;x<=68;++x)w[x]=x-57;for(x=76;x<=78;++x)w[x]=x-56;for(x=79;x<=81;++x)w[x]=x-34;var M=[];M[5]=M[63]='"$"#,##0_);\\("$"#,##0\\)',M[6]=M[64]='"$"#,##0_);[Red]\\("$"#,##0\\)',M[7]=M[65]='"$"#,##0.00_);\\("$"#,##0.00\\)',M[8]=M[66]='"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',M[41]='_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',M[42]='_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',M[43]='_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',M[44]='_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)';function v(_,S,T){for(var U=_<0?-1:1,C=_*U,tt=0,k=1,K=0,ht=1,$=0,et=0,st=Math.floor(C);$<S&&(st=Math.floor(C),K=st*k+tt,et=st*$+ht,!(C-st<5e-8));)C=1/(C-st),tt=k,k=K,ht=$,$=et;if(et>S&&($>S?(et=ht,K=tt):(et=$,K=k)),!T)return[0,U*K,et];var at=Math.floor(U*K/et);return[at,U*K-at*et,et]}function A(_,S,T){if(_>2958465||_<0)return null;var U=_|0,C=Math.floor(86400*(_-U)),tt=0,k=[],K={D:U,T:C,u:86400*(_-U)-C,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(K.u)<1e-6&&(K.u=0),S&&S.date1904&&(U+=1462),K.u>.9999&&(K.u=0,++C==86400&&(K.T=C=0,++U,++K.D)),U===60)k=T?[1317,10,29]:[1900,2,29],tt=3;else if(U===0)k=T?[1317,8,29]:[1900,1,0],tt=6;else{U>60&&--U;var ht=new Date(1900,0,1);ht.setDate(ht.getDate()+U-1),k=[ht.getFullYear(),ht.getMonth()+1,ht.getDate()],tt=ht.getDay(),U<60&&(tt=(tt+6)%7),T&&(tt=q(ht,k))}return K.y=k[0],K.m=k[1],K.d=k[2],K.S=C%60,C=Math.floor(C/60),K.M=C%60,C=Math.floor(C/60),K.H=C,K.q=tt,K}s.parse_date_code=A;var N=new Date(1899,11,31,0,0,0),z=N.getTime(),P=new Date(1900,2,1,0,0,0);function E(_,S){var T=_.getTime();return S?T-=1262304e5:_>=P&&(T+=864e5),(T-(z+(_.getTimezoneOffset()-N.getTimezoneOffset())*6e4))/864e5}function B(_){return _.toString(10)}s._general_int=B;var I=(function(){var S=/(?:\.0*|(\.\d*[1-9])0+)$/;function T($){return $.indexOf(".")==-1?$:$.replace(S,"$1")}var U=/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,C=/(E[+-])(\d)$/;function tt($){return $.indexOf("E")==-1?$:$.replace(U,"$1E").replace(C,"$10$2")}function k($){var et=$<0?12:11,st=T($.toFixed(12));return st.length<=et||(st=$.toPrecision(10),st.length<=et)?st:$.toExponential(5)}function K($){var et=T($.toFixed(11));return et.length>($<0?12:11)||et==="0"||et==="-0"?$.toPrecision(6):et}function ht($){var et=Math.floor(Math.log(Math.abs($))*Math.LOG10E),st;return et>=-4&&et<=-1?st=$.toPrecision(10+et):Math.abs(et)<=9?st=k($):et===10?st=$.toFixed(10).substr(0,12):st=K($),T(tt(st.toUpperCase()))}return ht})();s._general_num=I;function L(_,S){switch(typeof _){case"string":return _;case"boolean":return _?"TRUE":"FALSE";case"number":return(_|0)===_?_.toString(10):I(_);case"undefined":return"";case"object":if(_==null)return"";if(_ instanceof Date)return mt(14,E(_,S&&S.date1904),S)}throw new Error("unsupported value in General format: "+_)}s._general=L;function q(_,S){S[0]-=581;var T=_.getDay();return _<60&&(T=(T+6)%7),T}function J(_,S,T,U){var C="",tt=0,k=0,K=T.y,ht,$=0;switch(_){case 98:K=T.y+543;case 121:switch(S.length){case 1:case 2:ht=K%100,$=2;break;default:ht=K%1e4,$=4;break}break;case 109:switch(S.length){case 1:case 2:ht=T.m,$=S.length;break;case 3:return g[T.m-1][1];case 5:return g[T.m-1][0];default:return g[T.m-1][2]}break;case 100:switch(S.length){case 1:case 2:ht=T.d,$=S.length;break;case 3:return m[T.q][0];default:return m[T.q][1]}break;case 104:switch(S.length){case 1:case 2:ht=1+(T.H+11)%12,$=S.length;break;default:throw"bad hour format: "+S}break;case 72:switch(S.length){case 1:case 2:ht=T.H,$=S.length;break;default:throw"bad hour format: "+S}break;case 77:switch(S.length){case 1:case 2:ht=T.M,$=S.length;break;default:throw"bad minute format: "+S}break;case 115:if(S!="s"&&S!="ss"&&S!=".0"&&S!=".00"&&S!=".000")throw"bad second format: "+S;return T.u===0&&(S=="s"||S=="ss")?a(T.S,S.length):(U>=2?k=U===3?1e3:100:k=U===1?10:1,tt=Math.round(k*(T.S+T.u)),tt>=60*k&&(tt=0),S==="s"?tt===0?"0":""+tt/k:(C=a(tt,2+U),S==="ss"?C.substr(0,2):"."+C.substr(2,S.length-1)));case 90:switch(S){case"[h]":case"[hh]":ht=T.D*24+T.H;break;case"[m]":case"[mm]":ht=(T.D*24+T.H)*60+T.M;break;case"[s]":case"[ss]":ht=((T.D*24+T.H)*60+T.M)*60+Math.round(T.S+T.u);break;default:throw"bad abstime format: "+S}$=S.length===3?1:2;break;case 101:ht=K,$=1;break}var et=$>0?a(ht,$):"";return et}function V(_){var S=3;if(_.length<=S)return _;for(var T=_.length%S,U=_.substr(0,T);T!=_.length;T+=S)U+=(U.length>0?",":"")+_.substr(T,S);return U}var R=(function(){var S=/%/g;function T(Q,F,O){var ot=F.replace(S,""),G=F.length-ot.length;return R(Q,ot,O*Math.pow(10,2*G))+o("%",G)}function U(Q,F,O){for(var ot=F.length-1;F.charCodeAt(ot-1)===44;)--ot;return R(Q,F.substr(0,ot),O/Math.pow(10,3*(F.length-ot)))}function C(Q,F){var O,ot=Q.indexOf("E")-Q.indexOf(".")-1;if(Q.match(/^#+0.0E\+0$/)){if(F==0)return"0.0E+0";if(F<0)return"-"+C(Q,-F);var G=Q.indexOf(".");G===-1&&(G=Q.indexOf("E"));var j=Math.floor(Math.log(F)*Math.LOG10E)%G;if(j<0&&(j+=G),O=(F/Math.pow(10,j)).toPrecision(ot+1+(G+j)%G),O.indexOf("e")===-1){var pt=Math.floor(Math.log(F)*Math.LOG10E);for(O.indexOf(".")===-1?O=O.charAt(0)+"."+O.substr(1)+"E+"+(pt-O.length+j):O+="E+"+(pt-j);O.substr(0,2)==="0.";)O=O.charAt(0)+O.substr(2,G)+"."+O.substr(2+G),O=O.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");O=O.replace(/\+-/,"-")}O=O.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(gt,xt,vt,bt){return xt+vt+bt.substr(0,(G+j)%G)+"."+bt.substr(j)+"E"})}else O=F.toExponential(ot);return Q.match(/E\+00$/)&&O.match(/e[+-]\d$/)&&(O=O.substr(0,O.length-1)+"0"+O.charAt(O.length-1)),Q.match(/E\-/)&&O.match(/e\+/)&&(O=O.replace(/e\+/,"e")),O.replace("e","E")}var tt=/# (\?+)( ?)\/( ?)(\d+)/;function k(Q,F,O){var ot=parseInt(Q[4],10),G=Math.round(F*ot),j=Math.floor(G/ot),pt=G-j*ot,gt=ot;return O+(j===0?"":""+j)+" "+(pt===0?o(" ",Q[1].length+1+Q[4].length):h(pt,Q[1].length)+Q[2]+"/"+Q[3]+a(gt,Q[4].length))}function K(Q,F,O){return O+(F===0?"":""+F)+o(" ",Q[1].length+2+Q[4].length)}var ht=/^#*0*\.([0#]+)/,$=/\).*[0#]/,et=/\(###\) ###\\?-####/;function st(Q){for(var F="",O,ot=0;ot!=Q.length;++ot)switch(O=Q.charCodeAt(ot)){case 35:break;case 63:F+=" ";break;case 48:F+="0";break;default:F+=String.fromCharCode(O)}return F}function at(Q,F){var O=Math.pow(10,F);return""+Math.round(Q*O)/O}function ft(Q,F){var O=Q-Math.floor(Q),ot=Math.pow(10,F);return F<(""+Math.round(O*ot)).length?0:Math.round(O*ot)}function Et(Q,F){return F<(""+Math.round((Q-Math.floor(Q))*Math.pow(10,F))).length?1:0}function _t(Q){return Q<2147483647&&Q>-2147483648?""+(Q>=0?Q|0:Q-1|0):""+Math.floor(Q)}function ut(Q,F,O){if(Q.charCodeAt(0)===40&&!F.match($)){var ot=F.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return O>=0?ut("n",ot,O):"("+ut("n",ot,-O)+")"}if(F.charCodeAt(F.length-1)===44)return U(Q,F,O);if(F.indexOf("%")!==-1)return T(Q,F,O);if(F.indexOf("E")!==-1)return C(F,O);if(F.charCodeAt(0)===36)return"$"+ut(Q,F.substr(F.charAt(1)==" "?2:1),O);var G,j,pt,gt,xt=Math.abs(O),vt=O<0?"-":"";if(F.match(/^00+$/))return vt+d(xt,F.length);if(F.match(/^[#?]+$/))return G=d(O,0),G==="0"&&(G=""),G.length>F.length?G:st(F.substr(0,F.length-G.length))+G;if(j=F.match(tt))return k(j,xt,vt);if(F.match(/^#+0+$/))return vt+d(xt,F.length-F.indexOf("0"));if(j=F.match(ht))return G=at(O,j[1].length).replace(/^([^\.]+)$/,"$1."+st(j[1])).replace(/\.$/,"."+st(j[1])).replace(/\.(\d*)$/,function(At,Mt){return"."+Mt+o("0",st(j[1]).length-Mt.length)}),F.indexOf("0.")!==-1?G:G.replace(/^0\./,".");if(F=F.replace(/^#+([0.])/,"$1"),j=F.match(/^(0*)\.(#*)$/))return vt+at(xt,j[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,j[1].length?"0.":".");if(j=F.match(/^#{1,3},##0(\.?)$/))return vt+V(d(xt,0));if(j=F.match(/^#,##0\.([#0]*0)$/))return O<0?"-"+ut(Q,F,-O):V(""+(Math.floor(O)+Et(O,j[1].length)))+"."+a(ft(O,j[1].length),j[1].length);if(j=F.match(/^#,#*,#0/))return ut(Q,F.replace(/^#,#*,/,""),O);if(j=F.match(/^([0#]+)(\\?-([0#]+))+$/))return G=r(ut(Q,F.replace(/[\\-]/g,""),O)),pt=0,r(r(F.replace(/\\/g,"")).replace(/[0#]/g,function(At){return pt<G.length?G.charAt(pt++):At==="0"?"0":""}));if(F.match(et))return G=ut(Q,"##########",O),"("+G.substr(0,3)+") "+G.substr(3,3)+"-"+G.substr(6);var bt="";if(j=F.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return pt=Math.min(j[4].length,7),gt=v(xt,Math.pow(10,pt)-1,!1),G=""+vt,bt=R("n",j[1],gt[1]),bt.charAt(bt.length-1)==" "&&(bt=bt.substr(0,bt.length-1)+"0"),G+=bt+j[2]+"/"+j[3],bt=l(gt[2],pt),bt.length<j[4].length&&(bt=st(j[4].substr(j[4].length-bt.length))+bt),G+=bt,G;if(j=F.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return pt=Math.min(Math.max(j[1].length,j[4].length),7),gt=v(xt,Math.pow(10,pt)-1,!0),vt+(gt[0]||(gt[1]?"":"0"))+" "+(gt[1]?h(gt[1],pt)+j[2]+"/"+j[3]+l(gt[2],pt):o(" ",2*pt+1+j[2].length+j[3].length));if(j=F.match(/^[#0?]+$/))return G=d(O,0),F.length<=G.length?G:st(F.substr(0,F.length-G.length))+G;if(j=F.match(/^([#0?]+)\.([#0]+)$/)){G=""+O.toFixed(Math.min(j[2].length,10)).replace(/([^0])0+$/,"$1"),pt=G.indexOf(".");var ne=F.indexOf(".")-pt,Pt=F.length-G.length-ne;return st(F.substr(0,ne)+G+F.substr(F.length-Pt))}if(j=F.match(/^00,000\.([#0]*0)$/))return pt=ft(O,j[1].length),O<0?"-"+ut(Q,F,-O):V(_t(O)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(At){return"00,"+(At.length<3?a(0,3-At.length):"")+At})+"."+a(pt,j[1].length);switch(F){case"###,##0.00":return ut(Q,"#,##0.00",O);case"###,###":case"##,###":case"#,###":var Ct=V(d(xt,0));return Ct!=="0"?vt+Ct:"";case"###,###.00":return ut(Q,"###,##0.00",O).replace(/^0\./,".");case"#,###.00":return ut(Q,"#,##0.00",O).replace(/^0\./,".")}throw new Error("unsupported format |"+F+"|")}function jt(Q,F,O){for(var ot=F.length-1;F.charCodeAt(ot-1)===44;)--ot;return R(Q,F.substr(0,ot),O/Math.pow(10,3*(F.length-ot)))}function de(Q,F,O){var ot=F.replace(S,""),G=F.length-ot.length;return R(Q,ot,O*Math.pow(10,2*G))+o("%",G)}function Ht(Q,F){var O,ot=Q.indexOf("E")-Q.indexOf(".")-1;if(Q.match(/^#+0.0E\+0$/)){if(F==0)return"0.0E+0";if(F<0)return"-"+Ht(Q,-F);var G=Q.indexOf(".");G===-1&&(G=Q.indexOf("E"));var j=Math.floor(Math.log(F)*Math.LOG10E)%G;if(j<0&&(j+=G),O=(F/Math.pow(10,j)).toPrecision(ot+1+(G+j)%G),!O.match(/[Ee]/)){var pt=Math.floor(Math.log(F)*Math.LOG10E);O.indexOf(".")===-1?O=O.charAt(0)+"."+O.substr(1)+"E+"+(pt-O.length+j):O+="E+"+(pt-j),O=O.replace(/\+-/,"-")}O=O.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(gt,xt,vt,bt){return xt+vt+bt.substr(0,(G+j)%G)+"."+bt.substr(j)+"E"})}else O=F.toExponential(ot);return Q.match(/E\+00$/)&&O.match(/e[+-]\d$/)&&(O=O.substr(0,O.length-1)+"0"+O.charAt(O.length-1)),Q.match(/E\-/)&&O.match(/e\+/)&&(O=O.replace(/e\+/,"e")),O.replace("e","E")}function dt(Q,F,O){if(Q.charCodeAt(0)===40&&!F.match($)){var ot=F.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return O>=0?dt("n",ot,O):"("+dt("n",ot,-O)+")"}if(F.charCodeAt(F.length-1)===44)return jt(Q,F,O);if(F.indexOf("%")!==-1)return de(Q,F,O);if(F.indexOf("E")!==-1)return Ht(F,O);if(F.charCodeAt(0)===36)return"$"+dt(Q,F.substr(F.charAt(1)==" "?2:1),O);var G,j,pt,gt,xt=Math.abs(O),vt=O<0?"-":"";if(F.match(/^00+$/))return vt+a(xt,F.length);if(F.match(/^[#?]+$/))return G=""+O,O===0&&(G=""),G.length>F.length?G:st(F.substr(0,F.length-G.length))+G;if(j=F.match(tt))return K(j,xt,vt);if(F.match(/^#+0+$/))return vt+a(xt,F.length-F.indexOf("0"));if(j=F.match(ht))return G=(""+O).replace(/^([^\.]+)$/,"$1."+st(j[1])).replace(/\.$/,"."+st(j[1])),G=G.replace(/\.(\d*)$/,function(At,Mt){return"."+Mt+o("0",st(j[1]).length-Mt.length)}),F.indexOf("0.")!==-1?G:G.replace(/^0\./,".");if(F=F.replace(/^#+([0.])/,"$1"),j=F.match(/^(0*)\.(#*)$/))return vt+(""+xt).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,j[1].length?"0.":".");if(j=F.match(/^#{1,3},##0(\.?)$/))return vt+V(""+xt);if(j=F.match(/^#,##0\.([#0]*0)$/))return O<0?"-"+dt(Q,F,-O):V(""+O)+"."+o("0",j[1].length);if(j=F.match(/^#,#*,#0/))return dt(Q,F.replace(/^#,#*,/,""),O);if(j=F.match(/^([0#]+)(\\?-([0#]+))+$/))return G=r(dt(Q,F.replace(/[\\-]/g,""),O)),pt=0,r(r(F.replace(/\\/g,"")).replace(/[0#]/g,function(At){return pt<G.length?G.charAt(pt++):At==="0"?"0":""}));if(F.match(et))return G=dt(Q,"##########",O),"("+G.substr(0,3)+") "+G.substr(3,3)+"-"+G.substr(6);var bt="";if(j=F.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return pt=Math.min(j[4].length,7),gt=v(xt,Math.pow(10,pt)-1,!1),G=""+vt,bt=R("n",j[1],gt[1]),bt.charAt(bt.length-1)==" "&&(bt=bt.substr(0,bt.length-1)+"0"),G+=bt+j[2]+"/"+j[3],bt=l(gt[2],pt),bt.length<j[4].length&&(bt=st(j[4].substr(j[4].length-bt.length))+bt),G+=bt,G;if(j=F.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return pt=Math.min(Math.max(j[1].length,j[4].length),7),gt=v(xt,Math.pow(10,pt)-1,!0),vt+(gt[0]||(gt[1]?"":"0"))+" "+(gt[1]?h(gt[1],pt)+j[2]+"/"+j[3]+l(gt[2],pt):o(" ",2*pt+1+j[2].length+j[3].length));if(j=F.match(/^[#0?]+$/))return G=""+O,F.length<=G.length?G:st(F.substr(0,F.length-G.length))+G;if(j=F.match(/^([#0]+)\.([#0]+)$/)){G=""+O.toFixed(Math.min(j[2].length,10)).replace(/([^0])0+$/,"$1"),pt=G.indexOf(".");var ne=F.indexOf(".")-pt,Pt=F.length-G.length-ne;return st(F.substr(0,ne)+G+F.substr(F.length-Pt))}if(j=F.match(/^00,000\.([#0]*0)$/))return O<0?"-"+dt(Q,F,-O):V(""+O).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(At){return"00,"+(At.length<3?a(0,3-At.length):"")+At})+"."+a(0,j[1].length);switch(F){case"###,###":case"##,###":case"#,###":var Ct=V(""+xt);return Ct!=="0"?vt+Ct:"";default:if(F.match(/\.[0#?]*$/))return dt(Q,F.slice(0,F.lastIndexOf(".")),O)+st(F.slice(F.lastIndexOf(".")))}throw new Error("unsupported format |"+F+"|")}return function(F,O,ot){return(ot|0)===ot?dt(F,O,ot):ut(F,O,ot)}})();function D(_){for(var S=[],T=!1,U=0,C=0;U<_.length;++U)switch(_.charCodeAt(U)){case 34:T=!T;break;case 95:case 42:case 92:++U;break;case 59:S[S.length]=_.substr(C,U-C),C=U+1}if(S[S.length]=_.substr(C),T===!0)throw new Error("Format |"+_+"| unterminated string ");return S}s._split=D;var H=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Z(_){for(var S=0,T="",U="";S<_.length;)switch(T=_.charAt(S)){case"G":p(_,S)&&(S+=6),S++;break;case'"':for(;_.charCodeAt(++S)!==34&&S<_.length;);++S;break;case"\\":S+=2;break;case"_":S+=2;break;case"@":++S;break;case"B":case"b":if(_.charAt(S+1)==="1"||_.charAt(S+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(_.substr(S,3).toUpperCase()==="A/P"||_.substr(S,5).toUpperCase()==="AM/PM"||_.substr(S,5).toUpperCase()==="上午/下午")return!0;++S;break;case"[":for(U=T;_.charAt(S++)!=="]"&&S<_.length;)U+=_.charAt(S);if(U.match(H))return!0;break;case".":case"0":case"#":for(;S<_.length&&("0#?.,E+-%".indexOf(T=_.charAt(++S))>-1||T=="\\"&&_.charAt(S+1)=="-"&&"0#".indexOf(_.charAt(S+2))>-1););break;case"?":for(;_.charAt(++S)===T;);break;case"*":++S,(_.charAt(S)==" "||_.charAt(S)=="*")&&++S;break;case"(":case")":++S;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;S<_.length&&"0123456789".indexOf(_.charAt(++S))>-1;);break;case" ":++S;break;default:++S;break}return!1}s.is_date=Z;function X(_,S,T,U){for(var C=[],tt="",k=0,K="",ht="t",$,et,st,at="H";k<_.length;)switch(K=_.charAt(k)){case"G":if(!p(_,k))throw new Error("unrecognized character "+K+" in "+_);C[C.length]={t:"G",v:"General"},k+=7;break;case'"':for(tt="";(st=_.charCodeAt(++k))!==34&&k<_.length;)tt+=String.fromCharCode(st);C[C.length]={t:"t",v:tt},++k;break;case"\\":var ft=_.charAt(++k),Et=ft==="("||ft===")"?ft:"t";C[C.length]={t:Et,v:ft},++k;break;case"_":C[C.length]={t:"t",v:" "},k+=2;break;case"@":C[C.length]={t:"T",v:S},++k;break;case"B":case"b":if(_.charAt(k+1)==="1"||_.charAt(k+1)==="2"){if($==null&&($=A(S,T,_.charAt(k+1)==="2"),$==null))return"";C[C.length]={t:"X",v:_.substr(k,2)},ht=K,k+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":K=K.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(S<0||$==null&&($=A(S,T),$==null))return"";for(tt=K;++k<_.length&&_.charAt(k).toLowerCase()===K;)tt+=K;K==="m"&&ht.toLowerCase()==="h"&&(K="M"),K==="h"&&(K=at),C[C.length]={t:K,v:tt},ht=K;break;case"A":case"a":case"上":var _t={t:K,v:K};if($==null&&($=A(S,T)),_.substr(k,3).toUpperCase()==="A/P"?($!=null&&(_t.v=$.H>=12?"P":"A"),_t.t="T",at="h",k+=3):_.substr(k,5).toUpperCase()==="AM/PM"?($!=null&&(_t.v=$.H>=12?"PM":"AM"),_t.t="T",k+=5,at="h"):_.substr(k,5).toUpperCase()==="上午/下午"?($!=null&&(_t.v=$.H>=12?"下午":"上午"),_t.t="T",k+=5,at="h"):(_t.t="t",++k),$==null&&_t.t==="T")return"";C[C.length]=_t,ht=K;break;case"[":for(tt=K;_.charAt(k++)!=="]"&&k<_.length;)tt+=_.charAt(k);if(tt.slice(-1)!=="]")throw'unterminated "[" block: |'+tt+"|";if(tt.match(H)){if($==null&&($=A(S,T),$==null))return"";C[C.length]={t:"Z",v:tt.toLowerCase()},ht=tt.charAt(1)}else tt.indexOf("$")>-1&&(tt=(tt.match(/\$([^-\[\]]*)/)||[])[1]||"$",Z(_)||(C[C.length]={t:"t",v:tt}));break;case".":if($!=null){for(tt=K;++k<_.length&&(K=_.charAt(k))==="0";)tt+=K;C[C.length]={t:"s",v:tt};break}case"0":case"#":for(tt=K;++k<_.length&&"0#?.,E+-%".indexOf(K=_.charAt(k))>-1;)tt+=K;C[C.length]={t:"n",v:tt};break;case"?":for(tt=K;_.charAt(++k)===K;)tt+=K;C[C.length]={t:K,v:tt},ht=K;break;case"*":++k,(_.charAt(k)==" "||_.charAt(k)=="*")&&++k;break;case"(":case")":C[C.length]={t:U===1?"t":K,v:K},++k;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(tt=K;k<_.length&&"0123456789".indexOf(_.charAt(++k))>-1;)tt+=_.charAt(k);C[C.length]={t:"D",v:tt};break;case" ":C[C.length]={t:K,v:K},++k;break;case"$":C[C.length]={t:"t",v:"$"},++k;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(K)===-1)throw new Error("unrecognized character "+K+" in "+_);C[C.length]={t:"t",v:K},++k;break}var ut=0,jt=0,de;for(k=C.length-1,ht="t";k>=0;--k)switch(C[k].t){case"h":case"H":C[k].t=at,ht="h",ut<1&&(ut=1);break;case"s":(de=C[k].v.match(/\.0+$/))&&(jt=Math.max(jt,de[0].length-1)),ut<3&&(ut=3);case"d":case"y":case"M":case"e":ht=C[k].t;break;case"m":ht==="s"&&(C[k].t="M",ut<2&&(ut=2));break;case"X":break;case"Z":ut<1&&C[k].v.match(/[Hh]/)&&(ut=1),ut<2&&C[k].v.match(/[Mm]/)&&(ut=2),ut<3&&C[k].v.match(/[Ss]/)&&(ut=3)}switch(ut){case 0:break;case 1:$.u>=.5&&($.u=0,++$.S),$.S>=60&&($.S=0,++$.M),$.M>=60&&($.M=0,++$.H);break;case 2:$.u>=.5&&($.u=0,++$.S),$.S>=60&&($.S=0,++$.M);break}var Ht="",dt;for(k=0;k<C.length;++k)switch(C[k].t){case"t":case"T":case" ":case"D":break;case"X":C[k].v="",C[k].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":C[k].v=J(C[k].t.charCodeAt(0),C[k].v,$,jt),C[k].t="t";break;case"n":case"?":for(dt=k+1;C[dt]!=null&&((K=C[dt].t)==="?"||K==="D"||(K===" "||K==="t")&&C[dt+1]!=null&&(C[dt+1].t==="?"||C[dt+1].t==="t"&&C[dt+1].v==="/")||C[k].t==="("&&(K===" "||K==="n"||K===")")||K==="t"&&(C[dt].v==="/"||C[dt].v===" "&&C[dt+1]!=null&&C[dt+1].t=="?"));)C[k].v+=C[dt].v,C[dt]={v:"",t:";"},++dt;Ht+=C[k].v,k=dt-1;break;case"G":C[k].t="t",C[k].v=L(S,T);break}var Q="",F,O;if(Ht.length>0){Ht.charCodeAt(0)==40?(F=S<0&&Ht.charCodeAt(0)===45?-S:S,O=R("n",Ht,F)):(F=S<0&&U>1?-S:S,O=R("n",Ht,F),F<0&&C[0]&&C[0].t=="t"&&(O=O.substr(1),C[0].v="-"+C[0].v)),dt=O.length-1;var ot=C.length;for(k=0;k<C.length;++k)if(C[k]!=null&&C[k].t!="t"&&C[k].v.indexOf(".")>-1){ot=k;break}var G=C.length;if(ot===C.length&&O.indexOf("E")===-1){for(k=C.length-1;k>=0;--k)C[k]==null||"n?".indexOf(C[k].t)===-1||(dt>=C[k].v.length-1?(dt-=C[k].v.length,C[k].v=O.substr(dt+1,C[k].v.length)):dt<0?C[k].v="":(C[k].v=O.substr(0,dt+1),dt=-1),C[k].t="t",G=k);dt>=0&&G<C.length&&(C[G].v=O.substr(0,dt+1)+C[G].v)}else if(ot!==C.length&&O.indexOf("E")===-1){for(dt=O.indexOf(".")-1,k=ot;k>=0;--k)if(!(C[k]==null||"n?".indexOf(C[k].t)===-1)){for(et=C[k].v.indexOf(".")>-1&&k===ot?C[k].v.indexOf(".")-1:C[k].v.length-1,Q=C[k].v.substr(et+1);et>=0;--et)dt>=0&&(C[k].v.charAt(et)==="0"||C[k].v.charAt(et)==="#")&&(Q=O.charAt(dt--)+Q);C[k].v=Q,C[k].t="t",G=k}for(dt>=0&&G<C.length&&(C[G].v=O.substr(0,dt+1)+C[G].v),dt=O.indexOf(".")+1,k=ot;k<C.length;++k)if(!(C[k]==null||"n?(".indexOf(C[k].t)===-1&&k!==ot)){for(et=C[k].v.indexOf(".")>-1&&k===ot?C[k].v.indexOf(".")+1:0,Q=C[k].v.substr(0,et);et<C[k].v.length;++et)dt<O.length&&(Q+=O.charAt(dt++));C[k].v=Q,C[k].t="t",G=k}}}for(k=0;k<C.length;++k)C[k]!=null&&"n?".indexOf(C[k].t)>-1&&(F=U>1&&S<0&&k>0&&C[k-1].v==="-"?-S:S,C[k].v=R(C[k].t,C[k].v,F),C[k].t="t");var j="";for(k=0;k!==C.length;++k)C[k]!=null&&(j+=C[k].v);return j}s._eval=X;var it=/\[[=<>]/,ct=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nt(_,S){if(S==null)return!1;var T=parseFloat(S[2]);switch(S[1]){case"=":if(_==T)return!0;break;case">":if(_>T)return!0;break;case"<":if(_<T)return!0;break;case"<>":if(_!=T)return!0;break;case">=":if(_>=T)return!0;break;case"<=":if(_<=T)return!0;break}return!1}function rt(_,S){var T=D(_),U=T.length,C=T[U-1].indexOf("@");if(U<4&&C>-1&&--U,T.length>4)throw new Error("cannot find right format for |"+T.join("|")+"|");if(typeof S!="number")return[4,T.length===4||C>-1?T[T.length-1]:"@"];switch(T.length){case 1:T=C>-1?["General","General","General",T[0]]:[T[0],T[0],T[0],"@"];break;case 2:T=C>-1?[T[0],T[0],T[0],T[1]]:[T[0],T[1],T[0],"@"];break;case 3:T=C>-1?[T[0],T[1],T[0],T[2]]:[T[0],T[1],T[2],"@"];break}var tt=S>0?T[0]:S<0?T[1]:T[2];if(T[0].indexOf("[")===-1&&T[1].indexOf("[")===-1)return[U,tt];if(T[0].match(it)!=null||T[1].match(it)!=null){var k=T[0].match(ct),K=T[1].match(ct);return nt(S,k)?[U,T[0]]:nt(S,K)?[U,T[1]]:[U,T[k!=null&&K!=null?2:1]]}return[U,tt]}function mt(_,S,T){T==null&&(T={});var U="";switch(typeof _){case"string":_=="m/d/yy"&&T.dateNF?U=T.dateNF:U=_;break;case"number":_==14&&T.dateNF?U=T.dateNF:U=(T.table!=null?T.table:b)[_],U==null&&(U=T.table&&T.table[w[_]]||b[w[_]]),U==null&&(U=M[_]||"General");break}if(p(U,0))return L(S,T);S instanceof Date&&(S=E(S,T.date1904));var C=rt(U,S);if(p(C[1]))return L(S,T);if(S===!0)S="TRUE";else if(S===!1)S="FALSE";else if(S===""||S==null)return"";return X(C[1],S,T,C[0])}function Y(_,S){if(typeof S!="number"){S=+S||-1;for(var T=0;T<392;++T){if(b[T]==null){S<0&&(S=T);continue}if(b[T]==_){S=T;break}}S<0&&(S=391)}return b[S]=_,S}s.load=Y,s._table=b,s.get_table=function(){return b},s.load_table=function(S){for(var T=0;T!=392;++T)S[T]!==void 0&&Y(S[T],T)},s.init_table=y,s.format=mt};e(t),typeof DO_NOT_EXPORT_SSF>"u"&&(n.exports=t)})(Is)),Is.exports}var el=tl();const Ji=ia(el);function _r(n,t,e){if(!isFinite(e)||e===0)return{width:n,height:t};const i=Math.cos(e),s=Math.sin(e),r=Math.abs(n*i)+Math.abs(t*s),o=Math.abs(n*s)+Math.abs(t*i);return{width:r,height:o}}function Zi(n,t,e,i,s){const r=t==null?void 0:t.trim();if(!r)return;const o=typeof(e==null?void 0:e.fontSize)=="number"?Ge(e.fontSize):i,h=(typeof(e==null?void 0:e.rotation)=="number"?e.rotation:s)*Math.PI/180,l=!!(e!=null&&e.bold);n.save(),n.font="".concat(l?"bold ":"").concat(o,"px ").concat(St);const c=n.measureText(r).width;n.restore();const f=_r(c,o,h);return{text:r,fontPx:o,rotationRad:h,width:f.width,height:f.height,isBold:l}}const jr=6,Jr=8;function Kr(n,t,e,i,s){var D,H,Z,X,it,ct,nt,rt,mt,Y;const{x:r,y:o}=e,a=t.categories.length>0?t.categories:(H=(D=t.series[0])==null?void 0:D.categories)!=null?H:[];n.save(),n.font="".concat(ji,"px ").concat(St),n.fillStyle=Zt,n.strokeStyle=Zt,n.lineWidth=1;const h=Qt(t.xAxis,s),l=o.domain(),c=l[0],f=l[l.length-1],u=typeof c=="number"&&typeof f=="number"?Math.min(c,f):void 0;let d=o(u!==void 0?u:Math.min(0,c!=null?c:0));Number.isFinite(d)||(d=i.y+i.height);const p=i.y+i.height,m=i.y,g=Math.abs(d-p)<=Math.abs(d-m),y=g?1:-1,b=4,w=b+2,x=t.xAxis;!!((X=(Z=x==null?void 0:x.line)==null?void 0:Z.fill)!=null&&X.color)&&(n.strokeStyle=h.lineColor,n.beginPath(),n.moveTo(i.x,d),n.lineTo(i.x+i.width,d),n.stroke()),n.strokeStyle=h.lineColor,n.lineWidth=1,n.font="".concat(h.fontSize,"px ").concat(St);const v=ma(t.xAxis),A=v*Math.PI/180;let N=0;a.forEach(_=>{const S=_!=null?_:"",T=n.measureText(S).width;T>N&&(N=T)});const z=_r(N,h.fontSize,A),P=N>0?z.height+jr:0;n.textAlign="center",n.textBaseline=g?"top":"bottom",n.fillStyle=h.textColor;const E=!!(x!=null&&x.majorTickMark)&&x.majorTickMark!=="TICK_MARK_NONE";a.forEach(_=>{const S=xn(r,_);if(S===void 0)return;E&&(n.beginPath(),n.moveTo(S,d),n.lineTo(S,d+y*b),n.stroke());const T=Sn(r)?r.step():i.width/Math.max(1,a.length),U=da(n,_,T);A!==0?(n.save(),n.translate(S,d+y*w),n.rotate(A),n.textAlign=v<0?"right":v>0?"left":"center",n.textBaseline=g?"top":"bottom",n.fillText(U,0,0),n.restore()):n.fillText(U,S,d+y*w)});const B=Qt(t.yAxis,s),I=t.yAxis,L=!!(I!=null&&I.deleted);let q=0;if(!L){n.textAlign="right",n.textBaseline="middle",n.fillStyle=B.textColor;const _=(it=t.yAxis)==null?void 0:it.numberFormatCode,S=!!((nt=(ct=I==null?void 0:I.majorGridlines)==null?void 0:ct.fill)!=null&&nt.color),T=(rt=B.gridLineColor)!=null?rt:B.lineColor,U=(I==null?void 0:I.majorTickMark)!=="TICK_MARK_NONE";o.ticks(5).forEach(tt=>{const k=o(tt);S&&(n.strokeStyle=T,n.beginPath(),n.moveTo(i.x,k),n.lineTo(i.x+i.width,k),n.stroke()),U&&(n.strokeStyle=B.lineColor,n.beginPath(),n.moveTo(i.x-4,k),n.lineTo(i.x,k),n.stroke()),n.font="".concat(B.fontSize,"px ").concat(St);let K=_i("~s")(tt);if(_)try{K=Ji.format(_,+tt)}catch($){}n.fillText(K,i.x-6,k);const ht=n.measureText(K).width;ht>q&&(q=ht)})}const J=q>0?q+jr:0,V=Zi(n,x==null?void 0:x.title,x==null?void 0:x.titleTextStyle,h.fontSize,0),R=Zi(n,I==null?void 0:I.title,I==null?void 0:I.titleTextStyle,B.fontSize,-90);if(V){const _=x==null?void 0:x.titleTextStyle,S=(mt=_==null?void 0:_.fill)!=null&&mt.color?zt(_.fill.color,s):h.textColor,T=P+Jr+V.height/2,U=d+y*T;n.save(),n.fillStyle=S!=null?S:h.textColor,n.font="".concat(V.isBold?"bold ":"").concat(V.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(i.x+i.width/2,U),n.rotate(V.rotationRad),n.fillText(V.text,0,0),n.restore()}if(R){const _=I==null?void 0:I.titleTextStyle,S=(Y=_==null?void 0:_.fill)!=null&&Y.color?zt(_.fill.color,s):B.textColor,T=i.x-J-Jr-R.width/2,U=i.y+i.height/2;n.save(),n.fillStyle=S!=null?S:B.textColor,n.font="".concat(R.isBold?"bold ":"").concat(R.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(T,U),n.rotate(R.rotationRad),n.fillText(R.text,0,0),n.restore()}n.restore()}function il(n,t,e,i,s,r={}){const{maxLeftFrac:o=.35,sidePaddingPx:a=8}=r,{fontSize:h}=Qt(i,s);n.save(),n.font="".concat(h,"px ").concat(St);let l=0;for(const y of e){const b=n.measureText(y).width;b>l&&(l=b)}if(n.restore(),l<=0)return t;const c=Math.max(0,t.width*o),f=Math.min(c,l+a),u=la.left,d=Math.max(0,f-u);if(d<=0)return t;const m=Math.max(0,t.width-24);if(m===0)return t;const g=Math.min(d,m);return{x:t.x+g,y:t.y,width:Math.max(0,t.width-g),height:t.height}}const Qr=["accent1","accent2","accent3","accent4","accent5","accent6"];function Me(n,t,e){var o,a,h;if((o=n.fill)!=null&&o.color)return zt(n.fill.color,e);const i=(h=(a=n.stroke)==null?void 0:a.fill)!=null&&h.color?zt(n.stroke.fill.color,e):void 0;if(i)return i;const s=Qr[t%Qr.length],r=e.colorMap[s!=null?s:""];return r||ye[t%ye.length]}const nl="mapbox://mapbox.country-boundaries-v1",to="country_boundaries";function sl(n){return n&&n.replace(/[^a-zA-Z0-9_-]/g,"_")||"map"}function pa(n){const t=n?ri(n):null;if(!t)return{start:"#c1e4ff",end:"#0f5aad",fallback:"#d6dbe1"};const e=t.brighter(1.8).formatHex(),i=t.darker(.6).formatHex();return{start:e,end:i,fallback:"#d6dbe1"}}function rl(n,t,e,i,s={}){var I,L,q,J;const r=n.map;if(!t.series.length)return;const o=0;if((I=s.hiddenSeriesIndices)!=null&&I.has(o)||t.series[o]==null){n.clear();return}const a=t.series[o],h=a.categories&&a.categories.length>0?a.categories:t.categories,l=(L=a.values)!=null?L:[];if(!h||h.length===0||l.length===0){n.clear();return}const c=new Map;if(h.forEach((V,R)=>{const D=l[R],H=ol(V);H&&typeof D=="number"&&Number.isFinite(D)&&c.set(H,D)}),c.size===0){n.clear();return}const f=Array.from(c.values()),[u,d]=ke(f),p=Me(a,o,i),m=pa(p),g=u!=null?u:0,y=d!=null?d:g,b=y===g?1:0,w=si().domain([g,y+b]).range([m.start,m.end]),x=new Map,M=new Map;c.forEach((V,R)=>{x.set(R,w(V)),M.set(R,.9)});const v=eo(x,m.fallback),A=eo(M,.55),N=sl((J=(q=s.elementId)!=null?q:t.id)!=null?J:"chart"),z="granola-map-source-".concat(N),P="granola-map-fill-".concat(N),E="granola-map-outline-".concat(N),B=()=>{r.getSource(z)||(r.addSource(z,{type:"vector",url:nl}),n.trackSource(z)),r.getLayer(P)?(r.setPaintProperty(P,"fill-color",v),r.setPaintProperty(P,"fill-opacity",A)):(r.addLayer({id:P,type:"fill",source:z,"source-layer":to,paint:{"fill-color":v,"fill-opacity":A}}),n.trackLayer(P)),r.getLayer(E)||(r.addLayer({id:E,type:"line",source:z,"source-layer":to,paint:{"line-color":"#ffffff","line-width":.5,"line-opacity":.6}}),n.trackLayer(E));const V=.2,R=[0,15],D=r.getZoom(),H=r.getCenter();(Math.abs(D-V)>.01||Math.abs(H.lng-R[0])>.5||Math.abs(H.lat-R[1])>.5)&&r.jumpTo({center:R,zoom:V,bearing:0,pitch:0})};if(r.isStyleLoaded())B();else{const V=()=>{r.off("styledata",V),r.off("load",V),B()};r.on("styledata",V),r.on("load",V)}}function ol(n){if(typeof n!="string")return null;const t=n.trim();return t?t.toUpperCase():null}function eo(n,t){const e=["case"];return n.forEach((i,s)=>{e.push(al(s),i)}),e.push(t),e}function al(n){return["any",["==",["upcase",["coalesce",["get","name_en"],""]],n],["==",["upcase",["coalesce",["get","name"],""]],n],["==",["upcase",["coalesce",["get","iso_3166_1_alpha_2"],""]],n],["==",["upcase",["coalesce",["get","iso_3166_1_alpha_3"],""]],n]]}function Tr(n,t){if(!(!n.points||n.points.length===0))for(let e=0;e<n.points.length;e++){const i=n.points[e],s=i.idx;if((typeof s=="number"?s:e)===t)return i}}function fe(n,t,e,i,s){const r=Tr(n,t),o=r==null?void 0:r.fill;return o?o.color?zt(o.color,i):void 0:Me(n,typeof s=="number"?s:e,i)}function we(n,t,e){var r,o,a,h;const i=Tr(n,t);if((o=(r=i==null?void 0:i.stroke)==null?void 0:r.fill)!=null&&o.color){const l=zt(i.stroke.fill.color,e),c=i.stroke.widthEmu?i.stroke.widthEmu*Ft:void 0;return{color:l,widthPx:c}}const s=n;if((h=(a=s==null?void 0:s.stroke)==null?void 0:a.fill)!=null&&h.color){const l=zt(s.stroke.fill.color,e),c=s.stroke.widthEmu?s.stroke.widthEmu*Ft:void 0;return{color:l,widthPx:c}}return{}}function _e(n,t){const e=Tr(n,t),i=e==null?void 0:e.fill;return!!(i&&!i.color)}function hl(n){var t=0,e=n.children,i=e&&e.length;if(!i)t=1;else for(;--i>=0;)t+=e[i].value;n.value=t}function ll(){return this.eachAfter(hl)}function cl(n,t){let e=-1;for(const i of this)n.call(t,i,++e,this);return this}function ul(n,t){for(var e=this,i=[e],s,r,o=-1;e=i.pop();)if(n.call(t,e,++o,this),s=e.children)for(r=s.length-1;r>=0;--r)i.push(s[r]);return this}function fl(n,t){for(var e=this,i=[e],s=[],r,o,a,h=-1;e=i.pop();)if(s.push(e),r=e.children)for(o=0,a=r.length;o<a;++o)i.push(r[o]);for(;e=s.pop();)n.call(t,e,++h,this);return this}function dl(n,t){let e=-1;for(const i of this)if(n.call(t,i,++e,this))return i}function ml(n){return this.eachAfter(function(t){for(var e=+n(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)e+=i[s].value;t.value=e})}function pl(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function gl(n){for(var t=this,e=yl(t,n),i=[t];t!==e;)t=t.parent,i.push(t);for(var s=i.length;n!==e;)i.splice(s,0,n),n=n.parent;return i}function yl(n,t){if(n===t)return n;var e=n.ancestors(),i=t.ancestors(),s=null;for(n=e.pop(),t=i.pop();n===t;)s=n,n=e.pop(),t=i.pop();return s}function xl(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function bl(){return Array.from(this)}function Ml(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function wl(){var n=this,t=[];return n.each(function(e){e!==n&&t.push({source:e.parent,target:e})}),t}function*_l(){var n=this,t,e=[n],i,s,r;do for(t=e.reverse(),e=[];n=t.pop();)if(yield n,i=n.children)for(s=0,r=i.length;s<r;++s)e.push(i[s]);while(e.length)}function ys(n,t){n instanceof Map?(n=[void 0,n],t===void 0&&(t=Al)):t===void 0&&(t=Sl);for(var e=new ls(n),i,s=[e],r,o,a,h;i=s.pop();)if((o=t(i.data))&&(h=(o=Array.from(o)).length))for(i.children=o,a=h-1;a>=0;--a)s.push(r=o[a]=new ls(o[a])),r.parent=i,r.depth=i.depth+1;return e.eachBefore(vl)}function Tl(){return ys(this).eachBefore(El)}function Sl(n){return n.children}function Al(n){return Array.isArray(n)?n[1]:null}function El(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function vl(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function ls(n){this.data=n,this.depth=this.height=0,this.parent=null}ls.prototype=ys.prototype={constructor:ls,count:ll,each:cl,eachAfter:fl,eachBefore:ul,find:dl,sum:ml,sort:pl,path:gl,ancestors:xl,descendants:bl,leaves:Ml,links:wl,copy:Tl,[Symbol.iterator]:_l};function Il(n){if(typeof n!="function")throw new Error;return n}function on(){return 0}function an(n){return function(){return n}}function ga(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function ya(n,t,e,i,s){for(var r=n.children,o,a=-1,h=r.length,l=n.value&&(i-t)/n.value;++a<h;)o=r[a],o.y0=e,o.y1=s,o.x0=t,o.x1=t+=o.value*l}function Cl(){var n=1,t=1,e=0,i=!1;function s(o){var a=o.height+1;return o.x0=o.y0=e,o.x1=n,o.y1=t/a,o.eachBefore(r(t,a)),i&&o.eachBefore(ga),o}function r(o,a){return function(h){h.children&&ya(h,h.x0,o*(h.depth+1)/a,h.x1,o*(h.depth+2)/a);var l=h.x0,c=h.y0,f=h.x1-e,u=h.y1-e;f<l&&(l=f=(l+f)/2),u<c&&(c=u=(c+u)/2),h.x0=l,h.y0=c,h.x1=f,h.y1=u}}return s.round=function(o){return arguments.length?(i=!!o,s):i},s.size=function(o){return arguments.length?(n=+o[0],t=+o[1],s):[n,t]},s.padding=function(o){return arguments.length?(e=+o,s):e},s}function kl(n,t,e,i,s){for(var r=n.children,o,a=-1,h=r.length,l=n.value&&(s-e)/n.value;++a<h;)o=r[a],o.x0=t,o.x1=i,o.y0=e,o.y1=e+=o.value*l}var Nl=(1+Math.sqrt(5))/2;function zl(n,t,e,i,s,r){for(var o=[],a=t.children,h,l,c=0,f=0,u=a.length,d,p,m=t.value,g,y,b,w,x,M,v;c<u;){d=s-e,p=r-i;do g=a[f++].value;while(!g&&f<u);for(y=b=g,M=Math.max(p/d,d/p)/(m*n),v=g*g*M,x=Math.max(b/v,v/y);f<u;++f){if(g+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),v=g*g*M,w=Math.max(b/v,v/y),w>x){g-=l;break}x=w}o.push(h={value:g,dice:d<p,children:a.slice(c,f)}),h.dice?ya(h,e,i,s,m?i+=p*g/m:r):kl(h,e,i,m?e+=d*g/m:s,r),m-=g,c=f}return o}const xa=(function n(t){function e(i,s,r,o,a){zl(t,i,s,r,o,a)}return e.ratio=function(i){return n((i=+i)>1?i:1)},e})(Nl);function Pl(){var n=xa,t=!1,e=1,i=1,s=[0],r=on,o=on,a=on,h=on,l=on;function c(u){return u.x0=u.y0=0,u.x1=e,u.y1=i,u.eachBefore(f),s=[0],t&&u.eachBefore(ga),u}function f(u){var d=s[u.depth],p=u.x0+d,m=u.y0+d,g=u.x1-d,y=u.y1-d;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),u.x0=p,u.y0=m,u.x1=g,u.y1=y,u.children&&(d=s[u.depth+1]=r(u)/2,p+=l(u)-d,m+=o(u)-d,g-=a(u)-d,y-=h(u)-d,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),n(u,p,m,g,y))}return c.round=function(u){return arguments.length?(t=!!u,c):t},c.size=function(u){return arguments.length?(e=+u[0],i=+u[1],c):[e,i]},c.tile=function(u){return arguments.length?(n=Il(u),c):n},c.padding=function(u){return arguments.length?c.paddingInner(u).paddingOuter(u):c.paddingInner()},c.paddingInner=function(u){return arguments.length?(r=typeof u=="function"?u:an(+u),c):r},c.paddingOuter=function(u){return arguments.length?c.paddingTop(u).paddingRight(u).paddingBottom(u).paddingLeft(u):c.paddingTop()},c.paddingTop=function(u){return arguments.length?(o=typeof u=="function"?u:an(+u),c):o},c.paddingRight=function(u){return arguments.length?(a=typeof u=="function"?u:an(+u),c):a},c.paddingBottom=function(u){return arguments.length?(h=typeof u=="function"?u:an(+u),c):h},c.paddingLeft=function(u){return arguments.length?(l=typeof u=="function"?u:an(+u),c):l},c}const Rl="\0";function Fl(n,t,e){const i=ba(n);if(i.length===0)return{leaves:[],parents:[]};const s=Bl(i),r=Ma(s),o=ys(r).sum(p=>typeof p.value=="number"&&p.value>0?p.value:0).sort((p,m)=>{var g,y;return((g=m.value)!=null?g:0)-((y=p.value)!=null?y:0)}),a=Math.max(0,t.width),h=Math.max(0,t.height),c=Pl().tile(xa).size([a,h]).paddingInner(1).paddingOuter(0).round(!0)(o),f=wa(e,i),u=c.leaves().filter(p=>{var m;return((m=p.value)!=null?m:0)>0}).map(p=>{var N,z,P;const m=t.x+p.x0,g=t.y+p.y0,y=Math.max(0,p.x1-p.x0),b=Math.max(0,p.y1-p.y0),w=p.data.path,x=(z=(N=p.parent)==null?void 0:N.data.path)!=null?z:[],M=x.length>0?x[x.length-1]:void 0,v=w.length>0?w[0]:void 0,A=v&&v.length>0?v:p.data.name;return{x:m,y:g,width:y,height:b,value:(P=p.value)!=null?P:0,name:p.data.name,path:w,depth:p.depth,parentName:M,topParentName:v,fill:f(A)}}),d=c.descendants().filter(p=>p.depth>0&&p.children&&p.children.length>0).map(p=>({name:p.data.name,path:p.data.path,depth:p.depth,x:t.x+p.x0,y:t.y+p.y0,width:Math.max(0,p.x1-p.x0),height:Math.max(0,p.y1-p.y0)})).sort((p,m)=>p.depth-m.depth);return{leaves:u,parents:d}}function ba(n){var e,i,s;const t=new Map;for(const r of n.series){const o=(e=r.values)!=null?e:[],a=Ll(r.categoryPaths,o.length),h=(i=r.categories)!=null&&i.length?r.categories:n.categories;for(let l=0;l<o.length;l+=1){const c=o[l];if(typeof c!="number"||!isFinite(c)||c<=0)continue;const f=(s=a[l])==null?void 0:s.levels;let u=f&&f.length?f:void 0;if(!u){const g=h==null?void 0:h[l];typeof g=="string"&&g.length>0&&(u=[g])}if(!u||u.length===0)continue;const d=[...u].reverse(),p=d.join(Rl),m=t.get(p);m?m.value+=c:t.set(p,{path:d,value:c})}}return Array.from(t.values())}function Ll(n,t){if(!n||n.length===0)return new Array(t).fill(void 0);if(n.length>=t)return n;const e=n.slice();for(;e.length<t;)e.push({levels:[]});return e}function Bl(n){const t={name:"root",path:[],children:new Map};for(const e of n){let i=t;e.path.forEach((s,r)=>{var a;let o=i.children.get(s);o||(o={name:s,path:i.path.concat(s),children:new Map},i.children.set(s,o)),i=o,r===e.path.length-1&&(i.value=((a=i.value)!=null?a:0)+e.value)})}return t}function Ma(n){var e;const t=Array.from(n.children.values()).map(Ma);return t.length===0?{name:n.name,path:n.path,value:(e=n.value)!=null?e:0}:{name:n.name,path:n.path,children:t}}function wa(n,t){const e=new Set;for(const h of t){const l=h.path[0];l&&l.length>0&&e.add(l)}const i=Array.from(e.values());if(i.length===0)return h=>{var l;return(l=ye[0])!=null?l:"#999999"};const s=["accent1","accent2","accent3","accent4","accent5","accent6"],r=h=>{var f,u;const l=s[h%s.length],c=n.colorMap[l!=null?l:""];return c||((u=(f=ye[h%ye.length])!=null?f:ye[0])!=null?u:"#999999")},o=i.map((h,l)=>r(l)),a=ta().domain(i).range(o);return h=>{var c;if(!h)return(c=ye[0])!=null?c:"#999999";if(a.domain().includes(h))return a(h);const l=a.domain().length;return r(l)}}function Ol(n,t){const e=ba(n);if(e.length===0)return[];const i=wa(t,e),s=new Set;for(const r of e){const o=r.path[0];!o||s.has(o)||s.add(o)}return Array.from(s.values()).map(r=>({key:r,label:r,color:i(r)}))}function _n(n,t){if(t)try{return Ji.format(t,n)}catch(e){}return _i("~s")(n)}function Dl(n,t){var i,s,r;const e=(r=(s=(i=n.legend)==null?void 0:i.textStyle)==null?void 0:s.fill)==null?void 0:r.color;return e?zt(e,t):Zt}const Hl=[{label:"Increase",slot:"accent1",fallback:"#5b9bd5"},{label:"Decrease",slot:"accent2",fallback:"#ed7d31"},{label:"Total",slot:"accent3",fallback:"#a5a5a5"}];function Wl(n){return Hl.map(t=>{var e,i;return{label:t.label,seriesIndex:0,fillColor:(i=(e=n.colorMap)==null?void 0:e[t.slot])!=null?i:t.fallback}})}const cs=120,ee=12,bn=4,yi=12,ns=12,$l=new Set([yt.CHART_TYPE_PIE,yt.CHART_TYPE_PIE_3D,yt.CHART_TYPE_DOUGHNUT]),fi=8,ei=8,Gl=8,us=6,fs=16,cr=hs;function _a(n){return $l.has(n.type)}function Ta(n){return n===Dt.LEGEND_POSITION_TOP_RIGHT?Dt.LEGEND_POSITION_RIGHT:n!=null?n:Dt.LEGEND_POSITION_RIGHT}function xs(n){return n===Dt.LEGEND_POSITION_TOP||n===Dt.LEGEND_POSITION_BOTTOM}function Sa(n){return n===Dt.LEGEND_POSITION_BOTTOM?{top:ei,bottom:Gl}:{top:ei,bottom:ei}}function Yl(n,t){var e,i,s,r,o;if(_a(n)){const a=n.series[0];if(!a)return[];const h=n.series.indexOf(a),l=(i=(e=a.categories)!=null&&e.length?a.categories:n.categories)!=null?i:[],c=(r=(s=a.values)==null?void 0:s.length)!=null?r:0,f=Math.max(c,l.length);if(f===0)return[];const u=a.name||"Slice",d=[];for(let p=0;p<f;p++){const m=(o=l[p])!=null?o:"".concat(u," ").concat(p+1);d.push({label:m,seriesIndex:h,pointIndex:p})}return d}if(n.type===yt.CHART_TYPE_TREEMAP){const a=Ol(n,t);return a.length===0?[]:a.map(h=>({label:h.label,seriesIndex:0,fillColor:h.color}))}return n.type===yt.CHART_TYPE_WATERFALL?Wl(t):n.series.map((a,h)=>({label:a.name||"Series ".concat(h+1),seriesIndex:h}))}function Aa(n,t){var p,m,g;if(!n.series.length)return null;const e=n.series[0];if(!e)return null;const i=e.categories&&e.categories.length>0?e.categories:n.categories,s=(p=e.values)!=null?p:[];if(!i||i.length===0||s.length===0)return null;const r=[];if(i.forEach((y,b)=>{const w=s[b];y!=null&&typeof w=="number"&&Number.isFinite(w)&&r.push(w)}),r.length===0)return null;const[o,a]=ke(r),h=o!=null?o:0,l=a!=null?a:h,c=Me(e,0,t),f=pa(c),u=(m=e.valuesFormatCode)!=null?m:void 0,d=(g=e.name)==null?void 0:g.trim();return{min:h,max:l,rampStart:f.start,rampEnd:f.end,minLabel:_n(h,u),maxLabel:_n(l,u),seriesName:d&&d.length>0?d:void 0}}function Ul(n,t,e,i){var w,x;const s=(x=(w=t.legend)==null?void 0:w.textStyle)==null?void 0:x.fontSize,r=s?Ge(s):Mr;n.font="".concat(r,"px ").concat(St);const o=Aa(t,e);if(!o)return{width:0,height:0};const a=n.measureText(o.minLabel).width,h=n.measureText(o.maxLabel).width,l=o.seriesName?n.measureText(o.seriesName).width:0,c=!!o.seriesName,f=c?r:0,u=c?ns:0;if(xs(i)){const v=Math.max(cs,l),A=ee*2+v,N=ee*2+f+u+yi+bn+r;return{width:A,height:N}}const d=Math.max(a,h),p=d>0?bn:0,g=Math.max(yi+p+d,l),y=ee*2+g,b=ee*2+f+u+cs;return{width:y,height:b}}function Ea(n,t,e,i={}){var y,b,w,x;n.save();const s=Ta((b=i.position)!=null?b:(y=t.legend)==null?void 0:y.position);if(t.type===yt.CHART_TYPE_MAP){const{width:M,height:v}=Ul(n,t,e,s);return n.restore(),{width:M,height:v,entries:[]}}const r=(x=(w=t.legend)==null?void 0:w.textStyle)==null?void 0:x.fontSize,o=r?Ge(r):Mr;n.font="".concat(o,"px ").concat(St);const a=Yl(t,e),h=r!=null?r:Math.round(o*75),l=a.map(M=>{const v={paragraphs:[{runs:[{text:M.label,citations:[]}]}],textStyle:{name:St,fontSize:h},levelsStyles:[],type:mr.ELEMENT_TYPE_TEXT},A=br(v,n,e,void 0,{mode:"layout",wrap:!1});return A?A.lines.reduce((z,P)=>Math.max(z,P.widthPx),0):0}),c=Math.max(...l,0),u=t.type===yt.CHART_TYPE_LINE||t.type===yt.CHART_TYPE_LINE_3D?8:hs,d=xs(s!=null?s:Dt.LEGEND_POSITION_RIGHT),p=a.map((M,v)=>{var N;const A=(N=l[v])!=null?N:0;return u+us+A});let m,g;if(d){const M=p.reduce((N,z,P)=>{const E=P<p.length-1?fs:0;return N+z+E},0);m=Math.max(0,M+ei*2);const{top:v,bottom:A}=Sa(s);g=cr+v+A}else{const M=a.length*cr+Math.max(0,a.length-1)*fs;m=u+us+c+ei*2,g=M+ei*2}return n.restore(),{width:m,height:g,entries:a}}function qe(n,t,e,i,s=Dt.LEGEND_POSITION_TOP,r){var I,L,q;if(t.series.length===0)return;n.save();const o=Dl(t,i),a=(L=(I=t.legend)==null?void 0:I.textStyle)==null?void 0:L.fontSize,h=a?Ge(a):Mr;n.font="".concat(h,"px ").concat(St);const l=Ta(s);if(t.type===yt.CHART_TYPE_MAP){Vl(n,t,e,i,l,h,o,r),n.restore();return}const{width:c,height:f,entries:u}=Ea(n,t,i,{position:l});if(u.length===0){n.restore();return}const d=_a(t),p=t.type===yt.CHART_TYPE_TREEMAP,m=t.type===yt.CHART_TYPE_LINE||t.type===yt.CHART_TYPE_LINE_3D,g=m?8:hs,y=m?3:hs,b=cr,w=u.map(J=>n.measureText(J.label).width);let x=e.x+fi,M=e.y+fi;const v=xs(l),A=v?Sa(l):null,N=(q=A==null?void 0:A.top)!=null?q:ei;if(v){const J=c,V=Math.max(0,e.width-fi*2),R=Math.max(0,(V-J)/2);x=e.x+fi+R,M=e.y+fi}else(l===Dt.LEGEND_POSITION_LEFT||l===Dt.LEGEND_POSITION_RIGHT)&&(x=e.x+fi,M=Math.max(e.y+fi,e.y+(e.height-f)/2));n.fillStyle="transparent",n.strokeStyle="transparent",n.lineWidth=1,n.beginPath(),n.rect(x,M,c,f),n.fill(),n.stroke();const z=Array.isArray(r==null?void 0:r.hiddenSeriesIndices)?new Set(r==null?void 0:r.hiddenSeriesIndices):r==null?void 0:r.hiddenSeriesIndices;let P=x+ei,E=M+N;const B=M+N+b/2;u.forEach((J,V)=>{var k,K,ht,$,et,st;const R=t.series[J.seriesIndex];if(!R)return;const D=J.label,H=(k=w[V])!=null?k:n.measureText(D).width,Z=($=J.fillColor)!=null?$:d?fe(R,(K=J.pointIndex)!=null?K:0,J.seriesIndex,i,(ht=J.pointIndex)!=null?ht:0):Me(R,J.seriesIndex,i),{color:X,widthPx:it}=d?we(R,(et=J.pointIndex)!=null?et:0,i):p?{color:void 0,widthPx:void 0}:we(R,0,i),ct=p?0:d?1:2,nt=it!==void 0?it:ct,rt=P,mt=v?B:E+b/2,Y=mt-y/2,_=g,S=y,T=2,U=d&&J.pointIndex!==void 0?_e(R,J.pointIndex):!1;if((st=z==null?void 0:z.has(J.seriesIndex))!=null?st:!1){const at=rt+.5,ft=Y+.5,Et=_-1,_t=S-1,ut=Math.max(0,T-.5);n.beginPath(),n.moveTo(at+ut,ft),n.lineTo(at+Et-ut,ft),n.quadraticCurveTo(at+Et,ft,at+Et,ft+ut),n.lineTo(at+Et,ft+_t-ut),n.quadraticCurveTo(at+Et,ft+_t,at+Et-ut,ft+_t),n.lineTo(at+ut,ft+_t),n.quadraticCurveTo(at,ft+_t,at,ft+_t-ut),n.lineTo(at,ft+ut),n.quadraticCurveTo(at,ft,at+ut,ft),n.closePath(),X?(n.strokeStyle=X,n.lineWidth=nt):Z&&(n.strokeStyle=Z,n.lineWidth=1),n.stroke()}else if(!U&&Z&&(n.fillStyle=Z),n.beginPath(),n.moveTo(rt+T,Y),n.lineTo(rt+_-T,Y),n.quadraticCurveTo(rt+_,Y,rt+_,Y+T),n.lineTo(rt+_,Y+S-T),n.quadraticCurveTo(rt+_,Y+S,rt+_-T,Y+S),n.lineTo(rt+T,Y+S),n.quadraticCurveTo(rt,Y+S,rt,Y+S-T),n.lineTo(rt,Y+T),n.quadraticCurveTo(rt,Y,rt+T,Y),n.closePath(),!U&&Z&&n.fill(),!p){const at=X!=null?X:U?Z:void 0,ft=it!==void 0?it:ct;at&&(n.strokeStyle=at,n.lineWidth=ft,n.stroke())}n.fillStyle=o,n.textAlign="left",n.textBaseline="middle";const tt=rt+_+us;if(n.fillText(D,tt,mt),r!=null&&r.chartHoverTargets){const at=rt+_,ft=mt,Et=_+us+H,_t=mt-b/2,ut=b;r.chartHoverTargets.push({kind:"legend",x:rt,y:_t,width:Et,height:ut,value:0,color:Z,anchorX:at,anchorY:ft,elementId:r.elementId,seriesIndex:J.seriesIndex,seriesName:R.name})}v?P=tt+H+fs:E+=b+fs}),n.restore()}function Vl(n,t,e,i,s,r,o,a){const h=Aa(t,i);if(!h)return;const l=Array.isArray(a==null?void 0:a.hiddenSeriesIndices)?new Set(a==null?void 0:a.hiddenSeriesIndices):a==null?void 0:a.hiddenSeriesIndices;if(l!=null&&l.has(0))return;const c=n.measureText(h.minLabel).width,f=n.measureText(h.maxLabel).width,u=h.seriesName?n.measureText(h.seriesName).width:0,d=!!h.seriesName,p=xs(s),m=Math.max(0,e.width-ee*2);if(m<=0)return;if(p){const L=Math.max(0,Math.min(m,cs));if(L<=0)return;const q=Math.max(L,u);let J=Math.max(0,(m-q)/2);s===Dt.LEGEND_POSITION_LEFT?J=0:s===Dt.LEGEND_POSITION_RIGHT&&(J=Math.max(0,m-q));const V=Math.max(0,(q-L)/2),R=e.x+ee+J+V,D=Math.max(0,e.height-ee*2),H=(d?r+ns:0)+yi+bn+r,Z=Math.max(0,(D-H)/2),X=e.y+ee+Z,it=X+(d?r+ns:0),ct=n.createLinearGradient(R,it,R+L,it);ct.addColorStop(0,h.rampStart),ct.addColorStop(1,h.rampEnd),n.fillStyle=ct,n.fillRect(R,it,L,yi),n.strokeStyle="rgba(0, 0, 0, 0.12)",n.lineWidth=1,n.strokeRect(R,it,L,yi);const nt=it+yi+bn;if(n.fillStyle=o,n.textBaseline="top",n.textAlign="left",n.fillText(h.minLabel,R,nt),n.textAlign="right",n.fillText(h.maxLabel,R+L,nt),h.seriesName){n.textAlign="center",n.textBaseline="top";const rt=e.x+ee+J+q/2;n.fillText(h.seriesName,rt,X)}return}const g=Math.max(c,f),y=g>0?bn:0,b=Math.max(0,Math.min(yi,m-y-g));if(b<=0)return;const w=Math.max(b+y+g,u),x=Math.max(0,(m-w)/2),M=e.x+ee+x,v=M+b+y,A=Math.max(0,e.height-ee*2),N=d?r+ns:0,z=Math.max(0,A-N),P=Math.min(cs,z);if(P<=0)return;const E=e.y+ee+N,B=E+P,I=n.createLinearGradient(M,B,M,E);if(I.addColorStop(0,h.rampStart),I.addColorStop(1,h.rampEnd),n.fillStyle=I,n.fillRect(M,E,b,P),n.strokeStyle="rgba(0, 0, 0, 0.12)",n.lineWidth=1,n.strokeRect(M,E,b,P),n.fillStyle=o,n.textAlign="left",n.textBaseline="middle",g>0&&(n.fillText(h.maxLabel,v,E),n.fillText(h.minLabel,v,B)),h.seriesName){n.textAlign="center",n.textBaseline="top";const L=e.x+ee+x+w/2;n.fillText(h.seriesName,L,e.y+ee)}}const io=12;function Xl(n,t,e,i,s={}){var p,m,g,y;let r=e;if(!t.hasLegend)return{plotDims:r};const o=(m=(p=t.legend)==null?void 0:p.position)!=null?m:Dt.LEGEND_POSITION_RIGHT,a=o===Dt.LEGEND_POSITION_TOP_RIGHT?Dt.LEGEND_POSITION_RIGHT:o,{width:h,height:l}=Ea(n,t,i,{position:a}),c=s.outerDims&&s.outerDims.width>0?Math.max(0,s.outerDims.width*((g=s.maxSideFrac)!=null?g:.35)):Number.POSITIVE_INFINITY,f=Math.max(0,(y=s.sidePaddingPx)!=null?y:8),u=8;let d;switch(a){case Dt.LEGEND_POSITION_TOP:{const b=Math.min(Math.max(0,r.height),l+u);d={x:r.x,y:r.y,width:r.width,height:b},r={x:r.x,y:r.y+b,width:r.width,height:Math.max(0,r.height-b)};break}case Dt.LEGEND_POSITION_BOTTOM:{const b=Math.min(Math.max(0,r.height),l),w=s.outerDims?s.outerDims.y+s.outerDims.height-io:r.y+r.height-io,x=Math.max(0,w-r.y),M=Math.min(b,x),v=Math.max(r.y,w-M);d={x:r.x,y:v,width:r.width,height:M},r={x:r.x,y:r.y,width:r.width,height:Math.max(0,v-r.y)};break}case Dt.LEGEND_POSITION_LEFT:{const b=h+u;let w=b+f;w<b&&(w=b),c<w&&(w=Math.max(b,c));const x=Math.min(Math.max(0,r.width),w);d={x:r.x,y:r.y,width:x,height:r.height},r={x:r.x+x,y:r.y,width:Math.max(0,r.width-x),height:r.height};break}case Dt.LEGEND_POSITION_RIGHT:default:{const b=h+u;let w=b+f;w<b&&(w=b),c<w&&(w=Math.max(b,c));const x=Math.min(Math.max(0,r.width),w);d={x:r.x+Math.max(0,r.width-x),y:r.y,width:x,height:r.height},r={x:r.x,y:r.y,width:Math.max(0,r.width-x),height:r.height};break}}return{plotDims:r,legendRect:d,legendPosition:a}}function ql(n,t,e,i,s,r){var M,v,A,N,z,P;const o=t.series[0];if(!o||r!=null&&r.has(0))return;const a=t.series.indexOf(o),h=o.values;if(as(h)===0)return;const c=e.x+e.width/2,f=e.y+e.height/2,u=Math.min(e.width,e.height)/2,d=t.type===yt.CHART_TYPE_DOUGHNUT,p=d?Math.max(0,Math.min(100,(v=(M=t.doughnutOptions)==null?void 0:M.holeSize)!=null?v:55)):0,m=d?u*(p/100):0,g=na().innerRadius(m).outerRadius(u).context(n),b=((N=(A=t.pieOptions)==null?void 0:A.firstSliceAngle)!=null?N:0)/360*Math.PI*2,w=sa().sort(null).startAngle(b).endAngle(b+Math.PI*2),x=(z=o.categories)!=null&&z.length?o.categories:(P=t.categories)!=null?P:[];n.save(),n.translate(c,f),n.lineJoin="bevel",w(h).forEach((E,B)=>{var H,Z,X,it;const I=(H=E.index)!=null?H:B,L=fe(o,I,a,i,I);_e(o,I)||(L&&(n.fillStyle=L),n.beginPath(),g(E),n.fill());const{color:J,widthPx:V}=we(o,I,i),R=J!=null?J:"#fff",D=V!==void 0?V:1;if(D>0&&(n.beginPath(),g(E),n.strokeStyle=R,n.lineWidth=D,n.stroke()),s){const ct=m,nt=u,rt=(E.startAngle+E.endAngle)/2,mt=c+Math.cos(rt)*nt,Y=f+Math.sin(rt)*nt,_=(it=(X=x[I])!=null?X:(Z=t.categories)==null?void 0:Z[I])!=null?it:o.name;s.push({kind:"pie",cx:c,cy:f,rInner:ct,rOuter:nt,startAngle:E.startAngle,endAngle:E.endAngle,value:E.value,seriesName:o.name,category:_,color:L,anchorX:mt,anchorY:Y})}}),n.restore()}function Zl(n,t=la){return{x:n.x+t.left,y:n.y+t.top,width:n.width-t.left-t.right,height:n.height-t.top-t.bottom}}function jl(n,t){var i;const e=n==null?void 0:n.id;return e&&(i=t.charts.find(s=>s.id===e))!=null?i:null}function Jl(n,t){var p,m,g,y,b;const e=n.categories.length>0?n.categories:(m=(p=n.series[0])==null?void 0:p.categories)!=null?m:[],i=ua(n),s=Math.min(0,i.min),r=i.max,o=(g=n.yAxis)==null?void 0:g.min,a=(y=n.yAxis)==null?void 0:y.max,h=o!==void 0?o:s,l=a!==void 0?a:r,c=si().domain([h,l]).range([t.x,t.x+t.width]);(o===void 0||a===void 0)&&c.nice();const f=(b=n.barOptions)==null?void 0:b.gapWidth,u=typeof f=="number"&&isFinite(f)?1-1/(1+f/100):ha,d=qi().domain([...e].reverse()).range([t.y,t.y+t.height]).paddingInner(u).paddingOuter(.5);return{x:c,y:d}}function Kl(n,t,e,i,s=!0,r){var y,b,w,x,M;const{x:o,y:a}=e,h=t.categories.length>0?t.categories:(b=(y=t.series[0])==null?void 0:y.categories)!=null?b:[];n.save(),n.lineWidth=1;const l=Qt(t.yAxis,r);n.font="".concat(l.fontSize,"px ").concat(St),n.fillStyle=l.textColor,n.strokeStyle=l.lineColor,n.textAlign="right",n.textBaseline="middle";const c=Math.min(140,Math.max(0,i.x-10));h.forEach(v=>{var z;const A=((z=a(v))!=null?z:0)+a.bandwidth()/2;n.beginPath(),n.moveTo(i.x-4,A),n.lineTo(i.x,A),n.stroke();const N=da(n,v,c);n.fillText(N,i.x-6,A)});const f=Qt(t.xAxis,r);n.font="".concat(f.fontSize,"px ").concat(St),n.fillStyle=f.textColor,n.strokeStyle=f.lineColor,n.textAlign="center",n.textBaseline="top";const u=i.y+i.height;n.beginPath(),n.moveTo(i.x,u),n.lineTo(i.x+i.width,u),n.stroke();const d=ca.format(".2~f"),p=t.xAxis,m=s&&!!((x=(w=p==null?void 0:p.majorGridlines)==null?void 0:w.fill)!=null&&x.color),g=(M=f.gridLineColor)!=null?M:f.lineColor;o.ticks(5).forEach(v=>{const A=o(v);n.beginPath(),n.moveTo(A,u),n.lineTo(A,u+4),n.stroke(),m&&(n.save(),n.strokeStyle=g,n.beginPath(),n.moveTo(A,i.y),n.lineTo(A,u),n.stroke(),n.restore()),n.fillText(d(v),A,u+6)}),n.restore()}function Ql(n){var e;if(n.categories.length>0)return n.categories;const t=(e=n.series[0])==null?void 0:e.categories;return t&&t.length>0?t:[]}function Sr(n,t){var c;const e=Ql(n),i=n.series.map((f,u)=>u).filter(f=>!(t!=null&&t.has(f))),s=(c=n.barOptions)==null?void 0:c.grouping,r=s===We.BAR_GROUPING_STACKED?"stacked":s===We.BAR_GROUPING_PERCENT_STACKED?"percent":"clustered",o=e.map(()=>[]);if(r==="clustered"||i.length===0)return e.forEach((f,u)=>{i.forEach(d=>{var g,y;const p=n.series[d];if(!p)return;const m=(g=p.values[u])!=null?g:0;(y=o[u])==null||y.push({seriesIndex:d,valueRaw:m,start:0,end:m})})}),{categories:e,visibleSeries:i,mode:r,segmentsByCategory:o};const a=e.map((f,u)=>{const d={};return i.forEach(p=>{var g;const m=n.series[p];d[String(p)]=(g=m==null?void 0:m.values[u])!=null?g:0}),d}),h=pr().keys(i.map(f=>String(f))).value((f,u)=>{var d;return(d=f[u])!=null?d:0}).order(gr);return r==="percent"?h.offset(yr):h.offset(xr),h(a).forEach(f=>{const u=f.key,d=Number.parseInt(u,10);e.forEach((p,m)=>{var x,M,v;const g=f[m];if(!g)return;const y=Number.isFinite(g[0])?g[0]:0,b=Number.isFinite(g[1])?g[1]:0,w=(M=(x=n.series[d])==null?void 0:x.values[m])!=null?M:0;(v=o[m])==null||v.push({seriesIndex:d,valueRaw:w,start:y,end:b})})}),{categories:e,visibleSeries:i,mode:r,segmentsByCategory:o}}function tc(n,t,e,i,s,r){const{x:o,y:a}=e,h=Sr(t,r),l=h.categories,c=h.mode==="clustered",f=c&&h.visibleSeries.length>0?qi().domain(ea(h.visibleSeries.length)).range([0,a.bandwidth()]).padding(.05):void 0;l.forEach((u,d)=>{const p=a(u);if(p===void 0)return;const m=h.segmentsByCategory[d];if(!m)return;const g=c||m.length===0?void 0:m.reduce((b,w,x)=>{if(w.end<w.start)return b;if(b===void 0)return x;const M=m[b];return M&&M.end<w.end?x:b},void 0),y=c||m.length===0?void 0:m.reduce((b,w,x)=>{if(w.end>=w.start)return b;if(b===void 0)return x;const M=m[b];return M&&M.end>w.end?x:b},void 0);m.forEach((b,w)=>{var it,ct,nt,rt,mt,Y;const x=t.series[b.seriesIndex];if(!x)return;const M=b.valueRaw,v=f&&(it=f(w))!=null?it:0,A=c?p+v:p,N=c?(ct=f==null?void 0:f.bandwidth())!=null?ct:0:a.bandwidth(),z=o(b.start),P=o(b.end),E=Math.min(z,P),B=Math.max(z,P),I=Math.abs(B-E),L=b.end>=b.start,q=_e(x,d),J=fe(x,d,b.seriesIndex,i);!q&&J&&(n.fillStyle=J);const R=Math.max(0,Math.min(wr,N/2,I)),H=c||(b.end>=b.start?w===g:w===y)?R:0;n.beginPath(),L?(n.moveTo(E,A),n.lineTo(B-H,A),n.arcTo(B,A,B,A+H,H),n.lineTo(B,A+N-H),n.arcTo(B,A+N,B-H,A+N,H),n.lineTo(E,A+N),n.closePath()):(n.moveTo(B,A),n.lineTo(E+H,A),n.arcTo(E,A,E,A+H,H),n.lineTo(E,A+N-H),n.arcTo(E,A+N,E+H,A+N,H),n.lineTo(B,A+N),n.closePath()),!q&&J&&n.fill();const{color:Z,widthPx:X}=we(x,d,i);if(Z&&(n.strokeStyle=Z,n.lineWidth=X!=null?X:1,n.stroke()),s){const _=L?B:E;s.push({kind:"bar-horizontal",x:E,y:A,width:I,height:N,seriesName:x.name,category:u,value:M,color:J,anchorX:_,anchorY:A})}if((nt=t.dataLabels)!=null&&nt.showValue&&N>0){const _=t.dataLabels.position,S=ca.format(".2~f")(M),T=(rt=t.dataLabels.textStyle)!=null&&rt.fontSize?Ge(t.dataLabels.textStyle.fontSize):ji,U=(Y=(mt=t.dataLabels.textStyle)==null?void 0:mt.fill)!=null&&Y.color?zt(t.dataLabels.textStyle.fill.color,i):Zt;n.fillStyle=U,n.font="".concat(T,"px ").concat(St),n.textBaseline="middle";let C=L?B+4:E-4;_===2&&(C=L?B-4:E+4),_===3&&(C=E+I/2),_===3?n.textAlign="center":_===2?n.textAlign=L?"right":"left":n.textAlign=L?"left":"right";const tt=A+N/2;n.fillText(S,C,tt)}})})}function va(n,t,e,i){var f,u,d,p,m,g,y,b,w,x,M,v;const s=n.dataLabels,r=t.dataLabels,o=(f=t.dataLabelOverrides)==null?void 0:f.find(A=>A.idx===e),a=(p=(d=(u=o==null?void 0:o.showValue)!=null?u:r==null?void 0:r.showValue)!=null?d:s==null?void 0:s.showValue)!=null?p:!1,h=(y=(g=(m=o==null?void 0:o.position)!=null?m:r==null?void 0:r.position)!=null?g:s==null?void 0:s.position)!=null?y:Ko.DATA_LABEL_POSITION_OUT_END;let l=(b=o==null?void 0:o.text)!=null?b:"";if(!l){const A=(w=t.valuesFormatCode)!=null?w:void 0;l=_n(i,A)}const c=(v=(M=(x=o==null?void 0:o.textStyle)!=null?x:r==null?void 0:r.textStyle)!=null?M:s==null?void 0:s.textStyle)!=null?v:void 0;return{show:a,position:h,text:l,textStyle:c}}function ec(n,t,e,i,s,r){if(!Sn(e.x))return;const o=e.x,a=e.y,h=Sr(t,r),l=h.categories,c=h.mode==="clustered",f=c&&h.visibleSeries.length>0?qi().domain(ea(h.visibleSeries.length)).range([0,o.bandwidth()]).padding(.05):void 0;l.forEach((u,d)=>{const p=o(u);if(p===void 0)return;const m=h.segmentsByCategory[d],g=c||(m==null?void 0:m.length)===0||m==null?void 0:m.reduce((b,w,x)=>{if(w.end<w.start)return b;if(b===void 0)return x;const M=m[b];return M&&M.end<w.end?x:b},void 0),y=c||(m==null?void 0:m.length)===0||m==null?void 0:m.reduce((b,w,x)=>{if(w.end>=w.start)return b;if(b===void 0)return x;const M=m[b];return M&&M.end>w.end?x:b},void 0);m==null||m.forEach((b,w)=>{var it,ct,nt,rt,mt,Y;const x=t.series[b.seriesIndex];if(!x)return;const M=b.valueRaw,v=_e(x,d),A=fe(x,d,b.seriesIndex,i),N=f!==void 0&&(it=f(w))!=null?it:0,z=c?p+N:p,P=c?f!==void 0?f.bandwidth():0:o.bandwidth(),E=a(b.start),B=a(b.end),I=Math.min(E,B),L=Math.abs(B-E),q=I+L,V=Math.max(0,Math.min(wr,P/2,L)),D=c||(b.end>=b.start?w===g:w===y)?V:0;n.beginPath(),M>=0?(n.moveTo(z,q),n.lineTo(z,I+D),n.arcTo(z,I,z+D,I,D),n.lineTo(z+P-D,I),n.arcTo(z+P,I,z+P,I+D,D),n.lineTo(z+P,q),n.closePath()):(n.moveTo(z,I),n.lineTo(z,q-D),n.arcTo(z,q,z+D,q,D),n.lineTo(z+P-D,q),n.arcTo(z+P,q,z+P,q-D,D),n.lineTo(z+P,I),n.closePath()),!v&&A&&(n.fillStyle=A,n.fill());const{color:H,widthPx:Z}=we(x,d,i);if(H&&(n.strokeStyle=H,n.lineWidth=Z!=null?Z:1,n.stroke()),s){const _=Math.min(I,q);s.push({kind:"bar-vertical",x:z,y:I,width:P,height:L,seriesName:x.name,category:u,value:M,color:A,anchorX:z+P,anchorY:_})}const X=va(t,x,d,M);if(X.show&&P>0){const _=(ct=X.textStyle)!=null&&ct.fontSize?Ge(X.textStyle.fontSize):ji,S=(rt=(nt=X.textStyle)==null?void 0:nt.fill)!=null&&rt.color?zt(X.textStyle.fill.color,i):Zt;n.fillStyle=S;const T=(Y=(mt=X.textStyle)==null?void 0:mt.bold)!=null?Y:!0;n.font="".concat(T?"bold ":"").concat(_,"px ").concat(St),n.textBaseline="middle",n.textAlign="center";const U=z+P/2;let C=I-12;X.position===2&&(C=I+(c?12:20)),X.position===3&&(C=I+L/2),n.fillText(X.text,U,C)}})})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ia="179",ur=0,ic=1,no=1,so=100,ro=204,oo=205,ao=3,nc=0,Ca=300,ho=1e3,kn=1001,lo=1002,sc=1006,rc=1008,oc=1009,ac=1015,hc=1023,lc=0,ka="",Ie="srgb",co="srgb-linear",uo="linear",Cs="srgb",Ii=7680,fo=519,fr=35044,Nn=2e3,mo=2001;class bs{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const s=i[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,t);t.target=null}}}const Xt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let po=1234567;const Na=Math.PI/180,za=180/Math.PI;function De(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Xt[n&255]+Xt[n>>8&255]+Xt[n>>16&255]+Xt[n>>24&255]+"-"+Xt[t&255]+Xt[t>>8&255]+"-"+Xt[t>>16&15|64]+Xt[t>>24&255]+"-"+Xt[e&63|128]+Xt[e>>8&255]+"-"+Xt[e>>16&255]+Xt[e>>24&255]+Xt[i&255]+Xt[i>>8&255]+Xt[i>>16&255]+Xt[i>>24&255]).toLowerCase()}function wt(n,t,e){return Math.max(t,Math.min(e,n))}function Ar(n,t){return(n%t+t)%t}function cc(n,t,e,i,s){return i+(n-t)*(s-i)/(e-t)}function uc(n,t,e){return n!==t?(e-n)/(t-n):0}function Mn(n,t,e){return(1-e)*n+e*t}function fc(n,t,e,i){return Mn(n,t,1-Math.exp(-e*i))}function dc(n,t=1){return t-Math.abs(Ar(n,t*2)-t)}function mc(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function pc(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function gc(n,t){return n+Math.floor(Math.random()*(t-n+1))}function yc(n,t){return n+Math.random()*(t-n)}function xc(n){return n*(.5-Math.random())}function bc(n){n!==void 0&&(po=n);let t=po+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Mc(n){return n*Na}function wc(n){return n*za}function _c(n){return(n&n-1)===0&&n!==0}function Tc(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Sc(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ac(n,t,e,i,s){const r=Math.cos,o=Math.sin,a=r(e/2),h=o(e/2),l=r((t+i)/2),c=o((t+i)/2),f=r((t-i)/2),u=o((t-i)/2),d=r((i-t)/2),p=o((i-t)/2);switch(s){case"XYX":n.set(a*c,h*f,h*u,a*l);break;case"YZY":n.set(h*u,a*c,h*f,a*l);break;case"ZXZ":n.set(h*f,h*u,a*c,a*l);break;case"XZX":n.set(a*c,h*p,h*d,a*l);break;case"YXY":n.set(h*d,a*c,h*p,a*l);break;case"ZYZ":n.set(h*p,h*d,a*c,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ce(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function kt(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Pa={DEG2RAD:Na,RAD2DEG:za,generateUUID:De,clamp:wt,euclideanModulo:Ar,mapLinear:cc,inverseLerp:uc,lerp:Mn,damp:fc,pingpong:dc,smoothstep:mc,smootherstep:pc,randInt:gc,randFloat:yc,randFloatSpread:xc,seededRandom:bc,degToRad:Mc,radToDeg:wc,isPowerOfTwo:_c,ceilPowerOfTwo:Tc,floorPowerOfTwo:Sc,setQuaternionFromProperEuler:Ac,normalize:kt,denormalize:Ce};class Lt{constructor(t=0,e=0){Lt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=wt(this.x,t.x,e.x),this.y=wt(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=wt(this.x,t,e),this.y=wt(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(wt(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(wt(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*s+t.x,this.y=r*s+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class An{constructor(t=0,e=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=s}static slerpFlat(t,e,i,s,r,o,a){let h=i[s+0],l=i[s+1],c=i[s+2],f=i[s+3];const u=r[o+0],d=r[o+1],p=r[o+2],m=r[o+3];if(a===0){t[e+0]=h,t[e+1]=l,t[e+2]=c,t[e+3]=f;return}if(a===1){t[e+0]=u,t[e+1]=d,t[e+2]=p,t[e+3]=m;return}if(f!==m||h!==u||l!==d||c!==p){let g=1-a;const y=h*u+l*d+c*p+f*m,b=y>=0?1:-1,w=1-y*y;if(w>Number.EPSILON){const M=Math.sqrt(w),v=Math.atan2(M,y*b);g=Math.sin(g*v)/M,a=Math.sin(a*v)/M}const x=a*b;if(h=h*g+u*x,l=l*g+d*x,c=c*g+p*x,f=f*g+m*x,g===1-a){const M=1/Math.sqrt(h*h+l*l+c*c+f*f);h*=M,l*=M,c*=M,f*=M}}t[e]=h,t[e+1]=l,t[e+2]=c,t[e+3]=f}static multiplyQuaternionsFlat(t,e,i,s,r,o){const a=i[s],h=i[s+1],l=i[s+2],c=i[s+3],f=r[o],u=r[o+1],d=r[o+2],p=r[o+3];return t[e]=a*p+c*f+h*d-l*u,t[e+1]=h*p+c*u+l*f-a*d,t[e+2]=l*p+c*d+a*u-h*f,t[e+3]=c*p-a*f-h*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,s=t._y,r=t._z,o=t._order,a=Math.cos,h=Math.sin,l=a(i/2),c=a(s/2),f=a(r/2),u=h(i/2),d=h(s/2),p=h(r/2);switch(o){case"XYZ":this._x=u*c*f+l*d*p,this._y=l*d*f-u*c*p,this._z=l*c*p+u*d*f,this._w=l*c*f-u*d*p;break;case"YXZ":this._x=u*c*f+l*d*p,this._y=l*d*f-u*c*p,this._z=l*c*p-u*d*f,this._w=l*c*f+u*d*p;break;case"ZXY":this._x=u*c*f-l*d*p,this._y=l*d*f+u*c*p,this._z=l*c*p+u*d*f,this._w=l*c*f-u*d*p;break;case"ZYX":this._x=u*c*f-l*d*p,this._y=l*d*f+u*c*p,this._z=l*c*p-u*d*f,this._w=l*c*f+u*d*p;break;case"YZX":this._x=u*c*f+l*d*p,this._y=l*d*f+u*c*p,this._z=l*c*p-u*d*f,this._w=l*c*f-u*d*p;break;case"XZY":this._x=u*c*f-l*d*p,this._y=l*d*f-u*c*p,this._z=l*c*p+u*d*f,this._w=l*c*f+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],r=e[8],o=e[1],a=e[5],h=e[9],l=e[2],c=e[6],f=e[10],u=i+a+f;if(u>0){const d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(c-h)*d,this._y=(r-l)*d,this._z=(o-s)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(c-h)/d,this._x=.25*d,this._y=(s+o)/d,this._z=(r+l)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(r-l)/d,this._x=(s+o)/d,this._y=.25*d,this._z=(h+c)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-s)/d,this._x=(r+l)/d,this._y=(h+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(wt(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,r=t._z,o=t._w,a=e._x,h=e._y,l=e._z,c=e._w;return this._x=i*c+o*a+s*l-r*h,this._y=s*c+o*h+r*a-i*l,this._z=r*c+o*l+i*h-s*a,this._w=o*c-i*a-s*h-r*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*t._w+i*t._x+s*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const h=1-a*a;if(h<=Number.EPSILON){const d=1-e;return this._w=d*o+e*this._w,this._x=d*i+e*this._x,this._y=d*s+e*this._y,this._z=d*r+e*this._z,this.normalize(),this}const l=Math.sqrt(h),c=Math.atan2(l,a),f=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=o*f+this._w*u,this._x=i*f+this._x*u,this._y=s*f+this._y*u,this._z=r*f+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(t=0,e=0,i=0){W.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(go.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(go.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,r=t.x,o=t.y,a=t.z,h=t.w,l=2*(o*s-a*i),c=2*(a*e-r*s),f=2*(r*i-o*e);return this.x=e+h*l+o*f-a*c,this.y=i+h*c+a*l-r*f,this.z=s+h*f+r*c-o*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=wt(this.x,t.x,e.x),this.y=wt(this.y,t.y,e.y),this.z=wt(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=wt(this.x,t,e),this.y=wt(this.y,t,e),this.z=wt(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(wt(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,r=t.z,o=e.x,a=e.y,h=e.z;return this.x=s*h-r*a,this.y=r*o-i*h,this.z=i*a-s*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return ks.copy(this).projectOnVector(t),this.sub(ks)}reflect(t){return this.sub(ks.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(wt(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ks=new W,go=new An;class oi{constructor(t,e,i,s,r,o,a,h,l){oi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,s,r,o,a,h,l)}set(t,e,i,s,r,o,a,h,l){const c=this.elements;return c[0]=t,c[1]=s,c[2]=a,c[3]=e,c[4]=r,c[5]=h,c[6]=i,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],a=i[3],h=i[6],l=i[1],c=i[4],f=i[7],u=i[2],d=i[5],p=i[8],m=s[0],g=s[3],y=s[6],b=s[1],w=s[4],x=s[7],M=s[2],v=s[5],A=s[8];return r[0]=o*m+a*b+h*M,r[3]=o*g+a*w+h*v,r[6]=o*y+a*x+h*A,r[1]=l*m+c*b+f*M,r[4]=l*g+c*w+f*v,r[7]=l*y+c*x+f*A,r[2]=u*m+d*b+p*M,r[5]=u*g+d*w+p*v,r[8]=u*y+d*x+p*A,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-i*r*c+i*a*h+s*r*l-s*o*h}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8],f=c*o-a*l,u=a*h-c*r,d=l*r-o*h,p=e*f+i*u+s*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=f*m,t[1]=(s*l-c*i)*m,t[2]=(a*i-s*o)*m,t[3]=u*m,t[4]=(c*e-s*h)*m,t[5]=(s*r-a*e)*m,t[6]=d*m,t[7]=(i*h-l*e)*m,t[8]=(o*e-i*r)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,r,o,a){const h=Math.cos(r),l=Math.sin(r);return this.set(i*h,i*l,-i*(h*o+l*a)+o+t,-s*l,s*h,-s*(-l*o+h*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Ns.makeScale(t,e)),this}rotate(t){return this.premultiply(Ns.makeRotation(-t)),this}translate(t,e){return this.premultiply(Ns.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Ns=new oi;function Ec(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function yo(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const xo={};function bo(n){n in xo||(xo[n]=!0,console.warn(n))}const Mo=new oi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),wo=new oi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function vc(){const n={enabled:!0,workingColorSpace:co,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===Cs&&(s.r=He(s.r),s.g=He(s.g),s.b=He(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Cs&&(s.r=Vi(s.r),s.g=Vi(s.g),s.b=Vi(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===ka?uo:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return bo("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return bo("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(s,r)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[co]:{primaries:t,whitePoint:i,transfer:uo,toXYZ:Mo,fromXYZ:wo,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Ie},outputColorSpaceConfig:{drawingBufferColorSpace:Ie}},[Ie]:{primaries:t,whitePoint:i,transfer:Cs,toXYZ:Mo,fromXYZ:wo,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Ie}}}),n}const Se=vc();function He(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Vi(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ci;class Ic{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Ci===void 0&&(Ci=yo("canvas")),Ci.width=t.width,Ci.height=t.height;const s=Ci.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),i=Ci}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=yo("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=He(r[o]/255)*255;return i.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(He(e[i]/255)*255):e[i]=He(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Cc=0;class kc{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Cc++}),this.uuid=De(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(zs(s[o].image)):r.push(zs(s[o]))}else r=zs(s);i.url=r}return e||(t.images[this.uuid]=i),i}}function zs(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Ic.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Nc=0;const Ps=new W;class ii extends bs{constructor(t=ii.DEFAULT_IMAGE,e=ii.DEFAULT_MAPPING,i=kn,s=kn,r=sc,o=rc,a=hc,h=oc,l=ii.DEFAULT_ANISOTROPY,c=ka){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Nc++}),this.uuid=De(),this.name="",this.source=new kc(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=h,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new oi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Ps).x}get height(){return this.source.getSize(Ps).y}get depth(){return this.source.getSize(Ps).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Texture.setValues(): parameter '".concat(e,"' has value of undefined."));continue}const s=this[e];if(s===void 0){console.warn("THREE.Texture.setValues(): property '".concat(e,"' does not exist."));continue}s&&i&&s.isVector2&&i.isVector2||s&&i&&s.isVector3&&i.isVector3||s&&i&&s.isMatrix3&&i.isMatrix3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ca)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ho:t.x=t.x-Math.floor(t.x);break;case kn:t.x=t.x<0?0:1;break;case lo:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ho:t.y=t.y-Math.floor(t.y);break;case kn:t.y=t.y<0?0:1;break;case lo:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ii.DEFAULT_IMAGE=null;ii.DEFAULT_MAPPING=Ca;ii.DEFAULT_ANISOTROPY=1;class $e{constructor(t=0,e=0,i=0,s=1){$e.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*s+o[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,r;const h=t.elements,l=h[0],c=h[4],f=h[8],u=h[1],d=h[5],p=h[9],m=h[2],g=h[6],y=h[10];if(Math.abs(c-u)<.01&&Math.abs(f-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+u)<.1&&Math.abs(f+m)<.1&&Math.abs(p+g)<.1&&Math.abs(l+d+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const w=(l+1)/2,x=(d+1)/2,M=(y+1)/2,v=(c+u)/4,A=(f+m)/4,N=(p+g)/4;return w>x&&w>M?w<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(w),s=v/i,r=A/i):x>M?x<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(x),i=v/s,r=N/s):M<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(M),i=A/r,s=N/r),this.set(i,s,r,e),this}let b=Math.sqrt((g-p)*(g-p)+(f-m)*(f-m)+(u-c)*(u-c));return Math.abs(b)<.001&&(b=1),this.x=(g-p)/b,this.y=(f-m)/b,this.z=(u-c)/b,this.w=Math.acos((l+d+y-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=wt(this.x,t.x,e.x),this.y=wt(this.y,t.y,e.y),this.z=wt(this.z,t.z,e.z),this.w=wt(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=wt(this.x,t,e),this.y=wt(this.y,t,e),this.z=wt(this.z,t,e),this.w=wt(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(wt(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ti{constructor(t=new W(1/0,1/0,1/0),e=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Ae.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Ae.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Ae.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const r=i.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)t.isMesh===!0?t.getVertexPosition(o,Ae):Ae.fromBufferAttribute(r,o),Ae.applyMatrix4(t.matrixWorld),this.expandByPoint(Ae);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),zn.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),zn.copy(i.boundingBox)),zn.applyMatrix4(t.matrixWorld),this.union(zn)}const s=t.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ae),Ae.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hn),Pn.subVectors(this.max,hn),ki.subVectors(t.a,hn),Ni.subVectors(t.b,hn),zi.subVectors(t.c,hn),Ze.subVectors(Ni,ki),je.subVectors(zi,Ni),di.subVectors(ki,zi);let e=[0,-Ze.z,Ze.y,0,-je.z,je.y,0,-di.z,di.y,Ze.z,0,-Ze.x,je.z,0,-je.x,di.z,0,-di.x,-Ze.y,Ze.x,0,-je.y,je.x,0,-di.y,di.x,0];return!Rs(e,ki,Ni,zi,Pn)||(e=[1,0,0,0,1,0,0,0,1],!Rs(e,ki,Ni,zi,Pn))?!1:(Rn.crossVectors(Ze,je),e=[Rn.x,Rn.y,Rn.z],Rs(e,ki,Ni,zi,Pn))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ae).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ae).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Re[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Re[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Re[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Re[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Re[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Re[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Re[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Re[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Re),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Re=[new W,new W,new W,new W,new W,new W,new W,new W],Ae=new W,zn=new Ti,ki=new W,Ni=new W,zi=new W,Ze=new W,je=new W,di=new W,hn=new W,Pn=new W,Rn=new W,mi=new W;function Rs(n,t,e,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){mi.fromArray(n,r);const a=s.x*Math.abs(mi.x)+s.y*Math.abs(mi.y)+s.z*Math.abs(mi.z),h=t.dot(mi),l=e.dot(mi),c=i.dot(mi);if(Math.max(-Math.max(h,l,c),Math.min(h,l,c))>a)return!1}return!0}const zc=new Ti,ln=new W,Fs=new W;class Er{constructor(t=new W,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):zc.setFromPoints(t).getCenter(i);let s=0;for(let r=0,o=t.length;r<o;r++)s=Math.max(s,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ln.subVectors(t,this.center);const e=ln.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.addScaledVector(ln,s/i),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Fs.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ln.copy(t.center).add(Fs)),this.expandByPoint(ln.copy(t.center).sub(Fs))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const Fe=new W,Ls=new W,Fn=new W,Je=new W,Bs=new W,Ln=new W,Os=new W;class Ra{constructor(t=new W,e=new W(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Fe)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Fe.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Fe.copy(this.origin).addScaledVector(this.direction,e),Fe.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){Ls.copy(t).add(e).multiplyScalar(.5),Fn.copy(e).sub(t).normalize(),Je.copy(this.origin).sub(Ls);const r=t.distanceTo(e)*.5,o=-this.direction.dot(Fn),a=Je.dot(this.direction),h=-Je.dot(Fn),l=Je.lengthSq(),c=Math.abs(1-o*o);let f,u,d,p;if(c>0)if(f=o*h-a,u=o*a-h,p=r*c,f>=0)if(u>=-p)if(u<=p){const m=1/c;f*=m,u*=m,d=f*(f+o*u+2*a)+u*(o*f+u+2*h)+l}else u=r,f=Math.max(0,-(o*u+a)),d=-f*f+u*(u+2*h)+l;else u=-r,f=Math.max(0,-(o*u+a)),d=-f*f+u*(u+2*h)+l;else u<=-p?(f=Math.max(0,-(-o*r+a)),u=f>0?-r:Math.min(Math.max(-r,-h),r),d=-f*f+u*(u+2*h)+l):u<=p?(f=0,u=Math.min(Math.max(-r,-h),r),d=u*(u+2*h)+l):(f=Math.max(0,-(o*r+a)),u=f>0?r:Math.min(Math.max(-r,-h),r),d=-f*f+u*(u+2*h)+l);else u=o>0?-r:r,f=Math.max(0,-(o*u+a)),d=-f*f+u*(u+2*h)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,f),s&&s.copy(Ls).addScaledVector(Fn,u),d}intersectSphere(t,e){Fe.subVectors(t.center,this.origin);const i=Fe.dot(this.direction),s=Fe.dot(Fe)-i*i,r=t.radius*t.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,h=i+o;return h<0?null:a<0?this.at(h,e):this.at(a,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,r,o,a,h;const l=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,s=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,s=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,o=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,o=(t.min.y-u.y)*c),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),f>=0?(a=(t.min.z-u.z)*f,h=(t.max.z-u.z)*f):(a=(t.max.z-u.z)*f,h=(t.min.z-u.z)*f),i>h||a>s)||((a>i||i!==i)&&(i=a),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,e)}intersectsBox(t){return this.intersectBox(t,Fe)!==null}intersectTriangle(t,e,i,s,r){Bs.subVectors(e,t),Ln.subVectors(i,t),Os.crossVectors(Bs,Ln);let o=this.direction.dot(Os),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Je.subVectors(this.origin,t);const h=a*this.direction.dot(Ln.crossVectors(Je,Ln));if(h<0)return null;const l=a*this.direction.dot(Bs.cross(Je));if(l<0||h+l>o)return null;const c=-a*Je.dot(Os);return c<0?null:this.at(c/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ue{constructor(t,e,i,s,r,o,a,h,l,c,f,u,d,p,m,g){ue.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,s,r,o,a,h,l,c,f,u,d,p,m,g)}set(t,e,i,s,r,o,a,h,l,c,f,u,d,p,m,g){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=s,y[1]=r,y[5]=o,y[9]=a,y[13]=h,y[2]=l,y[6]=c,y[10]=f,y[14]=u,y[3]=d,y[7]=p,y[11]=m,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ue().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/Pi.setFromMatrixColumn(t,0).length(),r=1/Pi.setFromMatrixColumn(t,1).length(),o=1/Pi.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,s=t.y,r=t.z,o=Math.cos(i),a=Math.sin(i),h=Math.cos(s),l=Math.sin(s),c=Math.cos(r),f=Math.sin(r);if(t.order==="XYZ"){const u=o*c,d=o*f,p=a*c,m=a*f;e[0]=h*c,e[4]=-h*f,e[8]=l,e[1]=d+p*l,e[5]=u-m*l,e[9]=-a*h,e[2]=m-u*l,e[6]=p+d*l,e[10]=o*h}else if(t.order==="YXZ"){const u=h*c,d=h*f,p=l*c,m=l*f;e[0]=u+m*a,e[4]=p*a-d,e[8]=o*l,e[1]=o*f,e[5]=o*c,e[9]=-a,e[2]=d*a-p,e[6]=m+u*a,e[10]=o*h}else if(t.order==="ZXY"){const u=h*c,d=h*f,p=l*c,m=l*f;e[0]=u-m*a,e[4]=-o*f,e[8]=p+d*a,e[1]=d+p*a,e[5]=o*c,e[9]=m-u*a,e[2]=-o*l,e[6]=a,e[10]=o*h}else if(t.order==="ZYX"){const u=o*c,d=o*f,p=a*c,m=a*f;e[0]=h*c,e[4]=p*l-d,e[8]=u*l+m,e[1]=h*f,e[5]=m*l+u,e[9]=d*l-p,e[2]=-l,e[6]=a*h,e[10]=o*h}else if(t.order==="YZX"){const u=o*h,d=o*l,p=a*h,m=a*l;e[0]=h*c,e[4]=m-u*f,e[8]=p*f+d,e[1]=f,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=d*f+p,e[10]=u-m*f}else if(t.order==="XZY"){const u=o*h,d=o*l,p=a*h,m=a*l;e[0]=h*c,e[4]=-f,e[8]=l*c,e[1]=u*f+m,e[5]=o*c,e[9]=d*f-p,e[2]=p*f-d,e[6]=a*c,e[10]=m*f+u}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Pc,t,Rc)}lookAt(t,e,i){const s=this.elements;return le.subVectors(t,e),le.lengthSq()===0&&(le.z=1),le.normalize(),Ke.crossVectors(i,le),Ke.lengthSq()===0&&(Math.abs(i.z)===1?le.x+=1e-4:le.z+=1e-4,le.normalize(),Ke.crossVectors(i,le)),Ke.normalize(),Bn.crossVectors(le,Ke),s[0]=Ke.x,s[4]=Bn.x,s[8]=le.x,s[1]=Ke.y,s[5]=Bn.y,s[9]=le.y,s[2]=Ke.z,s[6]=Bn.z,s[10]=le.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],a=i[4],h=i[8],l=i[12],c=i[1],f=i[5],u=i[9],d=i[13],p=i[2],m=i[6],g=i[10],y=i[14],b=i[3],w=i[7],x=i[11],M=i[15],v=s[0],A=s[4],N=s[8],z=s[12],P=s[1],E=s[5],B=s[9],I=s[13],L=s[2],q=s[6],J=s[10],V=s[14],R=s[3],D=s[7],H=s[11],Z=s[15];return r[0]=o*v+a*P+h*L+l*R,r[4]=o*A+a*E+h*q+l*D,r[8]=o*N+a*B+h*J+l*H,r[12]=o*z+a*I+h*V+l*Z,r[1]=c*v+f*P+u*L+d*R,r[5]=c*A+f*E+u*q+d*D,r[9]=c*N+f*B+u*J+d*H,r[13]=c*z+f*I+u*V+d*Z,r[2]=p*v+m*P+g*L+y*R,r[6]=p*A+m*E+g*q+y*D,r[10]=p*N+m*B+g*J+y*H,r[14]=p*z+m*I+g*V+y*Z,r[3]=b*v+w*P+x*L+M*R,r[7]=b*A+w*E+x*q+M*D,r[11]=b*N+w*B+x*J+M*H,r[15]=b*z+w*I+x*V+M*Z,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],r=t[12],o=t[1],a=t[5],h=t[9],l=t[13],c=t[2],f=t[6],u=t[10],d=t[14],p=t[3],m=t[7],g=t[11],y=t[15];return p*(+r*h*f-s*l*f-r*a*u+i*l*u+s*a*d-i*h*d)+m*(+e*h*d-e*l*u+r*o*u-s*o*d+s*l*c-r*h*c)+g*(+e*l*f-e*a*d-r*o*f+i*o*d+r*a*c-i*l*c)+y*(-s*a*c-e*h*f+e*a*u+s*o*f-i*o*u+i*h*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8],f=t[9],u=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],b=f*g*l-m*u*l+m*h*d-a*g*d-f*h*y+a*u*y,w=p*u*l-c*g*l-p*h*d+o*g*d+c*h*y-o*u*y,x=c*m*l-p*f*l+p*a*d-o*m*d-c*a*y+o*f*y,M=p*f*h-c*m*h-p*a*u+o*m*u+c*a*g-o*f*g,v=e*b+i*w+s*x+r*M;if(v===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/v;return t[0]=b*A,t[1]=(m*u*r-f*g*r-m*s*d+i*g*d+f*s*y-i*u*y)*A,t[2]=(a*g*r-m*h*r+m*s*l-i*g*l-a*s*y+i*h*y)*A,t[3]=(f*h*r-a*u*r-f*s*l+i*u*l+a*s*d-i*h*d)*A,t[4]=w*A,t[5]=(c*g*r-p*u*r+p*s*d-e*g*d-c*s*y+e*u*y)*A,t[6]=(p*h*r-o*g*r-p*s*l+e*g*l+o*s*y-e*h*y)*A,t[7]=(o*u*r-c*h*r+c*s*l-e*u*l-o*s*d+e*h*d)*A,t[8]=x*A,t[9]=(p*f*r-c*m*r-p*i*d+e*m*d+c*i*y-e*f*y)*A,t[10]=(o*m*r-p*a*r+p*i*l-e*m*l-o*i*y+e*a*y)*A,t[11]=(c*a*r-o*f*r-c*i*l+e*f*l+o*i*d-e*a*d)*A,t[12]=M*A,t[13]=(c*m*s-p*f*s+p*i*u-e*m*u-c*i*g+e*f*g)*A,t[14]=(p*a*s-o*m*s-p*i*h+e*m*h+o*i*g-e*a*g)*A,t[15]=(o*f*s-c*a*s+c*i*h-e*f*h-o*i*u+e*a*u)*A,this}scale(t){const e=this.elements,i=t.x,s=t.y,r=t.z;return e[0]*=i,e[4]*=s,e[8]*=r,e[1]*=i,e[5]*=s,e[9]*=r,e[2]*=i,e[6]*=s,e[10]*=r,e[3]*=i,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),r=1-i,o=t.x,a=t.y,h=t.z,l=r*o,c=r*a;return this.set(l*o+i,l*a-s*h,l*h+s*a,0,l*a+s*h,c*a+i,c*h-s*o,0,l*h-s*a,c*h+s*o,r*h*h+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,r,o){return this.set(1,i,r,0,t,1,o,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,r=e._x,o=e._y,a=e._z,h=e._w,l=r+r,c=o+o,f=a+a,u=r*l,d=r*c,p=r*f,m=o*c,g=o*f,y=a*f,b=h*l,w=h*c,x=h*f,M=i.x,v=i.y,A=i.z;return s[0]=(1-(m+y))*M,s[1]=(d+x)*M,s[2]=(p-w)*M,s[3]=0,s[4]=(d-x)*v,s[5]=(1-(u+y))*v,s[6]=(g+b)*v,s[7]=0,s[8]=(p+w)*A,s[9]=(g-b)*A,s[10]=(1-(u+m))*A,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let r=Pi.set(s[0],s[1],s[2]).length();const o=Pi.set(s[4],s[5],s[6]).length(),a=Pi.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],Ee.copy(this);const l=1/r,c=1/o,f=1/a;return Ee.elements[0]*=l,Ee.elements[1]*=l,Ee.elements[2]*=l,Ee.elements[4]*=c,Ee.elements[5]*=c,Ee.elements[6]*=c,Ee.elements[8]*=f,Ee.elements[9]*=f,Ee.elements[10]*=f,e.setFromRotationMatrix(Ee),i.x=r,i.y=o,i.z=a,this}makePerspective(t,e,i,s,r,o,a=Nn,h=!1){const l=this.elements,c=2*r/(e-t),f=2*r/(i-s),u=(e+t)/(e-t),d=(i+s)/(i-s);let p,m;if(h)p=r/(o-r),m=o*r/(o-r);else if(a===Nn)p=-(o+r)/(o-r),m=-2*o*r/(o-r);else if(a===mo)p=-o/(o-r),m=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=f,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,i,s,r,o,a=Nn,h=!1){const l=this.elements,c=2/(e-t),f=2/(i-s),u=-(e+t)/(e-t),d=-(i+s)/(i-s);let p,m;if(h)p=1/(o-r),m=o/(o-r);else if(a===Nn)p=-2/(o-r),m=-(o+r)/(o-r);else if(a===mo)p=-1/(o-r),m=-r/(o-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=0,l[12]=u,l[1]=0,l[5]=f,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Pi=new W,Ee=new ue,Pc=new W(0,0,0),Rc=new W(1,1,1),Ke=new W,Bn=new W,le=new W,_o=new ue,To=new An;class Ki{constructor(t=0,e=0,i=0,s=Ki.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s=this._order){return this._x=t,this._y=e,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const s=t.elements,r=s[0],o=s[4],a=s[8],h=s[1],l=s[5],c=s[9],f=s[2],u=s[6],d=s[10];switch(e){case"XYZ":this._y=Math.asin(wt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-wt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-f,r),this._z=0);break;case"ZXY":this._x=Math.asin(wt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,r));break;case"ZYX":this._y=Math.asin(-wt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(h,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(wt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-wt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return _o.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_o,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return To.setFromEuler(this),this.setFromQuaternion(To,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ki.DEFAULT_ORDER="XYZ";class Fc{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Lc=0;const So=new W,Ri=new An,Le=new ue,On=new W,cn=new W,Bc=new W,Oc=new An,Ao=new W(1,0,0),Eo=new W(0,1,0),vo=new W(0,0,1),Io={type:"added"},Dc={type:"removed"},Fi={type:"childadded",child:null},Ds={type:"childremoved",child:null};class be extends bs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Lc++}),this.uuid=De(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=be.DEFAULT_UP.clone();const t=new W,e=new Ki,i=new An,s=new W(1,1,1);function r(){i.setFromEuler(e,!1)}function o(){e.setFromQuaternion(i,void 0,!1)}e._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ue},normalMatrix:{value:new oi}}),this.matrix=new ue,this.matrixWorld=new ue,this.matrixAutoUpdate=be.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=be.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ri.setFromAxisAngle(t,e),this.quaternion.multiply(Ri),this}rotateOnWorldAxis(t,e){return Ri.setFromAxisAngle(t,e),this.quaternion.premultiply(Ri),this}rotateX(t){return this.rotateOnAxis(Ao,t)}rotateY(t){return this.rotateOnAxis(Eo,t)}rotateZ(t){return this.rotateOnAxis(vo,t)}translateOnAxis(t,e){return So.copy(t).applyQuaternion(this.quaternion),this.position.add(So.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ao,t)}translateY(t){return this.translateOnAxis(Eo,t)}translateZ(t){return this.translateOnAxis(vo,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Le.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?On.copy(t):On.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),cn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Le.lookAt(cn,On,this.up):Le.lookAt(On,cn,this.up),this.quaternion.setFromRotationMatrix(Le),s&&(Le.extractRotation(s.matrixWorld),Ri.setFromRotationMatrix(Le),this.quaternion.premultiply(Ri.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Io),Fi.child=t,this.dispatchEvent(Fi),Fi.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Dc),Ds.child=t,this.dispatchEvent(Ds),Ds.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Le.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Le.multiply(t.parent.matrixWorld)),t.applyMatrix4(Le),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Io),Fi.child=t,this.dispatchEvent(Fi),Fi.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cn,t,Bc),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cn,Oc,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(a=>Te(pe({},a),{boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(a=>pe({},a)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(a,h){return a[h.uuid]===void 0&&(a[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const h=a.shapes;if(Array.isArray(h))for(let l=0,c=h.length;l<c;l++){const f=h[l];r(t.shapes,f)}else r(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let h=0,l=this.material.length;h<l;h++)a.push(r(t.materials,this.material[h]));s.material=a}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const h=this.animations[a];s.animations.push(r(t.animations,h))}}if(e){const a=o(t.geometries),h=o(t.materials),l=o(t.textures),c=o(t.images),f=o(t.shapes),u=o(t.skeletons),d=o(t.animations),p=o(t.nodes);a.length>0&&(i.geometries=a),h.length>0&&(i.materials=h),l.length>0&&(i.textures=l),c.length>0&&(i.images=c),f.length>0&&(i.shapes=f),u.length>0&&(i.skeletons=u),d.length>0&&(i.animations=d),p.length>0&&(i.nodes=p)}return i.object=s,i;function o(a){const h=[];for(const l in a){const c=a[l];delete c.metadata,h.push(c)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const s=t.children[i];this.add(s.clone())}return this}}be.DEFAULT_UP=new W(0,1,0);be.DEFAULT_MATRIX_AUTO_UPDATE=!0;be.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ve=new W,Be=new W,Hs=new W,Oe=new W,Li=new W,Bi=new W,Co=new W,Ws=new W,$s=new W,Gs=new W,Ys=new $e,Us=new $e,Vs=new $e;class xe{constructor(t=new W,e=new W,i=new W){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,s){s.subVectors(i,e),ve.subVectors(t,e),s.cross(ve);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,i,s,r){ve.subVectors(s,e),Be.subVectors(i,e),Hs.subVectors(t,e);const o=ve.dot(ve),a=ve.dot(Be),h=ve.dot(Hs),l=Be.dot(Be),c=Be.dot(Hs),f=o*l-a*a;if(f===0)return r.set(0,0,0),null;const u=1/f,d=(l*h-a*c)*u,p=(o*c-a*h)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,Oe)===null?!1:Oe.x>=0&&Oe.y>=0&&Oe.x+Oe.y<=1}static getInterpolation(t,e,i,s,r,o,a,h){return this.getBarycoord(t,e,i,s,Oe)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(r,Oe.x),h.addScaledVector(o,Oe.y),h.addScaledVector(a,Oe.z),h)}static getInterpolatedAttribute(t,e,i,s,r,o){return Ys.setScalar(0),Us.setScalar(0),Vs.setScalar(0),Ys.fromBufferAttribute(t,e),Us.fromBufferAttribute(t,i),Vs.fromBufferAttribute(t,s),o.setScalar(0),o.addScaledVector(Ys,r.x),o.addScaledVector(Us,r.y),o.addScaledVector(Vs,r.z),o}static isFrontFacing(t,e,i,s){return ve.subVectors(i,e),Be.subVectors(t,e),ve.cross(Be).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,i,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ve.subVectors(this.c,this.b),Be.subVectors(this.a,this.b),ve.cross(Be).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return xe.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return xe.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,s,r){return xe.getInterpolation(t,this.a,this.b,this.c,e,i,s,r)}containsPoint(t){return xe.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return xe.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,s=this.b,r=this.c;let o,a;Li.subVectors(s,i),Bi.subVectors(r,i),Ws.subVectors(t,i);const h=Li.dot(Ws),l=Bi.dot(Ws);if(h<=0&&l<=0)return e.copy(i);$s.subVectors(t,s);const c=Li.dot($s),f=Bi.dot($s);if(c>=0&&f<=c)return e.copy(s);const u=h*f-c*l;if(u<=0&&h>=0&&c<=0)return o=h/(h-c),e.copy(i).addScaledVector(Li,o);Gs.subVectors(t,r);const d=Li.dot(Gs),p=Bi.dot(Gs);if(p>=0&&d<=p)return e.copy(r);const m=d*l-h*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(i).addScaledVector(Bi,a);const g=c*p-d*f;if(g<=0&&f-c>=0&&d-p>=0)return Co.subVectors(r,s),a=(f-c)/(f-c+(d-p)),e.copy(s).addScaledVector(Co,a);const y=1/(g+m+u);return o=m*y,a=u*y,e.copy(i).addScaledVector(Li,o).addScaledVector(Bi,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Fa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qe={h:0,s:0,l:0},Dn={h:0,s:0,l:0};function Xs(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class Gt{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ie){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Se.colorSpaceToWorking(this,e),this}setRGB(t,e,i,s=Se.workingColorSpace){return this.r=t,this.g=e,this.b=i,Se.colorSpaceToWorking(this,s),this}setHSL(t,e,i,s=Se.workingColorSpace){if(t=Ar(t,1),e=wt(e,0,1),i=wt(i,0,1),e===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,o=2*i-r;this.r=Xs(o,r,t+1/3),this.g=Xs(o,r,t),this.b=Xs(o,r,t-1/3)}return Se.colorSpaceToWorking(this,s),this}setStyle(t,e=Ie){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ie){const i=Fa[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=He(t.r),this.g=He(t.g),this.b=He(t.b),this}copyLinearToSRGB(t){return this.r=Vi(t.r),this.g=Vi(t.g),this.b=Vi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ie){return Se.workingToColorSpace(qt.copy(this),t),Math.round(wt(qt.r*255,0,255))*65536+Math.round(wt(qt.g*255,0,255))*256+Math.round(wt(qt.b*255,0,255))}getHexString(t=Ie){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Se.workingColorSpace){Se.workingToColorSpace(qt.copy(this),e);const i=qt.r,s=qt.g,r=qt.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let h,l;const c=(a+o)/2;if(a===o)h=0,l=0;else{const f=o-a;switch(l=c<=.5?f/(o+a):f/(2-o-a),o){case i:h=(s-r)/f+(s<r?6:0);break;case s:h=(r-i)/f+2;break;case r:h=(i-s)/f+4;break}h/=6}return t.h=h,t.s=l,t.l=c,t}getRGB(t,e=Se.workingColorSpace){return Se.workingToColorSpace(qt.copy(this),e),t.r=qt.r,t.g=qt.g,t.b=qt.b,t}getStyle(t=Ie){Se.workingToColorSpace(qt.copy(this),t);const e=qt.r,i=qt.g,s=qt.b;return t!==Ie?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(i.toFixed(3)," ").concat(s.toFixed(3),")"):"rgb(".concat(Math.round(e*255),",").concat(Math.round(i*255),",").concat(Math.round(s*255),")")}offsetHSL(t,e,i){return this.getHSL(Qe),this.setHSL(Qe.h+t,Qe.s+e,Qe.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Qe),t.getHSL(Dn);const i=Mn(Qe.h,Dn.h,e),s=Mn(Qe.s,Dn.s,e),r=Mn(Qe.l,Dn.l,e);return this.setHSL(i,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*s,this.g=r[1]*e+r[4]*i+r[7]*s,this.b=r[2]*e+r[5]*i+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qt=new Gt;Gt.NAMES=Fa;let Hc=0;class Ms extends bs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Hc++}),this.uuid=De(),this.name="",this.type="Material",this.blending=no,this.side=ur,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ro,this.blendDst=oo,this.blendEquation=so,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Gt(0,0,0),this.blendAlpha=0,this.depthFunc=ao,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fo,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ii,this.stencilZFail=Ii,this.stencilZPass=Ii,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}const s=this[e];if(s===void 0){console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."));continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==no&&(i.blending=this.blending),this.side!==ur&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==ro&&(i.blendSrc=this.blendSrc),this.blendDst!==oo&&(i.blendDst=this.blendDst),this.blendEquation!==so&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ao&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==fo&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ii&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ii&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ii&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const h=r[a];delete h.metadata,o.push(h)}return o}if(e){const r=s(t.textures),o=s(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const s=e.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Wc extends Ms{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ki,this.combine=nc,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ot=new W,Hn=new Lt;let $c=0;class bi{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:$c++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=fr,this.updateRanges=[],this.gpuType=ac,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Hn.fromBufferAttribute(this,e),Hn.applyMatrix3(t),this.setXY(e,Hn.x,Hn.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.applyMatrix3(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.applyMatrix4(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.applyNormalMatrix(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.transformDirection(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Ce(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=kt(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ce(e,this.array)),e}setX(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ce(e,this.array)),e}setY(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ce(e,this.array)),e}setZ(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ce(e,this.array)),e}setW(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t*=this.itemSize,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array),r=kt(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==fr&&(t.usage=this.usage),t}}class Gc extends bi{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class Yc extends bi{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class ni extends bi{constructor(t,e,i){super(new Float32Array(t),e,i)}}let Uc=0;const ge=new ue,qs=new be,Oi=new W,ce=new Ti,un=new Ti,Wt=new W;class ie extends bs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Uc++}),this.uuid=De(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ec(t)?Yc:Gc)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new oi().getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ge.makeRotationFromQuaternion(t),this.applyMatrix4(ge),this}rotateX(t){return ge.makeRotationX(t),this.applyMatrix4(ge),this}rotateY(t){return ge.makeRotationY(t),this.applyMatrix4(ge),this}rotateZ(t){return ge.makeRotationZ(t),this.applyMatrix4(ge),this}translate(t,e,i){return ge.makeTranslation(t,e,i),this.applyMatrix4(ge),this}scale(t,e,i){return ge.makeScale(t,e,i),this.applyMatrix4(ge),this}lookAt(t){return qs.lookAt(t),qs.updateMatrix(),this.applyMatrix4(qs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oi).negate(),this.translate(Oi.x,Oi.y,Oi.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new ni(i,3))}else{const i=Math.min(t.length,e.count);for(let s=0;s<i;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ti);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++){const r=e[i];ce.setFromBufferAttribute(r),this.morphTargetsRelative?(Wt.addVectors(this.boundingBox.min,ce.min),this.boundingBox.expandByPoint(Wt),Wt.addVectors(this.boundingBox.max,ce.max),this.boundingBox.expandByPoint(Wt)):(this.boundingBox.expandByPoint(ce.min),this.boundingBox.expandByPoint(ce.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Er);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(t){const i=this.boundingSphere.center;if(ce.setFromBufferAttribute(t),e)for(let r=0,o=e.length;r<o;r++){const a=e[r];un.setFromBufferAttribute(a),this.morphTargetsRelative?(Wt.addVectors(ce.min,un.min),ce.expandByPoint(Wt),Wt.addVectors(ce.max,un.max),ce.expandByPoint(Wt)):(ce.expandByPoint(un.min),ce.expandByPoint(un.max))}ce.getCenter(i);let s=0;for(let r=0,o=t.count;r<o;r++)Wt.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(Wt));if(e)for(let r=0,o=e.length;r<o;r++){const a=e[r],h=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)Wt.fromBufferAttribute(a,l),h&&(Oi.fromBufferAttribute(t,l),Wt.add(Oi)),s=Math.max(s,i.distanceToSquared(Wt))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new bi(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],h=[];for(let N=0;N<i.count;N++)a[N]=new W,h[N]=new W;const l=new W,c=new W,f=new W,u=new Lt,d=new Lt,p=new Lt,m=new W,g=new W;function y(N,z,P){l.fromBufferAttribute(i,N),c.fromBufferAttribute(i,z),f.fromBufferAttribute(i,P),u.fromBufferAttribute(r,N),d.fromBufferAttribute(r,z),p.fromBufferAttribute(r,P),c.sub(l),f.sub(l),d.sub(u),p.sub(u);const E=1/(d.x*p.y-p.x*d.y);isFinite(E)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(f,-d.y).multiplyScalar(E),g.copy(f).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(E),a[N].add(m),a[z].add(m),a[P].add(m),h[N].add(g),h[z].add(g),h[P].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:t.count}]);for(let N=0,z=b.length;N<z;++N){const P=b[N],E=P.start,B=P.count;for(let I=E,L=E+B;I<L;I+=3)y(t.getX(I+0),t.getX(I+1),t.getX(I+2))}const w=new W,x=new W,M=new W,v=new W;function A(N){M.fromBufferAttribute(s,N),v.copy(M);const z=a[N];w.copy(z),w.sub(M.multiplyScalar(M.dot(z))).normalize(),x.crossVectors(v,z);const E=x.dot(h[N])<0?-1:1;o.setXYZW(N,w.x,w.y,w.z,E)}for(let N=0,z=b.length;N<z;++N){const P=b[N],E=P.start,B=P.count;for(let I=E,L=E+B;I<L;I+=3)A(t.getX(I+0)),A(t.getX(I+1)),A(t.getX(I+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new bi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let u=0,d=i.count;u<d;u++)i.setXYZ(u,0,0,0);const s=new W,r=new W,o=new W,a=new W,h=new W,l=new W,c=new W,f=new W;if(t)for(let u=0,d=t.count;u<d;u+=3){const p=t.getX(u+0),m=t.getX(u+1),g=t.getX(u+2);s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),c.subVectors(o,r),f.subVectors(s,r),c.cross(f),a.fromBufferAttribute(i,p),h.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),a.add(c),h.add(c),l.add(c),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,h.x,h.y,h.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let u=0,d=e.count;u<d;u+=3)s.fromBufferAttribute(e,u+0),r.fromBufferAttribute(e,u+1),o.fromBufferAttribute(e,u+2),c.subVectors(o,r),f.subVectors(s,r),c.cross(f),i.setXYZ(u+0,c.x,c.y,c.z),i.setXYZ(u+1,c.x,c.y,c.z),i.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Wt.fromBufferAttribute(t,e),Wt.normalize(),t.setXYZ(e,Wt.x,Wt.y,Wt.z)}toNonIndexed(){function t(a,h){const l=a.array,c=a.itemSize,f=a.normalized,u=new l.constructor(h.length*c);let d=0,p=0;for(let m=0,g=h.length;m<g;m++){a.isInterleavedBufferAttribute?d=h[m]*a.data.stride+a.offset:d=h[m]*c;for(let y=0;y<c;y++)u[p++]=l[d++]}return new bi(u,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ie,i=this.index.array,s=this.attributes;for(const a in s){const h=s[a],l=t(h,i);e.setAttribute(a,l)}const r=this.morphAttributes;for(const a in r){const h=[],l=r[a];for(let c=0,f=l.length;c<f;c++){const u=l[c],d=t(u,i);h.push(d)}e.morphAttributes[a]=h}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,h=o.length;a<h;a++){const l=o[a];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const l in h)h[l]!==void 0&&(t[l]=h[l]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const h in i){const l=i[h];t.data.attributes[h]=l.toJSON(t.data)}const s={};let r=!1;for(const h in this.morphAttributes){const l=this.morphAttributes[h],c=[];for(let f=0,u=l.length;f<u;f++){const d=l[f];c.push(d.toJSON(t.data))}c.length>0&&(s[h]=c,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere=a.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone());const s=t.attributes;for(const l in s){const c=s[l];this.setAttribute(l,c.clone(e))}const r=t.morphAttributes;for(const l in r){const c=[],f=r[l];for(let u=0,d=f.length;u<d;u++)c.push(f[u].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,c=o.length;l<c;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ko=new ue,pi=new Ra,Wn=new Er,No=new W,$n=new W,Gn=new W,Yn=new W,Zs=new W,Un=new W,zo=new W,Vn=new W;class La extends be{constructor(t=new ie,e=new Wc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(t,e){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(s,t);const a=this.morphTargetInfluences;if(r&&a){Un.set(0,0,0);for(let h=0,l=r.length;h<l;h++){const c=a[h],f=r[h];c!==0&&(Zs.fromBufferAttribute(f,t),o?Un.addScaledVector(Zs,c):Un.addScaledVector(Zs.sub(e),c))}e.add(Un)}return e}raycast(t,e){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Wn.copy(i.boundingSphere),Wn.applyMatrix4(r),pi.copy(t.ray).recast(t.near),!(Wn.containsPoint(pi.origin)===!1&&(pi.intersectSphere(Wn,No)===null||pi.origin.distanceToSquared(No)>(t.far-t.near)**2))&&(ko.copy(r).invert(),pi.copy(t.ray).applyMatrix4(ko),!(i.boundingBox!==null&&pi.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,pi)))}_computeIntersections(t,e,i){let s;const r=this.geometry,o=this.material,a=r.index,h=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,f=r.attributes.normal,u=r.groups,d=r.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,m=u.length;p<m;p++){const g=u[p],y=o[g.materialIndex],b=Math.max(g.start,d.start),w=Math.min(a.count,Math.min(g.start+g.count,d.start+d.count));for(let x=b,M=w;x<M;x+=3){const v=a.getX(x),A=a.getX(x+1),N=a.getX(x+2);s=Xn(this,y,t,i,l,c,f,v,A,N),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,e.push(s))}}else{const p=Math.max(0,d.start),m=Math.min(a.count,d.start+d.count);for(let g=p,y=m;g<y;g+=3){const b=a.getX(g),w=a.getX(g+1),x=a.getX(g+2);s=Xn(this,o,t,i,l,c,f,b,w,x),s&&(s.faceIndex=Math.floor(g/3),e.push(s))}}else if(h!==void 0)if(Array.isArray(o))for(let p=0,m=u.length;p<m;p++){const g=u[p],y=o[g.materialIndex],b=Math.max(g.start,d.start),w=Math.min(h.count,Math.min(g.start+g.count,d.start+d.count));for(let x=b,M=w;x<M;x+=3){const v=x,A=x+1,N=x+2;s=Xn(this,y,t,i,l,c,f,v,A,N),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,e.push(s))}}else{const p=Math.max(0,d.start),m=Math.min(h.count,d.start+d.count);for(let g=p,y=m;g<y;g+=3){const b=g,w=g+1,x=g+2;s=Xn(this,o,t,i,l,c,f,b,w,x),s&&(s.faceIndex=Math.floor(g/3),e.push(s))}}}}function Vc(n,t,e,i,s,r,o,a){let h;if(t.side===ic?h=i.intersectTriangle(o,r,s,!0,a):h=i.intersectTriangle(s,r,o,t.side===ur,a),h===null)return null;Vn.copy(a),Vn.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Vn);return l<e.near||l>e.far?null:{distance:l,point:Vn.clone(),object:n}}function Xn(n,t,e,i,s,r,o,a,h,l){n.getVertexPosition(a,$n),n.getVertexPosition(h,Gn),n.getVertexPosition(l,Yn);const c=Vc(n,t,e,i,$n,Gn,Yn,zo);if(c){const f=new W;xe.getBarycoord(zo,$n,Gn,Yn,f),s&&(c.uv=xe.getInterpolatedAttribute(s,a,h,l,f,new Lt)),r&&(c.uv1=xe.getInterpolatedAttribute(r,a,h,l,f,new Lt)),o&&(c.normal=xe.getInterpolatedAttribute(o,a,h,l,f,new W),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const u={a,b:h,c:l,normal:new W,materialIndex:0};xe.getNormal($n,Gn,Yn,u.normal),c.face=u,c.barycoord=f}return c}class vr extends ie{constructor(t=1,e=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const h=[],l=[],c=[],f=[];let u=0,d=0;p("z","y","x",-1,-1,i,e,t,o,r,0),p("z","y","x",1,-1,i,e,-t,o,r,1),p("x","z","y",1,1,t,i,e,s,o,2),p("x","z","y",1,-1,t,i,-e,s,o,3),p("x","y","z",1,-1,t,e,i,s,r,4),p("x","y","z",-1,-1,t,e,-i,s,r,5),this.setIndex(h),this.setAttribute("position",new ni(l,3)),this.setAttribute("normal",new ni(c,3)),this.setAttribute("uv",new ni(f,2));function p(m,g,y,b,w,x,M,v,A,N,z){const P=x/A,E=M/N,B=x/2,I=M/2,L=v/2,q=A+1,J=N+1;let V=0,R=0;const D=new W;for(let H=0;H<J;H++){const Z=H*E-I;for(let X=0;X<q;X++){const it=X*P-B;D[m]=it*b,D[g]=Z*w,D[y]=L,l.push(D.x,D.y,D.z),D[m]=0,D[g]=0,D[y]=v>0?1:-1,c.push(D.x,D.y,D.z),f.push(X/A),f.push(1-H/N),V+=1}}for(let H=0;H<N;H++)for(let Z=0;Z<A;Z++){const X=u+Z+q*H,it=u+Z+q*(H+1),ct=u+(Z+1)+q*(H+1),nt=u+(Z+1)+q*H;h.push(X,it,nt),h.push(it,ct,nt),R+=6}a.addGroup(d,R,z),d+=R,u+=V}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new vr(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}class yn extends be{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Xc{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=fr,this.updateRanges=[],this.version=0,this.uuid=De()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[i+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=De()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=De()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jt=new W;class ds{constructor(t,e,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Jt.fromBufferAttribute(this,e),Jt.applyMatrix4(t),this.setXYZ(e,Jt.x,Jt.y,Jt.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Jt.fromBufferAttribute(this,e),Jt.applyNormalMatrix(t),this.setXYZ(e,Jt.x,Jt.y,Jt.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Jt.fromBufferAttribute(this,e),Jt.transformDirection(t),this.setXYZ(e,Jt.x,Jt.y,Jt.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Ce(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=kt(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ce(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ce(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ce(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ce(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array),r=kt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new bi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ds(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ba extends Ms{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Di;const fn=new W,Hi=new W,Wi=new W,$i=new Lt,dn=new Lt,Oa=new ue,qn=new W,mn=new W,Zn=new W,Po=new Lt,js=new Lt,Ro=new Lt;class qc extends be{constructor(t=new Ba){if(super(),this.isSprite=!0,this.type="Sprite",Di===void 0){Di=new ie;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Xc(e,5);Di.setIndex([0,1,2,0,2,3]),Di.setAttribute("position",new ds(i,3,0,!1)),Di.setAttribute("uv",new ds(i,2,3,!1))}this.geometry=Di,this.material=t,this.center=new Lt(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hi.setFromMatrixScale(this.matrixWorld),Oa.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Wi.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hi.multiplyScalar(-Wi.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const o=this.center;jn(qn.set(-.5,-.5,0),Wi,o,Hi,s,r),jn(mn.set(.5,-.5,0),Wi,o,Hi,s,r),jn(Zn.set(.5,.5,0),Wi,o,Hi,s,r),Po.set(0,0),js.set(1,0),Ro.set(1,1);let a=t.ray.intersectTriangle(qn,mn,Zn,!1,fn);if(a===null&&(jn(mn.set(-.5,.5,0),Wi,o,Hi,s,r),js.set(0,1),a=t.ray.intersectTriangle(qn,Zn,mn,!1,fn),a===null))return;const h=t.ray.origin.distanceTo(fn);h<t.near||h>t.far||e.push({distance:h,point:fn.clone(),uv:xe.getInterpolation(fn,qn,mn,Zn,Po,js,Ro,new Lt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function jn(n,t,e,i,s,r){$i.subVectors(n,e).addScalar(.5).multiply(i),s!==void 0?(dn.x=r*$i.x-s*$i.y,dn.y=s*$i.x+r*$i.y):dn.copy($i),n.copy(t),n.x+=dn.x,n.y+=dn.y,n.applyMatrix4(Oa)}class Gi extends Ms{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ms=new W,ps=new W,Fo=new ue,pn=new Ra,Jn=new Er,Js=new W,Lo=new W;class gi extends be{constructor(t=new ie,e=new Gi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let s=1,r=e.count;s<r;s++)ms.fromBufferAttribute(e,s-1),ps.fromBufferAttribute(e,s),i[s]=i[s-1],i[s]+=ms.distanceTo(ps);t.setAttribute("lineDistance",new ni(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jn.copy(i.boundingSphere),Jn.applyMatrix4(s),Jn.radius+=r,t.ray.intersectsSphere(Jn)===!1)return;Fo.copy(s).invert(),pn.copy(t.ray).applyMatrix4(Fo);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),h=a*a,l=this.isLineSegments?2:1,c=i.index,u=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let m=d,g=p-1;m<g;m+=l){const y=c.getX(m),b=c.getX(m+1),w=Kn(this,t,pn,h,y,b,m);w&&e.push(w)}if(this.isLineLoop){const m=c.getX(p-1),g=c.getX(d),y=Kn(this,t,pn,h,m,g,p-1);y&&e.push(y)}}else{const d=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let m=d,g=p-1;m<g;m+=l){const y=Kn(this,t,pn,h,m,m+1,m);y&&e.push(y)}if(this.isLineLoop){const m=Kn(this,t,pn,h,p-1,d,p-1);m&&e.push(m)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function Kn(n,t,e,i,s,r,o){const a=n.geometry.attributes.position;if(ms.fromBufferAttribute(a,s),ps.fromBufferAttribute(a,r),e.distanceSqToSegment(ms,ps,Js,Lo)>i)return;Js.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Js);if(!(l<t.near||l>t.far))return{distance:l,point:Lo.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}class Zc extends ii{constructor(t,e,i,s,r,o,a,h,l){super(t,e,i,s,r,o,a,h,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ir extends ie{constructor(t=1,e=1,i=1,s=32,r=1,o=!1,a=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:h};const l=this;s=Math.floor(s),r=Math.floor(r);const c=[],f=[],u=[],d=[];let p=0;const m=[],g=i/2;let y=0;b(),o===!1&&(t>0&&w(!0),e>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new ni(f,3)),this.setAttribute("normal",new ni(u,3)),this.setAttribute("uv",new ni(d,2));function b(){const x=new W,M=new W;let v=0;const A=(e-t)/i;for(let N=0;N<=r;N++){const z=[],P=N/r,E=P*(e-t)+t;for(let B=0;B<=s;B++){const I=B/s,L=I*h+a,q=Math.sin(L),J=Math.cos(L);M.x=E*q,M.y=-P*i+g,M.z=E*J,f.push(M.x,M.y,M.z),x.set(q,A,J).normalize(),u.push(x.x,x.y,x.z),d.push(I,1-P),z.push(p++)}m.push(z)}for(let N=0;N<s;N++)for(let z=0;z<r;z++){const P=m[z][N],E=m[z+1][N],B=m[z+1][N+1],I=m[z][N+1];(t>0||z!==0)&&(c.push(P,E,I),v+=3),(e>0||z!==r-1)&&(c.push(E,B,I),v+=3)}l.addGroup(y,v,0),y+=v}function w(x){const M=p,v=new Lt,A=new W;let N=0;const z=x===!0?t:e,P=x===!0?1:-1;for(let B=1;B<=s;B++)f.push(0,g*P,0),u.push(0,P,0),d.push(.5,.5),p++;const E=p;for(let B=0;B<=s;B++){const L=B/s*h+a,q=Math.cos(L),J=Math.sin(L);A.x=z*J,A.y=g*P,A.z=z*q,f.push(A.x,A.y,A.z),u.push(0,P,0),v.x=q*.5+.5,v.y=J*.5*P+.5,d.push(v.x,v.y),p++}for(let B=0;B<s;B++){const I=M+B,L=E+B;x===!0?c.push(L,L+1,I):c.push(L+1,L,I),N+=3}l.addGroup(y,N,x===!0?1:2),y+=N}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ir(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class jc extends Ms{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ki,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Jc extends jc{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ia}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ia);const Tn=6,Cr=4,gs=2.6,$t=.04,Mi=.02,Da="#60a5fa";function Kc(n,t=Da){const e=new Gt;try{e.set(n!=null?n:t)}catch(i){e.set(t)}return(Number.isNaN(e.r)||Number.isNaN(e.g)||Number.isNaN(e.b))&&e.set(t),e}function Ha(n,t){const e=(n!=null?n:Da).toLowerCase()+"_mobile_pastel_v2",i=t.get(e);if(i)return i;const s=Kc(n),r={h:0,s:0,l:0};s.getHSL(r);let{h:o,s:a,l:h}=r;const l=o<.03||o>.97,c=!l&&o>=.03&&o<.11,f=!l&&o>=.11&&o<.2;a=a*1.25+.06,h=h*.92+.04,c&&(a=Math.min(1,a*1.35+.08),h=h+.03),f&&(a=Math.min(1,a*1.2+.06),h=h+.01),l&&(a=Math.min(1,a*1.2+.06),h=h-.12),h=Math.max(l?.32:.4,Math.min(.72,h));const u=new Jc({color:s,metalness:0,roughness:.6,clearcoat:1,clearcoatRoughness:.35,reflectivity:.5,emissive:s.clone().multiplyScalar(.75),transmission:0,thickness:.1,opacity:1});return t.set(e,u),u}function Xi(n,t){return t/Math.max(n,1)}const Ks=.3,Qc=new W(-.25,.15,.8).normalize();function Qs(n,t={}){const{fontSize:e=28,color:i="#1f2933",backgroundColor:s,padding:r=Math.ceil(e*.35),fontFamily:o=St,weight:a="500",worldUnitsPerPixel:h=.004}=t,l=document.createElement("canvas"),c=l.getContext("2d");if(!c)throw new Error("Failed to acquire 2D context for text sprite");c.font="".concat(a," ").concat(e,"px ").concat(o);const f=c.measureText(n),u=Math.ceil(f.width),d=Math.ceil(e*1.35);l.width=Math.max(1,u+r*2),l.height=Math.max(1,d+r*2),c.font="".concat(a," ").concat(e,"px ").concat(o),c.textAlign="center",c.textBaseline="middle",s?(c.fillStyle=s,c.fillRect(0,0,l.width,l.height)):c.clearRect(0,0,l.width,l.height),c.fillStyle=i,c.fillText(n,l.width/2,l.height/2+e*.05);const p=new Zc(l);p.anisotropy=8,p.needsUpdate=!0;const m=new Ba({map:p,transparent:!0});m.depthTest=!1,m.depthWrite=!1;const g=new qc(m);return g.scale.set(l.width*h,l.height*h,1),g.center.set(.5,.5),g}function tu(n,t,e,i,s){var Y,_,S;const r=Math.max(gs*.25,$t),o=(_=(Y=n.barOptions)==null?void 0:Y.grouping)!=null?_:We.BAR_GROUPING_UNSPECIFIED;if(!Sn(t.x)||n.series.length===0)return{segments:[],bounds:{minX:0,maxX:0,maxHeight:0,minHeight:0},barDepth:r,chartDepth:r,categoryCount:0,seriesLanes:[],grouping:o,categories:[]};const a=Sr(n,s),h=a.categories;if(h.length===0)return{segments:[],bounds:{minX:0,maxX:0,maxHeight:0,minHeight:0},barDepth:r,chartDepth:r,categoryCount:0,seriesLanes:[],grouping:o,categories:[]};const l=t.x,c=t.y,f=Xi(e.width,Tn),u=Xi(e.height,Cr),d=Xi(e.width,gs),p=c(0),m=Number.isFinite(p)?p-e.y:e.height,g=T=>(m-T)*u,y=a.mode==="clustered",b=o===We.BAR_GROUPING_UNSPECIFIED,w=a.visibleSeries,x=b?Math.max(w.length,1):1,M=Math.max(l.bandwidth(),1),v=M*.2,A=Math.max(M-v,M*.4),N=b?A*.2:0,z=b?Math.max(A-N,A*.5):A,P=b?z/Math.max(x,1):A,E=b?Math.max(P*d,$t):r,B=b&&!y?Math.min(Math.max(E*.15,$t*.5),Math.max(E-$t,0)*.5):0,I=b?Math.max(E-B*2,$t):r,L=b?Math.max(N*d,E*.1):0,q=b?L:0,J=b?w.map((T,U)=>q+E/2+U*(E+L)):[E/2],V=b?w.map((T,U)=>{var C,tt,k;return{seriesIndex:T,label:((tt=(C=n.series[T])==null?void 0:C.name)!=null?tt:"").trim()||"Series ".concat(U+1),centerZ:(k=J[U])!=null?k:E/2}}):[],R=[];let D=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY,Z=Number.POSITIVE_INFINITY,X=Number.NEGATIVE_INFINITY,it=0,ct=0;h.forEach((T,U)=>{var et;const C=l(T);if(C===void 0)return;const tt=C-e.x,K=((et=a.segmentsByCategory[U])!=null?et:[]).filter(st=>{const at=n.series[st.seriesIndex];return!at||_e(at,U)?!1:!!fe(at,U,st.seriesIndex,i)}),ht=K.length||1,$=A/Math.max(ht,1);K.forEach((st,at)=>{var At,Mt;const ft=n.series[st.seriesIndex];if(!ft)return;const Et=fe(ft,U,st.seriesIndex,i);if(!Et)return;const _t=b?Math.max(0,w.indexOf(st.seriesIndex)):y?at:0,ut=b?A:y?$:M,jt=b?(M-A)/2:y?(M-A)/2+$*_t:0,de=c(st.start),Ht=c(st.end);if(!Number.isFinite(de)||!Number.isFinite(Ht)||!Number.isFinite(ut))return;const dt=de-e.y,Q=Ht-e.y,F=g(dt),O=g(Q),ot=Math.max(Math.abs(O-F),Mi),G=(F+O)/2,pt=(tt+jt+ut/2)*f;let gt=Math.max(ut*f,$t),xt=b?I:E,vt=(Mt=(At=J[_t])!=null?At:J[0])!=null?Mt:I/2;if(b&&!y){const Rt=Math.max(Math.min(gt,I),$t);gt=Rt,xt=Rt}b||(y?xt=gt:xt=r,vt=xt/2),R.push({key:"".concat(U,"-").concat(st.seriesIndex,"-").concat(at),seriesIndex:st.seriesIndex,position:{x:pt,y:G,z:vt},size:{width:gt,height:ot,depth:xt},materialKey:Et});const bt=pt-gt/2,ne=pt+gt/2;D=Math.min(D,bt),H=Math.max(H,ne),it=Math.max(it,G+ot/2),ct=Math.min(ct,G-ot/2);const Pt=vt-xt/2,Ct=vt+xt/2;Z=Math.min(Z,Pt),X=Math.max(X,Ct)})}),(!Number.isFinite(D)||!Number.isFinite(H))&&(D=0,H=Tn);const nt=Number.isFinite(D)?D:0;nt!==0&&(R.forEach(T=>{T.position=Te(pe({},T.position),{x:T.position.x-nt})}),D-=nt,H-=nt),b&&!y&&R.length>0&&Number.isFinite(Z)&&Number.isFinite(X)&&(Z-=B,X+=B),(!Number.isFinite(Z)||!Number.isFinite(X))&&(Z=0,X=b?(S=J[J.length-1])!=null?S:I:r);const rt=Number.isFinite(Z)?Z:0;rt!==0&&(R.forEach(T=>{T.position=Te(pe({},T.position),{z:T.position.z-rt})}),V.forEach(T=>{T.centerZ-=rt}),Z-=rt,X-=rt);const mt=Number.isFinite(X)?Math.max(X,$t):r;return{segments:R,bounds:{minX:D,maxX:H,maxHeight:Math.max(it,Mi),minHeight:Math.min(ct,0)},barDepth:r,chartDepth:mt,categoryCount:h.length,seriesLanes:V,grouping:o,categories:h}}function eu(n,t,e,i,s,r){var Ai,ai,Ei,Ve,Xe,nn,vn;const o=tu(t,e,i,s,r);if(n.clear(),o.segments.length===0){n.renderer.setScissorTest(!1);return}const a=new Map,h=n.renderer,l=n.camera,{width:c,height:f}=n.dims,u=1,d=Math.max(1,c*u),p=Math.max(1,f*u),m=h.getViewport(new $e),g=h.getScissor(new $e),y=h.getScissorTest(),b=l.aspect;h.setViewport(0,0,d,p),h.setScissor(0,0,d,p),h.setScissorTest(!0),p>0&&(l.aspect=c/Math.max(f,1),l.updateProjectionMatrix());const{bounds:w,chartDepth:x,seriesLanes:M,grouping:v,categories:A}=o,N=Math.max(w.maxX-w.minX,$t),P=-(N*.5),E=0,B=Math.max(x,$t),I=Math.min(w.minHeight,0),L=Math.max(w.maxHeight,Mi),q=L-I||Mi,J=e.x,V=e.y,R=Xi(i.width,Tn),D=Xi(i.height,Cr),H=V(0),Z=Number.isFinite(H)?H-i.y:i.height,X=lt=>{const Tt=V(lt);if(!Number.isFinite(Tt))return null;const Nt=Tt-i.y;return(Z-Nt)*D},it=Math.max(J.bandwidth(),1),ct=lt=>{const Tt=J(lt);return Tt===void 0?null:(Tt-i.x+it/2)*R-w.minX},nt=(Ai=X(0))!=null?Ai:0,rt=(I+L)*.5,mt=x*.5,Y=lt=>lt-rt,_=lt=>lt-mt,S=new yn,T=new yn,U=new yn,C=new yn;C.renderOrder=20;const tt=Qt(t.xAxis,s),k=Qt(t.yAxis,s),K=t.yAxis,ht=!!((Ei=(ai=K==null?void 0:K.majorGridlines)==null?void 0:ai.fill)!=null&&Ei.color),$=(Ve=k.gridLineColor)!=null?Ve:k.lineColor,et=(()=>{var Nt;const lt=(Nt=t.yAxis)==null?void 0:Nt.numberFormatCode,Tt=_i("~s");return It=>{if(lt)try{return Ji.format(lt,It)}catch(Bt){}return Tt(It)}})(),st=new Gi({color:new Gt((Xe=tt.lineColor)!=null?Xe:"#2563eb"),transparent:!0,opacity:.9}),at=new Gi({color:new Gt((nn=k.lineColor)!=null?nn:"#1f2937"),transparent:!0,opacity:.9}),ft=new Gi({color:new Gt((vn=tt.lineColor)!=null?vn:"#2563eb"),transparent:!0,opacity:.9}),Et=new Gi({color:new Gt($!=null?$:"#cbdcfb"),transparent:!0,opacity:.25}),_t=new Gi({color:new Gt("#dbeafe"),transparent:!0,opacity:.2}),ut=new gi(new ie().setFromPoints([new W(P,Y(nt),_(E)),new W(P+N,Y(nt),_(E))]),st.clone());ut.renderOrder=5,U.add(ut);const jt=new gi(new ie().setFromPoints([new W(P,Y(nt),_(E)),new W(P,Y(nt),_(E+B))]),ft.clone());jt.renderOrder=5,U.add(jt);const de=new gi(new ie().setFromPoints([new W(P,Y(I),_(E+B)),new W(P,Y(L),_(E+B))]),at.clone());if(de.renderOrder=5,U.add(de),(typeof V.ticks=="function"?V.ticks(6):[]).forEach(lt=>{var Bt;const Tt=X(lt);if(Tt===null)return;const Nt=Math.abs(lt)<1e-6;if(ht&&!Nt){const he=new gi(new ie().setFromPoints([new W(P,Y(Tt),_(E)),new W(P+N,Y(Tt),_(E))]),Et.clone());he.renderOrder=-2,T.add(he);const vi=new gi(new ie().setFromPoints([new W(P,Y(Tt),_(E+B)),new W(P+N,Y(Tt),_(E+B))]),Et.clone());vi.renderOrder=-2,T.add(vi)}const It=Qs(et(lt),{fontSize:26,color:(Bt=k.textColor)!=null?Bt:"#1f2933",weight:"500"});It.position.set(P-Math.max(N,B)*.08,Y(Tt),_(E-B*.05)),C.add(It)}),A.forEach(lt=>{var he;const Tt=ct(lt);if(Tt===null)return;const Nt=P+Tt,It=new gi(new ie().setFromPoints([new W(Nt,Y(nt),_(E)),new W(Nt,Y(nt),_(E+B))]),_t.clone());It.renderOrder=-2,T.add(It);const Bt=Qs(String(lt),{fontSize:26,color:(he=tt.textColor)!=null?he:"#111827"});Bt.position.set(Nt,Y(nt-Math.min(q*.12,.5)),_(E-B*.06)),C.add(Bt)}),v===We.BAR_GROUPING_UNSPECIFIED&&M.length){const lt=new Map;o.segments.forEach(It=>{lt.has(It.seriesIndex)||lt.set(It.seriesIndex,It.size.depth)});const Tt=new Set;M.forEach(It=>{var sn,rn;const Bt=(sn=lt.get(It.seriesIndex))!=null?sn:0,he=E+It.centerZ,vi=Qs(It.label,{fontSize:24,color:(rn=tt.textColor)!=null?rn:"#111827",weight:"500"});vi.position.set(P+N+Math.max(N,B)*.06,Y(nt-Math.min(q*.08,.4)),_(he)),C.add(vi),Bt>0&&(Tt.add(he-Bt/2),Tt.add(he+Bt/2))});const Nt=_t.clone();Nt.opacity=.3,Array.from(Tt).sort((It,Bt)=>It-Bt).forEach(It=>{const Bt=new gi(new ie().setFromPoints([new W(P,Y(nt),_(It)),new W(P+N,Y(nt),_(It))]),Nt.clone());Bt.renderOrder=-2,T.add(Bt)})}o.segments.forEach(lt=>{const Tt=new vr(lt.size.width,lt.size.height,lt.size.depth),Nt=Ha(lt.materialKey,a),It=new La(Tt,Nt);It.castShadow=!0,It.receiveShadow=!0,It.position.set(P+lt.position.x,Y(lt.position.y),_(E+lt.position.z)),S.add(It)}),n.chartGroup.add(T),n.chartGroup.add(S),n.chartGroup.add(U),n.chartGroup.add(C);const dt=n.chartGroup.rotation.clone(),Q=Math.abs(dt.x)>1e-5||Math.abs(dt.y)>1e-5||Math.abs(dt.z)>1e-5;Q&&n.chartGroup.rotation.set(0,0,0),n.chartGroup.updateMatrixWorld(!0);const F=S,O=new Ti().setFromObject(F),ot=new W,G=new W;O.getCenter(ot),O.getSize(G),G.x===0&&G.y===0&&G.z===0&&G.set(Math.max(N,1),Math.max(q,1),Math.max(B,1));const j=Pa.degToRad(l.fov*.5),pt=Math.max(.001,j),gt=l.aspect||1,xt=Math.atan(Math.tan(pt)*gt),vt=Math.max(.001,xt),bt=Math.max(Math.tan(pt),1e-4),ne=Math.max(Math.tan(vt),1e-4),Pt=G.clone().multiplyScalar(.5);Pt.x=Math.max(Pt.x*(1+Ks),$t),Pt.y=Math.max(Pt.y*(1+Ks),Mi),Pt.z=Math.max(Pt.z*(1+Ks),$t);const Ct=ot.clone(),At=Qc.clone().normalize(),Mt=At.clone().negate();let Rt=new W(0,1,0);Math.abs(Mt.dot(Rt))>.99&&(Rt=new W(1,0,0));let Ye=new W().crossVectors(Rt,Mt);Ye.lengthSq()<1e-6&&(Rt=new W(0,0,1),Ye=new W().crossVectors(Rt,Mt)),Ye.normalize();const Qi=new W().crossVectors(Mt,Ye).normalize(),En=[];[-1,1].forEach(lt=>{[-1,1].forEach(Tt=>{[-1,1].forEach(Nt=>{En.push(new W(Pt.x*lt,Pt.y*Tt,Pt.z*Nt))})})});const ws=En.map(lt=>Ct.clone().add(lt)),se=Pt.length()*2,Ue=lt=>{l.position.copy(Ct).addScaledVector(At,lt);const Tt=Ct;l.up.copy(Qi),l.near=.1,l.far=Math.max(l.near+1,lt+se*4),l.lookAt(Tt),l.updateMatrixWorld(!0),l.updateProjectionMatrix()},re=lt=>{Ue(lt);const Tt=Ct;l.lookAt(Tt),l.updateMatrixWorld(!0),l.updateProjectionMatrix();let Nt=0,It=0,Bt=Number.POSITIVE_INFINITY,he=0;return ws.forEach(sn=>{const rn=sn.clone().project(l);Nt=Math.max(Nt,Math.abs(rn.x)),It=Math.max(It,Math.abs(rn.y));const kr=-sn.clone().applyMatrix4(l.matrixWorldInverse).z;Bt=Math.min(Bt,kr),he=Math.max(he,kr)}),{fits:Nt<=1&&It<=1&&Bt>0,maxAbsX:Nt,maxAbsY:It,minDepth:Bt,maxDepth:he}},tn=Math.max(Pt.x/ne,Pt.y/bt)+Pt.z;let Yt=.1,me=Math.max(tn,Yt*4),Ne=re(me),oe=0;for(;!Ne.fits&&oe<24;)me*=2,Ne=re(me),oe+=1;let ae=Ne;for(let lt=0;lt<28;lt+=1){const Tt=(Yt+me)*.5,Nt=re(Tt);Nt.fits?(me=Tt,ae=Nt):Yt=Tt}const Ut=me;Ue(Ut);const _s=Ct;ae=re(Ut);const Si=Math.max(.1,Math.min(ae.minDepth*.8,ae.minDepth-.05)),en=Math.max(Si+1,ae.maxDepth*1.2);l.near=Si,l.far=en,l.lookAt(_s),l.updateMatrixWorld(!0),l.updateProjectionMatrix(),Q&&(n.chartGroup.rotation.copy(dt),n.chartGroup.updateMatrixWorld(!0)),h.render(n.scene,l),h.setViewport(m),h.setScissor(g),h.setScissorTest(y),y||h.setScissorTest(!1),l.aspect=b,l.updateProjectionMatrix()}const tr=.25,iu=new W(-.25,.2,.85).normalize(),nu=.001,su=64;function ru(n,t,e,i,s){var b,w,x;const r=t.series[0];if(!r){gn(n);return}if(s!=null&&s.has(0)){gn(n);return}const o=(b=r.values)!=null?b:[],a=as(o);if(!Number.isFinite(a)||a===0){gn(n);return}const h=Math.max(Math.min(e.width,e.height)/2,1),l=h*2,c=Xi(Math.max(l,1),Math.min(Tn,gs)),f=Math.max(h*c,$t*2),u=Math.max(Math.min(f*.35,Cr*.6),$t*2),d=((x=(w=t.pieOptions)==null?void 0:w.firstSliceAngle)!=null?x:0)/360*Math.PI*2,m=sa().sort(null).startAngle(d).endAngle(d+Math.PI*2)(o).filter(M=>Number.isFinite(M.value)&&M.value!==0);if(m.length===0){gn(n);return}n.clear();const g=new Map,y=new yn;if(y.name="pie3dSlices",m.forEach((M,v)=>{var J;const A=(J=M.index)!=null?J:v;if(_e(r,A))return;const N=fe(r,A,0,i,A);if(!N)return;const z=M.endAngle-M.startAngle,P=Math.max(Math.abs(z),nu);if(!Number.isFinite(P))return;const E=ou(Math.PI/2-M.endAngle),B=Math.max(su,Math.ceil(P/(Math.PI/32))),I=new Ir(f,f,u,B,1,!1,E,P),L=Ha(N,g),q=new La(I,L);q.castShadow=!0,q.receiveShadow=!0,y.add(q)}),y.children.length===0){gn(n);return}n.chartGroup.add(y),au(n,y)}function ou(n){const t=Math.PI*2,e=n%t;return e<0?e+t:e}function gn(n){n.clear(),n.renderer.setScissorTest(!1)}function au(n,t){const e=n.renderer,i=n.camera,{width:s,height:r}=n.dims,o=1,a=Math.max(1,s*o),h=Math.max(1,r*o),l=e.getViewport(new $e),c=e.getScissor(new $e),f=e.getScissorTest(),u=i.aspect;e.setViewport(0,0,a,h),e.setScissor(0,0,a,h),e.setScissorTest(!0),h>0&&(i.aspect=s/Math.max(r,1),i.updateProjectionMatrix());const d=n.chartGroup.rotation.clone(),p=Math.abs(d.x)>1e-5||Math.abs(d.y)>1e-5||Math.abs(d.z)>1e-5;p&&n.chartGroup.rotation.set(0,0,0),n.chartGroup.updateMatrixWorld(!0);const m=new Ti().setFromObject(t),g=new W,y=new W;m.getCenter(g),m.getSize(y),y.x===0&&y.y===0&&y.z===0&&y.set(Math.max(Tn*.5,$t),Math.max(Mi,.2),Math.max(gs*.5,$t));const b=Pa.degToRad(i.fov*.5),w=Math.max(.001,b),x=i.aspect||1,M=Math.atan(Math.tan(w)*x),v=Math.max(.001,M),A=Math.max(Math.tan(w),1e-4),N=Math.max(Math.tan(v),1e-4),z=y.clone().multiplyScalar(.5);z.x=Math.max(z.x*(1+tr),$t),z.y=Math.max(z.y*(1+tr),Mi),z.z=Math.max(z.z*(1+tr),$t);const P=g.clone(),E=iu.clone().normalize(),B=E.clone().negate();let I=new W(0,1,0);Math.abs(B.dot(I))>.99&&(I=new W(1,0,0));let L=new W().crossVectors(I,B);L.lengthSq()<1e-6&&(I=new W(0,0,1),L=new W().crossVectors(I,B)),L.normalize();const q=new W().crossVectors(B,L).normalize(),J=[];[-1,1].forEach(T=>{[-1,1].forEach(U=>{[-1,1].forEach(C=>{J.push(new W(z.x*T,z.y*U,z.z*C))})})});const V=J.map(T=>P.clone().add(T)),R=z.length()*2,D=T=>{i.position.copy(P).addScaledVector(E,T);const U=P;i.up.copy(q),i.near=.1,i.far=Math.max(i.near+1,T+R*4),i.lookAt(U),i.updateMatrixWorld(!0),i.updateProjectionMatrix()},H=T=>{D(T);const U=P;i.lookAt(U),i.updateMatrixWorld(!0),i.updateProjectionMatrix();let C=0,tt=0,k=Number.POSITIVE_INFINITY,K=0;return V.forEach($=>{const et=$.clone().project(i);C=Math.max(C,Math.abs(et.x)),tt=Math.max(tt,Math.abs(et.y));const at=-$.clone().applyMatrix4(i.matrixWorldInverse).z;k=Math.min(k,at),K=Math.max(K,at)}),{fits:C<=1&&tt<=1&&k>0,maxAbsX:C,maxAbsY:tt,minDepth:k,maxDepth:K}},Z=Math.max(z.x/N,z.y/A)+z.z;let X=.1,it=Math.max(Z,X*4),ct=H(it),nt=0;for(;!ct.fits&&nt<24;)it*=2,ct=H(it),nt+=1;let rt=ct;for(let T=0;T<28;T+=1){const U=(X+it)*.5,C=H(U);C.fits?(it=U,rt=C):X=U}const mt=it;D(mt);const Y=P;rt=H(mt);const _=Math.max(.1,Math.min(rt.minDepth*.8,rt.minDepth-.05)),S=Math.max(_+1,rt.maxDepth*1.2);i.near=_,i.far=S,i.lookAt(Y),i.updateMatrixWorld(!0),i.updateProjectionMatrix(),p&&(n.chartGroup.rotation.copy(d),n.chartGroup.updateMatrixWorld(!0)),e.render(n.scene,i),e.setViewport(l),e.setScissor(c),e.setScissorTest(f),f||e.setScissorTest(!1),i.aspect=u,i.updateProjectionMatrix()}function hu(n){var e,i;if(n.categories.length>0)return n.categories;const t=(i=(e=n.series[0])==null?void 0:e.categories)!=null?i:[];return t.length>0?t:[]}function lu(n,t){var f;const e=hu(n),i=n.series.map((u,d)=>d).filter(u=>!(t!=null&&t.has(u))),s=(f=n.lineOptions)==null?void 0:f.grouping,r=s===os.LINE_GROUPING_STACKED?"stacked":s===os.LINE_GROUPING_PERCENT_STACKED?"percent":"standard",o=i.map(u=>({seriesIndex:u,values:e.map(()=>0),tuples:e.map(()=>({start:0,end:0}))}));if(r==="standard"||i.length===0)return e.forEach((u,d)=>{i.forEach(p=>{var b,w;const m=o.find(x=>x.seriesIndex===p);if(!m)return;const g=(w=(b=n.series[p])==null?void 0:b.values[d])!=null?w:0,y=Number.isFinite(g)?g:0;m.values[d]=y,m.tuples[d]={start:0,end:y}})}),{categories:e,visibleSeries:i,mode:r,layers:o};const a=e.map((u,d)=>{const p={};return i.forEach(m=>{var b;const g=n.series[m],y=(b=g==null?void 0:g.values[d])!=null?b:0;p[String(m)]=Number.isFinite(y)?y:0}),p}),h=pr().keys(i.map(u=>String(u))).value((u,d)=>{var p;return(p=u[d])!=null?p:0}).order(gr);r==="percent"?h.offset(yr):h.offset(xr);const l=new Map(o.map(u=>[u.seriesIndex,u]));return h(a).forEach(u=>{const d=Number.parseInt(u.key,10),p=l.get(d);p&&e.forEach((m,g)=>{const y=u[g];if(!y)return;const b=Number.isFinite(y[0])?y[0]:0,w=Number.isFinite(y[1])?y[1]:b;p.tuples[g]={start:b,end:w},p.values[g]=w})}),{categories:e,visibleSeries:i,mode:r,layers:o}}function cu(n,t,e,i,s,r){const{x:o,y:a}=e,h=lu(t,r),l=h.categories;h.layers.forEach(c=>{var v,A,N;const f=t.series[c.seriesIndex];if(!f)return;const u=Me(f,c.seriesIndex,i);u&&(n.strokeStyle=u);const d=u!=null?u:n.strokeStyle,p=(()=>{var E;const z=(E=f.stroke)==null?void 0:E.widthEmu;if(z==null)return;const P=Number(z)*Ft;return Number.isFinite(P)&&P>0?P:void 0})();n.lineWidth=p!=null?p:2,n.beginPath();let m=!1;const g=[];for(let z=0;z<l.length;z++){const P=l[z],E=xn(o,P);if(E===void 0)continue;const B=c.values[z];if(B===void 0||!Number.isFinite(B))continue;const I=a(B);if(Number.isFinite(I)&&(m?n.lineTo(E,I):(n.moveTo(E,I),m=!0),g.push({cx:E,cy:I,idx:z}),s)){const q=(v=f.values[z])!=null?v:0;s.push({kind:"line-point",x:E-6/2,y:I-6/2,width:6,height:6,seriesName:f.name,category:P,value:q,color:d,anchorX:E,anchorY:I})}}m&&n.stroke();const y=(A=f.marker)==null?void 0:A.symbol;if(!(y!==void 0&&y!==xi.MARKER_SYMBOL_NONE&&y!==xi.MARKER_SYMBOL_UNSPECIFIED&&y!==xi.UNRECOGNIZED)||g.length===0)return;const w=(N=f.marker)==null?void 0:N.size,x=w!==void 0&&Number.isFinite(w)?w*96/72:6,M=Math.max(x/2,1.5);n.fillStyle=d,g.forEach(({cx:z,cy:P})=>{n.beginPath(),n.arc(z,P,M,0,Math.PI*2),n.fill()})})}function uu(n){var e;if(n.categories.length>0)return n.categories;const t=(e=n.series[0])==null?void 0:e.categories;return t&&t.length>0?t:[]}function fu(n,t){var c;const e=uu(n),i=n.series.map((f,u)=>u).filter(f=>!(t!=null&&t.has(f))),s=(c=n.areaOptions)==null?void 0:c.grouping,r=s===rs.AREA_GROUPING_STACKED?"stacked":s===rs.AREA_GROUPING_PERCENT_STACKED?"percent":"standard",o=i.map(f=>({seriesIndex:f,tuples:e.map(()=>({start:0,end:0}))}));if(r==="standard"||i.length===0)return e.forEach((f,u)=>{i.forEach(d=>{var g,y;const p=o.find(b=>b.seriesIndex===d);if(!p)return;const m=(y=(g=n.series[d])==null?void 0:g.values[u])!=null?y:0;p.tuples[u]={start:0,end:m}})}),{categories:e,visibleSeries:i,mode:r,layers:o};const a=e.map((f,u)=>{const d={};return i.forEach(p=>{var g;const m=n.series[p];d[String(p)]=(g=m==null?void 0:m.values[u])!=null?g:0}),d}),h=pr().keys(i.map(f=>String(f))).value((f,u)=>{var d;return(d=f[u])!=null?d:0}).order(gr);return r==="percent"?h.offset(yr):h.offset(xr),h(a).forEach(f=>{const u=Number.parseInt(f.key,10),d=o.find(p=>p.seriesIndex===u);d&&e.forEach((p,m)=>{const g=f[m];if(!g)return;const y=Number.isFinite(g[0])?g[0]:0,b=Number.isFinite(g[1])?g[1]:0;d.tuples[m]={start:y,end:b}})}),{categories:e,visibleSeries:i,mode:r,layers:o}}function du(n,t,e,i,s,r){const o=e.x,a=e.y,h=fu(t,r?new Set(r):void 0),l=h.categories;h.layers.forEach(c=>{var g,y;const f=c.seriesIndex,u=t.series[f];if(!u)return;const d=Me(u,f,i),p=(()=>{if(!d)return;const b=ri(d);return b?b.formatRgb():d})();p&&(n.fillStyle=p),d&&(n.strokeStyle=d),n.lineWidth=1,n.beginPath();let m=!1;for(let b=0;b<l.length;b++){const w=l[b],x=xn(o,w);if(x===void 0)continue;const M=c.tuples[b],v=(g=M==null?void 0:M.end)!=null?g:0,A=a(v);m?n.lineTo(x,A):(n.moveTo(x,A),m=!0)}if(!m){n.closePath();return}for(let b=l.length-1;b>=0;b--){const w=l[b],x=xn(o,w);if(x===void 0)continue;const M=c.tuples[b],v=(y=M==null?void 0:M.start)!=null?y:0,A=a(v);n.lineTo(x,A)}n.closePath(),n.fill(),n.stroke(),s&&l.forEach((w,x)=>{var z,P;const M=xn(o,w);if(M===void 0)return;const v=c.tuples[x],A=(z=v==null?void 0:v.end)!=null?z:0,N=a(A);s.push({kind:"area-point",x:M-6/2,y:N-6/2,width:6,height:6,seriesName:u.name,category:w,value:(P=u.values[x])!=null?P:0,color:d,anchorX:M,anchorY:N})})})}function mu(n){var e,i;if(n.categories.length>0)return n.categories;const t=(i=(e=n.series[0])==null?void 0:e.categories)!=null?i:[];return t.length>0?t:[]}function pu(n,t){const e=mu(n),i=e.length,s=n.series.map((u,d)=>d).filter(u=>!(t!=null&&t.has(u))),r=s.map(u=>({seriesIndex:u,values:Array.from({length:i},()=>0)}));let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;e.forEach((u,d)=>{s.forEach(p=>{const m=n.series[p],g=m==null?void 0:m.values[d],y=typeof g=="number"&&Number.isFinite(g)?g:0,b=r.find(w=>w.seriesIndex===p);b&&(b.values[d]=y,o=Math.min(o,y),a=Math.max(a,y))})}),o===Number.POSITIVE_INFINITY&&(o=0),a===Number.NEGATIVE_INFINITY&&(a=0);const h=n.yAxis&&n.yAxis.min!==void 0?Number(n.yAxis.min):void 0,l=n.yAxis&&n.yAxis.max!==void 0?Number(n.yAxis.max):void 0;let c=h!==void 0&&Number.isFinite(h)?h:Math.min(0,o),f=l!==void 0&&Number.isFinite(l)?l:a;return Number.isFinite(c)||(c=0),Number.isFinite(f)||(f=0),f<a&&l===void 0&&(f=a),f===c&&(f=c+1),{categories:e,visibleSeries:s,layers:r,domain:[c,f]}}const Bo="#E1E1E1";function gu(n,t,e,i,s,r){var z,P,E,B,I,L,q,J;const o=pu(t,r),a=o.categories;if(a.length===0||o.visibleSeries.length===0)return;const h=e.x+e.width/2,l=e.y+e.height/2,f=Math.min(e.width,e.height)/2-12;if(f<=0)return;const[u,d]=o.domain,p=si().domain([u,d]).range([0,f]),m=p(d);if(!Number.isFinite(m)||m<=0)return;const g=V=>{const R=a.length;return R===0?-Math.PI/2:-Math.PI/2+V*2*Math.PI/R},y=V=>!Number.isFinite(V)||V<u?u:V>d?d:V,b=Qt(t.xAxis,i),w=(E=(P=(z=t.yAxis)==null?void 0:z.majorGridlines)==null?void 0:P.fill)!=null&&E.color?zt(t.yAxis.majorGridlines.fill.color,i):void 0,x=w!=null?w:Bo,M=Array.from(new Set([...p.ticks(5),d])).filter(V=>Number.isFinite(V)&&V>u&&V<=d).sort((V,R)=>V-R);M.length>0&&(n.save(),n.strokeStyle=x,n.lineWidth=1,M.forEach(V=>{const R=p(V);!Number.isFinite(R)||R<=0||(n.beginPath(),a.forEach((D,H)=>{const Z=g(H),X=h+R*Math.cos(Z),it=l+R*Math.sin(Z);H===0?n.moveTo(X,it):n.lineTo(X,it)}),n.closePath(),n.stroke())}),n.restore());const v=(L=(I=(B=t.yAxis)==null?void 0:B.line)==null?void 0:I.fill)!=null&&L.color?zt(t.yAxis.line.fill.color,i):Bo;n.save(),n.strokeStyle=v,n.lineWidth=1,a.forEach((V,R)=>{const D=g(R),H=h+m*Math.cos(D),Z=l+m*Math.sin(D);n.beginPath(),n.moveTo(h,l),n.lineTo(H,Z),n.stroke()}),n.restore(),n.save(),n.font="".concat(b.fontSize,"px ").concat(St),n.fillStyle=b.textColor;const A=m+Math.max(b.fontSize,10);a.forEach((V,R)=>{const D=g(R),H=Math.cos(D),Z=Math.sin(D),X=h+A*H,it=l+A*Z;H>.25?n.textAlign="left":H<-.25?n.textAlign="right":n.textAlign="center",Z>.25?n.textBaseline="top":Z<-.25?n.textBaseline="bottom":n.textBaseline="middle",n.fillText(V,X,it)}),n.restore();const N=(J=(q=t.radarOptions)==null?void 0:q.style)!=null?J:Ts.RADAR_STYLE_STANDARD;o.layers.forEach(V=>{var it,ct;const R=t.series[V.seriesIndex];if(!R)return;const D=Me(R,V.seriesIndex,i);D&&(n.strokeStyle=D),n.lineWidth=2;const H=a.map((nt,rt)=>{var T;const mt=(T=V.values[rt])!=null?T:u,Y=y(mt),_=p(Y),S=g(rt);return{x:h+_*Math.cos(S),y:l+_*Math.sin(S),value:Y,idx:rt}});if(H.length===0)return;if(n.beginPath(),H.forEach((nt,rt)=>{rt===0?n.moveTo(nt.x,nt.y):n.lineTo(nt.x,nt.y)}),n.closePath(),N===Ts.RADAR_STYLE_FILLED){const nt=(()=>{if(!D)return;const rt=ri(D);return rt?rt.formatRgb():D})();nt&&(n.fillStyle=nt,n.fill())}n.stroke();const Z=(it=R.marker)==null?void 0:it.symbol;if(N===Ts.RADAR_STYLE_MARKER&&Z!==void 0&&Z!==xi.MARKER_SYMBOL_NONE&&Z!==xi.MARKER_SYMBOL_UNSPECIFIED){const nt=(ct=R.marker)==null?void 0:ct.size,rt=nt!==void 0&&Number.isFinite(nt)?nt*96/72:6,mt=Math.max(rt/2,1.5);H.forEach(Y=>{var tt,k;const _=Y.idx,S=_e(R,_),T=fe(R,_,V.seriesIndex,i),U=we(R,_,i);if(n.beginPath(),n.arc(Y.x,Y.y,mt,0,Math.PI*2),!S){const K=T!=null?T:D;K&&(n.fillStyle=K,n.fill())}const C=(tt=U.color)!=null?tt:D;C&&(n.strokeStyle=C,n.lineWidth=(k=U.widthPx)!=null?k:1,n.stroke())})}s&&H.forEach(nt=>{var Y;const rt=a[nt.idx],mt=(Y=R.values[nt.idx])!=null?Y:0;s.push({kind:"line-point",x:nt.x-3,y:nt.y-3,width:6,height:6,seriesName:R.name,category:rt,value:mt,color:D,anchorX:nt.x,anchorY:nt.y})})})}const yu=6;function xu(n,t,e,i,s=.15){var l;if(!t.title||!t.title.trim())return{reserved:0,layoutHeight:0};const r={x:e.x,y:e.y,width:e.width,height:Math.max(0,e.height*s)},o=br({type:mr.ELEMENT_TYPE_TEXT,paragraphs:[{runs:[{text:t.title.trim(),textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),citations:[]}]}],textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),levelsStyles:[]},n,i,void 0,{mode:"layout",bboxPx:r}),a=(l=o==null?void 0:o.height)!=null?l:0;return a<=0?{reserved:0,layoutHeight:0}:{reserved:Math.min(r.height,a+yu),layoutHeight:a}}const Oo=6,Do=8;function bu(n,t,e,i,s={}){var H,Z,X,it,ct,nt,rt,mt,Y,_;const r=(H=s.maxLeftFrac)!=null?H:1,o=(Z=s.maxBottomFrac)!=null?Z:1,a=t.categories.length>0?t.categories:(it=(X=t.series[0])==null?void 0:X.categories)!=null?it:[],h=Qt(t.yAxis,i);n.font="".concat(h.fontSize,"px ").concat(St);const l=(ct=t.barOptions)==null?void 0:ct.grouping;let c=0,f=0;if(l===We.BAR_GROUPING_STACKED){const S=(nt=lr(a.map((U,C)=>as(t.series,tt=>{var k;return Math.max(0,(k=tt.values[C])!=null?k:0)}))))!=null?nt:0,T=-((rt=lr(a.map((U,C)=>as(t.series,tt=>{var k;return Math.max(0,-((k=tt.values[C])!=null?k:0))}))))!=null?rt:0);c=Math.min(0,T),f=Math.max(0,S)}else if(l===We.BAR_GROUPING_PERCENT_STACKED)c=0,f=1;else{const S=t.series.flatMap(U=>U.values),T=ke(S);c=Math.min(0,(mt=T[0])!=null?mt:0),f=(Y=T[1])!=null?Y:0}const d=si().domain([c,f]).nice().ticks(5),p=(_=t.yAxis)==null?void 0:_.numberFormatCode;let m=0;for(const S of d){let T=_i("~s")(S);if(p)try{T=Ji.format(p,+S)}catch(C){}const U=n.measureText(T).width;U>m&&(m=U)}const g=t.yAxis,y=Zi(n,g==null?void 0:g.title,g==null?void 0:g.titleTextStyle,h.fontSize,-90),b=m>0?m+Oo:0,w=y?Do+y.width:0,x=e.width*r,M=Math.min(x,b+w),v=Qt(t.xAxis,i),N=ma(t.xAxis)*Math.PI/180;n.font="".concat(v.fontSize,"px ").concat(St);let z=0;for(const S of a){const T=n.measureText(S).width;T>z&&(z=T)}const P=_r(z,v.fontSize,N),E=t.xAxis,I=!!(E!=null&&E.deleted)?0:v.fontSize,L=z>0?P.height:I,q=L>0?L+Oo:0,J=Zi(n,E==null?void 0:E.title,E==null?void 0:E.titleTextStyle,v.fontSize,0),V=e.height*o,R=Math.min(V,q+(J?Do+J.height:0));return{plotDims:{x:e.x+M,y:e.y,width:Math.max(0,e.width-M),height:Math.max(0,e.height-R)},reservedLeft:M,reservedBottom:R}}function Mu(n,t,e=.1){var l;const i=n.dataLabels;if(!i||!i.showValue)return{reservedTop:0};if(i.position!==Ko.DATA_LABEL_POSITION_OUT_END)return{reservedTop:0};const a=((l=i.textStyle)!=null&&l.fontSize?i.textStyle.fontSize/100*(96/72):ji)+12,h=t.height*e;return{reservedTop:Math.min(h,a)}}const wu=36,ss=24,_u=2,Pe=4,er=.5,Wa="700 12px ".concat(St),dr=14,Tu=4;function Su(n,t,e,i){var a,h,l;if(t.leaves.length===0)return;const s=(h=(a=i.chart.series[0])==null?void 0:a.valuesFormatCode)!=null?h:void 0;n.save(),n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip();const r=(l=i.chart.treemapOptions)==null?void 0:l.parentLabelLayout;let o;r===ts.PARENT_LABEL_LAYOUT_OVERLAPPING&&(o=zu(n,t.parents,t.leaves)),Au(n,t.leaves,s,o==null?void 0:o.byLeafKey),Iu(n,t.parents,r,o),n.restore()}function Au(n,t,e,i){for(const s of t){if(s.width<=0||s.height<=0)continue;Eu(n,s);const r=i==null?void 0:i.get(Ya(s)),o=r?{verticalAlign:"bottom",reservedTop:r.reservedTop}:void 0;vu(n,s,e,o)}}function Eu(n,t){n.save(),n.beginPath(),Nu(n,t.x,t.y,t.width,t.height,_u),n.fillStyle=t.fill,n.fill(),n.lineWidth=.5,n.strokeStyle="rgba(255,255,255,0.6)",n.stroke(),n.restore()}function vu(n,t,e,i){var M,v;const s=t.width-Pe*2,r=Math.max(0,(M=i==null?void 0:i.reservedTop)!=null?M:0),o=t.y+Pe+r,a=t.y+t.height-Pe,h=a-o;if(s<wu||h<ss)return;const l=(v=ri(t.fill))!=null?v:ri("#000000"),c=Ga(l),f=c==="#ffffff"?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.7)",u=$a(n,t.name,s,h);if(u.length===0)return;const d=_n(t.value,e);n.save(),n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.clip(),n.textAlign="left",n.textBaseline="top",n.font="600 11px ".concat(St);const p=(i==null?void 0:i.verticalAlign)==="bottom";n.fillStyle=c;const m=14,g=Math.min(u.length,Math.floor(h/m)-1),y=u.slice(0,Math.max(1,g)),b=y.length*m+m<=h,w=y.length*m+(b?m:0);let x=p?a-w:o;for(const A of y)n.fillText(A,t.x+Pe,x,s),x+=m;b&&(n.font="500 10px ".concat(St),n.fillStyle=f,n.fillText(d,t.x+Pe,x,s)),n.restore()}function $a(n,t,e,i,s="600 11px ".concat(St)){n.save(),n.font=s;const r=t.split(/(?=[A-Z][a-z])|\s+/g).filter(Boolean),o=[];let a="";const h=14;let l=i;for(const c of r){const f=a?"".concat(a," ").concat(c):c;if(n.measureText(f).width<=e){a=f;continue}if(a&&(o.push(Ho(n,a,e)),l-=h,l<h)){a="";break}a=c}return a&&l>=h&&o.push(Ho(n,a,e)),n.restore(),o}function Ho(n,t,e){if(n.measureText(t).width<=e)return t;let i=t;for(;i.length>1&&n.measureText("".concat(i,"…")).width>e;)i=i.slice(0,-1);return"".concat(i,"…")}function Iu(n,t,e,i){if(!(!e||e===ts.PARENT_LABEL_LAYOUT_NONE))switch(e){case ts.PARENT_LABEL_LAYOUT_OVERLAPPING:Cu(n,i);break;case ts.PARENT_LABEL_LAYOUT_BANNER:ku(n,t);break}}function Cu(n,t){var e;if(!(!t||t.placements.length===0)){n.save(),n.textAlign="left",n.textBaseline="top";for(const i of t.placements){const{leaf:s,lines:r}=i;if(s.width<=0||s.height<=0||r.length===0)continue;const o=s.width-Pe*2;if(o<=0)continue;const a=(e=ri(s.fill))!=null?e:ri("#000000"),h=Ga(a);n.save(),n.beginPath(),n.rect(s.x,s.y,s.width,s.height),n.clip(),n.font=Wa,n.fillStyle=h;let l=s.y+Pe;for(const c of r)n.fillText(c,s.x+Pe,l,o),l+=dr;n.restore()}n.restore()}}function ku(n,t){const e=t.filter(i=>i.depth===1);if(e.length!==0){n.save(),n.textAlign="left",n.textBaseline="middle";for(const i of e){const s=Math.min(Math.max(i.height*.2,18),i.height);s<12||(n.fillStyle="rgba(0,0,0,0.3)",n.fillRect(i.x,i.y,i.width,s),n.font="700 12px ".concat(St),n.fillStyle="#ffffff",n.fillText(i.name,i.x+8,i.y+s/2,i.width-16))}n.restore()}}function Nu(n,t,e,i,s,r){const o=Math.min(r,i/2,s/2);n.moveTo(t+o,e),n.lineTo(t+i-o,e),n.quadraticCurveTo(t+i,e,t+i,e+o),n.lineTo(t+i,e+s-o),n.quadraticCurveTo(t+i,e+s,t+i-o,e+s),n.lineTo(t+o,e+s),n.quadraticCurveTo(t,e+s,t,e+s-o),n.lineTo(t,e+o),n.quadraticCurveTo(t,e,t+o,e),n.closePath()}function Ga(n){if(!n)return"#1a1a1a";const t=n.rgb(),e=t.r/255,i=t.g/255,s=t.b/255;return .2126*e+.7152*i+.0722*s>.55?"#1a1a1a":"#ffffff"}function zu(n,t,e){const i=[],s=new Map,r=t.filter(o=>o.depth===1);for(const o of r){const a=e.filter(y=>Pu(y,o));if(a.length===0)continue;const h=Ru(a);if(!h)continue;const l=h.width-Pe*2,c=h.height-Pe*2;if(l<=0||c<=ss)continue;const f=Math.max(dr,c-ss),u=$a(n,o.name,l,f,Wa);if(u.length===0)continue;const p=u.length*dr+Tu;if(c-p<ss)continue;const m={parent:o,leaf:h,lines:u,reservedTop:p},g=Ya(h);i.push(m),s.set(g,m)}return{placements:i,byLeafKey:s}}function Ya(n){return n.path.join("\0")||n.name}function Pu(n,t){if(n.path.length<t.path.length)return!1;for(let e=0;e<t.path.length;e+=1)if(n.path[e]!==t.path[e])return!1;return!0}function Ru(n){if(n.length===0)return;let t=n[0];for(let e=1;e<n.length;e+=1){const i=n[e];if(i.y<t.y-er){t=i;continue}Math.abs(i.y-t.y)<=er&&i.x<t.x-er&&(t=i)}return t}const Fu="\0";function Lu(n,t,e){const i=Bu(n),s=Math.max(0,Math.min(t.width,t.height)/2);if(i.length===0||s===0)return{arcs:[],maxDepth:0,radius:s};const r=Du(i),o=Ua(r),a=ys(o).sum(d=>typeof d.value=="number"&&d.value>0?d.value:0).sort((d,p)=>{var m,g;return((m=p.value)!=null?m:0)-((g=d.value)!=null?g:0)}),l=Cl().size([2*Math.PI,s])(a),c=Hu(e,i),f=l.descendants().filter(d=>{var p;return d.depth>0&&((p=d.value)!=null?p:0)>0&&Number.isFinite(d.x0)&&Number.isFinite(d.x1)&&d.x1>d.x0}).map(d=>{var y;const p=d.data.path,m=p[0],g=c(m);return{name:d.data.name,path:p,value:(y=d.value)!=null?y:0,depth:d.depth,startAngle:d.x0,endAngle:d.x1,innerRadius:Math.max(0,d.y0),outerRadius:Math.max(0,d.y1),fill:g}}),u=f.reduce((d,p)=>Math.max(d,p.depth),0);return{arcs:f,maxDepth:u,radius:s}}function Bu(n){var e,i,s,r;const t=new Map;for(const o of n.series){const a=(e=o.values)!=null?e:[],h=Ou(o.categoryPaths,a.length),l=(i=o.categories)!=null&&i.length?o.categories:n.categories;for(let c=0;c<a.length;c+=1){const f=a[c];if(typeof f!="number"||!Number.isFinite(f)||f<=0)continue;const u=(s=h[c])==null?void 0:s.levels;let d=(r=u==null?void 0:u.filter(y=>typeof y=="string"&&y.length>0))!=null?r:void 0;if(!d||d.length===0){const y=l==null?void 0:l[c];typeof y=="string"&&y.length>0&&(d=[y])}if(!d||d.length===0)continue;const p=[...d].reverse(),m=p.join(Fu),g=t.get(m);g?g.value+=f:t.set(m,{path:p,value:f})}}return Array.from(t.values())}function Ou(n,t){if(!n||n.length===0)return new Array(t).fill(void 0);if(n.length>=t)return n;const e=n.slice();for(;e.length<t;)e.push({levels:[]});return e}function Du(n){const t={name:"root",path:[],children:new Map};for(const e of n){let i=t;e.path.forEach((s,r)=>{var a;let o=i.children.get(s);o||(o={name:s,path:[...i.path,s],children:new Map},i.children.set(s,o)),i=o,r===e.path.length-1&&(i.value=((a=i.value)!=null?a:0)+e.value)})}return t}function Ua(n){var e;const t=Array.from(n.children.values()).map(Ua);return t.length===0?{name:n.name,path:n.path,value:(e=n.value)!=null?e:0}:{name:n.name,path:n.path,children:t}}function Hu(n,t){const e=new Set;for(const h of t){const l=h.path[0];l&&l.length>0&&e.add(l)}const i=Array.from(e.values());if(i.length===0)return()=>{var h;return(h=ye[0])!=null?h:"#999999"};const s=["accent1","accent2","accent3","accent4","accent5","accent6"],r=h=>{var f,u;const l=s[h%s.length],c=n.colorMap[l!=null?l:""];return c||((u=(f=ye[h%ye.length])!=null?f:ye[0])!=null?u:"#999999")},o=i.map((h,l)=>r(l)),a=ta().domain(i).range(o);return h=>{var c;if(!h)return(c=ye[0])!=null?c:"#999999";if(e.has(h))return a(h);const l=a.domain().length;return r(l)}}function Wu(n,t,e,i){var l;if(t.arcs.length===0||t.radius===0)return;const s=(l=i.padAngle)!=null?l:.005,r=t.radius,o=e.x+e.width/2,a=e.y+e.height/2,h=na().startAngle(c=>c.startAngle).endAngle(c=>c.endAngle).padAngle(c=>Math.min((c.endAngle-c.startAngle)/2*.25,s)).padRadius(r*.5).innerRadius(c=>c.innerRadius).outerRadius(c=>Math.max(c.innerRadius,c.outerRadius-1)).context(n);n.save(),n.translate(o,a);for(const c of t.arcs)n.beginPath(),h(c),n.fillStyle=c.fill,n.fill();Vu(n,t.arcs,h,i.valueFormatCode),n.restore()}const $u=28,Gu=14,Yu=48,Uu=24,Wo="600 11px ".concat(St),$o="500 10px ".concat(St),Go=14;function Vu(n,t,e,i){for(const s of t){if(!s.name)continue;const r=s.endAngle-s.startAngle;if(!Number.isFinite(r)||r<=0)continue;const o=Math.max(0,s.outerRadius-s.innerRadius);if(o<Gu)continue;const a=s.innerRadius+o/2,h=r*a;if(h<$u||Yo(n,Wo,s.name)>h-6)continue;let c=s.value>0&&o>=Uu&&h>=Yu,f="";c&&(f=_n(s.value,i),Yo(n,$o,f)>h-6&&(c=!1));const[u,d]=e.centroid(s),{primary:p,secondary:m}=Xu(s.fill);n.save(),n.textAlign="center",n.textBaseline="middle",n.font=Wo,n.fillStyle=p;const g=c?d-Go/2:d;if(n.fillText(s.name,u,g),c){n.font=$o,n.fillStyle=m;const y=d+Go/2;n.fillText(f,u,y)}n.restore()}}function Yo(n,t,e){n.save(),n.font=t;const i=n.measureText(e).width;return n.restore(),i}function Xu(n){const t=ri(n);if(!t)return{primary:"#1a1a1a",secondary:"rgba(0,0,0,0.7)"};const e=t.rgb(),i=e.r/255,s=e.g/255,r=e.b/255;return .2126*i+.7152*s+.0722*r>.55?{primary:"#1a1a1a",secondary:"rgba(0,0,0,0.6)"}:{primary:"#ffffff",secondary:"rgba(255,255,255,0.8)"}}function ir([n,t]){if(!Number.isFinite(n)||!Number.isFinite(t))return[0,1];if(n===t){if(n===0)return[-1,1];const e=Math.abs(n)*.1||1;return[n-e,t+e]}return[n,t]}function nr(n,t,e){var m,g,y,b,w,x;const i=(m=n.xAxis)!=null?m:n.yAxis,s=(g=n.yAxis)!=null?g:n.xAxis,r=e.extents.size,o=[(y=i==null?void 0:i.min)!=null?y:e.extents.x[0],(b=i==null?void 0:i.max)!=null?b:e.extents.x[1]],a=[(w=s==null?void 0:s.min)!=null?w:e.extents.y[0],(x=s==null?void 0:s.max)!=null?x:e.extents.y[1]],h=ir(o),l=ir(a),c=[t.x,t.x+t.width],f=[t.y+t.height,t.y];(i==null?void 0:i.orientation)===Rr.AXIS_ORIENTATION_MAX_MIN&&c.reverse(),(s==null?void 0:s.orientation)===Rr.AXIS_ORIENTATION_MAX_MIN&&f.reverse();const u=si().domain(h).range(c).nice(),d=si().domain(l).range(f).nice();let p;if(r){const M=Math.max(0,r[0]),v=Math.max(M,r[1]),[A,N]=[t.width,t.height],z=Math.max(4,Math.min(A,N)/12),P=Math.min(4,z*.5);p=dh().domain(ir([M,v])).range([P,z])}return{x:u,y:d,r:p}}const Uo=6,Vo=8;function Xo(n,t){if(!Number.isFinite(n))return"";if(t)try{return Ji.format(t,n)}catch(e){}return _i("~s")(n)}function qo(n,t,e,i,s){var B,I,L,q,J,V,R,D,H,Z,X,it,ct,nt,rt,mt;const r=(B=t.xAxis)!=null?B:t.yAxis,o=(I=t.yAxis)!=null?I:t.xAxis,a=Qt(r,s),h=Qt(o,s),l=r!=null?r:{},c=o!=null?o:{},f=i.y+i.height,u=i.x;n.save(),n.lineWidth=1,(q=(L=l.line)==null?void 0:L.fill)!=null&&q.color&&(n.strokeStyle=(J=a.lineColor)!=null?J:Zt,n.beginPath(),n.moveTo(i.x,f),n.lineTo(i.x+i.width,f),n.stroke()),(R=(V=c.line)==null?void 0:V.fill)!=null&&R.color&&(n.strokeStyle=(D=h.lineColor)!=null?D:Zt,n.beginPath(),n.moveTo(u,i.y),n.lineTo(u,i.y+i.height),n.stroke());const d=Math.max(2,Math.floor(i.width/80)),p=e.x.ticks(d),m=l.majorTickMark&&l.majorTickMark!=="TICK_MARK_NONE",g=!!((Z=(H=l.majorGridlines)==null?void 0:H.fill)!=null&&Z.color),y=p.length>0?a.fontSize+Uo:0;n.font="".concat(a.fontSize,"px ").concat(St),n.textAlign="center",n.textBaseline="top",n.fillStyle=a.textColor;const b=(X=a.gridLineColor)!=null?X:a.lineColor;p.forEach(Y=>{const _=e.x(Y);if(!Number.isFinite(_))return;g&&(n.strokeStyle=b,n.beginPath(),n.moveTo(_,i.y),n.lineTo(_,i.y+i.height),n.stroke()),m&&(n.strokeStyle=a.lineColor,n.beginPath(),n.moveTo(_,f),n.lineTo(_,f+4),n.stroke());const S=Xo(Y,r==null?void 0:r.numberFormatCode);n.fillText(S,_,f+6)});const w=Math.max(2,Math.floor(i.height/60)),x=e.y.ticks(w),M=c.majorTickMark&&c.majorTickMark!=="TICK_MARK_NONE",v=!!((ct=(it=c.majorGridlines)==null?void 0:it.fill)!=null&&ct.color);n.font="".concat(h.fontSize,"px ").concat(St),n.textAlign="right",n.textBaseline="middle",n.fillStyle=h.textColor;const A=(nt=h.gridLineColor)!=null?nt:h.lineColor;let N=0;x.forEach(Y=>{const _=e.y(Y);if(!Number.isFinite(_))return;v&&(n.strokeStyle=A,n.beginPath(),n.moveTo(i.x,_),n.lineTo(i.x+i.width,_),n.stroke()),M&&(n.strokeStyle=h.lineColor,n.beginPath(),n.moveTo(u-4,_),n.lineTo(u,_),n.stroke());const S=Xo(Y,o==null?void 0:o.numberFormatCode);n.fillText(S,u-6,_);const T=n.measureText(S).width;T>N&&(N=T)});const z=N>0?N+Uo:0,P=Zi(n,l==null?void 0:l.title,l==null?void 0:l.titleTextStyle,a.fontSize,0);if(P){const Y=l==null?void 0:l.titleTextStyle,_=(rt=Y==null?void 0:Y.fill)!=null&&rt.color?zt(Y.fill.color,s):a.textColor,S=y+Vo+P.height/2,T=f+S;n.save(),n.fillStyle=_!=null?_:Zt,n.font="".concat(P.isBold?"bold ":"").concat(P.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(i.x+i.width/2,T),n.rotate(P.rotationRad),n.fillText(P.text,0,0),n.restore()}const E=Zi(n,c==null?void 0:c.title,c==null?void 0:c.titleTextStyle,h.fontSize,-90);if(E){const Y=c==null?void 0:c.titleTextStyle,_=(mt=Y==null?void 0:Y.fill)!=null&&mt.color?zt(Y.fill.color,s):h.textColor,S=i.x-z-Vo-E.width/2,T=i.y+i.height/2;n.save(),n.fillStyle=_!=null?_:Zt,n.font="".concat(E.isBold?"bold ":"").concat(E.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(S,T),n.rotate(E.rotationRad),n.fillText(E.text,0,0),n.restore()}n.restore()}function wn(n){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const t=n.trim();if(t.length===0)return;const e=Number(t);if(Number.isFinite(e))return e}}function qu(n,t,e){var o;const i=[],s=(o=t.xValues)!=null?o:[],r=t.categories.length>0?t.categories:n.categories.length>0?n.categories:[];for(let a=0;a<e;a++){if(a<s.length){i.push(wn(s[a]));continue}if(a<r.length){const h=wn(r[a]);if(h!==void 0){i.push(h);continue}}i.push(a)}return i}function Va(n,t={}){var p,m,g,y,b,w,x;const e=(p=t.hiddenSeriesIndices)!=null?p:new Set,i=[],s=[],r=[],o=[];n.series.forEach((M,v)=>{var B,I;if(e.has(v))return;const A=(B=M.values)!=null?B:[],N=A.length,z=qu(n,M,N),P=(I=M.bubbleSizes)!=null?I:[],E=[];for(let L=0;L<N;L++){const q=A[L],J=z[L],V=wn(q),R=wn(J);if(R===void 0||V===void 0)continue;const D={idx:L,x:R,y:V};if(t.includeBubbleSize){const H=P[L],Z=wn(H);Z!==void 0&&(D.size=Math.max(0,Z),o.push(D.size))}E.push(D),s.push(R),r.push(V)}i.push({seriesIndex:v,series:M,points:E})});const a=ke(s),h=ke(r),l=Number.isFinite((m=a[0])!=null?m:NaN)?a[0]:0,c=Number.isFinite((g=a[1])!=null?g:NaN)?a[1]:1,f=Number.isFinite((y=h[0])!=null?y:NaN)?h[0]:0,u=Number.isFinite((b=h[1])!=null?b:NaN)?h[1]:1;let d;if(t.includeBubbleSize&&o.length>0){const M=ke(o),v=Number.isFinite((w=M[0])!=null?w:NaN)?Math.max(0,M[0]):0,A=Number.isFinite((x=M[1])!=null?x:NaN)?Math.max(v,M[1]):v||1;d=[v,A]}return{series:i,extents:{x:[l,c],y:[f,u],size:d}}}function Xa(n,t){return Va(n,{hiddenSeriesIndices:t})}function Zu(n){return n===void 0?!0:n===Ui.SCATTER_STYLE_MARKER||n===Ui.SCATTER_STYLE_LINE_MARKER||n===Ui.SCATTER_STYLE_SMOOTH_MARKER}function ju(n){return n===void 0?!0:n!==Ui.SCATTER_STYLE_MARKER}function Ju(n){return n===Ui.SCATTER_STYLE_SMOOTH||n===Ui.SCATTER_STYLE_SMOOTH_MARKER}function Ku(n,t,e,i,s,r,o){var d;const a=o!=null?o:Xa(t,r),h=(d=t.scatterOptions)==null?void 0:d.style,l=ju(h),c=Zu(h),u=Ju(h)?ph:gh;a.series.forEach(({series:p,seriesIndex:m,points:g})=>{var N,z;if(g.length===0)return;const y=Me(p,m,i),b=y!=null?y:n.strokeStyle;if(l){n.save(),n.strokeStyle=b,n.lineWidth=2;const P=mh().defined(E=>Number.isFinite(E.x)&&Number.isFinite(E.y)).x(E=>e.x(E.x)).y(E=>e.y(E.y)).curve(u).context(n);n.beginPath(),P(g),n.stroke(),n.restore()}if(!c)return;const w=(N=p.marker)==null?void 0:N.symbol;if(!(w===void 0||w===xi.MARKER_SYMBOL_UNSPECIFIED||w!==xi.MARKER_SYMBOL_NONE))return;const M=(z=p.marker)==null?void 0:z.size,v=M!==void 0&&Number.isFinite(M)?M*96/72:6,A=Math.max(v/2-1,2);g.forEach(P=>{var V,R;const E=e.x(P.x),B=e.y(P.y);if(!Number.isFinite(E)||!Number.isFinite(B))return;const I=_e(p,P.idx)?void 0:fe(p,P.idx,m,i),L=we(p,P.idx,i);n.save(),n.beginPath(),n.arc(E,B,A,0,Math.PI*2),I?(n.fillStyle=I,n.fill()):(n.fillStyle=b,n.fill());const q=(V=L.color)!=null?V:b,J=L.widthPx!==void 0?L.widthPx:Math.max(1,A/3);n.lineWidth=J,n.strokeStyle=q,n.stroke(),n.restore(),s&&s.push({kind:"scatter-point",x:E-A,y:B-A,width:A*2,height:A*2,seriesName:p.name,category:String(P.x),value:P.y,color:(R=I!=null?I:y)!=null?R:b,anchorX:E,anchorY:B})})})}function Qu(n,t){return Va(n,{hiddenSeriesIndices:t,includeBubbleSize:!0})}function tf(n,t,e,i,s,r){var l;const o=e.r,a=6,h=((l=t.bubbleOptions)==null?void 0:l.scale)!==void 0&&Number.isFinite(t.bubbleOptions.scale)?t.bubbleOptions.scale/100:1;i.series.forEach(({series:c,seriesIndex:f,points:u})=>{const d=Me(c,f,s),p=d!=null?d:n.fillStyle;u.forEach(m=>{var N,z;const g=e.x(m.x),y=e.y(m.y);if(!Number.isFinite(g)||!Number.isFinite(y))return;const b=m.size!==void 0&&o?o(m.size):a,w=Math.max(2,b*Math.max(.1,h)),x=_e(c,m.idx)?void 0:(N=fe(c,m.idx,f,s))!=null?N:p,M=we(c,m.idx,s),v=(z=M.color)!=null?z:p,A=M.widthPx!==void 0?M.widthPx:Math.max(1,w/4);n.save(),n.beginPath(),n.arc(g,y,w,0,Math.PI*2),n.fillStyle=x!=null?x:p,n.fill(),n.lineWidth=A,n.strokeStyle=v,n.stroke(),n.restore(),r&&r.push({kind:"bubble-point",x:g-w,y:y-w,width:w*2,height:w*2,seriesName:c.name,category:String(m.x),value:m.y,color:x!=null?x:p,anchorX:g,anchorY:y})})})}const ef=_i("~f");function Zo(n){return Number.isFinite(n)?ef(n):""}function qa(n,t,e,i,s){const r=s!=null?s:es.INTERVAL_CLOSED_RIGHT;let o="[",a=")";switch(r){case es.INTERVAL_CLOSED_RIGHT:o=e===0?"[":"(",a="]";break;case es.INTERVAL_CLOSED_LEFT:o="[",a=e===i-1?"]":")";break;default:o=e===0?"[":"(",a=e===i-1?"]":")";break}return"".concat(o).concat(Zo(n),", ").concat(Zo(t)).concat(a)}function wi(n){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const t=n.trim();if(t.length===0)return;const e=Number(t);if(Number.isFinite(e))return e}}function nf(n){const t=/(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)[^\d\-+eE]+(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/,e=n.match(t);if(e){const s=wi(e[1]),r=wi(e[2]);if(s!==void 0&&r!==void 0)return s<=r?[s,r]:[r,s]}const i=wi(n);if(i!==void 0)return[i,i]}function sf(n){const t=n;return t==null?void 0:t.histogramOptions}function rf(n,t,e){var c,f,u,d,p,m;const i=[wi((c=e.xAxis)==null?void 0:c.min),wi((f=e.xAxis)==null?void 0:f.max)],s=ke(n),r=(d=i[0])!=null?d:Number.isFinite((u=s[0])!=null?u:NaN)?s[0]:0,o=(m=i[1])!=null?m:Number.isFinite((p=s[1])!=null?p:NaN)?s[1]:r+1;if(r===o)return[r-.5,o+.5];if(!((t==null?void 0:t.intervalClosed)===es.INTERVAL_CLOSED_RIGHT))return[r,o];const l=Math.max(Math.abs(o-r)*1e-9,1e-9);return[r,o+l]}function of(n,t,e){var p;const i=n.series[t];if(!i)return;const s=i.categories.length>0?i.categories:n.categories.length>0?n.categories:[],r=(p=i.values)!=null?p:[];if(r.length===0||s.length===0)return;const o=[],a=[],h=[],l=e!=null&&e.binWidth&&Number.isFinite(e.binWidth)?Math.abs(e.binWidth):void 0;if(s.forEach((m,g)=>{const y=wi(r[g]);if(!Number.isFinite(y)||y<=0)return;const b=y,w=m?nf(m):void 0;let x=0,M=0;if(w){if(x=w[0],M=w[1],x===M){const v=l!=null?l:1;M=x+v}}else{const v=h.length>0?h[h.length-1]:0,A=l!=null?l:1;x=v,M=v+A}a.push(x),h.push(M),o.push({x0:x,x1:M,count:b,values:[],label:m})}),o.length===0)return;const c=Math.min(...a),f=Math.max(...h),u=o.reduce((m,g)=>m+g.count,0),d=o.reduce((m,g)=>Math.max(m,g.count),0);return o.forEach((m,g)=>{var y;(!m.label||m.label.trim().length===0)&&(m.label=qa(m.x0,m.x1,g,o.length,(y=e==null?void 0:e.intervalClosed)!=null?y:void 0))}),{bins:o,extents:{x:[c,f],y:[0,d]},totalCount:u,aggregated:!0,seriesIndex:t}}function af(n,t={}){var x,M;const e=(x=t.hiddenSeriesIndices)!=null?x:new Set,i=n.series.findIndex((v,A)=>!e.has(A));if(i===-1)return{bins:[],extents:{x:[0,1],y:[0,1]},totalCount:0,aggregated:!1,seriesIndex:-1};const s=sf(n);if(s!=null&&s.aggregated){const v=of(n,i,s);if(v)return v}const r=n.series[i],a=((M=r==null?void 0:r.values)!=null?M:[]).map(v=>wi(v)).filter(v=>v!==void 0);if(a.length===0)return{bins:[],extents:{x:[0,1],y:[0,1]},totalCount:0,aggregated:!1,seriesIndex:i};const[h,l]=rf(a,s,n),c=Math.max(l-h,1),f=Math.max(1,Math.ceil(Math.sqrt(a.length))),u=s!=null&&s.binWidth&&Number.isFinite(s.binWidth)?Math.abs(s.binWidth):void 0,d=u&&u>0?Math.max(1,Math.floor(c/u)):f,m=Rh().domain([h,l]).thresholds(d)(a),g=m.map((v,A)=>{var P,E,B;const N=(P=v.x0)!=null?P:h,z=(E=v.x1)!=null?E:l;return{x0:N,x1:z,count:v.length,values:v.slice(),label:qa(N,z,A,m.length,(B=s==null?void 0:s.intervalClosed)!=null?B:void 0)}}),y=a.length,b=g.reduce((v,A)=>Math.max(v,A.count),0),w=l>h?l:h+1;return{bins:g,extents:{x:[h,w],y:[0,b]},totalCount:y,aggregated:!1,seriesIndex:i}}function hf(n,t,e,i,s,r={}){const o=i.seriesIndex;if(o<0)return;const a=t.series[o];if(!a)return;const{chartHoverTargets:h}=r,{x:l,y:c}=e,f=c(0),u=1;i.bins.forEach((d,p)=>{var L,q,J,V;if(!Number.isFinite(d.count)||d.count<=0)return;const m=l(d.x0),g=l(d.x1);if(!Number.isFinite(m)||!Number.isFinite(g))return;const y=Math.min(m,g),b=Math.max(m,g),w=Math.max(0,b-y);if(w<=0)return;const x=c(d.count);if(!Number.isFinite(x)||!Number.isFinite(f))return;const M=Math.max(0,f-x);if(M<=0)return;const v=_e(a,p),A=fe(a,p,o,s);!v&&A&&(n.fillStyle=A);const N=we(a,p,s),z=N.color,P=(L=N.widthPx)!=null?L:1;z&&P>0?(n.strokeStyle=z,n.lineWidth=P):n.lineWidth=0;const E=w>u,B=E?y+u/2:y,I=E?Math.max(0,w-u):w;n.beginPath(),n.rect(B,x,I,M),!v&&A&&n.fill(),n.lineWidth>0&&z&&n.stroke(),h&&h.push({kind:"bar-vertical",x:B,y:x,width:I,height:M,seriesName:(q=a.name)!=null?q:void 0,category:(J=d.label)!=null?J:void 0,value:d.count,color:A!=null?A:void 0,anchorX:B+I/2,anchorY:x,elementId:(V=t.id)!=null?V:void 0,seriesIndex:o})})}const lf="#c7c7c7",cf=1,uf={increase:"#5b9bd5",decrease:"#ed7d31",total:"#a5a5a5"};function Za(n,t){var s;const e=t==="increase"?"accent1":t==="decrease"?"accent2":"accent3",i=(s=n.colorMap)==null?void 0:s[e];return i&&i.length>0?i:uf[t]}function ff(n,t){if(!(!n.points||n.points.length===0))for(let e=0;e<n.points.length;e++){const i=n.points[e],s=i==null?void 0:i.idx;if((typeof s=="number"?s:e)===t)return i}}function df(n,t,e,i,s,r){const o=r(i);n.save(),n.strokeStyle=lf,n.lineWidth=cf,n.beginPath(),n.moveTo(t+s,o),n.lineTo(e,o),n.stroke(),n.restore()}function mf(n,t,e,i,s,r,o,a){var N;const h=s(t.start),l=s(t.end),c=Math.min(h,l),f=Math.max(h,l),u=Math.abs(l-h);if(u===0||Number.isNaN(c)||Number.isNaN(f))return null;const d=r.series[o];if(!d)return null;const p=ff(d,t.index);let m=!1,g;p!=null&&p.fill&&(p.fill.color?g=zt(p.fill.color,a):m=!0),!g&&!m&&((N=d.fill)!=null&&N.color)&&(g=zt(d.fill.color,a)),!g&&!m&&(g=Za(a,t.kind));const{color:y,widthPx:b}=we(d,t.index,a),w=t.end>=t.start,x=Math.max(0,Math.min(wr,i/2,u)),M=w||t.kind==="total",v=M?x:0,A=M?0:x;return n.beginPath(),w?(n.moveTo(e,f),n.lineTo(e,c+v),n.arcTo(e,c,e+v,c,v),n.lineTo(e+i-v,c),n.arcTo(e+i,c,e+i,c+v,v),n.lineTo(e+i,f),n.closePath()):(n.moveTo(e,c),n.lineTo(e,f-A),n.arcTo(e,f,e+A,f,A),n.lineTo(e+i-A,f),n.arcTo(e+i,f,e+i,f-A,A),n.lineTo(e+i,c),n.closePath()),g&&(n.fillStyle=g,n.fill()),y&&(n.strokeStyle=y,n.lineWidth=b!=null?b:1,n.stroke()),{top:c,bottom:f}}function pf(n,t,e,i,s,r){var m,g,y,b,w;const o=t.series[e];if(!o)return;const a=va(t,o,i.index,i.labelValue);if(!a.show||s.width<=0)return;const h=(m=a.textStyle)!=null&&m.fontSize?Ge(a.textStyle.fontSize):ji,l=(y=(g=a.textStyle)==null?void 0:g.fill)!=null&&y.color?zt(a.textStyle.fill.color,r):void 0;n.save(),n.fillStyle=l!=null?l:Zt;const c=(w=(b=a.textStyle)==null?void 0:b.bold)!=null?w:!0;n.font="".concat(c?"bold ":"").concat(h,"px ").concat(St),n.textAlign="center",n.textBaseline="middle";const f=i.end>=i.start,u=s.x+s.width/2,d=s.bottom-s.top;let p=f?s.top-12:s.bottom+12;switch(a.position){case 2:p=f?s.top+12:s.bottom-12;break;case 3:p=s.top+d/2;break;default:p=f?s.top-12:s.bottom+12;break}n.fillText(a.text,u,p),n.restore()}function gf(n,t,e,i,s,r={}){if(!Sn(e.x)||i.seriesIndex===-1)return;const o=e.x,a=e.y,h=o.bandwidth(),l=i.seriesIndex,c=t.series[l];if(!c)return;let f;i.segments.forEach(u=>{const d=o(u.category);if(d===void 0)return;u.kind!=="total"&&f&&df(n,f.x,d,u.cumulativeBefore,h,a);const p=mf(n,u,d,h,a,t,l,s);p&&(pf(n,t,l,u,Te(pe({},p),{x:d,width:h}),s),r.chartHoverTargets&&r.chartHoverTargets.push({kind:"bar-vertical",x:d,y:p.top,width:h,height:p.bottom-p.top,category:u.category,seriesName:c.name,value:u.value,color:Za(s,u.kind),anchorX:d,anchorY:p.top}),f={x:d,cumulativeAfter:u.cumulativeAfter})})}function yf(n,t){if(!Number.isFinite(n))return"";if(t)try{return Ji.format(t,n)}catch(e){}return _i("~s")(n)}function xf(n,t,e,i,s,r){var x,M,v,A,N,z,P,E,B,I,L,q,J,V,R;const o=(x=t.xAxis)!=null?x:{},a=(M=t.yAxis)!=null?M:{},h=Qt(t.xAxis,r),l=Qt(t.yAxis,r),c=i.y+i.height,f=i.x;n.save(),n.lineWidth=1,(A=(v=o.line)==null?void 0:v.fill)!=null&&A.color&&(n.strokeStyle=(N=h.lineColor)!=null?N:Zt,n.beginPath(),n.moveTo(i.x,c),n.lineTo(i.x+i.width,c),n.stroke()),(P=(z=a.line)==null?void 0:z.fill)!=null&&P.color&&(n.strokeStyle=(E=l.lineColor)!=null?E:Zt,n.beginPath(),n.moveTo(f,i.y),n.lineTo(f,i.y+i.height),n.stroke());const u=Math.max(2,Math.floor(i.height/60)),d=e.y.ticks(u),p=a.majorTickMark&&a.majorTickMark!=="TICK_MARK_NONE",m=!!((I=(B=a.majorGridlines)==null?void 0:B.fill)!=null&&I.color),g=(L=l.gridLineColor)!=null?L:l.lineColor;if(n.font="".concat(l.fontSize,"px ").concat(St),n.fillStyle=l.textColor,n.textAlign="right",n.textBaseline="middle",d.forEach(D=>{var X,it;const H=e.y(D);if(!Number.isFinite(H))return;m&&(n.save(),n.strokeStyle=g!=null?g:Zt,n.beginPath(),n.moveTo(i.x,H),n.lineTo(i.x+i.width,H),n.stroke(),n.restore()),p&&(n.strokeStyle=(X=l.lineColor)!=null?X:Zt,n.beginPath(),n.moveTo(f-4,H),n.lineTo(f,H),n.stroke());const Z=yf(D,(it=t.yAxis)==null?void 0:it.numberFormatCode);n.fillText(Z,f-6,H)}),s.bins.length>0){n.font="".concat(h.fontSize,"px ").concat(St),n.fillStyle=h.textColor,n.textAlign="center",n.textBaseline="top";const D=h.fontSize*.2+4;s.bins.forEach(H=>{var nt,rt;const Z=e.x(H.x0),X=e.x(H.x1);if(!Number.isFinite(Z)||!Number.isFinite(X))return;const it=Z+(X-Z)/2,ct=(nt=H.label)!=null?nt:"";o.majorTickMark&&o.majorTickMark!=="TICK_MARK_NONE"&&(n.strokeStyle=(rt=h.lineColor)!=null?rt:Zt,n.beginPath(),n.moveTo(it,c),n.lineTo(it,c+D),n.stroke()),n.fillText(ct,it,c+D+2)})}const b=o==null?void 0:o.title,w=o==null?void 0:o.titleTextStyle;if(b&&b.trim().length>0){const D=!!(w!=null&&w.bold),H=w!=null&&w.fontSize?w.fontSize/100*(96/72):h.fontSize,Z=(q=w==null?void 0:w.fill)!=null&&q.color?zt(w.fill.color,r):(R=(V=(J=t.xAxis)==null?void 0:J.textStyle)==null?void 0:V.fill)!=null&&R.color?zt(t.xAxis.textStyle.fill.color,r):h.textColor;n.fillStyle=Z!=null?Z:h.textColor,n.font="".concat(D?"bold ":"").concat(H,"px ").concat(St),n.textAlign="center",n.textBaseline="top",n.fillText(b,i.x+i.width/2,c+h.fontSize+20)}n.restore()}function bf(n,t,e,i,s,r){if(e.seriesIndex===-1||e.segments.length===0)return;const o=t.series[e.seriesIndex];if(!o)return;n.save(),n.lineJoin="round",n.lineCap="round";const a=[];e.segments.forEach(h=>{const l=h.y1-h.y0;if(l<=0)return;const f=_e(o,h.index)?void 0:fe(o,h.index,e.seriesIndex,i),{color:u,widthPx:d}=we(o,h.index,i);n.beginPath(),n.moveTo(h.topLeftX,h.y0),n.lineTo(h.topRightX,h.y0),n.lineTo(h.bottomRightX,h.y1),n.lineTo(h.bottomLeftX,h.y1),n.closePath(),f&&(n.fillStyle=f,n.fill());const p=u!=null?u:f||"#ffffff",m=d!=null?d:u?1:0;if(m>0&&(n.strokeStyle=p,n.lineWidth=m,n.stroke()),a.push({text:h.category,centerY:h.y0+l/2}),s){const g=Math.max(h.topRightX-h.topLeftX,h.bottomRightX-h.bottomLeftX),y=Math.min(h.topLeftX,h.bottomLeftX),b=h.centerX,w=h.y0+l/2;s.push({kind:"bar-vertical",x:y,y:h.y0,width:g,height:l,category:h.category,seriesName:o.name,value:h.value,color:f!=null?f:u,anchorX:b,anchorY:w,seriesIndex:e.seriesIndex})}}),r&&a.length>0&&(n.save(),n.font=r.font,n.fillStyle=r.textColor,n.textAlign="right",n.textBaseline="middle",a.forEach(h=>{n.fillText(h.text,r.labelX,h.centerY)}),n.restore()),n.restore()}function Mf(n,t){var i,s;if(n.categories.length>0)return n.categories;const e=(s=(i=n.series[t])==null?void 0:i.categories)!=null?s:[];return e.length>0?e:[]}function wf(n,t,e){return Math.min(Math.max(n,t),e)}function jo(n,t,e){var v,A,N,z,P,E,B;const i=e!=null?e:new Set,s=n.series.findIndex((I,L)=>!i.has(L));if(s===-1)return{seriesIndex:-1,segments:[]};const r=n.series[s],o=Mf(n,s),a=(v=r==null?void 0:r.values)!=null?v:[],h=Math.max(o.length,a.length);if(h===0)return{seriesIndex:s,segments:[]};const l=[];for(let I=0;I<h;I++){const L=a[I],q=typeof L=="number"&&Number.isFinite(L)?Math.max(0,L):0;l.push(q)}const c=(A=lr(l))!=null?A:0;if(c<=0)return{seriesIndex:s,segments:[]};const f=(N=n.funnelOptions)==null?void 0:N.gapWidth,u=typeof f=="number"&&Number.isFinite(f)?wf(f,0,.8):.06,d=h+(h>1?(h-1)*u:0),p=Math.max(0,t.height),m=d>0?p/d:0,g=m*u,y=t.x+t.width/2;let b=t.y;const w=[];for(let I=0;I<h;I++){const L=(z=l[I])!=null?z:0,q=L/c,J=t.width*q,V=J,R=(B=(E=o[I])!=null?E:(P=r==null?void 0:r.categories)==null?void 0:P[I])!=null?B:"Step ".concat(I+1),D=b,H=D+m,Z=J/2,X=V/2;w.push({index:I,category:R,value:L,ratio:q,y0:D,y1:H,topWidth:J,bottomWidth:V,centerX:y,topLeftX:y-Z,topRightX:y+Z,bottomLeftX:y-X,bottomRightX:y+X}),b=H+g}const x=h*m+Math.max(0,h-1)*g,M=p-x;if(M>0&&w.length>0){const I=M/2;w.forEach(L=>{L.y0+=I,L.y1+=I})}return{seriesIndex:s,segments:w}}function _f(n){if(typeof n=="number"&&Number.isFinite(n))return n}function Tf(n){var t;return(t=n.boxWhiskerOptions)!=null&&t.quartileMethod?n.boxWhiskerOptions.quartileMethod:Qo.QUARTILE_METHOD_EXCLUSIVE}function Sf(n,t){var h;const e=n.length;if(e===0)return NaN;if(e===1)return(h=n[0])!=null?h:NaN;const i=(e+1)*t,s=Math.floor(i),r=i-s;if(s<=0)return n[0];if(s>=e)return n[e-1];const o=n[s-1],a=n[s];return o+r*(a-o)}function sr(n,t,e){var i;return n.length===0?NaN:e===Qo.QUARTILE_METHOD_INCLUSIVE?(i=yh(n,t))!=null?i:NaN:Sf(n,t)}function Af(n,t,e,i){const s=n==null?void 0:n[e];if(s&&s.length>0)return s;const r=t[e];return r&&r.length>0?r:i}function Ef(n,t={}){var f;if(n.type!==yt.CHART_TYPE_BOX_WHISKER)throw new Error("prepareBoxWhiskerData called for non box-whisker chart");const e=t.hiddenSeriesIndices,i=Tf(n),s=(f=n.categories)!=null?f:[],r=[],o=new Set,a=n.series.map((u,d)=>({series:u,seriesIndex:d})).filter(({seriesIndex:u})=>!(e!=null&&e.has(u))).map(({series:u,seriesIndex:d})=>{var y,b,w;const p=new Map,m=(b=(y=u.values)==null?void 0:y.length)!=null?b:0,g=u.name&&u.name.length>0?u.name:"Series ".concat(d+1);for(let x=0;x<m;x++){const M=_f((w=u.values)==null?void 0:w[x]);if(M===void 0)continue;const v=Af(u.categories,s,x,"".concat(g," ").concat(x+1));o.has(v)||(o.add(v),r.push(v));const A=p.get(v);A?A.push(M):p.set(v,[M])}return{seriesIndex:d,valuesByCategory:p}});r.length===0&&s.length>0&&s.forEach(u=>{o.has(u)||(o.add(u),r.push(u))});const h=[];let l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return r.forEach(u=>{const d=[];a.forEach(({seriesIndex:p,valuesByCategory:m})=>{var L;const g=m.get(u);if(!g||g.length===0)return;const y=g.slice().sort((q,J)=>q-J);if(y.length===0)return;const b=sr(y,.25,i),w=sr(y,.5,i),x=sr(y,.75,i),M=x-b,v=b-1.5*M,A=x+1.5*M,N=[],z=[];y.forEach(q=>{q<v||q>A?N.push(q):z.push(q)});const P=z.length>0?z[0]:y[0],E=z.length>0?z[z.length-1]:y[y.length-1],B=(L=Fh(y))!=null?L:void 0,I={seriesIndex:p,categoryKey:u,valuesSorted:y,q1:b,median:w,q3:x,whiskerLow:P,whiskerHigh:E,min:y[0],max:y[y.length-1],iqr:M,outliers:N,nonOutliers:z,mean:B};l=Math.min(l,I.min,I.whiskerLow,...I.outliers),c=Math.max(c,I.max,I.whiskerHigh,...I.outliers),d.push(I)}),h.push({key:u,series:d})}),Number.isFinite(l)||(l=0),Number.isFinite(c)||(c=1),l===c&&(l-=1,c+=1),{categories:r,seriesOrder:a.map(u=>u.seriesIndex),byCategory:h,extents:{min:l,max:c}}}function vf(n,t){const e=qi().domain(n.categories).range([t.x,t.x+t.width]).paddingInner(.3).paddingOuter(.2),i=Math.max(0,e.bandwidth()),s=qi().domain(n.seriesOrder).range([0,i]).paddingInner(.2).paddingOuter(.1),r=si().domain([n.extents.min,n.extents.max]).nice().range([t.y+t.height,t.y]);return{x:e,xSeries:s,y:r}}const If=2,Cf=.6,kf=3,Nf=2,zf=3;function rr(n,t,e,i,s,r,o){!Number.isFinite(t)||!Number.isFinite(e)||(n.beginPath(),n.arc(t,e,i,0,Math.PI*2),s&&(n.fillStyle=s,n.fill()),r&&o>0&&(n.strokeStyle=r,n.lineWidth=o,n.stroke()))}function Pf(n,t,e,i){var c,f,u;const s=n.series[t.seriesIndex];if(!s)return{strokeWidth:1,noFill:!1};const r=_e(s,e),o=(c=fe(s,e,t.seriesIndex,i))!=null?c:Me(s,t.seriesIndex,i),a=we(s,e,i),h=(f=a.color)!=null?f:o||Me(s,t.seriesIndex,i),l=(u=a.widthPx)!=null?u:1;return{fillColor:r?void 0:o,strokeColor:h!=null?h:void 0,strokeWidth:l>0?l:1,noFill:r}}function Rf(n,t,e,i,s,r={}){var d,p,m,g,y,b,w,x;const{chartHoverTargets:o}=r,a=(p=(d=t.boxWhiskerOptions)==null?void 0:d.showMeanMarker)!=null?p:!1,h=(g=(m=t.boxWhiskerOptions)==null?void 0:m.showMeanLine)!=null?g:!1,l=(b=(y=t.boxWhiskerOptions)==null?void 0:y.showOutliers)!=null?b:!0,c=(x=(w=t.boxWhiskerOptions)==null?void 0:w.showNonOutliers)!=null?x:!1,f=new Map,u=new Map;i.categories.forEach((M,v)=>{e.x(M)!==void 0&&u.set(M,v)}),i.byCategory.forEach(M=>{var P;const v=e.x(M.key);if(v===void 0)return;const A=(P=u.get(M.key))!=null?P:0,N=e.x.bandwidth(),z=e.xSeries.bandwidth();M.series.forEach(E=>{var _,S,T,U,C,tt,k,K,ht,$;const B=t.series[E.seriesIndex];if(!B)return;const I=e.xSeries(E.seriesIndex),L=z>0?z:Math.max(N*.5,Math.min(N,12)),q=I!==void 0?I:Math.max(0,(N-L)/2),J=v+q,V=J+L,R=J+L/2,D=e.y(E.q1),H=e.y(E.q3),Z=e.y(E.median),X=e.y(E.whiskerLow),it=e.y(E.whiskerHigh);if(!Number.isFinite(D)||!Number.isFinite(H)||!Number.isFinite(Z)||!Number.isFinite(X)||!Number.isFinite(it))return;const ct=Math.min(D,H),nt=Math.max(Math.abs(H-D),1),mt=Math.min(L*Cf,L)/2,Y=Pf(t,E,A,s);if(n.beginPath(),n.rect(J,ct,L,nt),Y.fillColor&&(n.fillStyle=Y.fillColor,n.fill()),Y.strokeColor&&(n.strokeStyle=Y.strokeColor,n.lineWidth=Y.strokeWidth,n.stroke()),Y.strokeColor&&(n.beginPath(),n.strokeStyle=Y.strokeColor,n.lineWidth=Math.max(If,Y.strokeWidth),n.moveTo(J,Z),n.lineTo(V,Z),n.stroke()),Y.strokeColor&&(n.beginPath(),n.strokeStyle=Y.strokeColor,n.lineWidth=Y.strokeWidth,n.moveTo(R,H),n.lineTo(R,it),n.moveTo(R-mt,it),n.lineTo(R+mt,it),n.moveTo(R,D),n.lineTo(R,X),n.moveTo(R-mt,X),n.lineTo(R+mt,X),n.stroke()),l&&E.outliers.forEach(et=>{var at,ft,Et,_t,ut;const st=e.y(et);Number.isFinite(st)&&(rr(n,R,st,kf,(at=Y.strokeColor)!=null?at:Y.fillColor,Y.strokeColor,Y.strokeWidth),o&&o.push({kind:"scatter-point",anchorX:R,anchorY:st,seriesName:(ft=B.name)!=null?ft:void 0,category:M.key,value:et,color:(_t=(Et=Y.fillColor)!=null?Et:Y.strokeColor)!=null?_t:void 0,elementId:(ut=t.id)!=null?ut:void 0,seriesIndex:E.seriesIndex}))}),c&&E.nonOutliers.forEach(et=>{var at;const st=e.y(et);Number.isFinite(st)&&rr(n,R,st,Nf,(at=Y.fillColor)!=null?at:Y.strokeColor,Y.strokeColor,Math.max(1,Y.strokeWidth/2))}),a&&E.mean!==void 0){const et=e.y(E.mean);Number.isFinite(et)&&(rr(n,R,et,zf,(_=Y.strokeColor)!=null?_:Y.fillColor,Y.strokeColor,Y.strokeWidth),o&&o.push({kind:"scatter-point",anchorX:R,anchorY:et,seriesName:(S=B.name)!=null?S:void 0,category:M.key,value:E.mean,color:(U=(T=Y.fillColor)!=null?T:Y.strokeColor)!=null?U:void 0,elementId:(C=t.id)!=null?C:void 0,seriesIndex:E.seriesIndex}),f.has(E.seriesIndex)||f.set(E.seriesIndex,[]),f.get(E.seriesIndex).push({x:R,y:et,categoryIndex:A,color:(tt=Y.strokeColor)!=null?tt:Y.fillColor}))}o&&o.push({kind:"bar-vertical",x:J,y:ct,width:L,height:nt,seriesName:(k=B.name)!=null?k:void 0,category:M.key,value:E.median,color:(ht=(K=Y.fillColor)!=null?K:Y.strokeColor)!=null?ht:void 0,anchorX:R,anchorY:Z,elementId:($=t.id)!=null?$:void 0,seriesIndex:E.seriesIndex})})}),h&&f.forEach((M,v)=>{var E,B,I;const A=M.filter(L=>Number.isFinite(L.x)&&Number.isFinite(L.y)).sort((L,q)=>L.categoryIndex-q.categoryIndex);if(A.length<2)return;const N=t.series[v],z=N?Me(N,v,s):void 0,P=(I=(B=(E=A[0])==null?void 0:E.color)!=null?B:z)!=null?I:"#444444";n.beginPath(),n.strokeStyle=P,n.lineWidth=1.5,n.lineJoin="round",A.forEach((L,q)=>{q===0?n.moveTo(L.x,L.y):n.lineTo(L.x,L.y)}),n.stroke()})}const Jo=0;function Zf(n,t,e,i,s,r,o,a,h,l,c){const f=qh(n,e,i),u=jl(n.chartReference,e);if(!u)return;const d=s!=null?s:$h(e.theme,Xh(e)),p=n.id&&n.id.length>0?n.id:"".concat(Math.round(f.x),":").concat(Math.round(f.y),":").concat(Math.round(f.width),":").concat(Math.round(f.height));ja(t,u,f,{themeMap:d,chartHoverTargets:r,hiddenSeriesIndices:o,elementId:p,mapCtx:a!=null?a:void 0,threeCtx:h!=null?h:void 0,on3DViewport:l,onMapViewport:c})}function jf(n,t,e,i={}){var r,o,a;const s=(r=i.themeMap)!=null?r:{colorMap:{},effectMap:{},lineStyleMap:{}};ja(n,t,e,Te(pe({},i),{themeMap:s,mapCtx:(o=i.mapCtx)!=null?o:void 0,threeCtx:(a=i.threeCtx)!=null?a:void 0}))}function ja(n,t,e,i){var N,z,P,E,B,I,L,q,J,V;n.save();const s=t.type===yt.CHART_TYPE_TREEMAP,r=t.type===yt.CHART_TYPE_SUNBURST,o=t.type===yt.CHART_TYPE_RADAR,a=t.type===yt.CHART_TYPE_BAR_3D,h=t.type===yt.CHART_TYPE_MAP,l=t.type===yt.CHART_TYPE_FUNNEL,c=t.type===yt.CHART_TYPE_BOX_WHISKER,f=(z=(N=t.barOptions)==null?void 0:N.direction)!=null?z:t.barDirection,u=(t.type===yt.CHART_TYPE_BAR||t.type===yt.CHART_TYPE_BAR_3D)&&f===sh.BAR_DIRECTION_BAR;if(i.excelDefaults){n.save(),n.fillStyle="#ffffff";const R=2,D=e.x,H=e.y,Z=e.width,X=e.height;n.beginPath(),n.moveTo(D+R,H),n.lineTo(D+Z-R,H),n.quadraticCurveTo(D+Z,H,D+Z,H+R),n.lineTo(D+Z,H+X-R),n.quadraticCurveTo(D+Z,H+X,D+Z-R,H+X),n.lineTo(D+R,H+X),n.quadraticCurveTo(D,H+X,D,H+X-R),n.lineTo(D,H+R),n.quadraticCurveTo(D,H,D+R,H),n.closePath(),n.fill(),n.strokeStyle="#d0d0d0",n.lineWidth=.5,n.stroke(),n.restore()}const d={x:e.x,y:e.y+Jo,width:e.width,height:Math.max(0,e.height-Jo)},p=xu(n,t,d,i.themeMap,.15);let m={x:d.x,y:d.y+p.reserved,width:d.width,height:Math.max(0,d.height-p.reserved)};m=Zl(m);let g,y=Dt.LEGEND_POSITION_RIGHT;if(!i.skipLegend&&t.hasLegend){const R=Xl(n,t,m,i.themeMap,{outerDims:e,maxSideFrac:.35,sidePaddingPx:6});m=R.plotDims,g=R.legendRect,y=(P=R.legendPosition)!=null?P:y}const b=!s&&!r&&!o&&!a&&!h&&!l,w=m,x=b?bu(n,t,m,i.themeMap):void 0;if(x&&(u?m={x:w.x,y:x.plotDims.y,width:w.width,height:Math.max(0,w.height-x.reservedBottom)}:m=x.plotDims),!s&&!r&&!h&&!l){const R=Mu(t,m,.1);R.reservedTop>0&&(m={x:m.x,y:m.y+R.reservedTop,width:m.width,height:Math.max(0,m.height-R.reservedTop)})}const M=i.hiddenSeriesIndices!==void 0?new Set(i.hiddenSeriesIndices):void 0;if(u){const R=t.categories.length>0?t.categories:(B=(E=t.series[0])==null?void 0:E.categories)!=null?B:[];m=il(n,m,R,t.yAxis,i.themeMap,{maxLeftFrac:.35,sidePaddingPx:8});const D=Jl(t,m);Kl(n,t,D,m,!0,i.themeMap),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),tc(n,t,D,i.themeMap,i.chartHoverTargets,M),n.restore();return}const v=!s&&!r&&!o&&!h&&!l&&!c?qr(t,m):void 0;if(t.title&&t.title.trim()){const R={x:e.x,y:d.y,width:e.width,height:p.reserved},D={type:mr.ELEMENT_TYPE_TEXT,paragraphs:[{runs:[{text:t.title.trim(),textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),citations:[]}]}],textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),levelsStyles:[]};br(D,n,i.themeMap,void 0,{bboxPx:R,resolvedStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER})})}const A=t.type===yt.CHART_TYPE_SCATTER||t.type===yt.CHART_TYPE_BUBBLE;if(!s&&!r&&o)g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),gu(n,t,m,i.themeMap,i.chartHoverTargets,i.hiddenSeriesIndices?new Set(i.hiddenSeriesIndices):void 0);else if(!s&&!r&&!h&&!l){if(c){const R=Ef(t,{hiddenSeriesIndices:M}),D=vf(R,m);Kr(n,t,D,m,i.themeMap),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),Rf(n,t,D,R,i.themeMap,{chartHoverTargets:i.chartHoverTargets})}else if(v)switch(!Qh(t.type)&&!A&&!a&&t.type!==yt.CHART_TYPE_HISTOGRAM&&Kr(n,t,v,m,i.themeMap),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),t.type){case yt.CHART_TYPE_BAR:{ec(n,t,v,i.themeMap,i.chartHoverTargets,M);break}case yt.CHART_TYPE_WATERFALL:{const R=fa(t,M);gf(n,t,v,R,i.themeMap,{chartHoverTargets:i.chartHoverTargets});break}case yt.CHART_TYPE_BAR_3D:{if(!i.threeCtx){if(i.on3DViewport){const H=e.width-Math.max(0,m.x-e.x),Z=e.height-Math.max(0,m.y-e.y),X={x:m.x,y:m.y,width:Math.max(0,Math.min(m.width,H)),height:Math.max(0,Math.min(m.height,Z))};i.on3DViewport({elementId:(I=i.elementId)!=null?I:"",plotDims:X})}n.restore();return}const R={x:0,y:0,width:m.width,height:m.height},D=qr(t,R);eu(i.threeCtx,t,D,R,i.themeMap,M);break}case yt.CHART_TYPE_LINE:case yt.CHART_TYPE_LINE_3D:cu(n,t,v,i.themeMap,i.chartHoverTargets,M);break;case yt.CHART_TYPE_AREA:case yt.CHART_TYPE_AREA_3D:du(n,t,v,i.themeMap,i.chartHoverTargets,M);break;case yt.CHART_TYPE_HISTOGRAM:{const R=af(t,M?{hiddenSeriesIndices:M}:void 0),D={extents:R.extents},H=nr(t,m,D);xf(n,t,H,m,R,i.themeMap),hf(n,t,H,R,i.themeMap,{chartHoverTargets:i.chartHoverTargets});break}case yt.CHART_TYPE_PIE_3D:{if(!i.threeCtx){if(i.on3DViewport){const D=e.width-Math.max(0,m.x-e.x),H=e.height-Math.max(0,m.y-e.y),Z={x:m.x,y:m.y,width:Math.max(0,Math.min(m.width,D)),height:Math.max(0,Math.min(m.height,H))};i.on3DViewport({elementId:(L=i.elementId)!=null?L:"",plotDims:Z})}n.restore();return}const R={width:m.width,height:m.height};ru(i.threeCtx,t,R,i.themeMap,M);break}case yt.CHART_TYPE_PIE:case yt.CHART_TYPE_DOUGHNUT:ql(n,t,m,i.themeMap,i.chartHoverTargets,M);break;case yt.CHART_TYPE_SCATTER:{const R=i.hiddenSeriesIndices!==void 0?new Set(i.hiddenSeriesIndices):void 0,D=Xa(t,R),H=nr(t,m,D);qo(n,t,H,m,i.themeMap),Ku(n,t,H,i.themeMap,i.chartHoverTargets,R,D);break}case yt.CHART_TYPE_BUBBLE:{const R=i.hiddenSeriesIndices!==void 0?new Set(i.hiddenSeriesIndices):void 0,D=Qu(t,R),H=nr(t,m,D);qo(n,t,H,m,i.themeMap),tf(n,t,H,D,i.themeMap,i.chartHoverTargets);break}}}else if(l){g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices});const R=jo(t,m,M),D=Lf(n,t,R,m,i.themeMap),H=D!==null?jo(t,D.plotDims,M):R;bf(n,t,H,i.themeMap,i.chartHoverTargets,D==null?void 0:D.labels)}else if(h){g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices});const R=e.width-Math.max(0,m.x-e.x),D=e.height-Math.max(0,m.y-e.y),H={x:m.x,y:m.y,width:Math.max(0,Math.min(m.width,R)),height:Math.max(0,Math.min(m.height,D))};if(i.onMapViewport&&i.onMapViewport({elementId:(q=i.elementId)!=null?q:"",plotDims:H}),!i.mapCtx){n.restore();return}rl(i.mapCtx,t,m,i.themeMap,{elementId:i.elementId,hiddenSeriesIndices:M})}else if(s){const R=Fl(t,m,i.themeMap);Su(n,R,m,{chart:t,themeMap:i.themeMap}),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices})}else if(r){const R=Lu(t,m,i.themeMap);Wu(n,R,m,{themeMap:i.themeMap,valueFormatCode:(V=(J=t.series[0])==null?void 0:J.valuesFormatCode)!=null?V:void 0}),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices})}n.restore()}const or=8,Ff=.35;function Lf(n,t,e,i,s){if(e.segments.length===0||i.width<=0)return null;const r=Qt(t.yAxis,s),o="".concat(r.fontSize,"px ").concat(St);n.save(),n.font=o;let a=0;for(const c of e.segments){const f=n.measureText(c.category).width;f>a&&(a=f)}if(n.restore(),!Number.isFinite(a)||a<=0)return null;const h=Math.min(i.width*Ff,a+or);return h<=or||h>=i.width?null:{plotDims:{x:i.x+h,y:i.y,width:Math.max(0,i.width-h),height:i.height},labels:{labelX:i.x+h-or,font:o,textColor:r.textColor}}}const ar=new Map;function Bf(n){if(n.buffer instanceof ArrayBuffer)return n;const t=new Uint8Array(n.byteLength);return t.set(n),t}function Of(n,t,e){if(/\bwidth\s*=|\bheight\s*=/.test(n))return new Blob([n],{type:"image/svg+xml"});const i=n.replace(/<svg\b([^>]*)>/,'<svg$1 width="'.concat(t,'" height="').concat(e,'">'));return new Blob([i],{type:"image/svg+xml"})}function Df(n,t){var s,r,o,a;const e=(a=(s=n.imageReference)==null?void 0:s.id)!=null?a:(o=(r=n.fill)==null?void 0:r.imageReference)==null?void 0:o.id;if(!e)return null;const i=t.images.find(h=>h.id===e);return i?{contentType:i.contentType,data:i.data}:null}async function Jf(n,t){var i,s;const e=Df(n,t);if(!e)throw new Error("no imageReference on element");return Hf(e,(i=n.bbox)==null?void 0:i.widthEmu,(s=n.bbox)==null?void 0:s.heightEmu)}async function Hf(n,t,e){const i="".concat(n.data.byteLength,"_").concat(n.contentType),s=ar.get(i);if(s)return s;if(n.contentType==="image/svg+xml"){const r=Math.round((t!=null?t:1)*Ft),o=Math.round((e!=null?e:1)*Ft),a=window.devicePixelRatio||1,h=Of(new TextDecoder().decode(n.data),r,o),l=URL.createObjectURL(h),c=new Image;c.src=l,await c.decode();const f=createImageBitmap(c,{resizeWidth:r*a,resizeHeight:o*a});return URL.revokeObjectURL(l),ar.set(i,f),f}else{const r=new Blob([Bf(n.data)],{type:n.contentType}),o=createImageBitmap(r);return ar.set(i,o),o}}export{Ft as E,Ji as S,br as a,$h as b,qh as c,jf as d,Jf as e,Xh as f,Hf as g,Zf as h,Xf as i,qf as j,Zh as k,zt as r};
//# sourceMappingURL=ej6tlexkw0sv7caa.js.map
