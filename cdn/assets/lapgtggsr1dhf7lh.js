var we=Object.defineProperty;var ne=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var ae=(e,s,r)=>s in e?we(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,Q=(e,s)=>{for(var r in s||(s={}))_e.call(s,r)&&ae(e,r,s[r]);if(ne)for(var r of ne(s))ve.call(s,r)&&ae(e,r,s[r]);return e};import{c as Se,r as c,j as t,e as K,f as de,M as oe}from"./fg33krlcm0qyi6yw.js";import{R as je,A as Ee,b as re,b2 as Ne,P as T,o2 as Ce,ee as ke,eh as ie,dB as Me,fD as Pe,fS as Ae,oG as Le,l as ee,bv as G,bg as W,a9 as F,py as Oe,be as Ie,bf as Te,i9 as Re,cS as ze,d9 as De}from"./mtk1qztvnb31pw5r.js";import{R as Ue}from"./o9og9fba0xn8j0xb.js";import{dr as ue,bq as H,pJ as me,bp as pe,jb as Fe,fx as fe,pK as $e,fg as We,pL as qe}from"./k65njl5wlgspihfr.js";import{M as Ke,O as Ve}from"./fu8o6lmdsehlrsuz.js";import{u as Xe}from"./dg5jraediw4l39ow.js";import{A as Be}from"./jkdx73dfg7n0gxrn.js";import{s as q}from"./0lpzrfkojplamwyb.js";import"./bfdvajbdpswmwyn5.js";import"./hb1mva1gmw4bcs8w.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";async function Ge(e,s){try{return(await je.safePost("/onboarding/steps",{requestBody:{main_usages:e,variant:s},authOption:Ee.SendIfAvailable})).steps}catch(r){return[]}}function He(){"use forget";var y,v,R,d;const e=Se.c(15),s=re(),{eligible:r,isLoading:p}=ue(H.CreateExampleChatsOnboarding);let n;e[0]!==s?(n=me(s,!1),e[0]=s,e[1]=n):n=e[1];const i=n,m=c.useRef(!1);let a;e[2]!==s?(a=Ne(s),e[2]=s,e[3]=a):a=e[3];const{session:o}=a,g=(v=(y=o==null?void 0:o.user)==null?void 0:y.id)!=null?v:void 0,b=(d=(R=o==null?void 0:o.account)==null?void 0:R.id)!=null?d:void 0;let w;e[4]!==b||e[5]!==s||e[6]!==r||e[7]!==p||e[8]!==i||e[9]!==g?(w=f=>{!r||p||m.current||(m.current=!0,pe(s,H.CreateExampleChatsOnboarding),T.logEventWithStatsig("Onboarding: Create Example Chats","chatgpt_onboarding_flow_create_example_chats"),Promise.all(f.map(x=>{var E;if(x.step_type==="usage_question")return Promise.resolve();const l=x.step_metadata;x.step_type!=="dalle"&&i.get("use_dynamic_response",!1)&&l!=null&&l.onboarding&&(delete l.onboarding.system_hints,delete l.onboarding.hardcoded_response);const L=Ce();return ke.initThread({clientThreadId:L,conversationMode:{kind:ie.PrimaryAssistant},userId:g,accountId:b,disableConversationNavigation:!0}),Fe({conversation:Me(s,L),eventSource:"url",promptMessage:Pe(x.step_prompt,l!=null?l:void 0,{real_author:Ae.Onboarding}),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:ie.PrimaryAssistant},systemHints:(E=l==null?void 0:l.onboarding)==null?void 0:E.system_hints},skipNotification:!0})})).catch(Ye))},e[4]=b,e[5]=s,e[6]=r,e[7]=p,e[8]=i,e[9]=g,e[10]=w):w=e[10];const M=w;let P;return e[11]!==r||e[12]!==p||e[13]!==M?(P={eligible:r,isLoading:p,createExampleChats:M},e[11]=r,e[12]=p,e[13]=M,e[14]=P):P=e[14],P}function Ye(){T.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_creating_example_chats"})}function Ze({item:e,onClick:s}){var r;return t.jsx("li",{className:"first:border-t-0",children:t.jsxs("button",{className:"hover:bg-token-interactive-bg-secondary-hover flex w-full cursor-pointer items-start gap-3 rounded-2xl px-4 py-4 text-start sm:px-6",onClick:p=>s(p,e),children:[t.jsx("div",{className:"mt-0.5 text-xl",children:e.iconImageUrl?t.jsx("img",{src:e.iconImageUrl,alt:e.title,className:"h-6 w-6 rounded-full"}):e.icon?t.jsx("span",{"aria-hidden":!0,children:e.icon}):t.jsx(Le,{category:(r=e.category)!=null?r:"onboarding",useV2Colors:!0})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-token-text-primary text-base font-medium",children:e.title}),t.jsx("div",{className:"text-token-text-secondary mt-1 text-sm leading-5",children:e.body})]}),t.jsx(fe,{className:"icon mt-0.5 shrink-0 opacity-60"})]})})}function xe({onAutoAdvance:e,enabled:s,delayMs:r=5e3,idleRestartMs:p=400,elementRef:n,dependencies:i=[]}){const m=c.useRef(null),a=c.useRef(null),o=()=>{m.current!=null&&(window.clearTimeout(m.current),m.current=null),a.current!=null&&(window.clearTimeout(a.current),a.current=null)};c.useEffect(()=>{if(o(),!!s)return m.current=window.setTimeout(()=>{e()},r),o},[s,r,e,...i]),c.useEffect(()=>{if(!s)return;const g=n==null?void 0:n.current,b=g!=null?g:window,w=()=>{m.current!=null&&(window.clearTimeout(m.current),m.current=null),a.current!=null&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{s&&(m.current!=null&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{e()},r))},p)};return b.addEventListener("scroll",w,{passive:!0}),b.addEventListener("wheel",w,{passive:!0}),()=>{b.removeEventListener("scroll",w),b.removeEventListener("wheel",w),o()}},[s,r,p,e,n==null?void 0:n.current,...i])}const V=de({cardsAriaLabel:{id:"prompt-new-user-onboarding.cards-aria-label",defaultMessage:"Starter examples"},dotsAriaLabel:{id:"prompt-new-user-onboarding.dots-aria-label",defaultMessage:"Card {current} of {total}"},prevCardAriaLabel:{id:"prompt-new-user-onboarding.prev-card-aria-label",defaultMessage:"Previous idea"},nextCardAriaLabel:{id:"prompt-new-user-onboarding.next-card-aria-label",defaultMessage:"Next idea"}}),Je=60,ge=5e3,he=400;function Qe({items:e,onSelect:s,onSubmit:r,className:p}){const n=K(),i=c.useRef(null),m=c.useRef(null),a=c.useRef(null),[o,g]=c.useState(0),[b,w]=c.useState(0),M=c.useRef({vw:0,paddingLeft:0,gapPx:0,cardWidth:0,slotWidth:1,centerTarget:0,s:0}),P=e[o];c.useEffect(()=>{s(P,o)},[s,P,o]),c.useEffect(()=>{var f;const d=e[o];d&&T.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:o,prompt_id:(f=d.id)!=null?f:String(o)})},[e,o]),c.useEffect(()=>{const d=i.current;if(!d)return;let f=null,x=d.scrollLeft,l=performance.now();const L=160,E=_=>{const C=a.current;C&&(C.style.transform="translate3d(".concat(_,"px, 0, 0)"))},O=()=>{const{vw:_,paddingLeft:C,slotWidth:h,centerTarget:N,s:k,cardWidth:D}=M.current,u=(d.scrollLeft+_/2-C-D/2)/(h||1),j=Math.max(0,Math.min(e.length-1,u)),I=Math.round(j);g(U=>U!==I?I:U);const z=j*(v+k)+v/2;E(N-z)},A=()=>{f=null,O();const _=performance.now(),C=d.scrollLeft;Math.abs(C-x)>.1&&(l=_,x=C),_-l<L&&(f=window.requestAnimationFrame(A))},S=()=>{f==null&&(x=d.scrollLeft,l=performance.now(),f=window.requestAnimationFrame(A))};return O(),d.addEventListener("scroll",S,{passive:!0}),d.addEventListener("wheel",S,{passive:!0}),()=>{d.removeEventListener("scroll",S),d.removeEventListener("wheel",S),f!=null&&window.cancelAnimationFrame(f)}},[e.length]),c.useEffect(()=>{const d=i.current,f=m.current;if(!d||!f)return;const x=()=>{const l=d.getBoundingClientRect(),L=f.getBoundingClientRect(),E=l.width,O=window.getComputedStyle(d),A=parseFloat(O.paddingLeft||"0"),S=parseFloat((O.columnGap||O.gap||"0").toString())||0,_=Math.max(0,E-2*A),C=_+S,h=Math.max(0,E/2-v/2-Je),N=l.left-L.left+E/2;M.current={vw:E,paddingLeft:A,gapPx:S,cardWidth:_,slotWidth:C,centerTarget:N,s:h},w(h);const k=(d.scrollLeft+E/2-A-_/2)/(C||1),D=Math.max(0,Math.min(e.length-1,k)),u=Math.round(D);g(z=>z!==u?u:z);const j=D*(v+h)+v/2,I=a.current;I&&(I.style.transform="translate3d(".concat(N-j,"px, 0, 0)"))};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[e.length]);const y=d=>{const f=i.current;if(!f)return;const l=f.querySelectorAll('li[data-card="true"]')[d];l&&l.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})};xe({onAutoAdvance:()=>{const d=(o+1)%e.length;y(d)},enabled:e.length>1,delayMs:ge,idleRestartMs:he,elementRef:i,dependencies:[o,e.length,y]});const v=180,R=c.useMemo(()=>{const d=Math.max(0,o-1),f=Math.min(e.length-1,o+1);return e.map((x,l)=>{var S,_;if(l<d||l>f)return null;const L=(S=x.id)!=null?S:l,E=l===o,O=E?1:.9,A=E?1:.5;return t.jsx("div",{className:"pointer-events-none flex items-center justify-center",style:{position:"absolute",top:0,left:l*(v+b),height:v,width:v,transform:"scale(".concat(O,")"),opacity:A,transition:"transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",willChange:"transform, opacity"},children:x.iconImageUrl||x.coverImageUrl?t.jsx("img",{src:(_=x.iconImageUrl)!=null?_:x.coverImageUrl,alt:"",className:"rounded-3xl",style:{height:v,width:v}}):t.jsx("div",{className:"flex items-center justify-center text-3xl",style:{height:v,width:v},children:x.icon})},L)})},[e,o,b]);return t.jsx("div",{ref:m,className:ee(p,"relative"),children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 overflow-hidden",style:{height:v},"aria-hidden":!0,children:t.jsx("div",{ref:a,className:"pointer-events-none absolute start-0 top-0",style:{height:v,willChange:"transform"},"aria-hidden":!0,children:R})}),t.jsx("ul",{ref:i,className:"no-scrollbar flex max-h-full snap-x snap-mandatory scroll-ps-5 scroll-pe-5 gap-4 overflow-x-auto scroll-smooth px-5 pb-10","aria-label":n.formatMessage(V.cardsAriaLabel),children:e.map((d,f)=>{var x;return t.jsx("li",{"data-card":"true",className:"max-h-full shrink-0 snap-center [scroll-snap-stop:always]",children:t.jsx("div",{className:ee("relative h-full w-[calc(100vw-2.5rem)] rounded-3xl text-start sm:w-[260px]","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),style:{"--accent":d.accentColor},children:t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"relative",style:{height:v,width:v},"aria-hidden":!0}),t.jsx("div",{className:"text-token-text-primary text-center text-2xl leading-tight font-medium sm:text-xl",children:d.title}),t.jsx(be,{prompt:d.prompt||d.body,onSubmit:l=>r(l,d,f)})]})})},(x=d.id)!=null?x:f)})}),t.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 pb-4 sm:hidden",children:e.map((d,f)=>t.jsx("button",{"aria-label":n.formatMessage(V.dotsAriaLabel,{current:f+1,total:e.length}),"aria-current":o===f,className:ee("h-2 w-2 rounded-full bg-current transition-colors",o===f?"text-token-text-primary":"bg-token-bg-secondary"),onClick:()=>y(f)},f))})]})})}function et({items:e,onSelect:s,onSubmit:r,className:p}){var b;const[n,i]=c.useState(0),[m,a]=c.useState(0),o=e[n],g=e[m];return c.useEffect(()=>{s(o,n)},[s,o,n]),c.useEffect(()=>{var M;const w=e[n];w&&T.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:n,prompt_id:(M=w.id)!=null?M:String(n)})},[e,n]),t.jsx("div",{className:p,children:t.jsxs("div",{className:"tall:gap-8 flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(G,{mode:"sync",children:g&&t.jsx(W.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 start-1/2 top-1/2 -z-10 h-[160%] w-[100%] -translate-x-1/2 -translate-y-1/2",initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0},transition:{duration:.6,ease:[.2,.8,.2,1]},style:{backgroundImage:"radial-gradient(closest-side, ".concat(g.accentColor," 0%, transparent 80%)")}},(b=g.id)!=null?b:m)}),t.jsx(st,{items:e,activeIndex:n,onWillChange:w=>{a(w)},onChange:w=>{i(w)}})]}),g&&t.jsx(G,{mode:"wait",children:t.jsxs(W.div,{className:"flex max-w-[320px] flex-col items-center gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:8,transition:{duration:.3,ease:[.2,.8,.2,1]}},children:[t.jsx("div",{className:"text-token-text-primary text-2xl leading-tight font-medium sm:text-xl",children:g.title}),t.jsx("div",{className:"sm:min-h-24",children:t.jsx(be,{prompt:g.prompt||g.body,onSubmit:w=>r(w,g,m)})})]},m)})]})})}const te=228,le=190,tt=160,ce=180,se=350;function st({items:e,activeIndex:s,onChange:r,onWillChange:p}){const n=K(),i=e.length,[m,a]=c.useState(null),[o,g]=c.useState("idle"),[b,w]=c.useState(!1),M=c.useRef(null),P=c.useRef(null);c.useEffect(()=>()=>{M.current!=null&&window.clearTimeout(M.current),P.current!=null&&window.cancelAnimationFrame(P.current)},[]);const[y,v]=c.useState(te);c.useEffect(()=>{const u=()=>{const j=window.innerHeight||800,z=(Math.max(600,Math.min(800,j))-600)/200,U=Math.round(le+(te-le)*z);v(U)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const R=y/te,d=Math.round(tt*R),f=y/d,x=(y+d)/2+ce,l=(u,j)=>(u%j+j)%j,L=l(s-1,i),E=l(s+1,i),O=l(s-2,i),A=l(s+2,i),S=c.useCallback(u=>{if(b||i<=1)return;w(!0),a(u),g("prepare");const j=l(u==="right"?s+1:s-1,i);p==null||p(j),P.current=window.requestAnimationFrame(()=>{P.current=window.requestAnimationFrame(()=>{g("slide"),M.current=window.setTimeout(()=>{a(null),g("idle"),w(!1),r(l(u==="right"?s+1:s-1,i))},se)})})},[b,i,s,p,r]);if(xe({onAutoAdvance:()=>S("right"),enabled:i>1&&!b,delayMs:ge,idleRestartMs:he,dependencies:[s,S,b]}),i===0)return null;const _=[-2,-1,0,1,2].map(u=>u*x),C=[{key:"left-".concat(L),index:L,slot:1},{key:"center-".concat(s),index:s,slot:2},{key:"right-".concat(E),index:E,slot:3}];let h=C;if(m==="right"){const u=[{key:"farRight-".concat(A),index:A,slot:4,fadeIn:!0}];h=[...C,...u]}else m==="left"&&(h=[...[{key:"farLeft-".concat(O),index:O,slot:0,fadeIn:!0}],...C]);const N=u=>{if(m==null||o==="idle"||o==="prepare")return _[u];if(m==="right"){const j=Math.max(u-1,0);return _[j]}else{const j=Math.min(u+1,4);return _[j]}},k=(u,j)=>{const I=N(u),z=u===2?30:u===1||u===3?20:10,U=!b&&i>1&&(u===1||u===3),X=I===_[2],Y=I===_[1]||I===_[3],Z=d,J=X?f:1,B=X?1:Y?.5:0;return{x:I,z,cardSize:Z,scale:J,opacity:j&&o==="prepare"?0:B,isDisabled:!U}},D=u=>{u.key==="ArrowLeft"?(u.preventDefault(),S("left")):u.key==="ArrowRight"&&(u.preventDefault(),S("right"))};return t.jsxs("div",{className:"relative flex w-full items-center justify-center py-2 outline-none",tabIndex:0,"aria-label":n.formatMessage(V.cardsAriaLabel),onKeyDown:D,children:[t.jsx("div",{className:"relative overflow-hidden",style:{height:y,width:3*y+2*ce},children:h.map(({key:u,index:j,slot:I,fadeIn:z})=>{const{x:U,z:X,cardSize:Y,scale:Z,opacity:J,isDisabled:B}=k(I,z);return t.jsx(rt,{item:e[j],translateX:U,zIndex:X,onClick:()=>S(I===1?"left":"right"),cardSize:Y,scale:Z,opacity:J,isDisabled:B},u)})}),t.jsx(F,{color:"ghost","aria-label":n.formatMessage(V.prevCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% - ".concat(y/2+20+36,"px)")},onClick:()=>S("left"),disabled:b||i<=1,icon:Oe}),t.jsx(F,{color:"ghost","aria-label":n.formatMessage(V.nextCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% + ".concat(y/2+20,"px)")},onClick:()=>S("right"),disabled:b||i<=1,icon:fe})]})}function rt({item:e,translateX:s,zIndex:r,onClick:p,cardSize:n,scale:i,opacity:m,isDisabled:a}){var o;return t.jsx("button",{className:"absolute start-1/2 top-1/2 flex items-center justify-center rounded-3xl",style:{transform:"translate3d(-50%, -50%, 0) translate3d(".concat(s,"px, 0, 0) scale(").concat(i,")"),height:"".concat(n,"px"),width:"".concat(n,"px"),transition:"transform ".concat(se,"ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity ").concat(se,"ms cubic-bezier(0.2, 0.8, 0.2, 1)"),willChange:"transform, opacity",opacity:m,zIndex:r},onClick:p,disabled:a,children:e.iconImageUrl||e.coverImageUrl?t.jsx("img",{src:(o=e.iconImageUrl)!=null?o:e.coverImageUrl,alt:"",className:"rounded-3xl",style:{maxHeight:"".concat(n,"px"),maxWidth:"".concat(n,"px")}}):t.jsx("div",{className:"text-6xl","aria-hidden":!0,children:e.icon})})}function be({prompt:e,onSubmit:s}){const r=K();return t.jsxs("div",{className:"group bg-token-bg-elevated-primary border-token-border-light inline-flex items-end justify-center gap-3 self-stretch rounded-3xl border p-3 ps-4 shadow-xl backdrop-blur-[20px]",children:[t.jsx("div",{className:"text-token-text-primary flex-1 justify-end text-sm leading-tight font-normal duration-300 sm:opacity-65 sm:group-hover:opacity-100",children:e}),t.jsx(F,{icon:Be,size:"small",label:r.formatMessage(q.tryNow),onClick:s,className:"h-7 w-7 transition-all duration-300 sm:opacity-65 sm:group-hover:opacity-100"})]})}const $=de({subtitleCards:{id:"prompt-new-user-onboarding.subtitle-cards-2",defaultMessage:"Try one of these ideas to see how ChatGPT works."},close:{id:"prompt-new-user-onboarding.close",defaultMessage:"Close"},skip:{id:"prompt-new-user-onboarding.skip",defaultMessage:"Skip"}}),ye={work:["help_me_get_recognized","anime_style_portrait","document_summary"],school:["fix_procrastination","anime_style_portrait","create_a_quiz"],personalTasks:["meal_prep","anime_style_portrait","upgrade_skin_care"],funAndEntertainment:["promo_code","action_figure_portrait","color_theory"],other:["be_my_personal_trainer","anime_style_portrait","color_theory"]};function nt(e){return Object.prototype.hasOwnProperty.call(ye,e)}function at({cardItems:e,isUserTriggered:s,handleSelect:r,onClose:p}){const n=K(),[i,m]=c.useState(0),a=!De(),o=(g,b)=>{m(b)};return t.jsxs(Ve,{className:"flex h-full flex-col gap-6",children:[t.jsx("p",{className:"text-token-text-secondary sm:tall:text-3xl sm:tall:font-medium sm:tall:font-medium sm:tall:mb-4 sm:short:mt-4 mx-auto min-h-0 max-w-[280px] shrink text-center text-base max-sm:mt-10 sm:max-w-[420px]",children:n.formatMessage($.subtitleCards)}),t.jsx("div",{className:"flex min-h-0 flex-1 flex-col justify-center gap-4",children:a?t.jsx(Qe,{items:e,onSelect:o,onSubmit:r,className:"flex min-h-0 flex-1 flex-col justify-center"}):t.jsx(et,{items:e,onSelect:o,onSubmit:r,className:"sm:pb-6"})}),t.jsxs("div",{className:"mx-auto flex w-full shrink-0 flex-col gap-2 px-6 pb-6 sm:max-w-[380px]",children:[t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:g=>r(g,e[i],i),children:n.formatMessage(q.tryNow)}),t.jsx(F,{size:"large",color:"ghost",fullWidth:!0,onClick:()=>p==null?void 0:p(),children:s?n.formatMessage($.close):n.formatMessage($.skip)})]})]})}function ot({starters:e,handleSelect:s,isUserTriggered:r,onClose:p}){const n=K();return c.useEffect(()=>{!e||e.length===0||e.forEach((i,m)=>{var a;T.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:m,prompt_id:(a=i.id)!=null?a:""})})},[e]),t.jsxs("div",{className:"tall:gap-16 flex h-full flex-col gap-6 sm:mx-auto sm:max-w-[480px] sm:px-3",children:[t.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-6 sm:px-8 sm:pt-7",children:[t.jsx("h2",{className:"text-token-text-primary text-center text-3xl font-medium",children:n.formatMessage(q.promptOnboardingTitle)}),t.jsx("p",{className:"text-token-text-secondary text-center text-base",children:n.formatMessage(q.promptOnboardingSubtitle)})]}),t.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-2 pb-8",children:t.jsx("ul",{className:"divide-token-border-light divide-y",children:e.map((i,m)=>{var a;return t.jsx(Ze,{item:i,onClick:(o,g)=>s(o,g,m)},(a=i.id)!=null?a:m)})})}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx(F,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>p==null?void 0:p(),children:r?n.formatMessage($.close):n.formatMessage($.skip)})})]})}function jt({clientThreadId:e,onClose:s}){const r=re(),p=me(r,!1),n=p.get("prompt_onboarding_enable_usage_selection",!1),i=p.get("prompt_onboarding_prompt_variant",""),m=p.get("prompt_onboarding_example_chats_prompt_variant",""),[a,o]=c.useState(n?null:["other"]),[g,b]=c.useState(!1),w=K(),M=$e({clientThreadId:e}),{markAsViewed:P,isUserTriggered:y,onboardingStyle:v}=We(),R=c.useRef(null);c.useEffect(()=>{P(),T.logEventWithStatsig("Onboarding Shown","chatgpt_onboarding_flow_shown",{isUserTriggered:y?"true":"false"}),T.logUpsellOrModalEvent(Ie,{eventId:"prompt_new_user_onboarding_modal_shown",type:Te.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[P,y]);const d=c.useMemo(()=>{const h=["work","school","funAndEntertainment"],N=new Set(a!=null?a:[]);if(N.size===0)return"other";for(const k of h)if(N.has(k))return k;for(const k of N)if(nt(k))return k;return"other"},[a]),f=Xe(),x=c.useMemo(()=>y?f:i!=="use_case"?f.filter(h=>h.isFeatured):ye[d].map(h=>f.find(N=>N.id===h)).filter(h=>h!==void 0),[f,y,d,i]);c.useEffect(()=>{x.length>0&&qe(x,e)},[x,e]);const l=c.useCallback(h=>(R.current||(R.current=Ge(h,m===""?void 0:m)),R.current),[m]),{createExampleChats:L,eligible:E,isLoading:O}=He();c.useEffect(()=>{a!=null&&l(a)},[l,a]);const A=c.useCallback(h=>{const N=h!=null?h:a;!E||O||N==null||l(N).then(k=>{L(k)}).catch(()=>{T.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_fetching_onboarding_steps"})})},[L,E,O,l,a]),S=(h,N,k)=>{var D;try{s==null||s(),M({suggestedPrompt:N,index:k,isOnboarding:!y}),A(),T.logEventWithStatsig("Onboarding Try Prompt","chatgpt_onboarding_flow_try_prompt",{index:k,prompt_id:(D=N.id)!=null?D:String(k),isUserTriggered:y?"true":"false"})}catch(u){T.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{error:u instanceof Error?u.message:String(u)})}},_=()=>{const h=a!=null?a:["other"];T.logEventWithStatsig("Onboarding Dismissed","chatgpt_onboarding_flow_dismissed",{isUserTriggered:y?"true":"false"}),s==null||s(),A(h)},C=()=>{y?_():b(!0)};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"absolute inset-0 bg-black/60","aria-hidden":"true",onClick:h=>{h.stopPropagation(),y&&_()}}),t.jsx(G,{children:t.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.35},className:"bg-token-bg-primary relative z-10 flex h-full w-full flex-col items-center justify-center rounded-none",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},onClick:h=>h.stopPropagation(),children:t.jsxs("div",{className:"flex max-h-full w-full flex-col gap-6 max-sm:h-full",children:[t.jsx("div",{className:"absolute end-3 top-3 z-20 hidden sm:block",children:t.jsx(F,{icon:Re,onClick:_,color:"ghost",className:"h-9 w-9",label:w.formatMessage($.close)})}),t.jsx(G,{mode:"wait",children:a==null?t.jsx(Ke,{mainUsagesProp:a!=null?a:[],onSelectMainUsages:o,onSkip:()=>o(["other"])},"main-usage-question"):g?t.jsx(it,{onClose:_,createExampleChats:A},"all-set-page"):v==="cards"?t.jsx(at,{cardItems:x,isUserTriggered:y,handleSelect:S,onClose:C},"cards-variant"):t.jsx(ot,{starters:x,handleSelect:S,isUserTriggered:y,onClose:C},"list-variant")})]})})})]})}function it({onClose:e,createExampleChats:s}){const r=re(),{eligible:p,isLoading:n}=ue(H.Onboarding);return c.useEffect(()=>{p&&!n&&pe(r,H.Onboarding)},[r,p,n]),c.useEffect(()=>{s()},[s]),t.jsxs("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center gap-16 p-6 sm:max-w-[380px]",children:[t.jsxs("div",{className:"flex min-h-0 flex-col items-center justify-center gap-4 max-sm:flex-1",children:[t.jsx(W.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:360,damping:24,mass:.8},children:t.jsx(ze,{className:"text-token-text-primary h-10 w-10 text-5xl"})}),t.jsx(W.p,{className:"text-token-text-primary text-center text-3xl",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.5},children:t.jsx(oe,Q({},q.allSet))})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[t.jsx("div",{className:"text-token-text-secondary relative mt-auto w-full text-center text-base",children:t.jsx(Ue,{})}),t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:e,children:t.jsx(oe,Q({},q.done))})]})]})}export{jt as default};
//# sourceMappingURL=lapgtggsr1dhf7lh.js.map
