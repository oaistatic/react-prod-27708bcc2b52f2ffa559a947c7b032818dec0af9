const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/g1qhqb6o56eseg0y.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css","assets/ikhecou4geu140tb.js","assets/c3n1o8jzfcramdfc.js"])))=>i.map(i=>d[i]);
var Y=Object.defineProperty;var T=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var $=(a,e,t)=>e in a?Y(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,U=(a,e)=>{for(var t in e||(e={}))Z.call(e,t)&&$(a,t,e[t]);if(T)for(var t of T(e))ee.call(e,t)&&$(a,t,e[t]);return a};import{_ as te,c as se,e as ae,r as F,u as le,f as ie,j as l,M as re}from"./fg33krlcm0qyi6yw.js";import{bh as oe,b as ne,ad as X,cU as de,a9 as q,C as me}from"./mtk1qztvnb31pw5r.js";import{fS as ce,ds as fe,V as ue}from"./k65njl5wlgspihfr.js";import{c as ge,m as H}from"./c3n1o8jzfcramdfc.js";const W=oe(()=>te(()=>import("./g1qhqb6o56eseg0y.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(a=>a.AddEmailOtpModal)),w=ie({title:{id:"settingsModal.addEmail.title",defaultMessage:"Add email"},emailAddressLabel:{id:"settingsModal.addEmail.emailAddressLabel",defaultMessage:"Email address"},emailAddressPlaceholder:{id:"settingsModal.addEmail.emailAddressPlaceholder",defaultMessage:"Email address"},cancelLabel:{id:"settingsModal.addEmail.cancel",defaultMessage:"Cancel"},sendVerificationLabel:{id:"settingsModal.addEmail.sendVerification",defaultMessage:"Send verification email"}});class pe extends Error{constructor(e){super(e),this.name="EmailValidationError"}}const xe=(a,e)=>e.trim()===""?a.formatMessage(H.sendEmailFailureInvalidEmailEmpty):ue.test(e)?null:a.formatMessage(H.sendEmailFailureInvalidEmail,{email:e});function Se(a){"use forget";const e=se.c(61),{onClose:t}=a,B=ne(),s=ae(),[R,J]=F.useState(""),[o,C]=F.useState(null),n=F.useId();let N;e[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[0]=N):N=e[0],F.useEffect(he,N);let d;e[1]!==s?(d=async i=>{const D=i.trim(),A=xe(s,D);if(A)throw new pe(A);try{await ge(D)}catch(Ee){throw new Error(s.formatMessage(X.somethingWentWrong))}return D},e[1]=s,e[2]=d):d=e[2];let m;e[3]!==B||e[4]!==t?(m=i=>{W.prefetch().then(()=>{de(B,W,{email:i}),t()})},e[3]=B,e[4]=t,e[5]=m):m=e[5];let c;e[6]!==s?(c=i=>{i instanceof Error?C(i.message):C(s.formatMessage(X.somethingWentWrong))},e[6]=s,e[7]=c):c=e[7];let I;e[8]!==d||e[9]!==m||e[10]!==c?(I={mutationFn:d,onSuccess:m,onError:c},e[8]=d,e[9]=m,e[10]=c,e[11]=I):I=e[11];const r=le(I);let L;e[12]!==r?(L=i=>{i.preventDefault(),W.prefetch();const A=new FormData(i.currentTarget).get("email");typeof A=="string"&&(C(null),r.mutate(A))},e[12]=r,e[13]=L):L=e[13];const z=L;let P;e[14]===Symbol.for("react.memo_cache_sentinel")?(P={borderBottom:"border-token-border-light"},e[14]=P):P=e[14];let f;e[15]!==s?(f=s.formatMessage(w.title),e[15]=s,e[16]=f):f=e[16];let u;e[17]!==f?(u=l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("span",{className:"text-token-text-primary text-[20px] leading-[25px] font-medium tracking-tight",children:f})}),e[17]=f,e[18]=u):u=e[18];let g;e[19]!==s?(g=s.formatMessage({id:"settingsModal.addEmail.close",defaultMessage:"Close add email modal"}),e[19]=s,e[20]=g):g=e[20];let k;e[21]===Symbol.for("react.memo_cache_sentinel")?(k=l.jsx(ce,{className:"h-5 w-5"}),e[21]=k):k=e[21];let p;e[22]!==t||e[23]!==g?(p=l.jsx("button",{type:"button",onClick:t,"aria-label":g,className:"text-token-interactive-icon-tertiary-default flex h-5 w-5 items-center justify-center",children:k}),e[22]=t,e[23]=g,e[24]=p):p=e[24];let x;e[25]!==p||e[26]!==u?(x=l.jsx("div",{className:"border-b",style:P,children:l.jsxs("div",{className:"flex w-full items-start justify-between gap-4 px-6 py-6",children:[u,p]})}),e[25]=p,e[26]=u,e[27]=x):x=e[27];let V;e[28]===Symbol.for("react.memo_cache_sentinel")?(V=l.jsx("label",{htmlFor:"email",className:"text-token-text-primary text-[14px] leading-5 font-medium",children:l.jsx(re,U({},w.emailAddressLabel))}),e[28]=V):V=e[28];let h;e[29]!==o?(h=i=>{J(i.target.value),o&&C(null)},e[29]=o,e[30]=h):h=e[30];let E;e[31]!==s?(E=s.formatMessage(w.emailAddressPlaceholder),e[31]=s,e[32]=E):E=e[32];const G=o!=null?o:void 0;let M;e[33]!==R||e[34]!==h||e[35]!==E||e[36]!==G?(M=l.jsx(fe,{ariaLabel:!1,name:"email",type:"email",className:"bg-primary",inputClassName:"bg-transparent",value:R,onChange:h,placeholder:E,error:G}),e[33]=R,e[34]=h,e[35]=E,e[36]=G,e[37]=M):M=e[37];let b;e[38]!==n||e[39]!==z||e[40]!==M?(b=l.jsxs("form",{id:n,className:"flex flex-col gap-3 px-6 py-6",onSubmit:z,children:[V,M]}),e[38]=n,e[39]=z,e[40]=M,e[41]=b):b=e[41];let y;e[42]!==s?(y=s.formatMessage(w.cancelLabel),e[42]=s,e[43]=y):y=e[43];let _;e[44]!==t||e[45]!==y?(_=l.jsx(q,{color:"secondary",size:"medium",type:"button",onClick:t,children:y}),e[44]=t,e[45]=y,e[46]=_):_=e[46];const K=r.isPending,Q=r.isPending;let j;e[47]!==s?(j=s.formatMessage(w.sendVerificationLabel),e[47]=s,e[48]=j):j=e[48];let S;e[49]!==n||e[50]!==r.isPending||e[51]!==j?(S=l.jsx(q,{size:"medium",type:"submit",form:n,loading:K,disabled:Q,children:j}),e[49]=n,e[50]=r.isPending,e[51]=j,e[52]=S):S=e[52];let v;e[53]!==_||e[54]!==S?(v=l.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-6",children:[_,S]}),e[53]=_,e[54]=S,e[55]=v):v=e[55];let O;return e[56]!==t||e[57]!==x||e[58]!==b||e[59]!==v?(O=l.jsxs(me,{isOpen:!0,onClose:t,testId:"modal-add-email",showCloseButton:!1,hasSeparator:!1,className:"border-token-border-light bg-token-bg-primary shadow-elevation-03 w-[432px] max-w-full rounded-2xl border",noPadding:!0,modalActionsClassName:"!mt-0",children:[x,b,v]}),e[56]=t,e[57]=x,e[58]=b,e[59]=v,e[60]=O):O=e[60],O}function he(){W.prefetch()}export{Se as AddEmailModal};
//# sourceMappingURL=cytm66rgyn54zc1g.js.map
