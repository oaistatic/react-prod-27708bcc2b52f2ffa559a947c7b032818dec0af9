import{r as j,j as R,e as A,f as U}from"./fg33krlcm0qyi6yw.js";import{o as k,b as B,k2 as G,fN as H,hh as L,es as w,rq as v,rr as D,a9 as V,V as J,I as K,ed as S,dF as N}from"./mtk1qztvnb31pw5r.js";import{d0 as P,d1 as q,d2 as F}from"./k65njl5wlgspihfr.js";const M=U({reportConversationTitle:{id:"gizmo.report.conversationModal.title",defaultMessage:"Report a conversation"},reportMessageTitle:{id:"gizmo.report.messageModal.title",defaultMessage:"Report a message"},reportMessageTitleExperiment:{id:"gizmo.report.messageModal.title.experiment",defaultMessage:"Safety or legal concern"},backButton:{id:"gizmo.report.messageModal.backButton",defaultMessage:"Back"}});function Q(n,o,a,t){var i,f,g;const u=K(n),s=o&&S(o)?o:null,l=t!=null&&t.projectId&&S(t.projectId)?t.projectId:null,e=(i=s!=null?s:l)!=null?i:null,r=(f=a!=null?a:t==null?void 0:t.conversationOwnerId)!=null?f:null,c=e!=null?(g=r!=null?r:u==null?void 0:u.normalizedAccountUserId)!=null?g:null:r;return{resolvedProjectId:e,resolvedConversationOwnerId:c}}function h({serverThreadId:n,clientThreadId:o,onClose:a,isStaticSharedThread:t,isSharedConversation:u,projectId:s,conversationOwnerId:l}){var d,m;const e=B(),r=k(e,"2935021756"),c=k(e,"3376455464")||t||u,i=j.useContext(G),f=(d=o!=null?o:n)!=null?d:i==null?void 0:i.serverSharedThreadId,g=H(f,p=>{var x,C,z;return{projectId:(x=N.getGizmoId(p))!=null?x:null,conversationOwnerId:(z=(C=p==null?void 0:p.sharedProjectConversationOwner)==null?void 0:C.id)!=null?z:null}},{disablePerfDetector:!0}),y=L(o);let _=n!=null?n:y;_==null&&i!=null&&(_=(m=i.serverSharedThreadId)!=null?m:void 0);const{resolvedProjectId:E,resolvedConversationOwnerId:b}=Q(e,s!=null?s:null,l!=null?l:null,g);return r&&typeof window<"u"&&(window._convo_share_debug={isOpen:!0,canReport:c,serverThreadIdIsNull:_==null,isStaticSharedThread:t,isSharedConversation:u}),j.useEffect(()=>{!c||_==null||w(e,"chatgpt_conversation_share_report_modal_not_shown",c?"serverThreadId":"canReport")},[c,e,_]),!c||_==null?null:R.jsx(W,{serverThreadId:_,onClose:a,isStaticSharedThread:t,projectId:E,conversationOwnerId:b,isSharedConversation:u})}function O({serverThreadId:n,clientThreadId:o,messageId:a,onClose:t,projectId:u,conversationOwnerId:s,onFeedbackModalReopen:l}){var b,d;const e=B(),r=k(e,"3376455464"),c=L(o);let i=n!=null?n:c;const f=j.useContext(G);i==null&&f!=null&&(i=(b=f.serverSharedThreadId)!=null?b:void 0);const g=(d=o!=null?o:n)!=null?d:f==null?void 0:f.serverSharedThreadId,y=H(g,m=>{var p,x,C;return{projectId:(p=N.getGizmoId(m))!=null?p:null,conversationOwnerId:(C=(x=m==null?void 0:m.sharedProjectConversationOwner)==null?void 0:x.id)!=null?C:null}},{disablePerfDetector:!0}),{resolvedProjectId:_,resolvedConversationOwnerId:E}=Q(e,u!=null?u:null,s!=null?s:null,y);return!r||i==null||a==null?null:R.jsx(X,{serverThreadId:i,messageId:a,onClose:t,projectId:_,conversationOwnerId:E,onFeedbackModalReopen:l})}function W({serverThreadId:n,onClose:o,isStaticSharedThread:a,projectId:t,conversationOwnerId:u,isSharedConversation:s}){const l=B(),{data:e}=P(l,a||s?v.ShareableConversation:v.Conversation),r=A(),c=q(l,r,n,a||s?v.ShareableConversation:v.Conversation,D.FirstParty,void 0,t,u);return e==null||n==null?(w(l,"chatgpt_conversation_share_report_modal_not_shown",e==null?"report_reasons":"thread_id"),null):R.jsx(F,{reasons:e.reasons,submitReport:c,title:r.formatMessage(M.reportConversationTitle),onClose:o,header:e.header,subHeader:e.header_explanation})}function X({serverThreadId:n,messageId:o,onClose:a,projectId:t,conversationOwnerId:u,onFeedbackModalReopen:s}){const l=B(),{data:e}=P(l,v.Message),r=A(),c=q(l,r,n,v.Conversation,D.FirstParty,void 0,t,u,o),i=j.useCallback(()=>{a(),s==null||s()},[a,s]),f=s?R.jsx(V,{color:"secondary",onClick:i,children:r.formatMessage(M.backButton)}):void 0,g=J(l,"1030729005").get("chatgpt_message_feedback_consolidation_enabled",!1);return e==null?(w(l,"chatgpt_conversation_share_report_modal_not_shown","report_reasons"),null):R.jsx(F,{reasons:e.reasons,submitReport:c,title:g?r.formatMessage(M.reportMessageTitleExperiment):r.formatMessage(M.reportMessageTitle),onClose:a,header:g?null:e.header,subHeader:e.header_explanation,footerSecondaryButton:f})}export{W as ReportConversationModal,X as ReportMessageModal,h as ThreadReportConversationModal,O as ThreadReportMessageModal};
//# sourceMappingURL=c5og9r81gzk0nhum.js.map
