const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/la3hbdhvtk897w0a.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css","assets/pdv21chic8hs0mt3.js","assets/haneze5lyzwaewf8.js","assets/gqx9i5tb3deqoo5z.js","assets/dg5jraediw4l39ow.js","assets/hb1mva1gmw4bcs8w.js","assets/efooahjtdr85x1lo.js","assets/km71i01x6ma5r62b.js","assets/mbql81gwv5du9dtu.js","assets/k43gn7pl526u53kc.js","assets/fj25p15jq4efcoma.js"])))=>i.map(i=>d[i]);
var W=Object.defineProperty,q=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var H=(n,e,s)=>e in n?W(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,V=(n,e)=>{for(var s in e||(e={}))Q.call(e,s)&&H(n,s,e[s]);if(B)for(var s of B(e))Y.call(e,s)&&H(n,s,e[s]);return n},X=(n,e)=>q(n,J(e));import{c as P,j as i,r as T,e as K,_ as Z,M as z}from"./fg33krlcm0qyi6yw.js";import{bb as ee,l as O,cX as te,bh as se,aP as ie,b as ne,d as ae,P as le,en as oe,eW as re,cU as ce,c0 as de,e as ue,i7 as me}from"./mtk1qztvnb31pw5r.js";import{n7 as fe,n8 as ge,n9 as he,na as xe}from"./k65njl5wlgspihfr.js";import{D as be,L as ve,I as je}from"./engbryqfkwtfab1c.js";const Ie=()=>{"use forget";const n=P.c(2),e=ee(),s="url(".concat(e?be:ve,")");let l;return n[0]!==s?(l=i.jsx("div",{className:"absolute inset-0 z-0 w-full overflow-hidden opacity-0 group-hover:opacity-100 group-focus:opacity-100",children:i.jsx("div",{className:"absolute inset-0 bg-auto bg-repeat",style:{backgroundImage:s}})}),n[0]=s,n[1]=l):l=n[1],l},_e=n=>{"use forget";const e=P.c(32);let{src:s,thumbnail:l,alt:a,height:o,width:t,isLoaded:d,onLoad:h,onError:u}=n;const f=K(),[r,x]=T.useState(!1);let m;e[0]!==a||e[1]!==f?(m=a!=null?a:f.formatMessage({id:"xoI74H",defaultMessage:"ChatGPT generated image."}),e[0]=a,e[1]=f,e[2]=m):m=e[2],a=m;const g=!d&&"opacity-0";let c;e[3]!==g?(c=O("absolute inset-0 z-0 aspect-square object-cover transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",g),e[3]=g,e[4]=c):c=e[4];let b;e[5]!==h?(b=()=>{h()},e[5]=h,e[6]=b):b=e[6];let j;e[7]!==u||e[8]!==h?(j=()=>{u(),h()},e[7]=u,e[8]=h,e[9]=j):j=e[9];let I;e[10]!==a||e[11]!==o||e[12]!==s||e[13]!==c||e[14]!==b||e[15]!==j||e[16]!==t?(I=i.jsx("img",{loading:"lazy",decoding:"async",className:c,onLoad:b,onError:j,alt:a,src:s,width:t,height:o}),e[10]=a,e[11]=o,e[12]=s,e[13]=c,e[14]=b,e[15]=j,e[16]=t,e[17]=I):I=e[17];let v;e[18]!==a||e[19]!==o||e[20]!==d||e[21]!==r||e[22]!==s||e[23]!==l||e[24]!==t?(v=l&&l!==s&&i.jsx("img",{loading:"lazy",decoding:"async",alt:a,src:l,className:O("absolute inset-0 z-1 h-full w-full object-cover blur-sm transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",r&&!d?"opacity-100":"opacity-0"),onLoad:()=>x(!0),width:t,height:o}),e[18]=a,e[19]=o,e[20]=d,e[21]=r,e[22]=s,e[23]=l,e[24]=t,e[25]=v):v=e[25];let _;e[26]!==d?(_=d&&i.jsx(Ie,{}),e[26]=d,e[27]=_):_=e[27];let y;return e[28]!==I||e[29]!==v||e[30]!==_?(y=i.jsxs(i.Fragment,{children:[I,v,_]}),e[28]=I,e[29]=v,e[30]=_,e[31]=y):y=e[31],y},ye=n=>!("isPlaceholder"in n)||!n.isPlaceholder,U=n=>{"use forget";const e=P.c(21),[s,l]=T.useState(!1),[a,o]=T.useState(!1),{index:t,onClick:d}=n;let h;e[0]!==n?(h=ye(n),e[0]=n,e[1]=h):h=e[1];const u=!h;let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=O("group/imagegen-image bg-tertiary relative z-0 flex aspect-square items-center justify-center overflow-clip text-xs"),e[2]=f):f=e[2];let r;e[3]!==t||e[4]!==d||e[5]!==u?(r=()=>{u||d==null||d(t)},e[3]=t,e[4]=d,e[5]=u,e[6]=r):r=e[6];const x=u?void 0:"button",m=u?!0:void 0;let g;e[7]!==s||e[8]!==u||e[9]!==n?(g=u?i.jsx("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:i.jsx("div",{className:"bg-token-bg-tertiary h-full w-full animate-pulse"})}):i.jsxs(i.Fragment,{children:[!s&&i.jsx("div",{className:"bg-token-bg-tertiary absolute inset-0 z-0 motion-safe:animate-pulse"}),i.jsx(_e,X(V({},n),{isLoaded:s,onLoad:()=>l(!0),onError:()=>o(!0)}))]}),e[7]=s,e[8]=u,e[9]=n,e[10]=g):g=e[10];let c;e[11]!==a||e[12]!==u?(c=a&&!u&&i.jsx(te,{className:"text-token-text-tertiary absolute z-0 h-12 w-12 text-red-500"}),e[11]=a,e[12]=u,e[13]=c):c=e[13];let b;return e[14]!==n.children||e[15]!==r||e[16]!==x||e[17]!==m||e[18]!==g||e[19]!==c?(b=i.jsxs("div",{className:f,onClick:r,role:x,"aria-hidden":m,children:[g,c,n.children]}),e[14]=n.children,e[15]=r,e[16]=x,e[17]=m,e[18]=g,e[19]=c,e[20]=b):b=e[20],b},pe=n=>{"use forget";const e=P.c(12),{onScrollToEnd:s,enabled:l,isFetching:a}=n,o=l===void 0?!0:l,t=a===void 0?!1:a,d=T.useRef(null),h=T.useRef(!1),u=T.useRef(t);let f;e[0]!==o||e[1]!==t||e[2]!==s?(f=()=>{!o||t||s()},e[0]=o,e[1]=t,e[2]=s,e[3]=f):f=e[3];const r=f;let x,m;e[4]!==r?(x=()=>{if(!d.current)return;const j=new IntersectionObserver(I=>{const v=I[0];h.current=!!(v!=null&&v.isIntersecting),v!=null&&v.isIntersecting&&r()});return j.observe(d.current),()=>j.disconnect()},m=[r],e[4]=r,e[5]=x,e[6]=m):(x=e[5],m=e[6]),T.useEffect(x,m);let g,c;e[7]!==t||e[8]!==r?(g=()=>{const j=u.current;u.current=t,j&&!t&&h.current&&r()},c=[t,r],e[7]=t,e[8]=r,e[9]=g,e[10]=c):(g=e[9],c=e[10]),T.useEffect(g,c);let b;return e[11]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx("div",{className:"pointer-events-none h-px",ref:d}),e[11]=b):b=e[11],b},we=se(()=>Z(()=>import("./la3hbdhvtk897w0a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then(n=>n.ImageGenLibraryLightboxNew)),Ce=n=>{"use forget";const e=P.c(44),{conversation:s,className:l,hasMoreImages:a,generationRequestKeys:o,count:t,images:d,includeArchived:h,isHiddenView:u,onUnhide:f,onOpenLightbox:r,onlyUseThumbnail:x,isFetchingMore:m,onScrollToEnd:g}=n,c=u===void 0?!1:u,b=ne(),I=!ie()?fe:ge,v=t!=null&&t>d.length?t-d.length:null,y=m||a&&!d.length?Math.min(v!=null?v:I,I):0;let w;e[0]!==s||e[1]!==b||e[2]!==h||e[3]!==c?(w=G=>{le.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened");const A=oe(()=>re(s).id);ce(b,we,{initialIndex:G,includeArchived:h,visibilityFilter:c?"archived":"unarchived",clientThreadId:s.id,currentModelId:A})},e[0]=s,e[1]=b,e[2]=h,e[3]=c,e[4]=w):w=e[4];const p=w;let M;e[5]!==l?(M=O("w-full",l),e[5]=l,e[6]=M):M=e[6];let N;e[7]!==o?(N=o==null?void 0:o.map(Ee),e[7]=o,e[8]=N):N=e[8];let S;if(e[9]!==a||e[10]!==d||e[11]!==m||e[12]!==c||e[13]!==r||e[14]!==g||e[15]!==f||e[16]!==x||e[17]!==p||e[18]!==y){let G;e[20]!==c||e[21]!==r||e[22]!==f||e[23]!==x||e[24]!==p?(G=($,F)=>i.jsx(T.Fragment,{children:i.jsx(Se,{image:$,index:F,onlyUseThumbnail:x,onClick:()=>{r&&he()?r==null||r($,F):p(F)},onUnhide:D=>f==null?void 0:f(D.id),isHidden:c})},$.id),e[20]=c,e[21]=r,e[22]=f,e[23]=x,e[24]=p,e[25]=G):G=e[25];let A;e[26]!==d.length?(A=($,F)=>{const D=d.length+F;return i.jsx(U,{index:D,isPlaceholder:!0},D)},e[26]=d.length,e[27]=A):A=e[27];let R;e[28]!==a||e[29]!==m||e[30]!==g?(R=i.jsx(pe,{enabled:a,isFetching:m,onScrollToEnd:g},"scroll-to-end-after-placeholders"),e[28]=a,e[29]=m,e[30]=g,e[31]=R):R=e[31],S=d.map(G).concat(new Array(y).fill(null).map(A)).concat([R]),e[9]=a,e[10]=d,e[11]=m,e[12]=c,e[13]=r,e[14]=g,e[15]=f,e[16]=x,e[17]=p,e[18]=y,e[19]=S}else S=e[19];let E;e[32]!==N||e[33]!==S?(E=i.jsxs("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:[N,S]}),e[32]=N,e[33]=S,e[34]=E):E=e[34];let L;e[35]!==a||e[36]!==m?(L=a&&m&&i.jsx(de,{}),e[35]=a,e[36]=m,e[37]=L):L=e[37];let k;e[38]!==L?(k=i.jsx("div",{className:"flex h-8 items-center justify-center",children:L}),e[38]=L,e[39]=k):k=e[39];let C;return e[40]!==M||e[41]!==E||e[42]!==k?(C=i.jsxs("div",{className:M,children:[E,k]}),e[40]=M,e[41]=E,e[42]=k,e[43]=C):C=e[43],C};function Me(n){"use forget";const e=P.c(5),{requestKey:s}=n;let l;e[0]!==s?(l=()=>{const t=xe(ue(),s);return t==null?void 0:t.state$()},e[0]=s,e[1]=l):l=e[1];const a=ae(l);if(a==null){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx(U,{index:0,isPlaceholder:!0,children:i.jsx(z,{id:"EmcVXU",defaultMessage:"Loading"})}),e[2]=t):t=e[2],t}let o;return e[3]!==a?(o=i.jsx(U,{index:0,isPlaceholder:!0,children:i.jsx(Ne,{state:a})}),e[3]=a,e[4]=o):o=e[4],o}function Ne(n){"use forget";const e=P.c(7),{state:s}=n;let l;e:{switch(s.status){case"created":{let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx(z,{id:"R7m5jN",defaultMessage:"Created"}),e[0]=t):t=e[0],l=t;break e}case"waiting-on-files":{let t;e[1]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx(z,{id:"rXf1Xk",defaultMessage:"Waiting on files"}),e[1]=t):t=e[1],l=t;break e}case"generating":{let t;e[2]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx(z,{id:"iPuM49",defaultMessage:"Generating"}),e[2]=t):t=e[2],l=t;break e}case"failed":{let t;e[3]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx(z,{id:"xdzLSJ",defaultMessage:"Failed"}),e[3]=t):t=e[3],l=t;break e}case"succeeded":{let t;e[4]===Symbol.for("react.memo_cache_sentinel")?(t=i.jsx(z,{id:"L8uvew",defaultMessage:"Succeeded"}),e[4]=t):t=e[4],l=t;break e}}l=void 0}const a=l;let o;return e[5]!==a?(o=i.jsx("div",{className:"text-token-text-secondary flex h-full items-center justify-center text-sm font-medium",children:a}),e[5]=a,e[6]=o):o=e[6],o}function Se(n){"use forget";var N,S,E,L,k,C,G;const e=P.c(25),{image:s,index:l,onClick:a,onUnhide:o,isHidden:t,onlyUseThumbnail:d}=n,{asset_pointer:h,conversation_id:u,message_id:f,id:r,url:x,width:m,height:g,prompt:c,title:b}=s,j=(E=(S=(N=s.encodings)==null?void 0:N.thumbnail)==null?void 0:S.path)!=null?E:x,I=d&&j?j:(C=(k=(L=s.encodings)==null?void 0:L.md)==null?void 0:k.path)!=null?C:x,v=K();let _;e[0]!==s||e[1]!==a?(_=()=>a==null?void 0:a(s),e[0]=s,e[1]=a,e[2]=_):_=e[2];const y=(G=c!=null?c:b)!=null?G:"";let w;e[3]!==h||e[4]!==u||e[5]!==t||e[6]!==f||e[7]!==x?(w=!t&&u!=null&&f!=null&&i.jsx(je,{imageAssetPointer:h!=null?h:void 0,imageUrl:x!=null?x:void 0,clientThreadId:u,serverThreadId:u,messageId:f,showRatingButtons:!1}),e[3]=h,e[4]=u,e[5]=t,e[6]=f,e[7]=x,e[8]=w):w=e[8];let p;e[9]!==s||e[10]!==v||e[11]!==t||e[12]!==o?(p=t&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pointer-events-none absolute inset-0 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:i.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 bg-linear-to-b from-transparent to-black/30"})}),i.jsx("div",{className:"absolute end-1 bottom-1 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:i.jsxs("button",{className:"z-11 flex h-10 items-center gap-1 rounded-xl px-2 text-sm font-medium text-white hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md",onClick:()=>{o==null||o(s)},"aria-label":v.formatMessage({id:"fjXWf2",defaultMessage:"Unhide image"}),type:"button",children:[i.jsx(me,{className:"h-4 w-4"}),i.jsx("span",{className:"max-md:hidden",children:i.jsx(z,{id:"wEyKC9",defaultMessage:"Unhide"})})]})})]}),e[9]=s,e[10]=v,e[11]=t,e[12]=o,e[13]=p):p=e[13];let M;return e[14]!==g||e[15]!==r||e[16]!==I||e[17]!==l||e[18]!==_||e[19]!==y||e[20]!==w||e[21]!==p||e[22]!==j||e[23]!==m?(M=i.jsxs(U,{index:l,src:I,onClick:_,thumbnail:j,width:m,height:g,alt:y,children:[w,p]},r),e[14]=g,e[15]=r,e[16]=I,e[17]=l,e[18]=_,e[19]=y,e[20]=w,e[21]=p,e[22]=j,e[23]=m,e[24]=M):M=e[24],M}function Ee(n){return i.jsx(Me,{requestKey:n},n)}export{Ce as I};
//# sourceMappingURL=iemc8e7pm296gf3y.js.map
