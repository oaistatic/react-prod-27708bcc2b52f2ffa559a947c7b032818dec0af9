import{j as e,r as l,e as W,M as c}from"./fg33krlcm0qyi6yw.js";import{N as S,z as E,dx as G,cL as R}from"./k65njl5wlgspihfr.js";import{I as O,b as T,d as j,ck as B,P as u,C as N,gK as A,g2 as w,ga as h,ad as M,qj as D,gJ as z,M as y}from"./mtk1qztvnb31pw5r.js";function F({room:t,onClose:g}){"use no forget";var C;const p=T(),f=O(p),v=(C=f==null?void 0:f.isWorkspaceAccount())!=null?C:!1,m=S(p),n=j(()=>t.groupLink$()),d=j(()=>t.members$().length),o=l.useRef(!1),I=l.useRef(null),[x,L]=l.useState(!1),a=W(),r=B(p),k=a.formatMessage({id:"yXlmL4",defaultMessage:"Copied group link to clipboard"}),_=l.useRef(!1),b=l.useRef(null);return l.useEffect(()=>{_.current||(_.current=!0,u.logEventWithStatsig("Calpico - group link - modal shown","chatgpt_web_calpico_group_link_modal_shown",{room_id:t.id}))},[t.id]),e.jsx(N,{testId:"modal-manage-group-link",isOpen:!0,onClose:()=>g(),type:"success",title:a.formatMessage({id:"mjQ4I1",defaultMessage:"Group link"}),primaryButton:n==null?e.jsx(y.Button,{title:a.formatMessage({id:"htBXxu",defaultMessage:"Create link"}),color:"primary",onClick:async()=>{var s;if(!o.current)try{o.current=!0;const i=await m.createGroupLink$({roomId:t.id});navigator.clipboard.writeText(i),r.success(k),u.logEventWithStatsig("Calpico - group link - manually created","chatgpt_web_calpico_group_link_manually_created",{room_id:t.id})}catch(i){r.danger((s=h(i))!=null?s:a.formatMessage(M.somethingWentWrong))}finally{o.current=!1}},"data-testid":"manage-group-link-create-button"}):e.jsx(y.Button,{title:a.formatMessage({id:"C9GEAn",defaultMessage:"Copy link"}),color:"primary",onClick:()=>{u.logEventWithStatsig("Calpico - group link - copied","chatgpt_web_calpico_group_link_copied",{room_id:t.id}),navigator.clipboard.writeText(n),r.success(k),g()},"data-testid":"manage-group-link-copy-button"}),secondaryButton:e.jsx(y.Button,{title:a.formatMessage({id:"kdA3Jv",defaultMessage:"Cancel"}),color:"secondary",onClick:()=>g()}),children:e.jsxs("div",{className:"space-y-3",children:[n==null?null:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{ariaLabel:a.formatMessage({id:"fiAOIN",defaultMessage:"Group link"}),readOnly:!0,className:"my-1 w-full px-3 py-2",inputClassName:"bg-token-bg-primary! text-token-text-secondary",name:"group-link",type:"url",value:n,autoComplete:"off","data-1p-ignore":!0,onClick:()=>{b.current!==n&&(b.current=n,u.logEventWithStatsig("Calpico - group link - copied","chatgpt_web_calpico_group_link_copied",{room_id:t.id}),navigator.clipboard.writeText(n),r.success(k))}}),e.jsx(A,{open:x,onOpenChange:s=>{L(s)},triggerButton:e.jsx(D,{ref:I,"aria-label":a.formatMessage({id:"cMZKTU",defaultMessage:"Manage group link"}),icon:z}),size:"auto",children:x?e.jsxs(e.Fragment,{children:[e.jsx(w.Item,{onClick:async()=>{var s;if(!o.current)try{o.current=!0,await m.resetGroupLink$({roomId:t.id}),r.success(a.formatMessage({id:"KWt7DF",defaultMessage:"Group link has been reset"})),u.logEventWithStatsig("Calpico - group link - reset","chatgpt_web_calpico_group_link_reset",{room_id:t.id})}catch(i){r.danger((s=h(i))!=null?s:a.formatMessage(M.somethingWentWrong))}finally{o.current=!1}},icon:G,color:"danger",children:d===1?e.jsx(c,{id:"+ze2X8",defaultMessage:"Reset link"}):e.jsx(c,{id:"dbY3LR",defaultMessage:"Reset link for all {memberCount} members",values:{memberCount:d}})}),e.jsx(w.Item,{onClick:async()=>{var s;if(!o.current)try{o.current=!0,await m.deleteGroupLink$({roomId:t.id}),r.success(a.formatMessage({id:"DabJGT",defaultMessage:"Group link has been deleted"})),u.logEventWithStatsig("Calpico - group link - deleted","chatgpt_web_calpico_group_link_deleted",{room_id:t.id})}catch(i){r.danger((s=h(i))!=null?s:a.formatMessage(M.somethingWentWrong))}finally{o.current=!1}},icon:R,color:"danger",children:d===1?e.jsx(c,{id:"LNUwGz",defaultMessage:"Delete link"}):e.jsx(c,{id:"xSrxa4",defaultMessage:"Delete link for all {memberCount} members",values:{memberCount:d}})})]}):null})]}),e.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:v?e.jsx(c,{id:"7n05yW",defaultMessage:"Use a group link to invite others to join your group chat. Only members of your workspace can join your group chat with this link, and they’ll be able to see the previous messages in this group chat."}):e.jsx(c,{id:"sC6q5y",defaultMessage:"Use a group link to invite others to join your group chat. Anyone can join your group chat with this link, and they’ll be able to see the previous messages in this group chat."})})]})})}const K=({room:t,onClose:g})=>{"use no forget";return e.jsx(F,{room:t,onClose:g})};export{K as CalpicoManageGroupLinkModalContainer};
//# sourceMappingURL=duoq7ejw2jqizqxh.js.map
