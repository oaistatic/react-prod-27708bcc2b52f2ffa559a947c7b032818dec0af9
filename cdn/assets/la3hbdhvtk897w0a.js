var F=Object.defineProperty,W=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var B=(t,e,s)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,$=(t,e)=>{for(var s in e||(e={}))z.call(e,s)&&B(t,s,e[s]);if(O)for(var s of O(e))Y.call(e,s)&&B(t,s,e[s]);return t},q=(t,e)=>W(t,Z(e));import{c as K,e as U,i as V,j as o,f as X,v as J}from"./fg33krlcm0qyi6yw.js";import{dB as Q,e as ee,af as ae,T as A,P as G,i7 as te,sz as se,eW as ie}from"./mtk1qztvnb31pw5r.js";import{fZ as oe,f_ as ne,f$ as re,g0 as le,Z as R,ci as ce,g1 as ge,cy as de,fu as he,g2 as me,g3 as _e}from"./k65njl5wlgspihfr.js";import{LightboxNew as L}from"./pdv21chic8hs0mt3.js";import{I as ue}from"./gqx9i5tb3deqoo5z.js";import{S as pe}from"./fj25p15jq4efcoma.js";import"./haneze5lyzwaewf8.js";import"./dg5jraediw4l39ow.js";import"./hb1mva1gmw4bcs8w.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";const fe=5,Ae=t=>{"use forget";const e=K.c(29),{initialIndex:s,onClose:i,clientThreadId:_,currentModelId:c,includeArchived:u,visibilityFilter:D}=t,I=ee(),g=Q(I,_),n=U(),M=oe(),C=ae(I).checkGate("1520205231"),{archiveMutation:w}=ne(),y=V(),{images:d,fetchNextPage:E,hasNextPage:k,isFetchingNextPage:P}=re(u,D);let p;e[0]!==E||e[1]!==k||e[2]!==d.length||e[3]!==P?(p=r=>{k&&r>=Math.max(0,d.length-fe)&&!P&&E()},e[0]=E,e[1]=k,e[2]=d.length,e[3]=P,e[4]=p):p=e[4];const S=p,j=le(I);let f;e[5]!==g||e[6]!==j?(f=r=>{r.promptMessage&&j(J(),{model:ie(g),optimisticMessages:[r.promptMessage,_e("Analyzing")],asyncWork:()=>Promise.resolve(r)})},e[5]=g,e[6]=j,e[7]=f):f=e[7];const T=f;let b;e[8]!==d?(b=d.map(be),e[8]=d,e[9]=b):b=e[9];const N=b;let h;e[10]!==w||e[11]!==C||e[12]!==M||e[13]!==n||e[14]!==y||e[15]!==i?(h=o.jsx(L.LightboxHeaderActions,{children:r=>{const{activeImage:a}=r;return o.jsxs("div",{className:"flex gap-1 md:gap-2",children:[o.jsx(A,{label:n.formatMessage(l.openInChat),triggerAs:null,children:o.jsx(R,{className:"aspect-square",icon:ce,onClick:v=>{G.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),v.preventDefault(),ge({className:"from-lightbox",update:async()=>{i(),await y("/c/".concat(a==null?void 0:a.conversationId,"?message=").concat(a==null?void 0:a.messageId),{preventScrollReset:!0})}})},"aria-label":n.formatMessage(l.openInChat)})}),C&&a&&o.jsx(A,{label:n.formatMessage(a.archived?l.unarchive:l.archive),triggerAs:null,children:o.jsx(R,{className:"aspect-square",icon:a.archived?de:te,onClick:()=>{G.logEventWithStatsig(a.archived?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",a.archived?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),w.mutate({imageId:a.id,operation:a.archived?"unarchive":"archive"})},"aria-label":n.formatMessage(a.archived?l.unarchive:l.archive)})}),o.jsx(A,{label:n.formatMessage(l.download),triggerAs:null,children:o.jsx(R,{className:"aspect-square",icon:he,onClick:()=>{var v,H;G.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),me({url:(v=a==null?void 0:a.url)!=null?v:"",fileName:"".concat((H=a==null?void 0:a.title)!=null?H:n.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"}),".png")})},"aria-label":n.formatMessage(l.download)})}),M()&&(a==null?void 0:a.messageId)&&o.jsx(pe,{assetPointer:a.assetPointer,serverThreadId:a.conversationId,messageId:a.messageId})]})}}),e[10]=w,e[11]=C,e[12]=M,e[13]=n,e[14]=y,e[15]=i,e[16]=h):h=e[16];let m;e[17]!==g.id||e[18]!==c||e[19]!==i||e[20]!==T?(m=o.jsx(L.Footer,{children:r=>{const{activeImage:a}=r;return o.jsx(ue,{clientThreadId:g.id,currentModelId:c,onRequestCompletion:T,onClose:i,activeImage:a})}}),e[17]=g.id,e[18]=c,e[19]=i,e[20]=T,e[21]=m):m=e[21];let x;return e[22]!==S||e[23]!==s||e[24]!==N||e[25]!==i||e[26]!==h||e[27]!==m?(x=o.jsxs(L.Root,{source:se.CHATGPT_IMAGE_LIGHTBOX_SOURCE_TYPE_IMAGE_HOME_LIBRARY,images:N,initialIndex:s,onClose:i,onIndexChange:S,translucentBackground:!0,closeOnPointerDownInside:!0,children:[h,m]}),e[22]=S,e[23]=s,e[24]=N,e[25]=i,e[26]=h,e[27]=m,e[28]=x):x=e[28],x},l=X({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}});function be(t){var e,s,i,_,c,u;return q($({},t),{archived:(e=t.is_archived)!=null?e:!1,transformationId:(s=t.transformation_id)!=null?s:null,assetPointer:(i=t.asset_pointer)!=null?i:null,thumbnail:(u=(c=(_=t.encodings)==null?void 0:_.thumbnail)==null?void 0:c.path)!=null?u:null})}export{Ae as ImageGenLibraryLightboxNew};
//# sourceMappingURL=la3hbdhvtk897w0a.js.map
