import{r as t,j as w}from"./fg33krlcm0qyi6yw.js";import{_ as d}from"./mtk1qztvnb31pw5r.js";import{u as R}from"./gi9hyxr9tw3nqr5l.js";import{d as b}from"./goc4414xjv43pin0.js";import{E as p}from"./ej6tlexkw0sv7caa.js";import"./f96c6fguu1kcw0go.js";import"./hwa6pbq6i57ntwuh.js";import"./k65njl5wlgspihfr.js";function P({startIndex:E,walnutId:x,onExit:a}){const{presentationMap:v}=R(),g=v[x],{presentation:r}=g,[k,f]=t.useState(E),c=t.useRef(null),m=t.useRef(null);t.useEffect(()=>{var i;const e=m.current;if(!e)return;(i=e.requestFullscreen)==null||i.call(e).catch(n=>{d.addError(n)});const s=()=>{document.fullscreenElement||a()};return document.addEventListener("fullscreenchange",s),()=>{document.removeEventListener("fullscreenchange",s),document.fullscreenElement&&document.exitFullscreen().catch(n=>{d.addError(n)})}},[a]);const o=r?r.slides[k]:void 0;t.useEffect(()=>{if(!r||!o||!c.current)return;const e=c.current.getContext("2d");if(!e)return;const s=o.widthEmu*p,i=o.heightEmu*p,n=window.devicePixelRatio||1;c.current.width=s*n,c.current.height=i*n,e.resetTransform(),e.scale(n,n),b(o,r,e)},[o,r]);const l=t.useCallback(()=>{r&&f(e=>Math.min(e+1,r.slides.length-1))},[r]),h=t.useCallback(()=>f(e=>Math.max(e-1,0)),[]),u=t.useCallback(e=>{switch(e.key){case"ArrowRight":case"ArrowDown":case" ":case"Enter":l();break;case"ArrowLeft":case"ArrowUp":h();break;case"Escape":document.fullscreenElement?document.exitFullscreen().catch(s=>{d.addError(s)}):a();break}},[l,h,a]);return t.useEffect(()=>(window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)),[u]),w.jsx("div",{ref:m,className:"fixed inset-0 flex items-center justify-center p-6",onClick:l,children:w.jsx("canvas",{ref:c,className:"max-h-full max-w-full bg-white"})})}export{P as Slideshow};
//# sourceMappingURL=aca3smawwxanpb7s.js.map
