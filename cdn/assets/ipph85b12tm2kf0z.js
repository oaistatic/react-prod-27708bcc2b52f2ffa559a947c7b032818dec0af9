var xt=Object.defineProperty,ht=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable;var He=(t,e,n)=>e in t?xt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q=(t,e)=>{for(var n in e||(e={}))gt.call(e,n)&&He(t,n,e[n]);if(Be)for(var n of Be(e))wt.call(e,n)&&He(t,n,e[n]);return t},Z=(t,e)=>ht(t,pt(e));import{j as s,c as V,e as K,M as R,r as H,a as Ke,u as bt,i as ve,f as vt,m as _e,E as ae,L as _t,d as xe,ae as re}from"./fg33krlcm0qyi6yw.js";import{B as jt}from"./eb2ntjcgqhqizd13.js";import{ao as kt,AE as yt,bp as ee,AF as Fe,aq as Ge,AG as Qe,AH as Ct,AI as Nt,q9 as St,AJ as Et,AK as Mt,AL as Tt,AM as Xe,AN as Rt,cw as At,kZ as Ye,AO as Je,AP as Ot,v0 as Pt,B as he,v2 as It,by as Wt,pY as Lt,un as Dt,sM as Bt}from"./k65njl5wlgspihfr.js";import{m as ce,b as z,d as Ht,t9 as je,bp as le,bt as ne,l as se,T as Ze,wt as Ft,a9 as q,jR as Gt,c0 as oe,iw as ke,c as Ut,o as Y,bq as $t,bb as Vt,bg as ie,iq as qt,gK as zt,g2 as pe,bv as Kt,jQ as Qt,aS as et,bO as tt,nX as st,C as at,ag as Xt,H as nt,ck as Yt,ab as Jt,it as Zt,hd as es,cU as ts,qe as ss,I as as,hu as ns,hg as os,g as rs,fW as is,fX as te,m2 as Ue,fe as ls,x4 as cs,yM as ds,iW as ms,lN as fs,vs as us,yK as ye}from"./mtk1qztvnb31pw5r.js";import{u as xs,W as Ce}from"./dm7q440f2oraxz29.js";import{C as X,u as hs}from"./g4gir3drg6t1kz84.js";import{R as ps}from"./kan8xn0647n6mb1t.js";import{W as gs}from"./gq2vu050vpxxbur2.js";import{b as ws,a as bs,c as vs,E as _s,h as Ne}from"./gp2ycmyaevvj2458.js";import{W as ot,a as rt}from"./kpobiwwkg2o2u14w.js";import{N as js,O as it,P as ks,h as $,v as de,q as ys,L as Cs,b as Ns,m as lt,g as Ss,x as Es,t as Ms,f as Ts,Q as Rs}from"./n0ab5m1z76n8mazm.js";import{T as As}from"./fznnr8l9owxbou6l.js";import{A as Os}from"./dcp7peq4y6a4kabz.js";import{I as Ps}from"./blmsijdyv0yxybpw.js";import{W as ct}from"./sy1xvqwioh9ks4z8.js";import{u as Se,a as Is,c as Ws}from"./ek8ypz08ir47cco2.js";import{u as Ee}from"./c5rp1fxyhb31ofwg.js";import{C as Me}from"./hjvnpytvkws4e5rs.js";import{s as Ls}from"./cmaobpdpreyiep8p.js";import{g as dt,a as Ds,W as me}from"./mg1nwivo9tzc7m2p.js";import{W as we,i as Bs}from"./eqi3xjytwhmszqqa.js";import{U as Hs}from"./ddc6uop8fm5y7x8o.js";import{useSetupBaseWhamKeyboardActions as Fs}from"./iqonnsay2vmalfwk.js";import{g as Gs}from"./j3x02iqqi345yx57.js";import{h as mt}from"./oqrnd1sbz7sw61c1.js";import{u as Us,A as $s,R as Vs,N as qs,a as zs}from"./m1mge0ilkwpbadjy.js";import{F as $e}from"./c39l581penbg6uen.js";import{b as Ks}from"./lptwpbjabrvjmhsj.js";import{a as Qs,u as Xs,o as Ys,T as Js,g as Zs}from"./eymwc79qm1xcdho6.js";import{u as ea}from"./0hruh9i7xt25bbur.js";import{u as ta}from"./mh627gt08lvdeswk.js";import{u as sa}from"./bgx9m29b5moow7ak.js";function ft({disabled:t,children:e}){return t?s.jsx("div",{className:"pointer-events-none opacity-50 select-none","aria-hidden":"true",tabIndex:-1,inert:!0,children:e}):e}function aa(t,e){"use forget";return e}const Ve=aa;function na(t){"use forget";const e=V.c(35),{isGitHubConnected:n,onClickCreateEnvironment:l}=t,f=n===void 0?!1:n,c=z(),i=K(),r=ce(),o=Ve(ra,!1),m=Ve(oa,X.Complete),a=o&&m===X.NoGithubConnection,d=o&&m===X.NoEnvironmentsCreated;let u;e[0]!==c?(u=()=>Ft(c,ne.GITHUB_CONNECTOR,{productSku:le.CODEX}),e[0]=c,e[1]=u):u=e[1];const x=Ht(u),w=x===void 0;let h;e[2]!==i||e[3]!==r?(h=()=>{r.danger(i.formatMessage({id:"+vfzDI",defaultMessage:"Error fetching connector, please ensure GitHub is enabled for your account"}))},e[2]=i,e[3]=r,e[4]=h):h=e[4];const p=h,j=p,{isConnected:y,isLoading:k,openGithubModal:b,error:C,refetch:_}=je(ne.GITHUB_CONNECTOR,"github","/codex",le.CODEX,p,j);let S;e[5]!==_?(S=s.jsx(ps,{refetchConnectorData:_}),e[5]=_,e[6]=S):S=e[6];const v=S,g=k||w;let N;e[7]!==a||e[8]!==y||e[9]!==x||e[10]!==b?(N=()=>{!a&&(!x||y)||b()},e[7]=a,e[8]=y,e[9]=x,e[10]=b,e[11]=N):N=e[11];const T=a?!1:!x||y;let M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(R,{id:"wham.codexOnboardingConnections.connectGithub",defaultMessage:"Connect to GitHub"}),e[12]=M):M=e[12];let A;e[13]!==g||e[14]!==N||e[15]!==T?(A=s.jsx(q,{color:"primary",size:"medium",icon:Gt,loading:g,onClick:N,disabled:T,className:"px-3",children:M}),e[13]=g,e[14]=N,e[15]=T,e[16]=A):A=e[16];const O=A;let P;e[17]!==l?(P=()=>l==null?void 0:l(),e[17]=l,e[18]=P):P=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(R,{id:"wham.createEnvironment.cta",defaultMessage:"Create environment"}),e[19]=E):E=e[19];let B;e[20]!==P?(B=s.jsx(q,{color:"secondary",size:"medium",icon:kt,onClick:P,className:"px-3",children:E}),e[20]=P,e[21]=B):B=e[21];const L=B,D=f||d,I=D?L:C?v:O;let W;e[22]===Symbol.for("react.memo_cache_sentinel")?(W=se("bg-token-bg-tertiary","rounded-2xl","w-full","min-h-[220px]","flex items-center justify-center","pointer-events-auto","border-token-border-light","border"),e[22]=W):W=e[22];let F;e[23]!==I||e[24]!==C||e[25]!==a||e[26]!==i||e[27]!==x||e[28]!==D?(F=D||C||x||a?I:s.jsx(Ze,{label:i.formatMessage({id:"wham.codexOnboardingConnections.githubDisabledByAdmin",defaultMessage:"Disabled by workspace admin"}),children:s.jsx("div",{children:I})}),e[23]=I,e[24]=C,e[25]=a,e[26]=i,e[27]=x,e[28]=D,e[29]=F):F=e[29];let G;e[30]!==D?(G=!D&&s.jsx("div",{className:"text-token-text-secondary text-xs",children:s.jsx(R,{id:"wham.whamComposer.connectGithubSubtitle",defaultMessage:"Connect a repository to create a task"})}),e[30]=D,e[31]=G):G=e[31];let U;return e[32]!==F||e[33]!==G?(U=s.jsx("div",{className:W,children:s.jsxs("div",{className:"flex flex-col items-center gap-2 p-8",children:[F,G]})}),e[32]=F,e[33]=G,e[34]=U):U=e[34],U}function oa(t){return t.codexOnboardingStateOverride}function ra(t){return t.showDevOnboardingOverrides}function ia(){var c;const{data:t,isLoading:e}=js(),n=(c=t==null?void 0:t.items)!=null?c:[],[l,f]=H.useState(null);return e&&n.length===0?s.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:s.jsx(oe,{})}):s.jsx("div",{className:"flex flex-col justify-center",children:n.map((i,r)=>{var o;return s.jsx(ot,{index:r,taskListItem:i,hoveredIndex:l,onMouseEnter:()=>f(r),onMouseLeave:()=>f(null),linkPath:"/s/".concat(i.share_task_id),showArchiveButton:!1,currentFilter:"current"},(o=i.id)!=null?o:"".concat(r))})})}function Te(){"use forget";const t=V.c(56),e=z(),n=K(),{homeTab:l,setHomeTab:f}=it();let c;t[0]!==e?(c=ks(e),t[0]=e,t[1]=c):c=t[1];const i=c,r=$(ca),o=$(la),{eligible:m,isLoading:a}=yt(),d=i&&!a&&m;let u;t[2]!==e||t[3]!==m||t[4]!==a||t[5]!==f||t[6]!==o?(u=W=>{f(W),W==="code_reviews"&&!a&&m&&ee(e,Fe),W==="all"&&o(!1)},t[2]=e,t[3]=m,t[4]=a,t[5]=f,t[6]=o,t[7]=u):u=t[7];const x=u;let w,h;t[8]!==e||t[9]!==l||t[10]!==m||t[11]!==a?(w=()=>{l==="code_reviews"&&!a&&m&&ee(e,Fe)},h=[e,l,m,a],t[8]=e,t[9]=l,t[10]=m,t[11]=a,t[12]=w,t[13]=h):(w=t[12],h=t[13]),H.useEffect(w,h);let p,j;t[14]!==l||t[15]!==o?(p=()=>{l==="all"&&o(!1)},j=[l,o],t[14]=l,t[15]=o,t[16]=p,t[17]=j):(p=t[16],j=t[17]),H.useEffect(p,j);let y;t[18]!==n?(y=n.formatMessage({id:"wham.whamTasksHeader.tasks",defaultMessage:"Tasks"}),t[18]=n,t[19]=y):y=t[19];const k=y;let b;t[20]!==r?(b=r?s.jsx("span",{"aria-hidden":"true",className:"absolute -end-2 top-1 size-1.5 -translate-y-1/2 rounded-full bg-blue-400"}):null,t[20]=r,t[21]=b):b=t[21];let C;t[22]!==b||t[23]!==k?(C=s.jsxs("span",{className:"relative inline-flex items-center",children:[k,b]}),t[22]=b,t[23]=k,t[24]=C):C=t[24];const _=C;let S;t[25]!==n?(S=n.formatMessage({id:"wham.whamTasksHeader.codeReviews",defaultMessage:"Code reviews"}),t[25]=n,t[26]=S):S=t[26];const v=S;let g;t[27]!==d?(g=d?s.jsx("span",{"aria-hidden":"true",className:"absolute -end-2 top-1 size-1.5 -translate-y-1/2 rounded-full bg-blue-400"}):null,t[27]=d,t[28]=g):g=t[28];let N;t[29]!==v||t[30]!==g?(N=s.jsxs("span",{className:"relative inline-flex items-center",children:[v,g]}),t[29]=v,t[30]=g,t[31]=N):N=t[31];const T=N;let M;t[32]!==n?(M=n.formatMessage({id:"wham.whamTasksHeader.tasksAriaLabel",defaultMessage:"Tab selector to view active tasks"}),t[32]=n,t[33]=M):M=t[33];let A;t[34]!==M||t[35]!==_?(A={label:_,ariaLabel:M,key:"all"},t[34]=M,t[35]=_,t[36]=A):A=t[36];let O;t[37]!==i||t[38]!==T||t[39]!==n?(O=i?[{label:T,ariaLabel:n.formatMessage({id:"wham.whamTasksHeader.codeReviewsAriaLabel",defaultMessage:"Tab selector to view code reviews"}),key:"code_reviews"}]:[],t[37]=i,t[38]=T,t[39]=n,t[40]=O):O=t[40];let P;t[41]!==n?(P=n.formatMessage({id:"wham.whamTasksHeader.archived",defaultMessage:"Archive"}),t[41]=n,t[42]=P):P=t[42];let E;t[43]!==n?(E=n.formatMessage({id:"wham.whamTasksHeader.archivedAriaLabel",defaultMessage:"Tab selector to view archived tasks"}),t[43]=n,t[44]=E):E=t[44];let B;t[45]!==P||t[46]!==E?(B={label:P,ariaLabel:E,key:"archived"},t[45]=P,t[46]=E,t[47]=B):B=t[47];let L;t[48]!==A||t[49]!==O||t[50]!==B?(L=[A,...O,B],t[48]=A,t[49]=O,t[50]=B,t[51]=L):L=t[51];const D=L;let I;return t[52]!==x||t[53]!==l||t[54]!==D?(I=s.jsx("div",{className:"border-token-border-primary mt-4 flex w-full flex-wrap items-center justify-between gap-3 border-b align-middle md:mt-6",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(As,{currentTab:l,onChange:x,withUnderline:!0,skipTabUnderlineAnimation:!0,tabs:D})})}),t[52]=x,t[53]=l,t[54]=D,t[55]=I):I=t[55],I}function la(t){return t.setShouldHighlightTasksTab}function ca(t){return t.shouldHighlightTasksTab}function da(){const t=K(),e=ce(),n=$(p=>p.environmentId),l=$(p=>p.branch),[f,c]=H.useState(null),i=Ke(),{isCreatingEnvironment:r,ensureEnvironment:o,hasRepository:m}=xs(),a=!!(n&&l),d=!a&&!m,u=!a&&!m,x=[{id:"ask-0",type:"ask",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.0",defaultMessage:"Explain the codebase to a newcomer. What is the general structure, what are the important things to know, and what are some pointers for things to learn next?"})},{id:"build-1",type:"build",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.build.prompt.1",defaultMessage:"Pick a part of the codebase that seems important and find and fix a bug."})},{id:"ask-2",type:"ask",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.2",defaultMessage:"Go through the codebase, find issues and propose one task to fix a typo, one task to fix a bug, one task to fix a code comment or documentation discrepancy, and one task to improve a test."})}],{mutate:w}=bt({mutationFn:async({prompt:p,id:j})=>{const{environmentId:y,branch:k}=$.getState();if(!y||!k)throw e.danger(t.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"})),new Error("Environment, content, and branch are required");const b=crypto.randomUUID();return $.getState().addPendingTaskId(b),c(j),await ct.createNewTask(y,k,p,!1).catch(_=>{throw $.getState().removePendingTaskId(b),e.danger(t.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"}),{id:b,duration:5,hasCloseButton:!0}),_}).then(_=>($.getState().assignPendingTaskToFinalTask(b,_.task.id),_))},onSuccess:()=>{i.refetchQueries({queryKey:["wham","tasks"]}),i.refetchQueries({queryKey:["wham","usage","rate-limit-status"]})},onSettled:()=>{c(null)}}),h=async p=>{if(!a){if(!m){e.danger(t.formatMessage({id:"wham.startFirstTask.selectRepository",defaultMessage:"Select a repository before starting a task"}));return}c(p.id);try{if(!await o()){c(null);return}}catch(j){c(null);return}w({prompt:p.prompt,id:p.id});return}w({prompt:p.prompt,id:p.id})};return s.jsxs("div",{className:"w-full px-3 md:px-0",children:[s.jsx("div",{className:"text-token-text-primary ps-1 pt-6 pb-3 text-sm font-medium",children:s.jsx(R,{id:"wham.startFirstTask.title",defaultMessage:"Start your first task"})}),s.jsx("div",{className:"bg-token-bg-tertiary dark:bg-token-bg-secondary rounded-3xl p-4",children:s.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:x.map(p=>s.jsxs("div",{className:se("bg-token-bg-primary dark:bg-token-bg-tertiary flex flex-col justify-between rounded-2xl p-4 shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]"),children:[s.jsx("div",{className:"text-token-text-primary pb-4 text-sm leading-5.5",children:p.prompt}),s.jsx(Ze,{disabled:!u,label:u?t.formatMessage({id:"wham.startFirstTask.disabledTooltip",defaultMessage:"Please select a repository to start a task"}):null,children:s.jsx(q,{color:"secondary",disabled:d||r,loading:f===p.id,className:"self-start",onClick:()=>h(p),children:s.jsx(R,{id:"wham.startFirstTask.cta",defaultMessage:"Start"})})})]},p.id))})})]})}function ma(){const t=Se(),e=ve(),n=ce(),l=K(),{data:f}=de(),{mutate:c,isPending:i}=Ee({showToast:!1}),r=()=>{c({codeReviewPreference:"always"},{onSuccess:()=>{n.success(l.formatMessage({id:"wham.codeReviewSuggestionsCard.enableForMeSuccess",defaultMessage:"Code review is now enabled for you"}),{duration:2})},onError:()=>{n.danger(l.formatMessage({id:"wham.codeReviewSuggestionsCard.enableForMeError",defaultMessage:"Failed to enable code review for you"}),{duration:2})}})},o=()=>{e("/codex/settings/code-review")};return(f==null?void 0:f.code_review_preference)==="always"?s.jsxs("div",{className:"flex max-w-[300px] flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary flex flex-col gap-2 rounded-xl p-2 shadow",children:s.jsx(Ge,{className:"icon-xl"})}),s.jsx("p",{className:"text-token-text-primary font-medium",children:s.jsx(R,{id:"wham.codeReviewSuggestionsCard.codeReviewEnabledTitle",defaultMessage:"Code review enabled"})}),s.jsx("p",{className:"text-token-text-secondary text-center text-wrap",children:s.jsx(R,{id:"wham.codeReviewSuggestionsCard.codeReviewEnabledDescription",defaultMessage:"Codex will review PRs you push to connected repos."})}),s.jsx(q,{onClick:()=>e("/codex/settings/code-review"),className:"min-w-[220px]",children:s.jsx(R,{id:"wham.codexEnvironmentPopover.manageCodeReview",defaultMessage:"Manage code review"})})]}):s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary flex flex-col gap-2 rounded-xl p-2 shadow",children:s.jsx(Ge,{className:"icon-xl"})}),s.jsxs("div",{className:"text-centers flex max-w-[300px] flex-col items-center gap-2",children:[s.jsx("p",{className:"text-token-text-primary font-medium",children:s.jsx(R,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingTitle",defaultMessage:"Enable code review"})}),s.jsx("p",{className:"text-token-text-secondary text-center text-wrap",children:s.jsx(R,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingDescription",defaultMessage:"Catch critical bugs before they ship"})}),s.jsx(q,{onClick:r,className:"min-w-[220px]",loading:i,children:s.jsx(R,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingButton",defaultMessage:"Enable for me"})}),t&&s.jsx(q,{onClick:o,className:"min-w-[220px]",color:"secondary",children:s.jsx(R,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingButtonWorkspace",defaultMessage:"Enable for my workspace"})})]})]})}function fa(t){"use forget";const e=V.c(4),{filter:n,homeTab:l}=t,f=l||(n==="archived"?"archived":n==="code_review"?"code_reviews":"all");if(f==="code_reviews"&&n==="code_review"){let r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(ma,{}),e[0]=r):r=e[0],r}if(f==="archived"){let r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(R,{id:"wham.whamTasksSection.noArchivedTasks",defaultMessage:"No archived tasks"})}),e[1]=r):r=e[1],r}if(f==="all"){let r;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(da,{}),e[2]=r):r=e[2],r}let i;return e[3]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(R,{id:"wham.whamTasksSection.noActiveTasks",defaultMessage:"No active tasks"})}),e[3]=i):i=e[3],i}const ua=["today","lastSevenDays","older"],xa=vt({today:{id:"wham.whamTasksSection.group.today",defaultMessage:"Today"},lastSevenDays:{id:"wham.whamTasksSection.group.lastSevenDays",defaultMessage:"Last 7 Days"},older:{id:"wham.whamTasksSection.group.older",defaultMessage:"Older"}});function ha(t){var n;const e=(n=t.updated_at)!=null?n:t.created_at;return e?new Date(e*1e3):null}function pa(t){const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);return n.setDate(n.getDate()-7),t.reduce((l,f)=>{const c=ha(f);return c&&c>=e?(l.today.push(f),l):c&&c>=n?(l.lastSevenDays.push(f),l):(l.older.push(f),l)},{today:[],lastSevenDays:[],older:[]})}function ga(t){"use forget";const e=V.c(5),{groupKey:n,children:l}=t,f=xa[n];let c;e[0]!==f?(c=s.jsx("div",{className:"text-token-text-tertiary px-4 pt-6 pb-2 text-xs font-semibold uppercase md:px-3",children:s.jsx(R,Q({},f))}),e[0]=f,e[1]=c):c=e[1];let i;return e[2]!==l||e[3]!==c?(i=s.jsxs("div",{className:"flex flex-col",children:[c,l]}),e[2]=l,e[3]=c,e[4]=i):i=e[4],i}function wa(t){"use forget";var M;const e=V.c(31);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const{filterOverride:l,homeTab:f}=n,c=$(Na),i=f!=null?f:c;let r;e[2]!==i||e[3]!==l?(r=l!=null?l:Cs(i),e[2]=i,e[3]=l,e[4]=r):r=e[4];const o=r;let m;e[5]!==o?(m={filter:o,refetchOnMount:!0,refetchOnWindowFocus:!0},e[5]=o,e[6]=m):m=e[6];const{data:a,isLoading:d,error:u,fetchNextPage:x,hasNextPage:w,isFetchingNextPage:h,refetch:p,isPending:j}=ys(m);let y;e[7]!==(a==null?void 0:a.pages)?(y=(M=a==null?void 0:a.pages.flatMap(Ca))!=null?M:[],e[7]=a==null?void 0:a.pages,e[8]=y):y=e[8];const k=y;let b;e[9]!==k?(b=pa(k),e[9]=k,e[10]=b):b=e[10];const C=b,_=$(ya),S=$(ka),v=k.length>0,[g,N]=H.useState(null);let T;if(e[11]!==S||e[12]!==_||e[13]!==i||e[14]!==u||e[15]!==x||e[16]!==w||e[17]!==v||e[18]!==g||e[19]!==h||e[20]!==d||e[21]!==j||e[22]!==p||e[23]!==C||e[24]!==k||e[25]!==o){const A=Array.from(Object.entries(_)).filter(L=>{const[,D]=L;return!k.some(I=>I.id===D)}).map(ja).reverse(),O=Array.from(Object.entries(S)).filter(L=>{const[,D]=L;return!k.some(I=>I.id===D)}).map(_a).reverse(),P=k.length===0&&A.length===0&&O.length===0;let E;e[27]!==g||e[28]!==C||e[29]!==o?(E=ua.reduce((L,D)=>{const I=C[D];if(I.length===0)return L;const W=L.offset,F=I.map((G,U)=>{const J=W+U;return s.jsx(ot,{index:J,taskListItem:G,hoveredIndex:g,onMouseEnter:()=>{N(J)},onMouseLeave:()=>N(null),currentFilter:o,showArchiveButton:o!=="code_review"},G.id)});return{offset:W+I.length,elements:[...L.elements,s.jsx(ga,{groupKey:D,children:F},D)]}},{offset:0,elements:[]}),e[27]=g,e[28]=C,e[29]=o,e[30]=E):E=e[30];const B=E.elements;T=s.jsx("div",{className:"flex flex-col justify-center pb-20",children:d&&!v?s.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:s.jsx(oe,{})}):s.jsxs(s.Fragment,{children:[P&&s.jsx(s.Fragment,{children:u?s.jsxs("div",{className:"mt-6 flex w-full flex-col items-center justify-center gap-2 text-sm",children:[s.jsx("div",{className:"text-interactive-label-warning-secondary",children:s.jsx(R,{id:"wham.whamTasksSection.errorLoadingTasks",defaultMessage:"Error loading tasks"})}),s.jsx(q,{color:"secondary",onClick:()=>p(),children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(R,{id:"wham.whamTasksSection.retry",defaultMessage:"Retry"}),s.jsx(Os,{className:"icon-xs"})]})})]}):s.jsx("div",{className:"mt-6 flex h-full w-full items-center justify-center",children:s.jsx(fa,{filter:o,homeTab:i})})}),o==="current"&&A.map(va),o==="code_review"&&O.map(ba),B,s.jsx(Ps,{isFetchingNextPage:h||j,hasNextPage:w!=null?w:!1,fetchNextPage:x})]})}),e[11]=S,e[12]=_,e[13]=i,e[14]=u,e[15]=x,e[16]=w,e[17]=v,e[18]=g,e[19]=h,e[20]=d,e[21]=j,e[22]=p,e[23]=C,e[24]=k,e[25]=o,e[26]=T}else T=e[26];return T}function ba(t){return s.jsx(rt,{},t)}function va(t){return s.jsx(rt,{},t)}function _a(t){const[e]=t;return e}function ja(t){const[e]=t;return e}function ka(t){return t.pendingCodeReviewIds}function ya(t){return t.pendingTaskIds}function Ca(t){var e;return(e=t.items)!=null?e:[]}function Na(t){const{homeTab:e}=t;return e}const Re=H.memo(wa);function Sa(){"use forget";const t=V.c(22),e=z(),{eligible:n,isLoading:l}=Qe(),f=Ke(),c=K(),i=ce();if(l||!n)return null;let r;t[0]!==e?(r=()=>ee(e,Ct),t[0]=e,t[1]=r):r=t[1];const o=r;let m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(Nt,{className:"h-6 w-6 shrink-0"}),t[2]=m):m=t[2];let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("h2",{className:"text-sm font-semibold md:text-base",children:s.jsx(R,{id:"wham.alphaBanner.title",defaultMessage:"Codex Alpha"})}),t[3]=a):a=t[3];let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("div",{className:"flex flex-1 items-start gap-3 md:items-center md:gap-4",children:[m,s.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[a,s.jsx("p",{className:"text-token-text-secondary text-xs leading-5 md:text-sm",children:s.jsx(R,{id:"wham.alphaBanner.description",defaultMessage:"Get early access to new models and features."})})]})]}),t[4]=d):d=t[4];let u;t[5]!==c||t[6]!==o||t[7]!==f||t[8]!==i?(u=()=>{ct.updateUserPreferences({alphaOptIn:!0}).then(async()=>{await Ns(f),o(),i.success(c.formatMessage({id:"wham.alphaBanner.enrolled",defaultMessage:"Enrolled in Codex alpha. Update your selection anytime in your settings."}),{duration:3})}).catch(()=>i.danger(c.formatMessage({id:"wham.alphaBanner.failed",defaultMessage:"Failed to update user preferences"}),{duration:3}))},t[5]=c,t[6]=o,t[7]=f,t[8]=i,t[9]=u):u=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(R,{id:"wham.alphaBanner.cta",defaultMessage:"Join now"}),t[10]=x):x=t[10];let w;t[11]!==u?(w=s.jsx(q,{size:"small",color:"primary",className:"text-token-text-secondary h-9 px-6 text-sm md:px-7",onClick:u,children:x}),t[11]=u,t[12]=w):w=t[12];let h;t[13]!==c?(h=c.formatMessage({id:"wham.alphaBanner.dismiss",defaultMessage:"Dismiss Codex alpha banner"}),t[13]=c,t[14]=h):h=t[14];let p;t[15]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(ke,{className:"icon-sm"}),t[15]=p):p=t[15];let j;t[16]!==o||t[17]!==h?(j=s.jsx(q,{size:"small",color:"secondary",className:"text-token-text-tertiary border-token-border-subtle hover:bg-token-bg-secondary hover:text-token-text-primary h-9 w-9 text-sm font-medium",onClick:o,"aria-label":h,children:p}),t[16]=o,t[17]=h,t[18]=j):j=t[18];let y;return t[19]!==w||t[20]!==j?(y=s.jsx("div",{className:"mt-4 w-full px-3 md:px-0",children:s.jsx("div",{className:"border-token-border-subtle bg-token-bg-primary text-token-text-primary flex w-full flex-col gap-3 rounded-3xl border px-4 py-3 shadow-[0px_12px_32px_rgba(15,23,42,0.14)] md:px-6 md:py-4",children:s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[d,s.jsxs("div",{className:"flex flex-shrink-0 items-center gap-2",children:[w,j]})]})})}),t[19]=w,t[20]=j,t[21]=y):y=t[21],y}const Ea=Ut(Ls,"36ee55",20,20),Ae="codex_onboarding",be="code_review";function Ma(t){const e=new URLSearchParams(t);return e.set(Ae,be),e.toString()}function Ta(t){const e=new URLSearchParams(t);return e.delete(Ae),e.toString()}function Oe(t){"use forget";var U,J,Pe,Ie,We,Le,De;const e=V.c(30);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const{redirectUrl:l,onError:f}=n,c=z();let i;e[2]!==c?(i=Y(c,"423120313"),e[2]=c,e[3]=i):i=e[3];const r=i,{status:o}=St($t[ne.GITHUB_CONNECTOR]),m=o==="loading",a=!m&&o==="required",d=o==="error",{data:u,isLoading:x,error:w}=Et(),{isConnected:h,isLoading:p,openGithubModal:j,error:y}=je(ne.GITHUB_CONNECTOR,"github",l!=null?l:"/codex?codex_onboarding=code_review",le.CODEX),{data:k,isLoading:b,error:C}=de(),{eligible:_,isLoading:S}=Mt(),v=(k==null?void 0:k.code_review_preference)==="always",{data:g,isLoading:N,error:T}=lt(_&&!S&&r&&!p&&h);let M;e[4]!==(g==null?void 0:g.memberships)?(M=(U=g==null?void 0:g.memberships)!=null?U:[],e[4]=g==null?void 0:g.memberships,e[5]=M):M=e[5];let A;e[6]!==(g==null?void 0:g.other)?(A=(J=g==null?void 0:g.other)!=null?J:[],e[6]=g==null?void 0:g.other,e[7]=A):A=e[7];let O;e[8]!==M||e[9]!==A?(O=[...M,...A],e[8]=M,e[9]=A,e[10]=O):O=e[10];const P=O.length>0,E=!!((De=(Le=(We=(Ie=(Pe=T&&y)!=null?Pe:w)!=null?Ie:y)!=null?We:C)!=null?Le:d)!=null&&De);let B,L;e[11]!==E||e[12]!==f?(B=()=>{E&&f&&f()},L=[E,f],e[11]=E,e[12]=f,e[13]=B,e[14]=L):(B=e[13],L=e[14]),H.useEffect(B,L);const D=p||b||m||x||h&&N,I=!a||u,W=!_;let F;e[15]!==c?(F=()=>ee(c,Tt),e[15]=c,e[16]=F):F=e[16];let G;return e[17]!==E||e[18]!==P||e[19]!==v||e[20]!==r||e[21]!==h||e[22]!==S||e[23]!==a||e[24]!==j||e[25]!==W||e[26]!==F||e[27]!==D||e[28]!==I?(G={isLoading:D,isMfaRequired:a,isMfaEnabled:I,isGitHubConnected:h,hasValidInstallation:P,isCodeReviewEnabled:v,hasCompletedCodeReviewFlow:W,isCodeReviewOnboardingFlowEnabled:r,isHasCompletedCodeReviewLoading:S,error:E,openGithubModal:j,markCompletedCodeReview:F},e[17]=E,e[18]=P,e[19]=v,e[20]=r,e[21]=h,e[22]=S,e[23]=a,e[24]=j,e[25]=W,e[26]=F,e[27]=D,e[28]=I,e[29]=G):G=e[29],G}function Ra({isHasCompletedCodeReviewLoading:t,isCodeReviewEnabled:e,hasCompletedCodeReviewFlow:n,markCompletedCodeReview:l}){H.useEffect(()=>{!t&&e&&!n&&l()},[t,e,n,l])}function Aa(){const t=K(),e=z(),{data:n,isLoading:l}=Ss(),f=Vt(),c=$(E=>E.preferredEditor),i=$(E=>E.setPreferredEditor),{eligible:r,isLoading:o}=Xe(),{cli:m,vscode:a,cursor:d,windsurf:u}=dt(e),{isLoading:x,isMfaRequired:w,isMfaEnabled:h,isGitHubConnected:p,hasValidInstallation:j,isCodeReviewEnabled:y,hasCompletedCodeReviewFlow:k,isCodeReviewOnboardingFlowEnabled:b,openGithubModal:C,error:_}=Oe({redirectUrl:"/codex/settings/code-review"}),S=ve(),v=_e(),g=ae.useMemo(()=>{const B=[...w?[!!h]:[],!!(p&&j),!!(y&&k)],L=B.length,D=B.filter(Boolean).length,I=L===0?0:D/L*100;return{completedSteps:D,totalSteps:L,percentage:I}},[j,w,h,y,k,p]),N=!x&&g.completedSteps<g.totalSteps,T=ae.useCallback(E=>{if(b)_||(E.preventDefault(),S({pathname:v.pathname,search:Ma(v.search),hash:v.hash},{replace:!1}));else if(!p){E.preventDefault(),C();return}},[p,_,b,v.hash,v.pathname,v.search,S,C]),M=Ds(c,f),[A,O]=ae.useState(!1),P=ae.useRef(!1);return!r||o||l?null:s.jsxs("div",{className:"group w-full px-3 md:px-0",children:[s.jsxs("div",{className:"text-token-text-primary flex items-center justify-between gap-1 ps-1 pt-6 pb-2 text-sm leading-tight font-medium",children:[n?s.jsx(R,{id:"wham.whatsNew.title",defaultMessage:"What's new with Codex"}):s.jsx(R,{id:"wham.gettingStarted.title",defaultMessage:"Get started with Codex"}),s.jsx(q,{onClick:()=>ee(e,Rt),className:"text-token-text-tertiary dark:text-token-text-tertiary w-7 items-center justify-center rounded-lg",size:"small",color:"ghost","aria-label":t.formatMessage({id:"wham.newFeatures.dismiss",defaultMessage:"Dismiss new features announcement"}),children:s.jsx(ke,{className:"icon-sm"})})]}),s.jsxs(ie.div,{layout:!0,className:"grid grid-cols-1 gap-3 md:[grid-template-columns:repeat(auto-fit,minmax(220px,1fr))]",children:[s.jsx(ie.div,{layout:!0,children:s.jsx(ge,{children:s.jsxs("a",{href:m,target:"_blank",rel:"noreferrer",className:"group/card -m-4 flex items-center justify-between gap-3 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(Ea,{className:"icon-md"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(R,{id:"wham.gettingStarted.cli",defaultMessage:"Try in your terminal"})})]}),s.jsx(qt,{className:"icon-sm text-token-text-tertiary origin-[bottom_var(--start)] scale-75 opacity-0 transition-all duration-100 ease-out group-hover/card:scale-100 group-hover/card:opacity-100"})]})})}),s.jsx(ie.div,{layout:!0,children:s.jsx(ge,{children:s.jsxs("div",{className:"group/card -m-4 flex cursor-pointer items-center justify-between gap-3 rounded-2xl p-4 select-none",role:"button",tabIndex:0,onPointerDown:()=>{P.current=A},onClick:()=>{P.current?O(!1):O(!0)},onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),O(B=>!B))},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(M,{className:"h-5 w-5"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(R,{id:"wham.gettingStarted.ide",defaultMessage:"Try in your IDE"})})]}),s.jsxs(zt,{contentAlign:"end",open:A,onOpenChange:O,triggerButton:s.jsx("button",{onClick:E=>E.stopPropagation(),"aria-label":t.formatMessage({id:"wham.gettingStarted.ide.open",defaultMessage:"Open IDE links"}),"aria-expanded":A,className:"hover:bg-token-bg-tertiary rounded-md p-1",children:s.jsx(At,{className:se("icon-sm text-token-text-tertiary shrink-0 transition-all duration-100 ease-out group-hover/card:translate-y-0 group-hover/card:opacity-100",A?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})}),children:[s.jsx(pe.ItemAs,{as:"a",href:a,target:"_blank",rel:"noreferrer",onClick:()=>i("vscode"),children:"VS Code"}),s.jsx(pe.ItemAs,{as:"a",href:d,target:"_blank",rel:"noreferrer",onClick:()=>i("cursor"),children:"Cursor"}),s.jsx(pe.ItemAs,{as:"a",href:u,target:"_blank",rel:"noreferrer",onClick:()=>i("windsurf"),children:"Windsurf"})]})]})})}),s.jsx(Kt,{initial:!1,children:!k&&s.jsx(ie.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:s.jsx(ge,{children:s.jsxs(_t,{to:"/codex/settings/code-review",className:"group/card -m-4 flex items-center gap-2 rounded-2xl p-4",onClick:T,children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(Me,{className:"icon-md relative z-10"})}),s.jsx("div",{className:"text-token-text-primary flex-1 text-sm font-medium",children:s.jsx(R,{id:"wham.gettingStarted.codeReview",defaultMessage:"Enable code review"})}),b&&!_&&(x||N)&&s.jsx("span",{className:"pointer-events-none flex h-4 w-4 items-center justify-center",children:x?s.jsx(oe,{className:"h-5 w-5"}):s.jsx(Ye,{percentage:g.percentage,thickness:1/10,sizeOverride:10,className:"text-token-text-primary h-10 w-10",backgroundStrokeClassName:"stroke-token-text-primary/20",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})})]})})},"code-review-card")})]})]})}function ge({children:t}){return s.jsx("div",{className:se("bg-token-bg-tertiary","dark:bg-token-bg-secondary","flex flex-col justify-between gap-1 rounded-2xl p-4"),children:t})}function Oa(){const t=K(),e=z(),{eligible:n,isLoading:l}=Je(),{slack:f}=dt(e),{isConnected:c,isLoading:i}=je(ne.SLACK_CODEX_CONNECTOR,"slack","/codex/settings/connectors",le.CODEX),r=ae.useCallback(()=>{ee(e,Ot)},[e]);if(!n||l||i||c)return null;const o=s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(Qt,{className:"icon-md"})}),s.jsxs("div",{className:"flex flex-1 items-center gap-2 text-start text-sm leading-tight",children:[s.jsx("span",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(R,{id:"wham.gettingStarted.slack",defaultMessage:"Set up Codex with Slack"})}),s.jsx(et,{className:"icon-sm text-token-text-primary shrink-0"})]})]});return s.jsx("div",{className:"group w-full px-3 pt-4 md:px-0",children:s.jsxs("div",{className:"bg-token-bg-tertiary/80 dark:bg-token-bg-secondary flex items-center gap-3 rounded-2xl px-4 py-3",children:[s.jsx("a",{href:f,target:"_blank",rel:"noreferrer",className:"group/card flex flex-1 items-center justify-between gap-3",onClick:()=>we.recordSlackLinkClicked(),children:o}),s.jsx(q,{onClick:r,className:"text-token-text-tertiary dark:text-token-text-tertiary w-7 shrink-0 items-center justify-center rounded-lg",size:"small",color:"ghost","aria-label":t.formatMessage({id:"wham.newFeatures.dismiss",defaultMessage:"Dismiss new features announcement"}),children:s.jsx(ke,{className:"icon-sm"})})]})})}function fe(){"use forget";const t=V.c(21),e=Xe(),n=Je(),l=Qe(),[f,c]=H.useState(null),{data:i}=Es(),r=Bs(i);let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(Aa,{}),t[0]=o):o=t[0];let m;t[1]!==e.eligible?(m={eligible:e.eligible,render:o},t[1]=e.eligible,t[2]=m):m=t[2];let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(Oa,{}),t[3]=a):a=t[3];let d;t[4]!==n.eligible?(d={eligible:n.eligible,render:a},t[4]=n.eligible,t[5]=d):d=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(Sa,{}),t[6]=u):u=t[6];let x;t[7]!==l.eligible?(x={eligible:l.eligible,render:u},t[7]=l.eligible,t[8]=x):x=t[8];let w;t[9]!==m||t[10]!==d||t[11]!==x?(w=[m,d,x],t[9]=m,t[10]=d,t[11]=x,t[12]=w):w=t[12];const h=w;let p;t[13]!==h||t[14]!==f?(p=f==null?(()=>{const b=h.findIndex(Pa);return b>=0?b:null})():null,t[13]=h,t[14]=f,t[15]=p):p=t[15];const j=p;let y,k;if(t[16]!==j?(y=()=>{j!=null&&c(b=>b==null?j:b)},k=[j],t[16]=j,t[17]=y,t[18]=k):(y=t[17],k=t[18]),H.useEffect(y,k),r&&i){let b;return t[19]!==i?(b=s.jsx("div",{className:"w-full pt-6",children:s.jsx(Hs,{rateLimit:i,linkToUsageDashboard:!0})}),t[19]=i,t[20]=b):b=t[20],b}return f==null?null:h[f].render}function Pa(t){return t.eligible}function Ia(t){return Y(t,"3984934927")}function Wa({shouldTurnOn:t,onChange:e}){const{data:n}=de(),l=K();return n?s.jsx("div",{className:"border-token-border-heavy bg-token-bg-primary flex w-full flex-col items-center rounded-lg border p-4",children:s.jsxs("div",{className:"flex w-full justify-between",children:[s.jsxs("div",{className:"flex w-full flex-col items-start justify-start gap-2",children:[s.jsx("p",{className:"text-token-text-primary text-sm leading-tight font-medium",children:s.jsx(R,{id:"wham.enableCodeReviewsToggle.label",defaultMessage:"Code reviews"})}),s.jsx("p",{className:"text-token-text-secondary justify-start text-xs leading-none font-normal",children:s.jsx(R,{id:"wham.enableCodeReviewsToggle.description",defaultMessage:"Automatically run reviews on new pull requests in this repo."})})]}),s.jsx("div",{className:"flex items-center",children:s.jsx(tt,{checked:t,onCheckedChange:e,className:"radix-state-checked:bg-black!","aria-label":l.formatMessage({id:"wham.enableCodeReviewsToggle.ariaLabel",defaultMessage:"Enable code reviews by Codex"})})})]})}):null}function ut(){const t=z(),e=st("installations/select_target"),{data:n,isLoading:l}=lt();H.useEffect(()=>{var c,i;if(l)return;[...(c=n==null?void 0:n.memberships)!=null?c:[],...(i=n==null?void 0:n.other)!=null?i:[]].length===0&&mt(e)},[l,n,t,e])}function La({backCta:t,handleGoBack:e,handleSelectEnvironment:n,goToNextPage:l,lockPageView:f,shouldDisableRow:c,disablePill:i}){var S;const r=Se(),o=K(),[m,a]=H.useState(""),[d,u]=H.useState(null),[x,w]=H.useState(!r),{mutate:h,isPending:p}=ea({onSuccess:v=>{we.recordCreateEnvSuccess(),n(v.id,Gs(v)),l()}}),{mutate:j}=Qs(),{mutate:y}=Ee({showToast:!1});ut();const b=ta({defaultValues:{repositoryId:"",agentNetworkAccess:{mode:"off"}},validators:{onSubmit:({value:v})=>{var N;const g={};return(!v.repositoryId||v.repositoryId==="")&&(g.repositoryId=o.formatMessage({id:"wham.codexOnboardingEnvironments.repositoryIsRequired",defaultMessage:"Repository is required"})),((N=v.agentNetworkAccess)==null?void 0:N.mode)==="on"&&v.agentNetworkAccess.preset_allowlist===Ks&&(!v.agentNetworkAccess.allowlist_domains||v.agentNetworkAccess.allowlist_domains.length===0)&&(g.agentNetworkAccess=o.formatMessage({id:"wham.environmentsForm.agentNetworkAccessAllowlistRequired",defaultMessage:"At least one domain is required"})),{fields:g}}},onSubmit:({value:v})=>{we.recordEnvironmentsSubmit(),f(),x&&(y({codeReviewPreference:"repo_default"}),j({repo_review_settings:[{repository:v.repositoryId,review_preference:"team"}]})),h(Z(Q({},v),{label:m,description:"",machine:"wham-public/wham-universal",workspaceDirectory:"/workspace",share_settings:"workspace",setupCommands:"",maintenanceSetupCommands:"",envVars:[],secrets:[],autoSetupSettings:{use_auto_setup:!0}}))}}),C=v=>{v.preventDefault(),v.stopPropagation(),b.handleSubmit()},_=Us();return s.jsx("form",{onSubmit:C,className:"flex flex-col gap-6",children:s.jsxs("div",{className:"flex w-full flex-col gap-4",children:[s.jsx($s,{selectedInstallationId:(S=d==null?void 0:d.id)!=null?S:null,setSelectedInstallation:u}),s.jsx(b.Field,{name:"repositoryId",children:v=>{var g,N,T;return s.jsxs("div",{className:"flex w-full flex-col gap-4",children:[s.jsx(Vs,{installationId:(g=d==null?void 0:d.id)!=null?g:null,installationAccountLogin:(N=d==null?void 0:d.account_login)!=null?N:null,installationAccountType:(T=d==null?void 0:d.account_type)!=null?T:null,selectedRepository:v.state.value,onSelect:(M,A)=>{v.handleChange(M),a(A)},shouldDisableRow:c,disablePill:i}),s.jsx($e,{field:v})]})}}),s.jsx(Wa,{shouldTurnOn:x,onChange:w}),s.jsx(b.Field,{name:"agentNetworkAccess",children:v=>{var g;return s.jsxs("div",{className:"flex flex-col gap-4",children:[_!=null&&s.jsx(qs,{disabledByWorkspaceSettings:_,agentNetworkAccess:v.state.value,onChange:v.handleChange}),s.jsx($e,{field:v}),((g=v.state.value)==null?void 0:g.mode)==="on"&&s.jsx(zs,{})]})}}),s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsx(q,{color:"secondary",size:"medium",type:"button",onClick:e,children:t}),s.jsx(b.Subscribe,{selector:v=>v.values,children:v=>s.jsx(q,{color:"primary",size:"medium",loading:p,disabled:!m||!v.agentNetworkAccess,onClick:()=>b.handleSubmit(),children:s.jsx(R,{id:"wham.codexOnboardingEnvironments.createEnvironment",defaultMessage:"Create environment"})})})]})]})})}function Da(t){"use forget";const e=V.c(26),{isOpen:n,onClose:l}=t,f=z(),c=K(),i=$(Fa),r=$(Ha);let o;e[0]!==r||e[1]!==i?(o=(k,b)=>{i(k),r(b)},e[0]=r,e[1]=i,e[2]=o):o=e[2];const m=o;let a;e[3]!==f?(a=()=>ee(f,Pt),e[3]=f,e[4]=a):a=e[4];const d=a;ut();let u;e[5]!==d||e[6]!==l?(u=()=>{d(),l()},e[5]=d,e[6]=l,e[7]=u):u=e[7];let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("h2",{className:"text-center text-2xl font-semibold",children:s.jsx(R,{id:"wham.createFirstEnvironmentModal.title",defaultMessage:"Create your first environment"})}),e[8]=x):x=e[8];let w;e[9]!==c?(w=c.formatMessage({id:"wham.createFirstEnvironmentModal.cancel",defaultMessage:"Cancel"}),e[9]=c,e[10]=w):w=e[10];let h;e[11]!==d||e[12]!==l?(h=()=>{d(),l()},e[11]=d,e[12]=l,e[13]=h):h=e[13];let p;e[14]!==d||e[15]!==l?(p=()=>{d(),l()},e[14]=d,e[15]=l,e[16]=p):p=e[16];let j;e[17]!==m||e[18]!==w||e[19]!==h||e[20]!==p?(j=s.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[x,s.jsx(La,{backCta:w,handleGoBack:h,handleSelectEnvironment:m,goToNextPage:p,lockPageView:Ba})]}),e[17]=m,e[18]=w,e[19]=h,e[20]=p,e[21]=j):j=e[21];let y;return e[22]!==n||e[23]!==u||e[24]!==j?(y=s.jsx(at,{isOpen:n,onClose:u,type:"success",size:"large",noPadding:!0,testId:"modal-wham-create-first-environment",position:"center",contentClassName:"no-scrollbar",className:"h-[90vh]",children:j}),e[22]=n,e[23]=u,e[24]=j,e[25]=y):y=e[25],y}function Ba(){}function Ha(t){return t.setBranch}function Fa(t){return t.setEnvironmentId}function Ga(t){"use forget";const e=V.c(34),{disabledInstallations:n,autoReviewPreference:l,isAutoReviewPreferenceSaving:f,onAutoReviewPreferenceChange:c}=t;let i;e[0]!==n?(i=n===void 0?[]:n,e[0]=n,e[1]=i):i=e[1];const r=i,o=K(),[m,a]=H.useState(l);let d,u;e[2]!==l?(d=()=>{a(l)},u=[l],e[2]=l,e[3]=d,e[4]=u):(d=e[3],u=e[4]),H.useEffect(d,u);const{filteredSettings:x,isLoading:w,isFetching:h,updateCodeReviewRepositories:p,isLegacyEnterprisey:j}=Xs(),y=Se(),k=Is(),b=Ws(),C=Xt(),_=nt();let S;e[5]!==_?(S=Ys(_),e[5]=_,e[6]=S):S=e[6];const v=S;let g;e[7]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("p",{className:"text-sm font-medium",children:s.jsx(R,{id:"wham.codeReviewPage.teamAutomations.autoReviewToggle.label",defaultMessage:"Review all my pull requests"})}),e[7]=g):g=e[7];let N;e[8]!==o?(N=o.formatMessage({id:"wham.codeReviewPage.personalPreferences.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for personal preferences"}),e[8]=o,e[9]=N):N=e[9];const T=m==="always";let M;e[10]!==c?(M=B=>{const L=B?"always":"repo_default";a(L),c(L)},e[10]=c,e[11]=M):M=e[11];let A;e[12]!==f||e[13]!==N||e[14]!==T||e[15]!==M?(A=s.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[g,s.jsx(tt,{"aria-label":N,checked:T,disabled:f,onCheckedChange:M})]}),e[12]=f,e[13]=N,e[14]=T,e[15]=M,e[16]=A):A=e[16];let O;e[17]!==v||e[18]!==r||e[19]!==x||e[20]!==h||e[21]!==j||e[22]!==w||e[23]!==k||e[24]!==b||e[25]!==y||e[26]!==p||e[27]!==(C==null?void 0:C.email)?(O=w?Array.from({length:4}).map(Ua):x.length===0&&!h?s.jsx("div",{className:"text-token-text-tertiary px-4 py-6 text-center text-sm",children:s.jsx(R,{id:"wham.codeReviewPage.teamAutomations.noRepositories",defaultMessage:"No repositories"})}):x.map((B,L)=>{var D;return s.jsx(Js,{repo:B,isTeamOrEnterprise:y,isLegacyEnterprisey:j,isPlus:!!k,isPro:!!b,disabledInstallations:r,updateCodeReviewRepositories:p,currentAccountOwnerId:v,currentUserEmail:(D=C==null?void 0:C.email)!=null?D:null,layout:"condensed",showDivider:L!==0},Zs(B))}),e[17]=v,e[18]=r,e[19]=x,e[20]=h,e[21]=j,e[22]=w,e[23]=k,e[24]=b,e[25]=y,e[26]=p,e[27]=C==null?void 0:C.email,e[28]=O):O=e[28];let P;e[29]!==O?(P=s.jsx("div",{className:"border-token-border-light min-h-0 flex-1 overflow-y-auto border-t pe-1",children:O}),e[29]=O,e[30]=P):P=e[30];let E;return e[31]!==A||e[32]!==P?(E=s.jsxs("div",{className:"border-token-border-light bg-token-bg-primary flex h-full max-h-[400px] min-h-0 flex-col overflow-hidden rounded-2xl border",children:[A,P]}),e[31]=A,e[32]=P,e[33]=E):E=e[33],E}function Ua(t,e){return s.jsxs("div",{className:se("flex items-center justify-between gap-3 px-4 py-3",e!==0&&"border-token-border-light border-t"),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(he,{className:"h-4 w-4 rounded"}),s.jsx(he,{className:"h-4 w-32"})]}),s.jsx(he,{className:"h-6 w-32 rounded-md"})]},"condensed-skeleton-".concat(e))}const $a=[xe({id:"wham.codeReviewOnboardingModal.step.mfa",defaultMessage:"Set up multi-factor authentication"}),xe({id:"wham.codeReviewOnboardingModal.step.github",defaultMessage:"Connect to GitHub"}),xe({id:"wham.codeReviewOnboardingModal.step.configure",defaultMessage:"Configure code review"})];function qe(t){"use forget";const e=V.c(45),{onClose:n,onModalDismissed:l}=t,f=K();let c;e[0]!==n||e[1]!==l?(c=async U=>{await l(),n()},e[0]=n,e[1]=l,e[2]=c):c=e[2];const i=c,{isLoading:r,isMfaRequired:o,isMfaEnabled:m,isGitHubConnected:a,hasValidInstallation:d,isCodeReviewEnabled:u,openGithubModal:x,markCompletedCodeReview:w}=Oe({onError:()=>{p.danger(f.formatMessage({id:"wham.codeReviewOnboardingModal.errorToast",defaultMessage:"Failed to set up code review. Please try again."}),{id:"codex-code-review-onboarding-error",duration:5,hasCloseButton:!0}),i()}}),h=z(),p=Yt(h);let j;e[3]===Symbol.for("react.memo_cache_sentinel")?(j={redirectUrl:"/codex?codex_onboarding=code_review"},e[3]=j):j=e[3];const{setupMfa:y}=sa(j),[k,b]=H.useState(!1),C=!!m,_=!!(a&&d),S=!!u;let v;e[4]!==C||e[5]!==_||e[6]!==S?(v={"wham.codeReviewOnboardingModal.step.mfa":C,"wham.codeReviewOnboardingModal.step.github":_,"wham.codeReviewOnboardingModal.step.configure":S},e[4]=C,e[5]=_,e[6]=S,e[7]=v):v=e[7];const g=v;let N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N=st("installations/select_target"),e[8]=N):N=e[8];const T=N;let M;e[9]!==d||e[10]!==a||e[11]!==r||e[12]!==g?(M=U=>r?s.jsx("span",{className:"border-token-border-heavy text-token-text-primary flex h-5 w-5 items-center justify-center rounded-full",children:s.jsx(oe,{className:"h-4 w-4"})}):U==="wham.codeReviewOnboardingModal.step.github"&&a&&!d?s.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full",children:s.jsx(Ye,{percentage:50})}):g[U]?s.jsx("span",{className:"border-token-border-heavy bg-token-bg-success/40 text-token-text-primary flex h-5 w-5 items-center justify-center rounded-full border-2",children:s.jsx(Jt,{className:"h-3 w-3"})}):s.jsx("span",{className:"border-token-border-heavy flex h-5 w-5 items-center justify-center rounded-full border-2"}),e[9]=d,e[10]=a,e[11]=r,e[12]=g,e[13]=M):M=e[13];const A=M;let O;e[14]!==i||e[15]!==w?(O=async()=>{await i(),w()},e[14]=i,e[15]=w,e[16]=O):O=e[16];const P=O;let E;e[17]!==h||e[18]!==i||e[19]!==d||e[20]!==u||e[21]!==a||e[22]!==r||e[23]!==m||e[24]!==x||e[25]!==y?(E=async()=>{if(!r){if(!m){y(),await i();return}if(!a){await i(),x();return}if(!d){await i(),mt(T,h,{includeQueryParamForRedirect:!0});return}if(!u){b(!0);return}await i()}},e[17]=h,e[18]=i,e[19]=d,e[20]=u,e[21]=a,e[22]=r,e[23]=m,e[24]=x,e[25]=y,e[26]=E):E=e[26];const B=E;let L;e[27]!==f?(L=f.formatMessage({id:"wham.codeReviewOnboardingModal.hiddenTitle",defaultMessage:" "}),e[27]=f,e[28]=L):L=e[28];const D=L,I=k?"max-w-[520px]":"max-w-[420px]";let W;e[29]!==I?(W=se("w-full",I),e[29]=I,e[30]=W):W=e[30];let F;e[31]!==P||e[32]!==B||e[33]!==d||e[34]!==a||e[35]!==r||e[36]!==o||e[37]!==A||e[38]!==k?(F=k?s.jsx(Va,{onComplete:P}):s.jsxs("div",{className:"flex flex-col gap-6 p-6 pt-0",children:[s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx("div",{className:"rounded-xl border-[0.5px] p-2 shadow-sm",children:s.jsx(Me,{className:"icon h-8 w-8"})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("h2",{className:"text-token-text-primary text-xxl font-semibold",children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.title",defaultMessage:"Set up code review"})}),s.jsx("p",{className:"text-token-text-secondary text-sm leading-5",children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.subtitle",defaultMessage:"Automatically review your pull requests with Codex"})})]})]}),s.jsx("div",{className:"border-token-border-light bg-token-bg-primary flex flex-col gap-3 rounded-2xl border p-4",children:$a.map(U=>{if(U.id==="wham.codeReviewOnboardingModal.step.mfa"&&!o)return;const J=U.id==="wham.codeReviewOnboardingModal.step.github"&&!r&&a&&!d;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:A(U.id)}),s.jsx("p",{className:"text-token-text-primary text-sm leading-5",children:s.jsx(R,Q({},U))}),J?s.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.step.github.inProgress",defaultMessage:"In-progress"})}):null]},U.id)})}),s.jsxs(q,{color:"primary",fullWidth:!0,onClick:B,contentWrapperClassName:"gap-2",disabled:r,children:[s.jsx("span",{children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.continue",defaultMessage:"Continue"})}),s.jsx(et,{className:"icon-sm"})]})]}),e[31]=P,e[32]=B,e[33]=d,e[34]=a,e[35]=r,e[36]=o,e[37]=A,e[38]=k,e[39]=F):F=e[39];let G;return e[40]!==i||e[41]!==D||e[42]!==W||e[43]!==F?(G=s.jsx(at,{isOpen:!0,onClose:i,showCloseButton:!0,showOverlayBackground:!0,noPadding:!0,size:"custom",position:"center",className:W,testId:"modal-codex-code-review-onboarding",closeButtonClassName:"text-token-text-secondary hover:text-token-text-primary transition-colors",title:D,children:F}),e[40]=i,e[41]=D,e[42]=W,e[43]=F,e[44]=G):G=e[44],G}function Va(t){"use forget";var j;const e=V.c(13),{onComplete:n}=t,{data:l,isLoading:f,isError:c}=de();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={showToast:!0},e[0]=i):i=e[0];const{mutate:r,isPending:o}=Ee(i),{data:m}=Ms();let a;e[1]!==(m==null?void 0:m.installations_without_events)?(a=(j=m==null?void 0:m.installations_without_events)!=null?j:[],e[1]=m==null?void 0:m.installations_without_events,e[2]=a):a=e[2];const d=a,u=f||c||!l;let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("div",{className:"bg-tertiary rounded-xl border-[0.5px] p-2 shadow-sm",children:s.jsx(Me,{className:"icon h-8 w-8"})}),e[3]=x):x=e[3];let w;e[4]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h2",{className:"text-token-text-primary text-xxl font-semibold",children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.configure.title",defaultMessage:"Configure code review"})}),e[4]=w):w=e[4];let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[x,s.jsxs("div",{className:"flex flex-col gap-1",children:[w,s.jsx("p",{className:"text-token-text-secondary text-sm leading-5",children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.configure.subtitle",defaultMessage:"Select which repositories and PRs will be reviewed by Codex"})})]})]}),e[5]=h):h=e[5];let p;return e[6]!==d||e[7]!==o||e[8]!==n||e[9]!==u||e[10]!==r||e[11]!==l?(p=s.jsxs("div",{className:"flex flex-col gap-6 p-6 pt-0",children:[h,u?s.jsx("div",{className:"flex flex-1 items-center justify-center",children:s.jsx(oe,{className:"h-9 w-9"})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-0 flex-1 pe-1",children:s.jsx(Ga,{autoReviewPreference:l.code_review_preference,isAutoReviewPreferenceSaving:o,onAutoReviewPreferenceChange:y=>{r({codeReviewPreference:y})},disabledInstallations:d.map(qa)})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-token-text-tertiary text-center text-xs leading-5",children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.configure.footer",defaultMessage:"You can always change it in the settings"})}),s.jsx(q,{color:"primary",fullWidth:!0,onClick:n,children:s.jsx(R,{id:"wham.codeReviewOnboardingModal.configure.done",defaultMessage:"Done"})})]})]})]}),e[6]=d,e[7]=o,e[8]=n,e[9]=u,e[10]=r,e[11]=l,e[12]=p):p=e[12],p}function qa(t){return t.account_login}function za(t,{isCodeReviewOnboardingFlowEnabled:e,hasCompletedCodeReviewFlow:n,isHasCompletedCodeReviewLoading:l}){const f=H.useRef(null),c=H.useRef(!1),i=ve(),r=_e(),o=Zt();H.useEffect(()=>{const a=new URLSearchParams(r.search).get(Ae);if(!e||o||l||n){c.current&&(es(t,qe),c.current=!1);return}if(a!==be){f.current=a;return}if(f.current===be&&c.current===!0)return;f.current=a;let d=!1;const u=async()=>{if(d)return;d=!0;const x=Ta(r.search);await i({pathname:r.pathname,search:x,hash:r.hash},{replace:!0})};c.current=!0,ts(t,qe,{onModalDismissed:async()=>{await u()}})},[t,r.hash,r.pathname,r.search,i,e,n,l,o])}function Gn(t){"use forget";const e=V.c(22),n=z(),l=ss(n),f=Ia(n),c=as(n),i=It();Fs();let r,o;e[0]!==n?(r=()=>ns(n).limitActionGroups([]),o=[n],e[0]=n,e[1]=r,e[2]=o):(r=e[1],o=e[2]),H.useEffect(r,o);const m=Y(n,"547652119"),a=$(Ka);if(!l){if(f){let S;return e[3]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(ws,{}),e[3]=S):S=e[3],S}let _;return e[4]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(re,{to:"/"}),e[4]=_):_=e[4],_}if(i==="DISABLED"&&(c==null?void 0:c.isWorkspacePlan())){let _;return e[5]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(re,{to:"/codex/access",replace:!0}),e[5]=_):_=e[5],_}if(m){let _;return e[6]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(re,{to:"/codex/failwhale"}),e[6]=_):_=e[6],_}if(i==="DISABLED"){let _;return e[7]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(re,{to:"/",replace:!0}),e[7]=_):_=e[7],_}let u;e[8]!==a?(u=!1,e[8]=a,e[9]=u):u=e[9];const x=Wt,w=jt,h=c==null?void 0:c.getWorkspaceId();let p;e[10]!==w||e[11]!==h?(p=s.jsx(w,{page:"codex"},h),e[10]=w,e[11]=h,e[12]=p):p=e[12];let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(bs,{children:s.jsx(vs,{hideNotificationBell:!0})}),e[13]=j):j=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsxs("div",{className:"flex min-h-full flex-col",children:[j,s.jsx(os,{children:s.jsx(Qa,{})})]}),e[14]=y):y=e[14];let k;e[15]!==x||e[16]!==p?(k=s.jsxs(x,{children:[p,y]}),e[15]=x,e[16]=p,e[17]=k):k=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(_s,{}),e[18]=b):b=e[18];let C;return e[19]!==u||e[20]!==k?(C=s.jsxs(s.Fragment,{children:[u,k,b]}),e[19]=u,e[20]=k,e[21]=C):C=e[21],C}function Ka(t){return t.showReactQueryDevtools}function Qa(){"use forget";var B,L,D;const t=V.c(43),{homeTab:e}=it(),[n,l,f]=$(Xa),[c,i]=H.useState(!1),r=_e(),o=z(),m=nt(),{composerController:a}=Lt(),d=H.useRef(!1),u=Oe();za(o,u),Ra(u);let x,w;t[0]!==o?(x=()=>{rs(o).prefetchInfiniteQuery(Rs("archived"))},w=[o],t[0]=o,t[1]=x,t[2]=w):(x=t[1],w=t[2]),H.useEffect(x,w);let h;t[3]!==a||t[4]!==o||t[5]!==((B=r.state)==null?void 0:B.focusComposer)?(h=()=>{var W;const I=Y(o,"1406552515");(W=r.state)!=null&&W.focusComposer&&!d.current&&!I&&(is(te(a)),d.current=!0)},t[3]=a,t[4]=o,t[5]=(L=r.state)==null?void 0:L.focusComposer,t[6]=h):h=t[6];const p=(D=r.state)==null?void 0:D.focusComposer;let j;t[7]!==a||t[8]!==o||t[9]!==p?(j=[p,a,o],t[7]=a,t[8]=o,t[9]=p,t[10]=j):j=t[10],H.useEffect(h,j);let y,k;t[11]!==a||t[12]!==o?(y=()=>{const I=Y(o,"1406552515");Ue(te(a),I?"":$.getState().promptDraft)},k=[a,o],t[11]=a,t[12]=o,t[13]=y,t[14]=k):(y=t[13],k=t[14]),H.useEffect(y,k);let b,C;t[15]!==a||t[16]!==n?(b=()=>{const I=ls(W=>{n(ds(W.doc)?"":cs(W.doc).content)},1e3);return ms(()=>fs(a),I)},C=[a,n],t[15]=a,t[16]=n,t[17]=b,t[18]=C):(b=t[17],C=t[18]),H.useEffect(b,C);let _,S;t[19]!==a||t[20]!==r.search?(S=()=>{const W=new URLSearchParams(r.search).get("prompt");W&&Ue(te(a),W)},_=[r.search,a],t[19]=a,t[20]=r.search,t[21]=_,t[22]=S):(_=t[21],S=t[22]),H.useEffect(S,_);const{data:v}=Ts();let g,N;t[23]!==v||t[24]!==r.search||t[25]!==l?(g=()=>{const W=new URLSearchParams(r.search).get("environment");W&&(v!=null&&v.some(F=>F.id===W))&&l(W)},N=[r.search,v,l],t[23]=v,t[24]=r.search,t[25]=l,t[26]=g,t[27]=N):(g=t[26],N=t[27]),H.useEffect(g,N);let T,M;t[28]!==r.search||t[29]!==f?(T=()=>{const W=new URLSearchParams(r.search).get("branch");W&&f(W)},M=[r.search,f],t[28]=r.search,t[29]=f,t[30]=T,t[31]=M):(T=t[30],M=t[31]),H.useEffect(T,M);const A=m==null?void 0:m.isHipaaCompliantWorkspace;let O;t[32]!==a||t[33]!==e||t[34]!==n||t[35]!==A?(O=s.jsx(gs,{children:s.jsx(Ya,{setPromptDraft:n,setShowCreateEnvModal:i,composerController:a,homeTab:e,showHipaaBanner:A})}),t[32]=a,t[33]=e,t[34]=n,t[35]=A,t[36]=O):O=t[36];let P;t[37]!==c?(P=c&&s.jsx(Da,{isOpen:c,onClose:()=>i(!1)}),t[37]=c,t[38]=P):P=t[38];let E;return t[39]!==a||t[40]!==O||t[41]!==P?(E=s.jsxs(us,{value:a,children:[O,P]}),t[39]=a,t[40]=O,t[41]=P,t[42]=E):E=t[42],E}function Xa(t){return[t.setPromptDraft,t.setEnvironmentId,t.setBranch]}function ue({shouldShow:t}){return t?s.jsx("div",{className:"mb-4 w-full px-3 md:px-0",children:s.jsx(Bt,{message:s.jsx(R,{id:"wham.home.hipaaWarning",defaultMessage:"Do not enter Protected Health Information (PHI) into Codex."})})}):null}function Ya(t){"use forget";const e=V.c(21),{state:n}=hs(),[l,f]=H.useState(!0);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=a=>{const d=Dt(a);if(d){const u=()=>{f(d.scrollTop===0)};return d.addEventListener("scroll",u),u(),()=>d.removeEventListener("scroll",u)}},e[0]=c):c=e[0];const i=c,r=$(Ja),[o]=H.useState(!!r),m=l&&r==null;switch(n){case X.Error:case X.Complete:{let a;return e[1]!==m||e[2]!==o||e[3]!==t?(a=s.jsx(ze,Z(Q({},t),{scrollRef:i,defaultExpanded:m,hasLastViewTaskIdOnMount:o})),e[1]=m,e[2]=o,e[3]=t,e[4]=a):a=e[4],a}case X.NoGithubConnection:{let a;return e[5]!==m||e[6]!==o||e[7]!==t?(a=s.jsx(tn,Z(Q({},t),{scrollRef:i,defaultExpanded:m,hasLastViewTaskIdOnMount:o})),e[5]=m,e[6]=o,e[7]=t,e[8]=a):a=e[8],a}case X.NoEnvironmentsCreated:{let a;return e[9]!==m||e[10]!==o||e[11]!==t?(a=s.jsx(sn,Z(Q({},t),{scrollRef:i,defaultExpanded:m,hasLastViewTaskIdOnMount:o})),e[9]=m,e[10]=o,e[11]=t,e[12]=a):a=e[12],a}case X.NoTasksCreated:{let a;return e[13]!==m||e[14]!==o||e[15]!==t?(a=s.jsx(on,Z(Q({},t),{scrollRef:i,defaultExpanded:m,hasLastViewTaskIdOnMount:o})),e[13]=m,e[14]=o,e[15]=t,e[16]=a):a=e[16],a}case X.Loading:{let a;return e[17]!==m||e[18]!==o||e[19]!==t?(a=s.jsx(ze,Z(Q({},t),{scrollRef:i,defaultExpanded:m,hasLastViewTaskIdOnMount:o})),e[17]=m,e[18]=o,e[19]=t,e[20]=a):a=e[20],a}}}function Ja(t){return t.lastViewedTaskId}function ze(t){"use forget";const e=V.c(33),{scrollRef:n,hasLastViewTaskIdOnMount:l,defaultExpanded:f,setPromptDraft:c,setShowCreateEnvModal:i,composerController:r,homeTab:o,showHipaaBanner:m}=t,a=z();let d;e[0]!==a?(d=Y(a,"1406552515"),e[0]=a,e[1]=d):d=e[1];const u=d;let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(me,{}),e[2]=x):x=e[2];let w;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(R,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[3]=w):w=e[3];let h;e[4]!==m?(h=s.jsx(ue,{shouldShow:m}),e[4]=m,e[5]=h):h=e[5];const p=l||u,j=f?!0:void 0,y=!u;let k;e[6]!==r||e[7]!==c?(k=()=>{ye(te(r)),c("")},e[6]=r,e[7]=c,e[8]=k):k=e[8];let b;e[9]!==i?(b=()=>i(!0),e[9]=i,e[10]=b):b=e[10];let C;e[11]!==p||e[12]!==j||e[13]!==y||e[14]!==k||e[15]!==b?(C=s.jsx(Ce,{disableAutoFocus:p,expanded:j,isBigBoxMode:y,onSubmit:k,onSuccess:Za,onCreateEnvironment:b}),e[11]=p,e[12]=j,e[13]=y,e[14]=k,e[15]=b,e[16]=C):C=e[16];let _;e[17]!==u||e[18]!==C?(_=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(ft,{disabled:u,children:C})}),e[17]=u,e[18]=C,e[19]=_):_=e[19];let S,v;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(fe,{}),v=s.jsx(Te,{}),e[20]=S,e[21]=v):(S=e[20],v=e[21]);let g;e[22]!==_||e[23]!==h?(g=s.jsxs("div",{className:"bg-token-bg-primary sticky top-(--header-height) z-50 flex flex-col items-center",children:[w,h,_,S,v]}),e[22]=_,e[23]=h,e[24]=g):g=e[24];let N;e[25]!==o?(N=s.jsx(Re,{homeTab:o}),e[25]=o,e[26]=N):N=e[26];let T;e[27]!==g||e[28]!==N?(T=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[x,g,N]}),e[27]=g,e[28]=N,e[29]=T):T=e[29];let M;return e[30]!==n||e[31]!==T?(M=s.jsx("div",{className:"min-h-0 flex-1",ref:n,children:T}),e[30]=n,e[31]=T,e[32]=M):M=e[32],M}function Za(){Ne.set(en)}function en(t){return t+1}function tn(t){"use forget";const e=V.c(17),{scrollRef:n,setShowCreateEnvModal:l,showHipaaBanner:f}=t;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(me,{}),e[0]=c):c=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(R,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[1]=i):i=e[1];let r;e[2]!==f?(r=s.jsx(ue,{shouldShow:f}),e[2]=f,e[3]=r):r=e[3];let o;e[4]!==l?(o=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(na,{isGitHubConnected:!1,onClickCreateEnvironment:()=>l(!0)})}),e[4]=l,e[5]=o):o=e[5];let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(fe,{}),e[6]=m):m=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{className:"w-full px-3 md:px-0",children:s.jsx("div",{className:"text-token-text-primary ps-1 pt-6 pb-4 text-sm font-medium",children:s.jsx(R,{id:"wham.samples.title",defaultMessage:"Examples of what Codex can do"})})}),e[7]=a):a=e[7];let d;e[8]!==r||e[9]!==o?(d=s.jsxs("div",{className:"bg-token-bg-primary sticky top-(--header-height) z-50 flex flex-col items-center",children:[i,r,o,m,a]}),e[8]=r,e[9]=o,e[10]=d):d=e[10];let u;e[11]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx("div",{className:"w-full px-3 md:px-0",children:s.jsx(ia,{})}),e[11]=u):u=e[11];let x;e[12]!==d?(x=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[c,d,u]}),e[12]=d,e[13]=x):x=e[13];let w;return e[14]!==n||e[15]!==x?(w=s.jsx("div",{className:"min-h-0 flex-1",ref:n,children:x}),e[14]=n,e[15]=x,e[16]=w):w=e[16],w}function sn(t){"use forget";const e=V.c(30),{scrollRef:n,hasLastViewTaskIdOnMount:l,defaultExpanded:f,setPromptDraft:c,composerController:i,setShowCreateEnvModal:r,homeTab:o,showHipaaBanner:m}=t,a=z();let d;e[0]!==a?(d=Y(a,"1406552515"),e[0]=a,e[1]=d):d=e[1];const u=d;let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(me,{}),e[2]=x):x=e[2];let w;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(R,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[3]=w):w=e[3];let h;e[4]!==m?(h=s.jsx(ue,{shouldShow:m}),e[4]=m,e[5]=h):h=e[5];const p=l||u,j=f?!0:void 0,y=!u;let k;e[6]!==i||e[7]!==c?(k=()=>{ye(te(i)),c("")},e[6]=i,e[7]=c,e[8]=k):k=e[8];let b;e[9]!==r?(b=()=>r(!0),e[9]=r,e[10]=b):b=e[10];let C;e[11]!==p||e[12]!==j||e[13]!==y||e[14]!==k||e[15]!==b?(C=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(Ce,{disableAutoFocus:p,expanded:j,isBigBoxMode:y,onSubmit:k,onSuccess:an,onCreateEnvironment:b})}),e[11]=p,e[12]=j,e[13]=y,e[14]=k,e[15]=b,e[16]=C):C=e[16];let _,S;e[17]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(fe,{}),S=s.jsx(Te,{}),e[17]=_,e[18]=S):(_=e[17],S=e[18]);let v;e[19]!==C||e[20]!==h?(v=s.jsxs("div",{className:"bg-token-bg-primary sticky top-(--header-height) z-50 flex flex-col items-center",children:[w,h,C,_,S]}),e[19]=C,e[20]=h,e[21]=v):v=e[21];let g;e[22]!==o?(g=s.jsx(Re,{homeTab:o}),e[22]=o,e[23]=g):g=e[23];let N;e[24]!==v||e[25]!==g?(N=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[x,v,g]}),e[24]=v,e[25]=g,e[26]=N):N=e[26];let T;return e[27]!==n||e[28]!==N?(T=s.jsx("div",{className:"min-h-0 flex-1",ref:n,children:N}),e[27]=n,e[28]=N,e[29]=T):T=e[29],T}function an(){Ne.set(nn)}function nn(t){return t+1}function on(t){"use forget";const e=V.c(33),{scrollRef:n,hasLastViewTaskIdOnMount:l,defaultExpanded:f,setPromptDraft:c,setShowCreateEnvModal:i,composerController:r,homeTab:o,showHipaaBanner:m}=t,a=z();let d;e[0]!==a?(d=Y(a,"1406552515"),e[0]=a,e[1]=d):d=e[1];const u=d;let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(me,{}),e[2]=x):x=e[2];let w;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(R,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[3]=w):w=e[3];let h;e[4]!==m?(h=s.jsx(ue,{shouldShow:m}),e[4]=m,e[5]=h):h=e[5];const p=l||u,j=f?!0:void 0,y=!u;let k;e[6]!==r||e[7]!==c?(k=()=>{ye(te(r)),c("")},e[6]=r,e[7]=c,e[8]=k):k=e[8];let b;e[9]!==i?(b=()=>i(!0),e[9]=i,e[10]=b):b=e[10];let C;e[11]!==p||e[12]!==j||e[13]!==y||e[14]!==k||e[15]!==b?(C=s.jsx(Ce,{disableAutoFocus:p,expanded:j,isBigBoxMode:y,onSubmit:k,onSuccess:rn,onCreateEnvironment:b}),e[11]=p,e[12]=j,e[13]=y,e[14]=k,e[15]=b,e[16]=C):C=e[16];let _;e[17]!==u||e[18]!==C?(_=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(ft,{disabled:u,children:C})}),e[17]=u,e[18]=C,e[19]=_):_=e[19];let S,v;e[20]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(fe,{}),v=s.jsx(Te,{}),e[20]=S,e[21]=v):(S=e[20],v=e[21]);let g;e[22]!==_||e[23]!==h?(g=s.jsxs("div",{className:"bg-token-bg-primary sticky top-(--header-height) z-50 flex flex-col items-center",children:[w,h,_,S,v]}),e[22]=_,e[23]=h,e[24]=g):g=e[24];let N;e[25]!==o?(N=s.jsx("div",{className:"w-full",children:s.jsx(Re,{homeTab:o})}),e[25]=o,e[26]=N):N=e[26];let T;e[27]!==g||e[28]!==N?(T=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[x,g,N]}),e[27]=g,e[28]=N,e[29]=T):T=e[29];let M;return e[30]!==n||e[31]!==T?(M=s.jsx("div",{className:"min-h-0 flex-1",ref:n,children:T}),e[30]=n,e[31]=T,e[32]=M):M=e[32],M}function rn(){Ne.set(ln)}function ln(t){return t+1}export{Gn as W};
//# sourceMappingURL=ipph85b12tm2kf0z.js.map
