var oe=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var X=(n,e,t)=>e in n?oe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,w=(n,e)=>{for(var t in e||(e={}))ee.call(e,t)&&X(n,t,e[t]);if(Y)for(var t of Y(e))te.call(e,t)&&X(n,t,e[t]);return n};var se=(n,e)=>{var t={};for(var i in n)ee.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Y)for(var i of Y(n))e.indexOf(i)<0&&te.call(n,i)&&(t[i]=n[i]);return t};import{f as re,c as Z,w as ce,r as V,j as s,M as B,e as ie,a as de,u as fe,F as me,L as he}from"./fg33krlcm0qyi6yw.js";import{a9 as ve,R as ae,A as ue,C as xe,m as ge,e1 as Ce,e_ as _e,T as ne}from"./mtk1qztvnb31pw5r.js";import{ci as je,dt as ye,cL as pe}from"./k65njl5wlgspihfr.js";import{T as j}from"./hcn3kohxpjzaoxwc.js";import{DeleteConversationConfirmationModal as Me}from"./fl4ha52uwxfs3yp2.js";const le=["archivedConversations"],be=30,Ie=3,x=re({name:{id:"archivedConversationsModal.name",defaultMessage:"Name"},dateCreated:{id:"archivedConversationsModal.dateCreated",defaultMessage:"Date created"},loading:{id:"archivedConversationsModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"archivedConversationsModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"archivedConversationsModal.retry",defaultMessage:"Retry"},noArchivedConversations:{id:"archivedConversationsModal.noArchivedConversations",defaultMessage:"You have no archived conversations."},title:{id:"archivedConversationsModal.title",defaultMessage:"Archived chats"},unarchiveConversation:{id:"archivedConversationsModal.unarchiveConversation",defaultMessage:"Unarchive conversation"},deleteConversation:{id:"archivedConversationsModal.deleteConversation",defaultMessage:"Delete conversation"},deleteFailed:{id:"archivedConversationsModal.deleteFailed",defaultMessage:"Deleting failed"}});function Ne(n){"use forget";var J;const e=Z.c(68),{conversation:t,elementRef:i,onCloseParent:r,variant:c}=n,h=c==="modal",l=ie(),S=ge(),O=de();let y;e[0]!==t.gizmo_id||e[1]!==O?(y=()=>{O.invalidateQueries({queryKey:[le]}),_e(O,t.gizmo_id)},e[0]=t.gizmo_id,e[1]=O,e[2]=y):y=e[2];let p;e[3]!==S?(p=()=>{S.danger(x.deleteFailed,{toastId:"archived_conversations_modal_delete_failed"})},e[3]=S,e[4]=p):p=e[4];let R;e[5]!==y||e[6]!==p?(R={mutationFn:Se,onSettled:y,onError:p},e[5]=y,e[6]=p,e[7]=R):R=e[7];const{mutate:g,isPending:E}=fe(R),[M,F]=V.useState(!1);let b;e[8]!==t.id?(b=Ce(t.id),e[8]=t.id,e[9]=b):b=e[9];const I=b;let m;e[10]!==h?(m=h&&s.jsx(je,{className:"icon"}),e[10]=h,e[11]=m):m=e[11];let v;e[12]!==t.title||e[13]!==m?(v=s.jsxs(s.Fragment,{children:[m,t.title]}),e[12]=t.title,e[13]=m,e[14]=v):v=e[14];const N=v;let k;e[15]!==I||e[16]!==i||e[17]!==N||e[18]!==c?(k=c==="page"?s.jsx(he,{to:I,className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:i,viewTransition:!1,children:N}):s.jsx("a",{href:I,rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:i,children:N}),e[15]=I,e[16]=i,e[17]=N,e[18]=c,e[19]=k):k=e[19];const a=k;let o;e[20]!==a?(o=s.jsx(j.Cell,{children:a}),e[20]=a,e[21]=o):o=e[21];let d;e[22]!==t.create_time?(d=t.create_time!=null?s.jsx(me,{value:t.create_time,month:"long",year:"numeric",day:"numeric"}):null,e[22]=t.create_time,e[23]=d):d=e[23];let f;e[24]!==d?(f=s.jsx(j.Cell,{children:d}),e[24]=d,e[25]=f):f=e[25];let u;e[26]!==l?(u=l.formatMessage(x.unarchiveConversation),e[26]=l,e[27]=u):u=e[27];let C;e[28]!==l?(C=l.formatMessage(x.unarchiveConversation),e[28]=l,e[29]=C):C=e[29];let _;e[30]!==t.id||e[31]!==g?(_=()=>{g({conversationId:t.id,is_archived:!1})},e[30]=t.id,e[31]=g,e[32]=_):_=e[32];let T;e[33]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(ye,{className:"icon-sm"}),e[33]=T):T=e[33];let A;e[34]!==C||e[35]!==_?(A=s.jsx("button",{"aria-label":C,className:"text-token-text-tertiary hover:text-token-text-secondary inline-flex h-7 w-7 cursor-pointer items-center justify-center text-[18px]",type:"button",onClick:_,children:T}),e[34]=C,e[35]=_,e[36]=A):A=e[36];let D;e[37]!==u||e[38]!==A?(D=s.jsx(ne,{label:u,side:"top",children:A}),e[37]=u,e[38]=A,e[39]=D):D=e[39];let P;e[40]!==l?(P=l.formatMessage(x.deleteConversation),e[40]=l,e[41]=P):P=e[41];let G;e[42]===Symbol.for("react.memo_cache_sentinel")?(G=()=>F(!0),e[42]=G):G=e[42];let L;e[43]!==l?(L=l.formatMessage(x.deleteConversation),e[43]=l,e[44]=L):L=e[44];let Q;e[45]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(pe,{className:"icon-sm"}),e[45]=Q):Q=e[45];let q;e[46]!==L?(q=s.jsx("button",{onClick:G,"aria-label":L,className:"text-token-text-tertiary hover:text-token-text-secondary inline-flex h-7 w-7 items-center justify-center",type:"button",children:Q}),e[46]=L,e[47]=q):q=e[47];let H;e[48]!==P||e[49]!==q?(H=s.jsx(ne,{label:P,side:"top",children:q}),e[48]=P,e[49]=q,e[50]=H):H=e[50];let z;e[51]!==D||e[52]!==H?(z=s.jsx(j.Cell,{textAlign:"right",children:s.jsxs(j.Actions,{children:[D,H]})}),e[51]=D,e[52]=H,e[53]=z):z=e[53];let U;e[54]!==E||e[55]!==f||e[56]!==z||e[57]!==o?(U=s.jsxs(j.Row,{disabled:E,children:[o,f,z]}),e[54]=E,e[55]=f,e[56]=z,e[57]=o,e[58]=U):U=e[58];let W;e[59]!==t.id||e[60]!==t.title||e[61]!==M||e[62]!==r||e[63]!==g?(W=M&&s.jsx(Me,{title:(J=t.title)!=null?J:"",handleDelete:()=>{g({conversationId:t.id,is_visible:!1})},onClose:$=>{F(!1),$!=null&&$.closeParentModal&&(r==null||r())}}),e[59]=t.id,e[60]=t.title,e[61]=M,e[62]=r,e[63]=g,e[64]=W):W=e[64];let K;return e[65]!==U||e[66]!==W?(K=s.jsxs(s.Fragment,{children:[U,W]}),e[65]=U,e[66]=W,e[67]=K):K=e[67],K}function Se(n){const i=n,{conversationId:e}=i,t=se(i,["conversationId"]);return ae.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:t})}function Re(n){"use forget";var k;const e=Z.c(37),{onClose:t,className:i,variant:r}=n,c=r===void 0?"modal":r;let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={queryKey:[le],queryFn:Fe,initialPageParam:0,getNextPageParam:Ae,refetchOnMount:"always"},e[0]=h):h=e[0];const{data:l,isLoading:S,isError:O,refetch:y,fetchNextPage:p,hasNextPage:R}=ce(h),g=V.useRef(null);let E;e[1]!==p||e[2]!==R||e[3]!==S?(E=a=>{var o;S||a==null||((o=g.current)==null||o.disconnect(),g.current=new IntersectionObserver(d=>{d[0].isIntersecting&&R&&p()}),g.current.observe(a))},e[1]=p,e[2]=R,e[3]=S,e[4]=E):E=e[4];const M=E;let F,b;e[5]===Symbol.for("react.memo_cache_sentinel")?(F=()=>()=>{var a;(a=g.current)==null||a.disconnect()},b=[],e[5]=F,e[6]=b):(F=e[5],b=e[6]),V.useEffect(F,b);let I;e[7]!==(l==null?void 0:l.pages)?(I=(k=l==null?void 0:l.pages.flatMap(Ee))!=null?k:[],e[7]=l==null?void 0:l.pages,e[8]=I):I=e[8];const m=I;let v;if(S){let a;e[9]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{className:"text-token-text-secondary pb-8",children:s.jsx(B,w({},x.loading))}),e[9]=a):a=e[9],v=a}else if(O){let a;e[10]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{className:"mb-4 text-red-500",children:s.jsx(B,w({},x.somethingWentWrong))}),e[10]=a):a=e[10];let o;e[11]!==y?(o=()=>{y()},e[11]=y,e[12]=o):o=e[12];let d;e[13]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(B,w({},x.retry)),e[13]=d):d=e[13];let f;e[14]!==o?(f=s.jsxs("div",{children:[a,s.jsx("div",{children:s.jsx(ve,{color:"secondary",onClick:o,children:d})})]}),e[14]=o,e[15]=f):f=e[15],v=f}else if(m.length===0){let a;e[16]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{className:"text-token-text-tertiary pb-8",children:s.jsx(B,w({},x.noArchivedConversations))}),e[16]=a):a=e[16],v=a}else{const a=c==="modal"?"max-h-[28rem]":"max-h-none";let o;e[17]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(j.HeaderCell,{children:s.jsx(B,w({},x.name))}),e[17]=o):o=e[17];let d;e[18]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs(j.Header,{children:[o,s.jsx(j.HeaderCell,{children:s.jsx(B,w({},x.dateCreated))}),s.jsx(j.HeaderCell,{})]}),e[18]=d):d=e[18];let f;if(e[19]!==m||e[20]!==M||e[21]!==t||e[22]!==c){let _;e[24]!==m.length||e[25]!==M||e[26]!==t||e[27]!==c?(_=(T,A)=>s.jsx(Ne,{conversation:T,elementRef:A===m.length-Ie?M:void 0,onCloseParent:t,variant:c},T.id),e[24]=m.length,e[25]=M,e[26]=t,e[27]=c,e[28]=_):_=e[28],f=m.map(_),e[19]=m,e[20]=M,e[21]=t,e[22]=c,e[23]=f}else f=e[23];let u;e[29]!==f?(u=s.jsx(j.Body,{children:f}),e[29]=f,e[30]=u):u=e[30];let C;e[31]!==u||e[32]!==a?(C=s.jsxs(j.Root,{className:a,size:"compact",children:[d,u]}),e[31]=u,e[32]=a,e[33]=C):C=e[33],v=C}let N;return e[34]!==v||e[35]!==i?(N=i?s.jsx("div",{className:i,children:v}):s.jsx(s.Fragment,{children:v}),e[34]=v,e[35]=i,e[36]=N):N=e[36],N}function Ee(n){return n.items}function Ae(n){var t,i,r;const e=((t=n.offset)!=null?t:0)+((i=n.limit)!=null?i:0);return e<((r=n.total)!=null?r:0)?e:void 0}function Fe(n){const{pageParam:e}=n;return ae.safeGet("/conversations",{parameters:{query:{offset:e,limit:be,order:"updated",is_archived:!0}},authOption:ue.SendIfAvailable})}function Le(n){"use forget";const e=Z.c(8),{onClose:t}=n,i=ie();let r;e[0]!==i?(r=i.formatMessage(x.title),e[0]=i,e[1]=r):r=e[1];let c;e[2]!==t?(c=s.jsx(Re,{onClose:t}),e[2]=t,e[3]=c):c=e[3];let h;return e[4]!==t||e[5]!==r||e[6]!==c?(h=s.jsx(xe,{testId:"modal-archived-conversations",isOpen:!0,onClose:t,size:"custom",className:"max-w-5xl",type:"success",title:r,showCloseButton:!0,children:c}),e[4]=t,e[5]=r,e[6]=c,e[7]=h):h=e[7],h}export{Re as ArchivedConversationsContent,Le as ArchivedConversationsModal,x as archivedConversationsMessages,Le as default};
//# sourceMappingURL=pax5oh3r2351bfs2.js.map
