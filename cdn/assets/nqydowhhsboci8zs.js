var Wt=Object.defineProperty,Kt=Object.defineProperties;var Qt=Object.getOwnPropertyDescriptors;var yt=Object.getOwnPropertySymbols;var Yt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable;var kt=(s,e,a)=>e in s?Wt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,ye=(s,e)=>{for(var a in e||(e={}))Yt.call(e,a)&&kt(s,a,e[a]);if(yt)for(var a of yt(e))Xt.call(e,a)&&kt(s,a,e[a]);return s},wt=(s,e)=>Kt(s,Qt(e));import{b as Zt,r as k,e as Ne,a as Jt,j as t,M as i,h as es,c as Ge,w as ts,m as It,a0 as ss}from"./fg33krlcm0qyi6yw.js";import{ib as as,kS as rs,ab as ns,ac as os,z as At,aw as Lt,an as ke,uO as is}from"./k65njl5wlgspihfr.js";import{b as Bt,g as mt,f as ls,d as Nt,E as we,e as at,h as cs}from"./dp77n34mztiej9w9.js";import{fA as Pt,eD as ut,m as rt,I as ht,b as nt,a9 as de,bO as Ot,P as ft,zv as Ct,zw as ds,jj as ms,hA as Ht,iq as Tt,c0 as Dt,l as us,i7 as fs,zx as hs,t9 as ps,bp as Mt,bt as _t,d as xs,wt as gs,kW as bs}from"./mtk1qztvnb31pw5r.js";import{W as vs}from"./j3x02iqqi345yx57.js";import{h as js,m as ys}from"./n0ab5m1z76n8mazm.js";import{T as y}from"./hcn3kohxpjzaoxwc.js";import{W as ks}from"./sy1xvqwioh9ks4z8.js";import{A as ws}from"./ocjy2hqri2k6d7gs.js";import"./fc76377xmf89lezj.js";import"./cmaobpdpreyiep8p.js";import"./lbq5605sor1ah5hb.js";import"./mmn9462oogkapcg8.js";import"./blmsijdyv0yxybpw.js";import"./bbzlu7xqes2h12wz.js";import"./npp0xpas090zc0qr.js";import"./kzbknm4lxuyoq9wi.js";import"./jed1ux7qibe55pmj.js";import"./h1em0bjkpkjv8ykw.js";import"./f5ep9o7usovyn4vf.js";import"./ly75bs3d14n5v622.js";import"./hu1bt0oauegdhua6.js";import"./bhm7utdivrybcfbl.js";import"./ohquqctluwabmb5i.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./c2cj1dlcffke3f7m.js";import"./hb1mva1gmw4bcs8w.js";import"./mivow98b53y1taf8.js";import"./krwszi9u3lj63i9v.js";import"./e5ksk0bbujs0ac88.js";function $t(s){const{data:e,isLoading:a,refetch:r,isFetching:o,error:n}=Zt({queryKey:["aardvark","scan-configs",s!=null?s:"personal"],enabled:!0,queryFn:async()=>{var x,R;const h=new Bt(Pt),b={limit:1e3},N=await h.get("/aardvark/scan_configurations",{headers:ut(),query:b});if(N.status!==200)throw mt(N.status,N.data);return(R=(x=N.data.items)==null?void 0:x.map(M=>{var m;return wt(ye({},M),{lookback_days:(m=M.scan_input.lookback_days)!=null?m:null})}))!=null?R:[]},refetchOnWindowFocus:!0}),{scanMap:u,configIdByRepo:l,configVersionById:c}=k.useMemo(()=>{const h=new Map,b=new Map,N=new Map;for(const x of e!=null?e:[])b.set(x.scan_input.repo_id,x.id),N.set(x.id,x.version),h.set(x.scan_input.repo_id,x);return{scanMap:h,configIdByRepo:b,configVersionById:N}},[e]);return{scanMap:u,configIdByRepo:l,configVersionById:c,isLoading:a||o,refetch:r,error:n}}function St(s,e,a){const r=["aardvark","scan-configs",s!=null?s:"personal"];a.setQueryData(r,o=>{const n=Array.isArray(o)?[...o]:[],u=ls(n,l=>l.id===e.id);return u>=0?n[u]=e:n.push(e),n})}const Rt=void 0;function Ft(s){return s===void 0||typeof s=="number"&&Number.isFinite(s)&&s>=0&&s<=90}function Ns({value:s,onChange:e,isSaving:a,isReadOnly:r}){const o=Ne(),n=Ft(s),u=a||r;return t.jsxs("div",{className:"grid w-full grid-cols-[1fr,auto] grid-rows-[auto,auto] gap-x-4 gap-y-1 ".concat(u?"pointer-events-none opacity-60":""),children:[t.jsx("label",{className:"col-start-1 row-start-1 justify-self-start text-start text-sm font-medium",children:t.jsx(i,{id:"aardvark.whamRepos.lookbackDays",defaultMessage:"Lookback window"})}),t.jsx("div",{className:"text-token-text-tertiary col-start-1 row-start-2 justify-self-start text-start text-[11px]",children:t.jsx(i,{id:"aardvark.whamRepos.lookbackDays.help",defaultMessage:"How far back to scan existing commits when first enabled."})}),t.jsxs("div",{className:"col-start-2 row-span-2 flex flex-col items-end gap-2 self-center justify-self-end",children:[t.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:o.formatMessage({id:"aardvark.whamRepos.preset.1w",defaultMessage:"1w"}),value:7},{label:o.formatMessage({id:"aardvark.whamRepos.preset.2w",defaultMessage:"2w"}),value:14},{label:o.formatMessage({id:"aardvark.whamRepos.preset.1m",defaultMessage:"1m"}),value:30},{label:o.formatMessage({id:"aardvark.whamRepos.preset.3m",defaultMessage:"3m"}),value:90},{label:o.formatMessage({id:"aardvark.whamRepos.preset.indefinite",defaultMessage:"Indefinite"}),value:void 0}].map(l=>{var c;return t.jsx("button",{type:"button",onClick:()=>{u||e(l.value)},className:"border-token-border-light rounded-md border px-2 py-1 text-xs "+(s===l.value?"bg-token-main-surface-secondary text-token-text-primary":"bg-token-bg-primary text-token-text-secondary hover:bg-token-main-surface-secondary"),children:l.label},String((c=l.value)!=null?c:"indefinite"))})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",disabled:u,value:s!=null?s:"",placeholder:s===void 0?o.formatMessage({id:"aardvark.whamRepos.preset.placeholder.indefinite",defaultMessage:"Indefinite"}):void 0,onChange:l=>{if(u)return;const c=l.target.value;if(c===""||c==="indefinite"){e(void 0);return}const h=parseInt(c,10);Number.isFinite(h)&&e(h)},"aria-invalid":!n,"aria-describedby":n?void 0:"lookback-error",className:"border-token-border-light bg-token-main-surface-secondary text-token-text-primary w-24 rounded-md border px-2 py-1 text-end text-xs focus:ring-1 focus:outline-none "+(n?"focus:ring-token-border-light":"border-red-500 focus:ring-red-500"),"aria-label":o.formatMessage({id:"aardvark.whamRepos.lookbackDays.input",defaultMessage:"Lookback days"})}),s!==void 0&&t.jsx("span",{className:"text-token-text-tertiary text-xs",children:t.jsx(i,{id:"aardvark.whamRepos.lookbackDays.suffix",defaultMessage:"days"})})]}),n?null:t.jsx("div",{id:"lookback-error",className:"self-end text-[11px] text-red-500",children:t.jsx(i,{id:"aardvark.whamRepos.lookbackDays.error",defaultMessage:"Enter a value between 0 and 90."})})]})]})}function zt(s){"use no forget";var v,q;const{open:e,onOpenChange:a,repoName:r,repoId:o,repoFullName:n,canEdit:u=!0}=s,l=Ne(),c=rt(),h=nt(),b=ht(h),N=(v=b==null?void 0:b.authUserId)!=null?v:"",x=b==null?void 0:b.getWorkspaceId(),{environmentId:R,setEnvironmentId:M}=js(),{scanMap:m,configIdByRepo:F,configVersionById:V}=$t(x),E=Jt(),[f,H]=k.useState(!1),[_,I]=k.useState(!1),[g,z]=k.useState(Rt),C=k.useMemo(()=>m.get(o),[m,o]),w=k.useMemo(()=>C==null?void 0:C.scan_input,[C]);k.useEffect(()=>{var B,D;if(!e)return;if(H(((B=w==null?void 0:w.state)!=null?B:"disabled")==="enabled"),M((D=w==null?void 0:w.environment_id)!=null?D:null),!w){z(Rt);return}const p=w==null?void 0:w.lookback_days;z(p==null?void 0:p)},[e,w,M]);const S=()=>{a(!1)},A=async()=>{if(R){I(!0);try{const p=F.get(o),B=new Bt(Pt);if(!p){const X=await B.post("/aardvark/scan_configurations",{headers:ut(),body:{environment_id:R,repo_id:o,repo_url:"https://github.com/".concat(n),state:f?"enabled":"disabled",owner_id:N,lookback_days:g!=null?g:null}});if(X.status!==201)throw mt(X.status,X.data);St(x,X.data,E),E.invalidateQueries({queryKey:Nt()}),a(!1),c.successNeutral(l.formatMessage({id:"aardvark.toast.settingsSaved",defaultMessage:"Scan settings saved"})),ft.logStructuredEvent(Ct,{repoId:o,scanEnabled:f,isNewConfig:!0,lookbackDays:g});return}const D=V.get(p),$=await B.patch("/aardvark/scan_configurations/{id}",{headers:ut(),path:{id:p},body:{version:D,state:f?"enabled":"disabled",owner_id:f?N:void 0,environment_id:R,lookback_days:g!=null?g:null}});if($.status!==200)throw mt($.status,$.data);St(x,$.data,E),E.invalidateQueries({queryKey:Nt()}),a(!1),c.successNeutral(l.formatMessage({id:"aardvark.toast.settingsSaved",defaultMessage:"Scan settings saved"})),ft.logStructuredEvent(Ct,{repoId:o,scanEnabled:f,isNewConfig:!1,lookbackDays:g})}catch(p){const B=p,D=l.formatMessage(we.scanSettingsSave,{details:B.message});c.danger(D)}finally{I(!1)}}},T=k.useMemo(()=>{var p,B;return(B=(p=C==null?void 0:C.owner)==null?void 0:p.email)!=null?B:l.formatMessage({id:"aardvark.placeholder.missing",defaultMessage:"—"})},[(q=C==null?void 0:C.owner)==null?void 0:q.email,l]),O=()=>{if(u){const p=R!==null&&R&&Ft(g),B=_||!p;return t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(de,{color:"secondary",onClick:S,children:t.jsx(i,{id:"aardvark.whamRepos.cancel",defaultMessage:"Cancel"})}),t.jsx(de,{color:"primary",disabled:B,onClick:A,children:_?t.jsx(i,{id:"aardvark.whamRepos.saving",defaultMessage:"Saving..."}):t.jsx(i,{id:"aardvark.whamRepos.save",defaultMessage:"Save"})})]})}return t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(de,{color:"secondary",onClick:S,children:t.jsx(i,{id:"aardvark.whamRepos.close",defaultMessage:"Close"})})})};return t.jsxs(as,{open:e,onOpenChange:a,children:[t.jsx(rs,{asChild:!0,children:t.jsx(de,{as:"button",color:"secondary",size:"small",children:u?t.jsx(i,{id:"aardvark.whamRepos.configureButton",defaultMessage:"Configure"}):t.jsx(i,{id:"aardvark.whamRepos.viewSettings",defaultMessage:"View"})})}),t.jsx(ns,{children:t.jsxs(os,{side:"bottom",align:"end",sideOffset:8,className:"border-token-border-light bg-token-bg-primary z-10 w-[520px] rounded-lg border p-4 shadow-xl",children:[t.jsx("div",{className:"text-token-text-primary mb-3 text-lg leading-6 font-semibold",children:t.jsx(i,{id:"aardvark.whamRepos.scanSettingsInlineTitle",defaultMessage:"Scan settings for {repo}",values:{repo:r}})}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm font-medium",children:t.jsx(i,{id:"aardvark.whamRepos.ownerLabel",defaultMessage:"Owner"})}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:T})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"text-sm font-medium",children:t.jsx(i,{id:"aardvark.whamRepos.enabledToggle",defaultMessage:"Enabled"})}),t.jsx(Ot,{checked:f,onCheckedChange:p=>H(p),"aria-hidden":!0,disabled:_||!u})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("label",{className:"text-sm font-medium",children:t.jsx(i,{id:"aardvark.whamRepos.environment",defaultMessage:"Codex environment"})}),t.jsx("div",{className:_||!u?"pointer-events-none opacity-60":"",children:t.jsx(vs,{showBranchSelector:!1,filters:{repos:[o]},allowRepositorySelection:!1})})]}),t.jsx(Ns,{value:g,onChange:z,isSaving:_,isReadOnly:!u}),O()]})]})})]})}var dt,Et;function Cs(){if(Et)return dt;Et=1;var s=ds(),e=ms();function a(r,o,n,u){return r==null?[]:(e(o)||(o=o==null?[]:[o]),n=u?void 0:n,e(n)||(n=n==null?[]:[n]),s(r,o,n))}return dt=a,dt}var Ms=Cs();const _s=es(Ms);function Ss(s){"use forget";const e=Ge.c(54),{scanConfigurations:a,intl:r,currentUserId:o}=s,[n,u]=k.useState(1),[l,c]=k.useState(""),[h,b]=k.useState(null);let N;if(e[0]!==a||e[1]!==l){const L=l.trim().toLowerCase(),oe=a.filter(W=>{var te,K;const ie=W.scan_input.repo_url.replace("https://github.com/",""),ee=ie.split("/"),fe=(te=ee.pop())!=null?te:ie,he=(K=ee[0])!=null?K:"";return L?fe.toLowerCase().includes(L)||he.toLowerCase().includes(L):!0});N=_s(oe,[Bs,Ls,As],["asc","asc","asc"]),e[0]=a,e[1]=l,e[2]=N}else N=e[2];const x=N,R=Math.max(1,Math.ceil(x.length/10)),M=Math.min(n,R),m=(M-1)*10,F=Math.min(m+10,x.length),V=x.slice(m,F);let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E=()=>{u(1)},e[3]=E):E=e[3];let f;e[4]!==a.length||e[5]!==l?(f=[a.length,l],e[4]=a.length,e[5]=l,e[6]=f):f=e[6],k.useEffect(E,f);let H;e[7]===Symbol.for("react.memo_cache_sentinel")?(H=L=>c(L.target.value),e[7]=H):H=e[7];let _;e[8]!==r?(_=r.formatMessage({id:"aardvark.whamRepos.searchPlaceholder",defaultMessage:"Search repositories"}),e[8]=r,e[9]=_):_=e[9];let I;e[10]!==r?(I=r.formatMessage({id:"aardvark.whamRepos.searchAria",defaultMessage:"Search repositories"}),e[10]=r,e[11]=I):I=e[11];let g;e[12]!==l||e[13]!==_||e[14]!==I?(g=t.jsx("div",{className:"mb-3 flex justify-end",children:t.jsx("div",{className:"w-64",children:t.jsx(At,{color:"search",iconPosition:"left",icon:Ht,className:"text-token-text-tertiary flex h-9 w-full items-center rounded-md!",inputClassName:"text-token-text-primary w-full",containerInputClassName:"w-full",name:"search-configured-repos",type:"text",value:l,onChange:H,placeholder:_,ariaLabel:I})})}),e[12]=l,e[13]=_,e[14]=I,e[15]=g):g=e[15];const z=y,C="overflow-x-auto overflow-y-clip",w=!0;let S;e[16]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.organizationHeader",defaultMessage:"Organization"})}),e[16]=S):S=e[16];let A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.repository",defaultMessage:"Repository"})}),e[17]=A):A=e[17];let T;e[18]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.scanning",defaultMessage:"Scanning"})}),e[18]=T):T=e[18];let O;e[19]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.ownerHeader",defaultMessage:"Owner"})}),e[19]=O):O=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsxs(y.Header,{children:[S,A,T,O,t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.settingsHeader",defaultMessage:"Settings"})})]}),e[20]=v):v=e[20];const q=y;let p;e[21]!==h||e[22]!==o||e[23]!==r?(p=L=>{var ge,le,be,ce;const oe=L.scan_input,W=oe.repo_url.replace("https://github.com/",""),ie=W,ee=(ge=W.split("/").pop())!=null?ge:W,fe=(le=W.split("/")[0])!=null?le:W,he=(ce=(be=L.owner)==null?void 0:be.email)!=null?ce:r.formatMessage({id:"aardvark.placeholder.missing",defaultMessage:"—"}),te=oe.state==="enabled",K=oe.repo_id,Ce=L.owner_id===o,U=!L.owner_id||Ce;return t.jsxs(y.Row,{className:"h-14 px-2 text-sm",children:[t.jsx(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:fe}),t.jsxs(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:[t.jsx("button",{className:"text-start underline-offset-2 hover:underline",onClick:()=>window.open(oe.repo_url,"_blank"),children:ee}),t.jsx("a",{href:oe.repo_url,target:"_blank",rel:"noopener noreferrer",className:"ms-2",onClick:Is,children:t.jsx(Tt,{className:"icon-sm"})})]}),t.jsx(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:t.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs ".concat(te?"bg-green-500/10 text-green-600":"bg-token-text-status-error/15 text-token-text-status-error"),children:te?t.jsx(i,{id:"aardvark.repos.status.enabled",defaultMessage:"Enabled"}):t.jsx(i,{id:"aardvark.repos.status.disabled",defaultMessage:"Disabled"})})}),t.jsx(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:he}),t.jsx(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:t.jsx(zt,{open:h===K,onOpenChange:Me=>b(Me?K:null),repoName:ee,repoId:K,repoFullName:ie,canEdit:U})})]},"other-".concat(K))},e[21]=h,e[22]=o,e[23]=r,e[24]=p):p=e[24];const B=V.map(p);let D;e[25]!==q.Body||e[26]!==B?(D=t.jsx(q.Body,{children:B}),e[25]=q.Body,e[26]=B,e[27]=D):D=e[27];let $;e[28]!==v||e[29]!==D||e[30]!==z.Root?($=t.jsxs(z.Root,{className:C,disableScroll:w,children:[v,D]}),e[28]=v,e[29]=D,e[30]=z.Root,e[31]=$):$=e[31];const X=x.length===0?0:m+1;let ae;e[32]!==F||e[33]!==x.length||e[34]!==X?(ae=t.jsx("div",{className:"text-token-text-tertiary text-xs",children:t.jsx(i,{id:"aardvark.whamRepos.configuredRange",defaultMessage:"{from}-{to} of {total} repositories",values:{from:X,to:F,total:x.length}})}),e[32]=F,e[33]=x.length,e[34]=X,e[35]=ae):ae=e[35];const me=M<=1;let re,ne;e[36]===Symbol.for("react.memo_cache_sentinel")?(re=()=>u(Es),ne=t.jsx(i,{id:"aardvark.pagination.prev",defaultMessage:"Previous"}),e[36]=re,e[37]=ne):(re=e[36],ne=e[37]);let Q;e[38]!==me?(Q=t.jsx(de,{as:"button",size:"small",color:"secondary",disabled:me,onClick:re,children:ne}),e[38]=me,e[39]=Q):Q=e[39];const xe=M>=R;let ue,Z;e[40]===Symbol.for("react.memo_cache_sentinel")?(ue=()=>u(Rs),Z=t.jsx(i,{id:"aardvark.pagination.next",defaultMessage:"Next"}),e[40]=ue,e[41]=Z):(ue=e[40],Z=e[41]);let P;e[42]!==xe?(P=t.jsx(de,{as:"button",size:"small",color:"secondary",disabled:xe,onClick:ue,children:Z}),e[42]=xe,e[43]=P):P=e[43];let Y;e[44]!==Q||e[45]!==P?(Y=t.jsxs("div",{className:"flex items-center gap-2",children:[Q,P]}),e[44]=Q,e[45]=P,e[46]=Y):Y=e[46];let G;e[47]!==ae||e[48]!==Y?(G=t.jsxs("div",{className:"border-token-border-light bg-token-bg-primary mt-2 flex items-center justify-between border-t px-3 py-2",children:[ae,Y]}),e[47]=ae,e[48]=Y,e[49]=G):G=e[49];let J;return e[50]!==$||e[51]!==G||e[52]!==g?(J=t.jsxs(t.Fragment,{children:[g,$,G]}),e[50]=$,e[51]=G,e[52]=g,e[53]=J):J=e[53],J}function Rs(s){return s+1}function Es(s){return Math.max(1,s-1)}function Is(s){return s.stopPropagation()}function As(s){var o;const e=s.scan_input.repo_url.replace("https://github.com/","");return((o=e.split("/").pop())!=null?o:e).toLowerCase()}function Ls(s){var a;return((a=s.scan_input.repo_url.replace("https://github.com/","").split("/")[0])!=null?a:"").toLowerCase()}function Bs(s){var e;return((e=s.scan_input.state)!=null?e:"disabled")==="enabled"?0:1}function Ps(){const s=Ne();return t.jsxs("div",{className:"mt-5",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h2",{id:"configured-repos",className:"text-token-text-primary text-lg leading-6 font-semibold",children:t.jsx(i,{id:"aardvark.whamRepos.configuredSectionTitle",defaultMessage:"All configured repositories"})}),t.jsx("a",{href:"#configured-repos",className:"text-token-text-tertiary opacity-60 hover:opacity-100","aria-label":s.formatMessage({id:"aardvark.whamRepos.configuredLinkAria",defaultMessage:"Deep link to configured repositories"}),children:t.jsx(Lt,{className:"icon-sm"})})]}),t.jsx("p",{className:"text-token-text-secondary mt-2 mb-6 text-sm leading-6",children:t.jsx(i,{id:"aardvark.whamRepos.configuredSectionDescription",defaultMessage:"This is the full list of repositories in the workspace with scan configurations, created by you or other workspace members. You may not see findings for repos you haven’t connected."})})]})}function Os({scanConfigurations:s,isLoading:e=!1,errorMessage:a,currentUserId:r}){const o=Ne();return t.jsxs(t.Fragment,{children:[t.jsx(Ps,{}),t.jsx(Hs,{scanConfigurations:s,isLoading:e,errorMessage:a,intl:o,currentUserId:r})]})}function Hs({scanConfigurations:s,isLoading:e,errorMessage:a,intl:r,currentUserId:o}){return a?t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"border-token-border-light bg-token-main-surface-secondary/50 inline-flex items-center gap-2 rounded-lg border px-3 py-2.5 text-sm shadow-sm",children:t.jsx("div",{className:"text-token-text-secondary leading-6",children:a})})}):e?t.jsx("div",{className:"flex h-24 items-center justify-center",children:t.jsx(Dt,{className:"text-token-text-tertiary h-6 w-6"})}):s.length===0?t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"border-token-border-light bg-token-main-surface-secondary/50 inline-flex items-center gap-2 rounded-lg border px-3 py-2.5 text-sm shadow-sm",children:t.jsx("div",{className:"text-token-text-secondary leading-6",children:t.jsx(i,{id:"aardvark.whamRepos.configuredEmpty",defaultMessage:"No configured repositories yet."})})})}):t.jsx(Ss,{scanConfigurations:s,intl:r,currentUserId:o})}function Ts({className:s}){return t.jsxs("div",{className:us("border-token-border-light/70 bg-token-main-surface-secondary/50 inline-flex items-center gap-2 rounded-lg border px-3 py-2.5 shadow-sm",s),role:"note",children:[t.jsx(fs,{className:"icon-sm text-token-icon-tertiary min-w-[16px]","aria-hidden":!0}),t.jsx("div",{className:"text-token-text-secondary text-sm leading-6",children:t.jsx(i,{id:"aardvark.home.configureScans.disclaimer",defaultMessage:"Workspace visibility: Scan configurations are visible to all workspace members. However, findings are only visible to workspace members with access to the repository."})})]})}const qt=100;function Ds(s){"use forget";var pt,xt,gt,bt;const e=Ge.c(138),{connectorLoading:a,scanMap:r,currentUserId:o,intl:n,isConnected:u}=s,l=rt(),{data:c,isLoading:h,error:b}=ys();let N;e[0]!==(c==null?void 0:c.memberships)?(N=(pt=c==null?void 0:c.memberships)!=null?pt:[],e[0]=c==null?void 0:c.memberships,e[1]=N):N=e[1];let x;e[2]!==(c==null?void 0:c.other)?(x=(xt=c==null?void 0:c.other)!=null?xt:[],e[2]=c==null?void 0:c.other,e[3]=x):x=e[3];let R;e[4]!==N||e[5]!==x?(R=[...N,...x],e[4]=N,e[5]=x,e[6]=R):R=e[6];const M=R,[m,F]=k.useState(null);let V,E;e[7]!==M||e[8]!==m?(V=()=>{if(M.length===0){F(null);return}(m==null||!M.some(d=>d.id===m))&&F(M[0].id)},E=[M,m],e[7]=M,e[8]=m,e[9]=V,e[10]=E):(V=e[9],E=e[10]),k.useEffect(V,E);let f;e[11]!==m?(f=["aardvark","wham","repositories",m],e[11]=m,e[12]=f):f=e[12];const H=u&&!!m;let _;e[13]!==m?(_=d=>{const{pageParam:j}=d;return ks.getRepositoriesByInstallationId(m!=null?m:0,j,qt)},e[13]=m,e[14]=_):_=e[14];let I;e[15]!==f||e[16]!==H||e[17]!==_?(I={queryKey:f,enabled:H,initialPageParam:1,queryFn:_,getNextPageParam:Gs,refetchOnWindowFocus:!0},e[15]=f,e[16]=H,e[17]=_,e[18]=I):I=e[18];const{data:g,isLoading:z,fetchNextPage:C,hasNextPage:w,isFetchingNextPage:S,error:A}=ts(I);let T;e[19]!==(g==null?void 0:g.pages)?(T=(gt=g==null?void 0:g.pages.flatMap(Vs))!=null?gt:[],e[19]=g==null?void 0:g.pages,e[20]=T):T=e[20];const O=T,[v,q]=k.useState(""),[p,B]=k.useState(!1),[D,$]=k.useState(1),[X,ae]=k.useState(null);let me;if(e[21]!==O||e[22]!==v){let d;e[24]!==v?(d=j=>j.name.toLowerCase().includes(v.trim().toLowerCase()),e[24]=v,e[25]=d):d=e[25],me=O.filter(d),e[21]=O,e[22]=v,e[23]=me}else me=e[23];const re=me;let ne,Q;e[26]!==C||e[27]!==w||e[28]!==S||e[29]!==v?(ne=()=>{v.trim()!==""&&w&&!S&&C()},Q=[v,w,S,C],e[26]=C,e[27]=w,e[28]=S,e[29]=v,e[30]=ne,e[31]=Q):(ne=e[30],Q=e[31]),k.useEffect(ne,Q);let xe;e:{if(!p){xe=re;break e}let d;if(e[32]!==re||e[33]!==r){let j;e[35]!==r?(j=pe=>{var ve,je;const se=(ve=r.get(pe.id))==null?void 0:ve.scan_input;return((je=se==null?void 0:se.state)!=null?je:"disabled")==="enabled"},e[35]=r,e[36]=j):j=e[36],d=re.filter(j),e[32]=re,e[33]=r,e[34]=d}else d=e[34];xe=d}const ue=xe;let Z;if(e[37]!==ue||e[38]!==r){Z=[...ue];let d;e[40]!==r?(d=(j,pe)=>{var je,Ve,tt,st;const se=((Ve=(je=r.get(j.id))==null?void 0:je.scan_input)==null?void 0:Ve.state)==="enabled",ve=((st=(tt=r.get(pe.id))==null?void 0:tt.scan_input)==null?void 0:st.state)==="enabled";return se===ve?j.name.localeCompare(pe.name):se?-1:1},e[40]=r,e[41]=d):d=e[41],Z.sort(d),e[37]=ue,e[38]=r,e[39]=Z}else Z=e[39];const P=Z,Y=Math.max(1,Math.ceil(P.length/10)),G=Math.min(D,Y),J=(G-1)*10,L=Math.min(J+10,P.length),oe=P.slice(J,L);let W,ie;e[42]!==L||e[43]!==C||e[44]!==w||e[45]!==S||e[46]!==O.length?(W=()=>{L>=O.length&&w&&!S&&C()},ie=[L,O.length,w,S,C],e[42]=L,e[43]=C,e[44]=w,e[45]=S,e[46]=O.length,e[47]=W,e[48]=ie):(W=e[47],ie=e[48]),k.useEffect(W,ie);let ee;e[49]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{$(1)},e[49]=ee):ee=e[49];let fe;e[50]!==v||e[51]!==m||e[52]!==p?(fe=[v,m,p],e[50]=v,e[51]=m,e[52]=p,e[53]=fe):fe=e[53],k.useEffect(ee,fe);let he,te;e[54]!==b||e[55]!==n||e[56]!==l?(he=()=>{if(!b)return;const d=at(b),j=n.formatMessage(we.githubInstallationsLoad,{details:d});l.danger(j,{hasCloseButton:!0})},te=[b,n,l],e[54]=b,e[55]=n,e[56]=l,e[57]=he,e[58]=te):(he=e[57],te=e[58]),k.useEffect(he,te);let K,Ce;e[59]!==n||e[60]!==A||e[61]!==l?(K=()=>{if(!A)return;const d=at(A),j=n.formatMessage(we.githubRepositoriesLoad,{details:d});l.danger(j,{hasCloseButton:!0})},Ce=[n,A,l],e[59]=n,e[60]=A,e[61]=l,e[62]=K,e[63]=Ce):(K=e[62],Ce=e[63]),k.useEffect(K,Ce);const U=a||h||z,ge=M.length>0;let le;e[64]!==ge?(le=ge?t.jsx(Ts,{}):null,e[64]=ge,e[65]=le):le=e[65];let be;e[66]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("p",{className:"text-token-text-primary text-sm leading-6 font-medium",children:t.jsx(i,{id:"aardvark.whamRepos.githubOrg",defaultMessage:"GitHub organization"})}),e[66]=be):be=e[66];let ce;e[67]!==m?(ce=(bt=m==null?void 0:m.toString())!=null?bt:"",e[67]=m,e[68]=ce):ce=e[68];let Me;e[69]===Symbol.for("react.memo_cache_sentinel")?(Me=d=>F(parseInt(d)),e[69]=Me):Me=e[69];const ot=!ge;let _e;e[70]!==n?(_e=n.formatMessage({id:"aardvark.whamRepos.selectOrg",defaultMessage:"Select organization"}),e[70]=n,e[71]=_e):_e=e[71];let Se;e[72]!==_e?(Se=t.jsx("div",{className:"truncate",children:t.jsx(ke.Value,{placeholder:_e})}),e[72]=_e,e[73]=Se):Se=e[73];let We;e[74]===Symbol.for("react.memo_cache_sentinel")?(We=t.jsx(ke.Icon,{}),e[74]=We):We=e[74];let Re;e[75]!==Se?(Re=t.jsx(ke.Trigger,{className:"border-token-border-heavy bg-token-bg-primary w-60 rounded-md border",children:t.jsxs("div",{className:"flex w-full items-center justify-between",children:[Se,We]})}),e[75]=Se,e[76]=Re):Re=e[76];let Ee;e[77]!==M?(Ee=t.jsx(ke.Portal,{children:t.jsx(ke.Content,{align:"start",className:"rounded-lg",children:M.map(Us)})}),e[77]=M,e[78]=Ee):Ee=e[78];let Ie;e[79]!==ce||e[80]!==ot||e[81]!==Re||e[82]!==Ee?(Ie=t.jsxs("div",{className:"flex w-60 flex-col gap-2",children:[be,t.jsxs(ke.Root,{value:ce,onValueChange:Me,disabled:ot,children:[Re,Ee]})]}),e[79]=ce,e[80]=ot,e[81]=Re,e[82]=Ee,e[83]=Ie):Ie=e[83];let Ke;e[84]===Symbol.for("react.memo_cache_sentinel")?(Ke=d=>q(d.target.value),e[84]=Ke):Ke=e[84];let Ae;e[85]!==n?(Ae=n.formatMessage({id:"aardvark.whamRepos.searchPlaceholder",defaultMessage:"Search repositories"}),e[85]=n,e[86]=Ae):Ae=e[86];let Le;e[87]!==n?(Le=n.formatMessage({id:"aardvark.whamRepos.searchAria",defaultMessage:"Search repositories"}),e[87]=n,e[88]=Le):Le=e[88];let Be;e[89]!==v||e[90]!==Ae||e[91]!==Le?(Be=t.jsx("div",{className:"flex-1",children:t.jsx(At,{color:"search",iconPosition:"left",icon:Ht,className:"text-token-text-tertiary flex h-9 w-full items-center rounded-md!",inputClassName:"text-token-text-primary w-full",containerInputClassName:"w-full",name:"search-repos",type:"text",value:v,onChange:Ke,placeholder:Ae,ariaLabel:Le})}),e[89]=v,e[90]=Ae,e[91]=Le,e[92]=Be):Be=e[92];let Qe;e[93]===Symbol.for("react.memo_cache_sentinel")?(Qe=d=>B(d),e[93]=Qe):Qe=e[93];let Pe;e[94]!==n?(Pe=n.formatMessage({id:"aardvark.whamRepos.toggleShowEnabled",defaultMessage:"Enabled only"}),e[94]=n,e[95]=Pe):Pe=e[95];let Oe;e[96]!==p||e[97]!==Pe?(Oe=t.jsx(Ot,{checked:p,onCheckedChange:Qe,"aria-label":Pe}),e[96]=p,e[97]=Pe,e[98]=Oe):Oe=e[98];let Ye;e[99]===Symbol.for("react.memo_cache_sentinel")?(Ye=t.jsx("span",{className:"text-xs",children:t.jsx(i,{id:"aardvark.whamRepos.showEnabled",defaultMessage:"Enabled only"})}),e[99]=Ye):Ye=e[99];let He;e[100]!==Oe?(He=t.jsxs("div",{className:"flex h-9 items-center gap-2 self-end whitespace-nowrap",children:[Oe,Ye]}),e[100]=Oe,e[101]=He):He=e[101];let Te;e[102]!==Ie||e[103]!==Be||e[104]!==He?(Te=t.jsxs("div",{className:"flex flex-row items-end gap-2",children:[Ie,Be,He]}),e[102]=Ie,e[103]=Be,e[104]=He,e[105]=Te):Te=e[105];const it=y,Ut="overflow-x-auto overflow-y-clip",Vt=!0;let Xe;e[106]===Symbol.for("react.memo_cache_sentinel")?(Xe=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.repository",defaultMessage:"Repository"})}),e[106]=Xe):Xe=e[106];let Ze;e[107]===Symbol.for("react.memo_cache_sentinel")?(Ze=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.scanning",defaultMessage:"Scanning"})}),e[107]=Ze):Ze=e[107];let Je;e[108]===Symbol.for("react.memo_cache_sentinel")?(Je=t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.ownerHeader",defaultMessage:"Owner"})}),e[108]=Je):Je=e[108];let De;e[109]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsxs(y.Header,{children:[Xe,Ze,Je,t.jsx(y.HeaderCell,{className:"ps-2 text-sm",children:t.jsx(i,{id:"aardvark.whamRepos.settingsHeader",defaultMessage:"Settings"})})]}),e[109]=De):De=e[109];const lt=y;let $e;e[110]!==U?($e=U&&t.jsx(t.Fragment,{children:Array.from({length:5}).map(qs)}),e[110]=U,e[111]=$e):$e=e[111];let Fe;e[112]!==P.length||e[113]!==U?(Fe=P.length===0&&!U&&t.jsx(y.Row,{children:t.jsx(y.Cell,{colSpan:4,divClassName:"flex h-14 items-center",children:t.jsx(i,{id:"aardvark.whamRepos.empty",defaultMessage:"No repositories"})})}),e[112]=P.length,e[113]=U,e[114]=Fe):Fe=e[114];const ct=oe.map(d=>{var jt;const j=r.get(d.id),pe=j==null?void 0:j.scan_input,se=(pe==null?void 0:pe.state)==="enabled",ve=(jt=j==null?void 0:j.owner)==null?void 0:jt.email,je=ve||n.formatMessage({id:"aardvark.placeholder.missing",defaultMessage:"—"}),Ve=!!j,tt=!!(j!=null&&j.owner_id)&&j.owner_id===o,st=!(j!=null&&j.owner_id)||tt,vt="https://github.com/"+d.repository_full_name;return t.jsxs(y.Row,{className:"group/row hover:bg-token-bg-tertiary h-14 px-2 text-sm",children:[t.jsxs(y.Cell,{divClassName:"flex h-14 items-center group-hover/row:underline ps-2",children:[t.jsx("button",{className:"text-start underline-offset-2 hover:underline",onClick:()=>window.open(vt,"_blank"),children:d.name}),t.jsx("a",{href:vt,target:"_blank",rel:"noopener noreferrer",className:"ms-2 opacity-0 group-hover/row:opacity-100",onClick:zs,children:t.jsx(Tt,{className:"icon-sm"})})]}),t.jsx(y.Cell,{divClassName:"flex h-14 items-center justify-start gap-3 ps-2",children:t.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs ".concat(Ve&&se?"bg-green-500/10 text-green-600":Ve&&!se?"bg-token-text-status-error/15 text-token-text-status-error":"bg-token-bg-tertiary text-token-text-tertiary"),children:Ve?se?t.jsx(i,{id:"aardvark.repos.status.enabled",defaultMessage:"Enabled"}):t.jsx(i,{id:"aardvark.status.disabled",defaultMessage:"Disabled"}):t.jsx(i,{id:"aardvark.status.unconfigured",defaultMessage:"Unconfigured"})})}),t.jsx(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:je}),t.jsx(y.Cell,{divClassName:"flex h-14 items-center ps-2",children:t.jsx(zt,{open:X===d.id,onOpenChange:Gt=>ae(Gt?d.id:null),repoName:d.name,repoId:d.id,repoFullName:d.repository_full_name,canEdit:st})})]},d.id)});let ze;e[115]!==lt.Body||e[116]!==$e||e[117]!==Fe||e[118]!==ct?(ze=t.jsxs(lt.Body,{children:[$e,Fe,ct]}),e[115]=lt.Body,e[116]=$e,e[117]=Fe,e[118]=ct,e[119]=ze):ze=e[119];let qe;e[120]!==it.Root||e[121]!==De||e[122]!==ze?(qe=t.jsxs(it.Root,{className:Ut,disableScroll:Vt,children:[De,ze]}),e[120]=it.Root,e[121]=De,e[122]=ze,e[123]=qe):qe=e[123];let Ue;e[124]!==L||e[125]!==P.length||e[126]!==w||e[127]!==Y||e[128]!==G||e[129]!==p||e[130]!==J||e[131]!==U?(Ue=P.length>0?t.jsxs("div",{className:"border-token-border-light bg-token-bg-primary flex items-center justify-between border-t px-3 py-2 ".concat(U?"animate-pulse blur-[1px]":""),children:[t.jsxs("div",{className:"text-token-text-tertiary text-xs",children:[t.jsx(i,{id:"aardvark.whamRepos.range",defaultMessage:"{from}-{to} of {total} repositories",values:{from:P.length===0?0:J+1,to:L,total:P.length}}),p&&t.jsx("span",{className:"text-token-text-secondary ms-2",children:t.jsx(i,{id:"aardvark.whamRepos.filteredEnabled",defaultMessage:"Showing enabled only"})})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(de,{as:"button",size:"small",color:"secondary",disabled:U||G<=1,onClick:()=>$(Fs),children:t.jsx(i,{id:"aardvark.pagination.prev",defaultMessage:"Previous"})}),t.jsx(de,{as:"button",size:"small",color:"secondary",disabled:U||G>=Y&&!w,onClick:()=>$($s),children:t.jsx(i,{id:"aardvark.pagination.next",defaultMessage:"Next"})})]})]}):null,e[124]=L,e[125]=P.length,e[126]=w,e[127]=Y,e[128]=G,e[129]=p,e[130]=J,e[131]=U,e[132]=Ue):Ue=e[132];let et;return e[133]!==le||e[134]!==Te||e[135]!==qe||e[136]!==Ue?(et=t.jsxs(t.Fragment,{children:[le,Te,qe,Ue]}),e[133]=le,e[134]=Te,e[135]=qe,e[136]=Ue,e[137]=et):et=e[137],et}function $s(s){return s+1}function Fs(s){return Math.max(1,s-1)}function zs(s){return s.stopPropagation()}function qs(s,e){return t.jsx(y.Row,{children:t.jsx(y.Cell,{colSpan:4,divClassName:"p-2",children:t.jsx("div",{className:"bg-token-bg-primary border-token-border-light h-6 w-full animate-pulse rounded-md border blur-[1px]"})})},"skeleton-".concat(e))}function Us(s){return t.jsx(ke.Item,{value:s.id.toString(),children:s.account_login},s.id)}function Vs(s){var e;return(e=s.repositories)!=null?e:[]}function Gs(s,e){var r;if(!(((r=s==null?void 0:s.repositories)!=null?r:[]).length<qt))return e.length+1}function Ws({error:s=!1,isEnabledByWorkspaceAdmin:e,handleOpenGithubModal:a}={}){const r=k.useMemo(()=>()=>{ft.logStructuredEvent(hs,{entryPoint:"connect_github_card",isEnabledByWorkspaceAdmin:!!e}),a==null||a()},[e,a]),o=k.useMemo(()=>s?t.jsx("div",{className:"bg-token-danger-muted text-token-text-secondary mt-4 rounded-md px-3 py-2 text-sm",role:"alert",children:t.jsx(i,ye({},we.githubConnectionInline))}):e?t.jsx(t.Fragment,{children:t.jsx("div",{className:"mt-4 flex items-center justify-center",children:t.jsx(de,{as:"button",size:"small",color:"secondary",onClick:r,children:t.jsx(i,{id:"aardvark.whamRepos.connectGithub",defaultMessage:"Connect GitHub"})})})}):t.jsx("div",{className:"bg-token-danger-muted text-token-text-secondary mt-4 rounded-md px-3 py-2 text-sm",role:"alert",children:t.jsx(i,ye({},we.githubConnectionNotEnabled))}),[s,r,e]);return t.jsxs("div",{className:"border-token-border-light/60 bg-token-main-surface-secondary/50 mx-auto w-full max-w-[640px] rounded-lg border px-5 py-6 text-center shadow-sm backdrop-blur-[2px]",children:[t.jsx("p",{className:"text-token-text-primary text-lg leading-6 font-semibold",children:t.jsx(i,{id:"aardvark.home.connectGithub.title",defaultMessage:"Connect GitHub to start scanning and view findings with Aardvark."})}),o]})}function Ks({hasGithubConnection:s,openGithubModal:e}){const a=Ne();return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h2",{id:"connected-repos",className:"text-token-text-primary text-lg leading-6 font-semibold",children:t.jsx(i,{id:"aardvark.whamRepos.connectedSectionTitle",defaultMessage:"Your connected repositories"})}),t.jsx("a",{href:"#connected-repos",className:"text-token-text-tertiary opacity-60 hover:opacity-100","aria-label":a.formatMessage({id:"aardvark.whamRepos.connectedLinkAria",defaultMessage:"Deep link to connected repositories"}),children:t.jsx(Lt,{className:"icon-sm"})})]}),t.jsx("p",{className:"text-token-text-secondary mt-2 mb-2 text-sm leading-6",children:t.jsx(i,{id:"aardvark.whamRepos.connectedSectionDescription",defaultMessage:"These are repositories from your GitHub organizations that you’ve connected. You can configure scans for them here. Missing a repo? {link}",values:{link:t.jsx("a",{href:"#connected-repos",className:"underline underline-offset-2",onClick:r=>{r.preventDefault(),s?window.open("https://github.com/apps/chatgpt-codex-connector/installations/select_target","_blank"):e()},children:t.jsx(i,{id:"aardvark.whamRepos.configureAccess",defaultMessage:"Configure repository access."})})}})})]})}function Qs(s){"use forget";var O;const e=Ge.c(37),{scanMap:a,scanConfigurationErrorMessage:r}=s,o=nt(),n=Ne(),u=rt(),{openGithubModal:l,error:c,isConnected:h,isLoading:b}=ps(_t.GITHUB_CONNECTOR,"github","/aardvark/scans?refresh_repos=true",Mt.CODEX);let N;e[0]!==o?(N=()=>gs(o,_t.GITHUB_CONNECTOR,{productSku:Mt.CODEX}),e[0]=o,e[1]=N):N=e[1];const x=xs(N),R=!b&&!h,M=h;let m;e[2]!==o?(m=ht(o),e[2]=o,e[3]=m):m=e[3];const F=m,V=(O=F==null?void 0:F.authUserId)!=null?O:"",E=cs(),f=It();let H;e[4]!==f.search?(H=new URLSearchParams(f.search).get("refresh_repos"),e[4]=f.search,e[5]=H):H=e[5];const _=H==="true";let I,g;e[6]!==c||e[7]!==n||e[8]!==u?(I=()=>{if(!c)return;const v=at(c),q=n.formatMessage(we.githubConnection,{details:v});u.danger(q,{hasCloseButton:!0})},g=[c,n,u],e[6]=c,e[7]=n,e[8]=u,e[9]=I,e[10]=g):(I=e[9],g=e[10]),k.useEffect(I,g);let z,C;e[11]!==h||e[12]!==f.hash||e[13]!==f.pathname||e[14]!==f.search||e[15]!==E||e[16]!==_?(z=()=>{if(!h||!_)return;E(!0);const v=new URLSearchParams(f.search);v.delete("refresh_repos");const q=v.toString(),p="".concat(f.pathname).concat(q?"?".concat(q):"").concat(f.hash);window.history.replaceState({},"",p)},C=[h,E,_,f.pathname,f.search,f.hash],e[11]=h,e[12]=f.hash,e[13]=f.pathname,e[14]=f.search,e[15]=E,e[16]=_,e[17]=z,e[18]=C):(z=e[17],C=e[18]),k.useEffect(z,C);const w=!!c;let S;e[19]!==b||e[20]!==V||e[21]!==n||e[22]!==h||e[23]!==a?(S=t.jsx(Ds,{connectorLoading:b,scanMap:a,currentUserId:V,intl:n,isConnected:h}),e[19]=b,e[20]=V,e[21]=n,e[22]=h,e[23]=a,e[24]=S):S=e[24];let A;e[25]!==b||e[26]!==x||e[27]!==l||e[28]!==r||e[29]!==R||e[30]!==w||e[31]!==S?(A=t.jsx(Xs,{scanConfigurationErrorMessage:r,showConnectCard:R,hasGithubError:w,openGithubModal:l,isLoading:b,isEnabledByWorkspaceAdmin:x,children:S}),e[25]=b,e[26]=x,e[27]=l,e[28]=r,e[29]=R,e[30]=w,e[31]=S,e[32]=A):A=e[32];let T;return e[33]!==M||e[34]!==l||e[35]!==A?(T=t.jsx(Ys,{hasGithubConnection:M,openGithubModal:l,children:A}),e[33]=M,e[34]=l,e[35]=A,e[36]=T):T=e[36],T}function Ys({hasGithubConnection:s,openGithubModal:e,children:a}){return t.jsxs("div",{className:"flex flex-col gap-5",children:[t.jsx("div",{className:"flex flex-col gap-1",children:t.jsx(Ks,{hasGithubConnection:s,openGithubModal:e})}),a]})}function Xs({scanConfigurationErrorMessage:s,showConnectCard:e,hasGithubError:a,openGithubModal:r,isLoading:o,isEnabledByWorkspaceAdmin:n,children:u}){return s?t.jsx(Zs,{message:s}):e?t.jsx(Ws,{error:a,handleOpenGithubModal:r,isEnabledByWorkspaceAdmin:n}):o?t.jsx("div",{className:"flex h-24 items-center justify-center",children:t.jsx(Dt,{className:"text-token-text-tertiary h-6 w-6"})}):t.jsx(t.Fragment,{children:u})}function Zs({message:s}){return t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"border-token-border-light bg-token-main-surface-secondary/50 inline-flex items-center gap-2 rounded-lg border px-3 py-2.5 text-sm shadow-sm",children:t.jsx("div",{className:"text-token-text-secondary leading-6",children:s})})})}function Js(){const s=It();return k.useEffect(()=>{const a=(s.hash||"").replace(/^#/,"").toLowerCase();let r="";if(a==="connected-repos")r="connected-repos";else if(a==="configured-repos")r="configured-repos";else return;try{let o=0;const n=()=>{const u=document.getElementById(r);u?u.scrollIntoView({behavior:"smooth",block:"start"}):o<10&&(o+=1,setTimeout(n,50))};requestAnimationFrame(n)}catch(o){}},[s.hash]),t.jsx("section",{id:"configure-scans",className:"mt-8",children:t.jsx(ea,{})})}function ea(){var b;const s=nt(),e=ht(s),a=e==null?void 0:e.getWorkspaceId(),{scanMap:r,isLoading:o,error:n}=$t(a),u=Array.from(r.values()),l=Ne(),c=rt(),h=k.useMemo(()=>n?l.formatMessage(we.scanConfigLoad,{details:at(n)}):null,[l,n]);return k.useEffect(()=>{h&&c.danger(h,{hasCloseButton:!0})},[l,h,c]),t.jsxs("div",{className:"display-flex flex-col gap-6",children:[t.jsx(Qs,ye({scanMap:r},h?{scanConfigurationErrorMessage:h}:{})),t.jsx(Os,ye({scanConfigurations:u,isLoading:o,currentUserId:(b=e==null?void 0:e.authUserId)!=null?b:""},h?{errorMessage:h}:{}))]})}function ta(){"use forget";const s=Ge.c(2),e=nt(),a=is(e),r=bs();if(!a)return null;let o;return s[0]!==r?(o=t.jsx(sa,ye({},r)),s[0]=r,s[1]=o):o=s[1],o}function sa(s){"use forget";const e=Ge.c(1);let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(ws,{children:t.jsx(Js,{})}),e[0]=a):a=e[0],a}const Pa=ss(function(){return t.jsx(ta,{})});export{Pa as default};
//# sourceMappingURL=nqydowhhsboci8zs.js.map
