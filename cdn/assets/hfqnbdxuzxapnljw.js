const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gaj6e78ii9fgijkk.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/mstl8wgfzorpgdoe.js","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css","assets/c0ls495fz2t1hbyy.js","assets/cdscbhv4xu1gie74.js","assets/lim1lqburrpeu20v.js","assets/fw6x669g9hrx2l8g.js","assets/bgx9m29b5moow7ak.js","assets/du8spbp0fpw55vih.js"])))=>i.map(i=>d[i]);
var Be=Object.freeze,Ue=Object.defineProperty,Ft=Object.defineProperties;var Lt=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var ze=(n,e,a)=>e in n?Ue(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,R=(n,e)=>{for(var a in e||(e={}))$e.call(e,a)&&ze(n,a,e[a]);if(he)for(var a of he(e))He.call(e,a)&&ze(n,a,e[a]);return n},H=(n,e)=>Ft(n,Lt(e));var ve=(n,e)=>{var a={};for(var s in n)$e.call(n,s)&&e.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&he)for(var s of he(n))e.indexOf(s)<0&&He.call(n,s)&&(a[s]=n[s]);return a};var Ke=(n,e)=>Be(Ue(n,"raw",{value:Be(e||n.slice())}));import{jI as Rt,jL as Bt,md as zt,jM as Ut,jP as $t,jN as Ht,jO as Kt,bu as nt,jR as qt,jz as Wt,ph as Yt,jA as Qt,jB as Zt,pi as Vt,pj as Jt,po as Xt,mc as en,pk as tn,jC as nn,pl as sn,jD as on,pm as an,jE as ln,jy as rn,jF as cn,jG as dn,jH as un,jJ as st,m as Z,gL as $,C as W,zj as Te,a9 as B,I as K,b as L,bF as ye,l as oe,bh as ce,g$ as ot,bp as Q,bq as at,bt as it,bT as lt,bY as rt,c0 as de,iK as Ie,ys as X,bg as Pe,zl as ue,cy as mn,bX as pn,zQ as fn,bZ as ct,nW as le,dv as Ee,bO as gn,cS as hn,c1 as xn,vL as yn,P as me,T as _n,gJ as dt,g2 as ne,F as bn,jQ as Cn,c2 as Mn,d as ut,gO as jn,p as kn,bv as mt,br as Sn,uI as Ne,ls as pt,zR as vn,zS as De,zT as Nn,bN as wn,bx as Tn,bw as qe,du as In,zU as Pn,bo as We,R as En}from"./mtk1qztvnb31pw5r.js";import{f as ft,e as z,r as x,j as t,M as h,c as F,_ as pe,b as fe,a as _e,w as Dn}from"./fg33krlcm0qyi6yw.js";import{f as On}from"./oc29jc50rrvtu7z8.js";import{fn as be,fO as gt,fM as ht,fN as xt,A8 as yt,A9 as _t,Aa as Ce,fx as An,aa as bt,ca as Gn,cL as Fn,ao as Ln,dy as Rn,dz as Bn,dA as zn}from"./k65njl5wlgspihfr.js";import{C as V,a as Me,b as Ct,u as Mt,R as jt,A as Un,g as $n,c as Hn,d as Kn,e as qn,f as Wn,M as Yn,D as se,G as Qn,S as Zn,t as kt}from"./dimtcupsb573kliu.js";import{C as je}from"./c0ls495fz2t1hbyy.js";import{d as St}from"./efooahjtdr85x1lo.js";import{d as Ye}from"./l1ka89a9nbqv3utj.js";import{C as Vn}from"./nq1hpdu2db6kh8n1.js";import{C as Jn}from"./kg06gqasi13as2pn.js";import{C as vt}from"./blg6blmyt2kk8gl7.js";const te=ft({fileSingular:{id:"TKyiaj",defaultMessage:"file"},filesPlural:{id:"krAMi5",defaultMessage:"files"},domainSingular:{id:"ExZP9r",defaultMessage:"domain"},domainsPlural:{id:"PmkQD7",defaultMessage:"domains"}});function Qe(n,e){return n==="google_drive_dwd"||n==="google_drive_oauth"?{objectTypeSingular:e.formatMessage(te.fileSingular),objectTypePlural:e.formatMessage(te.filesPlural),externalLinkableUnitSingular:e.formatMessage(te.domainSingular),externalLinkableUnitPlural:e.formatMessage(te.domainsPlural)}:n==="slack"?{objectTypeSingular:e.formatMessage({id:"Y22i2G",defaultMessage:"channel"}),objectTypePlural:e.formatMessage({id:"UXSOIk",defaultMessage:"channels"}),externalLinkableUnitSingular:e.formatMessage({id:"yyIyWp",defaultMessage:"workspace"}),externalLinkableUnitPlural:e.formatMessage({id:"LuznzN",defaultMessage:"workspaces"})}:{objectTypeSingular:e.formatMessage(te.fileSingular),objectTypePlural:e.formatMessage(te.filesPlural),externalLinkableUnitSingular:e.formatMessage(te.domainSingular),externalLinkableUnitPlural:e.formatMessage(te.domainsPlural)}}const J={id:"connectors.shared.controlBullet",defaultMessage:"You’re in control: Disable access anytime to instantly revoke permissions and delete indexed data.",description:"Bullet point explaining control over revoking access for a synced connector."};function U({type:n,icon:e,productDisplayName:a,displayNameMessage:s,taglineMessage:o,descriptionSummary:i,bulletSummary:l,permissionSummary:r,hideForTeamPlan:d=!0,accountNoun:c}){const u=c!=null?c:"".concat(a," accounts");return{type:n,icon:e,hideForTeamPlan:d,displayNameMessage:s,taglineMessage:o,modal:{toastId:"".concat(n,"_connection_setup_modal"),testId:"modal-".concat(n,"-basic-info"),props:V[n],copy:{title:{id:"connectors.".concat(n,".modal.title"),defaultMessage:"Enable ".concat(a," sync for ChatGPT"),description:"Title for the ".concat(a," linking modal shown to admins.")},description:{id:"connectors.".concat(n,".modal.description"),defaultMessage:"Connecting ".concat(a," lets ChatGPT surface ").concat(i,". Once enabled, members of your organization can link their ").concat(u," to ChatGPT."),description:"Description for the ".concat(a," linking modal shown to admins.")},bulletPoints:[{id:"connectors.".concat(n,".modal.bullet.0"),defaultMessage:"Continuous sync: Your ".concat(l," is indexed, stored, and kept up to date in ChatGPT."),description:"Bullet point explaining ongoing sync when the ".concat(a," connector is enabled.")},{id:"connectors.".concat(n,".modal.bullet.1"),defaultMessage:"Permission-aware: ChatGPT respects ".concat(r,", ensuring users can only view content they’re authorized to access."),description:"Bullet point explaining permission enforcement for the ".concat(a," connector.")},J]}}}}const Xn={type:"github",icon:qt,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.github.displayName",defaultMessage:"GitHub",description:"Name of Github, a product."},taglineMessage:{id:"connectors.github.tagline",defaultMessage:"Sync repositories and commits.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Github repositories and commits."},modal:{toastId:"github_connection_setup_modal",testId:"modal-github-basic-info",props:V.github,copy:{title:{id:"connectors.github.modal.title",defaultMessage:"Enable GitHub sync for ChatGPT",description:"Title for the GitHub linking modal"},description:{id:"connectors.github.modal.description",defaultMessage:"By enabling ChatGPT to access your GitHub repositories, you empower your organization with more tailored answers based on your codebase. Once enabled, members of your organization can connect their GitHub accounts to ChatGPT.",description:"Description for the GitHub linking modal for admins"},bulletPoints:[{id:"connectors.github.modal.bullet.0",defaultMessage:"Continuous sync: Your repositories are indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining that if the user enables access, their repositories will be synced to ChatGPT on an ongoing basis."},{id:"connectors.github.modal.bullet.1",defaultMessage:"Privacy first: ChatGPT adheres to GitHub permissions, ensuring users access only what they can view on GitHub.",description:"Bullet point explaining that GitHub permissions are enforced when repositories sync with ChatGPT."},J]}},additionalRequestPayload:{organization_name:null}},es={type:"sharepoint",icon:nt,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.sharepoint.displayName",defaultMessage:"SharePoint",description:"Name of Sharepoint, a product."},taglineMessage:{id:"connectors.sharepoint.tagline",defaultMessage:"Sync documents and files from your SharePoint and OneDrive.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Sharepoint documents and files."},modal:{toastId:"sharepoint_connection_setup_modal",testId:"modal-sharepoint-basic-info",props:V.sharepoint,copy:{title:{id:"connectors.sharepoint.modal.title",defaultMessage:"Enable SharePoint sync for ChatGPT",description:"Title for the SharePoint linking modal"},description:{id:"connectors.sharepoint.modal.description",defaultMessage:"By enabling ChatGPT to access your SharePoint, you empower your organization with more tailored answers based on your files and sites. Once enabled, members of your organization can connect their SharePoint accounts to ChatGPT.",description:"Description for the SharePoint linking modal for admins"},bulletPoints:[{id:"connectors.sharepoint.modal.bullet.0",defaultMessage:"Continuous sync: Your SharePoint content is indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for SharePoint"},{id:"connectors.sharepoint.modal.bullet.1",defaultMessage:"Privacy first: ChatGPT adheres to SharePoint permissions, ensuring users access only what they can view in Microsoft 365.",description:"Bullet point explaining SharePoint permissions are enforced"},J]}}},ts=U({type:"teams",icon:st,productDisplayName:"Microsoft Teams",displayNameMessage:{id:"connectors.teams.displayName",defaultMessage:"Microsoft Teams",description:"Name of Microsoft Teams, a product."},taglineMessage:{id:"connectors.teams.tagline",defaultMessage:"Sync messages and channels from Microsoft Teams.",description:"Tagline explaining that this connector syncs chat and channel data from Microsoft Teams."},descriptionSummary:"messages, channels, and conversations from Microsoft Teams",bulletSummary:"Microsoft Teams conversations",permissionSummary:"Microsoft Teams permissions managed through Microsoft 365"}),ns={type:"dropbox",icon:Kt,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.dropbox.displayName",defaultMessage:"Dropbox",description:"Name of Dropbox, a product."},taglineMessage:{id:"connectors.dropbox.tagline",defaultMessage:"Sync files and folders stored in Dropbox.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Dropbox files and folders."},modal:{toastId:"dropbox_connection_setup_modal",testId:"modal-dropbox-basic-info",props:V.dropbox,copy:{title:{id:"connectors.dropbox.modal.title",defaultMessage:"Enable Dropbox sync for ChatGPT",description:"Title for the Dropbox linking modal"},description:{id:"connectors.dropbox.modal.description",defaultMessage:"Connecting Dropbox lets ChatGPT answer questions with the latest documents your team stores in shared folders. Once enabled, members of your organization can link their Dropbox accounts to ChatGPT.",description:"Description for the Dropbox linking modal for admins"},bulletPoints:[{id:"connectors.dropbox.modal.bullet.0",defaultMessage:"Continuous sync: Your Dropbox content is indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for Dropbox"},{id:"connectors.dropbox.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT respects Dropbox sharing permissions, ensuring users can only view content they’re authorized to access.",description:"Bullet point explaining Dropbox permissions are enforced"},J]}}},ss={type:"box",icon:Ht,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.box.displayName",defaultMessage:"Box",description:"Name of Box, a product."},taglineMessage:{id:"connectors.box.tagline",defaultMessage:"Sync files and folders stored in Box.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Box files and folders."},modal:{toastId:"box_connection_setup_modal",testId:"modal-box-basic-info",props:V.box,copy:{title:{id:"connectors.box.modal.title",defaultMessage:"Enable Box sync for ChatGPT",description:"Title for the Box linking modal"},description:{id:"connectors.box.modal.description",defaultMessage:"Connecting Box helps ChatGPT provide answers grounded in the files and folders your company stores in Box. Once enabled, members of your organization can link their Box accounts to ChatGPT.",description:"Description for the Box linking modal for admins"},bulletPoints:[{id:"connectors.box.modal.bullet.0",defaultMessage:"Continuous sync: Your Box content is indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for Box"},{id:"connectors.box.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT honors Box collaboration permissions, ensuring users can only view content they’re authorized to access.",description:"Bullet point explaining Box permissions are enforced"},J]}}},os={type:"linear",icon:$t,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.linear.displayName",defaultMessage:"Linear",description:"Name of Linear, a product."},taglineMessage:{id:"connectors.linear.tagline",defaultMessage:"Sync issues, cycles, and projects from Linear.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Linear issues and projects."},modal:{toastId:"linear_connection_setup_modal",testId:"modal-linear-basic-info",props:V.linear,copy:{title:{id:"connectors.linear.modal.title",defaultMessage:"Enable Linear sync for ChatGPT",description:"Title for the Linear linking modal"},description:{id:"connectors.linear.modal.description",defaultMessage:"Connecting Linear lets ChatGPT surface updates from your team's issues, cycles, and projects. Once enabled, members of your organization can link their Linear accounts to ChatGPT.",description:"Description for the Linear linking modal for admins"},bulletPoints:[{id:"connectors.linear.modal.bullet.0",defaultMessage:"Continuous sync: Your Linear issues are indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for Linear"},{id:"connectors.linear.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT respects Linear workspace permissions, ensuring users can only view content they’re authorized to access.",description:"Bullet point explaining Linear permissions are enforced"},J]}}},as={type:"intercom",icon:Ut,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.intercom.displayName",defaultMessage:"Intercom",description:"Name of Intercom, a product."},taglineMessage:{id:"connectors.intercom.tagline",defaultMessage:"Sync conversations and articles from Intercom.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Intercom conversations and help center articles."},modal:{toastId:"intercom_connection_setup_modal",testId:"modal-intercom-basic-info",props:V.intercom,copy:{title:{id:"connectors.intercom.modal.title",defaultMessage:"Enable Intercom sync for ChatGPT",description:"Title for the Intercom linking modal shown to admins."},description:{id:"connectors.intercom.modal.description",defaultMessage:"Connecting Intercom lets ChatGPT surface the latest conversations and help center content from your support team. Once enabled, members of your organization can link their Intercom accounts to ChatGPT.",description:"Description for the Intercom linking modal explaining the benefit of syncing Intercom with ChatGPT."},bulletPoints:[{id:"connectors.intercom.modal.bullet.0",defaultMessage:"Continuous sync: Your Intercom inboxes and articles are indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining that Intercom content will continue to sync into ChatGPT after enabling the connector."},{id:"connectors.intercom.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT respects Intercom workspace permissions so teammates only see conversations they are allowed to access.",description:"Bullet point explaining that ChatGPT enforces Intercom permissions when responding with synced content."},J]}}},is={type:"confluence",icon:zt,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.confluence.displayName",defaultMessage:"Confluence",description:"Name of Confluence, a product."},taglineMessage:{id:"connectors.confluence.tagline",defaultMessage:"Sync pages and articles from Confluence.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Confluence pages and articles."},modal:{toastId:"confluence_connection_setup_modal",testId:"modal-confluence-basic-info",props:V.confluence,copy:{title:{id:"connectors.confluence.modal.title",defaultMessage:"Enable Confluence sync for ChatGPT",description:"Title for the confluence linking modal"},description:{id:"connectors.confluence.modal.description",defaultMessage:"Connecting Confluence lets ChatGPT surface updates from your team's pages and articles. Once enabled, members of your organization can link their Confluence accounts to ChatGPT.",description:"Description for the Confluence linking modal for admins"},bulletPoints:[{id:"connectors.confluence.modal.bullet.0",defaultMessage:"Continuous sync: Your Confluence issues are indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for Confluence"},{id:"connectors.confluence.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT respects Confluence page permissions, ensuring users can only view content they’re authorized to access.",description:"Bullet point explaining Confluence permissions are enforced"},J]}}},ls={type:"notion",icon:Bt,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.notion.displayName",defaultMessage:"Notion",description:"Name of Notion, a product."},taglineMessage:{id:"connectors.notion.tagline",defaultMessage:"Sync pages and databases from Notion.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Notion pages and databases."},modal:{toastId:"notion_connection_setup_modal",testId:"modal-notion-basic-info",props:V.notion,copy:{title:{id:"connectors.notion.modal.title",defaultMessage:"Enable Notion sync for ChatGPT",description:"Title for the Notion linking modal"},description:{id:"connectors.notion.modal.description",defaultMessage:"Connecting Notion lets ChatGPT surface updates from your team's pages and databases. Once enabled, members of your organization can link their Notion accounts to ChatGPT.",description:"Description for the Notion linking modal for admins"},bulletPoints:[{id:"connectors.notion.modal.bullet.0",defaultMessage:"Continuous sync: Your Notion content is indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for Notion"},{id:"connectors.notion.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT respects Notion page permissions, ensuring users can only view content they’re authorized to access.",description:"Bullet point explaining Notion permissions are enforced"},J]}}},rs={type:"hubspot",icon:Rt,hideForTeamPlan:!0,displayNameMessage:{id:"connectors.hubspot.displayName",defaultMessage:"HubSpot",description:"Name of HubSpot, a product."},taglineMessage:{id:"connectors.hubspot.tagline",defaultMessage:"Sync contacts, companies, and deals from HubSpot.",description:"Tagline explaining that this feature allows ChatGPT to sync data from HubSpot CRM records."},modal:{toastId:"hubspot_connection_setup_modal",testId:"modal-hubspot-basic-info",props:V.hubspot,copy:{title:{id:"connectors.hubspot.modal.title",defaultMessage:"Enable HubSpot sync for ChatGPT",description:"Title for the HubSpot linking modal"},description:{id:"connectors.hubspot.modal.description",defaultMessage:"Connecting HubSpot lets ChatGPT surface CRM updates from your team's contacts, companies, and deals. Once enabled, members of your organization can link their HubSpot accounts to ChatGPT.",description:"Description for the HubSpot linking modal for admins"},bulletPoints:[{id:"connectors.hubspot.modal.bullet.0",defaultMessage:"Continuous sync: Your HubSpot CRM data is indexed, stored, and kept up to date in ChatGPT.",description:"Bullet point explaining ongoing sync for HubSpot"},{id:"connectors.hubspot.modal.bullet.1",defaultMessage:"Permission-aware: ChatGPT respects HubSpot record permissions, ensuring users can only view content they’re authorized to access.",description:"Bullet point explaining HubSpot permissions are enforced"},J]}}},cs=U({type:"aha",icon:un,productDisplayName:"Aha!",displayNameMessage:{id:"connectors.aha.displayName",defaultMessage:"Aha!",description:"Name of Aha!, a product roadmap platform."},taglineMessage:{id:"connectors.aha.tagline",defaultMessage:"Sync product roadmaps and feature ideas from Aha!",description:"Tagline describing that this connector syncs product planning content from Aha! to ChatGPT."},descriptionSummary:"product roadmaps, feature ideas, and launch plans your team tracks in Aha!",bulletSummary:"Aha! roadmap data",permissionSummary:"Aha! workspace permissions"}),ds=U({type:"asana",icon:dn,productDisplayName:"Asana",displayNameMessage:{id:"connectors.asana.displayName",defaultMessage:"Asana",description:"Name of Asana, a work management platform."},taglineMessage:{id:"connectors.asana.tagline",defaultMessage:"Sync tasks, projects, and status updates from Asana.",description:"Tagline explaining that this connector syncs task and project updates from Asana to ChatGPT."},descriptionSummary:"tasks, projects, and status updates managed in Asana",bulletSummary:"Asana tasks and project updates",permissionSummary:"Asana workspace permissions"}),us=U({type:"azure_devops",icon:cn,productDisplayName:"Azure Boards",displayNameMessage:{id:"connectors.azure_devops.displayName",defaultMessage:"Azure Boards",description:"Name of Azure DevOps, a Microsoft developer platform."},taglineMessage:{id:"connectors.azure_devops.tagline",defaultMessage:"Sync work items, backlogs, and repos from Azure DevOps.",description:"Tagline explaining that this connector syncs engineering work tracked in Azure DevOps to ChatGPT."},descriptionSummary:"work items, backlogs, and repository discussions stored in Azure DevOps",bulletSummary:"Azure DevOps work item data",permissionSummary:"Azure DevOps project permissions",accountNoun:"Azure DevOps organizations"}),ms=U({type:"basecamp",icon:rn,productDisplayName:"Basecamp",displayNameMessage:{id:"connectors.basecamp.displayName",defaultMessage:"Basecamp",description:"Name of Basecamp, a project management platform."},taglineMessage:{id:"connectors.basecamp.tagline",defaultMessage:"Sync projects, message boards, and docs from Basecamp.",description:"Tagline explaining that this connector syncs collaboration content from Basecamp to ChatGPT."},descriptionSummary:"projects, message board threads, and docs your teams manage in Basecamp",bulletSummary:"Basecamp project information",permissionSummary:"Basecamp account permissions"}),ps=U({type:"clickup",icon:ln,productDisplayName:"ClickUp",displayNameMessage:{id:"connectors.clickup.displayName",defaultMessage:"ClickUp",description:"Name of ClickUp, a productivity platform."},taglineMessage:{id:"connectors.clickup.tagline",defaultMessage:"Sync tasks, docs, and dashboards from ClickUp.",description:"Tagline explaining that this connector syncs ClickUp tasks and docs to ChatGPT."},descriptionSummary:"tasks, docs, and dashboard updates maintained in ClickUp",bulletSummary:"ClickUp tasks and docs",permissionSummary:"ClickUp workspace permissions"}),fs=U({type:"front",icon:an,productDisplayName:"Front",displayNameMessage:{id:"connectors.front.displayName",defaultMessage:"Front",description:"Name of Front, a shared inbox platform."},taglineMessage:{id:"connectors.front.tagline",defaultMessage:"Sync shared inbox conversations and workflows from Front.",description:"Tagline explaining that this connector syncs collaborative inbox conversations from Front to ChatGPT."},descriptionSummary:"shared inbox conversations, comments, and workflows your teams manage in Front",bulletSummary:"Front inbox conversations",permissionSummary:"Front workspace permissions"}),gs=U({type:"gitlab",icon:on,productDisplayName:"GitLab Issues",displayNameMessage:{id:"connectors.gitlab.displayName",defaultMessage:"GitLab Issues",description:"Name of GitLab, a DevSecOps platform."},taglineMessage:{id:"connectors.gitlab.tagline",defaultMessage:"Sync repositories, merge requests, and issues from GitLab.",description:"Tagline explaining that this connector syncs GitLab repositories and issues to ChatGPT."},descriptionSummary:"repositories, merge requests, and issues your organization tracks in GitLab",bulletSummary:"GitLab repository and issue data",permissionSummary:"GitLab group permissions",accountNoun:"GitLab groups"}),hs=U({type:"gorgias",icon:sn,productDisplayName:"Gorgias",displayNameMessage:{id:"connectors.gorgias.displayName",defaultMessage:"Gorgias",description:"Name of Gorgias, a customer support platform."},taglineMessage:{id:"connectors.gorgias.tagline",defaultMessage:"Sync support tickets and conversations from Gorgias.",description:"Tagline explaining that this connector syncs Gorgias customer support conversations to ChatGPT."},descriptionSummary:"support tickets, conversation history, and macros managed in Gorgias",bulletSummary:"Gorgias support ticket data",permissionSummary:"Gorgias workspace permissions"}),xs=U({type:"help_scout",icon:nn,productDisplayName:"Help Scout",displayNameMessage:{id:"connectors.help_scout.displayName",defaultMessage:"Help Scout",description:"Name of Help Scout, a customer service platform."},taglineMessage:{id:"connectors.help_scout.tagline",defaultMessage:"Sync mailboxes, conversations, and Docs from Help Scout.",description:"Tagline explaining that this connector syncs Help Scout conversations and Docs articles to ChatGPT."},descriptionSummary:"mailboxes, conversations, and Docs articles stored in Help Scout",bulletSummary:"Help Scout conversation data",permissionSummary:"Help Scout mailbox permissions"}),ys=U({type:"ironclad",icon:tn,productDisplayName:"Ironclad",displayNameMessage:{id:"connectors.ironclad.displayName",defaultMessage:"Ironclad",description:"Name of Ironclad, a digital contracting platform."},taglineMessage:{id:"connectors.ironclad.tagline",defaultMessage:"Sync contracts, workflows, and playbooks from Ironclad.",description:"Tagline explaining that this connector syncs contract workflows from Ironclad to ChatGPT."},descriptionSummary:"contracts, workflows, and playbooks your legal team manages in Ironclad",bulletSummary:"Ironclad contract data",permissionSummary:"Ironclad workspace permissions"}),_s=U({type:"jira",icon:en,productDisplayName:"Jira",displayNameMessage:{id:"connectors.jira.displayName",defaultMessage:"Jira",description:"Name of Jira, Atlassian’s issue and project tracking tool."},taglineMessage:{id:"connectors.jira.tagline",defaultMessage:"Sync issues and projects from Jira.",description:"Tagline explaining that this connector syncs issue and project data from Jira to ChatGPT."},descriptionSummary:"issues and projects tracked in Jira across your engineering teams",bulletSummary:"Jira issue and project data",permissionSummary:"Jira workspace and project permissions"}),bs=U({type:"jira_servicemanagement",icon:Xt,productDisplayName:"Jira Service Management",displayNameMessage:{id:"connectors.jiraServiceManagement.displayName",defaultMessage:"Jira Service Management",description:"Name of Jira Service Management, Atlassian’s support request platform."},taglineMessage:{id:"connectors.jiraServiceManagement.tagline",defaultMessage:"Sync support requests, queues, and SLAs from Jira Service Management.",description:"Tagline explaining that this connector syncs support request data from JSM to ChatGPT."},descriptionSummary:"support tickets, queues, SLAs, and service workflows managed in Jira Service Management",bulletSummary:"Jira Service Management ITSM data",permissionSummary:"Jira Service Management workspace and project permissions"}),Cs=U({type:"pipedrive",icon:Jt,productDisplayName:"Pipedrive",displayNameMessage:{id:"connectors.pipedrive.displayName",defaultMessage:"Pipedrive",description:"Name of Pipedrive, a sales CRM platform."},taglineMessage:{id:"connectors.pipedrive.tagline",defaultMessage:"Sync deals, pipelines, and activities from Pipedrive.",description:"Tagline explaining that this connector syncs sales CRM data from Pipedrive to ChatGPT."},descriptionSummary:"deals, pipeline stages, and activities tracked in Pipedrive",bulletSummary:"Pipedrive deal data",permissionSummary:"Pipedrive role-based permissions"}),Ms=U({type:"shortcut",icon:Vt,productDisplayName:"Shortcut",displayNameMessage:{id:"connectors.shortcut.displayName",defaultMessage:"Shortcut",description:"Name of Shortcut, an agile project management tool."},taglineMessage:{id:"connectors.shortcut.tagline",defaultMessage:"Sync stories, epics, and docs from Shortcut.",description:"Tagline explaining that this connector syncs Shortcut project planning content to ChatGPT."},descriptionSummary:"stories, epics, and docs your teams track in Shortcut",bulletSummary:"Shortcut project data",permissionSummary:"Shortcut workspace permissions"}),js=U({type:"teamwork",icon:Zt,productDisplayName:"Teamwork.com",displayNameMessage:{id:"connectors.teamwork.displayName",defaultMessage:"Teamwork.com",description:"Name of Teamwork, a project management platform."},taglineMessage:{id:"connectors.teamwork.tagline",defaultMessage:"Sync projects, tasks, and docs from Teamwork.",description:"Tagline explaining that this connector syncs Teamwork project collaboration content to ChatGPT."},descriptionSummary:"projects, tasks, and docs your teams collaborate on in Teamwork",bulletSummary:"Teamwork project data",permissionSummary:"Teamwork site permissions"}),ks=U({type:"zendesk",icon:Qt,productDisplayName:"Zendesk",displayNameMessage:{id:"connectors.zendesk.displayName",defaultMessage:"Zendesk",description:"Name of Zendesk, a customer support platform."},taglineMessage:{id:"connectors.zendesk.tagline",defaultMessage:"Sync tickets, macros, and help center articles from Zendesk.",description:"Tagline explaining that this connector syncs Zendesk support tickets and knowledge content to ChatGPT."},descriptionSummary:"support tickets, macros, and help center articles published in Zendesk",bulletSummary:"Zendesk support ticket data",permissionSummary:"Zendesk role-based permissions"}),Ss=U({type:"zoho",icon:Yt,productDisplayName:"Zoho CRM",displayNameMessage:{id:"connectors.zoho.displayName",defaultMessage:"Zoho CRM",description:"Name of Zoho CRM, a customer relationship management platform."},taglineMessage:{id:"connectors.zoho.tagline",defaultMessage:"Sync leads, deals, and accounts from Zoho CRM.",description:"Tagline explaining that this connector syncs CRM records from Zoho CRM to ChatGPT."},descriptionSummary:"leads, deals, and account records stored in Zoho CRM",bulletSummary:"Zoho CRM record data",permissionSummary:"Zoho CRM role-based permissions"}),vs=U({type:"zoho_desk",icon:Wt,productDisplayName:"Zoho Desk",displayNameMessage:{id:"connectors.zoho_desk.displayName",defaultMessage:"Zoho Desk",description:"Name of Zoho Desk, a customer support platform."},taglineMessage:{id:"connectors.zoho_desk.tagline",defaultMessage:"Sync tickets, articles, and SLAs from Zoho Desk.",description:"Tagline explaining that this connector syncs Zoho Desk support tickets and knowledge content to ChatGPT."},descriptionSummary:"support tickets, help center articles, and SLAs maintained in Zoho Desk",bulletSummary:"Zoho Desk support ticket data",permissionSummary:"Zoho Desk role-based permissions"}),Nt={github:Xn,sharepoint:es,teams:ts,dropbox:ns,box:ss,linear:os,intercom:as,confluence:is,notion:ls,hubspot:rs,aha:cs,asana:ds,azure_devops:us,basecamp:ms,clickup:ps,front:fs,gitlab:gs,gorgias:hs,help_scout:xs,ironclad:ys,jira:_s,jira_servicemanagement:bs,pipedrive:Cs,shortcut:Ms,teamwork:js,zendesk:ks,zoho:Ss,zoho_desk:vs},Oe=["github","sharepoint","teams","dropbox","box","linear","confluence","notion","hubspot","intercom","aha","asana","azure_devops","basecamp","clickup","front","gitlab","gorgias","help_scout","ironclad","jira","jira_servicemanagement","pipedrive","shortcut","teamwork","zendesk","zoho","zoho_desk"],Ns=Oe.map(n=>Nt[n]),Ze="--fake-local-id";function ws(n){function e({accountId:s,onClose:o,onSuccess:i}){const l=z(),r=Z(),[d,c]=x.useState(!1),u=x.useCallback(async()=>{c(!0);const m=n.type==="github"?{connection_config_id:Ze,knowledge_connector_type:n.type,organization_name:null}:{connection_config_id:Ze,knowledge_connector_type:n.type};try{await $.admin_create_connection_instance(s,m),await(i==null?void 0:i()),o()}catch(p){r.danger(l.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:n.modal.toastId,loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}finally{c(!1)}},[s,l,o,i,r]);return t.jsxs(W,H(R({},n.modal.props),{onClose:o,testId:n.modal.testId,children:[t.jsxs("div",{className:"px-6 pt-4 pb-10",children:[t.jsx("div",{className:"text-xl font-medium",children:t.jsx(h,R({},n.modal.copy.title))}),t.jsx("div",{className:"text-md text-token-text-secondary mt-3",children:t.jsx(h,R({},n.modal.copy.description))}),t.jsx("div",{className:"mt-6 text-lg font-medium",children:t.jsx(h,{id:"edoz9r",defaultMessage:"What to expect"})}),t.jsx("ul",{className:"text-md text-token-text-secondary ms-6 mt-4",children:n.modal.copy.bulletPoints.map((m,p,f)=>t.jsx("li",{className:p<f.length-1?"mb-2 list-disc":"list-disc",children:t.jsx(h,R({},m))},p))})]}),t.jsx(Te,{primaryButton:t.jsx(B,{color:"primary",onClick:u,loading:d,children:t.jsx(h,{id:"y+cVaH",defaultMessage:"Enable"})})})]}))}function a({onClose:s,onSuccess:o}){const i=L(),l=K(i);return l?t.jsx(e,{accountId:l.id,onClose:s,onSuccess:o}):null}return{Controller:a,Modal:e}}const Ts=Oe.map(n=>{const e=ws(Nt[n]);return[n,e]}),Is=new Map(Ts);function ke(n){const e=Is.get(n);if(!e)throw new Error("Unknown simple connector flow for type: ".concat(n));return e}function Ps(n){return ke(n).Controller}Oe.map(Ps);const wt=ke("sharepoint"),Es=wt.Controller;wt.Modal;function Ds(n){"use forget";const e=F.c(35),{connector:a,onClose:s,onDeployToTeam:o,onSelfService:i,isDeploying:l}=n,[r,d]=x.useState("deploy-to-team");let c;e[0]!==o||e[1]!==i||e[2]!==r?(c=async()=>{if(r==="deploy-to-team"){await o();return}r==="self-service"&&await(i==null?void 0:i())},e[0]=o,e[1]=i,e[2]=r,e[3]=c):c=e[3];const u=c;let m;e[4]!==a?(m=t.jsx(be,{connector:a,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[4]=a,e[5]=m):m=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(h,{id:"I2bLgK",defaultMessage:"Enable Sync"}),e[6]=p):p=e[6];let f;e[7]!==s||e[8]!==m?(f=t.jsx(ye,{onClose:s,connectorIcon:m,title:p}),e[7]=s,e[8]=m,e[9]=f):f=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=P=>d(P),e[10]=y):y=e[10];let g,_,M;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx("span",{className:"rounded-md bg-[#E6F0FF] px-2 py-[2px] text-xs font-medium text-[#1A59F8]",children:t.jsx(h,{id:"DUoTTX",defaultMessage:"~2 mins"})}),_=t.jsx(h,{id:"G1jItk",defaultMessage:"Deploy to your team"}),M=t.jsx(h,{id:"H8LFv6",defaultMessage:"Enable your whole team to use SharePoint right away without additional setup."}),e[11]=g,e[12]=_,e[13]=M):(g=e[11],_=e[12],M=e[13]);let k;e[14]!==l?(k=t.jsx(Ve,{value:"deploy-to-team",disabled:l,badge:g,title:_,description:M,showDivider:!1}),e[14]=l,e[15]=k):k=e[15];let w,C;e[16]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(h,{id:"wJjAyl",defaultMessage:"Self-service set up"}),C=t.jsx(h,{id:"S98LA7",defaultMessage:"Enable each team member to authenticate individually."}),e[16]=w,e[17]=C):(w=e[16],C=e[17]);let S;e[18]!==l?(S=t.jsx(Ve,{value:"self-service",disabled:l,title:w,description:C,showDivider:!0}),e[18]=l,e[19]=S):S=e[19];let N;e[20]!==r||e[21]!==S||e[22]!==k?(N=t.jsx("div",{className:"mt-6",children:t.jsx("div",{className:"border-token-border-default bg-token-bg-primary overflow-hidden rounded-2xl border",children:t.jsxs(gt,{value:r,onValueChange:y,className:"flex flex-col",children:[k,S]})})}),e[20]=r,e[21]=S,e[22]=k,e[23]=N):N=e[23];let I;e[24]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(h,{id:"XGnWba",defaultMessage:"Continue"}),e[24]=I):I=e[24];let E;e[25]!==u||e[26]!==l?(E=t.jsx("div",{className:"pt-6",children:t.jsx(B,{className:"w-full",size:"large",onClick:u,disabled:l,loading:l,children:I})}),e[25]=u,e[26]=l,e[27]=E):E=e[27];let T;e[28]!==N||e[29]!==E||e[30]!==f?(T=t.jsxs("div",{className:"px-6 pt-4 pb-6",children:[f,N,E]}),e[28]=N,e[29]=E,e[30]=f,e[31]=T):T=e[31];let v;return e[32]!==s||e[33]!==T?(v=t.jsx(W,H(R({},Me),{className:"max-w-[420px]",title:void 0,onClose:s,testId:"modal-sharepoint-enable-sync",children:T})),e[32]=s,e[33]=T,e[34]=v):v=e[34],v}function Ve({value:n,title:e,description:a,badge:s,disabled:o,showDivider:i}){return t.jsxs("label",{className:oe("flex items-start justify-between gap-3 p-4",i&&"border-token-border-default border-t",o?"cursor-not-allowed opacity-60":"cursor-pointer"),children:[t.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center gap-2 text-base font-medium",children:[e,s]}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:a})]}),t.jsx(ht,{value:n,disabled:o,className:"border-token-border-default mt-1 inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full border p-0 leading-none data-[state=checked]:border-black data-[state=checked]:bg-black dark:data-[state=checked]:border-white dark:data-[state=checked]:bg-white",children:t.jsx(xt,{className:"flex h-full w-full items-center justify-center",children:t.jsx("span",{className:"h-2 w-2 rounded-full bg-white dark:bg-black"})})})]})}const Os=ce(()=>pe(()=>import("./gaj6e78ii9fgijkk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(n=>n.RedirectContent)),As=ce(()=>pe(()=>import("./du8spbp0fpw55vih.js"),__vite__mapDeps([12,1,2,3])).then(n=>n.LimitItemsFilePickerModal));function Tt(n,e=!1,a){"use no forget";const s=z(),o=Z(),{platformConnectors:i,isLoading:l}=ot(!0,Q.ADMIN_SETTING,"workspace_settings",!0),r=L(),d=K(r),c=d==null?void 0:d.id,[u,m]=x.useState(!1),[p,f]=x.useState(!1),[y,g]=x.useState(!1),[_,M]=x.useState(!1),[k,w]=x.useState(),C=x.useMemo(()=>{if(!(i!=null&&i.size))return;const O=at[it.SHAREPOINT_ADMIN_CONNECTOR];return i.get(O)},[i]),S=x.useCallback(()=>{o.danger(s.formatMessage({id:"kAaIRU",defaultMessage:"Unable to load the SharePoint OAuth connector."}))},[s,o]),N=x.useCallback(()=>{o.danger(s.formatMessage({id:"hBGDy6",defaultMessage:"Something went wrong while loading your workspace. Please refresh and try again."}))},[s,o]),I=x.useCallback(async(O,A)=>{try{const G=await $.admin_create_connection_instance(O,{connection_config_id:"--fake-local-id",knowledge_connector_type:"sharepoint_admin",link_id:A});w(G.connection_config.connection_config_id)}catch(G){M(!1),o.danger(s.formatMessage({id:"qoasLN",defaultMessage:"We couldn't enable SharePoint sync. Please try again in a moment."}))}},[s,o]),E=x.useCallback(()=>{if(!C){S();return}m(!1),f(!0)},[C,S]),T=x.useCallback(()=>{if(!C){S();return}m(!1),g(!0)},[C,S]),v=x.useCallback(()=>{m(!1),f(!1),g(!1),w(void 0),M(!1),n==null||n(),a==null||a()},[n,a]),P=x.useCallback(O=>{if(!C){S(),v();return}if(!c){N(),v();return}if(!O){o.danger(s.formatMessage({id:"n5mSXA",defaultMessage:"We couldn't complete SharePoint setup. Please try again."})),v();return}M(!0),I(c,O)},[c,I,v,C,s,N,S,o]),D=x.useCallback(()=>{_||(f(!1),m(!0))},[_]),b=x.useCallback(()=>{if(!C){S();return}if(!c){N();return}e?(m(!1),f(!0),g(!1)):(m(!0),f(!1),g(!1))},[c,C,e,N,S]),j=x.useMemo(()=>!C||!c?null:t.jsxs(t.Fragment,{children:[u?t.jsx(Ds,{connector:C,onClose:v,onDeployToTeam:E,onSelfService:T,isDeploying:_}):null,k?t.jsx(As,{connectionId:k,isOpen:!0,onClose:async O=>{if(O)try{await $.admin_activate_connection_instance(c,k),o.success(s.formatMessage({id:"y5DD0Z",defaultMessage:"Connection successfully activated."}))}catch(A){o.danger(s.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"review_and_activate_modal",loggingTitle:"Failed to activate connection",loggingDescription:"Failed to activate connection"})}v()}}):p?t.jsx(W,{testId:"modal-sharepoint-admin-oauth",type:"success",isOpen:!0,onClose:()=>{_||(e?v():D())},size:"custom",className:"max-w-[400px]",shouldIgnoreClickOutside:_,children:t.jsx(Gs,{connector:C,onBack:()=>{e?v():D()},onSuccess:P,isCreatingConnection:_})}):null,y?t.jsx(Es,{onSuccess:n,onClose:()=>{g(!1),v()}}):null]}),[C,c,u,v,E,T,_,k,p,D,P,y,n,o,s,e]);return{open:b,isLoading:l||_,canStart:!!(C&&c&&!_),modals:j,sharepointConnector:C}}function Gs({connector:n,onBack:e,onSuccess:a,isCreatingConnection:s}){"use no forget";const o=z(),i=Z(),l=yt(),{refetch:r}=lt({productSku:Q.CONNECTOR_SETTING}),[d,c]=x.useState(!1),u=St(),m=x.useCallback(async()=>{var f;c(!0);try{_t("popup");const y=l(n),g=await rt({connector:n,redirectAfter:y!=null?y:void 0,toaster:i,openPopup:!0,intl:o,productSku:Q.CONNECTOR_SETTING});if(g&&g.success===!1)throw new Error((f=g.errorType)!=null?f:"sharepoint_admin_oauth_failed");if(!(g!=null&&g.linkId))throw new Error("sharepoint_admin_link_not_found");await r(),a(g.linkId)}catch(y){i.danger(o.formatMessage({id:"Gr0hUA",defaultMessage:"Encountered an error connecting your account. Please try again later."}))}finally{c(!1)}},[n,o,l,a,r,i]),p=x.useCallback(()=>{s||e()},[s,e]);return s?t.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 text-center",children:[t.jsx(nt,{className:"icon-lg"}),t.jsx(de,{})]}):t.jsx(Os,{connector:n,onClose:p,isConnecting:d,onContinue:m,showExternalIcon:!0,productSku:Q.CONNECTOR_SETTING,additionalMessageThatDoesNotContainLegalClaims:u&&t.jsxs(t.Fragment,{children:[t.jsx("p",{children:t.jsx(h,{id:"NUEe9u",defaultMessage:"You must be a SharePoint admin and log in with {email} to connect SharePoint",values:{email:t.jsx("b",{children:u})}})}),t.jsx("p",{children:t.jsx(Ie,{href:"https://help.openai.com/en/articles/12143177-sharepoint-connectors-on-chatgpt",className:"underline",children:t.jsx(h,{id:"FGq3R0",defaultMessage:"Use a different email address?"})})})]})})}function Fs(n){"use forget";const e=F.c(11),{refetchConnectionInstances:a,eligibleToCreateNewSharepointAdminConnection:s}=n,o=L(),i=X(o),l=Tt(a,!0),[r,d]=x.useState(!1);if(i||l.isLoading&&!l.modals)return null;let c;e[0]!==s||e[1]!==l.canStart||e[2]!==l.sharepointConnector?(c=s&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full px-4",children:t.jsx("div",{className:"border-token-border-medium w-full border-t"})}),t.jsx("div",{className:"flex w-full flex-col gap-2 p-4",children:t.jsxs(B,{color:"secondary",disabled:!l.canStart||!l.sharepointConnector,onClick:()=>d(!0),children:[t.jsx(Ce,{className:"icon me-2 text-[#007AFF]"}),t.jsx(h,{id:"+MUAER",defaultMessage:"Deploy to team"})]})})]}),e[0]=s,e[1]=l.canStart,e[2]=l.sharepointConnector,e[3]=c):c=e[3];let u;e[4]!==l||e[5]!==r?(u=r&&l.sharepointConnector&&t.jsx(Ls,{connector:l.sharepointConnector,onClose:()=>d(!1),onContinue:()=>{d(!1),l.open()}}),e[4]=l,e[5]=r,e[6]=u):u=e[6];let m;return e[7]!==l.modals||e[8]!==c||e[9]!==u?(m=t.jsxs(t.Fragment,{children:[c,u,l.modals]}),e[7]=l.modals,e[8]=c,e[9]=u,e[10]=m):m=e[10],m}function Ls(n){"use forget";const e=F.c(17),{connector:a,onClose:s,onContinue:o}=n;let i;e[0]!==a?(i=t.jsx(be,{connector:a,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[0]=a,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(h,{id:"WK+BNs",defaultMessage:"Deploy to team"}),e[2]=l):l=e[2];let r;e[3]!==s||e[4]!==i?(r=t.jsx(ye,{onClose:s,connectorIcon:i,title:l}),e[3]=s,e[4]=i,e[5]=r):r=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx("p",{className:"text-token-text-secondary mt-6 text-center text-sm",children:t.jsx(h,{id:"H8LFv6",defaultMessage:"Enable your whole team to use SharePoint right away without additional setup."})}),e[6]=d):d=e[6];let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("p",{className:"bg-token-interactive-bg-accent-muted-context mt-6 rounded-xl p-4 text-center text-sm text-[#0285FF]",children:t.jsx(h,{id:"oyE66v",defaultMessage:"This will replace any individually synced SharePoint connections"})}),e[7]=c):c=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(h,{id:"fHtzNL",defaultMessage:"Continue"}),e[8]=u):u=e[8];let m;e[9]!==o?(m=t.jsx("div",{className:"pt-6",children:t.jsx(B,{className:"w-full",size:"large",onClick:o,children:u})}),e[9]=o,e[10]=m):m=e[10];let p;e[11]!==r||e[12]!==m?(p=t.jsxs("div",{className:"px-6 pt-4 pb-6",children:[r,d,c,m]}),e[11]=r,e[12]=m,e[13]=p):p=e[13];let f;return e[14]!==s||e[15]!==p?(f=t.jsx(W,H(R({},Me),{className:"max-w-[420px]",title:void 0,onClose:s,testId:"modal-sharepoint-enable-sync",children:p})),e[14]=s,e[15]=p,e[16]=f):f=e[16],f}function Rs(n){"use forget";const e=F.c(35),{connector:a,onClose:s,onDeployToTeam:o,onSelfService:i,isDeploying:l}=n,[r,d]=x.useState("deploy-to-team");let c;e[0]!==o||e[1]!==i||e[2]!==r?(c=async()=>{if(r==="deploy-to-team"){await o();return}r==="self-service"&&await(i==null?void 0:i())},e[0]=o,e[1]=i,e[2]=r,e[3]=c):c=e[3];const u=c;let m;e[4]!==a?(m=t.jsx(be,{connector:a,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[4]=a,e[5]=m):m=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(h,{id:"9w0j14",defaultMessage:"Enable Sync"}),e[6]=p):p=e[6];let f;e[7]!==s||e[8]!==m?(f=t.jsx(ye,{onClose:s,connectorIcon:m,title:p}),e[7]=s,e[8]=m,e[9]=f):f=e[9];let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=D=>d(D),e[10]=y):y=e[10];let g,_,M;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx("span",{className:"bg-token-interactive-bg-accent-muted-context text-token-text-accent rounded-md px-2 py-[2px] text-xs font-medium",children:t.jsx(h,{id:"DUoTTX",defaultMessage:"~2 mins"})}),_=t.jsx(h,{id:"GjdIe7",defaultMessage:"Deploy to your team"}),M=t.jsx(h,{id:"vWF3VU",defaultMessage:"Enable your whole team to use Microsoft Teams data right away without additional setup."}),e[11]=g,e[12]=_,e[13]=M):(g=e[11],_=e[12],M=e[13]);let k;e[14]!==l?(k=t.jsx(Je,{value:"deploy-to-team",disabled:l,badge:g,title:_,description:M,showDivider:!1}),e[14]=l,e[15]=k):k=e[15];const w=l||!0;let C,S;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(h,{id:"EnyOtI",defaultMessage:"Self-service set up"}),S=t.jsx(h,{id:"eI12om",defaultMessage:"Enable each team member to authenticate individually."}),e[16]=C,e[17]=S):(C=e[16],S=e[17]);let N;e[18]!==w?(N=t.jsx(Je,{value:"self-service",disabled:w,title:C,description:S,showDivider:!0}),e[18]=w,e[19]=N):N=e[19];let I;e[20]!==r||e[21]!==N||e[22]!==k?(I=t.jsx("div",{className:"mt-6",children:t.jsx("div",{className:"border-token-border-default bg-token-bg-primary overflow-hidden rounded-2xl border",children:t.jsxs(gt,{value:r,onValueChange:y,className:"flex flex-col",children:[k,N]})})}),e[20]=r,e[21]=N,e[22]=k,e[23]=I):I=e[23];let E;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(h,{id:"XGnWba",defaultMessage:"Continue"}),e[24]=E):E=e[24];let T;e[25]!==u||e[26]!==l?(T=t.jsx("div",{className:"pt-6",children:t.jsx(B,{className:"w-full",size:"large",onClick:u,disabled:l,loading:l,children:E})}),e[25]=u,e[26]=l,e[27]=T):T=e[27];let v;e[28]!==I||e[29]!==T||e[30]!==f?(v=t.jsxs("div",{className:"px-6 pt-4 pb-6",children:[f,I,T]}),e[28]=I,e[29]=T,e[30]=f,e[31]=v):v=e[31];let P;return e[32]!==s||e[33]!==v?(P=t.jsx(W,H(R({},Me),{className:"max-w-[420px]",title:void 0,onClose:s,testId:"modal-teams-enable-sync",children:v})),e[32]=s,e[33]=v,e[34]=P):P=e[34],P}function Je(n){"use forget";const e=F.c(19),{value:a,title:s,description:o,badge:i,disabled:l,showDivider:r}=n,d=r&&"border-token-border-default border-t",c=l?"cursor-not-allowed opacity-60":"cursor-pointer";let u;e[0]!==d||e[1]!==c?(u=oe("flex items-start justify-between gap-3 p-4",d,c),e[0]=d,e[1]=c,e[2]=u):u=e[2];let m;e[3]!==i||e[4]!==s?(m=t.jsxs("div",{className:"flex items-center gap-2 text-base font-medium",children:[s,i]}),e[3]=i,e[4]=s,e[5]=m):m=e[5];let p;e[6]!==o?(p=t.jsx("div",{className:"text-token-text-secondary text-sm",children:o}),e[6]=o,e[7]=p):p=e[7];let f;e[8]!==m||e[9]!==p?(f=t.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[m,p]}),e[8]=m,e[9]=p,e[10]=f):f=e[10];let y;e[11]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(xt,{className:"flex h-full w-full items-center justify-center",children:t.jsx("span",{className:"h-2 w-2 rounded-full bg-white dark:bg-black"})}),e[11]=y):y=e[11];let g;e[12]!==l||e[13]!==a?(g=t.jsx(ht,{value:a,disabled:l,className:"border-token-border-default mt-1 inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full border p-0 leading-none data-[state=checked]:border-black data-[state=checked]:bg-black dark:data-[state=checked]:border-white dark:data-[state=checked]:bg-white",children:y}),e[12]=l,e[13]=a,e[14]=g):g=e[14];let _;return e[15]!==u||e[16]!==f||e[17]!==g?(_=t.jsxs("label",{className:u,children:[f,g]}),e[15]=u,e[16]=f,e[17]=g,e[18]=_):_=e[18],_}const Bs=ce(()=>pe(()=>import("./gaj6e78ii9fgijkk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(n=>n.RedirectContent)),{Controller:zs}=ke("teams");function Us(n){return typeof n=="object"&&n!=null&&"id"in n&&"connector_type"in n&&"name"in n}function It(n,e=!1){"use no forget";const a=z(),s=Z(),{platformConnectors:o,isLoading:i}=ot(!0,Q.ADMIN_SETTING,"workspace_settings",!0),l=L(),r=K(l),d=r==null?void 0:r.id,[c,u]=x.useState(!1),[m,p]=x.useState(!1),[f,y]=x.useState(!1),[g,_]=x.useState(!1),M=x.useMemo(()=>{if(!(o!=null&&o.size))return;const D=at[it.TEAMS_ADMIN_CONNECTOR],b=o.get(D);return Us(b)?b:void 0},[o]),k=x.useCallback(()=>{s.danger(a.formatMessage({id:"/SP/1T",defaultMessage:"Unable to load the Microsoft Teams OAuth connector."}))},[a,s]),w=x.useCallback(()=>{s.danger(a.formatMessage({id:"qMc10L",defaultMessage:"Something went wrong while loading your workspace. Please refresh and try again."}))},[a,s]),C=x.useCallback(()=>{u(!1),p(!1),y(!1),_(!1),n==null||n()},[n]),S=x.useCallback(async(D,b)=>{try{_(!0);const j=await $.admin_create_connection_instance(D,{connection_config_id:"--fake-local-id",knowledge_connector_type:"teams_admin",link_id:b});await $.admin_activate_connection_instance(D,j.connection_config.connection_config_id),s.success(a.formatMessage({id:"8fYoB5",defaultMessage:"Microsoft Teams sync enabled."})),C()}catch(j){_(!1),s.danger(a.formatMessage({id:"9D+xar",defaultMessage:"We couldn't enable Microsoft Teams sync. Please try again in a moment."}))}},[C,a,s]),N=x.useCallback(()=>{if(!M){k();return}u(!1),p(!0)},[M,k]),I=x.useCallback(()=>{if(!M){k();return}u(!1),y(!0)},[M,k]),E=x.useCallback(D=>{if(!M){k(),C();return}if(!d){w(),C();return}if(!D){s.danger(a.formatMessage({id:"BhPcQ+",defaultMessage:"We couldn't complete Microsoft Teams setup. Please try again."})),C();return}S(d,D)},[d,S,C,a,w,k,M,s]),T=x.useCallback(()=>{g||(p(!1),u(!0))},[g]),v=x.useCallback((D=!1)=>{if(!M){k();return}if(!d){w();return}e||D?(u(!1),p(!0),y(!1)):(u(!0),p(!1),y(!1))},[d,e,w,k,M]),P=x.useMemo(()=>!M||!d?null:t.jsxs(t.Fragment,{children:[c?t.jsx(Rs,{connector:M,onClose:C,onDeployToTeam:N,onSelfService:I,isDeploying:g}):null,m?t.jsx(W,{testId:"modal-teams-admin-oauth",type:"success",isOpen:!0,onClose:()=>{g||(e?C():T())},size:"custom",className:"max-w-[400px]",shouldIgnoreClickOutside:g,children:t.jsx($s,{connector:M,onBack:()=>{e?C():T()},onSuccess:E,isCreatingConnection:g})}):null,f?t.jsx(zs,{onClose:()=>{y(!1),C()},onSuccess:n}):null]}),[d,C,T,E,N,I,m,g,c,f,n,e,M]);return{open:v,isLoading:i||g,canStart:!!(M&&d&&!g),modals:P,teamsConnector:M}}function $s({connector:n,onBack:e,onSuccess:a,isCreatingConnection:s}){"use no forget";const o=z(),i=Z(),l=yt(),{refetch:r}=lt({productSku:Q.CONNECTOR_SETTING}),[d,c]=x.useState(!1),u=St(),m=x.useCallback(async()=>{var f;c(!0);try{_t("popup");const y=l(n),g=await rt({connector:n,redirectAfter:y!=null?y:void 0,toaster:i,openPopup:!0,intl:o,productSku:Q.CONNECTOR_SETTING});if(g&&g.success===!1)throw new Error((f=g.errorType)!=null?f:"teams_admin_oauth_failed");if(!(g!=null&&g.linkId))throw new Error("teams_admin_link_not_found");await r(),a(g.linkId)}catch(y){i.danger(o.formatMessage({id:"oBP/0x",defaultMessage:"Encountered an error connecting your account. Please try again later."}))}finally{c(!1)}},[n,o,l,a,r,i]),p=x.useCallback(()=>{s||e()},[s,e]);return s?t.jsxs("div",{className:"flex flex-col items-center gap-4 p-6 text-center",children:[t.jsx(st,{className:"icon-lg"}),t.jsx(de,{})]}):t.jsx(Bs,{connector:n,onClose:p,isConnecting:d,onContinue:m,showExternalIcon:!0,productSku:Q.CONNECTOR_SETTING,additionalMessageThatDoesNotContainLegalClaims:u?t.jsx("p",{children:t.jsx(h,{id:"YsQ0YI",defaultMessage:"You must be a Microsoft Teams admin and log in with {email} to connect Microsoft Teams.",values:{email:t.jsx("b",{children:u})}})}):void 0})}function Hs(n){"use forget";const e=F.c(11),{refetchConnectionInstances:a,eligibleToCreateNewTeamsAdminConnection:s}=n,o=L(),i=X(o),l=It(a,!0),[r,d]=x.useState(!1);if(i||l.isLoading&&!l.modals)return null;let c;e[0]!==s||e[1]!==l.canStart||e[2]!==l.teamsConnector?(c=s&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full px-4",children:t.jsx("div",{className:"border-token-border-heavy w-full border-t"})}),t.jsx("div",{className:"flex w-full flex-col gap-2 p-4",children:t.jsxs(B,{color:"secondary",disabled:!l.canStart||!l.teamsConnector,onClick:()=>d(!0),children:[t.jsx(Ce,{className:"icon text-token-text-accent me-2"}),t.jsx(h,{id:"AFxeoK",defaultMessage:"Deploy to team"})]})})]}),e[0]=s,e[1]=l.canStart,e[2]=l.teamsConnector,e[3]=c):c=e[3];let u;e[4]!==l||e[5]!==r?(u=r&&l.teamsConnector&&t.jsx(Ks,{connector:l.teamsConnector,onClose:()=>d(!1),onContinue:()=>{d(!1),l.open()}}),e[4]=l,e[5]=r,e[6]=u):u=e[6];let m;return e[7]!==l.modals||e[8]!==c||e[9]!==u?(m=t.jsxs(t.Fragment,{children:[c,u,l.modals]}),e[7]=l.modals,e[8]=c,e[9]=u,e[10]=m):m=e[10],m}function Ks(n){"use forget";const e=F.c(17),{connector:a,onClose:s,onContinue:o}=n;let i;e[0]!==a?(i=t.jsx(be,{connector:a,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[0]=a,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(h,{id:"qkSJHk",defaultMessage:"Deploy to team"}),e[2]=l):l=e[2];let r;e[3]!==s||e[4]!==i?(r=t.jsx(ye,{onClose:s,connectorIcon:i,title:l}),e[3]=s,e[4]=i,e[5]=r):r=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx("p",{className:"text-token-text-secondary mt-6 text-center text-sm",children:t.jsx(h,{id:"vWF3VU",defaultMessage:"Enable your whole team to use Microsoft Teams data right away without additional setup."})}),e[6]=d):d=e[6];let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("p",{className:"bg-token-interactive-bg-accent-muted-context text-token-text-accent mt-6 rounded-xl p-4 text-center text-sm",children:t.jsx(h,{id:"iukeJt",defaultMessage:"This will replace any individually synced Microsoft Teams connections."})}),e[7]=c):c=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(h,{id:"fHtzNL",defaultMessage:"Continue"}),e[8]=u):u=e[8];let m;e[9]!==o?(m=t.jsx("div",{className:"pt-6",children:t.jsx(B,{className:"w-full",size:"large",onClick:o,children:u})}),e[9]=o,e[10]=m):m=e[10];let p;e[11]!==r||e[12]!==m?(p=t.jsxs("div",{className:"px-6 pt-4 pb-6",children:[r,d,c,m]}),e[11]=r,e[12]=m,e[13]=p):p=e[13];let f;return e[14]!==s||e[15]!==p?(f=t.jsx(W,H(R({},Me),{className:"max-w-[420px]",title:void 0,onClose:s,testId:"modal-teams-enable-sync",children:p})),e[14]=s,e[15]=p,e[16]=f):f=e[16],f}const qs=ce(()=>pe(()=>import("./du8spbp0fpw55vih.js"),__vite__mapDeps([12,1,2,3])).then(n=>n.LimitItemsFilePickerModal));function re({label:n,value:e}){return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"border-token-border-medium w-full border-t"}),t.jsxs("div",{className:"flex w-full flex-row justify-between py-2",children:[t.jsx("span",{className:"text-token-text-primary",children:n}),t.jsx("span",{className:"text-token-text-secondary",children:e})]})]})}function Ws({connection:n,adminUserConnectionState:e}){var o;const a=e&&e.user_connection_details.activation_status!=="inactive"&&e.user_connection_details.auth_status!=="not_connected",s=n.connection_config.knowledge_connector_type;if(!s)return null;if(s==="google_drive_oauth")return t.jsx(Ys,{connectionConfig:n.connection_config,connectionStatus:n.connection_status,isAdminConnected:a});if(s==="slack")return t.jsx(Zs,{connectionConfig:n.connection_config,connectionStatus:n.connection_status,isAdminConnected:a});{const i=["google_drive_dwd","sharepoint_admin","teams_admin"].includes((o=n.connection_config.knowledge_connector_type)!=null?o:"");return t.jsx(Qs,{isAdminManaged:i})}}function Ys({connectionConfig:n,connectionStatus:e,isAdminConnected:a}){const s=z(),o=e==="activating"||e==="partially_activated"||e==="active";return t.jsxs("div",{className:"px-4",children:[o&&a!=null&&!a&&t.jsx(Pt,{connectionConfig:n}),t.jsx(re,{label:s.formatMessage({id:"bVi1Vt",defaultMessage:"Connection type"}),value:s.formatMessage({id:"DSWj22",defaultMessage:"Self-service"})}),!!n.domain_name&&t.jsx(re,{label:s.formatMessage({id:"DtrjbM",defaultMessage:"Domain name"}),value:n.domain_name})]})}function Qs(n){"use forget";const e=F.c(8),{isAdminManaged:a}=n,s=z();let o;e[0]!==s?(o=s.formatMessage({id:"bVi1Vt",defaultMessage:"Connection type"}),e[0]=s,e[1]=o):o=e[1];let i;e[2]!==s||e[3]!==a?(i=a?s.formatMessage({id:"voo3FC",defaultMessage:"Admin-managed"}):s.formatMessage({id:"DSWj22",defaultMessage:"Self-service"}),e[2]=s,e[3]=a,e[4]=i):i=e[4];let l;return e[5]!==o||e[6]!==i?(l=t.jsx("div",{className:"px-4",children:t.jsx(re,{label:o,value:i})}),e[5]=o,e[6]=i,e[7]=l):l=e[7],l}function Zs({connectionConfig:n,connectionStatus:e,isAdminConnected:a}){const s=z();return t.jsxs("div",{className:"px-4",children:[e==="activating"&&a!=null&&!a&&t.jsx(Pt,{connectionConfig:n}),t.jsx(re,{label:s.formatMessage({id:"JXKtnI",defaultMessage:"Slack domain"}),value:n.team_domain}),t.jsx(re,{label:s.formatMessage({id:"a1Cjhf",defaultMessage:"Team ID"}),value:n.team_id})]})}function Pt({connectionConfig:n}){const e=L(),a=mn(),{data:s,isLoading:o,refetch:i}=fe({queryKey:["user_connection_status"],queryFn:$.user_connection_status,enabled:a}),l=()=>{i(),ct(e)},r=s==null?void 0:s.connection_statuses.some(c=>c.user_connection_details.connection_instance_id===n.connection_config_id&&c.user_connection_details.auth_status==="user_connected");if(o||r)return null;const d=({isLoading:c,disabled:u,onClick:m})=>t.jsx(B,{color:"primary",loading:c,disabled:u,onClick:m,children:t.jsx(h,{id:"9ZiK24",defaultMessage:"Connect"})});return t.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.2,duration:.5},className:"bg-token-hint-bg dark:bg-token-main-surface-tertiary mb-2 flex flex-col gap-2 rounded-xl p-4",children:[t.jsxs("div",{className:"flex flex-row items-start gap-4",children:[t.jsx(pn,{className:"icon-lg"}),t.jsx("span",{className:"text-sm",children:t.jsx(h,{id:"gdALIj",defaultMessage:"This connection will not finish activating until a user connects."})})]}),t.jsx(fn,{connectionId:n.connection_config_id,connectorType:n.knowledge_connector_type,renderButton:d,location:"admin_settings",refetch:l})]})}function Vs({accountId:n,connectionId:e,refetch:a}){"use no forget";const[s,o]=x.useState(!1),i=L(),l=X(i),[r,d]=x.useState(!1),c=Z(),u=z(),m=async f=>{if(o(!1),f){d(!0);try{await $.admin_activate_connection_instance(n,e),await a(),c.success(u.formatMessage({id:"y5DD0Z",defaultMessage:"Connection successfully activated."}))}catch(y){c.danger(u.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"review_and_activate_modal",loggingTitle:"Failed to activate connection",loggingDescription:"Failed to activate connection"})}finally{d(!1)}}},p=t.jsx(B,{color:"primary",loading:r,disabled:l,onClick:()=>o(!0),children:t.jsx(h,{id:"K+P5ds",defaultMessage:"Continue setup"})});return t.jsxs(t.Fragment,{children:[t.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.2,duration:.5},className:"bg-token-hint-bg dark:bg-token-main-surface-tertiary mb-2 flex flex-col gap-2 rounded-xl p-4",children:[t.jsx("div",{className:"text-sm",children:t.jsx(h,{id:"5NajtY",defaultMessage:"Select files to sync to complete setup"})}),l?t.jsx(ue,{children:p}):p]}),s&&t.jsx(qs,{connectionId:e,onClose:m,isOpen:!0})]})}function Et({isOpen:n,onClose:e,connectionId:a,accountId:s,isPostActivation:o,footerContent:i,primaryButton:l,secondaryButton:r}){const d=z(),{data:c,isLoading:u,error:m,refetch:p}=fe({queryKey:["slack_channel_type_scopes",a],queryFn:()=>$.admin_connection_list_item_scopes(s,a,"channel_type")});let f,y;return c==null||c.object_selections.forEach(({object_handle:g,selection:_})=>{g==="public"?f=_==="include":g==="private"&&(y=_==="include")}),t.jsxs(W,H(R({testId:"modal-slack-channel-scope"},Ct),{isOpen:n,onClose:e,children:[t.jsxs("div",{className:"flex flex-col gap-4 px-6 pt-4 pb-10",children:[t.jsx("p",{className:"text-token-text-primary",children:t.jsx(h,{id:"Ot9UkQ",defaultMessage:"Control which types of channels should be synced."})}),!o&&t.jsxs("div",{className:"bg-token-main-surface-secondary text-token-text-primary flex w-full flex-row items-center gap-4 rounded-xl p-4",children:[t.jsx(le,{className:"icon-lg"}),t.jsx("span",{className:"text-sm",children:t.jsx(h,{id:"qByMz2",defaultMessage:"You will not be able to modify the sync policy once the connection starts syncing data."})})]}),m&&t.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[t.jsx(le,{className:"icon inline"}),t.jsx(h,{id:"F9HsRh",defaultMessage:"Something went wrong."}),t.jsx("button",{onClick:()=>p(),className:"underline",children:t.jsx(h,{id:"y/IEAC",defaultMessage:"Try again"})})]}),u?t.jsx(Ee,{lines:4}):t.jsxs(t.Fragment,{children:[f!=null&&t.jsx(Xe,{connectionId:a,accountId:s,slackChannelScope:"public",title:d.formatMessage({id:"CXSVXf",defaultMessage:"Public channels"}),refetch:p,value:f,isPostActivation:o}),y!=null&&t.jsx(Xe,{connectionId:a,accountId:s,slackChannelScope:"private",title:d.formatMessage({id:"5XrboJ",defaultMessage:"Private channels"}),refetch:p,value:y,isPostActivation:o})]})]}),t.jsx(Te,{footerContent:i,primaryButton:l,secondaryButton:r})]}))}function Xe({connectionId:n,accountId:e,slackChannelScope:a,title:s,refetch:o,value:i,isPostActivation:l}){const r=Z(),d=z(),[c,u]=x.useState(!1),m=async p=>{if(!c){u(!0);try{p?await $.admin_connection_unblock_items(e,n,"channel_type",[a]):await $.admin_connection_block_items(e,n,"channel_type",[a]),o()}catch(f){r.danger(d.formatMessage({id:"7QF5n6",defaultMessage:"Failed to update policy. Please try again later."}),{toastId:"slack_channel_scope_modal",loggingTitle:"Failed to update policy",loggingDescription:"Failed to update policy"})}finally{u(!1)}}};return l?t.jsxs("div",{className:"group border-token-border-medium flex w-full flex-row items-center gap-4 rounded-xl border px-8 py-4",children:[i?t.jsx(hn,{className:"icon-lg"}):t.jsx(Jn,{className:"icon-lg"}),t.jsx("p",{className:"flex-1",children:s})]}):t.jsxs("div",{className:"group border-token-border-medium flex w-full flex-row items-center gap-4 rounded-xl border px-8 py-4",children:[t.jsx(gn,{checked:i,disabled:c,"aria-label":s,onCheckedChange:m}),t.jsx("p",{children:s}),c&&t.jsx(de,{})]})}const Js=ce(()=>pe(()=>import("./du8spbp0fpw55vih.js"),__vite__mapDeps([12,1,2,3])).then(n=>n.LimitItemsFilePickerModal));function ae({label:n,onClick:e,disabled:a}){return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full px-4",children:t.jsx("div",{className:"border-token-border-medium w-full border-t"})}),t.jsxs("div",{className:oe("flew-row flex items-center gap-4 px-4 py-2",a&&"cursor-not-allowed opacity-50",!a&&e&&"cursor-pointer"),onClick:a?void 0:e,children:[t.jsx("p",{className:"flex-1",children:n}),e&&t.jsx(An,{className:"icon text-token-text-secondary"})]})]})}function Xs({accountId:n,connectionId:e,refetch:a}){const[s,o]=x.useState(!1),i=L(),l=X(i),[r,d]=x.useState(!1),{triggerLocation:c}=Mt(),u=t.jsx(B,{color:"primary",disabled:l,icon:vt,onClick:()=>o(!0),loading:r,children:t.jsx(h,{id:"S6paZh",defaultMessage:"Finish connecting"})}),m=async()=>{d(!0),await $.admin_activate_connection_instance(n,e),me.logEventWithStatsig("Contextual Answers Admin Connection Activated","chatgpt_contextual_answers_admin_connection_activated",{triggerLocation:c,connectorType:"google_drive_oauth",connectionId:e,adminQuickstart:!0}),a(),d(!1)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full px-4",children:t.jsx("div",{className:"border-token-border-medium w-full border-t"})}),t.jsx("div",{className:"flex w-full flex-col gap-2 p-4",children:l?t.jsx(ue,{children:u}):u}),s&&t.jsx(xn,{connectionId:e,location:"admin_connection_quickstart_row",isAdminFlow:!0,isAdminQuickstartFlow:!0,onClose:()=>o(!1),onSuccess:m,accountId:n})]})}function eo({accountId:n,connectionId:e,refetch:a}){const[s,o]=x.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(ae,{onClick:()=>o(!0),label:t.jsx(h,{id:"wM9lvD",defaultMessage:"Configure credentials"})}),s&&t.jsx(Hn,{onClose:()=>o(!1),onNext:()=>{a(),o(!1)},accountId:n,connectionId:e})]})}function to({accountId:n,connectionId:e,isPostActivation:a}){const[s,o]=x.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(ae,{onClick:()=>o(!0),label:t.jsx(h,{id:"lTeSGb",defaultMessage:"Sync policy"})}),s&&t.jsx(Et,{isOpen:!0,onClose:()=>o(!1),accountId:n,connectionId:e,isPostActivation:a})]})}function no({accountId:n,connectionId:e,isPostActivation:a}){const[s,o]=x.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(ae,{onClick:()=>o(!0),label:t.jsx(h,{id:"AgDWHl",defaultMessage:"User drives"})}),s&&t.jsx(Kn,{isOpen:!0,isPostActivation:a,onClose:()=>o(!1),accountId:n,connectionId:e})]})}function so({accountId:n,connectionId:e}){const[a,s]=x.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(ae,{onClick:()=>s(!0),label:t.jsx(h,{id:"gsRcYT",defaultMessage:"Shared drives"})}),a&&t.jsx(qn,{isOpen:!0,onClose:()=>s(!1),accountId:n,connectionId:e})]})}function oo({accountId:n,connectionId:e,objectType:a,disabled:s}){const[o,i]=x.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(ae,{disabled:s,onClick:()=>i(!0),label:t.jsx(h,{id:"tisZLQ",defaultMessage:"Block items"})}),o&&t.jsx(Vn,{isOpen:!0,onClose:()=>i(!1),accountId:n,connectionId:e,objectType:a})]})}function ao(n){"use forget";const e=F.c(11),{connectionId:a,disabled:s,onSuccess:o}=n,[i,l]=x.useState(!1);let r,d;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>l(!0),d=t.jsx(h,{id:"hxmHts",defaultMessage:"Limit items"}),e[0]=r,e[1]=d):(r=e[0],d=e[1]);let c;e[2]!==s?(c=t.jsx(ae,{disabled:s,onClick:r,label:d}),e[2]=s,e[3]=c):c=e[3];let u;e[4]!==a||e[5]!==i||e[6]!==o?(u=i&&t.jsx(Js,{isOpen:!0,onClose:p=>{l(!1),p&&(o==null||o())},connectionId:a}),e[4]=a,e[5]=i,e[6]=o,e[7]=u):u=e[7];let m;return e[8]!==c||e[9]!==u?(m=t.jsxs(t.Fragment,{children:[c,u]}),e[8]=c,e[9]=u,e[10]=m):m=e[10],m}function io({accountId:n,connection:e,disabled:a}){const s=L(),[o,i]=x.useState(!1),l=yn(s);return!e.connection_config.knowledge_connector_type||l?null:t.jsxs(t.Fragment,{children:[t.jsx(ae,{disabled:a,onClick:()=>i(!0),label:t.jsx(h,{id:"9iRaQo",defaultMessage:"User access"})}),o&&t.jsx(Un,{connectorType:e.connection_config.knowledge_connector_type,fallbackEstimatedMaxNumUsers:$n(e.connection_config),onClose:()=>i(!1),accountId:n,connectionId:e.connection_config.connection_config_id})]})}function lo({accountId:n,connectionId:e,connectorType:a,connectionDisplayInfo:s,onActivate:o,activationBlockingError:i}){const[l,r]=x.useState(!1),d=L(),c=X(d),u=t.jsx(B,{color:i?"secondary":"primary",disabled:!!i||c,icon:vt,onClick:()=>r(!0),children:t.jsx(h,{id:"tVDCWM",defaultMessage:"Review and finish setup"})});return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full px-4",children:t.jsx("div",{className:"border-token-border-medium w-full border-t"})}),t.jsxs("div",{className:"flex w-full flex-col gap-2 p-4",children:[i&&t.jsx("p",{className:"text-token-text-secondary text-sm",children:i}),c?t.jsx(ue,{children:u}):u]}),l&&t.jsx(jt,{isOpen:!0,onClose:()=>r(!1),accountId:n,connectionId:e,connectionDisplayInfo:s,onActivate:o,connectorType:a})]})}const ro=({open:n,onOpenChange:e,deleteConnection:a,isDeleting:s,connectionDisplayInfo:o})=>{const i=z();return t.jsx(W,{testId:"modal-delete-connection",isOpen:n,onClose:()=>e(!1),shouldIgnoreClickOutside:!0,title:i.formatMessage({id:"oXdl2Z",defaultMessage:"Confirm deletion"}),type:"danger",icon:le,primaryButton:t.jsx(B,{color:"danger",onClick:a,disabled:s,loading:s,children:t.jsx(h,{id:"knS5PY",defaultMessage:"Delete"})}),secondaryButton:t.jsx(B,{color:"secondary",disabled:s,onClick:()=>{e(!1)},children:t.jsx(h,{id:"KnPHlG",defaultMessage:"Cancel"})}),children:t.jsxs("ul",{className:"px-4",children:[t.jsx("li",{className:"mb-2 list-disc ps-2",children:t.jsx(h,{id:"BvnNwE",defaultMessage:"You are about to delete the connection {connection_name}.",values:{connection_name:t.jsx(Wn,{connectionDisplayInfo:o})}})}),t.jsx("li",{className:"mb-2 list-disc ps-2",children:t.jsx(h,{id:"0m+fk7",defaultMessage:"Deleting this connection will stop syncing and delete synced data."})}),t.jsx("li",{className:"mb-2 list-disc ps-2 font-bold",children:t.jsx(h,{id:"a86dO+",defaultMessage:"This action cannot be undone."})})]})})},co=({open:n,onOpenChange:e,defaultName:a,accountId:s,connectionId:o,refetch:i})=>{const l=z(),[r,d]=x.useState(a),[c,u]=x.useState(!1),m=x.useId(),p=Z(),f=x.useCallback(()=>{u(!0),$.admin_edit_name_connection_instance(s,o,{name:r}).then(()=>{p.success(l.formatMessage({id:"pepxEP",defaultMessage:"Connection updated successfully."})),i(),e(!1)}).catch(()=>{p.danger(l.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"rename_modal",loggingTitle:"Failed to rename connection",loggingDescription:"Failed to rename connection"})}).finally(()=>{u(!1)})},[s,o,l,r,e,i,p]);return t.jsx(W,{testId:"modal-rename",isOpen:n,onClose:()=>e(!1),shouldIgnoreClickOutside:!0,title:l.formatMessage({id:"mmCJWI",defaultMessage:"Rename"}),type:"success",icon:bt,primaryButton:t.jsx(B,{onClick:()=>f(),loading:c,children:t.jsx(h,{id:"LebexD",defaultMessage:"Rename"})}),secondaryButton:t.jsx(B,{color:"secondary",onClick:()=>{e(!1)},children:t.jsx(h,{id:"KnPHlG",defaultMessage:"Cancel"})}),children:t.jsxs("form",{onSubmit:y=>{y.preventDefault(),f()},className:"flex flex-col gap-2",children:[t.jsx("label",{htmlFor:m,className:"text-token-text-secondary text-base font-medium",children:t.jsx(h,{id:"Gk2g3Q",defaultMessage:"Connection name"})}),t.jsx("input",{type:"text",value:r,onChange:y=>d(y.target.value),id:m,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"}),t.jsx("button",{type:"submit",className:"display-none"})]})})};function Dt({accountId:n,adminUserConnectionState:e,connectedKnowledgeSource:a,connection:s,connectorName:o,onCreateAnotherInstance:i,refetchConnectionInstances:l,showIcon:r=!1,sharepointAdminConnectorEnabled:d=!1,eligibleToCreateNewSharepointAdminConnection:c=!1,teamsAdminConnectorEnabled:u=!1,eligibleToCreateNewTeamsAdminConnection:m=!1}){var w;const[p,f]=x.useState(!1),y=z();let g;const _=s.connection_config.knowledge_connector_type;if(_)_==="slack"?g="synced_channel":g="synced_object";else return null;let M;s.connection_config.knowledge_connector_type==="sharepoint"&&d?M=t.jsx(Fs,{refetchConnectionInstances:l,eligibleToCreateNewSharepointAdminConnection:c}):s.connection_config.knowledge_connector_type==="teams"&&u?M=t.jsx(Hs,{refetchConnectionInstances:l,eligibleToCreateNewTeamsAdminConnection:m}):s.connection_status!=="draft"||_==="sharepoint_admin"||_==="teams_admin"||(_==="google_drive_oauth"&&!s.connection_config.domain_name?M=t.jsx(Xs,{accountId:n,connectionId:s.connection_config.connection_config_id,refetch:l}):M=t.jsx(lo,{connectorType:_,connectionId:s.connection_config.connection_config_id,accountId:n,connectionDisplayInfo:s.display_info,onActivate:l,activationBlockingError:po(s,y)}));const k=["google_drive_dwd","google_drive_oauth","slack"].includes(_);return t.jsxs(Pe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"group bg-token-main-surface-secondary w-full rounded-xl pb-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4 p-4 pb-6",children:[r&&s.display_info.icon_url&&t.jsx("div",{className:"bg-token-bg-primary h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:t.jsx("div",{className:"h-[28px] w-[28px]",children:t.jsx("img",{src:(w=s.display_info.icon_url)!=null?w:"",alt:"",className:"icon-xl self-center"})})}),t.jsxs("div",{className:"w-full shrink overflow-hidden",children:[t.jsx("div",{className:"text-token-text-primary overflow-hidden font-medium text-ellipsis whitespace-nowrap",children:t.jsx(_n,{label:o!=null?o:s.display_info.display_name,side:"top",align:"center",children:o!=null?o:s.display_info.display_name})}),t.jsx("div",{children:t.jsx(uo,{connectionDisplayName:s.display_info.display_name,connectionStatus:s.connection_status})})]}),t.jsx(mo,{accountId:n,className:oe("hover:bg-token-main-surface-secondary-selected h-8 w-8",p?"bg-token-main-surface-secondary-selected":"bg-transparent"),connectedKnowledgeSource:a,connectionDisplayInfo:s.display_info,connectionId:s.connection_config.connection_config_id,isOpen:p,onCreateAnotherInstance:i,refetch:l,setIsOpen:f})]}),_==="sharepoint_admin"&&s.connection_status==="draft"&&t.jsx("div",{className:"px-4",children:t.jsx(Vs,{connectionId:s.connection_config.connection_config_id,accountId:n,refetch:l})}),t.jsx(Ws,{connection:s,adminUserConnectionState:e}),["google_drive_oauth","google_drive_dwd"].includes(_)&&t.jsx(io,{connection:s,accountId:n}),_==="google_drive_dwd"&&t.jsxs(t.Fragment,{children:[t.jsx(eo,{connectionId:s.connection_config.connection_config_id,accountId:n,refetch:l}),t.jsx(no,{connectionId:s.connection_config.connection_config_id,accountId:n,isPostActivation:s.connection_status!=="draft"}),t.jsx(so,{connectionId:s.connection_config.connection_config_id,accountId:n})]}),_==="slack"&&t.jsx(to,{connectionId:s.connection_config.connection_config_id,accountId:n,isPostActivation:s.connection_status!=="draft"}),_==="sharepoint_admin"&&s.connection_status!=="draft"&&t.jsx(ao,{connectionId:s.connection_config.connection_config_id}),g!=null&&k&&t.jsx(oo,{connectionId:s.connection_config.connection_config_id,accountId:n,objectType:g}),M]})}const uo=({connectionDisplayName:n,connectionStatus:e})=>{switch(e){case"active":case"partially_activated":case"activating":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(Gn,{className:"icon-sm text-token-text-secondary"}),t.jsx("span",{className:"text-token-text-secondary ms-0.5 text-sm",children:t.jsx(h,{id:"3aMZRu",defaultMessage:"Configured • {connectionDisplayName}",values:{connectionDisplayName:n}})})]});case"draft":return t.jsxs("div",{className:"flex items-center",children:[t.jsx(dt,{className:"icon-sm text-token-text-secondary"}),t.jsx("span",{className:"text-token-text-secondary ms-0.5 text-sm",children:t.jsx(h,{id:"rEztVG",defaultMessage:"Draft • {connectionDisplayName}",values:{connectionDisplayName:n}})})]});case"deleting":case"deleted":return null}};function mo({accountId:n,className:e,connectionDisplayInfo:a,connectionId:s,connectedKnowledgeSource:o,isOpen:i,onCreateAnotherInstance:l,refetch:r,setIsOpen:d}){const c=L(),u=X(c),m=Z(),p=z(),[f,y]=x.useState(!1),[g,_]=x.useState(!1),[M,k]=x.useState(!1),w=async()=>{if(!M){k(!0);try{await $.admin_delete_connection_instance(n,s),m.success(p.formatMessage({id:"zM0Z9u",defaultMessage:"Connection deleted."}))}catch(S){m.danger(p.formatMessage({id:"3lBGk2",defaultMessage:"Failed to delete this connection. Please try again later."}),{toastId:"connection_instance_menu",loggingTitle:"Failed to delete connection",loggingDescription:"Failed to delete connection"})}finally{r(),k(!1),_(!1)}}},C=t.jsx(ne.Item,{icon:Ln,onSelect:()=>l==null?void 0:l(),disabled:!l,children:t.jsx(h,{id:"NLydA/",defaultMessage:"Connect another {connectedKnowledgeSource}",values:{connectedKnowledgeSource:o}})});return t.jsxs(t.Fragment,{children:[t.jsxs(ne.Root,{open:i,onOpenChange:d,children:[t.jsx(ne.Trigger,{className:e,children:t.jsx(dt,{className:"icon-lg"})}),t.jsx(ne.Portal,{children:t.jsxs(ne.Content,{size:"medium",children:[t.jsx(ne.Item,{icon:bt,onSelect:()=>Ye(y)(!0),disabled:M||g,children:t.jsx(h,{id:"XSQcFy",defaultMessage:"Rename connection"})}),l?C:u?t.jsx(ue,{children:C}):null,t.jsx(ne.Item,{icon:M||g?de:Fn,onSelect:()=>Ye(_)(!0),color:"danger",disabled:M||g,children:t.jsx(h,{id:"EAIYOb",defaultMessage:"Delete connection"})}),!1]})})]}),t.jsx(co,{open:f,onOpenChange:y,defaultName:a.display_name,connectionId:s,accountId:n,refetch:r}),t.jsx(ro,{open:g,onOpenChange:_,deleteConnection:w,isDeleting:M,connectionDisplayInfo:a})]})}function po(n,e){if(n.connection_config.knowledge_connector_type==="google_drive_dwd"){if(!n.connection_config.admin_email_address||!n.connection_config.service_account_credential_id)return e.formatMessage({id:"BfNdzb",defaultMessage:"Credential configuration is incomplete"})}else if(n.connection_config.knowledge_connector_type==="google_drive_oauth"&&!n.connection_config.domain_name)return e.formatMessage({id:"PxrodU",defaultMessage:"Google Workspace domain must be set"})}function fo({onClose:n}){const[e,a]=x.useState(),s=L(),o=K(s);return o?e?t.jsx(ho,{accountId:o.id,connection:e,onClose:n}):t.jsx(go,{accountId:o.id,onClose:n,setConnection:a}):null}function go({onClose:n,setConnection:e,accountId:a}){var _,M,k,w;const s=z(),o=Z(),{triggerLocation:i}=Mt(),[l,r]=x.useState({teamDomain:"app"});x.useEffect(()=>{me.logEventWithStatsig("Contextual Answers Admin Create Connection Step","chatgpt_contextual_answers_admin_create_connection_step",{connectorType:"slack",stepName:"basic_info",triggerLocation:i})},[i]);const[d,c]=x.useState(!1),u=x.useCallback(()=>{!(l.teamDomain&&l.teamId)||!a||(c(!0),$.admin_create_connection_instance(a,{connection_config_id:"--fake-local-id",knowledge_connector_type:"slack",team_id:l.teamId,team_domain:l.teamDomain},l.connectionName).then(C=>{e(C)}).catch(()=>{o.danger(s.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}),{toastId:"slack_connection_setup_modal",loggingTitle:"Failed to create connection",loggingDescription:"Failed to create connection"})}).finally(()=>{c(!1)}))},[a,l.connectionName,l.teamDomain,l.teamId,s,e,o]),m=!!((_=l.connectionName)!=null&&_.length)&&l.connectionName.length>128,p=!!(l.teamDomain&&l.teamId&&!m),f=x.useId(),y=x.useId(),g=x.useId();return t.jsxs(W,H(R({},Ct),{onClose:n,testId:"modal-slack-basic-info",children:[t.jsxs("form",{onSubmit:C=>{C.preventDefault(),p&&u()},className:"flex flex-col gap-4 px-6 pt-4 pb-6",children:[t.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[t.jsx("label",{htmlFor:f,className:"text-token-text-secondary text-base font-medium",children:t.jsx(h,{id:"e2yF8/",defaultMessage:"Connection display name"})}),t.jsx("input",{type:"text",value:(M=l.connectionName)!=null?M:"",onChange:C=>r(S=>H(R({},S),{connectionName:C.target.value})),placeholder:s.formatMessage({id:"0gZ+BA",defaultMessage:"(optional)"}),id:f,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"}),m?t.jsx("p",{className:"text-red-500",children:t.jsx(h,{id:"vT7EGU",defaultMessage:"Name is too long."})}):null]}),t.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[t.jsx("label",{htmlFor:y,className:"text-token-text-secondary text-base font-medium",children:t.jsx(h,{id:"hEnKIS",defaultMessage:"Slack workspace domain"})}),t.jsxs("p",{children:[t.jsx("input",{type:"text",value:(k=l.teamDomain)!=null?k:"",onChange:C=>r(S=>H(R({},S),{teamDomain:C.target.value})),id:y,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"}),t.jsx("span",{className:"text-token-text-secondary ms-1 font-medium",children:".slack.com"})]})]}),t.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[t.jsx("label",{htmlFor:g,className:"text-token-text-secondary text-base font-medium",children:t.jsx(h,{id:"azUOrk",defaultMessage:"Slack workspace ID"})}),t.jsx("input",{type:"text",value:(w=l.teamId)!=null?w:"",onChange:C=>r(S=>H(R({},S),{teamId:C.target.value})),placeholder:s.formatMessage({id:"vUK9Kc",defaultMessage:"T0000000000"}),id:g,className:"border-token-border-default bg-token-main-surface-primary text-token-text-primary rounded-lg border border-solid"})]}),t.jsx("button",{type:"submit",className:"display-none"})]}),t.jsx(Te,{primaryButton:t.jsx(B,{color:"primary",disabled:!p,onClick:u,loading:d,children:t.jsx(h,{id:"lZthRm",defaultMessage:"Save Draft and Continue"})})})]}))}function ho({connection:n,accountId:e,onClose:a}){return t.jsx(Yn,{onClose:a,steps:[{connectorType:"slack",name:"slack_channel_scope",fn:({goForward:s,goBackward:o,close:i,stepNumber:l,totalSteps:r})=>t.jsx(Et,{isOpen:!0,isPostActivation:!1,onClose:()=>i==null?void 0:i(),accountId:e,connectionId:n.connection_config.connection_config_id,primaryButton:s&&t.jsx(B,{color:"primary",onClick:s,children:t.jsx(h,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:o&&t.jsx(B,{color:"secondary",onClick:o,children:t.jsx(h,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:t.jsx("span",{className:"text-token-text-secondary flex-1 align-middle font-medium",children:t.jsx(h,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:l+1,totalSteps:r}})})})},{connectorType:"slack",name:"review_and_activate",fn:({goBackward:s,close:o,stepNumber:i,totalSteps:l})=>t.jsx(jt,{isOpen:!0,onClose:()=>o==null?void 0:o(),accountId:e,connectorType:"slack",connectionId:n.connection_config.connection_config_id,connectionDisplayInfo:n.display_info,secondaryButton:s&&t.jsx(B,{color:"secondary",onClick:s,children:t.jsx(h,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:t.jsx("span",{className:"text-token-text-secondary flex-1 align-middle font-medium",children:t.jsx(h,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:i+1,totalSteps:l}})})})}]})}var tt;const xo=bn.div(tt||(tt=Ke(["w-full border-b-1 border-token-border-light"]))),yo={type:"slack",icon:Cn,nameMessage:{id:"connectors.slack.displayName",defaultMessage:"Slack",description:"Name of a product."},taglineMessage:{id:"connectors.slack.tagline",defaultMessage:"Connect messages and channels.",description:"Tagline explaining that this feature allows ChatGPT to sync data from Slack messages and channels."},modalKey:"slack"},xe=[yo,...Ns.map(n=>({type:n.type,icon:n.icon,nameMessage:n.displayNameMessage,taglineMessage:n.taglineMessage,hideForTeamPlan:n.hideForTeamPlan,modalKey:n.type}))];async function Ot(n){const[e,a]=await Promise.all([$.admin_list_knowledge_connectors(n),$.admin_list_connection_instances(n)]),s=new Map;return e.knowledge_conectors.forEach(o=>{var i;return s.set(o.connector_details.knowledge_connector_type,{displayInfo:o.display_info,availability:o.connector_details.availability,connections:[],limits:(i=o.connector_details.limits)!=null?i:{max_instances:3}})}),a.connection_instances.forEach(o=>{var l;if(!o.connection_config.knowledge_connector_type)return;const i=(l=s.get(o.connection_config.knowledge_connector_type))==null?void 0:l.connections;i!=null?i.push(o):s.set(o.connection_config.knowledge_connector_type,{displayInfo:o.display_info,availability:"unavailable",limits:se,connections:[o]})}),s}function we(n){return!(n.connection_status==="deleted"||n.connection_status==="deleting")}function sa(){"use no forget";const n=z(),e=L(),a=K(e),[s,o]=x.useState(null),i=Mn(e,"4243523004"),l=i.get("enabledConnectors",[]);x.useEffect(()=>{me.logEventWithStatsig("Contextual Answers Admin Page Visited","chatgpt_contextual_answers_admin_page_visited")},[]);const{data:r,isLoading:d,error:c,refetch:u}=fe({queryKey:["admin:knowledge_connectors_with_connections",a==null?void 0:a.id],queryFn:async()=>{if(!a)throw new Error("No current account");return await Ot(a.id)},enabled:!!a}),m=ut(()=>jn(e).data),p=async()=>await Promise.all([u(),ct(e)]),f=x.useMemo(()=>a!=null&&a.isSelfServeBusiness()?xe.filter(b=>!b.hideForTeamPlan):xe,[a]),{combinedGoogleDriveConnections:y,googleDriveUnavailableConnections:g,eitherGoogleDriveConnectorEnabled:_,googleDriveLimits:M,isGoogleDriveDwdEnabled:k,someGoogleDriveConnectorEnabledButNoneAreLinked:w}=x.useMemo(()=>{var Ae,Ge,Fe,Le,Re;const b=r==null?void 0:r.get("google_drive_oauth"),j=r==null?void 0:r.get("google_drive_dwd"),O=(Ae=b==null?void 0:b.connections.filter(we))!=null?Ae:[],A=(Ge=j==null?void 0:j.connections.filter(we))!=null?Ge:[],G=[];(b==null?void 0:b.availability)==="available"&&G.push(...O),(j==null?void 0:j.availability)==="available"&&G.push(...A);const q=[];(b==null?void 0:b.availability)!=="available"&&q.push(...O),(j==null?void 0:j.availability)!=="available"&&q.push(...A);const ee=(Le=(Fe=b==null?void 0:b.limits)!=null?Fe:j==null?void 0:j.limits)!=null?Le:se,Y=(b==null?void 0:b.availability)==="available"||(j==null?void 0:j.availability)==="available",ge=((Re=ee==null?void 0:ee.max_instances)!=null?Re:se.max_instances)!==0,Gt=Y&&G.length===0&&ge;return{combinedGoogleDriveConnections:G,googleDriveUnavailableConnections:q,eitherGoogleDriveConnectorEnabled:Y,googleDriveLimits:ee,isGoogleDriveDwdEnabled:(j==null?void 0:j.availability)==="available",someGoogleDriveConnectorEnabledButNoneAreLinked:Gt}},[r]),{connectorStates:C,unavailableConnections:S}=x.useMemo(()=>{const b=new Map;f.forEach(A=>{b.set(A.type,{config:A,availability:"unavailable",connections:[],limits:se})});const j=[...g];return r==null||r.forEach((A,G)=>{var ge;if(G==="google_drive_oauth"||G==="google_drive_dwd")return;const q=A.connections.filter(we),ee=G==="sharepoint_admin"?"sharepoint":G==="teams_admin"?"teams":G,Y=b.get(ee);Y?(Y.availability=A.availability,Y.connections=Y.connections.concat(q),Y.limits=(ge=A.limits)!=null?ge:se,A.availability!=="available"&&j.push(...q)):A.availability!=="available"&&j.push(...q)}),{connectorStates:f.map(A=>b.get(A.type)),unavailableConnections:j}},[r,g,f]),N=i.get("enabled",!1)&&l.includes("sharepoint_admin_connector"),I=i.get("enabled",!1)&&l.includes("teams_admin_connector"),E=X(e),T=[];w&&T.push("google_drive"),C.forEach(b=>{var j,O;b.availability==="available"&&b.connections.length===0&&((O=(j=b.limits)==null?void 0:j.max_instances)!=null?O:se.max_instances)!==0&&T.push(b.config.modalKey)});const v=b=>{o(b)},P=()=>{o(null),p()},D=s&&s!=="google_drive"&&s!=="slack"?ke(s).Controller:void 0;return a!=null&&a.id?t.jsxs(Rn,{className:"gap-4",children:[t.jsx(No,{showDescription:y.length>0}),c&&t.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[t.jsx(le,{className:"icon inline"}),c instanceof kn&&c.code==="unsupported_data_residency"?t.jsx(h,{id:"IqeMXI",defaultMessage:"Synced connectors are not currently supported for your data residency region."}):t.jsx(h,{id:"zNCx93",defaultMessage:"Failed to get connection instances. Please refresh to try again."})]}),E&&t.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[t.jsx(le,{className:"icon inline"}),t.jsx(h,{id:"hnTY+Z",defaultMessage:"Our systems are experiencing high load. Some operations may be temporarily unavailable."})]}),d&&t.jsx(de,{}),t.jsxs("div",{children:[t.jsxs("div",{className:"border-token-border-light divide-y-[1px] overflow-hidden rounded-xl border-[1px]",children:[w&&t.jsx(_o,{shouldShowForehead:!d&&!y.length,handleOpenModal:v}),C.map((b,j)=>{var O,A;return b.availability!=="available"||b.connections.length>0||((A=(O=b.limits)==null?void 0:O.max_instances)!=null?A:se.max_instances)===0?null:b.config.type==="sharepoint"&&N?t.jsx(Co,{connectorType:b.config.type,connectorName:n.formatMessage(b.config.nameMessage),description:n.formatMessage(b.config.taglineMessage),Icon:b.config.icon,refetchConnectionInstances:p,closeOtherModals:()=>o(null)},"cta-".concat(j,"-").concat(b.config.type)):b.config.type==="teams"&&I?t.jsx(Mo,{connectorType:b.config.type,connectorName:n.formatMessage(b.config.nameMessage),description:n.formatMessage(b.config.taglineMessage),Icon:b.config.icon,refetchConnectionInstances:p,closeOtherModals:()=>o(null)},"cta-".concat(j,"-").concat(b.config.type)):t.jsx(Se,{connectorType:b.config.type,connectorName:n.formatMessage(b.config.nameMessage),description:n.formatMessage(b.config.taglineMessage),Icon:b.config.icon,onClickConnect:()=>v(b.config.modalKey)},"cta-".concat(j,"-").concat(b.config.type))})]}),(()=>{const b=[];return _&&y.length>0&&b.push(t.jsx(et,{adminUserConnectionStatus:m==null?void 0:m.connection_statuses,accountId:a.id,connectorName:n.formatMessage({id:"oDI3Mt",defaultMessage:"Google Drive"}),connectorType:"google_drive",limits:M,onClickConnect:()=>v("google_drive"),refetchConnectionInstances:p,connectionInstancesLoading:d,connectionInstances:y,singularNounConnectedObjectName:Qe("google_drive_oauth",n).externalLinkableUnitSingular},"connected-google-drive")),C.forEach(j=>{j.availability==="available"&&j.connections.length>0&&b.push(t.jsx(et,{accountId:a.id,connectorType:j.config.type,connectorName:n.formatMessage(j.config.nameMessage),limits:j.limits,onClickConnect:()=>v(j.config.modalKey),connectionInstancesLoading:d,connectionInstances:j.connections,adminUserConnectionStatus:m==null?void 0:m.connection_statuses,refetchConnectionInstances:p,singularNounConnectedObjectName:Qe(j.config.type,n).externalLinkableUnitSingular,sharepointAdminConnectorEnabled:N,teamsAdminConnectorEnabled:I},"connected-".concat(j.config.type)))}),b.length===0?null:t.jsx("div",{className:oe("mt-4 grid grid-cols-1 gap-4",b.length>1&&"lg:grid-cols-2"),children:b})})()]}),S.length>0&&t.jsx(vo,{accountId:a.id,connectionInstancesLoading:d,connectionInstances:S,refetchConnectionInstances:p}),s==="google_drive"&&t.jsx(Qn,{isDwdEnabled:k,onClose:P,triggerLocation:"admin_settings"}),s==="slack"&&t.jsx(fo,{onClose:P}),D?t.jsx(D,{onClose:P}):null]}):null}function _o(n){"use forget";const e=F.c(16),{shouldShowForehead:a,handleOpenModal:s}=n,o=z();let i;e[0]!==a?(i=a&&t.jsx("div",{className:"px-4 py-3 text-[13px] text-[#007AFF]",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ce,{className:"icon"}),t.jsx(h,{id:"woNVMz",defaultMessage:"Syncing is required to use Google Drive in chat. {learnMore}",values:{learnMore:t.jsx(Ie,{href:je,className:"underline",onClick:bo,children:t.jsx(h,{id:"WGpoE2",defaultMessage:"Learn more"})},"learnMore")}})]})}),e[0]=a,e[1]=i):i=e[1];const l=a?"border-token-border-light overflow-hidden rounded-t-xl border-t-[1px]":void 0;let r;e[2]!==o?(r=o.formatMessage({id:"oDI3Mt",defaultMessage:"Google Drive"}),e[2]=o,e[3]=r):r=e[3];let d;e[4]!==o?(d=o.formatMessage({id:"xlgXB9",defaultMessage:"Sync Docs, Sheets, Slides and other files"}),e[4]=o,e[5]=d):d=e[5];let c;e[6]!==s?(c=()=>s("google_drive"),e[6]=s,e[7]=c):c=e[7];let u;e[8]!==l||e[9]!==r||e[10]!==d||e[11]!==c?(u=t.jsx(Se,{className:l,connectorName:r,connectorType:"google_drive",description:d,Icon:Sn,onClickConnect:c}),e[8]=l,e[9]=r,e[10]=d,e[11]=c,e[12]=u):u=e[12];let m;return e[13]!==i||e[14]!==u?(m=t.jsxs("div",{className:"bg-token-interactive-bg-accent-inactive",children:[i,u]}),e[13]=i,e[14]=u,e[15]=m):m=e[15],m}function bo(){return kt({link:je,location:"admin_settings_header"})}function Co(n){"use forget";var u;const e=F.c(14);let a,s,o;e[0]!==n?(u=n,{refetchConnectionInstances:o,closeOtherModals:s}=u,a=ve(u,["refetchConnectionInstances","closeOtherModals"]),e[0]=n,e[1]=a,e[2]=s,e[3]=o):(a=e[1],s=e[2],o=e[3]);const i=Tt(o);let l;e[4]!==s||e[5]!==i?(l=i.canStart?()=>{s(),i.open()}:void 0,e[4]=s,e[5]=i,e[6]=l):l=e[6];const r=i.isLoading||!i.canStart;let d;e[7]!==a||e[8]!==l||e[9]!==r?(d=t.jsx(Se,H(R({},a),{onClickConnect:l,ctaIsLoading:r})),e[7]=a,e[8]=l,e[9]=r,e[10]=d):d=e[10];let c;return e[11]!==i.modals||e[12]!==d?(c=t.jsxs(t.Fragment,{children:[d,i.modals]}),e[11]=i.modals,e[12]=d,e[13]=c):c=e[13],c}function Mo(n){"use forget";var u;const e=F.c(14);let a,s,o;e[0]!==n?(u=n,{refetchConnectionInstances:o,closeOtherModals:s}=u,a=ve(u,["refetchConnectionInstances","closeOtherModals"]),e[0]=n,e[1]=a,e[2]=s,e[3]=o):(a=e[1],s=e[2],o=e[3]);const i=It(o);let l;e[4]!==s||e[5]!==i?(l=i.canStart?()=>{s(),i.open()}:void 0,e[4]=s,e[5]=i,e[6]=l):l=e[6];const r=i.isLoading||!i.canStart;let d;e[7]!==a||e[8]!==l||e[9]!==r?(d=t.jsx(Se,H(R({},a),{onClickConnect:l,ctaIsLoading:r})),e[7]=a,e[8]=l,e[9]=r,e[10]=d):d=e[10];let c;return e[11]!==i.modals||e[12]!==d?(c=t.jsxs(t.Fragment,{children:[d,i.modals]}),e[11]=i.modals,e[12]=d,e[13]=c):c=e[13],c}function et(n){"use forget";const e=F.c(32),{accountId:a,adminUserConnectionStatus:s,className:o,connectionInstances:i,connectionInstancesLoading:l,connectorName:r,connectorType:d,limits:c,onClickConnect:u,refetchConnectionInstances:m,singularNounConnectedObjectName:p,sharepointAdminConnectorEnabled:f,teamsAdminConnectorEnabled:y}=n,g=f===void 0?!1:f,_=y===void 0?!1:y,M=L();let k;e[0]!==M?(k=X(M),e[0]=M,e[1]=k):k=e[1];const w=k,C=i!=null&&!w&&(c.max_instances===Zn||i.length<c.max_instances);let S;e[2]!==i||e[3]!==d||e[4]!==g?(S=d==="sharepoint"&&g&&!(i!=null&&i.some(So)),e[2]=i,e[3]=d,e[4]=g,e[5]=S):S=e[5];const N=S;let I;e[6]!==i||e[7]!==d||e[8]!==_?(I=d==="teams"&&_&&!(i!=null&&i.some(ko)),e[6]=i,e[7]=d,e[8]=_,e[9]=I):I=e[9];const E=I;let T;e[10]!==d||e[11]!==u?(T=()=>{me.logEventWithStatsig("Contextual Answers Admin Create Connection Button Clicked","chatgpt_contextual_answers_admin_create_connection_button_clicked",{connectorType:d}),u==null||u()},e[10]=d,e[11]=u,e[12]=T):T=e[12];const v=T;let P;e[13]!==o?(P=oe("bg-token-bg-primary mt-2 flex w-full flex-col gap-4",o),e[13]=o,e[14]=P):P=e[14];let D;e[15]!==a||e[16]!==s||e[17]!==C||e[18]!==i||e[19]!==l||e[20]!==r||e[21]!==N||e[22]!==E||e[23]!==v||e[24]!==m||e[25]!==g||e[26]!==p||e[27]!==_?(D=l?t.jsx(Ee,{lines:2}):i!=null&&i.length?t.jsx(mt,{children:t.jsxs("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[i.filter(jo).map(j=>t.jsx(Dt,{accountId:a,adminUserConnectionState:s==null?void 0:s.find(O=>O.user_connection_details.connection_instance_id===j.connection_config.connection_config_id),connectedKnowledgeSource:p,connection:j,connectorName:r,onCreateAnotherInstance:C?v:void 0,refetchConnectionInstances:m,showIcon:!0,sharepointAdminConnectorEnabled:g,teamsAdminConnectorEnabled:_,eligibleToCreateNewSharepointAdminConnection:N,eligibleToCreateNewTeamsAdminConnection:E},j.connection_config.connection_config_id)),i.length===1&&t.jsx("div",{},"grid-spacer")]})}):null,e[15]=a,e[16]=s,e[17]=C,e[18]=i,e[19]=l,e[20]=r,e[21]=N,e[22]=E,e[23]=v,e[24]=m,e[25]=g,e[26]=p,e[27]=_,e[28]=D):D=e[28];let b;return e[29]!==P||e[30]!==D?(b=t.jsx("div",{className:P,children:D}),e[29]=P,e[30]=D,e[31]=b):b=e[31],b}function jo(n){return!["deleted","deleting"].includes(n.connection_status)}function ko(n){return n.connection_config.knowledge_connector_type==="teams_admin"}function So(n){return n.connection_config.knowledge_connector_type==="sharepoint_admin"}function Se(n){"use forget";const e=F.c(34),{badge:a,className:s,connectorName:o,connectorType:i,description:l,Icon:r,onClickConnect:d,ctaIsLoading:c}=n,u=c===void 0?!1:c,m=L();let p;e[0]!==m?(p=X(m),e[0]=m,e[1]=p):p=e[1];const f=p;let y;e[2]!==i||e[3]!==d?(y=()=>{me.logEventWithStatsig("Contextual Answers Admin Create Connection Button Clicked","chatgpt_contextual_answers_admin_create_connection_button_clicked",{connectorType:i}),d==null||d()},e[2]=i,e[3]=d,e[4]=y):y=e[4];const g=y,_=!d||u;let M;e[5]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ce,{className:"icon text-[#007AFF]"}),t.jsx(h,{id:"FSQUDq",defaultMessage:"Enable Sync"})]}),e[5]=M):M=e[5];let k;e[6]!==u||e[7]!==g||e[8]!==_?(k=t.jsx(B,{className:"text-nowrap",color:"secondary",onClick:g,disabled:_,loading:u,children:M}),e[6]=u,e[7]=g,e[8]=_,e[9]=k):k=e[9];const w=k;let C;e[10]!==s?(C=oe("bg-token-bg-primary flex w-full flex-col gap-4","p-5",s),e[10]=s,e[11]=C):C=e[11];let S;e[12]!==r?(S=t.jsx("div",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:t.jsx(r,{className:"icon-lg shrink-0"})}),e[12]=r,e[13]=S):S=e[13];let N;e[14]!==o?(N=t.jsx("p",{className:"text-primary",children:o}),e[14]=o,e[15]=N):N=e[15];let I;e[16]!==a||e[17]!==N?(I=t.jsxs("div",{className:"flex items-center gap-1",children:[N,a]}),e[16]=a,e[17]=N,e[18]=I):I=e[18];let E;e[19]!==l?(E=t.jsx("p",{className:"text-token-text-secondary text-sm",children:l}),e[19]=l,e[20]=E):E=e[20];let T;e[21]!==I||e[22]!==E?(T=t.jsxs("div",{className:"flex min-w-[240px] flex-1 flex-col gap-0.5",children:[I,E]}),e[21]=I,e[22]=E,e[23]=T):T=e[23];let v;e[24]!==w||e[25]!==f?(v=t.jsx("div",{className:"flex shrink-0 items-center",children:f?t.jsx(ue,{children:w}):w}),e[24]=w,e[25]=f,e[26]=v):v=e[26];let P;e[27]!==T||e[28]!==v||e[29]!==S?(P=t.jsxs("div",{className:"flex w-full flex-row flex-wrap items-center gap-4",children:[S,T,v]}),e[27]=T,e[28]=v,e[29]=S,e[30]=P):P=e[30];let D;return e[31]!==P||e[32]!==C?(D=t.jsx("div",{className:C,children:P}),e[31]=P,e[32]=C,e[33]=D):D=e[33],D}function vo({accountId:n,connectionInstances:e,connectionInstancesLoading:a,refetchConnectionInstances:s}){return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex w-full flex-col gap-4",children:a?t.jsx(Ee,{lines:2}):e!=null&&e.length?t.jsx(mt,{children:t.jsxs("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[e.map(o=>t.jsx(Dt,{connection:o,showIcon:!0,accountId:n,refetchConnectionInstances:s},o.connection_config.connection_config_id)),e.length===1&&t.jsx("div",{},"grid-spacer")]})}):null}),t.jsx(xo,{})]})}function No(n){"use forget";const e=F.c(12),{badge:a,showDescription:s}=n,o=s===void 0?!0:s,i=z();let l;e[0]!==i?(l=i.formatMessage({id:"PzngEC",defaultMessage:"Synced connectors"}),e[0]=i,e[1]=l):l=e[1];let r;e[2]!==l?(r=t.jsx("span",{children:l}),e[2]=l,e[3]=r):r=e[3];let d;e[4]!==a||e[5]!==r?(d=t.jsxs(Bn,{className:"flex flex-row items-center gap-2",children:[r,a]}),e[4]=a,e[5]=r,e[6]=d):d=e[6];let c;e[7]!==o?(c=o&&t.jsx(zn,{className:"text-token-text-secondary",children:t.jsx(h,{id:"Y9lNjg",defaultMessage:"ChatGPT syncs, indexes, and stores your organization's content for higher quality, up-to-date answers. {learnMore}",values:{learnMore:t.jsx(Ie,{href:je,className:"underline",onClick:wo,children:t.jsx(h,{id:"WGpoE2",defaultMessage:"Learn more"})},"learnMore")}})}),e[7]=o,e[8]=c):c=e[8];let u;return e[9]!==d||e[10]!==c?(u=t.jsxs("div",{children:[d,c]}),e[9]=d,e[10]=c,e[11]=u):u=e[11],u}function wo(){return kt({link:je,location:"admin_settings_header"})}const To={sharepoint_admin:"sharepoint",teams_admin:"teams",google_drive_oauth:"gdrive_action",google_drive_dwd:"gdrive_action"},oa=()=>{"use forget";const n=F.c(2),e=_e();let a;return n[0]!==e?(a=s=>{e.setQueriesData({queryKey:["fetchPlatformConnectorData"]},o=>{if(!o)return o;let i=!1;const l={connectors:o.connectors.map(r=>r.id!==s||!r.actions_changed_since_review?r:(i=!0,H(R({},r),{actions_changed_since_review:!1}))),templates:o.templates};return i?l:o})},n[0]=e,n[1]=a):a=n[1],a},aa=()=>{"use forget";const n=F.c(8),e=L(),a=K(e),s=_e();let o;n[0]===Symbol.for("react.memo_cache_sentinel")?(o=Pn("workspace_settings",!0,!0),n[0]=o):o=n[0];const i=o,l=De(a==null?void 0:a.id),r="workspace-settings",d=a==null?void 0:a.getWorkspaceId();let c;n[1]!==d?(c=[r,d],n[1]=d,n[2]=c):c=n[2];const u=c;let m;return n[3]!==l||n[4]!==i||n[5]!==s||n[6]!==u?(m=()=>Promise.all([s.invalidateQueries({queryKey:i}),s.invalidateQueries({queryKey:l}),s.invalidateQueries({queryKey:u})]),n[3]=l,n[4]=i,n[5]=s,n[6]=u,n[7]=m):m=n[7],m},ia=()=>{"use forget";const n=F.c(3),e=L(),a=K(e),s=_e(),o=De(a==null?void 0:a.id);let i;return n[0]!==o||n[1]!==s?(i=()=>s.invalidateQueries({queryKey:o}),n[0]=o,n[1]=s,n[2]=i):i=n[2],i},Io=pt(n=>{const e=n.filter(o=>!Nn.has(o.id)).filter(o=>{var i;return((i=o.labels)==null?void 0:i.admin_only_connector)!=="true"}).map(o=>H(R({},o),{type:o.connector_type==="MCP"?wn.MCP_CONNECTOR:Tn[o.id]})).filter(o=>o.connector_type==="FIRST_PARTY_ECOSYSTEM"||o.type!==void 0||!1),a=new Map,s=new Map;e.forEach(o=>{var i;((i=qe[o.type])==null?void 0:i.sync)===o.id?s.set(qe[o.type].access,o):a.set(o.id,{primaryConnector:o,relatedConnectors:[],knowledgeConfig:[],searchKeys:[]})});for(const[o,i]of s.entries()){const l=a.get(o);l?l.relatedConnectors.push(i):a.set(o,{primaryConnector:i,relatedConnectors:[],knowledgeConfig:[],searchKeys:[]})}return Array.from(a.values())}),la=()=>{"use forget";var E,T,v;const n=F.c(20),e=L(),a=K(e);let s;n[0]!==e?(s=()=>We(e,{productSku:Q.ADMIN_SETTING,purpose:"workspace_settings",skipActions:!0,skipLogos:!0}),n[0]=e,n[1]=s):s=n[1];const{data:o,isLoading:i,error:l}=ut(s);let r;n[2]!==(o==null?void 0:o.connectors)?(r=(E=o==null?void 0:o.connectors)!=null?E:[],n[2]=o==null?void 0:o.connectors,n[3]=r):r=n[3];const d=Io(r);let c;n[4]!==o?(c=vn(o),n[4]=o,n[5]=c):c=n[5];const u=c,{data:m,isLoading:p,refetch:f,error:y}=fe({queryKey:De(a==null?void 0:a.id),queryFn:async()=>{if(!a)throw new Error("No current account");return await Ot(a.id)},enabled:!!a}),g=Eo(),_=(T=a==null?void 0:a.isSelfServeBusiness())!=null?T:!1;let M;if(n[6]!==d||n[7]!==g||n[8]!==_||n[9]!==m){M=[...d.map(Go),...g];const P=new Map;M.forEach(j=>{var A;const O=new Set;for(const G of[j.primaryConnector,...j.relatedConnectors])O.add(G.type);for(const G of O)P.has(G)||P.set(G,[]),(A=P.get(G))==null||A.push(j)});const D=_?xe.filter(Fo):xe,b=new Map;D.forEach(j=>{b.set(j.type,j)}),m==null||m.forEach((j,O)=>{const A="".concat(To[O]||O,"_connector");let G;e:switch(O){case"sharepoint_admin":{G="sharepoint";break e}case"teams_admin":{G="teams";break e}default:G=O}const q=P.get(A),ee=b.get(G);q==null||q.forEach(Y=>{Y.knowledgeConfig.push({key:O,display:ee,availability:j.availability,connections:j.connections,limits:j.limits})})}),M.forEach(Uo),n[6]=d,n[7]=g,n[8]=_,n[9]=m,n[10]=M}else M=n[10];const k=M,w=i||p,C=(v=l!=null?l:y)!=null?v:null;let S;n[11]!==e||n[12]!==f?(S=async()=>{await Promise.all([We.refetch(e,{productSku:Q.ADMIN_SETTING,purpose:"workspace_settings",skipActions:!0,skipLogos:!0}),f()])},n[11]=e,n[12]=f,n[13]=S):S=n[13];const N=S;let I;return n[14]!==u||n[15]!==C||n[16]!==w||n[17]!==N||n[18]!==k?(I={apps:k,appTemplates:u,isLoading:w,refetch:N,error:C},n[14]=u,n[15]=C,n[16]=w,n[17]=N,n[18]=k,n[19]=I):I=n[19],I},At="file_upload_connector",Po=[{id:Ne.CONTEXT_CONNECTOR_GDRIVE,name:{id:"fileUploadConnector.gdrive.name",defaultMessage:"Google Drive",description:"Name of the Google Drive file upload connector"},description:{id:"fileUploadConnector.gdrive.description",defaultMessage:"Upload Google Drive files in messages sent to ChatGPT.",description:"Description of the Google Drive file upload connector"},service:"gdrive_file_upload"},{id:Ne.CONTEXT_CONNECTOR_O365_PERSONAL,name:{id:"fileUploadConnector.oneDrivePersonal.name",defaultMessage:"Microsoft OneDrive (personal)",description:"Name of the Microsoft OneDrive personal file upload connector"},description:{id:"fileUploadConnector.oneDrivePersonal.description",defaultMessage:"Upload personal OneDrive files in messages sent to ChatGPT.",description:"Description of the Microsoft OneDrive personal file upload connector"},service:"onedrive_file_upload"},{id:Ne.CONTEXT_CONNECTOR_O365_BUSINESS,name:{id:"fileUploadConnector.oneDriveBusiness.name",defaultMessage:"Microsoft OneDrive (work/school)",description:"Name of the Microsoft OneDrive work/school file upload connector"},description:{id:"fileUploadConnector.oneDriveBusiness.description",defaultMessage:"Upload SharePoint and OneDrive for Business files in messages sent to ChatGPT.",description:"Description of the Microsoft OneDrive work/school file upload connector"},service:"sharepoint_file_upload"}],Eo=()=>{"use forget";var r;const n=F.c(5),e=z(),a=L();let s;n[0]!==a?(s=(r=K(a))==null?void 0:r.getWorkspaceId(),n[0]=a,n[1]=s):s=n[1];const o=s,{data:i}=In(o);i==null||i.beta_settings;let l;return n[2]!==e||n[3]!==(i==null?void 0:i.beta_settings)?(l=Po.map(d=>({primaryConnector:{id:d.id,type:At,name:e.formatMessage(d.name),description:e.formatMessage(d.description),connector_type:"FIRST_PARTY_ECOSYSTEM",service:d.service,base_url:null,supported_auth:[],developer_type:"OAI",owners:[],access_list:[],actions:[],logo_url:null,conformance:{implements_retrievable:!1},status:i!=null&&i.beta_settings[d.id]?"ENABLED":"DISABLED_BY_ADMIN"},relatedConnectors:[],knowledgeConfig:[],rolesQuery:null,searchKeys:[e.formatMessage(d.name).toLowerCase(),e.formatMessage(d.description).toLowerCase()]})),n[2]=e,n[3]=i==null?void 0:i.beta_settings,n[4]=l):l=n[4],l},Do=new Set(["google_drive_oauth","google_drive_dwd","slack"]),ra=(n,e)=>{var a,s;return(a=K(e))!=null&&a.isSelfServeBusiness()?n.knowledgeConfig.length>0&&Do.has((s=n.knowledgeConfig[0])==null?void 0:s.key):!0},Oo=new Set(["deleting","deleted"]),ca=n=>n.knowledgeConfig.map(e=>H(R({},e),{connections:e.connections.filter(a=>!Oo.has(a.connection_status))})).filter(e=>e.connections.length>0),da=n=>{"use forget";const e=F.c(15),a=L();let s;e[0]!==a?(s=K(a),e[0]=a,e[1]=s):s=e[1];const o=s,i=n.connection_config.knowledge_connector_type==="slack"?"synced_channel":"synced_object";let l;e[2]!==n.connection_config.connection_config_id?(l=["kc-blocked-content",n.connection_config.connection_config_id],e[2]=n.connection_config.connection_config_id,e[3]=l):l=e[3];let r;e[4]!==o||e[5]!==n.connection_config.connection_config_id||e[6]!==i?(r=async f=>{var _,M,k;const{pageParam:y}=f;return o!=null&&o.isPersonalAccount()?await $.user_connection_list_item_scopes((_=n.connection_config.connection_config_id)!=null?_:"",i,y):await $.admin_connection_list_item_scopes((M=o==null?void 0:o.id)!=null?M:"",(k=n.connection_config.connection_config_id)!=null?k:"",i,y)},e[4]=o,e[5]=n.connection_config.connection_config_id,e[6]=i,e[7]=r):r=e[7];const d=!!o;let c;e[8]!==l||e[9]!==r||e[10]!==d?(c={queryKey:l,queryFn:r,enabled:d,initialPageParam:null,getNextPageParam:$o},e[8]=l,e[9]=r,e[10]=d,e[11]=c):c=e[11];const u=Dn(c);let m,p;return e[12]!==u?(m=()=>{u.hasNextPage&&!u.isFetchingNextPage&&u.fetchNextPage()},p=[u,u.hasNextPage,u.isFetchingNextPage],e[12]=u,e[13]=m,e[14]=p):(m=e[13],p=e[14]),x.useEffect(m,p),u},ua=n=>{"use forget";const e=F.c(3),a=_e();let s;return e[0]!==n.connection_config.connection_config_id||e[1]!==a?(s=()=>a.invalidateQueries({queryKey:["kc-blocked-content",n.connection_config.connection_config_id]}),e[0]=n.connection_config.connection_config_id,e[1]=a,e[2]=s):s=e[2],s};function ma(n){"use forget";var p;const e=F.c(20),a=L();let s,o,i,l,r;if(e[0]!==a||e[1]!==n){s=K(a);let f;e[7]!==n?(f=On(n),e[7]=n,e[8]=f):f=e[8],o=f,r=fe,i="workspace-analytics-project-overview",l=(p=s==null?void 0:s.getWorkspaceId())!=null?p:"",e[0]=a,e[1]=n,e[2]=s,e[3]=o,e[4]=i,e[5]=l,e[6]=r}else s=e[2],o=e[3],i=e[4],l=e[5],r=e[6];let d;e[9]!==o||e[10]!==i||e[11]!==l?(d=[i,l,o],e[9]=o,e[10]=i,e[11]=l,e[12]=d):d=e[12];let c;e[13]!==s||e[14]!==o?(c=async()=>{var y,g;return(g=(await En.safeGet("/accounts/{account_id}/analytics/connector_overview",{parameters:{path:{account_id:(y=s==null?void 0:s.getWorkspaceId())!=null?y:""},query:{start_date:o}}})).daily_connector_messages_data)==null?void 0:g.reduce(Ao,new Map)},e[13]=s,e[14]=o,e[15]=c):c=e[15];const u=!!s;let m;return e[16]!==d||e[17]!==c||e[18]!==u?(m={queryKey:d,queryFn:c,enabled:u},e[16]=d,e[17]=c,e[18]=u,e[19]=m):m=e[19],r(m)}function Ao(n,e){var a;return Object.entries((a=e.messages_by_connector)!=null?a:{}).forEach(s=>{var l;const[o,i]=s;n.set(o,((l=n.get(o))!=null?l:0)+i)}),n}function Go(n){return H(R({},n),{knowledgeConfig:new Array})}function Fo(n){return!n.hideForTeamPlan}function Lo(n){return n.name}function Ro(n){return n.display_info.display_name}function Bo(n){return n.connections.map(Ro)}function zo(n){return n.toLowerCase()}function Uo(n){n.searchKeys=[n.primaryConnector.name,...n.relatedConnectors.map(Lo),...n.knowledgeConfig.flatMap(Bo)].filter(Boolean).map(zo)}function $o(n){var e;return(e=n.page_token)!=null?e:null}var Ho=(n=>(n.FILE_SEARCH="FILE_SEARCH",n.FILE_UPLOADS="FILE_UPLOADS",n.SYNC="SYNC",n.WRITES="WRITES",n.INTERACTIVE="INTERACTIVE",n))(Ho||{});const pa=["FILE_SEARCH","FILE_UPLOADS","SYNC","WRITES","INTERACTIVE"],fa=pt(n=>{var a,s;const e=new Set;return n.knowledgeConfig.length>0&&(e.add("SYNC"),e.add("FILE_SEARCH")),n.primaryConnector.type===At&&e.add("FILE_UPLOADS"),[n.primaryConnector,...n.relatedConnectors].some(o=>o.conformance.implements_retrievable)&&e.add("FILE_SEARCH"),((a=n.primaryConnector.labels)==null?void 0:a.interactive)==="true"&&e.add("INTERACTIVE"),((s=n.primaryConnector.labels)==null?void 0:s.writes)==="true"&&e.add("WRITES"),e}),ie=ft({fileSearchCapability:{id:"3y7k7+",defaultMessage:"File Search"},fileUploadCapability:{id:"kAd+KM",defaultMessage:"File Uploads"},syncCapability:{id:"Hlwc4F",defaultMessage:"Sync"},interactiveCapability:{id:"xj2Avf",defaultMessage:"Interactive"},writesCapability:{id:"lInLLY",defaultMessage:"Writes"}}),ga=(n,e)=>{switch(n){case"FILE_SEARCH":return e.formatMessage(ie.fileSearchCapability);case"FILE_UPLOADS":return e.formatMessage(ie.fileUploadCapability);case"SYNC":return e.formatMessage(ie.syncCapability);case"INTERACTIVE":return e.formatMessage(ie.interactiveCapability);case"WRITES":return e.formatMessage(ie.writesCapability);default:return n}};export{Ho as A,sa as C,At as F,No as I,xe as O,fo as S,fa as a,aa as b,ia as c,ua as d,Tt as e,ma as f,ke as g,la as h,da as i,Et as j,Ls as k,ga as l,ca as m,pa as n,ra as s,oa as u};
//# sourceMappingURL=hfqnbdxuzxapnljw.js.map
