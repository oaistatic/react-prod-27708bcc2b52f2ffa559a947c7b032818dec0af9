const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/uhs7hvx53wnv2crm.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css","assets/c5og9r81gzk0nhum.js","assets/eshaoi7yv554yrdo.js","assets/hdzr6yc0tkc12ulo.js","assets/i3rty9twuhjkv8ax.js","assets/euq7ybw4dhrsufo2.js","assets/l09h2qppleubii6l.js","assets/dec5ecst2000qx9i.js","assets/jed1ux7qibe55pmj.js","assets/h1em0bjkpkjv8ykw.js","assets/nfccle6oyncifphl.js","assets/hu1bt0oauegdhua6.js"])))=>i.map(i=>d[i]);
var En=Object.defineProperty,kn=Object.defineProperties;var Nn=Object.getOwnPropertyDescriptors;var Co=Object.getOwnPropertySymbols;var Rn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable;var vo=(a,e,t)=>e in a?En(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,Pe=(a,e)=>{for(var t in e||(e={}))Rn.call(e,t)&&vo(a,t,e[t]);if(Co)for(var t of Co(e))Fn.call(e,t)&&vo(a,t,e[t]);return a},xt=(a,e)=>kn(a,Nn(e));import{f as On,c as je,j as s,r as v,M as wt,e as os,i as io,n as $o,b as Ln,v as Hn,_ as js,m as Bo,a1 as Wn,E as Dn}from"./fg33krlcm0qyi6yw.js";import{c_ as jt,b as nt,d as O,V as mt,bH as Es,g_ as $n,bI as kt,fK as Bn,cQ as Go,gy as Gn,da as Un,H as Uo,l as De,b4 as Vn,b3 as Vo,gz as zn,mI as cs,aF as Zt,aG as es,T as qn,aK as ro,lw as zo,oT as Yn,xo as Kn,xp as Qn,bc as To,bd as _o,nR as Jn,lY as qo,fZ as wo,fX as _s,bs as Xn,jT as Zn,jS as ea,br as ta,bT as sa,bl as oa,S as na,P as as,iW as Ks,fV as Mo,fe as aa,lN as ia,aP as lo,R as is,A as Qs,o as yt,ag as ra,aU as la,qv as ca,xq as da,sP as ua,e as ds,qw as Yo,C as ma,a9 as $s,lU as Ko,ka as ha,ll as pa,en as Js,lg as ga,ok as fa,cU as ws,hd as vs,lk as Sa,eg as xa,xr as ya,dF as Mt,h as ba,e2 as Ca,fN as ts,kh as va,dQ as Ta,aX as Ot,bg as Ms,i9 as _a,dB as wa,uZ as Ao,td as Io,xj as Bs,ql as Ma,dZ as Aa,oh as Ia,xs as Pa,bv as Qo,bh as ks,ba as Po,k as rs,xt as ja,fO as Jo,m as Ea,I as co,n5 as ka,l3 as jo,f8 as Na,g$ as Ra,id as uo,d6 as mo,nm as Fa,vc as Oa,xu as La,oO as As,mV as ho,hg as Ns,xv as Ha,xw as Wa,dH as Da,f3 as Xs,bq as $a,dL as Ba,h2 as Ga,b$ as Ua,nI as Va,c2 as za,sJ as qa,xx as Ya,hF as Xo,i as Zo,eX as Zs,eh as en,hX as tn,lH as sn,d9 as on,dz as Gs,j7 as Ka,eW as nn,mW as an,oU as rn,bJ as ln,ns as cn,h0 as dn,es as Qa,aJ as Ja,hh as Xa,xy as Za,eG as ei,xz as ti,qx as si,qu as Eo,uE as oi,_ as ko,j as ni,dq as ai,lP as ii,g as ri,e_ as li,gb as ci}from"./mtk1qztvnb31pw5r.js";import{sK as un,sL as di,dG as ui,sM as mi,sN as hi,pe as pi,sO as po,sP as gi,jo as fi,sQ as Si,sR as xi,sS as yi,sT as eo,oE as We,q0 as bi,sU as Ts,sV as Ci,sW as vi,sX as te,sY as Ti,sZ as _i,s_ as wi,s$ as Mi,t0 as Ai,t1 as Ii,pL as Pi,t2 as No,dg as ji,t3 as go,t4 as Ei,t5 as ki,t6 as Ni,t7 as Ri,t8 as Fi,t9 as Oi,iK as Li,ta as Hi,tb as Wi,tc as Di,td as Ro,te as $i,tf as Bi,tg as Gi,th as Fo,ti as Ui,tj as mn,ag as ss,po as hn,tk as Vi,bB as Rs,pd as zi,g1 as Ft,tl as us,nJ as qi,tm as Yi,hl as Ki,tn as Is,to as Qi,tp as Ji,jr as pn,tq as Xi,tr as fo,dr as Zi,bq as Oo,ts as er,on as tr,tt as So,tu as sr,tv as or,af as to,eE as so,tw as gn,tx as Ps,ty as fn,tz as nr,o1 as Sn,mj as xn,mi as yn,tA as ar,tB as ir,tC as rr,tD as lr,tE as bn,tF as cr,tG as dr,tH as ur,kG as Lo,e0 as ls,tI as mr,bU as hr,pM as pr,eB as gr,bp as fr,bT as Sr,tJ as xr,tK as yr,tL as Cn,hO as vn,eJ as Tn,tM as oo,hP as br,tN as Cr,tO as vr,tP as Tr,tQ as _r,tR as wr,tS as Mr,tT as Ar,tU as Ir,pS as Pr,tV as jr,tW as Er,tX as kr,i5 as Nr,mg as no,e3 as _n,jb as wn,mU as Rr,tY as Fr,tZ as Or,t_ as Lr,t$ as Hr,u0 as Wr,u1 as Dr,u2 as $r,u3 as Br,u4 as Gr,mK as Ur,l5 as Vr,u5 as zr,iM as qr,u6 as Yr,u7 as Kr,u8 as Qr,u9 as Jr,ua as Xr,ub as Zr,dX as el,uc as tl,pa as sl,ud as ol,ue as nl,uf as al,bR as il,ug as rl,uh as ll,ok as cl,ui as dl,uj as ul,uk as ml,ul as hl,um as pl,e2 as gl,un as fl,cI as Sl,uo as xl,up as yl,uq as bl,ur as Cl,us as vl,ut as Tl}from"./k65njl5wlgspihfr.js";import{F as _l}from"./mbql81gwv5du9dtu.js";import{M as wl,S as Mn,u as Ml,p as Al,P as Il,a as Pl,b as jl,c as El,d as kl,D as Nl,T as Rl}from"./dg5jraediw4l39ow.js";import{P as An}from"./mivow98b53y1taf8.js";import{u as Fl}from"./k43gn7pl526u53kc.js";import{T as Ol}from"./i5jw6wfkpao2rx5t.js";import{a as Ll,T as Hl}from"./mce0eiesimdmeqmr.js";function Wl(a){"use forget";const e=je.c(20),{clientThreadId:t,headlineOption:i,starterPromptStyle:h,currentModelId:r,overrideMessage:u}=a,c=pi(),f=cs();let m;e[0]!==f?(m=po(f),e[0]=f,e[1]=m):m=e[1];const n=O(m.shouldShowAutocomplete$);let o;e[2]!==t?(o={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:t},e[2]=t,e[3]=o):o=e[3];const d=gi(o),x=c?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",p=n?"pointer-events-none opacity-0":"opacity-100";let g;e[4]!==x||e[5]!==p?(g=De("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] w-full shrink flex-col items-center justify-center px-4 transition-opacity sm:hidden",x,p),e[4]=x,e[5]=p,e[6]=g):g=e[6];let S;e[7]!==i||e[8]!==u||e[9]!==h?(S=i==="CHATGPT_LOGO"?s.jsx(Go,{className:"inline-block h-12 w-12"}):h!=="tiles"?s.jsx(In,{headlineOption:i,overrideMessage:u}):null,e[7]=i,e[8]=u,e[9]=h,e[10]=S):S=e[10];let l;e[11]!==t||e[12]!==r||e[13]!==d||e[14]!==h?(l=h==="chips"||!d?r&&s.jsx(wl,{currentModelId:r,clientThreadId:t}):h==="tiles"&&r&&t?s.jsx(Mn,{clientThreadId:t,currentModelId:r}):null,e[11]=t,e[12]=r,e[13]=d,e[14]=h,e[15]=l):l=e[15];let y;return e[16]!==g||e[17]!==S||e[18]!==l?(y=s.jsxs("div",{className:g,children:[S,l]}),e[16]=g,e[17]=S,e[18]=l,e[19]=y):y=e[19],y}function Dl({activeSystemHintType:a,isAnonModeEnabled:e,currentModelId:t}){if(a===kt.Research)return z.deepResearchPlaceholder;const h=$n(a);if(t==="n7jupd"||h)return z.whatCanIDo}function $l(a){"use forget";const e=je.c(26),{clientThreadId:t,currentModelId:i}=a,h=nt();let r;e[0]!==h?(r=jt(),e[0]=h,e[1]=r):r=e[1];const u=!r;let c;e[2]!==h?(c=()=>Bn(h),e[2]=h,e[3]=c):c=e[3];const f=O(c);let m;if(e[4]!==h||e[5]!==u){const M=mt(h,"4031588851"),A=mt(h,"3533083032",{disableExposureLog:!0});m=(u?A:M).get("headline_option","HELP_WITH"),e[4]=h,e[5]=u,e[6]=m}else m=e[6];const n=m;let o;e[7]!==t?(o={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:t},e[7]=t,e[8]=o):o=e[8];const d=un(o),x=di(),p=Es();let g;e[9]!==p||e[10]!==i||e[11]!==f?(g=Dl({activeSystemHintType:p,isAnonModeEnabled:f,currentModelId:i}),e[9]=p,e[10]=i,e[11]=f,e[12]=g):g=e[12];const S=g;let l;e[13]!==n||e[14]!==S||e[15]!==x?(l=s.jsx("div",{className:"mb-7 hidden text-center sm:block",children:n==="CHATGPT_LOGO"?s.jsx(Go,{className:"inline-block h-12 w-12"}):s.jsx(In,{headlineOption:n,overrideMessage:x||S})}),e[13]=n,e[14]=S,e[15]=x,e[16]=l):l=e[16];const y=d;let I;e[17]!==t||e[18]!==i||e[19]!==n||e[20]!==S||e[21]!==y?(I=s.jsx(Wl,{headlineOption:n,starterPromptStyle:y,clientThreadId:t,currentModelId:i,overrideMessage:S}),e[17]=t,e[18]=i,e[19]=n,e[20]=S,e[21]=y,e[22]=I):I=e[22];let T;return e[23]!==l||e[24]!==I?(T=s.jsxs("div",{className:"flex justify-center",children:[l,I]}),e[23]=l,e[24]=I,e[25]=T):T=e[25],T}function Bl(a){"use forget";var k,j;const e=je.c(15),{headlineOption:t,overrideMessage:i}=a,h=function(C){const{name:w}=C;return s.jsx(qn,{label:f.formatMessage(z.editNicknameTooltip),delayDuration:300,side:"top",children:s.jsx("button",{onClick:()=>{ro.setAutoHighlightNicknameInput(!0),l("#settings/".concat(Vo.Personalization))},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:Ul,onMouseLeave:Gl,children:w})})};let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=function(){const C=[],w=[];C.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),w.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...C);const D=w[Math.floor(Math.random()*w.length)],J=C[Math.floor(Math.random()*C.length)],q="".concat(J," | ").concat(D);Zt.setCookie(es.headlineMessage,q)},e[0]=r):r=e[0];const u=r,c=function(){var oe,E;const C=Zt.getCookie(es.GreetingName),w=Zt.getCookie(es.headlineMessage),D=w==null?void 0:w.split("|"),J=(oe=D==null?void 0:D[0])==null?void 0:oe.trim(),q=(E=D==null?void 0:D[1])==null?void 0:E.trim();return{cookieName:C,isReadyForPersonalized:!!C&&C.length<=o,headline:J,namedHeadline:q}},f=os(),m=nt(),n=mt(m,"1704793646"),o=n.get("name_char_limit",20),[d,x]=v.useState(c),p=fi(),g=n.get("greeting_web",!1),S=n.get("full_name_llm",!1),l=io();let y,I;e[1]!==m||e[2]!==S||e[3]!==p||e[4]!==g?(y=()=>zo(()=>{if(g&&p){const P=Yn(m).data,C=Kn(m).data;if(P&&C){const w=Qn(C,P,S);Zt.setCookie(es.GreetingName,w),To.count(_o.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}u()}else Zt.deleteCookie(es.GreetingName),Zt.deleteCookie(es.headlineMessage)}),I=[m,g,S,p],e[1]=m,e[2]=S,e[3]=p,e[4]=g,e[5]=y,e[6]=I):(y=e[5],I=e[6]),v.useEffect(y,I);let T;e[7]!==c||e[8]!==p||e[9]!==g?(T=()=>{const P=()=>{if(g&&p){const{cookieName:C,isReadyForPersonalized:w}=c();x(D=>xt(Pe({},D),{cookieName:C,isReadyForPersonalized:w}))}};return window.addEventListener("refreshGreeting",P),()=>window.removeEventListener("refreshGreeting",P)},e[7]=c,e[8]=p,e[9]=g,e[10]=T):T=e[10],v.useEffect(T);let M,A;e[11]!==p||e[12]!==g?(M=()=>{g&&p&&To.count(_o.MOONSHINE,"splashScreenV2.greeting_shown_web")},A=[g,p],e[11]=p,e[12]=g,e[13]=M,e[14]=A):(M=e[13],A=e[14]),v.useEffect(M,A);let b;return i?b=f.formatMessage(i):d.isReadyForPersonalized&&g?b=s.jsx(s.Fragment,{children:s.jsx(wt,xt(Pe({},Us[(k=d.namedHeadline)!=null?k:t].withName),{values:{name:s.jsx(h,{name:(j=d.cookieName)!=null?j:""},"name")}}))}):g&&d.headline?b=f.formatMessage(Us[d.headline].original):b=f.formatMessage(Us[t].original),b}function Gl(a){a.currentTarget.className="text-inherit"}function Ul(a){a.currentTarget.className="text-token-text-secondary"}function In(a){"use forget";var j;const e=je.c(27),{headlineOption:t,overrideMessage:i}=a,h=nt(),r=Gn();let u;e[0]!==r?(u={isTempChatVisible:r},e[0]=r,e[1]=u):u=e[1];const[c,f]=v.useState(u);let m,n;e[2]!==r?(m=()=>{f({isTempChatVisible:r})},n=[r],e[2]=r,e[3]=m,e[4]=n):(m=e[3],n=e[4]),Un(m,n);let o;e[5]!==h?(o=()=>zn(h),e[5]=h,e[6]=o):o=e[6];const d=O(o),{openSettings:x}=ui(),p=Es(),g=((j=Uo())==null?void 0:j.isHipaaCompliantWorkspace)&&p===kt.Agent;let S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S={viewTransitionName:"var(--vt-splash-screen-headline)"},e[7]=S):S=e[7];let l;e[8]!==t||e[9]!==d||e[10]!==r||e[11]!==x||e[12]!==i||e[13]!==c.isTempChatVisible?(l=d?s.jsxs("div",{className:De("text-page-header flex flex-col items-center gap-2",c.isTempChatVisible&&"invisible"),children:[s.jsx("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]",children:s.jsx(wt,Pe({},z.developerModeTitle))}),s.jsx("p",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-md text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:s.jsx(wt,xt(Pe({},z.developerModeSubtitle),{values:{settings:s.jsx(Vn,{onClick:()=>x(Vo.ConnectorsAdvanced),children:s.jsx(wt,Pe({},z.settingsLink))})}}))})]}):s.jsx("h1",{className:De("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap",c.isTempChatVisible&&"invisible"),"aria-hidden":r,children:s.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:s.jsx(Bl,{headlineOption:t,overrideMessage:i})})}),e[8]=t,e[9]=d,e[10]=r,e[11]=x,e[12]=i,e[13]=c.isTempChatVisible,e[14]=l):l=e[14];let y;e[15]!==g?(y=g?s.jsx(mi,{className:"mt-4 max-w-3xl",message:s.jsx(wt,Pe({},z.hipaaAgentWarning))}):null,e[15]=g,e[16]=y):y=e[16];const I=!c.isTempChatVisible&&"hidden";let T;e[17]!==I?(T=De("bottom-0",I),e[17]=I,e[18]=T):T=e[18];const M=!r;let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(hi,{}),e[19]=A):A=e[19];let b;e[20]!==M||e[21]!==T?(b=s.jsx("div",{className:T,"aria-hidden":M,children:A}),e[20]=M,e[21]=T,e[22]=b):b=e[22];let k;return e[23]!==b||e[24]!==l||e[25]!==y?(k=s.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:s.jsx("div",{children:s.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:S,children:[l,y,b]})})}),e[23]=b,e[24]=l,e[25]=y,e[26]=k):k=e[26],k}const z=On({developerModeTitle:{id:"SplashScreenV2.developerModeTitle",defaultMessage:"Developer mode"},developerModeSubtitle:{id:"SplashScreenV2.developerModeSubtitle",defaultMessage:"Memory is not used for this chat. {settings}"},settingsLink:{id:"SplashScreenV2.settingsLink",defaultMessage:"Settings"},hipaaAgentWarning:{id:"SplashScreenV2.hipaaAgentWarning",defaultMessage:"Do not enter Protected Health Information (PHI) into Agent."},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What’s on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What’s on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),Us={HELP_WITH:{original:z.whatCanIHelpWith,withName:z.whatCanIHelpWithWithName},WHERE_TO_START:{original:z.whereShouldWeStart,withName:z.whereShouldWeStartWithName},ASK_CHATGPT:{original:z.askChatgptAnything,withName:z.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:z.howCanIHelp,withName:z.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:z.goodToSeeYouWithName,withName:z.goodToSeeYouWithName},DIVE_IN:{original:z.diveInWithName,withName:z.diveInWithName},READY_WHEN_YOU_ARE:{original:z.readyWhenYouAre,withName:z.readyWhenYouAre},ON_YOUR_MIND:{original:z.onYourMind,withName:z.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:z.whatAreYouWorkingOn,withName:z.whatAreYouWorkingOn},AGENDA_TODAY:{original:z.agendaToday,withName:z.agendaToday},SHOULD_WE_BEGIN:{original:z.shouldWeBegin,withName:z.shouldWeBegin},WHAT_CAN_I_DO:{original:z.whatCanIDo,withName:z.whatCanIDo}},Vl=7,zl=5,ql=3600*1e3,Yl=async({text:a,numCompletions:e,isUnauthenticated:t,isThreadUsingSearchMode:i=!1,autocompleteMode:h,activeSystemHintType:r})=>{try{return(t?await is.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:a,num_completions:e,in_search_mode:i,system_hint:r!=null?r:void 0},authOption:Qs.Anonymous}):await is.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:a,num_completions:e,in_search_mode:i,system_hint:r!=null?r:void 0}})).completions.map(c=>({id:Hn(),type:We.Autocomplete,title:c.slice(0,a.length),body:c.slice(a.length),oneliner:c,prompt:c,source:h}))}catch(u){return[]}},ao=(a,e=!1)=>mt(a,jt()?"4093727931":"312855442",{disableExposureLog:!e}),Kl=({clientThreadId:a,composerController:e,isGizmoThread:t,isNewThread:i,isProjectThread:h})=>{const[r,u]=$o(),c=r.get("forceShowNuxCASuggestion")==="true",f=nt(),m=!jt(),n=Es(),{autocompletions$:o,personalizedAutocompletePool$:d}=po(e),x=Si(),p=3,g=n===kt.Search,{bingTrendingSuggestions:S,chatgptTrendingSuggestions:l,imageGenTrendingSuggestions:y,fetchBingTrendingSuggestions:I,fetchChatgptTrendingSuggestions:T}=Jl(),M=v.useRef({bing:0,chatgpt:{time:0,imageGen:!1}}),A=v.useRef(!1),[b,k]=v.useState(!1),j=Jn(H=>H.files),P=j.length>0,C=v.useMemo(()=>j.some(H=>{var F,R,xe,we;return((we=(xe=(F=H.fileSpec)==null?void 0:F.mimeType)!=null?xe:(R=H.file)==null?void 0:R.type)!=null?we:"").toLowerCase().startsWith("image/")}),[j]),w=xi(),D=O(()=>qo(e)),J=i&&!t&&!h&&w()&&mt(f,"4031588851",{disableExposureLog:!0}).get("personalized_prompts_enabled",!1),{data:q}=Ln(xt(Pe({},yi(eo*3,null)),{enabled:J})),oe=v.useMemo(()=>{var F;return((F=q==null?void 0:q.items)!=null?F:[]).filter(R=>R.category==="personalized").map(R=>({type:We.Starter,id:R.id,title:R.title,body:R.description,prompt:R.prompt,oneliner:R.oneliner,category:R.category,theme:R.theme,emoji:R.emoji}))},[q]),E=v.useMemo(()=>bi(oe),[oe]);v.useEffect(()=>{d.set(E)},[E,d]),v.useEffect(()=>wo(_s(e).dom,{click:()=>k(!0)}),[e]);const L=v.useCallback(H=>{const B=Ts(e);return B&&Vs(H).startsWith(B.toLocaleLowerCase())},[e]),ie=v.useCallback(H=>{const B=Ts(e),F=H.title+H.body;return L(H)?xt(Pe({},H),{title:B,body:F.slice(B.length)}):xt(Pe({},H),{title:F,body:""})},[e,L]),_=v.useCallback((H=!1)=>{o.set(B=>!B.some(L)&&B.length>0?[]:H?B:B.map(ie))},[L,ie,o]),N=os(),K=Ci(),{data:Z}=vi(4,K),ue=v.useMemo(()=>({[te.Canvas]:[{type:We.Starter,title:N.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:N.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:te.Canvas},{type:We.Starter,title:N.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:N.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:te.Canvas},{type:We.Starter,title:N.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:N.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:te.Canvas},{type:We.Starter,title:N.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:N.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:te.Canvas}],[te.Image]:[{type:We.Starter,title:N.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:N.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:te.Image},{type:We.Starter,title:N.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:N.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:te.Image},{type:We.Starter,title:N.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:N.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:te.Image},{type:We.Starter,title:N.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:N.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:te.Image}],[te.ContextualAnswers]:[{type:We.Starter,title:N.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:N.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:s.jsx(Xn,{className:"h-full w-full"}),body:"",theme:te.ContextualAnswers},{type:We.Starter,title:N.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:N.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:s.jsx(Zn,{className:"h-full w-full"}),body:"",theme:te.ContextualAnswers},{type:We.Starter,title:N.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:N.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:s.jsx(ea,{className:"h-full w-full"}),body:"",theme:te.ContextualAnswers},{type:We.Starter,title:N.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:N.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:s.jsx(ta,{className:"h-full w-full"}),body:"",theme:te.ContextualAnswers}]}),[N]),ge=Uo(),be=sa().connectorLinks.size>0,Q=O(()=>oa(f)),U=!Q,{prompts:ne,isLoading:ee}=Ti(),re=Q&&Q.length>0&&!be,G=jt(),Ce=re?mt(f,"1704943789").get("onboarding_state","control")==="suggested_prompts":!1,$=v.useMemo(()=>new _i({localStorageKey:na.CARecommendedPromptsUpsell,schedule:{intervalMs:1440*60*1e3,maxShowsPerInterval:3},termination:{maxShows:9}}),[]);v.useEffect(()=>{if((!re||!Ce||n!=null||!$.shouldShow())&&!c||U||ee||ge==null)return;const H=[...ne];o.set(B=>B.length>0?B:(A.current||($.recordShown(),as.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown","chatgpt_contextual_answers_recommended_prompt_shown",{prompts:H.map(F=>{var R;return(R=F.data)==null?void 0:R.id}).join(","),shown_times:$.getShownTimes().toString()}),A.current=!0),H))},[ne,U,ee,re,Ce,n,$,c,ge,o]);const Ne=ao(f,!1),ve=ao(f,!0),Re=wi(f,!0),Ve=Ml();v.useEffect(()=>Ks(()=>Mo(e),H=>{const B=()=>{o.set(F=>F.filter(R=>R.theme!==te.Search&&R.theme!==te.ChatGPTTrending&&R.theme!==te.ImageGenTrending&&R.theme!==te.Image&&R.theme!==te.Slurm&&R.theme!==te.Tatertot&&R.theme!==te.ContextualAnswersNUX&&R.theme!==te.Glaux))};if(H&&i&&!t&&!h||c)if(g)o.set(S.length>0?S:[]),M.current.bing===0&&(M.current.bing=Date.now(),I());else if(!n&&(D||b)&&w()&&Re.get("homepage_prompt_style","chips")==="autocomplete"){if(Re.get("personalized_prompts_enabled",!1)&&oe.length>0){const F=E.slice(0,eo).map(R=>Mi(R,e,f,x)).filter(Boolean);o.set(F)}else if(b&&!J){const F=Al(Ve,o(),4,3);o.set(F.map(R=>xt(Pe({},R),{body:""})))}}else if(!n&&Ne.get("enable_data",!1)){o.set(()=>b&&C&&y.length>0&&ve.get("enable_image_gen_trending",!1)?y:b&&!C&&l.length>0&&ve.get("enable_chatgpt_trending",!1)?l:[]);const F=Date.now(),R=M.current.chatgpt;(R.time===0||F-R.time>ql||R.imageGen!==C)&&(M.current.chatgpt={time:F,imageGen:C},T(C))}else if(K&&Z&&Z.length>0)o.set(Z);else if(n===kt.PictureV2){const F=Ai(N);o.set(F)}else if(n===kt.Tatertot)o.set(Ii(N,G));else if(n===kt.Slurm)mt(f,"1704943789").get("post_connection_connector_button",!1)&&ne.length>0&&!ee&&o.set(ne);else{if(o().length>0&&o()[0].theme===te.ContextualAnswersNUX)return;if(o().length===0)return;B()}else B()},{fireImmediately:!0}),[e,I,T,Ne,ve,g,o,S,l,y,n,b,N,a,i,t,h,ue,r,u,c,P,C,G,Ve,oe,Re,ne,ee,f,w,D,ge,J,Z,K,x,E]),v.useEffect(()=>zo(()=>{if(Mo(e)){const H=o().filter(B=>B.type!==We.Autocomplete);H.length>0&&Pi(H,a)}}),[e,o,a]);const me=Zl(g),le=mt(f,"4031588851"),fe=le.get("autocomplete_min_char",4),$e=le.get("autocomplete_fetch_interval",200),ze=v.useRef(null),qe=v.useCallback(aa(async H=>{if(!Ql(e,fe)){o.set([]);return}const B=Ts(e);if(!(ze.current&&ze.current.length>fe&&B.startsWith(ze.current)))try{const F=(await Yl({text:B,numCompletions:H,isUnauthenticated:m,isThreadUsingSearchMode:g,autocompleteMode:me,activeSystemHintType:n})).filter(L).map(ie);o.set(R=>{const xe=R.filter(L),we=F.filter(Ze=>{const Fe=Vs(Ze);return!xe.some(W=>{const Oe=Vs(W);if(Fe===Oe)return!0;const Qe=new RegExp("[\\p{P}\\p{S}]$","u"),bt=Fe.replace(Qe,""),Me=Oe.replace(Qe,"");return bt===Oe||Fe===Me||bt===Me})}).slice(0,p-xe.length);return[...xe,...we]})}catch(F){}},me==="BING"?150:$e),[e,me,ie,$e,n]),Se=v.useCallback(()=>{_();const H=p-o().filter(L).length;H>0&&qe(H)},[qe,_,o,L]),Be=v.useMemo(()=>me==="HARDCODED"?_:Se,[me,Se,_]),ae=v.useCallback(()=>{Be()},[Be]),Ye=v.useCallback(()=>{_(!0),Ts(e).indexOf("\n")>0&&o.set([])},[e,o,_]);v.useEffect(()=>wo(_s(e).dom,{input:ae}),[e,ae]),v.useEffect(()=>Ks(()=>ia(e),Ye),[e,Ye])};function Ql(a,e){var i;const t=_s(a).state.doc;return t.childCount===1&&((i=t.firstChild)==null?void 0:i.isTextblock)===!0&&t.content.size>=e&&t.content.size<=80}const Jl=()=>{const[a,e]=v.useState([]),[t,i]=v.useState([]),[h,r]=v.useState([]),u=lo(),c=nt(),f=ao(c,!1),m=f.get("num_mobile_results",zl),n=f.get("num_desktop_results",Vl),o=f.get("item_label","PROMPT"),d=v.useCallback(async()=>{const g=(await is.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:eo},authOption:Qs.SendIfAvailable})).suggestions.map((S,l)=>({type:We.Trending,title:Ho(S),body:"",icon:s.jsx(No,{className:"h-full w-full"}),prompt:Ho(S),id:"search-trending-".concat(l),theme:te.Search}));return e(g),g},[]),x=v.useCallback(async p=>{const S=((await is.safeGet("/trending/chatgpt",{parameters:{query:Pe({num_items:u?n:m},p?{tags:["image_gen"]}:{})},authOption:Qs.SendIfAvailable})).topics||[]).map((l,y)=>{var k,j,P,C,w;const I=(k=l.suggested_prompts)!=null?k:[],T=I.length>0?I[Math.floor(Math.random()*I.length)]:void 0,M=(j=T==null?void 0:T.short_prompt)!=null?j:"",A=(C=(P=l.short_title)!=null?P:l.title)!=null?C:"",b=(w=T==null?void 0:T.prompt)!=null?w:Array.isArray(l.prompts)&&l.prompts.length>0?l.prompts[Math.floor(Math.random()*l.prompts.length)]:A;return{type:We.Trending,title:o==="TITLE"?A:M,body:"",icon:s.jsx(No,{className:"h-full w-full"}),prompt:b,id:"chatgpt-trending-".concat(y),theme:p?te.ImageGenTrending:te.ChatGPTTrending}});return p?r(S):i(S),S},[u,m,n,o]);return{bingTrendingSuggestions:a,chatgptTrendingSuggestions:t,imageGenTrendingSuggestions:h,fetchBingTrendingSuggestions:d,fetchChatgptTrendingSuggestions:x}};function Ho(a){return a.split(" ").map(ji).join(" ")}const Vs=a=>"".concat(a.title).concat(a.body).toLocaleLowerCase();function Xl(){const a=nt(),t=mt(a,"4031588851",{disableExposureLog:!0}).get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),i=ra();return!!i&&i.created*1e3>=new Date(t).getTime()}function Zl(a){const e=nt(),t=!jt(),i=yt(e,"1468311859"),h=yt(e,"2053937752"),r=yt(e,"3664702598"),u=yt(e,"471233253"),c=mt(e,"4031588851"),f=mt(e,"3533083032"),m=Xl(),n=!t&&i||t&&h,o=(!t&&r||t&&u)&&m;let d="HARDCODED";{const x=t?f:c;if(a){const p=x.get("search_autocomplete_mode","");n&&p&&(d=p)}else o&&(d=x.get("autocomplete_mode","HARDCODED"))}return d}const ec=({clientThreadId:a,isGizmoThread:e,isNewThread:t,isProjectThread:i})=>{const h=cs();return Kl({clientThreadId:a,composerController:h,isGizmoThread:e,isNewThread:t,isProjectThread:i}),null};function tc(a){"use forget";const e=je.c(27),{children:t,className:i,conversation:h,inline:r,onDropAccepted:u}=a,c=os(),f=h!=null?h:la(v.use(ca));let m;e[0]!==f||e[1]!==u?(m=k=>{v.startTransition(()=>{const{tempIds:j}=go(ds())({files:k,type:"drag",conversation:f});u==null||u(j)})},e[0]=f,e[1]=u,e[2]=m):m=e[2];let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=da(ua),e[3]=n):n=e[3];let o;e[4]!==m?(o={disabled:!1,noClick:!0,noKeyboard:!0,onDropAccepted:m,multiple:!0,accept:n},e[4]=m,e[5]=o):o=e[5];const{getRootProps:d,getInputProps:x,isDragActive:p,isDragReject:g}=Fl(o);let S;e[6]!==d?(S=d(),e[6]=d,e[7]=S):S=e[7];const l=p?"visible":"hidden";let y;e[8]!==r||e[9]!==g?(y=s.jsx(Ei,{isRejected:g,inline:r}),e[8]=r,e[9]=g,e[10]=y):y=e[10];let I;e[11]!==l||e[12]!==y?(I=s.jsx(v.Activity,{mode:l,children:y}),e[11]=l,e[12]=y,e[13]=I):I=e[13];let T;e[14]!==c?(T=c.formatMessage({id:"imagesApp.dropTarget.fileInputLabel",defaultMessage:"Attach images"}),e[14]=c,e[15]=T):T=e[15];let M;e[16]!==x?(M=x(),e[16]=x,e[17]=M):M=e[17];let A;e[18]!==T||e[19]!==M?(A=s.jsx("input",Pe({name:"images-app-drop-container-input","arial-label":T},M)),e[18]=T,e[19]=M,e[20]=A):A=e[20];let b;return e[21]!==t||e[22]!==i||e[23]!==A||e[24]!==S||e[25]!==I?(b=s.jsxs("div",xt(Pe({className:i},S),{children:[I,A,t]})),e[21]=t,e[22]=i,e[23]=A,e[24]=S,e[25]=I,e[26]=b):b=e[26],b}function sc(a){return a.download_url}function oc(a){"use forget";var r;const e=je.c(2),{prompt:t}=a,i=(r=t.title)!=null?r:"";let h;return e[0]!==i?(h=s.jsx("div",{className:"text-heading-app box-trim-0.5 mb-3 tracking-tight text-balance",children:i}),e[0]=i,e[1]=h):h=e[1],h}function nc(a){"use forget";const e=je.c(2),{title:t}=a;let i;return e[0]!==t?(i=s.jsx("div",{className:"text-token-text-secondary text-body-regular box-trim-0.5",children:t}),e[0]=t,e[1]=i):i=e[1],i}function ac(a){"use forget";const e=je.c(18),{onChooseNewPhoto:t,onTakePhoto:i,onClose:h,showTakePhoto:r}=a,u=r===void 0?!0:r;let c;e[0]!==i||e[1]!==u?(c=u&&s.jsx($s,{color:"primary",size:"large",fullWidth:!0,className:"rounded-full",onClick:i,children:s.jsx(wt,{id:"53bkCD",defaultMessage:"Take a photo"})}),e[0]=i,e[1]=u,e[2]=c):c=e[2];const f=u?"secondary":"primary";let m;e[3]!==t?(m=()=>t==null?void 0:t(),e[3]=t,e[4]=m):m=e[4];let n;e[5]!==u?(n=u?s.jsx(wt,{id:"eFyfxp",defaultMessage:"Upload a photo"}):s.jsx(wt,{id:"RNN2hq",defaultMessage:"Choose a new photo"}),e[5]=u,e[6]=n):n=e[6];let o;e[7]!==f||e[8]!==m||e[9]!==n?(o=s.jsx($s,{color:f,size:"large",fullWidth:!0,className:"rounded-full",onClick:m,children:n}),e[7]=f,e[8]=m,e[9]=n,e[10]=o):o=e[10];let d;e[11]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx(wt,{id:"pUi2k3",defaultMessage:"Cancel"}),e[11]=d):d=e[11];let x;e[12]!==h?(x=s.jsx($s,{type:"button",color:"ghost",size:"large",className:"text-token-text-secondary text-sm font-semibold underline decoration-solid underline-offset-2",onClick:h,children:d}),e[12]=h,e[13]=x):x=e[13];let p;return e[14]!==c||e[15]!==o||e[16]!==x?(p=s.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[c,o,x]}),e[14]=c,e[15]=o,e[16]=x,e[17]=p):p=e[17],p}function ic(a){"use forget";const e=je.c(5),{recents:t,onSelectRecent:i}=a;let h;e[0]!==i||e[1]!==t?(h=t.length>0&&s.jsxs("section",{className:"mt-5 flex flex-col gap-3",children:[s.jsx("h3",{className:"text-token-text-tertiary text-body-regular text-trim font-medium",children:s.jsx(wt,{id:"ZT3BhG",defaultMessage:"Recents"})}),s.jsx("div",{className:"flex w-full justify-between gap-2 max-sm:[&>*:nth-child(4)]:hidden",children:t.map(u=>s.jsx("button",{type:"button",onClick:()=>i==null?void 0:i(u),className:De("corner-superellipse/1.1 rounded-xl ring-offset-2 transition outline-none","focus-visible:ring-token-focus focus-visible:ring","h-[72px] w-[72px] overflow-hidden","ease-spring-elegant motion-safe:transition-[scale,filter] motion-safe:hover:brightness-120 motion-safe:active:scale-98"),children:s.jsx("img",{src:sc(u),alt:"",className:"h-full w-full object-cover",loading:"lazy"})},u.file_id))})]}),e[0]=i,e[1]=t,e[2]=h):h=e[2];let r;return e[3]!==h?(r=s.jsx(s.Fragment,{children:h}),e[3]=h,e[4]=r):r=e[4],r}function ns(a){"use forget";const e=je.c(30),{conversation:t,group:i,onClose:h,onSelectFiles:r,onSelectRecent:u,onChooseNewPhoto:c,onTakePhoto:f,prompt:m,recents:n}=a;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=ds(),e[0]=o):o=e[0];const d=o;let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x=()=>yt(d,"416156854")&&Ni(d),e[1]=x):x=e[1];const p=O(x);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{var D,J;return(J=(D=Ri(d).data)==null?void 0:D.slice(0,4))!=null?J:[]},e[2]=g):g=e[2];const S=O(g);let l,y;e[3]!==t||e[4]!==r?(l=()=>Fi({conversation:t,onFilesUploaded:r,isFocusTarget:lc}),y=[t,r],e[3]=t,e[4]=r,e[5]=l,e[6]=y):(l=e[5],y=e[6]),v.useEffect(l,y);const I=n!=null?n:S;let T;e[7]===Symbol.for("react.memo_cache_sentinel")?(T=ki(d),e[7]=T):T=e[7];const M=T,A=h!=null?h:rc;let b;e[8]!==m?(b=s.jsx(oc,{prompt:m}),e[8]=m,e[9]=b):b=e[9];let k;e[10]!==i.title?(k=s.jsx(nc,{title:i.title}),e[10]=i.title,e[11]=k):k=e[11];let j;e[12]!==u||e[13]!==I?(j=s.jsx(ic,{recents:I,onSelectRecent:u}),e[12]=u,e[13]=I,e[14]=j):j=e[14];let P;e[15]!==p||e[16]!==c||e[17]!==h||e[18]!==f?(P=s.jsx(ac,{onChooseNewPhoto:c,onTakePhoto:f,onClose:h,showTakePhoto:p}),e[15]=p,e[16]=c,e[17]=h,e[18]=f,e[19]=P):P=e[19];let C;e[20]!==t||e[21]!==r||e[22]!==j||e[23]!==P?(C=s.jsx(Yo,{store:M,children:s.jsxs(tc,{inline:!0,conversation:t,onDropAccepted:r,children:[j,P]})}),e[20]=t,e[21]=r,e[22]=j,e[23]=P,e[24]=C):C=e[24];let w;return e[25]!==C||e[26]!==A||e[27]!==b||e[28]!==k?(w=s.jsx(ma,{testId:"modal-style-recents",isOpen:!0,onClose:A,title:b,description:k,headerClassName:"p-0! min-h-0!",textCenter:!0,className:"@container/style-recents-modal p-10",modalActionsClassName:"w-full",size:"normal",children:C}),e[25]=C,e[26]=A,e[27]=b,e[28]=k,e[29]=w):w=e[29],w}function rc(){}function lc(a){return a!==document.body}function Pn(a){"use forget";const e=je.c(11),{conversation:t}=a,i=cs(),h=Ko(),[r]=v.useState(cc);let u;e[0]!==t||e[1]!==r?(u=s.jsx(Oi,{onUploadFiles:m=>{const{files:n,type:o}=m,d=ds();t&&go(d)({files:n,type:o,conversation:t,filePickerStore:r})}}),e[0]=t,e[1]=r,e[2]=u):u=e[2];let c;e[3]!==i||e[4]!==h||e[5]!==t?(c=s.jsx(uc,{conversation:t,composerController:i,composerFilePickerStore:h}),e[3]=i,e[4]=h,e[5]=t,e[6]=c):c=e[6];let f;return e[7]!==r||e[8]!==u||e[9]!==c?(f=s.jsxs(Yo,{store:r,children:[u,c]}),e[7]=r,e[8]=u,e[9]=c,e[10]=f):f=e[10],f}function cc(){return ha(dc)}function dc(){return pa}function uc(a){"use forget";const e=je.c(21),{conversation:t,composerController:i,composerFilePickerStore:h}=a;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=ds(),e[0]=r):r=e[0];const u=r,c=Ko();let f;e[1]===Symbol.for("react.memo_cache_sentinel")?(f=()=>Ro(u),e[1]=f):f=e[1];const{items:m}=O(f),n=Li.useStore();let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=Hi(u),e[2]=o):o=e[2];const d=o;let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=Wi(u),e[3]=x):x=e[3];const p=x;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=Di(u),e[4]=g):g=e[4];const S=g;let l;e[5]!==t||e[6]!==c?(l=b=>{go(u)({files:[b],type:"camera",conversation:t,filePickerStore:c})},e[5]=t,e[6]=c,e[7]=l):l=e[7];const y=l;let I,T;e[8]!==t||e[9]!==c||e[10]!==n?(I=()=>Ks(()=>$i(t)(),k=>S({conversation:t,tempIds:k,filePickerStore:c,persistedFileStore:n}),{fireImmediately:!0}),T=[t,S,n,c],e[8]=t,e[9]=c,e[10]=n,e[11]=I,e[12]=T):(I=e[11],T=e[12]),v.useEffect(I,T);let M;e[13]!==i||e[14]!==h||e[15]!==t||e[16]!==y?(M=b=>{const k=Js(()=>Ro(u).itemToGroup);if(ga.getFilesCount(h.getState())>0){const P=Bi(b);Gi(i).setImageStyle$({ctx:u,style:P});const C=fa(i);C.current&&C.current.requestSubmit();return}Fo.set(t,{promptItem:b,group:k[b.id]}),ws(u,ns,{conversation:t,prompt:b,group:k[b.id],onClose:()=>{vs(u,ns)},onSelectRecent:P=>{const C=Sa(P.file_id);C&&(p({conversation:t,prompt:b.prompt_text,images:[{asset_pointer:C,width:1,height:1}]}),vs(u,ns))},onChooseNewPhoto:()=>{Js(()=>d({source:"photos"})),vs(u,ns)},onTakePhoto:()=>{Fo.set(t,{promptItem:b,group:k[b.id]}),vs(u,ns),ws(u,Ui,{onPhotoSave:y})}})},e[13]=i,e[14]=h,e[15]=t,e[16]=y,e[17]=M):M=e[17];let A;return e[18]!==m||e[19]!==M?(A=s.jsx(mn,{items:m,onSelectPromptItem:M,onEditPhoto:mc,hideControls:!1}),e[18]=m,e[19]=M,e[20]=A):A=e[20],A}function mc(){const a=document.getElementById("upload-photos");a&&a.click()}const jn=a=>{var e,t;return(t=(e=Mt.getBranch(a))==null?void 0:e.findLast(({message:i})=>i.author.role===Ca.Assistant&&i.recipient==="all"))==null?void 0:t.message},zs=xa(a=>{const e=Js(()=>ya(a)),t=e?jn(e):null;return ba(new Set(t?[t.id]:[]))}),hc=a=>{"use forget";const e=je.c(37),{conversation:t,zIndex:i,onClick:h,onReveal:r}=a,u=os();let c;e[0]!==t?(c=()=>zs(t),e[0]=t,e[1]=c):c=e[1];const f=O(c),[m,n]=ts(t.id,pc),o=va(n);let d;e[2]!==m?(d=m&&!!Ta(m),e[2]=m,e[3]=d):d=e[3];const x=d,p=m==null?void 0:m.id;let g;e[4]!==f||e[5]!==p?(g=p&&f.has(p),e[4]=f,e[5]=p,e[6]=g):g=e[6];const S=g;let l;e[7]!==t||e[8]!==p?(l=()=>{p&&zs.set(t,new Set(zs(t).add(p)))},e[7]=t,e[8]=p,e[9]=l):l=e[9];const y=Ot(l);let I;e[10]!==h||e[11]!==y?(I=()=>{y(),h()},e[10]=h,e[11]=y,e[12]=I):I=e[12];const T=Ot(I),M=Ot(r);let A,b;e[13]!==S||e[14]!==x||e[15]!==M?(A=()=>{x&&!S&&M()},b=[x,S,M],e[13]=S,e[14]=x,e[15]=M,e[16]=A,e[17]=b):(A=e[16],b=e[17]),v.useEffect(A,b);let k,j;e[18]!==S||e[19]!==o||e[20]!==x||e[21]!==y?(k=()=>{if(x&&!S&&!o){const D=setTimeout(()=>y(),5e3);return()=>{clearTimeout(D),y()}}},j=[x,S,o,y],e[18]=S,e[19]=o,e[20]=x,e[21]=y,e[22]=k,e[23]=j):(k=e[22],j=e[23]),v.useEffect(k,j);let P,C;e[24]!==y?(P=()=>()=>y(),C=[y],e[24]=y,e[25]=P,e[26]=C):(P=e[25],C=e[26]),v.useEffect(P,C);let w;return e[27]!==t||e[28]!==T||e[29]!==S||e[30]!==u||e[31]!==o||e[32]!==x||e[33]!==m||e[34]!==y||e[35]!==i?(w=x&&!S&&s.jsx(ss,{className:"relative",style:{zIndex:i},children:s.jsxs(Ms.div,{className:De(Vi.main,"group bg-token-bg-primary/80 shadow-long pointer-events-auto absolute -top-2 mx-0 mb-4 h-32 w-full cursor-pointer overflow-hidden rounded-3xl px-5 py-3 backdrop-blur-2xl select-none"),initial:{opacity:0,translateY:"-50%"},animate:{opacity:1,translateY:"-100%"},exit:{opacity:0,scale:.925,filter:"blur(12px)"},transition:{duration:.6,type:"spring",bounce:.12},onClick:T,children:[s.jsx("button",{"aria-label":u.formatMessage({id:"rbCAqY",defaultMessage:"Dismiss"}),className:"dark:bg-token-bg-secondary dark:hover:bg-token-bg-tertiary text-token-text-primary absolute end-2.5 top-2.5 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-black/5 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-black/10",onClick:D=>{D.stopPropagation(),y()},type:"button",children:s.jsx(_a,{className:"icon icon-sm"})}),m&&s.jsx(hn,{maxHeight:128,renderExtent:"preview",surface:"tooltip",children:s.jsx(Ol,{message:m,conversation:t,isFeedbackEnabled:!1,isCompletionInProgress:o,hasActiveRequest:o,isUserTurn:!1,isFinalUserTurn:!1,turnIndex:0})})]})}),e[27]=t,e[28]=T,e[29]=S,e[30]=u,e[31]=o,e[32]=x,e[33]=m,e[34]=y,e[35]=i,e[36]=w):w=e[36],w};function pc(a){return[jn(a),Mt.getRequestId(a)]}const qs={duration:.4,type:"spring",bounce:.1},gc=50,Wo=.5,Ys=us["fullscreen-widget-composer-transition"],fc=us["fullscreen-popover-thread-opening-transition"],Do=us["fullscreen-popover-thread-closing-transition"],Sc=a=>{"use forget";const e=je.c(75),{clientThreadId:t,onRequestCompletion:i,composerController:h}=a,r=nt();let u;e[0]!==t||e[1]!==r?(u=wa(r,t),e[0]=t,e[1]=r,e[2]=u):u=e[2];const c=u,f=v.useRef(null),[m,n]=v.useState(!1),[o,d]=v.useState(!1);let x;e[3]!==r?(x=()=>Ki(r).height,e[3]=r,e[4]=x):x=e[4];const p=O(x);let g;e[5]!==c?(g=()=>Is(c).height$(),e[5]=c,e[6]=g):g=e[6];const S=O(g);let l;e[7]!==c?(l=()=>Is(c).marginBottom$(),e[7]=c,e[8]=l):l=e[8];const y=O(l);let I;e[9]!==c?(I=Rs(c),e[9]=c,e[10]=I):I=e[10];const T=I;let M;e[11]!==T?(M=()=>T.pinnedWidgetType$(),e[11]=T,e[12]=M):M=e[12];const A=O(M);let b;e[13]!==T?(b=()=>T.showLoadingBar$(),e[13]=T,e[14]=b):b=e[14];const k=O(b),j=p*Wo,P=p-gc-(y!=null?y:0),C=Ao(0),w=Ao(Wo);let D;e[15]!==C||e[16]!==w?(D=[w,C],e[15]=C,e[16]=w,e[17]=D):D=e[17];let J;e[18]!==P||e[19]!==j||e[20]!==p?(J=Ce=>{const[$,Ne]=Ce;return Math.min(Math.max($*p-Ne,j),P)},e[18]=P,e[19]=j,e[20]=p,e[21]=J):J=e[21];const q=Io(D,J),oe=zi(c.id);let E;e[22]!==T.showLoadingBar$?(E=()=>Ma(Aa,{requestCompletion:()=>{Ft({forceFlushSync:!0,className:[Ys,Do],update:()=>{n(!1),T.showLoadingBar$.set(!0)}})},completionFinished:()=>{Ft({forceFlushSync:!0,className:Ys,update:()=>{T.showLoadingBar$.set(!1)}})}}),e[22]=T.showLoadingBar$,e[23]=E):E=e[23];let L;e[24]!==T?(L=[T],e[24]=T,e[25]=L):L=e[25],v.useEffect(E,L);let ie;e[26]!==h?(ie=()=>{Ft({forceFlushSync:!0,className:fc,update:()=>n(!0)});try{_s(h).focus()}catch(Ce){requestAnimationFrame(()=>{var $;($=f.current)==null||$.focus()})}},e[26]=h,e[27]=ie):ie=e[27];const _=ie;let N;e[28]!==h||e[29]!==m?(N=()=>!m&&(Ia()&&qo(h)||Pa(h)),e[28]=h,e[29]=m,e[30]=N):N=e[30];const K=O(N);let Z;e[31]!==P||e[32]!==j?(Z=[j,P],e[31]=P,e[32]=j,e[33]=Z):Z=e[33];let ue;e[34]===Symbol.for("react.memo_cache_sentinel")?(ue=[0,1],e[34]=ue):ue=e[34];const ge=Io(q,Z,ue);let Y;e[35]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(Qi,{},"blur"),e[35]=Y):Y=e[35];let be;e[36]!==t||e[37]!==y||e[38]!==_||e[39]!==A||e[40]!==k?(be=k&&s.jsx(Ji,{clientThreadId:t,bottom:y!=null?y:0,onClick:_,pinnedWidgetType:A},"loading-bar"),e[36]=t,e[37]=y,e[38]=_,e[39]=A,e[40]=k,e[41]=be):be=e[41];let Q;e[42]!==ge||e[43]!==m?(Q=m&&s.jsx(Ms.div,{initial:{opacity:0},animate:{opacity:ge.get()},style:{opacity:ge},exit:{opacity:0},className:"bg-token-bg-primary/50 pointer-events-auto fixed inset-0 top-(--header-height) opacity-0 backdrop-blur-xs",onClick:()=>{Ft({forceFlushSync:!0,className:Do,update:()=>{d(!0),n(!1)}}).finished.then(()=>{d(!1)})}},"drag-overlay"),e[42]=ge,e[43]=m,e[44]=Q):Q=e[44];let U;e[45]!==c||e[46]!==_||e[47]!==m||e[48]!==T.showLoadingBar$?(U=!m&&s.jsx(hc,{zIndex:1,conversation:c,onClick:_,onReveal:()=>{Ft({forceFlushSync:!0,className:Ys,update:()=>{T.showLoadingBar$.set(!1)}})}},"last-message-banner"),e[45]=c,e[46]=_,e[47]=m,e[48]=T.showLoadingBar$,e[49]=U):U=e[49];let ne;e[50]!==Q||e[51]!==U?(ne=s.jsxs(Qo,{children:[Q,U]}),e[50]=Q,e[51]=U,e[52]=ne):ne=e[52];let ee;e[53]!==_||e[54]!==m||e[55]!==K?(ee=!m&&s.jsx(ss,{className:De("pointer-events-auto absolute start-0 end-0 top-0 z-[100] flex -translate-y-full justify-center pb-2 opacity-0 transition-opacity hover:opacity-100",K&&"opacity-100"),children:s.jsx("button",{onClick:_,className:"text-token-text-secondary border-token-border-default bg-token-bg-primary/50 relative z-30 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border bg-clip-padding backdrop-blur-md after:absolute after:-inset-2 after:content-['']",children:s.jsx(qi,{className:"icon-sm text-token-text-primary"})})},"open-button"),e[53]=_,e[54]=m,e[55]=K,e[56]=ee):ee=e[56];let re;e[57]!==q||e[58]!==S||e[59]!==c||e[60]!==C||e[61]!==oe||e[62]!==o||e[63]!==m||e[64]!==P||e[65]!==j||e[66]!==i||e[67]!==w||e[68]!==p?(re=(m||o)&&s.jsx("div",{tabIndex:-1,ref:f,className:De(o?"invisible":"[view-transition-name:fullscreen-popover-thread]","pointer-events-none absolute inset-x-0 bottom-0 mx-auto flex items-center justify-center rounded-3xl focus:ring-0 focus:outline-hidden focus-visible:ring-0 focus-visible:outline-hidden md:bottom-6"),role:"dialog","aria-modal":"true",onClick:bc,children:s.jsx(ss,{children:s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx(xc,{onDoubleClick:()=>{Bs(w,(q.get()===P?j:P)/p,qs)},onDragStart:()=>C.set(0),onDragEnd:Ce=>{const{velocity:$}=Ce,{y:Ne}=$,ve=yc(-Ne,j,P,q.get());Bs(w,(ve===P?P:j)/p,qs),Bs(C,0,qs)},onDrag:Ce=>{const{delta:$}=Ce,{y:Ne}=$;return C.set(C.get()+Ne)}}),s.jsx("div",{className:"bg-token-bg-primary shadow-long pointer-events-auto mx-0 flex overflow-hidden rounded-t-3xl backdrop-blur-2xl md:-mx-2! md:rounded-[34px]",children:s.jsx(Ms.div,{className:"relative flex w-full flex-col-reverse overflow-y-auto",style:{height:q,paddingBottom:S!=null?S:0,WebkitMaskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)",maskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)"},children:s.jsx("div",{onCopy:oe,className:"flex flex-col px-7 text-sm",children:s.jsx(Yi,{children:s.jsx(hn,{surface:"popover",children:s.jsx(Ll,{conversation:c,onRequestCompletion:i,disableScrollToMessage:!0,hideUserActions:!0,disableHorizontalPadding:!0})})})})})})]})})},"popover-thread"),e[57]=q,e[58]=S,e[59]=c,e[60]=C,e[61]=oe,e[62]=o,e[63]=m,e[64]=P,e[65]=j,e[66]=i,e[67]=w,e[68]=p,e[69]=re):re=e[69];let G;return e[70]!==be||e[71]!==ne||e[72]!==ee||e[73]!==re?(G=s.jsxs(s.Fragment,{children:[Y,be,ne,ee,re]}),e[70]=be,e[71]=ne,e[72]=ee,e[73]=re,e[74]=G):G=e[74],G},xc=a=>{"use forget";const e=je.c(17),{onDrag:t,onDragEnd:i,onDoubleClick:h,onDragStart:r,onPointerUp:u}=a;let c,f,m,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1},f={opacity:1},m={type:"tween",duration:.1},n={x:0,y:0,transform:"translateY(0px)"},e[0]=c,e[1]=f,e[2]=m,e[3]=n):(c=e[0],f=e[1],m=e[2],n=e[3]);let o;e[4]!==r?(o=()=>{r==null||r()},e[4]=r,e[5]=o):o=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d={left:0,right:0,top:0,bottom:0},e[6]=d):d=e[6];let x;e[7]!==t?(x=(S,l)=>{t==null||t(l)},e[7]=t,e[8]=x):x=e[8];let p;e[9]!==i?(p=(S,l)=>i==null?void 0:i(l),e[9]=i,e[10]=p):p=e[10];let g;return e[11]!==h||e[12]!==u||e[13]!==o||e[14]!==x||e[15]!==p?(g=s.jsx(Ms.div,{drag:"y",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute start-10 end-10 top-0 z-10 h-[4px] cursor-ns-resize rounded-b-full opacity-0 after:absolute after:inset-0 after:top-[-18px] after:h-[28px] after:bg-transparent after:content-['']",whileHover:c,whileDrag:f,transition:m,style:n,onPointerDown:o,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:d,onDrag:x,onPointerUp:u,onDragEnd:p,onDoubleClick:h}),e[11]=h,e[12]=u,e[13]=o,e[14]=x,e[15]=p,e[16]=g):g=e[16],g};function yc(a,e,t,i){if(!(e<=t))throw new Error("min must be <= max");const h=.25,r=8,u=24,c=1200,f=Math.abs(i-e)<=Math.abs(i-t)?e:t,m=i+a*h,n=Math.abs(m-e)<=Math.abs(m-t)?e:t;if(n===f)return f;const o=(f+n)/2,d=Math.sign(n-f)||1,x=o+d*r;if(!(d>0?m>=x:m<=x))return f;const g=Math.abs(a),S=Math.min(g/c,1),l=u*(1-S*S);return Math.abs(m-f)-Math.abs(m-n)<l?f:n}function bc(a){return a.stopPropagation()}const Cc=ks(()=>js(()=>import("./uhs7hvx53wnv2crm.js"),__vite__mapDeps([0,1,2,3,4,5])).then(a=>a.AgentConnectorsSafetyModal)),vc=a=>{"use forget";const e=je.c(139),{conversation:t,isNewThread:i,isGizmoThread:h,isProjectThread:r,currentModelId:u,onRequestCompletion:c,shouldUseUnifiedComposer:f,onlyAllowImageUploads:m,isWidgetFullScreen:n,layoutMode:o,shouldShowDeepResearchDesktopContent:d,pulseOnboardingEntrypoint:x,cocoonEntrypointResponse:p}=a,g=n===void 0?!1:n,S=d===void 0?!1:d,l=nt();let y;e[0]!==l?(y=()=>Lo(l),e[0]=l,e[1]=y):y=e[1];const I=O(y),{height$:T}=Is(t),M=Po(rs),A=cs(),b=Bo().pathname,k=b!=null?b:void 0;let j;e[2]!==k?(j=ja(k),e[2]=k,e[3]=j):j=e[3];const P=j,C=pn(t.id).isOdysseyMode,w=Jo(),D=lo(),J=Ea(),q=os();let oe;e[4]!==l?(oe=co(l),e[4]=l,e[5]=oe):oe=e[5];const E=oe;Xi(A);const L=Po(rs);let ie;e[6]!==l?(ie=ka(l),e[6]=l,e[7]=ie):ie=e[7];const _=ie,N=O(jo.sidebarUrlTrayOpen$),K=O(jo.context$),Z=Es();let ue;e[8]!==l||e[9]!==u?(ue=u!=null&&Na({id:u},l),e[8]=l,e[9]=u,e[10]=ue):ue=e[10];const ge=ue,Y=L&&_&&N,be=fo();let Q;e[11]!==l?(Q=mt(l,"1925940714"),e[11]=l,e[12]=Q):Q=e[12];const U=Q;let ne;e[13]!==l?(ne=()=>{if(Lo(l)===!0)return ls(l).selectedTaskReplyId$()},e[13]=l,e[14]=ne):ne=e[14];const ee=O(ne),{platformConnectors:re}=Ra(),G=Zi(Oo.hasSeenOdysseyConnectorsModal),Ce=ts(t.id,Mc);let $;e[15]!==t?($=()=>Ha(t),e[15]=t,e[16]=$):$=e[16];const Ne=O($),ve=uo(),Re=mo();let Ve;e[17]!==t?(Ve=()=>Rs(t).showLoadingBar$(),e[17]=t,e[18]=Ve):Ve=e[18];const me=O(Ve);let le;e[19]!==l||e[20]!==Ce||e[21]!==Ne||e[22]!==Re||e[23]!==ve||e[24]!==g||e[25]!==me?(le=(ve||Re)&&Ce||g&&me||!jt()&&Ne,e[19]=l,e[20]=Ce,e[21]=Ne,e[22]=Re,e[23]=ve,e[24]=g,e[25]=me,e[26]=le):le=e[26];const fe=le;let $e;e[27]!==Z||e[28]!==t.id||e[29]!==K||e[30]!==Y?($e=async()=>{if(!Y)return;const se=Z?[Z]:[];if(se.includes(kt.Agent))return;const ce=typeof performance<"u"?Ac:Ic,he=ce();try{const de=await Wa(K,mr,se,t.id),X=Math.round(ce()-he);if(de!=null){let He=1;Array.isArray(de)&&(He=de.length),as.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:X,count:He})}else as.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:X,failure_reason:"null"});return de}catch(de){const X=de,He=Math.round(ce()-he),ht=X instanceof Ya;as.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",Pe({duration_ms:He,failure_reason:ht?"timeout":"error"},X instanceof Error?{error_message:X.message}:X?{error_message:String(X)}:{}));return}},e[27]=Z,e[28]=t.id,e[29]=K,e[30]=Y,e[31]=$e):$e=e[31];let ze;e[32]!==U||e[33]!==Y?(ze=()=>Y||!U.get("completion_request_blocking_promise_optimization",!1),e[32]=U,e[33]=Y,e[34]=ze):ze=e[34],er($e,ze);const qe=Fa();let Se;if(e[35]!==(E==null?void 0:E.authUserId)||e[36]!==(E==null?void 0:E.id)||e[37]!==Z||e[38]!==G||e[39]!==_||e[40]!==t.id||e[41]!==l||e[42]!==K||e[43]!==ge||e[44]!==q||e[45]!==L||e[46]!==qe||e[47]!==C||e[48]!==c||e[49]!==N||e[50]!==re||e[51]!==Y||e[52]!==J){Se=async he=>{var Ct,ut,At,It,vt,pt,gt,ft;if(((Ct=Da(t.id))==null?void 0:Ct.isLoading)!==!1)return;const de=new Set(he.systemHints);ge&&de.add(kt.Glaux);const X=await hr(xt(Pe({},he),{systemHints:[...de]})),He=ce((At=(ut=X.promptMessage.metadata)==null?void 0:ut.attachments)!=null?At:[]);if(qe&&He){const{promptMessage:Xe,parentMessageId:Ee}=X;return pr.debug("Relaying message to voice participant"),gr({type:"RELAY",message:Xe,parentMessageId:Ee})}const ht=(vt=(It=X.completionMetadata)==null?void 0:It.systemHints)==null?void 0:vt.includes(Xs),dt=Array.from((pt=he.selectedSources)!=null?pt:[]).filter(Pc)[0];if(ht&&dt&&G.eligible){const Xe=(gt=$a[dt])!=null?gt:dt,Ee=re.get(Xe);if(Ee){ws(l,Cc,{connector:Ee,onConfirm:()=>{fr(l,Oo.hasSeenOdysseyConnectorsModal),c(X)},onTurnOffConnectors:()=>{Ba(t.id,_e=>{_e.selectedSources==null&&(_e.selectedSources=new Map),_e.selectedSources.set(Z,new Set(["web"])),_e.selectedMCPSources==null&&(_e.selectedMCPSources=new Map),_e.selectedMCPSources.set(Z,new Set),_e.mentionedSources=new Set,Ga({selectedSourcesMap:_e.selectedSources,selectedMCPSourcesMap:_e.selectedMCPSources,scope:{userId:E==null?void 0:E.authUserId,workspaceId:E==null?void 0:E.id}})})}});return}}if(L){const Xe=!!K,Ee=N===!0;_&&(!Xe||!Ee)&&Ua.error("Missing context chip on message send",{clientThreadId:t.id,hasSidebarContext:Xe,isContextChipOpen:Ee,contextEnabled:_,isBridgedDesktopSidebar:L,shouldCollectSidebarContext:Y}),(ft=Va())==null||ft.triggerProductEvent("messageSent")}He&&c(X)};let se;e[54]!==l||e[55]!==q||e[56]!==C||e[57]!==J?(se=he=>{let de=qa;const X=he.reduce(jc,0);C&&(de=za(l,"1504865540").get("max_file_size_mb",25));const He=X<=de*1024*1024;return He||J.danger(q.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:de})),He},e[54]=l,e[55]=q,e[56]=C,e[57]=J,e[58]=se):se=e[58];const ce=se;e[35]=E==null?void 0:E.authUserId,e[36]=E==null?void 0:E.id,e[37]=Z,e[38]=G,e[39]=_,e[40]=t.id,e[41]=l,e[42]=K,e[43]=ge,e[44]=q,e[45]=L,e[46]=qe,e[47]=C,e[48]=c,e[49]=N,e[50]=re,e[51]=Y,e[52]=J,e[53]=Se}else Se=e[53];let Be;e[59]!==c?(Be=se=>{as.logEvent("Continue Completion"),c(Sr(se))},e[59]=c,e[60]=Be):Be=e[60];const ae=Be,Ye=tr.useState(Ec);let H;e[61]!==t.id?(H={clientThreadId:t.id},e[61]=t.id,e[62]=H):H=e[62];const B=Oa(H);let F;e[63]!==t.id?(F={clientThreadId:t.id},e[63]=t.id,e[64]=F):F=e[64];const R=La(F),xe=So();let we;e[65]!==l||e[66]!==xe||e[67]!==i?(we=()=>Ps(l)&&xe.visible$()&&!As()&&i,e[65]=l,e[66]=xe,e[67]=i,e[68]=we):we=e[68];const Ze=O(we),Fe=O(kc);if(B){let se;return e[69]!==R?(se=s.jsx(xr,{safetyLimited:R}),e[69]=R,e[70]=se):se=e[70],se}const W=i&&!h,Oe=S?"70px":void 0;let Qe;e[71]!==Oe?(Qe={"--deep-research-composer-extra-height":Oe},e[71]=Oe,e[72]=Qe):Qe=e[72];const bt=Qe;let Me;e[73]!==t.id?(Me=s.jsx(sr,{clientThreadId:t.id}),e[73]=t.id,e[74]=Me):Me=e[74];const at=to,et=so({axis:"height",onChange:se=>{const{height:ce}=se;return T.set(ce)}}),Ae=w?"last-standard":"none",Ie=L?"none":"standard";let Ke;e[75]!==A||e[76]!==t.id||e[77]!==g||e[78]!==c?(Ke=g&&s.jsx(Sc,{clientThreadId:t.id,composerController:A,onRequestCompletion:c}),e[75]=A,e[76]=t.id,e[77]=g,e[78]=c,e[79]=Ke):Ke=e[79];const tt=M?"w-full max-w-full":"mb-4";let Le;e[80]!==tt?(Le=De(tt),e[80]=tt,e[81]=Le):Le=e[81];let Je;e[82]!==I||e[83]!==ee?(Je=I&&s.jsx(Qo,{mode:"popLayout",children:ee&&s.jsx(yr,{taskId:ee},ee)}),e[82]=I,e[83]=ee,e[84]=Je):Je=e[84];let Te;e[85]!==Fe?(Te=Fe&&s.jsx(Ns,{children:s.jsx("div",{className:"mb-4 sm:hidden",children:s.jsx(bn,{})})}),e[85]=Fe,e[86]=Te):Te=e[86];let Ge;e[87]!==p||e[88]!==t||e[89]!==u||e[90]!==ae||e[91]!==Se||e[92]!==i||e[93]!==r||e[94]!==Ye||e[95]!==o||e[96]!==m||e[97]!==x||e[98]!==fe||e[99]!==W?(Ge=Ye?s.jsx(or,{clientThreadId:t.id},t.id):fe?s.jsx("div",{className:"pointer-events-none h-14"}):s.jsx(Il,{conversation:t,currentModelId:u,isNewThread:i,isProjectThread:r,hideHeader:W,onRequestCompletion:Se,onContinueGenerating:ae,onlyAllowImageUploads:m,layoutMode:o,pulseOnboardingEntrypoint:x,cocoonEntrypointResponse:p}),e[87]=p,e[88]=t,e[89]=u,e[90]=ae,e[91]=Se,e[92]=i,e[93]=r,e[94]=Ye,e[95]=o,e[96]=m,e[97]=x,e[98]=fe,e[99]=W,e[100]=Ge):Ge=e[100];let it;e[101]!==bt||e[102]!==Le||e[103]!==Je||e[104]!==Te||e[105]!==Ge?(it=s.jsxs(ss,{className:Le,style:bt,children:[Je,Te,Ge]}),e[101]=bt,e[102]=Le,e[103]=Je,e[104]=Te,e[105]=Ge,e[106]=it):it=e[106];let Ue;e[107]!==at||e[108]!==et||e[109]!==Ae||e[110]!==Ie||e[111]!==Ke||e[112]!==it?(Ue=s.jsxs(at,{ref:et,verticalMargin:"none",verticalPadding:Ae,horizontalPadding:Ie,children:[Ke,it]}),e[107]=at,e[108]=et,e[109]=Ae,e[110]=Ie,e[111]=Ke,e[112]=it,e[113]=Ue):Ue=e[113];let ye;e[114]!==Me||e[115]!==Ue?(ye=s.jsxs(s.Fragment,{children:[Me,Ue]}),e[114]=Me,e[115]=Ue,e[116]=ye):ye=e[116];const rt=ye;let lt;e[117]!==t||e[118]!==M||e[119]!==W||e[120]!==Ze?(lt=W&&s.jsx("div",{className:De("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:s.jsx(to,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsx(ss,{className:De(M&&"w-full max-w-full"),children:s.jsx(Pl,{className:"block flex-1",suggestedContent:Ze?s.jsx(Pn,{conversation:t}):void 0})})})}),e[117]=t,e[118]=M,e[119]=W,e[120]=Ze,e[121]=lt):lt=e[121];const ct=lt;if(f){const se=!D&&ct;let ce;e[122]!==rt?(ce=s.jsx("div",{id:"thread-bottom",children:rt}),e[122]=rt,e[123]=ce):ce=e[123];let he;e[124]!==t||e[125]!==u||e[126]!==be||e[127]!==h||e[128]!==i||e[129]!==C||e[130]!==P||e[131]!==r||e[132]!==S?(he=i&&!h&&!P&&!C&&!be&&!r&&!S&&s.jsx(Tc,{conversation:t,clientThreadId:t.id,currentModelId:u}),e[124]=t,e[125]=u,e[126]=be,e[127]=h,e[128]=i,e[129]=C,e[130]=P,e[131]=r,e[132]=S,e[133]=he):he=e[133];const de=D&&ct;let X;return e[134]!==se||e[135]!==ce||e[136]!==he||e[137]!==de?(X=s.jsxs(s.Fragment,{children:[se,ce,he,de]}),e[134]=se,e[135]=ce,e[136]=he,e[137]=de,e[138]=X):X=e[138],X}return rt},Tc=({clientThreadId:a,currentModelId:e,conversation:t})=>{const i=nt(),h=cs(),r=So(),u=O(()=>Ps(i)&&r.visible$()&&As()),c=O(()=>po(h).shouldShowAutocomplete$()&&!r.visible$()),f=fn(),m=un({shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a}),n=jl();v.useEffect(()=>{Ps(i)&&mn.prefetch()},[i]);const{shouldShow:o}=El({clientThreadId:a,canShowBanner:!1}),{shouldShow:d}=nr({canShowBanner:!o}),x=O(()=>!o&&!d&&gn()),p=yt(i,"4087025484"),g=O(()=>{if(ho(i)||!Sn(i))return;const{data:l}=xn(i,{useCache:!p});if(l&&l.is_fresh)return p&&l.onboarding_status!==yn.FINISHED_WITH_FEED?void 0:l}),S=io();return s.jsxs("div",{className:De(c&&"hidden"),children:[s.jsx(to,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsxs(ss,{children:[!f&&s.jsxs(s.Fragment,{children:[s.jsx(ar,{clientThreadId:a}),g&&s.jsx(ir,{pulseId:g.id,caption:g.caption,previewImages:g.preview_items.map(l=>rr(l.image_url)),onClick:()=>S("/pulse")})]}),u&&s.jsx(Pn,{conversation:t}),m==="tiles"||m==="hscroll"?e&&a?s.jsx(Mn,{className:"mt-[24.5px] max-sm:hidden",layout:"carousel",clientThreadId:a,currentModelId:e}):null:m==="image_gen_banner"&&n?s.jsx("div",{className:"mt-16 flex justify-center max-sm:hidden",children:s.jsx(kl,{})}):m==="chips"?e&&s.jsx(Nl,{clientThreadId:a,currentModelId:e}):null,o&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(Rl,{})}),!o&&d&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(lr,{})}),x&&s.jsx(Ns,{children:s.jsx("div",{className:"hidden sm:block",children:s.jsx(bn,{})})})]})}),f&&s.jsxs("div",{className:"@w-sm/main:flex mt-5 hidden flex-col gap-2",children:[s.jsx(cr,{}),s.jsx(dr,{}),s.jsx(ur,{})]})]})};function _c(a){var e;return(e=a.metadata)==null?void 0:e.n7jupd_message}function wc(a){return a.messages.some(_c)}function Mc(a){return Mt.getConversationTurns(a).some(wc)}function Ac(){return performance.now()}function Ic(){return Date.now()}function Pc(a){return a!=="web"}function jc(a,e){var t;return a+((t=e.size)!=null?t:0)}function Ec(a){return a.isReplayEnabled}function kc(){return gn()}function Nc(a){"use forget";var Lt,Ht,Pt,ms;const e=je.c(175),{conversation:t,withCustomCompletionParams:i,hideDisclaimer:h,renderEmptyState:r,renderEmptyFooter:u,scrollContainerRef:c,isScrolledFromBottom$:f,footerRootContainerElementRef:m,onDeepResearchLandingPageContentHeightChange:n}=a,o=nt(),d=Wn(),x=Cn(o),p=fo(),g=lo(),S=Xo(),l=vn(t.id);let y;e[0]!==S?(y=V=>[Mt.hasUserMessage(V),Mt.getConversationTurns(V).length,Mt.isArchived(V),V?Mt.getGizmoId(V):S],e[0]=S,e[1]=y):y=e[1];const[I,T,M,A]=ts(t.id,y),b=v.use(An);let k;e[2]!==o?(k=()=>{var V;return no(o)&&ls(o).isFeedbackViewOpen$()&&((V=ls(o).feedbackViewState$())==null?void 0:V.type)!==_n.Conversation},e[2]=o,e[3]=k):k=e[3];const j=O(k),P=T>=2;let C;e[4]!==o?(C=Zo(o),e[4]=o,e[5]=C):C=e[5];const w=C;let D;e[6]!==o?(D=()=>rs(o),e[6]=o,e[7]=D):D=e[7];const J=O(D),q=uo(),oe=mo(),{isOpen:E}=Tn(),L=!!A;let ie;e[8]!==t.id||e[9]!==P||e[10]!==l||e[11]!==oe||e[12]!==w||e[13]!==L||e[14]!==q||e[15]!==b?(ie=Zs(t.id)&&!P&&(oo(l)||(l==null?void 0:l.kind)===en.GizmoTest)&&!q&&!oe&&b==null&&(!w||L),e[8]=t.id,e[9]=P,e[10]=l,e[11]=oe,e[12]=w,e[13]=L,e[14]=q,e[15]=b,e[16]=ie):ie=e[16];const _=ie;let N;e[17]!==_||e[18]!==((Lt=d==null?void 0:d.homepageCmsPageData)==null?void 0:Lt.sections)||e[19]!==(d==null?void 0:d.homepageFooterNavData)?(N=()=>{var ke;if(!((ke=d==null?void 0:d.homepageCmsPageData)!=null&&ke.sections)&&!(d!=null&&d.homepageFooterNavData))return;const V=document.querySelector("main");!_&&V&&V.classList.add("no-scrollbar")},e[17]=_,e[18]=(Ht=d==null?void 0:d.homepageCmsPageData)==null?void 0:Ht.sections,e[19]=d==null?void 0:d.homepageFooterNavData,e[20]=N):N=e[20];const K=(Pt=d==null?void 0:d.homepageCmsPageData)==null?void 0:Pt.sections,Z=d==null?void 0:d.homepageFooterNavData;let ue;e[21]!==_||e[22]!==K||e[23]!==Z?(ue=[_,K,Z],e[21]=_,e[22]=K,e[23]=Z,e[24]=ue):ue=e[24],v.useEffect(N,ue);const ge=_&&!I&&b==null&&(!w||L||p);let Y;e[25]!==t?(Y=()=>nn(t),e[25]=t,e[26]=Y):Y=e[26];const Q=O(Y).id;let U;e[27]!==t||e[28]!==o||e[29]!==Q||e[30]!==i?(U=V=>{var Wt,hs,ps;const ke=Pe({conversation:t},i?i(V):V);if((hs=(Wt=ke.completionMetadata)==null?void 0:Wt.systemHints)!=null&&hs.some(Fc)&&ho(o)){const gs=an(o,(ps=ke.requestedModelId)!=null?ps:Q);gs&&(ke.requestedModelId=gs)}wn(ke)},e[27]=t,e[28]=o,e[29]=Q,e[30]=i,e[31]=U):U=e[31];const ne=Ot(U);let ee;e[32]!==o||e[33]!==w||e[34]!==_||e[35]!==ne?(ee=V=>{_&&!rn()&&!w&&ln(o,"3253785454").get("should_animate_composer",!1)?Ft({className:us["composer-slide"],update:()=>ne(V)}):ne(V)},e[32]=o,e[33]=w,e[34]=_,e[35]=ne,e[36]=ee):ee=e[36];const re=Ot(ee),G=tn(o,A),Ce=ge&&!r&&G;let $;e[37]!==o?($=Jo(),e[37]=o,e[38]=$):$=e[38];const Ne=$,ve=co(o),Re=ts(t.id,Rc),Ve=G&&(Re==null?void 0:Re.id)!=null&&Re.id!==(ve==null?void 0:ve.normalizedAccountUserId),me=ve&&!ve.isSelfServeBusiness()&&!ve.isEnterprisey(),le=!h&&!Ne&&!J&&!Ce&&!(w&&!g)&&!(_&&me)&&oo(l),fe=pn(t.id).isOdysseyMode;sn();const $e=!1,ze=v.useRef(null),qe=m!=null?m:ze,Se=!G,Be=_;let ae;e[39]!==o?(ae=()=>cn(o),e[39]=o,e[40]=ae):ae=e[40];const{isSingleLine:Ye}=O(ae),{file_uploads:H,image_uploads:B}=br(),F=!on();let R;e[41]!==o?(R=yt(o,"739972392"),e[41]=o,e[42]=R):R=e[42];const xe=_&&$e;let we;e[43]!==n?(we=so({axis:"height",onChange:V=>{const{height:ke}=V;return n==null?void 0:n(ke)}}),e[43]=n,e[44]=we):we=e[44];const Ze=we;let Fe;e[45]!==t?(Fe=()=>Rr(t),e[45]=t,e[46]=Fe):Fe=e[46];const W=O(Fe);let Oe;e[47]!==t?(Oe=()=>Rs(t).pinnedWidgetType$(),e[47]=t,e[48]=Oe):Oe=e[48];const Qe=O(Oe),bt=W&&(Qe==="deep-research"||$e),Me=_&&!L&&!p&&!F?"center":"bottom",at=!_||p;let et;e[49]!==at?(et={skip:at},e[49]=at,e[50]=et):et=e[50];const{shouldShow:Ae,isLoading:Ie}=Cr(et),Ke=Ae&&!Ie;let tt;e[51]!==o||e[52]!==w||e[53]!==p||e[54]!==L||e[55]!==Ie||e[56]!==_||e[57]!==fe||e[58]!==E||e[59]!==F||e[60]!==W||e[61]!==Ae?(tt=jt()&&_&&!p&&!W&&!E&&!F&&!L&&!w&&!Gs()&&!Ie&&!Ae&&!fe,e[51]=o,e[52]=w,e[53]=p,e[54]=L,e[55]=Ie,e[56]=_,e[57]=fe,e[58]=E,e[59]=F,e[60]=W,e[61]=Ae,e[62]=tt):tt=e[62];const Le=tt;let Je;e[63]!==Le||e[64]!==o?(Je=Le&&vr(o,"is_atlas_launch_announcement_banner_migrated"),e[63]=Le,e[64]=o,e[65]=Je):Je=e[65];const Te=Je;let Ge;e[66]!==o?(Ge=Tr(o),e[66]=o,e[67]=Ge):Ge=e[67];const[it]=v.useState(Ge);let Ue;e[68]!==Le||e[69]!==Te||e[70]!==o||e[71]!==it?(Ue=!Te&&_r(o)&&!wr()&&!it&&Le,e[68]=Le,e[69]=Te,e[70]=o,e[71]=it,e[72]=Ue):Ue=e[72];const ye=Ue;let rt;e[73]!==o?(rt=yt(o,"4087025484"),e[73]=o,e[74]=rt):rt=e[74];const lt=rt;let ct;e[75]!==ye||e[76]!==o||e[77]!==lt||e[78]!==w||e[79]!==p||e[80]!==L||e[81]!==Ie||e[82]!==_||e[83]!==fe||e[84]!==E||e[85]!==F||e[86]!==W||e[87]!==Ae?(ct=()=>{if(!lt||ye||!(jt()&&_&&!p&&!W&&!E&&!F&&!L&&!w&&!Gs()&&!Ie&&!Ae&&!fe)||!Sn(o))return;const{data:V}=xn(o,{useCache:!lt});if((V==null?void 0:V.onboarding_status)===yn.NOT_STARTED)return V},e[75]=ye,e[76]=o,e[77]=lt,e[78]=w,e[79]=p,e[80]=L,e[81]=Ie,e[82]=_,e[83]=fe,e[84]=E,e[85]=F,e[86]=W,e[87]=Ae,e[88]=ct):ct=e[88];const se=O(ct),ce=Ka("cocoon");let he;e[89]!==ye||e[90]!==o||e[91]!==ce||e[92]!==w||e[93]!==p||e[94]!==L||e[95]!==Ie||e[96]!==_||e[97]!==fe||e[98]!==E||e[99]!==F||e[100]!==W||e[101]!==Ae?(he=()=>{var V,ke;if(!(!jt()||!ce||ye||!_||p||W||E||F||L||w||Gs()||Ie||Ae||fe))return(ke=(V=Fr(o))==null?void 0:V.data)!=null?ke:void 0},e[89]=ye,e[90]=o,e[91]=ce,e[92]=w,e[93]=p,e[94]=L,e[95]=Ie,e[96]=_,e[97]=fe,e[98]=E,e[99]=F,e[100]=W,e[101]=Ae,e[102]=he):he=e[102];const de=O(he);let X;e[103]!==o?(X=Mr(o),e[103]=o,e[104]=X):X=e[104];const{auraAnnouncementBannerState$:He,setAuraAnnouncementBannerState:ht}=X;let dt;e[105]!==He?(dt=()=>He(),e[105]=He,e[106]=dt):dt=e[106];const Ct=O(dt);let ut,At;e[107]!==Te||e[108]!==ye||e[109]!==ht?(ut=()=>{!ye&&!Te&&ht("not-shown")},At=[Te,ye,ht],e[107]=Te,e[108]=ye,e[109]=ht,e[110]=ut,e[111]=At):(ut=e[110],At=e[111]),v.useEffect(ut,At);const It="thread-bottom-container",vt=De("sticky bottom-0","group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent print:hidden",W&&"pointer-events-none",!_&&!W&&"content-fade",Ye&&"single-line",Ve&&"[--content-fade-height:110px]",Ve&&"[--content-fade-top:-110px]",_&&"min-h-0",ge&&u&&"grow",L||G||!_?"":Se&&_&&!p&&"sm:grow",Se&&"flex flex-col",W&&"z-60",bt&&"hidden",x);let pt;e[112]!==J||e[113]!==_||e[114]!==j||e[115]!==f||e[116]!==W||e[117]!==c?(pt=!_&&!J&&!j&&!W&&s.jsx(Oc,{isScrolledFromBottom$:f,scrollContainerRef:c}),e[112]=J,e[113]=_,e[114]=j,e[115]=f,e[116]=W,e[117]=c,e[118]=pt):pt=e[118];let gt;e[119]!==de||e[120]!==Me||e[121]!==t||e[122]!==o||e[123]!==Q||e[124]!==Ze||e[125]!==H||e[126]!==B||e[127]!==M||e[128]!==L||e[129]!==_||e[130]!==E||e[131]!==G||e[132]!==g||e[133]!==W||e[134]!==re||e[135]!==se||e[136]!==xe||e[137]!==Se||e[138]!==Be?(gt=M?s.jsx(Ar,{clientThreadId:t.id}):s.jsxs(s.Fragment,{children:[(!_||Se)&&!E&&s.jsxs(s.Fragment,{children:[s.jsx(vc,{isGizmoThread:L,isProjectThread:G,conversation:t,isNewThread:_,currentModelId:Q,onRequestCompletion:re,shouldUseUnifiedComposer:Se,layoutMode:Me,isWidgetFullScreen:W,onlyAllowImageUploads:B==="allowed"&&H!=="allowed",shouldShowDeepResearchDesktopContent:xe,pulseOnboardingEntrypoint:se,cocoonEntrypointResponse:de}),g&&_&&yt(o,"537200474")&&s.jsx(Ir,{clientThreadId:t.id}),!1]}),Be&&s.jsx(ec,{clientThreadId:t.id,isGizmoThread:L,isNewThread:_,isProjectThread:G})]}),e[119]=de,e[120]=Me,e[121]=t,e[122]=o,e[123]=Q,e[124]=Ze,e[125]=H,e[126]=B,e[127]=M,e[128]=L,e[129]=_,e[130]=E,e[131]=G,e[132]=g,e[133]=W,e[134]=re,e[135]=se,e[136]=xe,e[137]=Se,e[138]=Be,e[139]=gt):gt=e[139];let ft;e[140]!==Ct||e[141]!==t||e[142]!==_||e[143]!==le?(ft=le&&s.jsx("div",{ref:so({axis:"height",onChange:V=>{const{height:ke}=V;return Is(t).marginBottom$.set(ke)}}),className:De(_?"mt-auto":"-mt-4","text-token-text-secondary relative flex min-h-8 w-full items-center justify-center p-2 text-center text-xs [view-transition-name:var(--vt-disclaimer)] md:px-[60px]",Ct!=="not-shown"&&"md:opacity-0"),children:s.jsx(Pr,{clientThreadId:t.id})}),e[140]=Ct,e[141]=t,e[142]=_,e[143]=le,e[144]=ft):ft=e[144];const Xe=ge&&u;let Ee;e[145]!==Ke?(Ee=Ke&&s.jsx(Or,{}),e[145]=Ke,e[146]=Ee):Ee=e[146];let _e;e[147]!==ye||e[148]!==t.id||e[149]!==le?(_e=ye&&s.jsx(jr,{shouldShowDisclaimer:le,clientThreadId:t.id}),e[147]=ye,e[148]=t.id,e[149]=le,e[150]=_e):_e=e[150];let Tt;e[151]!==Te||e[152]!==t.id||e[153]!==le?(Tt=Te&&s.jsx(Er,{shouldShowDisclaimer:le,clientThreadId:t.id}),e[151]=Te,e[152]=t.id,e[153]=le,e[154]=Tt):Tt=e[154];let Et;e[155]!==_e||e[156]!==Tt?(Et=s.jsxs(Ns,{children:[_e,Tt]}),e[155]=_e,e[156]=Tt,e[157]=Et):Et=e[157];let _t;e[158]!==qe||e[159]!==vt||e[160]!==pt||e[161]!==gt||e[162]!==ft||e[163]!==Xe||e[164]!==Ee||e[165]!==Et?(_t=s.jsxs("div",{id:It,className:vt,ref:qe,children:[pt,gt,ft,Xe,Ee,Et]}),e[158]=qe,e[159]=vt,e[160]=pt,e[161]=gt,e[162]=ft,e[163]=Xe,e[164]=Ee,e[165]=Et,e[166]=_t):_t=e[166];let st;e[167]!==d?(st=((ms=d==null?void 0:d.homepageCmsPageData)==null?void 0:ms.sections)&&s.jsx(kr,{sections:d.homepageCmsPageData.sections}),e[167]=d,e[168]=st):st=e[168];let ot;e[169]!==d?(ot=(d==null?void 0:d.homepageFooterNavData)&&s.jsx(Nr,{footer:d.homepageFooterNavData,disableHugeChatLogo:!0}),e[169]=d,e[170]=ot):ot=e[170];let St;return e[171]!==_t||e[172]!==st||e[173]!==ot?(St=s.jsxs(s.Fragment,{children:[_t,st,ot]}),e[171]=_t,e[172]=st,e[173]=ot,e[174]=St):St=e[174],St}function Rc(a){return a==null?void 0:a.sharedProjectConversationOwner}function Fc(a){return dn(a)}function Oc(a){"use forget";const e=je.c(5),{isScrolledFromBottom$:t,scrollContainerRef:i}=a,h=O(t);let r;e[0]!==i?(r=()=>{var c;Qa(ds(),"chatgpt_thread_scroll_to_bottom"),(c=i.current)==null||c.scrollTo({behavior:"smooth",top:i.current.scrollHeight})},e[0]=i,e[1]=r):r=e[1];let u;return e[2]!==h||e[3]!==r?(u=s.jsx("div",{className:"relative h-0",children:s.jsx(Lr,{show:h,className:"bottom-[calc(100%+6*var(--spacing))]",onClick:r})}),e[2]=h,e[3]=r,e[4]=u):u=e[4],u}const Lc=ks(()=>js(()=>import("./c5og9r81gzk0nhum.js"),__vite__mapDeps([6,1,2,3,4,5])).then(a=>a.ThreadReportConversationModal)),Hc=ks(()=>js(()=>import("./eshaoi7yv554yrdo.js"),__vite__mapDeps([7,1,2,3,8,9,4,5,10,11]))),Wc=ks(()=>js(()=>import("./dec5ecst2000qx9i.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,15,16])).then(a=>a.TableOfContentsSidebar));function Dc({conversation:a,isNewScrollEnabled:e,pageLoadSearchQuery:t,footerRootContainerElementRef:i,threadRootRef:h,isScrolledFromBottom$:r,scrollContainerRef:u,children:c}){"use no forget";const f=nt(),[m]=$o(),n=!!m.get("message"),o=O(()=>rs(f)),d=ts(a.id,p=>(p==null?void 0:p.conversationOrigin)===oi.APPLE);if(e)return s.jsx(ml,{allowScrollToEnd:!o,allowScrollToTop:!o&&d,clientThreadId:a.id,initScrolledToEnd:t==null&&!n,threadFooterRef:i,threadRootRef:h,children:c});const x=s.jsxs(s.Fragment,{children:[s.jsx(Eo,{className:"absolute top-0",setIsScrolledToEdge:p=>{ro.setIsConversationScrolledFromTop(p)},options:{root:u==null?void 0:u.current}}),c,s.jsx(Eo,{className:"absolute bottom-0",setIsScrolledToEdge:p=>{r.set(p)},options:{root:u==null?void 0:u.current}})]});return t!=null?x:s.jsx(Ns,{children:s.jsxs(v.Suspense,{fallback:null,children:[s.jsx(hl,{}),x]})})}const sd=function(a){"use forget";var xo;const e=je.c(187),{conversation:t,withCustomCompletionParams:i,hideDisclaimer:h,renderEmptyState:r,renderEmptyFooter:u,className:c}=a,f=os(),m=Ja(),n=nt(),o=Cn(n),d=fn(),x=fo(),p=Ur(n),g=Xo(),S=vn(t.id);let l;e[0]!==g?(l=pe=>[pe==null?void 0:pe.isLoading,Mt.hasUserMessage(pe),Mt.getConversationTurns(pe).length,pe?Mt.getGizmoId(pe):g],e[0]=g,e[1]=l):l=e[1];const[y,I,T,M]=ts(t.id,l),A=Xa(t.id),b=v.use(An);let k;e[2]!==n?(k=()=>{var pe;return no(n)&&ls(n).isFeedbackViewOpen$()&&((pe=ls(n).feedbackViewState$())==null?void 0:pe.type)!==_n.Conversation},e[2]=n,e[3]=k):k=e[3];const j=O(k);let P,C;e[4]!==t.id||e[5]!==n?(P=()=>pl(n,t.id),C=[n,t.id],e[4]=t.id,e[5]=n,e[6]=P,e[7]=C):(P=e[6],C=e[7]),v.useEffect(P,C);const[w]=v.useState(b==null?void 0:b.query),[D,J]=v.useState(b==null?void 0:b.navlink);let q,oe;e[8]!==t.id||e[9]!==y?(q=()=>{y||(Zs(t.id)?ko.addTiming("chatgpt.web.chatPage.renderNewConversation"):ko.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},oe=[t.id,y],e[8]=t.id,e[9]=y,e[10]=q,e[11]=oe):(q=e[10],oe=e[11]),v.useEffect(q,oe);const{setTargetedContent:E}=Vr();let L;e[12]!==m?(L=m==null?void 0:m.includes(Za),e[12]=m,e[13]=L):L=e[13];const ie=L,_=T>=2;let N;e[14]!==n?(N=Zo(n),e[14]=n,e[15]=N):N=e[15];const K=N;let Z;e[16]!==n?(Z=()=>[rs(n),ni(n)],e[16]=n,e[17]=Z):Z=e[17];const[ue,ge]=O(Z),Y=uo(),{hash:be}=Bo(),Q=io(),U=mo(),{isOpen:ne}=Tn();let ee;e[18]!==t.id||e[19]!==t.sharedConversationId||e[20]!==n||e[21]!==be||e[22]!==Y||e[23]!==Q?(ee=()=>{be==="#report"&&(ws(n,Lc,xt(Pe({clientThreadId:t.id},Y&&(t!=null&&t.sharedConversationId)?{serverThreadId:t.sharedConversationId,isSharedConversation:!0}:{}),{isStaticSharedThread:!1})),Q({hash:""},{replace:!0}))},e[18]=t.id,e[19]=t.sharedConversationId,e[20]=n,e[21]=be,e[22]=Y,e[23]=Q,e[24]=ee):ee=e[24];let re;e[25]!==t||e[26]!==n||e[27]!==be||e[28]!==Y||e[29]!==Q?(re=[t,n,be,Y,Q],e[25]=t,e[26]=n,e[27]=be,e[28]=Y,e[29]=Q,e[30]=re):re=e[30],v.useEffect(ee,re);const G=!!M;let Ce;e[31]!==t.id||e[32]!==_||e[33]!==S||e[34]!==U||e[35]!==K||e[36]!==G||e[37]!==Y||e[38]!==b?(Ce=Zs(t.id)&&!_&&(oo(S)||(S==null?void 0:S.kind)===en.GizmoTest)&&!Y&&!U&&b==null&&(!K||G),e[31]=t.id,e[32]=_,e[33]=S,e[34]=U,e[35]=K,e[36]=G,e[37]=Y,e[38]=b,e[39]=Ce):Ce=e[39];const $=Ce,Ne=$&&!I&&b==null&&(!K||G||x),ve=ue&&!I&&!G;let Re;e[40]!==t?(Re=()=>nn(t),e[40]=t,e[41]=Re):Re=e[41];const Ve=O(Re),me=Ve.id,le=ei.useStore();let fe;e[42]!==n?(fe=()=>ai(n),e[42]=n,e[43]=fe):fe=e[43];const $e=O(fe);let ze;e[44]!==n?(ze=(xo=co(n))==null?void 0:xo.isWorkspaceAccount(),e[44]=n,e[45]=ze):ze=e[45];const qe=ze;let Se,Be;e[46]!==t.id||e[47]!==me||e[48]!==qe||e[49]!==le||e[50]!==$e?(Se=()=>{if(me===ii)return le.setActiveSystemHint(Xs,$e,{locked:!0,analyticsMetadata:{clientThreadId:t.id}}),()=>{le.setActiveSystemHint(null,$e,{locked:!1,ifPrevSystemHint:Xs,analyticsMetadata:{clientThreadId:t.id}},qe)}},Be=[me,le,t.id,$e,qe],e[46]=t.id,e[47]=me,e[48]=qe,e[49]=le,e[50]=$e,e[51]=Se,e[52]=Be):(Se=e[51],Be=e[52]),v.useEffect(Se,Be);const ae=zr(t.id,S),Ye=qr();let H;e[53]!==Ye||e[54]!==E?(H=()=>{Ye||E(void 0)},e[53]=Ye,e[54]=E,e[55]=H):H=e[55];let B;e[56]!==t.id||e[57]!==Ye||e[58]!==E?(B=[t.id,E,Ye],e[56]=t.id,e[57]=Ye,e[58]=E,e[59]=B):B=e[59],v.useEffect(H,B);let F;e[60]!==t.id?(F=[t.id],e[60]=t.id,e[61]=F):F=e[61],v.useEffect(Gc,F);let R,xe;e[62]!==n||e[63]!==M||e[64]!==A?(R=()=>{const pe=new URLSearchParams(window.location.search),Nt=pe.get("src");if(Nt==="history_search"){pe.delete("src");const Rt=pe.toString(),Cs="".concat(window.location.pathname).concat(Rt?"?".concat(Rt):"").concat(window.location.hash);window.history.replaceState({},document.title,Cs)}A&&Nt==="history_search"&&is.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:A}},requestBody:{touch:!0}}).then(()=>{const Rt=ri(n);li(Rt,M)})},xe=[n,A,M],e[62]=n,e[63]=M,e[64]=A,e[65]=R,e[66]=xe):(R=e[65],xe=e[66]),v.useEffect(R,xe);let we;e[67]!==t||e[68]!==n||e[69]!==me||e[70]!==i?(we=pe=>{var Rt,Cs,yo;const Nt=Pe({conversation:t},i?i(pe):pe);if((Cs=(Rt=Nt.completionMetadata)==null?void 0:Rt.systemHints)!=null&&Cs.some(Uc)&&ho(n)){const bo=an(n,(yo=Nt.requestedModelId)!=null?yo:me);bo&&(Nt.requestedModelId=bo)}wn(Nt)},e[67]=t,e[68]=n,e[69]=me,e[70]=i,e[71]=we):we=e[71];const Ze=Ot(we);let Fe;e[72]!==n||e[73]!==K||e[74]!==$||e[75]!==Ze?(Fe=pe=>{$&&!rn()&&!K&&ln(n,"3253785454").get("should_animate_composer",!1)?Ft({className:us["composer-slide"],update:()=>Ze(pe)}):Ze(pe)},e[72]=n,e[73]=K,e[74]=$,e[75]=Ze,e[76]=Fe):Fe=e[76];const W=Ot(Fe);Yr(t.id,W),Kr(),Qr(t.id),Jr(W);let Oe,Qe;e[77]!==n?(Oe=()=>ci(()=>no(n),()=>{gl(n).logEventWithStatsig("Web: FYP: Eligible Feed User","chatgpt_web_fyp_dau_with_fyp_available")}),Qe=[n],e[77]=n,e[78]=Oe,e[79]=Qe):(Oe=e[78],Qe=e[79]),v.useEffect(Oe,Qe),Xr($);const bt=Zr({clientThreadId:t.id,handleRequestCompletion:W,prefetchSearchThreadIdPromise:b==null?void 0:b.threadId})&&w==null,Me=v.useRef(null),at=el(!1);let et,Ae;e[80]===Symbol.for("react.memo_cache_sentinel")?(et=()=>{Me.current=Ue.current&&fl(Ue.current)},Ae=[],e[80]=et,e[81]=Ae):(et=e[80],Ae=e[81]),v.useEffect(et,Ae);let Ie;e[82]!==U||e[83]!==d||e[84]!==ae?(Ie=()=>{!U&&!d&&(document.title=ae!=null?ae:"ChatGPT")},e[82]=U,e[83]=d,e[84]=ae,e[85]=Ie):Ie=e[85];let Ke;e[86]!==U||e[87]!==f||e[88]!==d||e[89]!==ae?(Ke=[ae,U,d,f],e[86]=U,e[87]=f,e[88]=d,e[89]=ae,e[90]=Ke):Ke=e[90],v.useEffect(Ie,Ke);let tt;e[91]!==n||e[92]!==M?(tt=tn(n,M),e[91]=n,e[92]=M,e[93]=tt):tt=e[93];const Le=tt,Je=Ne&&!r&&Le,Te=sn();let Ge;e[94]!==Te?(Ge=!1,e[94]=Te,e[95]=Ge):Ge=e[95];const it=Ge,Ue=v.useRef(null),ye=v.useRef(null),rt=tl(Vc),lt=!$&&!ne&&!ue;let ct;e[96]===Symbol.for("react.memo_cache_sentinel")?(ct=()=>J(void 0),e[96]=ct):ct=e[96];const se=ct;let ce;e[97]!==n?(ce=()=>cn(n),e[97]=n,e[98]=ce):ce=e[98];const{isSingleLine:he}=O(ce);on();const de=O(As),X=yt(n,"739972392"),He=$&&it&&de&&X,[ht,dt]=v.useState(null),Ct=So();let ut;e[99]!==n||e[100]!==Ct?(ut=()=>Ps(n)&&Ct.visible$()&&As(),e[99]=n,e[100]=Ct,e[101]=ut):ut=e[101];const At=O(ut);let It;e[102]!==t?(It=()=>Rs(t).pinnedWidgetHeight$(),e[102]=t,e[103]=It):It=e[103];const vt=O(It),pt=sl(),gt=function(){return s.jsx(Wc,{clientThreadId:t.id,scrollContainerRef:Me})},ft=function(){return y||bt?null:Ne?Je?s.jsx(dl,{clientThreadId:t.id,gizmoId:M,currentModelId:me,onRequestCompletion:W}):r!=null?r:s.jsx(s.Fragment,{children:G?s.jsx(ul,{conversation:t,gizmoId:M,onRequestCompletion:W,currentModelId:me}):s.jsx($l,{clientThreadId:t.id,currentModelId:me})}):_||w!=null?s.jsx(Dc,{conversation:t,isNewScrollEnabled:p,pageLoadSearchQuery:w,footerRootContainerElementRef:ye,threadRootRef:Ue,isScrolledFromBottom$:at,scrollContainerRef:Me,children:s.jsx(Hl,{onRequestCompletion:W,conversation:t,scrollContainerRef:Me,pageLoadSearchQuery:w,prefetchNavlink:D,clearPrefetchNavlink:se},t.id)}):null},Xe=cl,Ee=D?"user-query-with-navlink":w?"user-query":null,_e=ll,Tt=rl,Et=t.id,_t=si;let st;e[104]!==t?(st=s.jsx(Bc,{conversation:t}),e[104]=t,e[105]=st):st=e[105];let ot;e[106]!==ie?(ot=ie&&s.jsx(Hc,{}),e[106]=ie,e[107]=ot):ot=e[107];let St;e[108]!==U||e[109]!==d||e[110]!==ae?(St=!U&&!d&&s.jsx(Sl,{children:ae!=null&&s.jsx("title",{children:ae})}),e[108]=U,e[109]=d,e[110]=ae,e[111]=St):St=e[111];const Lt=ti,Ht=il;let Pt;e[112]!==t?(Pt=s.jsx(xl,{conversation:t}),e[112]=t,e[113]=Pt):Pt=e[113];const ms="thread",V=Ue,ke=De("group/thread flex flex-col","min-h-full",p&&ol.threadRoot,ge&&"opacity-0",c),Wt=_l,hs=!0,ps=t.id,gs="composer-parent flex flex-1 flex-col focus-visible:outline-0";let Dt;e[114]!==t.id||e[115]!==n?(Dt=yt(n,"1909635392")&&s.jsx(nl,{clientThreadId:t.id}),e[114]=t.id,e[115]=n,e[116]=Dt):Dt=e[116];const Fs=De("relative basis-auto flex-col",lt&&"-mb-(--composer-overlap-px)",lt&&(he?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),Le||G||!$||x?"grow":"shrink",Je?"grid":"flex",$&&d&&!x&&"sm:min-h-[21svh]!",$&&!x&&!Le&&!G&&(He?"justify-start pt-[clamp(4rem,calc(30svh-(var(--deep-research-landing-page-content-height,0px)*0.40)),16rem)]":De("flex-col justify-end max-sm:grow max-sm:justify-center",At?"sm:min-h-[calc(38svh-var(--header-height))]":"sm:min-h-[calc(42svh-var(--header-height))]")),o,j&&"hidden"),Os=rt?"".concat(rt,"px"):void 0,Ls=He&&ht!=null?"".concat(ht,"px"):void 0;let fs;e[117]!==vt||e[118]!==Os||e[119]!==Ls?(fs={"--composer-height":Os,"--deep-research-landing-page-content-height":Ls,marginTop:vt},e[117]=vt,e[118]=Os,e[119]=Ls,e[120]=fs):fs=e[120];const Hs=fs,Ws=pt&&gt(),Ds=ft();let $t;e[121]!==K||e[122]!==ue||e[123]!==G||e[124]!==ve?($t=K&&ue&&!G&&s.jsx(yl,{showEmptyState:ve}),e[121]=K,e[122]=ue,e[123]=G,e[124]=ve,e[125]=$t):$t=e[125];let Bt;e[126]!==Fs||e[127]!==Hs||e[128]!==Ws||e[129]!==Ds||e[130]!==$t?(Bt=s.jsxs("div",{className:Fs,style:Hs,children:[Ws,Ds,$t]}),e[126]=Fs,e[127]=Hs,e[128]=Ws,e[129]=Ds,e[130]=$t,e[131]=Bt):Bt=e[131];let Gt;e[132]!==j?(Gt=j&&s.jsx(bl,{}),e[132]=j,e[133]=Gt):Gt=e[133];let Ut;e[134]!==t||e[135]!==h||e[136]!==at||e[137]!==u||e[138]!==r||e[139]!==dt||e[140]!==i?(Ut=s.jsx(Nc,{conversation:t,withCustomCompletionParams:i,hideDisclaimer:h,renderEmptyState:r,renderEmptyFooter:u,scrollContainerRef:Me,isScrolledFromBottom$:at,footerRootContainerElementRef:ye,onDeepResearchLandingPageContentHeightChange:dt}),e[134]=t,e[135]=h,e[136]=at,e[137]=u,e[138]=r,e[139]=dt,e[140]=i,e[141]=Ut):Ut=e[141];let Vt;e[142]!==Wt||e[143]!==t.id||e[144]!==Ve||e[145]!==Dt||e[146]!==Bt||e[147]!==Gt||e[148]!==Ut?(Vt=s.jsxs(Wt,{noKeyboard:hs,clientThreadId:ps,currentModelConfig:Ve,className:gs,children:[Dt,Bt,Gt,Ut]}),e[142]=Wt,e[143]=t.id,e[144]=Ve,e[145]=Dt,e[146]=Bt,e[147]=Gt,e[148]=Ut,e[149]=Vt):Vt=e[149];let zt;e[150]!==ge||e[151]!==ke||e[152]!==Vt?(zt=s.jsx("div",{id:ms,ref:V,className:ke,inert:ge,children:Vt}),e[150]=ge,e[151]=ke,e[152]=Vt,e[153]=zt):zt=e[153];let Ss;e[154]===Symbol.for("react.memo_cache_sentinel")?(Ss=s.jsx(Cl,{}),e[154]=Ss):Ss=e[154];let qt;e[155]!==t.id?(qt=s.jsx(al,{conversationId:t.id}),e[155]=t.id,e[156]=qt):qt=e[156];let xs,ys;e[157]===Symbol.for("react.memo_cache_sentinel")?(xs=s.jsx(vl,{}),ys=s.jsx(Tl,{}),e[157]=xs,e[158]=ys):(xs=e[157],ys=e[158]);let Yt;e[159]!==Ht||e[160]!==Pt||e[161]!==zt||e[162]!==qt?(Yt=s.jsxs(Ht,{children:[Pt,zt,Ss,qt,xs,ys]}),e[159]=Ht,e[160]=Pt,e[161]=zt,e[162]=qt,e[163]=Yt):Yt=e[163];let Kt;e[164]!==W||e[165]!==Lt.Provider||e[166]!==Yt?(Kt=s.jsx(Lt.Provider,{value:W,children:Yt}),e[164]=W,e[165]=Lt.Provider,e[166]=Yt,e[167]=Kt):Kt=e[167];let Qt;e[168]!==_t||e[169]!==t||e[170]!==st||e[171]!==ot||e[172]!==St||e[173]!==Kt?(Qt=s.jsxs(_t,{conversation:t,children:[st,ot,St,Kt]}),e[168]=_t,e[169]=t,e[170]=st,e[171]=ot,e[172]=St,e[173]=Kt,e[174]=Qt):Qt=e[174];let Jt;e[175]!==Tt||e[176]!==t.id||e[177]!==Qt?(Jt=s.jsx(Tt,{clientThreadId:Et,children:Qt}),e[175]=Tt,e[176]=t.id,e[177]=Qt,e[178]=Jt):Jt=e[178];let Xt;e[179]!==_e||e[180]!==A||e[181]!==Jt?(Xt=s.jsx(_e,{serverThreadId:A,children:Jt}),e[179]=_e,e[180]=A,e[181]=Jt,e[182]=Xt):Xt=e[182];let bs;return e[183]!==Xe.Provider||e[184]!==Ee||e[185]!==Xt?(bs=s.jsx(Xe.Provider,{value:Ee,children:Xt}),e[183]=Xe.Provider,e[184]=Ee,e[185]=Xt,e[186]=bs):bs=e[186],bs};function $c({conversation:a}){return Hr(a),Wr(),Dr(),$r(a),Br(),Gr(a),null}const Bc=Dn.memo($c);function Gc(){ro.setIsConversationScrolledFromTop(!1)}function Uc(a){return dn(a)}function Vc(a){return a.composerHeight}export{tc as I,ns as S,sd as T};
//# sourceMappingURL=tkv1g3prhmmeuid6.js.map
