var C=Object.defineProperty,B=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var v=(t,e,s)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,N=(t,e)=>{for(var s in e||(e={}))S.call(e,s)&&v(t,s,e[s]);if(_)for(var s of _(e))T.call(e,s)&&v(t,s,e[s]);return t},M=(t,e)=>B(t,I(e));import{e as k,j as a,M as p,c as P,r as h,E}from"./fg33krlcm0qyi6yw.js";import{ii as b,eR as $,iH as F,iI as D,cb as A,cw as L}from"./k65njl5wlgspihfr.js";import{M as O}from"./maum0adk5rsfsldc.js";import{l as j,qj as f,bv as R,bg as W}from"./mtk1qztvnb31pw5r.js";import{w as q,p as z}from"./jwm2780gzkkhdmn4.js";function G(){return q(z,arguments)}function w({business:t,showHourDetail:e}){const s=k();if(t.is_closed_permanently)return a.jsx("span",{className:"text-red-600",children:a.jsx(p,{id:"businessMetadata.closedPermanently",defaultMessage:"Closed Permanently"})},"closed_permanently");const o=t.next_open_hour,r=t.is_open!==void 0&&t.is_open!=null?t.is_open?a.jsx("span",{className:"text-green-600",children:a.jsx(p,{id:"businessMetadata.openHourDetail",defaultMessage:"Open"})},"open"):a.jsx("span",{children:a.jsx(p,{id:"businessMetadata.closedStatus",defaultMessage:"Closed"})},"closed"):null;if(!e||!o)return r;const l=o.day===new Date().getDay(),i=y(s,t.is_open?o.end:o.start),n=l?s.formatMessage({id:"Adun59",defaultMessage:"{openClosedText} until {time}"},{openClosedText:r,time:i}):s.formatMessage({id:"tMworT",defaultMessage:"{openClosedText} until {day} {time}"},{openClosedText:r,day:H(s,o.day),time:i});return a.jsx("div",{children:n&&a.jsx("span",{children:n})})}function se({business:t,isLoading:e=!1,mapUrl:s,showTitle:o=!1,showPrice:r=!0,showHourDetail:l=!0,showActionButtons:i=!0,showActionButtonsIcons:n=!1,showExtendedDetails:d=!1,trackContentReferenceEvent:m,topOffset:c=0}){const u=!(l&&t.next_open_hour)||t.is_closed_permanently;return a.jsxs("div",{className:j("text-token-text-primary mb-4 max-w-md rounded-md",e&&"pointer-events-none animate-pulse opacity-80",c&&"mt-[".concat(c,"px]")),children:[o&&t.name&&a.jsx("h2",{className:"mb-0! leading-tight",children:t.name}),a.jsx("div",{className:"leaading-tight",children:a.jsx(J,{business:t,showPrice:r,showHours:u})}),!u&&!d&&a.jsx("div",{className:"leading-tight",children:a.jsx(w,{business:t,showHourDetail:!0})}),i&&a.jsx(Q,{business:t,trackContentReferenceEvent:m,mapUrl:s,showActionButtonsIcons:n}),d&&a.jsx(V,{business:t,showHours:!u&&d})]})}function J(t){"use forget";const e=P.c(16),{business:s,showPrice:o,showHours:r}=t,l=o===void 0?!0:o,i=r===void 0?!0:r,n=s.categories&&s.categories.length>0?s.categories[0]:"";let d;e[0]!==s.provider_url||e[1]!==s.rating?(d=s.rating?s.provider_url?a.jsxs("a",{href:s.provider_url,target:"_blank",rel:"noopener noreferrer",className:"business-rating-anchor hover:entity-accent inline-flex items-center gap-1",children:[a.jsx(b,{className:"mt-0.25 h-3.5 w-3.5"}),a.jsx("span",{className:"business-rating-value text-inherit",children:s.rating.toFixed(1)})]},"provider-link"):a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(b,{className:"mt-0.25 h-3.5 w-3.5"}),s.rating.toFixed(1)]},"rating"):null,e[0]=s.provider_url,e[1]=s.rating,e[2]=d):d=e[2];let m;e[3]!==n?(m=n?a.jsx("span",{children:a.jsx(p,{id:"businessMetadata.category",defaultMessage:"{category}",values:{category:n}})},"category"):null,e[3]=n,e[4]=m):m=e[4];let c;e[5]!==s.price_str||e[6]!==l?(c=l&&s.price_str?a.jsx("span",{children:s.price_str},"price"):null,e[5]=s.price_str,e[6]=l,e[7]=c):c=e[7];let u;e[8]!==s||e[9]!==i?(u=i&&s.is_open!=null&&a.jsx(w,{business:s,showHourDetail:!1}),e[8]=s,e[9]=i,e[10]=u):u=e[10];let x;return e[11]!==d||e[12]!==m||e[13]!==c||e[14]!==u?(x=a.jsx("div",{className:"flex flex-wrap items-center font-normal",children:[d,m,c,u].filter(Boolean).map(K)}),e[11]=d,e[12]=m,e[13]=c,e[14]=u,e[15]=x):x=e[15],x}function K(t,e){return a.jsxs(E.Fragment,{children:[e>0&&a.jsx("span",{className:"mx-1",children:"â€¢"}),t]},e)}function Q({business:t,trackContentReferenceEvent:e,mapUrl:s,showActionButtonsIcons:o}){const r=h.useRef({directions:null,website:null,phone:null});h.useEffect(()=>{r.current={directions:null,website:null,phone:null}},[t.id]);const l=h.useMemo(()=>({section:"entity_metadata",section_location:"response",entity_type:"local_business",business_id:t.id,provider:t.provider}),[t.id,t.provider]),i=h.useCallback((n,d,m)=>{if(!e)return;const c=M(N({},l),{cta_type:n,url:m,link_type:"button",action:d});e("link_action",null,"entity_metadata",c),d==="show"?e("Entity Metadata Content Reference Shown","entity_metadata_content_reference_shown","entity_metadata",c):d==="click"&&e("Entity Metadata Content Reference Clicked","entity_metadata_content_reference_clicked","entity_metadata",c)},[l,e]);return h.useEffect(()=>{if(e&&(s&&r.current.directions!==s&&(i("directions","show",s),r.current.directions=s),t.website_url&&r.current.website!==t.website_url&&(i("website","show",t.website_url),r.current.website=t.website_url),t.phone)){const n="tel:".concat(t.phone);r.current.phone!==n&&(i("phone","show",n),r.current.phone=n)}},[t.phone,t.website_url,s,e,i]),a.jsxs("div",{className:"justify-left mt-3 flex w-full flex-wrap gap-2",children:[s&&a.jsx(f,{type:"button",className:"btn btn-primary btn-small relative m-0! w-auto min-w-fit px-4 py-1 text-xs font-medium",onClick:()=>{i("directions","click",s),window.open(s,"_blank","noopener,noreferrer")},children:a.jsxs("span",{className:"flex items-center gap-1",children:[o&&a.jsx($,{className:"text-token-text-primary h-4 w-4"}),a.jsx(p,{id:"businessMetadata.directions",defaultMessage:"Directions"})]},"rating")}),t.website_url&&a.jsx(f,{type:"button",className:"btn btn-secondary btn-small text-token-text-primary relative m-0! w-auto min-w-fit px-4 py-1 text-xs font-medium",onClick:()=>{const n=t.website_url;n&&(i("website","click",n),window.open(n,"_blank","noopener,noreferrer"))},children:a.jsxs("span",{className:"flex items-center gap-1",children:[o&&a.jsx(F,{className:"text-token-text-primary h-4 w-4"}),a.jsx(p,{id:"businessMetadata.website",defaultMessage:"Website"})]},"rating")}),t.phone&&a.jsx(f,{type:"button",className:"btn btn-secondary btn-small text-token-text-primary relative m-0! w-auto min-w-fit px-4 py-1 text-xs font-medium",onClick:()=>{const n="tel:".concat(t.phone);i("phone","click",n),window.location.href=n},children:a.jsxs("span",{className:"flex items-center gap-1",children:[o&&a.jsx(D,{className:"text-token-text-primary h-4 w-4"}),a.jsx(p,{id:"businessMetadata.call",defaultMessage:"Call"})]},"rating")})]})}function V({business:t,showHours:e}){var m;const s=k(),[o,r]=h.useState(!1),l=t.hours&&t.hours.length>0||t.next_open_hour||t.is_open!=null||t.is_closed_permanently,i=t.hours?X(t.hours):[],n=i.length>0,d=t.phone?(m=G(t.phone,"US"))==null?void 0:m.formatNational():null;return a.jsx("div",{className:"mt-3",children:a.jsxs("div",{className:"divide-token-border-light border-token-border-light divide-y border-t",children:[l&&e&&a.jsxs(a.Fragment,{children:[a.jsx(g,{icon:a.jsx(A,{className:"h-6 w-6"}),value:a.jsx(w,{business:t,showHourDetail:!0}),isExpandable:!0,isExpanded:o,onClick:()=>r(c=>n&&!c)}),a.jsx(R,{initial:!1,children:o&&n&&a.jsx(W.div,{className:"divide-token-border-light divide-y overflow-hidden select-none",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"tween",duration:.2,ease:"easeInOut"},children:i.map(c=>a.jsxs("div",{className:"flex min-h-[40px] items-center gap-2 py-2 text-sm",children:[a.jsx("div",{className:"w-[125px]",children:H(s,c.day,"long")}),a.jsx("div",{children:c.isClosed?a.jsx(p,{id:"businessMetadata.closed",defaultMessage:"Closed"}):a.jsx(a.Fragment,{children:c.times.map((u,x)=>a.jsx("div",{children:"".concat(y(s,u.start)," - ").concat(y(s,u.end))},x))})})]},c.day))},"hours-details")})]}),t.address&&a.jsx(g,{icon:a.jsx(O,{className:"h-6 w-6"}),value:t.address}),d&&a.jsx(g,{icon:a.jsx(D,{className:"h-5 w-5"}),value:d})]})})}function g({icon:t,value:e,onClick:s,isExpandable:o=!1,isExpanded:r=!1}){return a.jsxs("div",{className:j("flex min-h-[44px] items-center gap-4 py-2",s&&"cursor-pointer"),onClick:s,children:[a.jsx("div",{className:"flex h-6 w-6 items-center justify-center",children:t}),a.jsx("div",{className:"flex-1 text-sm font-medium",children:e}),o&&a.jsx("button",{type:"button",className:j("text-token-text-secondary p-1 transition-all",r&&"rotate-180"),children:a.jsx(L,{className:"h-5 w-5"})})]})}function X(t){var o;const e=[1,2,3,4,5,6,0];let s=[];if(Array.isArray(t)&&t.length>0){const r=new Map;for(const l of t){const i=(o=r.get(l.day))!=null?o:[];i.push({start:l.start,end:l.end}),r.set(l.day,i)}s=e.map(l=>{var n;const i=(n=r.get(l))!=null?n:[];return i.sort((d,m)=>d.start.localeCompare(m.start)),{day:l,times:i,isClosed:i.length===0}})}return s}function y(t,e){const s=e.slice(0,2),o=e.slice(2,4),r=new Date(0,0,0,parseInt(s,10),parseInt(o,10));return t.formatTime(r,{hour:"numeric",minute:"2-digit"})}function H(t,e,s="short"){return t.formatDate(new Date(0,0,e),{weekday:s})}export{J as BusinessMetadataSummaryLine,se as BusinessMetadataWidget,w as OpenStatusText};
//# sourceMappingURL=jftncm63mknqil4t.js.map
