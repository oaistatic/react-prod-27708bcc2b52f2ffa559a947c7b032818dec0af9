var de=Object.defineProperty,ue=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var ae=(e,t,i)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,r=(e,t)=>{for(var i in t||(t={}))fe.call(t,i)&&ae(e,i,t[i]);if(ee)for(var i of ee(t))me.call(t,i)&&ae(e,i,t[i]);return e},$=(e,t)=>ue(e,pe(t));import{c as he,r as F,e as ge,j as a,M as d,f as xe,a0 as ve,i as ke}from"./fg33krlcm0qyi6yw.js";import{ag as be,w as je,p1 as Se,fP as We,b as Me,m as we,V as ye,mw as Ne,aa as Ce,Y as Q,R as se,rM as Pe,t5 as De,r1 as Ae,_ as _e,$ as Ee,aK as te,C as Oe,x as Re,n as ie,W as oe,H as Be}from"./mtk1qztvnb31pw5r.js";import{H as Ue}from"./o92vxzxwc8gk40ts.js";import{W as Ie}from"./f9jzes5xr4mq3zrh.js";import{go as Te,gp as Le}from"./k65njl5wlgspihfr.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";function Ye(){"use forget";var J,X;const e=he.c(64),t=be(),{data:i}=je(),g=Me(),s=Se(i),c=We(He),N=s!=null||i!=null,[u,m]=F.useState(!1),h=i==null?void 0:i.accountItems,{count:p}=Te((J=s==null?void 0:s.id)!=null?J:"");let P;e[0]!==g?(P=Le(),e[0]=g,e[1]=P):P=e[1];const f=P,ce=s==null?void 0:s.id,o=h==null?void 0:h.find(x=>x.id===ce),V=!((X=s==null?void 0:s.eligibleForReactivation)!=null?X:!1),H=(s==null?void 0:s.isOwnerOfAccount())&&s.isSelfServeBusiness()&&!s.hasPaidSubscription()&&!V,G=(s==null?void 0:s.isOwnerOfAccount())&&s.isSelfServeBusiness()&&s.hasPaidSubscription()&&!V;let D;e[2]!==h?(D=h==null?void 0:h.filter(Fe),e[2]=h,e[3]=D):D=e[3];const C=D,v=ge(),K=we();let l=Ne;s&&(l=s.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"));let A,_;e[4]!==s?(A=()=>{s||(_e.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),Ee.logEvent("chatgpt_undefined_current_account"))},_=[s],e[4]=s,e[5]=A,e[6]=_):(A=e[5],_=e[6]),F.useEffect(A,_);let E;e[7]!==g?(E=ye(g,"1624584294",{disableExposureLog:!0}),e[7]=g,e[8]=E):E=e[8];const k=E;let O;e[9]!==o||e[10]!==k||e[11]!==f||e[12]!==c||e[13]!==l||e[14]!==p?(O=()=>{var Z;if(!o||!c||!k.get("enabled",!1))return;const x=Math.max(p,f),re=((Z=c.existingAccount)==null?void 0:Z.id)!==o.id,ne=c.minimumSeats<x,le=c.billingDetails.currency!==l;!re&&!ne&&!le||te.setPurchaseWorkspaceData($(r({},c),{existingAccount:o,minimumSeats:Math.max(c.minimumSeats,x),billingDetails:$(r({},c.billingDetails),{currency:l})}))},e[9]=o,e[10]=k,e[11]=f,e[12]=c,e[13]=l,e[14]=p,e[15]=O):O=e[15];let R;e[16]!==o||e[17]!==k||e[18]!==f||e[19]!==c||e[20]!==l||e[21]!==p?(R=[o,f,c,l,p,k],e[16]=o,e[17]=k,e[18]=f,e[19]=c,e[20]=l,e[21]=p,e[22]=R):R=e[22],F.useEffect(O,R);let B;e[23]!==o||e[24]!==f||e[25]!==l||e[26]!==p?(B=()=>{te.setPurchaseWorkspaceData({minimumSeats:Math.max(p,f),billingDetails:{currency:l},existingAccount:o})},e[23]=o,e[24]=f,e[25]=l,e[26]=p,e[27]=B):B=e[27];const q=B;let U;e[28]!==v||e[29]!==m||e[30]!==K?(U=async()=>{m(!0);try{const x=await se.safeGet("/payments/customer_portal");location.href=x.url,m(!1)}catch(x){m(!1),K.warning(v.formatMessage(n.unableToOpenStripeDashboard),{hasCloseButton:!0})}},e[28]=v,e[29]=m,e[30]=K,e[31]=U):U=e[31];const z=U;if(s==null||!o||!C)return null;let I;e[32]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx("span",{className:"text-lg",children:a.jsx(d,r({},n.workspaceDeactivated))}),e[32]=I):I=e[32];let b;e[33]!==o.data.profilePictureUrl?(b=a.jsx(Ce,{src:o.data.profilePictureUrl}),e[33]=o.data.profilePictureUrl,e[34]=b):b=e[34];let j;e[35]!==o.data.name?(j=a.jsx("div",{children:o.data.name}),e[35]=o.data.name,e[36]=j):j=e[36];let S;e[37]!==b||e[38]!==j?(S=a.jsxs("div",{className:"flex w-full items-center gap-2",children:[b,j]}),e[37]=b,e[38]=j,e[39]=S):S=e[39];let T;e[40]===Symbol.for("react.memo_cache_sentinel")?(T=a.jsx("div",{children:a.jsxs("ul",{className:"list-disc ps-5 text-sm",children:[a.jsx("li",{className:"mb-1",children:a.jsx(d,r({},n.chatHistoryUnavailable))}),a.jsx("li",{children:a.jsx(d,r({},n.otherWorkspacesAvailable))})]})}),e[40]=T):T=e[40];let W;e[41]!==H||e[42]!==u||e[43]!==q?(W=H&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(d,r({},n.purchaseNewSubscription))}),a.jsx(Q,{className:"m-auto mt-2 w-full",loading:u,onClick:q,children:a.jsx(d,r({},n.purchaseNewSubscriptionButton))})]}),e[41]=H,e[42]=u,e[43]=q,e[44]=W):W=e[44];let M;e[45]!==G||e[46]!==u||e[47]!==z?(M=G&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(d,r({},n.resolveOutstandingInvoice))}),a.jsx(Q,{className:"m-auto mt-2 w-full",loading:u,onClick:z,children:a.jsx(d,r({},n.manageSubscriptionButton))})]}),e[45]=G,e[46]=u,e[47]=z,e[48]=M):M=e[48];let L;e[49]===Symbol.for("react.memo_cache_sentinel")?(L=a.jsx(Ue,{}),e[49]=L):L=e[49];let w;e[50]!==C||e[51]!==v||e[52]!==u||e[53]!==m||e[54]!==t?(w=a.jsx("div",{className:"w-full justify-center",children:C.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"mb-2 text-base font-normal",children:a.jsx(d,r({},n.selectWorkspace))}),a.jsx(Ie,{data:C})]}):a.jsxs("div",{className:"flex flex-col gap-6 text-sm",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h3",{className:"text-base font-normal",children:a.jsx(d,r({},n.createPersonalWorkspace))}),a.jsx(d,r({},n.deactivatedWorkspaceReason))]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex w-full items-center gap-2",children:[t&&t.picture&&a.jsx("img",{alt:"Profile",src:t.picture,className:"flex h-6 w-6 items-center justify-center rounded-full"}),t&&a.jsx("span",{className:"truncate",children:t.name})]}),a.jsx(Q,{title:v.formatMessage(n.createPersonalWorkspaceButton),loading:u,onClick:async()=>{m(!0),await se.safePost("/accounts/personal"),Pe(De),Ae()},color:"primary",className:"ms-4"})]})]})}),e[50]=C,e[51]=v,e[52]=u,e[53]=m,e[54]=t,e[55]=w):w=e[55];let y;e[56]!==S||e[57]!==W||e[58]!==M||e[59]!==w?(y=a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[S,T,W,M,L,w]}),e[56]=S,e[57]=W,e[58]=M,e[59]=w,e[60]=y):y=e[60];let Y;return e[61]!==N||e[62]!==y?(Y=a.jsx(Oe,{testId:"modal-deactivated-workspace",type:"success",onClose:Re,isOpen:N,title:I,children:y}),e[61]=N,e[62]=y,e[63]=Y):Y=e[63],Y}function Fe(e){return!e.isDeactivated()}function He(e){return e.purchaseWorkspaceData}const n=xe({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),Ze=ve(function(){const t=ie(oe.workspaces),i=Be(),g=ie(oe.workspaceId),s=t.find(N=>N.id===g),c=ke();return F.useEffect(()=>{i&&(!s||!s.deactivated)&&c("/")},[i,s,c]),i&&(!s||!s.deactivated)?a.jsx("div",{}):a.jsx(Ye,{})});export{Ze as default};
//# sourceMappingURL=hmqm74isjfzfqqz0.js.map
