import{a0 as f,n as y,a1 as C,j as P,e as S,i as _,a as h,r as E,f as M}from"./fg33krlcm0qyi6yw.js";import{Z as g,S as p,H as L,L as m,ru as F,m as w,ad as b,b as T,V as x,P as A,$ as v,E as O}from"./mtk1qztvnb31pw5r.js";import{i as R,C as I}from"./ljzdp59n77a99uo8.js";import{cQ as k,dg as N}from"./k65njl5wlgspihfr.js";import"./fms8qmym5rar4wm3.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./iej0cupg2dqkmejt.js";import"./jamwnn6d0jz74foj.js";import"./c0yxya1tj5roedd5.js";function l({intl:o,message:e,navigate:s,toaster:a}){a.warning(o.formatMessage(e),{duration:5}),s("/#pricing")}function Q({checkoutFrom:o,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:n,isEligibleForProOnboarding:r,toaster:u}){const t=x(s,"2494348560");A.logPaymentSuccess({plan_type:e}),k(),e===m.PLUS&&v.logEvent("chatgpt_plus_payment_success_page"),a.isFree()?n.invalidateQueries(O()):o?(g.removeItem(p.CheckoutFrom),window.location.href=I[o]):r&&t.get("enable_ca_pro_onboarding_flow",!1)?window.location.href="/payments/success-ind":(c("/"),u.success(i.formatMessage(d.paymentConfirmationToastMessage,{planName:N(e)}),{duration:5}))}function j({checkoutFrom:o,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=T(),n=S(),r=_(),u=h(),t=w();return E.useEffect(()=>{switch(a){case"success":return Q({checkoutFrom:o,checkoutPlanType:e,ctx:c,currentAccount:s,intl:n,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return l({intl:n,toaster:t,navigate:r,message:d.paymentFailedToastMessage});case"other_error":return l({intl:n,toaster:t,navigate:r,message:b.somethingWentWrong})}},[o,e,c,s,n,i,r,a,u,t]),null}const Z=f(function(){var t;const[e]=y(),s=g.getItem(p.CheckoutFrom),a=L(),i=C(),c=(t=e.get("plan_type"))!=null?t:m.PLUS,{anyConnectorEnabled:n,isLoading:r}=F({});if(!a||r)return null;const u=!n&&c===m.PRO;return P.jsx(j,{checkoutFrom:R(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),d=M({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{Z as default};
//# sourceMappingURL=hhzu223ci45bvxkr.js.map
