import{ex as a,ey as s}from"./k65njl5wlgspihfr.js";import{s5 as u,aU as w}from"./mtk1qztvnb31pw5r.js";const c="/service-worker/events.js";function f(t){const r="=".repeat((4-t.length%4)%4),o=(t+r).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(o),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}async function p(){if(typeof window>"u"||typeof navigator>"u")throw new Error("Push registration not supported in SSR");if(!("serviceWorker"in navigator&&"PushManager"in window))throw new Error("Push registration not supported");return await(await navigator.serviceWorker.register(c)).pushManager.getSubscription()}async function b(){if(typeof window>"u")return!1;const t="serviceWorker"in navigator,r="Notification"in window;return t&&r}async function y(){try{if(await p())return u(d),!0}catch(t){}return!1}async function v(){if(typeof window>"u"||typeof navigator>"u")throw new Error("Push registration not supported in SSR");if(!("serviceWorker"in navigator&&"PushManager"in window))throw new Error("Push registration not supported");const t=w("BElP4rBIs6aV_3Ic7Fl2rBw_a27isvPyMl_W4WwtlqsiehOYFYnwE21byf9bvFGEwWL8-k-zjZfGCG8HHKGW7OQ"),r=f(t),i=(await(await navigator.serviceWorker.register(c)).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})).toJSON();if(i.keys===void 0)throw new Error("Subscription keys are undefined");if(i.endpoint===void 0)throw new Error("Subscription endpoint is undefined");s.logSystemSuccess(),s.logRegistration();const e=await a.getOrCreateSubscription({endpoint:i.endpoint,p256dh:i.keys.p256dh,auth:i.keys.auth});return u(d),e}async function d(){var t;if(!(typeof window>"u"||typeof navigator>"u")&&"serviceWorker"in navigator&&"PushManager"in window)try{const r=await p();if(!r)return;const n=(t=r.toJSON().keys)==null?void 0:t.auth;n&&await a.deregisterSubscription({token:n}).catch(()=>{}),await r.unsubscribe().catch(()=>{})}catch(r){}}export{y as a,v as c,b as g};
//# sourceMappingURL=lwurb2j1h4mmtrea.js.map
