var N=Object.freeze,L=Object.defineProperty,z=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var C=(s,r,e)=>r in s?L(s,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[r]=e,x=(s,r)=>{for(var e in r||(r={}))A.call(r,e)&&C(s,e,r[e]);if(k)for(var e of k(r))E.call(r,e)&&C(s,e,r[e]);return s},g=(s,r)=>z(s,X(r));var D=s=>typeof s=="symbol"?s:s+"",I=(s,r)=>{var e={};for(var n in s)A.call(s,n)&&r.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&k)for(var n of k(s))r.indexOf(n)<0&&E.call(s,n)&&(e[n]=s[n]);return e};var R=(s,r)=>N(L(s,"raw",{value:N(r||s.slice())}));import{j as a,M as y,f as b,r as j,e as Y}from"./fg33krlcm0qyi6yw.js";import{A as G}from"./mr025ud04jb4rh0r.js";import{A as J}from"./jkdx73dfg7n0gxrn.js";import{T as q,l as T,c0 as W,F as Q,lc as Z,P as V,m as K,_ as ee}from"./mtk1qztvnb31pw5r.js";import{p as te}from"./oc29jc50rrvtu7z8.js";import{S as se,R as ae,B as re,T as ne,a as S,C as ie,X as oe,b as le,Y as ce,c as de,d as H,M as me,e as fe,f as xe,r as he}from"./e5dt5h62tjqfeb7c.js";function ue({value:s,previousValue:r,hideTrend:e=!1,className:n}){let h;if(!e&&s!=="loading"&&r!=null&&r!=="loading"){const c=s>=r,m=c?J:G,p=(s===0&&r===0?0:Math.abs(s-r)/r).toLocaleString(void 0,{style:"percent"});h=a.jsxs(q,{side:"right",customBackgroundColorClassName:"bg-token-main-surface-primary-inverse",className:T("inline-flex items-center",{"text-green-500":c,"text-red-500":!c}),label:a.jsx("span",{className:"text-token-main-surface-primary font-normal",children:a.jsx(y,g(x({},c?_.increaseHelpText:_.decreaseHelpText),{values:{amount:p}}))}),children:[a.jsx(m,{}),a.jsx("span",{children:p})]})}return a.jsxs("div",{className:T("text-token-text-primary flex items-center gap-1 font-medium",n),children:[a.jsx("span",{className:"text-xl",children:s!=="loading"&&s.toLocaleString()}),h,(s==="loading"||r==="loading"&&!e)&&a.jsx(W,{})]})}const _=b({increaseHelpText:{id:"workspaceUsage.trend.increaseHelpText",defaultMessage:"Up {amount} since the previous month"},decreaseHelpText:{id:"workspaceUsage.trend.decreaseHelpText",defaultMessage:"Down {amount} since the previous month"}});function we(s){const{title:r,data:e,otherGroupLabel:n,displayMoM:h,clientEventSource:c,hideLegend:m=!1,hideTopValue:f=!1,tooltipLabelFormatter:p}=s,u=j.useMemo(()=>e==="loading"?[]:n?[...Object.keys(e.metrics).slice(-9),"other"]:Object.keys(e.metrics).slice(-10),[n,e]),d=j.useMemo(()=>e==="loading"?"loading":n?e.data.map(t=>!("values"in t)||"other"in t.values?t:g(x({},t),{values:g(x({},t.values),{other:t.total-u.reduce((i,o)=>{var l;return i+((l=t.values[o])!=null?l:0)},0)})})):e.data,[e,n,u]),v=j.useMemo(()=>d==="loading"?0:d.reduce((t,i)=>Math.max(t,"total"in i?i.total:0),0),[d]),M=j.useMemo(()=>{if(e==="loading"||d==="loading")return{};let t;return n?t=g(x({},e.metrics),{other:{displayName:n}}):t=e.metrics,Object.fromEntries(u.map(i=>({total:d.reduce((l,w)=>{var O;return l+("values"in w&&(O=w.values[i])!=null?O:0)},0),groupKey:i})).sort(({total:i},{total:o})=>o-i).map(({total:i,groupKey:o},l)=>[o,{displayName:t[o].displayName,total:i,color:se[l]}]))},[e,n,u,d]);return a.jsxs("div",{className:"border-token-border-default mb-4 flex min-h-[350px] flex-col rounded-lg border pt-4 pb-4",children:[a.jsxs("div",{className:"px-6",children:[a.jsx("div",{className:"text-token-text-secondary text-sm",children:a.jsx(y,x({},r))}),!f&&a.jsx(ue,{value:e==="loading"?"loading":e.monthOverMonth.cur_month,previousValue:e==="loading"?"loading":e.monthOverMonth.last_month,hideTrend:!h,className:"mb-4 h-7"})]}),a.jsx(ge,{processedData:d,maxTotal:v,seriesMetadata:M,hideLegend:m,clientEventSource:c,tooltipLabelFormatter:p})]})}const F=s=>s.toLocaleString(),U="default";var P;const $=Q.div(P||(P=R(["flex h-full grow items-center justify-center text-lg text-token-text-tertiary"])));function ge({processedData:s,maxTotal:r,seriesMetadata:e,hideLegend:n,clientEventSource:h,tooltipLabelFormatter:c}){const m=j.useRef(void 0),[f,p]=j.useState(),u=(t,i)=>()=>{t&&m.current!==t&&(m.current=t,V.logEvent("Workspace Usage: Chart Series Hovered",{groupKey:t,seriesCount:i,clientEventSource:h})),p(t)};let d=Object.keys(e);if(f){const M=e,{[f]:t}=M,i=I(M,[D(f)]);d=[...Object.keys(i),f]}if(s==="loading")return a.jsx($,{children:a.jsx(W,{})});if(r===0)return a.jsx($,{children:a.jsx(y,x({},je.noData))});const v=Object.entries(e).sort(([t])=>t==="other"?1:-1);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:T(he,"flex grow items-center"),children:a.jsx(ae,{width:"100%",height:220,children:a.jsxs(re,{data:s,margin:{left:-20,top:14,right:20},children:[a.jsx(ne,{isAnimationActive:!1,content:a.jsx(ie,{valueFormatter:F,metricToLabel:e,labelFormatter:c}),cursor:{opacity:.2,fill:S}}),a.jsx(oe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:le,tickFormatter:t=>Z(te(t),"MMM d"),interval:s.length-2}),a.jsx(ce,{axisLine:!1,tickLine:!1,domain:[0,r],ticks:[0,r],fontSize:11,fill:S,tick:t=>a.jsx(de,g(x({},t),{textAnchor:"start",y:t.payload.value===0?t.y:t.y-10,x:t.x-10,fontWeight:400,children:F(t.payload.value)}))}),d.map((t,i)=>{const o="values[".concat(JSON.stringify(t),"]"),l=f&&f!==t;return a.jsx(H,{opacity:l?.15:1,dataKey:o,name:t,stackId:U,isAnimationActive:!1,fill:l?me:e[t].color,radius:i===0?[4,4,0,0]:void 0},t)}).reverse(),a.jsx(H,{dataKey:"blank",minPointSize:1,stackId:U,isAnimationActive:!1,children:s.map((t,i)=>a.jsx(fe,{opacity:.5,fill:"blank"in t&&t.blank===0?S:"transparent"},"cell-".concat(i)))}),a.jsx(xe,{y:r,stroke:S,strokeDasharray:"3 3",shape:t=>a.jsx("line",g(x({},t),{x1:22}))})]})})}),!n&&a.jsx("div",{className:"text-token-text-primary flex w-full flex-wrap items-center justify-center text-sm",children:v.map(([t,{displayName:i,total:o,color:l}])=>a.jsxs("div",{className:"mx-4 mb-1 flex cursor-pointer items-center justify-center",title:i,onMouseOut:u(void 0,v.length),onMouseOver:u(t,v.length),children:[a.jsx("div",{className:"me-1 h-2 w-2 rounded-[1px]",style:{backgroundColor:l}}),a.jsx("span",{className:"me-1 max-w-32 overflow-hidden text-ellipsis whitespace-nowrap",children:i}),a.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:"(".concat(pe.format(o),")")})]},t))})]})}const pe=new Intl.NumberFormat(void 0,{notation:"compact",maximumSignificantDigits:3}),je=b({noData:{id:"workspaceUsage.overviewChart.noData",defaultMessage:"No data for this period"}});function Oe(s,{toastId:r,message:e}={}){const n=K(),h=Y();return async(...c)=>{try{return await s(...c)}catch(m){throw n.danger(h.formatMessage(e!=null?e:B.defaultErrorToastMessage),{id:r,loggingTitle:e&&typeof e.defaultMessage=="string"?e.defaultMessage:B.defaultErrorToastMessage.defaultMessage}),ee.addError(m),m}}}const B=b({defaultErrorToastMessage:{id:"defaultErrorToastMessage",defaultMessage:"Something went wrong. If this issue persists please contact us through our help center at help.openai.com."}});export{we as O,pe as T,ue as V,Oe as u};
//# sourceMappingURL=ha43hfhn8zonl98y.js.map
