var it=Object.defineProperty,ct=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var He=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable;var Je=(o,e,a)=>e in o?it(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a,V=(o,e)=>{for(var a in e||(e={}))ft.call(e,a)&&Je(o,a,e[a]);if(He)for(var a of He(e))pt.call(e,a)&&Je(o,a,e[a]);return o},Ie=(o,e)=>ct(o,mt(e));import{e as Ve,a as Pe,u as ut,j as t,M as u,c as ht,r as M}from"./fg33krlcm0qyi6yw.js";import{m as et,P as te,R as xt,C as tt,a9 as P,ad as gt,b as bt,d as jt,H as _t,tP as yt,tQ as wt,iw as Mt,g2 as k,nP as Nt,bO as kt,h1 as ee,tR as vt,dq as Ct,bI as Re,aY as Tt,cU as Et,ny as St}from"./mtk1qztvnb31pw5r.js";import{jD as st,jE as It,z as Rt,dL as Ot}from"./k65njl5wlgspihfr.js";import{C as Wt}from"./dg5jraediw4l39ow.js";import"./hb1mva1gmw4bcs8w.js";import"./efooahjtdr85x1lo.js";import"./km71i01x6ma5r62b.js";import"./mbql81gwv5du9dtu.js";import"./k43gn7pl526u53kc.js";const Dt=({onClose:o,promptId:e,promptTitle:a,promptSystemHint:s,promptSources:p})=>{const m=Ve(),j=et(),d=Pe(),{mutate:n,isPending:h}=ut({mutationFn:i=>xt.safeDelete("/templated_prompts/{prompt_id}",{parameters:{path:{prompt_id:i}}}),onError:()=>{j.danger(m.formatMessage({id:"gYG9AO",defaultMessage:"Failed to delete prompt"}))},onSuccess:()=>{var i,y;te.logEventWithStatsig("chatgpt_web_prompt_deleted","chatgpt_web_prompt_deleted",{hint:s!=null?s:"none",hasSources:((i=p==null?void 0:p.length)!=null?i:0)>0,sources:p!=null?p:"",sourceCount:(y=p==null?void 0:p.length)!=null?y:0}),o(!1),j.success(m.formatMessage({id:"cptqwY",defaultMessage:"{promptTitle} was deleted"},{promptTitle:a})),d.invalidateQueries({queryKey:["prompt-templates"],exact:!1})}});return t.jsx(tt,{isOpen:!0,onClose:()=>o(!1),title:m.formatMessage({id:"rGrRdA",defaultMessage:"Delete {promptTitle}?"},{promptTitle:a}),testId:"modal-delete-prompt",type:"danger",size:"custom",className:"max-w-[400px] p-2",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"ODmsWc",defaultMessage:"This cannot be undone."})}),t.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[t.jsx(P,{color:"secondary",onClick:()=>o(!1),children:t.jsx(u,V({},gt.cancelButtonText))}),t.jsx(P,{color:"danger",disabled:h,loading:h,onClick:()=>n(e),children:t.jsx(u,{id:"x3h5Nl",defaultMessage:"Delete"})})]})]})})},At=new Set(["github_sync_connector","github_connector"]),Lt={display:"inline",position:"relative",color:"#2F7CF5",borderRadius:"2px",paddingInline:0,paddingBlock:0,lineHeight:"1rem",boxShadow:"0 0 0 2px rgba(47, 124, 245, 0.10)",backgroundColor:"rgba(47, 124, 245, 0.10)",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},qt=({activeSystemHint:o,selectedSources:e,setSelectedSources:a,selectedMCPSources:s,setSelectedMCPSources:p})=>{const m=n=>{ee(n)?p(new Set([...s,n])):a(new Set([...e,n]))},j=n=>{ee(n)?p(new Set([...s].filter(h=>h!==n))):a(new Set([...e].filter(h=>h!==n)))},d=n=>{if(ee(n)){const i=new Set(s);i.has(n)?i.delete(n):i.add(n),p(i);return}const h=new Set(e);h.has(n)?h.delete(n):h.add(n),a(h)};return t.jsx(Wt,{clientThreadId:St,activeSystemHint:o,selectedSources:e,selectedMCPSources:s,addSource:m,deleteSource:j,toggleSource:d,connectedOnly:!0,hiddenTypes:At,hideMcpConnectors:!0})},Ft=o=>{const e=[];let a=0;return o.replace(vt,(s,p,m)=>(m>a&&e.push(t.jsx("span",{children:o.slice(a,m)},"txt-".concat(m))),e.push(t.jsx("span",{style:Lt,children:s},"var-".concat(m))),a=m+s.length,s)),a<o.length&&e.push(t.jsx("span",{children:o.slice(a)},"tail-".concat(a))),e};function ls(o){"use forget";var qe,Fe,Ge,ze,Be,Ue,Ye,Ke,Qe,$e,Xe;const e=ht.c(126),{onClose:a,prompt:s,referer:p}=o,m=p===void 0?"none":p,j=bt(),d=Ve(),n=et();let h;e[0]!==j?(h=()=>Ct(j),e[0]=j,e[1]=h):h=e[1];const i=jt(h),y=Pe(),c=_t();let se;e[2]!==y?(se=r=>{y.setQueriesData({queryKey:["prompt-templates"],exact:!1},f=>{if(!f||f.pages.length===0)return f;const[x,...J]=f.pages,Ze=r.id===void 0||r.id==null?null:String(r.id),nt=Ze==null?x.prompts:x.prompts.filter(Se=>Se.id===void 0||Se.id==null?!0:String(Se.id)!==Ze),dt=[r,...nt];return Ie(V({},f),{pages:[Ie(V({},x),{prompts:dt}),...J]})})},e[2]=y,e[3]=se):se=e[3];const Ne=se,v=!!(s!=null&&s.id),[le,lt]=M.useState(!1),[N,at]=M.useState((qe=s==null?void 0:s.name)!=null?qe:""),[_,ot]=M.useState((Fe=s==null?void 0:s.prompt)!=null?Fe:"");let ae;e[4]!==(s==null?void 0:s.sources)?(ae=new Set((ze=(Ge=s==null?void 0:s.sources)==null?void 0:Ge.filter(Qt))!=null?ze:[]),e[4]=s==null?void 0:s.sources,e[5]=ae):ae=e[5];const[g,Oe]=M.useState(ae);let oe;e[6]!==(s==null?void 0:s.sources)?(oe=new Set((Ue=(Be=s==null?void 0:s.sources)==null?void 0:Be.filter(Kt))!=null?Ue:[]),e[6]=s==null?void 0:s.sources,e[7]=oe):oe=e[7];const[b,We]=M.useState(oe),[w,De]=M.useState((Ye=s==null?void 0:s.system_hint)!=null?Ye:null),[C,rt]=M.useState(!!((Ke=s==null?void 0:s.shared_to_workspace)!=null?Ke:c!=null&&c.getWorkspaceId())),re=M.useRef(null);let ne;e[8]!==w||e[9]!==i?(ne=w&&(i==null?void 0:i.find(r=>r.systemHint===w)),e[8]=w,e[9]=i,e[10]=ne):ne=e[10];const l=ne;let de;e[11]!==(l==null?void 0:l.systemHint)||e[12]!==d||e[13]!==a||e[14]!==Ne||e[15]!==m||e[16]!==b||e[17]!==g||e[18]!==n?(de={onError:Yt,onSuccess:r=>{var x;n.success(d.formatMessage({id:"CexTPp",defaultMessage:"Prompt created"}));const f=[...g,...b].filter(J=>(l==null?void 0:l.systemHint)===Re.Research?!0:J!=="web");te.logEventWithStatsig("chatgpt_web_prompt_created","chatgpt_web_prompt_created",{referer:m,hint:(x=l==null?void 0:l.systemHint)!=null?x:"none",hasSources:f.length>0,sourceCount:f.length,sources:f.join(",")}),Ne(r),a(!1)}},e[11]=l==null?void 0:l.systemHint,e[12]=d,e[13]=a,e[14]=Ne,e[15]=m,e[16]=b,e[17]=g,e[18]=n,e[19]=de):de=e[19];const{mutate:ke,isPending:Ae}=yt(de);let ie;e[20]!==(l==null?void 0:l.systemHint)||e[21]!==d||e[22]!==a||e[23]!==y||e[24]!==m||e[25]!==b||e[26]!==g||e[27]!==n?(ie={onError:Ut,onSuccess:()=>{var f;n.success(d.formatMessage({id:"caj6tF",defaultMessage:"Prompt updated"}));const r=[...g,...b].filter(x=>(l==null?void 0:l.systemHint)===Re.Research?!0:x!=="web");te.logEventWithStatsig("chatgpt_web_prompt_edited","chatgpt_web_prompt_edited",{referer:m,hint:(f=l==null?void 0:l.systemHint)!=null?f:"none",hasSources:r.length>0,sourceCount:r.length,sources:r.join(",")}),y.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),a(!1)}},e[20]=l==null?void 0:l.systemHint,e[21]=d,e[22]=a,e[23]=y,e[24]=m,e[25]=b,e[26]=g,e[27]=n,e[28]=ie):ie=e[28];const{mutate:ve,isPending:Le}=wt(ie);let ce;e[29]!==c||e[30]!==(l==null?void 0:l.systemHint)||e[31]!==ke||e[32]!==s||e[33]!==v||e[34]!==C||e[35]!==N||e[36]!==_||e[37]!==b||e[38]!==g||e[39]!==ve?(ce=()=>{var f;const r={name:N,prompt:_,system_hint:l==null?void 0:l.systemHint,sources:[...g,...b].filter(x=>(l==null?void 0:l.systemHint)===Re.Research?!0:x!=="web"),shared_to_workspace:c!=null&&c.getWorkspaceId()?C:!1};if(v){if(!(s!=null&&s.id))return;ve({promptId:(f=s==null?void 0:s.id)!=null?f:"",prompt:V(V({},s),r)})}else ke(r)},e[29]=c,e[30]=l==null?void 0:l.systemHint,e[31]=ke,e[32]=s,e[33]=v,e[34]=C,e[35]=N,e[36]=_,e[37]=b,e[38]=g,e[39]=ve,e[40]=ce):ce=e[40];const Ce=ce;let T;e[41]!==a?(T=()=>a(!1),e[41]=a,e[42]=T):T=e[42];let E;e[43]!==v?(E=t.jsx("div",{className:"text-token-text-primary text-lg font-medium",children:v?t.jsx(u,{id:"WTfocU",defaultMessage:"Edit prompt"}):t.jsx(u,{id:"ZOolU6",defaultMessage:"Create prompt"})}),e[43]=v,e[44]=E):E=e[44];let me;e[45]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"xdGuNa",defaultMessage:"Prompts are sequences of text that you can quickly add to your messages. Type / to find and use your prompts in ChatGPT."})}),e[45]=me):me=e[45];let S;e[46]!==E?(S=t.jsxs("div",{className:"flex flex-col gap-2",children:[E,me]}),e[46]=E,e[47]=S):S=e[47];let I;e[48]!==a?(I=t.jsx(Tt,{onClick:()=>a(!1),className:"px-2"}),e[48]=a,e[49]=I):I=e[49];let R;e[50]!==S||e[51]!==I?(R=t.jsxs("div",{className:"flex gap-2",children:[S,I]}),e[50]=S,e[51]=I,e[52]=R):R=e[52];let fe;e[53]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"MEkw2s",defaultMessage:"Prompt name"})}),e[53]=fe):fe=e[53];let O;e[54]!==d?(O=d.formatMessage({id:"E/i+u3",defaultMessage:"Name your prompt"}),e[54]=d,e[55]=O):O=e[55];let pe;e[56]===Symbol.for("react.memo_cache_sentinel")?(pe=r=>at(r.target.value),e[56]=pe):pe=e[56];let W;e[57]!==N||e[58]!==O?(W=t.jsxs("div",{className:"flex flex-col gap-2",children:[fe,t.jsx(Rt,{autoComplete:"off",name:"prompt-name",className:"w-full bg-transparent",ariaLabel:"Prompt name",placeholder:O,value:N,onChange:pe})]}),e[57]=N,e[58]=O,e[59]=W):W=e[59];let ue;e[60]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"6XhnsZ",defaultMessage:"Prompt text"})}),e[60]=ue):ue=e[60];let he;e[61]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs("div",{className:"flex flex-col gap-1",children:[ue,t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"MzLGuT",defaultMessage:"Use '{'brackets'}' to create text variables"})})]}),e[61]=he):he=e[61];let D;e[62]!==_?(D=Ft(_),e[62]=_,e[63]=D):D=e[63];let A;e[64]!==D?(A=t.jsx("div",{"aria-hidden":!0,className:"text-token-text-primary pointer-events-none absolute inset-0 overflow-hidden px-3 py-2 text-sm leading-5 break-words whitespace-pre-wrap",ref:re,children:D}),e[64]=D,e[65]=A):A=e[65];let xe,ge;e[66]===Symbol.for("react.memo_cache_sentinel")?(xe=r=>ot(r.target.value),ge=r=>{re.current&&(re.current.scrollTop=r.currentTarget.scrollTop,re.current.scrollLeft=r.currentTarget.scrollLeft)},e[66]=xe,e[67]=ge):(xe=e[66],ge=e[67]);let L;e[68]!==d?(L=d.formatMessage({id:"v1n6Wj",defaultMessage:"This is the text that will appear when you @mention your prompt"}),e[68]=d,e[69]=L):L=e[69];let be;e[70]===Symbol.for("react.memo_cache_sentinel")?(be={WebkitTextFillColor:"transparent"},e[70]=be):be=e[70];let q;e[71]!==_||e[72]!==L?(q=t.jsx(Ot,{autoComplete:"off",name:"prompt-text",value:_,onChange:xe,onScroll:ge,placeholder:L,className:"caret-token-text-primary h-40 w-full resize-none rounded-none border-0 bg-transparent px-3 py-2 text-sm leading-5 text-transparent focus:border-0 focus:ring-0",style:be}),e[71]=_,e[72]=L,e[73]=q):q=e[73];let F;e[74]!==A||e[75]!==q?(F=t.jsxs("div",{className:"flex flex-col gap-2",children:[he,t.jsxs("div",{className:"border-token-border-default focus-within:border-token-text-primary focus-within:ring-token-text-primary relative overflow-hidden rounded-md border",children:[A,q]})]}),e[74]=A,e[75]=q,e[76]=F):F=e[76];let je;e[77]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("span",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"/EOojc",defaultMessage:"Automatically enable tool"})}),e[77]=je):je=e[77];let _e;e[78]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsxs("div",{className:"flex items-baseline gap-1",children:[je,t.jsx("span",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"AS68OR",defaultMessage:"(optional)"})})]}),e[78]=_e):_e=e[78];let G;e[79]!==l||e[80]!==w||e[81]!==d||e[82]!==le||e[83]!==i?(G=l?t.jsxs("button",{"data-is-selected":!0,className:"bg-token-interactive-bg-accent-muted-hover composer-btn rounded-full p-2 [view-transition-name:var(--vt-composer-active-system-hint-pill)]","aria-label":d.formatMessage({id:"HW9RTL",defaultMessage:"Disable {systemHintName}"},{systemHintName:(Qe=l.shortLabel)!=null?Qe:l.name}),onClick:()=>{De(null),Oe(new Set),We(new Set)},children:[t.jsx(st,{hint:l,isNextToLabel:!0}),t.jsx("span",{className:"mx-1.5 [[data-collapse-labels]_&]:sr-only",children:($e=l.shortLabel)!=null?$e:l.name}),t.jsx(Mt,{})]}):t.jsxs(k.Root,{open:le,onOpenChange:lt,children:[t.jsx(k.Trigger,{className:"composer-btn border-token-border-default! gap-1.5 rounded-full border-1 p-2","data-opened":Nt(le),onClick:Bt,onFocusCapture:zt,children:t.jsxs(t.Fragment,{children:[t.jsx(It,{}),t.jsx("span",{children:t.jsx(u,{id:"lhdTHv",defaultMessage:"Select tool"})})]})}),t.jsx(k.Portal,{children:t.jsx(k.Content,{size:"auto",children:t.jsx(k.RadioGroup,{value:w!=null?w:void 0,onValueChange:r=>De(r),children:i==null?void 0:i.map(Gt)})})})]}),e[79]=l,e[80]=w,e[81]=d,e[82]=le,e[83]=i,e[84]=G):G=e[84];let z;e[85]!==l||e[86]!==b||e[87]!==g?(z=l&&t.jsx(qt,{activeSystemHint:l,selectedSources:g,setSelectedSources:Oe,selectedMCPSources:b,setSelectedMCPSources:We}),e[85]=l,e[86]=b,e[87]=g,e[88]=z):z=e[88];let B;e[89]!==G||e[90]!==z?(B=t.jsxs("div",{className:"flex flex-col gap-2",children:[_e,t.jsxs("div",{className:"flex gap-2",children:[G,z]})]}),e[89]=G,e[90]=z,e[91]=B):B=e[91];let U;e[92]!==c||e[93]!==d||e[94]!==C?(U=!!(c!=null&&c.getWorkspaceId())&&t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{id:"available-to-team-members-label",className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"YFLYbD",defaultMessage:"Available to team members"})}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"l0fmJX",defaultMessage:"Allow team members at {workspaceName} to find and use this prompt",values:{workspaceName:(Xe=c==null?void 0:c.name)!=null?Xe:d.formatMessage({id:"qt3Hqs",defaultMessage:"your workspace"})}})})]}),t.jsx(kt,{"aria-labelledby":"available-to-team-members-label",checked:C,disabled:!(c!=null&&c.getWorkspaceId()),onCheckedChange:r=>{rt(r)}})]}),e[92]=c,e[93]=d,e[94]=C,e[95]=U):U=e[95];let Y;e[96]!==j||e[97]!==s||e[98]!==a?(Y=s?t.jsx(P,{color:"danger-outline",onClick:()=>{var r,f,x,J;return Et(j,Dt,{promptId:(r=s==null?void 0:s.id)!=null?r:"",promptTitle:(f=s==null?void 0:s.name)!=null?f:"",promptSystemHint:(x=s==null?void 0:s.system_hint)!=null?x:null,promptSources:((J=s==null?void 0:s.sources)!=null?J:[]).join(","),onClose:()=>a(!1)})},children:t.jsx(u,{id:"x3h5Nl",defaultMessage:"Delete"})}):t.jsx("div",{className:"flex-1"}),e[96]=j,e[97]=s,e[98]=a,e[99]=Y):Y=e[99];let K;e[100]!==a?(K=()=>a(!1),e[100]=a,e[101]=K):K=e[101];let ye;e[102]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(u,{id:"ixOzv9",defaultMessage:"Cancel"}),e[102]=ye):ye=e[102];let Q;e[103]!==K?(Q=t.jsx(P,{color:"secondary",onClick:K,children:ye}),e[103]=K,e[104]=Q):Q=e[104];const Te=Ae||Le,Ee=!N||!_||Ae||Le;let we;e[105]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(u,{id:"vkpL39",defaultMessage:"Save"}),e[105]=we):we=e[105];let $;e[106]!==Ce||e[107]!==Te||e[108]!==Ee?($=t.jsx(P,{loading:Te,disabled:Ee,onClick:Ce,children:we}),e[106]=Ce,e[107]=Te,e[108]=Ee,e[109]=$):$=e[109];let X;e[110]!==Q||e[111]!==$?(X=t.jsxs("div",{className:"flex items-center gap-2",children:[Q,$]}),e[110]=Q,e[111]=$,e[112]=X):X=e[112];let Z;e[113]!==Y||e[114]!==X?(Z=t.jsxs("div",{className:"mt-4 flex justify-between gap-2",children:[Y,X]}),e[113]=Y,e[114]=X,e[115]=Z):Z=e[115];let H;e[116]!==R||e[117]!==W||e[118]!==F||e[119]!==B||e[120]!==U||e[121]!==Z?(H=t.jsxs("div",{className:"flex flex-col gap-6",children:[R,W,F,B,U,Z]}),e[116]=R,e[117]=W,e[118]=F,e[119]=B,e[120]=U,e[121]=Z,e[122]=H):H=e[122];let Me;return e[123]!==T||e[124]!==H?(Me=t.jsx(tt,{isOpen:!0,onClose:T,testId:"modal-create-prompt",type:"success",size:"custom",className:"relative flex max-w-[520px] flex-col p-2",children:H}),e[123]=T,e[124]=H,e[125]=Me):Me=e[125],Me}function Gt(o){return t.jsx(k.RadioItem,{className:"hover:bg-token-bg-tertiary",color:"default",icon:t.jsx(st,{hint:o,isNextToLabel:!0}),label:o.name,trailing:t.jsx(k.RadioItemCheck,{}),value:o.systemHint},o.systemHint)}function zt(o){o.stopPropagation()}function Bt(o){o.preventDefault()}function Ut(o){te.logEventWithStatsig("chatgpt_web_prompt_error","chatgpt_web_prompt_error",{context:"EDIT",detail:o.message})}function Yt(o){te.logEventWithStatsig("chatgpt_web_prompt_error","chatgpt_web_prompt_error",{context:"CREATE",detail:o.message})}function Kt(o){return ee(o)}function Qt(o){return!ee(o)}export{ls as CreatePromptModal};
//# sourceMappingURL=c1cxx6ihf6t1t9cb.js.map
