const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/d3v7rke6otd26cez.js","assets/fg33krlcm0qyi6yw.js","assets/mtk1qztvnb31pw5r.js","assets/root-mcq3deyb.css","assets/hie92tcr1tc04u0h.js","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css","assets/cdscbhv4xu1gie74.js","assets/j6c7t6fq2e2dzq0l.js","assets/uwm5r01je8eaqgfc.js","assets/ir9gt1ho5jxrc5j1.js","assets/jaya7jppqn559p04.js","assets/mh627gt08lvdeswk.js","assets/k43gn7pl526u53kc.js","assets/jdzosouyvpzu0tpb.js","assets/o4kivb8wp4536409.js","assets/nq1hpdu2db6kh8n1.js","assets/mr025ud04jb4rh0r.js","assets/dcp7peq4y6a4kabz.js","assets/l6gg4oal15ycpbhj.js","assets/27egyxvdbhiyko0z.js","assets/he7oe7s4xa3cph5y.js","assets/gy1lpvuoewmzh42c.js","assets/jed1ux7qibe55pmj.js","assets/h1em0bjkpkjv8ykw.js","assets/nfccle6oyncifphl.js","assets/hu1bt0oauegdhua6.js","assets/ojve869uwykk95at.js","assets/ly75bs3d14n5v622.js","assets/e4epv5uv3mte9vwk.js","assets/h7j5jaik108ahib8.js","assets/cu8wmvebhh39ned9.js","assets/mwvbcixk8j7xayed.js","assets/dy5lfx8pblnkst90.js","assets/fwtgnu9jfrrdfrmw.js","assets/jamwnn6d0jz74foj.js","assets/oa3pp0k35b2ppxx3.js","assets/ciyotrhew4275t06.js","assets/ojlr534s5rpslkxs.js","assets/i343cenm2z0sru19.js","assets/khjleze1r7lyk9e0.js","assets/l79tw55p1ybii0aj.js","assets/jawullnjvz8da20g.js","assets/c2pd1td4qqo2eofo.js","assets/b9zbambfgbao1jch.js","assets/bgx9m29b5moow7ak.js","assets/exbyaee45o0onuld.js","assets/ifr23omr9d78ntp2.js","assets/hcn3kohxpjzaoxwc.js","assets/iwjq7ihlx67l3ajk.js","assets/ft3sidzsg2kspvj9.js","assets/h0pbwkfesoibvhzi.js"])))=>i.map(i=>d[i]);
import{e as L,r as n,_ as O,j as e,M as x}from"./fg33krlcm0qyi6yw.js";import{gd as E,cL as R}from"./k65njl5wlgspihfr.js";import{bh as U,d as V,mR as W,_ as z,rY as K,M as j,T as Y,C as $,cU as q,b as F,sy as G}from"./mtk1qztvnb31pw5r.js";import{u as H}from"./bgx9m29b5moow7ak.js";function J(){return Q.stubThis((globalThis==null?void 0:globalThis.PublicKeyCredential)!==void 0&&typeof globalThis.PublicKeyCredential=="function")}const Q={stubThis:c=>c};function te({onClose:c,passkeys:y,onCreatePasskey:w,renderAsSheet:N}){"use no forget";const i=L(),_=F(),{removeMfa:S}=H({}),u=n.useRef(new Set),[m,C]=n.useState(null),[h,g]=n.useState(()=>[...y]);n.useEffect(()=>{g([...y])},[y]);const P=n.useMemo(()=>[...h].sort((s,l)=>{var t,o,p,v;const a=(o=(t=s.metadata)==null?void 0:t.create_time_seconds)!=null?o:0;return((v=(p=l.metadata)==null?void 0:p.create_time_seconds)!=null?v:0)-a}),[h]),T=U(()=>O(()=>import("./d3v7rke6otd26cez.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])).then(s=>s.DeletePasskeyModal)),A=V(W),b=!!N,M=G(),d=b&&!M,f=b&&M;n.useEffect(()=>{const s=J();C(s),s===!1&&z.addAction("passkey_unsupported_browser",{user_agent:K()})},[]);const D=()=>{m!==!1&&w()},k=e.jsx(j.Button,{title:i.formatMessage({id:"settingsModal.passkeysModal.createPasskeyCta",defaultMessage:"Create passkey"}),color:"secondary",visuallyDisabled:m===!1,"aria-disabled":m===!1||void 0,onClick:D}),B=m===!1?e.jsx(Y,{label:i.formatMessage({id:"settingsModal.passkeysModal.passkeyUnsupportedTooltip",defaultMessage:"Your browser doesnâ€™t support passkey"}),side:"top",children:e.jsx("span",{className:"flex justify-end",children:k})}):k,I=async s=>{var a,r;u.current.has(s.id)||(u.current.add(s.id),await S("passkey",s.id))||q(_,T,{factorId:s.id,passkeyName:(r=(a=s.metadata)==null?void 0:a.authenticator_name)!=null?r:null,onDeleted:t=>{g(o=>o.filter(p=>p.id!==t)),u.current.delete(t)},onClose:()=>{u.current.delete(s.id)}})};return e.jsxs($,{testId:"modal-passkeys",isOpen:!0,onClose:c,type:"success",showCloseButton:!0,hasSeparator:!0,showOverlayBackground:!f,overlayClassName:f?"bg-token-bg-primary":void 0,position:f?"top":void 0,className:d?"sm:border-token-border-light! max-sm:h-full max-sm:w-screen max-sm:max-w-none max-sm:rounded-none sm:w-[calc(100vw-2rem)] sm:max-w-[900px] sm:border":"max-w-[524px]!",topMargin:d?"large":void 0,isBottomSheet:d,contentSize:d?A?"fit":"fill":void 0,contentSheetViewClassName:d?"h-[max(100svh,100dvh,100%)]":void 0,headerClassName:"!px-6 !py-0 !h-[76px] !items-center",contentClassName:"!px-6 !pt-6 !pb-[24px]",modalActionsClassName:"!mt-[24px]",title:e.jsx("span",{className:"heading-sm [font-weight:500]",children:e.jsx(x,{id:"settingsModal.passkeysModal.title",defaultMessage:"Passkeys"})}),primaryButton:e.jsx(j.Button,{title:i.formatMessage({id:"settingsModal.passkeysModal.doneCta",defaultMessage:"Done"}),color:"primary",onClick:c}),secondaryButton:B,children:[e.jsx("p",{className:"text-sm",children:e.jsx(x,{id:"settingsModal.passkeysModal.explainer",defaultMessage:"Passkeys let you log in with your fingerprint, face, or screen lock or can be used in addition to your password. Make sure you keep your screen lock private."})}),e.jsx("div",{className:"border-token-border mt-6 border-t"}),e.jsx("ul",{className:"divide-token-border border-token-border divide-y border-b",children:P.map(s=>{var r,t,o;const l=(r=s.metadata)==null?void 0:r.create_time_seconds,a=l!=null?new Date(l*1e3):void 0;return e.jsx("li",{className:"py-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"truncate py-0.5 text-sm",children:(o=(t=s.metadata)==null?void 0:t.authenticator_name)!=null?o:i.formatMessage({id:"settingsModal.passkeysModal.fallbackName",defaultMessage:"Passkey"})}),a&&e.jsx("p",{className:"text-token-text-secondary truncate py-0.5 text-sm",children:e.jsx(x,{id:"settingsModal.passkeysModal.createdOn",defaultMessage:"Created on {ts, date, short} at {ts, time, short}",values:{ts:a.getTime()}})})]}),e.jsx("div",{className:"flex shrink-0 items-center gap-2",children:e.jsx(E,{className:"icon",label:i.formatMessage({id:"delete-passkey-button",defaultMessage:"Delete passkey"}),onClick:()=>I(s),icon:e.jsx(R,{className:"icon text-token-text-primary"}),"data-testid":"delete-passkey-".concat(s.id)})})]})},s.id)})})]})}export{te as PasskeysModal};
//# sourceMappingURL=cpqrvj0w0hxiaywd.js.map
