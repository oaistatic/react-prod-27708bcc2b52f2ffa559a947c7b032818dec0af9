var _=Object.defineProperty,k=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var T=(t,e,n)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e)=>{for(var n in e||(e={}))x.call(e,n)&&T(t,n,e[n]);if(A)for(var n of A(e))B.call(e,n)&&T(t,n,e[n]);return t},M=(t,e)=>k(t,w(e));import{c as C,e as D,f as E,j as I}from"./fg33krlcm0qyi6yw.js";import{s2 as i}from"./mtk1qztvnb31pw5r.js";import{ec as S,ed as P,eg as j}from"./k65njl5wlgspihfr.js";const O=.75;function z(t){"use forget";const e=C.c(16),{messages:n}=t,s=D(),[l,u]=n;let g;e[0]!==l||e[1]!==u?(g=R(l,u),e[0]=l,e[1]=u,e[2]=g):g=e[2];const a=g;let r=S.Running,o=f.creatingPlan,d;if(e[3]!==o||e[4]!==s||e[5]!==a.numCompletedSubAgents||e[6]!==a.numTotalSubAgents||e[7]!==a.status){let b;e:switch(a.status){case"running":{if(a.numTotalSubAgents>0&&a.numCompletedSubAgents/a.numTotalSubAgents>=O)o=f.almostDone;else{o=f.running;let p;e[11]!==a.numTotalSubAgents?(p={numTasks:a.numTotalSubAgents},e[11]=a.numTotalSubAgents,e[12]=p):p=e[12],b=p}break e}case"done":{r=S.Finished,o=void 0;break e}case"stopped":{r=S.Stopped,o=f.cancelled;break e}}d=o?s.formatMessage(o,b):null,e[3]=o,e[4]=s,e[5]=a.numCompletedSubAgents,e[6]=a.numTotalSubAgents,e[7]=a.status,e[8]=d,e[9]=o,e[10]=r}else d=e[8],o=e[9],r=e[10];const c=d;let m;return e[13]!==c||e[14]!==r?(m=I.jsx(P,{highlightedCommand:c,status:r,showWorkUserSetting:!1}),e[13]=c,e[14]=r,e[15]=m):m=e[15],m}function R(t,e){var a,r,o,d,c;const n=(c=(r=(a=e==null?void 0:e.metadata)==null?void 0:a.parallel_browse)==null?void 0:r.frontend_info.sub_agent_infos)!=null?c:(d=(o=t.metadata)==null?void 0:o.parallel_browse)==null?void 0:d.frontend_info.sub_agent_infos;let s,l=0,u=0;n!=null&&(s=v(n),l=s.length,u=s.filter(y).length);let g="planning";return j(t)?g="stopped":e!=null&&(g=u===l?"done":"running"),{status:g,subAgentInfos:s,numTotalSubAgents:l,numCompletedSubAgents:u}}function v(t){const e=Object.values(t).reduce((s,l)=>{const u=l.task_index;return s[u]==null&&(s[u]=[]),s[u].push(l),s},{});return Object.values(e).map(s=>M(h({},s[0]),{status:V(s)})).sort((s,l)=>s.task_index-l.task_index)}function V(t){const e=t.map(s=>s.status),n=[i.Starting,i.Running,i.Done,i.Error,i.Timeout,i.Cancelled];for(const s of n)if(e.some(l=>l===s))return s;return i.Starting}function y(t){return t.status===i.Done||t.status===i.Timeout||t.status===i.Error||t.status===i.Cancelled}const f=E({creatingPlan:{id:"parallelBrowsingMessage.creatingPlanV2",defaultMessage:"Making a research plan"},running:{id:"parallelBrowsingMessage.running_2",defaultMessage:"Visiting {numTasks, plural, one {# site} other {# sites}}"},almostDone:{id:"parallelBrowsingMessage.almostDone",defaultMessage:"Almost done"},cancelled:{id:"parallelBrowsingMessage.cancelledV2",defaultMessage:"Stopped doing research"},done:{id:"parallelBrowsingMessage.done",defaultMessage:"Finished research"}});export{z as default};
//# sourceMappingURL=bb433it64s5m64pf.js.map
