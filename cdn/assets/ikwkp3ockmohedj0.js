var C=Object.defineProperty;var m=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var f=(t,o,a)=>o in t?C(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,y=(t,o)=>{for(var a in o||(o={}))v.call(o,a)&&f(t,a,o[a]);if(m)for(var a of m(o))_.call(o,a)&&f(t,a,o[a]);return t};import{j as i,e as j,r as p,u as x}from"./fg33krlcm0qyi6yw.js";import{N as b,n as w,dR as S}from"./k65njl5wlgspihfr.js";import{b as M,ck as T,P as h,C as k,M as g,cU as I}from"./mtk1qztvnb31pw5r.js";function B(t){"use no forget";const o=M(),a=t.onClose,e=b(o),s=j(),d=T(o),r=P({calpicoState:e,intl:s,onClose:a,props:t,toaster:d}),n=r.isPending,c=()=>{r.isPending||r.mutate()},u=p.useRef(!1),l=t.type==="from-conversation"||t.type==="from-shared-project"?t.serverThreadId:void 0;return p.useEffect(()=>{u.current||(u.current=!0,h.logEventWithStatsig("Calpico - create chat - modal shown","chatgpt_web_calpico_create_chat_modal_shown",{type:t.type,source:t.source,conversation_id:l}))},[t.type,l,t.source]),i.jsx(k,{testId:"modal-start-group-chat",isOpen:!0,onClose:()=>a(),type:"success",title:t.type==="from-conversation"||t.type==="from-shared-project"?s.formatMessage({id:"0xSPqM",defaultMessage:"Start group chat from this conversation"}):s.formatMessage({id:"Ue2MBg",defaultMessage:"Use ChatGPT together"}),primaryButton:i.jsx(g.Button,{title:s.formatMessage({id:"agv82V",defaultMessage:"Start group chat"}),color:"primary",disabled:n,onClick:()=>{c()},"data-testid":"start-group-chat-confirm-button"}),secondaryButton:i.jsx(g.Button,{title:s.formatMessage({id:"W6b5j+",defaultMessage:"Cancel"}),color:"secondary",disabled:n,onClick:()=>{h.logEventWithStatsig("Calpico - create chat - canceled","chatgpt_web_calpico_create_chat_canceled",{type:t.type,source:t.source,conversation_id:l}),a()},"data-testid":"start-group-chat-cancel-button"}),tertiaryButton:i.jsx(g.Button,{className:"text-token-text-secondary hover:bg-token-bg-primary -ms-3 me-auto border-0 font-normal",title:s.formatMessage({id:"ds1qjK",defaultMessage:"Learn more"}),color:"ghost","data-testid":"start-group-chat-learn-more-button",onClick:()=>{window.open("https://help.openai.com/en/articles/12703475-group-chats","_blank")}}),footerIsSpacedBetween:!0,children:i.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:t.type==="from-conversation"||t.type==="from-shared-project"?s.formatMessage({id:"n10x8B",defaultMessage:"Only this conversation will be shared. Your personal ChatGPT memory is always private."}):s.formatMessage({id:"agcfjk",defaultMessage:"Add people to your chats to plan, share ideas, and get creative."})})})}function P({calpicoState:t,intl:o,onClose:a,props:e,toaster:s}){"use no forget";const d=M();return x({mutationKey:["calpico","start-group-chat",e.type],mutationFn:async()=>{let r;if(e.type==="from-conversation"){const{serverThreadId:n}=e;r=(await t.shareThreadToCalpico$(n)).id}else if(e.type==="from-shared-project"){const{serverThreadId:n,projectId:c}=e;r=(await t.shareThreadToCalpico$(n,c)).id}else r=(await t.createRoom$({room_type:"GROUP_DM",with_account_user_ids:[]})).id;return h.logEventWithStatsig("Calpico - create chat - chat created","chatgpt_web_calpico_create_chat_chat_created",{type:e.type,source:e.source,conversation_id:e.type==="from-conversation"||e.type==="from-shared-project"?e.serverThreadId:void 0,project_id:e.type==="from-shared-project"?e.projectId:void 0}),r},onSuccess:r=>{t.fetchMessages$({roomId:r}),a();const n=e.type==="from-shared-project"?"/g/".concat(e.projectId,"/gg/").concat(r):"/gg/".concat(r);w(n),setTimeout(()=>{const c=t.rooms$().get(r);c!=null&&e.type!=="from-shared-project"&&I(d,S,{room:c})})},onError:()=>{s.danger(o.formatMessage({id:"OJyo7m",defaultMessage:"Unable to create a group chat"}))}})}const U=t=>{"use no forget";return i.jsx(B,y({},t))};export{U as CalpicoStartChatModalContainer};
//# sourceMappingURL=ikwkp3ockmohedj0.js.map
