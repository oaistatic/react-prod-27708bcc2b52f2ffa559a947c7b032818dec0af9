import{c as T,m as w,i as b,r as O,j as L,a0 as U,a9 as j}from"./fg33krlcm0qyi6yw.js";import{e6 as F,hT as M,iz as B,iA as G,iB as Y}from"./k65njl5wlgspihfr.js";import{qI as E,P as I,_ as q}from"./mtk1qztvnb31pw5r.js";import{C as Q}from"./id9ie5ucoiqoo529.js";import{D as y,i as W}from"./m07thmwe25i44wu0.js";const A={[y.Go]:E.GO,[y.Plus]:E.PLUS,[y.Pro]:E.PRO,[y.SELF_SERVE_BUSINESS]:E.SELF_SERVE_BUSINESS};function $(a){"use forget";const e=T.c(24),{planType:o,promoCode:c,promoCampaign:r}=a,{prepareCheckoutSession:n,navigateToCheckout:p}=F(),i=w(),l=b(),s=!!r,{data:t,isLoading:_}=M(r!=null?r:"",s);let P;e[0]!==s||e[1]!==o||e[2]!==n?(P=async h=>{const{promoCode:u,promoCampaignId:d}=h,v={plan_name:A[o],promo_code:u!=null?u:void 0,promo_campaign:d?{promo_campaign_id:d,is_coupon_from_query_param:s}:void 0};return await n(v)},e[0]=s,e[1]=o,e[2]=n,e[3]=P):P=e[3];const k=P;let g;e[4]!==s||e[5]!==i.search||e[6]!==l||e[7]!==p||e[8]!==o||e[9]!==k?(g=async h=>{const{promoCode:u,promoCampaignId:d}=h,v={plan_name:A[o],promo_code:u!=null?u:void 0,promo_campaign:d?{promo_campaign_id:d,is_coupon_from_query_param:s}:void 0};try{I.logEventWithStatsig("Direct Purchase Social Sku: Checkout Session Create Start","direct_purchase_social_sku_checkout_session_create_start",{plan_type:o});const R=await k({promoCode:u,promoCampaignId:d});I.logEventWithStatsig("Direct Purchase Social Sku: Checkout Session Create Success","direct_purchase_social_sku_checkout_session_create_success",{plan_type:o}),await p(R,{searchParams:i.search,state:{directPurchasePlanType:o},checkoutPayload:v})}catch(R){const N=R,x=N instanceof Error?N:new Error("Failed to start checkout");I.logEventWithStatsig("Direct Purchase Social Sku: Checkout Session Create Failure","direct_purchase_social_sku_checkout_session_create_failure",{plan_type:o}),q.addError(x,{feature:"direct_purchase_checkout_redirect",plan_type:o}),l({pathname:"/",search:i.search,hash:B},{replace:!0})}},e[4]=s,e[5]=i.search,e[6]=l,e[7]=p,e[8]=o,e[9]=k,e[10]=g):g=e[10];const m=g;let f;e[11]!==m||e[12]!==_||e[13]!==c||e[14]!==(t==null?void 0:t.coupon)||e[15]!==(t==null?void 0:t.state)?(f=()=>{if(_)return;let h=!1;return Promise.resolve().then(()=>{h||m({promoCode:c,promoCampaignId:(t==null?void 0:t.state)==="eligible"?t==null?void 0:t.coupon:void 0})}),()=>{h=!0}},e[11]=m,e[12]=_,e[13]=c,e[14]=t==null?void 0:t.coupon,e[15]=t==null?void 0:t.state,e[16]=f):f=e[16];let S;e[17]!==m||e[18]!==_||e[19]!==s||e[20]!==c||e[21]!==t?(S=[m,_,t,c,s],e[17]=m,e[18]=_,e[19]=s,e[20]=c,e[21]=t,e[22]=S):S=e[22],O.useEffect(f,S);let C;return e[23]===Symbol.for("react.memo_cache_sentinel")?(C=L.jsx("div",{className:"bg-token-bg-primary flex h-full w-full items-center justify-center",children:L.jsx(Q,{})}),e[23]=C):C=e[23],C}function H(){"use forget";var l,s;const a=T.c(7),e=j(),o=w(),c=e.planType;if(!W(c))throw new Response("Not Found",{status:404});let r,n;if(a[0]!==o.search){const t=new URLSearchParams(o.search);r=(l=t.get(G))!=null?l:void 0,n=(s=t.get(Y))!=null?s:void 0,a[0]=o.search,a[1]=r,a[2]=n}else r=a[1],n=a[2];const p=n;let i;return a[3]!==c||a[4]!==p||a[5]!==r?(i=L.jsx($,{planType:c,promoCode:r,promoCampaign:p}),a[3]=c,a[4]=p,a[5]=r,a[6]=i):i=a[6],i}const Z=U(H);export{Z as default};
//# sourceMappingURL=d5wmwkvl6894roc4.js.map
