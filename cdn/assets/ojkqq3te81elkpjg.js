import{j as s,e as T,r as d,M as n}from"./fg33krlcm0qyi6yw.js";import{N as I,dM as R}from"./k65njl5wlgspihfr.js";import{b as G,ck as v,d as h,C as N,aT as P,mu as w,M as x,ga as z,ad as A}from"./mtk1qztvnb31pw5r.js";function k({room:e,onClose:a}){"use no forget";const m=G(),y=I(m),o=T(),i=d.useRef(!1),C=v(m),p=h(()=>e.assistantPersonality$()),g=h(()=>{var t;return(t=e.shouldAutoRespond$())!=null?t:!1}),[l,M]=d.useState(p),[r,j]=d.useState(g),u=l.trim()!==p.trim(),c=r!==g,b=async()=>{var f;if(i.current||!u&&!c)return;const t={};u&&(t.assistant_personality=l.trim()),c&&(t.should_auto_respond=r);try{i.current=!0,await y.editRoom$(e.id,t),a()}catch(S){C.danger((f=z(S))!=null?f:o.formatMessage(A.somethingWentWrong))}finally{i.current=!1}};return s.jsxs(N,{testId:"modal-customize-chatgpt",isOpen:!0,size:"large",onClose:()=>a(),type:"success",title:o.formatMessage({id:"xos1sT",defaultMessage:"Customize ChatGPT"}),primaryButton:s.jsx(x.Button,{title:o.formatMessage({id:"bm1R3R",defaultMessage:"Save"}),color:"primary",disabled:!u&&!c,onClick:()=>{b()}}),secondaryButton:s.jsx(x.Button,{title:o.formatMessage({id:"381CHU",defaultMessage:"Cancel"}),color:"secondary",onClick:()=>a()}),children:[s.jsxs("section",{children:[s.jsx("div",{className:"mb-2 text-sm",children:s.jsx(n,{id:"dI0Q2P",defaultMessage:"Custom instructions"})}),s.jsx(R,{disabled:!1,name:"calpico-chatgpt-custom-instructions",onSubmit:()=>{},value:l,placeholder:o.formatMessage({id:"f/OrU+",defaultMessage:"Get tailored responses by adding details about your group, such as goals, preferences, or inside jokes."}),size:"sm",onChange:t=>{M(t.currentTarget.value)},textareaClassName:"bg-token-bg-primary!",rows:5})]}),s.jsx("div",{className:"my-5 flex items-center",children:s.jsxs("div",{className:"w-full",children:[s.jsx(P,{label:s.jsx("span",{className:"text-sm",children:s.jsx(n,{id:"y3+N21",defaultMessage:"Respond automatically"})}),enabled:r,onChange:t=>{j(t)}}),s.jsx(w,{children:r?s.jsx(n,{id:"JoYva6",defaultMessage:"ChatGPT will respond to new messages automatically."}):s.jsx(n,{id:"lh9j/1",defaultMessage:"ChatGPT will respond only when you or someone else mentions it."})})]})}),s.jsx("p",{className:"text-token-text-tertiary my-1 text-xs text-pretty",children:s.jsx(n,{id:"yCQMUO",defaultMessage:"Group chat custom instructions are separate from custom instructions for your personal ChatGPT. Your personal ChatGPT memory is never used in group chats."})})]})}const _=({room:e,onClose:a})=>{"use no forget";return s.jsx(k,{room:e,onClose:a})};export{_ as CalpicoCustomizeChatGPTModalContainer};
//# sourceMappingURL=ojkqq3te81elkpjg.js.map
