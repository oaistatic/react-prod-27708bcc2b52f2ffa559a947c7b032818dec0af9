const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/edj7fjf1axi04apv.js","assets/e8riaedm8hyd8ib0.js","assets/mtk1qztvnb31pw5r.js","assets/fg33krlcm0qyi6yw.js","assets/root-mcq3deyb.css","assets/k65njl5wlgspihfr.js","assets/conversation-small-332fs9rk.css"])))=>i.map(i=>d[i]);
var Bt=Object.defineProperty;var bt=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var pt=(t,e,n)=>e in t?Bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||(e={}))$t.call(e,n)&&pt(t,n,e[n]);if(bt)for(var n of bt(e))Mt.call(e,n)&&pt(t,n,e[n]);return t};var p=(t,e,n)=>pt(t,typeof e!="symbol"?e+"":e,n);import{uV as vt,uW as At,n as Yt,uX as Zt,uY as Ft,uZ as _t,u_ as Kt}from"./k65njl5wlgspihfr.js";import{l3 as B,e$ as mt,en as Lt,j as Jt,dD as Ye,aK as St,m1 as Xt,mF as Qt,gb as Tt,uD as Wt,y5 as Gt,y6 as Ht,fl as Ct,ac as Pt,y7 as gt}from"./mtk1qztvnb31pw5r.js";import{_ as en}from"./fg33krlcm0qyi6yw.js";class Vt extends Error{constructor(){super("Invalid message header")}}class yt extends Error{constructor(){super("Invalid struct header")}}class tn extends Error{constructor(){super("Invalid union header")}}class nn extends Error{constructor(){super("Invalid handle encoding")}}class K extends Error{constructor(){super("Invalid enum value")}}class xt extends Error{constructor(){super("Unexpected null value")}}class ee extends Error{constructor(){super("Buffer range out of bounds")}}class Ze extends Error{constructor(e){super(e?"Not implemented: ".concat(e):"Not implemented")}}class sn extends Error{constructor(e){super(e?"Assertion failed: ".concat(e):"Assertion failed")}}function He(t,e){if(!t)throw new sn(e)}class wt{constructor(e){p(this,"rawHandle");this.rawHandle=e}close(){this.rawHandle.close()}watch(e,n){const c=this.rawHandle.watch(e,s=>{c.cancel(),n(s)})}}class ze extends wt{write(e,n=[]){const c=vt(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));this.rawHandle.writeMessage(c,n.map(s=>s.rawHandle))}read(){const{result:e,buffer:n,handles:c}=this.rawHandle.readMessage();return e==Mojo.RESULT_SHOULD_WAIT?{status:"nothing"}:e==Mojo.RESULT_FAILED_PRECONDITION?{status:"dead"}:(He(e===Mojo.RESULT_OK,"unexpected read result"),{status:"ok",data:n,handles:c.map(s=>new wt(s))})}}function qt(){const{handle0:t,handle1:e}=Mojo.createMessagePipe();return[new ze(t),new ze(e)]}var j;(t=>{function e(n){const[c,s]=qt();return[new Rt(n,c),new Fe(n,s)]}t.createChannel=e})(j||(j={}));class Fe{constructor(e,n){p(this,"interfaceType");p(this,"pipe");this.interfaceType=e,this.pipe=n}get endpointState(){return{kind:"primary",pipe:this.pipe}}}class Rt{constructor(e,n,c=null){p(this,"interfaceType");p(this,"pipe");p(this,"version");this.interfaceType=e,this.pipe=n,this.version=c!=null?c:e.interfaceVersion}static toBrowser(e){const[n,c]=qt();return Mojo.bindInterface(e.interfaceName,n.rawHandle),new Rt(e,c)}get endpointState(){return{kind:"primary",pipe:this.pipe}}}function _e(t){return t+7&-8}function g(t){if(t===null)throw new xt;return t}function J(t){if(t===null)return null;for(let e=0;e<t.length;++e)if(t[e]===null)throw new xt;return t}const L=8,de=16,me=8,Dt=4294967295,P=8,k=class k{constructor(e=0,n=0){p(this,"numBytes",0);p(this,"numAssociatedEndpoints",0);this.numBytes=e,this.numAssociatedEndpoints=n}static bytes(e){return new k(e)}add(e){return this.numBytes+=e.numBytes,this.numAssociatedEndpoints+=e.numAssociatedEndpoints,this}addBytes(e){return this.numBytes+=e,this}static get zero(){return new k(0)}get aligned(){return new k(_e(this.numBytes),this.numAssociatedEndpoints)}static forObject(e,n){return n===null?k.zero:e.measure(n)}static forUnionValue(e,n){return n===null?k.zero:e.measure(n)}static forUnionValueIndirect(e,n){return n===null?k.zero:e.measure(n).addBytes(de)}static forString(e){return e===null?k.zero:k.forNumericArray(Uint8Array,k.textEncoder.encode(e))}static forBitArray(e){return e===null?k.zero:new k(L+_e(e.length+7>>3))}static forNumericArray(e,n){return n===null?k.zero:k.bytes(L+_e(e.BYTES_PER_ELEMENT*n.length))}static forUnionValueArray(e,n){return n===null?k.zero:n.reduce((c,s)=>c.add(k.forUnionValue(e,s)),k.bytes(L+de*n.length).aligned)}static forEnumArray(e){return e===null?k.zero:k.bytes(L+Int32Array.BYTES_PER_ELEMENT*e.length).aligned}static forObjectArray(e,n){return n===null?k.zero:n.reduce((c,s)=>c.add(k.forObject(e,s)),k.bytes(L+P*n.length))}static forHandleArray(e){return e===null?k.zero:k.bytes(L+Uint32Array.BYTES_PER_ELEMENT*e.length)}static forStringArray(e){return e===null?k.zero:e.reduce((n,c)=>n.add(k.forString(c)),k.bytes(L+P*e.length))}static forArrayOfArrays(e,n){return e===null?k.zero:e.reduce((c,s)=>c.add(s===null?k.zero:n(s)),k.bytes(L+P*e.length))}};p(k,"textEncoder",new TextEncoder);let R=k;class Ut{constructor(e){p(this,"buffer");p(this,"handles",[]);p(this,"interfaceIDs",[]);p(this,"numClaimedBytes",0);this.buffer=new ArrayBuffer(e)}get remainingCapacity(){return this.buffer.byteLength-this.numClaimedBytes}claim(e){const n=_e(e);if(this.buffer.byteLength<n||this.buffer.byteLength-n<this.numClaimedBytes)throw new ee;const c=this.numClaimedBytes;return this.numClaimedBytes+=n,new lt(this,c,e)}addHandle(e){const n=this.handles.length;return this.handles.push(e),n}addInterfaceID(e){const n=this.interfaceIDs.length;return this.interfaceIDs.push(e),n}}const se=class se{constructor(e,n,c){p(this,"buffer");p(this,"data");this.buffer=e,this.data=new DataView(e.buffer,n,c)}get baseOffset(){return this.data.byteOffset}get dataSize(){return this.data.byteLength}typedArrayForRange(e,n,c){return new e(this.data.buffer,this.data.byteOffset+n,c)}bigTypedArrayForRange(e,n,c){return new e(this.data.buffer,this.data.byteOffset+n,c)}createEncoderForRange(e,n){return new se(this.buffer,this.data.byteOffset+e,n)}setBit(e,n,c){const s=this.data.getUint8(e),r=1<<n;this.data.setUint8(e,c?s|r:s&~r)}setI8(e,n){this.data.setInt8(e,n)}setU8(e,n){this.data.setUint8(e,n)}setI16(e,n){this.data.setInt16(e,n,!0)}setU16(e,n){this.data.setUint16(e,n,!0)}setI32(e,n){this.data.setInt32(e,n,!0)}setU32(e,n){this.data.setUint32(e,n,!0)}setI64(e,n){this.data.setBigInt64(e,n,!0)}setU64(e,n){this.data.setBigUint64(e,n,!0)}setF32(e,n){this.data.setFloat32(e,n,!0)}setF64(e,n){this.data.setFloat64(e,n,!0)}setOffset(e,n){if(n==0){this.setU64(e,BigInt(0));return}const c=e+this.data.byteOffset;He(n>c);const s=n-c;this.setU64(e,BigInt(s))}setUnionValue(e,n,c){if(c===null){this.setU32(n,0);return}this.setU32(n,de),this.setU32(n+4,e.tag(c)),e.encode(this.createEncoderForRange(n+8,8),c)}setUnionValueIndirect(e,n,c){if(c===null){this.setOffset(n,0);return}const s=this.buffer.claim(de);s.setUnionValue(e,0,c),this.setOffset(n,s.baseOffset)}setEnumValue(e,n,c){this.setI32(n,e.encode(c))}setHandle(e,n){if(n===null){this.setU32(e,Dt);return}this.setU32(e,this.buffer.addHandle(n))}setRemote(e,n){if(n===null){this.setHandle(e,null);return}this.setHandle(e,n.pipe),this.setU32(e+4,n.version)}setReceiver(e,n){this.setHandle(e,n===null?null:n.pipe)}setObjectIndirect(e,n,c){if(c===null){this.setOffset(n,0);return}const s=this.buffer.claim(e.CURRENT_VERSION.size);s.setU32(0,e.CURRENT_VERSION.size),s.setU32(4,e.CURRENT_VERSION.version),e.encode(new se(this.buffer,s.baseOffset+me,e.CURRENT_VERSION.size-me),c),this.setOffset(n,s.baseOffset)}setString(e,n){if(n===null){this.setOffset(e,0);return}this.setNumericArray(Uint8Array,e,Array.from(se.textEncoder.encode(n)))}setBitArray(e,n){if(n===null){this.setOffset(e,0);return}const c=n.length+7>>3,[s,r]=this.allocateArray(c,n.length);for(let f=0;f<c;++f){const i=f*8,d=n.slice(i,i+8).reduce((o,N,u)=>o|(N?1<<u:0),0);r.setU8(f,d)}this.setOffset(e,s.baseOffset)}setNumericArray(e,n,c){if(c===null){this.setOffset(n,0);return}const s=e.BYTES_PER_ELEMENT*c.length,[r,f]=this.allocateArray(s,c.length);f.typedArrayForRange(e,0,c.length).set(c),this.setOffset(n,r.baseOffset)}setBigNumericArray(e,n,c){if(c===null){this.setOffset(n,0);return}const s=e.BYTES_PER_ELEMENT*c.length,[r,f]=this.allocateArray(s,c.length);f.bigTypedArrayForRange(e,0,c.length).set(c),this.setOffset(n,r.baseOffset)}setUnionValueArray(e,n,c){this.setArrayOfNullable(n,de,c,(s,r)=>{s.setUnionValue(e,0,r)})}setEnumArray(e,n,c){this.setArray(n,Int32Array.BYTES_PER_ELEMENT,c,(s,r)=>{s.setEnumValue(e,0,r)})}setObjectArray(e,n,c){this.setArrayOfNullable(n,P,c,(s,r)=>{s.setObjectIndirect(e,0,r)})}setHandleArray(e,n){this.setArray(e,Uint32Array.BYTES_PER_ELEMENT,n,(c,s)=>{c.setHandle(0,s)})}setStringArray(e,n){this.setArray(e,P,n,(c,s)=>{c.setString(0,s)})}setArrayOfArrays(e,n,c){this.setArrayOfNullable(e,P,n,(s,r)=>{c(s,r)})}allocateArray(e,n){const c=this.buffer.claim(_e(L+e));return c.setU32(0,L+e),c.setU32(4,n),[c,c.createEncoderForRange(8,e)]}setArray(e,n,c,s){if(c===null){this.setOffset(e,0);return}const[r,f]=this.allocateArray(c.length*n,c.length);Array.prototype.forEach.call(c,(i,d)=>{s(new se(this.buffer,f.baseOffset+d*n,n),i)}),this.setOffset(e,r.baseOffset)}setArrayOfNullable(e,n,c,s){if(c===null){this.setOffset(e,0);return}const[r,f]=this.allocateArray(c.length*n,c.length);Array.prototype.forEach.call(c,(i,d)=>{s(new se(this.buffer,f.baseOffset+d*n,n),i)}),this.setOffset(e,r.baseOffset)}};p(se,"textEncoder",new TextEncoder);let lt=se;class cn{constructor(e,n){p(this,"buffer");p(this,"handles");this.buffer=e,this.handles=n.map(c=>({status:"unclaimed",handle:c}))}dispose(){for(const e of this.handles)e.status==="unclaimed"&&e.handle.close()}get numBytes(){return this.buffer.byteLength}get numHandles(){return this.handles.length}claimHandle(e){if(e<0||e>=this.handles.length||this.handles[e].status==="claimed")throw new nn;const n=this.handles[e].handle;return this.handles[e]={status:"claimed"},n}}const X=class X{constructor(e,n,c){p(this,"buffer");p(this,"data");this.buffer=e,this.data=new DataView(e.buffer,n,c)}get baseOffset(){return this.data.byteOffset}get dataSize(){return this.data.byteLength}typedArrayForRange(e,n,c){return new e(this.data.buffer,this.data.byteOffset+n,c)}bigTypedArrayForRange(e,n,c){return new e(this.data.buffer,this.data.byteOffset+n,c)}isBitSet(e,n){return(this.data.getUint8(e)&1<<n)!==0}getI8(e){return this.data.getInt8(e)}getU8(e){return this.data.getUint8(e)}getI16(e){return this.data.getInt16(e,!0)}getU16(e){return this.data.getUint16(e,!0)}getI32(e){return this.data.getInt32(e,!0)}getU32(e){return this.data.getUint32(e,!0)}getI64(e){return this.data.getBigInt64(e,!0)}getU64(e){return this.data.getBigUint64(e,!0)}getF32(e){return this.data.getFloat32(e,!0)}getF64(e){return this.data.getFloat64(e,!0)}getOffset(e){const n=this.getU32(e);if(this.getU32(e+4)!==0)throw new ee;if(n===0)return 0;const c=this.data.byteOffset+e+n;if(!Number.isSafeInteger(c))throw new ee;return c}getUnionValue(e,n){const c=this.getU32(n);if(c===0)return null;if(c!=de)throw new tn;const s=this.getU32(n+4);return e.decode(s,new X(this.buffer,this.data.byteOffset+n+8,8))}getUnionValueIndirect(e,n){const c=this.getOffset(n);return c===0?null:new X(this.buffer,c,de).getUnionValue(e,0)}getEnumValue(e,n){return e.decode(this.getI32(n))}getHandle(e){const n=this.getU32(e);return n==Dt?null:this.buffer.claimHandle(n)}getMessagePipeHandle(e){const n=this.getHandle(e);return n===null?null:new ze(n.rawHandle)}getRemote(e,n){const c=this.getHandle(n);if(c===null)return null;const s=new ze(c.rawHandle),r=this.getU32(n+4);return new Rt(e,s,r)}getReceiver(e,n){const c=this.getHandle(n);return c===null?null:new Fe(e,new ze(c.rawHandle))}getString(e){const n=this.getNumericArrayInternal(Uint8Array,e);return n===null?null:X.textDecoder.decode(n)}getObject(e,n){const c=new X(this.buffer,this.baseOffset+n,me),s=c.getU32(0),r=c.getU32(4);let f=e.VERSION_INFO[0];for(let i=1;i<e.VERSION_INFO.length&&e.VERSION_INFO[i].version<=r;++i)f=e.VERSION_INFO[i];if(s<f.size)throw new yt;if(r==f.version&&s!=f.size)throw new yt;return e.decode(new X(this.buffer,c.baseOffset+me,f.size-me),f.version)}getObjectIndirect(e,n){const c=this.getOffset(n);return c===0?null:this.getObject(e,c-this.baseOffset)}getBitArray(e){const n=this.decodeArray(e);if(n===null)return null;const c=n.numElements+7>>3;if(c>n.elementDecoder.dataSize)throw new ee;const s=[];for(let r=0;r<c;++r){const f=n.elementDecoder.getU8(r),i=r*8;for(let d=0;d<8&&i+d<n.numElements;++d)s.push((f&1<<d)!==0)}return s}getNumericArray(e,n){const c=this.getNumericArrayInternal(e,n);return c===null?c:Array.from(c)}getBigNumericArray(e,n){const c=this.decodeArray(n);if(c===null)return null;if(c.numElements*e.BYTES_PER_ELEMENT>c.elementDecoder.dataSize)throw new ee;return c.elementDecoder.bigTypedArrayForRange(e,0,c.numElements)}getUnionValueArray(e,n){return this.getArray(n,de,c=>c.getUnionValue(e,0))}getEnumArray(e,n){return this.getArray(n,Int32Array.BYTES_PER_ELEMENT,c=>c.getEnumValue(e,0))}getObjectArray(e,n){return this.getArrayOfNullable(n,P,c=>c.getObjectIndirect(e,0))}getHandleArray(e){return this.getArrayOfNullable(e,Uint32Array.BYTES_PER_ELEMENT,n=>n.getHandle(0))}getStringArray(e){return this.getArrayOfNullable(e,P,n=>n.getString(0))}getArrayOfArrays(e,n){return this.getArrayOfNullable(e,P,c=>n(c))}decodeArray(e){const n=this.getOffset(e);if(n===0)return null;const c=new X(this.buffer,n,L),s=c.getU32(0);return{numElements:c.getU32(4),elementDecoder:new X(this.buffer,n+L,s-L)}}getArray(e,n,c){const s=this.decodeArray(e);if(s===null)return null;if(s.numElements*n>s.elementDecoder.dataSize)throw new ee;const r=[];for(let f=0;f<s.numElements;++f){const i=new X(this.buffer,s.elementDecoder.baseOffset+f*n,n);r.push(c(i))}return r}getArrayOfNullable(e,n,c){const s=this.decodeArray(e);if(s===null)return null;if(s.numElements*n>s.elementDecoder.dataSize)throw new ee;const r=[];for(let f=0;f<s.numElements;++f){const i=new X(this.buffer,s.elementDecoder.baseOffset+f*n,n);r.push(c(i))}return r}getNumericArrayInternal(e,n){const c=this.decodeArray(n);if(c===null)return null;if(c.numElements*e.BYTES_PER_ELEMENT>c.elementDecoder.dataSize)throw new ee;return c.elementDecoder.typedArrayForRange(e,0,c.numElements)}};p(X,"textDecoder",new TextDecoder);let Ce=X;const ce=[24,32,48],Pe=ce.length-1;var F=(t=>(t[t.None=0]="None",t[t.ExpectsResponse=1]="ExpectsResponse",t[t.IsResponse=2]="IsResponse",t[t.IsSync=4]="IsSync",t[t.NoInterrupt=8]="NoInterrupt",t[t.IsUrgent=16]="IsUrgent",t[t.UnimplementedResponse=1073741824]="UnimplementedResponse",t))(F||{});function zt(t,e,n){return t&~e|(n?e:0)}class z{constructor(e,n,c){p(this,"header");p(this,"data");p(this,"handles");this.header=e,this.data=n,this.handles=c}static encodeEmpty(e,n,c){const s=ce[Pe],r=new Ut(s),f=new pe(r.claim(pe.size));return f.ordinal=e,f.flags=n,f.requestID=c,new z(f,new DataView(r.buffer),[])}static encode(e,n,c,s){const r=R.forObject(c,s),f=ce[Pe]+r.numBytes;if(r.numAssociatedEndpoints>0)throw new Ze("Associated interfaces");const i=new Ut(f),d=new pe(i.claim(pe.size));return d.interfaceID=0,d.ordinal=e,d.flags=n,d.payloadEncoder.setObjectIndirect(c,0,s),new z(d,new DataView(i.buffer),i.handles)}dump(){const e=[];for(let n=0;n<this.data.byteLength;n+=4){const c=this.data.getUint32(n);e.push(c.toString(16).padStart(8,"0"))}console.log("Data: ",e.join(" "),"Handles: ",this.handles.length)}}class rn{constructor(e,n){p(this,"buffer");p(this,"header");p(this,"payload");this.buffer=new cn(e,n),this.header=new un(new Ce(this.buffer,0)),this.payload=new Ce(this.buffer,this.header.payload)}dispose(){this.buffer.dispose()}decode(e){return this.payload.getObject(e,0)}dump(){const e=[],n=new DataView(this.buffer.buffer);for(let c=0;c<n.byteLength;c+=4){const s=n.getUint32(c);e.push(s.toString(16).padStart(8,"0"))}console.log("Data: ",e.join(" "),"Handles: ",this.buffer.numHandles)}}const Ie=class Ie{constructor(e){p(this,"payloadEncoder");p(this,"encoder");He(e.dataSize>=Ie.size),this.encoder=e,this.encoder.setU32(0,Ie.size),this.encoder.setU32(4,Ie.version),this.payloadEncoder=e.createEncoderForRange(32,8)}set interfaceID(e){this.encoder.setU32(8,e)}set ordinal(e){this.encoder.setU32(12,e)}set flags(e){this.encoder.setU32(16,e)}set requestID(e){this.encoder.setU64(24,BigInt(e))}set newEndpoints(e){this.encoder.setOffset(40,e)}set isResponse(e){this.flags=zt(this.flags,2,e)}set expectsResponse(e){this.flags=zt(this.flags,1,e)}};p(Ie,"size",ce[Pe]),p(Ie,"version",Pe);let pe=Ie;class un{constructor(e){p(this,"decoder");var r;if(e.dataSize<ce[0])throw new Vt;this.decoder=e;const n=this.headerSize,c=this.headerVersion,s=(r=ce[c])!=null?r:ce[ce.length-1];if(n>e.dataSize||n<s)throw new Vt;if(this.payload>=e.dataSize)throw new Vt}get headerSize(){return this.decoder.getU32(0)}get headerVersion(){return this.decoder.getU32(4)}get interfaceID(){return this.decoder.getU32(8)}get ordinal(){return this.decoder.getU32(12)}get flags(){return this.decoder.getU32(16)}get isResponse(){return(this.flags&2)!==0}get expectsResponse(){return(this.flags&1)!==0}get unimplementedResponse(){return(this.flags&1073741824)!==0}get requestID(){if(this.headerVersion<1)return 0;const e=Number(this.decoder.getU64(24));return He(Number.isSafeInteger(e)),e}get payload(){return this.headerVersion>=2?this.decoder.getOffset(32):this.headerSize}get newEndpoints(){if(this.headerVersion<2)return null;const e=this.decoder.getOffset(40);return e===0?null:e}}const dn=1<<31,on=4294967295;class Nn{constructor(e,n){p(this,"pipe");p(this,"setNamespaceBit");p(this,"nextInterfaceID",1);p(this,"knownUnboundInterfaceIDs",new Set);p(this,"listeners",new Map);p(this,"isDispatchScheduled",!1);p(this,"blockingMessage",null);this.pipe=e,this.setNamespaceBit=n}dispose(){this.closed||this.close()}get closed(){return this.pipe===null}get rawPipe(){return this.pipe}close(){this.pipe!==null&&(this.pipe.close(),this.pipe=null)}allocateEndpointID(){const e=this.nextInterfaceID|(this.setNamespaceBit?dn:0);return this.nextInterfaceID+=1,this.knownUnboundInterfaceIDs.add(e),e}send(e,n){this.pipe!==null&&(n.header.interfaceID=e,this.pipe.write(n.data,n.handles))}listen(e,n){this.knownUnboundInterfaceIDs.delete(e),this.listeners.set(e,n),this.ensureDispatchingIfReady()}stopListening(e){this.listeners.delete(e),this.knownUnboundInterfaceIDs.delete(e),this.ensureDispatchingIfReady()}get isDispatchBlocked(){if(this.blockingMessage===null)return!1;const e=this.blockingMessage.header.interfaceID;return this.knownUnboundInterfaceIDs.has(e)}dispatchDisconnect(){const e=this.listeners;this.listeners=new Map;for(const[n,c]of e)c({type:"disconnected"})}ensureDispatchingIfReady(){this.isDispatchBlocked||this.isDispatchScheduled||(this.isDispatchScheduled=!0,setTimeout(()=>{this.dispatchMessages()},0))}dispatchMessages(){for(this.isDispatchScheduled=!1;this.pipe!==null&&!this.isDispatchBlocked;){if(this.blockingMessage!==null){const n=this.blockingMessage;this.blockingMessage=null,this.dispatchMessage(n);continue}const e=this.pipe.read();switch(e.status){case"ok":this.dispatchMessage(new rn(e.data,e.handles));continue;case"nothing":this.listenToPipe();return;case"dead":this.dispatchDisconnect(),this.close();return}}}listenToPipe(){He(this.pipe!==null),this.pipe.watch({readable:!0},e=>{this.dispatchMessages()})}dispatchMessage(e){var r;const n=e.header.interfaceID;if(n===on)throw new Ze("Control messages");if(this.knownUnboundInterfaceIDs.has(n)){this.blockingMessage=e;return}if(e.header.newEndpoints!==null)throw new Ze("Associated interfaces");const c=(r=this.listeners.get(n))!=null?r:null;if(c===null){e.dispose();return}c({type:"message",message:e})==="stopListening"&&this.stopListening(n)}}class M{constructor(e,n){p(this,"router");p(this,"interfaceID");p(this,"action");p(this,"isListening",!1);p(this,"nextRequestID",1);p(this,"pendingResponses",new Map);switch(e.kind){case"primary":this.router=new Nn(e.pipe,n),this.interfaceID=0;break;case"secondary":throw new Ze("Associated interfaces")}}dispose(){this.router.dispose()}send(e){this.router.send(this.interfaceID,e)}async sendAndAwaitResponse(e){const n=this.nextRequestID++;e.header.expectsResponse=!0,e.header.requestID=n,this.ensureListening();const c=await new Promise((s,r)=>{this.pendingResponses.set(n,{resolve:s,reject:r}),this.send(e)});if(c.header.unimplementedResponse)throw new Ze("Unimplemented method");return c}sendUnimplementedResponse(e,n){const c=z.encodeEmpty(n,F.UnimplementedResponse|F.IsResponse,e);this.router.send(this.interfaceID,c)}listen(e){this.action=e,this.ensureListening()}createResponder(e,n,c){return s=>{const r=z.encode(n,F.IsResponse,e,s);r.header.requestID=c,this.send(r)}}ensureListening(){this.isListening||(this.isListening=!0,this.router.listen(this.interfaceID,e=>{switch(e.type){case"message":{const n=e.message;if(n.header.isResponse){const c=this.pendingResponses.get(n.header.requestID);c&&c.resolve(n)}else this.action&&this.action({type:"message",message:n});return"keepListening"}case"disconnected":return this.pendingResponses.forEach(n=>n.reject("Disconnected")),this.action&&this.action({type:"disconnected"}),"stopListening"}}))}}class v{constructor(e){p(this,"interfaceType");p(this,"endpoints",new Set);this.interfaceType=e}dispose(){this.endpoints.forEach(e=>e.dispose())}addReceiver(e,n,c){const s=new M(e.endpointState,!1);this.endpoints.add(s),s.listen(r=>{switch(r.type){case"message":n(r.message,s);break;case"disconnected":this.endpoints.delete(s),c();break}})}}var et;(t=>{function e(c){if(c==="stopped")return 0;if(c==="paused")return 1;if(c==="running")return 2;throw new K}t.encode=e;function n(c){switch(c){case 0:return"stopped";case 1:return"paused";case 2:return"running";default:return"stopped"}}t.decode=n})(et||(et={}));class Q{}p(Q,"interfaceName","web.bridge.AgentHandler"),p(Q,"interfaceVersion",4);(t=>{let e;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.agentid))}E.measure=y;function m(w,T){w.setString(0,T.agentid)}E.encode=m;function D(w,T){return{agentid:g(w.getString(0))}}E.decode=D})(e=t.AgentHandler_TryOpenAgentViewer_Params||(t.AgentHandler_TryOpenAgentViewer_Params={}));let n;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size)}E.measure=y;function m(w,T){let q=0;T.response&&(q|=1),w.setU8(0,q)}E.encode=m;function D(w,T){return{response:(w.getU8(0)&1)!=0}}E.decode=D})(n=t.AgentHandler_TryOpenAgentViewer_ResponseParams||(t.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let c;(E=>{E.VERSION_INFO=[{version:0,size:8}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size)}E.measure=y;function m(w,T){}E.encode=m;function D(w,T){return{}}E.decode=D})(c=t.AgentHandler_GetClientID_Params||(t.AgentHandler_GetClientID_Params={}));let s;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.clientid))}E.measure=y;function m(w,T){w.setString(0,T.clientid)}E.encode=m;function D(w,T){return{clientid:g(w.getString(0))}}E.decode=D})(s=t.AgentHandler_GetClientID_ResponseParams||(t.AgentHandler_GetClientID_ResponseParams={}));let r;(E=>{E.VERSION_INFO=[{version:0,size:16},{version:1,size:24},{version:2,size:32},{version:3,size:40},{version:4,size:40}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){var T,q;return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.agentid)).add(R.forString((T=w.usermessages)!=null?T:null)).add(R.forString((q=w.preinitializerequestid)!=null?q:null))}E.measure=y;function m(w,T){var $,Z;let q=0;w.setString(0,T.agentid),w.setString(8,($=T.usermessages)!=null?$:null),T.islocalsafemode!==null&&T.islocalsafemode!==void 0&&(q|=1,T.islocalsafemode&&(q|=2)),T.isresume!==null&&T.isresume!==void 0&&(q|=4,T.isresume&&(q|=8)),T.originatesfromtoolcall!==null&&T.originatesfromtoolcall!==void 0&&(q|=16,T.originatesfromtoolcall&&(q|=32)),w.setString(24,(Z=T.preinitializerequestid)!=null?Z:null),w.setU8(16,q)}E.encode=m;function D(w,T){const q=T>=1?w.getString(8):null,$=T>=2?w.getU8(16):0,Z=($&1)!=0,C=($&4)!=0,we=($&16)!=0,ae=T>=3?w.getString(24):null;return x(x(x(x(x({agentid:g(w.getString(0))},q!==null?{usermessages:q}:{}),Z?{islocalsafemode:($&2)!=0}:{}),C?{isresume:($&8)!=0}:{}),we?{originatesfromtoolcall:($&32)!=0}:{}),ae!==null?{preinitializerequestid:ae}:{})}E.decode=D})(r=t.AgentHandler_UserSentMessageInAgentConversation_Params||(t.AgentHandler_UserSentMessageInAgentConversation_Params={}));let f;(E=>{E.VERSION_INFO=[{version:0,size:24}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.agentid))}E.measure=y;function m(w,T){let q=0;w.setString(0,T.agentid),T.haderror&&(q|=1),w.setU8(8,q)}E.encode=m;function D(w,T){const q=w.getU8(8);return{agentid:g(w.getString(0)),haderror:(q&1)!=0}}E.decode=D})(f=t.AgentHandler_AgentConversationStopped_Params||(t.AgentHandler_AgentConversationStopped_Params={}));let i;(E=>{E.VERSION_INFO=[{version:0,size:24}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.agentid)).add(R.forStringArray(w.urls))}E.measure=y;function m(w,T){w.setString(0,T.agentid),w.setStringArray(8,T.urls)}E.encode=m;function D(w,T){return{agentid:g(w.getString(0)),urls:g(J(w.getStringArray(8)))}}E.decode=D})(i=t.AgentHandler_OpenAgentTabs_Params||(t.AgentHandler_OpenAgentTabs_Params={}));let d;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.agentid))}E.measure=y;function m(w,T){w.setString(0,T.agentid)}E.encode=m;function D(w,T){return{agentid:g(w.getString(0))}}E.decode=D})(d=t.AgentHandler_UserStoppedAgentConversation_Params||(t.AgentHandler_UserStoppedAgentConversation_Params={}));let o;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size).add(R.forString(w.agentid))}E.measure=y;function m(w,T){w.setString(0,T.agentid)}E.encode=m;function D(w,T){return{agentid:g(w.getString(0))}}E.decode=D})(o=t.AgentHandler_GetAgentStatus_Params||(t.AgentHandler_GetAgentStatus_Params={}));let N;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size)}E.measure=y;function m(w,T){w.setEnumValue(et,0,T.status)}E.encode=m;function D(w,T){return{status:g(w.getEnumValue(et,0))}}E.decode=D})(N=t.AgentHandler_GetAgentStatus_ResponseParams||(t.AgentHandler_GetAgentStatus_ResponseParams={}));let u;(E=>{E.VERSION_INFO=[{version:0,size:8}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size)}E.measure=y;function m(w,T){}E.encode=m;function D(w,T){return{}}E.decode=D})(u=t.AgentHandler_GetClientCapabilityVersion_Params||(t.AgentHandler_GetClientCapabilityVersion_Params={}));let O;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function y(w){return R.bytes(E.CURRENT_VERSION.size)}E.measure=y;function m(w,T){w.setU32(0,T.version)}E.encode=m;function D(w,T){return{version:g(w.getU32(0))}}E.decode=D})(O=t.AgentHandler_GetClientCapabilityVersion_ResponseParams||(t.AgentHandler_GetClientCapabilityVersion_ResponseParams={}));class a{constructor(y){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(y.endpointState,!0),this._version=4}static create(){const[y,m]=j.createChannel(t);return[new a(y),m]}static createToBrowser(){const[y,m]=this.create();return Mojo.bindInterface(t.interfaceName,m.pipe.rawHandle),y}async tryOpenAgentViewer(y){const m={agentid:y};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,m))).decode(n).response}async getClientID(){const y={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,c,y))).decode(s).clientid}userSentMessageInAgentConversation(y,m,D,w,T,q){const $={agentid:y,usermessages:m,islocalsafemode:D,isresume:w,preinitializerequestid:T,originatesfromtoolcall:q};this._endpoint.send(z.encode(2,F.None,r,$))}agentConversationStopped(y,m){const D={agentid:y,haderror:m};this._endpoint.send(z.encode(3,F.None,f,D))}openAgentTabs(y,m){const D={agentid:y,urls:m};this._endpoint.send(z.encode(4,F.None,i,D))}userStoppedAgentConversation(y){const m={agentid:y};this._endpoint.send(z.encode(5,F.None,d,m))}async getAgentStatus(y){const m={agentid:y};return(await this._endpoint.sendAndAwaitResponse(z.encode(6,F.None,o,m))).decode(N).status}async getClientCapabilityVersion(){const y={};return(await this._endpoint.sendAndAwaitResponse(z.encode(7,F.None,u,y))).decode(O).version}}t.Proxy=a;class V extends v{constructor(){super(t);p(this,"onDisconnect")}bind(m,D){this.addReceiver(D,async(w,T)=>{switch(w.header.ordinal){case 0:{const q=w.decode(e),$=m.tryOpenAgentViewer(q.agentid),Z=T.createResponder(n,0,w.header.requestID),C=await $;Z({response:C});break}case 1:{w.decode(c);const q=m.getClientID(),$=T.createResponder(s,1,w.header.requestID),Z=await q;$({clientid:Z});break}case 2:{const q=w.decode(r);m.userSentMessageInAgentConversation(q.agentid,q.usermessages,q.islocalsafemode,q.isresume,q.preinitializerequestid,q.originatesfromtoolcall);break}case 3:{const q=w.decode(f);m.agentConversationStopped(q.agentid,q.haderror);break}case 4:{const q=w.decode(i);m.openAgentTabs(q.agentid,q.urls);break}case 5:{const q=w.decode(d);m.userStoppedAgentConversation(q.agentid);break}case 6:{const q=w.decode(o),$=m.getAgentStatus(q.agentid),Z=T.createResponder(N,6,w.header.requestID),C=await $;Z({status:C});break}case 7:{w.decode(u);const q=m.getClientCapabilityVersion(),$=T.createResponder(O,7,w.header.requestID),Z=await q;$({version:Z});break}default:w.header.expectsResponse&&T.sendUnimplementedResponse(w.header.requestID,w.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(m)})}createRemote(m){const[D,w]=j.createChannel(t);return this.bind(m,w),D}}t.Dispatcher=V})(Q||(Q={}));var ie;(t=>{function e(c){if(c==="incognito")return 0;if(c==="signedInAccounts")return 1;throw new K}t.encode=e;function n(c){switch(c){case 0:return"incognito";case 1:return"signedInAccounts";default:return"incognito"}}t.decode=n})(ie||(ie={}));class Re{}p(Re,"interfaceName","web.bridge.AgentSafeModeSettingsHandler"),p(Re,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){u.setEnumValue(ie,0,O.preferredMode)}i.encode=o;function N(u,O){return{preferredMode:g(u.getEnumValue(ie,0))}}i.decode=N})(e=t.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params||(t.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){let a=0;O.hasSeenNux&&(a|=1),u.setU8(0,a)}i.encode=o;function N(u,O){return{hasSeenNux:(u.getU8(0)&1)!=0}}i.decode=N})(n=t.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params||(t.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){}i.encode=o;function N(u,O){return{}}i.decode=N})(c=t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params||(t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){let a=0;u.setEnumValue(ie,0,O.preferredMode),O.hasSeenNux&&(a|=1),u.setU8(4,a)}i.encode=o;function N(u,O){const a=u.getU8(4);return{preferredMode:g(u.getEnumValue(ie,0)),hasSeenNux:(a&1)!=0}}i.decode=N})(s=t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams||(t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams={}));class r{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=0}static create(){const[d,o]=j.createChannel(t);return[new r(d),o]}static createToBrowser(){const[d,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),d}updateAgentSafeMode(d){const o={preferredMode:d};this._endpoint.send(z.encode(0,F.None,e,o))}updateAgentSafeModeHasSeenNux(d){const o={hasSeenNux:d};this._endpoint.send(z.encode(1,F.None,n,o))}async getAgentSafeModeState(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(2,F.None,c,d))).decode(s)}}t.Proxy=r;class f extends v{constructor(){super(t);p(this,"onDisconnect")}bind(o,N){this.addReceiver(N,async(u,O)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e);o.updateAgentSafeMode(a.preferredMode);break}case 1:{const a=u.decode(n);o.updateAgentSafeModeHasSeenNux(a.hasSeenNux);break}case 2:{u.decode(c);const a=o.getAgentSafeModeState(),V=O.createResponder(s,2,u.header.requestID),E=await a;V(E);break}default:u.header.expectsResponse&&O.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[N,u]=j.createChannel(t);return this.bind(o,u),N}}t.Dispatcher=f})(Re||(Re={}));var Te;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.accessToken)).add(R.forString(s.idToken))}t.measure=e;function n(s,r){s.setString(0,r.accessToken),s.setString(8,r.idToken),s.setF64(16,r.expiresTimestampMsSince1970)}t.encode=n;function c(s,r){return{accessToken:g(s.getString(0)),idToken:g(s.getString(8)),expiresTimestampMsSince1970:g(s.getF64(16))}}t.decode=c})(Te||(Te={}));var tt;(t=>{function e(c){if(c==="justLoggedInAccessToken")return 0;if(c==="reloadPageIfLoggedOut")return 1;if(c==="fullTokenToSessionConversion")return 2;throw new K}t.encode=e;function n(c){switch(c){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}t.decode=n})(tt||(tt={}));class re{}p(re,"interfaceName","web.bridge.AuthHandler"),p(re,"interfaceVersion",1);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){}i.encode=o;function N(u,O){return{}}i.decode=N})(e=t.AuthHandler_HandleMissingSessionAuth_Params||(t.AuthHandler_HandleMissingSessionAuth_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:8},{version:1,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){var O;return R.bytes(i.CURRENT_VERSION.size).add(R.forString((O=u.accountId)!=null?O:null))}i.measure=d;function o(u,O){var a;u.setString(0,(a=O.accountId)!=null?a:null)}i.encode=o;function N(u,O){const a=O>=1?u.getString(0):null;return x({},a!==null?{accountId:a}:{})}i.decode=N})(n=t.AuthHandler_RecordAvailableSessionAuth_Params||(t.AuthHandler_RecordAvailableSessionAuth_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forString(u.accountId))}i.measure=d;function o(u,O){u.setString(0,O.accountId)}i.encode=o;function N(u,O){return{accountId:g(u.getString(0))}}i.decode=N})(c=t.AuthHandler_HandleAcceptedWorkspaceInvite_Params||(t.AuthHandler_HandleAcceptedWorkspaceInvite_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forString(u.accountId))}i.measure=d;function o(u,O){u.setString(0,O.accountId)}i.encode=o;function N(u,O){return{accountId:g(u.getString(0))}}i.decode=N})(s=t.AuthHandler_HandleSwitchAccount_Params||(t.AuthHandler_HandleSwitchAccount_Params={}));class r{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=1}static create(){const[d,o]=j.createChannel(t);return[new r(d),o]}static createToBrowser(){const[d,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),d}handleMissingSessionAuth(){const d={};this._endpoint.send(z.encode(0,F.None,e,d))}recordAvailableSessionAuth(d){const o={accountId:d};this._endpoint.send(z.encode(1,F.None,n,o))}handleAcceptedWorkspaceInvite(d){const o={accountId:d};this._endpoint.send(z.encode(2,F.None,c,o))}handleSwitchAccount(d){const o={accountId:d};this._endpoint.send(z.encode(3,F.None,s,o))}}t.Proxy=r;class f extends v{constructor(){super(t);p(this,"onDisconnect")}bind(o,N){this.addReceiver(N,async(u,O)=>{switch(u.header.ordinal){case 0:{u.decode(e),o.handleMissingSessionAuth();break}case 1:{const a=u.decode(n);o.recordAvailableSessionAuth(a.accountId);break}case 2:{const a=u.decode(c);o.handleAcceptedWorkspaceInvite(a.accountId);break}case 3:{const a=u.decode(s);o.handleSwitchAccount(a.accountId);break}default:u.header.expectsResponse&&O.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[N,u]=j.createChannel(t);return this.bind(o,u),N}}t.Dispatcher=f})(re||(re={}));class he{}p(he,"interfaceName","web.bridge.AuthStateController"),p(he,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:24}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size).add(R.forObject(Te,d.authToken))}s.measure=r;function f(d,o){d.setObjectIndirect(Te,0,o.authToken),d.setEnumValue(tt,8,o.behavior)}s.encode=f;function i(d,o){return{authToken:g(d.getObjectIndirect(Te,0)),behavior:g(d.getEnumValue(tt,8))}}s.decode=i})(e=t.AuthStateController_RefreshSessionContext_Params||(t.AuthStateController_RefreshSessionContext_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}refreshSessionContext(r,f){const i={authToken:r,behavior:f};this._endpoint.send(z.encode(0,F.None,e,i))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{const N=d.decode(e);f.refreshSessionContext(N.authToken,N.behavior);break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(he||(he={}));class Ve{}p(Ve,"interfaceName","web.bridge.ConversationArchiveController"),p(Ve,"interfaceVersion",0);(t=>{let e;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){return R.bytes(r.CURRENT_VERSION.size).add(R.forString(o.conversationId))}r.measure=f;function i(o,N){o.setString(0,N.conversationId)}r.encode=i;function d(o,N){return{conversationId:g(o.getString(0))}}r.decode=d})(e=t.ConversationArchiveController_EnqueueConversationArchive_Params||(t.ConversationArchiveController_EnqueueConversationArchive_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){return R.bytes(r.CURRENT_VERSION.size).add(R.forString(o.conversationId))}r.measure=f;function i(o,N){o.setString(0,N.conversationId)}r.encode=i;function d(o,N){return{conversationId:g(o.getString(0))}}r.decode=d})(n=t.ConversationArchiveController_CancelConversationArchive_Params||(t.ConversationArchiveController_CancelConversationArchive_Params={}));class c{constructor(f){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(f.endpointState,!0),this._version=0}static create(){const[f,i]=j.createChannel(t);return[new c(f),i]}static createToBrowser(){const[f,i]=this.create();return Mojo.bindInterface(t.interfaceName,i.pipe.rawHandle),f}enqueueConversationArchive(f){const i={conversationId:f};this._endpoint.send(z.encode(0,F.None,e,i))}cancelConversationArchive(f){const i={conversationId:f};this._endpoint.send(z.encode(1,F.None,n,i))}}t.Proxy=c;class s extends v{constructor(){super(t);p(this,"onDisconnect")}bind(i,d){this.addReceiver(d,async(o,N)=>{switch(o.header.ordinal){case 0:{const u=o.decode(e);i.enqueueConversationArchive(u.conversationId);break}case 1:{const u=o.decode(n);i.cancelConversationArchive(u.conversationId);break}default:o.header.expectsResponse&&N.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(i)})}createRemote(i){const[d,o]=j.createChannel(t);return this.bind(i,o),d}}t.Dispatcher=s})(Ve||(Ve={}));var xe;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(s,r){}t.encode=n;function c(s,r){return{}}t.decode=c})(xe||(xe={}));var qe;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.conduitToken))}t.measure=e;function n(s,r){s.setEnumValue(ct,0,r.prepareState),s.setF64(8,r.lastPrepareTimestampMsSince1970),s.setString(16,r.conduitToken)}t.encode=n;function c(s,r){return{prepareState:g(s.getEnumValue(ct,0)),lastPrepareTimestampMsSince1970:g(s.getF64(8)),conduitToken:g(s.getString(16))}}t.decode=c})(qe||(qe={}));var oe;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(s,r){s.setEnumValue(it,0,r.selectedTab)}t.encode=n;function c(s,r){return{selectedTab:g(s.getEnumValue(it,0))}}t.decode=c})(oe||(oe={}));var Ne;(t=>{t.VERSION_INFO=[{version:0,size:56}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.id)).add(R.forString(s.name)).add(R.forString(s.mimeType))}t.measure=e;function n(s,r){let f=0;s.setString(0,r.id),s.setI64(8,r.size),s.setString(16,r.name),s.setString(24,r.mimeType),r.width!==null&&r.width!==void 0&&(f|=1,s.setI32(36,r.width)),r.height!==null&&r.height!==void 0&&(f|=2,s.setI32(40,r.height)),r.fileTokenSize!==null&&r.fileTokenSize!==void 0&&(f|=4,s.setI32(44,r.fileTokenSize)),s.setU8(32,f)}t.encode=n;function c(s,r){const f=s.getU8(32),i=(f&1)!=0,d=(f&2)!=0,o=(f&4)!=0;return x(x(x({id:g(s.getString(0)),size:g(s.getI64(8)),name:g(s.getString(16)),mimeType:g(s.getString(24))},i?{width:g(s.getI32(36))}:{}),d?{height:g(s.getI32(40))}:{}),o?{fileTokenSize:g(s.getI32(44))}:{})}t.decode=c})(Ne||(Ne={}));var De;(t=>{t.VERSION_INFO=[{version:0,size:80}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){var r,f,i,d,o,N,u;return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.prompt)).add(R.forStringArray((r=s.systemHints)!=null?r:null)).add(R.forString((f=s.modelSlug)!=null?f:null)).add(R.forObject(oe,(i=s.superWidgetOptions)!=null?i:null)).add(R.forObjectArray(Ne,(d=s.attachments)!=null?d:null)).add(R.forObject(H,(o=s.whisperContent)!=null?o:null)).add(R.forObjectArray(fe,(N=s.tabContextItems)!=null?N:null)).add(R.forString((u=s.promptOrigin)!=null?u:null))}t.measure=e;function n(s,r){var i,d,o,N,u,O,a;let f=0;s.setString(0,r.prompt),s.setStringArray(8,(i=r.systemHints)!=null?i:null),s.setString(16,(d=r.modelSlug)!=null?d:null),r.n7jupdLocalSafeMode!==null&&r.n7jupdLocalSafeMode!==void 0&&(f|=1,r.n7jupdLocalSafeMode&&(f|=2)),r.chatTheme!==null&&r.chatTheme!==void 0&&(f|=4,s.setEnumValue(Se,28,r.chatTheme)),s.setObjectIndirect(oe,32,(o=r.superWidgetOptions)!=null?o:null),s.setObjectArray(Ne,40,(N=r.attachments)!=null?N:null),s.setObjectIndirect(H,48,(u=r.whisperContent)!=null?u:null),s.setObjectArray(fe,56,(O=r.tabContextItems)!=null?O:null),s.setString(64,(a=r.promptOrigin)!=null?a:null),s.setU8(24,f)}t.encode=n;function c(s,r){const f=J(s.getStringArray(8)),i=s.getString(16),d=s.getU8(24),o=(d&1)!=0,N=(d&4)!=0,u=s.getObjectIndirect(oe,32),O=J(s.getObjectArray(Ne,40)),a=s.getObjectIndirect(H,48),V=J(s.getObjectArray(fe,56)),E=s.getString(64);return x(x(x(x(x(x(x(x(x({prompt:g(s.getString(0))},f!==null?{systemHints:f}:{}),i!==null?{modelSlug:i}:{}),o?{n7jupdLocalSafeMode:(d&2)!=0}:{}),N?{chatTheme:g(s.getEnumValue(Se,28))}:{}),u!==null?{superWidgetOptions:u}:{}),O!==null?{attachments:O}:{}),a!==null?{whisperContent:a}:{}),V!==null?{tabContextItems:V}:{}),E!==null?{promptOrigin:E}:{})}t.decode=c})(De||(De={}));var fe;(t=>{t.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56},{version:3,size:56}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){var r,f;return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.id)).add(R.forString(s.url)).add(R.forString(s.title)).add(R.forString((r=s.base64favicon)!=null?r:null)).add(R.forString((f=s.selection)!=null?f:null))}t.measure=e;function n(s,r){var i,d;let f=0;s.setString(0,r.id),s.setString(8,r.url),s.setString(16,r.title),s.setString(24,(i=r.base64favicon)!=null?i:null),s.setString(32,(d=r.selection)!=null?d:null),r.blocked!==null&&r.blocked!==void 0&&(f|=1,r.blocked&&(f|=2)),r.selectionIsEditable!==null&&r.selectionIsEditable!==void 0&&(f|=4,r.selectionIsEditable&&(f|=8)),s.setU8(40,f)}t.encode=n;function c(s,r){const f=s.getString(24),i=r>=1?s.getString(32):null,d=r>=2?s.getU8(40):0,o=(d&1)!=0,N=(d&4)!=0;return x(x(x(x({id:g(s.getString(0)),url:g(s.getString(8)),title:g(s.getString(16))},f!==null?{base64favicon:f}:{}),i!==null?{selection:i}:{}),o?{blocked:(d&2)!=0}:{}),N?{selectionIsEditable:(d&8)!=0}:{})}t.decode=c})(fe||(fe={}));var je;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.prompt)).add(R.forStringArray(s.systemHints))}t.measure=e;function n(s,r){s.setString(0,r.prompt),s.setStringArray(8,r.systemHints)}t.encode=n;function c(s,r){return{prompt:g(s.getString(0)),systemHints:g(J(s.getStringArray(8)))}}t.decode=c})(je||(je={}));var nt;(t=>{function e(c){if(c==="success")return 0;if(c==="error")return 1;throw new K}t.encode=e;function n(c){switch(c){case 0:return"success";case 1:return"error";default:return"success"}}t.decode=n})(nt||(nt={}));var st;(t=>{function e(c){if(c==="mainPage")return 0;if(c==="sidebar")return 1;throw new K}t.encode=e;function n(c){switch(c){case 0:return"mainPage";case 1:return"sidebar";default:throw new K}}t.decode=n})(st||(st={}));var ct;(t=>{function e(c){if(c==="none")return 0;if(c==="sent")return 1;if(c==="success")return 2;if(c==="failure")return 3;throw new K}t.encode=e;function n(c){switch(c){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}t.decode=n})(ct||(ct={}));var it;(t=>{function e(c){if(c==="answer")return 0;if(c==="web")return 1;if(c==="images")return 2;if(c==="videos")return 3;throw new K}t.encode=e;function n(c){switch(c){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}t.decode=n})(it||(it={}));var rt;(t=>{function e(c){if(c==="success")return 0;if(c==="failure")return 1;throw new K}t.encode=e;function n(c){switch(c){case 0:return"success";case 1:return"failure";default:return"success"}}t.decode=n})(rt||(rt={}));var Se;(t=>{function e(c){if(c==="default_")return 0;if(c==="blue")return 1;if(c==="green")return 2;if(c==="yellow")return 3;if(c==="purple")return 4;if(c==="pink")return 5;if(c==="orange")return 6;if(c==="black")return 7;throw new K}t.encode=e;function n(c){switch(c){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}t.decode=n})(Se||(Se={}));var ut;(t=>{function e(c){if(c==="none")return 0;if(c==="startTakeoverFromAgent")return 1;if(c==="endTakeoverFromAgent")return 2;if(c==="stopAgent")return 3;throw new K}t.encode=e;function n(c){switch(c){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}t.decode=n})(ut||(ut={}));class Oe{}p(Oe,"interfaceName","web.bridge.ConversationController"),p(Oe,"interfaceVersion",3);(t=>{let e;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){h.setEnumValue(st,0,b.windowStyle)}I.encode=S;function _(h,b){return{windowStyle:g(h.getEnumValue(st,0))}}I.decode=_})(e=t.ConversationController_SetWindowStyle_Params||(t.ConversationController_SetWindowStyle_Params={}));let n;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.modelSlug))}I.measure=l;function S(h,b){h.setString(0,b.modelSlug)}I.encode=S;function _(h,b){return{modelSlug:g(h.getString(0))}}I.decode=_})(n=t.ConversationController_SetModel_Params||(t.ConversationController_SetModel_Params={}));let c;(I=>{I.VERSION_INFO=[{version:0,size:8}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){}I.encode=S;function _(h,b){return{}}I.decode=_})(c=t.ConversationController_NewConversation_Params||(t.ConversationController_NewConversation_Params={}));let s;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.remoteConversationId))}I.measure=l;function S(h,b){h.setString(0,b.remoteConversationId)}I.encode=S;function _(h,b){return{remoteConversationId:g(h.getString(0))}}I.decode=_})(s=t.ConversationController_LoadConversation_Params||(t.ConversationController_LoadConversation_Params={}));let r;(I=>{I.VERSION_INFO=[{version:0,size:32},{version:1,size:40}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.prompt)).add(R.forStringArray(h.systemHints)).add(R.forString(h.modelSlug))}I.measure=l;function S(h,b){let U=0;h.setString(0,b.prompt),h.setStringArray(8,b.systemHints),h.setString(16,b.modelSlug),b.n7jupdLocalSafeMode!==null&&b.n7jupdLocalSafeMode!==void 0&&(U|=1,b.n7jupdLocalSafeMode&&(U|=2)),h.setU8(24,U)}I.encode=S;function _(h,b){const U=b>=1?h.getU8(24):0,A=(U&1)!=0;return x({prompt:g(h.getString(0)),systemHints:g(J(h.getStringArray(8))),modelSlug:g(h.getString(16))},A?{n7jupdLocalSafeMode:(U&2)!=0}:{})}I.decode=_})(r=t.ConversationController_RequestCompletion_Params||(t.ConversationController_RequestCompletion_Params={}));let f;(I=>{I.VERSION_INFO=[{version:0,size:24}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){var b,U;return R.bytes(I.CURRENT_VERSION.size).add(R.forString((b=h.userMessage)!=null?b:null)).add(R.forString((U=h.targetedReply)!=null?U:null))}I.measure=l;function S(h,b){var U,A;h.setString(0,(U=b.userMessage)!=null?U:null),h.setString(8,(A=b.targetedReply)!=null?A:null)}I.encode=S;function _(h,b){const U=h.getString(0),A=h.getString(8);return x(x({},U!==null?{userMessage:U}:{}),A!==null?{targetedReply:A}:{})}I.decode=_})(f=t.ConversationController_PopulatePrompt_Params||(t.ConversationController_PopulatePrompt_Params={}));let i;(I=>{I.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48},{version:3,size:48}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){var b,U;return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.url)).add(R.forString(h.title)).add(R.forString((b=h.base64favicon)!=null?b:null)).add(R.forString((U=h.selection)!=null?U:null))}I.measure=l;function S(h,b){var A,W;let U=0;h.setString(0,b.url),h.setString(8,b.title),h.setString(16,(A=b.base64favicon)!=null?A:null),h.setString(24,(W=b.selection)!=null?W:null),b.blocked!==null&&b.blocked!==void 0&&(U|=1,b.blocked&&(U|=2)),b.selectionIsEditable!==null&&b.selectionIsEditable!==void 0&&(U|=4,b.selectionIsEditable&&(U|=8)),h.setU8(32,U)}I.encode=S;function _(h,b){const U=h.getString(16),A=b>=1?h.getString(24):null,W=b>=2?h.getU8(32):0,Ue=(W&1)!=0,kt=(W&4)!=0;return x(x(x(x({url:g(h.getString(0)),title:g(h.getString(8))},U!==null?{base64favicon:U}:{}),A!==null?{selection:A}:{}),Ue?{blocked:(W&2)!=0}:{}),kt?{selectionIsEditable:(W&8)!=0}:{})}I.decode=_})(i=t.ConversationController_UpdateContext_Params||(t.ConversationController_UpdateContext_Params={}));let d;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObject(qe,h.details))}I.measure=l;function S(h,b){h.setObjectIndirect(qe,0,b.details)}I.encode=S;function _(h,b){return{details:g(h.getObjectIndirect(qe,0))}}I.decode=_})(d=t.ConversationController_PrepareConversation_Params||(t.ConversationController_PrepareConversation_Params={}));let o;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObject(oe,h.options))}I.measure=l;function S(h,b){h.setObjectIndirect(oe,0,b.options)}I.encode=S;function _(h,b){return{options:g(h.getObjectIndirect(oe,0))}}I.decode=_})(o=t.ConversationController_SetSuperWidgetOptions_Params||(t.ConversationController_SetSuperWidgetOptions_Params={}));let N;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObjectArray(Ne,h.attachments))}I.measure=l;function S(h,b){h.setObjectArray(Ne,0,b.attachments)}I.encode=S;function _(h,b){return{attachments:g(J(h.getObjectArray(Ne,0)))}}I.decode=_})(N=t.ConversationController_SetAttachments_Params||(t.ConversationController_SetAttachments_Params={}));let u;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.to))}I.measure=l;function S(h,b){h.setString(0,b.to)}I.encode=S;function _(h,b){return{to:g(h.getString(0))}}I.decode=_})(u=t.ConversationController_Navigate_Params||(t.ConversationController_Navigate_Params={}));let O;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObject(H,h.whisperContent))}I.measure=l;function S(h,b){h.setObjectIndirect(H,0,b.whisperContent)}I.encode=S;function _(h,b){return{whisperContent:g(h.getObjectIndirect(H,0))}}I.decode=_})(O=t.ConversationController_SetWhisperContent_Params||(t.ConversationController_SetWhisperContent_Params={}));let a;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObjectArray(fe,h.tabs))}I.measure=l;function S(h,b){h.setObjectArray(fe,0,b.tabs)}I.encode=S;function _(h,b){return{tabs:g(J(h.getObjectArray(fe,0)))}}I.decode=_})(a=t.ConversationController_SetTabContext_Params||(t.ConversationController_SetTabContext_Params={}));let V;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.origin))}I.measure=l;function S(h,b){h.setString(0,b.origin)}I.encode=S;function _(h,b){return{origin:g(h.getString(0))}}I.decode=_})(V=t.ConversationController_SetPromptOrigin_Params||(t.ConversationController_SetPromptOrigin_Params={}));let E;(I=>{I.VERSION_INFO=[{version:0,size:8}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){}I.encode=S;function _(h,b){return{}}I.decode=_})(E=t.ConversationController_CloseNavigationSidebar_Params||(t.ConversationController_CloseNavigationSidebar_Params={}));let y;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){h.setEnumValue(Se,0,b.theme)}I.encode=S;function _(h,b){return{theme:g(h.getEnumValue(Se,0))}}I.decode=_})(y=t.ConversationController_SetChatTheme_Params||(t.ConversationController_SetChatTheme_Params={}));let m;(I=>{I.VERSION_INFO=[{version:0,size:8}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){}I.encode=S;function _(h,b){return{}}I.decode=_})(m=t.ConversationController_ShowSearch_Params||(t.ConversationController_ShowSearch_Params={}));let D;(I=>{I.VERSION_INFO=[{version:0,size:24}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.query)).add(R.forString(h.navlinksEvent))}I.measure=l;function S(h,b){h.setString(0,b.query),h.setString(8,b.navlinksEvent)}I.encode=S;function _(h,b){return{query:g(h.getString(0)),navlinksEvent:g(h.getString(8))}}I.decode=_})(D=t.ConversationController_PopulateNavlinks_Params||(t.ConversationController_PopulateNavlinks_Params={}));let w;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){h.setEnumValue(ut,0,b.request)}I.encode=S;function _(h,b){return{request:g(h.getEnumValue(ut,0))}}I.decode=_})(w=t.ConversationController_HandleAgentRequest_Params||(t.ConversationController_HandleAgentRequest_Params={}));let T;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){h.setEnumValue(ie,0,b.preferredMode)}I.encode=S;function _(h,b){return{preferredMode:g(h.getEnumValue(ie,0))}}I.decode=_})(T=t.ConversationController_SetAgentSafeMode_Params||(t.ConversationController_SetAgentSafeMode_Params={}));let q;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){let U=0;b.hasSeenNux&&(U|=1),h.setU8(0,U)}I.encode=S;function _(h,b){return{hasSeenNux:(h.getU8(0)&1)!=0}}I.decode=_})(q=t.ConversationController_SetAgentSafeModeHasSeenNux_Params||(t.ConversationController_SetAgentSafeModeHasSeenNux_Params={}));let $;(I=>{I.VERSION_INFO=[{version:0,size:32}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forString(h.name)).add(R.forNumericArray(Uint8Array,h.bytes)).add(R.forString(h.mimeType))}I.measure=l;function S(h,b){h.setString(0,b.name),h.setNumericArray(Uint8Array,8,b.bytes),h.setString(16,b.mimeType)}I.encode=S;function _(h,b){return{name:g(h.getString(0)),bytes:g(h.getNumericArray(Uint8Array,8)),mimeType:g(h.getString(16))}}I.decode=_})($=t.ConversationController_AttachUserFile_Params||(t.ConversationController_AttachUserFile_Params={}));let Z;(I=>{I.VERSION_INFO=[{version:0,size:8}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){}I.encode=S;function _(h,b){return{}}I.decode=_})(Z=t.ConversationController_ShowNavigationSidebarAsOverlay_Params||(t.ConversationController_ShowNavigationSidebarAsOverlay_Params={}));let C;(I=>{I.VERSION_INFO=[{version:0,size:8}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){}I.encode=S;function _(h,b){return{}}I.decode=_})(C=t.ConversationController_AttachTab_Params||(t.ConversationController_AttachTab_Params={}));let we;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObject(je,h.completion))}I.measure=l;function S(h,b){h.setObjectIndirect(je,0,b.completion)}I.encode=S;function _(h,b){return{completion:g(h.getObjectIndirect(je,0))}}I.decode=_})(we=t.ConversationController_SendSideChatCompletion_Params||(t.ConversationController_SendSideChatCompletion_Params={}));let ae;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObject(xe,h.parameters))}I.measure=l;function S(h,b){h.setObjectIndirect(xe,0,b.parameters)}I.encode=S;function _(h,b){return{parameters:g(h.getObjectIndirect(xe,0))}}I.decode=_})(ae=t.ConversationController_PerformHandshake_Params||(t.ConversationController_PerformHandshake_Params={}));let ht;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){h.setEnumValue(nt,0,b.result)}I.encode=S;function _(h,b){return{result:g(h.getEnumValue(nt,0))}}I.decode=_})(ht=t.ConversationController_PerformHandshake_ResponseParams||(t.ConversationController_PerformHandshake_ResponseParams={}));let Ot;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size).add(R.forObject(De,h.params))}I.measure=l;function S(h,b){h.setObjectIndirect(De,0,b.params)}I.encode=S;function _(h,b){return{params:g(h.getObjectIndirect(De,0))}}I.decode=_})(Ot=t.ConversationController_RequestCompletion2_Params||(t.ConversationController_RequestCompletion2_Params={}));let Et;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function l(h){return R.bytes(I.CURRENT_VERSION.size)}I.measure=l;function S(h,b){h.setEnumValue(rt,0,b.result)}I.encode=S;function _(h,b){return{result:g(h.getEnumValue(rt,0))}}I.decode=_})(Et=t.ConversationController_RequestCompletion2_ResponseParams||(t.ConversationController_RequestCompletion2_ResponseParams={}));class at{constructor(l){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(l.endpointState,!0),this._version=3}static create(){const[l,S]=j.createChannel(t);return[new at(l),S]}static createToBrowser(){const[l,S]=this.create();return Mojo.bindInterface(t.interfaceName,S.pipe.rawHandle),l}setWindowStyle(l){const S={windowStyle:l};this._endpoint.send(z.encode(0,F.None,e,S))}setModel(l){const S={modelSlug:l};this._endpoint.send(z.encode(1,F.None,n,S))}newConversation(){const l={};this._endpoint.send(z.encode(2,F.None,c,l))}loadConversation(l){const S={remoteConversationId:l};this._endpoint.send(z.encode(3,F.None,s,S))}requestCompletion(l,S,_,h){const b={prompt:l,systemHints:S,modelSlug:_,n7jupdLocalSafeMode:h};this._endpoint.send(z.encode(4,F.None,r,b))}populatePrompt(l,S){const _={userMessage:l,targetedReply:S};this._endpoint.send(z.encode(5,F.None,f,_))}updateContext(l,S,_,h,b,U){const A={url:l,title:S,base64favicon:_,selection:h,blocked:b,selectionIsEditable:U};this._endpoint.send(z.encode(6,F.None,i,A))}prepareConversation(l){const S={details:l};this._endpoint.send(z.encode(7,F.None,d,S))}setSuperWidgetOptions(l){const S={options:l};this._endpoint.send(z.encode(8,F.None,o,S))}setAttachments(l){const S={attachments:l};this._endpoint.send(z.encode(9,F.None,N,S))}navigate(l){const S={to:l};this._endpoint.send(z.encode(10,F.None,u,S))}setWhisperContent(l){const S={whisperContent:l};this._endpoint.send(z.encode(11,F.None,O,S))}setTabContext(l){const S={tabs:l};this._endpoint.send(z.encode(12,F.None,a,S))}setPromptOrigin(l){const S={origin:l};this._endpoint.send(z.encode(13,F.None,V,S))}closeNavigationSidebar(){const l={};this._endpoint.send(z.encode(14,F.None,E,l))}setChatTheme(l){const S={theme:l};this._endpoint.send(z.encode(15,F.None,y,S))}showSearch(){const l={};this._endpoint.send(z.encode(16,F.None,m,l))}populateNavlinks(l,S){const _={query:l,navlinksEvent:S};this._endpoint.send(z.encode(17,F.None,D,_))}handleAgentRequest(l){const S={request:l};this._endpoint.send(z.encode(18,F.None,w,S))}setAgentSafeMode(l){const S={preferredMode:l};this._endpoint.send(z.encode(19,F.None,T,S))}setAgentSafeModeHasSeenNux(l){const S={hasSeenNux:l};this._endpoint.send(z.encode(20,F.None,q,S))}attachUserFile(l,S,_){const h={name:l,bytes:S,mimeType:_};this._endpoint.send(z.encode(21,F.None,$,h))}showNavigationSidebarAsOverlay(){const l={};this._endpoint.send(z.encode(22,F.None,Z,l))}attachTab(){const l={};this._endpoint.send(z.encode(23,F.None,C,l))}sendSideChatCompletion(l){const S={completion:l};this._endpoint.send(z.encode(24,F.None,we,S))}async performHandshake(l){const S={parameters:l};return(await this._endpoint.sendAndAwaitResponse(z.encode(25,F.None,ae,S))).decode(ht).result}async requestCompletion2(l){const S={params:l};return(await this._endpoint.sendAndAwaitResponse(z.encode(26,F.None,Ot,S))).decode(Et).result}}t.Proxy=at;class jt extends v{constructor(){super(t);p(this,"onDisconnect")}bind(S,_){this.addReceiver(_,async(h,b)=>{switch(h.header.ordinal){case 0:{const U=h.decode(e);S.setWindowStyle(U.windowStyle);break}case 1:{const U=h.decode(n);S.setModel(U.modelSlug);break}case 2:{h.decode(c),S.newConversation();break}case 3:{const U=h.decode(s);S.loadConversation(U.remoteConversationId);break}case 4:{const U=h.decode(r);S.requestCompletion(U.prompt,U.systemHints,U.modelSlug,U.n7jupdLocalSafeMode);break}case 5:{const U=h.decode(f);S.populatePrompt(U.userMessage,U.targetedReply);break}case 6:{const U=h.decode(i);S.updateContext(U.url,U.title,U.base64favicon,U.selection,U.blocked,U.selectionIsEditable);break}case 7:{const U=h.decode(d);S.prepareConversation(U.details);break}case 8:{const U=h.decode(o);S.setSuperWidgetOptions(U.options);break}case 9:{const U=h.decode(N);S.setAttachments(U.attachments);break}case 10:{const U=h.decode(u);S.navigate(U.to);break}case 11:{const U=h.decode(O);S.setWhisperContent(U.whisperContent);break}case 12:{const U=h.decode(a);S.setTabContext(U.tabs);break}case 13:{const U=h.decode(V);S.setPromptOrigin(U.origin);break}case 14:{h.decode(E),S.closeNavigationSidebar();break}case 15:{const U=h.decode(y);S.setChatTheme(U.theme);break}case 16:{h.decode(m),S.showSearch();break}case 17:{const U=h.decode(D);S.populateNavlinks(U.query,U.navlinksEvent);break}case 18:{const U=h.decode(w);S.handleAgentRequest(U.request);break}case 19:{const U=h.decode(T);S.setAgentSafeMode(U.preferredMode);break}case 20:{const U=h.decode(q);S.setAgentSafeModeHasSeenNux(U.hasSeenNux);break}case 21:{const U=h.decode($);S.attachUserFile(U.name,U.bytes,U.mimeType);break}case 22:{h.decode(Z),S.showNavigationSidebarAsOverlay();break}case 23:{h.decode(C),S.attachTab();break}case 24:{const U=h.decode(we);S.sendSideChatCompletion(U.completion);break}case 25:{const U=h.decode(ae),A=S.performHandshake(U.parameters),W=b.createResponder(ht,25,h.header.requestID),Ue=await A;W({result:Ue});break}case 26:{const U=h.decode(Ot),A=S.requestCompletion2(U.params),W=b.createResponder(Et,26,h.header.requestID),Ue=await A;W({result:Ue});break}default:h.header.expectsResponse&&b.sendUnimplementedResponse(h.header.requestID,h.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(S)})}createRemote(S){const[_,h]=j.createChannel(t);return this.bind(S,h),_}}t.Dispatcher=jt})(Oe||(Oe={}));var dt;(t=>{function e(c){if(c==="streamOpened")return 0;if(c==="messageReceived")return 1;if(c==="streamClosed")return 2;if(c==="assistantMessageReceived")return 3;if(c==="streamError")return 4;if(c==="streamAborted")return 5;throw new K}t.encode=e;function n(c){switch(c){case 0:return"streamOpened";case 1:return"messageReceived";case 2:return"streamClosed";case 3:return"assistantMessageReceived";case 4:return"streamError";case 5:return"streamAborted";default:return"streamOpened"}}t.decode=n})(dt||(dt={}));class Ke{}p(Ke,"interfaceName","web.bridge.ConversationStateHandler"),p(Ke,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size)}s.measure=r;function f(d,o){d.setEnumValue(dt,0,o.event)}s.encode=f;function i(d,o){return{event:g(d.getEnumValue(dt,0))}}s.decode=i})(e=t.ConversationStateHandler_RecordConversationStreamEvent_Params||(t.ConversationStateHandler_RecordConversationStreamEvent_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}recordConversationStreamEvent(r){const f={event:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{const N=d.decode(e);f.recordConversationStreamEvent(N.event);break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(Ke||(Ke={}));class ot{}p(ot,"interfaceName","web.bridge.GenericInterface"),p(ot,"interfaceVersion",0);(t=>{let e;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){return R.bytes(r.CURRENT_VERSION.size).add(R.forString(o.request))}r.measure=f;function i(o,N){o.setString(0,N.request)}r.encode=i;function d(o,N){return{request:g(o.getString(0))}}r.decode=d})(e=t.GenericInterface_AcceptMessage_Params||(t.GenericInterface_AcceptMessage_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){var N;return R.bytes(r.CURRENT_VERSION.size).add(R.forString((N=o.response)!=null?N:null))}r.measure=f;function i(o,N){var u;o.setString(0,(u=N.response)!=null?u:null)}r.encode=i;function d(o,N){const u=o.getString(0);return x({},u!==null?{response:u}:{})}r.decode=d})(n=t.GenericInterface_AcceptMessage_ResponseParams||(t.GenericInterface_AcceptMessage_ResponseParams={}));class c{constructor(f){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(f.endpointState,!0),this._version=0}static create(){const[f,i]=j.createChannel(t);return[new c(f),i]}static createToBrowser(){const[f,i]=this.create();return Mojo.bindInterface(t.interfaceName,i.pipe.rawHandle),f}async acceptMessage(f){const i={request:f};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,i))).decode(n).response}}t.Proxy=c;class s extends v{constructor(){super(t);p(this,"onDisconnect")}bind(i,d){this.addReceiver(d,async(o,N)=>{switch(o.header.ordinal){case 0:{const u=o.decode(e),O=i.acceptMessage(u.request),a=N.createResponder(n,0,o.header.requestID),V=await O;a({response:V});break}default:o.header.expectsResponse&&N.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(i)})}createRemote(i){const[d,o]=j.createChannel(t);return this.bind(i,o),d}}t.Dispatcher=s})(ot||(ot={}));class Le{}p(Le,"interfaceName","web.bridge.LinkHandler"),p(Le,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:24}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size).add(R.forString(d.url)).add(R.forString(d.target))}s.measure=r;function f(d,o){d.setString(0,o.url),d.setString(8,o.target)}s.encode=f;function i(d,o){return{url:g(d.getString(0)),target:g(d.getString(8))}}s.decode=i})(e=t.LinkHandler_HandleLink_Params||(t.LinkHandler_HandleLink_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}handleLink(r,f){const i={url:r,target:f};this._endpoint.send(z.encode(0,F.None,e,i))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{const N=d.decode(e);f.handleLink(N.url,N.target);break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(Le||(Le={}));var ke;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.author)).add(R.forString(s.message))}t.measure=e;function n(s,r){s.setString(0,r.author),s.setString(8,r.message)}t.encode=n;function c(s,r){return{author:g(s.getString(0)),message:g(s.getString(8))}}t.decode=c})(ke||(ke={}));class le{}p(le,"interfaceName","web.bridge.LocalToolHandler"),p(le,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forString(u.toolname)).add(R.forString(u.args))}i.measure=d;function o(u,O){u.setString(0,O.toolname),u.setString(8,O.args)}i.encode=o;function N(u,O){return{toolname:g(u.getString(0)),args:g(u.getString(8))}}i.decode=N})(e=t.LocalToolHandler_CallLocalTool_Params||(t.LocalToolHandler_CallLocalTool_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forObjectArray(ke,u.response))}i.measure=d;function o(u,O){u.setObjectArray(ke,0,O.response)}i.encode=o;function N(u,O){return{response:g(J(u.getObjectArray(ke,0)))}}i.decode=N})(n=t.LocalToolHandler_CallLocalTool_ResponseParams||(t.LocalToolHandler_CallLocalTool_ResponseParams={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){}i.encode=o;function N(u,O){return{}}i.decode=N})(c=t.LocalToolHandler_GetToolNames_Params||(t.LocalToolHandler_GetToolNames_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forStringArray(u.toolnames))}i.measure=d;function o(u,O){u.setStringArray(0,O.toolnames)}i.encode=o;function N(u,O){return{toolnames:g(J(u.getStringArray(0)))}}i.decode=N})(s=t.LocalToolHandler_GetToolNames_ResponseParams||(t.LocalToolHandler_GetToolNames_ResponseParams={}));class r{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=0}static create(){const[d,o]=j.createChannel(t);return[new r(d),o]}static createToBrowser(){const[d,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),d}async callLocalTool(d,o){const N={toolname:d,args:o};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,N))).decode(n).response}async getToolNames(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,c,d))).decode(s).toolnames}}t.Proxy=r;class f extends v{constructor(){super(t);p(this,"onDisconnect")}bind(o,N){this.addReceiver(N,async(u,O)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e),V=o.callLocalTool(a.toolname,a.args),E=O.createResponder(n,0,u.header.requestID),y=await V;E({response:y});break}case 1:{u.decode(c);const a=o.getToolNames(),V=O.createResponder(s,1,u.header.requestID),E=await a;V({toolnames:E});break}default:u.header.expectsResponse&&O.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[N,u]=j.createChannel(t);return this.bind(o,u),N}}t.Dispatcher=f})(le||(le={}));var te;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){var r;return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.clientId)).add(R.forString((r=s.serverId)!=null?r:null))}t.measure=e;function n(s,r){var f;s.setString(0,r.clientId),s.setString(8,(f=r.serverId)!=null?f:null)}t.encode=n;function c(s,r){const f=s.getString(8);return x({clientId:g(s.getString(0))},f!==null?{serverId:f}:{})}t.decode=c})(te||(te={}));var ne;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){var r;return R.bytes(t.CURRENT_VERSION.size).add(R.forString((r=s.title)!=null?r:null))}t.measure=e;function n(s,r){var i;let f=0;s.setString(0,(i=r.title)!=null?i:null),r.updateTimestampMsSince1970!==null&&r.updateTimestampMsSince1970!==void 0&&(f|=1,s.setF64(16,r.updateTimestampMsSince1970)),r.status!==null&&r.status!==void 0&&(f|=2,s.setEnumValue(Nt,12,r.status)),s.setU8(8,f)}t.encode=n;function c(s,r){const f=s.getString(0),i=s.getU8(8),d=(i&1)!=0,o=(i&2)!=0;return x(x(x({},f!==null?{title:f}:{}),d?{updateTimestampMsSince1970:g(s.getF64(16))}:{}),o?{status:g(s.getEnumValue(Nt,12))}:{})}t.decode=c})(ne||(ne={}));var Nt;(t=>{function e(c){if(c==="none")return 0;if(c==="inProgress")return 1;if(c==="done")return 2;throw new K}t.encode=e;function n(c){switch(c){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}t.decode=n})(Nt||(Nt={}));class Je{}p(Je,"interfaceName","web.bridge.NavigationSidebarController"),p(Je,"interfaceVersion",0);(t=>{let e;(N=>{N.VERSION_INFO=[{version:0,size:16}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){let y=0;E.visible&&(y|=1),V.setU8(0,y)}N.encode=O;function a(V,E){return{visible:(V.getU8(0)&1)!=0}}N.decode=a})(e=t.NavigationSidebarController_SetSidebarVisibility_Params||(t.NavigationSidebarController_SetSidebarVisibility_Params={}));let n;(N=>{N.VERSION_INFO=[{version:0,size:8}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){}N.encode=O;function a(V,E){return{}}N.decode=a})(n=t.NavigationSidebarController_ToggleSidebarVisibility_Params||(t.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let c;(N=>{N.VERSION_INFO=[{version:0,size:8}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){}N.encode=O;function a(V,E){return{}}N.decode=a})(c=t.NavigationSidebarController_NewConversation_Params||(t.NavigationSidebarController_NewConversation_Params={}));let s;(N=>{N.VERSION_INFO=[{version:0,size:24}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size).add(R.forObject(te,V.id)).add(R.forObject(ne,V.data))}N.measure=u;function O(V,E){V.setObjectIndirect(te,0,E.id),V.setObjectIndirect(ne,8,E.data)}N.encode=O;function a(V,E){return{id:g(V.getObjectIndirect(te,0)),data:g(V.getObjectIndirect(ne,8))}}N.decode=a})(s=t.NavigationSidebarController_AddConversationHistoryItem_Params||(t.NavigationSidebarController_AddConversationHistoryItem_Params={}));let r;(N=>{N.VERSION_INFO=[{version:0,size:24}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size).add(R.forObject(te,V.id)).add(R.forObject(ne,V.data))}N.measure=u;function O(V,E){V.setObjectIndirect(te,0,E.id),V.setObjectIndirect(ne,8,E.data)}N.encode=O;function a(V,E){return{id:g(V.getObjectIndirect(te,0)),data:g(V.getObjectIndirect(ne,8))}}N.decode=a})(r=t.NavigationSidebarController_UpdateConversationHistoryItem_Params||(t.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let f;(N=>{N.VERSION_INFO=[{version:0,size:8}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){}N.encode=O;function a(V,E){return{}}N.decode=a})(f=t.NavigationSidebarController_GetSidebarVisibility_Params||(t.NavigationSidebarController_GetSidebarVisibility_Params={}));let i;(N=>{N.VERSION_INFO=[{version:0,size:16}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){let y=0;E.visible&&(y|=1),V.setU8(0,y)}N.encode=O;function a(V,E){return{visible:(V.getU8(0)&1)!=0}}N.decode=a})(i=t.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(t.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class d{constructor(u){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(u.endpointState,!0),this._version=0}static create(){const[u,O]=j.createChannel(t);return[new d(u),O]}static createToBrowser(){const[u,O]=this.create();return Mojo.bindInterface(t.interfaceName,O.pipe.rawHandle),u}setSidebarVisibility(u){const O={visible:u};this._endpoint.send(z.encode(0,F.None,e,O))}toggleSidebarVisibility(){const u={};this._endpoint.send(z.encode(1,F.None,n,u))}newConversation(){const u={};this._endpoint.send(z.encode(2,F.None,c,u))}addConversationHistoryItem(u,O){const a={id:u,data:O};this._endpoint.send(z.encode(3,F.None,s,a))}updateConversationHistoryItem(u,O){const a={id:u,data:O};this._endpoint.send(z.encode(4,F.None,r,a))}async getSidebarVisibility(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(5,F.None,f,u))).decode(i).visible}}t.Proxy=d;class o extends v{constructor(){super(t);p(this,"onDisconnect")}bind(O,a){this.addReceiver(a,async(V,E)=>{switch(V.header.ordinal){case 0:{const y=V.decode(e);O.setSidebarVisibility(y.visible);break}case 1:{V.decode(n),O.toggleSidebarVisibility();break}case 2:{V.decode(c),O.newConversation();break}case 3:{const y=V.decode(s);O.addConversationHistoryItem(y.id,y.data);break}case 4:{const y=V.decode(r);O.updateConversationHistoryItem(y.id,y.data);break}case 5:{V.decode(f);const y=O.getSidebarVisibility(),m=E.createResponder(i,5,V.header.requestID),D=await y;m({visible:D});break}default:V.header.expectsResponse&&E.sendUnimplementedResponse(V.header.requestID,V.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(O)})}createRemote(O){const[a,V]=j.createChannel(t);return this.bind(O,V),a}}t.Dispatcher=o})(Je||(Je={}));var ft;(t=>{function e(c){if(c==="general")return 0;if(c==="personalization")return 1;if(c==="searchEngines")return 2;if(c==="dataControls")return 3;if(c==="modelTraining")return 4;if(c==="autofill")return 5;throw new K}t.encode=e;function n(c){switch(c){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}t.decode=n})(ft||(ft={}));class Xe{}p(Xe,"interfaceName","web.bridge.OpenSettingsController"),p(Xe,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size)}s.measure=r;function f(d,o){let N=0;o.tab!==null&&o.tab!==void 0&&(N|=1,d.setEnumValue(ft,4,o.tab)),d.setU8(0,N)}s.encode=f;function i(d,o){const u=(d.getU8(0)&1)!=0;return x({},u?{tab:g(d.getEnumValue(ft,4))}:{})}s.decode=i})(e=t.OpenSettingsController_OpenSettings_Params||(t.OpenSettingsController_OpenSettings_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}openSettings(r){const f={tab:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{const N=d.decode(e);f.openSettings(N.tab);break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(Xe||(Xe={}));var It;(t=>{function e(c){if(c==="messageSent")return 0;if(c==="addTabContext")return 1;if(c==="removeTabContext")return 2;throw new K}t.encode=e;function n(c){switch(c){case 0:return"messageSent";case 1:return"addTabContext";case 2:return"removeTabContext";default:return"messageSent"}}t.decode=n})(It||(It={}));class Qe{}p(Qe,"interfaceName","web.bridge.ProductEventHandler"),p(Qe,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size)}s.measure=r;function f(d,o){d.setEnumValue(It,0,o.eventName)}s.encode=f;function i(d,o){return{eventName:g(d.getEnumValue(It,0))}}s.decode=i})(e=t.ProductEventHandler_TriggerProductEvent_Params||(t.ProductEventHandler_TriggerProductEvent_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}triggerProductEvent(r){const f={eventName:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{const N=d.decode(e);f.triggerProductEvent(N.eventName);break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(Qe||(Qe={}));var G;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(s,r){let f=0;r.isAdultSearchEnabled&&(f|=1),r.canUserEnable&&(f|=2),s.setU8(0,f)}t.encode=n;function c(s,r){const f=s.getU8(0);return{isAdultSearchEnabled:(f&1)!=0,canUserEnable:(f&2)!=0}}t.decode=c})(G||(G={}));class be{}p(be,"interfaceName","web.bridge.SettingsHandler"),p(be,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forObject(G,u.setting))}i.measure=d;function o(u,O){u.setObjectIndirect(G,0,O.setting)}i.encode=o;function N(u,O){return{setting:g(u.getObjectIndirect(G,0))}}i.decode=N})(e=t.SettingsHandler_UpdateAdultSearchSetting_Params||(t.SettingsHandler_UpdateAdultSearchSetting_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){let a=0;O.response&&(a|=1),u.setU8(0,a)}i.encode=o;function N(u,O){return{response:(u.getU8(0)&1)!=0}}i.decode=N})(n=t.SettingsHandler_UpdateAdultSearchSetting_ResponseParams||(t.SettingsHandler_UpdateAdultSearchSetting_ResponseParams={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){}i.encode=o;function N(u,O){return{}}i.decode=N})(c=t.SettingsHandler_GetAdultSearchSetting_Params||(t.SettingsHandler_GetAdultSearchSetting_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forObject(G,u.setting))}i.measure=d;function o(u,O){u.setObjectIndirect(G,0,O.setting)}i.encode=o;function N(u,O){return{setting:g(u.getObjectIndirect(G,0))}}i.decode=N})(s=t.SettingsHandler_GetAdultSearchSetting_ResponseParams||(t.SettingsHandler_GetAdultSearchSetting_ResponseParams={}));class r{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=0}static create(){const[d,o]=j.createChannel(t);return[new r(d),o]}static createToBrowser(){const[d,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),d}async updateAdultSearchSetting(d){const o={setting:d};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,o))).decode(n).response}async getAdultSearchSetting(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,c,d))).decode(s).setting}}t.Proxy=r;class f extends v{constructor(){super(t);p(this,"onDisconnect")}bind(o,N){this.addReceiver(N,async(u,O)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e),V=o.updateAdultSearchSetting(a.setting),E=O.createResponder(n,0,u.header.requestID),y=await V;E({response:y});break}case 1:{u.decode(c);const a=o.getAdultSearchSetting(),V=O.createResponder(s,1,u.header.requestID),E=await a;V({setting:E});break}default:u.header.expectsResponse&&O.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[N,u]=j.createChannel(t);return this.bind(o,u),N}}t.Dispatcher=f})(be||(be={}));class Ee{}p(Ee,"interfaceName","web.bridge.SettingsController"),p(Ee,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size).add(R.forObject(G,d.setting))}s.measure=r;function f(d,o){d.setObjectIndirect(G,0,o.setting)}s.encode=f;function i(d,o){return{setting:g(d.getObjectIndirect(G,0))}}s.decode=i})(e=t.SettingsController_HandleAdultSearchSettingChanged_Params||(t.SettingsController_HandleAdultSearchSettingChanged_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}handleAdultSearchSettingChanged(r){const f={setting:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{const N=d.decode(e);f.handleAdultSearchSettingChanged(N.setting);break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(Ee||(Ee={}));class ue{}p(ue,"interfaceName","web.bridge.DesktopSidebarController"),p(ue,"interfaceVersion",0);(t=>{let e;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function N(a){return R.bytes(o.CURRENT_VERSION.size)}o.measure=N;function u(a,V){}o.encode=u;function O(a,V){return{}}o.decode=O})(e=t.DesktopSidebarController_CloseSidebar_Params||(t.DesktopSidebarController_CloseSidebar_Params={}));let n;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function N(a){return R.bytes(o.CURRENT_VERSION.size)}o.measure=N;function u(a,V){}o.encode=u;function O(a,V){return{}}o.decode=O})(n=t.DesktopSidebarController_CanHideHeader_Params||(t.DesktopSidebarController_CanHideHeader_Params={}));let c;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function N(a){return R.bytes(o.CURRENT_VERSION.size)}o.measure=N;function u(a,V){let E=0;V.canHideHeader&&(E|=1),a.setU8(0,E)}o.encode=u;function O(a,V){return{canHideHeader:(a.getU8(0)&1)!=0}}o.decode=O})(c=t.DesktopSidebarController_CanHideHeader_ResponseParams||(t.DesktopSidebarController_CanHideHeader_ResponseParams={}));let s;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function N(a){return R.bytes(o.CURRENT_VERSION.size)}o.measure=N;function u(a,V){}o.encode=u;function O(a,V){return{}}o.decode=O})(s=t.DesktopSidebarController_BecomeMainPage_Params||(t.DesktopSidebarController_BecomeMainPage_Params={}));let r;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function N(a){return R.bytes(o.CURRENT_VERSION.size)}o.measure=N;function u(a,V){}o.encode=u;function O(a,V){return{}}o.decode=O})(r=t.DesktopSidebarController_OpenInNewTab_Params||(t.DesktopSidebarController_OpenInNewTab_Params={}));let f;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function N(a){return R.bytes(o.CURRENT_VERSION.size).add(R.forString(a.text))}o.measure=N;function u(a,V){a.setString(0,V.text)}o.encode=u;function O(a,V){return{text:g(a.getString(0))}}o.decode=O})(f=t.DesktopSidebarController_InsertTextFromWebContent_Params||(t.DesktopSidebarController_InsertTextFromWebContent_Params={}));class i{constructor(N){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(N.endpointState,!0),this._version=0}static create(){const[N,u]=j.createChannel(t);return[new i(N),u]}static createToBrowser(){const[N,u]=this.create();return Mojo.bindInterface(t.interfaceName,u.pipe.rawHandle),N}closeSidebar(){const N={};this._endpoint.send(z.encode(0,F.None,e,N))}async canHideHeader(){const N={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,N))).decode(c).canHideHeader}becomeMainPage(){const N={};this._endpoint.send(z.encode(2,F.None,s,N))}openInNewTab(){const N={};this._endpoint.send(z.encode(3,F.None,r,N))}insertTextFromWebContent(N){const u={text:N};this._endpoint.send(z.encode(4,F.None,f,u))}}t.Proxy=i;class d extends v{constructor(){super(t);p(this,"onDisconnect")}bind(u,O){this.addReceiver(O,async(a,V)=>{switch(a.header.ordinal){case 0:{a.decode(e),u.closeSidebar();break}case 1:{a.decode(n);const E=u.canHideHeader(),y=V.createResponder(c,1,a.header.requestID),m=await E;y({canHideHeader:m});break}case 2:{a.decode(s),u.becomeMainPage();break}case 3:{a.decode(r),u.openInNewTab();break}case 4:{const E=a.decode(f);u.insertTextFromWebContent(E.text);break}default:a.header.expectsResponse&&V.sendUnimplementedResponse(a.header.requestID,a.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[O,a]=j.createChannel(t);return this.bind(u,a),O}}t.Dispatcher=d})(ue||(ue={}));class We{}p(We,"interfaceName","web.bridge.SidebarOverlayController"),p(We,"interfaceVersion",0);(t=>{let e;(s=>{s.VERSION_INFO=[{version:0,size:8}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function r(d){return R.bytes(s.CURRENT_VERSION.size)}s.measure=r;function f(d,o){}s.encode=f;function i(d,o){return{}}s.decode=i})(e=t.SidebarOverlayController_DidCloseSidebarOverlay_Params||(t.SidebarOverlayController_DidCloseSidebarOverlay_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=j.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}didCloseSidebarOverlay(){const r={};this._endpoint.send(z.encode(0,F.None,e,r))}}t.Proxy=n;class c extends v{constructor(){super(t);p(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(d,o)=>{switch(d.header.ordinal){case 0:{d.decode(e),f.didCloseSidebarOverlay();break}default:d.header.expectsResponse&&o.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,d]=j.createChannel(t);return this.bind(f,d),i}}t.Dispatcher=c})(We||(We={}));var Be;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(s,r){}t.encode=n;function c(s,r){return{}}t.decode=c})(Be||(Be={}));var $e;(t=>{t.VERSION_INFO=[{version:0,size:48}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.id)).add(R.forString(s.fileid)).add(R.forString(s.name)).add(R.forString(s.mimetype))}t.measure=e;function n(s,r){s.setString(0,r.id),s.setString(8,r.fileid),s.setString(16,r.name),s.setU32(24,r.size),s.setString(32,r.mimetype)}t.encode=n;function c(s,r){return{id:g(s.getString(0)),fileid:g(s.getString(8)),name:g(s.getString(16)),size:g(s.getU32(24)),mimetype:g(s.getString(32))}}t.decode=c})($e||($e={}));var Me;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.assetPointer))}t.measure=e;function n(s,r){s.setString(0,r.assetPointer),s.setU32(8,r.sizeBytes),s.setU32(12,r.width),s.setU32(16,r.height)}t.encode=n;function c(s,r){return{assetPointer:g(s.getString(0)),sizeBytes:g(s.getU32(8)),width:g(s.getU32(12)),height:g(s.getU32(16))}}t.decode=c})(Me||(Me={}));var ve;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){var r,f,i;return R.bytes(t.CURRENT_VERSION.size).add(R.forString((r=s.content)!=null?r:null)).add(R.forString((f=s.url)!=null?f:null)).add(R.forString((i=s.title)!=null?i:null))}t.measure=e;function n(s,r){var f,i,d;s.setString(0,(f=r.content)!=null?f:null),s.setString(8,(i=r.url)!=null?i:null),s.setString(16,(d=r.title)!=null?d:null)}t.encode=n;function c(s,r){const f=s.getString(0),i=s.getString(8),d=s.getString(16);return x(x(x({},f!==null?{content:f}:{}),i!==null?{url:i}:{}),d!==null?{title:d}:{})}t.decode=c})(ve||(ve={}));var H;(t=>{t.VERSION_INFO=[{version:0,size:32},{version:1,size:48}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){var r,f,i,d,o;return R.bytes(t.CURRENT_VERSION.size).add(R.forString((r=s.content)!=null?r:null)).add(R.forObjectArray($e,(f=s.files)!=null?f:null)).add(R.forObjectArray(Me,(i=s.imageAssetPointers)!=null?i:null)).add(R.forObjectArray(ve,(d=s.embeddedDocumentContexts)!=null?d:null)).add(R.forString((o=s.customInstructions)!=null?o:null))}t.measure=e;function n(s,r){var f,i,d,o,N;s.setString(0,(f=r.content)!=null?f:null),s.setObjectArray($e,8,(i=r.files)!=null?i:null),s.setObjectArray(Me,16,(d=r.imageAssetPointers)!=null?d:null),s.setObjectArray(ve,24,(o=r.embeddedDocumentContexts)!=null?o:null),s.setString(32,(N=r.customInstructions)!=null?N:null)}t.encode=n;function c(s,r){const f=s.getString(0),i=J(s.getObjectArray($e,8)),d=J(s.getObjectArray(Me,16)),o=r>=1?J(s.getObjectArray(ve,24)):null,N=r>=1?s.getString(32):null;return x(x(x(x(x({},f!==null?{content:f}:{}),i!==null?{files:i}:{}),d!==null?{imageAssetPointers:d}:{}),o!==null?{embeddedDocumentContexts:o}:{}),N!==null?{customInstructions:N}:{})}t.decode=c})(H||(H={}));var Ae;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(s){return R.bytes(t.CURRENT_VERSION.size).add(R.forString(s.base64image)).add(R.forString(s.mimetype)).add(R.forString(s.filename))}t.measure=e;function n(s,r){s.setString(0,r.base64image),s.setString(8,r.mimetype),s.setString(16,r.filename)}t.encode=n;function c(s,r){return{base64image:g(s.getString(0)),mimetype:g(s.getString(8)),filename:g(s.getString(16))}}t.decode=c})(Ae||(Ae={}));class ge{}p(ge,"interfaceName","web.bridge.WhisperContentProvider"),p(ge,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){var O;return R.bytes(i.CURRENT_VERSION.size).add(R.forObject(Be,(O=u.options)!=null?O:null))}i.measure=d;function o(u,O){var a;u.setObjectIndirect(Be,0,(a=O.options)!=null?a:null)}i.encode=o;function N(u,O){const a=u.getObjectIndirect(Be,0);return x({},a!==null?{options:a}:{})}i.decode=N})(e=t.WhisperContentProvider_GetWhisperContent_Params||(t.WhisperContentProvider_GetWhisperContent_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){var O;return R.bytes(i.CURRENT_VERSION.size).add(R.forObject(H,(O=u.content)!=null?O:null))}i.measure=d;function o(u,O){var a;u.setObjectIndirect(H,0,(a=O.content)!=null?a:null)}i.encode=o;function N(u,O){const a=u.getObjectIndirect(H,0);return x({},a!==null?{content:a}:{})}i.decode=N})(n=t.WhisperContentProvider_GetWhisperContent_ResponseParams||(t.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size)}i.measure=d;function o(u,O){}i.encode=o;function N(u,O){return{}}i.decode=N})(c=t.WhisperContentProvider_GetTabScreenshot_Params||(t.WhisperContentProvider_GetTabScreenshot_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){var O;return R.bytes(i.CURRENT_VERSION.size).add(R.forObject(Ae,(O=u.screenshot)!=null?O:null))}i.measure=d;function o(u,O){var a;u.setObjectIndirect(Ae,0,(a=O.screenshot)!=null?a:null)}i.encode=o;function N(u,O){const a=u.getObjectIndirect(Ae,0);return x({},a!==null?{screenshot:a}:{})}i.decode=N})(s=t.WhisperContentProvider_GetTabScreenshot_ResponseParams||(t.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class r{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=0}static create(){const[d,o]=j.createChannel(t);return[new r(d),o]}static createToBrowser(){const[d,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),d}async getWhisperContent(d){const o={options:d};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,o))).decode(n).content}async getTabScreenshot(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,c,d))).decode(s).screenshot}}t.Proxy=r;class f extends v{constructor(){super(t);p(this,"onDisconnect")}bind(o,N){this.addReceiver(N,async(u,O)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e),V=o.getWhisperContent(a.options),E=O.createResponder(n,0,u.header.requestID),y=await V;E({content:y});break}case 1:{u.decode(c);const a=o.getTabScreenshot(),V=O.createResponder(s,1,u.header.requestID),E=await a;V({screenshot:E});break}default:u.header.expectsResponse&&O.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[N,u]=j.createChannel(t);return this.bind(o,u),N}}t.Dispatcher=f})(ge||(ge={}));class fn{constructor(e){p(this,"dispatcher");this.dispatcher=new he.Dispatcher,this.dispatcher.bind(this,e)}refreshSessionContext(e,n){B.authSessionContext={authToken:e,behavior:n},B.wantsAuthSessionContext$.set(!0)}}function In(t){return t==="none"||t==="sent"||t==="success"||t==="failure"}class Rn{constructor(e,n,c){p(this,"prepareState");p(this,"lastPrepareTimestamp");p(this,"conduitToken");this.prepareState=In(e)?e:"none",this.lastPrepareTimestamp=n-performance.timeOrigin,this.conduitToken=c}}class hn{constructor(e){p(this,"dispatcher");this.dispatcher=new Oe.Dispatcher,this.dispatcher.bind(this,e)}closeNavigationSidebar(){const e=Ye();mt(e)&&!Lt(()=>Jt(e))||St.setSidebarOpen(!1)}setChatTheme(e){const n=e==="default_"?"default":e;B.chatTheme=n,B.wantsSetChatTheme$.set(!0)}showSearch(){en(()=>import("./edj7fjf1axi04apv.js").then(e=>e.a),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.openFannyPackSearch())}setWindowStyle(e){Xt.set(Ye(),e)}setModel(e){B.wantsModelSlug$.set(e)}newConversation(){B.wantsNewConversation$.set(!0),B.selectedConversationId$.set(void 0)}loadConversation(e){B.wantsNewConversation$.set(!1),B.selectedConversationId$.set(e)}requestCompletion(e,n,c,s){B.requestCompletion={prompt:e,systemHints:n,modelSlug:c,n7jupdLocalSafeMode:s!=null?s:void 0},B.wantsRequestCompletion$.set(!0)}requestCompletion2(e){var O,a,V;const n=crypto.randomUUID();B.requestCompletionId=n,B.requestCompletionId$.set(n),B.requestCompletionAckId=void 0,B.requestCompletionAckId$.set(void 0);const{superWidgetOptions:c,attachments:s,whisperContent:r,tabContextItems:f,promptOrigin:i,chatTheme:d}=e;c&&this.setSuperWidgetOptions(c),s!==void 0&&s!=null&&this.setAttachments(s),r&&this.setWhisperContent(r),f!==void 0&&f!=null&&this.setTabContext(f),i&&this.setPromptOrigin(i),d&&this.setChatTheme(d);const N=((O=e.systemHints)!=null?O:[]).map(E=>Qt(E)).filter(E=>E!==void 0),u=(a=e.modelSlug)!=null?a:"";return this.requestCompletion(e.prompt,N,u,(V=e.n7jupdLocalSafeMode)!=null?V:void 0),this.waitForRequestCompletionAck(n)}waitForRequestCompletionAck(e){return new Promise(c=>{let s=!1;const r=window.setTimeout(()=>{s||(s=!0,f(),c("failure"))},2e3),f=Tt(()=>B.requestCompletionAckId$()===e,()=>{s||(s=!0,window.clearTimeout(r),c("success"))})})}populatePrompt(e,n){B.populatePrompt={userMessage:e!=null?e:null,targetedReply:n!=null?n:null},B.wantsPopulatePrompt$.set(!0)}updateContext(e,n,c,s,r,f){B.context$.set({id:e,url:e,title:n,base64favicon:c,selection:s,blocked:r,selectionIsEditable:f})}prepareConversation(e){var n;B.prepareConversationDetails=new Rn(e.prepareState,e.lastPrepareTimestampMsSince1970,(n=e.conduitToken)!=null?n:void 0)}setSuperWidgetOptions(e){const n=At(e.selectedTab);B.wantsInitialTab$.set(n)}setAttachments(e){B.attachments=e.map(n=>{const{id:c,name:s,size:r,mimeType:f,width:i,height:d,fileTokenSize:o}=n;return x(x(x(x(x(x(x({},c&&{id:c}),s&&{name:s}),r&&{size:typeof r=="bigint"?Number(r):r}),f&&{mime_type:f}),i&&{width:i}),d&&{height:d}),o&&{file_token_size:o})})}attachUserFile(e,n,c){B.attachUserFileRequest={name:e,bytes:n,mimeType:c},B.wantsAttachUserFile$.set(!0)}setWhisperContent(e){B.whisperContent=e}setTabContext(e){B.tabContext=e}setPromptOrigin(e){switch(e){case"ntp":case"address_bar":case"context_menu":B.promptOrigin=e;break}}performHandshake(e){return Promise.resolve("success")}navigate(e){Yt(e)}populateNavlinks(e,n){const c=JSON.parse(n);Zt.getState().updateFromEvent(e,c)}setAgentSafeMode(e){Ft(e)}setAgentSafeModeHasSeenNux(e){_t(e)}handleAgentRequest(e){B.agentRequest=e,B.wantsHandleAgentRequest$.set(!0)}showNavigationSidebarAsOverlay(){St.setPopoverSidebarOpen(!0)}attachTab(){Kt(!0)}sendSideChatCompletion(e){B.sideChatCompletionDetails=e,B.wantsSideChatCompletion$.set(!0)}}class On{constructor(e){p(this,"proxy");this.proxy=e,Wt(Ye()).subscribe((c,s)=>{c.isSlideoverSidebarOpen&&!s.isSlideoverSidebarOpen&&this.setSidebarVisibility(!1)}),this.proxy.getSidebarVisibility().then(async c=>{c&&(await Tt(()=>!Gt()),St.setSlideoverSidebarOpen(!1))})}setSidebarVisibility(e){this.proxy.setSidebarVisibility(e)}}class En{constructor(e){p(this,"dispatcher");this.dispatcher=new Ee.Dispatcher,this.dispatcher.bind(this,e)}handleAdultSearchSettingChanged(e){const n=Ye();Ht.set(n,e)}}class Ge{}p(Ge,"interfaceName","owl.mojom.ChatGPTFrontendHost"),p(Ge,"interfaceVersion",0);(t=>{let e;(N=>{N.VERSION_INFO=[{version:0,size:16}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){V.setRemote(0,E.frontend)}N.encode=O;function a(V,E){return{frontend:g(V.getRemote(ye,0))}}N.decode=a})(e=t.ChatGPTFrontendHost_SetFrontend_Params||(t.ChatGPTFrontendHost_SetFrontend_Params={}));let n;(N=>{N.VERSION_INFO=[{version:0,size:8}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size)}N.measure=u;function O(V,E){}N.encode=O;function a(V,E){return{}}N.decode=a})(n=t.ChatGPTFrontendHost_GetAccountID_Params||(t.ChatGPTFrontendHost_GetAccountID_Params={}));let c;(N=>{N.VERSION_INFO=[{version:0,size:16}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){var E;return R.bytes(N.CURRENT_VERSION.size).add(R.forString((E=V.id)!=null?E:null))}N.measure=u;function O(V,E){var y;V.setString(0,(y=E.id)!=null?y:null)}N.encode=O;function a(V,E){const y=V.getString(0);return x({},y!==null?{id:y}:{})}N.decode=a})(c=t.ChatGPTFrontendHost_GetAccountID_ResponseParams||(t.ChatGPTFrontendHost_GetAccountID_ResponseParams={}));let s;(N=>{N.VERSION_INFO=[{version:0,size:24}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){var E;return R.bytes(N.CURRENT_VERSION.size).add(R.forString(V.name)).add(R.forString((E=V.payload)!=null?E:null))}N.measure=u;function O(V,E){var y;V.setString(0,E.name),V.setString(8,(y=E.payload)!=null?y:null)}N.encode=O;function a(V,E){const y=V.getString(8);return x({name:g(V.getString(0))},y!==null?{payload:y}:{})}N.decode=a})(s=t.ChatGPTFrontendHost_SendMessage_Params||(t.ChatGPTFrontendHost_SendMessage_Params={}));let r;(N=>{N.VERSION_INFO=[{version:0,size:16}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){var E;return R.bytes(N.CURRENT_VERSION.size).add(R.forString((E=V.reply)!=null?E:null))}N.measure=u;function O(V,E){var y;V.setString(0,(y=E.reply)!=null?y:null)}N.encode=O;function a(V,E){const y=V.getString(0);return x({},y!==null?{reply:y}:{})}N.decode=a})(r=t.ChatGPTFrontendHost_SendMessage_ResponseParams||(t.ChatGPTFrontendHost_SendMessage_ResponseParams={}));let f;(N=>{N.VERSION_INFO=[{version:0,size:16}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size).add(R.forString(V.serverConversationId))}N.measure=u;function O(V,E){V.setString(0,E.serverConversationId)}N.encode=O;function a(V,E){return{serverConversationId:g(V.getString(0))}}N.decode=a})(f=t.ChatGPTFrontendHost_ReceivedFirstToken_Params||(t.ChatGPTFrontendHost_ReceivedFirstToken_Params={}));let i;(N=>{N.VERSION_INFO=[{version:0,size:24}],N.CURRENT_VERSION=N.VERSION_INFO[N.VERSION_INFO.length-1];function u(V){return R.bytes(N.CURRENT_VERSION.size).add(R.forString(V.interfaceName))}N.measure=u;function O(V,E){V.setString(0,E.interfaceName),V.setHandle(8,E.pipe)}N.encode=O;function a(V,E){return{interfaceName:g(V.getString(0)),pipe:g(V.getMessagePipeHandle(8))}}N.decode=a})(i=t.ChatGPTFrontendHost_BindReceiver_Params||(t.ChatGPTFrontendHost_BindReceiver_Params={}));class d{constructor(u){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(u.endpointState,!0),this._version=0}static create(){const[u,O]=j.createChannel(t);return[new d(u),O]}static createToBrowser(){const[u,O]=this.create();return Mojo.bindInterface(t.interfaceName,O.pipe.rawHandle),u}setFrontend(u){const O={frontend:u};this._endpoint.send(z.encode(0,F.None,e,O))}async getAccountID(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,u))).decode(c).id}async sendMessage(u,O){const a={name:u,payload:O};return(await this._endpoint.sendAndAwaitResponse(z.encode(2,F.None,s,a))).decode(r).reply}receivedFirstToken(u){const O={serverConversationId:u};this._endpoint.send(z.encode(3,F.None,f,O))}bindReceiver(u,O){const a={interfaceName:u,pipe:O};this._endpoint.send(z.encode(4,F.None,i,a))}}t.Proxy=d;class o extends v{constructor(){super(t);p(this,"onDisconnect")}bind(O,a){this.addReceiver(a,async(V,E)=>{switch(V.header.ordinal){case 0:{const y=V.decode(e);O.setFrontend(y.frontend);break}case 1:{V.decode(n);const y=O.getAccountID(),m=E.createResponder(c,1,V.header.requestID),D=await y;m({id:D});break}case 2:{const y=V.decode(s),m=O.sendMessage(y.name,y.payload),D=E.createResponder(r,2,V.header.requestID),w=await m;D({reply:w});break}case 3:{const y=V.decode(f);O.receivedFirstToken(y.serverConversationId);break}case 4:{const y=V.decode(i);O.bindReceiver(y.interfaceName,y.pipe);break}default:V.header.expectsResponse&&E.sendUnimplementedResponse(V.header.requestID,V.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(O)})}createRemote(O){const[a,V]=j.createChannel(t);return this.bind(O,V),a}}t.Dispatcher=o})(Ge||(Ge={}));class ye{}p(ye,"interfaceName","owl.mojom.ChatGPTFrontend"),p(ye,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forString(u.message))}i.measure=d;function o(u,O){u.setString(0,O.message)}i.encode=o;function N(u,O){return{message:g(u.getString(0))}}i.decode=N})(e=t.ChatGPTFrontend_LogConsoleMessage_Params||(t.ChatGPTFrontend_LogConsoleMessage_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){var O;return R.bytes(i.CURRENT_VERSION.size).add(R.forString(u.name)).add(R.forString((O=u.payload)!=null?O:null))}i.measure=d;function o(u,O){var a;u.setString(0,O.name),u.setString(8,(a=O.payload)!=null?a:null)}i.encode=o;function N(u,O){const a=u.getString(8);return x({name:g(u.getString(0))},a!==null?{payload:a}:{})}i.decode=N})(n=t.ChatGPTFrontend_SendMessage_Params||(t.ChatGPTFrontend_SendMessage_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){var O;return R.bytes(i.CURRENT_VERSION.size).add(R.forString((O=u.reply)!=null?O:null))}i.measure=d;function o(u,O){var a;u.setString(0,(a=O.reply)!=null?a:null)}i.encode=o;function N(u,O){const a=u.getString(0);return x({},a!==null?{reply:a}:{})}i.decode=N})(c=t.ChatGPTFrontend_SendMessage_ResponseParams||(t.ChatGPTFrontend_SendMessage_ResponseParams={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function d(u){return R.bytes(i.CURRENT_VERSION.size).add(R.forString(u.interfaceName))}i.measure=d;function o(u,O){u.setString(0,O.interfaceName),u.setHandle(8,O.pipe)}i.encode=o;function N(u,O){return{interfaceName:g(u.getString(0)),pipe:g(u.getMessagePipeHandle(8))}}i.decode=N})(s=t.ChatGPTFrontend_BindReceiver_Params||(t.ChatGPTFrontend_BindReceiver_Params={}));class r{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=0}static create(){const[d,o]=j.createChannel(t);return[new r(d),o]}static createToBrowser(){const[d,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),d}logConsoleMessage(d){const o={message:d};this._endpoint.send(z.encode(0,F.None,e,o))}async sendMessage(d,o){const N={name:d,payload:o};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,N))).decode(c).reply}bindReceiver(d,o){const N={interfaceName:d,pipe:o};this._endpoint.send(z.encode(2,F.None,s,N))}}t.Proxy=r;class f extends v{constructor(){super(t);p(this,"onDisconnect")}bind(o,N){this.addReceiver(N,async(u,O)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e);o.logConsoleMessage(a.message);break}case 1:{const a=u.decode(n),V=o.sendMessage(a.name,a.payload),E=O.createResponder(c,1,u.header.requestID),y=await V;E({reply:y});break}case 2:{const a=u.decode(s);o.bindReceiver(a.interfaceName,a.pipe);break}default:u.header.expectsResponse&&O.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[N,u]=j.createChannel(t);return this.bind(o,u),N}}t.Dispatcher=f})(ye||(ye={}));const an=6e4;class pn{constructor(e,n){p(this,"host");p(this,"logger");p(this,"lastMissingAuthTime",0);this.host=e,this.logger=n}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const e=Date.now();if(e-this.lastMissingAuthTime>an){this.lastMissingAuthTime=e;const[n,c]=re.Proxy.create();this.bindReceiver(c),this.logger.notice("onMissingSessionAuth.invoked"),n.handleMissingSessionAuth()}}recordAvailableSessionAuth(e){const[n,c]=re.Proxy.create();this.bindReceiver(c),this.logger.notice("recordAvailableSessionAuth.invoked"),n.recordAvailableSessionAuth(e)}onAcceptedWorkspaceInvite(e){const[n,c]=re.Proxy.create();this.bindReceiver(c),this.logger.notice("onAcceptedWorkspaceInvite.invoked"),n.handleAcceptedWorkspaceInvite(e)}onSwitchAccount(e){const[n,c]=re.Proxy.create();this.bindReceiver(c),this.logger.notice("onSwitchAccount.invoked"),n.handleSwitchAccount(e)}tryOpenAgentViewer(e){const[n,c]=Q.Proxy.create();return this.bindReceiver(c),n.tryOpenAgentViewer(e)}agentConversationStopped(e,n=!1){const[c,s]=Q.Proxy.create();this.bindReceiver(s),c.agentConversationStopped(e,n)}userSentMessageInAgentConversation(e,n,c,s,r,f){const[i,d]=Q.Proxy.create();this.bindReceiver(d),i.userSentMessageInAgentConversation(e,n,c,s,r,f)}userStoppedAgentConversation(e){const[n,c]=Q.Proxy.create();this.bindReceiver(c),n.userStoppedAgentConversation(e)}openAgentTabs(e,n){const[c,s]=Q.Proxy.create();this.bindReceiver(s),c.openAgentTabs(e,n)}getClientID(){const[e,n]=Q.Proxy.create();return this.bindReceiver(n),e.getClientID()}getClientCapabilityVersion(){const[e,n]=Q.Proxy.create();return this.bindReceiver(n),e.getClientCapabilityVersion()}getAgentStatus(e){const[n,c]=Q.Proxy.create();return this.bindReceiver(c),n.getAgentStatus(e)}insertTextFromWebContent(e){const[n,c]=ue.Proxy.create();this.bindReceiver(c),n.insertTextFromWebContent(e)}becomeMainPage(){const[e,n]=ue.Proxy.create();this.bindReceiver(n),e.becomeMainPage()}openInNewTab(){const[e,n]=ue.Proxy.create();this.bindReceiver(n),e.openInNewTab()}updateAgentSafeMode(e){const[n,c]=Re.Proxy.create();this.bindReceiver(c),n.updateAgentSafeMode(e)}updateAgentSafeModeHasSeenNux(e){const[n,c]=Re.Proxy.create();this.bindReceiver(c),n.updateAgentSafeModeHasSeenNux(e)}async requestAgentSafeModeState(){const[e,n]=Re.Proxy.create();this.bindReceiver(n);try{return await e.getAgentSafeModeState()}catch(c){this.logger.info("requestAgentSafeModeState.failed");return}}closeSideChat(){const[e,n]=ue.Proxy.create();this.bindReceiver(n),e.closeSidebar()}async getWhisperContent(){const[e,n]=ge.Proxy.create();return this.bindReceiver(n),await e.getWhisperContent({})}async getTabScreenshot(){const[e,n]=ge.Proxy.create();return this.bindReceiver(n),await e.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}recordConversationStreamEvent(e){const n=Pt().containerBuildNumber,c=BigInt(20251213000000000);try{if(n===void 0)return;const f=BigInt(n);if(f!==BigInt(0)&&f<c)return}catch(f){return}const[s,r]=Ke.Proxy.create();this.bindReceiver(r),s.recordConversationStreamEvent(e)}async callLocalTool(e,n){const[c,s]=le.Proxy.create();return this.bindReceiver(s),await c.callLocalTool(e,n)}bindReceiver(e){this.host.bindReceiver(e.interfaceType.interfaceName,e.pipe)}async getToolNames(){const[e,n]=le.Proxy.create();return this.bindReceiver(n),await e.getToolNames()}openSettings(e){const[n,c]=Xe.Proxy.create();this.bindReceiver(c),n.openSettings(e)}enqueueConversationArchive(e){const[n,c]=Ve.Proxy.create();this.bindReceiver(c),n.enqueueConversationArchive(e)}cancelConversationArchive(e){const[n,c]=Ve.Proxy.create();this.bindReceiver(c),n.cancelConversationArchive(e)}closeSidebarOverlay(){mt(Ye())&&setTimeout(()=>{const[e,n]=We.Proxy.create();this.bindReceiver(n),e.didCloseSidebarOverlay()},50)}getAdultSearchSetting(){if(!gt())return Promise.resolve({isAdultSearchEnabled:!1,canUserEnable:!1});const[e,n]=be.Proxy.create();return this.bindReceiver(n),e.getAdultSearchSetting()}updateAdultSearchSetting(e){if(!gt())return Promise.resolve(!1);const[n,c]=be.Proxy.create();return this.bindReceiver(c),n.updateAdultSearchSetting(e)}}class Vn{constructor(e){p(this,"proxy");this.proxy=e}handleLink(e,n){this.proxy.handleLink(e,n)}}class Sn{constructor(e){p(this,"proxy");this.proxy=e}triggerProductEvent(e){this.proxy.triggerProductEvent(e)}}class ln{constructor(){p(this,"dispatcher");p(this,"host");p(this,"logger");p(this,"conversationControllers",[]);p(this,"authStateController",[]);p(this,"navigationSidebarController");p(this,"settingsController",[]);this.logger=Ct.createLogger("web-bridge-host","info","http"),this.dispatcher=new ye.Dispatcher;const e=Ge.Proxy.createToBrowser();this.host=new pn(e,this.logger),e.setFrontend(this.dispatcher.createRemote(this));const[n,c]=Je.Proxy.create();this.host.bindReceiver(c),this.navigationSidebarController=new On(n),this.requestInitialAgentSafeModeState()}get linkHandler(){const[e,n]=Le.Proxy.create();return this.host.bindReceiver(n),new Vn(e)}get productEventHandler(){const[e,n]=Qe.Proxy.create();return this.host.bindReceiver(n),new Sn(e)}logConsoleMessage(e){this.logger.info(e)}sendMessage(e,n){return Promise.resolve(null)}bindReceiver(e,n){e===Oe.interfaceName?this.conversationControllers.push(new hn(new Fe(Oe,n))):e===he.interfaceName?this.authStateController.push(new fn(new Fe(he,n))):e===Ee.interfaceName&&this.settingsController.push(new En(new Fe(Ee,n)))}async requestInitialAgentSafeModeState(){try{const e=await this.host.requestAgentSafeModeState();if(!e)return;Ft(e.preferredMode),_t(e.hasSeenNux)}catch(e){this.logger.info("requestInitialAgentSafeModeState.failed")}}}let Y;function Un(){Y=new ln}function zn(){return Y==null?void 0:Y.host}function Fn(){return Y==null?void 0:Y.linkHandler}function _n(){return Y==null?void 0:Y.productEventHandler}async function mn(){return Y?(Y.logger.debug("Getting whisper content"),await Y.host.getWhisperContent()):null}async function Tn(){return Y?await Y.host.getTabScreenshot():null}function xn(){if(!Y)return null;Y.host.closeSideChat()}export{xn as closeSideChat,zn as getHost,Fn as getLinkHandler,_n as getProductEventHandler,mn as getSidebarWhisperContent,Tn as getTabScreenshot,Un as initHostConnection};
//# sourceMappingURL=i2qk80cf0ci72s9b.js.map
