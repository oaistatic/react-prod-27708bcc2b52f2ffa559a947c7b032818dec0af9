const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/glx45q10lwleb6ms.js","assets/fg33krlcm0qyi6yw.js"])))=>i.map(i=>d[i]);
var Ge=Object.freeze,Ye=Object.defineProperty,Ns=Object.defineProperties;var _s=Object.getOwnPropertyDescriptors;var Qe=Object.getOwnPropertySymbols;var Ps=Object.prototype.hasOwnProperty,Ss=Object.prototype.propertyIsEnumerable;var Ke=(s,a,t)=>a in s?Ye(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,M=(s,a)=>{for(var t in a||(a={}))Ps.call(a,t)&&Ke(s,t,a[t]);if(Qe)for(var t of Qe(a))Ss.call(a,t)&&Ke(s,t,a[t]);return s},F=(s,a)=>Ns(s,_s(a));var oe=(s,a)=>Ge(Ye(s,"raw",{value:Ge(a||s.slice())}));import{j as e,M as n,d as j,r as N,e as ee,a as ge,_ as Ts,f as ss,b as Rs}from"./fg33krlcm0qyi6yw.js";import{G as r,F as as,me as Cs,o as Is,b as se,C as Y,M as K,hG as Ls,x as As,I as ts,i8 as fe,bh as Us,tU as f,u2 as J,su as A,u3 as is,m as rs,H as Bs,du as Es,sC as Fs,ag as Ws,sp as zs,gH as te,sq as Os,sr as qs,v as Gs,ih as Qs,u4 as De,u5 as pe,l as he,g2 as C,u6 as Ks,T as Ve,a9 as $,ss as ns,so as Ys,gK as Ds,nW as Vs,cS as Hs,st as Xs,R as ls}from"./mtk1qztvnb31pw5r.js";import{kn as Js,aw as He,eN as $s,dw as Zs,cr as xe,cL as ea,an as k,da as sa,ie as aa,A as ta,dr as ia,bq as ce,z as ra,jp as na,bp as la,cx as oa,jE as ca,ci as da}from"./k65njl5wlgspihfr.js";import{C as ua}from"./j41djqzgv0g1dtwh.js";import{U as de}from"./e4epv5uv3mte9vwk.js";function os(s){return s==r.User||s==r.Group?r.Private:s==r.WorkspaceLink?r.Workspace:s}function W(s,a){return s=os(s),a===void 0?!1:a.some(t=>t.recipient===s&&t.allowed)}function je(s,a){if(a===void 0)return[];s=os(s);const t=a.find(o=>o.recipient===s);return t==null?void 0:t.moderated_fields}function ue(s,a){const t=je(s,a);return t&&t.length>0}var Ze;const Xe=as.a(Ze||(Ze=oe(["bold underline"])));var es;const ma=as.textarea(es||(es=oe(["w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32"])));var cs=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(cs||{}),ds=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(ds||{});function Ia(s){var o;if(!s)return;const a=((o=s.gizmo.appeal_info)==null?void 0:o.state.kind)==="appeal_sent",t=pa(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:t,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:t!==0?1:0}}const Je={[r.User]:r.Private,[r.Group]:r.Private,[r.WorkspaceLink]:r.Workspace};function pa(s,a=[]){const t=new Set(a.filter(l=>l.allowed).map(l=>l.recipient));if(!s||(s in Je&&(s=Je[s]),t.has(s)))return 0;const o=t.has(r.Private)||t.has(r.Workspace),c=t.has(r.Link)||t.has(r.Marketplace);return s===r.Marketplace&&c?2:!c&&o?3:4}function $e(s){switch(s){case 0:case 1:return j({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return j({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return j({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 4:return j({id:"gizmo.appeals.removedFromPrivateTitle",defaultMessage:"Your GPT has been removed from private view"});case 5:return j({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"})}}function xa(s){switch(s){case"profile_picture":return j({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return j({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return j({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return j({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return j({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return j({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return j({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return j({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return j({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"GPT Content"})}}function ga(s){switch(s){case r.Private:case r.Workspace:return j({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Link:return j({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Marketplace:return j({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:Cs(s)}}function us({sharingRecipient:s,moderatedFields:a,appealAvailable:t}){const o=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(n,F(M({},ga(s)),{values:{usagePolicyLink:c=>e.jsx(Xe,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:c})}}))," ",o>0&&e.jsx(n,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:"{numModeratedFields, plural,\n              one {See below for the specific issue:}\n              other {See below for the specific issues:}\n            }",values:{numModeratedFields:o}})]}),o>0&&(a==null?void 0:a.map(c=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(n,M({},xa(c.name)))}),e.jsx("ul",{className:"list-disc ps-5",children:c.reasons.map(l=>e.jsxs("li",{children:[l.description," ",l.link?e.jsx(Xe,{href:l.link,target:"_blank",rel:"noreferrer",children:e.jsx(n,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},l.description))})]}))),t&&e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function fa({gizmoId:s,sharingRecipient:a,categories:t,moderationType:o,sharingTargets:c,appealAvailable:l,onClose:u,onAppealSubmitted:v}){var g;const y=ee(),[U,B]=N.useState(""),[m,_]=N.useState(0),[h,E]=N.useState(!1),z=ge(),D=async()=>{E(!0);try{await fe.postGizmoAppeal(z,s,U,a,t),_(2),v==null||v()}finally{E(!1)}},I=je(a,c),q=(g=I==null?void 0:I.length)!=null?g:0,V=se(),T=ts(V);if(q==0&&(T==null?void 0:T.isEnterprisey()))return e.jsx(Y,{testId:"modal-gizmo-appeal-available",title:y.formatMessage($e(o)),isOpen:!0,onClose:u,showCloseButton:!0,type:"warning",primaryButton:e.jsx(K.Button,{color:"primary",onClick:u,children:e.jsx(n,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(n,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(m){case 0:return e.jsx(Y,{testId:"modal-gizmo-appeal-available",title:y.formatMessage($e(o)),isOpen:!0,onClose:u,showCloseButton:!0,primaryButton:e.jsx(K.Button,{color:"primary",onClick:u,children:e.jsx(n,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:l?e.jsx(K.Button,{onClick:()=>_(1),children:e.jsx(n,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(us,{sharingRecipient:a,moderatedFields:I!=null?I:[],appealAvailable:l})})});case 1:return e.jsx(Y,{testId:"modal-gizmo-appeal-form",title:y.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:u,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(K.Button,{color:"primary",onClick:D,disabled:h||U.trim().length===0,children:e.jsx(n,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(K.Button,{onClick:()=>_(0),children:e.jsx(n,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(ma,{value:U,onChange:R=>B(R.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function ha({onClose:s}){const a=ee();return e.jsx(Y,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(K.Button,{color:"primary",onClick:s,children:e.jsx(n,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(n,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function ja({gizmoId:s,onClose:a}){const{data:t}=Ls(s,!0),o=ge(),c=async()=>{await fe.postGizmoCancelAppeal(o,s)};return e.jsx(Y,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:As,primaryButton:e.jsx(K.Button,{color:"primary",onClick:()=>{c(),a==null||a()},children:e.jsx(n,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(n,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:t==null?void 0:t.gizmo.display.name}})})]})})}function La({appealState:s,onAppealClose:a,onAppealSubmitted:t}){const o=se(),c=Is(o,"4226692983"),[l,u]=N.useState(!1);return l?e.jsx(ha,{onClose:()=>{u(!1),t==null||t()}}):e.jsxs(e.Fragment,{children:[(s==null?void 0:s.showModal)==2&&e.jsx(ja,{gizmoId:s.gizmoId,onClose:a}),(s==null?void 0:s.showModal)==1&&e.jsx(fa,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:c,onClose:()=>a==null?void 0:a(),onAppealSubmitted:()=>u(!0)})]})}const ms=Us(()=>Ts(()=>import("./glx45q10lwleb6ms.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication)),ya=()=>[A,J,Ks];function ps(s,a){return s.type===f.USER?s.user_id===a.user_id:s.type===f.GROUP?s.group_id===a.group_id:s.type===f.EMAIL?a.type===f.EMAIL&&s.user_email.toLowerCase()===a.user_email.toLowerCase():s.type===a.type}const ka={[f.USER]:r.User,[f.GROUP]:r.Group,[f.WORKSPACE]:r.Workspace,[f.ALL]:r.Marketplace};function xs(s){const a=ka[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return F(M({},s),{type:a})}function va({gizmo:s,publishedGizmo:a,updateGizmo:t,promoteGizmo:o,appealGizmo:c,setAppealState:l,showActionsModal:u,shareOnly:v,onClose:y,workspaceOwner:U=!1}){var Se,Te,Re,Ce,Ie,Le,Ae,Ue,Be,Ee,Fe,We,ze;const B=se(),m=ee(),_=rs(),h=Bs(),E=h==null?void 0:h.id,{data:z,isLoading:D}=Es(E),I=(Se=h==null?void 0:h.isEnterprisey())!=null?Se:!1,q=(Te=h==null?void 0:h.data)==null?void 0:Te.role,V=q!=null?Zs(q):!1;let T;E==null?T=void 0:U||V||!I?T=!0:D?T=void 0:T=(Ce=(Re=z==null?void 0:z.permissions)==null?void 0:Re.includes(Fs.MemberRoleView))!=null?Ce:!1;const d=(Le=(Ie=h==null?void 0:h.data)==null?void 0:Ie.name)!=null?Le:"your workspace",g=Ws(),R=zs(),[b,ie]=N.useState(void 0);N.useEffect(()=>{var i;if(b==null)if(a!=null&&a.gizmo.display.categories&&(a==null?void 0:a.gizmo.display.categories.length)>0){const x=(i=R.data)==null?void 0:i.categories.find(L=>L.id===(a==null?void 0:a.gizmo.display.categories[0]));x&&ie(x)}else R.data!=null&&ie(R.data.categories[R.data.categories.length-1])},[R.data,b,a]);const[p,hs]=N.useState((Ae=s.sharingRecipient)!=null?Ae:r.Private),[w,X]=N.useState((Be=(Ue=s.sharing)==null?void 0:Ue.subjects)!=null?Be:[]),[ve,js]=N.useState(null),[we,Me]=N.useState(!1),re=N.useRef(null),be=N.useRef(w.length);N.useEffect(()=>{w.length>be.current&&requestAnimationFrame(()=>{var i;(i=re.current)==null||i.scrollTo({top:re.current.scrollHeight,behavior:"smooth"})}),be.current=w.length},[w]);const ys=N.useCallback(()=>{var i;return!te((i=s.sharing)==null?void 0:i.subjects,w)||s.sharingRecipient!==p},[s.sharing,s.sharingRecipient,p,w]),O=ge(),Ne=Os(s,p,(Ee=b==null?void 0:b.id)!=null?Ee:void 0),ks=Ne.includes(qs.MissingPublicActionPrivacyPolicyURL),ne=s.tools.find(i=>i.type===Gs.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(ve)return e.jsx(fs,{publishedGizmo:ve,sharing:{recipient:p,subjects:w},workspaceName:d,onClose:y});function vs(i){w.find(x=>ps(x,i))||X([...w,i])}const P=is(w);function le(i){const x=w.filter(L=>[f.WORKSPACE,f.ALL].indexOf(L.type)===-1);i!=null&&x.push(i),X(x)}function ws(i){switch(hs(i),i){case r.Marketplace:case r.Link:le({type:f.ALL,capabilities:A});break;case r.Workspace:case r.WorkspaceLink:le({type:f.WORKSPACE,capabilities:A});break;default:le(null)}}function _e(i){P!=null&&X(w.map(x=>x===P?F(M({},x),{capabilities:i}):x))}function Ms(i,x,L){return i.type===f.USER&&i.user_id.indexOf("__")===-1?F(M({},i),{user_id:i.user_id+"__"+(h==null?void 0:h.getWorkspaceId())}):i}async function bs(i,x){var H,Oe;if(we)return;if(i&&!x)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!b)return;Me(!0);let G=w.map(Ms).map(xs);if(G=Xs(p,G,(H=P==null?void 0:P.capabilities)!=null?H:A),U)return!h||!x?(_.warning("Unable to change sharing settings"),y()):(await ls.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:h.id,gizmo_id:x}},requestBody:{sharing:G}}),_.success(m.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),O.invalidateQueries({queryKey:["workspace"]}),y());if(i){if(!x||!a)throw new Error("No gizmo ID to share");try{const S={sharing:G};b&&(S.categories=[b.id]);const ae=await fe.shareGizmo(x,S);ae.error?ue(p,ae.sharing_targets)?(l==null||l({gizmoId:a.gizmo.id,sharingRecipient:p,categories:a.gizmo.display.categories,moderationType:ds.PublishBlocked,sharingTargets:ae.sharing_targets,showModal:cs.AppealAvailable}),y()):_.warning(m.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(O.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],qe=>ae.resource),t==null||t(qe=>F(M({},qe),{sharingRecipient:p})),_.success(m.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),y())}catch(S){return _.warning(m.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),y()}}else{if(o){const S=await o({subjects:G,recipient:p},b.id);x||(x=S==null?void 0:S.gizmo.id),js(S!=null?S:null),t==null||t({liveVersion:(Oe=S==null?void 0:S.gizmo.live_version)!=null?Oe:void 0})}O.invalidateQueries({queryKey:["gizmo",{gizmoId:x}]})}Me(!1),O.invalidateQueries({queryKey:["gizmos"]}),O.refetchQueries({queryKey:["gizmos","discovery"]}),O.refetchQueries({queryKey:["gizmo",{gizmoId:x}]}),O.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:x}]}),O.invalidateQueries({queryKey:["workspace"]}),t==null||t({sharing:{recipient:p,subjects:w},sharingRecipient:p},!1)}const Pe=!a||ba(a.gizmo.author.user_id.split("__")[0],g==null?void 0:g.id);return e.jsx(Y,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:y,primaryButton:ue(p,s.sharingTargets)?e.jsx($,{onClick:()=>c(p,b==null?void 0:b.id),children:e.jsx(n,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx($,{onClick:()=>bs(v,a==null?void 0:a.gizmo.id),loading:we,disabled:Ne.length>0||!W(p,s.sharingTargets),children:v?e.jsx(n,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(n,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[ys()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(n,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx($,{color:"secondary",onClick:i=>ns(B,a,_,i,m.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:m.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(Ma,{onAdd:i=>vs(i),publishedGizmo:a,canListMembers:T}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{ref:re,className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:Pe?e.jsx(Qs,{user:g}):e.jsx(De,{name:(Fe=a.gizmo.author.display_name)!=null?Fe:"User",initialsCount:2})}),e.jsx("div",{className:"grow text-base font-semibold",children:Pe?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:g==null?void 0:g.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:g==null?void 0:g.email})]}):e.jsx(n,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),w.map((i,x)=>pe(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(De,{name:i.type===f.GROUP?i.group_name:"".concat(i.user_name," ").concat(i.user_email),initialsCount:i.type===f.USER?2:1,className:he("shrink-0 grow-0",i.type===f.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:i.type===f.GROUP?i.group_name:i.user_name}),i.type===f.GROUP&&i.is_scim_managed&&e.jsx(ms,{})]}),i.type===f.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:i.user_email})]}),e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(n,M({},Z(i.capabilities))),e.jsx(xe,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[ya().map((L,G)=>e.jsx(me,{capabilities:L,selected:te(L,i.capabilities),onClick:()=>{X(w.map(H=>H===i?F(M({},H),{capabilities:L}):H))}},G)),e.jsx(C.Separator,{className:"my-2"}),e.jsx(C.Item,{onClick:()=>X(w.filter(L=>L!==i)),color:"danger",icon:ea,children:e.jsx(n,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},x))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(k.Root,{value:p,onValueChange:i=>ws(i),children:[e.jsxs(k.Trigger,{children:[e.jsx(k.Value,{}),e.jsx(k.Icon,{})]}),e.jsx(k.Portal,{children:e.jsxs(k.Content,{children:[e.jsxs(k.Group,{children:[e.jsx(k.Label,{children:e.jsx(n,{id:"YIQwaP",defaultMessage:"Private"})}),p===r.User?e.jsx(k.Item,{value:r.User,children:e.jsx(Q,{shareLevel:r.User,workspaceName:d})}):e.jsx(k.Item,{value:r.Private,children:e.jsx(Q,{shareLevel:r.Private,workspaceName:d})})]}),e.jsx(k.Separator,{}),e.jsx(Ve,{triggerAs:null,label:m.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:W("workspace",s.sharingTargets),children:e.jsxs(k.Group,{children:[e.jsx(k.Label,{children:d}),e.jsx(k.Item,{value:r.WorkspaceLink,disabled:!W(r.WorkspaceLink,s.sharingTargets)&&!W(r.Workspace,s.sharingTargets),children:e.jsx(Q,{shareLevel:r.WorkspaceLink,workspaceName:d})}),e.jsx(k.Item,{value:r.Workspace,disabled:!W("workspace",s.sharingTargets),children:e.jsx(Q,{shareLevel:r.Workspace,workspaceName:d})})]})}),e.jsx(k.Separator,{}),e.jsx(Ve,{triggerAs:null,label:m.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:W("marketplace",s.sharingTargets),children:e.jsxs(k.Group,{children:[e.jsx(k.Label,{children:e.jsx(n,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(k.Item,{value:r.Link,disabled:!W("link",s.sharingTargets),children:e.jsx(Q,{shareLevel:r.Link,workspaceName:d})}),e.jsx(k.Item,{disabled:!W("marketplace",s.sharingTargets),value:r.Marketplace,children:e.jsx(Q,{shareLevel:r.Marketplace,workspaceName:d})})]})})]})})]}),p!==r.Private&&p!==r.User&&e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[P==null?e.jsx(n,M({},Z(A))):e.jsx(n,M({},Z(P.capabilities))),e.jsx(xe,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[e.jsx(me,{onClick:()=>_e(A),capabilities:A,selected:te(P==null?void 0:P.capabilities,A)}),p!==r.Marketplace&&p!==r.Link&&e.jsx(me,{onClick:()=>_e(J),capabilities:J,selected:te(P==null?void 0:P.capabilities,J)})]})})]})]}),ks&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(n,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{u==null||u(ne==null?void 0:ne.metadata.action_id),y()},className:"underline",children:i})}})}),(p===r.Marketplace||p===r.Workspace)&&(W(p,s.sharingTargets)?e.jsx(ke,{gizmo:s,category:b==null?void 0:b.id,categories:(We=R.data)==null?void 0:We.categories,onCategoryChange:i=>ie(i)}):ue(p,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(us,{sharingRecipient:p,moderatedFields:(ze=je(p,s.sharingTargets))!=null?ze:[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(n,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const gs=ss({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},email:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),wa=ss({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function Z(s){return s.can_write?j({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?j({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?j({id:"/0j34W",defaultMessage:"Can chat"}):j({id:"x2E8ET",defaultMessage:"Unknown"})}function me({capabilities:s,selected:a,onClick:t}){let o=null;s.can_write?o=oa:s.can_view_config?o=ca:s.can_read&&(o=da);const c=s.can_write?e.jsx(n,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(n,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(n,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(C.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:t,icon:o,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(n,M({},Z(s)))}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:c})]}),e.jsx(Hs,{className:he("icon-lg shrink-0",!a&&"invisible")})]})}const ye={private:de,user:de,group:de,workspace_link:He,workspace:$s,link:He,marketplace:Js};function Q({shareLevel:s,workspaceName:a,hasInviteSharing:t=!0}){(s===r.User||s===r.Group)&&(s=r.Private);const o=ye[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(o,{className:"icon text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!t&&s===r.Private?e.jsx(n,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(n,F(M({},gs[s]),{values:{workspaceName:a}}))})]})}function fs({publishedGizmo:s,sharing:a,workspaceName:t,onClose:o}){var U,B;const c=se(),l=a.recipient,u=ye[l],v=ee(),y=rs();return e.jsxs(Y,{testId:"modal-gizmo-updated",isOpen:!0,onClose:o,showCloseButton:!0,className:"w-[304px]",title:e.jsx(n,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx($,{onClick:()=>{window.location.href="/g/".concat(s.gizmo.id)},children:e.jsx(n,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx($,{color:"secondary",onClick:m=>ns(c,s,y,m,v.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(ke,{gizmo:{profilePictureUrl:(U=s.gizmo.display.profile_picture_url)!=null?U:void 0,name:s.gizmo.display.name}}),a.subjects.filter(m=>pe(m)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((m,_)=>pe(m)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:m.type===f.GROUP?m.group_name:m.user_name}),m.type===f.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:m.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,M({},Z(m.capabilities)))})]},_))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(u,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,F(M({},(B=wa[l])!=null?B:gs[l]),{values:{workspaceName:t}}))}),(l===r.Workspace||l===r.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function ke({gizmo:s,category:a,categories:t,onCategoryChange:o}){const{data:c,isLoading:l}=Ys(),u=t==null?void 0:t.find(v=>v.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:he("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",l&&"invisible",t?"rounded-t-lg":"rounded-lg"),children:[e.jsx(sa,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(aa,{builderName:c==null?void 0:c.display_name,builderUrl:c==null?void 0:c.website_url,socials:[c==null?void 0:c.socials.linkedin,c==null?void 0:c.socials.github].filter(v=>v!=null),className:"text-token-text-secondary text-xs"})]})]}),t&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:o?e.jsx(Ds,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[u==null?void 0:u.title,e.jsx(xe,{className:"icon"})]}),children:t.map((v,y)=>e.jsx(C.Item,{onClick:()=>o(v),children:v.title},y))}):e.jsx("span",{className:"text-token-text-secondary",children:u==null?void 0:u.title})})]})]})}function Ma({onAdd:s,publishedGizmo:a,canListMembers:t}){var q,V,T;const o=ee(),c=se(),l=ts(c),[u,v]=N.useState(""),y=t===!0,B=(q=ta(y?l==null?void 0:l.id:void 0,0,u,5).data)==null?void 0:q.items.filter(d=>d.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)),{data:m}=Rs({queryKey:[l==null?void 0:l.id,"groups","filtered",u],queryFn:()=>ls.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:u,offset:0,orderby:"@score",limit:20}}}),enabled:y&&u.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function _(d,g,R){s({type:f.GROUP,group_id:d,group_name:g,capabilities:M({},A),is_scim_managed:R}),v("")}function h(d,g,R){l&&(s({type:f.USER,user_id:d,user_name:g,user_email:R,capabilities:M({},A)}),v(""))}const E=l!=null&&l.isEnterprisey()?o.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):o.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:z}=ia(ce.hasSeenMultipleGPTEditorsTooltip),D=!y,I=D?e.jsx(ra,{ariaLabel:E,disabled:!0,name:"share-with-input",placeholder:E,value:u}):e.jsx(ua,{label:E,name:"share-with-input",inputValue:u,onInputChange:v,suggestions:[...(V=B==null?void 0:B.map(d=>({id:d.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var g;return h(d.account_user_id,d.name,(g=d.email)!=null?g:"")},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:d.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:d.email})]})})))!=null?V:[],...(T=m==null?void 0:m.items.map(d=>({id:d.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var g;return _(d.id,d.name,(g=d.is_scim_managed)!=null?g:!1)},children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:d.name}),d.is_scim_managed&&e.jsx(ms,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(n,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:d.num_members}})})]})})))!=null?T:[]]});return e.jsxs(e.Fragment,{children:[t===!1&&e.jsxs("div",{className:"border-token-border-medium bg-token-main-surface-secondary text-token-text-primary flex items-center gap-3 rounded-md border px-4 py-3",children:[e.jsx(Vs,{className:"icon-sm interactive-label-warning-secondary shrink-0"}),e.jsx(n,{id:"6e1nG9",defaultMessage:"You don't have permission to search your workspace members. Please contact your workspace admin for access or update the workspace settings."})]}),t!==!1&&e.jsx("div",{className:"flex w-full flex-row space-x-3",children:z&&!D?e.jsx(na,{announcementKey:ce.hasSeenMultipleGPTEditorsTooltip,show:z,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:o.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:()=>la(c,ce.hasSeenMultipleGPTEditorsTooltip),children:I}):I})]})}function ba(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}const Na={findHighestSharingSubject:is,duplicateSharingSubject:ps,CAP_READ:A,CAP_VIEW_CONFIG:J},Aa=Object.freeze(Object.defineProperty({__proto__:null,GizmoTile:ke,GizmoUpdatedModal:fs,SHARE_LEVEL_ICONS:ye,ShareGizmoModal:va,ShareLevelItem:Q,TestExports:Na,sharingSubjectToSharingParam:xs},Symbol.toStringTag,{value:"Module"}));export{cs as A,ke as G,ds as M,Q as S,va as a,ye as b,fs as c,La as d,Aa as e,Ia as g,W as i,xs as s};
//# sourceMappingURL=hzwjbf9hohqarzkm.js.map
