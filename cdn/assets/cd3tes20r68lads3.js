var h=Object.defineProperty;var l=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var w=(a,e,n)=>e in a?h(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,u=(a,e)=>{for(var n in e||(e={}))B.call(e,n)&&w(a,n,e[n]);if(l)for(var n of l(e))I.call(e,n)&&w(a,n,e[n]);return a};import{a0 as g,a1 as b,j as P,r as f,A as k}from"./fg33krlcm0qyi6yw.js";import{b as y,_ as o,rz as C}from"./mtk1qztvnb31pw5r.js";import{du as F}from"./k65njl5wlgspihfr.js";const D=async a=>{await k.signOut({callbackUrl:a}),C()},m=(a,e)=>{D(a).then(()=>o.addTiming("chatgpt.web.logout.shouldClearIndexedDB")).catch(n=>{o.addError(new Error("Failed to logout",{cause:n}))})};function T({federatedLogoutUri:a}){const e=y(),{isFannyPackInitializerEnabled:n}=F(e);return f.useEffect(()=>{const d=a!=null?a:window.location.origin;window&&window.indexedDB&&n&&typeof window.indexedDB.databases=="function"?(o.addAction("chatgpt.web.logout.clearIndexedDB"),(async()=>{const x=(await window.indexedDB.databases()).map(t=>new Promise((s,E)=>{if(t.name){const r=window.indexedDB.deleteDatabase(t.name);r.onsuccess=()=>s(),r.onerror=p=>{o.addError(new Error("Delete IndexedDB failed for database ".concat(t.name,", ").concat(p))),E()},r.onblocked=()=>{o.addError(new Error("Delete IndexedDB blocked for database ".concat(t.name))),s()}}else o.addError(new Error("Invalid database name ".concat(t.name))),s()}));await Promise.race([Promise.all(x),new Promise(t=>setTimeout(t,_))])})().then(()=>{o.addTiming("chatgpt.web.logout.clearedIndexedDB"),m(d)}).catch(i=>{o.addError(new Error("Failed to clear IndexedDB",{cause:i})),m(d)})):D(a!=null?a:window.location.origin).catch(c=>o.addError(new Error("Failed to logout",{cause:c})))},[n,a]),null}const M=g(function(){const e=b();return P.jsx(T,u({},e))}),_=2e3;export{M as default};
//# sourceMappingURL=cd3tes20r68lads3.js.map
