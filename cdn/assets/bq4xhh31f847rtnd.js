import{q as m,a0 as _,n as l,b as E,r as d}from"./fg33krlcm0qyi6yw.js";import{R as k,p as w,ko as p,b3 as u,kp as h}from"./mtk1qztvnb31pw5r.js";const y=m({queryKey:["mfaToken"],queryFn:async()=>{try{const t=await k.safePost("/accounts/mfa/user/request_mfa_token_in_house");if(!t||!t.state_token)throw new Error("Failed to fetch MFA token");return t.state_token}catch(t){if(t instanceof w){const e=t.detail;if((e==null?void 0:e.code)==="mfa_email_required"){window.location.href=p(h.ENABLE_MFA_EMAIL_REQUIRED,"/#settings/".concat(u.Account));return}}window.location.href=p(h.ENABLE_MFA_ERROR,"/#settings/".concat(u.Security))}}}),R=_(function(){var i,c,f;const[e]=l(),n=(i=e.get("factor"))!=null?i:"totp",s=(c=e.get("app"))!=null?c:"ChatGPT",o=(f=e.get("redirect_path"))!=null?f:void 0,{data:a}=E(y);return d.useEffect(()=>{if(!a)return;const r=new URLSearchParams({origin_app_name:s,mfa_token:a});o&&r.set("redirect_path",o),n==="passkey"?window.location.href="https://auth.openai.com/passkey-enroll?".concat(r.toString()):window.location.href="https://auth.openai.com/totp_enroll?".concat(r.toString())},[a,s,o,n]),null});export{R as default};
//# sourceMappingURL=bq4xhh31f847rtnd.js.map
