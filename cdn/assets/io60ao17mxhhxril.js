import{c as M,e as F,j as o,r as P}from"./fg33krlcm0qyi6yw.js";import{b as L,mC as $,mA as O,a9 as W,l as S,P as z,aY as R,C as U}from"./mtk1qztvnb31pw5r.js";import{jF as Y,jG as H,jH as K,jI as G,jJ as J,jK as V,jL as q}from"./k65njl5wlgspihfr.js";function Q(r){"use forget";const e=M.c(32),{modalInfo:t,conversationId:i,formatAction:f,onClose:d}=r,{action_items:a}=t,n=F(),m=L();let u;e[0]!==a?(u=a!=null?a:[],e[0]=a,e[1]=u):u=e[1];let h;e[2]!==u?(h=u.find(te),e[2]=u,e[3]=h):h=e[3];const s=h;let _;e[4]!==s||e[5]!==f?(_={dropdownAction:s,formatAction:f},e[4]=s,e[5]=f,e[6]=_):_=e[6];const j=Y(_);if(!(a!=null&&a.length))return null;if(s&&j.length>0){let l;return e[7]!==i||e[8]!==s||e[9]!==j||e[10]!==t||e[11]!==d?(l=o.jsx("div",{className:"flex w-full flex-col items-center gap-2 px-8 pb-8",children:o.jsx(K,{variant:"modal",beaconInfo:t,conversationId:i,dropdownAction:s,dropdownItems:j,onClose:d})}),e[7]=i,e[8]=s,e[9]=j,e[10]=t,e[11]=d,e[12]=l):l=e[12],l}let v,w,x;if(e[13]!==a||e[14]!==m||e[15]!==f||e[16]!==n||e[17]!==t||e[18]!==d){x=Symbol.for("react.early_return_sentinel");e:{let l;e[22]!==f?(l=b=>{const g=f(b);return g?{action:b,formatted:g}:null},e[22]=f,e[23]=l):l=e[23];const I=(a!=null?a:[]).map(l).filter(ee),p=I.find(Z);if(p&&p.formatted&&"onThennableClick"in p.formatted&&p.formatted.onThennableClick){x=o.jsx("div",{className:"flex justify-center pb-10",children:o.jsx(H,{onThennableClick:p.formatted.onThennableClick,text:p.formatted.text})});break e}const N=I.filter(X);if(N.length===0){x=null;break e}v="mx-6 flex flex-col justify-center gap-3 pb-8 sm:flex-row";let C;e[24]!==m||e[25]!==n||e[26]!==t||e[27]!==d?(C=b=>{const{action:g,formatted:c}=b,A=typeof c.text=="string"?c.text:n.formatMessage(c.text),B=async()=>{var k;"onThennableClick"in c&&c.onThennableClick?await c.onThennableClick():(k=c.onClick)==null||k.call(c),J(m,t),d()};return o.jsx(W,{onClick:B,color:G(g.type),size:"large",children:A},g.id)},e[24]=m,e[25]=n,e[26]=t,e[27]=d,e[28]=C):C=e[28],w=N.map(C)}e[13]=a,e[14]=m,e[15]=f,e[16]=n,e[17]=t,e[18]=d,e[19]=v,e[20]=w,e[21]=x}else v=e[19],w=e[20],x=e[21];if(x!==Symbol.for("react.early_return_sentinel"))return x;let y;return e[29]!==v||e[30]!==w?(y=o.jsx("div",{className:v,children:w}),e[29]=v,e[30]=w,e[31]=y):y=e[31],y}function X(r){const{action:e}=r;return e.type!==O.COPY}function Z(r){const{action:e,formatted:t}=r;return e.type===O.COPY&&"onThennableClick"in t&&typeof t.onThennableClick=="function"}function ee(r){return r!=null}function te(r){return(r==null?void 0:r.action_v2.action_enum)===$.DROPDOWN}function ae(r){"use forget";const e=M.c(41),{trackBeaconDismissAndClearBeaconUIState:t,onClose:i,openFileDialog:f,persistedSystemHintsStore:d,composerController:a,modalInfo:n,clientThreadId:m}=r,{title:u,description:h,header_image_url:s}=n.ui_info,{action_items:_,footer_text:j}=n,[v,w]=P.useState(!1);let x,y;e[0]!==s?(x=()=>{if(s){const E=new Image;E.src=s,E.onload=()=>w(!0)}},y=[s],e[0]=s,e[1]=x,e[2]=y):(x=e[1],y=e[2]),P.useEffect(x,y);const l=!(_!=null&&_.length),I="beacon-modal-".concat(n.beacon_id);let p;e[3]!==m||e[4]!==a||e[5]!==n||e[6]!==f||e[7]!==d||e[8]!==I?(p={clientThreadId:m,location:I,composerController:a,persistedSystemHintsStore:d,openFileDialog:f,beaconInfo:n},e[3]=m,e[4]=a,e[5]=n,e[6]=f,e[7]=d,e[8]=I,e[9]=p):p=e[9];const N=V(p);if(s&&!v)return null;let C;e[10]!==n.beacon_id||e[11]!==n.beacon_name||e[12]!==i?(C=()=>{i(),z.logEventWithStatsig("Web Beacon Modal Closed Without Dismiss","chatgpt_web_beacon_modal_closed_without_dismiss",{beacon_id:n.beacon_id,beacon_name:n.beacon_name}),q.dismiss()},e[10]=n.beacon_id,e[11]=n.beacon_name,e[12]=i,e[13]=C):C=e[13];const b=C;let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=S("relative flex max-w-[480px] flex-col"),e[14]=g):g=e[14];let c;e[15]!==i||e[16]!==t?(c=()=>{t(),i()},e[15]=i,e[16]=t,e[17]=c):c=e[17];let A;e[18]!==i||e[19]!==t?(A=o.jsx("div",{className:"absolute end-4 top-4 z-50",children:o.jsx(R,{className:"bg-token-main-surface-primary/20! hover:bg-token-main-surface-primary/30! active:bg-token-main-surface-primary/80 dark:bg-token-main-surface-primary/20! dark:hover:bg-token-main-surface-primary/30 dark:active:bg-token-main-surface-primary/70 rounded-full! shadow-xs ring-0! backdrop-blur-md transition-colors focus:ring-0! focus:ring-offset-0! focus:outline-0!",onClick:()=>{t(),i()}})}),e[18]=i,e[19]=t,e[20]=A):A=e[20];let B;e[21]!==h||e[22]!==s||e[23]!==l||e[24]!==u?(B=s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"relative w-full flex-1",children:o.jsx("img",{src:s,className:"w-full object-contain object-bottom",alt:""})}),o.jsxs("div",{className:S("mt-0 flex flex-1 flex-col items-center justify-center gap-2 px-8 pt-10 pb-6",l&&"pb-16"),children:[o.jsx("div",{className:"".concat(l?"text-center text-[24px]":"text-start text-[20px]"," leading-7 font-medium"),children:u}),o.jsx("div",{className:S("text-token-text-secondary mt-0 w-full text-center text-[16px] font-normal",l&&"text-center text-[17px]"),children:h})]})]}):o.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-12 pb-8",children:[o.jsx("div",{className:"".concat(l?"text-center text-[24px]":"text-start text-[20px]"," leading-7 font-medium"),children:u}),o.jsx("div",{className:S("text-token-text-secondary mt-0 w-full text-start text-[16px] font-normal",l&&"text-center text-[17px]"),children:h})]}),e[21]=h,e[22]=s,e[23]=l,e[24]=u,e[25]=B):B=e[25];let k;e[26]!==m||e[27]!==b||e[28]!==N||e[29]!==n?(k=o.jsx(Q,{modalInfo:n,conversationId:m,formatAction:N,onClose:b}),e[26]=m,e[27]=b,e[28]=N,e[29]=n,e[30]=k):k=e[30];let T;e[31]!==j?(T=j&&o.jsx("div",{className:"text-token-text-tertiary px-8 pb-10 font-normal",children:j}),e[31]=j,e[32]=T):T=e[32];let D;return e[33]!==b||e[34]!==k||e[35]!==T||e[36]!==c||e[37]!==A||e[38]!==B||e[39]!==t?(D=o.jsxs(U,{isOpen:!0,onClose:b,testId:"modal-beacon",size:"custom",type:"success",noPadding:!0,showCloseButton:!1,className:g,onPointerDownOutside:t,onEscapeKeyDown:c,children:[A,B,k,T]}),e[33]=b,e[34]=k,e[35]=T,e[36]=c,e[37]=A,e[38]=B,e[39]=t,e[40]=D):D=e[40],D}export{ae as BeaconModal};
//# sourceMappingURL=io60ao17mxhhxril.js.map
