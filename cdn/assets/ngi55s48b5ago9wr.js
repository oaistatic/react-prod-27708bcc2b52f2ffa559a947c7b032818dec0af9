import{c as je,e as we,r as _,j as s}from"./fg33krlcm0qyi6yw.js";import{fW as Ne,b2 as ke,cw as Ie,fV as Ae,z as Ee}from"./k65njl5wlgspihfr.js";import{m as Oe,mv as Re,d as Te,mR as Be,hv as de,sy as ze,M as ge,C as Qe}from"./mtk1qztvnb31pw5r.js";import{u as Ve}from"./hie92tcr1tc04u0h.js";import{a as _e}from"./n0j63kuyzhwawzvp.js";import"./cdscbhv4xu1gie74.js";import"./j6c7t6fq2e2dzq0l.js";import"./uwm5r01je8eaqgfc.js";import"./ir9gt1ho5jxrc5j1.js";import"./jaya7jppqn559p04.js";import"./mh627gt08lvdeswk.js";import"./k43gn7pl526u53kc.js";import"./jdzosouyvpzu0tpb.js";import"./o4kivb8wp4536409.js";import"./nq1hpdu2db6kh8n1.js";import"./mr025ud04jb4rh0r.js";import"./dcp7peq4y6a4kabz.js";import"./l6gg4oal15ycpbhj.js";import"./27egyxvdbhiyko0z.js";import"./he7oe7s4xa3cph5y.js";import"./gy1lpvuoewmzh42c.js";import"./jed1ux7qibe55pmj.js";import"./h1em0bjkpkjv8ykw.js";import"./nfccle6oyncifphl.js";import"./hu1bt0oauegdhua6.js";import"./ojve869uwykk95at.js";import"./ly75bs3d14n5v622.js";import"./e4epv5uv3mte9vwk.js";import"./h7j5jaik108ahib8.js";import"./cu8wmvebhh39ned9.js";import"./mwvbcixk8j7xayed.js";import"./dy5lfx8pblnkst90.js";import"./fwtgnu9jfrrdfrmw.js";import"./jamwnn6d0jz74foj.js";import"./oa3pp0k35b2ppxx3.js";import"./ciyotrhew4275t06.js";import"./ojlr534s5rpslkxs.js";import"./i343cenm2z0sru19.js";import"./khjleze1r7lyk9e0.js";import"./l79tw55p1ybii0aj.js";import"./jawullnjvz8da20g.js";import"./c2pd1td4qqo2eofo.js";import"./b9zbambfgbao1jch.js";import"./bgx9m29b5moow7ak.js";import"./exbyaee45o0onuld.js";import"./ifr23omr9d78ntp2.js";import"./hcn3kohxpjzaoxwc.js";import"./iwjq7ihlx67l3ajk.js";import"./ft3sidzsg2kspvj9.js";import"./h0pbwkfesoibvhzi.js";function Qt(Z){"use forget";const e=je.c(101),{onClose:d,sessionId:p,secret:r,email:pe,onActivated:D,onCancelled:F,renderAsSheet:Me}=Z,fe=pe===void 0?"":pe,t=we(),n=Oe(),f=Ve(),[l,be]=_.useState(""),[c,H]=_.useState(null);let L;e[0]===Symbol.for("react.memo_cache_sentinel")?(L=Re(),e[0]=L):L=e[0];const[a,ye]=_.useState(L),[X,ue]=_.useState(!1),Ce=Te(Be),he=!!Me;let U;e[1]===Symbol.for("react.memo_cache_sentinel")?(U=ze(),e[1]=U):U=e[1];const xe=U,m=he&&!xe,ee=he&&xe,[ve,te]=_.useState(!1),i=m&&ve;let $;e[2]===Symbol.for("react.memo_cache_sentinel")?($=()=>{ue(!0),setTimeout(()=>ue(!1),2e3)},e[2]=$):$=e[2];const se=$;let q;e[3]!==F||e[4]!==d?(q=()=>{F&&F(),d()},e[3]=F,e[4]=d,e[5]=q):q=e[5];const u=q;let oe;e:{if(!r){oe="";break e}const o=encodeURIComponent(fe?"OpenAI:".concat(fe):"OpenAI");let V,Y;if(e[6]!==o||e[7]!==r){const Se=new URLSearchParams({secret:r,issuer:"OpenAI"});V=o,Y=Se.toString(),e[6]=o,e[7]=r,e[8]=V,e[9]=Y}else V=e[8],Y=e[9];oe="otpauth://totp/".concat(V,"?").concat(Y)}const W=oe;let J;e[10]!==f||e[11]!==l||e[12]!==t||e[13]!==D||e[14]!==d||e[15]!==p||e[16]!==n?(J=async()=>{try{H(null),await f.mutateAsync({factor:"totp",code:l.trim(),sessionId:p}),n.success(t.formatMessage({id:"CGNzQD",defaultMessage:"Authenticator app enabled"}),{testId:"totp-mfa-activation-success"}),D&&D(),d()}catch(o){const V=o;H(t.formatMessage(_e(V)))}},e[10]=f,e[11]=l,e[12]=t,e[13]=D,e[14]=d,e[15]=p,e[16]=n,e[17]=J):J=e[17];const h=J,ae=!ee,re=ee?"bg-token-bg-primary":void 0,le=ee?"top":void 0,ie=m?Ce?"fit":"fill":void 0,ne=m?"large":void 0,me=m?"h-[max(100svh,100dvh,100%)]":void 0,ce=m?"sm:border-token-border-light! max-sm:h-full max-sm:w-screen max-sm:max-w-none max-sm:rounded-none sm:w-[calc(100vw-2rem)] sm:max-w-[900px] sm:border":void 0;let x;e[18]!==t?(x=t.formatMessage({id:"hvzmYC",defaultMessage:"Connect your authenticator app"}),e[18]=t,e[19]=x):x=e[19];let g;e[20]!==x?(g=s.jsx("span",{className:"text-heading-3",children:x}),e[20]=x,e[21]=g):g=e[21];let M;e[22]!==t?(M=t.formatMessage({id:"nqOq3M",defaultMessage:"Verify"}),e[22]=t,e[23]=M):M=e[23];let b;e[24]!==f||e[25]!==l||e[26]!==p?(b=l.trim().length!==6||!p||f.isPending,e[24]=f,e[25]=l,e[26]=p,e[27]=b):b=e[27];let y;e[28]!==h||e[29]!==M||e[30]!==b?(y=s.jsx(ge.Button,{title:M,color:"primary",disabled:b,onClick:h}),e[28]=h,e[29]=M,e[30]=b,e[31]=y):y=e[31];let C;e[32]!==t?(C=t.formatMessage({id:"JEMdlA",defaultMessage:"Cancel"}),e[32]=t,e[33]=C):C=e[33];let v;e[34]!==u||e[35]!==C?(v=s.jsx(ge.Button,{title:C,color:"secondary",onClick:u}),e[34]=u,e[35]=C,e[36]=v):v=e[36];let S;e[37]!==i||e[38]!==t||e[39]!==a?(S=!i&&s.jsxs("div",{className:"text-token-text-primary text-sm",children:[s.jsx("span",{className:"me-1 font-semibold",children:t.formatMessage({id:"JUk2xI",defaultMessage:"Step 1:"})}),a?t.formatMessage({id:"cmQdj3",defaultMessage:"Enter the secret code below in your authenticator app, then enter the 6-digit code from the app."}):t.formatMessage({id:"NAp5hF",defaultMessage:"Scan the QR code using your authenticator app, then enter the 6-digit code from the app."})]}),e[37]=i,e[38]=t,e[39]=a,e[40]=S):S=e[40];let j;e[41]!==X||e[42]!==i||e[43]!==t||e[44]!==W||e[45]!==r||e[46]!==a||e[47]!==n?(j=r&&!i&&s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"border-token-border-light rounded-2xl border p-5",children:s.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[!a&&W?s.jsx(Ne,{value:W,size:180,includeMargin:!0}):null,a&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-token-border-light cursor-pointer rounded-md border px-3 py-2 font-mono text-base break-all select-text",onClick:o=>{de(r,n,o).then(()=>{se()})},role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),de(r,n,o).then(()=>{se()}))},"aria-label":t.formatMessage({id:"j/bzO/",defaultMessage:"Copy code"}),title:t.formatMessage({id:"2gRO6C",defaultMessage:"Copy code"}),children:r}),s.jsx(ke,{shouldChangeText:!1,buttonText:X?t.formatMessage({id:"seLOsT",defaultMessage:"Copied"}):t.formatMessage({id:"v3Cpi4",defaultMessage:"Copy code"}),onCopy:o=>{de(r,n,o).then(()=>{se()})},className:"text-sm"})]}),s.jsx("button",{type:"button",className:"text-blue-400",onClick:()=>ye(De),children:a?t.formatMessage({id:"yhrWS1",defaultMessage:"Show QR code instead"}):t.formatMessage({id:"Zqkdz9",defaultMessage:"Trouble scanning?"})})]})})}),e[41]=X,e[42]=i,e[43]=t,e[44]=W,e[45]=r,e[46]=a,e[47]=n,e[48]=j):j=e[48];let w;e[49]!==i||e[50]!==t||e[51]!==a?(w=i&&s.jsx("div",{className:"-mt-1",children:s.jsxs("button",{type:"button",className:"text-token-text-secondary hover:text-token-text-primary flex items-center gap-1 text-xs",onClick:()=>{te(!1)},"aria-label":t.formatMessage({id:"xvBgd/",defaultMessage:"Show {what}"},{what:a?"code":"QR code"}),children:[s.jsx(Ie,{className:"icon-sm"}),s.jsx("span",{children:t.formatMessage({id:"ab4EWd",defaultMessage:"Show {what}"},{what:a?"secret code":"QR code"})})]})}),e[49]=i,e[50]=t,e[51]=a,e[52]=w):w=e[52];let N;e[53]!==t?(N=t.formatMessage({id:"OtuOes",defaultMessage:"Step 2:"}),e[53]=t,e[54]=N):N=e[54];let k;e[55]!==N?(k=s.jsx("span",{className:"me-1 font-semibold",children:N}),e[55]=N,e[56]=k):k=e[56];let I;e[57]!==t?(I=t.formatMessage({id:"VyVwRC",defaultMessage:"Enter your 6-digit code"}),e[57]=t,e[58]=I):I=e[58];let A;e[59]!==k||e[60]!==I?(A=s.jsxs("div",{className:"text-token-text-primary mt-2 text-sm",children:[k,I]}),e[59]=k,e[60]=I,e[61]=A):A=e[61];let E;e[62]!==h?(E=o=>{o.preventDefault(),h()},e[62]=h,e[63]=E):E=e[63];let O;e[64]!==t?(O=t.formatMessage({id:"f3B3Ii",defaultMessage:"Enter your 6-digit code"}),e[64]=t,e[65]=O):O=e[65];let R;e[66]!==c?(R=o=>{be(o.target.value),c&&H(null)},e[66]=c,e[67]=R):R=e[67];let P,G;e[68]===Symbol.for("react.memo_cache_sentinel")?(P=()=>te(!0),G=()=>te(!1),e[68]=P,e[69]=G):(P=e[68],G=e[69]);let T;e[70]!==l||e[71]!==O||e[72]!==R?(T=s.jsx(Ee,{className:"w-full max-w-md",ariaLabel:!1,name:"totp_otp",placeholder:O,value:l,onChange:R,onFocus:P,onBlur:G}),e[70]=l,e[71]=O,e[72]=R,e[73]=T):T=e[73];let B;e[74]!==E||e[75]!==T?(B=s.jsx("form",{onSubmit:E,className:"flex w-full justify-start",children:T}),e[74]=E,e[75]=T,e[76]=B):B=e[76];let z;e[77]!==c||e[78]!==t?(z=c&&s.jsxs("p",{className:"flex gap-1 text-xs text-red-500",children:[s.jsx(Ae,{title:t.formatMessage({id:"totp.errorIcon",defaultMessage:"Error"})}),c]}),e[77]=c,e[78]=t,e[79]=z):z=e[79];let Q;e[80]!==S||e[81]!==j||e[82]!==w||e[83]!==A||e[84]!==B||e[85]!==z?(Q=s.jsx("div",{className:"text-token-text-primary self-stretch text-sm",children:s.jsxs("div",{className:"flex flex-col items-start gap-[16px] self-stretch",children:[S,j,w,A,B,z]})}),e[80]=S,e[81]=j,e[82]=w,e[83]=A,e[84]=B,e[85]=z,e[86]=Q):Q=e[86];let K;return e[87]!==u||e[88]!==le||e[89]!==ie||e[90]!==ne||e[91]!==me||e[92]!==ce||e[93]!==g||e[94]!==y||e[95]!==v||e[96]!==Q||e[97]!==ae||e[98]!==re||e[99]!==m?(K=s.jsx(Qe,{testId:"modal-enroll-totp",contentClassName:"!px-6 !pt-6 !pb-[88px] md:!pb-[24px]",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",shouldIgnoreClickOutside:!0,showCloseButton:!0,hasSeparator:!0,isOpen:!0,onClose:u,showOverlayBackground:ae,overlayClassName:re,position:le,isBottomSheet:m,contentSize:ie,topMargin:ne,contentSheetViewClassName:me,className:ce,type:"success",modalActionsClassName:"!mt-[24px]",title:g,primaryButton:y,secondaryButton:v,children:Q}),e[87]=u,e[88]=le,e[89]=ie,e[90]=ne,e[91]=me,e[92]=ce,e[93]=g,e[94]=y,e[95]=v,e[96]=Q,e[97]=ae,e[98]=re,e[99]=m,e[100]=K):K=e[100],K}function De(Z){return!Z}export{Qt as EnrollTotpModal};
//# sourceMappingURL=ngi55s48b5ago9wr.js.map
